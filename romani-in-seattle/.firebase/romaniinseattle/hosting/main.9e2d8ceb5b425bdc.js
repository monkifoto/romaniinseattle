"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(ls,qn,We)=>{We.d(qn,{$:()=>$t,A:()=>Ce,G:()=>jt,K:()=>Ml,L:()=>Ms,N:()=>Wi,P:()=>Q_,R:()=>W_,U:()=>mt,V:()=>_o,W:()=>Q,X:()=>ve,Y:()=>Pe,Z:()=>U,_:()=>vt,a:()=>Cc,a0:()=>w_,a1:()=>dd,a2:()=>wn,a3:()=>A_,a4:()=>D_,a5:()=>S_,a6:()=>fd,a7:()=>gb,a8:()=>qe,a9:()=>Bn,aA:()=>pa,aB:()=>Zt,aC:()=>te,aD:()=>no,aE:()=>Ne,aF:()=>Xt,aG:()=>Dd,aH:()=>ty,aI:()=>Ob,aJ:()=>Vn,aN:()=>Ac,aQ:()=>Ke,aa:()=>Ll,ab:()=>Ec,ac:()=>dr,ad:()=>Ic,ae:()=>Ct,af:()=>hr,ag:()=>bc,ah:()=>Vl,ak:()=>Ul,al:()=>zt,am:()=>_M,ap:()=>pb,aq:()=>mi,as:()=>bM,at:()=>N_,au:()=>It,av:()=>lc,aw:()=>ht,ax:()=>Kt,ay:()=>Od,az:()=>oy,b:()=>yb,c:()=>Y_,d:()=>Et,e:()=>X_,f:()=>Jt,g:()=>eo,h:()=>Xr,i:()=>Eb,j:()=>Nb,k:()=>fy,l:()=>Xs,m:()=>xM,p:()=>Bt,r:()=>Z_,s:()=>cp,u:()=>Pi});var x=We(861),Re=We(303),j=We(58),xe=We(879),Pt=We(582),Dn=We(537);const Bt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ce={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const jt=function Xe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Gn=function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xt=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new xe.Yd("@firebase/auth");function gn(p,...u){it.logLevel<=xe.in.ERROR&&it.error(`Auth (${Re.SDK_VERSION}): ${p}`,...u)}function Kt(p,...u){throw Me(p,...u)}function Zt(p,...u){return Me(p,...u)}function Tr(p,u,d){const g=Object.assign(Object.assign({},Gn()),{[u]:d});return new j.LL("auth","Firebase",g).create(u,{appName:p.name})}function Ot(p){return Tr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pt(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Kt(p,"argument-error"),Tr(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return xt.create(p,...u)}function te(p,u,...d){if(!p)throw Me(u,...d)}function tt(p){const u="INTERNAL ASSERTION FAILED: "+p;throw gn(u),new Error(u)}function It(p,u){p||tt(u)}function Nt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Nn(){return"http:"===dn()||"https:"===dn()}function dn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class cr{constructor(u,d){this.shortDelay=u,this.longDelay=d,It(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Nn()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(p,u){It(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class oe{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new cr(3e4,6e4);function Ee(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function ce(p,u,d,g){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,x.Z)(function*(p,u,d,g,v={}){return Lt(p,v,(0,x.Z)(function*(){let C={},G={};g&&("GET"===u?G=g:C={body:JSON.stringify(g)});const re=(0,j.xO)(Object.assign({key:p.config.apiKey},G)).slice(1),be=yield p._getAdditionalHeaders();return be["Content-Type"]="application/json",p.languageCode&&(be["X-Firebase-Locale"]=p.languageCode),oe.fetch()(_n(p,p.config.apiHost,d,re),Object.assign({method:u,headers:be,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function Lt(p,u,d){return De.apply(this,arguments)}function De(){return(De=(0,x.Z)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ue),u);try{const v=new En(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const G=yield C.json();if("needConfirmation"in G)throw Rn(p,"account-exists-with-different-credential",G);if(C.ok&&!("errorMessage"in G))return G;{const re=C.ok?G.errorMessage:G.error.message,[be,Ge]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===be)throw Rn(p,"credential-already-in-use",G);if("EMAIL_EXISTS"===be)throw Rn(p,"email-already-in-use",G);if("USER_DISABLED"===be)throw Rn(p,"user-disabled",G);const st=g[be]||be.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw Tr(p,st,Ge);Kt(p,st)}}catch(v){if(v instanceof j.ZR)throw v;Kt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Ye(p,u,d,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,x.Z)(function*(p,u,d,g,v={}){const C=yield ce(p,u,d,g,v);return"mfaPendingCredential"in C&&Kt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function _n(p,u,d,g){const v=`${u}${d}?${g}`;return p.config.emulator?se(p.config,v):`${p.config.apiScheme}://${v}`}function hn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Zt(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Zt(p,u,g);return v.customData._tokenResponse=d,v}function Yt(p){return void 0!==p&&void 0!==p.getResponse}function Wn(p){return void 0!==p&&void 0!==p.enterprise}class Cr{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return hn(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function oi(){return(oi=(0,x.Z)(function*(p){return(yield ce(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vt(p,u){return ai.apply(this,arguments)}function ai(){return(ai=(0,x.Z)(function*(p,u){return ce(p,"GET","/v2/recaptchaConfig",Ee(p,u))})).apply(this,arguments)}function Ci(){return(Ci=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Zr(){return(Zr=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function qs(p,u){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function gr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Fr(){return(Fr=(0,x.Z)(function*(p,u=!1){const d=(0,j.m9)(p),g=yield d.getIdToken(u),v=Gs(g);te(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,G=C?.sign_in_provider;return{claims:v,token:g,authTime:gr(Ln(v.auth_time)),issuedAtTime:gr(Ln(v.iat)),expirationTime:gr(Ln(v.exp)),signInProvider:G||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Ln(p){return 1e3*Number(p)}function Gs(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,j.tV)(d);return v?JSON.parse(v):(gn("Failed to decode base64 JWT payload"),null)}catch(v){return gn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Di(p){const u=Gs(p);return te(u,"internal-error"),te(typeof u.exp<"u","internal-error"),te(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function cn(p,u){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,x.Z)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof j.ZR&&function Si({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ds{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,x.Z)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,x.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class lr{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function In(p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,x.Z)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),v=yield cn(p,qs(d,{idToken:g}));te(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const G=null!==(u=C.providerUserInfo)&&void 0!==u&&u.length?Ws(C.providerUserInfo):[],re=function Ss(p,u){return[...p.filter(g=>!u.some(v=>v.providerId===g.providerId)),...u]}(p.providerData,G),st=!!p.isAnonymous&&!(p.email&&C.passwordHash||re?.length),Ht={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:re,metadata:new lr(C.createdAt,C.lastLoginAt),isAnonymous:st};Object.assign(p,Ht)})).apply(this,arguments)}function fs(){return(fs=(0,x.Z)(function*(p){const u=(0,j.m9)(p);yield In(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Ws(p){return p.map(u=>{var{providerId:d}=u,g=(0,Pt._T)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function R(){return(R=(0,x.Z)(function*(p,u){const d=yield Lt(p,{},(0,x.Z)(function*(){const g=(0,j.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,G=_n(p,v,"/v1/token",`key=${C}`),re=yield p._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",oe.fetch()(G,{method:"POST",headers:re,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,x.Z)(function*(p,u){return ce(p,"POST","/v2/accounts:revokeToken",Ee(p,u))})).apply(this,arguments)}class D{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){te(u.idToken,"internal-error"),te(typeof u.idToken<"u","internal-error"),te(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Di(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){te(0!==u.length,"internal-error");const d=Di(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,x.Z)(function*(){return d||!g.accessToken||g.isExpired?(te(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,x.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:G}=yield function ke(p,u){return R.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(v,C,Number(G))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,G=new D;return g&&(te("string"==typeof g,"internal-error",{appName:u}),G.refreshToken=g),v&&(te("string"==typeof v,"internal-error",{appName:u}),G.accessToken=v),C&&(te("number"==typeof C,"internal-error",{appName:u}),G.expirationTime=C),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new D,this.toJSON())}_performRefresh(){return tt("not implemented")}}function w(p,u){te("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class V{constructor(u){var{uid:d,auth:g,stsTokenManager:v}=u,C=(0,Pt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ds(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new lr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,x.Z)(function*(){const g=yield cn(d,d.stsTokenManager.getToken(d.auth,u));return te(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function nn(p){return Fr.apply(this,arguments)}(this,u)}reload(){return function hs(p){return fs.apply(this,arguments)}(this)}_assign(u){this!==u&&(te(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new V(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,x.Z)(function*(){let v=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield In(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,x.Z)(function*(){if((0,Re._isFirebaseServerApp)(u.auth.app))return Promise.reject(Ot(u.auth));const d=yield u.getIdToken();return yield cn(u,function us(p,u){return Ci.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,v,C,G,re,be,Ge,st;const Ht=null!==(g=d.displayName)&&void 0!==g?g:void 0,ei=null!==(v=d.email)&&void 0!==v?v:void 0,xi=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,Ld=null!==(G=d.photoURL)&&void 0!==G?G:void 0,Mp=null!==(re=d.tenantId)&&void 0!==re?re:void 0,Vd=null!==(be=d._redirectEventId)&&void 0!==be?be:void 0,Oc=null!==(Ge=d.createdAt)&&void 0!==Ge?Ge:void 0,gy=null!==(st=d.lastLoginAt)&&void 0!==st?st:void 0,{uid:ti,emailVerified:my,isAnonymous:Hr,providerData:Zl,stsTokenManager:_y}=d;te(ti&&_y,u,"internal-error");const yy=D.fromJSON(this.name,_y);te("string"==typeof ti,u,"internal-error"),w(Ht,u.name),w(ei,u.name),te("boolean"==typeof my,u,"internal-error"),te("boolean"==typeof Hr,u,"internal-error"),w(xi,u.name),w(Ld,u.name),w(Mp,u.name),w(Vd,u.name),w(Oc,u.name),w(gy,u.name);const Nc=new V({uid:ti,auth:u,email:ei,emailVerified:my,displayName:Ht,isAnonymous:Hr,photoURL:Ld,phoneNumber:xi,tenantId:Mp,stsTokenManager:yy,createdAt:Oc,lastLoginAt:gy});return Zl&&Array.isArray(Zl)&&(Nc.providerData=Zl.map(kc=>Object.assign({},kc))),Vd&&(Nc._redirectEventId=Vd),Nc}static _fromIdTokenResponse(u,d,g=!1){return(0,x.Z)(function*(){const v=new D;v.updateFromServerResponse(d);const C=new V({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:g});return yield In(C),C})()}static _fromGetAccountInfoResponse(u,d,g){return(0,x.Z)(function*(){const v=d.users[0];te(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?Ws(v.providerUserInfo):[],G=!(v.email&&v.passwordHash||C?.length),re=new D;re.updateFromIdToken(g);const be=new V({uid:v.localId,auth:u,stsTokenManager:re,isAnonymous:G}),Ge={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new lr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(be,Ge),be})()}}const fe=new Map;function Ne(p){It(p instanceof Function,"Expected a class definition");let u=fe.get(p);return u?(It(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,fe.set(p,u),u)}const mt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,x.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,x.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,x.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,x.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Xt(p,u,d){return`firebase:${p}:${u}:${d}`}class Le{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Xt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Xt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,x.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?V._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,x.Z)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,x.Z)(function*(){if(!d.length)return new Le(Ne(mt),u,g);const v=(yield Promise.all(d.map(function(){var Ge=(0,x.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let C=v[0]||Ne(mt);const G=Xt(g,u.config.apiKey,u.name);let re=null;for(const Ge of d)try{const st=yield Ge._get(G);if(st){const Ht=V._fromJSON(u,st);Ge!==C&&(re=Ht),C=Ge;break}}catch{}const be=v.filter(Ge=>Ge._shouldAllowMigration);return C._shouldAllowMigration&&be.length?(C=be[0],re&&(yield C._set(G,re.toJSON())),yield Promise.all(d.map(function(){var Ge=(0,x.Z)(function*(st){if(st!==C)try{yield st._remove(G)}catch{}});return function(st){return Ge.apply(this,arguments)}}())),new Le(C,u,g)):new Le(C,u,g)})()}}function bn(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(ln(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(ot(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(ac(u))return"Blackberry";if(cc(u))return"Webos";if(Vr(u))return"Safari";if((u.includes("chrome/")||go(u))&&!u.includes("edge/"))return"Chrome";if(ht(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function ot(p=(0,j.z$)()){return/firefox\//i.test(p)}function Vr(p=(0,j.z$)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function go(p=(0,j.z$)()){return/crios\//i.test(p)}function ln(p=(0,j.z$)()){return/iemobile/i.test(p)}function ht(p=(0,j.z$)()){return/android/i.test(p)}function ac(p=(0,j.z$)()){return/blackberry/i.test(p)}function cc(p=(0,j.z$)()){return/webos/i.test(p)}function lc(p=(0,j.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function pa(p=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function _t(p=(0,j.z$)()){return lc(p)||ht(p)||cc(p)||ac(p)||/windows phone/i.test(p)||ln(p)}function dc(p,u=[]){let d;switch(p){case"Browser":d=bn((0,j.z$)());break;case"Worker":d=`${bn((0,j.z$)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Re.SDK_VERSION}/${g}`}class Dr{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=C=>new Promise((G,re)=>{try{G(u(C))}catch(be){re(be)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,x.Z)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const v of d.queue)yield v(u),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function ur(){return(ur=(0,x.Z)(function*(p,u={}){return ce(p,"GET","/v2/passwordPolicy",Ee(p,u))})).apply(this,arguments)}class kf{constructor(u){var d,g,v,C;const G=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=G.minPasswordLength)&&void 0!==d?d:6,G.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=G.maxPasswordLength),void 0!==G.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=G.containsLowercaseCharacter),void 0!==G.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=G.containsUppercaseCharacter),void 0!==G.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=G.containsNumericCharacter),void 0!==G.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=G.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=u.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,v,C,G,re;const be={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,be),this.validatePasswordCharacterOptions(u,be),be.isValid&&(be.isValid=null===(d=be.meetsMinPasswordLength)||void 0===d||d),be.isValid&&(be.isValid=null===(g=be.meetsMaxPasswordLength)||void 0===g||g),be.isValid&&(be.isValid=null===(v=be.containsLowercaseLetter)||void 0===v||v),be.isValid&&(be.isValid=null===(C=be.containsUppercaseLetter)||void 0===C||C),be.isValid&&(be.isValid=null===(G=be.containsNumericCharacter)||void 0===G||G),be.isValid&&(be.isValid=null===(re=be.containsNonAlphanumericCharacter)||void 0===re||re),be}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)g=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=C))}}class Ff{constructor(u,d,g,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new Dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=Ne(d)),this._initializationPromise=this.queue((0,x.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Le.create(g,u),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,x.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,x.Z)(function*(){try{const g=yield qs(d,{idToken:u}),v=yield V._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,x.Z)(function*(){var g;if((0,Re._isFirebaseServerApp)(d.app)){const re=d.app.settings.authIdToken;return re?new Promise(be=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(re).then(be,be))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,G=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const re=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,be=C?._redirectEventId,Ge=yield d.tryRedirectSignIn(u);(!re||re===be)&&Ge?.user&&(C=Ge.user,G=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(G)try{yield d.beforeStateQueue.runMiddleware(C)}catch(re){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(re))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(u){var d=this;return(0,x.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,x.Z)(function*(){try{yield In(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function mn(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,x.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,x.Z)(function*(){if((0,Re._isFirebaseServerApp)(d.app))return Promise.reject(Ot(d));const g=u?(0,j.m9)(u):null;return g&&te(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,x.Z)(function*(){if(!g._deleted)return u&&te(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,x.Z)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,x.Z)(function*(){return(0,Re._isFirebaseServerApp)(u.app)?Promise.reject(Ot(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,Re._isFirebaseServerApp)(this.app)?Promise.reject(Ot(this)):this.queue((0,x.Z)(function*(){yield d.assertedPersistence.setPersistence(Ne(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,x.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,x.Z)(function*(){const d=yield function Nf(p){return ur.apply(this,arguments)}(u),g=new kf(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new j.LL("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,x.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function O(p,u){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,x.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,x.Z)(function*(){if(!d.redirectPersistenceManager){const g=u&&Ne(u)||d._popupRedirectResolver;te(g,d,"argument-error"),d.redirectPersistenceManager=yield Le.create(d,[Ne(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,x.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,x.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,x.Z)(function*(){if(u===d.currentUser)return d.queue((0,x.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let G=!1;const re=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(re,this,"internal-error"),re.then(()=>{G||C(this.currentUser)}),"function"==typeof d){const be=u.addObserver(d,g,v);return()=>{G=!0,be()}}{const be=u.addObserver(d);return()=>{G=!0,be()}}}directlySetCurrentUser(u){var d=this;return(0,x.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=dc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,x.Z)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield u._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var u=this;return(0,x.Z)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Mn(p,...u){it.logLevel<=xe.in.WARN&&it.warn(`Auth (${Re.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Vn(p){return(0,j.m9)(p)}class Ks{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,j.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hc={loadJS:()=>(0,x.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xu(p){return hc.loadJS(p)}function ed(p){return`__${p}${Math.floor(1e6*Math.random())}`}class ft{constructor(u){this.type="recaptcha-enterprise",this.auth=Vn(u)}verify(u="verify",d=!1){var g=this;return(0,x.Z)(function*(){function C(){return C=(0,x.Z)(function*(re){if(!d){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var be=(0,x.Z)(function*(Ge,st){Vt(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ht=>{if(void 0!==Ht.recaptchaKey){const ei=new Cr(Ht);return null==re.tenantId?re._agentRecaptchaConfig=ei:re._tenantRecaptchaConfigs[re.tenantId]=ei,Ge(ei.siteKey)}st(new Error("recaptcha Enterprise site key undefined"))}).catch(Ht=>{st(Ht)})});return function(Ge,st){return be.apply(this,arguments)}}())}),C.apply(this,arguments)}function G(re,be,Ge){const st=window.grecaptcha;Wn(st)?st.enterprise.ready(()=>{st.enterprise.execute(re,{action:u}).then(Ht=>{be(Ht)}).catch(()=>{be("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,be)=>{(function v(re){return C.apply(this,arguments)})(g.auth).then(Ge=>{if(!d&&Wn(window.grecaptcha))G(Ge,re,be);else{if(typeof window>"u")return void be(new Error("RecaptchaVerifier is only supported in browser"));let st=function Lf(){return hc.recaptchaEnterpriseScript}();0!==st.length&&(st+=Ge),Xu(st).then(()=>{G(Ge,re,be)}).catch(Ht=>{be(Ht)})}}).catch(Ge=>{be(Ge)})})})()}}function td(p,u,d){return nd.apply(this,arguments)}function nd(){return(nd=(0,x.Z)(function*(p,u,d,g=!1){const v=new ft(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const G=Object.assign({},u);return Object.assign(G,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}function fc(p,u,d,g){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,x.Z)(function*(p,u,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield td(p,u,d,"getOobCode"===d);return g(p,C)}return g(p,u).catch(function(){var C=(0,x.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const re=yield td(p,u,d,"getOobCode"===d);return g(p,re)}return Promise.reject(G)});return function(G){return C.apply(this,arguments)}}())}),Fe.apply(this,arguments)}function Ml(p,u,d){const g=Vn(p);te(g._canInitEmulator,g,"emulator-config-failed"),te(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=rd(u),{host:G,port:re}=function pc(p){const u=rd(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:mo(g.substr(C.length+1))}}{const[C,G]=g.split(":");return{host:C,port:mo(G)}}}(u);g.config.emulator={url:`${C}//${G}${null===re?"":`:${re}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:G,port:re,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Rl(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function rd(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function mo(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class Ms{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return tt("not implemented")}_getIdTokenResponse(u){return tt("not implemented")}_linkToIdToken(u,d){return tt("not implemented")}_getReauthenticationResolver(u){return tt("not implemented")}}function id(p,u){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:resetPassword",Ee(p,u))})).apply(this,arguments)}function Oo(){return(Oo=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ci(p,u){return No.apply(this,arguments)}function No(){return(No=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function on(){return(on=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:update",Ee(p,u))})).apply(this,arguments)}function I_(p,u){return gc.apply(this,arguments)}function gc(){return(gc=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithPassword",Ee(p,u))})).apply(this,arguments)}function Ie(p,u){return ko.apply(this,arguments)}function ko(){return(ko=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:sendOobCode",Ee(p,u))})).apply(this,arguments)}function _c(){return(_c=(0,x.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function ma(p,u){return xl.apply(this,arguments)}function xl(){return(xl=(0,x.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function _a(p,u){return sd.apply(this,arguments)}function sd(){return(sd=(0,x.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function Ol(){return(Ol=(0,x.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function ya(){return(ya=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithEmailLink",Ee(p,u))})).apply(this,arguments)}function Lo(){return(Lo=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithEmailLink",Ee(p,u))})).apply(this,arguments)}class Sr extends Ms{constructor(u,d,g,v=null){super("password",g),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new Sr(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new Sr(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,x.Z)(function*(){switch(d.signInMethod){case"password":return fc(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",I_);case"emailLink":return function Vf(p,u){return ya.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Kt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,x.Z)(function*(){switch(g.signInMethod){case"password":return fc(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ci);case"emailLink":return function Fo(p,u){return Lo.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Kt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Gi(p,u){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithIdp",Ee(p,u))})).apply(this,arguments)}class Wi extends Ms{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new Wi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Kt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v}=d,C=(0,Pt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const G=new Wi(g,v);return G.idToken=C.idToken||void 0,G.accessToken=C.accessToken||void 0,G.secret=C.secret,G.nonce=C.nonce,G.pendingToken=C.pendingToken||null,G}_getIdTokenResponse(u){return Gi(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Gi(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Gi(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,j.xO)(d)}return u}}function kl(){return(kl=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:sendVerificationCode",Ee(p,u))})).apply(this,arguments)}function Ea(){return(Ea=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,u))})).apply(this,arguments)}function Fl(){return(Fl=(0,x.Z)(function*(p,u){const d=yield Ye(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,u));if(d.temporaryProof)throw Rn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const $e={USER_NOT_FOUND:"user-not-found"};function Ia(){return(Ia=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),$e)})).apply(this,arguments)}class Ki extends Ms{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Ki({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Ki({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function Zs(p,u){return Ea.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function pe(p,u){return Fl.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function yc(p,u){return Ia.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=u;return g||d||v||C?new Ki({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class vc{constructor(u){var d,g,v,C,G,re;const be=(0,j.zd)((0,j.pd)(u)),Ge=null!==(d=be.apiKey)&&void 0!==d?d:null,st=null!==(g=be.oobCode)&&void 0!==g?g:null,Ht=function b_(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=be.mode)&&void 0!==v?v:null);te(Ge&&st&&Ht,"argument-error"),this.apiKey=Ge,this.operation=Ht,this.code=st,this.continueUrl=null!==(C=be.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(G=be.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(re=be.tenantId)&&void 0!==re?re:null}static parseLink(u){const d=function od(p){const u=(0,j.zd)((0,j.pd)(p)).link,d=u?(0,j.zd)((0,j.pd)(u)).deep_link_id:null,g=(0,j.zd)((0,j.pd)(p)).deep_link_id;return(g?(0,j.zd)((0,j.pd)(g)).link:null)||g||d||u||p}(u);try{return new vc(d)}catch{return null}}}let _o=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Sr._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=vc.parseLink(g);return te(v,"argument-error"),Sr._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class nr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class M extends nr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class U extends M{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Wi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return te(u.idToken||u.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return U.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return U.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:G,providerId:re}=u;if(!g&&!v&&!d&&!C||!re)return null;try{return new U(re)._credential({idToken:d,accessToken:g,nonce:G,pendingToken:C})}catch{return null}}}let Q=(()=>{class p extends M{constructor(){super("facebook.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ve=(()=>{class p extends M{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Pe=(()=>{class p extends M{constructor(){super("github.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Ke extends Ms{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return Gi(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Gi(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Gi(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Ke(g,C):null}static _create(u,d){return new Ke(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vt extends nr{constructor(u){te(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return vt.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return vt.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Ke.fromJSON(u);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return Ke._create(g,d)}catch{return null}}}let $t=(()=>{class p extends M{constructor(){super("twitter.com")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Ur(p,u){return ps.apply(this,arguments)}function ps(){return(ps=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signUp",Ee(p,u))})).apply(this,arguments)}class Br{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,v=!1){return(0,x.Z)(function*(){const C=yield V._fromIdTokenResponse(u,g,v),G=pi(g);return new Br({user:C,providerId:G,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,x.Z)(function*(){yield u._updateTokensIfNecessary(g,!0);const v=pi(g);return new Br({user:u,providerId:v,_tokenResponse:g,operationType:d})})()}}function pi(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function w_(p){return ad.apply(this,arguments)}function ad(){return(ad=(0,x.Z)(function*(p){var u;if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const d=Vn(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Br({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Ur(d,{returnSecureToken:!0}),v=yield Br._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class cd extends j.ZR{constructor(u,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:u.name,tenantId:null!==(C=u.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,v){return new cd(u,d,g,v)}}function Bf(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?cd._fromErrorAndOperation(p,C,u,g):C})}function T_(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function pb(p,u){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,x.Z)(function*(p,u){const d=(0,j.m9)(p);yield ud(!0,d,u);const{providerUserInfo:g}=yield function qi(p,u){return Zr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=T_(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Zi.apply(this,arguments)}function jf(p,u){return ld.apply(this,arguments)}function ld(){return(ld=(0,x.Z)(function*(p,u,d=!1){const g=yield cn(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Br._forOperation(p,"link",g)})).apply(this,arguments)}function ud(p,u,d){return $f.apply(this,arguments)}function $f(){return($f=(0,x.Z)(function*(p,u,d){yield In(u);const v=!1===p?"provider-already-linked":"no-such-provider";te(T_(u.providerData).has(d)===p,u.auth,v)})).apply(this,arguments)}function C_(p,u){return zf.apply(this,arguments)}function zf(){return(zf=(0,x.Z)(function*(p,u,d=!1){const{auth:g}=p;if((0,Re._isFirebaseServerApp)(g.app))return Promise.reject(Ot(g));const v="reauthenticate";try{const C=yield cn(p,Bf(g,v,u,p),d);te(C.idToken,g,"internal-error");const G=Gs(C.idToken);te(G,g,"internal-error");const{sub:re}=G;return te(p.uid===re,g,"user-mismatch"),Br._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&Kt(g,"user-mismatch"),C}})).apply(this,arguments)}function Hf(p,u){return qf.apply(this,arguments)}function qf(){return(qf=(0,x.Z)(function*(p,u,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g="signIn",v=yield Bf(p,g,u),C=yield Br._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function dd(p,u){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,x.Z)(function*(p,u){return Hf(Vn(p),u)})).apply(this,arguments)}function wn(p,u){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,x.Z)(function*(p,u){const d=(0,j.m9)(p);return yield ud(!1,d,u.providerId),jf(d,u)})).apply(this,arguments)}function A_(p,u){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,x.Z)(function*(p,u){return C_((0,j.m9)(p),u)})).apply(this,arguments)}function Zf(){return(Zf=(0,x.Z)(function*(p,u){return Ye(p,"POST","/v1/accounts:signInWithCustomToken",Ee(p,u))})).apply(this,arguments)}function D_(p,u){return nt.apply(this,arguments)}function nt(){return nt=(0,x.Z)(function*(p,u){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const d=Vn(p),g=yield function Pn(p,u){return Zf.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield Br._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),nt.apply(this,arguments)}class jr{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Gt._fromServerResponse(u,d):"totpInfo"in d?Mr._fromServerResponse(u,d):Kt(u,"internal-error")}}class Gt extends jr{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Gt(d)}}class Mr extends jr{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Mr(d)}}function $r(p,u,d){var g;te((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Vo(p){return gi.apply(this,arguments)}function gi(){return(gi=(0,x.Z)(function*(p){const u=Vn(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function S_(p,u,d){return hd.apply(this,arguments)}function hd(){return(hd=(0,x.Z)(function*(p,u,d){const g=Vn(p),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&$r(g,v,d),yield fc(g,v,"getOobCode",ma)})).apply(this,arguments)}function fd(p,u,d){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,x.Z)(function*(p,u,d){yield id((0,j.m9)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,x.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Vo(p),v});return function(v){return g.apply(this,arguments)}}())}),Qf.apply(this,arguments)}function gb(p,u){return Un.apply(this,arguments)}function Un(){return Un=(0,x.Z)(function*(p,u){yield function E_(p,u){return on.apply(this,arguments)}((0,j.m9)(p),{oobCode:u})}),Un.apply(this,arguments)}function qe(p,u){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,x.Z)(function*(p,u){const d=(0,j.m9)(p),g=yield id(d,{oobCode:u}),v=g.requestType;switch(te(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(g.mfaInfo,d,"internal-error");default:te(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=jr._fromServerResponse(Vn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function Bn(p,u){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,x.Z)(function*(p,u){const{data:d}=yield qe((0,j.m9)(p),u);return d.email})).apply(this,arguments)}function Ll(p,u,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,x.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=Vn(p),G=yield fc(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ur).catch(be=>{throw"auth/password-does-not-meet-requirements"===be.code&&Vo(p),be}),re=yield Br._fromIdTokenResponse(g,"signIn",G);return yield g._updateCurrentUser(re.user),re})).apply(this,arguments)}function Ec(p,u,d){return(0,Re._isFirebaseServerApp)(p.app)?Promise.reject(Ot(p)):dd((0,j.m9)(p),_o.credential(u,d)).catch(function(){var g=(0,x.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Vo(p),v});return function(v){return g.apply(this,arguments)}}())}function dr(p,u,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,x.Z)(function*(p,u,d){const g=Vn(p),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function C(G,re){te(re.handleCodeInApp,g,"argument-error"),re&&$r(g,G,re)})(v,d),yield fc(g,v,"getOobCode",_a)})).apply(this,arguments)}function Ic(p,u){const d=vc.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}function Ct(p,u,d){return ba.apply(this,arguments)}function ba(){return(ba=(0,x.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=(0,j.m9)(p),v=_o.credentialWithLink(u,d||Nt());return te(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),dd(g,v)})).apply(this,arguments)}function Uo(){return(Uo=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:createAuthUri",Ee(p,u))})).apply(this,arguments)}function hr(p,u){return wa.apply(this,arguments)}function wa(){return wa=(0,x.Z)(function*(p,u){const g={identifier:u,continueUri:Nn()?Nt():"http://localhost"},{signinMethods:v}=yield function M_(p,u){return Uo.apply(this,arguments)}((0,j.m9)(p),g);return v||[]}),wa.apply(this,arguments)}function bc(p,u){return gs.apply(this,arguments)}function gs(){return gs=(0,x.Z)(function*(p,u){const d=(0,j.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&$r(d.auth,v,u);const{email:C}=yield function mc(p,u){return _c.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),gs.apply(this,arguments)}function Vl(p,u,d){return pd.apply(this,arguments)}function pd(){return pd=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&$r(g.auth,C,d);const{email:G}=yield function Rs(p,u){return Ol.apply(this,arguments)}(g.auth,C);G!==p.email&&(yield p.reload())}),pd.apply(this,arguments)}function xs(){return(xs=(0,x.Z)(function*(p,u){return ce(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ul(p,u){return Ta.apply(this,arguments)}function Ta(){return Ta=(0,x.Z)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,j.m9)(p),C={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},G=yield cn(g,function Bo(p,u){return xs.apply(this,arguments)}(g.auth,C));g.displayName=G.displayName||null,g.photoURL=G.photoUrl||null;const re=g.providerData.find(({providerId:be})=>"password"===be);re&&(re.displayName=g.displayName,re.photoURL=g.photoURL),yield g._updateTokensIfNecessary(G)}),Ta.apply(this,arguments)}function zt(p,u){const d=(0,j.m9)(p);return(0,Re._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ot(d.auth)):gd(d,u,null)}function _M(p,u){return gd((0,j.m9)(p),null,u)}function gd(p,u,d){return md.apply(this,arguments)}function md(){return md=(0,x.Z)(function*(p,u,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(C.email=u),d&&(C.password=d);const G=yield cn(p,function Pl(p,u){return Oo.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(G,!0)}),md.apply(this,arguments)}class yo{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class Ca extends yo{constructor(u,d,g,v){super(u,d,g),this.username=v}}class Bl extends yo{constructor(u,d){super(u,"facebook.com",d)}}class Yr extends Ca{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class yM extends yo{constructor(u,d){super(u,"google.com",d)}}class Ri extends Ca{constructor(u,d,g){super(u,"twitter.com",d,g)}}function mi(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ys(p){var u,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const G=null===(d=null===(u=Gs(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(G)return new yo(C,"anonymous"!==G&&"custom"!==G?G:null)}if(!g)return null;switch(g){case"facebook.com":return new Bl(C,v);case"github.com":return new Yr(C,v);case"google.com":return new yM(C,v);case"twitter.com":return new Ri(C,v,p.screenName||null);case"custom":case"anonymous":return new yo(C,null);default:return new yo(C,g,v)}}(d)}class Tc{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new Tc("enroll",u,d)}static _fromMfaPendingCredential(u){return new Tc("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Tc._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return Tc._fromIdtoken(u.multiFactorSession.idToken)}return null}}class x_{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Vn(u),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(re=>jr._fromServerResponse(g,re));te(v.mfaPendingCredential,g,"internal-error");const G=Tc._fromMfaPendingCredential(v.mfaPendingCredential);return new x_(G,C,function(){var re=(0,x.Z)(function*(be){const Ge=yield be._process(g,G);delete v.mfaInfo,delete v.mfaPendingCredential;const st=Object.assign(Object.assign({},v),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(d.operationType){case"signIn":const Ht=yield Br._fromIdTokenResponse(g,d.operationType,st);return yield g._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return te(d.user,g,"internal-error"),Br._forOperation(d.user,d.operationType,st);default:Kt(g,"internal-error")}});return function(be){return re.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,x.Z)(function*(){return d.signInResolver(u)})()}}function bM(p,u){var d;const g=(0,j.m9)(p),v=u;return te(u.customData.operationType,g,"argument-error"),te(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),x_._fromError(g,v)}class O_{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>jr._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new O_(u)}getSession(){var u=this;return(0,x.Z)(function*(){return Tc._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,x.Z)(function*(){const v=u,C=yield g.getSession(),G=yield cn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(G),g.user.reload()})()}unenroll(u){var d=this;return(0,x.Z)(function*(){const g="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const C=yield cn(d.user,function AM(p,u){return ce(p,"POST","/v2/accounts/mfaEnrollment:withdraw",Ee(p,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:G})=>G!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const _d=new WeakMap;function N_(p){const u=(0,j.m9)(p);return _d.has(u)||_d.set(u,O_._fromUser(u)),_d.get(u)}const Jf="__sak";class _b{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const yb=(()=>{class p extends _b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function DM(){const p=(0,j.z$)();return Vr(p)||lc(p)}()&&function sn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_t(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((re,be,Ge)=>{this.notifyListeners(re,Ge)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(v);if(d.newValue!==re)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const re=this.storage.getItem(v);!g&&this.localCache[v]===re||this.notifyListeners(v,re)},G=this.storage.getItem(v);!function uc(){return(0,j.w1)()&&10===document.documentMode}()||G===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,x.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,x.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,x.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Cc=(()=>{class p extends _b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let k_=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,x.Z)(function*(){const v=d,{eventId:C,eventType:G,data:re}=v.data,be=g.handlersMap[G];if(!be?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:G});const Ge=Array.from(be).map(function(){var Ht=(0,x.Z)(function*(ei){return ei(v.origin,re)});return function(ei){return Ht.apply(this,arguments)}}()),st=yield function ms(p){return Promise.all(p.map(function(){var u=(0,x.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Ge);v.ports[0].postMessage({status:"done",eventId:C,eventType:G,response:st})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Ac(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class F_{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var v=this;return(0,x.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let G,re;return new Promise((be,Ge)=>{const st=Ac("",20);C.port1.start();const Ht=setTimeout(()=>{Ge(new Error("unsupported_event"))},g);re={messageChannel:C,onMessage(ei){const xi=ei;if(xi.data.eventId===st)switch(xi.data.status){case"ack":clearTimeout(Ht),G=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),be(xi.data.response);break;default:clearTimeout(Ht),clearTimeout(G),Ge(new Error("invalid_response"))}}},v.handlers.add(re),C.port1.addEventListener("message",re.onMessage),v.target.postMessage({eventType:u,eventId:st,data:d},[C.port2])}).finally(()=>{re&&v.removeMessageHandler(re)})})()}}function fr(){return window}function yd(){return typeof fr().WorkerGlobalScope<"u"&&"function"==typeof fr().importScripts}function jl(){return(jl=(0,x.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const np="firebaseLocalStorageDb",$o="firebaseLocalStorage",Da="fbase_key";class Dc{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function rp(p,u){return p.transaction([$o],u?"readwrite":"readonly").objectStore($o)}function U_(){const p=indexedDB.open(np,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore($o,{keyPath:Da})}catch(v){d(v)}}),p.addEventListener("success",(0,x.Z)(function*(){const g=p.result;g.objectStoreNames.contains($o)?u(g):(g.close(),yield function SM(){const p=indexedDB.deleteDatabase(np);return new Dc(p).toPromise()}(),u(yield U_()))}))})}function B_(p,u,d){return ip.apply(this,arguments)}function ip(){return(ip=(0,x.Z)(function*(p,u,d){const g=rp(p,!0).put({[Da]:u,value:d});return new Dc(g).toPromise()})).apply(this,arguments)}function Ed(){return(Ed=(0,x.Z)(function*(p,u){const d=rp(p,!1).get(u),g=yield new Dc(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Id(p,u){const d=rp(p,!0).delete(u);return new Dc(d).toPromise()}const Eb=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,x.Z)(function*(){return d.db||(d.db=yield U_()),d.db})()}_withRetries(d){var g=this;return(0,x.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,x.Z)(function*(){return yd()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,x.Z)(function*(){d.receiver=k_._getInstance(function V_(){return yd()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,x.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,x.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,x.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function tp(){return jl.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new F_(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,x.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function L_(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,x.Z)(function*(){try{if(!indexedDB)return!1;const d=yield U_();return yield B_(d,Jf,"1"),yield Id(d,Jf),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,x.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,x.Z)(function*(){return v._withPendingWrite((0,x.Z)(function*(){return yield v._withRetries(C=>B_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,x.Z)(function*(){const v=yield g._withRetries(C=>function MM(p,u){return Ed.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,x.Z)(function*(){return g._withPendingWrite((0,x.Z)(function*(){return yield g._withRetries(v=>Id(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,x.Z)(function*(){const g=yield d._withRetries(G=>{const re=rp(G,!1).getAll();return new Dc(re).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:G,value:re}of g)C.add(G),JSON.stringify(d.localCache[G])!==JSON.stringify(re)&&(d.notifyListeners(G,re),v.push(G));for(const G of Object.keys(d.localCache))d.localCache[G]&&!C.has(G)&&(d.notifyListeners(G,null),v.push(G));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,x.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),bd=1e12;class z_{constructor(u){this.auth=u,this.counter=bd,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Tb(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||bd;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||bd))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,x.Z)(function*(){var g;return null===(g=d._widgets.get(u||bd))||void 0===g||g.execute(),""})()}}class Tb{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;te(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function H_(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const op=ed("rcb"),RM=new cr(3e4,6e4);class Cb{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=fr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return te(function _s(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Yt(fr().grecaptcha)?Promise.resolve(fr().grecaptcha):new Promise((g,v)=>{const C=fr().setTimeout(()=>{v(Zt(u,"network-request-failed"))},RM.get());fr()[op]=()=>{fr().clearTimeout(C),delete fr()[op];const re=fr().grecaptcha;if(!re||!Yt(re))return void v(Zt(u,"internal-error"));const be=re.render;re.render=(Ge,st)=>{const Ht=be(Ge,st);return this.counter++,Ht},this.hostLanguage=d,g(re)},Xu(`${function Ju(){return hc.recaptchaV2Script}()}?${(0,j.xO)({onload:op,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Zt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=fr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class q_{load(u){return(0,x.Z)(function*(){return new z_(u)})()}clearedOneInstance(){}}const G_="recaptcha",Ab={theme:"light",type:"image"};class W_{constructor(u,d,g=Object.assign({},Ab)){this.parameters=g,this.type=G_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(u),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;te(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new q_:new Cb,this.validateStartingState()}verify(){var u=this;return(0,x.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const G=re=>{re&&(u.tokenChangeListeners.delete(G),C(re))};u.tokenChangeListeners.add(G),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=fr()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,x.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,x.Z)(function*(){te(Nn()&&!yd(),u.auth,"internal-error"),yield function K_(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Hi(p){return oi.apply(this,arguments)}(u.auth);te(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ap{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Ki._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function cp(p,u,d){return lp.apply(this,arguments)}function lp(){return(lp=(0,x.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=Vn(p),v=yield Sc(g,u,(0,j.m9)(d));return new ap(v,C=>dd(g,C))})).apply(this,arguments)}function Xs(p,u,d){return wd.apply(this,arguments)}function wd(){return(wd=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);yield ud(!1,g,"phone");const v=yield Sc(g.auth,u,(0,j.m9)(d));return new ap(v,C=>wn(g,C))})).apply(this,arguments)}function Z_(p,u,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ot(g.auth));const v=yield Sc(g.auth,u,(0,j.m9)(d));return new ap(v,C=>A_(g,C))})).apply(this,arguments)}function Sc(p,u,d){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,x.Z)(function*(p,u,d){var g;const v=yield d.verify();try{let C;if(te("string"==typeof v,p,"argument-error"),te(d.type===G_,p,"argument-error"),C="string"==typeof u?{phoneNumber:u}:u,"session"in C){const G=C.session;if("phoneNumber"in C)return te("enroll"===G.type,p,"internal-error"),(yield function wM(p,u){return ce(p,"POST","/v2/accounts/mfaEnrollment:start",Ee(p,u))}(p,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{te("signin"===G.type,p,"internal-error");const re=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return te(re,p,"missing-multi-factor-info"),(yield function Ib(p,u){return ce(p,"POST","/v2/accounts/mfaSignIn:start",Ee(p,u))}(p,{mfaPendingCredential:G.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function va(p,u){return kl.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return G}}finally{d._reset()}}),Mc.apply(this,arguments)}function Pi(p,u){return up.apply(this,arguments)}function up(){return(up=(0,x.Z)(function*(p,u){const d=(0,j.m9)(p);if((0,Re._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ot(d.auth));yield jf(d,u)})).apply(this,arguments)}let Q_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Vn(d)}verifyPhoneNumber(d,g){return Sc(this.auth,d,(0,j.m9)(g))}static credential(d,g){return Ki._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Ki._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function ys(p,u){return u?Ne(u):(te(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class _i extends Ms{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Gi(u,this._buildIdpRequest())}_linkToIdToken(u,d){return Gi(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return Gi(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function Db(p){return Hf(p.auth,new _i(p),p.bypassAuthState)}function Sb(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),C_(d,new _i(p),p.bypassAuthState)}function Mb(p){return Js.apply(this,arguments)}function Js(){return(Js=(0,x.Z)(function*(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),jf(d,new _i(p),p.bypassAuthState)})).apply(this,arguments)}class dp{constructor(u,d,g,v,C=!1){this.auth=u,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,x.Z)(function*(g,v){u.pendingPromise={resolve:g,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(C){u.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,x.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:G,error:re,type:be}=u;if(re)return void d.reject(re);const Ge={auth:d.auth,requestUri:g,sessionId:v,tenantId:G||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(be)(Ge))}catch(st){d.reject(st)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Db;case"linkViaPopup":case"linkViaRedirect":return Mb;case"reauthViaPopup":case"reauthViaRedirect":return Sb;default:Kt(this.auth,"internal-error")}}resolve(u){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rb=new cr(2e3,1e4);function Y_(p,u,d){return Td.apply(this,arguments)}function Td(){return(Td=(0,x.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Zt(p,"operation-not-supported-in-this-environment"));const g=Vn(p);pt(p,u,nr);const v=ys(g,d);return new J_(g,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function X_(p,u,d){return hp.apply(this,arguments)}function hp(){return(hp=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Zt(g.auth,"operation-not-supported-in-this-environment"));pt(g.auth,u,nr);const v=ys(g.auth,d);return new J_(g.auth,"reauthViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}function Et(p,u,d){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);pt(g.auth,u,nr);const v=ys(g.auth,d);return new J_(g.auth,"linkViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}let J_=(()=>{class p extends dp{constructor(d,g,v,C,G){super(d,g,C,G),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,x.Z)(function*(){const g=yield d.execute();return te(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,x.Z)(function*(){It(1===d.filter.length,"Popup operations only handle one event");const g=Ac();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Zt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Rb.get())};d()}}return p.currentPopupAction=null,p})();const Pb="pendingRedirect",$l=new Map;class xb extends dp{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,x.Z)(function*(){let g=$l.get(d.auth._key());if(!g){try{const C=(yield function ey(p,u){return zo.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}$l.set(d.auth._key(),g)}return d.bypassAuthState||$l.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,x.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const v=yield g.auth._redirectUserForId(u.eventId);if(v)return g.user=v,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,x.Z)(function*(){})()}cleanUp(){}}function zo(){return(zo=(0,x.Z)(function*(p,u){const d=we(u),g=ny(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function fp(p,u){return pp.apply(this,arguments)}function pp(){return(pp=(0,x.Z)(function*(p,u){return ny(p)._set(we(u),"true")})).apply(this,arguments)}function Ob(){$l.clear()}function ty(p,u){$l.set(p._key(),u)}function ny(p){return Ne(p._redirectPersistence)}function we(p){return Xt(Pb,p.config.apiKey,p.name)}function Jt(p,u,d){return function Ad(p,u,d){return Rc.apply(this,arguments)}(p,u,d)}function Rc(){return(Rc=(0,x.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=Vn(p);pt(p,u,nr),yield g._initializationPromise;const v=ys(g,d);return yield fp(v,g),v._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function Xr(p,u,d){return function ry(p,u,d){return Sa.apply(this,arguments)}(p,u,d)}function Sa(){return(Sa=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);if(pt(g.auth,u,nr),(0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ot(g.auth));yield g.auth._initializationPromise;const v=ys(g.auth,d);yield fp(v,g.auth);const C=yield to(g);return v._openRedirect(g.auth,u,"reauthViaRedirect",C)})).apply(this,arguments)}function eo(p,u,d){return function gp(p,u,d){return zl.apply(this,arguments)}(p,u,d)}function zl(){return(zl=(0,x.Z)(function*(p,u,d){const g=(0,j.m9)(p);pt(g.auth,u,nr),yield g.auth._initializationPromise;const v=ys(g.auth,d);yield ud(!1,g,u.providerId),yield fp(v,g.auth);const C=yield to(g);return v._openRedirect(g.auth,u,"linkViaRedirect",C)})).apply(this,arguments)}function Nb(p,u){return iy.apply(this,arguments)}function iy(){return(iy=(0,x.Z)(function*(p,u){return yield Vn(p)._initializationPromise,Dd(p,u,!1)})).apply(this,arguments)}function Dd(p,u){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,x.Z)(function*(p,u,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=Vn(p),v=ys(g,u),G=yield new xb(g,v,d).execute();return G&&!d&&(delete G.user._redirectEventId,yield g._persistUserIfCurrent(G.user),yield g._setRedirectUser(null,u)),G})).apply(this,arguments)}function to(p){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,x.Z)(function*(p){const u=Ac(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class no{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function kb(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mp(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!mp(u)){const v=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Zt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(u))}saveEventToCache(u){this.cachedEventUids.add(sy(u)),this.lastProcessedEventTime=Date.now()}}function sy(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function mp({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function oy(p){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,x.Z)(function*(p,u={}){return ce(p,"GET","/v1/projects",u)})).apply(this,arguments)}const _p=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ay=/^https?/;function vp(){return(vp=(0,x.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield oy(p);for(const d of u)try{if(cy(d))return}catch{}Kt(p,"unauthorized-domain")})).apply(this,arguments)}function cy(p){const u=Nt(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const G=new URL(p);return""===G.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&G.hostname===g}if(!ay.test(d))return!1;if(_p.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Ep=new cr(3e4,6e4);function Ip(){const p=fr().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let ql=null;const bp=new cr(5e3,15e3),Fb="__/auth/iframe",Lb="emulator/auth/iframe",yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ma=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kn(p){const u=p.config;te(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?se(u,Lb):`https://${p.config.authDomain}/${Fb}`,g={apiKey:u.apiKey,appName:p.name,v:Re.SDK_VERSION},v=Ma.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,j.xO)(g).slice(1)}`}function wp(){return wp=(0,x.Z)(function*(p){const u=yield function uy(p){return ql=ql||function ly(p){return new Promise((u,d)=>{var g,v,C;function G(){Ip(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Ip(),d(Zt(p,"network-request-failed"))},timeout:Ep.get()})}if(null!==(v=null===(g=fr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(C=fr().gapi)||void 0===C||!C.load){const re=ed("iframefcb");return fr()[re]=()=>{gapi.load?G():d(Zt(p,"network-request-failed"))},Xu(`${function __(){return hc.gapiScript}()}?onload=${re}`).catch(be=>d(be))}G()}}).catch(u=>{throw ql=null,u})}(p),ql}(p),d=fr().gapi;return te(d,p,"internal-error"),u.open({where:document.body,url:Kn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yi,dontclear:!0},g=>new Promise(function(){var v=(0,x.Z)(function*(C,G){yield g.restyle({setHideOnLeave:!1});const re=Zt(p,"network-request-failed"),be=fr().setTimeout(()=>{G(re)},bp.get());function Ge(){fr().clearTimeout(be),C(g)}g.ping(Ge).then(Ge,()=>{G(re)})});return function(C,G){return v.apply(this,arguments)}}()))}),wp.apply(this,arguments)}const Ub={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vo{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Pd="__/auth/handler",xd="emulator/auth/handler",Tp=encodeURIComponent("fac");function Od(p,u,d,g,v,C){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,x.Z)(function*(p,u,d,g,v,C){te(p.config.authDomain,p,"auth-domain-config-required"),te(p.config.apiKey,p,"invalid-api-key");const G={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Re.SDK_VERSION,eventId:v};if(u instanceof nr){u.setDefaultLanguage(p.languageCode),G.providerId=u.providerId||"",(0,j.xb)(u.getCustomParameters())||(G.customParameters=JSON.stringify(u.getCustomParameters()));for(const[st,Ht]of Object.entries(C||{}))G[st]=Ht}if(u instanceof M){const st=u.getScopes().filter(Ht=>""!==Ht);st.length>0&&(G.scopes=st.join(","))}p.tenantId&&(G.tid=p.tenantId);const re=G;for(const st of Object.keys(re))void 0===re[st]&&delete re[st];const be=yield p._getAppCheckToken(),Ge=be?`#${Tp}=${encodeURIComponent(be)}`:"";return`${function $b({config:p}){return p.emulator?se(p,xd):`https://${p.authDomain}/${Pd}`}(p)}?${(0,j.xO)(re).slice(1)}${Ge}`})).apply(this,arguments)}const Ho="webStorageSupport",fy=class Gl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cc,this._completeRedirectFn=Dd,this._overrideRedirectResult=ty}_openPopup(u,d,g,v){var C=this;return(0,x.Z)(function*(){var G;It(null===(G=C.eventManagers[u._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const re=yield Od(u,d,g,Nt(),v);return function jb(p,u,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),G=Math.max((window.screen.availWidth-g)/2,0).toString();let re="";const be=Object.assign(Object.assign({},Ub),{width:g.toString(),height:v.toString(),top:C,left:G}),Ge=(0,j.z$)().toLowerCase();d&&(re=go(Ge)?"_blank":d),ot(Ge)&&(u=u||"http://localhost",be.scrollbars="yes");const st=Object.entries(be).reduce((ei,[xi,Ld])=>`${ei}${xi}=${Ld},`,"");if(function he(p=(0,j.z$)()){var u;return lc(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ge)&&"_self"!==re)return function Rd(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",re),new vo(null);const Ht=window.open(u||"",re,st);te(Ht,p,"popup-blocked");try{Ht.focus()}catch{}return new vo(Ht)}(u,re,Ac())})()}_openRedirect(u,d,g,v){var C=this;return(0,x.Z)(function*(){return yield C._originValidation(u),function ep(p){fr().location.href=p}(yield Od(u,d,g,Nt(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(It(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,x.Z)(function*(){const g=yield function Vb(p){return wp.apply(this,arguments)}(u),v=new no(u);return g.register("authEvent",C=>(te(C?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=g,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Ho,{type:Ho},v=>{var C;const G=null===(C=v?.[0])||void 0===C?void 0:C[Ho];void 0!==G&&d(!!G),Kt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function yp(p){return vp.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return _t()||Vr()||lc()}};class PM{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Wl extends PM{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Wl(u)}_finalizeEnroll(u,d,g){return function TM(p,u){return ce(p,"POST","/v2/accounts/mfaEnrollment:finalize",Ee(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function j_(p,u){return ce(p,"POST","/v2/accounts/mfaSignIn:finalize",Ee(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xM=(()=>{class p{constructor(){}static assertion(d){return Wl._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var kd="@firebase/auth";class Hb{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,x.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function Yu(p){hc=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=v=>{const C=Zt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function ro(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Dp(p){(0,Re._registerComponent)(new Dn.wA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),C=u.getProvider("app-check-internal"),{apiKey:G,authDomain:re}=g.options;te(G&&!G.includes(":"),"invalid-api-key",{appName:g.name});const be={apiKey:G,authDomain:re,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dc(p)},Ge=new Ff(g,v,C,be);return function Sl(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Ne);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Ge,d),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Dn.wA("auth-internal",u=>{const d=Vn(u.getProvider("auth").getImmediate());return new Hb(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(kd,"1.7.4",function Kl(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Re.registerVersion)(kd,"1.7.4","esm2017")}("Browser")},58:(ls,qn,We)=>{We.d(qn,{$s:()=>fs,BH:()=>Tr,G6:()=>cr,L:()=>St,LL:()=>ce,P0:()=>gn,Pz:()=>Zt,Sg:()=>Ot,UG:()=>te,ZB:()=>Xe,ZR:()=>Ee,aH:()=>Kt,b$:()=>Nt,eu:()=>oe,hl:()=>se,jU:()=>tt,m9:()=>ke,ne:()=>qs,pd:()=>qi,r3:()=>Yt,ru:()=>It,tV:()=>ye,uI:()=>Me,vZ:()=>oi,w1:()=>dn,xO:()=>us,xb:()=>Cr,z$:()=>pt,zI:()=>ue,zd:()=>Ci});const xe=function(R){const O=[];let b=0;for(let D=0;D<R.length;D++){let w=R.charCodeAt(D);w<128?O[b++]=w:w<2048?(O[b++]=w>>6|192,O[b++]=63&w|128):55296==(64512&w)&&D+1<R.length&&56320==(64512&R.charCodeAt(D+1))?(w=65536+((1023&w)<<10)+(1023&R.charCodeAt(++D)),O[b++]=w>>18|240,O[b++]=w>>12&63|128,O[b++]=w>>6&63|128,O[b++]=63&w|128):(O[b++]=w>>12|224,O[b++]=w>>6&63|128,O[b++]=63&w|128)}return O},Dn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,O){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=O?this.byteToCharMapWebSafe_:this.byteToCharMap_,D=[];for(let w=0;w<R.length;w+=3){const V=R[w],fe=w+1<R.length,Ne=fe?R[w+1]:0,ze=w+2<R.length,mt=ze?R[w+2]:0;let bn=(15&Ne)<<2|mt>>6,ot=63&mt;ze||(ot=64,fe||(bn=64)),D.push(b[V>>2],b[(3&V)<<4|Ne>>4],b[bn],b[ot])}return D.join("")},encodeString(R,O){return this.HAS_NATIVE_SUPPORT&&!O?btoa(R):this.encodeByteArray(xe(R),O)},decodeString(R,O){return this.HAS_NATIVE_SUPPORT&&!O?atob(R):function(R){const O=[];let b=0,D=0;for(;b<R.length;){const w=R[b++];if(w<128)O[D++]=String.fromCharCode(w);else if(w>191&&w<224){const V=R[b++];O[D++]=String.fromCharCode((31&w)<<6|63&V)}else if(w>239&&w<365){const ze=((7&w)<<18|(63&R[b++])<<12|(63&R[b++])<<6|63&R[b++])-65536;O[D++]=String.fromCharCode(55296+(ze>>10)),O[D++]=String.fromCharCode(56320+(1023&ze))}else{const V=R[b++],fe=R[b++];O[D++]=String.fromCharCode((15&w)<<12|(63&V)<<6|63&fe)}}return O.join("")}(this.decodeStringToByteArray(R,O))},decodeStringToByteArray(R,O){this.init_();const b=O?this.charToByteMapWebSafe_:this.charToByteMap_,D=[];for(let w=0;w<R.length;){const V=b[R.charAt(w++)],Ne=w<R.length?b[R.charAt(w)]:0;++w;const mt=w<R.length?b[R.charAt(w)]:64;++w;const Le=w<R.length?b[R.charAt(w)]:64;if(++w,null==V||null==Ne||null==mt||null==Le)throw new Sn;D.push(V<<2|Ne>>4),64!==mt&&(D.push(Ne<<4&240|mt>>2),64!==Le&&D.push(mt<<6&192|Le))}return D},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class Sn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(R){return function(R){const O=xe(R);return Dn.encodeByteArray(O,!0)}(R).replace(/\./g,"")},ye=function(R){try{return Dn.decodeString(R,!0)}catch(O){console.error("base64Decode failed: ",O)}return null};function Xe(R,O){if(!(O instanceof Object))return O;switch(O.constructor){case Date:return new Date(O.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return O}for(const b in O)!O.hasOwnProperty(b)||!wt(b)||(R[b]=Xe(R[b],O[b]));return R}function wt(R){return"__proto__"!==R}const it=()=>{try{return function jt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const O=R&&ye(R[1]);return O&&JSON.parse(O)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},gn=R=>{const O=(R=>{var O,b;return null===(b=null===(O=it())||void 0===O?void 0:O.emulatorHosts)||void 0===b?void 0:b[R]})(R);if(!O)return;const b=O.lastIndexOf(":");if(b<=0||b+1===O.length)throw new Error(`Invalid host ${O} with no separate hostname and port!`);const D=parseInt(O.substring(b+1),10);return"["===O[0]?[O.substring(1,b-1),D]:[O.substring(0,b),D]},Kt=()=>{var R;return null===(R=it())||void 0===R?void 0:R.config},Zt=R=>{var O;return null===(O=it())||void 0===O?void 0:O[`_${R}`]};class Tr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((O,b)=>{this.resolve=O,this.reject=b})}wrapCallback(O){return(b,D)=>{b?this.reject(b):this.resolve(D),"function"==typeof O&&(this.promise.catch(()=>{}),1===O.length?O(b):O(b,D))}}}function Ot(R,O){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const D=O||"demo-project",w=R.iat||0,V=R.sub||R.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const fe=Object.assign({iss:`https://securetoken.google.com/${D}`,aud:D,iat:w,exp:w+3600,auth_time:w,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},R);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(fe)),""].join(".")}function pt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function te(){var R;const O=null===(R=it())||void 0===R?void 0:R.forceEnvironment;if("node"===O)return!0;if("browser"===O)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function It(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dn(){const R=pt();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function cr(){return!te()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){try{return"object"==typeof indexedDB}catch{return!1}}function oe(){return new Promise((R,O)=>{try{let b=!0;const D="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(D);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(D),R(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var V;O((null===(V=w.error)||void 0===V?void 0:V.message)||"")}}catch(b){O(b)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(O,b,D){super(b),this.code=O,this.customData=D,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(O,b,D){this.service=O,this.serviceName=b,this.errors=D}create(O,...b){const D=b[0]||{},w=`${this.service}/${O}`,V=this.errors[O],fe=V?function Oe(R,O){return R.replace(Lt,(b,D)=>{const w=O[D];return null!=w?String(w):`<${D}?>`})}(V,D):"Error";return new Ee(w,`${this.serviceName}: ${fe} (${w}).`,D)}}const Lt=/\{\$([^}]+)}/g;function Yt(R,O){return Object.prototype.hasOwnProperty.call(R,O)}function Cr(R){for(const O in R)if(Object.prototype.hasOwnProperty.call(R,O))return!1;return!0}function oi(R,O){if(R===O)return!0;const b=Object.keys(R),D=Object.keys(O);for(const w of b){if(!D.includes(w))return!1;const V=R[w],fe=O[w];if(Vt(V)&&Vt(fe)){if(!oi(V,fe))return!1}else if(V!==fe)return!1}for(const w of D)if(!b.includes(w))return!1;return!0}function Vt(R){return null!==R&&"object"==typeof R}function us(R){const O=[];for(const[b,D]of Object.entries(R))Array.isArray(D)?D.forEach(w=>{O.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):O.push(encodeURIComponent(b)+"="+encodeURIComponent(D));return O.length?"&"+O.join("&"):""}function Ci(R){const O={};return R.replace(/^\?/,"").split("&").forEach(D=>{if(D){const[w,V]=D.split("=");O[decodeURIComponent(w)]=decodeURIComponent(V)}}),O}function qi(R){const O=R.indexOf("?");if(!O)return"";const b=R.indexOf("#",O);return R.substring(O,b>0?b:void 0)}function qs(R,O){const b=new Ai(R,O);return b.subscribe.bind(b)}class Ai{constructor(O,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{O(this)}).catch(D=>{this.error(D)})}next(O){this.forEachObserver(b=>{b.next(O)})}error(O){this.forEachObserver(b=>{b.error(O)}),this.close(O)}complete(){this.forEachObserver(O=>{O.complete()}),this.close()}subscribe(O,b,D){let w;if(void 0===O&&void 0===b&&void 0===D)throw new Error("Missing Observer.");w=function Qr(R,O){if("object"!=typeof R||null===R)return!1;for(const b of O)if(b in R&&"function"==typeof R[b])return!0;return!1}(O,["next","error","complete"])?O:{next:O,error:b,complete:D},void 0===w.next&&(w.next=nn),void 0===w.error&&(w.error=nn),void 0===w.complete&&(w.complete=nn);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),V}unsubscribeOne(O){void 0===this.observers||void 0===this.observers[O]||(delete this.observers[O],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(O){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,O)}sendOne(O,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[O])try{b(this.observers[O])}catch(D){typeof console<"u"&&console.error&&console.error(D)}})}close(O){this.finalized||(this.finalized=!0,void 0!==O&&(this.finalError=O),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}const lr=1e3,In=2,Ar=144e5,hs=.5;function fs(R,O=lr,b=In){const D=O*Math.pow(b,R),w=Math.round(hs*D*(Math.random()-.5)*2);return Math.min(Ar,D+w)}function ke(R){return R&&R._delegate?R._delegate:R}},349:(ls,qn,We)=>{function x(n){return"function"==typeof n}function Re(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const j=Re(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function xe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Pt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(x(r))try{r()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Bt(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bt(e);else{if(e instanceof Pt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xe(t,e)}remove(e){const{_finalizers:t}=this;t&&xe(t,e),e instanceof Pt&&e._removeParent(this)}}Pt.EMPTY=(()=>{const n=new Pt;return n.closed=!0,n})();const Dn=Pt.EMPTY;function Sn(n){return n instanceof Pt||n&&"closed"in n&&x(n.remove)&&x(n.add)&&x(n.unsubscribe)}function Bt(n){x(n)?n():n.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ye={setTimeout(n,e,...t){const{delegate:r}=ye;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ye;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ce(n){ye.setTimeout(()=>{const{onUnhandledError:e}=St;if(!e)throw n;e(n)})}function Xe(){}const wt=xt("C",void 0,void 0);function xt(n,e,t){return{kind:n,value:e,error:t}}let ut=null;function it(n){if(St.useDeprecatedSynchronousErrorHandling){const e=!ut;if(e&&(ut={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ut;if(ut=null,t)throw r}}else n()}class gn extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sn(e)&&e.add(this)):this.destination=tt}static create(e,t,r){return new Ot(e,t,r)}next(e){this.isStopped?te(function Gn(n){return xt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?te(function jt(n){return xt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?te(wt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Kt=Function.prototype.bind;function Zt(n,e){return Kt.call(n,e)}class Tr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pt(r)}else pt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pt(t)}}}class Ot extends gn{constructor(e,t,r){let i;if(super(),x(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&St.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zt(e.next,s),error:e.error&&Zt(e.error,s),complete:e.complete&&Zt(e.complete,s)}):i=e}this.destination=new Tr(i)}}function pt(n){St.useDeprecatedSynchronousErrorHandling?function Mn(n){St.useDeprecatedSynchronousErrorHandling&&ut&&(ut.errorThrown=!0,ut.error=n)}(n):Ce(n)}function te(n,e){const{onStoppedNotification:t}=St;t&&ye.setTimeout(()=>t(n,e))}const tt={closed:!0,next:Xe,error:function Me(n){throw n},complete:Xe},It="function"==typeof Symbol&&Symbol.observable||"@@observable";function Nt(n){return n}function dn(n){return 0===n.length?Nt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let bt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function se(n){return n&&n instanceof gn||function cr(n){return n&&x(n.next)&&x(n.error)&&x(n.complete)}(n)&&Sn(n)}(t)?t:new Ot(t,r,i);return it(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=mn(r))((i,s)=>{const o=new Ot({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[It](){return this}pipe(...t){return dn(t)(this)}toPromise(t){return new(t=mn(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mn(n){var e;return null!==(e=n??St.Promise)&&void 0!==e?e:Promise}const oe=Re(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ue=(()=>{class n extends bt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new me(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oe}next(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Dn:(this.currentObservers=null,s.push(t),new Pt(()=>{this.currentObservers=null,xe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new bt;return t.source=this,t}}return n.create=(e,t)=>new me(e,t),n})();class me extends ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Dn}}function Ee(n){return x(n?.lift)}function ce(n){return e=>{if(Ee(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(n,e,t,r,i){return new Lt(n,e,t,r,i)}class Lt extends gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function De(n,e){return ce((t,r)=>{let i=0;t.subscribe(Oe(r,s=>{r.next(n.call(e,s,i++))}))})}var Ye=We(582);const Ut=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function _n(n){return x(n?.then)}function hn(n){return x(n[It])}function En(n){return Symbol.asyncIterator&&x(n?.[Symbol.asyncIterator])}function Rn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wn=function Yt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Cr(n){return x(n?.[Wn])}function Hi(n){return(0,Ye.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ye.qq)(t.read());if(i)return yield(0,Ye.qq)(void 0);yield yield(0,Ye.qq)(r)}}finally{t.releaseLock()}})}function oi(n){return x(n?.getReader)}function Vt(n){if(n instanceof bt)return n;if(null!=n){if(hn(n))return function ai(n){return new bt(e=>{const t=n[It]();if(x(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ut(n))return function us(n){return new bt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(_n(n))return function Ci(n){return new bt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ce)})}(n);if(En(n))return Zr(n);if(Cr(n))return function qi(n){return new bt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(oi(n))return function qs(n){return Zr(Hi(n))}(n)}throw Rn(n)}function Zr(n){return new bt(e=>{(function Ai(n,e){var t,r,i,s;return(0,Ye.mG)(this,void 0,void 0,function*(){try{for(t=(0,Ye.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function gr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nn(n,e,t=1/0){return x(e)?nn((r,i)=>De((s,o)=>e(r,s,i,o))(Vt(n(r,i))),t):("number"==typeof e&&(t=e),ce((r,i)=>function Qr(n,e,t,r,i,s,o,a){const c=[];let l=0,f=0,m=!1;const y=()=>{m&&!c.length&&!l&&e.complete()},I=N=>l<r?T(N):c.push(N),T=N=>{s&&e.next(N),l++;let F=!1;Vt(t(N,f++)).subscribe(Oe(e,W=>{i?.(W),s?I(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(l--;c.length&&l<r;){const W=c.shift();o?gr(e,o,()=>T(W)):T(W)}y()}catch(W){e.error(W)}}))};return n.subscribe(Oe(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Fr(n=1/0){return nn(Nt,n)}const Ln=new bt(n=>n.complete());function Lr(n){return n[n.length-1]}function Si(n){return x(Lr(n))?n.pop():void 0}function ds(n){return function cn(n){return n&&x(n.schedule)}(Lr(n))?n.pop():void 0}function In(n,e=0){return ce((t,r)=>{t.subscribe(Oe(r,i=>gr(r,n,()=>r.next(i),e),()=>gr(r,n,()=>r.complete(),e),i=>gr(r,n,()=>r.error(i),e)))})}function Ar(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ke(n,e){if(!n)throw new Error("Iterable cannot be null");return new bt(t=>{gr(t,e,()=>{const r=n[Symbol.asyncIterator]();gr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function O(n,e){if(null!=n){if(hn(n))return function hs(n,e){return Vt(n).pipe(Ar(e),In(e))}(n,e);if(Ut(n))return function Ss(n,e){return new bt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(_n(n))return function fs(n,e){return Vt(n).pipe(Ar(e),In(e))}(n,e);if(En(n))return ke(n,e);if(Cr(n))return function Ws(n,e){return new bt(t=>{let r;return gr(t,e,()=>{r=n[Wn](),gr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>x(r?.return)&&r.return()})}(n,e);if(oi(n))return function R(n,e){return ke(Hi(n),e)}(n,e)}throw Rn(n)}(n,e):Vt(n)}function D(...n){const e=ds(n),t=function lr(n,e){return"number"==typeof Lr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Vt(r[0]):Fr(t)(b(r,e)):Ln}class w extends ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function V(...n){return b(n,ds(n))}function fe(n={}){const{connector:e=(()=>new ue),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},T=()=>{const N=o;I(),N?.unsubscribe()};return ce((N,F)=>{l++,!m&&!f&&y();const W=c=c??e();F.add(()=>{l--,0===l&&!m&&!f&&(a=Ne(T,i))}),W.subscribe(F),!o&&l>0&&(o=new Ot({next:z=>W.next(z),error:z=>{m=!0,y(),a=Ne(I,t,z),W.error(z)},complete:()=>{f=!0,y(),a=Ne(I,r),W.complete()}}),Vt(N).subscribe(o))})(s)}}function Ne(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ot({next:()=>{r.unsubscribe(),n()}});return Vt(e(...t)).subscribe(r)}function ze(n,e){return ce((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Oe(r,c=>{i?.unsubscribe();let l=0;const f=s++;Vt(n(c,f)).subscribe(i=Oe(r,m=>r.next(e?e(c,m,f,l++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function mt(n,e=Nt){return n=n??Xt,ce((t,r)=>{let i,s=!0;t.subscribe(Oe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Xt(n,e){return n===e}function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function bn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Vr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const go=Le({__forward_ref__:Le});function ln(n){return n.__forward_ref__=ln,n.toString=function(){return ot(this())},n}function ht(n){return ac(n)?n():n}function ac(n){return"function"==typeof n&&n.hasOwnProperty(go)&&n.__forward_ref__===ln}function cc(n){return n&&!!n.\u0275providers}const pa="https://g.co/ng/security#xss";class he extends Error{constructor(e,t){super(function uc(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function _t(n){return"string"==typeof n?n:null==n?"":String(n)}function ur(n,e){throw new he(-201,!1)}function Mi(n,e){null==n&&function ft(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ga(n){return Ml(n,mo)||Ml(n,Ms)}function Ml(n,e){return n.hasOwnProperty(e)?n[e]:null}function pc(n){return n&&(n.hasOwnProperty(Rl)||n.hasOwnProperty(id))?n[Rl]:null}const mo=Le({\u0275prov:Le}),Rl=Le({\u0275inj:Le}),Ms=Le({ngInjectableDef:Le}),id=Le({ngInjectorDef:Le});var Dt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Dt||{});let Pl;function ci(n){const e=Pl;return Pl=n,e}function No(n,e,t){const r=ga(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Dt.Optional?null:void 0!==e?e:void ur(ot(n))}const on=globalThis;class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fo={},Lo="__NG_DI_FLAG__",Sr="ngTempTokenPath",Nl=/\n/gm,Wi="__source";let va;function Zs(n){const e=va;return va=n,e}function Ea(n,e=Dt.Default){if(void 0===va)throw new he(-203,!1);return null===va?No(n,void 0,e):va.get(n,e&Dt.Optional?null:void 0,e)}function pe(n,e=Dt.Default){return(function Oo(){return Pl}()||Ea)(ht(n),e)}function $e(n,e=Dt.Default){return pe(n,yc(e))}function yc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ia(n){const e=[];for(let t=0;t<n.length;t++){const r=ht(n[t]);if(Array.isArray(r)){if(0===r.length)throw new he(900,!1);let i,s=Dt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=b_(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(pe(i,s))}else e.push(pe(r))}return e}function Ki(n,e){return n[Lo]=e,n.prototype[Lo]=e,n}function b_(n){return n[Lo]}function Ps(n){return{toString:n}.toString()}var _o=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_o||{}),nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(nr||{});const M={},U=[],Q=Le({\u0275cmp:Le}),ve=Le({\u0275dir:Le}),Pe=Le({\u0275pipe:Le}),He=Le({\u0275mod:Le}),Ke=Le({\u0275fac:Le}),yt=Le({__NG_ELEMENT_ID__:Le}),vt=Le({__NG_ENV_ID__:Le});function $t(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ur(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Br(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ps(n){return 3===n||4===n||6===n}function Br(n){return 64===n.charCodeAt(0)}function pi(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||w_(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function w_(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const ad="ng-template";function cd(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==$t(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Bf(n){return 4===n.type&&n.value!==ad}function T_(n,e,t){return e===(4!==n.type||t?n.value:ad)}function pb(n,e,t){let r=4;const i=n.attrs||[],s=function $f(n){for(let e=0;e<n.length;e++)if(ps(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!T_(n,c,t)||""===c&&1===e.length){if(Zi(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!cd(n.attrs,l,t)){if(Zi(r))return!1;o=!0}continue}const m=jf(8&r?"class":c,i,Bf(n),t);if(-1===m){if(Zi(r))return!1;o=!0;continue}if(""!==l){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==$t(I,l,0)||2&r&&l!==y){if(Zi(r))return!1;o=!0}}}}else{if(!o&&!Zi(r)&&!Zi(c))return!1;if(o&&Zi(c))continue;o=!1,r=c|1&r}}return Zi(r)||o}function Zi(n){return 0==(1&n)}function jf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function C_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ld(n,e,t=!1){for(let r=0;r<e.length;r++)if(pb(n,e[r],t))return!0;return!1}function Hf(n,e){return n?":not("+e.trim()+")":e}function qf(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Zi(o)&&(e+=Hf(s,i),i=""),r=o,s=s||!Zi(r);t++}return""!==i&&(e+=Hf(s,i)),e}function wn(n){return Ps(()=>{const e=S_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_o.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||nr.Emulated,styles:n.styles||U,_:null,schemas:n.schemas||null,tView:null,id:""};hd(t);const r=n.dependencies;return t.directiveDefs=fd(r,!1),t.pipeDefs=fd(r,!0),t.id=function gb(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function A_(n){return Gt(n)||Mr(n)}function Kf(n){return null!==n}function Pn(n){return Ps(()=>({type:n.type,bootstrap:n.bootstrap||U,declarations:n.declarations||U,imports:n.imports||U,exports:n.exports||U,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function D_(n,e){if(null==n)return M;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function nt(n){return Ps(()=>{const e=S_(n);return hd(e),e})}function jr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gt(n){return n[Q]||null}function Mr(n){return n[ve]||null}function $r(n){return n[Pe]||null}function gi(n,e){const t=n[He]||null;if(!t&&!0===e)throw new Error(`Type ${ot(n)} does not have '\u0275mod' property.`);return t}function S_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||M,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||U,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:D_(n.inputs,e),outputs:D_(n.outputs)}}function hd(n){n.features?.forEach(e=>e(n))}function fd(n,e){if(!n)return null;const t=e?$r:A_;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Kf)}const Un=0,qe=1,Tt=2,Bn=3,Qi=4,Ll=5,zr=6,Ec=7,dr=8,Qs=9,Ic=10,Ct=11,ba=12,M_=13,Uo=14,hr=15,wa=16,bc=17,gs=18,Vl=19,pd=20,Bo=21,xs=22,Ul=23,Ta=24,zt=25,gd=1,md=2,Ys=7,Ca=9,Yr=11;function Ri(n){return Array.isArray(n)&&"object"==typeof n[gd]}function mi(n){return Array.isArray(n)&&!0===n[gd]}function R_(n){return 0!=(4&n.flags)}function wc(n){return n.componentOffset>-1}function Yf(n){return 1==(1&n.flags)}function Yi(n){return!!n.template}function Xf(n){return 0!=(512&n[Tt])}function Aa(n,e){return n.hasOwnProperty(Ke)?n[Ke]:null}let li=null,Cc=!1;function ms(n){const e=li;return li=n,e}const k_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function F_(n){if(!$o(n)||n.dirty){if(!n.producerMustRecompute(n)&&!L_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function yd(n){n.dirty=!0,function fr(n){if(void 0===n.liveConsumerNode)return;const e=Cc;Cc=!0;try{for(const t of n.liveConsumerNode)t.dirty||yd(t)}finally{Cc=e}}(n),n.consumerMarkedDirty?.(n)}function tp(n){return n&&(n.nextProducerIndex=0),ms(n)}function jl(n,e){if(ms(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if($o(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)vd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function L_(n){Da(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(F_(t),r!==t.version))return!0}return!1}function V_(n){if(Da(n),$o(n))for(let e=0;e<n.producerNode.length;e++)vd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function vd(n,e){if(function Dc(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Da(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)vd(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Da(i),i.producerIndexOfThis[r]=e}}function $o(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Da(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ed=null;const H_=()=>{},op=(()=>({...k_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:H_}))();class Cb{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function _s(){return q_}function q_(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ab),G_}function G_(){const n=K_(this),e=n?.current;if(e){const t=n.previous;if(t===M)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ab(n,e,t,r){const i=this.declaredInputs[t],s=K_(n)||function ap(n,e){return n[W_]=e}(n,{previous:M,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Cb(c&&c.currentValue,e,a===M),n[r]=e}_s.ngInherit=!0;const W_="__ngSimpleChanges__";function K_(n){return n[W_]||null}const Xs=function(n,e,t){};function yn(n){for(;Array.isArray(n);)n=n[Un];return n}function Mc(n,e){return yn(e[n])}function Pi(n,e){return yn(e[n.index])}function Q_(n,e){return n.data[e]}function ys(n,e){return n[e]}function _i(n,e){const t=e[n];return Ri(t)?t:t[Un]}function Js(n,e){return null==e?null:n[e]}function dp(n){n[bc]=0}function Rb(n){1024&n[Tt]||(n[Tt]|=1024,Td(n,1))}function Y_(n){1024&n[Tt]&&(n[Tt]&=-1025,Td(n,-1))}function Td(n,e){let t=n[Bn];if(null===t)return;t[Ll]+=e;let r=t;for(t=t[Bn];null!==t&&(1===e&&1===r[Ll]||-1===e&&0===r[Ll]);)t[Ll]+=e,r=t,t=t[Bn]}const Et={lFrame:ly(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ey(){return Et.bindingsEnabled}function we(){return Et.lFrame.lView}function Jt(){return Et.lFrame.tView}function Ad(n){return Et.lFrame.contextLView=n,n[dr]}function Rc(n){return Et.lFrame.contextLView=null,n}function Xr(){let n=ry();for(;null!==n&&64===n.type;)n=n.parent;return n}function ry(){return Et.lFrame.currentTNode}function eo(n,e){const t=Et.lFrame;t.currentTNode=n,t.isParent=e}function gp(){return Et.lFrame.isParent}function Jr(){const n=Et.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Pc(){return Et.lFrame.bindingIndex++}function kb(n,e){const t=Et.lFrame;t.bindingIndex=t.bindingRootIndex=n,Hl(e)}function Hl(n){Et.lFrame.currentDirectiveIndex=n}function yp(n){Et.lFrame.currentQueryIndex=n}function vp(n){const e=n[qe];return 2===e.type?e.declTNode:1===e.type?n[zr]:null}function cy(n,e,t){if(t&Dt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Dt.Host||(i=vp(s),null===i||(s=s[Uo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Et.lFrame=Ip();return r.currentTNode=e,r.lView=n,!0}function Ep(n){const e=Ip(),t=n[qe];Et.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ip(){const n=Et.lFrame,e=null===n?null:n.child;return null===e?ly(n):e}function ly(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ql(){const n=Et.lFrame;return Et.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const uy=ql;function bp(){const n=ql();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yi(){return Et.lFrame.selectedIndex}function Ma(n){Et.lFrame.selectedIndex=n}function Kn(){const n=Et.lFrame;return Q_(n.tView,n.selectedIndex)}let hy=!0;function Md(){return hy}function vo(n){hy=n}function Rd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Pd(n,e,t){Od(n,e,3,t)}function xd(n,e,t,r){(3&n[Tt])===t&&Od(n,e,t,r)}function Tp(n,e){let t=n[Tt];(3&t)===e&&(t&=8191,t+=1,n[Tt]=t)}function Od(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[bc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[bc]+=65536),(a<s||-1==s)&&($b(n,t,e,c),n[bc]=(4294901760&n[bc])+c+2),c++}function Nd(n,e){Xs(4,n,e);const t=ms(null);try{e.call(n)}finally{ms(t),Xs(5,n,e)}}function $b(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Tt]>>13<n[bc]>>16&&(3&n[Tt])===e&&(n[Tt]+=8192,Nd(a,s)):Nd(a,s)}const Ho=-1;class Gl{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function kd(n){return n!==Ho}function xc(n){return 32767&n}function Kl(n,e){let t=function Hb(n){return n>>16}(n),r=e;for(;t>0;)r=r[Uo],t--;return r}let Dp=!0;function Fd(n){const e=Dp;return Dp=n,e}const Sp=255,py=5;let kM=0;const ro={};function u(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[qe];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(kd(i)){const o=xc(i),a=Kl(i,e),c=a[qe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=yy(i),null===r)return Ho;if(t++,i=i[Uo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ho}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(yt)&&(r=t[yt]),null==r&&(r=t[yt]=kM++);const i=r&Sp;e.data[n+(i>>py)]|=1<<i}(n,e,t)}function re(n,e,t){if(t&Dt.Optional||void 0!==n)return n;ur()}function be(n,e,t,r){if(t&Dt.Optional&&void 0===r&&(r=null),!(t&(Dt.Self|Dt.Host))){const i=n[Qs],s=ci(void 0);try{return i?i.get(e,r,t&Dt.Optional):No(e,r,t&Dt.Optional)}finally{ci(s)}}return re(r,0,t)}function Ge(n,e,t,r=Dt.Default,i){if(null!==n){if(2048&e[Tt]&&!(r&Dt.Self)){const o=function _y(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Tt]&&!(512&o[Tt]);){const a=st(s,o,t,r|Dt.Self,ro);if(a!==ro)return a;let c=s.parent;if(!c){const l=o[pd];if(l){const f=l.get(t,ro,r);if(f!==ro)return f}c=yy(o),o=o[Uo]}s=c}return i}(n,e,t,r,ro);if(o!==ro)return o}const s=st(n,e,t,r,ro);if(s!==ro)return s}return be(e,t,r,i)}function st(n,e,t,r,i){const s=function Ld(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(yt)?n[yt]:void 0;return"number"==typeof e?e>=0?e&Sp:my:e}(t);if("function"==typeof s){if(!cy(e,n,r))return r&Dt.Host?re(i,0,r):be(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Dt.Optional)return o;ur()}finally{uy()}}else if("number"==typeof s){let o=null,a=g(n,e),c=Ho,l=r&Dt.Host?e[hr][zr]:null;for((-1===a||r&Dt.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==Ho&&Vd(r,!1)?(o=e[qe],a=xc(c),e=Kl(c,e)):a=-1);-1!==a;){const f=e[qe];if(Mp(s,a,f.data)){const m=Ht(a,e,t,o,r,l);if(m!==ro)return m}c=e[a+8],c!==Ho&&Vd(r,e[qe].data[a+8]===l)&&Mp(s,a,e)?(o=f,a=xc(c),e=Kl(c,e)):a=-1}}return i}function Ht(n,e,t,r,i,s){const o=e[qe],a=o.data[n+8],f=function ei(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<c&&t===T||I>=c&&T.type===t)return I}if(i){const I=o[c];if(I&&Yi(I)&&I.type===t)return c}return null}(a,o,t,null==r?wc(a)&&Dp:r!=o&&0!=(3&a.type),i&Dt.Host&&s===a);return null!==f?xi(e,o,f,a):ro}function xi(n,e,t,r){let i=n[t];const s=e.data;if(function fy(n){return n instanceof Gl}(i)){const o=i;o.resolving&&function dc(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new he(-200,`Circular dependency in DI detected for ${n}${t}`)}(function sn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():_t(n)}(s[t]));const a=Fd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ci(o.injectImpl):null;cy(n,r,Dt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function jb(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=q_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&ci(l),Fd(a),o.resolving=!1,uy()}}return i}function Mp(n,e,t){return!!(t[e+(n>>py)]&1<<n)}function Vd(n,e){return!(n&Dt.Self||n&Dt.Host&&e)}class ti{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ge(this._tNode,this._lView,e,yc(r),t)}}function my(){return new ti(Xr(),we())}function Hr(n){return Ps(()=>{const e=n.prototype.constructor,t=e[Ke]||Zl(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ke]||Zl(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zl(n){return ac(n)?()=>{const e=Zl(ht(n));return e&&e()}:Aa(n)}function yy(n){const e=n[qe],t=e.type;return 2===t?e.declTNode:1===t?n[zr]:null}const Ud="__parameters__";function jd(n,e,t){return Ps(()=>{const r=function qb(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,f){const m=c.hasOwnProperty(Ud)?c[Ud]:Object.defineProperty(c,Ud,{value:[]})[Ud];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function zd(n,e){n.forEach(t=>Array.isArray(t)?zd(t,e):e(t))}function LM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function vy(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Os(n,e,t){let r=Hd(n,e);return r>=0?n[1|r]=t:(r=~r,function fz(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Gb(n,e){const t=Hd(n,e);if(t>=0)return n[1|t]}function Hd(n,e){return function VM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const qr=Ki(jd("Optional"),8),xp=Ki(jd("SkipSelf"),4);function Cy(n){return 128==(128&n.flags)}var Fc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fc||{});const Yb=new Map;let Lz=0;const Jb="__ngContext__";function Oi(n,e){Ri(e)?(n[Jb]=e[Vl],function Uz(n){Yb.set(n[Vl],n)}(e)):n[Jb]=e}let ew;function tw(n,e){return ew(n,e)}function kp(n){const e=n[Bn];return mi(e)?e[Bn]:e}function iR(n){return oR(n[ba])}function sR(n){return oR(n[Qi])}function oR(n){for(;null!==n&&!mi(n);)n=n[Qi];return n}function Wd(n,e,t,r,i){if(null!=r){let s,o=!1;mi(r)?s=r:Ri(r)&&(o=!0,r=r[Un]);const a=yn(r);0===n&&null!==t?null==i?uR(e,t,a):Ql(e,t,a,i||null,!0):1===n&&null!==t?Ql(e,t,a,i||null,!0):2===n?function xy(n,e,t){const r=Ry(n,e);r&&function i4(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function a4(n,e,t,r,i){const s=t[Ys];s!==yn(t)&&Wd(e,n,r,s,i);for(let a=Yr;a<t.length;a++){const c=t[a];Lp(c[qe],c,n,e,r,s)}}(e,n,s,t,i)}}function Sy(n,e,t){return n.createElement(e,t)}function cR(n,e){const t=n[Ca],r=t.indexOf(e);Y_(e),t.splice(r,1)}function My(n,e){if(n.length<=Yr)return;const t=Yr+e,r=n[t];if(r){const i=r[wa];null!==i&&i!==n&&cR(i,r),e>0&&(n[t-1][Qi]=r[Qi]);const s=vy(n,Yr+e);!function Qz(n,e){Lp(n,e,e[Ct],2,null,null),e[Un]=null,e[zr]=null}(r[qe],r);const o=s[gs];null!==o&&o.detachView(s[qe]),r[Bn]=null,r[Qi]=null,r[Tt]&=-129}return r}function rw(n,e){if(!(256&e[Tt])){const t=e[Ct];e[Ul]&&V_(e[Ul]),e[Ta]&&V_(e[Ta]),t.destroyNode&&Lp(n,e,t,3,null,null),function Jz(n){let e=n[ba];if(!e)return iw(n[qe],n);for(;e;){let t=null;if(Ri(e))t=e[ba];else{const r=e[Yr];r&&(t=r)}if(!t){for(;e&&!e[Qi]&&e!==n;)Ri(e)&&iw(e[qe],e),e=e[Bn];null===e&&(e=n),Ri(e)&&iw(e[qe],e),t=e&&e[Qi]}e=t}}(e)}}function iw(n,e){if(!(256&e[Tt])){e[Tt]&=-129,e[Tt]|=256,function r4(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Gl)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Xs(4,a,c);try{c.call(a)}finally{Xs(5,a,c)}}else{Xs(4,i,s);try{s.call(i)}finally{Xs(5,i,s)}}}}}(n,e),function n4(n,e){const t=n.cleanup,r=e[Ec];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ec]=null);const i=e[Bo];if(null!==i){e[Bo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[qe].type&&e[Ct].destroy();const t=e[wa];if(null!==t&&mi(e[Bn])){t!==e[Bn]&&cR(t,e);const r=e[gs];null!==r&&r.detachView(n)}!function Bz(n){Yb.delete(n[Vl])}(e)}}function sw(n,e,t){return function lR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Un];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===nr.None||s===nr.Emulated)return null}return Pi(r,t)}}(n,e.parent,t)}function Ql(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uR(n,e,t){n.appendChild(e,t)}function dR(n,e,t,r,i){null!==r?Ql(n,e,t,r,i):uR(n,e,t)}function Ry(n,e){return n.parentNode(e)}let ow,uw,Ny,pR=function fR(n,e,t){return 40&n.type?Pi(n,t):null};function Py(n,e,t,r){const i=sw(n,r,e),s=e[Ct],a=function hR(n,e,t){return pR(n,e,t)}(r.parent||e[zr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)dR(s,i,t[c],a,!1);else dR(s,i,t,a,!1);void 0!==ow&&ow(s,r,e,t,i)}function Fp(n,e){if(null!==e){const t=e.type;if(3&t)return Pi(e,n);if(4&t)return aw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Fp(n,r);{const i=n[e.index];return mi(i)?aw(-1,i):yn(i)}}if(32&t)return tw(e,n)()||yn(n[e.index]);{const r=mR(n,e);return null!==r?Array.isArray(r)?r[0]:Fp(kp(n[hr]),r):Fp(n,e.next)}}return null}function mR(n,e){return null!==e?n[hr][zr].projection[e.projection]:null}function aw(n,e){const t=Yr+n+1;if(t<e.length){const r=e[t],i=r[qe].firstChild;if(null!==i)return Fp(r,i)}return e[Ys]}function cw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Oi(yn(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)cw(n,e,t.child,r,i,s,!1),Wd(e,n,i,a,s);else if(32&c){const l=tw(t,r);let f;for(;f=l();)Wd(e,n,i,f,s);Wd(e,n,i,a,s)}else 16&c?yR(n,e,r,t,i,s):Wd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Lp(n,e,t,r,i,s){cw(t,r,n.firstChild,e,i,s,!1)}function yR(n,e,t,r,i,s){const o=t[hr],c=o[zr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Wd(e,n,i,c[l],s);else{let l=c;const f=o[Bn];Cy(r)&&(l.flags|=128),cw(n,e,l,f,i,s,!0)}}function vR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ER(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Ur(n,e,r),null!==i&&vR(n,e,i),null!==s&&function l4(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function wR(n){return function dw(){if(void 0===Ny&&(Ny=null,on.trustedTypes))try{Ny=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ny}()?.createScriptURL(n)||n}class Yl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pa})`}}function Ns(n){return n instanceof Yl?n.changingThisBreaksApplicationSecurity:n}function qo(n,e){const t=function v4(n){return n instanceof Yl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pa})`)}return t===e}const S4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var vi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vi||{});function Zn(n){const e=Up();return e?e.sanitize(vi.URL,n)||"":qo(n,"URL")?Ns(n):function ky(n){return(n=String(n)).match(S4)?n:"unsafe:"+n}(_t(n))}function PR(n){const e=Up();if(e)return wR(e.sanitize(vi.RESOURCE_URL,n)||"");if(qo(n,"ResourceURL"))return wR(Ns(n));throw new he(904,!1)}function Up(){const n=we();return n&&n[Ic].sanitizer}const Bp=new Ie("ENVIRONMENT_INITIALIZER"),OR=new Ie("INJECTOR",-1),NR=new Ie("INJECTOR_DEF_TYPES");class gw{get(e,t=Fo){if(t===Fo){const r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return t}}function B4(...n){return{\u0275providers:FR(0,n),\u0275fromNgModule:!0}}function FR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return zd(e,o=>{const a=o;Ly(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&LR(i,s),t}function LR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];mw(i,s=>{e(s,r)})}}function Ly(n,e,t,r){if(!(n=ht(n)))return!1;let i=null,s=pc(n);const o=!s&&Gt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=pc(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Ly(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{zd(s.imports,f=>{Ly(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&LR(l,e)}if(!a){const l=Aa(i)||(()=>new i);e({provide:i,useFactory:l,deps:U},i),e({provide:NR,useValue:i,multi:!0},i),e({provide:Bp,useValue:()=>pe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=n;mw(c,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function mw(n,e){for(let t of n)cc(t)&&(t=t.\u0275providers),Array.isArray(t)?mw(t,e):e(t)}const j4=Le({provide:String,useValue:Le});function _w(n){return null!==n&&"object"==typeof n&&j4 in n}function Xl(n){return"function"==typeof n}const yw=new Ie("Set Injector scope."),Vy={},z4={};let vw;function Uy(){return void 0===vw&&(vw=new gw),vw}class so{}class Qd extends so{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Iw(e,o=>this.processProvider(o)),this.records.set(OR,Yd(void 0,this)),i.has("environment")&&this.records.set(so,Yd(void 0,this));const s=this.records.get(yw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(NR.multi,U,Dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Zs(this),r=ci(void 0);try{return e()}finally{Zs(t),ci(r)}}get(e,t=Fo,r=Dt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vt))return e[vt](this);r=yc(r);const s=Zs(this),o=ci(void 0);try{if(!(r&Dt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function K4(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&ga(e);c=l&&this.injectableDefInScope(l)?Yd(Ew(e),Vy):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Dt.Self?Uy():this.parent).get(e,t=r&Dt.Optional&&t===Fo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Sr]=a[Sr]||[]).unshift(ot(e)),s)throw a;return function od(n,e,t,r){const i=n[Sr];throw e[Wi]&&i.unshift(e[Wi]),n.message=function vc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ot(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Nl,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Sr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ci(o),Zs(s)}}resolveInjectorInitializers(){const e=Zs(this),t=ci(void 0);try{const i=this.get(Bp.multi,U,Dt.Self);for(const s of i)s()}finally{Zs(e),ci(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(e){let t=Xl(e=ht(e))?e:ht(e&&e.provide);const r=function q4(n){return _w(n)?Yd(void 0,n.useValue):Yd(BR(n),Vy)}(e);if(Xl(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Yd(void 0,Vy,!0),i.factory=()=>Ia(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Vy&&(t.value=z4,t.value=t.factory()),"object"==typeof t.value&&t.value&&function W4(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ht(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Ew(n){const e=ga(n),t=null!==e?e.factory:Aa(n);if(null!==t)return t;if(n instanceof Ie)throw new he(204,!1);if(n instanceof Function)return function H4(n){const e=n.length;if(e>0)throw function Pp(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new he(204,!1);const t=function rd(n){return n&&(n[mo]||n[Ms])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new he(204,!1)}function BR(n,e,t){let r;if(Xl(n)){const i=ht(n);return Aa(i)||Ew(i)}if(_w(n))r=()=>ht(n.useValue);else if(function UR(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ia(n.deps||[]));else if(function VR(n){return!(!n||!n.useExisting)}(n))r=()=>pe(ht(n.useExisting));else{const i=ht(n&&(n.useClass||n.provide));if(!function G4(n){return!!n.deps}(n))return Aa(i)||Ew(i);r=()=>new i(...Ia(n.deps))}return r}function Yd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Iw(n,e){for(const t of n)Array.isArray(t)?Iw(t,e):t&&cc(t)?Iw(t.\u0275providers,e):e(t)}const By=new Ie("AppId",{providedIn:"root",factory:()=>Z4}),Z4="ng",jR=new Ie("Platform Initializer"),ks=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$R=new Ie("AnimationModuleType"),bw=new Ie("CSP nonce",{providedIn:"root",factory:()=>function Zd(){if(void 0!==uw)return uw;if(typeof document<"u")return document;throw new he(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let zR=(n,e,t)=>null;function Rw(n,e,t=!1){return zR(n,e,t)}class sH{}class GR{}class aH{resolveComponentFactory(e){throw function oH(n){const e=Error(`No component factory found for ${ot(n)}.`);return e.ngComponent=n,e}(e)}}let Gy=(()=>{class n{static#e=this.NULL=new aH}return n})();function cH(){return eh(Xr(),we())}function eh(n,e){return new Es(Pi(n,e))}let Es=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=cH}return n})();class zp{}let Pa=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uH(){const n=we(),t=_i(Xr().index,n);return(Ri(t)?t:n)[Ct]}()}return n})(),dH=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>null})}return n})();class Lc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ow=new Lc("16.2.12"),Nw={};function YR(n,e=null,t=null,r){const i=XR(n,e,t,r);return i.resolveInjectorInitializers(),i}function XR(n,e=null,t=null,r,i=new Set){const s=[t||U,B4(n)];return r=r||("object"==typeof n?void 0:ot(n)),new Qd(s,e||Uy(),r||null,i)}let Ei=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Fo;static#t=this.NULL=new gw;static create(t,r){if(Array.isArray(t))return YR({name:""},r,t,"");{const i=t.name??"";return YR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Fe({token:n,providedIn:"any",factory:()=>pe(OR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function Fw(n){return n.ngOriginalError}class Eo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Fw(e);for(;t&&Fw(t);)t=Fw(t);return t||null}}function Vw(n){return e=>{setTimeout(n,void 0,e)}}const mr=class yH extends ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Vw(s),i&&(i=Vw(i)),o&&(o=Vw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Pt&&e.add(a),a}};function eP(...n){}class Wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mr(!1),this.onMicrotaskEmpty=new mr(!1),this.onStable=new mr(!1),this.onError=new mr(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function vH(){const n="function"==typeof on.requestAnimationFrame;let e=on[n?"requestAnimationFrame":"setTimeout"],t=on[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function bH(n){const e=()=>{!function IH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(on,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Bw(n),n.isCheckStableRunning=!0,Uw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Bw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function TH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return tP(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),nP(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return tP(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),nP(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Bw(n),Uw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new he(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,EH,eP,eP);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const EH={};function Uw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Bw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function tP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nP(n){n._nesting--,Uw(n)}class wH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mr,this.onMicrotaskEmpty=new mr,this.onStable=new mr,this.onError=new mr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const rP=new Ie("",{providedIn:"root",factory:iP});function iP(){const n=$e(Wt);let e=!0;return D(new bt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new bt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(fe()))}function xa(n){return n instanceof Function?n():n}let jw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Hp(n){for(;n;){n[Tt]|=64;const e=kp(n);if(Xf(n)&&!e)return n;n=e}return null}const lP=new Ie("",{providedIn:"root",factory:()=>!1});let Ky=null;function fP(n,e){return n[e]??mP()}function pP(n,e){const t=mP();t.producerNode?.length&&(n[e]=Ky,t.lView=n,Ky=gP())}const NH={...k_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Hp(n.lView)},lView:null};function gP(){return Object.create(NH)}function mP(){return Ky??=gP(),Ky}const Mt={};function ie(n){_P(Jt(),we(),yi()+n,!1)}function _P(n,e,t,r){if(!r)if(3==(3&e[Tt])){const s=n.preOrderCheckHooks;null!==s&&Pd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&xd(e,s,0,t)}Ma(t)}function de(n,e=Dt.Default){const t=we();return null===t?pe(n,e):Ge(Xr(),t,ht(n),e)}function Zy(n,e,t,r,i,s,o,a,c,l,f){const m=e.blueprint.slice();return m[Un]=i,m[Tt]=140|r,(null!==l||n&&2048&n[Tt])&&(m[Tt]|=2048),dp(m),m[Bn]=m[Uo]=n,m[dr]=t,m[Ic]=o||n&&n[Ic],m[Ct]=a||n&&n[Ct],m[Qs]=c||n&&n[Qs]||null,m[zr]=s,m[Vl]=function Vz(){return Lz++}(),m[xs]=f,m[pd]=l,m[hr]=2==e.type?n[hr]:m,m}function rh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function $w(n,e,t,r,i){const s=ry(),o=gp(),c=n.data[e]=function $H(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function zo(){return null!==Et.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function sy(){return Et.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Sa(){const n=Et.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return eo(s,!0),s}function qp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vP(n,e,t,r,i){const s=fP(e,Ul),o=yi(),a=2&r;try{Ma(-1),a&&e.length>zt&&_P(n,e,zt,!1),Xs(a?2:0,i);const l=a?s:null,f=tp(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{jl(l,f)}}finally{a&&null===e[Ul]&&pP(e,Ul),Ma(o),Xs(a?3:1,i)}}function zw(n,e,t){if(R_(e)){const r=ms(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ms(r)}}}function Hw(n,e,t){ey()&&(function ZH(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;wc(t)&&function nq(n,e,t){const r=Pi(e,n),i=EP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Qy(n,Zy(n,i,null,o,r,e,null,n[Ic].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||u(t,e),Oi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=xi(e,n,a,t);Oi(l,e),null!==o&&rq(0,a-i,l,c,0,o),Yi(c)&&(_i(t.index,e)[dr]=xi(e,n,a,t))}}(n,e,t,Pi(t,e)),64==(64&t.flags)&&CP(n,e,t))}function qw(n,e,t=Pi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function EP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Gw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Gw(n,e,t,r,i,s,o,a,c,l,f){const m=zt+r,y=m+i,I=function FH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Mt);return t}(m,y),T="function"==typeof l?l():l;return I[qe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let IP=n=>null;function bP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?wP(t,e,i,s):r.hasOwnProperty(i)&&wP(t,e,r[i],s)}return t}function wP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Fs(n,e,t,r,i,s,o,a){const c=Pi(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(Yw(n,t,f,r,i),wc(e)&&function qH(n,e){const t=_i(e,n);16&t[Tt]||(t[Tt]|=64)}(t,e.index)):3&e.type&&(r=function HH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Ww(n,e,t,r){if(ey()){const i=null===r?null:{"":-1},s=function YH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ld(e,o.selectors,!1))if(r||(r=[]),Yi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Kw(n,e,a.length)}else r.unshift(o),Kw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&TP(n,e,t,o,i,a),i&&function XH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new he(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=pi(t.mergedAttrs,t.attrs)}function TP(n,e,t,r,i,s){for(let l=0;l<r.length;l++)C(u(t,e),n,r[l].type);!function eq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=qp(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=pi(t.mergedAttrs,f.hostAttrs),tq(n,t,e,c,f),JH(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function zH(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;c=bP(m.inputs,f,c,y?y.inputs:null),l=bP(m.outputs,f,l,T);const N=null===c||null===o||Bf(e)?null:iq(c,f,o);a.push(N)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function CP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function oy(){return Et.lFrame.currentDirectiveIndex}();try{Ma(s);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];Hl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&QH(c,l)}}finally{Ma(-1),Hl(o)}}function QH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Kw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function JH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yi(e)&&(t[""]=n)}}function tq(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Aa(i.type)),o=new Gl(s,Yi(i),de);n.blueprint[r]=o,t[r]=o,function WH(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function KH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,qp(n,t,i.hostVars,Mt),i)}function Go(n,e,t,r,i,s){const o=Pi(n,e);!function Zw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?_t(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Ct],o,s,n.value,t,r,i)}function rq(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)AP(r,t,o[a++],o[a++],o[a++])}function AP(n,e,t,r,i){const s=ms(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ms(s)}}function iq(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function DP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function SP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];yp(t[r]),o.contentQueries(2,e[s],s)}}}function Qy(n,e){return n[ba]?n[M_][Qi]=e:n[ba]=e,n[M_]=e,e}function Qw(n,e,t){yp(0);const r=ms(null);try{e(n,t)}finally{ms(r)}}function xP(n,e){const t=n[Qs],r=t?t.get(Eo,null):null;r&&r.handleError(e)}function Yw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];AP(n.data[o],e[o],r,a,i)}}function sq(n,e){const t=_i(e,n),r=t[qe];!function oq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Un];null!==i&&null===t[xs]&&(t[xs]=Rw(i,t[Qs])),Xw(r,t,t[dr])}function Xw(n,e,t){Ep(e);try{const r=n.viewQuery;null!==r&&Qw(1,r,t);const i=n.template;null!==i&&vP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SP(n,e),n.staticViewQueries&&Qw(2,n.viewQuery,t);const s=n.components;null!==s&&function aq(n,e){for(let t=0;t<e.length;t++)sq(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Tt]&=-5,bp()}}let OP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Tb(n,e,t){const r=Object.create(op);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>yd(r),run:()=>{if(r.dirty=!1,r.hasRun&&!L_(r))return;r.hasRun=!0;const o=tp(r);try{r.cleanupFn(),r.cleanupFn=H_,r.fn(i)}finally{jl(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Yy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vr(i,a):2==s&&(r=Vr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Gp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(yn(s)),mi(s)&&NP(s,r);const o=t.type;if(8&o)Gp(n,e,t.child,r);else if(32&o){const a=tw(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=mR(e,t);if(Array.isArray(a))r.push(...a);else{const c=kp(e[hr]);Gp(c[qe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function NP(n,e){for(let t=Yr;t<n.length;t++){const r=n[t],i=r[qe].firstChild;null!==i&&Gp(r[qe],r,i,e)}n[Ys]!==n[Un]&&e.push(n[Ys])}function Xy(n,e,t,r=!0){const i=e[Ic],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{kP(n,e,n.template,t)}catch(c){throw r&&xP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function kP(n,e,t,r){const i=e[Tt];if(256!=(256&i)){e[Ic].effectManager?.flush(),Ep(e);try{dp(e),function Sd(n){return Et.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&vP(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Pd(e,l,null)}else{const l=n.preOrderHooks;null!==l&&xd(e,l,0,null),Tp(e,0)}if(function uq(n){for(let e=iR(n);null!==e;e=sR(e)){if(!e[md])continue;const t=e[Ca];for(let r=0;r<t.length;r++){Rb(t[r])}}}(e),FP(e,2),null!==n.contentQueries&&SP(n,e),o){const l=n.contentCheckHooks;null!==l&&Pd(e,l)}else{const l=n.contentHooks;null!==l&&xd(e,l,1),Tp(e,1)}!function kH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=fP(e,Ta);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Ma(~s);else{const o=s,a=t[++i],c=t[++i];kb(a,o),r.dirty=!1;const l=tp(r);try{c(2,e[o])}finally{jl(r,l)}}}}finally{null===e[Ta]&&pP(e,Ta),Ma(-1)}}(n,e);const a=n.components;null!==a&&VP(e,a,0);const c=n.viewQuery;if(null!==c&&Qw(2,c,r),o){const l=n.viewCheckHooks;null!==l&&Pd(e,l)}else{const l=n.viewHooks;null!==l&&xd(e,l,2),Tp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Tt]&=-73,Y_(e)}finally{bp()}}}function FP(n,e){for(let t=iR(n);null!==t;t=sR(t))for(let r=Yr;r<t.length;r++)LP(t[r],e)}function dq(n,e,t){LP(_i(e,n),t)}function LP(n,e){if(!function Sb(n){return 128==(128&n[Tt])}(n))return;const t=n[qe],r=n[Tt];if(80&r&&0===e||1024&r||2===e)kP(t,n,t.template,n[dr]);else if(n[Ll]>0){FP(n,1);const i=t.components;null!==i&&VP(n,i,1)}}function VP(n,e,t){for(let r=0;r<e.length;r++)dq(n,e[r],t)}class Wp{get rootNodes(){const e=this._lView,t=e[qe];return Gp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(e){this._lView[dr]=e}get destroyed(){return 256==(256&this._lView[Tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Bn];if(mi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(My(e,r),vy(t,r))}this._attachedToViewContainer=!1}rw(this._lView[qe],this._lView)}onDestroy(e){!function X_(n,e){if(256==(256&n[Tt]))throw new he(911,!1);null===n[Bo]&&(n[Bo]=[]),n[Bo].push(e)}(this._lView,e)}markForCheck(){Hp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Tt]&=-129}reattach(){this._lView[Tt]|=128}detectChanges(){Xy(this._lView[qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xz(n,e){Lp(n,e,e[Ct],2,null,null)}(this._lView[qe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=e}}class hq extends Wp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Xy(e[qe],e,e[dr],!1)}checkNoChanges(){}get context(){return null}}class UP extends Gy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Gt(e);return new Kp(t,this.ngModule)}}function BP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class pq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yc(r);const i=this.injector.get(e,Nw,r);return i!==Nw||t===Nw?i:this.parentInjector.get(e,t,r)}}class Kp extends GR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=BP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return BP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function dd(n){return n.map(qf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof so?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new pq(e,s):e,a=o.get(zp,null);if(null===a)throw new he(407,!1);const m={rendererFactory:a,sanitizer:o.get(dH,null),effectManager:o.get(OP,null),afterRenderEventManager:o.get(jw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function LH(n,e,t,r){const s=r.get(lP,!1)||t===nr.ShadowDom,o=n.selectRootElement(e,s);return function VH(n){IP(n)}(o),o}(y,r,this.componentDef.encapsulation,o):Sy(y,I,function fq(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),W=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let z=null;null!==T&&(z=Rw(T,o,!0));const X=Gw(0,null,null,1,0,null,null,null,null,null,null),ae=Zy(null,X,null,W,null,null,m,y,o,null,z);let Se,je;Ep(ae);try{const q=this.componentDef;let B,$=null;q.findHostDirectiveDefs?(B=[],$=new Map,q.findHostDirectiveDefs(q,B,$),B.push(q)):B=[q];const K=function mq(n,e){const t=n[qe],r=zt;return n[r]=e,rh(t,r,2,"#host",null)}(ae,T),Y=function _q(n,e,t,r,i,s,o){const a=i[qe];!function yq(n,e,t,r){for(const i of n)e.mergedAttrs=pi(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Yy(e,e.mergedAttrs,!0),null!==t&&ER(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Rw(e,i[Qs]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=Zy(i,EP(t),null,f,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Kw(a,n,r.length-1),Qy(i,m),i[n.index]=m}(K,T,q,B,ae,m,y);je=Q_(X,zt),T&&function Eq(n,e,t,r){if(r)Ur(n,t,["ng-version",Ow.full]);else{const{attrs:i,classes:s}=function Gf(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Zi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ur(n,t,i),s&&s.length>0&&vR(n,t,s.join(" "))}}(y,q,T,r),void 0!==t&&function Iq(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(je,this.ngContentSelectors,t),Se=function vq(n,e,t,r,i,s){const o=Xr(),a=i[qe],c=Pi(o,i);TP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Oi(xi(i,a,o.directiveStart+f,o),i);CP(a,i,o),c&&Oi(c,i);const l=xi(i,a,o.directiveStart+o.componentOffset,o);if(n[dr]=i[dr]=l,null!==s)for(const f of s)f(l,e);return zw(a,o,n),l}(Y,q,B,$,ae,[bq]),Xw(X,ae,null)}finally{bp()}return new gq(this.componentType,Se,eh(je,ae),ae,je)}}class gq extends sH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new hq(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Yw(s[qe],s,i,e,t),this.previousInputValues.set(e,t),Hp(_i(this._tNode.index,s))}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function bq(){const n=Xr();Rd(we()[qe],n)}function Tn(n){let e=function jP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Yi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new he(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Jy(n.inputs),o.inputTransforms=Jy(n.inputTransforms),o.declaredInputs=Jy(n.declaredInputs),o.outputs=Jy(n.outputs);const a=i.hostBindings;a&&Aq(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&Tq(n,c),l&&Cq(n,l),bn(n.inputs,i.inputs),bn(n.declaredInputs,i.declaredInputs),bn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),bn(o.inputTransforms,i.inputTransforms)),Yi(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Tn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function wq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pi(i.hostAttrs,t=pi(t,i.hostAttrs))}}(r)}function Jy(n){return n===M?{}:n===U?[]:n}function Tq(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Cq(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Aq(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function qP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function ev(n){return!!Jw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Jw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Wo(n,e,t){return n[e]=t}function Ni(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ko(n,e,t,r){const i=we();return Ni(i,Pc(),e)&&(Jt(),Go(Kn(),i,n,e,t,r)),Ko}function sh(n,e,t,r){return Ni(n,Pc(),t)?e+_t(t)+r:Mt}function vn(n,e,t,r,i,s,o,a){const c=we(),l=Jt(),f=n+zt,m=l.firstCreatePass?function Yq(n,e,t,r,i,s,o,a,c){const l=e.consts,f=rh(e,n,4,o||null,Js(l,a));Ww(e,t,f,Js(l,c)),Rd(e,f);const m=f.tView=Gw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,c,e,t,r,i,s,o):l.data[f];eo(m,!1);const y=ix(l,c,m,n);Md()&&Py(l,c,y,m),Oi(y,c),Qy(c,c[f]=DP(y,c,y,m)),Yf(m)&&Hw(l,c,m),null!=o&&qw(c,m,a)}let ix=function sx(n,e,t,r){return vo(!0),e[Ct].createComment("")};function Ze(n,e,t){const r=we();return Ni(r,Pc(),e)&&Fs(Jt(),Kn(),r,n,e,r[Ct],t,!1),Ze}function o0(n,e,t,r,i){const o=i?"class":"style";Yw(n,t,e.inputs[o],o,r)}function k(n,e,t,r){const i=we(),s=Jt(),o=zt+n,a=i[Ct],c=s.firstCreatePass?function tG(n,e,t,r,i,s){const o=e.consts,c=rh(e,n,2,r,Js(o,i));return Ww(e,t,c,Js(o,s)),null!==c.attrs&&Yy(c,c.attrs,!1),null!==c.mergedAttrs&&Yy(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],l=ax(s,i,c,a,e,n);i[o]=l;const f=Yf(c);return eo(c,!0),ER(a,l,c),32!=(32&c.flags)&&Md()&&Py(s,i,l,c),0===function Pb(){return Et.lFrame.elementDepthCount}()&&Oi(l,i),function $l(){Et.lFrame.elementDepthCount++}(),f&&(Hw(s,i,c),zw(s,c,i)),null!==r&&qw(i,c),k}function S(){let n=Xr();gp()?function zl(){Et.lFrame.isParent=!1}():(n=n.parent,eo(n,!1));const e=n;(function fp(n){return Et.skipHydrationRootTNode===n})(e)&&function ny(){Et.skipHydrationRootTNode=null}(),function xb(){Et.lFrame.elementDepthCount--}();const t=Jt();return t.firstCreatePass&&(Rd(t,n),R_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function OM(n){return 0!=(8&n.flags)}(e)&&o0(t,e,we(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Cp(n){return 0!=(16&n.flags)}(e)&&o0(t,e,we(),e.stylesWithoutHost,!1),S}function at(n,e,t,r){return k(n,e,t,r),S(),at}let ax=(n,e,t,r,i,s)=>(vo(!0),Sy(r,i,function dy(){return Et.lFrame.currentNamespace}()));function sv(){return we()}function Jp(n){return!!n&&"function"==typeof n.then}function ux(n){return!!n&&"function"==typeof n.subscribe}function gt(n,e,t,r){const i=we(),s=Jt(),o=Xr();return function hx(n,e,t,r,i,s,o){const a=Yf(r),l=n.firstCreatePass&&function RP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[dr],m=function MP(n){return n[Ec]||(n[Ec]=[])}(e);let y=!0;if(3&r.type||o){const N=Pi(r,e),F=o?o(N):N,W=m.length,z=o?ae=>o(yn(ae[r.index])):r.index;let X=null;if(!o&&a&&(X=function aG(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ec],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==X)(X.__ngLastListenerFn__||X).__ngNextListenerFn__=s,X.__ngLastListenerFn__=s,y=!1;else{s=px(r,e,f,s,!1);const ae=t.listen(F,i,s);m.push(s,ae),l&&l.push(i,z,W,W+1)}}else s=px(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const N=T.length;if(N)for(let F=0;F<N;F+=2){const Se=e[T[F]][T[F+1]].subscribe(s),je=m.length;m.push(s,Se),l&&l.push(i,r.index,je,-(je+1))}}}(s,i,i[Ct],o,n,e,r),gt}function fx(n,e,t,r){try{return Xs(6,e,t),!1!==t(r)}catch(i){return xP(n,i),!1}finally{Xs(7,e,t)}}function px(n,e,t,r,i){return function s(o){if(o===Function)return r;Hp(n.componentOffset>-1?_i(n.index,e):e);let c=fx(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)c=fx(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function Io(n=1){return function Fb(n){return(Et.lFrame.contextLView=function Lb(n,e){for(;n>0;)e=e[Uo],n--;return e}(n,Et.lFrame.contextLView))[dr]}(n)}function Ls(n,e,t){return Zo(n,"",e,"",t),Ls}function Zo(n,e,t,r,i){const s=we(),o=sh(s,e,t,r);return o!==Mt&&Fs(Jt(),Kn(),s,n,o,s[Ct],i,!1),Zo}function av(n,e){return n<<17|e<<2}function Uc(n){return n>>17&32767}function l0(n){return 2|n}function eu(n){return(131068&n)>>2}function u0(n,e){return-131069&n|e<<2}function d0(n){return 1|n}function wx(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Uc(s):eu(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];pG(n[a],e)&&(c=!0,n[a+1]=r?d0(f):l0(f)),a=r?Uc(f):eu(f)}c&&(n[t+1]=r?l0(s):d0(s))}function pG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Hd(n,e)>=0}function ph(n,e){return function bo(n,e,t,r){const i=we(),s=Jt(),o=function no(n){const e=Et.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function xx(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[yi()],o=function Px(n,e){return e>=n.expandoStartIndex}(n,t);(function Fx(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function wG(n,e,t,r){const i=function _p(n){const e=Et.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=eg(t=h0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=h0(i,n,e,t,r),null===s){let c=function TG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==eu(r))return n[Uc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=h0(null,n,e,c[1],r),c=eg(c,e.attrs,r),function CG(n,e,t,r){n[Uc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function AG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=eg(r,n[s].hostAttrs,t);return eg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function hG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Uc(o),c=eu(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Hd(t,f)>0)&&(l=!0)):f=t,i)if(0!==c){const y=Uc(n[a+1]);n[r+1]=av(y,a),0!==y&&(n[y+1]=u0(n[y+1],r)),n[a+1]=function uG(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=av(a,0),0!==a&&(n[a+1]=u0(n[a+1],r)),a=r;else n[r+1]=av(c,0),0===a?a=r:n[c+1]=u0(n[c+1],r),c=r;l&&(n[r+1]=l0(n[r+1])),wx(n,f,r,!0),wx(n,f,r,!1),function fG(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Hd(s,e)>=0&&(t[r+1]=d0(t[r+1]))}(e,f,n,r,s),o=av(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Mt&&Ni(i,o,e)&&function Nx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],f=function dG(n){return 1==(1&n)}(l)?kx(c,e,t,i,eu(l),o):void 0;cv(f)||(cv(s)||function lG(n){return 2==(2&n)}(l)&&(s=kx(c,null,t,i,a,o)),function c4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Fc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fc.Important),n.setStyle(t,r,i,s))}}(r,o,Mc(yi(),t),i,s))}(s,s.data[yi()],i,i[Ct],n,i[o+1]=function RG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ot(Ns(n)))),n}(e,t),r,o)}(n,e,null,!0),ph}function h0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=eg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function eg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Os(n,o,!!t||e[++s]))}return void 0===n?null:n}function kx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),f=l?c[1]:c,m=null===f;let y=t[i+1];y===Mt&&(y=m?U:void 0);let I=m?Gb(y,r):f===r?y:void 0;if(l&&!cv(I)&&(I=Gb(c,r)),cv(I)&&(a=I,o))return a;const T=n[i+1];i=o?Uc(T):eu(T)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Gb(c,r))}return a}function cv(n){return void 0!==n}function L(n,e=""){const t=we(),r=Jt(),i=n+zt,s=r.firstCreatePass?rh(r,i,1,e,null):r.data[i],o=Lx(r,t,s,e,n);t[i]=o,Md()&&Py(r,t,o,s),eo(s,!1)}let Lx=(n,e,t,r,i)=>(vo(!0),function Dy(n,e){return n.createText(e)}(e[Ct],r));function Je(n){return Rr("",n,""),Je}function Rr(n,e,t){const r=we(),i=sh(r,n,e,t);return i!==Mt&&function Oa(n,e,t){const r=Mc(e,n);!function aR(n,e,t){n.setValue(e,t)}(n[Ct],r,t)}(r,yi(),i),Rr}const tu=void 0;var XG=["en",[["a","p"],["AM","PM"],tu],[["AM","PM"],tu,tu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tu,"{1} 'at' {0}",tu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function YG(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let gh={};function Xi(n){const e=function JG(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=s1(e);if(t)return t;const r=e.split("-")[0];if(t=s1(r),t)return t;if("en"===r)return XG;throw new he(701,!1)}function s1(n){return n in gh||(gh[n]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[n]),gh[n]}var jn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(jn||{});const mh="en-US";let o1=mh;function g0(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let s=0;s<n.length;s++)g0(n[s],e,t,r,i);else{const s=Jt(),o=we(),a=Xr();let c=Xl(n)?n:ht(n.provide);const l=BR(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Xl(n)||!n.multi){const I=new Gl(l,i,de),T=_0(c,e,i?f:f+y,m);-1===T?(C(u(a,o),s,c),m0(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[T]=I,o[T]=I)}else{const I=_0(c,e,f+y,m),T=_0(c,e,f,f+y),F=T>=0&&t[T];if(i&&!F||!i&&!(I>=0&&t[I])){C(u(a,o),s,c);const W=function Y6(n,e,t,r,i){const s=new Gl(n,t,de);return s.multi=[],s.index=e,s.componentProviders=0,P1(s,i,r&&!t),s}(i?Q6:Z6,t.length,i,r,l);!i&&F&&(t[T].providerFactory=W),m0(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),o.push(W)}else m0(s,n,I>-1?I:T,P1(t[i?T:I],l,!i&&r));!i&&r&&F&&t[T].componentProviders++}}}function m0(n,e,t,r){const i=Xl(e),s=function $4(n){return!!n.useClass}(e);if(i||s){const c=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,c]):l[f+1].push(r,c)}else l.push(t,c)}}}function P1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Z6(n,e,t,r){return y0(this.multi,[])}function Q6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=xi(t,t[qe],this.providerFactory.index,r);s=a.slice(0,o),y0(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],y0(i,s);return s}function y0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function rr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function K6(n,e,t){const r=Jt();if(r.firstCreatePass){const i=Yi(n);g0(t,r.data,r.blueprint,i,!0),g0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class nu{}class x1{}class v0 extends nu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UP(this);const i=gi(e);this._bootstrapComponents=xa(i.bootstrap),this._r3Injector=XR(e,t,[{provide:nu,useValue:this},{provide:Gy,useValue:this.componentFactoryResolver},...r],ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class E0 extends x1{constructor(e){super(),this.moduleType=e}create(e){return new v0(this.moduleType,e,[])}}class O1 extends nu{constructor(e){super(),this.componentFactoryResolver=new UP(this),this.instance=null;const t=new Qd([...e.providers,{provide:nu,useValue:this},{provide:Gy,useValue:this.componentFactoryResolver}],e.parent||Uy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function I0(n,e,t=null){return new O1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let e5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=FR(0,t.type),i=r.length>0?I0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Fe({token:n,providedIn:"environment",factory:()=>new n(pe(so))})}return n})();function N1(n){n.getStandaloneInjector=e=>e.get(e5).getOrCreateStandaloneInjector(n)}function og(n,e){const t=n[e];return t===Mt?void 0:t}function z1(n,e,t,r,i,s){const o=e+t;return Ni(n,o,i)?Wo(n,o+1,s?r.call(s,i):r(i)):og(n,o+1)}function H1(n,e,t,r,i,s,o){const a=e+t;return function Jl(n,e,t,r){const i=Ni(n,e,t);return Ni(n,e+1,r)||i}(n,a,i,s)?Wo(n,a+2,o?r.call(o,i,s):r(i,s)):og(n,a+2)}function _h(n,e){const t=Jt();let r;const i=n+zt;t.firstCreatePass?(r=function _5(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Aa(r.type)),a=ci(de);try{const c=Fd(!1),l=s();return Fd(c),function eG(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,we(),i,l),l}finally{ci(a)}}function ag(n,e,t,r){const i=n+zt,s=we(),o=ys(s,i);return cg(s,i)?H1(s,Jr(),e,o.transform,t,r,o):o.transform(t,r)}function cg(n,e){return n[qe].data[e].pure}function w5(n,e,t,r=!0){const i=e[qe];if(function e4(n,e,t,r){const i=Yr+r,s=t.length;r>0&&(t[i-1][Qi]=e),r<s-Yr?(e[Qi]=t[i],LM(t,Yr+r,e)):(t.push(e),e[Qi]=null),e[Bn]=t;const o=e[wa];null!==o&&t!==o&&function t4(n,e){const t=n[Ca];e[hr]!==e[Bn][Bn][hr]&&(n[md]=!0),null===t?n[Ca]=[e]:t.push(e)}(o,e);const a=e[gs];null!==a&&a.insertView(n),e[Tt]|=128}(i,e,n,t),r){const s=aw(t,n),o=e[Ct],a=Ry(o,n[Ys]);null!==a&&function Yz(n,e,t,r,i,s){r[Un]=i,r[zr]=e,Lp(n,r,t,1,i,s)}(i,n[zr],o,e,a,s)}}Symbol;let Na=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=A5}return n})();const T5=Na,C5=class extends T5{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function b5(n,e,t,r){const i=e.tView,a=Zy(n,i,t,4096&n[Tt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[wa]=n[e.index];const l=n[gs];return null!==l&&(a[gs]=l.createEmbeddedView(i)),Xw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Wp(i)}};function A5(){return function fv(n,e){return 4&n.type?new C5(e,n,eh(n,e)):null}(Xr(),we())}let To=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=x5}return n})();function x5(){return function tO(n,e){let t;const r=e[n.index];return mi(r)?t=r:(t=DP(r,e,null,n),e[n.index]=t,Qy(e,t)),nO(t,e,n,r),new J1(t,n,e)}(Xr(),we())}const O5=To,J1=class extends O5{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return eh(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(kd(e)){const t=Kl(e,this._hostLView),r=xc(e);return new ti(t[qe].data[r+8],t)}return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=eO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Yr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Rp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}const c=o?e:new Kp(Gt(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const F=(o?l:this.parentInjector).get(so,null);F&&(s=F)}Gt(c.componentType??{});const I=c.create(l,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Mb(n){return mi(n[Bn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=i[Bn],f=new J1(l,l[zr],l[Bn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return w5(a,i,o,!r),e.attachToViewContainerRef(),LM(T0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=eO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=My(this._lContainer,t);r&&(vy(T0(this._lContainer),t),rw(r[qe],r))}detach(e){const t=this._adjustIndex(e,-1),r=My(this._lContainer,t);return r&&null!=vy(T0(this._lContainer),t)?new Wp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eO(n){return n[8]}function T0(n){return n[8]||(n[8]=[])}let nO=function rO(n,e,t,r){if(n[Ys])return;let i;i=8&t.type?yn(r):function N5(n,e){const t=n[Ct],r=t.createComment(""),i=Pi(e,n);return Ql(t,Ry(t,i),r,function s4(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ys]=i};const k0=new Ie("Application Initializer");let F0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$e(k0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Jp(s))t.push(s);else if(ux(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Xo=new Ie("LocaleId",{providedIn:"root",factory:()=>$e(Xo,Dt.Optional|Dt.SkipSelf)||function dW(){return typeof $localize<"u"&&$localize.locale||mh}()});let MO=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class pW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let RO=(()=>{class n{compileModuleSync(t){return new E0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=xa(gi(t).declarations).reduce((o,a)=>{const c=Gt(a);return c&&o.push(new Kp(c)),o},[]);return new pW(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const NO=new Ie(""),_v=new Ie("");let j0,U0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,j0||(function FW(n){j0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Wt),pe(B0),pe(_v))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),B0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return j0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Bc=null;const kO=new Ie("AllowMultipleToken"),$0=new Ie("PlatformDestroyListeners"),z0=new Ie("appBootstrapListener");class LO{constructor(e,t){this.name=e,this.token=t}}function UO(n,e,t=[]){const r=`Platform: ${e}`,i=new Ie(r);return(s=[])=>{let o=H0();if(!o||o.injector.get(kO,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function UW(n){if(Bc&&!Bc.get(kO,!1))throw new he(400,!1);(function FO(){!function vb(n){Ed=n}(()=>{throw new he(600,!1)})})(),Bc=n;const e=n.get(jO);(function VO(n){n.get(jR,null)?.forEach(t=>t())})(n)}(function BO(n=[],e){return Ei.create({name:e,providers:[{provide:yw,useValue:"platform"},{provide:$0,useValue:new Set([()=>Bc=null])},...n]})}(a,r))}return function jW(n){const e=H0();if(!e)throw new he(401,!1);return e}()}}function H0(){return Bc?.get(jO)??null}let jO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function $W(n="zone.js",e){return"noop"===n?new wH:"zone.js"===n?new Wt(e):n}(r?.ngZone,function $O(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function J6(n,e,t){return new v0(n,e,t)}(t.moduleType,this.injector,function WO(n){return[{provide:Wt,useFactory:n},{provide:Bp,multi:!0,useFactory:()=>{const e=$e(HW,{optional:!0});return()=>e.initialize()}},{provide:GO,useFactory:zW},{provide:rP,useFactory:iP}]}(()=>i)),o=s.injector.get(Eo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{yv(this._modules,s),a.unsubscribe()})}),function zO(n,e,t){try{const r=t();return Jp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(F0);return a.runInitializers(),a.donePromise.then(()=>(function a1(n){Mi(n,"Expected localeId to be defined"),"string"==typeof n&&(o1=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Xo,mh)||mh),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=HO({},r);return function LW(n,e,t){const r=new E0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ru);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new he(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get($0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ei))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function HO(n,e){return Array.isArray(e)?e.reduce(HO,n):{...n,...e}}let ru=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$e(GO),this.zoneIsStable=$e(rP),this.componentTypes=[],this.components=[],this.isStable=$e(MO).hasPendingTasks.pipe(ze(t=>t?V(!1):this.zoneIsStable),mt(),fe()),this._injector=$e(so)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof GR;if(!this._injector.get(F0).done)throw!i&&function Vo(n){const e=Gt(n)||Mr(n)||$r(n);return null!==e&&e.standalone}(t),new he(405,!1);let o;o=i?t:this._injector.get(Gy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function VW(n){return n.isBoundToModule}(o)?void 0:this._injector.get(nu),l=o.create(Ei.NULL,[],r||o.selector,a),f=l.location.nativeElement,m=l.injector.get(NO,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),yv(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;yv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(z0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new he(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const GO=new Ie("",{providedIn:"root",factory:()=>$e(Eo).handleError.bind(void 0)});function zW(){const n=$e(Wt),e=$e(Eo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let HW=(()=>{class n{constructor(){this.zone=$e(Wt),this.applicationRef=$e(ru)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let vv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=GW}return n})();function GW(n){return function WW(n,e,t){if(wc(n)&&!t){const r=_i(n.index,e);return new Wp(r,r)}return 47&n.type?new Wp(e[hr],e):null}(Xr(),we(),16==(16&n))}class XO{constructor(){}supports(e){return ev(e)}create(e){return new JW(e)}}const XW=(n,e)=>e;class JW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||XW}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<eN(r,i,s)?t:r,a=eN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=c-i;if(l!=f){for(let y=0;y<l;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<l&&(s[y]=I+1)}s[o.previousIndex]=f-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ev(e))throw new he(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Oq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new e9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new JO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new JO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class e9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class t9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class JO{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new t9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class tN{constructor(){}supports(e){return e instanceof Map||Jw(e)}create(){return new n9}}class n9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jw(e)))throw new he(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new r9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class r9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nN(){return new bv([new XO])}let bv=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:nN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nN()),deps:[[n,new xp,new qr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new he(901,!1)}}return n})();function rN(){return new dg([new tN])}let dg=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:rN});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||rN()),deps:[[n,new xp,new qr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new he(901,!1)}}return n})();const o9=UO(null,"core",[]);let a9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ru))};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({})}return n})();function Eh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Q0=null;function jc(){return Q0}class I9{}const _r=new Ie("DocumentToken");let Y0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return $e(w9)},providedIn:"platform"})}return n})();const b9=new Ie("Location Initialized");let w9=(()=>{class n extends Y0{constructor(){super(),this._doc=$e(_r),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jc().getBaseHref(this._doc)}onPopState(t){const r=jc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=jc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function X0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hN(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ka(n){return n&&"?"!==n[0]?"?"+n:n}let su=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return $e(pN)},providedIn:"root"})}return n})();const fN=new Ie("appBaseHref");let pN=(()=>{class n extends su{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$e(_r).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return X0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ka(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ka(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ka(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Y0),pe(fN,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T9=(()=>{class n extends su{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=X0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Y0),pe(fN,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),J0=(()=>{class n{constructor(t){this._subject=new mr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function D9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hN(gN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ka(r))}normalize(t){return n.stripTrailingSlash(function A9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ka;static#t=this.joinWithSlash=X0;static#n=this.stripTrailingSlash=hN;static#r=this.\u0275fac=function(r){return new(r||n)(pe(su))};static#i=this.\u0275prov=Fe({token:n,factory:function(){return function C9(){return new J0(pe(su))}()},providedIn:"root"})}return n})();function gN(n){return n.replace(/\/index.html$/,"")}var es=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(es||{}),kn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(kn||{}),Vs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Vs||{}),Pr=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Pr||{});function Cv(n,e){return co(Xi(n)[jn.DateFormat],e)}function Av(n,e){return co(Xi(n)[jn.TimeFormat],e)}function Dv(n,e){return co(Xi(n)[jn.DateTimeFormat],e)}function ao(n,e){const t=Xi(n),r=t[jn.NumberSymbols][e];if(typeof r>"u"){if(e===Pr.CurrencyDecimal)return t[jn.NumberSymbols][Pr.Decimal];if(e===Pr.CurrencyGroup)return t[jn.NumberSymbols][Pr.Group]}return r}function _N(n){if(!n[jn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[jn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function co(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function tT(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const j9=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hg={},$9=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Fa=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Fa||{}),fn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(fn||{}),pn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(pn||{});function z9(n,e,t,r){let i=function X9(n){if(EN(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return Sv(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(j9))return function J9(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(r)}const e=new Date(n);if(!EN(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=La(t,e)||e;let a,o=[];for(;e;){if(a=$9.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let c=i.getTimezoneOffset();r&&(c=vN(r,c),i=function Y9(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Q9(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(vN(e,i)-i))}(i,r,!0));let l="";return o.forEach(f=>{const m=function Z9(n){if(rT[n])return rT[n];let e;switch(n){case"G":case"GG":case"GGG":e=$n(pn.Eras,kn.Abbreviated);break;case"GGGG":e=$n(pn.Eras,kn.Wide);break;case"GGGGG":e=$n(pn.Eras,kn.Narrow);break;case"y":e=Gr(fn.FullYear,1,0,!1,!0);break;case"yy":e=Gr(fn.FullYear,2,0,!0,!0);break;case"yyy":e=Gr(fn.FullYear,3,0,!1,!0);break;case"yyyy":e=Gr(fn.FullYear,4,0,!1,!0);break;case"Y":e=xv(1);break;case"YY":e=xv(2,!0);break;case"YYY":e=xv(3);break;case"YYYY":e=xv(4);break;case"M":case"L":e=Gr(fn.Month,1,1);break;case"MM":case"LL":e=Gr(fn.Month,2,1);break;case"MMM":e=$n(pn.Months,kn.Abbreviated);break;case"MMMM":e=$n(pn.Months,kn.Wide);break;case"MMMMM":e=$n(pn.Months,kn.Narrow);break;case"LLL":e=$n(pn.Months,kn.Abbreviated,es.Standalone);break;case"LLLL":e=$n(pn.Months,kn.Wide,es.Standalone);break;case"LLLLL":e=$n(pn.Months,kn.Narrow,es.Standalone);break;case"w":e=nT(1);break;case"ww":e=nT(2);break;case"W":e=nT(1,!0);break;case"d":e=Gr(fn.Date,1);break;case"dd":e=Gr(fn.Date,2);break;case"c":case"cc":e=Gr(fn.Day,1);break;case"ccc":e=$n(pn.Days,kn.Abbreviated,es.Standalone);break;case"cccc":e=$n(pn.Days,kn.Wide,es.Standalone);break;case"ccccc":e=$n(pn.Days,kn.Narrow,es.Standalone);break;case"cccccc":e=$n(pn.Days,kn.Short,es.Standalone);break;case"E":case"EE":case"EEE":e=$n(pn.Days,kn.Abbreviated);break;case"EEEE":e=$n(pn.Days,kn.Wide);break;case"EEEEE":e=$n(pn.Days,kn.Narrow);break;case"EEEEEE":e=$n(pn.Days,kn.Short);break;case"a":case"aa":case"aaa":e=$n(pn.DayPeriods,kn.Abbreviated);break;case"aaaa":e=$n(pn.DayPeriods,kn.Wide);break;case"aaaaa":e=$n(pn.DayPeriods,kn.Narrow);break;case"b":case"bb":case"bbb":e=$n(pn.DayPeriods,kn.Abbreviated,es.Standalone,!0);break;case"bbbb":e=$n(pn.DayPeriods,kn.Wide,es.Standalone,!0);break;case"bbbbb":e=$n(pn.DayPeriods,kn.Narrow,es.Standalone,!0);break;case"B":case"BB":case"BBB":e=$n(pn.DayPeriods,kn.Abbreviated,es.Format,!0);break;case"BBBB":e=$n(pn.DayPeriods,kn.Wide,es.Format,!0);break;case"BBBBB":e=$n(pn.DayPeriods,kn.Narrow,es.Format,!0);break;case"h":e=Gr(fn.Hours,1,-12);break;case"hh":e=Gr(fn.Hours,2,-12);break;case"H":e=Gr(fn.Hours,1);break;case"HH":e=Gr(fn.Hours,2);break;case"m":e=Gr(fn.Minutes,1);break;case"mm":e=Gr(fn.Minutes,2);break;case"s":e=Gr(fn.Seconds,1);break;case"ss":e=Gr(fn.Seconds,2);break;case"S":e=Gr(fn.FractionalSeconds,1);break;case"SS":e=Gr(fn.FractionalSeconds,2);break;case"SSS":e=Gr(fn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Rv(Fa.Short);break;case"ZZZZZ":e=Rv(Fa.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Rv(Fa.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Rv(Fa.Long);break;default:return null}return rT[n]=e,e}(f);l+=m?m(i,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Sv(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function La(n,e){const t=function M9(n){return Xi(n)[jn.LocaleId]}(n);if(hg[t]=hg[t]||{},hg[t][e])return hg[t][e];let r="";switch(e){case"shortDate":r=Cv(n,Vs.Short);break;case"mediumDate":r=Cv(n,Vs.Medium);break;case"longDate":r=Cv(n,Vs.Long);break;case"fullDate":r=Cv(n,Vs.Full);break;case"shortTime":r=Av(n,Vs.Short);break;case"mediumTime":r=Av(n,Vs.Medium);break;case"longTime":r=Av(n,Vs.Long);break;case"fullTime":r=Av(n,Vs.Full);break;case"short":const i=La(n,"shortTime"),s=La(n,"shortDate");r=Mv(Dv(n,Vs.Short),[i,s]);break;case"medium":const o=La(n,"mediumTime"),a=La(n,"mediumDate");r=Mv(Dv(n,Vs.Medium),[o,a]);break;case"long":const c=La(n,"longTime"),l=La(n,"longDate");r=Mv(Dv(n,Vs.Long),[c,l]);break;case"full":const f=La(n,"fullTime"),m=La(n,"fullDate");r=Mv(Dv(n,Vs.Full),[f,m])}return r&&(hg[t][e]=r),r}function Mv(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Co(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Gr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function q9(n,e){switch(n){case fn.FullYear:return e.getFullYear();case fn.Month:return e.getMonth();case fn.Date:return e.getDate();case fn.Hours:return e.getHours();case fn.Minutes:return e.getMinutes();case fn.Seconds:return e.getSeconds();case fn.FractionalSeconds:return e.getMilliseconds();case fn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===fn.Hours)0===a&&-12===t&&(a=12);else if(n===fn.FractionalSeconds)return function H9(n,e){return Co(n,3).substring(0,e)}(a,e);const c=ao(o,Pr.MinusSign);return Co(a,e,c,r,i)}}function $n(n,e,t=es.Format,r=!1){return function(i,s){return function G9(n,e,t,r,i,s){switch(t){case pn.Months:return function x9(n,e,t){const r=Xi(n),s=co([r[jn.MonthsFormat],r[jn.MonthsStandalone]],e);return co(s,t)}(e,i,r)[n.getMonth()];case pn.Days:return function P9(n,e,t){const r=Xi(n),s=co([r[jn.DaysFormat],r[jn.DaysStandalone]],e);return co(s,t)}(e,i,r)[n.getDay()];case pn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function F9(n){const e=Xi(n);return _N(e),(e[jn.ExtraData][2]||[]).map(r=>"string"==typeof r?tT(r):[tT(r[0]),tT(r[1])])}(e),f=function L9(n,e,t){const r=Xi(n);_N(r);const s=co([r[jn.ExtraData][0],r[jn.ExtraData][1]],e)||[];return co(s,t)||[]}(e,i,r),m=l.findIndex(y=>{if(Array.isArray(y)){const[I,T]=y,N=o>=I.hours&&a>=I.minutes,F=o<T.hours||o===T.hours&&a<T.minutes;if(I.hours<T.hours){if(N&&F)return!0}else if(N||F)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(-1!==m)return f[m]}return function R9(n,e,t){const r=Xi(n),s=co([r[jn.DayPeriodsFormat],r[jn.DayPeriodsStandalone]],e);return co(s,t)}(e,i,r)[o<12?0:1];case pn.Eras:return function O9(n,e){return co(Xi(n)[jn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Rv(n){return function(e,t,r){const i=-1*r,s=ao(t,Pr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Fa.Short:return(i>=0?"+":"")+Co(o,2,s)+Co(Math.abs(i%60),2,s);case Fa.ShortGMT:return"GMT"+(i>=0?"+":"")+Co(o,1,s);case Fa.Long:return"GMT"+(i>=0?"+":"")+Co(o,2,s)+":"+Co(Math.abs(i%60),2,s);case Fa.Extended:return 0===r?"Z":(i>=0?"+":"")+Co(o,2,s)+":"+Co(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const W9=0,Pv=4;function yN(n){return Sv(n.getFullYear(),n.getMonth(),n.getDate()+(Pv-n.getDay()))}function nT(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=yN(t),o=function K9(n){const e=Sv(n,W9,1).getDay();return Sv(n,0,1+(e<=Pv?Pv:Pv+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Co(i,n,ao(r,Pr.MinusSign))}}function xv(n,e=!1){return function(t,r){return Co(yN(t).getFullYear(),n,ao(r,Pr.MinusSign),e)}}const rT={};function vN(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function EN(n){return n instanceof Date&&!isNaN(n.valueOf())}const lT=/\s+/,TN=[];let CN=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=TN,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(lT):TN}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(lT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(lT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(de(bv),de(dg),de(Es),de(Pa))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class f8{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new f8(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),DN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{DN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(de(To),de(Na),de(bv))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function DN(n,e){n.context.$implicit=e.item}let pg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new p8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){SN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){SN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(de(To),de(Na))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class p8{constructor(){this.$implicit=null,this.ngIf=null}}function SN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ot(e)}'.`)}const D8=new Ie("DATE_PIPE_DEFAULT_TIMEZONE"),S8=new Ie("DATE_PIPE_DEFAULT_OPTIONS");let gg=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return z9(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function Ao(n,e){return new he(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(de(Xo,16),de(D8,24),de(S8,24))};static#t=this.\u0275pipe=jr({name:"date",type:n,pure:!0,standalone:!0})}return n})(),RN=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=jr({name:"json",type:n,pure:!1,standalone:!0})}return n})(),xN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({})}return n})();const ON="browser";function NN(n){return n===ON}function Nv(n){return"server"===n}let B8=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new j8(pe(_r),window)})}return n})();class j8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class h7 extends I9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mT extends h7{static makeCurrent(){!function E9(n){Q0||(Q0=n)}(new mT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function f7(){return _g=_g||document.querySelector("base"),_g?_g.getAttribute("href"):null}();return null==t?null:function p7(n){Lv=Lv||document.createElement("a"),Lv.setAttribute("href",n);const e=Lv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_g=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function d8(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Lv,_g=null,m7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const _T=new Ie("EventManagerPlugins");let UN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_T),pe(Wt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class BN{constructor(e){this._doc=e}}const yT="ng-app-id";let jN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${yT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(yT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(yT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_r),pe(By),pe(bw,8),pe(ks))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const vT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ET=/%COMP%/g,E7=new Ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function zN(n,e){return e.map(t=>t.replace(ET,n))}let IT=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Nv(a),this.defaultRenderer=new bT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===nr.ShadowDom&&(r={...r,encapsulation:nr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof qN?i.applyToHost(t):i instanceof wT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case nr.Emulated:s=new qN(c,l,r,this.appId,f,o,a,m);break;case nr.ShadowDom:return new T7(c,l,t,r,o,a,this.nonce,m);default:s=new wT(c,l,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(UN),pe(jN),pe(By),pe(E7),pe(_r),pe(ks),pe(Wt),pe(bw))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class bT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(vT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=vT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=vT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fc.DashCase|Fc.Important)?e.style.setProperty(t,r,i&Fc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=jc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function HN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class T7 extends bT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=zN(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wT extends bT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?zN(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class qN extends wT{constructor(e,t,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=function I7(n){return"_ngcontent-%COMP%".replace(ET,n)}(l),this.hostAttr=function b7(n){return"_nghost-%COMP%".replace(ET,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let C7=(()=>{class n extends BN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_r))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const GN=["alt","control","meta","shift"],A7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},D7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let S7=(()=>{class n extends BN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),GN.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=A7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),GN.forEach(o=>{o!==i&&(0,D7[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_r))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const x7=UO(o9,"browser",[{provide:ks,useValue:ON},{provide:jR,useValue:function M7(){mT.makeCurrent()},multi:!0},{provide:_r,useFactory:function P7(){return function f4(n){uw=n}(document),document},deps:[]}]),O7=new Ie(""),ZN=[{provide:_v,useClass:class g7{addToWindow(e){on.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new he(5103,!1);return s},on.getAllAngularTestabilities=()=>e.getAllTestabilities(),on.getAllAngularRootElements=()=>e.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(r=>{const i=on.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?jc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:NO,useClass:U0,deps:[Wt,B0,_v]},{provide:U0,useClass:U0,deps:[Wt,B0,_v]}],QN=[{provide:yw,useValue:"root"},{provide:Eo,useFactory:function R7(){return new Eo},deps:[]},{provide:_T,useClass:C7,multi:!0,deps:[_r,Wt,ks]},{provide:_T,useClass:S7,multi:!0,deps:[_r]},IT,jN,UN,{provide:zp,useExisting:IT},{provide:class z8{},useClass:m7,deps:[]},[]];let AT,YN=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:By,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(O7,12))};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({providers:[...QN,...ZN],imports:[xN,a9]})}return n})(),XN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_r))};static#t=this.\u0275prov=Fe({token:n,factory:function(r){let i=null;return i=r?new r:function k7(){return new XN(pe(_r))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{AT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{AT=!1}let yg,rk=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?NN(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ks))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vv(n){return function B7(){if(null==yg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yg=!0}))}finally{yg=yg||!1}return yg}()?n:!!n.capture}function sk(n){return Array.isArray(n)?n:[n]}const{isArray:Q7}=Array,{getPrototypeOf:Y7,prototype:X7,keys:J7}=Object;function ak(n){if(1===n.length){const e=n[0];if(Q7(e))return{args:e,keys:null};if(function eK(n){return n&&"object"==typeof n&&Y7(n)===X7}(e)){const t=J7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:tK}=Array;function ck(n){return De(e=>function nK(n,e){return tK(e)?n(...e):n(e)}(n,e))}function lk(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Bv(...n){const e=ds(n),t=Si(n),{args:r,keys:i}=ak(n);if(0===r.length)return b([],e);const s=new bt(function rK(n,e,t=Nt){return r=>{uk(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)uk(e,()=>{const l=b(n[c],e);let f=!1;l.subscribe(Oe(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>lk(i,o):Nt));return t?s.pipe(ck(t)):s}function uk(n,e,t){n?gr(t,n,e):e()}function jv(...n){return function iK(){return Fr(1)}()(b(n,ds(n)))}function zc(n){return n<=0?()=>Ln:ce((e,t)=>{let r=0;e.subscribe(Oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ws(n,e){return ce((t,r)=>{let i=0;t.subscribe(Oe(r,s=>n.call(e,s,i++)&&r.next(s)))})}class oK extends Pt{constructor(e,t){super()}schedule(e,t=0){return this}}const $v={setInterval(n,e,...t){const{delegate:r}=$v;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=$v;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class dk extends oK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return $v.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&$v.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ST={now:()=>(ST.delegate||Date).now(),delegate:void 0};class vg{constructor(e,t=vg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}vg.now=ST.now;class hk extends vg{constructor(e,t=vg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const MT=new hk(dk);function fk(n,e=MT){return ce((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=s;s=null,r.next(l)}};function c(){const l=o+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(Oe(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Eg(...n){const e=ds(n);return ce((t,r)=>{(e?jv(n,t,e):jv(n,t)).subscribe(r)})}function pk(n){return ce((e,t)=>{Vt(n).subscribe(Oe(t,()=>t.complete(),Xe)),!t.closed&&e.subscribe(t)})}const gk=new Set;let au,aK=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lK}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function cK(n,e){if(!gk.has(n))try{au||(au=document.createElement("style"),e&&(au.nonce=e),au.setAttribute("type","text/css"),document.head.appendChild(au)),au.sheet&&(au.sheet.insertRule(`@media ${n} {body{ }}`,0),gk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rk),pe(bw,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lK(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let uK=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return mk(sk(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Bv(mk(sk(t)).map(o=>this._registerQuery(o).observable));return s=jv(s.pipe(zc(1)),s.pipe(function sK(n){return ws((e,t)=>n<=t)}(1),fk(0))),s.pipe(De(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new bt(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Eg(r),De(({matches:o})=>({query:t,matches:o})),pk(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(pe(aK),pe(Wt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Ek="cdk-high-contrast-black-on-white",Ik="cdk-high-contrast-white-on-black",RT="cdk-high-contrast-active";let IK=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=$e(uK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(RT,Ek,Ik),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(RT,Ek):2===r&&t.add(RT,Ik)}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rk),pe(_r))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({})}return n})();const CK=new Ie("mat-sanity-checks",{providedIn:"root",factory:function TK(){return!0}});let Hc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function z7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(IK),pe(CK,8),pe(_r))};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[bk,bk]})}return n})(),Ck=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[Hc,Hc]})}return n})();const Ak=Vv({passive:!0,capture:!0});class SK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function $7(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Ak)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Ak)))}}class PT{static#e=this._eventManager=new SK;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ok(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Dk,...r.animation},o=r.radius||function RK(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,l=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,N=new DK(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",N.state=0,r.persistent||(this._mostRecentTransientRipple=N);return!T&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const W=()=>this._finishRippleTransition(N),z=()=>this._destroyRipple(N);f.addEventListener("transitionend",W),f.addEventListener("transitioncancel",z)}),this._activeRipples.set(N,null),(T||!l)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...Dk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ok(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Mk.forEach(r=>{PT._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Rk.forEach(t=>{this._triggerElement.addEventListener(t,this,Sk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function yK(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function vK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Mk.forEach(t=>PT._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Rk.forEach(t=>e.removeEventListener(t,this,Sk)))}}let LK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[Hc,xN,Hc]})}return n})();function wh(n,e){const t=x(n)?n:()=>n,r=i=>i.error(t());return new bt(e?i=>e.schedule(r,0,i):r)}function xT(...n){const e=Si(n),{args:t,keys:r}=ak(n),i=new bt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let f=0;f<o;f++){let m=!1;Vt(t[f]).subscribe(Oe(s,y=>{m||(m=!0,l--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(l||s.next(r?lk(r,a):a),s.complete())}))}});return e?i.pipe(ck(e)):i}function Wr(n,e,t){const r=x(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Oe(s,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),s.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Nt}function qc(n){return ce((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Oe(t,void 0,void 0,o=>{s=Vt(n(o,qc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bg(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Th(n,e){return x(e)?nn(n,e,1):nn(n,1)}let mZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[Hc,Hc]})}return n})(),vZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[Ck,Hc,Ck,Hc]})}return n})();const Kv=Re(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Zk(n){return new bt(e=>{Vt(n()).subscribe(e)})}function BT(){return ce((n,e)=>{let t=null;n._refCount++;const r=Oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qk extends bt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ee(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;const t=this.getSubject();e.add(this.source.subscribe(Oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return BT()(this)}}function Zv(n){return ce((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yk(n=IZ){return ce((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IZ(){return new Kv}function Kc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,s)=>n(i,s,r)):Nt,zc(1),t?Zv(e):Yk(()=>new Kv))}function Qv(n,e){return ce(function bZ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Oe(o,f=>{const m=l++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function jT(n){return n<=0?()=>Ln:ce((e,t)=>{let r=[];e.subscribe(Oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const kt="primary",Ag=Symbol("RouteTitle");class CZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ch(n){return new CZ(n)}function AZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Jo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Xk(n[i],e[i]))return!1;return!0}function Xk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Jk(n){return n.length>0?n[n.length-1]:null}function Zc(n){return function EZ(n){return!!n&&(n instanceof bt||x(n.lift)&&x(n.subscribe))}(n)?n:Jp(n)?b(Promise.resolve(n)):V(n)}const SZ={exact:function nF(n,e,t){if(!du(n.segments,e.segments)||!Yv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nF(n.children[r],e.children[r],t))return!1;return!0},subset:rF},eF={exact:function MZ(n,e){return Jo(n,e)},subset:function RZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xk(n[t],e[t]))},ignored:()=>!0};function tF(n,e,t){return SZ[t.paths](n.root,e.root,t.matrixParams)&&eF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rF(n,e,t){return iF(n,e,e.segments,t)}function iF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!du(i,t)||e.hasChildren()||!Yv(i,t,r))}if(n.segments.length===t.length){if(!du(n.segments,t)||!Yv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!rF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(du(n.segments,i)&&Yv(n.segments,i,r)&&n.children[kt])&&iF(n.children[kt],e,s,r)}}function Yv(n,e,t){return e.every((r,i)=>eF[t](n[i].parameters,r.parameters))}class Ah{constructor(e=new Cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}toString(){return OZ.serialize(this)}}class Cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xv(this)}}class Dg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ch(this.parameters)),this._parameterMap}toString(){return aF(this)}}function du(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Sg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new $T},providedIn:"root"})}return n})();class $T{parse(e){const t=new HZ(e);return new Ah(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mg(e.root,!0)}`,r=function FZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Jv(t)}=${Jv(i)}`).join("&"):`${Jv(t)}=${Jv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function NZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const OZ=new $T;function Xv(n){return n.segments.map(e=>aF(e)).join("/")}function Mg(n,e){if(!n.hasChildren())return Xv(n);if(e){const t=n.children[kt]?Mg(n.children[kt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==kt&&r.push(`${i}:${Mg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===kt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==kt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===kt?[Mg(n.children[kt],!1)]:[`${i}:${Mg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${Xv(n)}/${t[0]}`:`${Xv(n)}/(${t.join("//")})`}}function sF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jv(n){return sF(n).replace(/%3B/gi,";")}function zT(n){return sF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eE(n){return decodeURIComponent(n)}function oF(n){return eE(n.replace(/\+/g,"%20"))}function aF(n){return`${zT(n.path)}${function kZ(n){return Object.keys(n).map(e=>`;${zT(e)}=${zT(n[e])}`).join("")}(n.parameters)}`}const LZ=/^[^\/()?;#]+/;function HT(n){const e=n.match(LZ);return e?e[0]:""}const VZ=/^[^\/()?;=#]+/,BZ=/^[^=?&#]+/,$Z=/^[^&#]+/;class HZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Cn(e,t)),r}parseSegment(){const e=HT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new Dg(eE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function UZ(n){const e=n.match(VZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=HT(this.remaining);i&&(r=i,this.capture(r))}e[eE(t)]=eE(r)}parseQueryParam(e){const t=function jZ(n){const e=n.match(BZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function zZ(n){const e=n.match($Z);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=oF(t),s=oF(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=HT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new he(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=kt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[kt]:new Cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}}function cF(n){return n.segments.length>0?new Cn([],{[kt]:n}):n}function lF(n){const e={};for(const r of Object.keys(n.children)){const s=lF(n.children[r]);if(r===kt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qZ(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Cn(n.segments.concat(e.segments),e.children)}return n}(new Cn(n.segments,e))}function hu(n){return n instanceof Ah}function uF(n){let e;const i=cF(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new Cn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function dF(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return qT(i,i,i,t,r);const s=function WZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new fF(t,e,r)}(e);if(s.toRoot())return qT(i,i,new Cn([],{}),t,r);const o=function KZ(n,e,t){if(n.isAbsolute)return new nE(e,!0,0);if(!t)return new nE(e,!1,NaN);if(null===t.parent)return new nE(t,!0,0);const r=tE(n.commands[0])?0:1;return function ZZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new nE(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Pg(o.segmentGroup,o.index,s.commands):pF(o.segmentGroup,o.index,s.commands);return qT(i,o.segmentGroup,a,t,r)}function tE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rg(n){return"object"==typeof n&&null!=n&&n.outlets}function qT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:hF(n,e,t);const a=cF(lF(o));return new Ah(a,s,i)}function hF(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:hF(s,e,t)}),new Cn(n.segments,r)}class fF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tE(r[0]))throw new he(4003,!1);const i=r.find(Rg);if(i&&i!==Jk(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nE{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function pF(n,e,t){if(n||(n=new Cn([],{})),0===n.segments.length&&n.hasChildren())return Pg(n,e,t);const r=function YZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Rg(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!mF(c,l,o))return s;r+=2}else{if(!mF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Cn(n.segments.slice(0,r.pathIndex),{});return s.children[kt]=new Cn(n.segments.slice(r.pathIndex),n.children),Pg(s,0,i)}return r.match&&0===i.length?new Cn(n.segments,{}):r.match&&!n.hasChildren()?GT(n,e,t):r.match?Pg(n,0,i):GT(n,e,t)}function Pg(n,e,t){if(0===t.length)return new Cn(n.segments,{});{const r=function QZ(n){return Rg(n[0])?n[0].outlets:{[kt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==kt)&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length){const s=Pg(n.children[kt],e,t);return new Cn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=pF(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Cn(n.segments,i)}}function GT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Rg(s)){const c=XZ(s.outlets);return new Cn(r,c)}if(0===i&&tE(t[0])){r.push(new Dg(n.segments[e].path,gF(t[0]))),i++;continue}const o=Rg(s)?s.outlets[kt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&tE(a)?(r.push(new Dg(o,gF(a))),i+=2):(r.push(new Dg(o,{})),i++)}return new Cn(r,{})}function XZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=GT(new Cn([],{}),0,r))}),e}function gF(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function mF(n,e,t){return n==t.path&&Jo(e,t.parameters)}const xg="imperative";class ea{constructor(e,t){this.id=e,this.url=t}}class rE extends ea{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ua extends ea{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Og extends ea{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dh extends ea{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class iE extends ea{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _F extends ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JZ extends ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eQ extends ea{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tQ extends ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nQ extends ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class iQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WT{}class KT{constructor(e){this.url=e}}class lQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ng,this.attachRef=null}}let Ng=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lQ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ZT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ZT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QT(e,this._root).map(t=>t.value)}}function ZT(n,e){if(n===e.value)return e;for(const t of e.children){const r=ZT(n,t);if(r)return r}return null}function QT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=QT(n,t);if(r.length)return r.unshift(e),r}return[]}class Ba{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class EF extends vF{constructor(e,t){super(e),this.snapshot=t,YT(this,e)}toString(){return this.snapshot.toString()}}function IF(n,e){const t=function uQ(n,e){const o=new sE([],{},{},"",{},kt,e,null,{});return new wF("",new Ba(o,[]))}(0,e),r=new w([new Dg("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new Do(r,i,o,a,s,kt,e,t.root);return c.snapshot=t.root,new EF(new Ba(c,[]),t)}class Do{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(De(l=>l[Ag]))??V(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(De(e=>Ch(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(De(e=>Ch(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function dQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sE{get title(){return this.data?.[Ag]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ch(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wF extends vF{constructor(e,t){super(t),this.url=e,YT(this,t)}toString(){return TF(this._root)}}function YT(n,e){e.value._routerState=n,e.children.forEach(t=>YT(n,t))}function TF(n){const e=n.children.length>0?` { ${n.children.map(TF).join(", ")} } `:"";return`${n.value}${e}`}function XT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jo(e.params,t.params)||n.paramsSubject.next(t.params),function DZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Jo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JT(n,e){const t=Jo(n.params,e.params)&&function PZ(n,e){return du(n,e)&&n.every((t,r)=>Jo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||JT(n.parent,e.parent))}let oE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new mr,this.deactivateEvents=new mr,this.attachEvents=new mr,this.detachEvents=new mr,this.parentContexts=$e(Ng),this.location=$e(To),this.changeDetector=$e(vv),this.environmentInjector=$e(so),this.inputBinder=$e(aE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hQ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_s]})}return n})();class hQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Do?this.route:e===Ng?this.childContexts:this.parent.get(e,t)}}const aE=new Ie("");let CF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Bv([r.queryParams,r.params,r.data]).pipe(ze(([s,o,a],c)=>(a={...s,...o,...a},0===c?V(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function v9(n){const e=Gt(n);if(!e)return null;const t=new Kp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function kg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function pQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kg(n,r,i);return kg(n,r)})}(n,e,t);return new Ba(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>kg(n,a)),o}}const r=function gQ(n){return new Do(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>kg(n,s));return new Ba(r,i)}}const eC="ngNavigationCancelingError";function AF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=hu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=DF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function DF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[eC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function SF(n){return n&&n[eC]}let MF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["ng-component"]],standalone:!0,features:[N1],decls:1,vars:0,template:function(r,i){1&r&&at(0,"router-outlet")},dependencies:[oE],encapsulation:2})}return n})();function tC(n){const e=n.children&&n.children.map(tC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=MF),t}function So(n){return n.outlet||kt}function Fg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new oQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(XT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),XT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Fg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class RF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cE{constructor(e,t){this.component=e,this.route=t}}function TQ(n,e,t){const r=n._root;return Lg(r,e?e._root:null,t,[r.value])}function Mh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Sl(n){return null!==ga(n)}(n)?e.get(n):n:r}function Lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Sh(e);return n.children.forEach(o=>{(function AQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function DQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!du(n.url,e.url);case"pathParamsOrQueryParamsChange":return!du(n.url,e.url)||!Jo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JT(n,e)||!Jo(n.queryParams,e.queryParams);default:return!JT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new RF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Lg(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cE(a.outlet.component,o))}else o&&Vg(e,a,i),i.canActivateChecks.push(new RF(r)),Lg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Vg(a,t.getContext(o),i)),i}function Vg(n,e,t){const r=Sh(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Vg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new cE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ug(n){return"function"==typeof n}function PF(n){return n instanceof Kv||"EmptyError"===n?.name}const lE=Symbol("INITIAL_VALUE");function Rh(){return ze(n=>Bv(n.map(e=>e.pipe(zc(1),Eg(lE)))).pipe(De(e=>{for(const t of e)if(!0!==t){if(t===lE)return lE;if(!1===t||t instanceof Ah)return t}return!0}),ws(e=>e!==lE),zc(1)))}function xF(n){return function Nn(...n){return dn(n)}(Wr(e=>{if(hu(e))throw AF(0,e)}),De(e=>!0===e))}class uE{constructor(e){this.segmentGroup=e||null}}class OF{constructor(e){this.urlTree=e}}function Ph(n){return wh(new uE(n))}function NF(n){return wh(new OF(n))}class WQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new he(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return V(r);if(i.numberOfChildren>1||!i.children[kt])return wh(new he(4e3,!1));i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ah(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Cn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const nC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KQ(n,e,t,r,i){const s=rC(n,e,t);return s.matched?(r=function _Q(n,e){return n.providers&&!n._injector&&(n._injector=I0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function HQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?V(i.map(o=>{const a=Mh(o,n);return Zc(function OQ(n){return n&&Ug(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Rh(),xF()):V(!0)}(r,e,t).pipe(De(o=>!0===o?s:{...nC}))):V(s)}function rC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...nC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||AZ)(t,n,e);if(!i)return{...nC};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function kF(n,e,t,r){return t.length>0&&function YQ(n,e,t){return t.some(r=>dE(n,e,r)&&So(r)!==kt)}(n,t,r)?{segmentGroup:new Cn(e,QQ(r,new Cn(t,n.children))),slicedSegments:[]}:0===t.length&&function XQ(n,e,t){return t.some(r=>dE(n,e,r))}(n,t,r)?{segmentGroup:new Cn(n.segments,ZQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Cn(n.segments,n.children),slicedSegments:t}}function ZQ(n,e,t,r,i){const s={};for(const o of r)if(dE(n,t,o)&&!i[So(o)]){const a=new Cn([],{});s[So(o)]=a}return{...i,...s}}function QQ(n,e){const t={};t[kt]=e;for(const r of n)if(""===r.path&&So(r)!==kt){const i=new Cn([],{});t[So(r)]=i}return t}function dE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class nY{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new WQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new he(4002,!1)}recognize(){const e=kF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe(qc(t=>{if(t instanceof OF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof uE?this.noMatchError(t):t}),De(t=>{const r=new sE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),i=new Ba(r,t),s=new wF("",i),o=function GZ(n,e,t=null,r=null){return dF(uF(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,kt).pipe(qc(r=>{throw r instanceof uE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=bF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(Th(s=>{const o=r.children[s],a=function IQ(n,e){const t=n.filter(r=>So(r)===e);return t.push(...n.filter(r=>So(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Qv((s,o)=>(s.push(...o),s)),Zv(null),function wZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,s)=>n(i,s,r)):Nt,jT(1),t?Zv(e):Yk(()=>new Kv))}(),nn(s=>{if(null===s)return Ph(r);const o=FF(s);return function rY(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),V(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(Th(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(qc(c=>{if(c instanceof uE)return V(null);throw c}))),Kc(a=>!!a),qc(a=>{if(PF(a))return function eY(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?V([]):Ph(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function JQ(n,e,t,r){return!!(So(n)===r||r!==kt&&dE(e,t,n))&&("**"===n.path||rC(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ph(i):Ph(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?NF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(nn(o=>{const a=new Cn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:f}=rC(t,i,s);if(!a)return Ph(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?NF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(nn(y=>this.processSegment(e,r,t,y.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Jk(i).parameters:{};a=V({snapshot:new sE(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LF(r),So(r),r.component??r._loadedComponent??null,r,VF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=KQ(t,r,i,e).pipe(De(({matched:c,consumedSegments:l,remainingSegments:f,parameters:m})=>c?{snapshot:new sE(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LF(r),So(r),r.component??r._loadedComponent??null,r,VF(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(ze(c=>null===c?Ph(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ze(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:T,slicedSegments:N}=kF(t,y,I,l);if(0===N.length&&T.hasChildren())return this.processChildren(f,l,T).pipe(De(W=>null===W?null:[new Ba(m,W)]));if(0===l.length&&0===N.length)return V([new Ba(m,[])]);const F=So(r)===s;return this.processSegment(f,l,T,N,F?kt:s,!0).pipe(De(W=>[new Ba(m,W)]))}))))}getChildConfig(e,t,r){return t.children?V({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?V({routes:t._loadedRoutes,injector:t._loadedInjector}):function zQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?V(!0):V(i.map(o=>{const a=Mh(o,n);return Zc(function MQ(n){return n&&Ug(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Rh(),xF())}(e,t,r).pipe(nn(i=>i?this.configLoader.loadChildren(e,t).pipe(Wr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function GQ(n){return wh(DF(!1,3))}())):V({routes:[],injector:e})}}function iY(n){const e=n.value.routeConfig;return e&&""===e.path}function FF(n){const e=[],t=new Set;for(const r of n){if(!iY(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=FF(r.children);e.push(new Ba(r.value,i))}return e.filter(r=>!t.has(r))}function LF(n){return n.data||{}}function VF(n){return n.resolve||{}}function UF(n){return"string"==typeof n.title||null===n.title}function iC(n){return ze(e=>{const t=n(e);return t?b(t).pipe(De(()=>e)):V(e)})}const xh=new Ie("ROUTES");let sC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$e(RO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return V(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Zc(t.loadComponent()).pipe(De(BF),Wr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),bg(()=>{this.componentLoaders.delete(t)})),i=new Qk(r,()=>new ue).pipe(BT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return V({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function dY(n,e,t,r){return Zc(n.loadChildren()).pipe(De(BF),nn(i=>i instanceof x1||Array.isArray(i)?V(i):b(e.compileModuleAsync(i))),De(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(xh,[],{optional:!0,self:!0}).flat()),{routes:o.map(tC),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(bg(()=>{this.childrenLoaders.delete(r)})),o=new Qk(s,()=>new ue).pipe(BT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BF(n){return function hY(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let hE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ue,this.transitionAbortSubject=new ue,this.configLoader=$e(sC),this.environmentInjector=$e(so),this.urlSerializer=$e(Sg),this.rootContexts=$e(Ng),this.inputBindingEnabled=null!==$e(aE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>V(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new iQ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new rQ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(s=>0!==s.id),De(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ze(s=>{this.currentTransition=s;let o=!1,a=!1;return V(s).pipe(Wr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ze(c=>{const l=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Dh(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),Ln}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return V(c).pipe(ze(y=>{const I=this.transitions?.getValue();return this.events.next(new rE(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?Ln:Promise.resolve(y)}),function sY(n,e,t,r,i,s){return nn(o=>function tY(n,e,t,r,i,s,o="emptyOnly"){return new nY(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(De(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new _F(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:N,extras:F}=c,W=new rE(y,this.urlSerializer.serialize(I),T,N);this.events.next(W);const z=IF(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:z,urlAfterRedirects:I,extras:{...F,skipLocationChange:!1,replaceUrl:!1}},V(s)}{const y="";return this.events.next(new Dh(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),Ln}}),Wr(c=>{const l=new JZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),De(c=>(this.currentTransition=s={...c,guards:TQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function kQ(n,e){return nn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?V({...t,guardsResult:!0}):function FQ(n,e,t,r){return b(n).pipe(nn(i=>function $Q(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?V(s.map(a=>{const c=Fg(e)??i,l=Mh(a,c);return Zc(function xQ(n){return n&&Ug(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(Kc())})).pipe(Rh()):V(!0)}(i.component,i.route,t,e,r)),Kc(i=>!0!==i,!0))}(o,r,i,n).pipe(nn(a=>a&&function SQ(n){return"boolean"==typeof n}(a)?function LQ(n,e,t,r){return b(e).pipe(Th(i=>jv(function UQ(n,e){return null!==n&&e&&e(new sQ(n)),V(!0)}(i.route.parent,r),function VQ(n,e){return null!==n&&e&&e(new aQ(n)),V(!0)}(i.route,r),function jQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function CQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Zk(()=>V(o.guards.map(c=>{const l=Fg(o.node)??t,f=Mh(c,l);return Zc(function PQ(n){return n&&Ug(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Kc())})).pipe(Rh())));return V(s).pipe(Rh())}(n,i.path,t),function BQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return V(!0);const i=r.map(s=>Zk(()=>{const o=Fg(e)??t,a=Mh(s,o);return Zc(function RQ(n){return n&&Ug(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Kc())}));return V(i).pipe(Rh())}(n,i.route,t))),Kc(i=>!0!==i,!0))}(r,s,n,e):V(a)),De(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Wr(c=>{if(s.guardsResult=c.guardsResult,hu(c.guardsResult))throw AF(0,c.guardsResult);const l=new eQ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ws(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),iC(c=>{if(c.guards.canActivateChecks.length)return V(c).pipe(Wr(l=>{const f=new tQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ze(l=>{let f=!1;return V(l).pipe(function oY(n,e){return nn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return V(t);let s=0;return b(i).pipe(Th(o=>function aY(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!UF(i)&&(s[Ag]=i.title),function cY(n,e,t,r){const i=function lY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return V({});const s={};return b(i).pipe(nn(o=>function uY(n,e,t,r){const i=Fg(e)??r,s=Mh(n,i);return Zc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Kc(),Wr(a=>{s[o]=a}))),jT(1),function TZ(n){return De(()=>n)}(s),qc(o=>PF(o)?Ln:wh(o)))}(s,n,e,r).pipe(De(o=>(n._resolvedData=o,n.data=bF(n,t).resolve,i&&UF(i)&&(n.data[Ag]=i.title),null)))}(o.route,r,n,e)),Wr(()=>s++),jT(1),nn(o=>s===i.length?V(t):Ln))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Wr(l=>{const f=new nQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),iC(c=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Wr(y=>{f.component=y}),De(()=>{})));for(const y of f.children)m.push(...l(y));return m};return Bv(l(c.targetSnapshot.root)).pipe(Zv(),zc(1))}),iC(()=>this.afterPreactivation()),De(c=>{const l=function fQ(n,e,t){const r=kg(n,e._root,t?t._root:void 0);return new EF(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},s}),Wr(()=>{this.events.next(new WT)}),((n,e,t,r)=>De(i=>(new wQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),zc(1),Wr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ua(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),pk(this.transitionAbortSubject.pipe(Wr(c=>{throw c}))),bg(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),qc(c=>{if(a=!0,SF(c))this.events.next(new Og(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function mQ(n){return SF(n)&&hu(n.url)}(c)?this.events.next(new KT(c.url)):s.resolve(!1);else{this.events.next(new iE(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){s.reject(l)}}return Ln}))}))}cancelNavigationTransition(t,r,i){const s=new Og(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jF(n){return n!==xg}let $F=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===kt);return r}getResolvedTitleForRoute(t){return t.data[Ag]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return $e(fY)},providedIn:"root"})}return n})(),fY=(()=>{class n extends $F{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(XN))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return $e(mY)},providedIn:"root"})}return n})();class gY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mY=(()=>{class n extends gY{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fE=new Ie("",{providedIn:"root",factory:()=>({})});let _Y=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return $e(yY)},providedIn:"root"})}return n})(),yY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Bg||{});function zF(n,e){n.events.pipe(ws(t=>t instanceof Ua||t instanceof Og||t instanceof iE||t instanceof Dh),De(t=>t instanceof Ua||t instanceof Dh?Bg.COMPLETE:t instanceof Og&&(0===t.code||1===t.code)?Bg.REDIRECTING:Bg.FAILED),ws(t=>t!==Bg.REDIRECTING),zc(1)).subscribe(()=>{e()})}function vY(n){throw n}function EY(n,e,t){return e.parse("/")}const IY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=$e(SO),this.isNgZoneEnabled=!1,this._events=new ue,this.options=$e(fE,{optional:!0})||{},this.pendingTasks=$e(MO),this.errorHandler=this.options.errorHandler||vY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||EY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=$e(_Y),this.routeReuseStrategy=$e(pY),this.titleStrategy=$e($F),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=$e(xh,{optional:!0})?.flat()??[],this.navigationTransitions=$e(hE),this.urlSerializer=$e(Sg),this.location=$e(J0),this.componentInputBindingEnabled=!!$e(aE,{optional:!0}),this.eventsSubscription=new Pt,this.isNgZoneEnabled=$e(Wt)instanceof Wt&&Wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ah,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=IF(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(HF(r)&&this._events.next(r));if(r instanceof rE)jF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Dh)this.rawUrlTree=i.rawUrl;else if(r instanceof _F){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof WT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Og)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof KT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jF(i.source)};this.scheduleNavigation(s,xg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof iE&&this.restoreHistory(i,!0),r instanceof Ua&&(this.navigated=!0),HF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),xg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=uF(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return dF(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,xg,null,r)}navigate(t,r={skipLocationChange:!1}){return function wY(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new he(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...IY}:!1===r?{...bY}:r,hu(t))return tF(this.currentUrlTree,t,i);const s=this.parseUrl(t);return tF(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return zF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HF(n){return!(n instanceof WT||n instanceof KT)}let jg=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ua&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function xR(n,e,t){return function U4(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?PR:Zn}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(de(zn),de(Do),function Nc(n){return function G(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(ps(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Xr(),n)}("tabindex"),de(Pa),de(Es),de(su))};static#t=this.\u0275dir=nt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&gt("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Ko("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Eh],skipLocationChange:["skipLocationChange","skipLocationChange",Eh],replaceUrl:["replaceUrl","replaceUrl",Eh],routerLink:"routerLink"},standalone:!0,features:[qP,_s]})}return n})();class qF{}let AY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ws(t=>t instanceof Ua),Th(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=I0(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(Fr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):V(null);const s=i.pipe(nn(o=>null===o?V(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(Fr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(zn),pe(RO),pe(so),pe(qF),pe(sC))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oC=new Ie("");let GF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ua?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Dh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function yP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function ja(n,e){return{\u0275kind:n,\u0275providers:e}}function KF(){const n=$e(Ei);return e=>{const t=n.get(ru);if(e!==t.components[0])return;const r=n.get(zn),i=n.get(ZF);1===n.get(aC)&&r.initialNavigation(),n.get(QF,null,Dt.Optional)?.setUpPreloading(),n.get(oC,null,Dt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ZF=new Ie("",{factory:()=>new ue}),aC=new Ie("",{providedIn:"root",factory:()=>1}),QF=new Ie("");function RY(n){return ja(0,[{provide:QF,useExisting:AY},{provide:qF,useExisting:n}])}const YF=new Ie("ROUTER_FORROOT_GUARD"),xY=[J0,{provide:Sg,useClass:$T},zn,Ng,{provide:Do,useFactory:function WF(n){return n.routerState.root},deps:[zn]},sC,[]];function OY(){return new LO("Router",zn)}let XF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[xY,[],{provide:xh,multi:!0,useValue:t},{provide:YF,useFactory:LY,deps:[[zn,new qr,new xp]]},{provide:fE,useValue:r||{}},r?.useHash?{provide:su,useClass:T9}:{provide:su,useClass:pN},{provide:oC,useFactory:()=>{const n=$e(B8),e=$e(Wt),t=$e(fE),r=$e(hE),i=$e(Sg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new GF(i,r,n,e,t)}},r?.preloadingStrategy?RY(r.preloadingStrategy).\u0275providers:[],{provide:LO,multi:!0,useFactory:OY},r?.initialNavigation?VY(r):[],r?.bindToComponentInputs?ja(8,[CF,{provide:aE,useExisting:CF}]).\u0275providers:[],[{provide:JF,useFactory:KF},{provide:z0,multi:!0,useExisting:JF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:xh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(YF,8))};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({})}return n})();function LY(n){return"guarded"}function VY(n){return["disabled"===n.initialNavigation?ja(3,[{provide:k0,multi:!0,useFactory:()=>{const e=$e(zn);return()=>{e.setUpLocationChangeListener()}}},{provide:aC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ja(2,[{provide:aC,useValue:0},{provide:k0,multi:!0,deps:[Ei],useFactory:e=>{const t=e.get(b9,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(zn),s=e.get(ZF);zF(i,()=>{r(!0)}),e.get(hE).afterPreactivation=()=>(r(!0),s.closed?V(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const JF=new Ie("");var vr=We(303);(0,vr.registerVersion)("firebase","10.12.2","app");const HY=new class zY extends hk{}(class $Y extends dk{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),$a=new Lc("ANGULARFIRE2_VERSION");function cC(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const pE=(n,e)=>{const t=e?[e]:(0,vr.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class $g{constructor(){return pE(qY)}}const qY="app-check";function Oh(){}class eL{zone;delegate;constructor(e,t=HY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class GY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oh,{},Oh,Oh)),t.pipe(Wr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fu=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eL(Zone.current)),this.insideAngular=t.run(()=>new eL(Zone.current,MT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(pe(Wt))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function pu(n){return Nh().ngZone.run(()=>n())}function tL(n){return n.pipe(In(Nh().outsideAngular))}function ts(n){return function KY(n){return function(t){return(t=t.lift(new GY(n.ngZone))).pipe(Ar(n.outsideAngular),In(n.insideAngular))}}(Nh())(n)}const ZY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),pu(()=>n.apply(void 0,r))},lC=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=pu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oh,{},Oh,Oh))),r[s]=ZY(r[s],t));const i=function WY(n){return Nh().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof bt){const s=Nh();return i.pipe(Ar(s.outsideAngular),In(s.insideAngular))}return pu(()=>i)}return i instanceof bt?i.pipe(ts):i instanceof Promise?pu(()=>new Promise((s,o)=>i.then(a=>pu(()=>s(a)),a=>pu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:pu(()=>i)};var Mo=We(106);Mo.Z.registerVersion("firebase","10.12.2","app-compat");const XY=["ngOnDestroy"],nL=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(XY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,m),m})})})});class uC{constructor(e){return e}}const zg=new Ie("angularfire2.app.options"),Hg=new Ie("angularfire2.app.name");function gE(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Mo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Mo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;JY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new uC(o)}const JY=(n,...e)=>{},eX={provide:uC,useFactory:gE,deps:[zg,Wt,[new qr,Hg]]};let tX=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:zg,useValue:t},{provide:Hg,useValue:r}]}}constructor(t){Mo.Z.registerVersion("angularfire",$a.full,"core"),Mo.Z.registerVersion("angularfire",$a.full,"app-compat"),Mo.Z.registerVersion("angular",Ow.full,t.toString())}static \u0275fac=function(r){return new(r||n)(pe(ks))};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[eX]})}return n})();function mE(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function nX(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(iL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rX?" You may need to reload as Firebase is not HMR aware.":""}`),iL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rX=typeof module<"u"&&!!module.hot,iL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],We(365);class iX extends ue{constructor(e=1/0,t=1/0,r=ST){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function dC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,fe({connector:()=>new iX(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function sL(n,e){return x(e)?ze(()=>n,e):ze(()=>n)}const oL=new Ie("angularfire2.auth.use-emulator"),aL=new Ie("angularfire2.auth.settings"),cL=new Ie("angularfire2.auth.tenant-id"),lL=new Ie("angularfire2.auth.langugage-code"),uL=new Ie("angularfire2.auth.use-device-language"),dL=new Ie("angularfire.auth.persistence"),hL=(n,e,t,r,i,s,o,a)=>mE(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))c.settings[l]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let _E=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,f,m,y,I){const T=new ue,N=V(void 0).pipe(In(o.outsideAngular),ze(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,365)))),De(()=>gE(t,s,r)),De(F=>hL(F,s,a,l,f,m,c,y)),dC({bufferSize:1,refCount:!1}));if(Nv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=V(null);else{N.pipe(Kc()).subscribe();const F=N.pipe(ze(X=>X.getRedirectResult().then(ae=>ae,()=>null)),ts,dC({bufferSize:1,refCount:!1})),W=N.pipe(ze(X=>new bt(ae=>({unsubscribe:s.runOutsideAngular(()=>X.onAuthStateChanged(Se=>ae.next(Se),Se=>ae.error(Se),()=>ae.complete()))})))),z=N.pipe(ze(X=>new bt(ae=>({unsubscribe:s.runOutsideAngular(()=>X.onIdTokenChanged(Se=>ae.next(Se),Se=>ae.error(Se),()=>ae.complete()))}))));this.authState=F.pipe(sL(W),Ar(o.outsideAngular),In(o.insideAngular)),this.user=F.pipe(sL(z),Ar(o.outsideAngular),In(o.insideAngular)),this.idToken=this.user.pipe(ze(X=>X?b(X.getIdToken()):V(null))),this.idTokenResult=this.user.pipe(ze(X=>X?b(X.getIdTokenResult()):V(null))),this.credential=D(F,T,this.authState.pipe(ws(X=>!X))).pipe(De(X=>X?.user?X:null),Ar(o.outsideAngular),In(o.insideAngular))}return nL(this,N,s,{spy:{apply:(F,W,z)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&z.then(X=>T.next(X))}}})}static \u0275fac=function(r){return new(r||n)(pe(zg),pe(Hg,8),pe(ks),pe(Wt),pe(fu),pe(oL,8),pe(aL,8),pe(cL,8),pe(lL,8),pe(uL,8),pe(dL,8),pe($g,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),oX=(()=>{class n{constructor(){Mo.Z.registerVersion("angularfire",$a.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[_E]})}return n})();function hC(){return ce((n,e)=>{let t,r=!1;n.subscribe(Oe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var gu,gL,_e=We(861),yE=We(537),ta=We(879),Rt=We(58),fL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pL={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(q,B,$){$||($=0);var K=Array(16);if("string"==typeof B)for(var Y=0;16>Y;++Y)K[Y]=B.charCodeAt($++)|B.charCodeAt($++)<<8|B.charCodeAt($++)<<16|B.charCodeAt($++)<<24;else for(Y=0;16>Y;++Y)K[Y]=B[$++]|B[$++]<<8|B[$++]<<16|B[$++]<<24;var ne=q.g[3],H=(B=q.g[0])+(ne^($=q.g[1])&((Y=q.g[2])^ne))+K[0]+3614090360&4294967295;H=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=($=(Y=(ne=(B=$+(H<<7&4294967295|H>>>25))+((H=ne+(Y^B&($^Y))+K[1]+3905402710&4294967295)<<12&4294967295|H>>>20))+((H=Y+($^ne&(B^$))+K[2]+606105819&4294967295)<<17&4294967295|H>>>15))+((H=$+(B^Y&(ne^B))+K[3]+3250441966&4294967295)<<22&4294967295|H>>>10))+((H=B+(ne^$&(Y^ne))+K[4]+4118548399&4294967295)<<7&4294967295|H>>>25))+((H=ne+(Y^B&($^Y))+K[5]+1200080426&4294967295)<<12&4294967295|H>>>20))+((H=Y+($^ne&(B^$))+K[6]+2821735955&4294967295)<<17&4294967295|H>>>15))+((H=$+(B^Y&(ne^B))+K[7]+4249261313&4294967295)<<22&4294967295|H>>>10))+((H=B+(ne^$&(Y^ne))+K[8]+1770035416&4294967295)<<7&4294967295|H>>>25))+((H=ne+(Y^B&($^Y))+K[9]+2336552879&4294967295)<<12&4294967295|H>>>20))+((H=Y+($^ne&(B^$))+K[10]+4294925233&4294967295)<<17&4294967295|H>>>15))+((H=$+(B^Y&(ne^B))+K[11]+2304563134&4294967295)<<22&4294967295|H>>>10))+((H=B+(ne^$&(Y^ne))+K[12]+1804603682&4294967295)<<7&4294967295|H>>>25))+((H=ne+(Y^B&($^Y))+K[13]+4254626195&4294967295)<<12&4294967295|H>>>20))+((H=Y+($^ne&(B^$))+K[14]+2792965006&4294967295)<<17&4294967295|H>>>15))+((H=$+(B^Y&(ne^B))+K[15]+1236535329&4294967295)<<22&4294967295|H>>>10))+((H=B+(Y^ne&($^Y))+K[1]+4129170786&4294967295)<<5&4294967295|H>>>27))+((H=ne+($^Y&(B^$))+K[6]+3225465664&4294967295)<<9&4294967295|H>>>23))+((H=Y+(B^$&(ne^B))+K[11]+643717713&4294967295)<<14&4294967295|H>>>18))+((H=$+(ne^B&(Y^ne))+K[0]+3921069994&4294967295)<<20&4294967295|H>>>12))+((H=B+(Y^ne&($^Y))+K[5]+3593408605&4294967295)<<5&4294967295|H>>>27))+((H=ne+($^Y&(B^$))+K[10]+38016083&4294967295)<<9&4294967295|H>>>23))+((H=Y+(B^$&(ne^B))+K[15]+3634488961&4294967295)<<14&4294967295|H>>>18))+((H=$+(ne^B&(Y^ne))+K[4]+3889429448&4294967295)<<20&4294967295|H>>>12))+((H=B+(Y^ne&($^Y))+K[9]+568446438&4294967295)<<5&4294967295|H>>>27))+((H=ne+($^Y&(B^$))+K[14]+3275163606&4294967295)<<9&4294967295|H>>>23))+((H=Y+(B^$&(ne^B))+K[3]+4107603335&4294967295)<<14&4294967295|H>>>18))+((H=$+(ne^B&(Y^ne))+K[8]+1163531501&4294967295)<<20&4294967295|H>>>12))+((H=B+(Y^ne&($^Y))+K[13]+2850285829&4294967295)<<5&4294967295|H>>>27))+((H=ne+($^Y&(B^$))+K[2]+4243563512&4294967295)<<9&4294967295|H>>>23))+((H=Y+(B^$&(ne^B))+K[7]+1735328473&4294967295)<<14&4294967295|H>>>18))+((H=$+(ne^B&(Y^ne))+K[12]+2368359562&4294967295)<<20&4294967295|H>>>12))+((H=B+($^Y^ne)+K[5]+4294588738&4294967295)<<4&4294967295|H>>>28))+((H=ne+(B^$^Y)+K[8]+2272392833&4294967295)<<11&4294967295|H>>>21))+((H=Y+(ne^B^$)+K[11]+1839030562&4294967295)<<16&4294967295|H>>>16))+((H=$+(Y^ne^B)+K[14]+4259657740&4294967295)<<23&4294967295|H>>>9))+((H=B+($^Y^ne)+K[1]+2763975236&4294967295)<<4&4294967295|H>>>28))+((H=ne+(B^$^Y)+K[4]+1272893353&4294967295)<<11&4294967295|H>>>21))+((H=Y+(ne^B^$)+K[7]+4139469664&4294967295)<<16&4294967295|H>>>16))+((H=$+(Y^ne^B)+K[10]+3200236656&4294967295)<<23&4294967295|H>>>9))+((H=B+($^Y^ne)+K[13]+681279174&4294967295)<<4&4294967295|H>>>28))+((H=ne+(B^$^Y)+K[0]+3936430074&4294967295)<<11&4294967295|H>>>21))+((H=Y+(ne^B^$)+K[3]+3572445317&4294967295)<<16&4294967295|H>>>16))+((H=$+(Y^ne^B)+K[6]+76029189&4294967295)<<23&4294967295|H>>>9))+((H=B+($^Y^ne)+K[9]+3654602809&4294967295)<<4&4294967295|H>>>28))+((H=ne+(B^$^Y)+K[12]+3873151461&4294967295)<<11&4294967295|H>>>21))+((H=Y+(ne^B^$)+K[15]+530742520&4294967295)<<16&4294967295|H>>>16))+((H=$+(Y^ne^B)+K[2]+3299628645&4294967295)<<23&4294967295|H>>>9))+((H=B+(Y^($|~ne))+K[0]+4096336452&4294967295)<<6&4294967295|H>>>26))+((H=ne+($^(B|~Y))+K[7]+1126891415&4294967295)<<10&4294967295|H>>>22))+((H=Y+(B^(ne|~$))+K[14]+2878612391&4294967295)<<15&4294967295|H>>>17))+((H=$+(ne^(Y|~B))+K[5]+4237533241&4294967295)<<21&4294967295|H>>>11))+((H=B+(Y^($|~ne))+K[12]+1700485571&4294967295)<<6&4294967295|H>>>26))+((H=ne+($^(B|~Y))+K[3]+2399980690&4294967295)<<10&4294967295|H>>>22))+((H=Y+(B^(ne|~$))+K[10]+4293915773&4294967295)<<15&4294967295|H>>>17))+((H=$+(ne^(Y|~B))+K[1]+2240044497&4294967295)<<21&4294967295|H>>>11))+((H=B+(Y^($|~ne))+K[8]+1873313359&4294967295)<<6&4294967295|H>>>26))+((H=ne+($^(B|~Y))+K[15]+4264355552&4294967295)<<10&4294967295|H>>>22))+((H=Y+(B^(ne|~$))+K[6]+2734768916&4294967295)<<15&4294967295|H>>>17))+((H=$+(ne^(Y|~B))+K[13]+1309151649&4294967295)<<21&4294967295|H>>>11))+((ne=(B=$+((H=B+(Y^($|~ne))+K[4]+4149444226&4294967295)<<6&4294967295|H>>>26))+((H=ne+($^(B|~Y))+K[11]+3174756917&4294967295)<<10&4294967295|H>>>22))^((Y=ne+((H=Y+(B^(ne|~$))+K[2]+718787259&4294967295)<<15&4294967295|H>>>17))|~B))+K[9]+3951481745&4294967295,q.g[0]=q.g[0]+B&4294967295,q.g[1]=q.g[1]+(Y+(H<<21&4294967295|H>>>11))&4294967295,q.g[2]=q.g[2]+Y&4294967295,q.g[3]=q.g[3]+ne&4294967295}function o(q,B){this.h=B;for(var $=[],K=!0,Y=q.length-1;0<=Y;Y--){var ne=0|q[Y];K&&ne==B||($[Y]=ne,K=!1)}this.g=$}(function e(q,B){function $(){}$.prototype=B.prototype,q.D=B.prototype,q.prototype=new $,q.prototype.constructor=q,q.C=function(K,Y,ne){for(var H=Array(arguments.length-2),fo=2;fo<arguments.length;fo++)H[fo-2]=arguments[fo];return B.prototype[Y].apply(K,H)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(q,B){void 0===B&&(B=q.length);for(var $=B-this.blockSize,K=this.B,Y=this.h,ne=0;ne<B;){if(0==Y)for(;ne<=$;)i(this,q,ne),ne+=this.blockSize;if("string"==typeof q){for(;ne<B;)if(K[Y++]=q.charCodeAt(ne++),Y==this.blockSize){i(this,K),Y=0;break}}else for(;ne<B;)if(K[Y++]=q[ne++],Y==this.blockSize){i(this,K),Y=0;break}}this.h=Y,this.o+=B},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var B=1;B<q.length-8;++B)q[B]=0;var $=8*this.o;for(B=q.length-8;B<q.length;++B)q[B]=255&$,$/=256;for(this.u(q),q=Array(16),B=$=0;4>B;++B)for(var K=0;32>K;K+=8)q[$++]=this.g[B]>>>K&255;return q};var a={};function c(q){return-128<=q&&128>q?function s(q,B){var $=a;return Object.prototype.hasOwnProperty.call($,q)?$[q]:$[q]=B(q)}(q,function(B){return new o([0|B],0>B?-1:0)}):new o([0|q],0>q?-1:0)}function l(q){if(isNaN(q)||!isFinite(q))return m;if(0>q)return F(l(-q));for(var B=[],$=1,K=0;q>=$;K++)B[K]=q/$|0,$*=4294967296;return new o(B,0)}var m=c(0),y=c(1),I=c(16777216);function T(q){if(0!=q.h)return!1;for(var B=0;B<q.g.length;B++)if(0!=q.g[B])return!1;return!0}function N(q){return-1==q.h}function F(q){for(var B=q.g.length,$=[],K=0;K<B;K++)$[K]=~q.g[K];return new o($,~q.h).add(y)}function W(q,B){return q.add(F(B))}function z(q,B){for(;(65535&q[B])!=q[B];)q[B+1]+=q[B]>>>16,q[B]&=65535,B++}function X(q,B){this.g=q,this.h=B}function ae(q,B){if(T(B))throw Error("division by zero");if(T(q))return new X(m,m);if(N(q))return B=ae(F(q),B),new X(F(B.g),F(B.h));if(N(B))return B=ae(q,F(B)),new X(F(B.g),B.h);if(30<q.g.length){if(N(q)||N(B))throw Error("slowDivide_ only works with positive integers.");for(var $=y,K=B;0>=K.l(q);)$=Se($),K=Se(K);var Y=je($,1),ne=je(K,1);for(K=je(K,2),$=je($,2);!T(K);){var H=ne.add(K);0>=H.l(q)&&(Y=Y.add($),ne=H),K=je(K,1),$=je($,1)}return B=W(q,Y.j(B)),new X(Y,B)}for(Y=m;0<=q.l(B);){for($=Math.max(1,Math.floor(q.m()/B.m())),K=48>=(K=Math.ceil(Math.log($)/Math.LN2))?1:Math.pow(2,K-48),H=(ne=l($)).j(B);N(H)||0<H.l(q);)H=(ne=l($-=K)).j(B);T(ne)&&(ne=y),Y=Y.add(ne),q=W(q,H)}return new X(Y,q)}function Se(q){for(var B=q.g.length+1,$=[],K=0;K<B;K++)$[K]=q.i(K)<<1|q.i(K-1)>>>31;return new o($,q.h)}function je(q,B){var $=B>>5;B%=32;for(var K=q.g.length-$,Y=[],ne=0;ne<K;ne++)Y[ne]=0<B?q.i(ne+$)>>>B|q.i(ne+$+1)<<32-B:q.i(ne+$);return new o(Y,q.h)}(n=o.prototype).m=function(){if(N(this))return-F(this).m();for(var q=0,B=1,$=0;$<this.g.length;$++){var K=this.i($);q+=(0<=K?K:4294967296+K)*B,B*=4294967296}return q},n.toString=function(q){if(2>(q=q||10)||36<q)throw Error("radix out of range: "+q);if(T(this))return"0";if(N(this))return"-"+F(this).toString(q);for(var B=l(Math.pow(q,6)),$=this,K="";;){var Y=ae($,B).g,ne=((0<($=W($,Y.j(B))).g.length?$.g[0]:$.h)>>>0).toString(q);if(T($=Y))return ne+K;for(;6>ne.length;)ne="0"+ne;K=ne+K}},n.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h},n.l=function(q){return N(q=W(this,q))?-1:T(q)?0:1},n.abs=function(){return N(this)?F(this):this},n.add=function(q){for(var B=Math.max(this.g.length,q.g.length),$=[],K=0,Y=0;Y<=B;Y++){var ne=K+(65535&this.i(Y))+(65535&q.i(Y)),H=(ne>>>16)+(this.i(Y)>>>16)+(q.i(Y)>>>16);K=H>>>16,$[Y]=(H&=65535)<<16|(ne&=65535)}return new o($,-2147483648&$[$.length-1]?-1:0)},n.j=function(q){if(T(this)||T(q))return m;if(N(this))return N(q)?F(this).j(F(q)):F(F(this).j(q));if(N(q))return F(this.j(F(q)));if(0>this.l(I)&&0>q.l(I))return l(this.m()*q.m());for(var B=this.g.length+q.g.length,$=[],K=0;K<2*B;K++)$[K]=0;for(K=0;K<this.g.length;K++)for(var Y=0;Y<q.g.length;Y++){var ne=this.i(K)>>>16,H=65535&this.i(K),fo=q.i(Y)>>>16,bl=65535&q.i(Y);$[2*K+2*Y]+=H*bl,z($,2*K+2*Y),$[2*K+2*Y+1]+=ne*bl,z($,2*K+2*Y+1),$[2*K+2*Y+1]+=H*fo,z($,2*K+2*Y+1),$[2*K+2*Y+2]+=ne*fo,z($,2*K+2*Y+2)}for(K=0;K<B;K++)$[K]=$[2*K+1]<<16|$[2*K];for(K=B;K<2*B;K++)$[K]=0;return new o($,0)},n.A=function(q){return ae(this,q).h},n.and=function(q){for(var B=Math.max(this.g.length,q.g.length),$=[],K=0;K<B;K++)$[K]=this.i(K)&q.i(K);return new o($,this.h&q.h)},n.or=function(q){for(var B=Math.max(this.g.length,q.g.length),$=[],K=0;K<B;K++)$[K]=this.i(K)|q.i(K);return new o($,this.h|q.h)},n.xor=function(q){for(var B=Math.max(this.g.length,q.g.length),$=[],K=0;K<B;K++)$[K]=this.i(K)^q.i(K);return new o($,this.h^q.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gL=pL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function f(q,B){if(0==q.length)throw Error("number format error: empty string");if(2>(B=B||10)||36<B)throw Error("radix out of range: "+B);if("-"==q.charAt(0))return F(f(q.substring(1),B));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var $=l(Math.pow(B,8)),K=m,Y=0;Y<q.length;Y+=8){var ne=Math.min(8,q.length-Y),H=parseInt(q.substring(Y,Y+ne),B);8>ne?(ne=l(Math.pow(B,ne)),K=K.j(ne).add(l(H))):K=(K=K.j($)).add(l(H))}return K},gu=pL.Integer=o}).apply(typeof fL<"u"?fL:typeof self<"u"?self:typeof window<"u"?window:{});var mL,_L,qg,yL,EE,fC,vL,EL,IL,vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},za={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof vE&&vE];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var J=h[P];if(!(J in E))break e;E=E[J]}(_=_(P=E[h=h[h.length-1]]))!=P&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,P=!1,J={next:function(){if(!P&&E<h.length){var ge=E++;return{value:_(ge,h[ge]),done:!1}}return P=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,P),h.apply(_,J)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(P,J,ge){for(var Ue=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)Ue[Fn-2]=arguments[Fn];return _.prototype[J].apply(P,Ue)}}function N(h){const _=h.length;if(0<_){const E=Array(_);for(let P=0;P<_;P++)E[P]=h[P];return E}return[]}function F(h,_){for(let E=1;E<arguments.length;E++){const P=arguments[E];if(c(P)){const J=h.length||0,ge=P.length||0;h.length=J+ge;for(let Ue=0;Ue<ge;Ue++)h[J+Ue]=P[Ue]}else h.push(P)}}function z(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var Se=!(-1==X().indexOf("Gecko")||-1!=X().toLowerCase().indexOf("webkit")&&-1==X().indexOf("Edge")||-1!=X().indexOf("Trident")||-1!=X().indexOf("MSIE")||-1!=X().indexOf("Edge"));function je(h,_,E){for(const P in h)_.call(E,h[P],P,h)}function B(h){const _={};for(const E in h)_[E]=h[E];return _}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(h,_){let E,P;for(let J=1;J<arguments.length;J++){for(E in P=arguments[J],P)h[E]=P[E];for(let ge=0;ge<$.length;ge++)E=$[ge],Object.prototype.hasOwnProperty.call(P,E)&&(h[E]=P[E])}}function Y(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ne(h){a.setTimeout(()=>{throw h},0)}function H(){var h=Qt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var bl=new class W{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new et,h=>h.reset());class et{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,dt=!1,Qt=new class fo{constructor(){this.h=this.g=null}add(_,E){const P=bl.get();P.set(_,E),this.h?this.h.next=P:this.g=P,this.h=P}},kr=()=>{const h=a.Promise.resolve(void 0);lt=()=>{h.then(po)}};var po=()=>{for(var h;h=H();){try{h.h.call(h.g)}catch(E){ne(E)}var _=bl;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}dt=!1};function Ir(){this.s=this.s,this.C=this.C}function Jn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Ir.prototype.s=!1,Ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Jn.prototype.h=function(){this.defaultPrevented=!0};var er=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function wl(h,_){if(Jn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Se){e:{try{ae(_.nodeName);var J=!0;break e}catch{}J=!1}J||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,P?(this.clientX=void 0!==P.clientX?P.clientX:P.pageX,this.clientY=void 0!==P.clientY?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:GS[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&wl.aa.h.call(this)}}T(wl,Jn);var GS={2:"touch",3:"pen",4:"mouse"};wl.prototype.h=function(){wl.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var br="closure_listenable_"+(1e6*Math.random()|0),rc=0;function Ds(h,_,E,P,J){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!P,this.ha=J,this.key=++rc,this.da=this.fa=!1}function ic(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Tl(h){this.src=h,this.g={},this.h=0}function WS(h,_){var E=_.type;if(E in h.g){var ge,P=h.g[E],J=Array.prototype.indexOf.call(P,_,void 0);(ge=0<=J)&&Array.prototype.splice.call(P,J,1),ge&&(ic(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function KS(h,_,E,P){for(var J=0;J<h.length;++J){var ge=h[J];if(!ge.da&&ge.listener==_&&ge.capture==!!E&&ge.ha==P)return J}return-1}Tl.prototype.add=function(h,_,E,P,J){var ge=h.toString();(h=this.g[ge])||(h=this.g[ge]=[],this.h++);var Ue=KS(h,_,P,J);return-1<Ue?(_=h[Ue],E||(_.fa=!1)):((_=new Ds(_,this.src,ge,!!P,J)).fa=E,h.push(_)),_};var ZS="closure_lm_"+(1e6*Math.random()|0),QS={};function e3(h,_,E,P,J){if(P&&P.once)return n3(h,_,E,P,J);if(Array.isArray(_)){for(var ge=0;ge<_.length;ge++)e3(h,_[ge],E,P,J);return null}return E=eM(E),h&&h[br]?h.K(_,E,l(P)?!!P.capture:!!P,J):t3(h,_,E,!1,P,J)}function t3(h,_,E,P,J,ge){if(!_)throw Error("Invalid event type");var Ue=l(J)?!!J.capture:!!J,Fn=XS(h);if(Fn||(h[ZS]=Fn=new Tl(h)),(E=Fn.add(_,E,P,Ue,ge)).proxy)return E;if(P=function Wce(){const _=Kce;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=P,P.src=h,P.listener=E,h.addEventListener)er||(J=Ue),void 0===J&&(J=!1),h.addEventListener(_.toString(),P,J);else if(h.attachEvent)h.attachEvent(s3(_.toString()),P);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(P)}return E}function n3(h,_,E,P,J){if(Array.isArray(_)){for(var ge=0;ge<_.length;ge++)n3(h,_[ge],E,P,J);return null}return E=eM(E),h&&h[br]?h.L(_,E,l(P)?!!P.capture:!!P,J):t3(h,_,E,!0,P,J)}function r3(h,_,E,P,J){if(Array.isArray(_))for(var ge=0;ge<_.length;ge++)r3(h,_[ge],E,P,J);else P=l(P)?!!P.capture:!!P,E=eM(E),h&&h[br]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=KS(ge=h.g[_],E,P,J))&&(ic(ge[E]),Array.prototype.splice.call(ge,E,1),0==ge.length&&(delete h.g[_],h.h--))):h&&(h=XS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=KS(_,E,P,J)),(E=-1<h?_[h]:null)&&YS(E))}function YS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[br])WS(_.i,h);else{var E=h.type,P=h.proxy;_.removeEventListener?_.removeEventListener(E,P,h.capture):_.detachEvent?_.detachEvent(s3(E),P):_.addListener&&_.removeListener&&_.removeListener(P),(E=XS(_))?(WS(E,h),0==E.h&&(E.src=null,_[ZS]=null)):ic(h)}}}function s3(h){return h in QS?QS[h]:QS[h]="on"+h}function Kce(h,_){if(h.da)h=!0;else{_=new wl(_,this);var E=h.listener,P=h.ha||h.src;h.fa&&YS(h),h=E.call(P,_)}return h}function XS(h){return(h=h[ZS])instanceof Tl?h:null}var JS="__closure_events_fn_"+(1e9*Math.random()>>>0);function eM(h){return"function"==typeof h?h:(h[JS]||(h[JS]=function(_){return h.handleEvent(_)}),h[JS])}function ji(){Ir.call(this),this.i=new Tl(this),this.M=this,this.F=null}function as(h,_){var E,P=h.F;if(P)for(E=[];P;P=P.F)E.push(P);if(h=h.M,P=_.type||_,"string"==typeof _)_=new Jn(_,h);else if(_ instanceof Jn)_.target=_.target||h;else{var J=_;K(_=new Jn(P,h),J)}if(J=!0,E)for(var ge=E.length-1;0<=ge;ge--){var Ue=_.g=E[ge];J=JI(Ue,P,!0,_)&&J}if(J=JI(Ue=_.g=h,P,!0,_)&&J,J=JI(Ue,P,!1,_)&&J,E)for(ge=0;ge<E.length;ge++)J=JI(Ue=_.g=E[ge],P,!1,_)&&J}function JI(h,_,E,P){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var J=!0,ge=0;ge<_.length;++ge){var Ue=_[ge];if(Ue&&!Ue.da&&Ue.capture==E){var Fn=Ue.listener,Ti=Ue.ha||Ue.src;Ue.fa&&WS(h.i,Ue),J=!1!==Fn.call(Ti,P)&&J}}return J&&!P.defaultPrevented}function o3(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function a3(h){h.g=o3(()=>{h.g=null,h.i&&(h.i=!1,a3(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(ji,Ir),ji.prototype[br]=!0,ji.prototype.removeEventListener=function(h,_,E,P){r3(this,h,_,E,P)},ji.prototype.N=function(){if(ji.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],P=0;P<E.length;P++)ic(E[P]);delete h.g[_],h.h--}}this.F=null},ji.prototype.K=function(h,_,E,P){return this.i.add(String(h),_,!1,E,P)},ji.prototype.L=function(h,_,E,P){return this.i.add(String(h),_,!0,E,P)};class Zce extends Ir{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:a3(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function r_(h){Ir.call(this),this.h=h,this.g={}}T(r_,Ir);var c3=[];function l3(h){je(h.g,function(_,E){this.g.hasOwnProperty(E)&&YS(_)},h),h.g={}}r_.prototype.N=function(){r_.aa.N.call(this),l3(this)},r_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tM=a.JSON.stringify,Qce=a.JSON.parse,Yce=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function nM(){}function d3(){}nM.prototype.h=null;var i_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rM(){Jn.call(this,"d")}function iM(){Jn.call(this,"c")}T(rM,Jn),T(iM,Jn);var Wu={},h3=null;function eb(){return h3=h3||new ji}function f3(h){Jn.call(this,Wu.La,h)}function s_(h){const _=eb();as(_,new f3(_))}function p3(h,_){Jn.call(this,Wu.STAT_EVENT,h),this.stat=_}function cs(h){const _=eb();as(_,new p3(_,h))}function g3(h,_){Jn.call(this,Wu.Ma,h),this.size=_}function o_(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function a_(){this.g=!0}function Rf(h,_,E,P){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function tle(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var P=E[h];if(!(2>P.length)){var J=P[1];if(Array.isArray(J)&&!(1>J.length)){var ge=J[0];if("noop"!=ge&&"stop"!=ge&&"close"!=ge)for(var Ue=1;Ue<J.length;Ue++)J[Ue]=""}}}return tM(E)}catch{return _}}(h,E)+(P?" "+P:"")})}Wu.La="serverreachability",T(f3,Jn),Wu.STAT_EVENT="statevent",T(p3,Jn),Wu.Ma="timingevent",T(g3,Jn),a_.prototype.xa=function(){this.g=!1},a_.prototype.info=function(){};var sM,tb={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},m3={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function nb(){}function Cl(h,_,E,P){this.j=h,this.i=_,this.l=E,this.R=P||1,this.U=new r_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _3}function _3(){this.i=null,this.g="",this.h=!1}T(nb,nM),nb.prototype.g=function(){return new XMLHttpRequest},nb.prototype.i=function(){return{}},sM=new nb;var y3={},oM={};function aM(h,_,E){h.L=1,h.v=ob(sc(_)),h.m=E,h.P=!0,v3(h,null)}function v3(h,_){h.F=Date.now(),rb(h),h.A=sc(h.v);var E=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),O3(E.i,"t",P),h.C=0,E=h.j.J,h.h=new _3,h.g=Y3(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Zce(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,P=h.ca;var J="readystatechange";Array.isArray(J)||(J&&(c3[0]=J.toString()),J=c3);for(var ge=0;ge<J.length;ge++){var Ue=e3(E,J[ge],P||_.handleEvent,!1,_.h||_);if(!Ue)break;_.g[Ue.key]=Ue}_=h.H?B(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),s_(),function Xce(h,_,E,P,J,ge){h.info(function(){if(h.g)if(ge)for(var Ue="",Fn=ge.split("&"),Ti=0;Ti<Fn.length;Ti++){var un=Fn[Ti].split("=");if(1<un.length){var $i=un[0];un=un[1];var zi=$i.split("_");Ue=2<=zi.length&&"type"==zi[1]?Ue+($i+"=")+un+"&":Ue+($i+"=redacted&")}}else Ue=null;else Ue=ge;return"XMLHTTP REQ ("+P+") [attempt "+J+"]: "+_+"\n"+E+"\n"+Ue})}(h.i,h.u,h.A,h.l,h.R,h.m)}function E3(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function nle(h,_){var E=h.C,P=_.indexOf("\n",E);return-1==P?oM:(E=Number(_.substring(E,P)),isNaN(E)?y3:(P+=1)+E>_.length?oM:(_=_.slice(P,P+E),h.C=P+E,_))}function rb(h){h.S=Date.now()+h.I,I3(h,h.I)}function I3(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=o_(y(h.ba,h),_)}function cM(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function c_(h){0==h.j.G||h.J||W3(h.j,h)}function Ku(h){cM(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,l3(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function lM(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||uM(E.h,h)))if(!h.K&&uM(E.h,h)&&3==E.G){try{var P=E.Da.g.parse(_)}catch{P=null}if(Array.isArray(P)&&3==P.length){var J=P;if(0==J[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;db(E),lb(E)}pM(E),cs(18)}}else E.za=J[1],0<E.za-E.T&&37500>J[2]&&E.F&&0==E.v&&!E.C&&(E.C=o_(y(E.Za,E),6e3));if(1>=T3(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Qu(E,11)}else if((h.K||E.g==h)&&db(E),!z(_))for(J=E.Da.g.parse(_),_=0;_<J.length;_++){let un=J[_];if(E.T=un[0],un=un[1],2==E.G)if("c"==un[0]){E.K=un[1],E.ia=un[2];const $i=un[3];null!=$i&&(E.la=$i,E.j.info("VER="+E.la));const zi=un[4];null!=zi&&(E.Aa=zi,E.j.info("SVER="+E.Aa));const Of=un[5];null!=Of&&"number"==typeof Of&&0<Of&&(E.L=P=1.5*Of,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const xo=h.g;if(xo){const fb=xo.g?xo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fb){var ge=P.h;ge.g||-1==fb.indexOf("spdy")&&-1==fb.indexOf("quic")&&-1==fb.indexOf("h2")||(ge.j=ge.l,ge.g=new Set,ge.h&&(dM(ge,ge.h),ge.h=null))}if(P.D){const mM=xo.g?xo.g.getResponseHeader("X-HTTP-Session-Id"):null;mM&&(P.ya=mM,tr(P.I,P.D,mM))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ue=h;if((P=E).qa=Q3(P,P.J?P.ia:null,P.W),Ue.K){C3(P.h,Ue);var Fn=Ue,Ti=P.L;Ti&&(Fn.I=Ti),Fn.B&&(cM(Fn),rb(Fn)),P.g=Ue}else q3(P);0<E.i.length&&ub(E)}else"stop"!=un[0]&&"close"!=un[0]||Qu(E,7);else 3==E.G&&("stop"==un[0]||"close"==un[0]?"stop"==un[0]?Qu(E,7):fM(E):"noop"!=un[0]&&E.l&&E.l.ta(un),E.v=0)}s_()}catch{}}function b3(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function w3(h){return!!h.h||!!h.g&&h.g.size>=h.j}function T3(h){return h.h?1:h.g?h.g.size:0}function uM(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function dM(h,_){h.g?h.g.add(_):h.h=_}function C3(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function A3(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return N(h.i)}function D3(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function sle(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const P in h)_[E++]=P;return _}}}(h),P=function ile(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,P=0;P<E;P++)_.push(h[P]);return _}for(P in _=[],E=0,h)_[E++]=h[P];return _}(h),J=P.length,ge=0;ge<J;ge++)_.call(void 0,P[ge],E&&E[ge],h)}Cl.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==oc(h)?_.j():this.Y(h)},Cl.prototype.Y=function(h){try{if(h==this.g)e:{const zi=oc(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>zi)&&(3!=zi||this.g&&(this.h.h||this.g.oa()||B3(this.g)))){this.J||4!=zi||7==_||s_(),cM(this);var E=this.g.Z();this.X=E;t:if(E3(this)){var P=B3(this.g);h="";var J=P.length,ge=4==oc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ku(this),c_(this);var Ue="";break t}this.h.i=new a.TextDecoder}for(_=0;_<J;_++)this.h.h=!0,h+=this.h.i.decode(P[_],{stream:!(ge&&_==J-1)});P.length=0,this.h.g+=h,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=200==E,function Jce(h,_,E,P,J,ge,Ue){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+J+"]: "+_+"\n"+E+"\n"+ge+" "+Ue})}(this.i,this.u,this.A,this.l,this.R,zi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Fn,Ti=this.g;if((Fn=Ti.g?Ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Fn)){var un=Fn;break t}}un=null}if(!(E=un)){this.o=!1,this.s=3,cs(12),Ku(this),c_(this);break e}Rf(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lM(this,E)}if(this.P){let xo;for(E=!0;!this.J&&this.C<Ue.length;){if(xo=nle(this,Ue),xo==oM){4==zi&&(this.s=4,cs(14),E=!1),Rf(this.i,this.l,null,"[Incomplete Response]");break}if(xo==y3){this.s=4,cs(15),Rf(this.i,this.l,Ue,"[Invalid Chunk]"),E=!1;break}Rf(this.i,this.l,xo,null),lM(this,xo)}if(E3(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=zi||0!=Ue.length||this.h.h||(this.s=1,cs(16),E=!1),this.o=this.o&&E,E){if(0<Ue.length&&!this.W){this.W=!0;var $i=this.j;$i.g==this&&$i.ba&&!$i.M&&($i.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),gM($i),$i.M=!0,cs(11))}}else Rf(this.i,this.l,Ue,"[Invalid Chunked Response]"),Ku(this),c_(this)}else Rf(this.i,this.l,Ue,null),lM(this,Ue);4==zi&&Ku(this),this.o&&!this.J&&(4==zi?W3(this.j,this):(this.o=!1,rb(this)))}else(function vle(h){const _={};h=(h.g&&2<=oc(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let P=0;P<h.length;P++){if(z(h[P]))continue;var E=Y(h[P]);const J=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ge=_[J]||[];_[J]=ge,ge.push(E)}!function q(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(P){return P.join(", ")})})(this.g),400==E&&0<Ue.indexOf("Unknown SID")?(this.s=3,cs(12)):(this.s=0,cs(13)),Ku(this),c_(this)}}}catch{}},Cl.prototype.cancel=function(){this.J=!0,Ku(this)},Cl.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function ele(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(s_(),cs(17)),Ku(this),this.s=2,c_(this)):I3(this,this.S-h)},b3.prototype.cancel=function(){if(this.i=A3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var S3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zu(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Zu){this.h=h.h,ib(this,h.j),this.o=h.o,this.g=h.g,sb(this,h.s),this.l=h.l;var _=h.i,E=new d_;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),M3(this,E),this.m=h.m}else h&&(_=String(h).match(S3))?(this.h=!1,ib(this,_[1]||"",!0),this.o=l_(_[2]||""),this.g=l_(_[3]||"",!0),sb(this,_[4]),this.l=l_(_[5]||"",!0),M3(this,_[6]||"",!0),this.m=l_(_[7]||"")):(this.h=!1,this.i=new d_(null,this.h))}function sc(h){return new Zu(h)}function ib(h,_,E){h.j=E?l_(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function sb(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function M3(h,_,E){_ instanceof d_?(h.i=_,function hle(h,_){_&&!h.j&&(Al(h),h.i=null,h.g.forEach(function(E,P){var J=P.toLowerCase();P!=J&&(P3(this,P),O3(this,J,E))},h)),h.j=_}(h.i,h.h)):(E||(_=u_(_,ule)),h.i=new d_(_,h.h))}function tr(h,_,E){h.i.set(_,E)}function ob(h){return tr(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function l_(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function u_(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,ale),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ale(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Zu.prototype.toString=function(){var h=[],_=this.j;_&&h.push(u_(_,R3,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(u_(_,R3,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(u_(E,"/"==E.charAt(0)?lle:cle,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",u_(E,dle)),h.join("")};var h,R3=/[#\/\?@]/g,cle=/[#\?:]/g,lle=/[#\?]/g,ule=/[#\?@]/g,dle=/#/g;function d_(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Al(h){h.g||(h.g=new Map,h.h=0,h.i&&function ole(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var P=h[E].indexOf("="),J=null;if(0<=P){var ge=h[E].substring(0,P);J=h[E].substring(P+1)}else ge=h[E];_(ge,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function P3(h,_){Al(h),_=Pf(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function x3(h,_){return Al(h),_=Pf(h,_),h.g.has(_)}function O3(h,_,E){P3(h,_),0<E.length&&(h.i=null,h.g.set(Pf(h,_),N(E)),h.h+=E.length)}function Pf(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Dl(h,_,E,P,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),P(E)}catch{}}function gle(){this.g=new Yce}function mle(h,_,E){const P=E||"";try{D3(h,function(J,ge){let Ue=J;l(J)&&(Ue=tM(J)),_.push(P+ge+"="+encodeURIComponent(Ue))})}catch(J){throw _.push(P+"type="+encodeURIComponent("_badmap")),J}}function h_(h){this.l=h.Ub||null,this.j=h.eb||!1}function ab(h,_){ji.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function N3(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function f_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,p_(h)}function p_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function k3(h){let _="";return je(h,function(E,P){_+=P,_+=":",_+=E,_+="\r\n"}),_}function hM(h,_,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=k3(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):tr(h,_,E))}function wr(h){ji.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=d_.prototype).add=function(h,_){Al(this),this.i=null,h=Pf(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Al(this),this.g.forEach(function(E,P){E.forEach(function(J){h.call(_,J,P,this)},this)},this)},n.na=function(){Al(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let P=0;P<_.length;P++){const J=h[P];for(let ge=0;ge<J.length;ge++)E.push(_[P])}return E},n.V=function(h){Al(this);let _=[];if("string"==typeof h)x3(this,h)&&(_=_.concat(this.g.get(Pf(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Al(this),this.i=null,x3(this,h=Pf(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var P=_[E];const ge=encodeURIComponent(String(P)),Ue=this.V(P);for(P=0;P<Ue.length;P++){var J=ge;""!==Ue[P]&&(J+="="+encodeURIComponent(String(Ue[P]))),h.push(J)}}return this.i=h.join("&")},T(h_,nM),h_.prototype.g=function(){return new ab(this.l,this.j)},h_.prototype.i=(h={},function(){return h}),T(ab,ji),(n=ab.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,p_(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,f_(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,p_(this)),this.g&&(this.readyState=3,p_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;N3(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?f_(this):p_(this),3==this.readyState&&N3(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,f_(this))},n.Qa=function(h){this.g&&(this.response=h,f_(this))},n.ga=function(){this.g&&f_(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(ab.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(wr,ji);var _le=/^https?$/i,yle=["POST","PUT"];function F3(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,L3(h),cb(h)}function L3(h){h.A||(h.A=!0,as(h,"complete"),as(h,"error"))}function V3(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=oc(h)||2!=h.Z()))if(h.u&&4==oc(h))o3(h.Ea,0,h);else if(as(h,"readystatechange"),4==oc(h)){h.h=!1;try{const Ue=h.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var P;if(P=0===Ue){var J=String(h.D).match(S3)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),P=!_le.test(J?J.toLowerCase():"")}E=P}if(E)as(h,"complete"),as(h,"success");else{h.m=6;try{var ge=2<oc(h)?h.g.statusText:""}catch{ge=""}h.l=ge+" ["+h.Z()+"]",L3(h)}}finally{cb(h)}}}function cb(h,_){if(h.g){U3(h);const E=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||as(h,"ready");try{E.onreadystatechange=P}catch{}}}function U3(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function oc(h){return h.g?h.g.readyState:0}function B3(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function g_(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function j3(h){this.Aa=0,this.i=[],this.j=new a_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=g_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=g_("baseRetryDelayMs",5e3,h),this.cb=g_("retryDelaySeedMs",1e4,h),this.Wa=g_("forwardChannelMaxRetries",2,h),this.wa=g_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new b3(h&&h.concurrentRequestLimit),this.Da=new gle,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function fM(h){if($3(h),3==h.G){var _=h.U++,E=sc(h.I);if(tr(E,"SID",h.K),tr(E,"RID",_),tr(E,"TYPE","terminate"),m_(h,E),(_=new Cl(h,h.j,_)).L=2,_.v=ob(sc(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=Y3(_.j,null),_.g.ea(_.v)),_.F=Date.now(),rb(_)}Z3(h)}function lb(h){h.g&&(gM(h),h.g.cancel(),h.g=null)}function $3(h){lb(h),h.u&&(a.clearTimeout(h.u),h.u=null),db(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function ub(h){if(!w3(h.h)&&!h.s){h.s=!0;var _=h.Ga;lt||kr(),dt||(lt(),dt=!0),Qt.add(_,h),h.B=0}}function z3(h,_){var E;E=_?_.l:h.U++;const P=sc(h.I);tr(P,"SID",h.K),tr(P,"RID",E),tr(P,"AID",h.T),m_(h,P),h.m&&h.o&&hM(P,h.m,h.o),E=new Cl(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=H3(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),dM(h.h,E),aM(E,P,_)}function m_(h,_){h.H&&je(h.H,function(E,P){tr(_,P,E)}),h.l&&D3({},function(E,P){tr(_,P,E)})}function H3(h,_,E){E=Math.min(h.i.length,E);var P=h.l?y(h.l.Na,h.l,h):null;e:{var J=h.i;let ge=-1;for(;;){const Ue=["count="+E];-1==ge?0<E?(ge=J[0].g,Ue.push("ofs="+ge)):ge=0:Ue.push("ofs="+ge);let Fn=!0;for(let Ti=0;Ti<E;Ti++){let un=J[Ti].g;const $i=J[Ti].map;if(un-=ge,0>un)ge=Math.max(0,J[Ti].g-100),Fn=!1;else try{mle($i,Ue,"req"+un+"_")}catch{P&&P($i)}}if(Fn){P=Ue.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,P}function q3(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;lt||kr(),dt||(lt(),dt=!0),Qt.add(_,h),h.v=0}}function pM(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=o_(y(h.Fa,h),K3(h,h.v)),h.v++,0))}function gM(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function G3(h){h.g=new Cl(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=sc(h.qa);tr(_,"RID","rpc"),tr(_,"SID",h.K),tr(_,"AID",h.T),tr(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&tr(_,"TO",h.ja),tr(_,"TYPE","xmlhttp"),m_(h,_),h.m&&h.o&&hM(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ob(sc(_)),E.m=null,E.P=!0,v3(E,h)}function db(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function W3(h,_){var E=null;if(h.g==_){db(h),gM(h),h.g=null;var P=2}else{if(!uM(h.h,_))return;E=_.D,C3(h.h,_),P=1}if(0!=h.G)if(_.o)if(1==P){E=_.m?_.m.length:0,_=Date.now()-_.F;var J=h.B;as(P=eb(),new g3(P,E)),ub(h)}else q3(h);else if(3==(J=_.s)||0==J&&0<_.X||!(1==P&&function Ele(h,_){return!(T3(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=o_(y(h.Ga,h,_),K3(h,h.B)),h.B++,0)))}(h,_)||2==P&&pM(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),J){case 1:Qu(h,5);break;case 4:Qu(h,10);break;case 3:Qu(h,6);break;default:Qu(h,2)}}function K3(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Qu(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),P=h.Xa;const J=!P;P=new Zu(P||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||ib(P,"https"),ob(P),J?function fle(h,_){const E=new a_;if(a.Image){const P=new Image;P.onload=I(Dl,E,"TestLoadImage: loaded",!0,_,P),P.onerror=I(Dl,E,"TestLoadImage: error",!1,_,P),P.onabort=I(Dl,E,"TestLoadImage: abort",!1,_,P),P.ontimeout=I(Dl,E,"TestLoadImage: timeout",!1,_,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else _(!1)}(P.toString(),E):function ple(h,_){new a_;const P=new AbortController,J=setTimeout(()=>{P.abort(),Dl(0,0,!1,_)},1e4);fetch(h,{signal:P.signal}).then(ge=>{clearTimeout(J),Dl(0,0,!!ge.ok,_)}).catch(()=>{clearTimeout(J),Dl(0,0,!1,_)})}(P.toString(),E)}else cs(2);h.G=0,h.l&&h.l.sa(_),Z3(h),$3(h)}function Z3(h){if(h.G=0,h.ka=[],h.l){const _=A3(h.h);(0!=_.length||0!=h.i.length)&&(F(h.ka,_),F(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function Q3(h,_,E){var P=E instanceof Zu?sc(E):new Zu(E);if(""!=P.g)_&&(P.g=_+"."+P.g),sb(P,P.s);else{var J=a.location;P=J.protocol,_=_?_+"."+J.hostname:J.hostname,J=+J.port;var ge=new Zu(null);P&&ib(ge,P),_&&(ge.g=_),J&&sb(ge,J),E&&(ge.l=E),P=ge}return _=h.ya,(E=h.D)&&_&&tr(P,E,_),tr(P,"VER",h.la),m_(h,P),P}function Y3(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new wr(h.Ca&&!h.pa?new h_({eb:E}):h.pa)).Ha(h.J),_}function X3(){}function hb(){}function Hs(h,_){ji.call(this),this.g=new j3(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!z(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new xf(this)}function J3(h){rM.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function ez(){iM.call(this),this.status=1}function xf(h){this.g=h}(n=wr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sM.g(),this.v=function u3(h){return h.h||(h.h=h.i())}(this.o?this.o:sM),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ge){return void F3(this,ge)}if(h=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var J in P)E.set(J,P[J]);else{if("function"!=typeof P.keys||"function"!=typeof P.get)throw Error("Unknown input type for opt_headers: "+String(P));for(const ge of P.keys())E.set(ge,P.get(ge))}P=Array.from(E.keys()).find(ge=>"content-type"==ge.toLowerCase()),J=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yle,_,void 0))||P||J||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Ue]of E)this.g.setRequestHeader(ge,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{U3(this),this.u=!0,this.g.send(h),this.u=!1}catch(ge){F3(this,ge)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,as(this,"complete"),as(this,"abort"),cb(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cb(this,!0)),wr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?V3(this):this.bb())},n.bb=function(){V3(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<oc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Qce(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=j3.prototype).la=8,n.G=1,n.connect=function(h,_,E,P){cs(0),this.W=h,this.H=_||{},E&&void 0!==P&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.I=Q3(this,null,this.W),ub(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const J=new Cl(this,this.j,h);let ge=this.o;if(this.S&&(ge?(ge=B(ge),K(ge,this.S)):ge=this.S),null!==this.m||this.O||(J.H=ge,ge=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var P=this.i[E];if(void 0===(P="__data__"in P.map&&"string"==typeof(P=P.map.__data__)?P.length:void 0))break;if(4096<(_+=P)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=H3(this,J,_),tr(E=sc(this.I),"RID",h),tr(E,"CVER",22),this.D&&tr(E,"X-HTTP-Session-Id",this.D),m_(this,E),ge&&(this.O?_="headers="+encodeURIComponent(String(k3(ge)))+"&"+_:this.m&&hM(E,this.m,ge)),dM(this.h,J),this.Ua&&tr(E,"TYPE","init"),this.P?(tr(E,"$req",_),tr(E,"SID","null"),J.T=!0,aM(J,E,null)):aM(J,E,_),this.G=2}}else 3==this.G&&(h?z3(this,h):0==this.i.length||w3(this.h)||z3(this))},n.Fa=function(){if(this.u=null,G3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=o_(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cs(10),lb(this),G3(this))},n.Za=function(){null!=this.C&&(this.C=null,lb(this),pM(this),cs(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),cs(2)):(this.j.info("Failed to ping google.com"),cs(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=X3.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},hb.prototype.g=function(h,_){return new Hs(h,_)},T(Hs,ji),Hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){fM(this.g)},Hs.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=tM(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&ub(_)},Hs.prototype.N=function(){this.g.l=null,delete this.j,fM(this.g),delete this.g,Hs.aa.N.call(this)},T(J3,rM),T(ez,iM),T(xf,X3),xf.prototype.ua=function(){as(this.g,"a")},xf.prototype.ta=function(h){as(this.g,new J3(h))},xf.prototype.sa=function(h){as(this.g,new ez)},xf.prototype.ra=function(){as(this.g,"b")},hb.prototype.createWebChannel=hb.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,IL=za.createWebChannelTransport=function(){return new hb},EL=za.getStatEventTarget=function(){return eb()},vL=za.Event=Wu,fC=za.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tb.NO_ERROR=0,tb.TIMEOUT=8,tb.HTTP_ERROR=6,EE=za.ErrorCode=tb,m3.COMPLETE="complete",yL=za.EventType=m3,d3.EventType=i_,i_.OPEN="a",i_.CLOSE="b",i_.ERROR="c",i_.MESSAGE="d",ji.prototype.listen=ji.prototype.K,qg=za.WebChannel=d3,_L=za.FetchXmlHttpFactory=h_,wr.prototype.listenOnce=wr.prototype.L,wr.prototype.getLastError=wr.prototype.Ka,wr.prototype.getLastErrorCode=wr.prototype.Ba,wr.prototype.getStatus=wr.prototype.Z,wr.prototype.getResponseJson=wr.prototype.Oa,wr.prototype.getResponseText=wr.prototype.oa,wr.prototype.send=wr.prototype.ea,wr.prototype.setWithCredentials=wr.prototype.Ha,mL=za.XhrIo=wr}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});const bL="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let kh="10.12.1";const Qc=new ta.Yd("@firebase/firestore");function Fh(){return Qc.logLevel}function Ae(n,...e){if(Qc.logLevel<=ta.in.DEBUG){const t=e.map(pC);Qc.debug(`Firestore (${kh}): ${n}`,...t)}}function xr(n,...e){if(Qc.logLevel<=ta.in.ERROR){const t=e.map(pC);Qc.error(`Firestore (${kh}): ${n}`,...t)}}function Ts(n,...e){if(Qc.logLevel<=ta.in.WARN){const t=e.map(pC);Qc.warn(`Firestore (${kh}): ${n}`,...t)}}function pC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${kh}) INTERNAL ASSERTION FAILED: `+n;throw xr(e),new Error(e)}function rt(n,e){n||Qe()}function Ve(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Rt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class uX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dX{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,_e.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new wL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new ui(e)}}class hX{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fX{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new hX(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.R=t.token,new TL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gX(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class CL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=gX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function AL(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ct(e)}static min(){return new ct(new ir(0,0))}static max(){return new ct(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gg{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends Gg{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new en(t)}static emptyPath(){return new en([])}}const mX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Gg{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return mX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Te(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Te(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Te(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(en.fromString(e))}static fromName(e){return new Be(en.fromString(e).popFirst(5))}static empty(){return new Be(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new en(e.slice()))}}class Vh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gC(n){return n.fields.find(e=>2===e.kind)}function mu(n){return n.fields.filter(e=>2!==e.kind)}Vh.UNKNOWN_ID=-1;class _u{constructor(e,t){this.fieldPath=e,this.kind=t}}class Uh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Uh(0,Us.min())}}function DL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ct.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Us(i,Be.empty(),e)}function SL(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(ct.min(),Be.empty(),-1)}static max(){return new Us(ct.max(),Be.empty(),-1)}}function mC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const ML="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yc(n){return _C.apply(this,arguments)}function _C(){return(_C=(0,_e.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==ML)throw n;Ae("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new ee((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class IE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ii,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=yC(r.target.error);this.V.reject(new Wg(e,i))}}static open(e,t,r,i){try{return new IE(t,e.transaction(i,r))}catch(s){throw new Wg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EX(t)}}class na{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===na.S((0,Rt.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),yu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Rt.hl)())return!1;if(na.C())return!0;const e=(0,Rt.z$)(),t=na.S(e),r=0<t&&t<10,i=PL(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Wg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Te(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Te(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Wg(e,a))},s.onupgradeneeded=o=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,_e.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=IE.open(s.db,e,o?"readonly":"readwrite",r),l=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),ee.reject(f))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,f="FirebaseError"!==l.name&&a<3;if(Ae("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function PL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class vX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yu(this.B.delete())}}class Wg extends Te{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xc(n){return"IndexedDbTransactionError"===n.name}class EX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yu(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),yu(this.store.add(e))}get(e){return yu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),yu(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),yu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new ee((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=s=>{const o=yC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new vX(a),l=t(a.primaryKey,a.value,c);if(l instanceof ee){const f=l.catch(m=>(c.done(),ee.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yu(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=yC(r.target.error);t(i)}})}let xL=!1;function yC(n){const e=na.S((0,Rt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xL||(xL=!0,setTimeout(()=>{throw r},0)),r}}return n}class IX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Ae("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Xc(r)?Ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Yc(r)}yield t.X(6e4)}))}}class bX{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return ee.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ae("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=SL(s);mC(o,r)>0&&(r=o)}),new Us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Kg(n){return null==n}function Zg(n){return 0===n&&1/n==-1/0}function OL(n){return"number"==typeof n&&Number.isInteger(n)&&!Zg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NL(e)),e=wX(n.get(t),e);return NL(e)}function wX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function NL(n){return n+"\x01\x01"}function ra(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Qe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Qe()}s=o+2}return new en(r)}const kL=["userId","batchId"];function bE(n,e){return[n,ki(e)]}function FL(n,e,t){return[n,ki(e),t]}const TX={},CX=["prefixPath","collectionGroup","readTime","documentId"],AX=["prefixPath","collectionGroup","documentId"],DX=["collectionGroup","readTime","prefixPath","documentId"],SX=["canonicalId","targetId"],MX=["targetId","path"],RX=["path","targetId"],PX=["collectionId","parent"],xX=["indexId","uid"],OX=["uid","sequenceNumber"],NX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kX=["indexId","uid","orderedDocumentKey"],FX=["userId","collectionPath","documentId"],LX=["userId","collectionPath","largestBatchId"],VX=["userId","collectionGroup","largestBatchId"],LL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UX=[...LL,"documentOverlays"],VL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UL=VL,BL=[...UL,"indexConfiguration","indexState","indexEntries"],BX=BL;class vC extends RL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function di(n,e){const t=Ve(n);return na.F(t._e,e)}function jL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||Ii.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wE(this.root,e,this.comparator,!1)}getReverseIterator(){return new wE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wE(this.root,e,this.comparator,!0)}}class wE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ii.RED,this.left=i??Ii.EMPTY,this.right=s??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ii(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ii(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HL(this.data.getIterator())}getIteratorFrom(e){return new HL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class HL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bh(n){return n.hasNext()?n.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new xn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class qL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qL("Invalid base64 string: "+s):s}}(e);return new si(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const $X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(n){if(rt(!!n),"string"==typeof n){let e=0;const t=$X.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qa(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function TE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function CE(n){const e=n.mapValue.fields.__previous_value__;return TE(e)?CE(e):e}function Qg(n){const e=Ha(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class zX{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class el{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}const tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AE={nullValue:"NULL_VALUE"};function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TE(n)?4:ZL(n)?9007199254740991:10:Qe()}function ia(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qg(n).isEqual(Qg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ha(i.timestampValue),a=Ha(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,qa(n.bytesValue).isEqual(qa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Er(i.geoPointValue.latitude)===Er(s.geoPointValue.latitude)&&Er(i.geoPointValue.longitude)===Er(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Er(i.integerValue)===Er(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Er(i.doubleValue),a=Er(s.doubleValue);return o===a?Zg(o)===Zg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Lh(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jL(o)!==jL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!ia(o[c],a[c])))return!1;return!0}(n,e);default:return Qe()}var s}function Yg(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function rl(n,e){if(n===e)return 0;const t=nl(n),r=nl(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Er(s.integerValue||s.doubleValue),c=Er(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return GL(n.timestampValue,e.timestampValue);case 4:return GL(Qg(n),Qg(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(s,o){const a=qa(s),c=qa(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const f=At(a[l],c[l]);if(0!==f)return f}return At(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=At(Er(s.latitude),Er(o.latitude));return 0!==a?a:At(Er(s.longitude),Er(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const f=rl(a[l],c[l]);if(f)return f}return At(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===tl.mapValue&&o===tl.mapValue)return 0;if(s===tl.mapValue)return 1;if(o===tl.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},f=Object.keys(l);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=At(c[m],f[m]);if(0!==y)return y;const I=rl(a[c[m]],l[f[m]]);if(0!==I)return I}return At(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function GL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Ha(n),r=Ha(e),i=At(t.seconds,r.seconds);return 0!==i?i:At(t.nanos,r.nanos)}function jh(n){return EC(n)}function EC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ha(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qa(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=EC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${EC(t.fields[o])}`;return i+"}"}(n.mapValue):Qe()}function vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function IC(n){return!!n&&"integerValue"in n}function Xg(n){return!!n&&"arrayValue"in n}function WL(n){return!!n&&"nullValue"in n}function KL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function SE(n){return!!n&&"mapValue"in n}function Jg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function HX(n){return"nullValue"in n?AE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vu(el.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function qX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vu(el.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tl:Qe()}function QL(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function YL(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!SE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jg(t)}setAll(e){let t=Qn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Jg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());SE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];SE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bi(Jg(this.value))}}function XL(n){const e=[];return Jc(n.fields,(t,r)=>{const i=new Qn([t]);if(SE(r)){const s=XL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cs(e)}class Yn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yn(e,0,ct.min(),ct.min(),ct.min(),bi.empty(),0)}static newFoundDocument(e,t,r,i){return new Yn(e,1,t,ct.min(),r,i,0)}static newNoDocument(e,t){return new Yn(e,2,t,ct.min(),ct.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,ct.min(),ct.min(),bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class il{constructor(e,t){this.position=e,this.inclusive=t}}function JL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),t.key):rl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function eV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class em{constructor(e,t="asc"){this.field=e,this.dir=t}}function GX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tV{}class tn extends tV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new WX(e,t,r):"array-contains"===t?new QX(e,r):"in"===t?new aV(e,r):"not-in"===t?new YX(e,r):"array-contains-any"===t?new XX(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new KX(e,r):new ZX(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rl(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends tV{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new An(e,t)}matches(e){return $h(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $h(n){return"and"===n.op}function bC(n){return"or"===n.op}function wC(n){return nV(n)&&$h(n)}function nV(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function TC(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+jh(n.value);if(wC(n))return n.filters.map(e=>TC(e)).join(",");{const e=n.filters.map(t=>TC(t)).join(",");return`${n.op}(${e})`}}function rV(n,e){return n instanceof tn?(r=n,(i=e)instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&ia(r.value,i.value)):n instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&rV(o,i.filters[a]),!0)}(n,e):void Qe();var r,i}function iV(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function sV(n){return n instanceof tn?`${(t=n).field.canonicalString()} ${t.op} ${jh(t.value)}`:n instanceof An?function(t){return t.op.toString()+" {"+t.getFilters().map(sV).join(" ,")+"}"}(n):"Filter";var t}class WX extends tn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class KX extends tn{constructor(e,t){super(e,"in",t),this.keys=oV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ZX extends tn{constructor(e,t){super(e,"not-in",t),this.keys=oV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class QX extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xg(t)&&Yg(t.arrayValue,this.value)}}class aV extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yg(this.value.arrayValue,t)}}class YX extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yg(this.value.arrayValue,t)}}class XX extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yg(this.value.arrayValue,r))}}class JX{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function CC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new JX(n,e,t,r,i,s,o)}function Eu(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Kg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jh(r)).join(",")),e.ue=t}return e.ue}function tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eV(n.startAt,e.startAt)&&eV(n.endAt,e.endAt)}function ME(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function RE(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function cV(n,e,t){let r=AE,i=!0;for(const s of RE(n,e)){let o=AE,a=!0;switch(s.op){case"<":case"<=":o=HX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=AE}QL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];QL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function lV(n,e,t){let r=tl,i=!0;for(const s of RE(n,e)){let o=tl,a=!0;switch(s.op){case">=":case">":o=qX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=tl}YL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];YL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Ga{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function uV(n,e,t,r,i,s,o,a){return new Ga(n,e,t,r,i,s,o,a)}function zh(n){return new Ga(n)}function dV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function AC(n){return null!==n.collectionGroup}function Hh(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xn(Qn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new em(s,r))}),t.has(Qn.keyField().canonicalString())||e.ce.push(new em(Qn.keyField(),r))}return e.ce}function Fi(n){const e=Ve(n);return e.le||(e.le=function fV(n,e){if("F"===n.limitType)return CC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new em(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new il(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new il(n.startAt.position,n.startAt.inclusive):null;return CC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Hh(n))),e.le}function DC(n,e){const t=n.filters.concat([e]);return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function PE(n,e,t){return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return tm(Fi(n),Fi(e))&&n.limitType===e.limitType}function pV(n){return`${Eu(Fi(n))}|lt:${n.limitType}`}function qh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>sV(i)).join(", ")}]`),Kg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jh(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Hh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const l=JL(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Hh(r),i)||r.endAt&&!function(o,a,c){const l=JL(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Hh(r),i)));var r,i}function gV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mV(n){return(e,t)=>{let r=!1;for(const i of Hh(n)){const s=eJ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function eJ(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return null!==c&&null!==l?rl(c,l):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zL(this.inner)}size(){return this.innerSize}}const tJ=new Hn(Be.comparator);function As(){return tJ}const _V=new Hn(Be.comparator);function im(...n){let e=_V;for(const t of n)e=e.insert(t.key,t);return e}function yV(n){let e=_V;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sa(){return sm()}function vV(){return sm()}function sm(){return new Wa(n=>n.toString(),(n,e)=>n.isEqual(e))}const nJ=new Hn(Be.comparator),rJ=new xn(Be.comparator);function Ft(...n){let e=rJ;for(const t of n)e=e.add(t);return e}const iJ=new xn(At);function SC(){return iJ}function EV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zg(e)?"-0":e}}function IV(n){return{integerValue:""+n}}function bV(n,e){return OL(e)?IV(e):EV(n,e)}class xE{constructor(){this._=void 0}}function sJ(n,e,t){return n instanceof Gh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&TE(s)&&(s=CE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Iu?TV(n,e):n instanceof bu?CV(n,e):function(i,s){const o=wV(i,s),a=AV(o)+AV(i.Pe);return IC(o)&&IC(i.Pe)?IV(a):EV(i.serializer,a)}(n,e)}function oJ(n,e,t){return n instanceof Iu?TV(n,e):n instanceof bu?CV(n,e):t}function wV(n,e){return n instanceof Wh?IC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Gh extends xE{}class Iu extends xE{constructor(e){super(),this.elements=e}}function TV(n,e){const t=DV(e);for(const r of n.elements)t.some(i=>ia(i,r))||t.push(r);return{arrayValue:{values:t}}}class bu extends xE{constructor(e){super(),this.elements=e}}function CV(n,e){let t=DV(e);for(const r of n.elements)t=t.filter(i=>!ia(i,r));return{arrayValue:{values:t}}}class Wh extends xE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function AV(n){return Er(n.integerValue||n.doubleValue)}function DV(n){return Xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class om{constructor(e,t){this.field=e,this.transform=t}}class cJ{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class NE{}function SV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zh(n.key,sr.none()):new Kh(n.key,n.data,sr.none());{const t=n.data,r=bi.empty();let i=new xn(Qn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ka(n.key,r,new Cs(i.toArray()),sr.none())}}function lJ(n,e,t){n instanceof Kh?function(i,s,o){const a=i.value.clone(),c=PV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ka?function(i,s,o){if(!OE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=PV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(RV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function am(n,e,t,r){return n instanceof Kh?function(s,o,a,c){if(!OE(s.precondition,o))return a;const l=s.value.clone(),f=xV(s.fieldTransforms,c,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ka?function(s,o,a,c){if(!OE(s.precondition,o))return a;const l=xV(s.fieldTransforms,c,o),f=o.data;return f.setAll(RV(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,OE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uJ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=wV(r.transform,i||null);null!=s&&(null===t&&(t=bi.empty()),t.set(r.field,s))}return t||null}function MV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Lh(r,i,(s,o)=>function aJ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Iu&&i instanceof Iu||r instanceof bu&&i instanceof bu?Lh(r.elements,i.elements,ia):r instanceof Wh&&i instanceof Wh?ia(r.Pe,i.Pe):r instanceof Gh&&i instanceof Gh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Kh extends NE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ka extends NE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PV(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oJ(o,a,t[i]))}return r}function xV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,sJ(s,o,e))}return r}class Zh extends NE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MC extends NE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lJ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=SV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Lh(this.mutations,e.mutations,(t,r)=>MV(t,r))&&Lh(this.baseMutations,e.baseMutations,(t,r)=>MV(t,r))}}class PC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=nJ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new PC(e,t,r,i)}}class xC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dJ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,an;function NV(n){switch(n){default:return Qe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function kV(n){if(void 0===n)return xr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Kr.OK:return le.OK;case Kr.CANCELLED:return le.CANCELLED;case Kr.UNKNOWN:return le.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return le.INTERNAL;case Kr.UNAVAILABLE:return le.UNAVAILABLE;case Kr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Kr.NOT_FOUND:return le.NOT_FOUND;case Kr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Kr.ABORTED:return le.ABORTED;case Kr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Kr.DATA_LOSS:return le.DATA_LOSS;default:return Qe()}}(an=Kr||(Kr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";function FV(){return new TextEncoder}const hJ=new gu([4294967295,4294967295],0);function LV(n){const e=FV().encode(n),t=new gL;return t.update(e),new Uint8Array(t.digest())}function VV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gu([t,r],0),new gu([i,s],0)]}class OC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cm(`Invalid padding: ${t}`);if(r<0)throw new cm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new cm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new cm(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=gu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(gu.fromNumber(r)));return 1===i.compare(hJ)&&(i=new gu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=LV(e),[r,i]=VV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new OC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=LV(e),[r,i]=VV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,um.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lm(ct.min(),i,new Hn(At),As(),Ft())}}class um{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new um(r,t,Ft(),Ft(),Ft())}}class FE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class UV{constructor(e,t){this.targetId=e,this.me=t}}class BV{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class jV{constructor(){this.fe=0,this.ge=zV(),this.pe=si.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ft(),t=Ft(),r=Ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qe()}}),new um(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=zV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=$V(),this.Qe=new Hn(At)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(ME(s))if(0===r){const o=new Be(s.path);this.Ue(t,o,Yn.newNoDocument(o,ct.min()))}else rt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=qa(r).toUint8Array()}catch(c){if(c instanceof qL)return Ts("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new OC(o,i,s)}catch(c){return Ts(c instanceof cm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ME(a.target)){const c=new Be(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Yn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=Ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new lm(e,t,this.Qe,this.ke,r);return this.ke=As(),this.qe=$V(),this.Qe=new Hn(At),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new jV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xn(At),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $V(){return new Hn(Be.comparator)}function zV(){return new Hn(Be.comparator)}const pJ={asc:"ASCENDING",desc:"DESCENDING"},gJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mJ={and:"AND",or:"OR"};class _J{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function NC(n,e){return n.useProto3Json||Kg(e)?e:{value:e}}function Qh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yJ(n,e){return Qh(n,e.toTimestamp())}function Or(n){return rt(!!n),ct.fromTimestamp(function(t){const r=Ha(t);return new ir(r.seconds,r.nanos)}(n))}function kC(n,e){return FC(n,e).canonicalString()}function FC(n,e){const t=(i=n,new en(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function qV(n){const e=en.fromString(n);return rt(n2(e)),e}function dm(n,e){return kC(n.databaseId,e.path)}function oa(n,e){const t=qV(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(KV(t))}function GV(n,e){return kC(n.databaseId,e)}function WV(n){const e=qV(n);return 4===e.length?en.emptyPath():KV(e)}function LC(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KV(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZV(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function QV(n,e,t){const r=oa(n,e.name),i=Or(e.updateTime),s=e.createTime?Or(e.createTime):ct.min(),o=new bi({mapValue:{fields:e.fields}}),a=Yn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function hm(n,e){let t;if(e instanceof Kh)t={update:ZV(n,e.key,e.value)};else if(e instanceof Zh)t={delete:dm(n,e.key)};else if(e instanceof Ka)t={update:ZV(n,e.key,e.data),updateMask:AJ(e.fieldMask)};else{if(!(e instanceof MC))return Qe();t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Iu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:yJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qe()),t;var s}function VC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?sr.updateTime(Or(s.updateTime)):void 0!==s.exists?sr.exists(s.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(rt("REQUEST_TIME"===a.setToServerValue),c=new Gh):"appendMissingElements"in a?c=new Iu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new bu(a.removeAllFromArray.values||[]):"increment"in a?c=new Wh(o,a.increment):Qe();const l=Qn.fromServerFormat(a.fieldPath);return new om(l,c)}(n,i)):[];var s;if(e.update){const i=oa(n,e.update.name),s=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Cs((e.updateMask.fieldPaths||[]).map(f=>Qn.fromServerFormat(f)));return new Ka(i,s,o,t,r)}return new Kh(i,s,t,r)}if(e.delete){const i=oa(n,e.delete);return new Zh(i,t)}if(e.verify){const i=oa(n,e.verify);return new MC(i,t)}return Qe()}function YV(n,e){return{documents:[GV(n,e.path)]}}function LE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=GV(n,i);const s=function(l){if(0!==l.length)return t2(An.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:sl((y=f).field),direction:wJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=NC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function JV(n){let e=WV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=e2(m);return y instanceof An&&wC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new em(Yh((T=y).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Kg(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new il((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new il(m.values||[],!m.before)}(t.endAt)),uV(e,i,o,s,a,"F",c,l)}function e2(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yh(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yh(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yh(t.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yh(t.unaryFilter.field);return tn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):void 0!==n.fieldFilter?tn.create(Yh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return An.create(t.compositeFilter.filters.map(r=>e2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe()}}(t.compositeFilter.op))}(n):Qe();var t}function wJ(n){return pJ[n]}function TJ(n){return gJ[n]}function CJ(n){return mJ[n]}function sl(n){return{fieldPath:n.canonicalString()}}function Yh(n){return Qn.fromServerFormat(n.fieldPath)}function t2(n){return n instanceof tn?function(t){if("=="===t.op){if(KL(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(WL(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(KL(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(WL(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:TJ(t.op),value:t.value}}}(n):n instanceof An?function(t){const r=t.getFilters().map(i=>t2(i));return 1===r.length?r[0]:{compositeFilter:{op:CJ(t.op),filters:r}}}(n):Qe()}function AJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Za{constructor(e,t,r,i,s=ct.min(),o=ct.min(),a=si.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class r2{constructor(e){this.ct=e}}function i2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:VE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dm(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Qh(s,o.version.toTimestamp()),createTime:Qh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wu(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:wu(e.version)}}var s,o;return r}function VE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tu(n){const e=new ir(n.seconds,n.nanoseconds);return ct.fromTimestamp(e)}function Cu(n,e){const t=(e.baseMutations||[]).map(s=>VC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>VC(n.ct,s)),i=ir.fromMillis(e.localWriteTimeMs);return new RC(e.batchId,i,t,r)}function fm(n){const e=Tu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tu(n.lastLimboFreeSnapshotVersion):ct.min();let r;return r=void 0!==n.query.documents?(rt(1===(s=n.query).documents.length),Fi(zh(WV(s.documents[0])))):function(s){return Fi(JV(s))}(n.query),new Za(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken));var s}function s2(n,e){const t=wu(e.snapshotVersion),r=wu(e.lastLimboFreeSnapshotVersion);let i;i=ME(e.target)?YV(n.ct,e.target):LE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UC(n){const e=JV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?PE(e,e.limit,"L"):e}function BC(n,e){return new xC(e.largestBatchId,VC(n.ct,e.overlayMutation))}function o2(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}function a2(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wu(r.readTime),documentKey:ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class SJ{getBundleMetadata(e,t){return c2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Tu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return c2(e).put({bundleId:(i=t).id,createTime:wu(Or(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return l2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:UC(s.bundledQuery),readTime:Tu(s.readTime)};var s})}saveNamedQuery(e,t){return l2(e).put({name:(i=t).name,readTime:wu(Or(i.readTime)),bundledQuery:i.bundledQuery});var i}}function c2(n){return di(n,"bundles")}function l2(n){return di(n,"namedQueries")}class UE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new UE(e,t.uid||"")}getOverlay(e,t){return pm(e).get(o2(this.userId,t)).next(r=>r?BC(this.serializer,r):null)}getOverlays(e,t){const r=sa();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new xC(t,o);i.push(this.ht(e,a))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ki(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(pm(e).j("collectionPathOverlayIndex",a))}),ee.waitFor(s)}getOverlaysForCollection(e,t,r){const i=sa(),s=ki(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pm(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=BC(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=sa();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pm(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,f)=>{const m=BC(this.serializer,l);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return pm(e).put(function(i,s,o){const[a,c,l]=o2(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hm(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function pm(n){return di(n,"documentOverlays")}class Au{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Er(e.integerValue));else if("doubleValue"in e){const r=Er(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Zg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Ha(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?ZL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Qe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function MJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function u2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=MJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Au.bt=new Au;class RJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=u2(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=u2(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class xJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class gm{constructor(){this.Gt=new RJ,this.zt=new PJ(this.Gt),this.jt=new xJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Du{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Du(this.indexId,this.documentKey,this.arrayValue,r)}}function ol(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d2(n.arrayValue,e.arrayValue),0!==t?t:(t=d2(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function d2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class h2{constructor(e){this.Yt=new xn((t,r)=>Qn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(rt(e.collectionGroup===this.collectionId),this.en)return!1;const t=gC(e);if(void 0!==t&&!this.nn(t))return!1;const r=mu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new xn(Qn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new _u(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _u(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _u(r.field,"asc"===r.dir?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,t,Uh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function f2(n){var e,t;if(rt(n instanceof tn||n instanceof An),n instanceof tn){if(n instanceof aV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>tn.create(n.field,"==",s)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>f2(i));return An.create(r,n.op)}function OJ(n){if(0===n.getFilters().length)return[];const e=zC(f2(n));return rt(p2(e)),jC(e)||$C(e)?[e]:e.getFilters()}function jC(n){return n instanceof tn}function $C(n){return n instanceof An&&wC(n)}function p2(n){return jC(n)||$C(n)||function(t){if(t instanceof An&&bC(t)){for(const r of t.getFilters())if(!jC(r)&&!$C(r))return!1;return!0}return!1}(n)}function zC(n){if(rt(n instanceof tn||n instanceof An),n instanceof tn)return n;if(1===n.filters.length)return zC(n.filters[0]);const e=n.filters.map(r=>zC(r));let t=An.create(e,n.op);return t=BE(t),p2(t)?t:(rt(t instanceof An),rt($h(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>HC(r,i)))}function HC(n,e){let t;return rt(n instanceof tn||n instanceof An),rt(e instanceof tn||e instanceof An),t=n instanceof tn?e instanceof tn?An.create([n,e],"and"):g2(n,e):e instanceof tn?g2(e,n):function(i,s){if(rt(i.filters.length>0&&s.filters.length>0),$h(i)&&$h(s))return iV(i,s.getFilters());const o=bC(i)?i:s,a=bC(i)?s:i,c=o.filters.map(l=>HC(l,a));return An.create(c,"or")}(n,e),BE(t)}function g2(n,e){if($h(e))return iV(e,n.getFilters());{const t=e.filters.map(r=>HC(n,r));return An.create(t,"or")}}function BE(n){if(rt(n instanceof tn||n instanceof An),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return BE(e[0]);if(nV(n))return n;const t=e.map(i=>BE(i)),r=[];return t.forEach(i=>{i instanceof tn?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class NJ{constructor(){this._n=new qC}addToCollectionParentIndex(e,t){return this._n.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Us.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class qC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xn(en.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(en.comparator)).toArray()}}const jE=new Uint8Array(0);class kJ{constructor(e,t){this.databaseId=t,this.an=new qC,this.un=new Wa(r=>Eu(r),(r,i)=>tm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ki(i)};return m2(e).put(s)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[AL(t),""],!1,!0);return m2(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ra(o.parent))}return r})}addFieldIndex(e,t){const r=mm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Jh(e);return s.next(a=>{o.put(a2(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=mm(e),i=Jh(e),s=Xh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=mm(e),r=Xh(e),i=Jh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return ee.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new h2(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Xh(e);let i=!0;const s=new Map;return ee.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ft();const a=[];return ee.forEach(s,(c,l)=>{var X;Ae("IndexedDbIndexManager",`Using index ${X=c,`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${Eu(t)}`);const f=function(X,ae){const Se=gC(ae);if(void 0===Se)return null;for(const je of RE(X,Se.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(l,c),m=function(X,ae){const Se=new Map;for(const je of mu(ae))for(const q of RE(X,je.fieldPath))switch(q.op){case"==":case"in":Se.set(je.fieldPath.canonicalString(),q.value);break;case"not-in":case"!=":return Se.set(je.fieldPath.canonicalString(),q.value),Array.from(Se.values())}return null}(l,c),y=function(X,ae){const Se=[];let je=!0;for(const q of mu(ae)){const B=0===q.kind?cV(X,q.fieldPath,X.startAt):lV(X,q.fieldPath,X.startAt);Se.push(B.value),je&&(je=B.inclusive)}return new il(Se,je)}(l,c),I=function(X,ae){const Se=[];let je=!0;for(const q of mu(ae)){const B=0===q.kind?lV(X,q.fieldPath,X.endAt):cV(X,q.fieldPath,X.endAt);Se.push(B.value),je&&(je=B.inclusive)}return new il(Se,je)}(l,c),T=this.hn(c,l,y),N=this.hn(c,l,I),F=this.Pn(c,l,m),W=this.In(c.indexId,f,T,y.inclusive,N,I.inclusive,F);return ee.forEach(W,z=>r.G(z,t.limit).next(X=>{X.forEach(ae=>{const Se=Be.fromSegments(ae.documentKey);o.has(Se)||(o=o.add(Se),a.push(Se))})}))}).next(()=>a)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:OJ(An.create(e.filters,"and")).map(r=>CC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),l=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/l]):jE,I=this.En(e,y,r[m%l],i),T=this.dn(e,y,s[m%l],o),N=a.map(F=>this.En(e,y,F,!0));f.push(...this.createRange(I,T,N))}return f}En(e,t,r,i){const s=new Du(e,Be.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Du(e,Be.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new h2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return ee.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let l=new xn(Qn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new gm;for(const i of mu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Au.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new gm;return Au.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new gm;return Au.bt.Pt(vu(this.databaseId,t),r.Ht(function(s){const o=mu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new gm);let s=0;for(const o of mu(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Xg(a))i=this.mn(i,o,a);else{const l=c.Ht(o.kind);Au.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new gm;c.seed(a.Wt()),Au.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=mm(e),i=Jh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return ee.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Uh(m.sequenceNumber,new Us(Tu(m.readTime),new Be(ra(m.documentKey)),m.largestBatchId)):Uh.empty(),I=f.fields.map(([T,N])=>new _u(Qn.fromServerFormat(T),N));return new Vh(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:At(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=mm(e),s=Jh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>ee.forEach(a,c=>s.put(a2(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?ee.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),ee.forEach(a,c=>this.pn(e,i,c).next(l=>{const f=this.yn(s,c);return l.isEqual(f)?ee.resolve():this.wn(e,s,c,l,f)}))))})}Sn(e,t,r,i){return Xh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Xh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Xh(e);let s=new xn(ol);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Du(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new xn(ol);const i=this.An(t,e);if(null==i)return r;const s=gC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Xg(o))for(const a of o.arrayValue.values||[])r=r.add(new Du(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Du(t.indexId,e.key,jE,i));return r}wn(e,t,r,i,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,l,f,m,y){const I=c.getIterator(),T=l.getIterator();let N=Bh(I),F=Bh(T);for(;N||F;){let W=!1,z=!1;if(N&&F){const X=f(N,F);X<0?z=!0:X>0&&(W=!0)}else null!=N?z=!0:W=!0;W?(m(F),F=Bh(T)):z?(y(N),N=Bh(I)):(N=Bh(I),F=Bh(T))}}(i,s,ol,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),ee.waitFor(o)}gn(e){let t=1;return Jh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ol(o,a)).filter((o,a,c)=>!a||0!==ol(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=ol(o,e),c=ol(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jE,[]]))}return s}Dn(e,t){return ol(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_2)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Qe())).next(_2)}}function m2(n){return di(n,"collectionParents")}function Xh(n){return di(n,"indexEntries")}function mm(n){return di(n,"indexConfiguration")}function Jh(n){return di(n,"indexState")}function _2(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;mC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Us(e.readTime,e.documentKey,t)}const y2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function v2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{rt(1===a)}));const l=[];for(const f of t.mutations){const m=FL(e,f.key.path,t.batchId);s.push(i.delete(m)),l.push(f.key)}return ee.waitFor(s).next(()=>l)}function $E(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class zE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new zE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ef(e),o=al(e);return o.add({}).next(a=>{rt("number"==typeof a);const c=new RC(a,t,r,i),l=function(I,T,N){const F=N.baseMutations.map(z=>hm(I.ct,z)),W=N.mutations.map(z=>hm(I.ct,z));return{userId:T,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:F,mutations:W}}(this.serializer,this.userId,c),f=[];let m=new xn((y,I)=>At(y.canonicalString(),I.canonicalString()));for(const y of i){const I=FL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(l)),f.push(s.put(I,TX))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),ee.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return al(e).get(t).next(r=>r?(rt(r.userId===this.userId),Cu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?ee.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return al(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(rt(a.batchId>=r),s=Cu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return al(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return al(e).U("userMutationsIndex",t).next(r=>r.map(i=>Cu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=bE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ef(e).J({range:i},(o,a,c)=>{const[l,f,m]=o,y=ra(f);if(l===this.userId&&t.path.isEqual(y))return al(e).get(m).next(I=>{if(!I)throw Qe();rt(I.userId===this.userId),s.push(Cu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(At);const i=[];return t.forEach(s=>{const o=bE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=ef(e).J({range:a},(l,f,m)=>{const[y,I,T]=l,N=ra(I);y===this.userId&&s.path.isEqual(N)?r=r.add(T):m.done()});i.push(c)}),ee.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=bE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new xn(At);return ef(e).J({range:o},(c,l,f)=>{const[m,y,I]=c,T=ra(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(al(e).get(s).next(o=>{if(null===o)throw Qe();rt(o.userId===this.userId),r.push(Cu(this.serializer,o))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return v2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ef(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=ra(s[1]);i.push(c)}else a.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return E2(e,this.userId,t)}xn(e){return I2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E2(n,e,t){const r=bE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ef(n).J({range:s,H:!0},(a,c,l)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),l.done()}).next(()=>o)}function al(n){return di(n,"mutations")}function ef(n){return di(n,"documentMutations")}function I2(n){return di(n,"mutationQueues")}class Su{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Su(0)}static Ln(){return new Su(-1)}}class FJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Su(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ct.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tf(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return tf(e).J((o,a)=>{const c=fm(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>ee.waitFor(s)).next(()=>i)}forEachTarget(e,t){return tf(e).J((r,i)=>{const s=fm(i);t(s)})}Bn(e){return b2(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}kn(e,t){return b2(e).put("targetGlobalKey",t)}qn(e,t){return tf(e).put(s2(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return tf(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const l=fm(a);tm(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=cl(e);return t.forEach(o=>{const a=ki(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=cl(e);return ee.forEach(t,s=>{const o=ki(s.path);return ee.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=cl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cl(e);let s=Ft();return i.J({range:r,H:!0},(o,a,c)=>{const l=ra(o[1]),f=new Be(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[AL(r)],!1,!0);let s=0;return cl(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return tf(e).get(t).next(r=>r?fm(r):null)}}function tf(n){return di(n,"targets")}function b2(n){return di(n,"targetGlobal")}function cl(n){return di(n,"targetDocuments")}function w2([n,e],[t,r]){const i=At(n,t);return 0===i?At(e,r):i}class LJ{constructor(e){this.Kn=e,this.buffer=new xn(w2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();w2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xc(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Yc(r)}yield t.zn(3e5)}))}}class VJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Bs.oe);const r=new LJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(y2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Fh()<=ta.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(l-c)+`ms\nTotal Duration: ${l-f}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class UJ{constructor(e,t){this.db=e,this.garbageCollector=function C2(n,e){return new VJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return HE(e,r)}removeReference(e,t,r){return HE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HE(e,t)}er(e,t){return function(i,s){let o=!1;return I2(i).Y(a=>E2(i,a,s).next(c=>(c&&(o=!0),ee.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ct.min()),cl(e).delete([0,ki(o.path)])))});i.push(c)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HE(e,t)}Xn(e,t){const r=cl(e);let i,s=Bs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{0===o?(s!==Bs.oe&&t(new Be(ra(i)),s),s=l,i=c):s=Bs.oe}).next(()=>{s!==Bs.oe&&t(new Be(ra(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HE(n,e){return cl(n).put((i=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:i}));var i}class A2{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mu(e).put(r)}removeEntry(e,t,r){return Mu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],VE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_m(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_m(t))},(i,s)=>{r={document:this.nr(t,s),size:$E(s)}}).next(()=>r)}getEntries(e,t){let r=As();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=As(),i=new Hn(Be.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,$E(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return ee.resolve();let i=new xn(R2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(_m(i.first()),_m(i.last())),o=i.getIterator();let a=o.getNext();return Mu(e).J({index:"documentKeyIndex",range:s},(c,l,f)=>{const m=Be.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&R2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.$(_m(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),VE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mu(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=As();for(const m of l){const y=this.nr(Be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(rm(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=As();const o=M2(t,r),a=M2(t,Us.max());return Mu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,f)=>{const m=this.nr(Be.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new jJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return S2(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}tr(e,t){return S2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function DJ(n,e){let t;if(e.document)t=QV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Tu(e.noDocument.readTime);t=Yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=Be.fromSegments(e.unknownDocument.path),i=Tu(e.unknownDocument.version);t=Yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new ir(i[0],i[1]);return ct.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ct.min()))return r}return Yn.newInvalidDocument(e)}}function D2(n){return new BJ(n)}class jJ extends A2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Wa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new xn((s,o)=>At(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=i2(this.ar.serializer,o);i=i.add(s.path.popLast());const l=$E(c);r+=l-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=i2(this.ar.serializer,o.convertToNoDocument(ct.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function S2(n){return di(n,"remoteDocumentGlobal")}function Mu(n){return di(n,"remoteDocumentsV14")}function _m(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M2(n,e){const t=e.documentKey.path.toArray();return[n,VE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function R2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=At(t[s],r[s]),i)return i;return i=At(t.length,r.length),i||(i=At(t[t.length-2],r[r.length-2]),i||At(t[t.length-1],r[r.length-1]))}class $J{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class P2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&am(r.mutation,i,Cs.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const i=sa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=im();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=sa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=As();const o=sm(),a=sm();return t.forEach((c,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof Ka)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),am(f.mutation,l,f.mutation.getFieldMask(),ir.now())):o.set(l.key,Cs.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new $J(f,null!==(m=o.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=sm();let i=new Hn((o,a)=>o-a),s=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let f=r.get(c)||Cs.empty();f=a.applyToLocalView(l,f),r.set(c,f);const m=(i.get(a.batchId)||Ft()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,f=c.value,m=vV();f.forEach(y=>{if(!s.has(y)){const I=SV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,m))}return ee.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):AC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ee.resolve(sa());let a=-1,c=s;return o.next(l=>ee.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?ee.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ft())).next(f=>({batchId:a,changes:yV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=im();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=im();return this.indexManager.getCollectionParents(e,s).next(a=>ee.forEach(a,c=>{const l=(m=t,y=c.child(s),new Ga(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,Yn.newInvalidDocument(f)))});let a=im();return o.forEach((c,l)=>{const f=s.get(c);void 0!==f&&am(f.mutation,l,Cs.empty(),ir.now()),rm(t,l)&&(a=a.insert(c,l))}),a})}}class zJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Or(i.createTime)}),ee.resolve();var i}getNamedQuery(e,t){return ee.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:UC(i.bundledQuery),readTime:Or(i.readTime)}),ee.resolve();var i}}class HJ{constructor(){this.overlays=new Hn(Be.comparator),this.hr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sa();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=sa(),s=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Hn((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=sa(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=sa(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return ee.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xC(t,r));let s=this.hr.get(t);void 0===s&&(s=Ft(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class GC{constructor(){this.Pr=new xn(hi.Ir),this.Tr=new xn(hi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new hi(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new hi(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Be(new en([])),r=new hi(t,e),i=new hi(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Be(new en([])),r=new hi(t,e),i=new hi(t,e+1);let s=Ft();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hi(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Be.comparator(e.key,t.key)||At(e.pr,t.pr)}static Er(e,t){return At(e.pr,t.pr)||Be.comparator(e.key,t.key)}}class qJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new xn(hi.Ir)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new RC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new hi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,t){return ee.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(At);return t.forEach(i=>{const s=new hi(i,0),o=new hi(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),ee.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new hi(new Be(s),0);let a=new xn(At);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),ee.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return ee.forEach(t.mutations,i=>{const s=new hi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new hi(t,0),i=this.wr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GJ{constructor(e){this.vr=e,this.docs=new Hn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=As();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=As();const o=t.path,a=new Be(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:f}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||mC(SL(f),r)<=0||(i.has(f.key)||rm(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Qe()}Fr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WJ(this)}getSize(e){return ee.resolve(this.size)}}class WJ extends A2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class KJ{constructor(e){this.persistence=e,this.Mr=new Wa(t=>Eu(t),tm),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.Or=0,this.Nr=new GC,this.targetCount=0,this.Lr=Su.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),ee.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Su(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.qn(t),ee.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Nr.containsKey(t))}}class WC{constructor(e,t){this.Br={},this.overlays={},this.kr=new Bs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new KJ(this),this.indexManager=new NJ,this.remoteDocumentCache=new GJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new r2(t),this.$r=new zJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new qJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new ZJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return ee.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class ZJ extends RL{constructor(e){super(),this.currentSequenceNumber=e}}class qE{constructor(e){this.persistence=e,this.zr=new GC,this.jr=null}static Hr(e){return new qE(e)}get Jr(){if(this.jr)return this.jr;throw Qe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ee.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Jr,r=>{const i=Be.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ct.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return ee.or([()=>ee.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class QJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new IE("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kL,{unique:!0}),c.createObjectStore("documentMutations"),x2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),x2(e)),o=o.next(()=>function(c){const l=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ct.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kL,{unique:!0});const m=l.store("mutations"),y=f.map(I=>m.put(I));return ee.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:FX});l.createIndex("collectionPathOverlayIndex",LX,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",VX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:CX});l.createIndex("documentKeyIndex",AX),l.createIndex("collectionGroupIndex",DX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:xX}).createIndex("sequenceNumberIndex",OX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:NX}).createIndex("documentKeyIndex",kX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$E(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>ee.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>ee.forEach(a,c=>{rt(c.userId===s.userId);const l=Cu(this.serializer,c);return v2(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new en(o),l=[0,ki(c)];s.push(t.get(l).next(f=>f?ee.resolve():t.put({targetId:0,path:ki(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:PX});const r=t.store("collectionParents"),i=new qC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:ki(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new en(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{const f=ra(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=fm(i),o=s2(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Be(en.fromString(m.document.name).popFirst(5)):m.noDocument?Be.fromSegments(m.noDocument.path):m.unknownDocument?Be.fromSegments(m.unknownDocument.path):Qe()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=D2(this.serializer),s=new WC(qE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var l;let f=null!==(l=a.get(c.userId))&&void 0!==l?l:Ft();Cu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),ee.forEach(a,(c,l)=>{const f=new ui(l),m=UE.lt(this.serializer,f),y=s.getIndexManager(f),I=zE.lt(f,this.serializer,y,s.referenceDelegate);return new P2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new vC(t,Bs.oe),c).next()})})}}function x2(n){n.createObjectStore("targetDocuments",{keyPath:MX}).createIndex("documentTargetsIndex",RX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SX,{unique:!0}),n.createObjectStore("targetGlobal")}const KC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ZC{constructor(e,t,r,i,s,o,a,c,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!ZC.D())throw new Te(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UJ(this,i),this.Ti=t+"main",this.serializer=new r2(c),this.Ei=new na(this.Ti,this.ui,new QJ(this.serializer)),this.Qr=new FJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=D2(this.serializer),this.$r=new SJ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(le.FAILED_PRECONDITION,KC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Bs(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Xc(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ym(e).get("owner").next(t=>ee.resolve(this.Si(t)))}bi(e){return WE(e).delete(this.clientId)}Di(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return ee.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ee.resolve(!0):ym(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Te(le.FAILED_PRECONDITION,KC);return!1}}return!(!this.networkEnabled||!this.inForeground)||WE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vC(t,Bs.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>WE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return zE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return UE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?BX:15===c?BL:14===c?UL:13===c?VL:12===c?UX:11===c?LL:void Qe();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new vC(a,this.kr?this.kr.next():Bs.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Te(le.FAILED_PRECONDITION,ML);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return ym(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(le.FAILED_PRECONDITION,KC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ym(e).put("owner",t)}static D(){return na.D()}yi(e){const t=ym(e);return t.get("owner").next(r=>this.Si(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Rt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ym(n){return di(n,"owner")}function WE(n){return di(n,"clientMetadata")}function QC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class YC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Ft(),i=Ft();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new YC(e,t.fromCache,r,i)}}class YJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class O2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Rt.G6)()?8:PL((0,Rt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new YJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Fh()<=ta.in.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",qh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ee.resolve()):(Fh()<=ta.in.DEBUG&&Ae("QueryEngine","Query:",qh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Fh()<=ta.in.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",qh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):ee.resolve())}ji(e,t){if(dV(t))return ee.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=PE(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ft(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Zi(t,a);return this.Xi(t,l,o,c.readTime)?this.ji(e,PE(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return dV(t)||i.isEqual(ct.min())?ee.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?ee.resolve(null):(Fh()<=ta.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qh(t)),this.es(e,o,t,DL(i,-1)).next(a=>a))})}Zi(e,t){let r=new xn(mV(e));return t.forEach((i,s)=>{rm(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Fh()<=ta.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",qh(t)),this.zi.getDocumentsMatchingQuery(e,t,Us.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class XJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Hn(At),this.rs=new Wa(s=>Eu(s),tm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function N2(n,e,t,r){return new XJ(n,e,t,r)}function k2(n,e){return XC.apply(this,arguments)}function XC(){return(XC=(0,_e.Z)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ft();for(const l of i){o.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function F2(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function L2(n,e,t){let r=Ft(),i=Ft();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=As();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ct.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function tee(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nf(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Za(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function rf(n,e,t){return JC.apply(this,arguments)}function JC(){return(JC=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xc(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function KE(n,e,t){const r=Ve(n);let i=ct.min(),s=Ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,f){const m=Ve(c),y=m.rs.get(f);return void 0!==y?ee.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,o,Fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ct.min(),t?s:Ft())).next(a=>(B2(r,gV(e),a),{documents:a,hs:s})))}function V2(n,e){const t=Ve(n),r=Ve(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function U2(n,e){const t=Ve(n),r=t.ss.get(e)||ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,DL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(B2(t,e,i),i))}function B2(n,e,t){let r=n.ss.get(e)||ct.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function eA(){return(eA=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n);let s=Ft(),o=As();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(s=s.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield nf(i,(f=r,Fi(zh(en.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>L2(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function ree(n,e){return tA.apply(this,arguments)}function tA(){return(tA=(0,_e.Z)(function*(n,e,t=Ft()){const r=yield nf(n,Fi(UC(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Or(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(si.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function j2(n,e){return`firestore_clients_${n}_${e}`}function $2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nA(n,e){return`firestore_targets_${n}_${e}`}class ZE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Te(i.error.code,i.error.message))),o?new ZE(e,t,i.state,s):(xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Te(r.error.code,r.error.message))),s?new vm(e,r.state,i):(xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class QE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=SC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=OL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new QE(e,s):(xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rA{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rA(t.clientId,t.onlineState):(xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iA{constructor(){this.activeTargetIds=SC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sA{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Hn(At),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=j2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new iA),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(j2(e.persistenceKey,i));if(s){const o=QE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(nA(this.persistenceKey,e));if(r){const i=vm.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nA(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Bs.oe;if(null!=o)try{const c=JSON.parse(o);rt("number"==typeof c),a=c}catch(c){xr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Bs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new ZE(this.currentUser,e,t,r),s=$2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=$2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=nA(this.persistenceKey,e),s=new vm(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return QE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return ZE.Es(new ui(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return vm.Es(i,t)}xs(e){return rA.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=SC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class z2{constructor(){this.no=new iA,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new iA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iee{io(e){}shutdown(){}}class H2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YE=null;function oA(){return null===YE?YE=268435456+Math.round(2147483648*Math.random()):YE++,"0x"+YE.toString(16)}const see={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oee{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Vi="WebChannelConnection";class aee extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=oA(),c=this.vo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,c,l,i).then(f=>(Ae("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Ts("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+kh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${see[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=oA();return new Promise((o,a)=>{const c=new mL;c.setWithCredentials(!0),c.listenOnce(yL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case EE.NO_ERROR:const f=c.getResponseJson();Ae(Vi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case EE.TIMEOUT:Ae(Vi,`RPC '${e}' ${s} timed out`),a(new Te(le.DEADLINE_EXCEEDED,"Request time out"));break;case EE.HTTP_ERROR:const m=c.getStatus();if(Ae(Vi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(F){const W=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(W)>=0?W:le.UNKNOWN}(I.status);a(new Te(T,I.message))}else a(new Te(le.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Te(le.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Ae(Vi,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ae(Vi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=oA(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IL(),a=EL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new _L({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Ae(Vi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const T=new oee({lo:F=>{I?Ae(Vi,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(y||(Ae(Vi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ae(Vi,`RPC '${e}' stream ${i} sending:`,F),m.send(F))},ho:()=>m.close()}),N=(F,W,z)=>{F.listen(W,X=>{try{z(X)}catch(ae){setTimeout(()=>{throw ae},0)}})};return N(m,qg.EventType.OPEN,()=>{I||(Ae(Vi,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),N(m,qg.EventType.CLOSE,()=>{I||(I=!0,Ae(Vi,`RPC '${e}' stream ${i} transport closed`),T.po())}),N(m,qg.EventType.ERROR,F=>{I||(I=!0,Ts(Vi,`RPC '${e}' stream ${i} transport errored:`,F),T.po(new Te(le.UNAVAILABLE,"The operation could not be completed")))}),N(m,qg.EventType.MESSAGE,F=>{var W;if(!I){const z=F.data[0];rt(!!z);const ae=z.error||(null===(W=z[0])||void 0===W?void 0:W.error);if(ae){Ae(Vi,`RPC '${e}' stream ${i} received error:`,ae);const Se=ae.status;let je=function($){const K=Kr[$];if(void 0!==K)return kV(K)}(Se),q=ae.message;void 0===je&&(je=le.INTERNAL,q="Unknown error status: "+Se+" with message "+ae.message),I=!0,T.po(new Te(je,q)),m.close()}else Ae(Vi,`RPC '${e}' stream ${i} received:`,z),T.yo(z)}}),N(a,vL.STAT_EVENT,F=>{F.stat===fC.PROXY?Ae(Vi,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===fC.NOPROXY&&Ae(Vi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function q2(){return typeof window<"u"?window:null}function XE(){return typeof document<"u"?document:null}function Em(n){return new _J(n,!0)}class aA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class G2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new aA(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,_e.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,_e.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Te(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,_e.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cee extends G2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function EJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Qe(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(rt(void 0===f||"string"==typeof f),si.fromBase64String(f||"")):(rt(void 0===f||f instanceof Buffer||f instanceof Uint8Array),si.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?le.UNKNOWN:kV(l.code);return new Te(f,l.message||"")}(o);t=new BV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=oa(n,r.document.name),s=Or(r.document.updateTime),o=r.document.createTime?Or(r.document.createTime):ct.min(),a=new bi({mapValue:{fields:r.document.fields}}),c=Yn.newFoundDocument(i,s,o,a);t=new FE(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=oa(n,r.document),s=r.readTime?Or(r.readTime):ct.min(),o=Yn.newNoDocument(i,s);t=new FE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=oa(n,r.document);t=new FE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new dJ(i,s);t=new UV(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ct.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ct.min():o.readTime?Or(o.readTime):ct.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=LC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=ME(c)?{documents:YV(s,c)}:{query:LE(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HV(s,o.resumeToken);const l=NC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ct.min())>0){a.readTime=Qh(s,o.snapshotVersion.toTimestamp());const l=NC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function bJ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=LC(this.serializer),t.removeTarget=e,this.i_(t)}}class lee extends G2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function IJ(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(i,s){let o=Or(i.updateTime?i.updateTime:s);return o.isEqual(ct.min())&&(o=Or(s)),new cJ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.A_(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=LC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hm(this.serializer,r))};this.i_(t)}}class uee extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,FC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(le.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,FC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(le.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class dee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xr(t),this.y_=!1):Ae("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class hee{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,_e.Z)(function*(){var c;ll(o)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,_e.Z)(function*(f){const m=Ve(f);m.M_.add(4),yield sf(m),m.N_.set("Unknown"),m.M_.delete(4),yield Im(m)}),function l(f){return c.apply(this,arguments)})(o))}))}),this.N_=new dee(r,i)}}function Im(n){return cA.apply(this,arguments)}function cA(){return(cA=(0,_e.Z)(function*(n){if(ll(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function sf(n){return lA.apply(this,arguments)}function lA(){return(lA=(0,_e.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function JE(n,e){const t=Ve(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),hA(t)?dA(t):lf(t).Xo()&&uA(t,e))}function af(n,e){const t=Ve(n),r=lf(t);t.F_.delete(e),r.Xo()&&W2(t,e),0===t.F_.size&&(r.Xo()?r.n_():ll(t)&&t.N_.set("Unknown"))}function uA(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lf(n).P_(e)}function W2(n,e){n.L_.xe(e),lf(n).I_(e)}function dA(n){n.L_=new fJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),lf(n).start(),n.N_.w_()}function hA(n){return ll(n)&&!lf(n).Zo()&&n.F_.size>0}function ll(n){return 0===Ve(n).M_.size}function K2(n){n.L_=void 0}function fee(n){return fA.apply(this,arguments)}function fA(){return(fA=(0,_e.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function pee(n){return pA.apply(this,arguments)}function pA(){return(pA=(0,_e.Z)(function*(n){n.F_.forEach((e,t)=>{uA(n,e)})})).apply(this,arguments)}function gee(n,e){return gA.apply(this,arguments)}function gA(){return(gA=(0,_e.Z)(function*(n,e){K2(n),hA(n)?(n.N_.D_(e),dA(n)):n.N_.set("Unknown")})).apply(this,arguments)}function mee(n,e,t){return mA.apply(this,arguments)}function mA(){return mA=(0,_e.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof BV&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eI(n,r)}else if(e instanceof FE?n.L_.Ke(e):e instanceof UV?n.L_.He(e):n.L_.We(e),!t.isEqual(ct.min()))try{const r=yield F2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(l);f&&s.F_.set(l,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(si.EMPTY_BYTE_STRING,f.snapshotVersion)),W2(s,c);const m=new Za(f.target,c,l,f.sequenceNumber);uA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield eI(n,r)}var r}),mA.apply(this,arguments)}function eI(n,e,t){return _A.apply(this,arguments)}function _A(){return(_A=(0,_e.Z)(function*(n,e,t){if(!Xc(e))throw e;n.M_.add(1),yield sf(n),n.N_.set("Offline"),t||(t=()=>F2(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Im(n)}))})).apply(this,arguments)}function Z2(n,e){return e().catch(t=>eI(n,t,e))}function cf(n){return yA.apply(this,arguments)}function yA(){return(yA=(0,_e.Z)(function*(n){const e=Ve(n),t=ul(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;_ee(e);)try{const i=yield tee(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,yee(e,i)}catch(i){yield eI(e,i)}Q2(e)&&Y2(e)})).apply(this,arguments)}function _ee(n){return ll(n)&&n.v_.length<10}function yee(n,e){n.v_.push(e);const t=ul(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function Q2(n){return ll(n)&&!ul(n).Zo()&&n.v_.length>0}function Y2(n){ul(n).start()}function vee(n){return vA.apply(this,arguments)}function vA(){return(vA=(0,_e.Z)(function*(n){ul(n).V_()})).apply(this,arguments)}function Eee(n){return EA.apply(this,arguments)}function EA(){return(EA=(0,_e.Z)(function*(n){const e=ul(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function Iee(n,e,t){return IA.apply(this,arguments)}function IA(){return(IA=(0,_e.Z)(function*(n,e,t){const r=n.v_.shift(),i=PC.from(r,e,t);yield Z2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cf(n)})).apply(this,arguments)}function bee(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,_e.Z)(function*(n,e){var t;e&&ul(n).E_&&(yield(t=(0,_e.Z)(function*(i,s){if(NV(a=s.code)&&a!==le.ABORTED){const o=i.v_.shift();ul(i).t_(),yield Z2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield cf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Q2(n)&&Y2(n)}),bA.apply(this,arguments)}function X2(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,_e.Z)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=ll(t);t.M_.add(3),yield sf(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Im(t)})).apply(this,arguments)}function TA(n,e){return CA.apply(this,arguments)}function CA(){return(CA=(0,_e.Z)(function*(n,e){const t=Ve(n);e?(t.M_.delete(2),yield Im(t)):e||(t.M_.add(2),yield sf(t),t.N_.set("Unknown"))})).apply(this,arguments)}function lf(n){return n.B_||(n.B_=function(t,r,i){const s=Ve(t);return s.f_(),new cee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:fee.bind(null,n),To:pee.bind(null,n),Ao:gee.bind(null,n),h_:mee.bind(null,n)}),n.x_.push(function(){var e=(0,_e.Z)(function*(t){t?(n.B_.t_(),hA(n)?dA(n):n.N_.set("Unknown")):(yield n.B_.stop(),K2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function ul(n){return n.k_||(n.k_=function(t,r,i){const s=Ve(t);return s.f_(),new lee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:vee.bind(null,n),Ao:bee.bind(null,n),R_:Eee.bind(null,n),A_:Iee.bind(null,n)}),n.x_.push(function(){var e=(0,_e.Z)(function*(t){t?(n.k_.t_(),yield cf(n)):(yield n.k_.stop(),n.v_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class AA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new AA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uf(n,e){if(xr("AsyncQueue",`${e}: ${n}`),Xc(n))return new Te(le.UNAVAILABLE,`${e}: ${n}`);throw n}class df{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=im(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new df(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof df)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new df;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class J2{constructor(){this.q_=new Hn(Be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Qe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hf{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new hf(e,t,df.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class wee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Tee{constructor(){this.queries=new Wa(e=>pV(e),nm),this.onlineState="Unknown",this.z_=new Set}}function DA(n,e){return SA.apply(this,arguments)}function SA(){return(SA=(0,_e.Z)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new wee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=uf(o,`Initialization of query '${qh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&PA(t)})).apply(this,arguments)}function MA(n,e){return RA.apply(this,arguments)}function RA(){return(RA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Cee(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&PA(t)}function Aee(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function PA(n){n.z_.forEach(e=>{e.next()})}var xA,eU;(eU=xA||(xA={})).J_="default",eU.Cache="cache";class OA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new hf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=hf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==xA.Cache}}class Dee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class tU{constructor(e){this.serializer=e}Ps(e){return oa(this.serializer,e)}Is(e){return e.metadata.exists?QV(this.serializer,e.document,!1):Yn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Or(e)}}class See{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nU(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=en.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new tU(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Ft()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function nee(n,e,t,r){return eA.apply(this,arguments)}(e.localStore,new tU(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield ree(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function nU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rU{constructor(e){this.key=e}}class iU{constructor(e){this.key=e}}class sU{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ft(),this.mutatedKeys=Ft(),this.Ia=mV(e),this.Ta=new df(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new J2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=rm(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;y&&I?y.data.isEqual(I.data)?T!==N&&(r.track({type:3,doc:I}),F=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),F=!0,(c&&this.Ia(I,c)>0||l&&this.Ia(I,l)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),F=!0):y&&!I&&(r.track({type:1,doc:y}),F=!0,(c||l)&&(a=!0)),F&&(I?(o=o.add(I),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const N=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return N(I)-N(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,0!==o.length||l?{snapshot:new hf(this.query,e.Ta,s,o,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new J2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ft(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new iU(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new rU(r))}),t}pa(e){this.la=e.hs,this.Pa=Ft();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return hf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Mee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ree{constructor(e){this.key=e,this.wa=!1}}class Pee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Wa(a=>pV(a),nm),this.Da=new Map,this.Ca=new Set,this.va=new Hn(Be.comparator),this.Fa=new Map,this.Ma=new GC,this.xa={},this.Oa=new Map,this.Na=Su.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function xee(n,e){return NA.apply(this,arguments)}function NA(){return(NA=(0,_e.Z)(function*(n,e,t=!0){const r=tI(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield oU(r,e,t,!0),i})).apply(this,arguments)}function Oee(n,e){return kA.apply(this,arguments)}function kA(){return(kA=(0,_e.Z)(function*(n,e){const t=tI(n);yield oU(t,e,!0,!1)})).apply(this,arguments)}function oU(n,e,t,r){return FA.apply(this,arguments)}function FA(){return(FA=(0,_e.Z)(function*(n,e,t,r){const i=yield nf(n.localStore,Fi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield LA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&JE(n.remoteStore,i),a})).apply(this,arguments)}function LA(n,e,t,r,i){return VA.apply(this,arguments)}function VA(){return VA=(0,_e.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,_e.Z)(function*(F,W,z,X){let ae=W.view.da(z);ae.Xi&&(ae=yield KE(F.localStore,W.query,!1).then(({documents:B})=>W.view.da(B,ae)));const Se=X&&X.targetChanges.get(W.targetId),je=X&&null!=X.targetMismatches.get(W.targetId),q=W.view.applyChanges(ae,F.isPrimaryClient,Se,je);return ZA(F,W.targetId,q.fa),q.snapshot}),function N(F,W,z,X){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield KE(n.localStore,e,!0),o=new sU(e,s.hs),a=o.da(s.documents),c=um.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,c);ZA(n,t,l.fa);const f=new Mee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),VA.apply(this,arguments)}function Nee(n,e,t){return UA.apply(this,arguments)}function UA(){return(UA=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!nm(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&af(r.remoteStore,i.targetId),ff(r,i.targetId)}).catch(Yc))):(ff(r,i.targetId),yield rf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function kee(n,e){return BA.apply(this,arguments)}function BA(){return(BA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),af(t.remoteStore,r.targetId))})).apply(this,arguments)}function jA(){return(jA=(0,_e.Z)(function*(n,e,t){const r=oD(n);try{const i=yield function(o,a){const c=Ve(o),l=ir.now(),f=a.reduce((I,T)=>I.add(T.key),Ft());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=As(),N=Ft();return c.os.getEntries(I,f).next(F=>{T=F,T.forEach((W,z)=>{z.isValidDocument()||(N=N.add(W))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(F=>{m=F;const W=[];for(const z of a){const X=uJ(z,m.get(z.key).overlayedDocument);null!=X&&W.push(new Ka(z.key,X,XL(X.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(I,l,W,a)}).next(F=>{y=F;const W=F.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(I,F.batchId,W)})}).then(()=>({batchId:y.batchId,changes:yV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new Hn(At)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Qa(r,i.changes),yield cf(r.remoteStore)}catch(i){const s=uf(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function aU(n,e){return $A.apply(this,arguments)}function $A(){return($A=(0,_e.Z)(function*(n,e){const t=Ve(n);try{const r=yield function eee(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var N,F,W;null!==e.targetMismatches.get(m)?I=I.withResumeToken(si.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),F=I,W=f,(0===(N=y).resumeToken.approximateByteSize()||F.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=As(),l=Ft();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(L2(s,o,e.documentUpdates).next(f=>{c=f.cs,l=f.ls})),!r.isEqual(ct.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return ee.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?rt(o.wa):i.removedDocuments.size>0&&(rt(o.wa),o.wa=!1))}),yield Qa(t,r,e)}catch(r){yield Yc(r)}})).apply(this,arguments)}function cU(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ve(o);c.onlineState=a;let l=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&PA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lee(n,e,t){return zA.apply(this,arguments)}function zA(){return(zA=(0,_e.Z)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Hn(Be.comparator);o=o.insert(s,Yn.newNoDocument(s,ct.min()));const a=Ft().add(s),c=new lm(ct.min(),new Map,new Hn(At),o,a);yield aU(r,c),r.va=r.va.remove(s),r.Fa.delete(e),QA(r)}else yield rf(r.localStore,e,!1).then(()=>ff(r,e,t)).catch(Yc)})).apply(this,arguments)}function Vee(n,e){return HA.apply(this,arguments)}function HA(){return(HA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function JJ(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,f){const m=l.batch,y=m.keys();let I=ee.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(c,T)).next(N=>{const F=l.docVersions.get(T);rt(null!==F),N.version.compareTo(F)<0&&(m.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ft();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);KA(t,r,null),WA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qa(t,i)}catch(i){yield Yc(i)}})).apply(this,arguments)}function Uee(n,e,t){return qA.apply(this,arguments)}function qA(){return(qA=(0,_e.Z)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const c=Ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(rt(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>c.localDocuments.getDocuments(l,f))})}(r.localStore,e);KA(r,e,t),WA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qa(r,i)}catch(i){yield Yc(i)}})).apply(this,arguments)}function GA(){return(GA=(0,_e.Z)(function*(n,e){const t=Ve(n);ll(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ve(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=uf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function WA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function KA(n,e,t){const r=Ve(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function ff(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||lU(n,r)})}function lU(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(af(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),QA(n))}function ZA(n,e,t){for(const r of t)r instanceof rU?(n.Ma.addReference(r.key,e),jee(n,r)):r instanceof iU?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||lU(n,r.key)):Qe()}function jee(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.Ca.add(r),QA(n))}function QA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Be(en.fromString(e)),r=n.Na.next();n.Fa.set(r,new Ree(t)),n.va=n.va.insert(t,r),JE(n.remoteStore,new Za(Fi(zh(t.path)),r,"TargetPurposeLimboResolution",Bs.oe))}}function Qa(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=YC.Ki(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,_e.Z)(function*(l,f){const m=Ve(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ee.forEach(f,I=>ee.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>ee.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!Xc(y))throw y;Ae("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),F=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,F)}}}),function c(l,f){return a.apply(this,arguments)})(r.localStore,s))}),YA.apply(this,arguments)}function $ee(n,e){return XA.apply(this,arguments)}function XA(){return(XA=(0,_e.Z)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield k2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new Te(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qa(t,r.us)}var s})).apply(this,arguments)}function zee(n,e){const t=Ve(n),r=t.Fa.get(e);if(r&&r.wa)return Ft().add(r.key);{let i=Ft();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Hee(n,e){return JA.apply(this,arguments)}function JA(){return(JA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=yield KE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&ZA(t,e.targetId,i.fa),i})).apply(this,arguments)}function qee(n,e){return eD.apply(this,arguments)}function eD(){return(eD=(0,_e.Z)(function*(n,e){const t=Ve(n);return U2(t.localStore,e).then(r=>Qa(t,r))})).apply(this,arguments)}function Gee(n,e,t,r){return tD.apply(this,arguments)}function tD(){return(tD=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n),s=yield function(a,c){const l=Ve(a),f=Ve(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?l.localDocuments.getDocuments(m,y):ee.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield cf(i.remoteStore):"acknowledged"===t||"rejected"===t?(KA(i,e,r||null),WA(i,e),c=e,Ve(Ve(i.localStore).mutationQueue).Mn(c)):Qe(),yield Qa(i,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function nD(){return(nD=(0,_e.Z)(function*(n,e){const t=Ve(n);if(tI(t),oD(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uU(t,r.toArray());t.La=!0,yield TA(t.remoteStore,!0);for(const s of i)JE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ff(t,o),rf(t.localStore,o,!0))),af(t.remoteStore,o)}),yield i,yield uU(t,r),function(o){const a=Ve(o);a.Fa.forEach((c,l)=>{af(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new Hn(Be.comparator)}(t),t.La=!1,yield TA(t.remoteStore,!1)}})).apply(this,arguments)}function uU(n,e,t){return rD.apply(this,arguments)}function rD(){return(rD=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield nf(r.localStore,Fi(c[0]));for(const l of c){const f=r.ba.get(l),m=yield Hee(r,f);m.snapshot&&s.push(m.snapshot)}}else{const l=yield V2(r.localStore,o);a=yield nf(r.localStore,l),yield LA(r,dU(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function dU(n){return uV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Kee(n){return t=Ve(n).localStore,Ve(Ve(t).persistence).Bi();var t}function Zee(n,e,t,r){return iD.apply(this,arguments)}function iD(){return(iD=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n);if(i.La)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield U2(i.localStore,gV(s[0])),a=lm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,si.EMPTY_BYTE_STRING);yield Qa(i,o,a);break}case"rejected":yield rf(i.localStore,e,!0),ff(i,e,r);break;default:Qe()}})).apply(this,arguments)}function Qee(n,e,t){return sD.apply(this,arguments)}function sD(){return(sD=(0,_e.Z)(function*(n,e,t){const r=tI(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const s=yield V2(r.localStore,i),o=yield nf(r.localStore,s);yield LA(r,dU(s),o.targetId,!1,o.resumeToken),JE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield rf(r.localStore,i,!1).then(()=>{af(r.remoteStore,i),ff(r,i)}).catch(Yc))}})).apply(this,arguments)}function tI(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lee.bind(null,e),e.Sa.h_=Cee.bind(null,e.eventManager),e.Sa.ka=Aee.bind(null,e.eventManager),e}function oD(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uee.bind(null,e),e}class bm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=Em(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return N2(this.persistence,new O2,e.initialUser,this.serializer)}createPersistence(e){return new WC(qE.Hr,this.serializer)}createSharedClientState(e){return new z2}terminate(){var e=this;return(0,_e.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aD extends bm{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield oD(r.Qa.syncEngine),yield cf(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return N2(this.persistence,new O2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new T2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new bX(t,this.persistence);return new IX(e.asyncQueue,r)}createPersistence(e){const t=QC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new ZC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,q2(),XE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new z2}}class hU extends aD{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof sA&&(r.sharedClientState.syncEngine={Zs:Gee.bind(null,i),Xs:Zee.bind(null,i),eo:Qee.bind(null,i),Bi:Kee.bind(null,i),Ys:qee.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,_e.Z)(function*(o){yield function Wee(n,e){return nD.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=q2();if(!sA.D(t))throw new Te(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=QC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pf{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>cU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=$ee.bind(null,r.syncEngine),yield TA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tee}createDatastore(e){const t=Em(e.databaseInfo.databaseId),r=new aee(e.databaseInfo);return new uee(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>cU(this.syncEngine,t,0),a=H2.D()?new H2:new iee,new hee(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,l,f){const m=new Pee(i,s,o,a,c,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,_e.Z)(function*(){var t,r;yield(r=(0,_e.Z)(function*(s){const o=Ve(s);Ae("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield sf(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function fU(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new ii,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,_e.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new Dee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,_e.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ete{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Te(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,_e.Z)(function*(o,a){const c=Ve(o),l={documents:a.map(I=>dm(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,en.emptyPath(),l,a.length),m=new Map;f.forEach(I=>{const T=function vJ(n,e){return"found"in e?function(r,i){rt(!!i.found);const s=oa(r,i.found.name),o=Or(i.found.updateTime),a=i.found.createTime?Or(i.found.createTime):ct.min(),c=new bi({mapValue:{fields:i.found.fields}});return Yn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){rt(!!i.missing),rt(!!i.readTime);const s=oa(r,i.missing),o=Or(i.readTime);return Yn.newNoDocument(s,o)}(n,e):Qe()}(c.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());rt(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Be.fromPath(i);e.mutations.push(new MC(s,e.precondition(s)))}),yield(r=(0,_e.Z)(function*(s,o){const a=Ve(s),c={writes:o.map(l=>hm(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,en.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ct.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ct.min()))throw new Te(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tte{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new aA(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,_e.Z)(function*(){const t=new ete(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Kg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!NV(t)}return!1}}class nte{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=CL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,_e.Z)(function*(a){Ae("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=uf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function rI(n,e){return cD.apply(this,arguments)}function cD(){return cD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(s){r.isEqual(s)||(yield k2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),cD.apply(this,arguments)}function lD(n,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dD(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>X2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>X2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function pU(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function dD(n){return hD.apply(this,arguments)}function hD(){return(hD=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!pU(t))throw t;Ts("Error using user provided cache. Falling back to memory cache: "+t),yield rI(n,new bm)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield rI(n,new bm);return n._offlineComponents})).apply(this,arguments)}function iI(n){return fD.apply(this,arguments)}function fD(){return(fD=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield lD(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield lD(n,new pf))),n._onlineComponents})).apply(this,arguments)}function gU(n){return dD(n).then(e=>e.persistence)}function gf(n){return dD(n).then(e=>e.localStore)}function mU(n){return iI(n).then(e=>e.remoteStore)}function pD(n){return iI(n).then(e=>e.syncEngine)}function mf(n){return gD.apply(this,arguments)}function gD(){return(gD=(0,_e.Z)(function*(n){const e=yield iI(n),t=e.eventManager;return t.onListen=xee.bind(null,e.syncEngine),t.onUnlisten=Nee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kee.bind(null,e.syncEngine),t})).apply(this,arguments)}function yU(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,o,a,c,l){const f=new nI({next:y=>{o.enqueueAndForget(()=>MA(s,m));const I=y.docs.has(a);!I&&y.fromCache?l.reject(new Te(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?l.reject(new Te(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new OA(zh(a.path),f,{includeMetadataChanges:!0,ra:!0});return DA(s,m)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}function vU(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,o,a,c,l){const f=new nI({next:y=>{o.enqueueAndForget(()=>MA(s,m)),y.fromCache&&"server"===c.source?l.reject(new Te(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new OA(a,f,{includeMetadataChanges:!0,ra:!0});return DA(s,m)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}function EU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const IU=new Map;function mD(n,e,t){if(!t)throw new Te(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bU(n,e,t,r){if(!0===e&&!0===r)throw new Te(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wU(n){if(!Be.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TU(n){if(Be.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Qe()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sI(n);throw new Te(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CU(n,e){if(e<=0)throw new Te(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class AU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=EU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new lX;switch(r.type){case"firstParty":return new fX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=IU.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),IU.delete(t),r.terminate())}(this),Promise.resolve()}}function DU(n,e,t,r={}){var i;const s=(n=qt(n,wm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ui.MOCK_USER;else{a=(0,Rt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Te(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ui(l)}n._authCredentials=new uX(new wL(a,c))}}class wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class Xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class aa extends wi{constructor(e,t,r){super(e,t,zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Be(e))}withConverter(e){return new aa(this.firestore,e,this._path)}}function SU(n,e,...t){if(n=(0,Rt.m9)(n),mD("collection","path",e),n instanceof wm){const r=en.fromString(e,...t);return TU(r),new aa(n,null,r)}{if(!(n instanceof Xn||n instanceof aa))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return TU(r),new aa(n.firestore,null,r)}}function oI(n,e,...t){if(n=(0,Rt.m9)(n),1===arguments.length&&(e=CL.newId()),mD("doc","path",e),n instanceof wm){const r=en.fromString(e,...t);return wU(r),new Xn(n,null,new Be(r))}{if(!(n instanceof Xn||n instanceof aa))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return wU(r),new Xn(n.firestore,n instanceof aa?n.converter:null,new Be(r))}}function MU(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),(n instanceof Xn||n instanceof aa)&&(e instanceof Xn||e instanceof aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _D(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),n instanceof wi&&e instanceof wi&&n.firestore===e.firestore&&nm(n._query,e._query)&&n.converter===e.converter}class gte{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new aA(this,"async_queue_retry"),this.hu=()=>{const t=XE();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=XE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=XE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new ii;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,_e.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Xc(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,xr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=AA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Qe()}verifyOperationInProgress(){}du(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function yD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class mte{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class On extends wm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gte,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RU(this),this._firestoreClient.terminate()}}function yte(n,e){const t="object"==typeof n?n:(0,vr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,vr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Rt.P0)("firestore");s&&DU(i,...s)}return i}function or(n){return n._firestoreClient||RU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,EU(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new nte(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function PU(n,e,t){const r=new ii;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield rI(n,t),yield lD(n,e),r.resolve()}catch(i){const s=i;if(!pU(s))throw s;Ts("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function xU(n){if(n._initialized||n._terminated)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ca(si.fromBase64String(e))}catch(t){throw new Te(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ca(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ya{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ru{constructor(e){this._methodName=e}}class aI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const Ste=/^__.*__$/;class Mte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kh(e,this.data,t,this.fieldTransforms)}}class OU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class cI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new cI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return dI(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(NU(this.fu)&&Ste.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Rte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Em(e)}Fu(e,t,r,i=!1){return new cI({fu:e,methodName:t,vu:r,path:Qn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pu(n){const e=n._freezeSettings(),t=Em(n._databaseId);return new Rte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lI(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);CD("Data must be an object, but it was:",o,r);const a=LU(r,o);let c,l;if(s.merge)c=new Cs(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Am(e,m,t);if(!o.contains(y))throw new Te(le.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);UU(f,y)||f.push(y)}c=new Cs(f),l=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=o.fieldTransforms;return new Mte(new bi(a),c,l)}class Cm extends Ru{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cm}}function kU(n,e,t){return new cI({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vD extends Ru{_toFieldTransform(e){return new om(e.path,new Gh)}isEqual(e){return e instanceof vD}}class ED extends Ru{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=kU(this,e,!0),r=this.Mu.map(s=>xu(s,t)),i=new Iu(r);return new om(e.path,i)}isEqual(e){return e instanceof ED&&(0,Rt.vZ)(this.Mu,e.Mu)}}class ID extends Ru{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=kU(this,e,!0),r=this.Mu.map(s=>xu(s,t)),i=new bu(r);return new om(e.path,i)}isEqual(e){return e instanceof ID&&(0,Rt.vZ)(this.Mu,e.Mu)}}class bD extends Ru{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Wh(e.serializer,bV(e.serializer,this.xu));return new om(e.path,t)}isEqual(e){return e instanceof bD&&this.xu===e.xu}}function wD(n,e,t,r){const i=n.Fu(1,e,t);CD("Data must be an object, but it was:",i,r);const s=[],o=bi.empty();Jc(r,(c,l)=>{const f=uI(e,c,t);l=(0,Rt.m9)(l);const m=i.Su(f);if(l instanceof Cm)s.push(f);else{const y=xu(l,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Cs(s);return new OU(o,a,i.fieldTransforms)}function TD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Am(e,r,t)],c=[i];if(s.length%2!=0)throw new Te(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Am(e,s[y])),c.push(s[y+1]);const l=[],f=bi.empty();for(let y=a.length-1;y>=0;--y)if(!UU(l,a[y])){const I=a[y];let T=c[y];T=(0,Rt.m9)(T);const N=o.Su(I);if(T instanceof Cm)l.push(I);else{const F=xu(T,N);null!=F&&(l.push(I),f.set(I,F))}}const m=new Cs(l);return new OU(f,m,o.fieldTransforms)}function FU(n,e,t,r=!1){return xu(t,n.Fu(r?4:3,e))}function xu(n,e){if(VU(n=(0,Rt.m9)(n)))return CD("Unsupported field value:",e,n),LU(n,e);if(n instanceof Ru)return function(r,i){if(!NU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=xu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Rt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return bV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=ir.fromDate(r);return{timestampValue:Qh(i.serializer,s)}}if(r instanceof ir){const s=new ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(i.serializer,s)}}if(r instanceof aI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ca)return{bytesValue:HV(i.serializer,r._byteString)};if(r instanceof Xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${sI(r)}`)}(n,e)}function LU(n,e){const t={};return zL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jc(n,(r,i)=>{const s=xu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function VU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof aI||n instanceof ca||n instanceof Xn||n instanceof Ru)}function CD(n,e,t){if(!VU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=sI(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Am(n,e,t){if((e=(0,Rt.m9)(e))instanceof Ya)return e._internalPath;if("string"==typeof e)return uI(n,e);throw dI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Pte=new RegExp("[~\\*/\\[\\]]");function uI(n,e,t){if(e.search(Pte)>=0)throw dI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ya(...e.split("."))._internalPath}catch{throw dI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Te(le.INVALID_ARGUMENT,a+n+c)}function UU(n,e){return n.some(t=>t.isEqual(e))}class Dm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xte extends Dm{data(){return super.data()}}function hI(n,e){return"string"==typeof e?uI(n,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}function BU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AD{}class Sm extends AD{}function dl(n,e,...t){let r=[];e instanceof AD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof _f).length,a=s.filter(c=>c instanceof Mm).length;if(o>1||o>0&&a>0)throw new Te(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mm extends Sm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mm(e,t,r)}_apply(e){const t=this._parse(e);return HU(e._query,t),new wi(e.firestore,e.converter,DC(e._query,t))}_parse(e){const t=Pu(e.firestore);return function(s,o,a,c,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){zU(m,f);const I=[];for(const T of m)I.push($U(c,s,T));y={arrayValue:{values:I}}}else y=$U(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||zU(m,f),y=FU(a,"where",m,"in"===f||"not-in"===f);return tn.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class _f extends AD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _f(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)HU(o,c),o=DC(o,c)}(e._query,t),new wi(e.firestore,e.converter,DC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class DD extends Sm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new DD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new em(s,o)}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ga(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class fI extends Sm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fI(e,t,r)}_apply(e){return new wi(e.firestore,e.converter,PE(e._query,this._limit,this._limitType))}}class pI extends Sm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pI(e,t,r)}_apply(e){const t=jU(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(s=t,new Ga((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class gI extends Sm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gI(e,t,r)}_apply(e){const t=jU(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(s=t,new Ga((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function jU(n,e,t,r){if(t[0]=(0,Rt.m9)(t[0]),t[0]instanceof Dm)return function(s,o,a,c,l){if(!c)throw new Te(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Hh(s))if(m.field.isKeyField())f.push(vu(o,c.key));else{const y=c.data.field(m.field);if(TE(y))throw new Te(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new Te(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new il(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pu(n.firestore);return function(o,a,c,l,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new Te(le.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const N=f[T];if(y[T].field.isKeyField()){if("string"!=typeof N)throw new Te(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!AC(o)&&-1!==N.indexOf("/"))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);const F=o.path.child(en.fromString(N));if(!Be.isDocumentKey(F))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const W=new Be(F);I.push(vu(a,W))}else{const F=FU(c,l,N);I.push(F)}}return new il(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $U(n,e,t){if("string"==typeof(t=(0,Rt.m9)(t))){if(""===t)throw new Te(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AC(e)&&-1!==t.indexOf("/"))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!Be.isDocumentKey(r))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vu(n,new Be(r))}if(t instanceof Xn)return vu(n,t._key);throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sI(t)}.`)}function zU(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SD{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new aI(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qg(e));default:return null}}convertTimestamp(e){const t=Ha(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);rt(n2(r));const i=new el(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function mI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jte extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xa extends Dm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Rm extends Xa{data(e={}){return super.data(e)}}class hl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ou(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rm(this._firestore,this._userDataWriter,r.key,r,new Ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Rm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Rm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:zte(a.type),doc:c,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function GU(n,e){return n instanceof Xa&&e instanceof Xa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hl&&e instanceof hl&&n._firestore===e._firestore&&_D(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fl extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function WU(n,e,t){n=qt(n,Xn);const r=qt(n.firestore,On),i=mI(n.converter,e,t);return yf(r,[lI(Pu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function KU(n,e,t,...r){n=qt(n,Xn);const i=qt(n.firestore,On),s=Pu(i);let o;return o="string"==typeof(e=(0,Rt.m9)(e))||e instanceof Ya?TD(s,"updateDoc",n._key,e,t,r):wD(s,"updateDoc",n._key,e),yf(i,[o.toMutation(n._key,sr.exists(!0))])}function ZU(n,...e){var t,r,i;n=(0,Rt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||yD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(yD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,l,f;if(n instanceof Xn)l=qt(n.firestore,On),f=zh(n._key.path),c={next:m=>{e[o]&&e[o](MD(l,n,m))},error:e[o+1],complete:e[o+2]};else{const m=qt(n,wi);l=qt(m.firestore,On),f=m._query;const y=new fl(l);c={next:I=>{e[o]&&e[o](new hl(l,y,m,I))},error:e[o+1],complete:e[o+2]},BU(n._query)}return function(y,I,T,N){const F=new nI(N),W=new OA(I,F,T);return y.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return DA(yield mf(y),W)})),()=>{F.$a(),y.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return MA(yield mf(y),W)}))}}(or(l),f,a,c)}function yf(n,e){return function(r,i){const s=new ii;return r.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Fee(n,e,t){return jA.apply(this,arguments)}(yield pD(r),i,s)})),s.promise}(or(n),e)}function MD(n,e,t){const r=t.docs.get(e._key),i=new fl(n);return new Xa(n,i,e._key,r,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}const ane={maxAttempts:5};class QU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pu(e)}set(e,t,r){this._verifyNotCommitted();const i=pl(e,this._firestore),s=mI(i.converter,t,r),o=lI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=pl(e,this._firestore);let o;return o="string"==typeof(t=(0,Rt.m9)(t))||t instanceof Ya?TD(this._dataReader,"WriteBatch.update",s._key,t,r,i):wD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pl(e,this._firestore);return this._mutations=this._mutations.concat(new Zh(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pl(n,e){if((n=(0,Rt.m9)(n)).firestore!==e)throw new Te(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cne extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Pu(t)}get(t){const r=pl(t,this._firestore),i=new jte(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Qe();const o=s[0];if(o.isFoundDocument())return new Dm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Dm(this._firestore,i,r._key,null,r.converter);throw Qe()})}set(t,r,i){const s=pl(t,this._firestore),o=mI(s.converter,r,i),a=lI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=pl(t,this._firestore);let a;return a="string"==typeof(r=(0,Rt.m9)(r))||r instanceof Ya?TD(this._dataReader,"Transaction.update",o._key,r,i,s):wD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=pl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pl(e,this._firestore),r=new fl(this._firestore);return super.get(e).then(i=>new Xa(this._firestore,r,t._key,i._document,new Ou(!1,!1),t.converter))}}function PD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eB(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function tB(){if(!function jX(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){kh=vr.SDK_VERSION,(0,vr._registerComponent)(new yE.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new On(new dX(r.getProvider("auth-internal")),new pX(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Te(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(bL,"4.6.3",e),(0,vr.registerVersion)(bL,"4.6.3","esm2017")}();class Pm{constructor(e){this._delegate=e}static fromBase64String(e){return tB(),new Pm(ca.fromBase64String(e))}static fromUint8Array(e){return eB(),new Pm(ca.fromUint8Array(e))}toBase64(){return tB(),this._delegate.toBase64()}toUint8Array(){return eB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xD(n){return function yne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vne{enableIndexedDbPersistence(e,t){return function vte(n,e){xU(n=qt(n,On));const t=or(n);if(t._uninitializedComponentsProvider)throw new Te(le.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new pf;return PU(t,i,new aD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ete(n){xU(n=qt(n,On));const e=or(n);if(e._uninitializedComponentsProvider)throw new Te(le.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new pf;return PU(e,r,new hU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ite(n){if(n._initialized&&!n._terminated)throw new Te(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(i){if(!na.D())return Promise.resolve();const s=i+"main";yield na.delete(s)}),function r(i){return t.apply(this,arguments)})(QC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof el||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){DU(this._delegate,e,t,r)}enableNetwork(){return function wte(n){return function rte(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield gU(n),t=yield mU(n);return e.setNetworkEnabled(!0),function(i){const s=Ve(i);return s.M_.delete(0),Im(s)}(t)}))}(or(n=qt(n,On)))}(this._delegate)}disableNetwork(){return function Tte(n){return function ite(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield gU(n),t=yield mU(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(s){const o=Ve(s);o.M_.add(0),yield sf(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(or(n=qt(n,On)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bte(n){return function(t){const r=new ii;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Bee(n,e){return GA.apply(this,arguments)}(yield pD(t),r)})),r.promise}(or(n=qt(n,On)))}(this._delegate)}onSnapshotsInSync(e){return function Xte(n,e){return function cte(n,e){const t=new nI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield mf(n),s=t,Ve(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield mf(n),s=t,void Ve(i).z_.delete(s);var i,s}))}}(or(n=qt(n,On)),yD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vf(this,SU(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new uo(this,oI(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function pte(n,e){if(n=qt(n,wm),mD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wi(n,null,(r=e,new Ga(en.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lne(n,e,t){n=qt(n,On);const r=Object.assign(Object.assign({},ane),t);return function(s){if(s.maxAttempts<1)throw new Te(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new ii;return s.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const l=yield function _U(n){return iI(n).then(e=>e.datastore)}(s);new tte(s.asyncQueue,l,a,o,c).Xa()})),c.promise}(or(n),i=>e(new cne(n,i)),r)}(this._delegate,t=>e(new rB(this,t)))}batch(){return or(this._delegate),new iB(new QU(this._delegate,e=>yf(this._delegate,e)))}loadBundle(e){return function Cte(n,e){const t=or(n=qt(n,On)),r=new mte;return function lte(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?FV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return fU(f,m);if(f instanceof ArrayBuffer)return fU(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Jee(f,a);var f}(t,Em(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Yee(n,e,t){const r=Ve(n);var i;(i=(0,_e.Z)(function*(o,a,c){try{const l=yield a.getMetadata();if(yield function(T,N){const F=Ve(T),W=Or(N.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",z=>F.$r.getBundleMetadata(z,N.id)).then(z=>!!z&&z.createTime.compareTo(W)>=0)}(o.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=l).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(nU(l));const f=new See(l,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield Qa(o,y.ca,void 0),yield function(T,N){const F=Ve(T);return F.persistence.runTransaction("Save bundle","readwrite",W=>F.$r.saveBundleMetadata(W,N))}(o.localStore,l),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return Ts("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ate(n,e){return function ute(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(r,i){const s=Ve(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield gf(n),e)}))}(or(n=qt(n,On)),e).then(t=>t?new wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class yI extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pm(new ca(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return uo.forKey(t,this.firestore,null)}}class rB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}get(e){const t=ku(e);return this._delegate.get(t).then(r=>new xm(this._firestore,new Xa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ku(e);return r?(PD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ku(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ku(e);return this._delegate.delete(t),this}}class iB{constructor(e){this._delegate=e}set(e,t,r){const i=ku(e);return r?(PD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ku(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ku(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Rm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Om(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Nu(e,new yI(e),t),i.set(t,s)),s}}Nu.INSTANCES=new WeakMap;class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new uo(t,new Xn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new uo(t,new Xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vf(this.firestore,SU(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rt.m9)(e))instanceof Xn&&MU(this._delegate,e)}set(e,t){t=PD("DocumentReference.set",t);try{return t?WU(this._delegate,e,t):WU(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?KU(this._delegate,e):KU(this._delegate,e,t,...r)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Qte(n){return yf(qt(n.firestore,On),[new Zh(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=sB(e),r=oB(e,i=>new xm(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ZU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qte(n){n=qt(n,Xn);const e=qt(n.firestore,On),t=or(e),r=new fl(e);return function ste(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Ve(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Te(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=uf(c,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield gf(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xa(e,r,n._key,i,new Ou(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Gte(n){n=qt(n,Xn);const e=qt(n.firestore,On);return yU(or(e),n._key,{source:"server"}).then(t=>MD(e,n,t))}(this._delegate):function Hte(n){n=qt(n,Xn);const e=qt(n.firestore,On);return yU(or(e),n._key).then(t=>MD(e,n,t))}(this._delegate),t.then(r=>new xm(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function sB(n){for(const e of n)if("object"==typeof e&&!xD(e))return e;return{}}function oB(n,e){var t,r;let i;return i=xD(n[0])?n[0]:xD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new uo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GU(this._delegate,e._delegate)}}class Om extends xm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function cX(n,e){n||Qe()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}where(e,t,r){try{return new rs(this.firestore,dl(this._delegate,function Ote(n,e,t){const r=e,i=hI("where",n);return Mm._create(i,r,t)}(e,t,r)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,dl(this._delegate,function Nte(n,e="asc"){const t=e,r=hI("orderBy",n);return DD._create(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,dl(this._delegate,function kte(n){return CU("limit",n),fI._create("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,dl(this._delegate,function Fte(n){return CU("limitToLast",n),fI._create("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,dl(this._delegate,function Lte(...n){return pI._create("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,dl(this._delegate,function Vte(...n){return pI._create("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,dl(this._delegate,function Ute(...n){return gI._create("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,dl(this._delegate,function Bte(...n){return gI._create("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return _D(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Kte(n){n=qt(n,wi);const e=qt(n.firestore,On),t=or(e),r=new fl(e);return function ote(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,o,a){try{const c=yield KE(s,o,!0),l=new sU(o,c.hs),f=l.da(c.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const l=uf(c,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield gf(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hl(e,r,n,i))}(this._delegate):"server"===e?.source?function Zte(n){n=qt(n,wi);const e=qt(n.firestore,On),t=or(e),r=new fl(e);return vU(t,n._query,{source:"server"}).then(i=>new hl(e,r,n,i))}(this._delegate):function Wte(n){n=qt(n,wi);const e=qt(n.firestore,On),t=or(e),r=new fl(e);return BU(n._query),vU(t,n._query).then(i=>new hl(e,r,n,i))}(this._delegate),t.then(r=>new OD(this.firestore,new hl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sB(e),r=oB(e,i=>new OD(this.firestore,new hl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ZU(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}class Ine{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Om(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Om(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ine(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Om(this._firestore,r))})}isEqual(e){return GU(this._delegate,e._delegate)}}class vf extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new uo(this.firestore,e):null}doc(e){try{return new uo(this.firestore,void 0===e?oI(this._delegate):oI(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function Yte(n,e){const t=qt(n.firestore,On),r=oI(n),i=mI(n.converter,e);return yf(t,[lI(Pu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new uo(this.firestore,t))}isEqual(e){return MU(this._delegate,e._delegate)}withConverter(e){return new vf(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function ku(n){return qt(n,Xn)}class ND{constructor(...e){this._delegate=new Ya(...e)}static documentId(){return new ND(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,Rt.m9)(e))instanceof Ya&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dne(){return new vD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fu(e)}static delete(){const e=function une(){return new Cm("deleteField")}();return e._methodName="FieldValue.delete",new Fu(e)}static arrayUnion(...e){const t=function hne(...n){return new ED("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fu(t)}static arrayRemove(...e){const t=function fne(...n){return new ID("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fu(t)}static increment(e){const t=function pne(n){return new bD("increment",n)}(e);return t._methodName="FieldValue.increment",new Fu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bne={Firestore:nB,GeoPoint:aI,Timestamp:ir,Blob:Pm,Transaction:rB,WriteBatch:iB,DocumentReference:uo,DocumentSnapshot:xm,Query:rs,QueryDocumentSnapshot:Om,QuerySnapshot:OD,CollectionReference:vf,FieldPath:ND,FieldValue:Fu,setLogLevel:function Ene(n){!function aX(n){Qc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function aB(n,e){return function Cne(n,e=MT){return new bt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function kD(n,e){return aB(n,e).pipe(De(t=>({payload:t,type:"query"})))}!function Tne(n){(function wne(n,e){n.INTERNAL.registerComponent(new yE.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bne)))})(n,(e,t)=>new nB(e,t,new vne)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Mo.Z);class cB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=pB(r,t);return new dB(i,s,this.afs)}snapshotChanges(){return function Ane(n,e){return aB(n,e).pipe(Eg(void 0),hC(),De(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return this.snapshotChanges().pipe(De(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(ts)}}function vI(n,e){return kD(n,e).pipe(Eg(void 0),hC(),De(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function lB(n,e,t){return vI(n,t).pipe(Qv((r,i)=>function Dne(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Sne(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),mt(),De(r=>r.map(i=>({type:i.type,payload:i}))))}function FD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dB{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(De(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Eg(void 0),hC(),ws(([r,i])=>i.length>0||!r),De(([,r])=>r),ts)}auditTrail(e){return this.stateChanges(e).pipe(Qv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uB(e);return lB(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return kD(this.query,this.afs.schedulers.outsideAngular).pipe(De(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ts)}get(e){return b(this.query.get(e)).pipe(ts)}add(e){return this.ref.add(e)}doc(e){return new cB(this.ref.doc(e),this.afs)}}class Mne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vI(this.query,this.afs.schedulers.outsideAngular).pipe(De(t=>t.filter(r=>e.indexOf(r.type)>-1)),ws(t=>t.length>0),ts):vI(this.query,this.afs.schedulers.outsideAngular).pipe(ts)}auditTrail(e){return this.stateChanges(e).pipe(Qv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uB(e);return lB(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return kD(this.query,this.afs.schedulers.outsideAngular).pipe(De(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ts)}get(e){return b(this.query.get(e)).pipe(ts)}}const hB=new Ie("angularfire2.enableFirestorePersistence"),fB=new Ie("angularfire2.firestore.persistenceSettings"),Rne=new Ie("angularfire2.firestore.settings"),Pne=new Ie("angularfire2.firestore.use-emulator");function pB(n,e=(t=>t)){return{query:e(n),ref:n}}let Lu=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,f,m,y,I,T,N,F,W,z){this.schedulers=c;const X=gE(t,a,r),ae=f;m&&hL(X,a,y,T,N,F,I,W),[this.firestore,this.persistenceEnabled$]=mE(`${X.name}.firestore`,"AngularFirestore",X.name,()=>{const Se=a.runOutsideAngular(()=>X.firestore());if(s&&Se.settings(s),ae&&Se.useEmulator(...ae),i&&!Nv(o)){const je=()=>{try{return b(Se.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(q){return typeof console<"u"&&console.warn(q),V(!1)}};return[Se,a.runOutsideAngular(je)]}return[Se,V(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=pB(i,r),a=this.schedulers.ngZone.run(()=>s);return new dB(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Mne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cB(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(pe(zg),pe(Hg,8),pe(hB,8),pe(Rne,8),pe(ks),pe(Wt),pe(fu),pe(fB,8),pe(Pne,8),pe(_E,8),pe(oL,8),pe(aL,8),pe(cL,8),pe(lL,8),pe(uL,8),pe(dL,8),pe($g,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xne=(()=>{class n{constructor(){Mo.Z.registerVersion("angularfire",$a.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hB,useValue:!0},{provide:fB,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[Lu]})}return n})(),LD=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}addEvent(t){const r=this.firestore.createId();return this.firestore.collection("Events").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Lu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nm=(()=>{class n{constructor(t){this.firestore=t}getOffers(){return this.firestore.collection("Offers",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(De(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getOffersWithId(){return this.firestore.collection("Offers",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(De(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}addOffer(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Offers").doc(t.id).set(t)}getOffer(t){return this.firestore.collection("Offers").doc(t).valueChanges()}updateOffer(t,r){return console.log("Update Offer: "+t),this.firestore.collection("Offers").doc(t).update(r)}getAllOfferTypes(){return this.firestore.collection("OfferTypes").valueChanges().pipe(De(t=>{const r=t.map(i=>i.OfferType);return Array.from(new Set(r))}))}getOfferById(t){return this.firestore.collection("Offers").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Lu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function One(n,e){1&n&&(k(0,"span",12),L(1,"\u2605"),S())}function Nne(n,e){1&n&&(k(0,"p"),L(1,"Oferta a expirat"),S())}function kne(n,e){1&n&&(k(0,"p"),L(1,"Oferta este valabil\u0101"),S())}function Fne(n,e){if(1&n&&(k(0,"div")(1,"a",13),at(2,"img",14),S(),at(3,"br"),L(4," Facebook"),S()),2&n){const t=Io();ie(1),Ls("href",t.offer.Facebook,Zn)}}function Lne(n,e){if(1&n&&(k(0,"div")(1,"a",13),at(2,"img",15),S(),at(3,"br"),L(4," Instagram"),S()),2&n){const t=Io();ie(1),Zo("href","https://www.instagram.com/",t.offer.Instagram,"",Zn)}}function Vne(n,e){if(1&n&&(k(0,"div")(1,"a",16),at(2,"img",17),S(),at(3,"br"),L(4," Email"),S()),2&n){const t=Io();ie(1),Zo("href","mailto:",t.offer.Email,"",Zn)}}function Une(n,e){if(1&n&&(k(0,"div")(1,"a",13),at(2,"img",18),S(),at(3,"br"),L(4," Website"),S()),2&n){const t=Io();ie(1),Ls("href",t.offer.Website,Zn)}}let gB=(()=>{class n{constructor(t){this.router=t,this.currentImageIndex=1}ngOnInit(){this.offer.Image1||(this.offer.Image1="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image2||(this.offer.Image2="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image3||(this.offer.Image3="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image4||(this.offer.Image4="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image5||(this.offer.Image5="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.startImageCarousel()}startImageCarousel(){setInterval(()=>{this.currentImageIndex=this.currentImageIndex%5+1},3e3)}nextImage(){this.currentImageIndex=this.currentImageIndex%5+1}prevImage(){this.currentImageIndex=(this.currentImageIndex-2+5)%5+1}navigateToDetails(){console.log("Navigating to details:",this.offer.id),this.router.navigate(["/offers",this.offer.id])}static#e=this.\u0275fac=function(r){return new(r||n)(de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-offer-card"]],inputs:{offer:"offer"},decls:56,vars:21,consts:[[1,"offer-card"],[1,"carousel"],[1,"prev",3,"click"],[1,"next",3,"click"],[1,"image-container"],[3,"src","alt"],[1,"offer-details"],["class","sponsor-icon",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"offer-footer"],[1,"social-icons"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"button",2),gt("click",function(){return i.prevImage()}),L(3,"\u276e"),S(),k(4,"button",3),gt("click",function(){return i.nextImage()}),L(5,"\u276f"),S(),k(6,"div",4),at(7,"img",5),S()(),k(8,"div",6)(9,"h3"),L(10),S(),vn(11,One,2,0,"span",7),k(12,"p")(13,"strong"),L(14,"Compania:"),S(),L(15),S(),k(16,"p")(17,"strong"),L(18,"Persona de contact:"),S(),L(19),S(),at(20,"hr"),k(21,"p")(22,"strong"),L(23,"Numar de Tel:"),S(),L(24),S(),k(25,"p")(26,"strong"),L(27,"Locatie:"),S(),L(28),S(),k(29,"p")(30,"strong"),L(31,"Descriiere:"),S(),L(32),S(),k(33,"p")(34,"strong"),L(35,"Pret:"),S(),L(36),S(),k(37,"p")(38,"strong"),L(39,"Tip de ofert\u0101:"),S(),L(40),S(),k(41,"p")(42,"strong"),L(43,"Creata pe data de:"),S(),L(44),_h(45,"date"),S(),vn(46,Nne,2,0,"p",8),vn(47,kne,2,0,"p",8),k(48,"button",9),gt("click",function(){return i.navigateToDetails()}),L(49,"View Details"),S()(),k(50,"div",10)(51,"div",11),vn(52,Fne,5,1,"div",8),vn(53,Lne,5,1,"div",8),vn(54,Vne,5,1,"div",8),vn(55,Une,5,1,"div",8),S()()()),2&r&&(ie(7),Zo("alt","Image ",i.currentImageIndex,""),Ze("src",i.offer["Image"+i.currentImageIndex],Zn),ie(3),Je(i.offer.Title),ie(1),Ze("ngIf",i.offer.Community_Sponsor),ie(4),Rr(" ",i.offer.Company_Name,""),ie(4),Rr(" ",i.offer.Contact_Name,""),ie(5),Rr(" ",i.offer.Phone_Number,""),ie(4),Rr(" ",i.offer.Location,""),ie(4),Je(i.offer.Description),ie(4),Je(i.offer.Price),ie(4),Je(i.offer.OfferType),ie(4),Rr(" ",ag(45,18,i.offer.Date_Created,"shortDate"),""),ie(2),Ze("ngIf",i.offer.Filled),ie(1),Ze("ngIf",!i.offer.Filled),ie(5),Ze("ngIf",i.offer.Facebook),ie(1),Ze("ngIf",i.offer.Instagram),ie(1),Ze("ngIf",i.offer.Email),ie(1),Ze("ngIf",i.offer.Website))},dependencies:[pg,gg],styles:[".offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.image-container[_ngcontent-%COMP%]{width:400px;height:250px;overflow:hidden;display:flex;justify-content:center;align-items:center}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}"]})}return n})();function Bne(n,e){1&n&&(k(0,"div",23)(1,"span",24),L(2,"Sponsor al Comunitatii"),S(),k(3,"span",25),L(4,"\u2605"),S()())}function jne(n,e){if(1&n&&(k(0,"div",15)(1,"div",16)(2,"div",17),L(3),S(),k(4,"div",18),at(5,"img",19),S(),k(6,"div",20),L(7),S(),k(8,"div",20),L(9),S(),k(10,"div",20),L(11),S(),k(12,"div",20),L(13),S(),k(14,"div",20)(15,"a",21),L(16),S()(),k(17,"div",20)(18,"a",21),L(19),S()(),k(20,"div",20),L(21),S()(),vn(22,Bne,5,0,"div",22),S()),2&n){const t=e.$implicit;ie(3),Je(t.Name),ie(2),Ls("src",t.Poster_Image,Zn),ie(2),Je(t.Location),ie(2),Je(t.Event_date),ie(2),Je(t.Price),ie(2),Je(t.Phone_Number),ie(2),Zo("href","mailto:",t.Contact,"",Zn),ie(1),Je(t.Contact),ie(2),Ls("href",t.Website,Zn),ie(1),Je(t.Website),ie(2),Je(t.Description),ie(1),Ze("ngIf",t.Community_Sponsor)}}function $ne(n,e){1&n&&at(0,"app-offer-card",26),2&n&&Ze("offer",e.$implicit)}function zne(n,e){if(1&n&&(k(0,"li",27)(1,"a",28),L(2),S()()),2&n){const t=e.$implicit;ie(1),Ls("href",t.url,Zn),ie(1),Je(t.name)}}let Hne=(()=>{class n{constructor(t,r,i){this.eventService=t,this.offersService=r,this.router=i,this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"},{name:"Biserica Sfintii Trei Ierarhi",url:"http://www.ortodox.org/"}],this.events=[],this.offers=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t}),this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(de(LD),de(Nm),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-home"]],decls:48,vars:3,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"],[3,"offer"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),L(4,"Bine ati venit in comunitatea "),k(5,"a",3),L(6,"Romani in Seattle"),S()()()(),at(7,"p"),k(8,"div",4)(9,"div",5)(10,"h2"),L(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),S(),k(12,"p"),L(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),S()()(),k(14,"div",4)(15,"div",6)(16,"h2"),L(17,"Evenimente"),S(),k(18,"p"),L(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),S()(),k(20,"div",6)(21,"h2"),L(22,"Servicii"),S(),k(23,"p"),L(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),S()(),k(25,"div",6)(26,"h2"),L(27,"Oportunit\u0103\u021bi"),S(),k(28,"p"),L(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),S()(),k(30,"div",6)(31,"h2"),L(32,"Resurse"),S(),k(33,"p"),L(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),S()()(),k(35,"h1"),L(36,"Evenimente"),S(),k(37,"div",7),vn(38,jne,23,12,"div",8),S(),k(39,"h1"),L(40,"Oferte"),S(),k(41,"div",9),vn(42,$ne,1,1,"app-offer-card",10),S(),k(43,"section",11)(44,"h2",12),L(45,"Resurse utile pentru comunitate"),S(),k(46,"ul",13),vn(47,zne,3,2,"li",14),S()()()),2&r&&(ie(38),Ze("ngForOf",i.events),ie(4),Ze("ngForOf",i.offers),ie(5),Ze("ngForOf",i.resourceLinks))},dependencies:[lo,pg,gB],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.offers[_ngcontent-%COMP%], .offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative;text-align:left}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.image-container[_ngcontent-%COMP%]{width:400px;height:250px;overflow:hidden;display:flex;justify-content:center;align-items:center}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}"]})}return n})(),km=(()=>{class n{constructor(t){this.firestore=t,this.servicesCollection=this.firestore.collection("Services")}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(De(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getService(t){return this.firestore.collection("Services").doc(t).valueChanges()}getServiceById(t){return this.firestore.doc(`Services/${t}`).valueChanges().pipe(De(r=>r?{id:t,...r}:void 0))}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe(De(t=>{const r=t.map(i=>i.Name);return Array.from(new Set(r))}))}addServiceWithDate(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Services").doc(t.id).set(t)}addService(t){const r=this.firestore.createId();return t.id=r,this.firestore.collection("Services").doc(r).set(t),this.firestore.doc(`Services/${r}`).valueChanges().pipe(De(i=>i?{id:r,...i}:void 0))}updateService(t,r){return console.log("Update Service: "+t),console.log(r),this.firestore.collection("Services").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Lu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mB=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(Pa),de(Es))};static#t=this.\u0275dir=nt({type:n})}return n})(),Vu=(()=>{class n extends mB{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=nt({type:n,features:[Tn]})}return n})();const la=new Ie("NgValueAccessor"),Gne={provide:la,useExisting:ln(()=>gl),multi:!0},Kne=new Ie("CompositionEventMode");let gl=(()=>{class n extends mB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Wne(){const n=jc()?jc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(Pa),de(Es),de(Kne,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&gt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rr([Gne]),Tn]})}return n})();function ml(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function yB(n){return null!=n&&"number"==typeof n.length}const Ui=new Ie("NgValidators"),_l=new Ie("NgAsyncValidators"),Zne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nr{static min(e){return function vB(n){return e=>{if(ml(e.value)||ml(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function EB(n){return e=>{if(ml(e.value)||ml(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return IB(e)}static requiredTrue(e){return function bB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wB(n){return ml(n.value)||Zne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function TB(n){return e=>ml(e.value)||!yB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function CB(n){return e=>yB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function AB(n){if(!n)return EI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ml(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return xB(e)}static composeAsync(e){return OB(e)}}function IB(n){return ml(n.value)?{required:!0}:null}function EI(n){return null}function DB(n){return null!=n}function SB(n){return Jp(n)?b(n):n}function MB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function RB(n,e){return e.map(t=>t(n))}function PB(n){return n.map(e=>function Qne(n){return!n.validate}(e)?e:t=>e.validate(t))}function xB(n){if(!n)return null;const e=n.filter(DB);return 0==e.length?null:function(t){return MB(RB(t,e))}}function VD(n){return null!=n?xB(PB(n)):null}function OB(n){if(!n)return null;const e=n.filter(DB);return 0==e.length?null:function(t){return xT(RB(t,e).map(SB)).pipe(De(MB))}}function UD(n){return null!=n?OB(PB(n)):null}function NB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kB(n){return n._rawValidators}function FB(n){return n._rawAsyncValidators}function BD(n){return n?Array.isArray(n)?n:[n]:[]}function II(n,e){return Array.isArray(n)?n.includes(e):n===e}function LB(n,e){const t=BD(e);return BD(n).forEach(i=>{II(t,i)||t.push(i)}),t}function VB(n,e){return BD(e).filter(t=>!II(n,t))}class UB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class is extends UB{get formDirective(){return null}get path(){return null}}class yl extends UB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class BB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Uu=(()=>{class n extends BB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(yl,2))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ph("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tn]})}return n})(),Ef=(()=>{class n extends BB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(is,10))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ph("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tn]})}return n})();const Fm="VALID",wI="INVALID",If="PENDING",Lm="DISABLED";function zD(n){return(TI(n)?n.validators:n)||null}function HD(n,e){return(TI(e)?e.asyncValidators:n)||null}function TI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function $B(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new he(1e3,"");if(!r[t])throw new he(1001,"")}function zB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new he(1002,"")})}class CI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fm}get invalid(){return this.status===wI}get pending(){return this.status==If}get disabled(){return this.status===Lm}get enabled(){return this.status!==Lm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VB(e,this._rawAsyncValidators))}hasValidator(e){return II(this._rawValidators,e)}hasAsyncValidator(e){return II(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=If,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fm||this.status===If)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lm:Fm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=If,this._hasOwnPendingAsyncValidator=!0;const t=SB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new mr,this.statusChanges=new mr}_calculateStatus(){return this._allControlsDisabled()?Lm:this.errors?wI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(If)?If:this._anyControlsHaveStatus(wI)?wI:Fm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){TI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ere(n){return Array.isArray(n)?VD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tre(n){return Array.isArray(n)?UD(n):n||null}(this._rawAsyncValidators)}}class Vm extends CI{constructor(e,t,r){super(zD(t),HD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zB(this,0,e),Object.keys(e).forEach(r=>{$B(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class HB extends Vm{}const Bu=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>Um}),Um="always";function AI(n,e){return[...e.path,n]}function Bm(n,e,t=Um){qD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function rre(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qB(n,e)})}(n,e),function sre(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ire(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function nre(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function DI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),MI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function SI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qD(n,e){const t=kB(n);null!==e.validator?n.setValidators(NB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=FB(n);null!==e.asyncValidator?n.setAsyncValidators(NB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();SI(e._rawValidators,i),SI(e._rawAsyncValidators,i)}function MI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=kB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=FB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return SI(e._rawValidators,r),SI(e._rawAsyncValidators,r),t}function qB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GB(n,e){qD(n,e)}function WD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function WB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function KD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===gl?t=s:function cre(n){return Object.getPrototypeOf(n.constructor)===Vu}(s)?r=s:i=s}),i||r||t||null}const ure={provide:is,useExisting:ln(()=>$m)},jm=(()=>Promise.resolve())();let $m=(()=>{class n extends is{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new mr,this.form=new Vm({},VD(t),UD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){jm.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Bm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){jm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){jm.then(()=>{const r=this._findContainer(t.path),i=new Vm({});GB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){jm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){jm.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,WB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ui,10),de(_l,10),de(Bu,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&gt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rr([ure]),Tn]})}return n})();function KB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const zm=class extends CI{constructor(e=null,t,r){super(zD(t),HD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),TI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ZB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},fre={provide:yl,useExisting:ln(()=>Hm)},XB=(()=>Promise.resolve())();let Hm=(()=>{class n extends yl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new zm,this._registered=!1,this.name="",this.update=new mr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){XB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Eh(r);XB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?AI(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(de(is,9),de(Ui,10),de(_l,10),de(la,10),de(vv,8),de(Bu,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rr([fre]),Tn,_s]})}return n})(),bf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),ej=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({})}return n})();const ZD=new Ie("NgModelWithFormControlWarning"),vre={provide:is,useExisting:ln(()=>wf)};let wf=(()=>{class n extends is{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new mr,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(MI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Bm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){DI(t.control||null,t,!1),function lre(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,WB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(DI(r||null,t),(n=>n instanceof zm)(i)&&(Bm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);GB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ore(n,e){return MI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qD(this.form,this),this._oldForm&&MI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ui,10),de(_l,10),de(Bu,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&gt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rr([vre]),Tn,_s]})}return n})();const bre={provide:yl,useExisting:ln(()=>qm)};let qm=(()=>{class n extends yl{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new mr,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KD(0,s)}ngOnChanges(t){this._added||this._setUpControl(),WD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return AI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(de(is,13),de(Ui,10),de(_l,10),de(la,10),de(ZD,8))};static#n=this.\u0275dir=nt({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[rr([bre]),Tn,_s]})}return n})();const wre={provide:la,useExisting:ln(()=>ju),multi:!0};function sj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ju=(()=>{class n extends Vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=sj(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Tre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&gt("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[rr([wre]),Tn]})}return n})(),Gm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(sj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(de(Es),de(Pa),de(ju,9))};static#t=this.\u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Cre={provide:la,useExisting:ln(()=>XD),multi:!0};function oj(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let XD=(()=>{class n extends Vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Are(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&gt("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[rr([Cre]),Tn]})}return n})(),Wm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(oj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(oj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(de(Es),de(Pa),de(XD,9))};static#t=this.\u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),$u=(()=>{class n{constructor(){this._validator=EI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):EI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,features:[_s]})}return n})();const Mre={provide:Ui,useExisting:ln(()=>vl),multi:!0};let vl=(()=>{class n extends $u{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Eh,this.createValidator=t=>IB}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Ko("required",i._enabled?"":null)},inputs:{required:"required"},features:[rr([Mre]),Tn]})}return n})(),mj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[ej]})}return n})();class _j extends CI{constructor(e,t,r){super(zD(t),HD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zB(this,0,e),e.forEach((r,i)=>{$B(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function yj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let RI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return yj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Vm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new HB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(yj(r)?s=r:(s.validators=r,s.asyncValidators=i),new zm(t,{...s,nonNullable:!0})):new zm(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new _j(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof zm||t instanceof CI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Bu,useValue:t.callSetDisabledState??Um}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[mj]})}return n})(),Fre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Bu,useValue:t.callSetDisabledState??Um}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[mj]})}return n})();function vj(n){return n?/^https?:\/\//i.test(n)?n:`http://${n}`:""}function Lre(n,e){1&n&&(k(0,"span",14),L(1,"\u2605"),S())}function Vre(n,e){if(1&n&&(k(0,"div")(1,"a",15),at(2,"img",16),S(),at(3,"br"),L(4," Facebook"),S()),2&n){const t=Io();ie(1),Ls("href",t.svc.Facebook,Zn)}}function Ure(n,e){if(1&n&&(k(0,"div")(1,"a",15),at(2,"img",17),S(),at(3,"br"),L(4," Instagram"),S()),2&n){const t=Io();ie(1),Zo("href","https://www.instagram.com/",t.svc.Instagram,"",Zn)}}function Bre(n,e){if(1&n&&(k(0,"div")(1,"a",18),at(2,"img",19),S(),at(3,"br"),L(4," Email"),S()),2&n){const t=Io();ie(1),Zo("href","mailto:",t.svc.Email,"",Zn)}}function jre(n,e){if(1&n&&(k(0,"div")(1,"a",15),at(2,"img",20),S(),at(3,"br"),L(4," Website"),S()),2&n){const t=Io();ie(1),Ls("href",t.svc.Website,Zn)}}let $re=(()=>{class n{constructor(t){this.router=t}ngOnInit(){(void 0===this.svc.Image||""==this.svc.Image)&&(this.svc.Image="https://firebasestorage.googleapis.com/v0/b/romaniinseattle.appspot.com/o/serviceImages%2FdafaultImage.jpg?alt=media&token=3b0787df-12f0-444a-a426-013843534f1e"),this.svc.Website=vj(this.svc.Website)}viewDetails(){this.router.navigate(["/services",this.svc.id])}static#e=this.\u0275fac=function(r){return new(r||n)(de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-service-card"]],inputs:{svc:"svc"},decls:23,vars:11,consts:[[1,"service-card"],[1,"service-card-image-container"],[1,"service-card-image",3,"src","alt"],[1,"service-card-content"],[1,"card-header"],[1,"card-title"],["class","sponsor-icon",4,"ngIf"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-description"],[3,"click"],[1,"card-footer"],[1,"social-icons"],[4,"ngIf"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1),at(2,"img",2),S(),k(3,"div",3)(4,"div",4)(5,"div",5),L(6),vn(7,Lre,2,0,"span",6),S(),k(8,"div",7),L(9),S(),k(10,"div",8),L(11),S(),k(12,"div",9),L(13),S(),k(14,"div")(15,"button",10),gt("click",function(){return i.viewDetails()}),L(16,"View Details"),S()()(),k(17,"div",11)(18,"div",12),vn(19,Vre,5,1,"div",13),vn(20,Ure,5,1,"div",13),vn(21,Bre,5,1,"div",13),vn(22,jre,5,1,"div",13),S()()()()),2&r&&(ie(2),Ls("alt",i.svc.Name),Ze("src",i.svc.Image,Zn),ie(4),Je(i.svc.Name),ie(1),Ze("ngIf",i.svc.Community_Sponsor),ie(2),Je(i.svc.Service_Type),ie(2),Je(i.svc.Phone_Number),ie(2),Je(i.svc.Description),ie(6),Ze("ngIf",i.svc.Facebook),ie(1),Ze("ngIf",i.svc.Instagram),ie(1),Ze("ngIf",i.svc.Email),ie(1),Ze("ngIf",i.svc.Website))},dependencies:[pg],styles:[".service-card[_ngcontent-%COMP%]{background-color:transparent;width:400px;min-height:550px;display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;box-shadow:0 4px 8px #00000080;margin:10px;padding:40px;box-sizing:border-box;position:relative}.service-card-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.service-card-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #ddd}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold;font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:1rem;color:#666;margin-top:4px}.card-description[_ngcontent-%COMP%]{text-align:left;font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;color:#666;margin-top:4px;overflow:hidden;-webkit-box-orient:vertical;display:block;display:-webkit-box;overflow:hidden!important;text-overflow:ellipsis;-webkit-line-clamp:4}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.service-card-front[_ngcontent-%COMP%]{background-color:#fff;color:#000}.service-card-content[_ngcontent-%COMP%]{padding:0}.service-date[_ngcontent-%COMP%]{font-size:12px;color:#f1c40f}.service-footer[_ngcontent-%COMP%]{margin-top:10px}.featured[_ngcontent-%COMP%]{font-weight:700;color:#f39c12}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}#browser-icon[_ngcontent-%COMP%]{fill:red;stroke:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}"]})}return n})();function zre(n,e){if(1&n&&(k(0,"option",14),L(1),S()),2&n){const t=e.$implicit;Ze("value",t),ie(1),Je(t)}}function Hre(n,e){1&n&&at(0,"app-service-card",15),2&n&&Ze("svc",e.$implicit)}let qre=(()=>{class n{constructor(t,r,i){this.servicesService=t,this.route=r,this.router=i,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedServiceType=t.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}handleChange(t){const{target:r}=t;return r&&console.log(r.value),r.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(t){console.log("Filter changed:",t),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:t},queryParamsHandling:"merge"}),this.filterServices(t)}filterServices(t){console.log("Filter Serices: "+t),this.fetchServiceTypes(),t&&""!==t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(t=>t.Service_Type))]}shareLink(){const r=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(r?"?"+r:"")).then(()=>{alert("Link copied to clipboard!")},s=>{console.error("Could not copy text: ",s)})}static#e=this.\u0275fac=function(r){return new(r||n)(de(km),de(Do),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],[3,"svc",4,"ngFor","ngForOf"],[3,"value"],[3,"svc"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1"),L(3,"Lista de Servicii"),S()(),k(4,"div",2)(5,"h2"),L(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),S()()(),k(7,"div",3)(8,"div",4)(9,"label",5),L(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),S()(),k(11,"div",4)(12,"select",6),gt("change",function(o){return i.onFilterChange(i.handleChange(o))})("ngModelChange",function(o){return i.selectedServiceType=o}),k(13,"option",7),L(14,"Toate serviciile"),S(),vn(15,zre,2,2,"option",8),S()(),k(16,"div",4)(17,"button",9),gt("click",function(){return i.navigateToAddService()}),L(18,"Adaugati un Serviciu"),S()(),k(19,"button",10),gt("click",function(){return i.shareLink()}),at(20,"i",11),L(21," Share "),S()(),k(22,"div",12),vn(23,Hre,1,1,"app-service-card",13),S()),2&r&&(ie(12),Ze("ngModel",i.selectedServiceType),ie(3),Ze("ngForOf",i.serviceTypes),ie(8),Ze("ngForOf",i.filteredServices))},dependencies:[lo,Gm,Wm,ju,Uu,Hm,$re],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}"]})}return n})(),Gre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-rules"]],decls:32,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","#",1,"cta-button"]],template:function(r,i){1&r&&(k(0,"div",0),at(1,"div",1),k(2,"div",2)(3,"h1"),L(4,"Regulile \u0219i Reglement\u0103rile"),S(),k(5,"p"),L(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),S(),k(7,"a",3),L(8,"Get Started"),S()()(),k(9,"h2"),L(10,"Regulile \u0219i Reglement\u0103rile"),S(),k(11,"ul")(12,"li"),L(13,"Nu este permis\u0103 nicio form\u0103 de publicitate."),S(),k(14,"li"),L(15,"Respecta\u021bi to\u021bi membrii."),S(),k(16,"li"),L(17,"F\u0103r\u0103 spam."),S(),k(18,"li"),L(19,"F\u0103r\u0103 limbaj ofensator."),S(),k(20,"li"),L(21,"R\u0103m\xe2ne\u021bi la subiect."),S(),k(22,"li"),L(23,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),S(),k(24,"li"),L(25,"Folosi\u021bi un limbaj adecvat."),S(),k(26,"li"),L(27,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),S(),k(28,"li"),L(29,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),S()(),k(30,"p"),L(31,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),S())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(http://source.unsplash.com/800x600/?Seattle) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:#f60;border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}"]})}return n})();function Wre(n,e){1&n&&(k(0,"div",16)(1,"span",17),L(2,"Event Expired"),S()())}function Kre(n,e){1&n&&(k(0,"div",18)(1,"span",19),L(2,"Sponsor al Comunitatii"),S(),k(3,"span",20),L(4,"\u2605"),S()())}function Zre(n,e){if(1&n&&(k(0,"div",7)(1,"div",8)(2,"div",9),L(3),S(),k(4,"div",10),at(5,"img",11),S(),k(6,"div",12),L(7),S(),k(8,"div",12),L(9),S(),k(10,"div",12),L(11),S(),k(12,"div",12),L(13),S(),k(14,"div",12)(15,"a",13),L(16),S()(),k(17,"div",12)(18,"a",13),L(19),S()(),k(20,"div",12),L(21),S(),vn(22,Wre,3,0,"div",14),S(),vn(23,Kre,5,0,"div",15),S()),2&n){const t=e.$implicit;ie(3),Je(t.Name),ie(2),Ls("src",t.Poster_Image,Zn),ie(2),Je(t.Location),ie(2),Je(t.Event_date),ie(2),Je(t.Price),ie(2),Je(t.Phone_Number),ie(2),Zo("href","mailto:",t.Contact,"",Zn),ie(1),Je(t.Contact),ie(2),Ls("href",t.Website,Zn),ie(1),Je(t.Website),ie(2),Je(t.Description),ie(1),Ze("ngIf",t.Expired),ie(1),Ze("ngIf",t.Community_Sponsor)}}let Qre=(()=>{class n{constructor(t,r){this.eventService=t,this.router=r,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(de(LD),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-expired",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"card-expired"],[1,""],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1"),L(3,"Lista de Evenimente"),S()(),k(4,"div",2)(5,"h2"),L(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),S()()(),k(7,"div",3)(8,"button",4),gt("click",function(){return i.navigateToAddEvent()}),L(9,"Adaugati un Eveniment"),S()(),k(10,"div",5),vn(11,Zre,24,13,"div",6),S()),2&r&&(ie(11),Ze("ngForOf",i.events))},dependencies:[lo,pg],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();function Yre(n,e){1&n&&at(0,"app-offer-card",7),2&n&&Ze("offer",e.$implicit)}let Xre=(()=>{class n{constructor(t,r){this.offersService=t,this.router=r,this.offers=[]}ngOnInit(){this.offersService.getOffersWithId().subscribe(t=>{console.log(t),this.offers=t})}navigateToAddOffer(){this.router.navigate(["/add-offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(de(Nm),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-offers"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[3,"offer"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1"),L(3,"De toate pentru to\u021bi"),S()(),k(4,"div",2)(5,"h2"),L(6,"Descoperi\u021bi oferte de membrii comunit\u0103\u021bii"),S()()(),k(7,"div",3)(8,"button",4),gt("click",function(){return i.navigateToAddOffer()}),L(9,"Adaugati oferte"),S()(),k(10,"div",5),vn(11,Yre,1,1,"app-offer-card",6),S()),2&r&&(ie(11),Ze("ngForOf",i.offers))},dependencies:[lo,gB],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-offer-container[_ngcontent-%COMP%], .add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offer-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offers-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.offer-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.offer-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();class Jre{constructor(){this.Name="",this.Phone_Number="",this.Email="",this.Description="",this.Website="",this.Facebook="",this.Instagram="",this.Date_Created="",this.Image="",this.Approved=!1}}class Ej extends Jre{constructor(){super(...arguments),this.id=""}}const Ij="firebasestorage.googleapis.com",bj="storageBucket";class pr extends Rt.ZR{constructor(e,t,r=0){super(JD(e),`Firebase Storage: ${t} (${JD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return JD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ar=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ar||{});function JD(n){return"storage/"+n}function eS(){return new pr(ar.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wj(){return new pr(ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Tj(){return new pr(ar.CANCELED,"User canceled the upload/download.")}function Cj(){return new pr(ar.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tf(n){return new pr(ar.INVALID_ARGUMENT,n)}function Aj(){return new pr(ar.APP_DELETED,"The Firebase app was deleted.")}function Dj(n){return new pr(ar.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Km(n,e){return new pr(ar.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Zm(n){throw new pr(ar.INTERNAL_ERROR,"Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function lie(n){return new pr(ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(ae){ae.path_=decodeURIComponent(ae.path)}const m=t.replace(/[.]/g,"\\."),X=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ae){"/"===ae.path.charAt(ae.path.length-1)&&(ae.path_=ae.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===Ij?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let ae=0;ae<X.length;ae++){const Se=X[ae],je=Se.regex.exec(e);if(je){let B=je[Se.indices.path];B||(B=""),r=new Bi(je[Se.indices.bucket],B),Se.postModify(r);break}}if(null==r)throw function cie(n){return new pr(ar.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class pie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PI(n){return"string"==typeof n||n instanceof String}function Sj(n){return tS()&&n instanceof Blob}function tS(){return typeof Blob<"u"}function nS(n,e,t,r){if(r<e)throw Tf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Tf(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ja(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Mj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Cf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Cf||{});function Rj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Eie{constructor(e,t,r,i,s,o,a,c,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function _ie(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=eS();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?Aj():Tj():wj())};this.canceled_?t(0,new xI(!1,null,!0)):this.backoffId_=function gie(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function f(...F){l||(l=!0,e.apply(null,F))}function m(F){i=setTimeout(()=>{i=null,n(I,c())},F)}function y(){s&&clearTimeout(s)}function I(F,...W){if(l)return void y();if(F)return y(),void f.call(null,F,...W);if(c()||o)return y(),void f.call(null,F,...W);let X;r<64&&(r*=2),1===a?(a=2,X=0):X=1e3*(r+Math.random()),m(X)}let T=!1;function N(F){T||(T=!0,y(),!l&&(null!==i?(F||(a=2),clearTimeout(i),m(0)):F||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}((r,i)=>{if(i)return void r(!1,new xI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Cf.NO_ERROR,c=s.getStatus();if(!a||Rj(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Cf.ABORT;return void r(!1,new xI(!1,null,f))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new xI(l,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Die(...n){const e=function Aie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(tS())return new Blob(n);throw new pr(ar.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rS{constructor(e,t){this.data=e,this.contentType=t||null}}function iS(n,e){switch(n){case js.RAW:return new rS(Pj(e));case js.BASE64:case js.BASE64URL:return new rS(xj(n,e));case js.DATA_URL:return new rS(function Pie(n){const e=new Oj(n);return e.base64?xj(js.BASE64,e.rest):function Rie(n){let e;try{e=decodeURIComponent(n)}catch{throw Km(js.DATA_URL,"Malformed data URL.")}return Pj(e)}(e.rest)}(e),function xie(n){return new Oj(n).contentType}(e))}throw eS()}function Pj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function xj(n,e){switch(n){case js.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Km(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Km(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Mie(n){if(typeof atob>"u")throw function fie(n){return new pr(ar.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Km(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Oj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Km(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Oie(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ua{constructor(e,t){let r=0,i="";Sj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Sj(this.data_)){const i=function Sie(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ua(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ua(r,!0)}}static getBlob(...e){if(tS()){const t=e.map(r=>r instanceof ua?r.data_:r);return new ua(Die.apply(null,t))}{const t=e.map(o=>PI(o)?iS(js.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ua(i,!0)}}uploadData(){return this.data_}}function sS(n){let e;try{e=JSON.parse(n)}catch{return null}return function vie(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Nj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Fie(n,e){return e}class ss{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Fie}}let OI=null;function Qm(){if(OI)return OI;const n=[];n.push(new ss("bucket")),n.push(new ss("generation")),n.push(new ss("metageneration")),n.push(new ss("name","fullPath",!0));const t=new ss("name");t.xform=function e(s,o){return function Lie(n){return!PI(n)||n.length<2?n:Nj(n)}(o)},n.push(t);const i=new ss("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new ss("timeCreated")),n.push(new ss("updated")),n.push(new ss("md5Hash",null,!0)),n.push(new ss("cacheControl",null,!0)),n.push(new ss("contentDisposition",null,!0)),n.push(new ss("contentEncoding",null,!0)),n.push(new ss("contentLanguage",null,!0)),n.push(new ss("contentType",null,!0)),n.push(new ss("metadata","customMetadata",!0)),OI=n,OI}function kj(n,e,t){const r=sS(e);return null===r?null:function Uie(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Vie(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function oS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Fj="prefixes",Lj="items";class da{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ha(n){if(!n)throw eS()}function NI(n,e){return function t(r,i){const s=kj(n,i,e);return ha(null!==s),s}}function Af(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oie(){return new pr(ar.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sie(){return new pr(ar.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function iie(n){return new pr(ar.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aie(n){return new pr(ar.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ym(n){const e=Af(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function rie(n){return new pr(ar.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function Vj(n,e,t){const i=Ja(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new da(i,"GET",NI(n,t),o);return a.errorHandler=Ym(e),a}function qie(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Ja(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new da(a,"GET",function zie(n,e){return function t(r,i){const s=function $ie(n,e,t){const r=sS(t);return null===r?null:function jie(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Fj])for(const i of t[Fj]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Bi(e,s));r.prefixes.push(o)}if(t[Lj])for(const i of t[Lj]){const s=n._makeStorageReference(new Bi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return ha(null!==s),s}}(n,e.bucket),l);return f.urlParams=s,f.errorHandler=Af(e),f}function Bj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Zie(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function aS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ha(!1)}return ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Jie={STATE_CHANGED:"state_changed"},os={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cS(n){switch(n){case"running":case"pausing":case"canceling":return os.RUNNING;case"paused":return os.PAUSED;case"success":return os.SUCCESS;case"canceled":return os.CANCELED;default:return os.ERROR}}class ese{constructor(e,t,r){if(function yie(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Df(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let zj=null;class tse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Zm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class nse extends tse{initXhr(){this.xhr_.responseType="text"}}function Ro(){return zj?zj():new nse}class Hj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Qm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ar.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Rj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=wj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ar.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Qie(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=Bj(e,r,i),a={name:o.fullPath},c=Ja(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=oS(o,t),T=new da(c,"POST",function I(N){let F;aS(N);try{F=N.getResponseHeader("X-Goog-Upload-URL")}catch{ha(!1)}return ha(PI(F)),F},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=Af(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Yie(n,e,t,r){const c=new da(t,"POST",function s(l){const f=aS(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ha(!1)}m||ha(!1);const y=Number(m);return ha(!isNaN(y)),new kI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Af(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ro,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Xie(n,e,t,r,i,s,o,a){const c=new kI(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function die(){return new pr(ar.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=c.total-c.current;let f=l;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":l===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(m,m+f);if(null===N)throw Cj();const X=new da(t,"POST",function F(ae,Se){const je=aS(ae,["active","final"]),q=c.current+f,B=r.size();let $;return $="final"===je?NI(e,s)(ae,Se):null,new kI(q,B,"final"===je,$)},e.maxUploadRetryTime);return X.headers=T,X.body=N.uploadData(),X.progressCallback=a||null,X.errorHandler=Af(n),X}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Ro,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Vj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let X="";for(let ae=0;ae<2;ae++)X+=Math.random().toString().slice(2);return X}();o["Content-Type"]="multipart/related; boundary="+c;const l=Bj(e,r,i),f=oS(l,t),I=ua.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw Cj();const T={name:l.fullPath},N=Ja(s,n.host,n._protocol),W=n.maxUploadRetryTime,z=new da(N,"POST",NI(n,t),W);return z.urlParams=T,z.headers=o,z.body=I.uploadData(),z.errorHandler=Af(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Tj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new ese(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cS(this._state)){case os.SUCCESS:Df(this._resolve.bind(null,this.snapshot))();break;case os.CANCELED:case os.ERROR:Df(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cS(this._state)){case os.RUNNING:case os.PAUSED:e.next&&Df(e.next.bind(e,this.snapshot))();break;case os.SUCCESS:e.complete&&Df(e.complete.bind(e))();break;default:e.error&&Df(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class zu{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zu(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nj(this._location.path)}get storage(){return this._service}get parent(){const e=function Nie(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new zu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Dj(e)}}function Gj(n,e,t){return lS.apply(this,arguments)}function lS(){return(lS=(0,_e.Z)(function*(n,e,t){const i=yield Wj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Gj(n,e,i.nextPageToken))})).apply(this,arguments)}function Wj(n,e){null!=e&&"number"==typeof e.maxResults&&nS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qie(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ro)}function pse(n){n._throwIfRoot("getDownloadURL");const e=function Gie(n,e,t){const i=Ja(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new da(i,"GET",function Hie(n,e){return function t(r,i){const s=kj(n,i,e);return ha(null!==s),function Bie(n,e,t,r){const i=sS(e);if(null===i||!PI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const m=n.fullPath;return Ja("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+Mj({alt:"media",token:l})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Ym(e),a}(n.storage,n._location,Qm());return n.storage.makeRequestWithTokens(e,Ro).then(t=>{if(null===t)throw function hie(){return new pr(ar.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Kj(n,e){const t=function kie(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new zu(n.storage,r)}function Zj(n,e){if(n instanceof uS){const t=n;if(null==t._bucket)throw function uie(){return new pr(ar.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bj+"' property when initializing the app?")}();const r=new zu(t,t._bucket);return null!=e?Zj(r,e):r}return void 0!==e?Kj(n,e):n}function yse(n,e){if(e&&function mse(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof uS)return function _se(n,e){return new zu(n,e)}(n,e);throw Tf("To use ref(service, url), the first argument must be a Storage instance.")}return Zj(n,e)}function Qj(n,e){const t=e?.[bj];return null==t?null:Bi.makeFromBucketSpec(t,n)}class uS{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Ij,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bi.makeFromBucketSpec(i,this._host):Qj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):Qj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zu(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new pie(Aj());{const o=function Cie(n,e,t,r,i,s,o=!0){const a=Mj(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return function wie(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function Iie(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function bie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function Tie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new Eie(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Yj="@firebase/storage",Jj="storage";function e$(n,e){return yse(n=(0,Rt.m9)(n),e)}function Sse(n=(0,vr.getApp)(),e){n=(0,Rt.m9)(n);const r=(0,vr._getProvider)(n,Jj).getImmediate({identifier:e}),i=(0,Rt.P0)("storage");return i&&t$(r,...i),r}function t$(n,e,t,r={}){!function vse(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Rt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Mse(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new uS(t,r,i,e,vr.SDK_VERSION)}!function Rse(){(0,vr._registerComponent)(new yE.wA(Jj,Mse,"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(Yj,"0.12.5",""),(0,vr.registerVersion)(Yj,"0.12.5","esm2017")}();class FI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class n${constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new FI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new FI(o,this,this._ref)):{next:t.next?o=>t.next(new FI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class r${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ec(e,this._service))}get items(){return this._delegate.items.map(e=>new ec(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ec{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Dse(n,e){return Kj(n,e)}(this._delegate,e);return new ec(t,this.storage)}get root(){return new ec(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ec(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new n$(function Ese(n,e,t){return function lse(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Hj(n,new ua(e),t)}(n=(0,Rt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=js.RAW,r){this._throwIfRoot("putString");const i=iS(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new n$(new Hj(this._delegate,new ua(i.data,!0),s),this)}listAll(){return function Tse(n){return function dse(n){const e={prefixes:[],items:[]};return Gj(n,e).then(()=>e)}(n=(0,Rt.m9)(n))}(this._delegate).then(e=>new r$(e,this.storage))}list(e){return function wse(n,e){return Wj(n=(0,Rt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new r$(t,this.storage))}getMetadata(){return function Ise(n){return function hse(n){n._throwIfRoot("getMetadata");const e=Vj(n.storage,n._location,Qm());return n.storage.makeRequestWithTokens(e,Ro)}(n=(0,Rt.m9)(n))}(this._delegate)}updateMetadata(e){return function bse(n,e){return function fse(n,e){n._throwIfRoot("updateMetadata");const t=function Wie(n,e,t,r){const s=Ja(e.fullServerUrl(),n.host,n._protocol),a=oS(t,r),l=n.maxOperationRetryTime,f=new da(s,"PATCH",NI(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Ym(e),f}(n.storage,n._location,e,Qm());return n.storage.makeRequestWithTokens(t,Ro)}(n=(0,Rt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Cse(n){return pse(n=(0,Rt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ase(n){return function gse(n){n._throwIfRoot("deleteObject");const e=function Kie(n,e){const r=Ja(e.fullServerUrl(),n.host,n._protocol),a=new da(r,"DELETE",function o(c,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Ym(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ro)}(n=(0,Rt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Dj(e)}}class i${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(s$(e))throw Tf("ref() expected a child path but got a URL, use refFromURL instead.");return new ec(e$(this._delegate,e),this)}refFromURL(e){if(!s$(e))throw Tf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw Tf("refFromUrl() expected a valid full URL but got an invalid one.")}return new ec(e$(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){t$(this._delegate,e,t,r)}}function s$(n){return/^[A-Za-z]+:\/\//.test(n)}function Nse(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new i$(t,r)}function o$(n){const e=function Fse(n){return new bt(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(fk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(De(t=>t.bytesTransferred/t.totalBytes*100))}}function LI(n){return{getDownloadURL:()=>V(void 0).pipe(tL,ze(()=>n.getDownloadURL()),ts),getMetadata:()=>V(void 0).pipe(tL,ze(()=>n.getMetadata()),ts),delete:()=>b(n.delete()),child:e=>LI(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>o$(n.put(e,t)),putString:(e,t,r)=>o$(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function kse(n){const e={TaskState:os,TaskEvent:Jie,StringFormat:js,Storage:i$,Reference:ec};n.INTERNAL.registerComponent(new yE.wA("storage-compat",Nse,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Mo.Z);const Lse=new Ie("angularfire2.storageBucket"),Vse=new Ie("angularfire2.storage.maxUploadRetryTime"),Use=new Ie("angularfire2.storage.maxOperationRetryTime"),Bse=new Ie("angularfire2.storage.use-emulator");let a$=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,l,f,m){const y=gE(t,o,r);this.storage=mE(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),c&&I.setMaxUploadRetryTime(c),l&&I.setMaxOperationRetryTime(l),I},[c,l])}ref(t){return LI(this.storage.ref(t))}refFromURL(t){return LI(this.storage.refFromURL(t))}upload(t,r,i){return LI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(pe(zg),pe(Hg,8),pe(Lse,8),pe(ks),pe(Wt),pe(fu),pe(Vse,8),pe(Use,8),pe(Bse,8),pe($g,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),jse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({})}return n})(),$se=(()=>{class n{constructor(){Mo.Z.registerVersion("angularfire",$a.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[a$],imports:[jse]})}return n})(),dS=(()=>{class n{constructor(t){this.storage=t}uploadImage(t,r){const i=`${r}/${t.name}`,s=this.storage.ref(i),o=this.storage.upload(i,t);return new bt(a=>{o.snapshotChanges().pipe(bg(()=>{s.getDownloadURL().subscribe(c=>{a.next(c),a.complete()})})).subscribe()})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(a$))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zse(n,e){if(1&n&&(k(0,"option",26),L(1),S()),2&n){const t=e.$implicit;Ze("value",t),ie(1),Je(t)}}let c$=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.servicesService=r,this.imageUploadService=i,this.router=s,this.serviceTypes=[],this.selectedFile=null,this.serviceObj=new Ej,this.serviceForm=this.fb.group({Name:["",Nr.required],Email:["",[Nr.required,Nr.email]],Phone_Number:[""],Website:[""],Facebook:[""],Instagram:[""],Image:[""],Description:[""],Date_Created:[""],Community_Sponsor:[""],Service_Type:["",Nr.required]})}ngOnInit(){this.fetchServiceTypes()}onFileSelected(t){this.selectedFile=t.target.files[0]}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&(this.serviceObj.Name=this.serviceForm.value.Name,this.serviceObj.Phone_Number=this.serviceForm.value.Phone_Number,this.serviceObj.Service_Type=this.serviceForm.value.Service_Type,this.serviceObj.Community_Sponsor=!1,this.serviceObj.Email=this.serviceForm.value.Email,this.serviceObj.Website=this.serviceForm.value.Website,this.serviceObj.Facebook=this.serviceForm.value.Facebook,this.serviceObj.Instagram=this.serviceForm.value.Instagram,this.serviceObj.Description=this.serviceForm.value.Description,this.serviceObj.Date_Created=this.serviceForm.value.Date_Created,this.serviceObj.Image=this.serviceForm.value.Image,this.selectedFile?this.imageUploadService.uploadImage(this.selectedFile,"serviceImages").subscribe(t=>{this.serviceObj.Image=t,console.log(t),this.saveService()}):this.saveService())}saveService(){this.servicesService.addService({id:this.serviceObj.id,Name:this.serviceObj.Name,Phone_Number:this.serviceObj.Phone_Number,Service_Type:this.serviceObj.Service_Type,Community_Sponsor:!1,Email:this.serviceObj.Email,Website:this.serviceObj.Website,Facebook:this.serviceObj.Facebook,Instagram:this.serviceObj.Instagram,Description:this.serviceObj.Description,Date_Created:this.serviceObj.Date_Created,Image:this.serviceObj.Image,Approved:!1}).subscribe(r=>{console.log("Service added successfully with ID:",r?.id),this.serviceForm.reset(),this.router.navigate(["/services",r?.id])})}static#e=this.\u0275fac=function(r){return new(r||n)(de(RI),de(km),de(dS),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-add-service"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Service_Type",1,"required"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["for","Image"],["type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1"),L(3,"Lista de Servicii"),S()(),k(4,"div",2)(5,"h2"),L(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),S()()(),k(7,"div",3)(8,"form",4),gt("ngSubmit",function(){return i.onSubmit()}),k(9,"div",5)(10,"label",6),L(11,"Nume:"),S(),at(12,"input",7),S(),k(13,"div",5)(14,"label",8),L(15,"Adresa Email:"),S(),at(16,"input",9),S(),k(17,"div",5)(18,"label",10),L(19,"Numar de telefon:"),S(),at(20,"input",11),S(),k(21,"div",5)(22,"label",12),L(23,"Pagina Web:"),S(),at(24,"input",13),S(),k(25,"div",5)(26,"label",14),L(27,"Pagina Facebook:"),S(),at(28,"input",15),S(),k(29,"div",5)(30,"label",16),L(31,"Instagram:(@username)"),S(),at(32,"input",17),S(),k(33,"div",5)(34,"label",18),L(35,"Descriere a serviciile oferite:"),S(),at(36,"textarea",19),S(),k(37,"div",5)(38,"label",20),L(39,"Categoria de serviciului:"),S(),k(40,"select",21),vn(41,zse,2,2,"option",22),S()(),k(42,"div",5)(43,"label",23),L(44,"Categoria de serviciului:"),S(),k(45,"input",24),gt("change",function(o){return i.onFileSelected(o)}),S()(),k(46,"button",25),L(47,"Add Service"),S()()()),2&r&&(ie(8),Ze("formGroup",i.serviceForm),ie(33),Ze("ngForOf",i.serviceTypes),ie(5),Ze("disabled",i.serviceForm.invalid))},dependencies:[lo,bf,Gm,Wm,gl,ju,Uu,Ef,vl,wf,qm],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})(),Hse=(()=>{class n{constructor(t,r){this.fb=t,this.eventsService=r,this.eventForm=this.fb.group({Approved:[""],Community_Sponsor:[""],Contact:[""],Description:["",Nr.required],Event_date:["",Nr.required],Location:["",Nr.required],Name:["",Nr.required],Phone_Number:[""],Poster_Image:["",Nr.required],Price:["",Nr.required],Website:[""]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(r=>{console.error("Error adding event: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(de(RI),de(LD))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-add-event"]],decls:40,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Contact"],["id","Contact","formControlName","Contact","required",""],["for","Poster_Image",1,"required"],["id","Poster_Image","formControlName","Poster_Image","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Event_date",1,"required"],["id","Event_date","type","date","formControlName","Event_date","required",""],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Price",1,"required"],["id","Price","formControlName","Price","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"form",1),gt("ngSubmit",function(){return i.onSubmit()}),k(2,"div",2)(3,"label",3),L(4,"Event Name:"),S(),at(5,"input",4),S(),k(6,"div",2)(7,"label",5),L(8,"Contatct Name:"),S(),at(9,"input",6),S(),k(10,"div",2)(11,"label",7),L(12,"Poster Image:"),S(),at(13,"input",8),S(),k(14,"div",2)(15,"label",9),L(16,"Phone Number:"),S(),at(17,"input",10),S(),k(18,"div",2)(19,"label",11),L(20,"Date:"),S(),at(21,"input",12),S(),k(22,"div",2)(23,"label",13),L(24,"Location:"),S(),at(25,"input",14),S(),k(26,"div",2)(27,"label",15),L(28,"Description:"),S(),at(29,"textarea",16),S(),k(30,"div",2)(31,"label",17),L(32,"Price:"),S(),at(33,"input",18),S(),k(34,"div",2)(35,"label",19),L(36,"Website:"),S(),at(37,"input",20),S(),k(38,"button",21),L(39,"Add Event"),S()()()),2&r&&(ie(1),Ze("formGroup",i.eventForm),ie(37),Ze("disabled",i.eventForm.invalid))},dependencies:[bf,gl,Uu,Ef,vl,wf,qm],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function qse(n,e){if(1&n&&(k(0,"option",28),L(1),S()),2&n){const t=e.$implicit;Ze("value",t),ie(1),Je(t)}}let Gse=(()=>{class n{constructor(t,r,i,s,o){this.fb=t,this.offersService=r,this.firestore=i,this.imageUploadService=s,this.router=o,this.offerTypes=[],this.offer={Title:"",Company_Name:"",Contact_Name:"",Phone_Number:"",Email:"",Description:"",Location:"",Website:"",Filled:!1,Date_Created:(new Date).toISOString(),Price:"",Image1:"",Image2:"",Image3:"",Image4:"",Image5:"",OfferType:"",Facebook:"",Instagram:"",id:"",Community_Sponsor:!1,Approved:!1,ApprovedDate:""},this.selectedFiles=null,this.offerForm=this.fb.group({Title:["",Nr.required],Company_Name:[""],Contact_Name:["",Nr.required],Phone_Number:["",Nr.required],Email:["",[Nr.email]],Location:["",Nr.required],Website:[""],Description:["",Nr.required],Price:[""],Image1:[""],Image2:[""],Image3:[""],Image4:[""],Image5:[""],Filled:!1,Date_Created:[""],ApprovedDate:[""],OfferType:[""],Community_Sponsor:!1})}onFileSelected(t){this.selectedFiles=t.target.files}ngOnInit(){this.offersService.getAllOfferTypes().subscribe(t=>{this.offerTypes=t})}onSubmit(t){var r=this;if(console.log(t),this.selectedFiles&&this.selectedFiles.length>0){const i=[];for(let s=0;s<this.selectedFiles.length;s++){const a=this.imageUploadService.uploadImage(this.selectedFiles[s],"offers");i.push(a)}xT(i).pipe(De(s=>{this.offer.Image1=s[0]||"",this.offer.Image2=s[1]||"",this.offer.Image3=s[2]||"",this.offer.Image4=s[3]||"",this.offer.Image5=s[4]||""}),ze((0,_e.Z)(function*(){return r.saveOffer()}))).subscribe()}else this.saveOffer().subscribe()}saveOffer(){return b(this.firestore.collection("Offers").add(this.offer).then(t=>{console.log("Offer added with ID:",t.id),this.router.navigate(["/offers",t.id])}).catch(t=>{console.error("Error adding offer:",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(de(RI),de(Nm),de(Lu),de(dS),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-add-offers"]],decls:50,vars:11,consts:[[1,"form-container"],[3,"ngSubmit"],["offerForm","ngForm"],[1,"form-group"],["for","Title",1,"required"],["type","text","name","Title","required","","placeholder","Title",3,"ngModel","ngModelChange"],["for","Company_Name"],["type","text","name","Company_Name","required","","placeholder","Company Name",3,"ngModel","ngModelChange"],["for","Contact_Name",1,"required"],["type","text","name","Contact_Name","required","","placeholder","Contact Name",3,"ngModel","ngModelChange"],["for","Phone_Number",1,"required"],["type","text","name","Phone_Number","required","","placeholder","Phone Number",3,"ngModel","ngModelChange"],["for","Email"],["type","email","name","Email","required","","placeholder","Email",3,"ngModel","ngModelChange"],["for","Description",1,"required"],["name","Description","required","","placeholder","Description",3,"ngModel","ngModelChange"],["for","Price"],["type","text","name","Price","required","","placeholder","Price",3,"ngModel","ngModelChange"],["for","Location",1,"required"],["type","text","name","Location","required","","placeholder","Location",3,"ngModel","ngModelChange"],["for","Website"],["type","url","name","Website","placeholder","Website",3,"ngModel","ngModelChange"],["for","OfferType"],["id","OfferType","name","OfferType","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","Images"],["type","file","id","Images","multiple","","accept","image/*",1,"form-control",3,"change"],["type","submit"],[3,"value"]],template:function(r,i){if(1&r){const s=sv();k(0,"div",0)(1,"form",1,2),gt("ngSubmit",function(){Ad(s);const a=function ox(n){return ys(function Nb(){return Et.lFrame.contextLView}(),zt+n)}(2);return Rc(i.onSubmit(a))}),k(3,"div",3)(4,"label",4),L(5,"Offer Title:"),S(),k(6,"input",5),gt("ngModelChange",function(a){return i.offer.Title=a}),S()(),k(7,"div",3)(8,"label",6),L(9,"Numele Companiei:"),S(),k(10,"input",7),gt("ngModelChange",function(a){return i.offer.Company_Name=a}),S()(),k(11,"div",3)(12,"label",8),L(13,"Numele persoanei de contact:"),S(),k(14,"input",9),gt("ngModelChange",function(a){return i.offer.Contact_Name=a}),S()(),k(15,"div",3)(16,"label",10),L(17,"Numar de telfon:"),S(),k(18,"input",11),gt("ngModelChange",function(a){return i.offer.Phone_Number=a}),S()(),k(19,"div",3)(20,"label",12),L(21,"Adresa de Email:"),S(),k(22,"input",13),gt("ngModelChange",function(a){return i.offer.Email=a}),S()(),k(23,"div",3)(24,"label",14),L(25,"Descriiere:"),S(),k(26,"textarea",15),gt("ngModelChange",function(a){return i.offer.Description=a}),S()(),k(27,"div",3)(28,"label",16),L(29,"Pret:"),S(),k(30,"input",17),gt("ngModelChange",function(a){return i.offer.Price=a}),S()(),k(31,"div",3)(32,"label",18),L(33,"Locatie:"),S(),k(34,"input",19),gt("ngModelChange",function(a){return i.offer.Location=a}),S()(),k(35,"div",3)(36,"label",20),L(37,"Website:"),S(),k(38,"input",21),gt("ngModelChange",function(a){return i.offer.Website=a}),S()(),k(39,"div",3)(40,"label",22),L(41,"Tip de oferta"),S(),k(42,"select",23),gt("ngModelChange",function(a){return i.offer.OfferType=a}),vn(43,qse,2,2,"option",24),S()(),k(44,"div",3)(45,"label",25),L(46,"Images"),S(),k(47,"input",26),gt("change",function(a){return i.onFileSelected(a)}),S()(),k(48,"button",27),L(49,"Adauga Oferta"),S()()()}2&r&&(ie(6),Ze("ngModel",i.offer.Title),ie(4),Ze("ngModel",i.offer.Company_Name),ie(4),Ze("ngModel",i.offer.Contact_Name),ie(4),Ze("ngModel",i.offer.Phone_Number),ie(4),Ze("ngModel",i.offer.Email),ie(4),Ze("ngModel",i.offer.Description),ie(4),Ze("ngModel",i.offer.Price),ie(4),Ze("ngModel",i.offer.Location),ie(4),Ze("ngModel",i.offer.Website),ie(4),Ze("ngModel",i.offer.OfferType),ie(1),Ze("ngForOf",i.offerTypes))},dependencies:[lo,bf,Gm,Wm,gl,ju,Uu,Ef,vl,Hm,$m],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function Wse(n,e){if(1&n&&(k(0,"option",26),L(1),S()),2&n){const t=e.$implicit;Ze("value",t),ie(1),Je(t)}}let Kse=(()=>{class n{constructor(t,r,i,s,o){this.fb=t,this.route=r,this.router=i,this.servicesService=s,this.imageUploadService=o,this.serviceId=null,this.serviceTypes=[],this.selectedFile=null,this.serviceForm=this.fb.group({Name:["",Nr.required],Email:["",Nr.email],Phone_Number:["",Nr.required],Website:[""],Facebook:[""],Instagram:[""],Description:["",Nr.required],Service_Type:["",Nr.required],Image:[""]})}onFileSelected(t){this.selectedFile=t.target.files[0]}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{this.serviceForm.patchValue({Name:t?.Name,Email:t?.Email,Phone_Number:t?.Phone_Number,Service_Type:t?.Service_Type,Website:t?.Website,Facebook:t?.Facebook,Instagram:t?.Instagram,Description:t?.Description,Image:t?.Image})}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.serviceId&&(this.serviceForm.value.Facebook=this.serviceForm.value.Facebook||"",this.serviceForm.value.Instagram=this.serviceForm.value.Instagram||"",this.serviceForm.value.Email=this.serviceForm.value.Email||"",this.serviceForm.value.Image=this.serviceForm.value.Image||"https://firebasestorage.googleapis.com/v0/b/romaniinseattle.appspot.com/o/serviceImages%2FdafaultImage.jpg?alt=media&token=3b0787df-12f0-444a-a426-013843534f1e",this.servicesService.updateService(this.serviceId,this.serviceForm.value).then(()=>{console.log("Service updated successfully"),this.router.navigate(["/services"])}).catch(t=>{console.error("Error updating service: ",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(de(RI),de(Do),de(zn),de(km),de(dS))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-edit-services"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Image"],["id","Image","formControlName","Image"],["for","Service_Type"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1"),L(3,"Lista de Servicii"),S()(),k(4,"div",2)(5,"h2"),L(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),S()()(),k(7,"div",3)(8,"form",4),gt("ngSubmit",function(){return i.onSubmit()}),k(9,"div",5)(10,"label",6),L(11,"Nume:"),S(),at(12,"input",7),S(),k(13,"div",5)(14,"label",8),L(15,"Adresa Email:"),S(),at(16,"input",9),S(),k(17,"div",5)(18,"label",10),L(19,"Numar de telefon:"),S(),at(20,"input",11),S(),k(21,"div",5)(22,"label",12),L(23,"Pagina Web:"),S(),at(24,"input",13),S(),k(25,"div",5)(26,"label",14),L(27,"Pagina Facebook:"),S(),at(28,"input",15),S(),k(29,"div",5)(30,"label",16),L(31,"Instagram:"),S(),at(32,"input",17),S(),k(33,"div",5)(34,"label",18),L(35,"Descriere a serviciile oferite:"),S(),at(36,"textarea",19),S(),k(37,"div",5)(38,"label",20),L(39,"Imagine:"),S(),at(40,"input",21),S(),k(41,"div",5)(42,"label",22),L(43,"Categoria de serviciului:"),S(),k(44,"select",23),vn(45,Wse,2,2,"option",24),S()(),k(46,"button",25),L(47,"Salvati Serviciu"),S()()()),2&r&&(ie(8),Ze("formGroup",i.serviceForm),ie(37),Ze("ngForOf",i.serviceTypes),ie(1),Ze("disabled",i.serviceForm.invalid))},dependencies:[lo,bf,Gm,Wm,gl,ju,Uu,Ef,vl,wf,qm],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}"]})}return n})(),Zse=(()=>{class n{constructor(t){this.firestore=t}getAnalytics(){return this.firestore.collection("analytics").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Lu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qse(n,e){if(1&n&&(k(0,"tr")(1,"td"),L(2),S(),k(3,"td"),L(4),_h(5,"json"),S(),k(6,"td"),L(7),_h(8,"date"),S()()),2&n){const t=e.$implicit;ie(2),Je(t.page_path),ie(2),Je(function K1(n,e,t){const r=n+zt,i=we(),s=ys(i,r);return cg(i,r)?z1(i,Jr(),e,s.transform,t,s):s.transform(t)}(5,3,t.query_params)),ie(3),Je(ag(8,5,t.timestamp,"medium"))}}let l$=(()=>{class n{constructor(t){this.analyticsService=t,this.analyticsData=[]}ngOnInit(){this.analyticsService.getAnalytics().subscribe(t=>{this.analyticsData=t})}static#e=this.\u0275fac=function(r){return new(r||n)(de(Zse))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-analytics"]],decls:14,vars:1,consts:[[1,"container"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h2"),L(2,"Analytics Data"),S(),k(3,"table",1)(4,"thead")(5,"tr")(6,"th"),L(7,"Page Path"),S(),k(8,"th"),L(9,"Query Params"),S(),k(10,"th"),L(11,"Timestamp"),S()()(),k(12,"tbody"),vn(13,Qse,9,8,"tr",2),S()()()),2&r&&(ie(13),Ze("ngForOf",i.analyticsData))},dependencies:[lo,RN,gg],styles:[".container[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}return n})();function Yse(n,e){if(1&n&&(k(0,"div",5),at(1,"img",6),S()),2&n){const t=e.$implicit;ie(1),Ze("src",t,Zn)}}let Xse=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.offerService=i,this.images=[]}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.offerService.getOfferById(t).subscribe(r=>{this.offer=r,this.images=[r.Image1,r.Image2,r.Image3,r.Image4,r.Image5].filter(i=>!!i)})}goBack(){this.router.navigate(["/offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(de(Do),de(zn),de(Nm))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-offer-detail"]],decls:45,vars:15,consts:[[1,"offer-detail"],[1,"carousel"],["class","image-container",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[3,"click"],[1,"image-container"],["alt","Offer Image",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h2"),L(2),S(),k(3,"div",1),vn(4,Yse,2,1,"div",2),S(),k(5,"p")(6,"strong"),L(7,"Company Name:"),S(),L(8),S(),k(9,"p")(10,"strong"),L(11,"Contact Name:"),S(),L(12),S(),k(13,"p")(14,"strong"),L(15,"Phone Number:"),S(),L(16),S(),k(17,"p")(18,"strong"),L(19,"Email:"),S(),L(20),S(),k(21,"p")(22,"strong"),L(23,"Description:"),S(),L(24),S(),k(25,"p")(26,"strong"),L(27,"Location:"),S(),L(28),S(),k(29,"p")(30,"strong"),L(31,"Website:"),S(),k(32,"a",3),L(33),S()(),k(34,"p")(35,"strong"),L(36,"Offer Type:"),S(),L(37),S(),k(38,"p")(39,"strong"),L(40,"Date Created:"),S(),L(41),_h(42,"date"),S(),k(43,"button",4),gt("click",function(){return i.goBack()}),L(44,"Back to Offers"),S()()),2&r&&(ie(2),Je(null==i.offer?null:i.offer.Title),ie(2),Ze("ngForOf",i.images),ie(4),Rr(" ",null==i.offer?null:i.offer.Company_Name,""),ie(4),Rr(" ",null==i.offer?null:i.offer.Contact_Name,""),ie(4),Rr(" ",null==i.offer?null:i.offer.Phone_Number,""),ie(4),Rr(" ",null==i.offer?null:i.offer.Email,""),ie(4),Rr(" ",null==i.offer?null:i.offer.Description,""),ie(4),Rr(" ",null==i.offer?null:i.offer.Location,""),ie(4),Ze("href",null==i.offer?null:i.offer.Website,Zn),ie(1),Je(null==i.offer?null:i.offer.Website),ie(4),Rr(" ",null==i.offer?null:i.offer.OfferType,""),ie(4),Rr(" ",ag(42,12,null==i.offer?null:i.offer.Date_Created,"shortDate"),""))},dependencies:[lo,gg],styles:[".offer-detail[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:16px;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 4px #0000001a}.carousel[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:300px;margin-bottom:16px}.image-container[_ngcontent-%COMP%]{flex:0 0 400px;overflow:hidden;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover}button[_ngcontent-%COMP%]{display:block;margin:16px auto;padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})(),Jse=(()=>{class n{constructor(t,r,i){this.route=t,this.servicesService=r,this.router=i,this.service=new Ej,this.serviceId=null}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{t&&(this.service.Community_Sponsor=t?.Community_Sponsor,this.service.Name=t.Name,this.service.Date_Created=t.Date_Created,this.service.Description=t.Description,this.service.Email=t.Email,this.service.Facebook=t.Facebook,this.service.Instagram=t.Instagram,this.service.Phone_Number=t.Phone_Number,this.service.Service_Type=t.Service_Type,this.service.Website=vj(t.Website),this.service.Image=t.Image,this.serviceId&&(this.service.id=this.serviceId),console.log("Image",t?.Image),(""==t.Image||void 0===t.Image)&&(this.service.Image="https://firebasestorage.googleapis.com/v0/b/romaniinseattle.appspot.com/o/serviceImages%2FdafaultImage.jpg?alt=media&token=3b0787df-12f0-444a-a426-013843534f1e"))})}goBack(){this.router.navigate(["/services"])}navigateToEditService(t){this.router.navigate(["/edit-service",t])}static#e=this.\u0275fac=function(r){return new(r||n)(de(Do),de(km),de(zn))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-service-detail"]],decls:61,vars:19,consts:[[1,"service-details-container"],[1,"service-header"],[1,"forDebug"],[1,"service-content"],[1,"service-image"],[3,"src","alt"],[1,"service-details"],[1,"service-details-label"],["target","_blank",3,"href"],[1,"service-actions"],[1,"editButton",3,"click"],[3,"click"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h1")(3,"strong"),L(4,"Name:"),S(),L(5),S(),k(6,"div",2)(7,"h3")(8,"strong"),L(9,"Service Id:"),S(),L(10),S()()(),k(11,"div",3)(12,"div",4),at(13,"img",5),S(),k(14,"div",6)(15,"div")(16,"label",7),L(17,"Tip Serviciu:"),S(),L(18),S(),k(19,"div")(20,"label",7),L(21,"Nr Telefon:"),S(),L(22),S(),k(23,"div")(24,"label",7),L(25,"Email:"),S(),L(26),S(),k(27,"div")(28,"label",7),L(29,"Website:"),S(),k(30,"a",8),L(31),S()(),k(32,"div")(33,"label",7),L(34,"Facebook:"),S(),k(35,"a",8),L(36),S()(),k(37,"div")(38,"label",7),L(39,"Instagram:"),S(),k(40,"a",8),L(41),S()(),k(42,"div")(43,"label",7),L(44,"Sponsor:"),S(),L(45),S(),k(46,"div")(47,"label",7),L(48,"Date Created:"),S(),L(49),_h(50,"date"),S(),k(51,"div")(52,"label",7),L(53,"Description:"),S(),L(54),S()()(),k(55,"div",9)(56,"button",10),gt("click",function(){return i.navigateToEditService(i.service.id)}),L(57,"Edit"),S(),L(58," \xa0 "),k(59,"button",11),gt("click",function(){return i.goBack()}),L(60,"Inapoi la Servicii"),S()()()),2&r&&(ie(5),Je(i.service.Name),ie(5),Je(i.service.id),ie(3),Ls("alt",i.service.Name),Ze("src",i.service.Image,Zn),ie(5),Rr(" ",i.service.Service_Type,""),ie(4),Rr(" ",i.service.Phone_Number,""),ie(4),Rr(" ",i.service.Email,""),ie(4),Ze("href",i.service.Website,Zn),ie(1),Je(i.service.Website),ie(4),Ze("href",i.service.Facebook,Zn),ie(1),Je(i.service.Facebook),ie(4),Ze("href",i.service.Instagram,Zn),ie(1),Je(i.service.Instagram),ie(4),Rr(" ",i.service.Community_Sponsor?"Yes":"No",""),ie(4),Rr(" ",ag(50,16,i.service.Date_Created,"shortDate"),""),ie(5),Je(i.service.Description))},dependencies:[gg],styles:[".forDebug[_ngcontent-%COMP%]{display:none}.service-details-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 0 10px #0000001a}.service-details-label[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em;font-weight:700;padding:10px}.service-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:2.5em;margin-bottom:20px;color:#333}.service-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.service-image[_ngcontent-%COMP%]{flex:1;margin-right:20px}.service-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:10px;box-shadow:0 0 10px #0000001a}.service-details[_ngcontent-%COMP%]{flex:2;font-size:1.2em;color:#555}.service-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;margin-bottom:10px;color:#444}.service-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.service-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.service-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.service-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1em;color:#fff;background-color:#007bff;border:none;border-radius:5px;cursor:pointer}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})(),hS=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.user$=this.afAuth.authState}login(t,r){var i=this;return(0,_e.Z)(function*(){try{yield i.afAuth.signInWithEmailAndPassword(t,r),i.router.navigate(["/admin"])}catch(s){console.error("Login error",s)}})()}logout(){var t=this;return(0,_e.Z)(function*(){yield t.afAuth.signOut(),t.router.navigate(["/login"])})()}isLoggedIn(){return this.user$.pipe(De(t=>!!t))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_E),pe(zn))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const u$=()=>{const n=$e(hS),e=$e(zn);return n.isLoggedIn().pipe(zc(1),De(t=>!!t||(e.navigate(["/login"]),!1)))};let eoe=(()=>{class n{constructor(t){this.authService=t}logout(){this.authService.logout()}static#e=this.\u0275fac=function(r){return new(r||n)(de(hS))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-admin"]],decls:20,vars:0,consts:[[1,"header-container"],[1,"title-container"],[1,"logout-container"],[3,"click"],[1,"nav-pills"],["routerLink","analytics"],["routerLink","service-manager"],["routerLink","offer-management"]],template:function(r,i){1&r&&(k(0,"div")(1,"div",0)(2,"div",1)(3,"h2"),L(4,"Admin Pannel"),S()(),k(5,"div",2)(6,"button",3),gt("click",function(){return i.logout()}),L(7,"Logout"),S()()(),k(8,"nav",4)(9,"ul")(10,"li")(11,"a",5),L(12,"Analytics"),S()(),k(13,"li")(14,"a",6),L(15,"Service Manager"),S()(),k(16,"li")(17,"a",7),L(18,"Offers Manager"),S()()()(),at(19,"router-outlet"),S())},dependencies:[oE,jg],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f4f4f9}.admin-container[_ngcontent-%COMP%]{width:80%;margin:0 auto;background:#fff;box-shadow:0 2px 4px #0000001a;border-radius:8px;overflow:hidden}.header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}header[_ngcontent-%COMP%]{color:#fff;padding:20px;text-align:center}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px}.nav-pills[_ngcontent-%COMP%]{margin:0;padding:0}.nav-pills[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;display:flex;justify-content:center}.nav-pills[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 5px}.nav-pills[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 20px;border-radius:20px;text-decoration:none;color:#fff;background:#007bff;transition:background-color .3s,color .3s}.nav-pills[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-pills[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0056b3;color:#fff}main[_ngcontent-%COMP%]{padding:20px;background:#fff}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}"]})}return n})(),toe=(()=>{class n{constructor(t){this.authService=t,this.email="",this.password=""}login(){this.authService.login(this.email,this.password)}static#e=this.\u0275fac=function(r){return new(r||n)(de(hS))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"login-container"],[1,"login-box"],[3,"submit"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"h2"),L(3,"Login"),S(),k(4,"form",2),gt("submit",function(){return i.login()}),k(5,"div",3)(6,"label",4),L(7,"Email"),S(),k(8,"input",5),gt("ngModelChange",function(o){return i.email=o}),S()(),k(9,"div",3)(10,"label",6),L(11,"Password"),S(),k(12,"input",7),gt("ngModelChange",function(o){return i.password=o}),S()(),k(13,"button",8),L(14,"Login"),S()()()()),2&r&&(ie(8),Ze("ngModel",i.email),ie(4),Ze("ngModel",i.password))},dependencies:[bf,gl,Uu,Ef,vl,Hm,$m],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(to right,#007bff,#0056b3)}.login-box[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:300px;text-align:center}.login-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333}.input-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{width:100%;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})();function noe(n,e){if(1&n){const t=sv();k(0,"tr")(1,"td"),L(2),S(),k(3,"td"),L(4),S(),k(5,"td"),L(6),S(),k(7,"td"),L(8),S(),k(9,"td"),L(10),S(),k(11,"td"),L(12),S(),k(13,"td"),L(14),S(),k(15,"td"),L(16),S(),k(17,"td"),L(18),S(),k(19,"td"),L(20),S(),k(21,"td")(22,"input",2),gt("change",function(){const s=Ad(t).$implicit;return Rc(Io().toggleApproval(s))}),S()()()}if(2&n){const t=e.$implicit;ie(2),Je(t.Name),ie(2),Je(t.Service_Type),ie(2),Je(t.Phone_Number),ie(2),Je(t.Email),ie(2),Je(t.Description),ie(2),Je(t.Website),ie(2),Je(t.Facebook),ie(2),Je(t.Instagram),ie(2),Je(t.Community_Sponsor),ie(2),Je(t.Date_Created),ie(2),Ze("checked",t.Approved)}}function ioe(n,e){if(1&n){const t=sv();k(0,"tr")(1,"td"),L(2),S(),k(3,"td"),L(4),S(),k(5,"td"),L(6),S(),k(7,"td"),L(8),S(),k(9,"td"),L(10),S(),k(11,"td"),L(12),S(),k(13,"td"),L(14),S(),k(15,"td"),L(16),S(),k(17,"td"),L(18),S(),k(19,"td"),L(20),S(),k(21,"td"),L(22),S(),k(23,"td"),L(24),S(),k(25,"td")(26,"input",2),gt("change",function(){const s=Ad(t).$implicit;return Rc(Io().toggleApproval(s))}),S()()()}if(2&n){const t=e.$implicit;ie(2),Je(t.Title),ie(2),Je(t.Company_Name),ie(2),Je(t.Contact_Name),ie(2),Je(t.Phone_Number),ie(2),Je(t.Email),ie(2),Je(t.Description),ie(2),Je(t.Price),ie(2),Je(t.Location),ie(2),Je(t.Website),ie(2),Je(t.Facebook),ie(2),Je(t.Instagram),ie(2),Je(t.Date_Created),ie(2),Ze("checked",t.Approved)}}const soe=[{path:"",component:Hne},{path:"rules",component:Gre},{path:"analytics",component:l$},{path:"events",component:Qre},{path:"add-event",component:Hse},{path:"offers",component:Xre},{path:"add-offers",component:Gse},{path:"offers/:id",component:Xse},{path:"services",component:qre},{path:"add-service",component:c$},{path:"services/add",component:c$},{path:"services/:id",component:Jse},{path:"edit-service/:id",component:Kse},{path:"admin",component:eoe,canMatch:[u$],canActivate:[u$],children:[{path:"analytics",component:l$},{path:"service-manager",component:(()=>{class n{constructor(t){this.serviceManagementService=t,this.services=[]}ngOnInit(){this.serviceManagementService.getServices().subscribe(t=>{this.services=t.sort((r,i)=>r.Approved===i.Approved?new Date(i.Date_Created).getTime()-new Date(r.Date_Created).getTime():r.Approved?1:-1)})}toggleApproval(t){t.Approved=!t.Approved,this.serviceManagementService.updateService(t.id,t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(km))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-manage-services"]],decls:30,vars:1,consts:[[1,"admin-container"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h2"),L(2,"Manage Services"),S(),k(3,"table")(4,"thead")(5,"tr")(6,"th"),L(7,"Name"),S(),k(8,"th"),L(9,"Service Type"),S(),k(10,"th"),L(11,"Phone Number"),S(),k(12,"th"),L(13,"Email"),S(),k(14,"th"),L(15,"Description"),S(),k(16,"th"),L(17,"Website"),S(),k(18,"th"),L(19,"Facebook"),S(),k(20,"th"),L(21,"Instagram"),S(),k(22,"th"),L(23,"Community Sponsor"),S(),k(24,"th"),L(25,"Date Created"),S(),k(26,"th"),L(27,"Approved"),S()()(),k(28,"tbody"),vn(29,noe,23,11,"tr",1),S()()()),2&r&&(ie(29),Ze("ngForOf",i.services))},dependencies:[lo],styles:[".admin-container[_ngcontent-%COMP%]{padding:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5)}.service-manager-container[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}"]})}return n})()},{path:"offer-management",component:(()=>{class n{constructor(t){this.offerService=t,this.offers=[]}ngOnInit(){this.offerService.getOffers().subscribe(t=>{this.offers=t.sort((r,i)=>r.Approved===i.Approved?new Date(i.Date_Created).getTime()-new Date(r.Date_Created).getTime():r.Approved?1:-1)})}toggleApproval(t){t.Approved=!t.Approved,t.ApprovedDate=(new Date).toISOString(),this.offerService.updateOffer(t.id,t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(Nm))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-offer-management"]],decls:34,vars:1,consts:[[1,"offer-management-container"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h2"),L(2,"Manage Offers"),S(),k(3,"table")(4,"thead")(5,"tr")(6,"th"),L(7,"Title"),S(),k(8,"th"),L(9,"Company Name"),S(),k(10,"th"),L(11,"Contact Name"),S(),k(12,"th"),L(13,"Phone Number"),S(),k(14,"th"),L(15,"Email"),S(),k(16,"th"),L(17,"Description"),S(),k(18,"th"),L(19,"Price"),S(),k(20,"th"),L(21,"Location"),S(),k(22,"th"),L(23,"Website"),S(),k(24,"th"),L(25,"Facebook"),S(),k(26,"th"),L(27,"Instagram"),S(),k(28,"th"),L(29,"Date Created"),S(),k(30,"th"),L(31,"Actions"),S()()(),k(32,"tbody"),vn(33,ioe,27,13,"tr",1),S()()()),2&r&&(ie(33),Ze("ngForOf",i.offers))},dependencies:[lo],styles:[".offer-management-container[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5)}"]})}return n})()}]},{path:"login",component:toe},{path:"",redirectTo:"/login",pathMatch:"full"}];let ooe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({imports:[XF.forRoot(soe),XF]})}return n})();var aoe=We(513);const loe=new Ie("angularfire2.analytics.analyticsCollectionEnabled"),uoe=new Ie("angularfire2.analytics.appVersion"),doe=new Ie("angularfire2.analytics.appName"),hoe=new Ie("angularfire2.analytics.debugMode"),foe=new Ie("angularfire2.analytics.config"),VI="dataLayer";let h$=(()=>{class n{measurementId;analyticsInitialized=new Promise(()=>{});updateConfig(t){var r=this;return(0,_e.Z)(function*(){yield r.analyticsInitialized,window.gtag("config",r.measurementId,{...t,update:!0})})()}constructor(t,r,i,s,o,a,c,l,f){if(NN(c)){window[VI]=window[VI]||[];const y=(...N)=>"config"===N[0]&&"firebase"===N[2].origin&&(this.measurementId=N[1],!0),I=N=>{window.gtag=(...F)=>{N&&N(...F),"event"===F[0]&&F[2].send_to===this.measurementId&&(s&&(F[2].app_name=s),i&&(F[2].app_version=i)),o&&typeof console<"u"&&console.info(...F),function(...W){window[VI].push(arguments)}(...F)}};window[VI].some(y)?(this.analyticsInitialized=Promise.resolve(),I()):this.analyticsInitialized=new Promise(N=>{I((...F)=>{y(...F)&&N()})}),a&&this.updateConfig(a),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const m=V(void 0).pipe(In(f.outsideAngular),ze(aoe.Gb),ze(y=>y?l.runOutsideAngular(()=>We.e(861).then(We.bind(We,244))):Ln),De(()=>mE("analytics","AngularFireAnalytics",t.name,()=>{const y=t.analytics();return!1===r&&y.setAnalyticsCollectionEnabled(!1),y},[t,r,a,o])),dC({bufferSize:1,refCount:!1}));return nL(this,m,l)}static \u0275fac=function(r){return new(r||n)(pe(uC),pe(loe,8),pe(uoe,8),pe(doe,8),pe(hoe,8),pe(foe,8),pe(ks),pe(Wt),pe(fu))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const voe=function(n,e){return{"fa-bars":n,"fa-times":e}},Eoe=function(n){return{active:n}};let Ioe=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/offers",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(k(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),L(4,"Romani in Seattle"),S()(),k(5,"div",4),gt("click",function(){return i.toggleMenu()}),at(6,"i",5),S(),k(7,"ul",6)(8,"li",7)(9,"a",8),gt("click",function(){return i.closeMenu()}),L(10,"Home"),S()(),k(11,"li",7)(12,"a",9),gt("click",function(){return i.closeMenu()}),L(13,"Servicii"),S()(),k(14,"li",7)(15,"a",10),gt("click",function(){return i.closeMenu()}),L(16,"Evenimente"),S()(),k(17,"li",7)(18,"a",11),gt("click",function(){return i.closeMenu()}),L(19,"Oferte"),S()(),k(20,"li",7)(21,"a",12),gt("click",function(){return i.closeMenu()}),L(22,"Regulament"),S()()()()()),2&r&&(ie(6),Ze("ngClass",function $1(n,e,t,r,i){return H1(we(),Jr(),n,e,t,r,i)}(2,voe,!i.menuOpen,i.menuOpen)),ie(1),Ze("ngClass",function j1(n,e,t,r){return z1(we(),Jr(),n,e,t,r)}(5,Eoe,i.menuOpen)))},dependencies:[CN,jg],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{color:#333;text-decoration:none;text-transform:uppercase;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to left,blue 0,blue 33.3%,yellow 33.3%,yellow 66.6%,red 66.6%,red)}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),boe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(k(0,"footer",0)(1,"div",1),L(2," \xa9 2024 Romani in Seattle. All rights reserved. "),S()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),woe=(()=>{class n{constructor(t,r,i,s){this.router=t,this.analytics=r,this.activatedRoute=i,this.firestore=s,this.title="romani-in-seattle"}ngOnInit(){this.router.events.pipe(ws(t=>t instanceof Ua)).subscribe(t=>{const r=t.urlAfterRedirects,i=this.activatedRoute.snapshot.queryParams,s=new Date;this.firestore.collection("analytics").add({page_path:r,query_params:i,timestamp:s}).then(()=>{console.log("Analytics data saved")}).catch(o=>{console.error("Error saving analytics data",o)})})}static#e=this.\u0275fac=function(r){return new(r||n)(de(zn),de(h$),de(Do),de(Lu))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(k(0,"div",0),at(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),S())},dependencies:[oE,Ioe,boe],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class f${}class Toe{}const tc="*";function p$(n,e=null){return{type:2,steps:n,options:e}}function g$(n){return{type:6,styles:n,offset:null}}class Xm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class m${constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function _$(n){return new he(3e3,!1)}function El(n){switch(n.length){case 0:return new Xm;case 1:return n[0];default:return new m$(n)}}function y$(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),f=l==o,m=f&&a||new Map;c.forEach((y,I)=>{let T=I,N=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),N){case"!":N=t.get(I);break;case tc:N=r.get(I);break;default:N=n.normalizeStyleValue(I,T,N,i)}m.set(T,N)}),f||s.push(m),a=m,o=l}),i.length)throw function Woe(n){return new he(3502,!1)}();return s}function pS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&gS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&gS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&gS(t,"destroy",n)))}}function gS(n,e,t){const s=mS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function mS(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function $s(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function v$(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const sae=(()=>typeof document>"u"?null:document.documentElement)();function _S(n){const e=n.parentNode||n.host||null;return e===sae?null:e}let Hu=null,E$=!1;function I$(n,e){for(;e;){if(e===n)return!0;e=_S(e)}return!1}function b$(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let w$=(()=>{class n{validateStyleProperty(t){return function aae(n){Hu||(Hu=function cae(){return typeof document<"u"?document.body:null}()||{},E$=!!Hu.style&&"WebkitAppearance"in Hu.style);let e=!0;return Hu.style&&!function oae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Hu.style,!e&&E$&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return I$(t,r)}getParentElement(t){return _S(t)}query(t,r,i){return b$(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Xm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),yS=(()=>{class n{static#e=this.NOOP=new w$}return n})();const lae=1e3,vS="ng-enter",UI="ng-leave",BI="ng-trigger",jI=".ng-trigger",C$="ng-animating",ES=".ng-animating";function nc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:IS(parseFloat(e[1]),e[2])}function IS(n,e){return"s"===e?n*lae:n}function $I(n,e,t){return n.hasOwnProperty("duration")?n:function dae(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(_$()),{duration:0,delay:0,easing:""};i=IS(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=IS(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Coe(){return new he(3100,!1)}()),a=!0),s<0&&(e.push(function Aoe(){return new he(3101,!1)}()),a=!0),a&&e.splice(c,0,_$())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Jm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function A$(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Il(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function fa(n,e,t){e.forEach((r,i)=>{const s=wS(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function qu(n,e){e.forEach((t,r)=>{const i=wS(r);n.style[i]=""})}function e_(n){return Array.isArray(n)?1==n.length?n[0]:p$(n):n}const bS=new RegExp("{{\\s*(.+?)\\s*}}","g");function S$(n){let e=[];if("string"==typeof n){let t;for(;t=bS.exec(n);)e.push(t[1]);bS.lastIndex=0}return e}function t_(n,e,t){const r=n.toString(),i=r.replace(bS,(s,o)=>{let a=e[o];return null==a&&(t.push(function Soe(n){return new he(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function zI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const pae=/-+([a-z0-9])/g;function wS(n){return n.replace(pae,(...e)=>e[1].toUpperCase())}function zs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Moe(n){return new he(3004,!1)}()}}function M$(n,e){return window.getComputedStyle(n)[e]}const HI="*";function _ae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function yae(n,e,t){if(":"==n[0]){const c=function vae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function zoe(n){return new he(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function $oe(n){return new he(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(R$(i,o));"<"==s[0]&&!(i==HI&&o==HI)&&e.push(R$(o,i))}(r,t,e)):t.push(n),t}const qI=new Set(["true","1"]),GI=new Set(["false","0"]);function R$(n,e){const t=qI.has(n)||GI.has(n),r=qI.has(e)||GI.has(e);return(i,s)=>{let o=n==HI||n==i,a=e==HI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?qI.has(n):GI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?qI.has(e):GI.has(e)),o&&a}}const Eae=new RegExp("s*:selfs*,?","g");function TS(n,e,t,r){return new Iae(n).build(e,t,r)}class Iae{constructor(e){this._driver=e}build(e,t,r){const i=new Tae(t);return this._resetContextStyleTimingState(i),zs(this,e_(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Poe(){return new he(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function xoe(){return new he(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{S$(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(zI(s.values()),t.errors.push(function Ooe(n,e){return new he(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=zs(this,e_(e.animation),t);return{type:1,matchers:_ae(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Gu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>zs(this,r,t)),options:Gu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=zs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Gu(e.options)}}visitAnimate(e,t){const r=function Aae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return CS($I(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=CS(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=$I(t,e);return CS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:g$({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=g$(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===tc?r.push(a):t.errors.push(new he(3002,!1)):r.push(A$(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),f=l.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function koe(n,e,t,r,i){return new he(3010,!1)}()),m=!1),s=f.startTime),m&&l.set(c,{startTime:s,endTime:i}),t.options&&function fae(n,e,t){const r=e.params||{},i=S$(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Doe(n){return new he(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Foe(){return new he(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,l=0;const f=e.steps.map(W=>{const z=this._makeStyleAst(W,t);let X=null!=z.offset?z.offset:function Cae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(z.styles),ae=0;return null!=X&&(s++,ae=z.offset=X),c=c||ae<0||ae>1,a=a||ae<l,l=ae,o.push(ae),z});c&&t.errors.push(function Loe(){return new he(3012,!1)}()),a&&t.errors.push(function Voe(){return new he(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Uoe(){return new he(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,N=t.currentAnimateTimings,F=N.duration;return f.forEach((W,z)=>{const X=y>0?z==I?1:y*z:o[z],ae=X*F;t.currentTime=T+N.delay+ae,N.duration=ae,this._validateStyleAst(W,t),W.offset=X,r.styles.push(W)}),r}visitReference(e,t){return{type:8,animation:zs(this,e_(e.animation),t),options:Gu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Gu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Gu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function bae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Eae,"")),n=n.replace(/@\*/g,jI).replace(/@\w+/g,t=>jI+"-"+t.slice(1)).replace(/:animating/g,ES),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,$s(t.collectedStyles,t.currentQuerySelector,new Map);const a=zs(this,e_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Gu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Boe(){return new he(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:$I(e.timings,t.errors,!0);return{type:12,animation:zs(this,e_(e.animation),t),timings:r,options:null}}}class Tae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gu(n){return n?(n=Jm(n)).params&&(n.params=function wae(n){return n?Jm(n):null}(n.params)):n={},n}function CS(n,e,t){return{duration:n,delay:e,easing:t}}function AS(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class WI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Mae=new RegExp(":enter","g"),Pae=new RegExp(":leave","g");function DS(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return(new xae).buildKeyframes(n,e,t,r,i,s,o,a,c,l)}class xae{buildKeyframes(e,t,r,i,s,o,a,c,l,f=[]){l=l||new WI;const m=new SS(e,t,l,i,s,f,[]);m.options=c;const y=c.delay?nc(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),zs(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let N=I.length-1;N>=0;N--){const F=I[N];if(F.element===t){T=F;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,c)}return I.length?I.map(T=>T.buildKeyframes()):[AS(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:nc(t_(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?nc(r.duration):null,a=null!=r.delay?nc(r.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=KI);const o=nc(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>zs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?nc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),zs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return $I(t.params?t_(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?nc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=KI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,l);s&&m.delayNextStep(s),l===t.element&&(c=m.currentTimeline),zs(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;zs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const KI={};class SS{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new ZI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=nc(r.duration)),null!=r.delay&&(i.delay=nc(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=t_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new SS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=KI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Oae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Mae,"."+this._enterClassName)).replace(Pae,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function joe(n){return new he(3014,!1)}()),a}}class ZI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ZI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||tc),this._currentKeyframe.set(t,tc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Nae(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,tc)}else Il(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=t_(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??tc),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=Il(a,new Map,this._backFill);l.forEach((f,m)=>{"!"===f?e.add(m):f===tc&&t.add(m)}),r||l.set("offset",c/this.duration),i.push(l)});const s=e.size?zI(e.values()):[],o=t.size?zI(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return AS(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Oae extends ZI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Il(e[0]);c.set("offset",0),s.push(c);const l=Il(e[0]);l.set("offset",O$(a)),s.push(l);const f=e.length-1;for(let m=1;m<=f;m++){let y=Il(e[m]);const I=y.get("offset");y.set("offset",O$((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return AS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function O$(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class MS{}const kae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fae extends MS{normalizePropertyName(e,t){return wS(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(kae.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Roe(n,e){return new he(3005,!1)}())}return o+s}}function N$(n,e,t,r,i,s,o,a,c,l,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:f,totalTime:m,errors:y}}const RS={};class k${constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Lae(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,f){const m=[],y=this.ast.options&&this.ast.options.params||RS,T=this.buildStyles(r,a&&a.params||RS,m),N=c&&c.params||RS,F=this.buildStyles(i,N,m),W=new Set,z=new Map,X=new Map,ae="void"===i,Se={params:Vae(N,y),delay:this.ast.options?.delay},je=f?[]:DS(e,t,this.ast.animation,s,o,T,F,Se,l,m);let q=0;if(je.forEach($=>{q=Math.max($.duration+$.delay,q)}),m.length)return N$(t,this._triggerName,r,i,ae,T,F,[],[],z,X,q,m);je.forEach($=>{const K=$.element,Y=$s(z,K,new Set);$.preStyleProps.forEach(H=>Y.add(H));const ne=$s(X,K,new Set);$.postStyleProps.forEach(H=>ne.add(H)),K!==t&&W.add(K)});const B=zI(W.values());return N$(t,this._triggerName,r,i,ae,T,F,je,B,z,X,q)}}function Vae(n,e){const t=Jm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Uae{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Jm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=t_(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class jae{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Uae(i.style,i.options&&i.options.params||{},r))}),F$(this.states,"true","1"),F$(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new k$(e,i,this.states))}),this.fallbackTransition=function $ae(n,e,t){return new k$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function F$(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const zae=new WI;class Hae{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=TS(this._driver,t,r,[]);if(r.length)throw function Koe(n){return new he(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=y$(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=DS(this._driver,t,s,vS,UI,new Map,new Map,r,zae,i),o.forEach(f=>{const m=$s(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Zoe(){return new he(3300,!1)}()),o=[]),i.length)throw function Qoe(n){return new he(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,tc))})});const l=El(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Yoe(n){return new he(3301,!1)}();return t}listen(e,t,r,i){const s=mS(t,"","","");return pS(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const L$="ng-animate-queued",PS="ng-animate-disabled",Zae=[],V$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Qae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Po="__ng_removed";class xS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function ece(n){return n??null}(r?e.value:e),r){const s=Jm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const n_="void",OS=new xS(n_);class Yae{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ho(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Xoe(n,e){return new he(3302,!1)}();if(null==r||0==r.length)throw function Joe(n){return new he(3303,!1)}();if(!function tce(n){return"start"==n||"done"==n}(r))throw function eae(n,e){return new he(3400,!1)}();const s=$s(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=$s(this._engine.statesByElement,e,new Map);return a.has(t)||(ho(e,BI),ho(e,BI+"-"+t),a.set(t,OS)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function tae(n){return new he(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new NS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ho(e,BI),ho(e,BI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new xS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=OS),l.value!==n_&&c.value===l.value){if(!function ice(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const N=[],F=s.matchStyles(c.value,c.params,N),W=s.matchStyles(l.value,l.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{qu(e,F),fa(e,W)})}return}const y=$s(this._engine.playersByElement,e,[]);y.forEach(N=>{N.namespaceId==this.id&&N.triggerName==t&&N.queued&&N.destroy()});let I=s.matchTransition(c.value,l.value,e,l.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:l,player:o,isFallbackTransition:T}),T||(ho(e,L$),o.onStart(()=>{Sf(e,L$)})),o.onDone(()=>{let N=this.players.indexOf(o);N>=0&&this.players.splice(N,1);const F=this._engine.playersByElement.get(e);if(F){let W=F.indexOf(o);W>=0&&F.splice(W,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,jI,!0);r.forEach(i=>{if(i[Po])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const f=this.trigger(e,l,n_,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&El(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,l=r.get(o)||OS,f=new xS(n_),m=new NS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Po];(!s||s===V$)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ho(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=mS(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,pS(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Xae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Yae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(QI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!QI(t))return;const s=t[Po];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ho(e,PS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Sf(e,PS))}removeNode(e,t,r){if(QI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Po]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return QI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,jI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ES,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return El(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Po];if(t&&t.setForRemoval){if(e[Po]=V$,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(PS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ho(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?El(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function nae(n){return new he(3402,!1)}()}_flushAnimations(e,t){const r=new WI,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,f=new Set;this.disabledNodes.forEach(et=>{f.add(et);const lt=this.driver.query(et,".ng-animate-queued",!0);for(let dt=0;dt<lt.length;dt++)f.add(lt[dt])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=j$(y,this.collectedEnterElements),T=new Map;let N=0;I.forEach((et,lt)=>{const dt=vS+N++;T.set(lt,dt),et.forEach(Qt=>ho(Qt,dt))});const F=[],W=new Set,z=new Set;for(let et=0;et<this.collectedLeaveElements.length;et++){const lt=this.collectedLeaveElements[et],dt=lt[Po];dt&&dt.setForRemoval&&(F.push(lt),W.add(lt),dt.hasAnimation?this.driver.query(lt,".ng-star-inserted",!0).forEach(Qt=>W.add(Qt)):z.add(lt))}const X=new Map,ae=j$(y,Array.from(W));ae.forEach((et,lt)=>{const dt=UI+N++;X.set(lt,dt),et.forEach(Qt=>ho(Qt,dt))}),e.push(()=>{I.forEach((et,lt)=>{const dt=T.get(lt);et.forEach(Qt=>Sf(Qt,dt))}),ae.forEach((et,lt)=>{const dt=X.get(lt);et.forEach(Qt=>Sf(Qt,dt))}),F.forEach(et=>{this.processLeaveNode(et)})});const Se=[],je=[];for(let et=this._namespaceList.length-1;et>=0;et--)this._namespaceList[et].drainQueuedTransitions(t).forEach(dt=>{const Qt=dt.player,kr=dt.element;if(Se.push(Qt),this.collectedEnterElements.length){const br=kr[Po];if(br&&br.setForMove){if(br.previousTriggersValues&&br.previousTriggersValues.has(dt.triggerName)){const rc=br.previousTriggersValues.get(dt.triggerName),Ds=this.statesByElement.get(dt.element);if(Ds&&Ds.has(dt.triggerName)){const ic=Ds.get(dt.triggerName);ic.value=rc,Ds.set(dt.triggerName,ic)}}return void Qt.destroy()}}const po=!m||!this.driver.containsElement(m,kr),Ir=X.get(kr),Jn=T.get(kr),er=this._buildInstruction(dt,r,Jn,Ir,po);if(er.errors&&er.errors.length)return void je.push(er);if(po)return Qt.onStart(()=>qu(kr,er.fromStyles)),Qt.onDestroy(()=>fa(kr,er.toStyles)),void i.push(Qt);if(dt.isFallbackTransition)return Qt.onStart(()=>qu(kr,er.fromStyles)),Qt.onDestroy(()=>fa(kr,er.toStyles)),void i.push(Qt);const wl=[];er.timelines.forEach(br=>{br.stretchStartingKeyframe=!0,this.disabledNodes.has(br.element)||wl.push(br)}),er.timelines=wl,r.append(kr,er.timelines),o.push({instruction:er,player:Qt,element:kr}),er.queriedElements.forEach(br=>$s(a,br,[]).push(Qt)),er.preStyleProps.forEach((br,rc)=>{if(br.size){let Ds=c.get(rc);Ds||c.set(rc,Ds=new Set),br.forEach((ic,Tl)=>Ds.add(Tl))}}),er.postStyleProps.forEach((br,rc)=>{let Ds=l.get(rc);Ds||l.set(rc,Ds=new Set),br.forEach((ic,Tl)=>Ds.add(Tl))})});if(je.length){const et=[];je.forEach(lt=>{et.push(function rae(n,e){return new he(3505,!1)}())}),Se.forEach(lt=>lt.destroy()),this.reportError(et)}const q=new Map,B=new Map;o.forEach(et=>{const lt=et.element;r.has(lt)&&(B.set(lt,lt),this._beforeAnimationBuild(et.player.namespaceId,et.instruction,q))}),i.forEach(et=>{const lt=et.element;this._getPreviousPlayers(lt,!1,et.namespaceId,et.triggerName,null).forEach(Qt=>{$s(q,lt,[]).push(Qt),Qt.destroy()})});const $=F.filter(et=>z$(et,c,l)),K=new Map;B$(K,this.driver,z,l,tc).forEach(et=>{z$(et,c,l)&&$.push(et)});const ne=new Map;I.forEach((et,lt)=>{B$(ne,this.driver,new Set(et),c,"!")}),$.forEach(et=>{const lt=K.get(et),dt=ne.get(et);K.set(et,new Map([...lt?.entries()??[],...dt?.entries()??[]]))});const H=[],fo=[],bl={};o.forEach(et=>{const{element:lt,player:dt,instruction:Qt}=et;if(r.has(lt)){if(f.has(lt))return dt.onDestroy(()=>fa(lt,Qt.toStyles)),dt.disabled=!0,dt.overrideTotalTime(Qt.totalTime),void i.push(dt);let kr=bl;if(B.size>1){let Ir=lt;const Jn=[];for(;Ir=Ir.parentNode;){const er=B.get(Ir);if(er){kr=er;break}Jn.push(Ir)}Jn.forEach(er=>B.set(er,kr))}const po=this._buildAnimation(dt.namespaceId,Qt,q,s,ne,K);if(dt.setRealPlayer(po),kr===bl)H.push(dt);else{const Ir=this.playersByElement.get(kr);Ir&&Ir.length&&(dt.parentPlayer=El(Ir)),i.push(dt)}}else qu(lt,Qt.fromStyles),dt.onDestroy(()=>fa(lt,Qt.toStyles)),fo.push(dt),f.has(lt)&&i.push(dt)}),fo.forEach(et=>{const lt=s.get(et.element);if(lt&&lt.length){const dt=El(lt);et.setRealPlayer(dt)}}),i.forEach(et=>{et.parentPlayer?et.syncPlayerEvents(et.parentPlayer):et.destroy()});for(let et=0;et<F.length;et++){const lt=F[et],dt=lt[Po];if(Sf(lt,UI),dt&&dt.hasAnimation)continue;let Qt=[];if(a.size){let po=a.get(lt);po&&po.length&&Qt.push(...po);let Ir=this.driver.query(lt,ES,!0);for(let Jn=0;Jn<Ir.length;Jn++){let er=a.get(Ir[Jn]);er&&er.length&&Qt.push(...er)}}const kr=Qt.filter(po=>!po.destroyed);kr.length?nce(this,lt,kr):this.processLeaveNode(lt)}return F.length=0,H.forEach(et=>{this.players.push(et),et.onDone(()=>{et.destroy();const lt=this.players.indexOf(et);this.players.splice(lt,1)}),et.play()}),H}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==n_;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,f=l!==s,m=$s(r,l,[]);this._getPreviousPlayers(l,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}qu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,l=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const N=T.element;f.add(N);const F=N[Po];if(F&&F.removedBeforeQueried)return new Xm(T.duration,T.delay);const W=N!==c,z=function rce(n){const e=[];return $$(n,e),e}((r.get(N)||Zae).map(q=>q.getRealPlayer())).filter(q=>!!q.element&&q.element===N),X=s.get(N),ae=o.get(N),Se=y$(this._normalizer,T.keyframes,X,ae),je=this._buildPlayer(T,Se,z);if(T.subTimeline&&i&&m.add(N),W){const q=new NS(e,a,N);q.setRealPlayer(je),l.push(q)}return je});l.forEach(T=>{$s(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function Jae(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>ho(T,C$));const I=El(y);return I.onDestroy(()=>{f.forEach(T=>Sf(T,C$)),fa(c,t.toStyles)}),m.forEach(T=>{$s(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Xm(e.duration,e.delay)}}class NS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Xm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>pS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$s(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function QI(n){return n&&1===n.nodeType}function U$(n,e){const t=n.style.display;return n.style.display=e??"none",t}function B$(n,e,t,r,i){const s=[];t.forEach(c=>s.push(U$(c)));const o=[];r.forEach((c,l)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(l,m,i);f.set(m,y),(!y||0==y.length)&&(l[Po]=Qae,o.push(l))}),n.set(l,f)});let a=0;return t.forEach(c=>U$(c,s[a++])),o}function j$(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function ho(n,e){n.classList?.add(e)}function Sf(n,e){n.classList?.remove(e)}function nce(n,e,t){El(t).onDone(()=>n.processLeaveNode(e))}function $$(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof m$?$$(r.players,e):e.push(r)}}function z$(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class YI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Xae(e,t,r),this._timelineEngine=new Hae(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=TS(this._driver,s,c,[]);if(c.length)throw function Goe(n,e){return new he(3404,!1)}();a=function Bae(n,e,t){return new jae(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=v$(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=v$(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let oce=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&fa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fa(this._element,this._initialStyles),this._endStyles&&(fa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(qu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qu(this._element,this._endStyles),this._endStyles=null),fa(this._element,this._initialStyles),this._state=3)}}return n})();function kS(n){let e=null;return n.forEach((t,r)=>{(function ace(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class H${constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:M$(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return I$(e,t)}getParentElement(e){return _S(e)}query(e,t,r){return b$(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const l=new Map,f=o.filter(I=>I instanceof H$);(function gae(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,N)=>l.set(N,T))});let m=function hae(n){return n.length?n[0]instanceof Map?n:n.map(e=>A$(e)):[]}(t).map(I=>Il(I));m=function mae(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,M$(n,a)))}}return e}(e,m,l);const y=function sce(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kS(e[0]),e.length>1&&(r=kS(e[e.length-1]))):e instanceof Map&&(t=kS(e)),t||r?new oce(n,t,r):null}(e,m);return new H$(e,m,c,y)}}let lce=(()=>{class n extends f${constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:nr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?p$(t):t;return q$(this._renderer,null,r,"register",[i]),new uce(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(zp),pe(_r))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class uce extends Toe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new dce(this._id,e,t||{},this._renderer)}}class dce{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return q$(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function q$(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const G$="@.disabled";let hce=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new W$("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new fce(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(zp),pe(YI),pe(Wt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class W${constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==G$?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class fce extends W${constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==G$?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function pce(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function gce(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const K$=[{provide:f$,useClass:lce},{provide:MS,useFactory:function _ce(){return new Fae}},{provide:YI,useClass:(()=>{class n extends YI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_r),pe(yS),pe(MS),pe(ru))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})()},{provide:zp,useFactory:function yce(n,e,t){return new hce(n,e,t)},deps:[IT,YI,Wt]}],FS=[{provide:yS,useFactory:()=>new cce},{provide:$R,useValue:"BrowserAnimations"},...K$],Z$=[{provide:yS,useClass:w$},{provide:$R,useValue:"NoopAnimations"},...K$];let vce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Z$:FS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n});static#n=this.\u0275inj=rn({providers:FS,imports:[YN]})}return n})();const Q$_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class Mf{constructor(e){return e}}class LS{constructor(){return(0,vr.getApps)()}}const VS=new Ie("angularfire2._apps"),Ice={provide:Mf,useFactory:function Ece(n){return n&&1===n.length?n[0]:new Mf((0,vr.getApp)())},deps:[[new qr,VS]]},bce={provide:LS,deps:[[new qr,VS]]};function wce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Mf(r)}}let Tce=(()=>{class n{constructor(t){(0,vr.registerVersion)("angularfire",$a.full,"core"),(0,vr.registerVersion)("angularfire",$a.full,"app"),(0,vr.registerVersion)("angular",Ow.full,t.toString())}static \u0275fac=function(r){return new(r||n)(pe(ks))};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[Ice,bce]})}return n})();function Cce(n,...e){return{ngModule:Tce,providers:[{provide:VS,useFactory:wce(n),multi:!0,deps:[Wt,Ei,fu,...e]}]}}const Ace=lC(vr.initializeApp,!0);We(35);class BS{constructor(){return pE("auth")}}class $S{constructor(e){return e}}const X$="firestore",zS=new Ie("angularfire2.firestore-instances");function xce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $S(r)}}const Oce={provide:class Rce{constructor(){return pE(X$)}},deps:[[new qr,zS]]},Nce={provide:$S,useFactory:function Pce(n,e){const t=cC(X$,n,e);return t&&new $S(t)},deps:[[new qr,zS],Mf]};let kce=(()=>{class n{constructor(){(0,vr.registerVersion)("angularfire",$a.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[Nce,Oce]})}return n})();function Fce(n,...e){return{ngModule:kce,providers:[{provide:zS,useFactory:xce(n),multi:!0,deps:[Wt,Ei,fu,LS,[new qr,BS],[new qr,$g],...e]}]}}const Lce=lC(yte,!0);class HS{constructor(e){return e}}const J$="storage",qS=new Ie("angularfire2.storage-instances");function Bce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new HS(r)}}const jce={provide:class Vce{constructor(){return pE(J$)}},deps:[[new qr,qS]]},$ce={provide:HS,useFactory:function Uce(n,e){const t=cC(J$,n,e);return t&&new HS(t)},deps:[[new qr,qS],Mf]};let zce=(()=>{class n{constructor(){(0,vr.registerVersion)("angularfire",$a.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=rn({providers:[$ce,jce]})}return n})();function Hce(n,...e){return{ngModule:zce,providers:[{provide:qS,useFactory:Bce(n),multi:!0,deps:[Wt,Ei,fu,LS,[new qr,BS],[new qr,$g],...e]}]}}const qce=lC(Sse,!0);let Gce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Pn({type:n,bootstrap:[woe]});static#n=this.\u0275inj=rn({imports:[YN,ooe,vce,LK,mZ,vZ,xne,$se,oX,tX.initializeApp(Q$_firebase),Cce(()=>Ace(Q$_firebase)),Fce(()=>Lce()),Hce(()=>qce()),Fre,kre]})}return n})();x7().bootstrapModule(Gce).catch(n=>console.error(n))},513:(ls,qn,We)=>{We.d(qn,{Gb:()=>Zs,Kz:()=>od,EI:()=>Ki,lT:()=>pe,Iv:()=>yc,xP:()=>Ia,Xd:()=>Nl});var x=We(861),Re=We(303),j=We(879),xe=We(58),Pt=We(537),Dn=We(878);const Sn="@firebase/installations",Bt="0.6.7",St=1e4,ye=`w:${Bt}`,Ce="FIS_v2",Xe="https://firebaseinstallations.googleapis.com/v1",wt=36e5,ut=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(M){return M instanceof xe.ZR&&M.code.includes("request-failed")}function Mn({projectId:M}){return`${Xe}/projects/${M}/installations`}function gn(M){return{token:M.token,requestStatus:2,expiresIn:te(M.expiresIn),creationTime:Date.now()}}function Kt(M,U){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,x.Z)(function*(M,U){const ve=(yield U.json()).error;return ut.create("request-failed",{requestName:M,serverCode:ve.code,serverMessage:ve.message,serverStatus:ve.status})})).apply(this,arguments)}function Tr({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function pt(M){return Me.apply(this,arguments)}function Me(){return(Me=(0,x.Z)(function*(M){const U=yield M();return U.status>=500&&U.status<600?M():U})).apply(this,arguments)}function te(M){return Number(M.replace("s","000"))}function Nt(){return(Nt=(0,x.Z)(function*({appConfig:M,heartbeatServiceProvider:U},{fid:Q}){const ve=Mn(M),Pe=Tr(M),He=U.getImmediate({optional:!0});if(He){const $t=yield He.getHeartbeatsHeader();$t&&Pe.append("x-firebase-client",$t)}const yt={method:"POST",headers:Pe,body:JSON.stringify({fid:Q,authVersion:Ce,appId:M.appId,sdkVersion:ye})},vt=yield pt(()=>fetch(ve,yt));if(vt.ok){const $t=yield vt.json();return{fid:$t.fid||Q,registrationStatus:2,refreshToken:$t.refreshToken,authToken:gn($t.authToken)}}throw yield Kt("Create Installation",vt)})).apply(this,arguments)}function Nn(M){return new Promise(U=>{setTimeout(U,M)})}const bt=/^[cdef][\w-]{21}$/,mn="";function cr(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const Q=function se(M){return function dn(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return bt.test(Q)?Q:mn}catch{return mn}}function oe(M){return`${M.appName}!${M.appId}`}const ue=new Map;function me(M,U){const Q=oe(M);Oe(Q,U),function Lt(M,U){const Q=function Ye(){return!De&&"BroadcastChannel"in self&&(De=new BroadcastChannel("[Firebase] FID Change"),De.onmessage=M=>{Oe(M.data.key,M.data.fid)}),De}();Q&&Q.postMessage({key:M,fid:U}),function Ut(){0===ue.size&&De&&(De.close(),De=null)}()}(Q,U)}function Oe(M,U){const Q=ue.get(M);if(Q)for(const ve of Q)ve(U)}let De=null;const _n="firebase-installations-database",hn=1,En="firebase-installations-store";let Rn=null;function Yt(){return Rn||(Rn=(0,Dn.X3)(_n,hn,{upgrade:(M,U)=>{0===U&&M.createObjectStore(En)}})),Rn}function Wn(M,U){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,x.Z)(function*(M,U){const Q=oe(M),Pe=(yield Yt()).transaction(En,"readwrite"),He=Pe.objectStore(En),Ke=yield He.get(Q);return yield He.put(U,Q),yield Pe.done,(!Ke||Ke.fid!==U.fid)&&me(M,U.fid),U})).apply(this,arguments)}function Hi(M){return oi.apply(this,arguments)}function oi(){return(oi=(0,x.Z)(function*(M){const U=oe(M),ve=(yield Yt()).transaction(En,"readwrite");yield ve.objectStore(En).delete(U),yield ve.done})).apply(this,arguments)}function Vt(M,U){return ai.apply(this,arguments)}function ai(){return(ai=(0,x.Z)(function*(M,U){const Q=oe(M),Pe=(yield Yt()).transaction(En,"readwrite"),He=Pe.objectStore(En),Ke=yield He.get(Q),yt=U(Ke);return void 0===yt?yield He.delete(Q):yield He.put(yt,Q),yield Pe.done,yt&&(!Ke||Ke.fid!==yt.fid)&&me(M,yt.fid),yt})).apply(this,arguments)}function us(M){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,x.Z)(function*(M){let U;const Q=yield Vt(M.appConfig,ve=>{const Pe=function qi(M){return Fr(M||{fid:cr(),registrationStatus:0})}(ve),He=function Zr(M,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(ut.create("app-offline"))};const Q={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},ve=function qs(M,U){return Ai.apply(this,arguments)}(M,Q);return{installationEntry:Q,registrationPromise:ve}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:gr(M)}:{installationEntry:U}}(M,Pe);return U=He.registrationPromise,He.installationEntry});return Q.fid===mn?{installationEntry:yield U}:{installationEntry:Q,registrationPromise:U}}),Ci.apply(this,arguments)}function Ai(){return Ai=(0,x.Z)(function*(M,U){try{const Q=yield function It(M,U){return Nt.apply(this,arguments)}(M,U);return Wn(M.appConfig,Q)}catch(Q){throw it(Q)&&409===Q.customData.serverCode?yield Hi(M.appConfig):yield Wn(M.appConfig,{fid:U.fid,registrationStatus:0}),Q}}),Ai.apply(this,arguments)}function gr(M){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,x.Z)(function*(M){let U=yield nn(M.appConfig);for(;1===U.registrationStatus;)yield Nn(100),U=yield nn(M.appConfig);if(0===U.registrationStatus){const{installationEntry:Q,registrationPromise:ve}=yield us(M);return ve||Q}return U})).apply(this,arguments)}function nn(M){return Vt(M,U=>{if(!U)throw ut.create("installation-not-found");return Fr(U)})}function Fr(M){return function Ln(M){return 1===M.registrationStatus&&M.registrationTime+St<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function Di(){return(Di=(0,x.Z)(function*({appConfig:M,heartbeatServiceProvider:U},Q){const ve=function cn(M,{fid:U}){return`${Mn(M)}/${U}/authTokens:generate`}(M,Q),Pe=function Ot(M,{refreshToken:U}){const Q=Tr(M);return Q.append("Authorization",function tt(M){return`${Ce} ${M}`}(U)),Q}(M,Q),He=U.getImmediate({optional:!0});if(He){const $t=yield He.getHeartbeatsHeader();$t&&Pe.append("x-firebase-client",$t)}const yt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:ye,appId:M.appId}})},vt=yield pt(()=>fetch(ve,yt));if(vt.ok)return gn(yield vt.json());throw yield Kt("Generate Auth Token",vt)})).apply(this,arguments)}function Lr(M){return Si.apply(this,arguments)}function Si(){return Si=(0,x.Z)(function*(M,U=!1){let Q;const ve=yield Vt(M.appConfig,He=>{if(!fs(He))throw ut.create("not-registered");const Ke=He.authToken;if(!U&&function Ss(M){return 2===M.requestStatus&&!function Ws(M){const U=Date.now();return U<M.creationTime||M.creationTime+M.expiresIn<U+wt}(M)}(Ke))return He;if(1===Ke.requestStatus)return Q=function ds(M,U){return lr.apply(this,arguments)}(M,U),He;{if(!navigator.onLine)throw ut.create("app-offline");const yt=function ke(M){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:U})}(He);return Q=function Ar(M,U){return hs.apply(this,arguments)}(M,yt),yt}});return Q?yield Q:ve.authToken}),Si.apply(this,arguments)}function lr(){return(lr=(0,x.Z)(function*(M,U){let Q=yield In(M.appConfig);for(;1===Q.authToken.requestStatus;)yield Nn(100),Q=yield In(M.appConfig);const ve=Q.authToken;return 0===ve.requestStatus?Lr(M,U):ve})).apply(this,arguments)}function In(M){return Vt(M,U=>{if(!fs(U))throw ut.create("not-registered");return function R(M){return 1===M.requestStatus&&M.requestTime+St<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function hs(){return hs=(0,x.Z)(function*(M,U){try{const Q=yield function Gs(M,U){return Di.apply(this,arguments)}(M,U),ve=Object.assign(Object.assign({},U),{authToken:Q});return yield Wn(M.appConfig,ve),Q}catch(Q){if(!it(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const ve=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield Wn(M.appConfig,ve)}else yield Hi(M.appConfig);throw Q}}),hs.apply(this,arguments)}function fs(M){return void 0!==M&&2===M.registrationStatus}function b(){return(b=(0,x.Z)(function*(M){const U=M,{installationEntry:Q,registrationPromise:ve}=yield us(U);return ve?ve.catch(console.error):Lr(U).catch(console.error),Q.fid})).apply(this,arguments)}function w(){return w=(0,x.Z)(function*(M,U=!1){const Q=M;return yield function V(M){return fe.apply(this,arguments)}(Q),(yield Lr(Q,U)).token}),w.apply(this,arguments)}function fe(){return(fe=(0,x.Z)(function*(M){const{registrationPromise:U}=yield us(M);U&&(yield U)})).apply(this,arguments)}function go(M){return ut.create("missing-app-config-values",{valueName:M})}const ln="installations",ac=M=>{const U=M.getProvider("app").getImmediate(),Q=function Vr(M){if(!M||!M.options)throw go("App Configuration");if(!M.name)throw go("App Name");const U=["projectId","apiKey","appId"];for(const Q of U)if(!M.options[Q])throw go(Q);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(U);return{app:U,appConfig:Q,heartbeatServiceProvider:(0,Re._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},cc=M=>{const U=M.getProvider("app").getImmediate(),Q=(0,Re._getProvider)(U,ln).getImmediate();return{getId:()=>function O(M){return b.apply(this,arguments)}(Q),getToken:Pe=>function D(M){return w.apply(this,arguments)}(Q,Pe)}};(function lc(){(0,Re._registerComponent)(new Pt.wA(ln,ac,"PUBLIC")),(0,Re._registerComponent)(new Pt.wA("installations-internal",cc,"PRIVATE"))})(),(0,Re.registerVersion)(Sn,Bt),(0,Re.registerVersion)(Sn,Bt,"esm2017");const pa="analytics",he="firebase_id",uc="origin",_t=6e4,sn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dc="https://www.googletagmanager.com/gtag/js",Dr=new j.Yd("@firebase/analytics"),ur=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fi(M){if(!M.startsWith(dc)){const U=ur.create("invalid-gtag-resource",{gtagURL:M});return Dr.warn(U.message),""}return M}function kf(M){return Promise.all(M.map(U=>U.catch(Q=>Q)))}function Yu(){return(Yu=(0,x.Z)(function*(M,U,Q,ve,Pe,He){const Ke=ve[Pe];try{if(Ke)yield U[Ke];else{const vt=(yield kf(Q)).find($t=>$t.measurementId===Pe);vt&&(yield U[vt.appId])}}catch(yt){Dr.error(yt)}M("config",Pe,He)})).apply(this,arguments)}function Ju(){return(Ju=(0,x.Z)(function*(M,U,Q,ve,Pe){try{let He=[];if(Pe&&Pe.send_to){let Ke=Pe.send_to;Array.isArray(Ke)||(Ke=[Ke]);const yt=yield kf(Q);for(const vt of Ke){const $t=yt.find(ps=>ps.measurementId===vt),Ur=$t&&U[$t.appId];if(!Ur){He=[];break}He.push(Ur)}}0===He.length&&(He=Object.values(U)),yield Promise.all(He),M("event",ve,Pe||{})}catch(He){Dr.error(He)}})).apply(this,arguments)}const y_=30,td=new class ft{constructor(U={},Q=1e3){this.throttleMetadata=U,this.intervalMillis=Q}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Q){this.throttleMetadata[U]=Q}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function nd(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function Fe(){return(Fe=(0,x.Z)(function*(M){var U;const{appId:Q,apiKey:ve}=M,Pe={method:"GET",headers:nd(ve)},He=sn.replace("{app-id}",Q),Ke=yield fetch(He,Pe);if(200!==Ke.status&&304!==Ke.status){let yt="";try{const vt=yield Ke.json();null!==(U=vt.error)&&void 0!==U&&U.message&&(yt=vt.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:yt})}return Ke.json()})).apply(this,arguments)}function rn(){return(rn=(0,x.Z)(function*(M,U=td,Q){const{appId:ve,apiKey:Pe,measurementId:He}=M.options;if(!ve)throw ur.create("no-app-id");if(!Pe){if(He)return{measurementId:He,appId:ve};throw ur.create("no-api-key")}const Ke=U.getThrottleMetadata(ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yt=new pc;return setTimeout((0,x.Z)(function*(){yt.abort()}),void 0!==Q?Q:_t),ga({appId:ve,apiKey:Pe,measurementId:He},Ke,yt,U)})).apply(this,arguments)}function ga(M,U,Q){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,x.Z)(function*(M,{throttleEndTimeMillis:U,backoffCount:Q},ve,Pe=td){var He;const{appId:Ke,measurementId:yt}=M;try{yield function Ml(M,U){return new Promise((Q,ve)=>{const Pe=Math.max(U-Date.now(),0),He=setTimeout(Q,Pe);M.addEventListener(()=>{clearTimeout(He),ve(ur.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(ve,U)}catch(vt){if(yt)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${vt?.message}]`),{appId:Ke,measurementId:yt};throw vt}try{const vt=yield function fc(M){return Fe.apply(this,arguments)}(M);return Pe.deleteThrottleMetadata(Ke),vt}catch(vt){const $t=vt;if(!function rd(M){if(!(M instanceof xe.ZR&&M.customData))return!1;const U=Number(M.customData.httpStatus);return 429===U||500===U||503===U||504===U}($t)){if(Pe.deleteThrottleMetadata(Ke),yt)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:Ke,measurementId:yt};throw vt}const Ur=503===Number(null===(He=$t?.customData)||void 0===He?void 0:He.httpStatus)?(0,xe.$s)(Q,Pe.intervalMillis,y_):(0,xe.$s)(Q,Pe.intervalMillis),ps={throttleEndTimeMillis:Date.now()+Ur,backoffCount:Q+1};return Pe.setThrottleMetadata(Ke,ps),Dr.debug(`Calling attemptFetch again in ${Ur} millis`),ga(M,ps,ve,Pe)}}),Sl.apply(this,arguments)}class pc{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let mo,Ie;function Ms(){return(Ms=(0,x.Z)(function*(M,U,Q,ve,Pe){if(Pe&&Pe.global)M("event",Q,ve);else{const He=yield U;M("event",Q,Object.assign(Object.assign({},ve),{send_to:He}))}})).apply(this,arguments)}function Dt(){return(Dt=(0,x.Z)(function*(M,U,Q,ve){if(ve&&ve.global)return M("set",{screen_name:Q}),Promise.resolve();M("config",yield U,{update:!0,screen_name:Q})})).apply(this,arguments)}function Oo(){return(Oo=(0,x.Z)(function*(M,U,Q,ve){if(ve&&ve.global)return M("set",{user_id:Q}),Promise.resolve();M("config",yield U,{update:!0,user_id:Q})})).apply(this,arguments)}function No(){return(No=(0,x.Z)(function*(M,U,Q,ve){if(ve&&ve.global){const Pe={};for(const He of Object.keys(Q))Pe[`user_properties.${He}`]=Q[He];return M("set",Pe),Promise.resolve()}M("config",yield U,{update:!0,user_properties:Q})})).apply(this,arguments)}function gc(){return(gc=(0,x.Z)(function*(M,U){const Q=yield M;window[`ga-disable-${Q}`]=!U})).apply(this,arguments)}function ma(){return(ma=(0,x.Z)(function*(){if(!(0,xe.hl)())return Dr.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(M){return Dr.warn(ur.create("indexeddb-unavailable",{errorInfo:M?.toString()}).message),!1}return!0})).apply(this,arguments)}function _a(){return _a=(0,x.Z)(function*(M,U,Q,ve,Pe,He,Ke){var yt;const vt=function v_(M){return rn.apply(this,arguments)}(M);vt.then(pi=>{Q[pi.measurementId]=pi.appId,M.options.measurementId&&pi.measurementId!==M.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${pi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pi=>Dr.error(pi)),U.push(vt);const $t=function _c(){return ma.apply(this,arguments)}().then(pi=>{if(pi)return ve.getId()}),[Ur,ps]=yield Promise.all([vt,$t]);(function ed(M){const U=window.document.getElementsByTagName("script");for(const Q of Object.values(U))if(Q.src&&Q.src.includes(dc)&&Q.src.includes(M))return Q;return null})(He)||function Vn(M,U){const Q=function Ff(M,U){let Q;return window.trustedTypes&&(Q=window.trustedTypes.createPolicy(M,U)),Q}("firebase-js-sdk-policy",{createScriptURL:fi}),ve=document.createElement("script"),Pe=`${dc}?l=${M}&id=${U}`;ve.src=Q?Q?.createScriptURL(Pe):Pe,ve.async=!0,document.head.appendChild(ve)}(He,Ur.measurementId),Ie&&(Pe("consent","default",Ie),function ko(M){Ie=M}(void 0)),Pe("js",new Date);const Br=null!==(yt=Ke?.config)&&void 0!==yt?yt:{};return Br[uc]="firebase",Br.update=!0,null!=ps&&(Br[he]=ps),Pe("config",Ur.measurementId,Br),mo&&(Pe("set",mo),function mc(M){mo=M}(void 0)),Ur.measurementId}),_a.apply(this,arguments)}class sd{constructor(U){this.app=U}_delete(){return delete Rs[this.app.options.appId],Promise.resolve()}}let Rs={},Ol=[];const Vf={};let Lo,Sr,ya="dataLayer",Fo="gtag",Gi=!1;function Nl(M){if(Gi)throw ur.create("already-initialized");M.dataLayerName&&(ya=M.dataLayerName),M.gtagName&&(Fo=M.gtagName)}function Wi(M,U,Q){!function Uf(){const M=[];if((0,xe.ru)()&&M.push("This is a browser extension environment."),(0,xe.zI)()||M.push("Cookies are not available."),M.length>0){const U=M.map((ve,Pe)=>`(${Pe+1}) ${ve}`).join(" "),Q=ur.create("invalid-analytics-context",{errorInfo:U});Dr.warn(Q.message)}}();const ve=M.options.appId;if(!ve)throw ur.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw ur.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rs[ve])throw ur.create("already-exists",{id:ve});if(!Gi){!function Ks(M){let U=[];Array.isArray(window[M])?U=window[M]:window[M]=U}(ya);const{wrappedGtag:He,gtagCore:Ke}=function __(M,U,Q,ve,Pe){let He=function(...Ke){window[ve].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(He=window[Pe]),window[Pe]=function Lf(M,U,Q,ve){function He(){return He=(0,x.Z)(function*(Ke,...yt){try{if("event"===Ke){const[vt,$t]=yt;yield function Xu(M,U,Q,ve,Pe){return Ju.apply(this,arguments)}(M,U,Q,vt,$t)}else if("config"===Ke){const[vt,$t]=yt;yield function hc(M,U,Q,ve,Pe,He){return Yu.apply(this,arguments)}(M,U,Q,ve,vt,$t)}else if("consent"===Ke){const[vt,$t]=yt;M("consent",vt,$t)}else if("get"===Ke){const[vt,$t,Ur]=yt;M("get",vt,$t,Ur)}else if("set"===Ke){const[vt]=yt;M("set",vt)}else M(Ke,...yt)}catch(vt){Dr.error(vt)}}),He.apply(this,arguments)}return function Pe(Ke){return He.apply(this,arguments)}}(He,M,U,Q),{gtagCore:He,wrappedGtag:window[Pe]}}(Rs,Ol,Vf,ya,Fo);Sr=He,Lo=Ke,Gi=!0}return Rs[ve]=function xl(M,U,Q,ve,Pe,He,Ke){return _a.apply(this,arguments)}(M,Ol,Vf,U,Lo,ya,Q),new sd(M)}function Zs(){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,x.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}function pe(M,U,Q){M=(0,xe.m9)(M),function id(M,U,Q,ve){return Dt.apply(this,arguments)}(Sr,Rs[M.app.options.appId],U,Q).catch(ve=>Dr.error(ve))}function yc(M,U,Q){M=(0,xe.m9)(M),function Pl(M,U,Q,ve){return Oo.apply(this,arguments)}(Sr,Rs[M.app.options.appId],U,Q).catch(ve=>Dr.error(ve))}function Ia(M,U,Q){M=(0,xe.m9)(M),function ci(M,U,Q,ve){return No.apply(this,arguments)}(Sr,Rs[M.app.options.appId],U,Q).catch(ve=>Dr.error(ve))}function Ki(M,U){M=(0,xe.m9)(M),function I_(M,U){return gc.apply(this,arguments)}(Rs[M.app.options.appId],U).catch(Q=>Dr.error(Q))}function od(M,U,Q,ve){M=(0,xe.m9)(M),function Rl(M,U,Q,ve,Pe){return Ms.apply(this,arguments)}(Sr,Rs[M.app.options.appId],U,Q,ve).catch(Pe=>Dr.error(Pe))}const Ps="@firebase/analytics";!function nr(){(0,Re._registerComponent)(new Pt.wA(pa,(U,{options:Q})=>Wi(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,Re._registerComponent)(new Pt.wA("analytics-internal",function M(U){try{const Q=U.getProvider(pa).getImmediate();return{logEvent:(ve,Pe,He)=>od(Q,ve,Pe,He)}}catch(Q){throw ur.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,Re.registerVersion)(Ps,"0.10.4"),(0,Re.registerVersion)(Ps,"0.10.4","esm2017")}()},106:(ls,qn,We)=>{We.d(qn,{Z:()=>Gn});var x=We(58),Re=We(537),j=We(303),xe=We(879);class Pt{constructor(ut,it){this._delegate=ut,this.firebase=it,(0,j._addComponent)(ut,new Re.wA("app-compat",()=>this,"PUBLIC")),this.container=ut.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this._delegate.automaticDataCollectionEnabled=ut}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ut=>{this._delegate.checkDestroyed(),ut()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ut,it=j._DEFAULT_ENTRY_NAME){var Mn;this._delegate.checkDestroyed();const gn=this._delegate.container.getProvider(ut);return!gn.isInitialized()&&"EXPLICIT"===(null===(Mn=gn.getComponent())||void 0===Mn?void 0:Mn.instantiationMode)&&gn.initialize(),gn.getImmediate({identifier:it})}_removeServiceInstance(ut,it=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ut).clearInstance(it)}_addComponent(ut){(0,j._addComponent)(this._delegate,ut)}_addOrOverwriteComponent(ut){(0,j._addOrOverwriteComponent)(this._delegate,ut)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Sn=new x.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function St(){const xt=function Bt(xt){const ut={},it={__esModule:!0,initializeApp:function Kt(pt,Me={}){const te=j.initializeApp(pt,Me);if((0,x.r3)(ut,te.name))return ut[te.name];const tt=new xt(te,it);return ut[te.name]=tt,tt},app:gn,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Tr(pt){const Me=pt.name,te=Me.replace("-compat","");if(j._registerComponent(pt)&&"PUBLIC"===pt.type){const tt=(It=gn())=>{if("function"!=typeof It[te])throw Sn.create("invalid-app-argument",{appName:Me});return It[te]()};void 0!==pt.serviceProps&&(0,x.ZB)(tt,pt.serviceProps),it[te]=tt,xt.prototype[te]=function(...It){return this._getService.bind(this,Me).apply(this,pt.multipleInstances?It:[])}}return"PUBLIC"===pt.type?it[te]:null},removeApp:function Mn(pt){delete ut[pt]},useAsService:function Ot(pt,Me){return"serverAuth"===Me?null:Me},modularAPIs:j}};function gn(pt){if(!(0,x.r3)(ut,pt=pt||j._DEFAULT_ENTRY_NAME))throw Sn.create("no-app",{appName:pt});return ut[pt]}return it.default=it,Object.defineProperty(it,"apps",{get:function Zt(){return Object.keys(ut).map(pt=>ut[pt])}}),gn.App=xt,it}(Pt);return xt.INTERNAL=Object.assign(Object.assign({},xt.INTERNAL),{createFirebaseNamespace:St,extendNamespace:function ut(it){(0,x.ZB)(xt,it)},createSubscribe:x.ne,ErrorFactory:x.LL,deepExtend:x.ZB}),xt}(),Ce=new xe.Yd("@firebase/app-compat");if((0,x.jU)()&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Gn=ye;!function jt(xt){(0,j.registerVersion)("@firebase/app-compat","0.2.35",xt)}()},303:(ls,qn,We)=>{We.r(qn),We.d(qn,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>oe,_addComponent:()=>Oe,_addOrOverwriteComponent:()=>Lt,_apps:()=>me,_clearComponents:()=>En,_components:()=>ce,_getProvider:()=>Ye,_isFirebaseApp:()=>_n,_isFirebaseServerApp:()=>hn,_registerComponent:()=>De,_removeServiceInstance:()=>Ut,_serverApps:()=>Ee,deleteApp:()=>Ci,getApp:()=>ai,getApps:()=>us,initializeApp:()=>oi,initializeServerApp:()=>Vt,onLog:()=>qs,registerVersion:()=>Zr,setLogLevel:()=>Ai});var x=We(861),Re=We(537),j=We(879),xe=We(58),Pt=We(878);class Dn{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(O=>{if(function Sn(ke){const R=ke.getComponent();return"VERSION"===R?.type}(O)){const b=O.getImmediate();return`${b.library}/${b.version}`}return null}).filter(O=>O).join(" ")}}const Bt="@firebase/app",St="0.10.5",ye=new j.Yd("@firebase/app"),oe="[DEFAULT]",ue={[Bt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},me=new Map,Ee=new Map,ce=new Map;function Oe(ke,R){try{ke.container.addComponent(R)}catch(O){ye.debug(`Component ${R.name} failed to register with FirebaseApp ${ke.name}`,O)}}function Lt(ke,R){ke.container.addOrOverwriteComponent(R)}function De(ke){const R=ke.name;if(ce.has(R))return ye.debug(`There were multiple attempts to register component ${R}.`),!1;ce.set(R,ke);for(const O of me.values())Oe(O,ke);for(const O of Ee.values())Oe(O,ke);return!0}function Ye(ke,R){const O=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return O&&O.triggerHeartbeat(),ke.container.getProvider(R)}function Ut(ke,R,O=oe){Ye(ke,R).clearInstance(O)}function _n(ke){return void 0!==ke.options}function hn(ke){return void 0!==ke.settings}function En(){ce.clear()}const Yt=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wn{constructor(R,O,b){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},O),this._name=O.name,this._automaticDataCollectionEnabled=O.automaticDataCollectionEnabled,this._container=b,this.container.addComponent(new Re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}class Cr extends Wn{constructor(R,O,b,D){const w=void 0!==O.automaticDataCollectionEnabled&&O.automaticDataCollectionEnabled,V={name:b,automaticDataCollectionEnabled:w};super(void 0!==R.apiKey?R:R.options,V,D),this._serverConfig=Object.assign({automaticDataCollectionEnabled:w},O),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,O.releaseOnDeref=void 0,Zr(Bt,St,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(R){this.isDeleted||(this._refCount++,void 0!==R&&this._finalizationRegistry.register(R,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ci(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yt.create("server-app-deleted")}}const Hi="10.12.2";function oi(ke,R={}){let O=ke;"object"!=typeof R&&(R={name:R});const b=Object.assign({name:oe,automaticDataCollectionEnabled:!1},R),D=b.name;if("string"!=typeof D||!D)throw Yt.create("bad-app-name",{appName:String(D)});if(O||(O=(0,xe.aH)()),!O)throw Yt.create("no-options");const w=me.get(D);if(w){if((0,xe.vZ)(O,w.options)&&(0,xe.vZ)(b,w.config))return w;throw Yt.create("duplicate-app",{appName:D})}const V=new Re.H0(D);for(const Ne of ce.values())V.addComponent(Ne);const fe=new Wn(O,b,V);return me.set(D,fe),fe}function Vt(ke,R){if((0,xe.jU)())throw Yt.create("invalid-server-app-environment");let O;void 0===R.automaticDataCollectionEnabled&&(R.automaticDataCollectionEnabled=!1),O=_n(ke)?ke.options:ke;const b=Object.assign(Object.assign({},R),O);if(void 0!==b.releaseOnDeref&&delete b.releaseOnDeref,void 0!==R.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Yt.create("finalization-registry-not-supported",{});const w=""+(ze=JSON.stringify(b),[...ze].reduce((mt,Xt)=>Math.imul(31,mt)+Xt.charCodeAt(0)|0,0)),V=Ee.get(w);var ze;if(V)return V.incRefCount(R.releaseOnDeref),V;const fe=new Re.H0(w);for(const ze of ce.values())fe.addComponent(ze);const Ne=new Cr(O,R,w,fe);return Ee.set(w,Ne),Ne}function ai(ke=oe){const R=me.get(ke);if(!R&&ke===oe&&(0,xe.aH)())return oi();if(!R)throw Yt.create("no-app",{appName:ke});return R}function us(){return Array.from(me.values())}function Ci(ke){return qi.apply(this,arguments)}function qi(){return(qi=(0,x.Z)(function*(ke){let R=!1;const O=ke.name;me.has(O)?(R=!0,me.delete(O)):Ee.has(O)&&ke.decRefCount()<=0&&(Ee.delete(O),R=!0),R&&(yield Promise.all(ke.container.getProviders().map(b=>b.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function Zr(ke,R,O){var b;let D=null!==(b=ue[ke])&&void 0!==b?b:ke;O&&(D+=`-${O}`);const w=D.match(/\s|\//),V=R.match(/\s|\//);if(w||V){const fe=[`Unable to register library "${D}" with version "${R}":`];return w&&fe.push(`library name "${D}" contains illegal characters (whitespace or "/")`),w&&V&&fe.push("and"),V&&fe.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void ye.warn(fe.join(" "))}De(new Re.wA(`${D}-version`,()=>({library:D,version:R}),"VERSION"))}function qs(ke,R){if(null!==ke&&"function"!=typeof ke)throw Yt.create("invalid-log-argument");(0,j.Am)(ke,R)}function Ai(ke){(0,j.Ub)(ke)}const gr="firebase-heartbeat-database",Qr=1,nn="firebase-heartbeat-store";let Fr=null;function Ln(){return Fr||(Fr=(0,Pt.X3)(gr,Qr,{upgrade:(ke,R)=>{if(0===R)try{ke.createObjectStore(nn)}catch(O){console.warn(O)}}}).catch(ke=>{throw Yt.create("idb-open",{originalErrorMessage:ke.message})})),Fr}function Di(){return(Di=(0,x.Z)(function*(ke){try{const O=(yield Ln()).transaction(nn),b=yield O.objectStore(nn).get(Si(ke));return yield O.done,b}catch(R){if(R instanceof xe.ZR)ye.warn(R.message);else{const O=Yt.create("idb-get",{originalErrorMessage:R?.message});ye.warn(O.message)}}})).apply(this,arguments)}function cn(ke,R){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,x.Z)(function*(ke,R){try{const b=(yield Ln()).transaction(nn,"readwrite");yield b.objectStore(nn).put(R,Si(ke)),yield b.done}catch(O){if(O instanceof xe.ZR)ye.warn(O.message);else{const b=Yt.create("idb-set",{originalErrorMessage:O?.message});ye.warn(b.message)}}})).apply(this,arguments)}function Si(ke){return`${ke.name}!${ke.options.appId}`}class In{constructor(R){this.container=R,this._heartbeatsCache=null;const O=this.container.getProvider("app").getImmediate();this._storage=new fs(O),this._heartbeatsCachePromise=this._storage.read().then(b=>(this._heartbeatsCache=b,b))}triggerHeartbeat(){var R=this;return(0,x.Z)(function*(){var O,b;const w=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),V=Ar();if((null!=(null===(O=R._heartbeatsCache)||void 0===O?void 0:O.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(b=R._heartbeatsCache)||void 0===b?void 0:b.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==V&&!R._heartbeatsCache.heartbeats.some(fe=>fe.date===V))return R._heartbeatsCache.heartbeats.push({date:V,agent:w}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(fe=>{const Ne=new Date(fe.date).valueOf();return Date.now()-Ne<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,x.Z)(function*(){var O;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(O=R._heartbeatsCache)||void 0===O?void 0:O.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const b=Ar(),{heartbeatsToSend:D,unsentEntries:w}=function hs(ke,R=1024){const O=[];let b=ke.slice();for(const D of ke){const w=O.find(V=>V.agent===D.agent);if(w){if(w.dates.push(D.date),Ss(O)>R){w.dates.pop();break}}else if(O.push({agent:D.agent,dates:[D.date]}),Ss(O)>R){O.pop();break}b=b.slice(1)}return{heartbeatsToSend:O,unsentEntries:b}}(R._heartbeatsCache.heartbeats),V=(0,xe.L)(JSON.stringify({version:2,heartbeats:D}));return R._heartbeatsCache.lastSentHeartbeatDate=b,w.length>0?(R._heartbeatsCache.heartbeats=w,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),V})()}}function Ar(){return(new Date).toISOString().substring(0,10)}class fs{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,x.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,x.Z)(function*(){if(yield R._canUseIndexedDBPromise){const b=yield function Gs(ke){return Di.apply(this,arguments)}(R.app);return b?.heartbeats?b:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var O=this;return(0,x.Z)(function*(){var b;if(yield O._canUseIndexedDBPromise){const w=yield O.read();return cn(O.app,{lastSentHeartbeatDate:null!==(b=R.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var O=this;return(0,x.Z)(function*(){var b;if(yield O._canUseIndexedDBPromise){const w=yield O.read();return cn(O.app,{lastSentHeartbeatDate:null!==(b=R.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:[...w.heartbeats,...R.heartbeats]})}})()}}function Ss(ke){return(0,xe.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function Ws(ke){De(new Re.wA("platform-logger",R=>new Dn(R),"PRIVATE")),De(new Re.wA("heartbeat",R=>new In(R),"PRIVATE")),Zr(Bt,St,ke),Zr(Bt,St,"esm2017"),Zr("fire-js","")}("")},537:(ls,qn,We)=>{We.d(qn,{H0:()=>Bt,wA:()=>j});var x=We(861),Re=We(58);class j{constructor(ye,Ce,Xe){this.name=ye,this.instanceFactory=Ce,this.type=Xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const xe="[DEFAULT]";class Pt{constructor(ye,Ce){this.name=ye,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const Ce=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(Ce)){const Xe=new Re.BH;if(this.instancesDeferred.set(Ce,Xe),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const wt=this.getOrInitializeService({instanceIdentifier:Ce});wt&&Xe.resolve(wt)}catch{}}return this.instancesDeferred.get(Ce).promise}getImmediate(ye){var Ce;const Xe=this.normalizeInstanceIdentifier(ye?.identifier),wt=null!==(Ce=ye?.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(Xe)&&!this.shouldAutoInitialize()){if(wt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Xe})}catch(jt){if(wt)return null;throw jt}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function Sn(St){return"EAGER"===St.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:xe})}catch{}for(const[Ce,Xe]of this.instancesDeferred.entries()){const wt=this.normalizeInstanceIdentifier(Ce);try{const jt=this.getOrInitializeService({instanceIdentifier:wt});Xe.resolve(jt)}catch{}}}}clearInstance(ye=xe){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,x.Z)(function*(){const Ce=Array.from(ye.instances.values());yield Promise.all([...Ce.filter(Xe=>"INTERNAL"in Xe).map(Xe=>Xe.INTERNAL.delete()),...Ce.filter(Xe=>"_delete"in Xe).map(Xe=>Xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=xe){return this.instances.has(ye)}getOptions(ye=xe){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:Ce={}}=ye,Xe=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Xe))throw Error(`${this.name}(${Xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const wt=this.getOrInitializeService({instanceIdentifier:Xe,options:Ce});for(const[jt,Gn]of this.instancesDeferred.entries())Xe===this.normalizeInstanceIdentifier(jt)&&Gn.resolve(wt);return wt}onInit(ye,Ce){var Xe;const wt=this.normalizeInstanceIdentifier(Ce),jt=null!==(Xe=this.onInitCallbacks.get(wt))&&void 0!==Xe?Xe:new Set;jt.add(ye),this.onInitCallbacks.set(wt,jt);const Gn=this.instances.get(wt);return Gn&&ye(Gn,wt),()=>{jt.delete(ye)}}invokeOnInitCallbacks(ye,Ce){const Xe=this.onInitCallbacks.get(Ce);if(Xe)for(const wt of Xe)try{wt(ye,Ce)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:Ce={}}){let Xe=this.instances.get(ye);if(!Xe&&this.component&&(Xe=this.component.instanceFactory(this.container,{instanceIdentifier:(St=ye,St===xe?void 0:St),options:Ce}),this.instances.set(ye,Xe),this.instancesOptions.set(ye,Ce),this.invokeOnInitCallbacks(Xe,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Xe)}catch{}var St;return Xe||null}normalizeInstanceIdentifier(ye=xe){return this.component?this.component.multipleInstances?ye:xe:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Bt{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const Ce=this.getProvider(ye.name);if(Ce.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);Ce.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const Ce=new Pt(ye,this);return this.providers.set(ye,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},879:(ls,qn,We)=>{We.d(qn,{Am:()=>St,Ub:()=>Bt,Yd:()=>Sn,in:()=>Re});const x=[];var Re=function(ye){return ye[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",ye}(Re||{});const j={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},xe=Re.INFO,Pt={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},Dn=(ye,Ce,...Xe)=>{if(Ce<ye.logLevel)return;const wt=(new Date).toISOString(),jt=Pt[Ce];if(!jt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[jt](`[${wt}]  ${ye.name}:`,...Xe)};class Sn{constructor(Ce){this.name=Ce,this._logLevel=xe,this._logHandler=Dn,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in Re))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?j[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...Ce),this._logHandler(this,Re.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...Ce),this._logHandler(this,Re.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...Ce),this._logHandler(this,Re.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...Ce),this._logHandler(this,Re.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...Ce),this._logHandler(this,Re.ERROR,...Ce)}}function Bt(ye){x.forEach(Ce=>{Ce.setLogLevel(ye)})}function St(ye,Ce){for(const Xe of x){let wt=null;Ce&&Ce.level&&(wt=j[Ce.level]),Xe.userLogHandler=null===ye?null:(jt,Gn,...xt)=>{const ut=xt.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");Gn>=(wt??jt.logLevel)&&ye({level:Re[Gn].toLowerCase(),message:ut,args:xt,type:jt.name})}}}},365:(ls,qn,We)=>{We.r(qn);var x=We(861),Re=We(106),j=We(35),xe=We(58),Sn=(We(303),We(879),We(537));function Bt(){return window}function Ce(){return Ce=(0,x.Z)(function*(b,D,w){var V;const{BuildInfo:fe}=Bt();(0,j.au)(D.sessionId,"AuthEvent did not contain a session ID");const Ne=yield function it(b){return Mn.apply(this,arguments)}(D.sessionId),ze={};return(0,j.av)()?ze.ibi=fe.packageName:(0,j.aw)()?ze.apn=fe.packageName:(0,j.ax)(b,"operation-not-supported-in-this-environment"),fe.displayName&&(ze.appDisplayName=fe.displayName),ze.sessionId=Ne,(0,j.ay)(b,w,D.type,void 0,null!==(V=D.eventId)&&void 0!==V?V:void 0,ze)}),Ce.apply(this,arguments)}function wt(){return(wt=(0,x.Z)(function*(b){const{BuildInfo:D}=Bt(),w={};(0,j.av)()?w.iosBundleId=D.packageName:(0,j.aw)()?w.androidPackageName=D.packageName:(0,j.ax)(b,"operation-not-supported-in-this-environment"),yield(0,j.az)(b,w)})).apply(this,arguments)}function xt(){return(xt=(0,x.Z)(function*(b,D,w){const{cordova:V}=Bt();let fe=()=>{};try{yield new Promise((Ne,ze)=>{let mt=null;function Xt(){var ot;Ne();const Vr=null===(ot=V.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Vr&&Vr(),"function"==typeof w?.close&&w.close()}function Le(){mt||(mt=window.setTimeout(()=>{ze((0,j.aB)(b,"redirect-cancelled-by-user"))},2e3))}function bn(){"visible"===document?.visibilityState&&Le()}D.addPassiveListener(Xt),document.addEventListener("resume",Le,!1),(0,j.aw)()&&document.addEventListener("visibilitychange",bn,!1),fe=()=>{D.removePassiveListener(Xt),document.removeEventListener("resume",Le,!1),document.removeEventListener("visibilitychange",bn,!1),mt&&window.clearTimeout(mt)}})}finally{fe()}})).apply(this,arguments)}function Mn(){return(Mn=(0,x.Z)(function*(b){const D=function gn(b){if((0,j.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const D=new ArrayBuffer(b.length),w=new Uint8Array(D);for(let V=0;V<b.length;V++)w[V]=b.charCodeAt(V);return w}(b),w=yield crypto.subtle.digest("SHA-256",D);return Array.from(new Uint8Array(w)).map(fe=>fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Zt extends j.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(D=>{this.resolveInialized=D})}addPassiveListener(D){this.passiveListeners.add(D)}removePassiveListener(D){this.passiveListeners.delete(D)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(D){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(D)),super.onEvent(D)}initialized(){var D=this;return(0,x.Z)(function*(){yield D.initPromise})()}}function pt(b){return Me.apply(this,arguments)}function Me(){return(Me=(0,x.Z)(function*(b){const D=yield It()._get(Nt(b));return D&&(yield It()._remove(Nt(b))),D})).apply(this,arguments)}function tt(){const b=[];for(let w=0;w<20;w++){const V=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(V))}return b.join("")}function It(){return(0,j.aE)(j.b)}function Nt(b){return(0,j.aF)("authEvent",b.config.apiKey,b.name)}function bt(b){if(!b?.includes("?"))return{};const[D,...w]=b.split("?");return(0,xe.zd)(w.join("?"))}const se=class cr{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aG,this._overrideRedirectResult=j.aH}_initialize(D){var w=this;return(0,x.Z)(function*(){const V=D._key();let fe=w.eventManagers.get(V);return fe||(fe=new Zt(D),w.eventManagers.set(V,fe),w.attachCallbackListeners(D,fe)),fe})()}_openPopup(D){(0,j.ax)(D,"operation-not-supported-in-this-environment")}_openRedirect(D,w,V,fe){var Ne=this;return(0,x.Z)(function*(){!function ut(b){var D,w,V,fe,Ne,ze,mt,Xt,Le,bn;const ot=Bt();(0,j.aC)("function"==typeof(null===(D=ot?.universalLinks)||void 0===D?void 0:D.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.aC)(typeof(null===(w=ot?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.aC)("function"==typeof(null===(Ne=null===(fe=null===(V=ot?.cordova)||void 0===V?void 0:V.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Ne?void 0:Ne.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aC)("function"==typeof(null===(Xt=null===(mt=null===(ze=ot?.cordova)||void 0===ze?void 0:ze.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Xt?void 0:Xt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aC)("function"==typeof(null===(bn=null===(Le=ot?.cordova)||void 0===Le?void 0:Le.InAppBrowser)||void 0===bn?void 0:bn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(D);const ze=yield Ne._initialize(D);yield ze.initialized(),ze.resetRedirect(),(0,j.aI)(),yield Ne._originValidation(D);const mt=function Tr(b,D,w=null){return{type:D,eventId:w,urlResponse:null,sessionId:tt(),postBody:null,tenantId:b.tenantId,error:(0,j.aB)(b,"no-auth-event")}}(D,V,fe);yield function Ot(b,D){return It()._set(Nt(b),D)}(D,mt);const Xt=yield function ye(b,D,w){return Ce.apply(this,arguments)}(D,mt,w),Le=yield function jt(b){const{cordova:D}=Bt();return new Promise(w=>{D.plugins.browsertab.isAvailable(V=>{let fe=null;V?D.plugins.browsertab.openUrl(b):fe=D.InAppBrowser.open(b,(0,j.aA)()?"_blank":"_system","location=yes"),w(fe)})})}(Xt);return function Gn(b,D,w){return xt.apply(this,arguments)}(D,ze,Le)})()}_isIframeWebStorageSupported(D,w){throw new Error("Method not implemented.")}_originValidation(D){const w=D._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Xe(b){return wt.apply(this,arguments)}(D)),this.originValidationPromises[w]}attachCallbackListeners(D,w){const{universalLinks:V,handleOpenURL:fe,BuildInfo:Ne}=Bt(),ze=setTimeout((0,x.Z)(function*(){yield pt(D),w.onEvent(oe())}),500),mt=function(){var bn=(0,x.Z)(function*(ot){clearTimeout(ze);const Vr=yield pt(D);let go=null;Vr&&ot?.url&&(go=function te(b,D){var w,V;const fe=function dn(b){const D=bt(b),w=D.link?decodeURIComponent(D.link):void 0,V=bt(w).link,fe=D.deep_link_id?decodeURIComponent(D.deep_link_id):void 0;return bt(fe).link||fe||V||w||b}(D);if(fe.includes("/__/auth/callback")){const Ne=bt(fe),ze=Ne.firebaseError?function Nn(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Ne.firebaseError)):null,mt=null===(V=null===(w=ze?.code)||void 0===w?void 0:w.split("auth/"))||void 0===V?void 0:V[1],Xt=mt?(0,j.aB)(mt):null;return Xt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Xt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:fe,postBody:null}}return null}(Vr,ot.url)),w.onEvent(go||oe())});return function(Vr){return bn.apply(this,arguments)}}();typeof V<"u"&&"function"==typeof V.subscribe&&V.subscribe(null,mt);const Xt=fe,Le=`${Ne.packageName.toLowerCase()}://`;Bt().handleOpenURL=function(){var bn=(0,x.Z)(function*(ot){if(ot.toLowerCase().startsWith(Le)&&mt({url:ot}),"function"==typeof Xt)try{Xt(ot)}catch(Vr){console.error(Vr)}});return function(ot){return bn.apply(this,arguments)}}()}};function oe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.aB)("no-auth-event")}}function Oe(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function De(b=(0,xe.z$)()){return!("file:"!==Oe()&&"ionic:"!==Oe()&&"capacitor:"!==Oe()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function En(){try{const b=self.localStorage,D=j.aN();if(b)return b.setItem(D,"1"),b.removeItem(D),!function hn(b=(0,xe.z$)()){return function Ut(){return(0,xe.w1)()&&11===document?.documentMode}()||function _n(b=(0,xe.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,xe.hl)()}catch{return Rn()&&(0,xe.hl)()}return!1}function Rn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yt(){return(function Lt(){return"http:"===Oe()||"https:"===Oe()}()||(0,xe.ru)()||De())&&!function Ye(){return(0,xe.b$)()||(0,xe.UG)()}()&&En()&&!Rn()}function Wn(){return De()&&typeof document<"u"}function Hi(){return(Hi=(0,x.Z)(function*(){return!!Wn()&&new Promise(b=>{const D=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(D),b(!0)})})})).apply(this,arguments)}const Vt={LOCAL:"local",NONE:"none",SESSION:"session"},ai=j.aC,us="persistence";function qi(b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,x.Z)(function*(b){yield b._initializationPromise;const D=Ai(),w=j.aF(us,b.config.apiKey,b.name);D&&D.setItem(w,b._getPersistence())})).apply(this,arguments)}function Ai(){var b;try{return(null===(b=function oi(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const gr=j.aC;class Qr{constructor(){this.browserResolver=j.aE(j.k),this.cordovaResolver=j.aE(se),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aG,this._overrideRedirectResult=j.aH}_initialize(D){var w=this;return(0,x.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(D)})()}_openPopup(D,w,V,fe){var Ne=this;return(0,x.Z)(function*(){return yield Ne.selectUnderlyingResolver(),Ne.assertedUnderlyingResolver._openPopup(D,w,V,fe)})()}_openRedirect(D,w,V,fe){var Ne=this;return(0,x.Z)(function*(){return yield Ne.selectUnderlyingResolver(),Ne.assertedUnderlyingResolver._openRedirect(D,w,V,fe)})()}_isIframeWebStorageSupported(D,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(D,w)}_originValidation(D){return this.assertedUnderlyingResolver._originValidation(D)}get _shouldInitProactively(){return Wn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var D=this;return(0,x.Z)(function*(){if(D.underlyingResolver)return;const w=yield function Cr(){return Hi.apply(this,arguments)}();D.underlyingResolver=w?D.cordovaResolver:D.browserResolver})()}}function nn(b){return b.unwrap()}function Ln(b){return Di(b)}function Di(b){const{_tokenResponse:D}=b instanceof xe.ZR?b.customData:b;if(!D)return null;if(!(b instanceof xe.ZR)&&"temporaryProof"in D&&"phoneNumber"in D)return j.P.credentialFromResult(b);const w=D.providerId;if(!w||w===j.p.PASSWORD)return null;let V;switch(w){case j.p.GOOGLE:V=j.X;break;case j.p.FACEBOOK:V=j.W;break;case j.p.GITHUB:V=j.Y;break;case j.p.TWITTER:V=j.$;break;default:const{oauthIdToken:fe,oauthAccessToken:Ne,oauthTokenSecret:ze,pendingToken:mt,nonce:Xt}=D;return Ne||ze||fe||mt?mt?w.startsWith("saml.")?j.aQ._create(w,mt):j.N._fromParams({providerId:w,signInMethod:w,pendingToken:mt,idToken:fe,accessToken:Ne}):new j.Z(w).credential({idToken:fe,accessToken:Ne,rawNonce:Xt}):null}return b instanceof xe.ZR?V.credentialFromError(b):V.credentialFromResult(b)}function cn(b,D){return D.catch(w=>{throw w instanceof xe.ZR&&function Gs(b,D){var w;const V=null===(w=D.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===D?.code)D.resolver=new ds(b,j.as(b,D));else if(V){const fe=Di(D),Ne=D;fe&&(Ne.credential=fe,Ne.tenantId=V.tenantId||void 0,Ne.email=V.email||void 0,Ne.phoneNumber=V.phoneNumber||void 0)}}(b,w),w}).then(w=>{const fe=w.user;return{operationType:w.operationType,credential:Ln(w),additionalUserInfo:j.aq(w),user:lr.getOrCreate(fe)}})}function Lr(b,D){return Si.apply(this,arguments)}function Si(){return(Si=(0,x.Z)(function*(b,D){const w=yield D;return{verificationId:w.verificationId,confirm:V=>cn(b,w.confirm(V))}})).apply(this,arguments)}class ds{constructor(D,w){this.resolver=w,this.auth=function Fr(b){return b.wrapped()}(D)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(D){return cn(nn(this.auth),this.resolver.resolveSignIn(D))}}class lr{constructor(D){this._delegate=D,this.multiFactor=j.at(D)}static getOrCreate(D){return lr.USER_MAP.has(D)||lr.USER_MAP.set(D,new lr(D)),lr.USER_MAP.get(D)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(D){return this._delegate.getIdTokenResult(D)}getIdToken(D){return this._delegate.getIdToken(D)}linkAndRetrieveDataWithCredential(D){return this.linkWithCredential(D)}linkWithCredential(D){var w=this;return(0,x.Z)(function*(){return cn(w.auth,j.a2(w._delegate,D))})()}linkWithPhoneNumber(D,w){var V=this;return(0,x.Z)(function*(){return Lr(V.auth,j.l(V._delegate,D,w))})()}linkWithPopup(D){var w=this;return(0,x.Z)(function*(){return cn(w.auth,j.d(w._delegate,D,Qr))})()}linkWithRedirect(D){var w=this;return(0,x.Z)(function*(){return yield qi(j.aJ(w.auth)),j.g(w._delegate,D,Qr)})()}reauthenticateAndRetrieveDataWithCredential(D){return this.reauthenticateWithCredential(D)}reauthenticateWithCredential(D){var w=this;return(0,x.Z)(function*(){return cn(w.auth,j.a3(w._delegate,D))})()}reauthenticateWithPhoneNumber(D,w){return Lr(this.auth,j.r(this._delegate,D,w))}reauthenticateWithPopup(D){return cn(this.auth,j.e(this._delegate,D,Qr))}reauthenticateWithRedirect(D){var w=this;return(0,x.Z)(function*(){return yield qi(j.aJ(w.auth)),j.h(w._delegate,D,Qr)})()}sendEmailVerification(D){return j.ag(this._delegate,D)}unlink(D){var w=this;return(0,x.Z)(function*(){return yield j.ap(w._delegate,D),w})()}updateEmail(D){return j.al(this._delegate,D)}updatePassword(D){return j.am(this._delegate,D)}updatePhoneNumber(D){return j.u(this._delegate,D)}updateProfile(D){return j.ak(this._delegate,D)}verifyBeforeUpdateEmail(D,w){return j.ah(this._delegate,D,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lr.USER_MAP=new WeakMap;const In=j.aC;let Ar=(()=>{class b{constructor(w,V){if(this.app=w,V.isInitialized())return this._delegate=V.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:fe}=w.options;In(fe,"invalid-api-key",{appName:w.name}),In(fe,"invalid-api-key",{appName:w.name});const Ne=typeof window<"u"?Qr:void 0;this._delegate=V.initialize({options:{persistence:fs(fe,w.name),popupRedirectResolver:Ne}}),this._delegate._updateErrorMap(j.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,V){j.K(this._delegate,w,V)}applyActionCode(w){return j.a7(this._delegate,w)}checkActionCode(w){return j.a8(this._delegate,w)}confirmPasswordReset(w,V){return j.a6(this._delegate,w,V)}createUserWithEmailAndPassword(w,V){var fe=this;return(0,x.Z)(function*(){return cn(fe._delegate,j.aa(fe._delegate,w,V))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return j.af(this._delegate,w)}isSignInWithEmailLink(w){return j.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,x.Z)(function*(){In(Yt(),w._delegate,"operation-not-supported-in-this-environment");const V=yield j.j(w._delegate,Qr);return V?cn(w._delegate,Promise.resolve(V)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function ue(b,D){(0,j.aJ)(b)._logFramework(D)}(this._delegate,w)}onAuthStateChanged(w,V,fe){const{next:Ne,error:ze,complete:mt}=hs(w,V,fe);return this._delegate.onAuthStateChanged(Ne,ze,mt)}onIdTokenChanged(w,V,fe){const{next:Ne,error:ze,complete:mt}=hs(w,V,fe);return this._delegate.onIdTokenChanged(Ne,ze,mt)}sendSignInLinkToEmail(w,V){return j.ac(this._delegate,w,V)}sendPasswordResetEmail(w,V){return j.a5(this._delegate,w,V||void 0)}setPersistence(w){var V=this;return(0,x.Z)(function*(){let fe;switch(function Ci(b,D){ai(Object.values(Vt).includes(D),b,"invalid-persistence-type"),(0,xe.b$)()?ai(D!==Vt.SESSION,b,"unsupported-persistence-type"):(0,xe.UG)()?ai(D===Vt.NONE,b,"unsupported-persistence-type"):Rn()?ai(D===Vt.NONE||D===Vt.LOCAL&&(0,xe.hl)(),b,"unsupported-persistence-type"):ai(D===Vt.NONE||En(),b,"unsupported-persistence-type")}(V._delegate,w),w){case Vt.SESSION:fe=j.a;break;case Vt.LOCAL:fe=(yield j.aE(j.i)._isAvailable())?j.i:j.b;break;case Vt.NONE:fe=j.U;break;default:return j.ax("argument-error",{appName:V._delegate.name})}return V._delegate.setPersistence(fe)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return cn(this._delegate,j.a0(this._delegate))}signInWithCredential(w){return cn(this._delegate,j.a1(this._delegate,w))}signInWithCustomToken(w){return cn(this._delegate,j.a4(this._delegate,w))}signInWithEmailAndPassword(w,V){return cn(this._delegate,j.ab(this._delegate,w,V))}signInWithEmailLink(w,V){return cn(this._delegate,j.ae(this._delegate,w,V))}signInWithPhoneNumber(w,V){return Lr(this._delegate,j.s(this._delegate,w,V))}signInWithPopup(w){var V=this;return(0,x.Z)(function*(){return In(Yt(),V._delegate,"operation-not-supported-in-this-environment"),cn(V._delegate,j.c(V._delegate,w,Qr))})()}signInWithRedirect(w){var V=this;return(0,x.Z)(function*(){return In(Yt(),V._delegate,"operation-not-supported-in-this-environment"),yield qi(V._delegate),j.f(V._delegate,w,Qr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return j.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Vt,b})();function hs(b,D,w){let V=b;"function"!=typeof b&&({next:V,error:D,complete:w}=b);const fe=V;return{next:ze=>fe(ze&&lr.getOrCreate(ze)),error:D,complete:w}}function fs(b,D){const w=function qs(b,D){const w=Ai();if(!w)return[];const V=j.aF(us,b,D);switch(w.getItem(V)){case Vt.NONE:return[j.U];case Vt.LOCAL:return[j.i,j.a];case Vt.SESSION:return[j.a];default:return[]}}(b,D);if(typeof self<"u"&&!w.includes(j.i)&&w.push(j.i),typeof window<"u")for(const V of[j.b,j.a])w.includes(V)||w.push(V);return w.includes(j.U)||w.push(j.U),w}class Ss{constructor(){this.providerId="phone",this._delegate=new j.P(nn(Re.Z.auth()))}static credential(D,w){return j.P.credential(D,w)}verifyPhoneNumber(D,w){return this._delegate.verifyPhoneNumber(D,w)}unwrap(){return this._delegate}}Ss.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,Ss.PROVIDER_ID=j.P.PROVIDER_ID;const Ws=j.aC;class ke{constructor(D,w,V=Re.Z.app()){var fe;Ws(null===(fe=V.options)||void 0===fe?void 0:fe.apiKey,"invalid-api-key",{appName:V.name}),this._delegate=new j.R(V.auth(),D,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function O(b){b.INTERNAL.registerComponent(new Sn.wA("auth-compat",D=>{const w=D.getProvider("app-compat").getImmediate(),V=D.getProvider("auth");return new Ar(w,V)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.V,FacebookAuthProvider:j.W,GithubAuthProvider:j.Y,GoogleAuthProvider:j.X,OAuthProvider:j.Z,SAMLAuthProvider:j._,PhoneAuthProvider:Ss,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:ke,TwitterAuthProvider:j.$,Auth:Ar,AuthCredential:j.L,Error:xe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.9")}(Re.Z)},878:(ls,qn,We)=>{We.d(qn,{X3:()=>gn});var x=We(861);const Re=(Me,te)=>te.some(tt=>Me instanceof tt);let j,xe;const Sn=new WeakMap,Bt=new WeakMap,St=new WeakMap,ye=new WeakMap,Ce=new WeakMap;let jt={get(Me,te,tt){if(Me instanceof IDBTransaction){if("done"===te)return Bt.get(Me);if("objectStoreNames"===te)return Me.objectStoreNames||St.get(Me);if("store"===te)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return it(Me[te])},set:(Me,te,tt)=>(Me[te]=tt,!0),has:(Me,te)=>Me instanceof IDBTransaction&&("done"===te||"store"===te)||te in Me};function ut(Me){return"function"==typeof Me?function xt(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Dn(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Me)?function(...te){return Me.apply(Mn(this),te),it(Sn.get(this))}:function(...te){return it(Me.apply(Mn(this),te))}:function(te,...tt){const It=Me.call(Mn(this),te,...tt);return St.set(It,te.sort?te.sort():[te]),it(It)}}(Me):(Me instanceof IDBTransaction&&function wt(Me){if(Bt.has(Me))return;const te=new Promise((tt,It)=>{const Nt=()=>{Me.removeEventListener("complete",Nn),Me.removeEventListener("error",dn),Me.removeEventListener("abort",dn)},Nn=()=>{tt(),Nt()},dn=()=>{It(Me.error||new DOMException("AbortError","AbortError")),Nt()};Me.addEventListener("complete",Nn),Me.addEventListener("error",dn),Me.addEventListener("abort",dn)});Bt.set(Me,te)}(Me),Re(Me,function Pt(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Me,jt):Me)}function it(Me){if(Me instanceof IDBRequest)return function Xe(Me){const te=new Promise((tt,It)=>{const Nt=()=>{Me.removeEventListener("success",Nn),Me.removeEventListener("error",dn)},Nn=()=>{tt(it(Me.result)),Nt()},dn=()=>{It(Me.error),Nt()};Me.addEventListener("success",Nn),Me.addEventListener("error",dn)});return te.then(tt=>{tt instanceof IDBCursor&&Sn.set(tt,Me)}).catch(()=>{}),Ce.set(te,Me),te}(Me);if(ye.has(Me))return ye.get(Me);const te=ut(Me);return te!==Me&&(ye.set(Me,te),Ce.set(te,Me)),te}const Mn=Me=>Ce.get(Me);function gn(Me,te,{blocked:tt,upgrade:It,blocking:Nt,terminated:Nn}={}){const dn=indexedDB.open(Me,te),bt=it(dn);return It&&dn.addEventListener("upgradeneeded",mn=>{It(it(dn.result),mn.oldVersion,mn.newVersion,it(dn.transaction),mn)}),tt&&dn.addEventListener("blocked",mn=>tt(mn.oldVersion,mn.newVersion,mn)),bt.then(mn=>{Nn&&mn.addEventListener("close",()=>Nn()),Nt&&mn.addEventListener("versionchange",cr=>Nt(cr.oldVersion,cr.newVersion,cr))}).catch(()=>{}),bt}const Zt=["get","getKey","getAll","getAllKeys","count"],Tr=["put","add","delete","clear"],Ot=new Map;function pt(Me,te){if(!(Me instanceof IDBDatabase)||te in Me||"string"!=typeof te)return;if(Ot.get(te))return Ot.get(te);const tt=te.replace(/FromIndex$/,""),It=te!==tt,Nt=Tr.includes(tt);if(!(tt in(It?IDBIndex:IDBObjectStore).prototype)||!Nt&&!Zt.includes(tt))return;const Nn=function(){var dn=(0,x.Z)(function*(bt,...mn){const cr=this.transaction(bt,Nt?"readwrite":"readonly");let se=cr.store;return It&&(se=se.index(mn.shift())),(yield Promise.all([se[tt](...mn),Nt&&cr.done]))[0]});return function(mn){return dn.apply(this,arguments)}}();return Ot.set(te,Nn),Nn}!function Gn(Me){jt=Me(jt)}(Me=>({...Me,get:(te,tt,It)=>pt(te,tt)||Me.get(te,tt,It),has:(te,tt)=>!!pt(te,tt)||Me.has(te,tt)}))},861:(ls,qn,We)=>{function x(j,xe,Pt,Dn,Sn,Bt,St){try{var ye=j[Bt](St),Ce=ye.value}catch(Xe){return void Pt(Xe)}ye.done?xe(Ce):Promise.resolve(Ce).then(Dn,Sn)}function Re(j){return function(){var xe=this,Pt=arguments;return new Promise(function(Dn,Sn){var Bt=j.apply(xe,Pt);function St(Ce){x(Bt,Dn,Sn,St,ye,"next",Ce)}function ye(Ce){x(Bt,Dn,Sn,St,ye,"throw",Ce)}St(void 0)})}}We.d(qn,{Z:()=>Re})},582:(ls,qn,We)=>{function xe(se,oe){var ue={};for(var me in se)Object.prototype.hasOwnProperty.call(se,me)&&oe.indexOf(me)<0&&(ue[me]=se[me]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(me=Object.getOwnPropertySymbols(se);Ee<me.length;Ee++)oe.indexOf(me[Ee])<0&&Object.prototype.propertyIsEnumerable.call(se,me[Ee])&&(ue[me[Ee]]=se[me[Ee]])}return ue}function Xe(se,oe,ue,me){return new(ue||(ue=Promise))(function(ce,Oe){function Lt(Ut){try{Ye(me.next(Ut))}catch(_n){Oe(_n)}}function De(Ut){try{Ye(me.throw(Ut))}catch(_n){Oe(_n)}}function Ye(Ut){Ut.done?ce(Ut.value):function Ee(ce){return ce instanceof ue?ce:new ue(function(Oe){Oe(ce)})}(Ut.value).then(Lt,De)}Ye((me=me.apply(se,oe||[])).next())})}function Kt(se){return this instanceof Kt?(this.v=se,this):new Kt(se)}function Zt(se,oe,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,me=ue.apply(se,oe||[]),ce=[];return Ee={},Oe("next"),Oe("throw"),Oe("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function Oe(hn){me[hn]&&(Ee[hn]=function(En){return new Promise(function(Rn,Yt){ce.push([hn,En,Rn,Yt])>1||Lt(hn,En)})})}function Lt(hn,En){try{!function De(hn){hn.value instanceof Kt?Promise.resolve(hn.value.v).then(Ye,Ut):_n(ce[0][2],hn)}(me[hn](En))}catch(Rn){_n(ce[0][3],Rn)}}function Ye(hn){Lt("next",hn)}function Ut(hn){Lt("throw",hn)}function _n(hn,En){hn(En),ce.shift(),ce.length&&Lt(ce[0][0],ce[0][1])}}function Ot(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,oe=se[Symbol.asyncIterator];return oe?oe.call(se):(se=function xt(se){var oe="function"==typeof Symbol&&Symbol.iterator,ue=oe&&se[oe],me=0;if(ue)return ue.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&me>=se.length&&(se=void 0),{value:se&&se[me++],done:!se}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),ue={},me("next"),me("throw"),me("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function me(ce){ue[ce]=se[ce]&&function(Oe){return new Promise(function(Lt,De){!function Ee(ce,Oe,Lt,De){Promise.resolve(De).then(function(Ye){ce({value:Ye,done:Lt})},Oe)}(Lt,De,(Oe=se[ce](Oe)).done,Oe.value)})}}}We.d(qn,{FC:()=>Zt,KL:()=>Ot,_T:()=>xe,mG:()=>Xe,qq:()=>Kt}),"function"==typeof SuppressedError&&SuppressedError}},ls=>{ls(ls.s=349)}]);
"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{455:(ts,Zn,Ke)=>{Ke.d(Zn,{$:()=>Yg,A:()=>ve,G:()=>Nt,K:()=>fh,L:()=>Ro,N:()=>zi,P:()=>Dm,R:()=>wm,U:()=>Je,V:()=>ya,W:()=>zc,X:()=>Th,Y:()=>bh,Z:()=>wt,_:()=>bu,a:()=>Da,a0:()=>Jg,a1:()=>Qc,a2:()=>Nr,a3:()=>tm,a4:()=>nm,a5:()=>rm,a6:()=>Jc,a7:()=>NE,a8:()=>Re,a9:()=>dn,aA:()=>Nc,aB:()=>Ut,aC:()=>fe,aD:()=>us,aE:()=>Ae,aF:()=>Dt,aG:()=>dl,aH:()=>Mm,aI:()=>YE,aJ:()=>cn,aN:()=>Aa,aQ:()=>Gr,aa:()=>Du,ab:()=>Ea,ac:()=>Ln,ad:()=>Ia,ae:()=>rt,af:()=>Vn,ag:()=>wa,ah:()=>Au,ak:()=>Cu,al:()=>_t,am:()=>PC,ap:()=>xE,aq:()=>kr,as:()=>FC,at:()=>cm,au:()=>Kt,av:()=>Co,aw:()=>Ze,ax:()=>gt,ay:()=>_l,az:()=>km,b:()=>FE,c:()=>Am,d:()=>Ye,e:()=>Cm,f:()=>Rt,g:()=>os,h:()=>pr,i:()=>VE,j:()=>XE,k:()=>$m,l:()=>is,m:()=>WC,p:()=>Xt,r:()=>bm,s:()=>Gh,u:()=>Zr});var M=Ke(861),we=Ke(534),O=Ke(58),Ue=Ke(879),xt=Ke(582),gn=Ke(537);const Xt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Nt=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Qn=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new Ue.Yd("@firebase/auth");function mn(p,...l){et.logLevel<=Ue.in.ERROR&&et.error(`Auth (${we.SDK_VERSION}): ${p}`,...l)}function gt(p,...l){throw Sn(p,...l)}function Ut(p,...l){return Sn(p,...l)}function qr(p,l,d){const g=Object.assign(Object.assign({},Qn()),{[l]:d});return new O.LL("auth","Firebase",g).create(l,{appName:p.name})}function Ft(p){return qr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ot(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&gt(p,"argument-error"),qr(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Et.create(p,...l)}function fe(p,l,...d){if(!p)throw Sn(l,...d)}function rn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw mn(l),new Error(l)}function Kt(p,l){p||rn(l)}function _n(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ui(){return"http:"===ci()||"https:"===ci()}function ci(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ai{constructor(l,d){this.shortDelay=l,this.longDelay=d,Kt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ui()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(p,l){Kt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class re{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new Ai(3e4,6e4);function he(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function se(p,l,d,g){return De.apply(this,arguments)}function De(){return(De=(0,M.Z)(function*(p,l,d,g,v={}){return mt(p,v,(0,M.Z)(function*(){let D={},$={};g&&("GET"===l?$=g:D={body:JSON.stringify(g)});const X=(0,O.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),pe=yield p._getAdditionalHeaders();return pe["Content-Type"]="application/json",p.languageCode&&(pe["X-Firebase-Locale"]=p.languageCode),re.fetch()(sn(p,p.config.apiHost,d,X),Object.assign({method:l,headers:pe,referrerPolicy:"no-referrer"},D))}))})).apply(this,arguments)}function mt(p,l,d){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},oe),l);try{const v=new Yn(p),D=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield D.json();if("needConfirmation"in $)throw Rn(p,"account-exists-with-different-credential",$);if(D.ok&&!("errorMessage"in $))return $;{const X=D.ok?$.errorMessage:$.error.message,[pe,Pe]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pe)throw Rn(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===pe)throw Rn(p,"email-already-in-use",$);if("USER_DISABLED"===pe)throw Rn(p,"user-disabled",$);const ze=g[pe]||pe.toLowerCase().replace(/[_\s]+/g,"-");if(Pe)throw qr(p,ze,Pe);gt(p,ze)}}catch(v){if(v instanceof O.ZR)throw v;gt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Le(p,l,d,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,M.Z)(function*(p,l,d,g,v={}){const D=yield se(p,l,d,g,v);return"mfaPendingCredential"in D&&gt(p,"multi-factor-auth-required",{_serverResponse:D}),D})).apply(this,arguments)}function sn(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ee(p.config,v):`${p.config.apiScheme}://${v}`}function Zt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Ut(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Ut(p,l,g);return v.customData._tokenResponse=d,v}function Jn(p){return void 0!==p&&void 0!==p.getResponse}function hr(p){return void 0!==p&&void 0!==p.enterprise}class Sr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return Zt(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function ji(){return(ji=(0,M.Z)(function*(p){return(yield se(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(p,l){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,M.Z)(function*(p,l){return se(p,"GET","/v2/recaptchaConfig",he(p,l))})).apply(this,arguments)}function bs(){return(bs=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function $i(){return($i=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Rr(p,l){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function yn(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function wr(){return(wr=(0,M.Z)(function*(p,l=!1){const d=(0,O.m9)(p),g=yield d.getIdToken(l),v=$s(g);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const D="object"==typeof v.firebase?v.firebase:void 0,$=D?.sign_in_provider;return{claims:v,token:g,authTime:yn(kn(v.auth_time)),issuedAtTime:yn(kn(v.iat)),expirationTime:yn(kn(v.exp)),signInProvider:$||null,signInSecondFactor:D?.sign_in_second_factor||null}})).apply(this,arguments)}function kn(p){return 1e3*Number(p)}function $s(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,O.tV)(d);return v?JSON.parse(v):(mn("Failed to decode base64 JWT payload"),null)}catch(v){return mn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Ds(p){const l=$s(p);return fe(l,"internal-error"),fe(typeof l.exp<"u","internal-error"),fe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Qt(p,l){return Si.apply(this,arguments)}function Si(){return(Si=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof O.ZR&&function zs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Fn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class sr{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vn(p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield Qt(p,Rr(d,{idToken:g}));fe(v?.users.length,d,"internal-error");const D=v.users[0];p._notifyReloadListener(D);const $=null!==(l=D.providerUserInfo)&&void 0!==l&&l.length?Ws(D.providerUserInfo):[],X=function qs(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,$),ze=!!p.isAnonymous&&!(p.email&&D.passwordHash||X?.length),yt={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:X,metadata:new sr(D.createdAt,D.lastLoginAt),isAnonymous:ze};Object.assign(p,yt)})).apply(this,arguments)}function Hs(){return(Hs=(0,M.Z)(function*(p){const l=(0,O.m9)(p);yield vn(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Ws(p){return p.map(l=>{var{providerId:d}=l,g=(0,xt._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function B(){return(B=(0,M.Z)(function*(p,l){const d=yield mt(p,{},(0,M.Z)(function*(){const g=(0,O.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:D}=p.config,$=sn(p,v,"/v1/token",`key=${D}`),X=yield p._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",re.fetch()($,{method:"POST",headers:X,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,M.Z)(function*(p,l){return se(p,"POST","/v2/accounts:revokeToken",he(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){fe(l.idToken,"internal-error"),fe(typeof l.idToken<"u","internal-error"),fe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Ds(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){fe(0!==l.length,"internal-error");const d=Ds(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(fe(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:D,expiresIn:$}=yield function Cs(p,l){return B.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,D,Number($))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:D}=d,$=new S;return g&&(fe("string"==typeof g,"internal-error",{appName:l}),$.refreshToken=g),v&&(fe("string"==typeof v,"internal-error",{appName:l}),$.accessToken=v),D&&(fe("number"==typeof D,"internal-error",{appName:l}),$.expirationTime=D),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return rn("not implemented")}}function w(p,l){fe("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class F{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,D=(0,xt._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new sr(D.createdAt||void 0,D.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield Qt(d,d.stsTokenManager.getToken(d.auth,l));return fe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function en(p){return wr.apply(this,arguments)}(this,l)}reload(){return function As(p){return Hs.apply(this,arguments)}(this)}_assign(l){this!==l&&(fe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new F(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield vn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(l.auth.app))return Promise.reject(Ft(l.auth));const d=yield l.getIdToken();return yield Qt(l,function js(p,l){return bs.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,D,$,X,pe,Pe,ze;const yt=null!==(g=d.displayName)&&void 0!==g?g:void 0,mr=null!==(v=d.email)&&void 0!==v?v:void 0,Qr=null!==(D=d.phoneNumber)&&void 0!==D?D:void 0,Il=null!==($=d.photoURL)&&void 0!==$?$:void 0,_f=null!==(X=d.tenantId)&&void 0!==X?X:void 0,wl=null!==(pe=d._redirectEventId)&&void 0!==pe?pe:void 0,xa=null!==(Pe=d.createdAt)&&void 0!==Pe?Pe:void 0,Hm=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:_r,emailVerified:qm,isAnonymous:yf,providerData:Lu,stsTokenManager:Wm}=d;fe(_r&&Wm,l,"internal-error");const Gm=S.fromJSON(this.name,Wm);fe("string"==typeof _r,l,"internal-error"),w(yt,l.name),w(mr,l.name),fe("boolean"==typeof qm,l,"internal-error"),fe("boolean"==typeof yf,l,"internal-error"),w(Qr,l.name),w(Il,l.name),w(_f,l.name),w(wl,l.name),w(xa,l.name),w(Hm,l.name);const Na=new F({uid:_r,auth:l,email:mr,emailVerified:qm,displayName:yt,isAnonymous:yf,photoURL:Il,phoneNumber:Qr,tenantId:_f,stsTokenManager:Gm,createdAt:xa,lastLoginAt:Hm});return Lu&&Array.isArray(Lu)&&(Na.providerData=Lu.map(Oa=>Object.assign({},Oa))),wl&&(Na._redirectEventId=wl),Na}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const D=new F({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield vn(D),D})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const D=void 0!==v.providerUserInfo?Ws(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||D?.length),X=new S;X.updateFromIdToken(g);const pe=new F({uid:v.localId,auth:l,stsTokenManager:X,isAnonymous:$}),Pe={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:D,metadata:new sr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||D?.length)};return Object.assign(pe,Pe),pe})()}}const ce=new Map;function Ae(p){Kt(p instanceof Function,"Expected a class definition");let l=ce.get(p);return l?(Kt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,ce.set(p,l),l)}const Je=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Dt(p,l,d){return`firebase:${p}:${l}:${d}`}class Ce{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:D}=this.auth;this.fullUserKey=Dt(this.userKey,v.apiKey,D),this.fullPersistenceKey=Dt("persistence",v.apiKey,D),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?F._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new Ce(Ae(Je),l,g);const v=(yield Promise.all(d.map(function(){var Pe=(0,M.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Pe.apply(this,arguments)}}()))).filter(Pe=>Pe);let D=v[0]||Ae(Je);const $=Dt(g,l.config.apiKey,l.name);let X=null;for(const Pe of d)try{const ze=yield Pe._get($);if(ze){const yt=F._fromJSON(l,ze);Pe!==D&&(X=yt),D=Pe;break}}catch{}const pe=v.filter(Pe=>Pe._shouldAllowMigration);return D._shouldAllowMigration&&pe.length?(D=pe[0],X&&(yield D._set($,X.toJSON())),yield Promise.all(d.map(function(){var Pe=(0,M.Z)(function*(ze){if(ze!==D)try{yield ze._remove($)}catch{}});return function(ze){return Pe.apply(this,arguments)}}())),new Ce(D,l,g)):new Ce(D,l,g)})()}}function Bt(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(pa(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(je(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(ga(l))return"Blackberry";if(ma(l))return"Webos";if(or(l))return"Safari";if((l.includes("chrome/")||Ao(l))&&!l.includes("edge/"))return"Chrome";if(Ze(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function je(p=(0,O.z$)()){return/firefox\//i.test(p)}function or(p=(0,O.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Ao(p=(0,O.z$)()){return/crios\//i.test(p)}function pa(p=(0,O.z$)()){return/iemobile/i.test(p)}function Ze(p=(0,O.z$)()){return/android/i.test(p)}function ga(p=(0,O.z$)()){return/blackberry/i.test(p)}function ma(p=(0,O.z$)()){return/webos/i.test(p)}function Co(p=(0,O.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Nc(p=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Q(p=(0,O.z$)()){return Co(p)||Ze(p)||ma(p)||ga(p)||/windows phone/i.test(p)||pa(p)}function tt(p,l=[]){let d;switch(p){case"Browser":d=Bt((0,O.z$)());break;case"Worker":d=`${Bt((0,O.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${we.SDK_VERSION}/${g}`}class at{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=D=>new Promise(($,X)=>{try{$(l(D))}catch(pe){X(pe)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const D of g)try{D()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Ht(){return(Ht=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v2/passwordPolicy",he(p,l))})).apply(this,arguments)}class Ri{constructor(l){var d,g,v,D;const $=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(D=l.forceUpgradeOnSignin)&&void 0!==D&&D,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,D,$,X;const pe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,pe),this.validatePasswordCharacterOptions(l,pe),pe.isValid&&(pe.isValid=null===(d=pe.meetsMinPasswordLength)||void 0===d||d),pe.isValid&&(pe.isValid=null===(g=pe.meetsMaxPasswordLength)||void 0===g||g),pe.isValid&&(pe.isValid=null===(v=pe.containsLowercaseLetter)||void 0===v||v),pe.isValid&&(pe.isValid=null===(D=pe.containsUppercaseLetter)||void 0===D||D),pe.isValid&&(pe.isValid=null===($=pe.containsNumericCharacter)||void 0===$||$),pe.isValid&&(pe.isValid=null===(X=pe.containsNonAlphanumericCharacter)||void 0===X||X),pe}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,D){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=D))}}class So{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new at(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Ae(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,D;if(!g._deleted&&(g.persistenceManager=yield Ce.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(D=g.currentUser)||void 0===D?void 0:D.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield Rr(d,{idToken:l}),v=yield F._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,we._isFirebaseServerApp)(d.app)){const X=d.app.settings.authIdToken;return X?new Promise(pe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(X).then(pe,pe))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let D=v,$=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const X=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,pe=D?._redirectEventId,Pe=yield d.tryRedirectSignIn(l);(!X||X===pe)&&Pe?.user&&(D=Pe.user,$=!0)}if(!D)return d.directlySetCurrentUser(null);if(!D._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(D)}catch(X){D=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(X))}return D?d.reloadAndSetCurrentUserOrClear(D):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===D._redirectEventId?d.directlySetCurrentUser(D):d.reloadAndSetCurrentUserOrClear(D)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield vn(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function ws(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(d.app))return Promise.reject(Ft(d));const g=l?(0,O.m9)(l):null;return g&&fe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&fe(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,we._isFirebaseServerApp)(l.app)?Promise.reject(Ft(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,we._isFirebaseServerApp)(this.app)?Promise.reject(Ft(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(Ae(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function ft(p){return Ht.apply(this,arguments)}(l),g=new Ri(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new O.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function k(p,l){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Ae(l)||d._popupRedirectResolver;fe(g,d,"argument-error"),d.redirectPersistenceManager=yield Ce.create(d,[Ae(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const D="function"==typeof d?d:d.next.bind(d);let $=!1;const X=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(X,this,"internal-error"),X.then(()=>{$||D(this.currentUser)}),"function"==typeof d){const pe=l.addObserver(d,g,v);return()=>{$=!0,pe()}}{const pe=l.addObserver(d);return()=>{$=!0,pe()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=tt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const D=yield l._getAppCheckToken();return D&&(g["X-Firebase-AppCheck"]=D),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function ir(p,...l){et.logLevel<=Ue.in.WARN&&et.warn(`Auth (${we.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function cn(p){return(0,O.m9)(p)}class Gs{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,O.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Oc={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jg(p){return Oc.loadJS(p)}function $g(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Qe{constructor(l){this.type="recaptcha-enterprise",this.auth=cn(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function D(){return D=(0,M.Z)(function*(X){if(!d){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var pe=(0,M.Z)(function*(Pe,ze){Lt(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yt=>{if(void 0!==yt.recaptchaKey){const mr=new Sr(yt);return null==X.tenantId?X._agentRecaptchaConfig=mr:X._tenantRecaptchaConfigs[X.tenantId]=mr,Pe(mr.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(yt=>{ze(yt)})});return function(Pe,ze){return pe.apply(this,arguments)}}())}),D.apply(this,arguments)}function $(X,pe,Pe){const ze=window.grecaptcha;hr(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(X,{action:l}).then(yt=>{pe(yt)}).catch(()=>{pe("NO_RECAPTCHA")})}):Pe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,pe)=>{(function v(X){return D.apply(this,arguments)})(g.auth).then(Pe=>{if(!d&&hr(window.grecaptcha))$(Pe,X,pe);else{if(typeof window>"u")return void pe(new Error("RecaptchaVerifier is only supported in browser"));let ze=function AE(){return Oc.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Pe),jg(ze).then(()=>{$(Pe,X,pe)}).catch(yt=>{pe(yt)})}}).catch(Pe=>{pe(Pe)})})})()}}function CE(p,l,d){return zg.apply(this,arguments)}function zg(){return(zg=(0,M.Z)(function*(p,l,d,g=!1){const v=new Qe(p);let D;try{D=yield v.verify(d)}catch{D=yield v.verify(d,!0)}const $=Object.assign({},l);return Object.assign($,g?{captchaResp:D}:{captchaResponse:D}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function kc(p,l,d,g){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const D=yield CE(p,l,d,"getOobCode"===d);return g(p,D)}return g(p,l).catch(function(){var D=(0,M.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const X=yield CE(p,l,d,"getOobCode"===d);return g(p,X)}return Promise.reject($)});return function($){return D.apply(this,arguments)}}())}),Fe.apply(this,arguments)}function fh(p,l,d){const g=cn(p);fe(g._canInitEmulator,g,"emulator-config-failed"),fe(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,D=Hg(l),{host:$,port:X}=function Lc(p){const l=Hg(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const D=v[1];return{host:D,port:_u(g.substr(D.length+1))}}{const[D,$]=g.split(":");return{host:D,port:_u($)}}}(l);g.config.emulator={url:`${D}//${$}${null===X?"":`:${X}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:X,protocol:D.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function ph(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Hg(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function _u(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Ro{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return rn("not implemented")}_getIdTokenResponse(l){return rn("not implemented")}_linkToIdToken(l,d){return rn("not implemented")}_getReauthenticationResolver(l){return rn("not implemented")}}function qg(p,l){return pt.apply(this,arguments)}function pt(){return(pt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:resetPassword",he(p,l))})).apply(this,arguments)}function Vc(){return(Vc=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Wr(p,l){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function qt(){return(qt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",he(p,l))})).apply(this,arguments)}function SC(p,l){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPassword",he(p,l))})).apply(this,arguments)}function Ie(p,l){return yu.apply(this,arguments)}function yu(){return(yu=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendOobCode",he(p,l))})).apply(this,arguments)}function Bc(){return(Bc=(0,M.Z)(function*(p,l){return Ie(p,l)})).apply(this,arguments)}function _h(p,l){return yh.apply(this,arguments)}function yh(){return(yh=(0,M.Z)(function*(p,l){return Ie(p,l)})).apply(this,arguments)}function vh(p,l){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,M.Z)(function*(p,l){return Ie(p,l)})).apply(this,arguments)}function Kg(){return(Kg=(0,M.Z)(function*(p,l){return Ie(p,l)})).apply(this,arguments)}function Zg(){return(Zg=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}function Eu(){return(Eu=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}class Ks extends Ro{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new Ks(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new Ks(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return kc(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",SC);case"emailLink":return function MC(p,l){return Zg.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:gt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return kc(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wr);case"emailLink":return function vu(p,l){return Eu.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:gt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Ss(p,l){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithIdp",he(p,l))})).apply(this,arguments)}class zi extends Ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new zi(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):gt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,D=(0,xt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new zi(g,v);return $.idToken=D.idToken||void 0,$.accessToken=D.accessToken||void 0,$.secret=D.secret,$.nonce=D.nonce,$.pendingToken=D.pendingToken||null,$}_getIdTokenResponse(l){return Ss(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ss(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ss(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,O.xO)(d)}return l}}function Ih(){return(Ih=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendVerificationCode",he(p,l))})).apply(this,arguments)}function wh(){return(wh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l))})).apply(this,arguments)}function jc(){return(jc=(0,M.Z)(function*(p,l){const d=yield Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l));if(d.temporaryProof)throw Rn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const xe={USER_NOT_FOUND:"user-not-found"};function Iu(){return(Iu=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),xe)})).apply(this,arguments)}class Hi extends Ro{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new Hi({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new Hi({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function Zs(p,l){return wh.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function de(p,l){return jc.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function $c(p,l){return Iu.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:D}=l;return g||d||v||D?new Hi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:D}):null}}class wu{constructor(l){var d,g,v,D,$,X;const pe=(0,O.zd)((0,O.pd)(l)),Pe=null!==(d=pe.apiKey)&&void 0!==d?d:null,ze=null!==(g=pe.oobCode)&&void 0!==g?g:null,yt=function ME(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=pe.mode)&&void 0!==v?v:null);fe(Pe&&ze&&yt,"argument-error"),this.apiKey=Pe,this.operation=yt,this.code=ze,this.continueUrl=null!==(D=pe.continueUrl)&&void 0!==D?D:null,this.languageCode=null!==($=pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(X=pe.tenantId)&&void 0!==X?X:null}static parseLink(l){const d=function PE(p){const l=(0,O.zd)((0,O.pd)(p)).link,d=l?(0,O.zd)((0,O.pd)(l)).deep_link_id:null,g=(0,O.zd)((0,O.pd)(p)).deep_link_id;return(g?(0,O.zd)((0,O.pd)(g)).link:null)||g||d||l||p}(l);try{return new wu(d)}catch{return null}}}let ya=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Ks._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=wu.parseLink(g);return fe(v,"argument-error"),Ks._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class jn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class xr extends jn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class wt extends xr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),zi._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return fe(l.idToken||l.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return wt.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return wt.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:D,nonce:$,providerId:X}=l;if(!g&&!v&&!d&&!D||!X)return null;try{return new wt(X)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:D})}catch{return null}}}let zc=(()=>{class p extends xr{constructor(){super("facebook.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Th=(()=>{class p extends xr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),bh=(()=>{class p extends xr{constructor(){super("github.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Gr extends Ro{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return Ss(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ss(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ss(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:D}=d;return g&&v&&D&&g===v?new Gr(g,D):null}static _create(l,d){return new Gr(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bu extends jn{constructor(l){fe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return bu.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return bu.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Gr.fromJSON(l);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return Gr._create(g,d)}catch{return null}}}let Yg=(()=>{class p extends xr{constructor(){super("twitter.com")}static credential(d,g){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Hc(p,l){return qc.apply(this,arguments)}function qc(){return(qc=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signUp",he(p,l))})).apply(this,arguments)}class di{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const D=yield F._fromIdTokenResponse(l,g,v),$=va(g);return new di({user:D,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=va(g);return new di({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function va(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Jg(p){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,M.Z)(function*(p){var l;if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=cn(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new di({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Hc(d,{returnSecureToken:!0}),v=yield di._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Gc extends O.ZR{constructor(l,d,g,v){var D;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:l.name,tenantId:null!==(D=l.tenantId)&&void 0!==D?D:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new Gc(l,d,g,v)}}function Dh(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(D=>{throw"auth/multi-factor-auth-required"===D.code?Gc._fromErrorAndOperation(p,D,l,g):D})}function Xg(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function xE(p,l){return hi.apply(this,arguments)}function hi(){return hi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);yield Zc(!0,d,l);const{providerUserInfo:g}=yield function li(p,l){return $i.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=Xg(g||[]);return d.providerData=d.providerData.filter(D=>v.has(D.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),hi.apply(this,arguments)}function Ah(p,l){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,M.Z)(function*(p,l,d=!1){const g=yield Qt(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return di._forOperation(p,"link",g)})).apply(this,arguments)}function Zc(p,l,d){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,M.Z)(function*(p,l,d){yield vn(l);const v=!1===p?"provider-already-linked":"no-such-provider";fe(Xg(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function em(p,l){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,we._isFirebaseServerApp)(g.app))return Promise.reject(Ft(g));const v="reauthenticate";try{const D=yield Qt(p,Dh(g,v,l,p),d);fe(D.idToken,g,"internal-error");const $=$s(D.idToken);fe($,g,"internal-error");const{sub:X}=$;return fe(p.uid===X,g,"user-mismatch"),di._forOperation(p,v,D)}catch(D){throw"auth/user-not-found"===D?.code&&gt(g,"user-mismatch"),D}})).apply(this,arguments)}function Rh(p,l){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g="signIn",v=yield Dh(p,g,l),D=yield di._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(D.user)),D})).apply(this,arguments)}function Qc(p,l){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,M.Z)(function*(p,l){return Rh(cn(p),l)})).apply(this,arguments)}function Nr(p,l){return xh.apply(this,arguments)}function xh(){return(xh=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);return yield Zc(!1,d,l.providerId),Ah(d,l)})).apply(this,arguments)}function tm(p,l){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,M.Z)(function*(p,l){return em((0,O.m9)(p),l)})).apply(this,arguments)}function Oh(){return(Oh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithCustomToken",he(p,l))})).apply(this,arguments)}function nm(p,l){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,M.Z)(function*(p,l){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=cn(p),g=yield function $n(p,l){return Oh.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield di._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Wt.apply(this,arguments)}class ar{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Tt._fromServerResponse(l,d):"totpInfo"in d?Xn._fromServerResponse(l,d):gt(l,"internal-error")}}class Tt extends ar{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Tt(d)}}class Xn extends ar{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new Xn(d)}}function ur(p,l,d){var g;fe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function Ys(p){return Or.apply(this,arguments)}function Or(){return(Or=(0,M.Z)(function*(p){const l=cn(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function rm(p,l,d){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,M.Z)(function*(p,l,d){const g=cn(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&ur(g,v,d),yield kc(g,v,"getOobCode",_h)})).apply(this,arguments)}function Jc(p,l,d){return kh.apply(this,arguments)}function kh(){return kh=(0,M.Z)(function*(p,l,d){yield qg((0,O.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ys(p),v});return function(v){return g.apply(this,arguments)}}())}),kh.apply(this,arguments)}function NE(p,l){return ln.apply(this,arguments)}function ln(){return ln=(0,M.Z)(function*(p,l){yield function CC(p,l){return qt.apply(this,arguments)}((0,O.m9)(p),{oobCode:l})}),ln.apply(this,arguments)}function Re(p,l){return nt.apply(this,arguments)}function nt(){return(nt=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),g=yield qg(d,{oobCode:l}),v=g.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(g.mfaInfo,d,"internal-error");default:fe(g.email,d,"internal-error")}let D=null;return g.mfaInfo&&(D=ar._fromServerResponse(cn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:D},operation:v}})).apply(this,arguments)}function dn(p,l){return fi.apply(this,arguments)}function fi(){return(fi=(0,M.Z)(function*(p,l){const{data:d}=yield Re((0,O.m9)(p),l);return d.email})).apply(this,arguments)}function Du(p,l,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),$=yield kc(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hc).catch(pe=>{throw"auth/password-does-not-meet-requirements"===pe.code&&Ys(p),pe}),X=yield di._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(X.user),X})).apply(this,arguments)}function Ea(p,l,d){return(0,we._isFirebaseServerApp)(p.app)?Promise.reject(Ft(p)):Qc((0,O.m9)(p),ya.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ys(p),v});return function(v){return g.apply(this,arguments)}}())}function Ln(p,l,d){return ns.apply(this,arguments)}function ns(){return(ns=(0,M.Z)(function*(p,l,d){const g=cn(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function D($,X){fe(X.handleCodeInApp,g,"argument-error"),X&&ur(g,$,X)})(v,d),yield kc(g,v,"getOobCode",vh)})).apply(this,arguments)}function Ia(p,l){const d=wu.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function rt(p,l,d){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=(0,O.m9)(p),v=ya.credentialWithLink(l,d||_n());return fe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Qc(g,v)})).apply(this,arguments)}function Js(){return(Js=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:createAuthUri",he(p,l))})).apply(this,arguments)}function Vn(p,l){return Po.apply(this,arguments)}function Po(){return Po=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:ui()?_n():"http://localhost"},{signinMethods:v}=yield function im(p,l){return Js.apply(this,arguments)}((0,O.m9)(p),g);return v||[]}),Po.apply(this,arguments)}function wa(p,l){return Pi.apply(this,arguments)}function Pi(){return Pi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&ur(d.auth,v,l);const{email:D}=yield function mh(p,l){return Bc.apply(this,arguments)}(d.auth,v);D!==p.email&&(yield p.reload())}),Pi.apply(this,arguments)}function Au(p,l,d){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p),D={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&ur(g.auth,D,d);const{email:$}=yield function RC(p,l){return Kg.apply(this,arguments)}(g.auth,D);$!==p.email&&(yield p.reload())}),Xc.apply(this,arguments)}function qi(){return(qi=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Cu(p,l){return xo.apply(this,arguments)}function xo(){return xo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,O.m9)(p),D={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},$=yield Qt(g,function Xs(p,l){return qi.apply(this,arguments)}(g.auth,D));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const X=g.providerData.find(({providerId:pe})=>"password"===pe);X&&(X.displayName=g.displayName,X.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),xo.apply(this,arguments)}function _t(p,l){const d=(0,O.m9)(p);return(0,we._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ft(d.auth)):el(d,l,null)}function PC(p,l){return el((0,O.m9)(p),null,l)}function el(p,l,d){return tl.apply(this,arguments)}function tl(){return tl=(0,M.Z)(function*(p,l,d){const{auth:g}=p,D={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(D.email=l),d&&(D.password=d);const $=yield Qt(p,function gh(p,l){return Vc.apply(this,arguments)}(g,D));yield p._updateTokensIfNecessary($,!0)}),tl.apply(this,arguments)}class Rs{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class No extends Rs{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Su extends Rs{constructor(l,d){super(l,"facebook.com",d)}}class fr extends No{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class xC extends Rs{constructor(l,d){super(l,"google.com",d)}}class Kr extends No{constructor(l,d,g){super(l,"twitter.com",d,g)}}function kr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function rs(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},D=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(l=$s(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new Rs(D,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new Su(D,v);case"github.com":return new fr(D,v);case"google.com":return new xC(D,v);case"twitter.com":return new Kr(D,v,p.screenName||null);case"custom":case"anonymous":return new Rs(D,null);default:return new Rs(D,g,v)}}(d)}class ba{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new ba("enroll",l,d)}static _fromMfaPendingCredential(l){return new ba("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ba._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return ba._fromIdtoken(l.multiFactorSession.idToken)}return null}}class am{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=cn(l),v=d.customData._serverResponse,D=(v.mfaInfo||[]).map(X=>ar._fromServerResponse(g,X));fe(v.mfaPendingCredential,g,"internal-error");const $=ba._fromMfaPendingCredential(v.mfaPendingCredential);return new am($,D,function(){var X=(0,M.Z)(function*(pe){const Pe=yield pe._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const ze=Object.assign(Object.assign({},v),{idToken:Pe.idToken,refreshToken:Pe.refreshToken});switch(d.operationType){case"signIn":const yt=yield di._fromIdTokenResponse(g,d.operationType,ze);return yield g._updateCurrentUser(yt.user),yt;case"reauthenticate":return fe(d.user,g,"internal-error"),di._forOperation(d.user,d.operationType,ze);default:gt(g,"internal-error")}});return function(pe){return X.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function FC(p,l){var d;const g=(0,O.m9)(p),v=l;return fe(l.customData.operationType,g,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),am._fromError(g,v)}class um{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ar._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new um(l)}getSession(){var l=this;return(0,M.Z)(function*(){return ba._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,D=yield g.getSession(),$=yield Qt(g.user,v._process(g.user.auth,D,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const D=yield Qt(d.user,function BC(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(D),yield d.user.reload()}catch(D){throw D}})()}}const nl=new WeakMap;function cm(p){const l=(0,O.m9)(p);return nl.has(l)||nl.set(l,um._fromUser(l)),nl.get(l)}const Vh="__sak";class kE{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const FE=(()=>{class p extends kE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jC(){const p=(0,O.z$)();return or(p)||Co(p)}()&&function _e(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Q(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),D=this.localCache[g];v!==D&&d(g,D,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((X,pe,Pe)=>{this.notifyListeners(X,Pe)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(v);if(d.newValue!==X)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const D=()=>{const X=this.storage.getItem(v);!g&&this.localCache[v]===X||this.notifyListeners(v,X)},$=this.storage.getItem(v);!function W(){return(0,O.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?D():setTimeout(D,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const D of Array.from(v))D(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,D=this;return(0,M.Z)(function*(){yield v().call(D,d,g),D.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const D=yield g().call(v,d);return v.localCache[d]=JSON.stringify(D),D})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Da=(()=>{class p extends kE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let lm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(D=>D.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:D,eventType:$,data:X}=v.data,pe=g.handlersMap[$];if(!pe?.size)return;v.ports[0].postMessage({status:"ack",eventId:D,eventType:$});const Pe=Array.from(pe).map(function(){var yt=(0,M.Z)(function*(mr){return mr(v.origin,X)});return function(mr){return yt.apply(this,arguments)}}()),ze=yield function xi(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Pe);v.ports[0].postMessage({status:"done",eventId:D,eventType:$,response:ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Aa(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class dm{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const D=typeof MessageChannel<"u"?new MessageChannel:null;if(!D)throw new Error("connection_unavailable");let $,X;return new Promise((pe,Pe)=>{const ze=Aa("",20);D.port1.start();const yt=setTimeout(()=>{Pe(new Error("unsupported_event"))},g);X={messageChannel:D,onMessage(mr){const Qr=mr;if(Qr.data.eventId===ze)switch(Qr.data.status){case"ack":clearTimeout(yt),$=setTimeout(()=>{Pe(new Error("timeout"))},3e3);break;case"done":clearTimeout($),pe(Qr.data.response);break;default:clearTimeout(yt),clearTimeout($),Pe(new Error("invalid_response"))}}},v.handlers.add(X),D.port1.addEventListener("message",X.onMessage),v.target.postMessage({eventType:l,eventId:ze,data:d},[D.port2])}).finally(()=>{X&&v.removeMessageHandler(X)})})()}}function Un(){return window}function rl(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function Ru(){return(Ru=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const jh="firebaseLocalStorageDb",to="firebaseLocalStorage",ko="fbase_key";class Ca{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function $h(p,l){return p.transaction([to],l?"readwrite":"readonly").objectStore(to)}function pm(){const p=indexedDB.open(jh,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(to,{keyPath:ko})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(to)?l(g):(g.close(),yield function $C(){const p=indexedDB.deleteDatabase(jh);return new Ca(p).toPromise()}(),l(yield pm()))}))})}function gm(p,l,d){return zh.apply(this,arguments)}function zh(){return(zh=(0,M.Z)(function*(p,l,d){const g=$h(p,!0).put({[ko]:l,value:d});return new Ca(g).toPromise()})).apply(this,arguments)}function sl(){return(sl=(0,M.Z)(function*(p,l){const d=$h(p,!1).get(l),g=yield new Ca(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function ol(p,l){const d=$h(p,!0).delete(l);return new Ca(d).toPromise()}const VE=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield pm()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const D=yield g._openDb();return yield d(D)}catch(D){if(v++>3)throw D;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return rl()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=lm._getInstance(function fm(){return rl()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,D){return{keyProcessed:(yield d._poll()).includes(D.key)}});return function(v,D){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,D){return["keyChanged"]});return function(v,D){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Bh(){return Ru.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new dm(d.activeServiceWorker);const D=yield d.sender._send("ping",{},800);D&&null!==(g=D[0])&&void 0!==g&&g.fulfilled&&null!==(v=D[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function hm(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield pm();return yield gm(d,Vh,"1"),yield ol(d,Vh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(D=>gm(D,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(D=>function zC(p,l){return sl.apply(this,arguments)}(D,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>ol(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries($=>{const X=$h($,!1).getAll();return new Ca(X).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],D=new Set;if(0!==g.length)for(const{fbase_key:$,value:X}of g)D.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(X)&&(d.notifyListeners($,X),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!D.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const D of Array.from(v))D(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),al=1e12;class ym{constructor(l){this.auth=l,this.counter=al,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new $E(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||al;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||al))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||al))||void 0===g||g.execute(),""})()}}class $E{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vm(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qh=$g("rcb"),HC=new Ai(3e4,6e4);class zE{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Un().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return fe(function Fo(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Jn(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((g,v)=>{const D=Un().setTimeout(()=>{v(Ut(l,"network-request-failed"))},HC.get());Un()[qh]=()=>{Un().clearTimeout(D),delete Un()[qh];const X=Un().grecaptcha;if(!X||!Jn(X))return void v(Ut(l,"internal-error"));const pe=X.render;X.render=(Pe,ze)=>{const yt=pe(Pe,ze);return this.counter++,yt},this.hostLanguage=d,g(X)},jg(`${function TC(){return Oc.recaptchaV2Script}()}?${(0,O.xO)({onload:qh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(D),v(Ut(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Un().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Em{load(l){return(0,M.Z)(function*(){return new ym(l)})()}clearedOneInstance(){}}const Im="recaptcha",HE={theme:"light",type:"image"};class wm{constructor(l,d,g=Object.assign({},HE)){this.parameters=g,this.type=Im,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(l),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Em:new zE,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(D=>{const $=X=>{X&&(l.tokenChangeListeners.delete($),D(X))};l.tokenChangeListeners.add($),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Un()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){fe(ui()&&!rl(),l.auth,"internal-error"),yield function Tm(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Ts(p){return ji.apply(this,arguments)}(l.auth);fe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wh{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=Hi._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Gh(p,l,d){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),v=yield Sa(g,l,(0,O.m9)(d));return new Wh(v,D=>Qc(g,D))})).apply(this,arguments)}function is(p,l,d){return ul.apply(this,arguments)}function ul(){return(ul=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);yield Zc(!1,g,"phone");const v=yield Sa(g.auth,l,(0,O.m9)(d));return new Wh(v,D=>Nr(g,D))})).apply(this,arguments)}function bm(p,l,d){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));const v=yield Sa(g.auth,l,(0,O.m9)(d));return new Wh(v,D=>tm(g,D))})).apply(this,arguments)}function Sa(p,l,d){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let D;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===Im,p,"argument-error"),D="string"==typeof l?{phoneNumber:l}:l,"session"in D){const $=D.session;if("phoneNumber"in D)return fe("enroll"===$.type,p,"internal-error"),(yield function LC(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,l))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:D.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===$.type,p,"internal-error");const X=(null===(g=D.multiFactorHint)||void 0===g?void 0:g.uid)||D.multiFactorUid;return fe(X,p,"missing-multi-factor-info"),(yield function UE(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:start",he(p,l))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function _a(p,l){return Ih.apply(this,arguments)}(p,{phoneNumber:D.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),Ra.apply(this,arguments)}function Zr(p,l){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ft(d.auth));yield Ah(d,l)})).apply(this,arguments)}let Dm=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=cn(d)}verifyPhoneNumber(d,g){return Sa(this.auth,d,(0,O.m9)(g))}static credential(d,g){return Hi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Hi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ni(p,l){return l?Ae(l):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Fr extends Ro{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Ss(l,this._buildIdpRequest())}_linkToIdToken(l,d){return Ss(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return Ss(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function qE(p){return Rh(p.auth,new Fr(p),p.bypassAuthState)}function WE(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),em(d,new Fr(p),p.bypassAuthState)}function GE(p){return ss.apply(this,arguments)}function ss(){return(ss=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),Ah(d,new Fr(p),p.bypassAuthState)})).apply(this,arguments)}class Qh{constructor(l,d,g,v,D=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=D,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(D){l.reject(D)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:D,tenantId:$,error:X,type:pe}=l;if(X)return void d.reject(X);const Pe={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:D||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(pe)(Pe))}catch(ze){d.reject(ze)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return qE;case"linkViaPopup":case"linkViaRedirect":return GE;case"reauthViaPopup":case"reauthViaRedirect":return WE;default:gt(this.auth,"internal-error")}}resolve(l){Kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const KE=new Ai(2e3,1e4);function Am(p,l,d){return cl.apply(this,arguments)}function cl(){return(cl=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p,"operation-not-supported-in-this-environment"));const g=cn(p);ot(p,l,jn);const v=Ni(g,d);return new Sm(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function Cm(p,l,d){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ut(g.auth,"operation-not-supported-in-this-environment"));ot(g.auth,l,jn);const v=Ni(g.auth,d);return new Sm(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function Ye(p,l,d){return ll.apply(this,arguments)}function ll(){return(ll=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ot(g.auth,l,jn);const v=Ni(g.auth,d);return new Sm(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let Sm=(()=>{class p extends Qh{constructor(d,g,v,D,$){super(d,g,D,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return fe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){Kt(1===d.filter.length,"Popup operations only handle one event");const g=Aa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Ut(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,KE.get())};d()}}return p.currentPopupAction=null,p})();const ZE="pendingRedirect",Mu=new Map;class QE extends Qh{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=Mu.get(d.auth._key());if(!g){try{const D=(yield function Rm(p,l){return no.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(D)}catch(v){g=()=>Promise.reject(v)}Mu.set(d.auth._key(),g)}return d.bypassAuthState||Mu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function no(){return(no=(0,M.Z)(function*(p,l){const d=ge(l),g=Pm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function Jh(p,l){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,M.Z)(function*(p,l){return Pm(p)._set(ge(l),"true")})).apply(this,arguments)}function YE(){Mu.clear()}function Mm(p,l){Mu.set(p._key(),l)}function Pm(p){return Ae(p._redirectPersistence)}function ge(p){return Dt(ZE,p.config.apiKey,p.name)}function Rt(p,l,d){return function JE(p,l,d){return ef.apply(this,arguments)}(p,l,d)}function ef(){return(ef=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p);ot(p,l,jn),yield g._initializationPromise;const v=Ni(g,d);return yield Jh(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function pr(p,l,d){return function xm(p,l,d){return Lo.apply(this,arguments)}(p,l,d)}function Lo(){return(Lo=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if(ot(g.auth,l,jn),(0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));yield g.auth._initializationPromise;const v=Ni(g.auth,d);yield Jh(v,g.auth);const D=yield as(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",D)})).apply(this,arguments)}function os(p,l,d){return function tf(p,l,d){return Pu.apply(this,arguments)}(p,l,d)}function Pu(){return(Pu=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ot(g.auth,l,jn),yield g.auth._initializationPromise;const v=Ni(g.auth,d);yield Zc(!1,g,l.providerId),yield Jh(v,g.auth);const D=yield as(g);return v._openRedirect(g.auth,l,"linkViaRedirect",D)})).apply(this,arguments)}function XE(p,l){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,M.Z)(function*(p,l){return yield cn(p)._initializationPromise,dl(p,l,!1)})).apply(this,arguments)}function dl(p,l){return gr.apply(this,arguments)}function gr(){return(gr=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),v=Ni(g,l),$=yield new QE(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,l)),$})).apply(this,arguments)}function as(p){return hl.apply(this,arguments)}function hl(){return(hl=(0,M.Z)(function*(p){const l=Aa(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class us{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function eI(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!nf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Ut(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Om(l))}saveEventToCache(l){this.cachedEventUids.add(Om(l)),this.lastProcessedEventTime=Date.now()}}function Om(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function nf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function km(p){return xu.apply(this,arguments)}function xu(){return(xu=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v1/projects",l)})).apply(this,arguments)}const rf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fm=/^https?/;function af(){return(af=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield km(p);for(const d of l)try{if(Lm(d))return}catch{}gt(p,"unauthorized-domain")})).apply(this,arguments)}function Lm(p){const l=_n(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!Fm.test(d))return!1;if(rf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const uf=new Ai(3e4,6e4);function cf(){const p=Un().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Nu=null;const lf=new Ai(5e3,15e3),tI="__/auth/iframe",nI="emulator/auth/iframe",Lr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function In(p){const l=p.config;fe(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ee(l,nI):`https://${p.config.authDomain}/${tI}`,g={apiKey:l.apiKey,appName:p.name,v:we.SDK_VERSION},v=Vo.get(p.config.apiHost);v&&(g.eid=v);const D=p._getFrameworks();return D.length&&(g.fw=D.join(",")),`${d}?${(0,O.xO)(g).slice(1)}`}function df(){return df=(0,M.Z)(function*(p){const l=yield function Um(p){return Nu=Nu||function Vm(p){return new Promise((l,d)=>{var g,v,D;function $(){cf(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{cf(),d(Ut(p,"network-request-failed"))},timeout:uf.get()})}if(null!==(v=null===(g=Un().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(D=Un().gapi)||void 0===D||!D.load){const X=$g("iframefcb");return Un()[X]=()=>{gapi.load?$():d(Ut(p,"network-request-failed"))},jg(`${function bC(){return Oc.gapiScript}()}?onload=${X}`).catch(pe=>d(pe))}$()}}).catch(l=>{throw Nu=null,l})}(p),Nu}(p),d=Un().gapi;return fe(d,p,"internal-error"),l.open({where:document.body,url:In(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lr,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(D,$){yield g.restyle({setHideOnLeave:!1});const X=Ut(p,"network-request-failed"),pe=Un().setTimeout(()=>{$(X)},lf.get());function Pe(){Un().clearTimeout(pe),D(g)}g.ping(Pe).then(Pe,()=>{$(X)})});return function(D,$){return v.apply(this,arguments)}}()))}),df.apply(this,arguments)}const iI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ms{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const gl="__/auth/handler",ml="emulator/auth/handler",hf=encodeURIComponent("fac");function _l(p,l,d,g,v,D){return yl.apply(this,arguments)}function yl(){return(yl=(0,M.Z)(function*(p,l,d,g,v,D){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:we.SDK_VERSION,eventId:v};if(l instanceof jn){l.setDefaultLanguage(p.languageCode),$.providerId=l.providerId||"",(0,O.xb)(l.getCustomParameters())||($.customParameters=JSON.stringify(l.getCustomParameters()));for(const[ze,yt]of Object.entries(D||{}))$[ze]=yt}if(l instanceof xr){const ze=l.getScopes().filter(yt=>""!==yt);ze.length>0&&($.scopes=ze.join(","))}p.tenantId&&($.tid=p.tenantId);const X=$;for(const ze of Object.keys(X))void 0===X[ze]&&delete X[ze];const pe=yield p._getAppCheckToken(),Pe=pe?`#${hf}=${encodeURIComponent(pe)}`:"";return`${function aI({config:p}){return p.emulator?ee(p,ml):`https://${p.authDomain}/${gl}`}(p)}?${(0,O.xO)(X).slice(1)}${Pe}`})).apply(this,arguments)}const ro="webStorageSupport",$m=class Ou{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=dl,this._overrideRedirectResult=Mm}_openPopup(l,d,g,v){var D=this;return(0,M.Z)(function*(){var $;Kt(null===($=D.eventManagers[l._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const X=yield _l(l,d,g,_n(),v);return function oI(p,l,d,g=500,v=600){const D=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let X="";const pe=Object.assign(Object.assign({},iI),{width:g.toString(),height:v.toString(),top:D,left:$}),Pe=(0,O.z$)().toLowerCase();d&&(X=Ao(Pe)?"_blank":d),je(Pe)&&(l=l||"http://localhost",pe.scrollbars="yes");const ze=Object.entries(pe).reduce((mr,[Qr,Il])=>`${mr}${Qr}=${Il},`,"");if(function N(p=(0,O.z$)()){var l;return Co(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Pe)&&"_self"!==X)return function pl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",X),new Ms(null);const yt=window.open(l||"",X,ze);fe(yt,p,"popup-blocked");try{yt.focus()}catch{}return new Ms(yt)}(l,X,Aa())})()}_openRedirect(l,d,g,v){var D=this;return(0,M.Z)(function*(){return yield D._originValidation(l),function Uh(p){Un().location.href=p}(yield _l(l,d,g,_n(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:D}=this.eventManagers[d];return v?Promise.resolve(v):(Kt(D,"If manager is not set, promise should be"),D)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function rI(p){return df.apply(this,arguments)}(l),v=new us(l);return g.register("authEvent",D=>(fe(D?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(D.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(ro,{type:ro},v=>{var D;const $=null===(D=v?.[0])||void 0===D?void 0:D[ro];void 0!==$&&d(!!$),gt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function sf(p){return af.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Q()||or()||Co()}};class qC{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return rn("unexpected MultiFactorSessionType")}}}class ku extends qC{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new ku(l)}_finalizeEnroll(l,d,g){return function VC(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function mm(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let WC=(()=>{class p{constructor(){}static assertion(d){return ku._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var vl="@firebase/auth";class cI{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function wC(p){Oc=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const D=Ut("internal-error");D.customData=v,d(D)},g.type="text/javascript",g.charset="UTF-8",function cs(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function gf(p){(0,we._registerComponent)(new gn.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),D=l.getProvider("app-check-internal"),{apiKey:$,authDomain:X}=g.options;fe($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const pe={apiKey:$,authDomain:X,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tt(p)},Pe=new So(g,v,D,pe);return function SE(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Ae);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Pe,d),Pe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,we._registerComponent)(new gn.wA("auth-internal",l=>{const d=cn(l.getProvider("auth").getImmediate());return new cI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,we.registerVersion)(vl,"1.7.3",function Fu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,we.registerVersion)(vl,"1.7.3","esm2017")}("Browser")},58:(ts,Zn,Ke)=>{Ke.d(Zn,{BH:()=>qr,G6:()=>Ai,L:()=>St,LL:()=>se,P0:()=>mn,Pz:()=>Ut,Sg:()=>Ft,UG:()=>fe,ZB:()=>Be,ZR:()=>he,aH:()=>gt,b$:()=>_n,eu:()=>re,hl:()=>ee,jU:()=>rn,m9:()=>Cs,ne:()=>Rr,pd:()=>li,r3:()=>Jn,ru:()=>Kt,tV:()=>le,uI:()=>Sn,vZ:()=>ji,w1:()=>ci,xO:()=>js,xb:()=>Sr,z$:()=>ot,zd:()=>bs});const Ue=function(B){const k=[];let b=0;for(let S=0;S<B.length;S++){let w=B.charCodeAt(S);w<128?k[b++]=w:w<2048?(k[b++]=w>>6|192,k[b++]=63&w|128):55296==(64512&w)&&S+1<B.length&&56320==(64512&B.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&B.charCodeAt(++S)),k[b++]=w>>18|240,k[b++]=w>>12&63|128,k[b++]=w>>6&63|128,k[b++]=63&w|128):(k[b++]=w>>12|224,k[b++]=w>>6&63|128,k[b++]=63&w|128)}return k},gn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,k){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<B.length;w+=3){const F=B[w],ce=w+1<B.length,Ae=ce?B[w+1]:0,ke=w+2<B.length,Je=ke?B[w+2]:0;let Bt=(15&Ae)<<2|Je>>6,je=63&Je;ke||(je=64,ce||(Bt=64)),S.push(b[F>>2],b[(3&F)<<4|Ae>>4],b[Bt],b[je])}return S.join("")},encodeString(B,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(B):this.encodeByteArray(Ue(B),k)},decodeString(B,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(B):function(B){const k=[];let b=0,S=0;for(;b<B.length;){const w=B[b++];if(w<128)k[S++]=String.fromCharCode(w);else if(w>191&&w<224){const F=B[b++];k[S++]=String.fromCharCode((31&w)<<6|63&F)}else if(w>239&&w<365){const ke=((7&w)<<18|(63&B[b++])<<12|(63&B[b++])<<6|63&B[b++])-65536;k[S++]=String.fromCharCode(55296+(ke>>10)),k[S++]=String.fromCharCode(56320+(1023&ke))}else{const F=B[b++],ce=B[b++];k[S++]=String.fromCharCode((15&w)<<12|(63&F)<<6|63&ce)}}return k.join("")}(this.decodeStringToByteArray(B,k))},decodeStringToByteArray(B,k){this.init_();const b=k?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<B.length;){const F=b[B.charAt(w++)],Ae=w<B.length?b[B.charAt(w)]:0;++w;const Je=w<B.length?b[B.charAt(w)]:64;++w;const Ce=w<B.length?b[B.charAt(w)]:64;if(++w,null==F||null==Ae||null==Je||null==Ce)throw new On;S.push(F<<2|Ae>>4),64!==Je&&(S.push(Ae<<4&240|Je>>2),64!==Ce&&S.push(Je<<6&192|Ce))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class On extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(B){return function(B){const k=Ue(B);return gn.encodeByteArray(k,!0)}(B).replace(/\./g,"")},le=function(B){try{return gn.decodeString(B,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function Be(B,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return k}for(const b in k)!k.hasOwnProperty(b)||!st(b)||(B[b]=Be(B[b],k[b]));return B}function st(B){return"__proto__"!==B}const et=()=>{try{return function Nt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=B&&le(B[1]);return k&&JSON.parse(k)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},mn=B=>{const k=(B=>{var k,b;return null===(b=null===(k=et())||void 0===k?void 0:k.emulatorHosts)||void 0===b?void 0:b[B]})(B);if(!k)return;const b=k.lastIndexOf(":");if(b<=0||b+1===k.length)throw new Error(`Invalid host ${k} with no separate hostname and port!`);const S=parseInt(k.substring(b+1),10);return"["===k[0]?[k.substring(1,b-1),S]:[k.substring(0,b),S]},gt=()=>{var B;return null===(B=et())||void 0===B?void 0:B.config},Ut=B=>{var k;return null===(k=et())||void 0===k?void 0:k[`_${B}`]};class qr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,b)=>{this.resolve=k,this.reject=b})}wrapCallback(k){return(b,S)=>{b?this.reject(b):this.resolve(S),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(b):k(b,S))}}}function Ft(B,k){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=k||"demo-project",w=B.iat||0,F=B.sub||B.user_id;if(!F)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ce=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:F,user_id:F,firebase:{sign_in_provider:"custom",identities:{}}},B);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(ce)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Sn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function fe(){var B;const k=null===(B=et())||void 0===B?void 0:B.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rn(){return"object"==typeof self&&self.self===self}function Kt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function _n(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ci(){const B=ot();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ai(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((B,k)=>{try{let b=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(S),B(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var F;k((null===(F=w.error)||void 0===F?void 0:F.message)||"")}}catch(b){k(b)}})}class he extends Error{constructor(k,b,S){super(b),this.code=k,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(k,b,S){this.service=k,this.serviceName=b,this.errors=S}create(k,...b){const S=b[0]||{},w=`${this.service}/${k}`,F=this.errors[k],ce=F?function De(B,k){return B.replace(mt,(b,S)=>{const w=k[S];return null!=w?String(w):`<${S}?>`})}(F,S):"Error";return new he(w,`${this.serviceName}: ${ce} (${w}).`,S)}}const mt=/\{\$([^}]+)}/g;function Jn(B,k){return Object.prototype.hasOwnProperty.call(B,k)}function Sr(B){for(const k in B)if(Object.prototype.hasOwnProperty.call(B,k))return!1;return!0}function ji(B,k){if(B===k)return!0;const b=Object.keys(B),S=Object.keys(k);for(const w of b){if(!S.includes(w))return!1;const F=B[w],ce=k[w];if(Lt(F)&&Lt(ce)){if(!ji(F,ce))return!1}else if(F!==ce)return!1}for(const w of S)if(!b.includes(w))return!1;return!0}function Lt(B){return null!==B&&"object"==typeof B}function js(B){const k=[];for(const[b,S]of Object.entries(B))Array.isArray(S)?S.forEach(w=>{k.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):k.push(encodeURIComponent(b)+"="+encodeURIComponent(S));return k.length?"&"+k.join("&"):""}function bs(B){const k={};return B.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,F]=S.split("=");k[decodeURIComponent(w)]=decodeURIComponent(F)}}),k}function li(B){const k=B.indexOf("?");if(!k)return"";const b=B.indexOf("#",k);return B.substring(k,b>0?b:void 0)}function Rr(B,k){const b=new Mr(B,k);return b.subscribe.bind(b)}class Mr{constructor(k,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{k(this)}).catch(S=>{this.error(S)})}next(k){this.forEachObserver(b=>{b.next(k)})}error(k){this.forEachObserver(b=>{b.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,b,S){let w;if(void 0===k&&void 0===b&&void 0===S)throw new Error("Missing Observer.");w=function Pr(B,k){if("object"!=typeof B||null===B)return!1;for(const b of k)if(b in B&&"function"==typeof B[b])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:b,complete:S},void 0===w.next&&(w.next=en),void 0===w.error&&(w.error=en),void 0===w.complete&&(w.complete=en);const F=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),F}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,k)}sendOne(k,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{b(this.observers[k])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}function Cs(B){return B&&B._delegate?B._delegate:B}},862:(ts,Zn,Ke)=>{function M(n){return"function"==typeof n}function we(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=we(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class xt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Xt(s)}catch(o){e=e??[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Xt(e);else{if(e instanceof xt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof xt&&e._removeParent(this)}}xt.EMPTY=(()=>{const n=new xt;return n.closed=!0,n})();const gn=xt.EMPTY;function On(n){return n instanceof xt||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function Xt(n){M(n)?n():n.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},le={setTimeout(n,e,...t){const{delegate:r}=le;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=le;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ve(n){le.setTimeout(()=>{const{onUnhandledError:e}=St;if(!e)throw n;e(n)})}function Be(){}const st=Et("C",void 0,void 0);function Et(n,e,t){return{kind:n,value:e,error:t}}let Xe=null;function et(n){if(St.useDeprecatedSynchronousErrorHandling){const e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Xe;if(Xe=null,t)throw r}}else n()}class mn extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,On(e)&&e.add(this)):this.destination=rn}static create(e,t,r){return new Ft(e,t,r)}next(e){this.isStopped?fe(function Qn(n){return Et("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fe(function Nt(n){return Et("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fe(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const gt=Function.prototype.bind;function Ut(n,e){return gt.call(n,e)}class qr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ot(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ot(r)}else ot(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ot(t)}}}class Ft extends mn{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&St.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ut(e.next,s),error:e.error&&Ut(e.error,s),complete:e.complete&&Ut(e.complete,s)}):i=e}this.destination=new qr(i)}}function ot(n){St.useDeprecatedSynchronousErrorHandling?function ir(n){St.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=n)}(n):ve(n)}function fe(n,e){const{onStoppedNotification:t}=St;t&&le.setTimeout(()=>t(n,e))}const rn={closed:!0,next:Be,error:function Sn(n){throw n},complete:Be},Kt="function"==typeof Symbol&&Symbol.observable||"@@observable";function _n(n){return n}function ci(n){return 0===n.length?_n:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ee(n){return n&&n instanceof mn||function Ai(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&On(n)}(t)?t:new Ft(t,r,i);return et(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ws(r))((i,s)=>{const o=new Ft({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Kt](){return this}pipe(...t){return ci(t)(this)}toPromise(t){return new(t=ws(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ws(n){var e;return null!==(e=n??St.Promise)&&void 0!==e?e:Promise}const re=we(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let oe=(()=>{class n extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ue(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?gn:(this.currentObservers=null,s.push(t),new xt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ut;return t.source=this,t}}return n.create=(e,t)=>new ue(e,t),n})();class ue extends oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:gn}}function he(n){return M(n?.lift)}function se(n){return e=>{if(he(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new mt(n,e,t,r,i)}class mt extends mn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return se((t,r)=>{let i=0;t.subscribe(De(r,s=>{r.next(n.call(e,s,i++))}))})}var Le=Ke(582);const bt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function sn(n){return M(n?.then)}function Zt(n){return M(n[Kt])}function Yn(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Rn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const hr=function Jn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Sr(n){return M(n?.[hr])}function Ts(n){return(0,Le.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Le.qq)(t.read());if(i)return yield(0,Le.qq)(void 0);yield yield(0,Le.qq)(r)}}finally{t.releaseLock()}})}function ji(n){return M(n?.getReader)}function Lt(n){if(n instanceof ut)return n;if(null!=n){if(Zt(n))return function Ci(n){return new ut(e=>{const t=n[Kt]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bt(n))return function js(n){return new ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(sn(n))return function bs(n){return new ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ve)})}(n);if(Yn(n))return $i(n);if(Sr(n))return function li(n){return new ut(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ji(n))return function Rr(n){return $i(Ts(n))}(n)}throw Rn(n)}function $i(n){return new ut(e=>{(function Mr(n,e){var t,r,i,s;return(0,Le.mG)(this,void 0,void 0,function*(){try{for(t=(0,Le.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function yn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function en(n,e,t=1/0){return M(e)?en((r,i)=>Oe((s,o)=>e(r,s,i,o))(Lt(n(r,i))),t):("number"==typeof e&&(t=e),se((r,i)=>function Pr(n,e,t,r,i,s,o,a){const u=[];let c=0,f=0,m=!1;const y=()=>{m&&!u.length&&!c&&e.complete()},I=R=>c<r?T(R):u.push(R),T=R=>{s&&e.next(R),c++;let P=!1;Lt(t(R,f++)).subscribe(De(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{P=!0},void 0,()=>{if(P)try{for(c--;u.length&&c<r;){const H=u.shift();o?yn(e,o,()=>T(H)):T(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(De(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function wr(n=1/0){return en(_n,n)}const kn=new ut(n=>n.complete());function Si(n){return n[n.length-1]}function Fn(n){return function Qt(n){return n&&M(n.schedule)}(Si(n))?n.pop():void 0}function vn(n,e=0){return se((t,r)=>{t.subscribe(De(r,i=>yn(r,n,()=>r.next(i),e),()=>yn(r,n,()=>r.complete(),e),i=>yn(r,n,()=>r.error(i),e)))})}function Tr(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Cs(n,e){if(!n)throw new Error("Iterable cannot be null");return new ut(t=>{yn(t,e,()=>{const r=n[Symbol.asyncIterator]();yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function k(n,e){if(null!=n){if(Zt(n))return function As(n,e){return Lt(n).pipe(Tr(e),vn(e))}(n,e);if(bt(n))return function qs(n,e){return new ut(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(sn(n))return function Hs(n,e){return Lt(n).pipe(Tr(e),vn(e))}(n,e);if(Yn(n))return Cs(n,e);if(Sr(n))return function Ws(n,e){return new ut(t=>{let r;return yn(t,e,()=>{r=n[hr](),yn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if(ji(n))return function B(n,e){return Cs(Ts(n),e)}(n,e)}throw Rn(n)}(n,e):Lt(n)}function S(...n){const e=Fn(n),t=function sr(n,e){return"number"==typeof Si(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Lt(r[0]):wr(t)(b(r,e)):kn}class w extends oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function F(...n){return b(n,Fn(n))}function ce(n={}){const{connector:e=(()=>new oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,c=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=u=void 0,f=m=!1},T=()=>{const R=o;I(),R?.unsubscribe()};return se((R,P)=>{c++,!m&&!f&&y();const H=u=u??e();P.add(()=>{c--,0===c&&!m&&!f&&(a=Ae(T,i))}),H.subscribe(P),!o&&c>0&&(o=new Ft({next:V=>H.next(V),error:V=>{m=!0,y(),a=Ae(I,t,V),H.error(V)},complete:()=>{f=!0,y(),a=Ae(I,r),H.complete()}}),Lt(R).subscribe(o))})(s)}}function Ae(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ft({next:()=>{r.unsubscribe(),n()}});return Lt(e(...t)).subscribe(r)}function ke(n,e){return se((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(De(r,u=>{i?.unsubscribe();let c=0;const f=s++;Lt(n(u,f)).subscribe(i=De(r,m=>r.next(e?e(u,m,f,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Je(n,e=_n){return n=n??Dt,se((t,r)=>{let i,s=!0;t.subscribe(De(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Dt(n,e){return n===e}function Ce(n){for(let e in n)if(n[e]===Ce)return e;throw Error("Could not find renamed property on target object.")}function je(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(je).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function or(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ao=Ce({__forward_ref__:Ce});function pa(n){return n.__forward_ref__=pa,n.toString=function(){return je(this())},n}function Ze(n){return ga(n)?n():n}function ga(n){return"function"==typeof n&&n.hasOwnProperty(Ao)&&n.__forward_ref__===pa}function ma(n){return n&&!!n.\u0275providers}const Nc="https://g.co/ng/security#xss";class N extends Error{constructor(e,t){super(function W(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Q(n){return"string"==typeof n?n:null==n?"":String(n)}function Ht(n,e){throw new N(-201,!1)}function Mi(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function En(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fc(n){return fh(n,_u)||fh(n,Ro)}function fh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lc(n){return n&&(n.hasOwnProperty(ph)||n.hasOwnProperty(qg))?n[ph]:null}const _u=Ce({\u0275prov:Ce}),ph=Ce({\u0275inj:Ce}),Ro=Ce({ngInjectableDef:Ce}),qg=Ce({ngInjectorDef:Ce});var pt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pt||{});let gh;function Wr(n){const e=gh;return gh=n,e}function Uc(n,e,t){const r=Fc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&pt.Optional?null:void 0!==e?e:void Ht(je(n))}const qt=globalThis;class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const vu={},Eu="__NG_DI_FLAG__",Ks="ngTempTokenPath",Eh=/\n/gm,zi="__source";let _a;function Zs(n){const e=_a;return _a=n,e}function wh(n,e=pt.Default){if(void 0===_a)throw new N(-203,!1);return null===_a?Uc(n,void 0,e):_a.get(n,e&pt.Optional?null:void 0,e)}function de(n,e=pt.Default){return(function Vc(){return gh}()||wh)(Ze(n),e)}function xe(n,e=pt.Default){return de(n,$c(e))}function $c(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Iu(n){const e=[];for(let t=0;t<n.length;t++){const r=Ze(n[t]);if(Array.isArray(r)){if(0===r.length)throw new N(900,!1);let i,s=pt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=ME(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(de(i,s))}else e.push(de(r))}return e}function Hi(n,e){return n[Eu]=e,n.prototype[Eu]=e,n}function ME(n){return n[Eu]}function Qs(n){return{toString:n}.toString()}var ya=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ya||{}),jn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(jn||{});const xr={},wt=[],zc=Ce({\u0275cmp:Ce}),Th=Ce({\u0275dir:Ce}),bh=Ce({\u0275pipe:Ce}),Qg=Ce({\u0275mod:Ce}),Gr=Ce({\u0275fac:Ce}),Tu=Ce({__NG_ELEMENT_ID__:Ce}),bu=Ce({__NG_ENV_ID__:Ce});function Yg(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Hc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];di(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function qc(n){return 3===n||4===n||6===n}function di(n){return 64===n.charCodeAt(0)}function va(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Jg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Jg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Wc="ng-template";function Gc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Yg(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Dh(n){return 4===n.type&&n.value!==Wc}function Xg(n,e,t){return e===(4!==n.type||t?n.value:Wc)}function xE(n,e,t){let r=4;const i=n.attrs||[],s=function Ch(n){for(let e=0;e<n.length;e++)if(qc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Xg(n,u,t)||""===u&&1===e.length){if(hi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Gc(n.attrs,c,t)){if(hi(r))return!1;o=!0}continue}const m=Ah(8&r?"class":u,i,Dh(n),t);if(-1===m){if(hi(r))return!1;o=!0;continue}if(""!==c){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==Yg(I,c,0)||2&r&&c!==y){if(hi(r))return!1;o=!0}}}}else{if(!o&&!hi(r)&&!hi(u))return!1;if(o&&hi(u))continue;o=!1,r=u|1&r}}return hi(r)||o}function hi(n){return 0==(1&n)}function Ah(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function em(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Kc(n,e,t=!1){for(let r=0;r<e.length;r++)if(xE(n,e[r],t))return!0;return!1}function Sh(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Rh(n,e){return n?":not("+e.trim()+")":e}function Mh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!hi(o)&&(e+=Rh(s,i),i=""),r=o,s=s||!hi(r);t++}return""!==i&&(e+=Rh(s,i)),e}function Nr(n){return Qs(()=>{const e=rm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ya.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||jn.Emulated,styles:n.styles||wt,_:null,schemas:n.schemas||null,tView:null,id:""};Yc(t);const r=n.dependencies;return t.directiveDefs=Jc(r,!1),t.pipeDefs=Jc(r,!0),t.id=function NE(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function tm(n){return Tt(n)||Xn(n)}function Nh(n){return null!==n}function $n(n){return Qs(()=>({type:n.type,bootstrap:n.bootstrap||wt,declarations:n.declarations||wt,imports:n.imports||wt,exports:n.exports||wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nm(n,e){if(null==n)return xr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Wt(n){return Qs(()=>{const e=rm(n);return Yc(e),e})}function Tt(n){return n[zc]||null}function Xn(n){return n[Th]||null}function ur(n){return n[bh]||null}function Or(n,e){const t=n[Qg]||null;if(!t&&!0===e)throw new Error(`Type ${je(n)} does not have '\u0275mod' property.`);return t}function rm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||xr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nm(n.inputs,e),outputs:nm(n.outputs)}}function Yc(n){n.features?.forEach(e=>e(n))}function Jc(n,e){if(!n)return null;const t=e?ur:tm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Nh)}const ln=0,Re=1,nt=2,dn=3,fi=4,Du=5,cr=6,Ea=7,Ln=8,ns=9,Ia=10,rt=11,Mo=12,im=13,Js=14,Vn=15,Po=16,wa=17,Pi=18,Au=19,Xc=20,Xs=21,qi=22,Cu=23,xo=24,_t=25,el=1,tl=2,rs=7,No=9,fr=11;function Kr(n){return Array.isArray(n)&&"object"==typeof n[el]}function kr(n){return Array.isArray(n)&&!0===n[el]}function sm(n){return 0!=(4&n.flags)}function Ta(n){return n.componentOffset>-1}function Fh(n){return 1==(1&n.flags)}function pi(n){return!!n.template}function Lh(n){return 0!=(512&n[nt])}function Oo(n,e){return n.hasOwnProperty(Gr)?n[Gr]:null}let br=null,Da=!1;function xi(n){const e=br;return br=n,e}const lm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function dm(n){if(!to(n)||n.dirty){if(!n.producerMustRecompute(n)&&!hm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function rl(n){n.dirty=!0,function Un(n){if(void 0===n.liveConsumerNode)return;const e=Da;Da=!0;try{for(const t of n.liveConsumerNode)t.dirty||rl(t)}finally{Da=e}}(n),n.consumerMarkedDirty?.(n)}function Bh(n){return n&&(n.nextProducerIndex=0),xi(n)}function Ru(n,e){if(xi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(to(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)il(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hm(n){ko(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dm(t),r!==t.version))return!0}return!1}function fm(n){if(ko(n),to(n))for(let e=0;e<n.producerNode.length;e++)il(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function il(n,e){if(function Ca(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ko(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)il(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ko(i),i.producerIndexOfThis[r]=e}}function to(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ko(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let sl=null;const vm=()=>{},qh=(()=>({...lm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:vm}))();class zE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fo(){return Em}function Em(n){return n.type.prototype.ngOnChanges&&(n.setInput=HE),Im}function Im(){const n=Tm(this),e=n?.current;if(e){const t=n.previous;if(t===xr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HE(n,e,t,r){const i=this.declaredInputs[t],s=Tm(n)||function Wh(n,e){return n[wm]=e}(n,{previous:xr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new zE(u&&u.currentValue,e,a===xr),n[r]=e}Fo.ngInherit=!0;const wm="__ngSimpleChanges__";function Tm(n){return n[wm]||null}const is=function(n,e,t){};function Gt(n){for(;Array.isArray(n);)n=n[ln];return n}function Ra(n,e){return Gt(e[n])}function Zr(n,e){return Gt(e[n.index])}function Dm(n,e){return n.data[e]}function Fr(n,e){const t=e[n];return Kr(t)?t:t[ln]}function ss(n,e){return null==e?null:n[e]}function Qh(n){n[wa]=0}function KE(n){1024&n[nt]||(n[nt]|=1024,cl(n,1))}function Am(n){1024&n[nt]&&(n[nt]&=-1025,cl(n,-1))}function cl(n,e){let t=n[dn];if(null===t)return;t[Du]+=e;let r=t;for(t=t[dn];null!==t&&(1===e&&1===r[Du]||-1===e&&0===r[Du]);)t[Du]+=e,r=t,t=t[dn]}const Ye={lFrame:Vm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rm(){return Ye.bindingsEnabled}function no(){return null!==Ye.skipHydrationRootTNode}function ge(){return Ye.lFrame.lView}function Rt(){return Ye.lFrame.tView}function pr(){let n=xm();for(;null!==n&&64===n.type;)n=n.parent;return n}function xm(){return Ye.lFrame.currentTNode}function os(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function tf(){return Ye.lFrame.isParent}function Pu(){Ye.lFrame.isParent=!1}function Ma(){return Ye.lFrame.bindingIndex++}function eI(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,xu(e)}function xu(n){Ye.lFrame.currentDirectiveIndex=n}function Fm(){return Ye.lFrame.currentQueryIndex}function sf(n){Ye.lFrame.currentQueryIndex=n}function af(n){const e=n[Re];return 2===e.type?e.declTNode:1===e.type?n[cr]:null}function Lm(n,e,t){if(t&pt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&pt.Host||(i=af(s),null===i||(s=s[Js],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ye.lFrame=cf();return r.currentTNode=e,r.lView=n,!0}function uf(n){const e=cf(),t=n[Re];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cf(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?Vm(n):e}function Vm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Nu(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Um=Nu;function lf(){const n=Nu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Lr(){return Ye.lFrame.selectedIndex}function Vo(n){Ye.lFrame.selectedIndex=n}function In(){const n=Ye.lFrame;return Dm(n.tView,n.selectedIndex)}let jm=!0;function fl(){return jm}function Ms(n){jm=n}function pl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function gl(n,e,t){_l(n,e,3,t)}function ml(n,e,t,r){(3&n[nt])===t&&_l(n,e,t,r)}function hf(n,e){let t=n[nt];(3&t)===e&&(t&=8191,t+=1,n[nt]=t)}function _l(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[wa]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[wa]+=65536),(a<s||-1==s)&&(aI(n,t,e,u),n[wa]=(4294901760&n[wa])+u+2),u++}function yl(n,e){is(4,n,e);const t=xi(null);try{e.call(n)}finally{xi(t),is(5,n,e)}}function aI(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[nt]>>13<n[wa]>>16&&(3&n[nt])===e&&(n[nt]+=8192,yl(a,s)):yl(a,s)}const ro=-1;class Ou{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function vl(n){return n!==ro}function Pa(n){return 32767&n}function Fu(n,e){let t=function cI(n){return n>>16}(n),r=e;for(;t>0;)r=r[Js],t--;return r}let gf=!0;function El(n){const e=gf;return gf=n,e}const mf=255,zm=5;let ZC=0;const cs={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(vl(i)){const o=Pa(i),a=Fu(i,e),u=a[Re].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Gm(i),null===r)return ro;if(t++,i=i[Js],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ro}function D(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Tu)&&(r=t[Tu]),null==r&&(r=t[Tu]=ZC++);const i=r&mf;e.data[n+(i>>zm)]|=1<<i}(n,e,t)}function X(n,e,t){if(t&pt.Optional||void 0!==n)return n;Ht()}function pe(n,e,t,r){if(t&pt.Optional&&void 0===r&&(r=null),!(t&(pt.Self|pt.Host))){const i=n[ns],s=Wr(void 0);try{return i?i.get(e,r,t&pt.Optional):Uc(e,r,t&pt.Optional)}finally{Wr(s)}}return X(r,0,t)}function Pe(n,e,t,r=pt.Default,i){if(null!==n){if(2048&e[nt]&&!(r&pt.Self)){const o=function Wm(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[nt]&&!(512&o[nt]);){const a=ze(s,o,t,r|pt.Self,cs);if(a!==cs)return a;let u=s.parent;if(!u){const c=o[Xc];if(c){const f=c.get(t,cs,r);if(f!==cs)return f}u=Gm(o),o=o[Js]}s=u}return i}(n,e,t,r,cs);if(o!==cs)return o}const s=ze(n,e,t,r,cs);if(s!==cs)return s}return pe(e,t,r,i)}function ze(n,e,t,r,i){const s=function Il(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Tu)?n[Tu]:void 0;return"number"==typeof e?e>=0?e&mf:qm:e}(t);if("function"==typeof s){if(!Lm(e,n,r))return r&pt.Host?X(i,0,r):pe(e,t,r,i);try{let o;if(o=s(r),null!=o||r&pt.Optional)return o;Ht()}finally{Um()}}else if("number"==typeof s){let o=null,a=g(n,e),u=ro,c=r&pt.Host?e[Vn][cr]:null;for((-1===a||r&pt.SkipSelf)&&(u=-1===a?v(n,e):e[a+8],u!==ro&&wl(r,!1)?(o=e[Re],a=Pa(u),e=Fu(u,e)):a=-1);-1!==a;){const f=e[Re];if(_f(s,a,f.data)){const m=yt(a,e,t,o,r,c);if(m!==cs)return m}u=e[a+8],u!==ro&&wl(r,e[Re].data[a+8]===c)&&_f(s,a,e)?(o=f,a=Pa(u),e=Fu(u,e)):a=-1}}return i}function yt(n,e,t,r,i,s){const o=e[Re],a=o.data[n+8],f=mr(a,o,t,null==r?Ta(a)&&gf:r!=o&&0!=(3&a.type),i&pt.Host&&s===a);return null!==f?Qr(e,o,f,a):cs}function mr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<u&&t===T||I>=u&&T.type===t)return I}if(i){const I=o[u];if(I&&pi(I)&&I.type===t)return u}return null}function Qr(n,e,t,r){let i=n[t];const s=e.data;if(function $m(n){return n instanceof Ou}(i)){const o=i;o.resolving&&function tt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new N(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Q(n)}(s[t]));const a=El(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Wr(o.injectImpl):null;Lm(n,r,pt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function oI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Em(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Wr(c),El(a),o.resolving=!1,Um()}}return i}function _f(n,e,t){return!!(t[e+(n>>zm)]&1<<n)}function wl(n,e){return!(n&pt.Self||n&pt.Host&&e)}class _r{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Pe(this._tNode,this._lView,e,$c(r),t)}}function qm(){return new _r(pr(),ge())}function Lu(n){return ga(n)?()=>{const e=Lu(Ze(n));return e&&e()}:Oo(n)}function Gm(n){const e=n[Re],t=e.type;return 2===t?e.declTNode:1===t?n[cr]:null}const Tl="__parameters__";function Dl(n,e,t){return Qs(()=>{const r=function lI(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,f){const m=u.hasOwnProperty(Tl)?u[Tl]:Object.defineProperty(u,Tl,{value:[]})[Tl];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Cl(n,e){n.forEach(t=>Array.isArray(t)?Cl(t,e):e(t))}function YC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Km(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ef(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Wi(n,e,t){let r=Sl(n,e);return r>=0?n[1|r]=t:(r=~r,function ZB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function dI(n,e){const t=Sl(n,e);if(t>=0)return n[1|t]}function Sl(n,e){return function JC(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Vr=Hi(Dl("Optional"),8),Qm=Hi(Dl("SkipSelf"),4);function t_(n){return 128==(128&n.flags)}var ka=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ka||{});const mI=new Map;let vj=0;const yI="__ngContext__";function Yr(n,e){Kr(e)?(n[yI]=e[Au],function Ij(n){mI.set(n[Au],n)}(e)):n[yI]=e}let vI;function EI(n,e){return vI(n,e)}function Tf(n){const e=n[dn];return kr(e)?e[dn]:e}function yS(n){return ES(n[Mo])}function vS(n){return ES(n[fi])}function ES(n){for(;null!==n&&!kr(n);)n=n[fi];return n}function Pl(n,e,t,r,i){if(null!=r){let s,o=!1;kr(r)?s=r:Kr(r)&&(o=!0,r=r[ln]);const a=Gt(r);0===n&&null!==t?null==i?bS(e,t,a):Vu(e,t,a,i||null,!0):1===n&&null!==t?Vu(e,t,a,i||null,!0):2===n?function u_(n,e,t){const r=o_(n,e);r&&function Bj(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function zj(n,e,t,r,i){const s=t[rs];s!==Gt(t)&&Pl(e,n,r,s,i);for(let a=fr;a<t.length;a++){const u=t[a];Df(u[Re],u,n,e,r,s)}}(e,n,s,t,i)}}function i_(n,e,t){return n.createElement(e,t)}function wS(n,e){const t=n[No],r=t.indexOf(e);Am(e),t.splice(r,1)}function s_(n,e){if(n.length<=fr)return;const t=fr+e,r=n[t];if(r){const i=r[Po];null!==i&&i!==n&&wS(i,r),e>0&&(n[t-1][fi]=r[fi]);const s=Km(n,fr+e);!function xj(n,e){Df(n,e,e[rt],2,null,null),e[ln]=null,e[cr]=null}(r[Re],r);const o=s[Pi];null!==o&&o.detachView(s[Re]),r[dn]=null,r[fi]=null,r[nt]&=-129}return r}function wI(n,e){if(!(256&e[nt])){const t=e[rt];e[Cu]&&fm(e[Cu]),e[xo]&&fm(e[xo]),t.destroyNode&&Df(n,e,t,3,null,null),function kj(n){let e=n[Mo];if(!e)return TI(n[Re],n);for(;e;){let t=null;if(Kr(e))t=e[Mo];else{const r=e[fr];r&&(t=r)}if(!t){for(;e&&!e[fi]&&e!==n;)Kr(e)&&TI(e[Re],e),e=e[dn];null===e&&(e=n),Kr(e)&&TI(e[Re],e),t=e&&e[fi]}e=t}}(e)}}function TI(n,e){if(!(256&e[nt])){e[nt]&=-129,e[nt]|=256,function Uj(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ou)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];is(4,a,u);try{u.call(a)}finally{is(5,a,u)}}else{is(4,i,s);try{s.call(i)}finally{is(5,i,s)}}}}}(n,e),function Vj(n,e){const t=n.cleanup,r=e[Ea];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ea]=null);const i=e[Xs];if(null!==i){e[Xs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Re].type&&e[rt].destroy();const t=e[Po];if(null!==t&&kr(e[dn])){t!==e[dn]&&wS(t,e);const r=e[Pi];null!==r&&r.detachView(n)}!function wj(n){mI.delete(n[Au])}(e)}}function bI(n,e,t){return function TS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[ln];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===jn.None||s===jn.Emulated)return null}return Zr(r,t)}}(n,e.parent,t)}function Vu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function bS(n,e,t){n.appendChild(e,t)}function DS(n,e,t,r,i){null!==r?Vu(n,e,t,r,i):bS(n,e,t)}function o_(n,e){return n.parentNode(e)}function AS(n,e,t){return SS(n,e,t)}let DI,RI,l_,SS=function CS(n,e,t){return 40&n.type?Zr(n,t):null};function a_(n,e,t,r){const i=bI(n,r,e),s=e[rt],a=AS(r.parent||e[cr],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)DS(s,i,t[u],a,!1);else DS(s,i,t,a,!1);void 0!==DI&&DI(s,r,e,t,i)}function bf(n,e){if(null!==e){const t=e.type;if(3&t)return Zr(e,n);if(4&t)return AI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return bf(n,r);{const i=n[e.index];return kr(i)?AI(-1,i):Gt(i)}}if(32&t)return EI(e,n)()||Gt(n[e.index]);{const r=MS(n,e);return null!==r?Array.isArray(r)?r[0]:bf(Tf(n[Vn]),r):bf(n,e.next)}}return null}function MS(n,e){return null!==e?n[Vn][cr].projection[e.projection]:null}function AI(n,e){const t=fr+n+1;if(t<e.length){const r=e[t],i=r[Re].firstChild;if(null!==i)return bf(r,i)}return e[rs]}function CI(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Yr(Gt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)CI(n,e,t.child,r,i,s,!1),Pl(e,n,i,a,s);else if(32&u){const c=EI(t,r);let f;for(;f=c();)Pl(e,n,i,f,s);Pl(e,n,i,a,s)}else 16&u?xS(n,e,r,t,i,s):Pl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Df(n,e,t,r,i,s){CI(t,r,n.firstChild,e,i,s,!1)}function xS(n,e,t,r,i,s){const o=t[Vn],u=o[cr].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Pl(e,n,i,u[c],s);else{let c=u;const f=o[dn];t_(r)&&(c.flags|=128),CI(n,e,c,f,i,s,!0)}}function NS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OS(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Hc(n,e,r),null!==i&&NS(n,e,i),null!==s&&function qj(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function LS(n){return function MI(){if(void 0===l_&&(l_=null,qt.trustedTypes))try{l_=qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return l_}()?.createScriptURL(n)||n}class VS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nc})`}}function Fa(n){return n instanceof VS?n.changingThisBreaksApplicationSecurity:n}function Af(n,e){const t=function t$(n){return n instanceof VS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Nc})`)}return t===e}const s$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ol=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ol||{});function h_(n){const e=Sf();return e?e.sanitize(Ol.URL,n)||"":Af(n,"URL")?Fa(n):function PI(n){return(n=String(n)).match(s$)?n:"unsafe:"+n}(Q(n))}function qS(n){const e=Sf();if(e)return LS(e.sanitize(Ol.RESOURCE_URL,n)||"");if(Af(n,"ResourceURL"))return LS(Fa(n));throw new N(904,!1)}function Sf(){const n=ge();return n&&n[Ia].sanitizer}const Rf=new Ie("ENVIRONMENT_INITIALIZER"),GS=new Ie("INJECTOR",-1),KS=new Ie("INJECTOR_DEF_TYPES");class kI{get(e,t=vu){if(t===vu){const r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return t}}function y$(...n){return{\u0275providers:QS(0,n),\u0275fromNgModule:!0}}function QS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Cl(e,o=>{const a=o;f_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&YS(i,s),t}function YS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];FI(i,s=>{e(s,r)})}}function f_(n,e,t,r){if(!(n=Ze(n)))return!1;let i=null,s=Lc(n);const o=!s&&Tt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Lc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)f_(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Cl(s.imports,f=>{f_(f,e,t,r)&&(c||=[],c.push(f))})}finally{}void 0!==c&&YS(c,e)}if(!a){const c=Oo(i)||(()=>new i);e({provide:i,useFactory:c,deps:wt},i),e({provide:KS,useValue:i,multi:!0},i),e({provide:Rf,useValue:()=>de(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const c=n;FI(u,f=>{e(f,c)})}}}return i!==n&&void 0!==n.providers}function FI(n,e){for(let t of n)ma(t)&&(t=t.\u0275providers),Array.isArray(t)?FI(t,e):e(t)}const v$=Ce({provide:String,useValue:Ce});function LI(n){return null!==n&&"object"==typeof n&&v$ in n}function Uu(n){return"function"==typeof n}const VI=new Ie("Set Injector scope."),p_={},I$={};let UI;function g_(){return void 0===UI&&(UI=new kI),UI}class ds{}class kl extends ds{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jI(e,o=>this.processProvider(o)),this.records.set(GS,Fl(void 0,this)),i.has("environment")&&this.records.set(ds,Fl(void 0,this));const s=this.records.get(VI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(KS.multi,wt,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Zs(this),r=Wr(void 0);try{return e()}finally{Zs(t),Wr(r)}}get(e,t=vu,r=pt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bu))return e[bu](this);r=$c(r);const s=Zs(this),o=Wr(void 0);try{if(!(r&pt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function A$(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&Fc(e);u=c&&this.injectableDefInScope(c)?Fl(BI(e),p_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&pt.Self?g_():this.parent).get(e,t=r&pt.Optional&&t===vu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ks]=a[Ks]||[]).unshift(je(e)),s)throw a;return function PE(n,e,t,r){const i=n[Ks];throw e[zi]&&i.unshift(e[zi]),n.message=function wu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):je(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Eh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ks]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Wr(o),Zs(s)}}resolveInjectorInitializers(){const e=Zs(this),t=Wr(void 0);try{const i=this.get(Rf.multi,wt,pt.Self);for(const s of i)s()}finally{Zs(e),Wr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new N(205,!1)}processProvider(e){let t=Uu(e=Ze(e))?e:Ze(e&&e.provide);const r=function T$(n){return LI(n)?Fl(void 0,n.useValue):Fl(eR(n),p_)}(e);if(Uu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Fl(void 0,p_,!0),i.factory=()=>Iu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===p_&&(t.value=I$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function D$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function BI(n){const e=Fc(n),t=null!==e?e.factory:Oo(n);if(null!==t)return t;if(n instanceof Ie)throw new N(204,!1);if(n instanceof Function)return function w$(n){const e=n.length;if(e>0)throw Ef(e,"?"),new N(204,!1);const t=function Hg(n){return n&&(n[_u]||n[Ro])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new N(204,!1)}function eR(n,e,t){let r;if(Uu(n)){const i=Ze(n);return Oo(i)||BI(i)}if(LI(n))r=()=>Ze(n.useValue);else if(function XS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Iu(n.deps||[]));else if(function JS(n){return!(!n||!n.useExisting)}(n))r=()=>de(Ze(n.useExisting));else{const i=Ze(n&&(n.useClass||n.provide));if(!function b$(n){return!!n.deps}(n))return Oo(i)||BI(i);r=()=>new i(...Iu(n.deps))}return r}function Fl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jI(n,e){for(const t of n)Array.isArray(t)?jI(t,e):t&&ma(t)?jI(t.\u0275providers,e):e(t)}const m_=new Ie("AppId",{providedIn:"root",factory:()=>C$}),C$="ng",tR=new Ie("Platform Initializer"),hs=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nR=new Ie("AnimationModuleType"),$I=new Ie("CSP nonce",{providedIn:"root",factory:()=>function Nl(){if(void 0!==RI)return RI;if(typeof document<"u")return document;throw new N(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let rR=(n,e,t)=>null;function QI(n,e,t=!1){return rR(n,e,t)}class L${}class oR{}class U${resolveComponentFactory(e){throw function V$(n){const e=Error(`No component factory found for ${je(n)}.`);return e.ngComponent=n,e}(e)}}let w_=(()=>{class n{static#e=this.NULL=new U$}return n})();function B$(){return Ul(pr(),ge())}function Ul(n,e){return new Ps(Zr(n,e))}let Ps=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=B$}return n})();function j$(n){return n instanceof Ps?n.nativeElement:n}class xf{}let T_=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function $$(){const n=ge(),t=Fr(pr().index,n);return(Kr(t)?t:n)[rt]}()}return n})(),z$=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>null})}return n})();class Bu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const XI=new Bu("16.2.12"),ew={};function dR(n,e=null,t=null,r){const i=hR(n,e,t,r);return i.resolveInjectorInitializers(),i}function hR(n,e=null,t=null,r,i=new Set){const s=[t||wt,y$(n)];return r=r||("object"==typeof n?void 0:je(n)),new kl(s,e||g_(),r||null,i)}let gi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=vu;static#t=this.NULL=new kI;static create(t,r){if(Array.isArray(t))return dR({name:""},r,t,"");{const i=t.name??"";return dR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Fe({token:n,providedIn:"any",factory:()=>de(GS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function nw(n){return n.ngOriginalError}class Bo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&nw(e);for(;t&&nw(t);)t=nw(t);return t||null}}function iw(n){return e=>{setTimeout(n,void 0,e)}}const Jr=class Q$ extends oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=iw(s),i&&(i=iw(i)),o&&(o=iw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof xt&&e.add(a),a}};function pR(...n){}class At{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jr(!1),this.onMicrotaskEmpty=new Jr(!1),this.onStable=new Jr(!1),this.onError=new Jr(!1),typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Y$(){const n="function"==typeof qt.requestAnimationFrame;let e=qt[n?"requestAnimationFrame":"setTimeout"],t=qt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function ez(n){const e=()=>{!function X$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ow(n),n.isCheckStableRunning=!0,sw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ow(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function nz(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return gR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),mR(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return gR(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),mR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ow(n),sw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(At.isInAngularZone())throw new N(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,J$,pR,pR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const J$={};function sw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ow(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mR(n){n._nesting--,sw(n)}class tz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jr,this.onMicrotaskEmpty=new Jr,this.onStable=new Jr,this.onError=new Jr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const _R=new Ie("",{providedIn:"root",factory:yR});function yR(){const n=xe(At);let e=!0;return S(new ut(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ut(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{At.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ce()))}function jo(n){return n instanceof Function?n():n}let aw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Nf(n){for(;n;){n[nt]|=64;const e=Tf(n);if(Lh(n)&&!e)return n;n=e}return null}const TR=new Ie("",{providedIn:"root",factory:()=>!1});let D_=null;function CR(n,e){return n[e]??MR()}function SR(n,e){const t=MR();t.producerNode?.length&&(n[e]=D_,t.lView=n,D_=RR())}const hz={...lm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Nf(n.lView)},lView:null};function RR(){return Object.create(hz)}function MR(){return D_??=RR(),D_}const ct={};function $o(n){PR(Rt(),ge(),Lr()+n,!1)}function PR(n,e,t,r){if(!r)if(3==(3&e[nt])){const s=n.preOrderCheckHooks;null!==s&&gl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ml(e,s,0,t)}Vo(t)}function We(n,e=pt.Default){const t=ge();return null===t?de(n,e):Pe(pr(),t,Ze(n),e)}function A_(n,e,t,r,i,s,o,a,u,c,f){const m=e.blueprint.slice();return m[ln]=i,m[nt]=140|r,(null!==c||n&&2048&n[nt])&&(m[nt]|=2048),Qh(m),m[dn]=m[Js]=n,m[Ln]=t,m[Ia]=o||n&&n[Ia],m[rt]=a||n&&n[rt],m[ns]=u||n&&n[ns]||null,m[cr]=s,m[Au]=function Ej(){return vj++}(),m[qi]=f,m[Xc]=c,m[Vn]=2==e.type?n[Vn]:m,m}function $l(n,e,t,r,i){let s=n.data[e];if(null===s)s=function uw(n,e,t,r,i){const s=xm(),o=tf(),u=n.data[e]=function Ez(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return no()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Om(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Lo(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return os(s,!0),s}function Of(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function NR(n,e,t,r,i){const s=CR(e,Cu),o=Lr(),a=2&r;try{Vo(-1),a&&e.length>_t&&PR(n,e,_t,!1),is(a?2:0,i);const c=a?s:null,f=Bh(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{Ru(c,f)}}finally{a&&null===e[Cu]&&SR(e,Cu),Vo(o),is(a?3:1,i)}}function cw(n,e,t){if(sm(e)){const r=xi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{xi(r)}}}function lw(n,e,t){Rm()&&(function Cz(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ta(t)&&function Oz(n,e,t){const r=Zr(e,n),i=OR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=C_(n,A_(n,i,null,o,r,e,null,n[Ia].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),Yr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],c=Qr(e,n,a,t);Yr(c,e),null!==o&&kz(0,a-i,c,u,0,o),pi(u)&&(Fr(t.index,e)[Ln]=Qr(e,n,a,t))}}(n,e,t,Zr(t,e)),64==(64&t.flags)&&UR(n,e,t))}function dw(n,e,t=Zr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function OR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=hw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hw(n,e,t,r,i,s,o,a,u,c,f){const m=_t+r,y=m+i,I=function pz(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ct);return t}(m,y),T="function"==typeof c?c():c;return I[Re]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}let kR=n=>null;function FR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?LR(t,e,i,s):r.hasOwnProperty(i)&&LR(t,e,r[i],s)}return t}function LR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Gi(n,e,t,r,i,s,o,a){const u=Zr(e,t);let f,c=e.inputs;!a&&null!=c&&(f=c[r])?(_w(n,t,f,r,i),Ta(e)&&function Tz(n,e){const t=Fr(e,n);16&t[nt]||(t[nt]|=64)}(t,e.index)):3&e.type&&(r=function wz(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function fw(n,e,t,r){if(Rm()){const i=null===r?null:{"":-1},s=function Rz(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Kc(e,o.selectors,!1))if(r||(r=[]),pi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),pw(n,e,a.length)}else r.unshift(o),pw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&VR(n,e,t,o,i,a),i&&function Mz(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new N(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=va(t.mergedAttrs,t.attrs)}function VR(n,e,t,r,i,s){for(let c=0;c<r.length;c++)D(l(t,e),n,r[c].type);!function xz(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const f=r[c];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Of(n,e,r.length,null);for(let c=0;c<r.length;c++){const f=r[c];t.mergedAttrs=va(t.mergedAttrs,f.hostAttrs),Nz(n,t,e,u,f),Pz(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function Iz(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,c=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;u=FR(m.inputs,f,u,y?y.inputs:null),c=FR(m.outputs,f,c,T);const R=null===u||null===o||Dh(e)?null:Fz(u,f,o);a.push(R)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(n,t,s)}function UR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function km(){return Ye.lFrame.currentDirectiveIndex}();try{Vo(s);for(let a=r;a<i;a++){const u=n.data[a],c=e[a];xu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Sz(u,c)}}finally{Vo(-1),xu(o)}}function Sz(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function pw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Pz(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pi(e)&&(t[""]=n)}}function Nz(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Oo(i.type)),o=new Ou(s,pi(i),We);n.blueprint[r]=o,t[r]=o,function Dz(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Az(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Of(n,t,i.hostVars,ct),i)}function io(n,e,t,r,i,s){const o=Zr(n,e);!function gw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Q(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[rt],o,s,n.value,t,r,i)}function kz(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)BR(r,t,o[a++],o[a++],o[a++])}function BR(n,e,t,r,i){const s=xi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{xi(s)}}function Fz(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function jR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function $R(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];sf(t[r]),o.contentQueries(2,e[s],s)}}}function C_(n,e){return n[Mo]?n[im][fi]=e:n[Mo]=e,n[im]=e,e}function mw(n,e,t){sf(0);const r=xi(null);try{e(n,t)}finally{xi(r)}}function zR(n){return n[Ea]||(n[Ea]=[])}function HR(n){return n.cleanup||(n.cleanup=[])}function WR(n,e){const t=n[ns],r=t?t.get(Bo,null):null;r&&r.handleError(e)}function _w(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];BR(n.data[o],e[o],r,a,i)}}function Lz(n,e){const t=Fr(e,n),r=t[Re];!function Vz(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[ln];null!==i&&null===t[qi]&&(t[qi]=QI(i,t[ns])),yw(r,t,t[Ln])}function yw(n,e,t){uf(e);try{const r=n.viewQuery;null!==r&&mw(1,r,t);const i=n.template;null!==i&&NR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&$R(n,e),n.staticViewQueries&&mw(2,n.viewQuery,t);const s=n.components;null!==s&&function Uz(n,e){for(let t=0;t<e.length;t++)Lz(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[nt]&=-5,lf()}}let GR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function $E(n,e,t){const r=Object.create(qh);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>rl(r),run:()=>{if(r.dirty=!1,r.hasRun&&!hm(r))return;r.hasRun=!0;const o=Bh(r);try{r.cleanupFn(),r.cleanupFn=vm,r.fn(i)}finally{Ru(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function S_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=or(i,a):2==s&&(r=or(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function kf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Gt(s)),kr(s)&&KR(s,r);const o=t.type;if(8&o)kf(n,e,t.child,r);else if(32&o){const a=EI(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=MS(e,t);if(Array.isArray(a))r.push(...a);else{const u=Tf(e[Vn]);kf(u[Re],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function KR(n,e){for(let t=fr;t<n.length;t++){const r=n[t],i=r[Re].firstChild;null!==i&&kf(r[Re],r,i,e)}n[rs]!==n[ln]&&e.push(n[rs])}function R_(n,e,t,r=!0){const i=e[Ia],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ZR(n,e,n.template,t)}catch(u){throw r&&WR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ZR(n,e,t,r){const i=e[nt];if(256!=(256&i)){e[Ia].effectManager?.flush(),uf(e);try{Qh(e),function hl(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&NR(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&gl(e,c,null)}else{const c=n.preOrderHooks;null!==c&&ml(e,c,0,null),hf(e,0)}if(function $z(n){for(let e=yS(n);null!==e;e=vS(e)){if(!e[tl])continue;const t=e[No];for(let r=0;r<t.length;r++){KE(t[r])}}}(e),QR(e,2),null!==n.contentQueries&&$R(n,e),o){const c=n.contentCheckHooks;null!==c&&gl(e,c)}else{const c=n.contentHooks;null!==c&&ml(e,c,1),hf(e,1)}!function fz(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=CR(e,xo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Vo(~s);else{const o=s,a=t[++i],u=t[++i];eI(a,o),r.dirty=!1;const c=Bh(r);try{u(2,e[o])}finally{Ru(r,c)}}}}finally{null===e[xo]&&SR(e,xo),Vo(-1)}}(n,e);const a=n.components;null!==a&&JR(e,a,0);const u=n.viewQuery;if(null!==u&&mw(2,u,r),o){const c=n.viewCheckHooks;null!==c&&gl(e,c)}else{const c=n.viewHooks;null!==c&&ml(e,c,2),hf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[nt]&=-73,Am(e)}finally{lf()}}}function QR(n,e){for(let t=yS(n);null!==t;t=vS(t))for(let r=fr;r<t.length;r++)YR(t[r],e)}function zz(n,e,t){YR(Fr(e,n),t)}function YR(n,e){if(!function WE(n){return 128==(128&n[nt])}(n))return;const t=n[Re],r=n[nt];if(80&r&&0===e||1024&r||2===e)ZR(t,n,t.template,n[Ln]);else if(n[Du]>0){QR(n,1);const i=t.components;null!==i&&JR(n,i,1)}}function JR(n,e,t){for(let r=0;r<e.length;r++)zz(n,e[r],t)}class Ff{get rootNodes(){const e=this._lView,t=e[Re];return kf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(e){this._lView[Ln]=e}get destroyed(){return 256==(256&this._lView[nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[dn];if(kr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(s_(e,r),Km(t,r))}this._attachedToViewContainer=!1}wI(this._lView[Re],this._lView)}onDestroy(e){!function Cm(n,e){if(256==(256&n[nt]))throw new N(911,!1);null===n[Xs]&&(n[Xs]=[]),n[Xs].push(e)}(this._lView,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[nt]&=-129}reattach(){this._lView[nt]|=128}detectChanges(){R_(this._lView[Re],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Oj(n,e){Df(n,e,e[rt],2,null,null)}(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e}}class Hz extends Ff{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;R_(e[Re],e,e[Ln],!1)}checkNoChanges(){}get context(){return null}}class XR extends w_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new Lf(t,this.ngModule)}}function eM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Wz{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=$c(r);const i=this.injector.get(e,ew,r);return i!==ew||t===ew?i:this.parentInjector.get(e,t,r)}}class Lf extends oR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=eM(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return eM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Qc(n){return n.map(Mh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof ds?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Wz(e,s):e,a=o.get(xf,null);if(null===a)throw new N(407,!1);const m={rendererFactory:a,sanitizer:o.get(z$,null),effectManager:o.get(GR,null),afterRenderEventManager:o.get(aw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function gz(n,e,t,r){const s=r.get(TR,!1)||t===jn.ShadowDom,o=n.selectRootElement(e,s);return function mz(n){kR(n)}(o),o}(y,r,this.componentDef.encapsulation,o):i_(y,I,function qz(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==T&&(V=QI(T,o,!0));const G=hw(0,null,null,1,0,null,null,null,null,null,null),ne=A_(null,G,null,H,null,null,m,y,o,null,V);let Ee,Me;uf(ne);try{const j=this.componentDef;let x,L=null;j.findHostDirectiveDefs?(x=[],L=new Map,j.findHostDirectiveDefs(j,x,L),x.push(j)):x=[j];const z=function Kz(n,e){const t=n[Re],r=_t;return n[r]=e,$l(t,r,2,"#host",null)}(ne,T),q=function Zz(n,e,t,r,i,s,o){const a=i[Re];!function Qz(n,e,t,r){for(const i of n)e.mergedAttrs=va(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(S_(e,e.mergedAttrs,!0),null!==t&&OS(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=QI(e,i[ns]));const c=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=A_(i,OR(t),null,f,i[n.index],n,s,c,null,null,u);return a.firstCreatePass&&pw(a,n,r.length-1),C_(i,m),i[n.index]=m}(z,T,j,x,ne,m,y);Me=Dm(G,_t),T&&function Jz(n,e,t,r){if(r)Hc(n,t,["ng-version",XI.full]);else{const{attrs:i,classes:s}=function Ph(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!hi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Hc(n,t,i),s&&s.length>0&&NS(n,t,s.join(" "))}}(y,j,T,r),void 0!==t&&function Xz(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Me,this.ngContentSelectors,t),Ee=function Yz(n,e,t,r,i,s){const o=pr(),a=i[Re],u=Zr(o,i);VR(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Yr(Qr(i,a,o.directiveStart+f,o),i);UR(a,i,o),u&&Yr(u,i);const c=Qr(i,a,o.directiveStart+o.componentOffset,o);if(n[Ln]=i[Ln]=c,null!==s)for(const f of s)f(c,e);return cw(a,o,n),c}(q,j,x,L,ne,[eH]),yw(G,ne,null)}finally{lf()}return new Gz(this.componentType,Ee,Ul(Me,ne),ne,Me)}}class Gz extends L${constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Hz(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;_w(s[Re],s,i,e,t),this.previousInputValues.set(e,t),Nf(Fr(this._tNode.index,s))}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function eH(){const n=pr();pl(ge()[Re],n)}function oM(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function P_(n){return!!function vw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Xr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Uf(n,e,t,r){const i=ge();return Xr(i,Ma(),e)&&(Rt(),io(In(),i,n,e,t,r)),Uf}function Hl(n,e,t,r){return Xr(n,Ma(),t)?e+Q(t)+r:ct}let EM=function IM(n,e,t,r){return Ms(!0),e[rt].createComment("")};function Dw(n,e,t){const r=ge();return Xr(r,Ma(),e)&&Gi(Rt(),In(),r,n,e,r[rt],t,!1),Dw}function Aw(n,e,t,r,i){const o=i?"class":"style";_w(n,t,e.inputs[o],o,r)}function Ot(n,e,t,r){const i=ge(),s=Rt(),o=_t+n,a=i[rt],u=s.firstCreatePass?function OH(n,e,t,r,i,s){const o=e.consts,u=$l(e,n,2,r,ss(o,i));return fw(e,t,u,ss(o,s)),null!==u.attrs&&S_(u,u.attrs,!1),null!==u.mergedAttrs&&S_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],c=wM(s,i,u,a,e,n);i[o]=c;const f=Fh(u);return os(u,!0),OS(a,c,u),32!=(32&u.flags)&&fl()&&a_(s,i,c,u),0===function ZE(){return Ye.lFrame.elementDepthCount}()&&Yr(c,i),function Mu(){Ye.lFrame.elementDepthCount++}(),f&&(lw(s,i,u),cw(s,u,i)),null!==r&&dw(i,u),Ot}function kt(){let n=pr();tf()?Pu():(n=n.parent,os(n,!1));const e=n;(function Jh(n){return Ye.skipHydrationRootTNode===n})(e)&&function Pm(){Ye.skipHydrationRootTNode=null}(),function QE(){Ye.lFrame.elementDepthCount--}();const t=Rt();return t.firstCreatePass&&(pl(t,n),sm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function GC(n){return 0!=(8&n.flags)}(e)&&Aw(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ff(n){return 0!=(16&n.flags)}(e)&&Aw(t,e,ge(),e.stylesWithoutHost,!1),kt}function zf(n,e,t,r){return Ot(n,e,t,r),kt(),zf}let wM=(n,e,t,r,i,s)=>(Ms(!0),i_(r,i,function Bm(){return Ye.lFrame.currentNamespace}()));function F_(n){return!!n&&"function"==typeof n.then}function DM(n){return!!n&&"function"==typeof n.subscribe}function Rw(n,e,t,r){const i=ge(),s=Rt(),o=pr();return function CM(n,e,t,r,i,s,o){const a=Fh(r),c=n.firstCreatePass&&HR(n),f=e[Ln],m=zR(e);let y=!0;if(3&r.type||o){const R=Zr(r,e),P=o?o(R):R,H=m.length,V=o?ne=>o(Gt(ne[r.index])):r.index;let G=null;if(!o&&a&&(G=function jH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ea],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,y=!1;else{s=RM(r,e,f,s,!1);const ne=t.listen(P,i,s);m.push(s,ne),c&&c.push(i,V,H,H+1)}}else s=RM(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const R=T.length;if(R)for(let P=0;P<R;P+=2){const Ee=e[T[P]][T[P+1]].subscribe(s),Me=m.length;m.push(s,Ee),c&&c.push(i,r.index,Me,-(Me+1))}}}(s,i,i[rt],o,n,e,r),Rw}function SM(n,e,t,r){try{return is(6,e,t),!1!==t(r)}catch(i){return WR(n,i),!1}finally{is(7,e,t)}}function RM(n,e,t,r,i){return function s(o){if(o===Function)return r;Nf(n.componentOffset>-1?Fr(n.index,e):e);let u=SM(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)u=SM(e,t,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function zH(n,e){let t=null;const r=function Zc(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Kc(n,s,!0):Sh(r,s))return i}else t=i}return t}function Jl(n){const e=ge()[Vn][cr];if(!e.projection){const r=e.projection=Ef(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?zH(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function oo(n,e=0,t){const r=ge(),i=Rt(),s=$l(i,_t+n,16,null,t||null);null===s.projection&&(s.projection=e),Pu(),(!r[qi]||no())&&32!=(32&s.flags)&&function $j(n,e,t){xS(e[rt],0,e,t,bI(n,t,e),AS(t.parent||e[cr],t,e))}(i,r,s)}function Mw(n,e,t){return L_(n,"",e,"",t),Mw}function L_(n,e,t,r,i){const s=ge(),o=Hl(s,e,t,r);return o!==ct&&Gi(Rt(),In(),s,n,o,s[rt],i,!1),L_}function V_(n,e){return n<<17|e<<2}function La(n){return n>>17&32767}function Pw(n){return 2|n}function $u(n){return(131068&n)>>2}function xw(n,e){return-131069&n|e<<2}function Nw(n){return 1|n}function VM(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?La(s):$u(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];ZH(n[a],e)&&(u=!0,n[a+1]=r?Nw(f):Pw(f)),a=r?La(f):$u(f)}u&&(n[t+1]=r?Pw(s):Nw(s))}function ZH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Sl(n,e)>=0}function U_(n,e){return function xs(n,e,t,r){const i=ge(),s=Rt(),o=function us(n){const e=Ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function GM(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Lr()],o=function WM(n,e){return e>=n.expandoStartIndex}(n,t);(function YM(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function i4(n,e,t,r){const i=function rf(n){const e=Ye.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Hf(t=Ow(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Ow(i,n,e,t,r),null===s){let u=function s4(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==$u(r))return n[La(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Ow(null,n,e,u[1],r),u=Hf(u,e.attrs,r),function o4(n,e,t,r){n[La(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function a4(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Hf(r,n[s].hostAttrs,t);return Hf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function GH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=La(o),u=$u(o);n[r]=t;let f,c=!1;if(Array.isArray(t)?(f=t[1],(null===f||Sl(t,f)>0)&&(c=!0)):f=t,i)if(0!==u){const y=La(n[a+1]);n[r+1]=V_(y,a),0!==y&&(n[y+1]=xw(n[y+1],r)),n[a+1]=function qH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=V_(a,0),0!==a&&(n[a+1]=xw(n[a+1],r)),a=r;else n[r+1]=V_(u,0),0===a?a=r:n[u+1]=xw(n[u+1],r),u=r;c&&(n[r+1]=Pw(n[r+1])),VM(n,f,r,!0),VM(n,f,r,!1),function KH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Sl(s,e)>=0&&(t[r+1]=Nw(t[r+1]))}(e,f,n,r,s),o=V_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ct&&Xr(i,o,e)&&function ZM(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,c=u[a+1],f=function WH(n){return 1==(1&n)}(c)?QM(u,e,t,i,$u(c),o):void 0;B_(f)||(B_(s)||function HH(n){return 2==(2&n)}(c)&&(s=QM(u,null,t,i,a,o)),function Hj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ka.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ka.Important),n.setStyle(t,r,i,s))}}(r,o,Ra(Lr(),t),i,s))}(s,s.data[Lr()],i,i[rt],n,i[o+1]=function d4(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=je(Fa(n)))),n}(e,t),r,o)}(n,e,null,!0),U_}function Ow(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Hf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Hf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Wi(n,o,!!t||e[++s]))}return void 0===n?null:n}function QM(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),f=c?u[1]:u,m=null===f;let y=t[i+1];y===ct&&(y=m?wt:void 0);let I=m?dI(y,r):f===r?y:void 0;if(c&&!B_(I)&&(I=dI(u,r)),B_(I)&&(a=I,o))return a;const T=n[i+1];i=o?La(T):$u(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=dI(u,r))}return a}function B_(n){return void 0!==n}function on(n,e=""){const t=ge(),r=Rt(),i=n+_t,s=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],o=JM(r,t,s,e,n);t[i]=o,fl()&&a_(r,t,o,s),os(s,!1)}let JM=(n,e,t,r,i)=>(Ms(!0),function r_(n,e){return n.createText(e)}(e[rt],r));function zu(n){return kw("",n,""),zu}function kw(n,e,t){const r=ge(),i=Hl(r,n,e,t);return i!==ct&&function zo(n,e,t){const r=Ra(e,n);!function IS(n,e,t){n.setValue(e,t)}(n[rt],r,t)}(r,Lr(),i),kw}const td="en-US";let EP=td;function Vw(n,e,t,r,i){if(n=Ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)Vw(n[s],e,t,r,i);else{const s=Rt(),o=ge(),a=pr();let u=Uu(n)?n:Ze(n.provide);const c=eR(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Uu(n)||!n.multi){const I=new Ou(c,i,We),T=Bw(u,e,i?f:f+y,m);-1===T?(D(l(a,o),s,u),Uw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[T]=I,o[T]=I)}else{const I=Bw(u,e,f+y,m),T=Bw(u,e,f,f+y),P=T>=0&&t[T];if(i&&!P||!i&&!(I>=0&&t[I])){D(l(a,o),s,u);const H=function xq(n,e,t,r,i){const s=new Ou(n,t,We);return s.multi=[],s.index=e,s.componentProviders=0,qP(s,i,r&&!t),s}(i?Pq:Mq,t.length,i,r,c);!i&&P&&(t[T].providerFactory=H),Uw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else Uw(s,n,I>-1?I:T,qP(t[i?T:I],c,!i&&r));!i&&r&&P&&t[T].componentProviders++}}}function Uw(n,e,t,r){const i=Uu(e),s=function E$(n){return!!n.useClass}(e);if(i||s){const u=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=c.indexOf(t);-1===f?c.push(t,[r,u]):c[f+1].push(r,u)}else c.push(t,u)}}}function qP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Bw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Mq(n,e,t,r){return jw(this.multi,[])}function Pq(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Qr(t,t[Re],this.providerFactory.index,r);s=a.slice(0,o),jw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],jw(i,s);return s}function jw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function WP(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Rq(n,e,t){const r=Rt();if(r.firstCreatePass){const i=pi(n);Vw(t,r.data,r.blueprint,i,!0),Vw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class qu{}class GP{}class $w extends qu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XR(this);const i=Or(e);this._bootstrapComponents=jo(i.bootstrap),this._r3Injector=hR(e,t,[{provide:qu,useValue:this},{provide:w_,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zw extends GP{constructor(e){super(),this.moduleType=e}create(e){return new $w(this.moduleType,e,[])}}class KP extends qu{constructor(e){super(),this.componentFactoryResolver=new XR(this),this.instance=null;const t=new kl([...e.providers,{provide:qu,useValue:this},{provide:w_,useValue:this.componentFactoryResolver}],e.parent||g_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Hw(n,e,t=null){return new KP({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let kq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=QS(0,t.type),i=r.length>0?Hw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Fe({token:n,providedIn:"environment",factory:()=>new n(de(ds))})}return n})();function ZP(n){n.getStandaloneInjector=e=>e.get(kq).getOrCreateStandaloneInjector(n)}function u3(){return this._results[Symbol.iterator]()}class Ww{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Jr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ww.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=u3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function ls(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function GB(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function l3(n,e,t,r=!0){const i=e[Re];if(function Fj(n,e,t,r){const i=fr+r,s=t.length;r>0&&(t[i-1][fi]=e),r<s-fr?(e[fi]=t[i],YC(t,fr+r,e)):(t.push(e),e[fi]=null),e[dn]=t;const o=e[Po];null!==o&&t!==o&&function Lj(n,e){const t=n[No];e[Vn]!==e[dn][dn][Vn]&&(n[tl]=!0),null===t?n[No]=[e]:t.push(e)}(o,e);const a=e[Pi];null!==a&&a.insertView(n),e[nt]|=128}(i,e,n,t),r){const s=AI(t,n),o=e[rt],a=o_(o,n[rs]);null!==a&&function Nj(n,e,t,r,i,s){r[ln]=i,r[cr]=e,Df(n,r,t,1,i,s)}(i,n[cr],o,e,a,s)}}let Ho=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=f3}return n})();const d3=Ho,h3=class extends d3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function c3(n,e,t,r){const i=e.tView,a=A_(n,i,t,4096&n[nt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Po]=n[e.index];const c=n[Pi];return null!==c&&(a[Pi]=c.createEmbeddedView(i)),yw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Ff(i)}};function f3(){return q_(pr(),ge())}function q_(n,e){return 4&n.type?new h3(e,n,Ul(n,e)):null}let Os=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=v3}return n})();function v3(){return fx(pr(),ge())}const E3=Os,dx=class extends E3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(vl(e)){const t=Fu(e,this._hostLView),r=Pa(e);return new _r(t[Re].data[r+8],t)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=hx(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function vf(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const u=o?e:new Lf(Tt(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const P=(o?c:this.parentInjector).get(ds,null);P&&(s=P)}Tt(u.componentType??{});const I=u.create(c,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function GE(n){return kr(n[dn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[dn],f=new dx(c,c[cr],c[dn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return l3(a,i,o,!r),e.attachToViewContainerRef(),YC(Gw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=hx(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=s_(this._lContainer,t);r&&(Km(Gw(this._lContainer),t),wI(r[Re],r))}detach(e){const t=this._adjustIndex(e,-1),r=s_(this._lContainer,t);return r&&null!=Km(Gw(this._lContainer),t)?new Ff(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hx(n){return n[8]}function Gw(n){return n[8]||(n[8]=[])}function fx(n,e){let t;const r=e[n.index];return kr(r)?t=r:(t=jR(r,e,null,n),e[n.index]=t,C_(e,t)),px(t,e,n,r),new dx(t,n,e)}let px=function gx(n,e,t,r){if(n[rs])return;let i;i=8&t.type?Gt(r):function I3(n,e){const t=n[rt],r=t.createComment(""),i=Zr(e,n);return Vu(t,o_(t,i),r,function jj(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[rs]=i};class Kw{constructor(e){this.queryList=e,this.matches=null}clone(){return new Kw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zw{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Zw(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ex(e,t).matches&&this.queries[t].setDirty()}}class mx{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Qw{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Qw(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Yw{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Yw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,b3(t,s)),this.matchTNodeWithReadOption(e,t,mr(t,e,s,!1,!1))}else r===Ho?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mr(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ps||i===Os||i===Ho&&4&t.type)this.addMatch(t.index,-2);else{const s=mr(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function b3(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function A3(n,e,t,r){return-1===t?function D3(n,e){return 11&n.type?Ul(n,e):4&n.type?q_(n,e):null}(e,n):-2===t?function C3(n,e,t){return t===Ps?Ul(e,n):t===Ho?q_(e,n):t===Os?fx(e,n):void 0}(n,e,r):Qr(n,n[Re],t,e)}function _x(n,e,t,r){const i=e[Pi].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let u=0;u<o.length;u+=2){const c=o[u];a.push(c<0?null:A3(e,s[c],o[u+1],t.metadata.read))}i.matches=a}return i.matches}function Jw(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=_x(n,e,i,t);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const c=s[a+1],f=e[-u];for(let m=fr;m<f.length;m++){const y=f[m];y[Po]===y[dn]&&Jw(y[Re],y,c,r)}if(null!==f[No]){const m=f[No];for(let y=0;y<m.length;y++){const I=m[y];Jw(I[Re],I,c,r)}}}}}return r}function Xw(n){const e=ge(),t=Rt(),r=Fm();sf(r+1);const i=Ex(t,r);if(n.dirty&&function qE(n){return 4==(4&n[nt])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Jw(t,e,r,[]):_x(t,e,i,r);n.reset(s,j$),n.notifyOnChanges()}return!0}return!1}function eT(n,e,t,r){const i=Rt();if(i.firstCreatePass){const s=pr();(function vx(n,e,t){null===n.queries&&(n.queries=new Qw),n.queries.track(new Yw(e,t))})(i,new mx(e,t,r),s.index),function M3(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}!function yx(n,e,t){const r=new Ww(4==(4&t));(function vz(n,e,t,r){const i=zR(e);i.push(t),n.firstCreatePass&&HR(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Pi]&&(e[Pi]=new Zw),e[Pi].queries.push(new Kw(r))}(i,ge(),t)}function Ex(n,e){return n.queries.getByIndex(e)}const aT=new Ie("Application Initializer");let uT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=xe(aT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(F_(s))t.push(s);else if(DM(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const co=new Ie("LocaleId",{providedIn:"root",factory:()=>xe(co,pt.Optional|pt.SkipSelf)||function J3(){return typeof $localize<"u"&&$localize.locale||td}()});let Vx=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class tW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Ux=(()=>{class n{compileModuleSync(t){return new zw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=jo(Or(t).declarations).reduce((o,a)=>{const u=Tt(a);return u&&o.push(new Lf(u)),o},[]);return new tW(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zx=new Ie(""),Z_=new Ie("");let fT,dT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fT||(function TW(n){fT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(de(At),de(hT),de(Z_))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),hT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return fT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Va=null;const Hx=new Ie("AllowMultipleToken"),pT=new Ie("PlatformDestroyListeners"),gT=new Ie("appBootstrapListener");class Wx{constructor(e,t){this.name=e,this.token=t}}function Kx(n,e,t=[]){const r=`Platform: ${e}`,i=new Ie(r);return(s=[])=>{let o=mT();if(!o||o.injector.get(Hx,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function AW(n){if(Va&&!Va.get(Hx,!1))throw new N(400,!1);(function qx(){!function LE(n){sl=n}(()=>{throw new N(600,!1)})})(),Va=n;const e=n.get(Qx);(function Gx(n){n.get(tR,null)?.forEach(t=>t())})(n)}(function Zx(n=[],e){return gi.create({name:e,providers:[{provide:VI,useValue:"platform"},{provide:pT,useValue:new Set([()=>Va=null])},...n]})}(a,r))}return function SW(n){const e=mT();if(!e)throw new N(401,!1);return e}()}}function mT(){return Va?.get(Qx)??null}let Qx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function RW(n="zone.js",e){return"noop"===n?new tz:"zone.js"===n?new At(e):n}(r?.ngZone,function Yx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Oq(n,e,t){return new $w(n,e,t)}(t.moduleType,this.injector,function nN(n){return[{provide:At,useFactory:n},{provide:Rf,multi:!0,useFactory:()=>{const e=xe(PW,{optional:!0});return()=>e.initialize()}},{provide:tN,useFactory:MW},{provide:_R,useFactory:yR}]}(()=>i)),o=s.injector.get(Bo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Q_(this._modules,s),a.unsubscribe()})}),function Jx(n,e,t){try{const r=t();return F_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(uT);return a.runInitializers(),a.donePromise.then(()=>(function IP(n){Mi(n,"Expected localeId to be defined"),"string"==typeof n&&(EP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(co,td)||td),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=Xx({},r);return function bW(n,e,t){const r=new zw(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Wu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new N(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new N(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(pT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(de(gi))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Xx(n,e){return Array.isArray(e)?e.reduce(Xx,n):{...n,...e}}let Wu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xe(tN),this.zoneIsStable=xe(_R),this.componentTypes=[],this.components=[],this.isStable=xe(Vx).hasPendingTasks.pipe(ke(t=>t?F(!1):this.zoneIsStable),Je(),ce()),this._injector=xe(ds)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof oR;if(!this._injector.get(uT).done)throw!i&&function Ys(n){const e=Tt(n)||Xn(n)||ur(n);return null!==e&&e.standalone}(t),new N(405,!1);let o;o=i?t:this._injector.get(w_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function DW(n){return n.isBoundToModule}(o)?void 0:this._injector.get(qu),c=o.create(gi.NULL,[],r||o.selector,a),f=c.location.nativeElement,m=c.injector.get(zx,null);return m?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Q_(this.components,c),m?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new N(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Q_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(gT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Q_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new N(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const tN=new Ie("",{providedIn:"root",factory:()=>xe(Bo).handleError.bind(void 0)});function MW(){const n=xe(At),e=xe(Bo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let PW=(()=>{class n{constructor(){this.zone=xe(At),this.applicationRef=xe(Wu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let _T=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=NW}return n})();function NW(n){return function OW(n,e,t){if(Ta(n)&&!t){const r=Fr(n.index,e);return new Ff(r,r)}return 47&n.type?new Ff(e[Vn],e):null}(pr(),ge(),16==(16&n))}class aN{constructor(){}supports(e){return P_(e)}create(e){return new BW(e)}}const UW=(n,e)=>e;class BW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||UW}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<cN(r,i,s)?t:r,a=cN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,f=u-i;if(c!=f){for(let y=0;y<c;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<c&&(s[y]=I+1)}s[o.previousIndex]=f-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!P_(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function dH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new jW(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new uN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class jW{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $W{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class uN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new $W,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function dN(){return new X_([new aN])}let X_=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:dN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||dN()),deps:[[n,new Qm,new Vr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new N(901,!1)}}return n})();const GW=Kx(null,"core",[]);let KW=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(de(Wu))};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({})}return n})();function TT(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let bT=null;function id(){return bT}class uG{}const Ur=new Ie("DocumentToken");let DT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return xe(lG)},providedIn:"platform"})}return n})();const cG=new Ie("Location Initialized");let lG=(()=>{class n extends DT{constructor(){super(),this._doc=xe(Ur),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return id().getBaseHref(this._doc)}onPopState(t){const r=id().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=id().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function AT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function IN(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qo(n){return n&&"?"!==n[0]?"?"+n:n}let Ku=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return xe(TN)},providedIn:"root"})}return n})();const wN=new Ie("appBaseHref");let TN=(()=>{class n extends Ku{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??xe(Ur).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return AT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+qo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+qo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(DT),de(wN,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dG=(()=>{class n extends Ku{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=AT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+qo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+qo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(DT),de(wN,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),CT=(()=>{class n{constructor(t){this._subject=new Jr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function pG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(IN(bN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qo(r))}normalize(t){return n.stripTrailingSlash(function fG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,bN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=qo;static#t=this.joinWithSlash=AT;static#n=this.stripTrailingSlash=IN;static#r=this.\u0275fac=function(r){return new(r||n)(de(Ku))};static#i=this.\u0275prov=Fe({token:n,factory:function(){return function hG(){return new CT(de(Ku))}()},providedIn:"root"})}return n})();function bN(n){return n.replace(/\/index.html$/,"")}class t9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kN=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new t9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),FN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{FN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(We(Os),We(Ho),We(X_))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function FN(n,e){n.context.$implicit=e.item}let BN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({})}return n})();const jN="browser";function dy(n){return"server"===n}let x9=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new N9(de(Ur),window)})}return n})();class N9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function O9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class i6 extends uG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class HT extends i6{static makeCurrent(){!function aG(n){bT||(bT=n)}(new HT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function s6(){return ip=ip||document.querySelector("base"),ip?ip.getAttribute("href"):null}();return null==t?null:function o6(n){py=py||document.createElement("a"),py.setAttribute("href",n);const e=py.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ip=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function JG(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let py,ip=null,u6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const qT=new Ie("EventManagerPlugins");let WN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new N(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(de(qT),de(At))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class GN{constructor(e){this._doc=e}}const WT="ng-app-id";let KN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${WT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(WT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(WT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ur),de(m_),de($I,8),de(hs))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const GT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},KT=/%COMP%/g,h6=new Ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function QN(n,e){return e.map(t=>t.replace(KT,n))}let ZT=(()=>{class n{constructor(t,r,i,s,o,a,u,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=dy(a),this.defaultRenderer=new QT(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jn.ShadowDom&&(r={...r,encapsulation:jn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof JN?i.applyToHost(t):i instanceof YT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case jn.Emulated:s=new JN(u,c,r,this.appId,f,o,a,m);break;case jn.ShadowDom:return new m6(u,c,t,r,o,a,this.nonce,m);default:s=new YT(u,c,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(de(WN),de(KN),de(m_),de(h6),de(Ur),de(hs),de(At),de($I))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class QT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(GT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(YN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(YN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new N(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=GT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=GT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ka.DashCase|ka.Important)?e.style.setProperty(t,r,i&ka.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ka.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=id().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function YN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class m6 extends QT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=QN(i.id,i.styles);for(const f of c){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class YT extends QT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?QN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class JN extends YT{constructor(e,t,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,t,r,s,o,a,u,c),this.contentAttr=function f6(n){return"_ngcontent-%COMP%".replace(KT,n)}(c),this.hostAttr=function p6(n){return"_nghost-%COMP%".replace(KT,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let _6=(()=>{class n extends GN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ur))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const XN=["alt","control","meta","shift"],y6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let E6=(()=>{class n extends GN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>id().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),XN.forEach(c=>{const f=r.indexOf(c);f>-1&&(r.splice(f,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=y6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),XN.forEach(o=>{o!==i&&(0,v6[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ur))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const b6=Kx(GW,"browser",[{provide:hs,useValue:jN},{provide:tR,useValue:function I6(){HT.makeCurrent()},multi:!0},{provide:Ur,useFactory:function T6(){return function Zj(n){RI=n}(document),document},deps:[]}]),D6=new Ie(""),nO=[{provide:Z_,useClass:class a6{addToWindow(e){qt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new N(5103,!1);return s},qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),qt.getAllAngularRootElements=()=>e.getAllRootElements(),qt.frameworkStabilizers||(qt.frameworkStabilizers=[]),qt.frameworkStabilizers.push(r=>{const i=qt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?id().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:zx,useClass:dT,deps:[At,hT,Z_]},{provide:dT,useClass:dT,deps:[At,hT,Z_]}],rO=[{provide:VI,useValue:"root"},{provide:Bo,useFactory:function w6(){return new Bo},deps:[]},{provide:qT,useClass:_6,multi:!0,deps:[Ur,At,hs]},{provide:qT,useClass:E6,multi:!0,deps:[Ur]},ZT,KN,WN,{provide:xf,useExisting:ZT},{provide:class k9{},useClass:u6,deps:[]},[]];let XT,iO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(de(D6,12))};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({providers:[...rO,...nO],imports:[BN,KW]})}return n})(),sO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ur))};static#t=this.\u0275prov=Fe({token:n,factory:function(r){let i=null;return i=r?new r:function C6(){return new sO(de(Ur))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{XT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{XT=!1}let sp,cO=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function P9(n){return n===jN}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!XT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(de(hs))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gy(n){return function x6(){if(null==sp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sp=!0}))}finally{sp=sp||!1}return sp}()?n:!!n.capture}function tb(n,e=0){return function j6(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function dO(n){return Array.isArray(n)?n:[n]}const{isArray:$6}=Array,{getPrototypeOf:z6,prototype:H6,keys:q6}=Object;const{isArray:K6}=Array;function _y(...n){const e=Fn(n),t=function zs(n){return M(Si(n))?n.pop():void 0}(n),{args:r,keys:i}=function W6(n){if(1===n.length){const e=n[0];if($6(e))return{args:e,keys:null};if(function G6(n){return n&&"object"==typeof n&&z6(n)===H6}(e)){const t=q6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return b([],e);const s=new ut(function J6(n,e,t=_n){return r=>{fO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)fO(e,()=>{const c=b(n[u],e);let f=!1;c.subscribe(De(r,m=>{s[u]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function Y6(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):_n));return t?s.pipe(function Q6(n){return Oe(e=>function Z6(n,e){return K6(e)?n(...e):n(e)}(n,e))}(t)):s}function fO(n,e,t){n?yn(t,n,e):e()}function yy(...n){return function X6(){return wr(1)}()(b(n,Fn(n)))}function Qu(n){return n<=0?()=>kn:se((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ms(n,e){return se((t,r)=>{let i=0;t.subscribe(De(r,s=>n.call(e,s,i++)&&r.next(s)))})}class t5 extends xt{constructor(e,t){super()}schedule(e,t=0){return this}}const vy={setInterval(n,e,...t){const{delegate:r}=vy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=vy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class pO extends t5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return vy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&vy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const nb={now:()=>(nb.delegate||Date).now(),delegate:void 0};class op{constructor(e,t=op.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}op.now=nb.now;class gO extends op{constructor(e,t=op.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const rb=new gO(pO);function mO(n,e=rb){return se((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function u(){const c=o+n,f=e.now();if(f<c)return i=this.schedule(void 0,c-f),void r.add(i);a()}t.subscribe(De(r,c=>{s=c,o=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function ap(...n){const e=Fn(n);return se((t,r)=>{(e?yy(n,t,e):yy(n,t)).subscribe(r)})}function _O(n){return se((e,t)=>{Lt(n).subscribe(De(t,()=>t.complete(),Be)),!t.closed&&e.subscribe(t)})}const yO=new Set;let Yu,n5=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):i5}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function r5(n,e){if(!yO.has(n))try{Yu||(Yu=document.createElement("style"),e&&(Yu.nonce=e),Yu.setAttribute("type","text/css"),document.head.appendChild(Yu)),Yu.sheet&&(Yu.sheet.insertRule(`@media ${n} {body{ }}`,0),yO.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(de(cO),de($I,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i5(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let s5=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return vO(dO(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=_y(vO(dO(t)).map(o=>this._registerQuery(o).observable));return s=yy(s.pipe(Qu(1)),s.pipe(function e5(n){return ms((e,t)=>n<=t)}(1),mO(0))),s.pipe(Oe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:c})=>{a.matches=a.matches||u,a.breakpoints[c]=u}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new ut(o=>{const a=u=>this._zone.run(()=>o.next(u));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(ap(r),Oe(({matches:o})=>({query:t,matches:o})),_O(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(de(n5),de(At))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vO(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const TO="cdk-high-contrast-black-on-white",bO="cdk-high-contrast-white-on-black",ib="cdk-high-contrast-active";let m5=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=xe(s5).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ib,TO,bO),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(ib,TO):2===r&&t.add(ib,bO)}}static#e=this.\u0275fac=function(r){return new(r||n)(de(cO),de(Ur))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _5=new Ie("cdk-dir-doc",{providedIn:"root",factory:function y5(){return xe(Ur)}}),v5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let I5=(()=>{class n{constructor(t){this.value="ltr",this.change=new Jr,t&&(this.value=function E5(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?v5.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(de(_5,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({})}return n})();const T5=new Ie("mat-sanity-checks",{providedIn:"root",factory:function w5(){return!0}});let ad=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function k6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(de(m5),de(T5,8),de(Ur))};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({imports:[DO,DO]})}return n})(),SO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({imports:[ad,ad]})}return n})();const RO=gy({passive:!0,capture:!0});class A5{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function O6(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,RO)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,RO)))}}class sb{static#e=this._eventManager=new A5;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=hO(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...MO,...r.animation},o=r.radius||function S5(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,u=t-i.top,c=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=u-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new D5(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!T&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",H),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(T||!c)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...MO,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=hO(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,xO.forEach(r=>{sb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{NO.forEach(t=>{this._triggerElement.addEventListener(t,this,PO)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function f5(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function p5(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(xO.forEach(t=>sb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&NO.forEach(t=>e.removeEventListener(t,this,PO)))}}const R5=["*"],O5=new Ie("MAT_CARD_CONFIG");let OO=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static#e=this.\u0275fac=function(r){return new(r||n)(We(O5,8))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){2&r&&U_("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:R5,decls:1,vars:0,template:function(r,i){1&r&&(Jl(),oo(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),kO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})(),FO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})(),L5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({imports:[ad,BN,ad]})}return n})();const LO=["*"];class U5{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(r=>this._trackTile(r))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new B5(this.rowIndex,t)}_findMatchingGap(e){let t=-1,r=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(r=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(t)))}while(r-t<e||0==r);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let r=0;r<t.colspan;r++)this.tracker[e+r]=t.rowspan}}class B5{constructor(e,t){this.row=e,this.col=t}}const VO=new Ie("MAT_GRID_LIST");let UO=(()=>{class n{constructor(t,r){this._element=t,this._gridList=r,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(tb(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(tb(t))}_setStyle(t,r){this._element.nativeElement.style[t]=r}static#e=this.\u0275fac=function(r){return new(r||n)(We(Ps),We(VO,8))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(r,i){2&r&&Uf("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:LO,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(r,i){1&r&&(Jl(),Ot(0,"div",0),oo(1),kt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size)}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size)}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size)}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size)}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}return n})();const j5=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class ob{constructor(){this._rows=0,this._rowspan=0}init(e,t,r,i){this._gutterSize=BO(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=r,this._direction=i}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":Ju(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,r){let i=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,r,i,s),this.setRowStyles(e,t,i,s)}setColStyles(e,t,r,i){let s=this.getBaseTileSize(r,i);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",Ju(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class $5 extends ob{constructor(e){super(),this.fixedRowHeight=e}init(e,t,r,i){super.init(e,t,r,i),this.fixedRowHeight=BO(this.fixedRowHeight),j5.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",Ju(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",Ju(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class z5 extends ob{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,r,i){this.baseTileHeight=this.getBaseTileSize(r/this.rowHeightRatio,i),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",Ju(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",Ju(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class H5 extends ob{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",Ju(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function Ju(n){return`calc(${n})`}function BO(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let W5=(()=>{class n{constructor(t,r){this._element=t,this._dir=r,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(tb(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${t??""}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const r=`${t??""}`;r!==this._rowHeight&&(this._rowHeight=r,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new H5:t&&t.indexOf(":")>-1?new z5(t):new $5(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new U5);const t=this._tileCoordinator,r=this._tiles.filter(s=>!s._gridList||s._gridList===this),i=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,r),this._tileStyler.init(this.gutterSize,t,this.cols,i),r.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}static#e=this.\u0275fac=function(r){return new(r||n)(We(Ps),We(I5,8))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["mat-grid-list"]],contentQueries:function(r,i,s){if(1&r&&eT(s,UO,5),2&r){let o;Xw(o=function tT(){return function R3(n,e){return n[Pi].queries[e].queryList}(ge(),Fm())}())&&(i._tiles=o)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(r,i){2&r&&Uf("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[WP([{provide:VO,useExisting:n}])],ngContentSelectors:LO,decls:2,vars:0,template:function(r,i){1&r&&(Jl(),Ot(0,"div"),oo(1),kt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size)}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size)}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size)}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size)}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}return n})(),G5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({imports:[SO,ad,SO,ad]})}return n})();const Ey=we(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function jO(n){return new ut(e=>{Lt(n()).subscribe(e)})}function cp(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new ut(e?i=>e.schedule(r,0,i):r)}function ab(){return se((n,e)=>{let t=null;n._refCount++;const r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $O extends ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;const t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return ab()(this)}}function Iy(n){return se((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zO(n=Z5){return se((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Z5(){return new Ey}function Ba(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,s)=>n(i,s,r)):_n,Qu(1),t?Iy(e):zO(()=>new Ey))}function lp(n,e){return M(e)?en(n,e,1):en(n,1)}function Br(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(De(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):_n}function Xu(n){return se((e,t)=>{let s,r=null,i=!1;r=e.subscribe(De(t,void 0,void 0,o=>{s=Lt(n(o,Xu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function wy(n,e){return se(function Q5(n,e,t,r,i){return(s,o)=>{let a=t,u=e,c=0;s.subscribe(De(o,f=>{const m=c++;u=a?n(u,f,m):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function ub(n){return n<=0?()=>kn:se((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cb(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const dt="primary",dp=Symbol("RouteTitle");class X5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ud(n){return new X5(n)}function e8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function lo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!HO(n[i],e[i]))return!1;return!0}function HO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function qO(n){return n.length>0?n[n.length-1]:null}function ja(n){return function K5(n){return!!n&&(n instanceof ut||M(n.lift)&&M(n.subscribe))}(n)?n:F_(n)?b(Promise.resolve(n)):F(n)}const n8={exact:function KO(n,e,t){if(!ec(n.segments,e.segments)||!Ty(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!KO(n.children[r],e.children[r],t))return!1;return!0},subset:ZO},WO={exact:function r8(n,e){return lo(n,e)},subset:function i8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>HO(n[t],e[t]))},ignored:()=>!0};function GO(n,e,t){return n8[t.paths](n.root,e.root,t.matrixParams)&&WO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ZO(n,e,t){return QO(n,e,e.segments,t)}function QO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ec(i,t)||e.hasChildren()||!Ty(i,t,r))}if(n.segments.length===t.length){if(!ec(n.segments,t)||!Ty(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ZO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ec(n.segments,i)&&Ty(n.segments,i,r)&&n.children[dt])&&QO(n.children[dt],e,s,r)}}function Ty(n,e,t){return e.every((r,i)=>WO[t](n[i].parameters,r.parameters))}class cd{constructor(e=new Yt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ud(this.queryParams)),this._queryParamMap}toString(){return a8.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return by(this)}}class hp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ud(this.parameters)),this._parameterMap}toString(){return XO(this)}}function ec(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new lb},providedIn:"root"})}return n})();class lb{parse(e){const t=new y8(e);return new cd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${pp(e.root,!0)}`,r=function l8(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Dy(t)}=${Dy(i)}`).join("&"):`${Dy(t)}=${Dy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function u8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const a8=new lb;function by(n){return n.segments.map(e=>XO(e)).join("/")}function pp(n,e){if(!n.hasChildren())return by(n);if(e){const t=n.children[dt]?pp(n.children[dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==dt&&r.push(`${i}:${pp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function o8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===dt?[pp(n.children[dt],!1)]:[`${i}:${pp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${by(n)}/${t[0]}`:`${by(n)}/(${t.join("//")})`}}function YO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dy(n){return YO(n).replace(/%3B/gi,";")}function db(n){return YO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(n){return decodeURIComponent(n)}function JO(n){return Ay(n.replace(/\+/g,"%20"))}function XO(n){return`${db(n.path)}${function c8(n){return Object.keys(n).map(e=>`;${db(e)}=${db(n[e])}`).join("")}(n.parameters)}`}const d8=/^[^\/()?;#]+/;function hb(n){const e=n.match(d8);return e?e[0]:""}const h8=/^[^\/()?;=#]+/,p8=/^[^=?&#]+/,m8=/^[^&#]+/;class y8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Yt(e,t)),r}parseSegment(){const e=hb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(e),new hp(Ay(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function f8(n){const e=n.match(h8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hb(this.remaining);i&&(r=i,this.capture(r))}e[Ay(t)]=Ay(r)}parseQueryParam(e){const t=function g8(n){const e=n.match(p8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function _8(n){const e=n.match(m8);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=JO(t),s=JO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new N(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new Yt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new N(4011,!1)}}function ek(n){return n.segments.length>0?new Yt([],{[dt]:n}):n}function tk(n){const e={};for(const r of Object.keys(n.children)){const s=tk(n.children[r]);if(r===dt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function v8(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function tc(n){return n instanceof cd}function nk(n){let e;const i=ek(function t(s){const o={};for(const u of s.children){const c=t(u);o[u.outlet]=c}const a=new Yt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function rk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return fb(i,i,i,t,r);const s=function I8(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new sk(t,e,r)}(e);if(s.toRoot())return fb(i,i,new Yt([],{}),t,r);const o=function w8(n,e,t){if(n.isAbsolute)return new Sy(e,!0,0);if(!t)return new Sy(e,!1,NaN);if(null===t.parent)return new Sy(t,!0,0);const r=Cy(n.commands[0])?0:1;return function T8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new N(4005,!1);i=r.segments.length}return new Sy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?mp(o.segmentGroup,o.index,s.commands):ok(o.segmentGroup,o.index,s.commands);return fb(i,o.segmentGroup,a,t,r)}function Cy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gp(n){return"object"==typeof n&&null!=n&&n.outlets}function fb(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`}),o=n===e?t:ik(n,e,t);const a=ek(tk(o));return new cd(a,s,i)}function ik(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:ik(s,e,t)}),new Yt(n.segments,r)}class sk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cy(r[0]))throw new N(4003,!1);const i=r.find(gp);if(i&&i!==qO(r))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ok(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return mp(n,e,t);const r=function D8(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(gp(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!uk(u,c,o))return s;r+=2}else{if(!uk(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Yt(n.segments.slice(0,r.pathIndex),{});return s.children[dt]=new Yt(n.segments.slice(r.pathIndex),n.children),mp(s,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?pb(n,e,t):r.match?mp(n,0,i):pb(n,e,t)}function mp(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function b8(n){return gp(n[0])?n[0].outlets:{[dt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==dt)&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const s=mp(n.children[dt],e,t);return new Yt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ok(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Yt(n.segments,i)}}function pb(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(gp(s)){const u=A8(s.outlets);return new Yt(r,u)}if(0===i&&Cy(t[0])){r.push(new hp(n.segments[e].path,ak(t[0]))),i++;continue}const o=gp(s)?s.outlets[dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Cy(a)?(r.push(new hp(o,ak(a))),i+=2):(r.push(new hp(o,{})),i++)}return new Yt(r,{})}function A8(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=pb(new Yt([],{}),0,r))}),e}function ak(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function uk(n,e,t){return n==t.path&&lo(e,t.parameters)}const _p="imperative";class ho{constructor(e,t){this.id=e,this.url=t}}class Ry extends ho{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends ho{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yp extends ho{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ld extends ho{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class My extends ho{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ck extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C8 extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S8 extends ho{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class R8 extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M8 extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class x8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class N8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gb{}class mb{constructor(e){this.url=e}}class L8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vp,this.attachRef=null}}let vp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new L8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yb(e,this._root).map(t=>t.value)}}function _b(n,e){if(n===e.value)return e;for(const t of e.children){const r=_b(n,t);if(r)return r}return null}function yb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yb(n,t);if(r.length)return r.unshift(e),r}return[]}class Ko{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function dd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hk extends dk{constructor(e,t){super(e),this.snapshot=t,vb(this,e)}toString(){return this.snapshot.toString()}}function fk(n,e){const t=function V8(n,e){const o=new Py([],{},{},"",{},dt,e,null,{});return new gk("",new Ko(o,[]))}(0,e),r=new w([new hp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),u=new hd(r,i,o,a,s,dt,e,t.root);return u.snapshot=t.root,new hk(new Ko(u,[]),t)}class hd{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(c=>c[dp]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>ud(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>ud(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function U8(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Py{get title(){return this.data?.[dp]}constructor(e,t,r,i,s,o,a,u,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ud(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ud(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gk extends dk{constructor(e,t){super(t),this.url=e,vb(this,t)}toString(){return mk(this._root)}}function vb(n,e){e.value._routerState=n,e.children.forEach(t=>vb(n,t))}function mk(n){const e=n.children.length>0?` { ${n.children.map(mk).join(", ")} } `:"";return`${n.value}${e}`}function Eb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),lo(e.params,t.params)||n.paramsSubject.next(t.params),function t8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),lo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ib(n,e){const t=lo(n.params,e.params)&&function s8(n,e){return ec(n,e)&&n.every((t,r)=>lo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ib(n.parent,e.parent))}let wb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new Jr,this.deactivateEvents=new Jr,this.attachEvents=new Jr,this.detachEvents=new Jr,this.parentContexts=xe(vp),this.location=xe(Os),this.changeDetector=xe(_T),this.environmentInjector=xe(ds),this.inputBinder=xe(xy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new B8(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fo]})}return n})();class B8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hd?this.route:e===vp?this.childContexts:this.parent.get(e,t)}}const xy=new Ie("");let _k=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=_y([r.queryParams,r.params,r.data]).pipe(ke(([s,o,a],u)=>(a={...s,...o,...a},0===u?F(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function oG(n){const e=Tt(n);if(!e)return null;const t=new Lf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function Ep(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function $8(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ep(n,r,i);return Ep(n,r)})}(n,e,t);return new Ko(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ep(n,a)),o}}const r=function z8(n){return new hd(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ep(n,s));return new Ko(r,i)}}const Tb="ngNavigationCancelingError";function yk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function vk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Tb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ek(n){return n&&n[Tb]}let Ik=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["ng-component"]],standalone:!0,features:[ZP],decls:1,vars:0,template:function(r,i){1&r&&zf(0,"router-outlet")},dependencies:[wb],encapsulation:2})}return n})();function bb(n){const e=n.children&&n.children.map(bb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=Ik),t}function Ls(n){return n.outlet||dt}function Ip(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Y8{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Eb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=dd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=dd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new F8(s.value.snapshot))}),e.children.length&&this.forwardEvent(new O8(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Eb(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Eb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ip(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class wk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ny{constructor(e,t){this.component=e,this.route=t}}function J8(n,e,t){const r=n._root;return wp(r,e?e._root:null,t,[r.value])}function fd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function SE(n){return null!==Fc(n)}(n)?e.get(n):n:r}function wp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=dd(e);return n.children.forEach(o=>{(function eK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function tK(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ec(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ec(n.url,e.url)||!lo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ib(n,e)||!lo(n.queryParams,e.queryParams);default:return!Ib(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wk(r)):(s.data=o.data,s._resolvedData=o._resolvedData),wp(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ny(a.outlet.component,o))}else o&&Tp(e,a,i),i.canActivateChecks.push(new wk(r)),wp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Tp(a,t.getContext(o),i)),i}function Tp(n,e,t){const r=dd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Tp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ny(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function bp(n){return"function"==typeof n}function Tk(n){return n instanceof Ey||"EmptyError"===n?.name}const Oy=Symbol("INITIAL_VALUE");function pd(){return ke(n=>_y(n.map(e=>e.pipe(Qu(1),ap(Oy)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===Oy)return Oy;if(!1===t||t instanceof cd)return t}return!0}),ms(e=>e!==Oy),Qu(1)))}function bk(n){return function ui(...n){return ci(n)}(Br(e=>{if(tc(e))throw yk(0,e)}),Oe(e=>!0===e))}class ky{constructor(e){this.segmentGroup=e||null}}class Dk{constructor(e){this.urlTree=e}}function gd(n){return cp(new ky(n))}function Ak(n){return cp(new Dk(n))}class IK{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new N(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return F(r);if(i.numberOfChildren>1||!i.children[dt])return cp(new N(4e3,!1));i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new cd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Yt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new N(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Db={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wK(n,e,t,r,i){const s=Ab(n,e,t);return s.matched?(r=function q8(n,e){return n.providers&&!n._injector&&(n._injector=Hw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function yK(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?F(i.map(o=>{const a=fd(o,n);return ja(function aK(n){return n&&bp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(pd(),bk()):F(!0)}(r,e,t).pipe(Oe(o=>!0===o?s:{...Db}))):F(s)}function Ab(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Db}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||e8)(t,n,e);if(!i)return{...Db};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Ck(n,e,t,r){return t.length>0&&function DK(n,e,t){return t.some(r=>Fy(n,e,r)&&Ls(r)!==dt)}(n,t,r)?{segmentGroup:new Yt(e,bK(r,new Yt(t,n.children))),slicedSegments:[]}:0===t.length&&function AK(n,e,t){return t.some(r=>Fy(n,e,r))}(n,t,r)?{segmentGroup:new Yt(n.segments,TK(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Yt(n.segments,n.children),slicedSegments:t}}function TK(n,e,t,r,i){const s={};for(const o of r)if(Fy(n,t,o)&&!i[Ls(o)]){const a=new Yt([],{});s[Ls(o)]=a}return{...i,...s}}function bK(n,e){const t={};t[dt]=e;for(const r of n)if(""===r.path&&Ls(r)!==dt){const i=new Yt([],{});t[Ls(r)]=i}return t}function Fy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class MK{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new IK(this.urlSerializer,this.urlTree)}noMatchError(e){return new N(4002,!1)}recognize(){const e=Ck(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(Xu(t=>{if(t instanceof Dk)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ky?this.noMatchError(t):t}),Oe(t=>{const r=new Py([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,{}),i=new Ko(r,t),s=new gk("",i),o=function E8(n,e,t=null,r=null){return rk(nk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,dt).pipe(Xu(r=>{throw r instanceof ky?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=pk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(lp(s=>{const o=r.children[s],a=function Z8(n,e){const t=n.filter(r=>Ls(r)===e);return t.push(...n.filter(r=>Ls(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),wy((s,o)=>(s.push(...o),s)),Iy(null),function Y5(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,s)=>n(i,s,r)):_n,ub(1),t?Iy(e):zO(()=>new Ey))}(),en(s=>{if(null===s)return gd(r);const o=Sk(s);return function PK(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),F(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(lp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Xu(u=>{if(u instanceof ky)return F(null);throw u}))),Ba(a=>!!a),Xu(a=>{if(Tk(a))return function SK(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?F([]):gd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function CK(n,e,t,r){return!!(Ls(n)===r||r!==dt&&Fy(e,t,n))&&("**"===n.path||Ab(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):gd(i):gd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ak(s):this.applyRedirects.lineralizeSegments(r,s).pipe(en(o=>{const a=new Yt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:f}=Ab(t,i,s);if(!a)return gd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?Ak(m):this.applyRedirects.lineralizeSegments(i,m).pipe(en(y=>this.processSegment(e,r,t,y.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?qO(i).parameters:{};a=F({snapshot:new Py(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rk(r),Ls(r),r.component??r._loadedComponent??null,r,Mk(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=wK(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:c,remainingSegments:f,parameters:m})=>u?{snapshot:new Py(c,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rk(r),Ls(r),r.component??r._loadedComponent??null,r,Mk(r)),consumedSegments:c,remainingSegments:f}:null));return a.pipe(ke(u=>null===u?gd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ke(({routes:c})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=u,{segmentGroup:T,slicedSegments:R}=Ck(t,y,I,c);if(0===R.length&&T.hasChildren())return this.processChildren(f,c,T).pipe(Oe(H=>null===H?null:[new Ko(m,H)]));if(0===c.length&&0===R.length)return F([new Ko(m,[])]);const P=Ls(r)===s;return this.processSegment(f,c,T,R,P?dt:s,!0).pipe(Oe(H=>[new Ko(m,H)]))}))))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?F({routes:t._loadedRoutes,injector:t._loadedInjector}):function _K(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?F(!0):F(i.map(o=>{const a=fd(o,n);return ja(function rK(n){return n&&bp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(pd(),bk())}(e,t,r).pipe(en(i=>i?this.configLoader.loadChildren(e,t).pipe(Br(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function EK(n){return cp(vk(!1,3))}())):F({routes:[],injector:e})}}function xK(n){const e=n.value.routeConfig;return e&&""===e.path}function Sk(n){const e=[],t=new Set;for(const r of n){if(!xK(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Sk(r.children);e.push(new Ko(r.value,i))}return e.filter(r=>!t.has(r))}function Rk(n){return n.data||{}}function Mk(n){return n.resolve||{}}function Pk(n){return"string"==typeof n.title||null===n.title}function Cb(n){return ke(e=>{const t=n(e);return t?b(t).pipe(Oe(()=>e)):F(e)})}const md=new Ie("ROUTES");let Sb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=xe(Ux)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ja(t.loadComponent()).pipe(Oe(xk),Br(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),cb(()=>{this.componentLoaders.delete(t)})),i=new $O(r,()=>new oe).pipe(ab());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function UK(n,e,t,r){return ja(n.loadChildren()).pipe(Oe(xk),en(i=>i instanceof GP||Array.isArray(i)?F(i):b(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(md,[],{optional:!0,self:!0}).flat()),{routes:o.map(bb),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(cb(()=>{this.childrenLoaders.delete(r)})),o=new $O(s,()=>new oe).pipe(ab());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xk(n){return function BK(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ly=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=xe(Sb),this.environmentInjector=xe(ds),this.urlSerializer=xe(fp),this.rootContexts=xe(vp),this.inputBindingEnabled=null!==xe(xy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new x8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new P8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_p,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ms(s=>0!==s.id),Oe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ke(s=>{this.currentTransition=s;let o=!1,a=!1;return F(s).pipe(Br(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ke(u=>{const c=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==c||c!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new ld(u.id,this.urlSerializer.serialize(u.rawUrl),y,0)),u.resolve(null),kn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return F(u).pipe(ke(y=>{const I=this.transitions?.getValue();return this.events.next(new Ry(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?kn:Promise.resolve(y)}),function NK(n,e,t,r,i,s){return en(o=>function RK(n,e,t,r,i,s,o="emptyOnly"){return new MK(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Oe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Br(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new ck(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:R,extras:P}=u,H=new Ry(y,this.urlSerializer.serialize(I),T,R);this.events.next(H);const V=fk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:V,urlAfterRedirects:I,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},F(s)}{const y="";return this.events.next(new ld(u.id,this.urlSerializer.serialize(u.extractedUrl),y,1)),u.resolve(null),kn}}),Br(u=>{const c=new C8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),Oe(u=>(this.currentTransition=s={...u,guards:J8(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function cK(n,e){return en(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?F({...t,guardsResult:!0}):function lK(n,e,t,r){return b(n).pipe(en(i=>function mK(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?F(s.map(a=>{const u=Ip(e)??i,c=fd(a,u);return ja(function oK(n){return n&&bp(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):u.runInContext(()=>c(n,e,t,r))).pipe(Ba())})).pipe(pd()):F(!0)}(i.component,i.route,t,e,r)),Ba(i=>!0!==i,!0))}(o,r,i,n).pipe(en(a=>a&&function nK(n){return"boolean"==typeof n}(a)?function dK(n,e,t,r){return b(e).pipe(lp(i=>yy(function fK(n,e){return null!==n&&e&&e(new N8(n)),F(!0)}(i.route.parent,r),function hK(n,e){return null!==n&&e&&e(new k8(n)),F(!0)}(i.route,r),function gK(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function X8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>jO(()=>F(o.guards.map(u=>{const c=Ip(o.node)??t,f=fd(u,c);return ja(function sK(n){return n&&bp(n.canActivateChild)}(f)?f.canActivateChild(r,n):c.runInContext(()=>f(r,n))).pipe(Ba())})).pipe(pd())));return F(s).pipe(pd())}(n,i.path,t),function pK(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return F(!0);const i=r.map(s=>jO(()=>{const o=Ip(e)??t,a=fd(s,o);return ja(function iK(n){return n&&bp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ba())}));return F(i).pipe(pd())}(n,i.route,t))),Ba(i=>!0!==i,!0))}(r,s,n,e):F(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Br(u=>{if(s.guardsResult=u.guardsResult,tc(u.guardsResult))throw yk(0,u.guardsResult);const c=new S8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),ms(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),Cb(u=>{if(u.guards.canActivateChecks.length)return F(u).pipe(Br(c=>{const f=new R8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),ke(c=>{let f=!1;return F(c).pipe(function OK(n,e){return en(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=0;return b(i).pipe(lp(o=>function kK(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!Pk(i)&&(s[dp]=i.title),function FK(n,e,t,r){const i=function LK(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return F({});const s={};return b(i).pipe(en(o=>function VK(n,e,t,r){const i=Ip(e)??r,s=fd(n,i);return ja(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ba(),Br(a=>{s[o]=a}))),ub(1),function J5(n){return Oe(()=>n)}(s),Xu(o=>Tk(o)?kn:cp(o)))}(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=pk(n,t).resolve,i&&Pk(i)&&(n.data[dp]=i.title),null)))}(o.route,r,n,e)),Br(()=>s++),ub(1),en(o=>s===i.length?F(t):kn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Br({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",2)}}))}),Br(c=>{const f=new M8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),Cb(u=>{const c=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Br(y=>{f.component=y}),Oe(()=>{})));for(const y of f.children)m.push(...c(y));return m};return _y(c(u.targetSnapshot.root)).pipe(Iy(),Qu(1))}),Cb(()=>this.afterPreactivation()),Oe(u=>{const c=function j8(n,e,t){const r=Ep(n,e._root,t?t._root:void 0);return new hk(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:c},s}),Br(()=>{this.events.next(new gb)}),((n,e,t,r)=>Oe(i=>(new Y8(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Qu(1),Br({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),_O(this.transitionAbortSubject.pipe(Br(u=>{throw u}))),cb(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Xu(u=>{if(a=!0,Ek(u))this.events.next(new yp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function H8(n){return Ek(n)&&tc(n.url)}(u)?this.events.next(new mb(u.url)):s.resolve(!1);else{this.events.next(new My(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(c){s.reject(c)}}return kn}))}))}cancelNavigationTransition(t,r,i){const s=new yp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nk(n){return n!==_p}let Ok=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===dt);return r}getResolvedTitleForRoute(t){return t.data[dp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return xe(jK)},providedIn:"root"})}return n})(),jK=(()=>{class n extends Ok{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(de(sO))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$K=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return xe(HK)},providedIn:"root"})}return n})();class zK{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let HK=(()=>{class n extends zK{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=function yf(n){return Qs(()=>{const e=n.prototype.constructor,t=e[Gr]||Lu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Gr]||Lu(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}();static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vy=new Ie("",{providedIn:"root",factory:()=>({})});let qK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return xe(WK)},providedIn:"root"})}return n})(),WK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dp||{});function kk(n,e){n.events.pipe(ms(t=>t instanceof $a||t instanceof yp||t instanceof My||t instanceof ld),Oe(t=>t instanceof $a||t instanceof ld?Dp.COMPLETE:t instanceof yp&&(0===t.code||1===t.code)?Dp.REDIRECTING:Dp.FAILED),ms(t=>t!==Dp.REDIRECTING),Qu(1)).subscribe(()=>{e()})}function GK(n){throw n}function KK(n,e,t){return e.parse("/")}const ZK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=xe(Lx),this.isNgZoneEnabled=!1,this._events=new oe,this.options=xe(Vy,{optional:!0})||{},this.pendingTasks=xe(Vx),this.errorHandler=this.options.errorHandler||GK,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||KK,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=xe(qK),this.routeReuseStrategy=xe($K),this.titleStrategy=xe(Ok),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xe(md,{optional:!0})?.flat()??[],this.navigationTransitions=xe(Ly),this.urlSerializer=xe(fp),this.location=xe(CT),this.componentInputBindingEnabled=!!xe(xy,{optional:!0}),this.eventsSubscription=new xt,this.isNgZoneEnabled=xe(At)instanceof At&&At.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new cd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Fk(r)&&this._events.next(r));if(r instanceof Ry)Nk(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof ld)this.rawUrlTree=i.rawUrl;else if(r instanceof ck){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof gb)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof yp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof mb){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nk(i.source)};this.scheduleNavigation(s,_p,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof My&&this.restoreHistory(i,!0),r instanceof $a&&(this.navigated=!0),Fk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_p,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=nk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return rk(m,t,f,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=tc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,_p,null,r)}navigate(t,r={skipLocationChange:!1}){return function YK(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new N(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ZK}:!1===r?{...QK}:r,tc(t))return GO(this.currentUrlTree,t,i);const s=this.parseUrl(t);return GO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return kk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fk(n){return!(n instanceof gb||n instanceof mb)}let Uy=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof $a&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function WS(n,e,t){return function _$(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?qS:h_}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(We(_s),We(hd),function Na(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(qc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(pr(),n)}("tabindex"),We(T_),We(Ps),We(Ku))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Rw("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Uf("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",TT],skipLocationChange:["skipLocationChange","skipLocationChange",TT],replaceUrl:["replaceUrl","replaceUrl",TT],routerLink:"routerLink"},standalone:!0,features:[oM,Fo]})}return n})();class Lk{}let e7=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ms(t=>t instanceof $a),lp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Hw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(wr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):F(null);const s=i.pipe(en(o=>null===o?F(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(wr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(de(_s),de(Ux),de(ds),de(Lk),de(Sb))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Rb=new Ie("");let Vk=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ry?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ld&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function xR(){throw new Error("invalid")}()};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function Zo(n,e){return{\u0275kind:n,\u0275providers:e}}function Bk(){const n=xe(gi);return e=>{const t=n.get(Wu);if(e!==t.components[0])return;const r=n.get(_s),i=n.get(jk);1===n.get(Mb)&&r.initialNavigation(),n.get($k,null,pt.Optional)?.setUpPreloading(),n.get(Rb,null,pt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const jk=new Ie("",{factory:()=>new oe}),Mb=new Ie("",{providedIn:"root",factory:()=>1}),$k=new Ie("");function i7(n){return Zo(0,[{provide:$k,useExisting:e7},{provide:Lk,useExisting:n}])}const zk=new Ie("ROUTER_FORROOT_GUARD"),o7=[CT,{provide:fp,useClass:lb},_s,vp,{provide:hd,useFactory:function Uk(n){return n.routerState.root},deps:[_s]},Sb,[]];function a7(){return new Wx("Router",_s)}let Hk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[o7,[],{provide:md,multi:!0,useValue:t},{provide:zk,useFactory:d7,deps:[[_s,new Vr,new Qm]]},{provide:Vy,useValue:r||{}},r?.useHash?{provide:Ku,useClass:dG}:{provide:Ku,useClass:TN},{provide:Rb,useFactory:()=>{const n=xe(x9),e=xe(At),t=xe(Vy),r=xe(Ly),i=xe(fp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Vk(i,r,n,e,t)}},r?.preloadingStrategy?i7(r.preloadingStrategy).\u0275providers:[],{provide:Wx,multi:!0,useFactory:a7},r?.initialNavigation?h7(r):[],r?.bindToComponentInputs?Zo(8,[_k,{provide:xy,useExisting:_k}]).\u0275providers:[],[{provide:qk,useFactory:Bk},{provide:gT,multi:!0,useExisting:qk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:md,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(de(zk,8))};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({})}return n})();function d7(n){return"guarded"}function h7(n){return["disabled"===n.initialNavigation?Zo(3,[{provide:aT,multi:!0,useFactory:()=>{const e=xe(_s);return()=>{e.setUpLocationChangeListener()}}},{provide:Mb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zo(2,[{provide:Mb,useValue:0},{provide:aT,multi:!0,deps:[gi],useFactory:e=>{const t=e.get(cG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(_s),s=e.get(jk);kk(i,()=>{r(!0)}),e.get(Ly).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const qk=new Ie("");let p7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-home"]],decls:33,vars:0,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"]],template:function(r,i){1&r&&(Ot(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),on(4,"Bine ati venit in comunitatea Romani in Seattle"),kt()()(),zf(5,"p"),Ot(6,"div",3)(7,"div",4)(8,"h2"),on(9,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),kt(),Ot(10,"p"),on(11," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),kt()()(),Ot(12,"div",3)(13,"div",5)(14,"h2"),on(15,"Evenimente"),kt(),Ot(16,"p"),on(17,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),kt()(),Ot(18,"div",5)(19,"h2"),on(20,"Servicii"),kt(),Ot(21,"p"),on(22,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),kt()(),Ot(23,"div",5)(24,"h2"),on(25,"Oportunit\u0103\u021bi"),kt(),Ot(26,"p"),on(27,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),kt()(),Ot(28,"div",5)(29,"h2"),on(30,"Resurse"),kt(),Ot(31,"p"),on(32,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),kt()()()())},styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}"]})}return n})();var Hn=Ke(534);(0,Hn.registerVersion)("firebase","10.12.1","app");const v7=new class y7 extends gO{}(class _7 extends pO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),za=new Bu("ANGULARFIRE2_VERSION");function Pb(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const By=(n,e)=>{const t=e?[e]:(0,Hn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Ap{constructor(){return By(E7)}}const E7="app-check";function _d(){}class Wk{zone;delegate;constructor(e,t=v7){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class I7{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_d,{},_d,_d)),t.pipe(Br({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Wk(Zone.current)),this.insideAngular=t.run(()=>new Wk(Zone.current,rb)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(de(At))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function nc(n){return vd().ngZone.run(()=>n())}function Gk(n){return n.pipe(vn(vd().outsideAngular))}function vi(n){return function T7(n){return function(t){return(t=t.lift(new I7(n.ngZone))).pipe(Tr(n.outsideAngular),vn(n.insideAngular))}}(vd())(n)}const b7=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),nc(()=>n.apply(void 0,r))},xb=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=nc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_d,{},_d,_d))),r[s]=b7(r[s],t));const i=function w7(n){return vd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ut){const s=vd();return i.pipe(Tr(s.outsideAngular),vn(s.insideAngular))}return nc(()=>i)}return i instanceof ut?i.pipe(vi):i instanceof Promise?nc(()=>new Promise((s,o)=>i.then(a=>nc(()=>s(a)),a=>nc(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:nc(()=>i)};var fo=Ke(106);fo.Z.registerVersion("firebase","10.12.1","app-compat");const C7=["ngOnDestroy"];class Kk{constructor(e){return e}}const Cp=new Ie("angularfire2.app.options"),Sp=new Ie("angularfire2.app.name");function jy(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=fo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>fo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;M7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Kk(o)}const M7=(n,...e)=>{},P7={provide:Kk,useFactory:jy,deps:[Cp,At,[new Vr,Sp]]};let x7=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Cp,useValue:t},{provide:Sp,useValue:r}]}}constructor(t){fo.Z.registerVersion("angularfire",za.full,"core"),fo.Z.registerVersion("angularfire",za.full,"app-compat"),fo.Z.registerVersion("angular",XI.full,t.toString())}static \u0275fac=function(r){return new(r||n)(de(hs))};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[P7]})}return n})();function Nb(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function N7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(Zk("error",`${e} was already initialized on the ${t} Firebase App with different settings.${O7?" You may need to reload as Firebase is not HMR aware.":""}`),Zk("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const O7=typeof module<"u"&&!!module.hot,Zk=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ke(365);class k7 extends oe{constructor(e=1/0,t=1/0,r=nb){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function Qk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ce({connector:()=>new k7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Yk(n,e){return M(e)?ke(()=>n,e):ke(()=>n)}const Jk=new Ie("angularfire2.auth.use-emulator"),Xk=new Ie("angularfire2.auth.settings"),e1=new Ie("angularfire2.auth.tenant-id"),t1=new Ie("angularfire2.auth.langugage-code"),n1=new Ie("angularfire2.auth.use-device-language"),r1=new Ie("angularfire.auth.persistence"),s1=(n,e,t,r,i,s,o,a)=>Nb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[c,f]of Object.entries(o))u.settings[c]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let o1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,c,f,m,y,I){const T=new oe,R=F(void 0).pipe(vn(o.outsideAngular),ke(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ke.bind(Ke,365)))),Oe(()=>jy(t,s,r)),Oe(P=>s1(P,s,a,c,f,m,u,y)),Qk({bufferSize:1,refCount:!1}));if(dy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{R.pipe(Ba()).subscribe();const P=R.pipe(ke(G=>G.getRedirectResult().then(ne=>ne,()=>null)),vi,Qk({bufferSize:1,refCount:!1})),H=R.pipe(ke(G=>new ut(ne=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(Ee=>ne.next(Ee),Ee=>ne.error(Ee),()=>ne.complete()))})))),V=R.pipe(ke(G=>new ut(ne=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(Ee=>ne.next(Ee),Ee=>ne.error(Ee),()=>ne.complete()))}))));this.authState=P.pipe(Yk(H),Tr(o.outsideAngular),vn(o.insideAngular)),this.user=P.pipe(Yk(V),Tr(o.outsideAngular),vn(o.insideAngular)),this.idToken=this.user.pipe(ke(G=>G?b(G.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(ke(G=>G?b(G.getIdTokenResult()):F(null))),this.credential=S(P,T,this.authState.pipe(ms(G=>!G))).pipe(Oe(G=>G?.user?G:null),Tr(o.outsideAngular),vn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(C7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(c=>t.run(()=>c)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,c)=>o.then(f=>{const m=f?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,m),m})})})}))(this,R,s,{spy:{apply:(P,H,V)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&V.then(G=>T.next(G))}}})}static \u0275fac=function(r){return new(r||n)(de(Cp),de(Sp,8),de(hs),de(At),de(yd),de(Jk,8),de(Xk,8),de(e1,8),de(t1,8),de(n1,8),de(r1,8),de(Ap,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Ob(){return se((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var rc,c1,ae=Ke(861),$y=Ke(537),po=Ke(879),lt=Ke(58),a1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,x,L){L||(L=0);var z=Array(16);if("string"==typeof x)for(var q=0;16>q;++q)z[q]=x.charCodeAt(L++)|x.charCodeAt(L++)<<8|x.charCodeAt(L++)<<16|x.charCodeAt(L++)<<24;else for(q=0;16>q;++q)z[q]=x[L++]|x[L++]<<8|x[L++]<<16|x[L++]<<24;var J=j.g[3],U=(x=j.g[0])+(J^(L=j.g[1])&((q=j.g[2])^J))+z[0]+3614090360&4294967295;U=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=(L=(q=(J=(x=L+(U<<7&4294967295|U>>>25))+((U=J+(q^x&(L^q))+z[1]+3905402710&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^J&(x^L))+z[2]+606105819&4294967295)<<17&4294967295|U>>>15))+((U=L+(x^q&(J^x))+z[3]+3250441966&4294967295)<<22&4294967295|U>>>10))+((U=x+(J^L&(q^J))+z[4]+4118548399&4294967295)<<7&4294967295|U>>>25))+((U=J+(q^x&(L^q))+z[5]+1200080426&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^J&(x^L))+z[6]+2821735955&4294967295)<<17&4294967295|U>>>15))+((U=L+(x^q&(J^x))+z[7]+4249261313&4294967295)<<22&4294967295|U>>>10))+((U=x+(J^L&(q^J))+z[8]+1770035416&4294967295)<<7&4294967295|U>>>25))+((U=J+(q^x&(L^q))+z[9]+2336552879&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^J&(x^L))+z[10]+4294925233&4294967295)<<17&4294967295|U>>>15))+((U=L+(x^q&(J^x))+z[11]+2304563134&4294967295)<<22&4294967295|U>>>10))+((U=x+(J^L&(q^J))+z[12]+1804603682&4294967295)<<7&4294967295|U>>>25))+((U=J+(q^x&(L^q))+z[13]+4254626195&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^J&(x^L))+z[14]+2792965006&4294967295)<<17&4294967295|U>>>15))+((U=L+(x^q&(J^x))+z[15]+1236535329&4294967295)<<22&4294967295|U>>>10))+((U=x+(q^J&(L^q))+z[1]+4129170786&4294967295)<<5&4294967295|U>>>27))+((U=J+(L^q&(x^L))+z[6]+3225465664&4294967295)<<9&4294967295|U>>>23))+((U=q+(x^L&(J^x))+z[11]+643717713&4294967295)<<14&4294967295|U>>>18))+((U=L+(J^x&(q^J))+z[0]+3921069994&4294967295)<<20&4294967295|U>>>12))+((U=x+(q^J&(L^q))+z[5]+3593408605&4294967295)<<5&4294967295|U>>>27))+((U=J+(L^q&(x^L))+z[10]+38016083&4294967295)<<9&4294967295|U>>>23))+((U=q+(x^L&(J^x))+z[15]+3634488961&4294967295)<<14&4294967295|U>>>18))+((U=L+(J^x&(q^J))+z[4]+3889429448&4294967295)<<20&4294967295|U>>>12))+((U=x+(q^J&(L^q))+z[9]+568446438&4294967295)<<5&4294967295|U>>>27))+((U=J+(L^q&(x^L))+z[14]+3275163606&4294967295)<<9&4294967295|U>>>23))+((U=q+(x^L&(J^x))+z[3]+4107603335&4294967295)<<14&4294967295|U>>>18))+((U=L+(J^x&(q^J))+z[8]+1163531501&4294967295)<<20&4294967295|U>>>12))+((U=x+(q^J&(L^q))+z[13]+2850285829&4294967295)<<5&4294967295|U>>>27))+((U=J+(L^q&(x^L))+z[2]+4243563512&4294967295)<<9&4294967295|U>>>23))+((U=q+(x^L&(J^x))+z[7]+1735328473&4294967295)<<14&4294967295|U>>>18))+((U=L+(J^x&(q^J))+z[12]+2368359562&4294967295)<<20&4294967295|U>>>12))+((U=x+(L^q^J)+z[5]+4294588738&4294967295)<<4&4294967295|U>>>28))+((U=J+(x^L^q)+z[8]+2272392833&4294967295)<<11&4294967295|U>>>21))+((U=q+(J^x^L)+z[11]+1839030562&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^J^x)+z[14]+4259657740&4294967295)<<23&4294967295|U>>>9))+((U=x+(L^q^J)+z[1]+2763975236&4294967295)<<4&4294967295|U>>>28))+((U=J+(x^L^q)+z[4]+1272893353&4294967295)<<11&4294967295|U>>>21))+((U=q+(J^x^L)+z[7]+4139469664&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^J^x)+z[10]+3200236656&4294967295)<<23&4294967295|U>>>9))+((U=x+(L^q^J)+z[13]+681279174&4294967295)<<4&4294967295|U>>>28))+((U=J+(x^L^q)+z[0]+3936430074&4294967295)<<11&4294967295|U>>>21))+((U=q+(J^x^L)+z[3]+3572445317&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^J^x)+z[6]+76029189&4294967295)<<23&4294967295|U>>>9))+((U=x+(L^q^J)+z[9]+3654602809&4294967295)<<4&4294967295|U>>>28))+((U=J+(x^L^q)+z[12]+3873151461&4294967295)<<11&4294967295|U>>>21))+((U=q+(J^x^L)+z[15]+530742520&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^J^x)+z[2]+3299628645&4294967295)<<23&4294967295|U>>>9))+((U=x+(q^(L|~J))+z[0]+4096336452&4294967295)<<6&4294967295|U>>>26))+((U=J+(L^(x|~q))+z[7]+1126891415&4294967295)<<10&4294967295|U>>>22))+((U=q+(x^(J|~L))+z[14]+2878612391&4294967295)<<15&4294967295|U>>>17))+((U=L+(J^(q|~x))+z[5]+4237533241&4294967295)<<21&4294967295|U>>>11))+((U=x+(q^(L|~J))+z[12]+1700485571&4294967295)<<6&4294967295|U>>>26))+((U=J+(L^(x|~q))+z[3]+2399980690&4294967295)<<10&4294967295|U>>>22))+((U=q+(x^(J|~L))+z[10]+4293915773&4294967295)<<15&4294967295|U>>>17))+((U=L+(J^(q|~x))+z[1]+2240044497&4294967295)<<21&4294967295|U>>>11))+((U=x+(q^(L|~J))+z[8]+1873313359&4294967295)<<6&4294967295|U>>>26))+((U=J+(L^(x|~q))+z[15]+4264355552&4294967295)<<10&4294967295|U>>>22))+((U=q+(x^(J|~L))+z[6]+2734768916&4294967295)<<15&4294967295|U>>>17))+((U=L+(J^(q|~x))+z[13]+1309151649&4294967295)<<21&4294967295|U>>>11))+((J=(x=L+((U=x+(q^(L|~J))+z[4]+4149444226&4294967295)<<6&4294967295|U>>>26))+((U=J+(L^(x|~q))+z[11]+3174756917&4294967295)<<10&4294967295|U>>>22))^((q=J+((U=q+(x^(J|~L))+z[2]+718787259&4294967295)<<15&4294967295|U>>>17))|~x))+z[9]+3951481745&4294967295,j.g[0]=j.g[0]+x&4294967295,j.g[1]=j.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+J&4294967295}function o(j,x){this.h=x;for(var L=[],z=!0,q=j.length-1;0<=q;q--){var J=0|j[q];z&&J==x||(L[q]=J,z=!1)}this.g=L}(function e(j,x){function L(){}L.prototype=x.prototype,j.D=x.prototype,j.prototype=new L,j.prototype.constructor=j,j.C=function(z,q,J){for(var U=Array(arguments.length-2),Es=2;Es<arguments.length;Es++)U[Es-2]=arguments[Es];return x.prototype[q].apply(z,U)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,x){void 0===x&&(x=j.length);for(var L=x-this.blockSize,z=this.B,q=this.h,J=0;J<x;){if(0==q)for(;J<=L;)i(this,j,J),J+=this.blockSize;if("string"==typeof j){for(;J<x;)if(z[q++]=j.charCodeAt(J++),q==this.blockSize){i(this,z),q=0;break}}else for(;J<x;)if(z[q++]=j[J++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=x},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var x=1;x<j.length-8;++x)j[x]=0;var L=8*this.o;for(x=j.length-8;x<j.length;++x)j[x]=255&L,L/=256;for(this.u(j),j=Array(16),x=L=0;4>x;++x)for(var z=0;32>z;z+=8)j[L++]=this.g[x]>>>z&255;return j};var a={};function u(j){return-128<=j&&128>j?function s(j,x){var L=a;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=x(j)}(j,function(x){return new o([0|x],0>x?-1:0)}):new o([0|j],0>j?-1:0)}function c(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return P(c(-j));for(var x=[],L=1,z=0;j>=L;z++)x[z]=j/L|0,L*=4294967296;return new o(x,0)}var m=u(0),y=u(1),I=u(16777216);function T(j){if(0!=j.h)return!1;for(var x=0;x<j.g.length;x++)if(0!=j.g[x])return!1;return!0}function R(j){return-1==j.h}function P(j){for(var x=j.g.length,L=[],z=0;z<x;z++)L[z]=~j.g[z];return new o(L,~j.h).add(y)}function H(j,x){return j.add(P(x))}function V(j,x){for(;(65535&j[x])!=j[x];)j[x+1]+=j[x]>>>16,j[x]&=65535,x++}function G(j,x){this.g=j,this.h=x}function ne(j,x){if(T(x))throw Error("division by zero");if(T(j))return new G(m,m);if(R(j))return x=ne(P(j),x),new G(P(x.g),P(x.h));if(R(x))return x=ne(j,P(x)),new G(P(x.g),x.h);if(30<j.g.length){if(R(j)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var L=y,z=x;0>=z.l(j);)L=Ee(L),z=Ee(z);var q=Me(L,1),J=Me(z,1);for(z=Me(z,2),L=Me(L,2);!T(z);){var U=J.add(z);0>=U.l(j)&&(q=q.add(L),J=U),z=Me(z,1),L=Me(L,1)}return x=H(j,q.j(x)),new G(q,x)}for(q=m;0<=j.l(x);){for(L=Math.max(1,Math.floor(j.m()/x.m())),z=48>=(z=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,z-48),U=(J=c(L)).j(x);R(U)||0<U.l(j);)U=(J=c(L-=z)).j(x);T(J)&&(J=y),q=q.add(J),j=H(j,U)}return new G(q,j)}function Ee(j){for(var x=j.g.length+1,L=[],z=0;z<x;z++)L[z]=j.i(z)<<1|j.i(z-1)>>>31;return new o(L,j.h)}function Me(j,x){var L=x>>5;x%=32;for(var z=j.g.length-L,q=[],J=0;J<z;J++)q[J]=0<x?j.i(J+L)>>>x|j.i(J+L+1)<<32-x:j.i(J+L);return new o(q,j.h)}(n=o.prototype).m=function(){if(R(this))return-P(this).m();for(var j=0,x=1,L=0;L<this.g.length;L++){var z=this.i(L);j+=(0<=z?z:4294967296+z)*x,x*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(T(this))return"0";if(R(this))return"-"+P(this).toString(j);for(var x=c(Math.pow(j,6)),L=this,z="";;){var q=ne(L,x).g,J=((0<(L=H(L,q.j(x))).g.length?L.g[0]:L.h)>>>0).toString(j);if(T(L=q))return J+z;for(;6>J.length;)J="0"+J;z=J+z}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return R(j=H(this,j))?-1:T(j)?0:1},n.abs=function(){return R(this)?P(this):this},n.add=function(j){for(var x=Math.max(this.g.length,j.g.length),L=[],z=0,q=0;q<=x;q++){var J=z+(65535&this.i(q))+(65535&j.i(q)),U=(J>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);z=U>>>16,L[q]=(U&=65535)<<16|(J&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function(j){if(T(this)||T(j))return m;if(R(this))return R(j)?P(this).j(P(j)):P(P(this).j(j));if(R(j))return P(this.j(P(j)));if(0>this.l(I)&&0>j.l(I))return c(this.m()*j.m());for(var x=this.g.length+j.g.length,L=[],z=0;z<2*x;z++)L[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<j.g.length;q++){var J=this.i(z)>>>16,U=65535&this.i(z),Es=j.i(q)>>>16,du=65535&j.i(q);L[2*z+2*q]+=U*du,V(L,2*z+2*q),L[2*z+2*q+1]+=J*du,V(L,2*z+2*q+1),L[2*z+2*q+1]+=U*Es,V(L,2*z+2*q+1),L[2*z+2*q+2]+=J*Es,V(L,2*z+2*q+2)}for(z=0;z<x;z++)L[z]=L[2*z+1]<<16|L[2*z];for(z=x;z<2*x;z++)L[z]=0;return new o(L,0)},n.A=function(j){return ne(this,j).h},n.and=function(j){for(var x=Math.max(this.g.length,j.g.length),L=[],z=0;z<x;z++)L[z]=this.i(z)&j.i(z);return new o(L,this.h&j.h)},n.or=function(j){for(var x=Math.max(this.g.length,j.g.length),L=[],z=0;z<x;z++)L[z]=this.i(z)|j.i(z);return new o(L,this.h|j.h)},n.xor=function(j){for(var x=Math.max(this.g.length,j.g.length),L=[],z=0;z<x;z++)L[z]=this.i(z)^j.i(z);return new o(L,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,c1=u1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function f(j,x){if(0==j.length)throw Error("number format error: empty string");if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if("-"==j.charAt(0))return P(f(j.substring(1),x));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=c(Math.pow(x,8)),z=m,q=0;q<j.length;q+=8){var J=Math.min(8,j.length-q),U=parseInt(j.substring(q,q+J),x);8>J?(J=c(Math.pow(x,J)),z=z.j(J).add(c(U))):z=(z=z.j(L)).add(c(U))}return z},rc=u1.Integer=o}).apply(typeof a1<"u"?a1:typeof self<"u"?self:typeof window<"u"?window:{});var l1,d1,Rp,h1,Hy,kb,f1,p1,g1,zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zy&&zy];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var K=h[C];if(!(K in E))break e;E=E[K]}(_=_(C=E[h=h[h.length-1]]))!=C&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,C=!1,K={next:function(){if(!C&&E<h.length){var ie=E++;return{value:_(ie,h[ie]),done:!1}}return C=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function c(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,C),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(C,K,ie){for(var be=Array(arguments.length-2),un=2;un<arguments.length;un++)be[un-2]=arguments[un];return _.prototype[K].apply(C,be)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=h[C];return E}return[]}function P(h,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(u(C)){const K=h.length||0,ie=C.length||0;h.length=K+ie;for(let be=0;be<ie;be++)h[K+be]=C[be]}else h.push(C)}}function V(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var Ee=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function Me(h,_,E){for(const C in h)_.call(E,h[C],C,h)}function x(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,C;for(let K=1;K<arguments.length;K++){for(E in C=arguments[K],C)h[E]=C[E];for(let ie=0;ie<L.length;ie++)E=L[ie],Object.prototype.hasOwnProperty.call(C,E)&&(h[E]=C[E])}}function q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function J(h){a.setTimeout(()=>{throw h},0)}function U(){var h=Ct;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var du=new class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Ve,h=>h.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,Ge=!1,Ct=new class Es{constructor(){this.h=this.g=null}add(_,E){const C=du.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}},rr=()=>{const h=a.Promise.resolve(void 0);qe=()=>{h.then(Is)}};var Is=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(E){J(E)}var _=du;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Ge=!1};function Wn(){this.s=this.s,this.C=this.C}function Dn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Wn.prototype.s=!1,Wn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Dn.prototype.h=function(){this.defaultPrevented=!0};var An=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function hu(h,_){if(Dn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ee){e:{try{ne(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=void 0!==C.clientX?C.clientX:C.pageX,this.clientY=void 0!==C.clientY?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:YA[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&hu.aa.h.call(this)}}T(hu,Dn);var YA={2:"touch",3:"pen",4:"mouse"};hu.prototype.h=function(){hu.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),la=0;function Bi(h,_,E,C,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=K,this.key=++la,this.da=this.fa=!1}function da(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function fu(h){this.src=h,this.g={},this.h=0}function JA(h,_){var E=_.type;if(E in h.g){var ie,C=h.g[E],K=Array.prototype.indexOf.call(C,_,void 0);(ie=0<=K)&&Array.prototype.splice.call(C,K,1),ie&&(da(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function XA(h,_,E,C){for(var K=0;K<h.length;++K){var ie=h[K];if(!ie.da&&ie.listener==_&&ie.capture==!!E&&ie.ha==C)return K}return-1}fu.prototype.add=function(h,_,E,C,K){var ie=h.toString();(h=this.g[ie])||(h=this.g[ie]=[],this.h++);var be=XA(h,_,C,K);return-1<be?(_=h[be],E||(_.fa=!1)):((_=new Bi(_,this.src,ie,!!C,K)).fa=E,h.push(_)),_};var eC="closure_lm_"+(1e6*Math.random()|0),tC={};function LU(h,_,E,C,K){if(C&&C.once)return UU(h,_,E,C,K);if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)LU(h,_[ie],E,C,K);return null}return E=sC(E),h&&h[Gn]?h.K(_,E,c(C)?!!C.capture:!!C,K):VU(h,_,E,!1,C,K)}function VU(h,_,E,C,K,ie){if(!_)throw Error("Invalid event type");var be=c(K)?!!K.capture:!!K,un=rC(h);if(un||(h[eC]=un=new fu(h)),(E=un.add(_,E,C,be,ie)).proxy)return E;if(C=function Sre(){const _=Rre;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=C,C.src=h,C.listener=E,h.addEventListener)An||(K=be),void 0===K&&(K=!1),h.addEventListener(_.toString(),C,K);else if(h.attachEvent)h.attachEvent(jU(_.toString()),C);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(C)}return E}function UU(h,_,E,C,K){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)UU(h,_[ie],E,C,K);return null}return E=sC(E),h&&h[Gn]?h.L(_,E,c(C)?!!C.capture:!!C,K):VU(h,_,E,!0,C,K)}function BU(h,_,E,C,K){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)BU(h,_[ie],E,C,K);else C=c(C)?!!C.capture:!!C,E=sC(E),h&&h[Gn]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=XA(ie=h.g[_],E,C,K))&&(da(ie[E]),Array.prototype.splice.call(ie,E,1),0==ie.length&&(delete h.g[_],h.h--))):h&&(h=rC(h))&&(_=h.g[_.toString()],h=-1,_&&(h=XA(_,E,C,K)),(E=-1<h?_[h]:null)&&nC(E))}function nC(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Gn])JA(_.i,h);else{var E=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(E,C,h.capture):_.detachEvent?_.detachEvent(jU(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=rC(_))?(JA(E,h),0==E.h&&(E.src=null,_[eC]=null)):da(h)}}}function jU(h){return h in tC?tC[h]:tC[h]="on"+h}function Rre(h,_){if(h.da)h=!0;else{_=new hu(_,this);var E=h.listener,C=h.ha||h.src;h.fa&&nC(h),h=E.call(C,_)}return h}function rC(h){return(h=h[eC])instanceof fu?h:null}var iC="__closure_events_fn_"+(1e9*Math.random()>>>0);function sC(h){return"function"==typeof h?h:(h[iC]||(h[iC]=function(_){return h.handleEvent(_)}),h[iC])}function si(){Wn.call(this),this.i=new fu(this),this.M=this,this.F=null}function bi(h,_){var E,C=h.F;if(C)for(E=[];C;C=C.F)E.push(C);if(h=h.M,C=_.type||_,"string"==typeof _)_=new Dn(_,h);else if(_ instanceof Dn)_.target=_.target||h;else{var K=_;z(_=new Dn(C,h),K)}if(K=!0,E)for(var ie=E.length-1;0<=ie;ie--){var be=_.g=E[ie];K=dE(be,C,!0,_)&&K}if(K=dE(be=_.g=h,C,!0,_)&&K,K=dE(be,C,!1,_)&&K,E)for(ie=0;ie<E.length;ie++)K=dE(be=_.g=E[ie],C,!1,_)&&K}function dE(h,_,E,C){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,ie=0;ie<_.length;++ie){var be=_[ie];if(be&&!be.da&&be.capture==E){var un=be.listener,Hr=be.ha||be.src;be.fa&&JA(h.i,be),K=!1!==un.call(Hr,C)&&K}}return K&&!C.defaultPrevented}function $U(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function zU(h){h.g=$U(()=>{h.g=null,h.i&&(h.i=!1,zU(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(si,Wn),si.prototype[Gn]=!0,si.prototype.removeEventListener=function(h,_,E,C){BU(this,h,_,E,C)},si.prototype.N=function(){if(si.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],C=0;C<E.length;C++)da(E[C]);delete h.g[_],h.h--}}this.F=null},si.prototype.K=function(h,_,E,C){return this.i.add(String(h),_,!1,E,C)},si.prototype.L=function(h,_,E,C){return this.i.add(String(h),_,!0,E,C)};class Mre extends Wn{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:zU(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cg(h){Wn.call(this),this.h=h,this.g={}}T(Cg,Wn);var HU=[];function qU(h){Me(h.g,function(_,E){this.g.hasOwnProperty(E)&&nC(_)},h),h.g={}}Cg.prototype.N=function(){Cg.aa.N.call(this),qU(this)},Cg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oC=a.JSON.stringify,Pre=a.JSON.parse,xre=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function aC(){}function GU(){}aC.prototype.h=null;var Sg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uC(){Dn.call(this,"d")}function cC(){Dn.call(this,"c")}T(uC,Dn),T(cC,Dn);var Rc={},KU=null;function hE(){return KU=KU||new si}function ZU(h){Dn.call(this,Rc.La,h)}function Rg(h){const _=hE();bi(_,new ZU(_))}function QU(h,_){Dn.call(this,Rc.STAT_EVENT,h),this.stat=_}function Di(h){const _=hE();bi(_,new QU(_,h))}function YU(h,_){Dn.call(this,Rc.Ma,h),this.size=_}function Mg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Pg(){this.g=!0}function ch(h,_,E,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Fre(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var C=E[h];if(!(2>C.length)){var K=C[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var be=1;be<K.length;be++)K[be]=""}}}return oC(E)}catch{return _}}(h,E)+(C?" "+C:"")})}Rc.La="serverreachability",T(ZU,Dn),Rc.STAT_EVENT="statevent",T(QU,Dn),Rc.Ma="timingevent",T(YU,Dn),Pg.prototype.xa=function(){this.g=!1},Pg.prototype.info=function(){};var lC,fE={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},JU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function pE(){}function pu(h,_,E,C){this.j=h,this.i=_,this.l=E,this.R=C||1,this.U=new Cg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new XU}function XU(){this.i=null,this.g="",this.h=!1}T(pE,aC),pE.prototype.g=function(){return new XMLHttpRequest},pE.prototype.i=function(){return{}},lC=new pE;var eB={},dC={};function hC(h,_,E){h.L=1,h.v=yE(ha(_)),h.m=E,h.P=!0,tB(h,null)}function tB(h,_){h.F=Date.now(),gE(h),h.A=ha(h.v);var E=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),gB(E.i,"t",C),h.C=0,E=h.j.J,h.h=new XU,h.g=NB(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Mre(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,C=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(HU[0]=K.toString()),K=HU);for(var ie=0;ie<K.length;ie++){var be=LU(E,K[ie],C||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Rg(),function Nre(h,_,E,C,K,ie){h.info(function(){if(h.g)if(ie)for(var be="",un=ie.split("&"),Hr=0;Hr<un.length;Hr++){var jt=un[Hr].split("=");if(1<jt.length){var oi=jt[0];jt=jt[1];var ai=oi.split("_");be=2<=ai.length&&"type"==ai[1]?be+(oi+"=")+jt+"&":be+(oi+"=redacted&")}}else be=null;else be=ie;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+_+"\n"+E+"\n"+be})}(h.i,h.u,h.A,h.l,h.R,h.m)}function nB(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Lre(h,_){var E=h.C,C=_.indexOf("\n",E);return-1==C?dC:(E=Number(_.substring(E,C)),isNaN(E)?eB:(C+=1)+E>_.length?dC:(_=_.slice(C,C+E),h.C=C+E,_))}function gE(h){h.S=Date.now()+h.I,rB(h,h.I)}function rB(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Mg(y(h.ba,h),_)}function fC(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function xg(h){0==h.j.G||h.J||RB(h.j,h)}function Mc(h){fC(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,qU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function pC(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||gC(E.h,h)))if(!h.K&&gC(E.h,h)&&3==E.G){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&3==C.length){var K=C;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;TE(E),IE(E)}vC(E),Di(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=Mg(y(E.Za,E),6e3));if(1>=oB(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else xc(E,11)}else if((h.K||E.g==h)&&TE(E),!V(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let jt=K[_];if(E.T=jt[0],jt=jt[1],2==E.G)if("c"==jt[0]){E.K=jt[1],E.ia=jt[2];const oi=jt[3];null!=oi&&(E.la=oi,E.j.info("VER="+E.la));const ai=jt[4];null!=ai&&(E.Aa=ai,E.j.info("SVER="+E.Aa));const hh=jt[5];null!=hh&&"number"==typeof hh&&0<hh&&(E.L=C=1.5*hh,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const Bs=h.g;if(Bs){const DE=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(DE){var ie=C.h;ie.g||-1==DE.indexOf("spdy")&&-1==DE.indexOf("quic")&&-1==DE.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(mC(ie,ie.h),ie.h=null))}if(C.D){const IC=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;IC&&(C.ya=IC,Cn(C.I,C.D,IC))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var be=h;if((C=E).qa=xB(C,C.J?C.ia:null,C.W),be.K){aB(C.h,be);var un=be,Hr=C.L;Hr&&(un.I=Hr),un.B&&(fC(un),gE(un)),C.g=be}else CB(C);0<E.i.length&&wE(E)}else"stop"!=jt[0]&&"close"!=jt[0]||xc(E,7);else 3==E.G&&("stop"==jt[0]||"close"==jt[0]?"stop"==jt[0]?xc(E,7):yC(E):"noop"!=jt[0]&&E.l&&E.l.ta(jt),E.v=0)}Rg()}catch{}}function iB(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sB(h){return!!h.h||!!h.g&&h.g.size>=h.j}function oB(h){return h.h?1:h.g?h.g.size:0}function gC(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function mC(h,_){h.g?h.g.add(_):h.h=_}function aB(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function uB(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function cB(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Bre(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const C in h)_[E++]=C;return _}}}(h),C=function Ure(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],E=h.length,C=0;C<E;C++)_.push(h[C]);return _}for(C in _=[],E=0,h)_[E++]=h[C];return _}(h),K=C.length,ie=0;ie<K;ie++)_.call(void 0,C[ie],E&&E[ie],h)}pu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==fa(h)?_.j():this.Y(h)},pu.prototype.Y=function(h){try{if(h==this.g)e:{const ai=fa(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ai)&&(3!=ai||this.g&&(this.h.h||this.g.oa()||wB(this.g)))){this.J||4!=ai||7==_||Rg(),fC(this);var E=this.g.Z();this.X=E;t:if(nB(this)){var C=wB(this.g);h="";var K=C.length,ie=4==fa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mc(this),xg(this);var be="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(ie&&_==K-1)});C.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=200==E,function Ore(h,_,E,C,K,ie,be){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+ie+" "+be})}(this.i,this.u,this.A,this.l,this.R,ai,E),this.o){if(this.T&&!this.K){t:{if(this.g){var un,Hr=this.g;if((un=Hr.g?Hr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(un)){var jt=un;break t}}jt=null}if(!(E=jt)){this.o=!1,this.s=3,Di(12),Mc(this),xg(this);break e}ch(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pC(this,E)}if(this.P){let Bs;for(E=!0;!this.J&&this.C<be.length;){if(Bs=Lre(this,be),Bs==dC){4==ai&&(this.s=4,Di(14),E=!1),ch(this.i,this.l,null,"[Incomplete Response]");break}if(Bs==eB){this.s=4,Di(15),ch(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}ch(this.i,this.l,Bs,null),pC(this,Bs)}if(nB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ai||0!=be.length||this.h.h||(this.s=1,Di(16),E=!1),this.o=this.o&&E,E){if(0<be.length&&!this.W){this.W=!0;var oi=this.j;oi.g==this&&oi.ba&&!oi.M&&(oi.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),EC(oi),oi.M=!0,Di(11))}}else ch(this.i,this.l,be,"[Invalid Chunked Response]"),Mc(this),xg(this)}else ch(this.i,this.l,be,null),pC(this,be);4==ai&&Mc(this),this.o&&!this.J&&(4==ai?RB(this.j,this):(this.o=!1,gE(this)))}else(function eie(h){const _={};h=(h.g&&2<=fa(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let C=0;C<h.length;C++){if(V(h[C]))continue;var E=q(h[C]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ie=_[K]||[];_[K]=ie,ie.push(E)}!function j(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(C){return C.join(", ")})})(this.g),400==E&&0<be.indexOf("Unknown SID")?(this.s=3,Di(12)):(this.s=0,Di(13)),Mc(this),xg(this)}}}catch{}},pu.prototype.cancel=function(){this.J=!0,Mc(this)},pu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function kre(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Rg(),Di(17)),Mc(this),this.s=2,xg(this)):rB(this,this.S-h)},iB.prototype.cancel=function(){if(this.i=uB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var lB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pc){this.h=h.h,mE(this,h.j),this.o=h.o,this.g=h.g,_E(this,h.s),this.l=h.l;var _=h.i,E=new kg;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),dB(this,E),this.m=h.m}else h&&(_=String(h).match(lB))?(this.h=!1,mE(this,_[1]||"",!0),this.o=Ng(_[2]||""),this.g=Ng(_[3]||"",!0),_E(this,_[4]),this.l=Ng(_[5]||"",!0),dB(this,_[6]||"",!0),this.m=Ng(_[7]||"")):(this.h=!1,this.i=new kg(null,this.h))}function ha(h){return new Pc(h)}function mE(h,_,E){h.j=E?Ng(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function _E(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function dB(h,_,E){_ instanceof kg?(h.i=_,function Gre(h,_){_&&!h.j&&(gu(h),h.i=null,h.g.forEach(function(E,C){var K=C.toLowerCase();C!=K&&(fB(this,C),gB(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Og(_,qre)),h.i=new kg(_,h.h))}function Cn(h,_,E){h.i.set(_,E)}function yE(h){return Cn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ng(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Og(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,$re),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $re(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Pc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Og(_,hB,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Og(_,hB,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Og(E,"/"==E.charAt(0)?Hre:zre,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Og(E,Wre)),h.join("")};var h,hB=/[#\/\?@]/g,zre=/[#\?:]/g,Hre=/[#\?]/g,qre=/[#\?@]/g,Wre=/#/g;function kg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function gu(h){h.g||(h.g=new Map,h.h=0,h.i&&function jre(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var C=h[E].indexOf("="),K=null;if(0<=C){var ie=h[E].substring(0,C);K=h[E].substring(C+1)}else ie=h[E];_(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function fB(h,_){gu(h),_=lh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function pB(h,_){return gu(h),_=lh(h,_),h.g.has(_)}function gB(h,_,E){fB(h,_),0<E.length&&(h.i=null,h.g.set(lh(h,_),R(E)),h.h+=E.length)}function lh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function mu(h,_,E,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(E)}catch{}}function Qre(){this.g=new xre}function Yre(h,_,E){const C=E||"";try{cB(h,function(K,ie){let be=K;c(K)&&(be=oC(K)),_.push(C+ie+"="+encodeURIComponent(be))})}catch(K){throw _.push(C+"type="+encodeURIComponent("_badmap")),K}}function Fg(h){this.l=h.Ub||null,this.j=h.eb||!1}function vE(h,_){si.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function mB(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Lg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Vg(h)}function Vg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function _B(h){let _="";return Me(h,function(E,C){_+=C,_+=":",_+=E,_+="\r\n"}),_}function _C(h,_,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=_B(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Cn(h,_,E))}function Kn(h){si.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=kg.prototype).add=function(h,_){gu(this),this.i=null,h=lh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){gu(this),this.g.forEach(function(E,C){E.forEach(function(K){h.call(_,K,C,this)},this)},this)},n.na=function(){gu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const K=h[C];for(let ie=0;ie<K.length;ie++)E.push(_[C])}return E},n.V=function(h){gu(this);let _=[];if("string"==typeof h)pB(this,h)&&(_=_.concat(this.g.get(lh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return gu(this),this.i=null,pB(this,h=lh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const ie=encodeURIComponent(String(C)),be=this.V(C);for(C=0;C<be.length;C++){var K=ie;""!==be[C]&&(K+="="+encodeURIComponent(String(be[C]))),h.push(K)}}return this.i=h.join("&")},T(Fg,aC),Fg.prototype.g=function(){return new vE(this.l,this.j)},Fg.prototype.i=(h={},function(){return h}),T(vE,si),(n=vE.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Vg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vg(this)),this.g&&(this.readyState=3,Vg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mB(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Lg(this):Vg(this),3==this.readyState&&mB(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Lg(this))},n.Qa=function(h){this.g&&(this.response=h,Lg(this))},n.ga=function(){this.g&&Lg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(vE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Kn,si);var Jre=/^https?$/i,Xre=["POST","PUT"];function yB(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,vB(h),EE(h)}function vB(h){h.A||(h.A=!0,bi(h,"complete"),bi(h,"error"))}function EB(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=fa(h)||2!=h.Z()))if(h.u&&4==fa(h))$U(h.Ea,0,h);else if(bi(h,"readystatechange"),4==fa(h)){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var C;if(C=0===be){var K=String(h.D).match(lB)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),C=!Jre.test(K?K.toLowerCase():"")}E=C}if(E)bi(h,"complete"),bi(h,"success");else{h.m=6;try{var ie=2<fa(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",vB(h)}}finally{EE(h)}}}function EE(h,_){if(h.g){IB(h);const E=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||bi(h,"ready");try{E.onreadystatechange=C}catch{}}}function IB(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function fa(h){return h.g?h.g.readyState:0}function wB(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ug(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function TB(h){this.Aa=0,this.i=[],this.j=new Pg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ug("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ug("baseRetryDelayMs",5e3,h),this.cb=Ug("retryDelaySeedMs",1e4,h),this.Wa=Ug("forwardChannelMaxRetries",2,h),this.wa=Ug("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new iB(h&&h.concurrentRequestLimit),this.Da=new Qre,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function yC(h){if(bB(h),3==h.G){var _=h.U++,E=ha(h.I);if(Cn(E,"SID",h.K),Cn(E,"RID",_),Cn(E,"TYPE","terminate"),Bg(h,E),(_=new pu(h,h.j,_)).L=2,_.v=yE(ha(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=NB(_.j,null),_.g.ea(_.v)),_.F=Date.now(),gE(_)}PB(h)}function IE(h){h.g&&(EC(h),h.g.cancel(),h.g=null)}function bB(h){IE(h),h.u&&(a.clearTimeout(h.u),h.u=null),TE(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function wE(h){if(!sB(h.h)&&!h.s){h.s=!0;var _=h.Ga;qe||rr(),Ge||(qe(),Ge=!0),Ct.add(_,h),h.B=0}}function DB(h,_){var E;E=_?_.l:h.U++;const C=ha(h.I);Cn(C,"SID",h.K),Cn(C,"RID",E),Cn(C,"AID",h.T),Bg(h,C),h.m&&h.o&&_C(C,h.m,h.o),E=new pu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=AB(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),mC(h.h,E),hC(E,C,_)}function Bg(h,_){h.H&&Me(h.H,function(E,C){Cn(_,C,E)}),h.l&&cB({},function(E,C){Cn(_,C,E)})}function AB(h,_,E){E=Math.min(h.i.length,E);var C=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let ie=-1;for(;;){const be=["count="+E];-1==ie?0<E?(ie=K[0].g,be.push("ofs="+ie)):ie=0:be.push("ofs="+ie);let un=!0;for(let Hr=0;Hr<E;Hr++){let jt=K[Hr].g;const oi=K[Hr].map;if(jt-=ie,0>jt)ie=Math.max(0,K[Hr].g-100),un=!1;else try{Yre(oi,be,"req"+jt+"_")}catch{C&&C(oi)}}if(un){C=be.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,C}function CB(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;qe||rr(),Ge||(qe(),Ge=!0),Ct.add(_,h),h.v=0}}function vC(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Mg(y(h.Fa,h),MB(h,h.v)),h.v++,0))}function EC(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function SB(h){h.g=new pu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ha(h.qa);Cn(_,"RID","rpc"),Cn(_,"SID",h.K),Cn(_,"AID",h.T),Cn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Cn(_,"TO",h.ja),Cn(_,"TYPE","xmlhttp"),Bg(h,_),h.m&&h.o&&_C(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=yE(ha(_)),E.m=null,E.P=!0,tB(E,h)}function TE(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function RB(h,_){var E=null;if(h.g==_){TE(h),EC(h),h.g=null;var C=2}else{if(!gC(h.h,_))return;E=_.D,aB(h.h,_),C=1}if(0!=h.G)if(_.o)if(1==C){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;bi(C=hE(),new YU(C,E)),wE(h)}else CB(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==C&&function tie(h,_){return!(oB(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Mg(y(h.Ga,h,_),MB(h,h.B)),h.B++,0)))}(h,_)||2==C&&vC(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:xc(h,5);break;case 4:xc(h,10);break;case 3:xc(h,6);break;default:xc(h,2)}}function MB(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function xc(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),C=h.Xa;const K=!C;C=new Pc(C||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||mE(C,"https"),yE(C),K?function Kre(h,_){const E=new Pg;if(a.Image){const C=new Image;C.onload=I(mu,E,"TestLoadImage: loaded",!0,_,C),C.onerror=I(mu,E,"TestLoadImage: error",!1,_,C),C.onabort=I(mu,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=I(mu,E,"TestLoadImage: timeout",!1,_,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}(C.toString(),E):function Zre(h,_){new Pg;const C=new AbortController,K=setTimeout(()=>{C.abort(),mu(0,0,!1,_)},1e4);fetch(h,{signal:C.signal}).then(ie=>{clearTimeout(K),mu(0,0,!!ie.ok,_)}).catch(()=>{clearTimeout(K),mu(0,0,!1,_)})}(C.toString(),E)}else Di(2);h.G=0,h.l&&h.l.sa(_),PB(h),bB(h)}function PB(h){if(h.G=0,h.ka=[],h.l){const _=uB(h.h);(0!=_.length||0!=h.i.length)&&(P(h.ka,_),P(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function xB(h,_,E){var C=E instanceof Pc?ha(E):new Pc(E);if(""!=C.g)_&&(C.g=_+"."+C.g),_E(C,C.s);else{var K=a.location;C=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ie=new Pc(null);C&&mE(ie,C),_&&(ie.g=_),K&&_E(ie,K),E&&(ie.l=E),C=ie}return _=h.ya,(E=h.D)&&_&&Cn(C,E,_),Cn(C,"VER",h.la),Bg(h,C),C}function NB(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Kn(h.Ca&&!h.pa?new Fg({eb:E}):h.pa)).Ha(h.J),_}function OB(){}function bE(){}function es(h,_){si.call(this),this.g=new TB(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new dh(this)}function kB(h){uC.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function FB(){cC.call(this),this.status=1}function dh(h){this.g=h}(n=Kn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lC.g(),this.v=function WU(h){return h.h||(h.h=h.i())}(this.o?this.o:lC),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){return void yB(this,ie)}if(h=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)E.set(K,C[K]);else{if("function"!=typeof C.keys||"function"!=typeof C.get)throw Error("Unknown input type for opt_headers: "+String(C));for(const ie of C.keys())E.set(ie,C.get(ie))}C=Array.from(E.keys()).find(ie=>"content-type"==ie.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xre,_,void 0))||C||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,be]of E)this.g.setRequestHeader(ie,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{IB(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){yB(this,ie)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,bi(this,"complete"),bi(this,"abort"),EE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),EE(this,!0)),Kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?EB(this):this.bb())},n.bb=function(){EB(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<fa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Pre(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=TB.prototype).la=8,n.G=1,n.connect=function(h,_,E,C){Di(0),this.W=h,this.H=_||{},E&&void 0!==C&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=xB(this,null,this.W),wE(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new pu(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=x(ie),z(ie,this.S)):ie=this.S),null!==this.m||this.O||(K.H=ie,ie=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var C=this.i[E];if(void 0===(C="__data__"in C.map&&"string"==typeof(C=C.map.__data__)?C.length:void 0))break;if(4096<(_+=C)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=AB(this,K,_),Cn(E=ha(this.I),"RID",h),Cn(E,"CVER",22),this.D&&Cn(E,"X-HTTP-Session-Id",this.D),Bg(this,E),ie&&(this.O?_="headers="+encodeURIComponent(String(_B(ie)))+"&"+_:this.m&&_C(E,this.m,ie)),mC(this.h,K),this.Ua&&Cn(E,"TYPE","init"),this.P?(Cn(E,"$req",_),Cn(E,"SID","null"),K.T=!0,hC(K,E,null)):hC(K,E,_),this.G=2}}else 3==this.G&&(h?DB(this,h):0==this.i.length||sB(this.h)||DB(this))},n.Fa=function(){if(this.u=null,SB(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Mg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Di(10),IE(this),SB(this))},n.Za=function(){null!=this.C&&(this.C=null,IE(this),vC(this),Di(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Di(2)):(this.j.info("Failed to ping google.com"),Di(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=OB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},bE.prototype.g=function(h,_){return new es(h,_)},T(es,si),es.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},es.prototype.close=function(){yC(this.g)},es.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=oC(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&wE(_)},es.prototype.N=function(){this.g.l=null,delete this.j,yC(this.g),delete this.g,es.aa.N.call(this)},T(kB,uC),T(FB,cC),T(dh,OB),dh.prototype.ua=function(){bi(this.g,"a")},dh.prototype.ta=function(h){bi(this.g,new kB(h))},dh.prototype.sa=function(h){bi(this.g,new FB)},dh.prototype.ra=function(){bi(this.g,"b")},bE.prototype.createWebChannel=bE.prototype.g,es.prototype.send=es.prototype.o,es.prototype.open=es.prototype.m,es.prototype.close=es.prototype.close,g1=Qo.createWebChannelTransport=function(){return new bE},p1=Qo.getStatEventTarget=function(){return hE()},f1=Qo.Event=Rc,kb=Qo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fE.NO_ERROR=0,fE.TIMEOUT=8,fE.HTTP_ERROR=6,Hy=Qo.ErrorCode=fE,JU.COMPLETE="complete",h1=Qo.EventType=JU,GU.EventType=Sg,Sg.OPEN="a",Sg.CLOSE="b",Sg.ERROR="c",Sg.MESSAGE="d",si.prototype.listen=si.prototype.K,Rp=Qo.WebChannel=GU,d1=Qo.FetchXmlHttpFactory=Fg,Kn.prototype.listenOnce=Kn.prototype.L,Kn.prototype.getLastError=Kn.prototype.Ka,Kn.prototype.getLastErrorCode=Kn.prototype.Ba,Kn.prototype.getStatus=Kn.prototype.Z,Kn.prototype.getResponseJson=Kn.prototype.Oa,Kn.prototype.getResponseText=Kn.prototype.oa,Kn.prototype.send=Kn.prototype.ea,Kn.prototype.setWithCredentials=Kn.prototype.Ha,l1=Qo.XhrIo=Kn}).apply(typeof zy<"u"?zy:typeof self<"u"?self:typeof window<"u"?window:{});const m1="@firebase/firestore";class Dr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");let Ed="10.12.1";const Ha=new po.Yd("@firebase/firestore");function Id(){return Ha.logLevel}function ye(n,...e){if(Ha.logLevel<=po.in.DEBUG){const t=e.map(Fb);Ha.debug(`Firestore (${Ed}): ${n}`,...t)}}function tr(n,...e){if(Ha.logLevel<=po.in.ERROR){const t=e.map(Fb);Ha.error(`Firestore (${Ed}): ${n}`,...t)}}function Li(n,...e){if(Ha.logLevel<=po.in.WARN){const t=e.map(Fb);Ha.warn(`Firestore (${Ed}): ${n}`,...t)}}function Fb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ne(n="Unexpected state"){const e=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function $e(n,e){n||Ne()}function Te(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dr.UNAUTHENTICATED))}shutdown(){}}class B7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j7{constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,ae.Z)(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Er)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e("string"==typeof r.accessToken),new _1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(null===e||"string"==typeof e),new Dr(e)}}class $7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e("string"==typeof t.token),this.R=t.token,new y1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function q7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class v1{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=q7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function it(n,e){return n<e?-1:n>e?1:0}function wd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function E1(n){return n+"\0"}class Mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class He{constructor(e){this.timestamp=e}static fromTimestamp(e){return new He(e)}static min(){return new He(new Mn(0,0))}static max(){return new He(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ne(),void 0===r?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Mt extends Mp{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mt(t)}static emptyPath(){return new Mt([])}}const W7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Mp{construct(e,t,r){return new wn(e,t,r)}static isValidIdentifier(e){return W7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new me(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new me(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new me(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new me(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Mt.fromString(e))}static fromName(e){return new Se(Mt.fromString(e).popFirst(5))}static empty(){return new Se(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Mt(e.slice()))}}class Td{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Lb(n){return n.fields.find(e=>2===e.kind)}function ic(n){return n.fields.filter(e=>2!==e.kind)}Td.UNKNOWN_ID=-1;class sc{constructor(e,t){this.fieldPath=e,this.kind=t}}class bd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bd(0,Zi.min())}}function I1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=He.fromTimestamp(1e9===r?new Mn(t+1,0):new Mn(t,r));return new Zi(i,Se.empty(),e)}function w1(n){return new Zi(n.readTime,n.key,-1)}class Zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zi(He.min(),Se.empty(),-1)}static max(){return new Zi(He.max(),Se.empty(),-1)}}function Vb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:it(n.largestBatchId,e.largestBatchId))}const T1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qa(n){return Ub.apply(this,arguments)}function Ub(){return(Ub=(0,ae.Z)(function*(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==T1)throw n;ye("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;t(e[c]).next(f=>{o[c]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class qy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Er,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Pp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Bb(r.target.error);this.V.reject(new Pp(e,i))}}static open(e,t,r,i){try{return new qy(t,e.transaction(i,r))}catch(s){throw new Pp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ye("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Q7(t)}}class go{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===go.S((0,lt.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ye("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,lt.hl)())return!1;if(go.C())return!0;const e=(0,lt.z$)(),t=go.S(e),r=0<t&&t<10,i=D1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ye("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Pp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new me(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new me(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Pp(e,a))},s.onupgradeneeded=o=>{ye("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ye("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=qy.open(s.db,e,o?"readonly":"readwrite",r),c=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),Y.reject(f))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){const c=u,f="FirebaseError"!==c.name&&a<3;if(ye("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),s.close(),!f)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function D1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Z7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oc(this.B.delete())}}class Pp extends me{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wa(n){return"IndexedDbTransactionError"===n.name}class Q7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ye("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ye("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oc(r)}add(e){return ye("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ye("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ye("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return ye("SimpleDb","COUNT",this.store.name),oc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Y((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ye("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=s=>{const o=Bb(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new Z7(a),c=t(a.primaryKey,a.value,u);if(c instanceof Y){const f=c.catch(m=>(u.done(),Y.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oc(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Bb(r.target.error);t(i)}})}let A1=!1;function Bb(n){const e=go.S((0,lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A1||(A1=!0,setTimeout(()=>{throw r},0)),r}}return n}class Y7{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ye("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ye("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Wa(r)?ye("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield qa(r)}yield t.X(6e4)}))}}class J7{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Y.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ye("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ye("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=w1(s);Vb(o,r)>0&&(r=o)}),new Zi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Qi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function xp(n){return null==n}function Np(n){return 0===n&&1/n==-1/0}function C1(n){return"number"==typeof n&&Number.isInteger(n)&&!Np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S1(e)),e=X7(n.get(t),e);return S1(e)}function X7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function S1(n){return n+"\x01\x01"}function mo(n){const e=n.length;if($e(e>=2),2===e)return $e("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Mt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ne(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ne()}s=o+2}return new Mt(r)}const R1=["userId","batchId"];function Wy(n,e){return[n,ei(e)]}function M1(n,e,t){return[n,ei(e),t]}const eZ={},tZ=["prefixPath","collectionGroup","readTime","documentId"],nZ=["prefixPath","collectionGroup","documentId"],rZ=["collectionGroup","readTime","prefixPath","documentId"],iZ=["canonicalId","targetId"],sZ=["targetId","path"],oZ=["path","targetId"],aZ=["collectionId","parent"],uZ=["indexId","uid"],cZ=["uid","sequenceNumber"],lZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dZ=["indexId","uid","orderedDocumentKey"],hZ=["userId","collectionPath","documentId"],fZ=["userId","collectionPath","largestBatchId"],pZ=["userId","collectionGroup","largestBatchId"],P1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gZ=[...P1,"documentOverlays"],x1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],N1=x1,O1=[...N1,"indexConfiguration","indexState","indexEntries"],mZ=O1;class jb extends b1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ar(n,e){const t=Te(n);return go.F(t._e,e)}function k1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gy(this.root,e,this.comparator,!0)}}class Gy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??jr.RED,this.left=i??jr.EMPTY,this.right=s??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new jr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new V1(this.data.getIterator())}getIteratorFrom(e){return new V1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class V1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dd(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new tn(wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new U1("Invalid base64 string: "+s):s}}(e);return new Ir(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const yZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(n){if($e(!!n),"string"==typeof n){let e=0;const t=yZ.exec(n);if($e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Jo(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Ky(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zy(n){const e=n.mapValue.fields.__previous_value__;return Ky(e)?Zy(e):e}function Op(n){const e=Yo(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}class vZ{constructor(e,t,r,i,s,o,a,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Ka{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}const Za={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qy={nullValue:"NULL_VALUE"};function Qa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:z1(n)?9007199254740991:10:Ne()}function _o(n,e){if(n===e)return!0;const t=Qa(n);if(t!==Qa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Op(n).isEqual(Op(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yo(i.timestampValue),a=Yo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Jo(n.bytesValue).isEqual(Jo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return qn(i.geoPointValue.latitude)===qn(s.geoPointValue.latitude)&&qn(i.geoPointValue.longitude)===qn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qn(i.integerValue)===qn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qn(i.doubleValue),a=qn(s.doubleValue);return o===a?Np(o)===Np(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return wd(n.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(k1(o)!==k1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!_o(o[u],a[u])))return!1;return!0}(n,e);default:return Ne()}var s}function kp(n,e){return void 0!==(n.values||[]).find(t=>_o(t,e))}function Ya(n,e){if(n===e)return 0;const t=Qa(n),r=Qa(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=qn(s.integerValue||s.doubleValue),u=qn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return B1(n.timestampValue,e.timestampValue);case 4:return B1(Op(n),Op(e));case 5:return it(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Jo(s),u=Jo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const f=it(a[c],u[c]);if(0!==f)return f}return it(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=it(qn(s.latitude),qn(o.latitude));return 0!==a?a:it(qn(s.longitude),qn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const f=Ya(a[c],u[c]);if(f)return f}return it(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Za.mapValue&&o===Za.mapValue)return 0;if(s===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=it(u[m],f[m]);if(0!==y)return y;const I=Ya(a[u[m]],c[f[m]]);if(0!==I)return I}return it(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function B1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return it(n,e);const t=Yo(n),r=Yo(e),i=it(t.seconds,r.seconds);return 0!==i?i:it(t.nanos,r.nanos)}function Ad(n){return $b(n)}function $b(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Jo(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=$b(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$b(t.fields[o])}`;return i+"}"}(n.mapValue):Ne()}function ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zb(n){return!!n&&"integerValue"in n}function Fp(n){return!!n&&"arrayValue"in n}function j1(n){return!!n&&"nullValue"in n}function $1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jy(n){return!!n&&"mapValue"in n}function Lp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ga(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EZ(n){return"nullValue"in n?Qy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ac(Ka.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ne()}function IZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ac(Ka.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Za:Ne()}function H1(n,e){const t=Ya(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function q1(n,e){const t=Ya(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Lp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ga(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $r(Lp(this.value))}}function W1(n){const e=[];return Ga(n.fields,(t,r)=>{const i=new wn([t]);if(Jy(r)){const s=W1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vi(e)}class Tn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tn(e,0,He.min(),He.min(),He.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new Tn(e,1,t,He.min(),r,i,0)}static newNoDocument(e,t){return new Tn(e,2,t,He.min(),He.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,He.min(),He.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ja{constructor(e,t){this.position=e,this.inclusive=t}}function G1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Se.comparator(Se.fromName(o.referenceValue),t.key):Ya(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function K1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_o(n.position[t],e.position[t]))return!1;return!0}class Vp{constructor(e,t="asc"){this.field=e,this.dir=t}}function wZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Z1{}class Pt extends Z1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new TZ(e,t,r):"array-contains"===t?new AZ(e,r):"in"===t?new tF(e,r):"not-in"===t?new CZ(e,r):"array-contains-any"===t?new SZ(e,r):new Pt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new bZ(e,r):new DZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ya(t,this.value)):null!==t&&Qa(this.value)===Qa(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Z1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jt(e,t)}matches(e){return Cd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Cd(n){return"and"===n.op}function Hb(n){return"or"===n.op}function qb(n){return Q1(n)&&Cd(n)}function Q1(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function Wb(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Ad(n.value);if(qb(n))return n.filters.map(e=>Wb(e)).join(",");{const e=n.filters.map(t=>Wb(t)).join(",");return`${n.op}(${e})`}}function Y1(n,e){return n instanceof Pt?(r=n,(i=e)instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&_o(r.value,i.value)):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Y1(o,i.filters[a]),!0)}(n,e):void Ne();var r,i}function J1(n,e){const t=n.filters.concat(e);return Jt.create(t,n.op)}function X1(n){return n instanceof Pt?`${(t=n).field.canonicalString()} ${t.op} ${Ad(t.value)}`:n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(X1).join(" ,")+"}"}(n):"Filter";var t}class TZ extends Pt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class bZ extends Pt{constructor(e,t){super(e,"in",t),this.keys=eF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DZ extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=eF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class AZ extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fp(t)&&kp(t.arrayValue,this.value)}}class tF extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kp(this.value.arrayValue,t)}}class CZ extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kp(this.value.arrayValue,t)}}class SZ extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kp(this.value.arrayValue,r))}}class RZ{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Gb(n,e=null,t=[],r=[],i=null,s=null,o=null){return new RZ(n,e,t,r,i,s,o)}function uc(n){const e=Te(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),xp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ad(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ad(r)).join(",")),e.ue=t}return e.ue}function Up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Y1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K1(n.startAt,e.startAt)&&K1(n.endAt,e.endAt)}function Xy(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ev(n,e){return n.filters.filter(t=>t instanceof Pt&&t.field.isEqual(e))}function nF(n,e,t){let r=Qy,i=!0;for(const s of ev(n,e)){let o=Qy,a=!0;switch(s.op){case"<":case"<=":o=EZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qy}H1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];H1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function rF(n,e,t){let r=Za,i=!0;for(const s of ev(n,e)){let o=Za,a=!0;switch(s.op){case">=":case">":o=IZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Za}q1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];q1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Xo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function iF(n,e,t,r,i,s,o,a){return new Xo(n,e,t,r,i,s,o,a)}function Sd(n){return new Xo(n)}function sF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Kb(n){return null!==n.collectionGroup}function Rd(n){const e=Te(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(wn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vp(s,r))}),t.has(wn.keyField().canonicalString())||e.ce.push(new Vp(wn.keyField(),r))}return e.ce}function ti(n){const e=Te(n);return e.le||(e.le=function aF(n,e){if("F"===n.limitType)return Gb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Vp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ja(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ja(n.startAt.position,n.startAt.inclusive):null;return Gb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Rd(n))),e.le}function Zb(n,e){const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tv(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return Up(ti(n),ti(e))&&n.limitType===e.limitType}function uF(n){return`${uc(ti(n))}|lt:${n.limitType}`}function Md(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>X1(i)).join(", ")}]`),xp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ad(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ad(i)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function jp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Rd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const c=G1(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Rd(r),i)||r.endAt&&!function(o,a,u){const c=G1(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Rd(r),i)));var r,i}function cF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lF(n){return(e,t)=>{let r=!1;for(const i of Rd(n)){const s=MZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function MZ(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return null!==u&&null!==c?Ya(u,c):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}class ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}const PZ=new pn(Se.comparator);function Ui(){return PZ}const dF=new pn(Se.comparator);function $p(...n){let e=dF;for(const t of n)e=e.insert(t.key,t);return e}function hF(n){let e=dF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yo(){return zp()}function fF(){return zp()}function zp(){return new ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const xZ=new pn(Se.comparator),NZ=new tn(Se.comparator);function ht(...n){let e=NZ;for(const t of n)e=e.add(t);return e}const OZ=new tn(it);function Qb(){return OZ}function pF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Np(e)?"-0":e}}function gF(n){return{integerValue:""+n}}function mF(n,e){return C1(e)?gF(e):pF(n,e)}class nv{constructor(){this._=void 0}}function kZ(n,e,t){return n instanceof Pd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ky(s)&&(s=Zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof cc?yF(n,e):n instanceof lc?vF(n,e):function(i,s){const o=_F(i,s),a=EF(o)+EF(i.Pe);return zb(o)&&zb(i.Pe)?gF(a):pF(i.serializer,a)}(n,e)}function FZ(n,e,t){return n instanceof cc?yF(n,e):n instanceof lc?vF(n,e):t}function _F(n,e){return n instanceof xd?zb(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Pd extends nv{}class cc extends nv{constructor(e){super(),this.elements=e}}function yF(n,e){const t=IF(e);for(const r of n.elements)t.some(i=>_o(i,r))||t.push(r);return{arrayValue:{values:t}}}class lc extends nv{constructor(e){super(),this.elements=e}}function vF(n,e){let t=IF(e);for(const r of n.elements)t=t.filter(i=>!_o(i,r));return{arrayValue:{values:t}}}class xd extends nv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function EF(n){return qn(n.integerValue||n.doubleValue)}function IF(n){return Fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hp{constructor(e,t){this.field=e,this.transform=t}}class VZ{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iv{}function wF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Od(n.key,Pn.none()):new Nd(n.key,n.data,Pn.none());{const t=n.data,r=$r.empty();let i=new tn(wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ta(n.key,r,new Vi(i.toArray()),Pn.none())}}function UZ(n,e,t){n instanceof Nd?function(i,s,o){const a=i.value.clone(),u=DF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ta?function(i,s,o){if(!rv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=DF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(bF(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qp(n,e,t,r){return n instanceof Nd?function(s,o,a,u){if(!rv(s.precondition,o))return a;const c=s.value.clone(),f=AF(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof ta?function(s,o,a,u){if(!rv(s.precondition,o))return a;const c=AF(s.fieldTransforms,u,o),f=o.data;return f.setAll(bF(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,rv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function BZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_F(r.transform,i||null);null!=s&&(null===t&&(t=$r.empty()),t.set(r.field,s))}return t||null}function TF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&wd(r,i,(s,o)=>function LZ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof cc&&i instanceof cc||r instanceof lc&&i instanceof lc?wd(r.elements,i.elements,_o):r instanceof xd&&i instanceof xd?_o(r.Pe,i.Pe):r instanceof Pd&&i instanceof Pd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Nd extends iv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ta extends iv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DF(n,e,t){const r=new Map;$e(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,FZ(o,a,t[i]))}return r}function AF(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,kZ(s,o,e))}return r}class Od extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yb extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=fF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=wF(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(He.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(t,r)=>TF(t,r))&&wd(this.baseMutations,e.baseMutations,(t,r)=>TF(t,r))}}class Xb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length);let i=xZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Xb(e,t,r,i)}}class e0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var dr,Vt;function SF(n){switch(n){default:return Ne();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function RF(n){if(void 0===n)return tr("GRPC error has no .code"),te.UNKNOWN;switch(n){case dr.OK:return te.OK;case dr.CANCELLED:return te.CANCELLED;case dr.UNKNOWN:return te.UNKNOWN;case dr.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case dr.INTERNAL:return te.INTERNAL;case dr.UNAVAILABLE:return te.UNAVAILABLE;case dr.UNAUTHENTICATED:return te.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case dr.NOT_FOUND:return te.NOT_FOUND;case dr.ALREADY_EXISTS:return te.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return te.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case dr.ABORTED:return te.ABORTED;case dr.OUT_OF_RANGE:return te.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return te.UNIMPLEMENTED;case dr.DATA_LOSS:return te.DATA_LOSS;default:return Ne()}}(Vt=dr||(dr={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";function MF(){return new TextEncoder}const $Z=new rc([4294967295,4294967295],0);function PF(n){const e=MF().encode(n),t=new c1;return t.update(e),new Uint8Array(t.digest())}function xF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rc([t,r],0),new rc([i,s],0)]}class t0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wp(`Invalid padding: ${t}`);if(r<0)throw new Wp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Wp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Wp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=rc.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(rc.fromNumber(r)));return 1===i.compare($Z)&&(i=new rc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=PF(e),[r,i]=xF(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t0(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=PF(e),[r,i]=xF(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Wp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gp(He.min(),i,new pn(it),Ui(),ht())}}class Kp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kp(r,t,ht(),ht(),ht())}}class ov{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class NF{constructor(e,t){this.targetId=e,this.me=t}}class OF{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kF{constructor(){this.fe=0,this.ge=LF(),this.pe=Ir.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ht(),t=ht(),r=ht();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new Kp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=LF()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=FF(),this.Qe=new pn(it)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Xy(s))if(0===r){const o=new Se(s.path);this.Ue(t,o,Tn.newNoDocument(o,He.min()))}else $e(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Jo(r).toUint8Array()}catch(u){if(u instanceof U1)return Li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new t0(o,i,s)}catch(u){return Li(u instanceof Wp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Xy(a.target)){const u=new Se(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,Tn.newNoDocument(u,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ht();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Gp(e,t,this.Qe,this.ke,r);return this.ke=Ui(),this.qe=FF(),this.Qe=new pn(it),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kF,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tn(it),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function FF(){return new pn(Se.comparator)}function LF(){return new pn(Se.comparator)}const HZ={asc:"ASCENDING",desc:"DESCENDING"},qZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WZ={and:"AND",or:"OR"};class GZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n0(n,e){return n.useProto3Json||xp(e)?e:{value:e}}function kd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KZ(n,e){return kd(n,e.toTimestamp())}function nr(n){return $e(!!n),He.fromTimestamp(function(t){const r=Yo(t);return new Mn(r.seconds,r.nanos)}(n))}function r0(n,e){return s0(n,e).canonicalString()}function s0(n,e){const t=(i=n,new Mt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function UF(n){const e=Mt.fromString(n);return $e(QF(e)),e}function Zp(n,e){return r0(n.databaseId,e.path)}function vo(n,e){const t=UF(e);if(t.get(1)!==n.databaseId.projectId)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se($F(t))}function BF(n,e){return r0(n.databaseId,e)}function jF(n){const e=UF(n);return 4===e.length?Mt.emptyPath():$F(e)}function o0(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $F(n){return $e(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zF(n,e,t){return{name:Zp(n,e),fields:t.value.mapValue.fields}}function HF(n,e,t){const r=vo(n,e.name),i=nr(e.updateTime),s=e.createTime?nr(e.createTime):He.min(),o=new $r({mapValue:{fields:e.fields}}),a=Tn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Qp(n,e){let t;if(e instanceof Nd)t={update:zF(n,e.key,e.value)};else if(e instanceof Od)t={delete:Zp(n,e.key)};else if(e instanceof ta)t={update:zF(n,e.key,e.data),updateMask:nQ(e.fieldMask)};else{if(!(e instanceof Yb))return Ne();t={verify:Zp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:KZ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ne()),t;var s}function a0(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Pn.updateTime(nr(s.updateTime)):void 0!==s.exists?Pn.exists(s.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?($e("REQUEST_TIME"===a.setToServerValue),u=new Pd):"appendMissingElements"in a?u=new cc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new lc(a.removeAllFromArray.values||[]):"increment"in a?u=new xd(o,a.increment):Ne();const c=wn.fromServerFormat(a.fieldPath);return new Hp(c,u)}(n,i)):[];var s;if(e.update){const i=vo(n,e.update.name),s=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Vi((e.updateMask.fieldPaths||[]).map(f=>wn.fromServerFormat(f)));return new ta(i,s,o,t,r)}return new Nd(i,s,t,r)}if(e.delete){const i=vo(n,e.delete);return new Od(i,t)}if(e.verify){const i=vo(n,e.verify);return new Yb(i,t)}return Ne()}function qF(n,e){return{documents:[BF(n,e.path)]}}function av(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BF(n,i);const s=function(c){if(0!==c.length)return ZF(Jt.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(f=>{return{field:Xa((y=f).field),direction:XZ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=n0(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function GF(n){let e=jF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$e(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=KF(m);return y instanceof Jt&&qb(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Vp(Fd((T=y).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,xp(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new Ja((m=t.startAt).values||[],!!m.before));let c=null;return t.endAt&&(c=function(m){return new Ja(m.values||[],!m.before)}(t.endAt)),iF(e,i,o,s,a,"F",u,c)}function KF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fd(t.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fd(t.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fd(t.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fd(t.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):void 0!==n.fieldFilter?Pt.create(Fd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jt.create(t.compositeFilter.filters.map(r=>KF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne();var t}function XZ(n){return HZ[n]}function eQ(n){return qZ[n]}function tQ(n){return WZ[n]}function Xa(n){return{fieldPath:n.canonicalString()}}function Fd(n){return wn.fromServerFormat(n.fieldPath)}function ZF(n){return n instanceof Pt?function(t){if("=="===t.op){if($1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NAN"}};if(j1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NAN"}};if(j1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(t.field),op:eQ(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>ZF(i));return 1===r.length?r[0]:{compositeFilter:{op:tQ(t.op),filters:r}}}(n):Ne()}function nQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class na{constructor(e,t,r,i,s=He.min(),o=He.min(),a=Ir.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class YF{constructor(e){this.ct=e}}function JF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zp(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:kd(s,o.version.toTimestamp()),createTime:kd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dc(e.version)};else{if(!e.isUnknownDocument())return Ne();r.unknownDocument={path:t.path.toArray(),version:dc(e.version)}}var s,o;return r}function uv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hc(n){const e=new Mn(n.seconds,n.nanoseconds);return He.fromTimestamp(e)}function fc(n,e){const t=(e.baseMutations||[]).map(s=>a0(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>a0(n.ct,s)),i=Mn.fromMillis(e.localWriteTimeMs);return new Jb(e.batchId,i,t,r)}function Yp(n){const e=hc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hc(n.lastLimboFreeSnapshotVersion):He.min();let r;return r=void 0!==n.query.documents?($e(1===(s=n.query).documents.length),ti(Sd(jF(s.documents[0])))):function(s){return ti(GF(s))}(n.query),new na(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken));var s}function XF(n,e){const t=dc(e.snapshotVersion),r=dc(e.lastLimboFreeSnapshotVersion);let i;i=Xy(e.target)?qF(n.ct,e.target):av(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function u0(n){const e=GF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tv(e,e.limit,"L"):e}function c0(n,e){return new e0(e.largestBatchId,a0(n.ct,e.overlayMutation))}function eL(n,e){const t=e.path.lastSegment();return[n,ei(e.path.popLast()),t]}function tL(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:dc(r.readTime),documentKey:ei(r.documentKey.path),largestBatchId:r.largestBatchId}}class iQ{getBundleMetadata(e,t){return nL(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:hc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nL(e).put({bundleId:(i=t).id,createTime:dc(nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return rL(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:u0(s.bundledQuery),readTime:hc(s.readTime)};var s})}saveNamedQuery(e,t){return rL(e).put({name:(i=t).name,readTime:dc(nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function nL(n){return Ar(n,"bundles")}function rL(n){return Ar(n,"namedQueries")}class cv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new cv(e,t.uid||"")}getOverlay(e,t){return Jp(e).get(eL(this.userId,t)).next(r=>r?c0(this.serializer,r):null)}getOverlays(e,t){const r=yo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new e0(t,o);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ei(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Jp(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(s)}getOverlaysForCollection(e,t,r){const i=yo(),s=ei(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Jp(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=c0(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=yo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,f)=>{const m=c0(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Jp(e).put(function(i,s,o){const[a,u,c]=eL(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Jp(n){return Ar(n,"documentOverlays")}class pc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Np(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Yo(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Jo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?z1(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ne()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Se.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function sQ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function iL(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=sQ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}pc.bt=new pc;class oQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=iL(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=iL(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aQ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class uQ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Xp{constructor(){this.Gt=new oQ,this.zt=new aQ(this.Gt),this.jt=new uQ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class gc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,r)}}function eu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sL(n.arrayValue,e.arrayValue),0!==t?t:(t=sL(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function sL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oL{constructor(e){this.Yt=new tn((t,r)=>wn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if($e(e.collectionGroup===this.collectionId),this.en)return!1;const t=Lb(e);if(void 0!==t&&!this.nn(t))return!1;const r=ic(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new tn(wn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new sc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new sc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new sc(r.field,"asc"===r.dir?0:1)));return new Td(Td.UNKNOWN_ID,this.collectionId,t,bd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aL(n){var e,t;if($e(n instanceof Pt||n instanceof Jt),n instanceof Pt){if(n instanceof tF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Pt.create(n.field,"==",s)))||[];return Jt.create(i,"or")}return n}const r=n.filters.map(i=>aL(i));return Jt.create(r,n.op)}function cQ(n){if(0===n.getFilters().length)return[];const e=h0(aL(n));return $e(uL(e)),l0(e)||d0(e)?[e]:e.getFilters()}function l0(n){return n instanceof Pt}function d0(n){return n instanceof Jt&&qb(n)}function uL(n){return l0(n)||d0(n)||function(t){if(t instanceof Jt&&Hb(t)){for(const r of t.getFilters())if(!l0(r)&&!d0(r))return!1;return!0}return!1}(n)}function h0(n){if($e(n instanceof Pt||n instanceof Jt),n instanceof Pt)return n;if(1===n.filters.length)return h0(n.filters[0]);const e=n.filters.map(r=>h0(r));let t=Jt.create(e,n.op);return t=lv(t),uL(t)?t:($e(t instanceof Jt),$e(Cd(t)),$e(t.filters.length>1),t.filters.reduce((r,i)=>f0(r,i)))}function f0(n,e){let t;return $e(n instanceof Pt||n instanceof Jt),$e(e instanceof Pt||e instanceof Jt),t=n instanceof Pt?e instanceof Pt?Jt.create([n,e],"and"):cL(n,e):e instanceof Pt?cL(e,n):function(i,s){if($e(i.filters.length>0&&s.filters.length>0),Cd(i)&&Cd(s))return J1(i,s.getFilters());const o=Hb(i)?i:s,a=Hb(i)?s:i,u=o.filters.map(c=>f0(c,a));return Jt.create(u,"or")}(n,e),lv(t)}function cL(n,e){if(Cd(e))return J1(e,n.getFilters());{const t=e.filters.map(r=>f0(n,r));return Jt.create(t,"or")}}function lv(n){if($e(n instanceof Pt||n instanceof Jt),n instanceof Pt)return n;const e=n.getFilters();if(1===e.length)return lv(e[0]);if(Q1(n))return n;const t=e.map(i=>lv(i)),r=[];return t.forEach(i=>{i instanceof Pt?r.push(i):i instanceof Jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jt.create(r,n.op)}class lQ{constructor(){this._n=new p0}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Zi.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class p0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(Mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(Mt.comparator)).toArray()}}const dv=new Uint8Array(0);class dQ{constructor(e,t){this.databaseId=t,this.an=new p0,this.un=new ea(r=>uc(r),(r,i)=>Up(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ei(i)};return lL(e).put(s)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[E1(t),""],!1,!0);return lL(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(mo(o.parent))}return r})}addFieldIndex(e,t){const r=eg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Vd(e);return s.next(a=>{o.put(tL(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=eg(e),i=Vd(e),s=Ld(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=eg(e),r=Ld(e),i=Vd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new oL(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ld(e);let i=!0;const s=new Map;return Y.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ht();const a=[];return Y.forEach(s,(u,c)=>{var G;ye("IndexedDbIndexManager",`Using index ${G=u,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${uc(t)}`);const f=function(G,ne){const Ee=Lb(ne);if(void 0===Ee)return null;for(const Me of ev(G,Ee.fieldPath))switch(Me.op){case"array-contains-any":return Me.value.arrayValue.values||[];case"array-contains":return[Me.value]}return null}(c,u),m=function(G,ne){const Ee=new Map;for(const Me of ic(ne))for(const j of ev(G,Me.fieldPath))switch(j.op){case"==":case"in":Ee.set(Me.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return Ee.set(Me.fieldPath.canonicalString(),j.value),Array.from(Ee.values())}return null}(c,u),y=function(G,ne){const Ee=[];let Me=!0;for(const j of ic(ne)){const x=0===j.kind?nF(G,j.fieldPath,G.startAt):rF(G,j.fieldPath,G.startAt);Ee.push(x.value),Me&&(Me=x.inclusive)}return new Ja(Ee,Me)}(c,u),I=function(G,ne){const Ee=[];let Me=!0;for(const j of ic(ne)){const x=0===j.kind?rF(G,j.fieldPath,G.endAt):nF(G,j.fieldPath,G.endAt);Ee.push(x.value),Me&&(Me=x.inclusive)}return new Ja(Ee,Me)}(c,u),T=this.hn(u,c,y),R=this.hn(u,c,I),P=this.Pn(u,c,m),H=this.In(u.indexId,f,T,y.inclusive,R,I.inclusive,P);return Y.forEach(H,V=>r.G(V,t.limit).next(G=>{G.forEach(ne=>{const Ee=Se.fromSegments(ne.documentKey);o.has(Ee)||(o=o.add(Ee),a.push(Ee))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:cQ(Jt.create(e.filters,"and")).map(r=>Gb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),c=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const y=t?this.Tn(t[m/c]):dv,I=this.En(e,y,r[m%c],i),T=this.dn(e,y,s[m%c],o),R=a.map(P=>this.En(e,y,P,!0));f.push(...this.createRange(I,T,R))}return f}En(e,t,r,i){const s=new gc(e,Se.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new gc(e,Se.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new oL(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let c=new tn(wn.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:c=c.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Xp;for(const i of ic(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);pc.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Xp;return pc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Xp;return pc.bt.Pt(ac(this.databaseId,t),r.Ht(function(s){const o=ic(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Xp);let s=0;for(const o of ic(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&Fp(a))i=this.mn(i,o,a);else{const c=u.Ht(o.kind);pc.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Xp;u.seed(a.Wt()),pc.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Pt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eg(e),i=Vd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Y.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,m){const y=m?new bd(m.sequenceNumber,new Zi(hc(m.readTime),new Se(mo(m.documentKey)),m.largestBatchId)):bd.empty(),I=f.fields.map(([T,R])=>new sc(wn.fromServerFormat(T),R));return new Td(f.indexId,f.collectionGroup,I,y)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:it(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=eg(e),s=Vd(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,u=>s.put(tL(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Y.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,u=>this.pn(e,i,u).next(c=>{const f=this.yn(s,u);return c.isEqual(f)?Y.resolve():this.wn(e,s,u,c,f)}))))})}Sn(e,t,r,i){return Ld(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Ld(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Ld(e);let s=new tn(eu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new gc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new tn(eu);const i=this.An(t,e);if(null==i)return r;const s=Lb(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Fp(o))for(const a of o.arrayValue.values||[])r=r.add(new gc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new gc(t.indexId,e.key,dv,i));return r}wn(e,t,r,i,s){ye("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,c,f,m,y){const I=u.getIterator(),T=c.getIterator();let R=Dd(I),P=Dd(T);for(;R||P;){let H=!1,V=!1;if(R&&P){const G=f(R,P);G<0?V=!0:G>0&&(H=!0)}else null!=R?V=!0:H=!0;H?(m(P),P=Dd(T)):V?(y(R),R=Dd(I)):(R=Dd(I),P=Dd(T))}}(i,s,eu,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Y.waitFor(o)}gn(e){let t=1;return Vd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>eu(o,a)).filter((o,a,u)=>!a||0!==eu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=eu(o,e),u=eu(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,dv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,dv,[]]))}return s}Dn(e,t){return eu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dL)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ne())).next(dL)}}function lL(n){return Ar(n,"collectionParents")}function Ld(n){return Ar(n,"indexEntries")}function eg(n){return Ar(n,"indexConfiguration")}function Vd(n){return Ar(n,"indexState")}function dL(n){$e(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Vb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zi(e.readTime,e.documentKey,t)}const hL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(u.next(()=>{$e(1===a)}));const c=[];for(const f of t.mutations){const m=M1(e,f.key.path,t.batchId);s.push(i.delete(m)),c.push(f.key)}return Y.waitFor(s).next(()=>c)}function hv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ne();e=n.noDocument}return JSON.stringify(e).length}ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(41943040,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);class fv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){$e(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new fv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Ud(e),o=tu(e);return o.add({}).next(a=>{$e("number"==typeof a);const u=new Jb(a,t,r,i),c=function(I,T,R){const P=R.baseMutations.map(V=>Qp(I.ct,V)),H=R.mutations.map(V=>Qp(I.ct,V));return{userId:T,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:H}}(this.serializer,this.userId,u),f=[];let m=new tn((y,I)=>it(y.canonicalString(),I.canonicalString()));for(const y of i){const I=M1(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(c)),f.push(s.put(I,eZ))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),Y.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return tu(e).get(t).next(r=>r?($e(r.userId===this.userId),fc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return tu(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&($e(a.batchId>=r),s=fc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).U("userMutationsIndex",t).next(r=>r.map(i=>fc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ud(e).J({range:i},(o,a,u)=>{const[c,f,m]=o,y=mo(f);if(c===this.userId&&t.path.isEqual(y))return tu(e).get(m).next(I=>{if(!I)throw Ne();$e(I.userId===this.userId),s.push(fc(this.serializer,I))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(it);const i=[];return t.forEach(s=>{const o=Wy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ud(e).J({range:a},(c,f,m)=>{const[y,I,T]=c,R=mo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(T):m.done()});i.push(u)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Wy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new tn(it);return Ud(e).J({range:o},(u,c,f)=>{const[m,y,I]=u,T=mo(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(tu(e).get(s).next(o=>{if(null===o)throw Ne();$e(o.userId===this.userId),r.push(fc(this.serializer,o))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fL(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ud(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=mo(s[1]);i.push(u)}else a.done()}).next(()=>{$e(0===i.length)})})}containsKey(e,t){return pL(e,this.userId,t)}xn(e){return gL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pL(n,e,t){const r=Wy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ud(n).J({range:s,H:!0},(a,u,c)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function tu(n){return Ar(n,"mutations")}function Ud(n){return Ar(n,"documentMutations")}function gL(n){return Ar(n,"mutationQueues")}class mc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new mc(0)}static Ln(){return new mc(-1)}}class hQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new mc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>He.fromTimestamp(new Mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>($e(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Bd(e).J((o,a)=>{const u=Yp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>Y.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Bd(e).J((r,i)=>{const s=Yp(i);t(s)})}Bn(e){return mL(e).get("targetGlobalKey").next(t=>($e(null!==t),t))}kn(e,t){return mL(e).put("targetGlobalKey",t)}qn(e,t){return Bd(e).put(XF(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Bd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=Yp(a);Up(t,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=nu(e);return t.forEach(o=>{const a=ei(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=nu(e);return Y.forEach(t,s=>{const o=ei(s.path);return Y.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=nu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=nu(e);let s=ht();return i.J({range:r,H:!0},(o,a,u)=>{const c=mo(o[1]),f=new Se(c);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ei(t.path),i=IDBKeyRange.bound([r],[E1(r)],!1,!0);let s=0;return nu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Bd(e).get(t).next(r=>r?Yp(r):null)}}function Bd(n){return Ar(n,"targets")}function mL(n){return Ar(n,"targetGlobal")}function nu(n){return Ar(n,"targetDocuments")}function _L([n,e],[t,r]){const i=it(n,t);return 0===i?it(e,r):i}class fQ{constructor(e){this.Kn=e,this.buffer=new tn(_L),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_L(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Wa(r)?ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qa(r)}yield t.zn(3e5)}))}}class pQ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(Qi.oe);const r=new fQ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(hL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hL):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Id()<=po.in.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(c-u)+`ms\nTotal Duration: ${c-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class gQ{constructor(e,t){this.db=e,this.garbageCollector=function vL(n,e){return new pQ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return pv(e,r)}removeReference(e,t,r){return pv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pv(e,t)}er(e,t){return function(i,s){let o=!1;return gL(i).Y(a=>pL(i,a,s).next(u=>(u&&(o=!0),Y.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,He.min()),nu(e).delete([0,ei(o.path)])))});i.push(u)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pv(e,t)}Xn(e,t){const r=nu(e);let i,s=Qi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{0===o?(s!==Qi.oe&&t(new Se(mo(i)),s),s=c,i=u):s=Qi.oe}).next(()=>{s!==Qi.oe&&t(new Se(mo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pv(n,e){return nu(n).put((i=n.currentSequenceNumber,{targetId:0,path:ei(e.path),sequenceNumber:i}));var i}class EL{constructor(){this.changes=new ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],uv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return _c(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return _c(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,s)=>{r={document:this.nr(t,s),size:hv(s)}}).next(()=>r)}getEntries(e,t){let r=Ui();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Ui(),i=new pn(Se.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,hv(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new tn(bL);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(tg(i.first()),tg(i.last())),o=i.getIterator();let a=o.getNext();return _c(e).J({index:"documentKeyIndex",range:s},(u,c,f)=>{const m=Se.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&bL(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?f.$(tg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),uv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let f=Ui();for(const m of c){const y=this.nr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(jp(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Ui();const o=TL(t,r),a=TL(t,Zi.max());return _c(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,f)=>{const m=this.nr(Se.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new _Q(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wL(e).get("remoteDocumentGlobalKey").next(t=>($e(!!t),t))}tr(e,t){return wL(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function rQ(n,e){let t;if(e.document)t=HF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=hc(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne();{const r=Se.fromSegments(e.unknownDocument.path),i=hc(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Mn(i[0],i[1]);return He.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(He.min()))return r}return Tn.newInvalidDocument(e)}}function IL(n){return new mQ(n)}class _Q extends EL{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ea(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new tn((s,o)=>it(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=JF(this.ar.serializer,o);i=i.add(s.path.popLast());const c=hv(u);r+=c-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=JF(this.ar.serializer,o.convertToNoDocument(He.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wL(n){return Ar(n,"remoteDocumentGlobal")}function _c(n){return Ar(n,"remoteDocumentsV14")}function tg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TL(n,e){const t=e.documentKey.path.toArray();return[n,uv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=it(t[s],r[s]),i)return i;return i=it(t.length,r.length),i||(i=it(t[t.length-2],r[r.length-2]),i||it(t[t.length-1],r[r.length-1]))}class yQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&qp(r.mutation,i,Vi.empty(),Mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ht()){const i=yo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$p();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ui();const o=zp(),a=zp();return t.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(void 0===f||f.mutation instanceof ta)?s=s.insert(c.key,c):void 0!==f?(o.set(c.key,f.mutation.getFieldMask()),qp(f.mutation,c,f.mutation.getFieldMask(),Mn.now())):o.set(c.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),t.forEach((c,f)=>{var m;return a.set(c,new yQ(f,null!==(m=o.get(c))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=zp();let i=new pn((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let f=r.get(u)||Vi.empty();f=a.applyToLocalView(c,f),r.set(u,f);const m=(i.get(a.batchId)||ht()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,f=u.value,m=fF();f.forEach(y=>{if(!s.has(y)){const I=wF(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Se.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Kb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(yo());let a=-1,u=s;return o.next(c=>Y.forEach(c,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ht())).next(f=>({batchId:a,changes:hF(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=$p();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=$p();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,u=>{const c=(m=t,y=u.child(s),new Xo(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();null===o.get(f)&&(o=o.insert(f,Tn.newInvalidDocument(f)))});let a=$p();return o.forEach((u,c)=>{const f=s.get(u);void 0!==f&&qp(f.mutation,c,Vi.empty(),Mn.now()),jp(t,c)&&(a=a.insert(u,c))}),a})}}class vQ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:nr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:u0(i.bundledQuery),readTime:nr(i.readTime)}),Y.resolve();var i}}class EQ{constructor(){this.overlays=new pn(Se.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=yo(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pn((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let f=s.get(c.largestBatchId);null===f&&(f=yo(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=yo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new e0(t,r));let s=this.hr.get(t);void 0===s&&(s=ht(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class g0{constructor(){this.Pr=new tn(Cr.Ir),this.Tr=new tn(Cr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Cr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Se(new Mt([])),r=new Cr(t,e),i=new Cr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Se(new Mt([])),r=new Cr(t,e),i=new Cr(t,e+1);let s=ht();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Cr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Se.comparator(e.key,t.key)||it(e.pr,t.pr)}static Er(e,t){return it(e.pr,t.pr)||Se.comparator(e.key,t.key)}}class IQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new tn(Cr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new Jb(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Cr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),i=new Cr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(it);return t.forEach(i=>{const s=new Cr(i,0),o=new Cr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new Cr(new Se(s),0);let a=new tn(it);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$e(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const s=new Cr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Cr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wQ{constructor(e){this.vr=e,this.docs=new pn(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ui();const o=t.path,a=new Se(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Vb(w1(f),r)<=0||(i.has(f.key)||jp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ne()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TQ(this)}getSize(e){return Y.resolve(this.size)}}class TQ extends EL{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class bQ{constructor(e){this.persistence=e,this.Mr=new ea(t=>uc(t),Up),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.Or=0,this.Nr=new g0,this.targetCount=0,this.Lr=mc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class m0{constructor(e,t){this.Br={},this.overlays={},this.kr=new Qi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bQ(this),this.indexManager=new lQ,this.remoteDocumentCache=new wQ(r=>this.referenceDelegate.Kr(r)),this.serializer=new YF(t),this.$r=new vQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new IQ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const i=new DQ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class DQ extends b1{constructor(e){super(),this.currentSequenceNumber=e}}class gv{constructor(e){this.persistence=e,this.zr=new g0,this.jr=null}static Hr(e){return new gv(e)}get Jr(){if(this.jr)return this.jr;throw Ne()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Se.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,He.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class AQ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new qy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R1,{unique:!0}),u.createObjectStore("documentMutations"),AL(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),AL(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:He.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R1,{unique:!0});const m=c.store("mutations"),y=f.map(I=>m.put(I));return Y.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const c=u.createObjectStore("documentOverlays",{keyPath:hZ});c.createIndex("collectionPathOverlayIndex",fZ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",pZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:tZ});c.createIndex("documentKeyIndex",nZ),c.createIndex("collectionGroupIndex",rZ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:uZ}).createIndex("sequenceNumberIndex",cZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:lZ}).createIndex("documentKeyIndex",dZ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=hv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Y.forEach(a,u=>{$e(u.userId===s.userId);const c=fc(this.serializer,u);return fL(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Mt(o),c=[0,ei(u)];s.push(t.get(c).next(f=>f?Y.resolve():t.put({targetId:0,path:ei(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:aZ});const r=t.store("collectionParents"),i=new p0,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:ei(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Mt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],c)=>{const f=mo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Yp(i),o=XF(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Se(Mt.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):Ne()).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(c))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=IL(this.serializer),s=new m0(gv.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var c;let f=null!==(c=a.get(u.userId))&&void 0!==c?c:ht();fc(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),Y.forEach(a,(u,c)=>{const f=new Dr(c),m=cv.lt(this.serializer,f),y=s.getIndexManager(f),I=fv.lt(f,this.serializer,y,s.referenceDelegate);return new DL(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new jb(t,Qi.oe),u).next()})})}}function AL(n){n.createObjectStore("targetDocuments",{keyPath:sZ}).createIndex("documentTargetsIndex",oZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iZ,{unique:!0}),n.createObjectStore("targetGlobal")}const _0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class y0{constructor(e,t,r,i,s,o,a,u,c,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!y0.D())throw new me(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gQ(this,i),this.Ti=t+"main",this.serializer=new YF(u),this.Ei=new go(this.Ti,this.ui,new AQ(this.serializer)),this.Qr=new hQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=IL(this.serializer),this.$r=new iQ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(te.FAILED_PRECONDITION,_0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Qi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_v(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Wa(e))return ye("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ng(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return _v(e).delete(this.clientId)}Di(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ar(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return Y.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):ng(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new me(te.FAILED_PRECONDITION,_0);return!1}}return!(!this.networkEnabled||!this.inForeground)||_v(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ye("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jb(t,Qi.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>_v(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return fv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ye("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(u=this.ui)?mZ:15===u?O1:14===u?N1:13===u?x1:12===u?gZ:11===u?P1:void Ne();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new jb(a,this.kr?this.kr.next():Qi.oe),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new me(te.FAILED_PRECONDITION,T1);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return ng(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(te.FAILED_PRECONDITION,_0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ng(e).put("owner",t)}static D(){return go.D()}yi(e){const t=ng(e);return t.get("owner").next(r=>this.Si(r)?(ye("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,lt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ye("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ng(n){return Ar(n,"owner")}function _v(n){return Ar(n,"clientMetadata")}function v0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class E0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ht(),i=ht();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E0(e,t.fromCache,r,i)}}class CQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CL{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,lt.G6)()?8:D1((0,lt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new CQ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Id()<=po.in.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Md(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Id()<=po.in.DEBUG&&ye("QueryEngine","Query:",Md(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Id()<=po.in.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Md(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):Y.resolve())}ji(e,t){if(sF(t))return Y.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tv(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ht(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(t,a);return this.Xi(t,c,o,u.readTime)?this.ji(e,tv(t,null,"F")):this.es(e,c,t,u)}))})))}Hi(e,t,r,i){return sF(t)||i.isEqual(He.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Y.resolve(null):(Id()<=po.in.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Md(t)),this.es(e,o,t,I1(i,-1)).next(a=>a))})}Zi(e,t){let r=new tn(lF(e));return t.forEach((i,s)=>{jp(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Id()<=po.in.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Md(t)),this.zi.getDocumentsMatchingQuery(e,t,Zi.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class SQ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new pn(it),this.rs=new ea(s=>uc(s),Up),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DL(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function SL(n,e,t,r){return new SQ(n,e,t,r)}function RL(n,e){return I0.apply(this,arguments)}function I0(){return(I0=(0,ae.Z)(function*(n,e){const t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ht();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function ML(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function PL(n,e,t){let r=ht(),i=ht();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ui();return t.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(He.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ye("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function PQ(n,e){const t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jd(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new na(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function $d(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,ae.Z)(function*(n,e,t){const r=Te(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Wa(o))throw o;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function yv(n,e,t){const r=Te(n);let i=He.min(),s=ht();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=Te(u),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(c,f)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:He.min(),t?s:ht())).next(a=>(OL(r,cF(e),a),{documents:a,hs:s})))}function xL(n,e){const t=Te(n),r=Te(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function NL(n,e){const t=Te(n),r=t.ss.get(e)||He.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,I1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OL(t,e,i),i))}function OL(n,e,t){let r=n.ss.get(e)||He.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function T0(){return(T0=(0,ae.Z)(function*(n,e,t,r){const i=Te(n);let s=ht(),o=Ui();for(const c of t){const f=e.Ps(c.metadata.name);c.document&&(s=s.add(f));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield jd(i,(f=r,ti(Sd(Mt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>PL(c,a,o).next(f=>(a.apply(c),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function NQ(n,e){return b0.apply(this,arguments)}function b0(){return(b0=(0,ae.Z)(function*(n,e,t=ht()){const r=yield jd(n,ti(u0(e.bundledQuery))),i=Te(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=nr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Ir.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function kL(n,e){return`firestore_clients_${n}_${e}`}function FL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function D0(n,e){return`firestore_targets_${n}_${e}`}class vv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new me(i.error.code,i.error.message))),o?new vv(e,t,i.state,s):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new me(r.error.code,r.error.message))),s?new rg(e,r.state,i):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ev{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Qb();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=C1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Ev(e,s):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class A0{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new A0(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class C0{constructor(){this.activeTargetIds=Qb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S0{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new pn(it),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=kL(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new C0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(kL(e.persistenceKey,i));if(s){const o=Ev.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(D0(this.persistenceKey,e));if(r){const i=rg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(D0(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ye("SharedClientState","READ",e,t),t}setItem(e,t){ye("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ye("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ye("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Qi.oe;if(null!=o)try{const u=JSON.parse(o);$e("number"==typeof u),a=u}catch(u){tr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Qi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new vv(this.currentUser,e,t,r),s=FL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=FL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=D0(this.persistenceKey,e),s=new rg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Ev.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return vv.Es(new Dr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return rg.Es(i,t)}xs(e){return A0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ye("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Qb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LL{constructor(){this.no=new C0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new C0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OQ{io(e){}shutdown(){}}class VL{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Iv=null;function R0(){return null===Iv?Iv=268435456+Math.round(2147483648*Math.random()):Iv++,"0x"+Iv.toString(16)}const kQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FQ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ri="WebChannelConnection";class LQ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=R0(),u=this.vo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(t,u,c,i).then(f=>(ye("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Li("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ed,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${kQ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=R0();return new Promise((o,a)=>{const u=new l1;u.setWithCredentials(!0),u.listenOnce(h1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hy.NO_ERROR:const f=u.getResponseJson();ye(ri,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Hy.TIMEOUT:ye(ri,`RPC '${e}' ${s} timed out`),a(new me(te.DEADLINE_EXCEEDED,"Request time out"));break;case Hy.HTTP_ERROR:const m=u.getStatus();if(ye(ri,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(H)>=0?H:te.UNKNOWN}(I.status);a(new me(T,I.message))}else a(new me(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new me(te.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ye(ri,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ye(ri,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",c,r,15)})}Oo(e,t,r){const i=R0(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=g1(),a=p1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new d1({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ye(ri,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let y=!1,I=!1;const T=new FQ({lo:P=>{I?ye(ri,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(ye(ri,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ye(ri,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},ho:()=>m.close()}),R=(P,H,V)=>{P.listen(H,G=>{try{V(G)}catch(ne){setTimeout(()=>{throw ne},0)}})};return R(m,Rp.EventType.OPEN,()=>{I||(ye(ri,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),R(m,Rp.EventType.CLOSE,()=>{I||(I=!0,ye(ri,`RPC '${e}' stream ${i} transport closed`),T.po())}),R(m,Rp.EventType.ERROR,P=>{I||(I=!0,Li(ri,`RPC '${e}' stream ${i} transport errored:`,P),T.po(new me(te.UNAVAILABLE,"The operation could not be completed")))}),R(m,Rp.EventType.MESSAGE,P=>{var H;if(!I){const V=P.data[0];$e(!!V);const ne=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(ne){ye(ri,`RPC '${e}' stream ${i} received error:`,ne);const Ee=ne.status;let Me=function(L){const z=dr[L];if(void 0!==z)return RF(z)}(Ee),j=ne.message;void 0===Me&&(Me=te.INTERNAL,j="Unknown error status: "+Ee+" with message "+ne.message),I=!0,T.po(new me(Me,j)),m.close()}else ye(ri,`RPC '${e}' stream ${i} received:`,V),T.yo(V)}}),R(a,f1.STAT_EVENT,P=>{P.stat===kb.PROXY?ye(ri,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===kb.NOPROXY&&ye(ri,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function UL(){return typeof window<"u"?window:null}function wv(){return typeof document<"u"?document:null}function ig(n){return new GZ(n,!0)}class M0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class BL{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new M0(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ae.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ae.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===te.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new me(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ae.Z)(function*(){e.state=0,e.start()}))}c_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VQ extends BL{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function QZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ne(),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?($e(void 0===f||"string"==typeof f),Ir.fromBase64String(f||"")):($e(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Ir.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const f=void 0===c.code?te.UNKNOWN:RF(c.code);return new me(f,c.message||"")}(o);t=new OF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=vo(n,r.document.name),s=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):He.min(),a=new $r({mapValue:{fields:r.document.fields}}),u=Tn.newFoundDocument(i,s,o,a);t=new ov(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=vo(n,r.document),s=r.readTime?nr(r.readTime):He.min(),o=Tn.newNoDocument(i,s);t=new ov([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=vo(n,r.document);t=new ov([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ne();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new jZ(i,s);t=new NF(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return He.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?nr(o.readTime):He.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=o0(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Xy(u)?{documents:qF(s,u)}:{query:av(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VF(s,o.resumeToken);const c=n0(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(He.min())>0){a.readTime=kd(s,o.snapshotVersion.toTimestamp());const c=n0(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function JZ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=o0(this.serializer),t.removeTarget=e,this.i_(t)}}class UQ extends BL{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function YZ(n,e){return n&&n.length>0?($e(void 0!==e),n.map(t=>function(i,s){let o=nr(i.updateTime?i.updateTime:s);return o.isEqual(He.min())&&(o=nr(s)),new VZ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.A_(r,t)}return $e(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=o0(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qp(this.serializer,r))};this.i_(t)}}class BQ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,s0(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(te.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,s0(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(te.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class jQ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(tr(t),this.y_=!1):ye("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class $Q{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ae.Z)(function*(){var u;ru(o)&&(ye("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ae.Z)(function*(f){const m=Te(f);m.M_.add(4),yield zd(m),m.N_.set("Unknown"),m.M_.delete(4),yield sg(m)}),function c(f){return u.apply(this,arguments)})(o))}))}),this.N_=new jQ(r,i)}}function sg(n){return P0.apply(this,arguments)}function P0(){return(P0=(0,ae.Z)(function*(n){if(ru(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function zd(n){return x0.apply(this,arguments)}function x0(){return(x0=(0,ae.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Tv(n,e){const t=Te(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),k0(t)?O0(t):Wd(t).Xo()&&N0(t,e))}function Hd(n,e){const t=Te(n),r=Wd(t);t.F_.delete(e),r.Xo()&&jL(t,e),0===t.F_.size&&(r.Xo()?r.n_():ru(t)&&t.N_.set("Unknown"))}function N0(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wd(n).P_(e)}function jL(n,e){n.L_.xe(e),Wd(n).I_(e)}function O0(n){n.L_=new zZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Wd(n).start(),n.N_.w_()}function k0(n){return ru(n)&&!Wd(n).Zo()&&n.F_.size>0}function ru(n){return 0===Te(n).M_.size}function $L(n){n.L_=void 0}function zQ(n){return F0.apply(this,arguments)}function F0(){return(F0=(0,ae.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function HQ(n){return L0.apply(this,arguments)}function L0(){return(L0=(0,ae.Z)(function*(n){n.F_.forEach((e,t)=>{N0(n,e)})})).apply(this,arguments)}function qQ(n,e){return V0.apply(this,arguments)}function V0(){return(V0=(0,ae.Z)(function*(n,e){$L(n),k0(n)?(n.N_.D_(e),O0(n)):n.N_.set("Unknown")})).apply(this,arguments)}function WQ(n,e,t){return U0.apply(this,arguments)}function U0(){return U0=(0,ae.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof OF&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.F_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.F_.delete(u),s.L_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bv(n,r)}else if(e instanceof ov?n.L_.Ke(e):e instanceof NF?n.L_.He(e):n.L_.We(e),!t.isEqual(He.min()))try{const r=yield ML(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(Ir.EMPTY_BYTE_STRING,f.snapshotVersion)),jL(s,u);const m=new na(f.target,u,c,f.sequenceNumber);N0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),yield bv(n,r)}var r}),U0.apply(this,arguments)}function bv(n,e,t){return B0.apply(this,arguments)}function B0(){return(B0=(0,ae.Z)(function*(n,e,t){if(!Wa(e))throw e;n.M_.add(1),yield zd(n),n.N_.set("Offline"),t||(t=()=>ML(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ye("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield sg(n)}))})).apply(this,arguments)}function zL(n,e){return e().catch(t=>bv(n,t,e))}function qd(n){return j0.apply(this,arguments)}function j0(){return(j0=(0,ae.Z)(function*(n){const e=Te(n),t=iu(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;GQ(e);)try{const i=yield PQ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,KQ(e,i)}catch(i){yield bv(e,i)}HL(e)&&qL(e)})).apply(this,arguments)}function GQ(n){return ru(n)&&n.v_.length<10}function KQ(n,e){n.v_.push(e);const t=iu(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function HL(n){return ru(n)&&!iu(n).Zo()&&n.v_.length>0}function qL(n){iu(n).start()}function ZQ(n){return $0.apply(this,arguments)}function $0(){return($0=(0,ae.Z)(function*(n){iu(n).V_()})).apply(this,arguments)}function QQ(n){return z0.apply(this,arguments)}function z0(){return(z0=(0,ae.Z)(function*(n){const e=iu(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function YQ(n,e,t){return H0.apply(this,arguments)}function H0(){return(H0=(0,ae.Z)(function*(n,e,t){const r=n.v_.shift(),i=Xb.from(r,e,t);yield zL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qd(n)})).apply(this,arguments)}function JQ(n,e){return q0.apply(this,arguments)}function q0(){return q0=(0,ae.Z)(function*(n,e){var t;e&&iu(n).E_&&(yield(t=(0,ae.Z)(function*(i,s){if(SF(a=s.code)&&a!==te.ABORTED){const o=i.v_.shift();iu(i).t_(),yield zL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield qd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),HL(n)&&qL(n)}),q0.apply(this,arguments)}function WL(n,e){return W0.apply(this,arguments)}function W0(){return(W0=(0,ae.Z)(function*(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=ru(t);t.M_.add(3),yield zd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield sg(t)})).apply(this,arguments)}function G0(n,e){return K0.apply(this,arguments)}function K0(){return(K0=(0,ae.Z)(function*(n,e){const t=Te(n);e?(t.M_.delete(2),yield sg(t)):e||(t.M_.add(2),yield zd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Wd(n){return n.B_||(n.B_=function(t,r,i){const s=Te(t);return s.f_(),new VQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:zQ.bind(null,n),To:HQ.bind(null,n),Ao:qQ.bind(null,n),h_:WQ.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.B_.t_(),k0(n)?O0(n):n.N_.set("Unknown")):(yield n.B_.stop(),$L(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function iu(n){return n.k_||(n.k_=function(t,r,i){const s=Te(t);return s.f_(),new UQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:ZQ.bind(null,n),Ao:JQ.bind(null,n),R_:QQ.bind(null,n),A_:YQ.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.k_.t_(),yield qd(n)):(yield n.k_.stop(),n.v_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class Z0{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Z0(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new me(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(n,e){if(tr("AsyncQueue",`${e}: ${n}`),Wa(n))return new me(te.UNAVAILABLE,`${e}: ${n}`);throw n}class Kd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=$p(),this.sortedSet=new pn(this.comparator)}static emptySet(e){return new Kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Kd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GL{constructor(){this.q_=new pn(Se.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ne():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zd{constructor(e,t,r,i,s,o,a,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Zd(e,t,Kd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class XQ{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class eY{constructor(){this.queries=new ea(e=>uF(e),Bp),this.onlineState="Unknown",this.z_=new Set}}function Q0(n,e){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,ae.Z)(function*(n,e){const t=Te(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new XQ,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Gd(o,`Initialization of query '${Md(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&eD(t)})).apply(this,arguments)}function J0(n,e){return X0.apply(this,arguments)}function X0(){return(X0=(0,ae.Z)(function*(n,e){const t=Te(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function tY(n,e){const t=Te(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&eD(t)}function nY(n,e,t){const r=Te(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function eD(n){n.z_.forEach(e=>{e.next()})}var tD,KL;(KL=tD||(tD={})).J_="default",KL.Cache="cache";class nD{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==tD.Cache}}class rY{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class ZL{constructor(e){this.serializer=e}Ps(e){return vo(this.serializer,e)}Is(e){return e.metadata.exists?HF(this.serializer,e.document,!1):Tn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return nr(e)}}class iY{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QL(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Mt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new ZL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ht()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function xQ(n,e,t,r){return T0.apply(this,arguments)}(e.localStore,new ZL(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield NQ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function QL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YL{constructor(e){this.key=e}}class JL{constructor(e){this.key=e}}class XL{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ht(),this.mutatedKeys=ht(),this.Ia=lF(e),this.Ta=new Kd(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new GL,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=jp(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;y&&I?y.data.isEqual(I.data)?T!==R&&(r.track({type:3,doc:I}),P=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),P=!0,(u&&this.Ia(I,u)>0||c&&this.Ia(I,c)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),P=!0):y&&!I&&(r.track({type:1,doc:y}),P=!0,(u||c)&&(a=!0)),P&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return R(I)-R(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,0!==o.length||c?{snapshot:new Zd(this.query,e.Ta,s,o,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new GL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ht(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new JL(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new YL(r))}),t}pa(e){this.la=e.hs,this.Pa=ht();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Zd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class sY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oY{constructor(e){this.key=e,this.wa=!1}}class aY{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ea(a=>uF(a),Bp),this.Da=new Map,this.Ca=new Set,this.va=new pn(Se.comparator),this.Fa=new Map,this.Ma=new g0,this.xa={},this.Oa=new Map,this.Na=mc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function uY(n,e){return rD.apply(this,arguments)}function rD(){return(rD=(0,ae.Z)(function*(n,e,t=!0){const r=Dv(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield eV(r,e,t,!0),i})).apply(this,arguments)}function cY(n,e){return iD.apply(this,arguments)}function iD(){return(iD=(0,ae.Z)(function*(n,e){const t=Dv(n);yield eV(t,e,!0,!1)})).apply(this,arguments)}function eV(n,e,t,r){return sD.apply(this,arguments)}function sD(){return(sD=(0,ae.Z)(function*(n,e,t,r){const i=yield jd(n.localStore,ti(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield oD(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Tv(n.remoteStore,i),a})).apply(this,arguments)}function oD(n,e,t,r,i){return aD.apply(this,arguments)}function aD(){return aD=(0,ae.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,ae.Z)(function*(P,H,V,G){let ne=H.view.da(V);ne.Xi&&(ne=yield yv(P.localStore,H.query,!1).then(({documents:x})=>H.view.da(x,ne)));const Ee=G&&G.targetChanges.get(H.targetId),Me=G&&null!=G.targetMismatches.get(H.targetId),j=H.view.applyChanges(ne,P.isPrimaryClient,Ee,Me);return yD(P,H.targetId,j.fa),j.snapshot}),function R(P,H,V,G){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield yv(n.localStore,e,!0),o=new XL(e,s.hs),a=o.da(s.documents),u=Kp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,u);yD(n,t,c.fa);const f=new sY(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}),aD.apply(this,arguments)}function lY(n,e,t){return uD.apply(this,arguments)}function uD(){return(uD=(0,ae.Z)(function*(n,e,t){const r=Te(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Bp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $d(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hd(r.remoteStore,i.targetId),Qd(r,i.targetId)}).catch(qa))):(Qd(r,i.targetId),yield $d(r.localStore,i.targetId,!0))})).apply(this,arguments)}function dY(n,e){return cD.apply(this,arguments)}function cD(){return(cD=(0,ae.Z)(function*(n,e){const t=Te(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hd(t.remoteStore,r.targetId))})).apply(this,arguments)}function lD(){return(lD=(0,ae.Z)(function*(n,e,t){const r=RD(n);try{const i=yield function(o,a){const u=Te(o),c=Mn.now(),f=a.reduce((I,T)=>I.add(T.key),ht());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=Ui(),R=ht();return u.os.getEntries(I,f).next(P=>{T=P,T.forEach((H,V)=>{V.isValidDocument()||(R=R.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,T)).next(P=>{m=P;const H=[];for(const V of a){const G=BZ(V,m.get(V.key).overlayedDocument);null!=G&&H.push(new ta(V.key,G,W1(G.value.mapValue),Pn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,c,H,a)}).next(P=>{y=P;const H=P.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(I,P.batchId,H)})}).then(()=>({batchId:y.batchId,changes:hF(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new pn(it)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,t),yield ra(r,i.changes),yield qd(r.remoteStore)}catch(i){const s=Gd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function tV(n,e){return dD.apply(this,arguments)}function dD(){return(dD=(0,ae.Z)(function*(n,e){const t=Te(n);try{const r=yield function MQ(n,e){const t=Te(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,P,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Ir.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),P=I,H=f,(0===(R=y).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let u=Ui(),c=ht();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(PL(s,o,e.documentUpdates).next(f=>{u=f.cs,c=f.ls})),!r.isEqual(He.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?$e(o.wa):i.removedDocuments.size>0&&($e(o.wa),o.wa=!1))}),yield ra(t,r,e)}catch(r){yield qa(r)}})).apply(this,arguments)}function nV(n,e,t){const r=Te(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Te(o);u.onlineState=a;let c=!1;u.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(c=!0)}),c&&eD(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fY(n,e,t){return hD.apply(this,arguments)}function hD(){return(hD=(0,ae.Z)(function*(n,e,t){const r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new pn(Se.comparator);o=o.insert(s,Tn.newNoDocument(s,He.min()));const a=ht().add(s),u=new Gp(He.min(),new Map,new pn(it),o,a);yield tV(r,u),r.va=r.va.remove(s),r.Fa.delete(e),vD(r)}else yield $d(r.localStore,e,!1).then(()=>Qd(r,e,t)).catch(qa)})).apply(this,arguments)}function pY(n,e){return fD.apply(this,arguments)}function fD(){return(fD=(0,ae.Z)(function*(n,e){const t=Te(n),r=e.batch.batchId;try{const i=yield function RQ(n,e){const t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,f){const m=c.batch,y=m.keys();let I=Y.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(u,T)).next(R=>{const P=c.docVersions.get(T);$e(null!==P),R.version.compareTo(P)<0&&(m.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ht();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);_D(t,r,null),mD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ra(t,i)}catch(i){yield qa(i)}})).apply(this,arguments)}function gY(n,e,t){return pD.apply(this,arguments)}function pD(){return(pD=(0,ae.Z)(function*(n,e,t){const r=Te(n);try{const i=yield function(o,a){const u=Te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,a).next(m=>($e(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);_D(r,e,t),mD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ra(r,i)}catch(i){yield qa(i)}})).apply(this,arguments)}function gD(){return(gD=(0,ae.Z)(function*(n,e){const t=Te(n);ru(t.remoteStore)||ye("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Te(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Gd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function mD(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function _D(n,e,t){const r=Te(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Qd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||rV(n,r)})}function rV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Hd(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),vD(n))}function yD(n,e,t){for(const r of t)r instanceof YL?(n.Ma.addReference(r.key,e),_Y(n,r)):r instanceof JL?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||rV(n,r.key)):Ne()}function _Y(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.Ca.add(r),vD(n))}function vD(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Se(Mt.fromString(e)),r=n.Na.next();n.Fa.set(r,new oY(t)),n.va=n.va.insert(t,r),Tv(n.remoteStore,new na(ti(Sd(t.path)),r,"TargetPurposeLimboResolution",Qi.oe))}}function ra(n,e,t){return ED.apply(this,arguments)}function ED(){return ED=(0,ae.Z)(function*(n,e,t){const r=Te(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c&&!c.fromCache?"current":"not-current"),c){i.push(c);const f=E0.Ki(u.targetId,c);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ae.Z)(function*(c,f){const m=Te(c);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,I=>Y.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>Y.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!Wa(y))throw y;ye("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),P=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,P)}}}),function u(c,f){return a.apply(this,arguments)})(r.localStore,s))}),ED.apply(this,arguments)}function yY(n,e){return ID.apply(this,arguments)}function ID(){return(ID=(0,ae.Z)(function*(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=yield RL(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new me(te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ra(t,r.us)}var s})).apply(this,arguments)}function vY(n,e){const t=Te(n),r=t.Fa.get(e);if(r&&r.wa)return ht().add(r.key);{let i=ht();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function EY(n,e){return wD.apply(this,arguments)}function wD(){return(wD=(0,ae.Z)(function*(n,e){const t=Te(n),r=yield yv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&yD(t,e.targetId,i.fa),i})).apply(this,arguments)}function IY(n,e){return TD.apply(this,arguments)}function TD(){return(TD=(0,ae.Z)(function*(n,e){const t=Te(n);return NL(t.localStore,e).then(r=>ra(t,r))})).apply(this,arguments)}function wY(n,e,t,r){return bD.apply(this,arguments)}function bD(){return(bD=(0,ae.Z)(function*(n,e,t,r){const i=Te(n),s=yield function(a,u){const c=Te(a),f=Te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(y=>y?c.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield qd(i.remoteStore):"acknowledged"===t||"rejected"===t?(_D(i,e,r||null),mD(i,e),u=e,Te(Te(i.localStore).mutationQueue).Mn(u)):Ne(),yield ra(i,s)):ye("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function DD(){return(DD=(0,ae.Z)(function*(n,e){const t=Te(n);if(Dv(t),RD(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield iV(t,r.toArray());t.La=!0,yield G0(t.remoteStore,!0);for(const s of i)Tv(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Qd(t,o),$d(t.localStore,o,!0))),Hd(t.remoteStore,o)}),yield i,yield iV(t,r),function(o){const a=Te(o);a.Fa.forEach((u,c)=>{Hd(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new pn(Se.comparator)}(t),t.La=!1,yield G0(t.remoteStore,!1)}})).apply(this,arguments)}function iV(n,e,t){return AD.apply(this,arguments)}function AD(){return(AD=(0,ae.Z)(function*(n,e,t){const r=Te(n),i=[],s=[];for(const o of e){let a;const u=r.Da.get(o);if(u&&0!==u.length){a=yield jd(r.localStore,ti(u[0]));for(const c of u){const f=r.ba.get(c),m=yield EY(r,f);m.snapshot&&s.push(m.snapshot)}}else{const c=yield xL(r.localStore,o);a=yield jd(r.localStore,c),yield oD(r,sV(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function sV(n){return iF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bY(n){return t=Te(n).localStore,Te(Te(t).persistence).Bi();var t}function DY(n,e,t,r){return CD.apply(this,arguments)}function CD(){return(CD=(0,ae.Z)(function*(n,e,t,r){const i=Te(n);if(i.La)return void ye("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield NL(i.localStore,cF(s[0])),a=Gp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ir.EMPTY_BYTE_STRING);yield ra(i,o,a);break}case"rejected":yield $d(i.localStore,e,!0),Qd(i,e,r);break;default:Ne()}})).apply(this,arguments)}function AY(n,e,t){return SD.apply(this,arguments)}function SD(){return(SD=(0,ae.Z)(function*(n,e,t){const r=Dv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ye("SyncEngine","Adding an already active target "+i);continue}const s=yield xL(r.localStore,i),o=yield jd(r.localStore,s);yield oD(r,sV(s),o.targetId,!1,o.resumeToken),Tv(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield $d(r.localStore,i,!1).then(()=>{Hd(r.remoteStore,i),Qd(r,i)}).catch(qa))}})).apply(this,arguments)}function Dv(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fY.bind(null,e),e.Sa.h_=tY.bind(null,e.eventManager),e.Sa.ka=nY.bind(null,e.eventManager),e}function RD(n){const e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gY.bind(null,e),e}class og{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=ig(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return SL(this.persistence,new CL,e.initialUser,this.serializer)}createPersistence(e){return new m0(gv.Hr,this.serializer)}createSharedClientState(e){return new LL}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MD extends og{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield RD(r.Qa.syncEngine),yield qd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return SL(this.persistence,new CL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new J7(t,this.persistence);return new Y7(e.asyncQueue,r)}createPersistence(e){const t=v0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new y0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UL(),wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LL}}class oV extends MD{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof S0&&(r.sharedClientState.syncEngine={Zs:wY.bind(null,i),Xs:DY.bind(null,i),eo:AY.bind(null,i),Bi:bY.bind(null,i),Ys:IY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ae.Z)(function*(o){yield function TY(n,e){return DD.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=UL();if(!S0.D(t))throw new me(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=v0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new S0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yd{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=yY.bind(null,r.syncEngine),yield G0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eY}createDatastore(e){const t=ig(e.databaseInfo.databaseId),r=new LQ(e.databaseInfo);return new BQ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>nV(this.syncEngine,t,0),a=VL.D()?new VL:new OQ,new $Q(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,c,f){const m=new aY(i,s,o,a,u,c);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;yield(r=(0,ae.Z)(function*(s){const o=Te(s);ye("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield zd(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function aV(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Av{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RY{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ae.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new rY(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ae.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new me(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.Z)(function*(o,a){const u=Te(o),c={documents:a.map(I=>Zp(u.serializer,I))},f=yield u.xo("BatchGetDocuments",u.serializer.databaseId,Mt.emptyPath(),c,a.length),m=new Map;f.forEach(I=>{const T=function ZZ(n,e){return"found"in e?function(r,i){$e(!!i.found);const s=vo(r,i.found.name),o=nr(i.found.updateTime),a=i.found.createTime?nr(i.found.createTime):He.min(),u=new $r({mapValue:{fields:i.found.fields}});return Tn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){$e(!!i.missing),$e(!!i.readTime);const s=vo(r,i.missing),o=nr(i.readTime);return Tn.newNoDocument(s,o)}(n,e):Ne()}(u.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());$e(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Od(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Se.fromPath(i);e.mutations.push(new Yb(s,e.precondition(s)))}),yield(r=(0,ae.Z)(function*(s,o){const a=Te(s),u={writes:o.map(c=>Qp(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,Mt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ne();t=He.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(He.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(He.min()))throw new me(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new M0(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ae.Z)(function*(){const t=new MY(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!xp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!SF(t)}return!1}}class xY{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dr.UNAUTHENTICATED,this.clientId=v1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.Z)(function*(a){ye("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Gd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Cv(n,e){return PD.apply(this,arguments)}function PD(){return PD=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(s){r.isEqual(s)||(yield RL(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),PD.apply(this,arguments)}function xD(n,e){return ND.apply(this,arguments)}function ND(){return(ND=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OD(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WL(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function uV(n){return"FirebaseError"===n.name?n.code===te.FAILED_PRECONDITION||n.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function OD(n){return kD.apply(this,arguments)}function kD(){return(kD=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!uV(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),yield Cv(n,new og)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),yield Cv(n,new og);return n._offlineComponents})).apply(this,arguments)}function Sv(n){return FD.apply(this,arguments)}function FD(){return(FD=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),yield xD(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),yield xD(n,new Yd))),n._onlineComponents})).apply(this,arguments)}function cV(n){return OD(n).then(e=>e.persistence)}function Jd(n){return OD(n).then(e=>e.localStore)}function lV(n){return Sv(n).then(e=>e.remoteStore)}function LD(n){return Sv(n).then(e=>e.syncEngine)}function Xd(n){return VD.apply(this,arguments)}function VD(){return(VD=(0,ae.Z)(function*(n){const e=yield Sv(n),t=e.eventManager;return t.onListen=uY.bind(null,e.syncEngine),t.onUnlisten=lY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dY.bind(null,e.syncEngine),t})).apply(this,arguments)}function hV(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,u,c){const f=new Av({next:y=>{o.enqueueAndForget(()=>J0(s,m));const I=y.docs.has(a);!I&&y.fromCache?c.reject(new me(te.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&u&&"server"===u.source?c.reject(new me(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(y)},error:y=>c.reject(y)}),m=new nD(Sd(a.path),f,{includeMetadataChanges:!0,ra:!0});return Q0(s,m)}(yield Xd(n),n.asyncQueue,e,t,r)})),r.promise}function fV(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,u,c){const f=new Av({next:y=>{o.enqueueAndForget(()=>J0(s,m)),y.fromCache&&"server"===u.source?c.reject(new me(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),m=new nD(a,f,{includeMetadataChanges:!0,ra:!0});return Q0(s,m)}(yield Xd(n),n.asyncQueue,e,t,r)})),r.promise}function pV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const gV=new Map;function UD(n,e,t){if(!t)throw new me(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mV(n,e,t,r){if(!0===e&&!0===r)throw new me(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _V(n){if(!Se.isDocumentKey(n))throw new me(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yV(n){if(Se.isDocumentKey(n))throw new me(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ne()}function vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rv(n);throw new me(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vV(n,e){if(e<=0)throw new me(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new me(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=pV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new me(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new U7;switch(r.type){case"firstParty":return new z7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=gV.get(t);r&&(ye("ComponentProvider","Removing Datastore"),gV.delete(t),r.terminate())}(this),Promise.resolve()}}function IV(n,e,t,r={}){var i;const s=(n=vt(n,ag))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Dr.MOCK_USER;else{a=(0,lt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new me(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Dr(c)}n._authCredentials=new B7(new _1(a,u))}}class zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class Eo extends zr{constructor(e,t,r){super(e,t,Sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Se(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function wV(n,e,...t){if(n=(0,lt.m9)(n),UD("collection","path",e),n instanceof ag){const r=Mt.fromString(e,...t);return yV(r),new Eo(n,null,r)}{if(!(n instanceof bn||n instanceof Eo))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return yV(r),new Eo(n.firestore,null,r)}}function Mv(n,e,...t){if(n=(0,lt.m9)(n),1===arguments.length&&(e=v1.newId()),UD("doc","path",e),n instanceof ag){const r=Mt.fromString(e,...t);return _V(r),new bn(n,null,new Se(r))}{if(!(n instanceof bn||n instanceof Eo))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return _V(r),new bn(n.firestore,n instanceof Eo?n.converter:null,new Se(r))}}function TV(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),(n instanceof bn||n instanceof Eo)&&(e instanceof bn||e instanceof Eo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BD(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),n instanceof zr&&e instanceof zr&&n.firestore===e.firestore&&Bp(n._query,e._query)&&n.converter===e.converter}class qY{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new M0(this,"async_queue_retry"),this.hu=()=>{const t=wv();t&&ye("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=wv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=wv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Er;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ae.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Wa(t))throw t;ye("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,tr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=Z0.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ne()}verifyOperationInProgress(){}du(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function jD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class WY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends ag{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new qY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bV(this),this._firestoreClient.terminate()}}function KY(n,e){const t="object"==typeof n?n:(0,Hn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Hn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,lt.P0)("firestore");s&&IV(i,...s)}return i}function xn(n){return n._firestoreClient||bV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bV(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vZ(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,pV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new xY(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function DV(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Cv(n,t),yield xD(n,e),r.resolve()}catch(i){const s=i;if(!uV(s))throw s;Li("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function AV(n){if(n._initialized||n._terminated)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Io(Ir.fromBase64String(e))}catch(t){throw new me(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Io(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ia{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new me(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yc{constructor(e){this._methodName=e}}class Pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}const iJ=/^__.*__$/;class sJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nd(e,this.data,t,this.fieldTransforms)}}class CV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class xv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new xv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(SV(this.fu)&&iJ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class oJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ig(e)}Fu(e,t,r,i=!1){return new xv({fu:e,methodName:t,vu:r,path:wn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(n){const e=n._freezeSettings(),t=ig(n._databaseId);return new oJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nv(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);KD("Data must be an object, but it was:",o,r);const a=PV(r,o);let u,c;if(s.merge)u=new Vi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=lg(e,m,t);if(!o.contains(y))throw new me(te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);NV(f,y)||f.push(y)}u=new Vi(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new sJ(new $r(a),u,c)}class cg extends yc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cg}}function RV(n,e,t){return new xv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $D extends yc{_toFieldTransform(e){return new Hp(e.path,new Pd)}isEqual(e){return e instanceof $D}}class zD extends yc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=RV(this,e,!0),r=this.Mu.map(s=>Ec(s,t)),i=new cc(r);return new Hp(e.path,i)}isEqual(e){return e instanceof zD&&(0,lt.vZ)(this.Mu,e.Mu)}}class HD extends yc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=RV(this,e,!0),r=this.Mu.map(s=>Ec(s,t)),i=new lc(r);return new Hp(e.path,i)}isEqual(e){return e instanceof HD&&(0,lt.vZ)(this.Mu,e.Mu)}}class qD extends yc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new xd(e.serializer,mF(e.serializer,this.xu));return new Hp(e.path,t)}isEqual(e){return e instanceof qD&&this.xu===e.xu}}function WD(n,e,t,r){const i=n.Fu(1,e,t);KD("Data must be an object, but it was:",i,r);const s=[],o=$r.empty();Ga(r,(u,c)=>{const f=Ov(e,u,t);c=(0,lt.m9)(c);const m=i.Su(f);if(c instanceof cg)s.push(f);else{const y=Ec(c,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Vi(s);return new CV(o,a,i.fieldTransforms)}function GD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[lg(e,r,t)],u=[i];if(s.length%2!=0)throw new me(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(lg(e,s[y])),u.push(s[y+1]);const c=[],f=$r.empty();for(let y=a.length-1;y>=0;--y)if(!NV(c,a[y])){const I=a[y];let T=u[y];T=(0,lt.m9)(T);const R=o.Su(I);if(T instanceof cg)c.push(I);else{const P=Ec(T,R);null!=P&&(c.push(I),f.set(I,P))}}const m=new Vi(c);return new CV(f,m,o.fieldTransforms)}function MV(n,e,t,r=!1){return Ec(t,n.Fu(r?4:3,e))}function Ec(n,e){if(xV(n=(0,lt.m9)(n)))return KD("Unsupported field value:",e,n),PV(n,e);if(n instanceof yc)return function(r,i){if(!SV(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Ec(a,i.bu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,lt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return mF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Mn.fromDate(r);return{timestampValue:kd(i.serializer,s)}}if(r instanceof Mn){const s=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(i.serializer,s)}}if(r instanceof Pv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:VF(i.serializer,r._byteString)};if(r instanceof bn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:r0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Rv(r)}`)}(n,e)}function PV(n,e){const t={};return L1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(n,(r,i)=>{const s=Ec(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function xV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof Pv||n instanceof Io||n instanceof bn||n instanceof yc)}function KD(n,e,t){if(!xV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Rv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function lg(n,e,t){if((e=(0,lt.m9)(e))instanceof ia)return e._internalPath;if("string"==typeof e)return Ov(n,e);throw kv("Field path arguments must be of type string or ",n,!1,void 0,t)}const aJ=new RegExp("[~\\*/\\[\\]]");function Ov(n,e,t){if(e.search(aJ)>=0)throw kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ia(...e.split("."))._internalPath}catch{throw kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new me(te.INVALID_ARGUMENT,a+n+u)}function NV(n,e){return n.some(t=>t.isEqual(e))}class dg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uJ extends dg{data(){return super.data()}}function Fv(n,e){return"string"==typeof e?Ov(n,e):e instanceof ia?e._internalPath:e._delegate._internalPath}function OV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new me(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZD{}class hg extends ZD{}function su(n,e,...t){let r=[];e instanceof ZD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof eh).length,a=s.filter(u=>u instanceof fg).length;if(o>1||o>0&&a>0)throw new me(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fg extends hg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fg(e,t,r)}_apply(e){const t=this._parse(e);return VV(e._query,t),new zr(e.firestore,e.converter,Zb(e._query,t))}_parse(e){const t=vc(e.firestore);return function(s,o,a,u,c,f,m){let y;if(c.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new me(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){LV(m,f);const I=[];for(const T of m)I.push(FV(u,s,T));y={arrayValue:{values:I}}}else y=FV(u,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||LV(m,f),y=MV(a,"where",m,"in"===f||"not-in"===f);return Pt.create(c,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class eh extends ZD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new eh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)VV(o,u),o=Zb(o,u)}(e._query,t),new zr(e.firestore,e.converter,Zb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QD extends hg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vp(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Xo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Lv extends hg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Lv(e,t,r)}_apply(e){return new zr(e.firestore,e.converter,tv(e._query,this._limit,this._limitType))}}class Vv extends hg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vv(e,t,r)}_apply(e){const t=kV(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new Xo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Uv extends hg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Uv(e,t,r)}_apply(e){const t=kV(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new Xo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function kV(n,e,t,r){if(t[0]=(0,lt.m9)(t[0]),t[0]instanceof dg)return function(s,o,a,u,c){if(!u)throw new me(te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Rd(s))if(m.field.isKeyField())f.push(ac(o,u.key));else{const y=u.data.field(m.field);if(Ky(y))throw new me(te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new me(te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new Ja(f,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=vc(n.firestore);return function(o,a,u,c,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new me(te.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const R=f[T];if(y[T].field.isKeyField()){if("string"!=typeof R)throw new me(te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof R}`);if(!Kb(o)&&-1!==R.indexOf("/"))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${R}' contains a slash.`);const P=o.path.child(Mt.fromString(R));if(!Se.isDocumentKey(P))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const H=new Se(P);I.push(ac(a,H))}else{const P=MV(u,c,R);I.push(P)}}return new Ja(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FV(n,e,t){if("string"==typeof(t=(0,lt.m9)(t))){if(""===t)throw new me(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kb(e)&&-1!==t.indexOf("/"))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!Se.isDocumentKey(r))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ac(n,new Se(r))}if(t instanceof bn)return ac(n,t._key);throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rv(t)}.`)}function LV(n,e){if(!Array.isArray(n)||0===n.length)throw new me(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VV(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new me(te.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YD{convertValue(e,t="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ga(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Pv(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const t=Yo(e);return new Mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);$e(QF(r));const i=new Ka(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Bv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _J extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}class Ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends dg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Fv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pg extends sa{data(e={}){return super.data(e)}}class ou{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pg(this._firestore,this._userDataWriter,r.key,r,new Ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ic(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:vJ(a.type),doc:u,oldIndex:c,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}function BV(n,e){return n instanceof sa&&e instanceof sa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ou&&e instanceof ou&&n._firestore===e._firestore&&BD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class au extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}function jV(n,e,t){n=vt(n,bn);const r=vt(n.firestore,nn),i=Bv(n.converter,e,t);return th(r,[Nv(vc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pn.none())])}function $V(n,e,t,...r){n=vt(n,bn);const i=vt(n.firestore,nn),s=vc(i);let o;return o="string"==typeof(e=(0,lt.m9)(e))||e instanceof ia?GD(s,"updateDoc",n._key,e,t,r):WD(s,"updateDoc",n._key,e),th(i,[o.toMutation(n._key,Pn.exists(!0))])}function zV(n,...e){var t,r,i;n=(0,lt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||jD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,c,f;if(n instanceof bn)c=vt(n.firestore,nn),f=Sd(n._key.path),u={next:m=>{e[o]&&e[o](JD(c,n,m))},error:e[o+1],complete:e[o+2]};else{const m=vt(n,zr);c=vt(m.firestore,nn),f=m._query;const y=new au(c);u={next:I=>{e[o]&&e[o](new ou(c,y,m,I))},error:e[o+1],complete:e[o+2]},OV(n._query)}return function(y,I,T,R){const P=new Av(R),H=new nD(I,P,T);return y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Q0(yield Xd(y),H)})),()=>{P.$a(),y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return J0(yield Xd(y),H)}))}}(xn(c),f,a,u)}function th(n,e){return function(r,i){const s=new Er;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function hY(n,e,t){return lD.apply(this,arguments)}(yield LD(r),i,s)})),s.promise}(xn(n),e)}function JD(n,e,t){const r=t.docs.get(e._key),i=new au(n);return new sa(n,i,e._key,r,new Ic(t.hasPendingWrites,t.fromCache),e.converter)}const LJ={maxAttempts:5};class HV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,t,r){this._verifyNotCommitted();const i=uu(e,this._firestore),s=Bv(i.converter,t,r),o=Nv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Pn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=uu(e,this._firestore);let o;return o="string"==typeof(t=(0,lt.m9)(t))||t instanceof ia?GD(this._dataReader,"WriteBatch.update",s._key,t,r,i):WD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uu(e,this._firestore);return this._mutations=this._mutations.concat(new Od(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(n,e){if((n=(0,lt.m9)(n)).firestore!==e)throw new me(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class VJ extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=vc(t)}get(t){const r=uu(t,this._firestore),i=new _J(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ne();const o=s[0];if(o.isFoundDocument())return new dg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new dg(this._firestore,i,r._key,null,r.converter);throw Ne()})}set(t,r,i){const s=uu(t,this._firestore),o=Bv(s.converter,r,i),a=Nv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=uu(t,this._firestore);let a;return a="string"==typeof(r=(0,lt.m9)(r))||r instanceof ia?GD(this._dataReader,"Transaction.update",o._key,r,i,s):WD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=uu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uu(e,this._firestore),r=new au(this._firestore);return super.get(e).then(i=>new sa(this._firestore,r,t._key,i._document,new Ic(!1,!1),t.converter))}}function eA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KV(){if(typeof Uint8Array>"u")throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function ZV(){if(!function _Z(){return typeof atob<"u"}())throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Ed=Hn.SDK_VERSION,(0,Hn._registerComponent)(new $y.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nn(new j7(r.getProvider("auth-internal")),new H7(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new me(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(m1,"4.6.3",e),(0,Hn.registerVersion)(m1,"4.6.3","esm2017")}();class gg{constructor(e){this._delegate=e}static fromBase64String(e){return ZV(),new gg(Io.fromBase64String(e))}static fromUint8Array(e){return KV(),new gg(Io.fromUint8Array(e))}toBase64(){return ZV(),this._delegate.toBase64()}toUint8Array(){return KV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tA(n){return function KJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ZJ{enableIndexedDbPersistence(e,t){return function ZY(n,e){AV(n=vt(n,nn));const t=xn(n);if(t._uninitializedComponentsProvider)throw new me(te.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Yd;return DV(t,i,new MD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function QY(n){AV(n=vt(n,nn));const e=xn(n);if(e._uninitializedComponentsProvider)throw new me(te.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Yd;return DV(e,r,new oV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function YY(n){if(n._initialized&&!n._terminated)throw new me(te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(i){if(!go.D())return Promise.resolve();const s=i+"main";yield go.delete(s)}),function r(i){return t.apply(this,arguments)})(v0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ka||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){IV(this._delegate,e,t,r)}enableNetwork(){return function XY(n){return function NY(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield cV(n),t=yield lV(n);return e.setNetworkEnabled(!0),function(i){const s=Te(i);return s.M_.delete(0),sg(s)}(t)}))}(xn(n=vt(n,nn)))}(this._delegate)}disableNetwork(){return function eJ(n){return function OY(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield cV(n),t=yield lV(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(s){const o=Te(s);o.M_.add(0),yield zd(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(xn(n=vt(n,nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function JY(n){return function(t){const r=new Er;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function mY(n,e){return gD.apply(this,arguments)}(yield LD(t),r)})),r.promise}(xn(n=vt(n,nn)))}(this._delegate)}onSnapshotsInSync(e){return function SJ(n,e){return function VY(n,e){const t=new Av(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Xd(n),s=t,Te(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Xd(n),s=t,void Te(i).z_.delete(s);var i,s}))}}(xn(n=vt(n,nn)),jD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nh(this,wV(this._delegate,e))}catch(t){throw Ei(t,"collection()","Firestore.collection()")}}doc(e){try{return new ys(this,Mv(this._delegate,e))}catch(t){throw Ei(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ii(this,function HY(n,e){if(n=vt(n,ag),UD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(n,null,(r=e,new Xo(Mt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ei(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function UJ(n,e,t){n=vt(n,nn);const r=Object.assign(Object.assign({},LJ),t);return function(s){if(s.maxAttempts<1)throw new me(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Er;return s.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const c=yield function dV(n){return Sv(n).then(e=>e.datastore)}(s);new PY(s.asyncQueue,c,a,o,u).Xa()})),u.promise}(xn(n),i=>e(new VJ(n,i)),r)}(this._delegate,t=>e(new YV(this,t)))}batch(){return xn(this._delegate),new JV(new HV(this._delegate,e=>th(this._delegate,e)))}loadBundle(e){return function tJ(n,e){const t=xn(n=vt(n,nn)),r=new WY;return function UY(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?MF().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return aV(f,m);if(f instanceof ArrayBuffer)return aV(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new RY(f,a);var f}(t,ig(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function CY(n,e,t){const r=Te(n);var i;(i=(0,ae.Z)(function*(o,a,u){try{const c=yield a.getMetadata();if(yield function(T,R){const P=Te(T),H=nr(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,c))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=c).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(QL(c));const f=new iY(c,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&u._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield ra(o,y.ca,void 0),yield function(T,R){const P=Te(T);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.$r.saveBundleMetadata(H,R))}(o.localStore,c),u._completeWith(y.progress),Promise.resolve(y.ua)}catch(c){return Li("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield LD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function nJ(n,e){return function BY(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,i){const s=Te(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Jd(n),e)}))}(xn(n=vt(n,nn)),e).then(t=>t?new zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ii(this,t):null)}}class $v extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gg(new Io(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ys.forKey(t,this.firestore,null)}}class YV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}get(e){const t=Tc(e);return this._delegate.get(t).then(r=>new mg(this._firestore,new sa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tc(e);return r?(eA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}}class JV{constructor(e){this._delegate=e}set(e,t,r){const i=Tc(e);return r?(eA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _g(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new wc(e,new $v(e),t),i.set(t,s)),s}}wc.INSTANCES=new WeakMap;class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}static forPath(e,t,r){if(e.length%2!=0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ys(t,new bn(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new ys(t,new bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nh(this.firestore,wV(this._delegate,e))}catch(t){throw Ei(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,lt.m9)(e))instanceof bn&&TV(this._delegate,e)}set(e,t){t=eA("DocumentReference.set",t);try{return t?jV(this._delegate,e,t):jV(this._delegate,e)}catch(r){throw Ei(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$V(this._delegate,e):$V(this._delegate,e,t,...r)}catch(i){throw Ei(i,"updateDoc()","DocumentReference.update()")}}delete(){return function AJ(n){return th(vt(n.firestore,nn),[new Od(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=XV(e),r=e2(e,i=>new mg(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function IJ(n){n=vt(n,bn);const e=vt(n.firestore,nn),t=xn(e),r=new au(e);return function kY(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const u=yield function(f,m){const y=Te(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new me(te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Gd(u,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Jd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sa(e,r,n._key,i,new Ic(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function wJ(n){n=vt(n,bn);const e=vt(n.firestore,nn);return hV(xn(e),n._key,{source:"server"}).then(t=>JD(e,n,t))}(this._delegate):function EJ(n){n=vt(n,bn);const e=vt(n.firestore,nn);return hV(xn(e),n._key).then(t=>JD(e,n,t))}(this._delegate),t.then(r=>new mg(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}function Ei(n,e,t){return n.message=n.message.replace(e,t),n}function XV(n){for(const e of n)if("object"==typeof e&&!tA(e))return e;return{}}function e2(n,e){var t,r;let i;return i=tA(n[0])?n[0]:tA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ys(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BV(this._delegate,e._delegate)}}class _g extends mg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function V7(n,e){n||Ne()}(void 0!==t),t}}class Ii{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}where(e,t,r){try{return new Ii(this.firestore,su(this._delegate,function cJ(n,e,t){const r=e,i=Fv("where",n);return fg._create(i,r,t)}(e,t,r)))}catch(i){throw Ei(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ii(this.firestore,su(this._delegate,function lJ(n,e="asc"){const t=e,r=Fv("orderBy",n);return QD._create(r,t)}(e,t)))}catch(r){throw Ei(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ii(this.firestore,su(this._delegate,function dJ(n){return vV("limit",n),Lv._create("limit",n,"F")}(e)))}catch(t){throw Ei(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ii(this.firestore,su(this._delegate,function hJ(n){return vV("limitToLast",n),Lv._create("limitToLast",n,"L")}(e)))}catch(t){throw Ei(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ii(this.firestore,su(this._delegate,function fJ(...n){return Vv._create("startAt",n,!0)}(...e)))}catch(t){throw Ei(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ii(this.firestore,su(this._delegate,function pJ(...n){return Vv._create("startAfter",n,!1)}(...e)))}catch(t){throw Ei(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ii(this.firestore,su(this._delegate,function gJ(...n){return Uv._create("endBefore",n,!1)}(...e)))}catch(t){throw Ei(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ii(this.firestore,su(this._delegate,function mJ(...n){return Uv._create("endAt",n,!0)}(...e)))}catch(t){throw Ei(t,"endAt()","Query.endAt()")}}isEqual(e){return BD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bJ(n){n=vt(n,zr);const e=vt(n.firestore,nn),t=xn(e),r=new au(e);return function FY(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const u=yield yv(s,o,!0),c=new XL(o,u.hs),f=c.da(u.documents),m=c.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const c=Gd(u,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Jd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ou(e,r,n,i))}(this._delegate):"server"===e?.source?function DJ(n){n=vt(n,zr);const e=vt(n.firestore,nn),t=xn(e),r=new au(e);return fV(t,n._query,{source:"server"}).then(i=>new ou(e,r,n,i))}(this._delegate):function TJ(n){n=vt(n,zr);const e=vt(n.firestore,nn),t=xn(e),r=new au(e);return OV(n._query),fV(t,n._query).then(i=>new ou(e,r,n,i))}(this._delegate),t.then(r=>new nA(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XV(e),r=e2(e,i=>new nA(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zV(this._delegate,t,r)}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}class YJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _g(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ii(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _g(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _g(this._firestore,r))})}isEqual(e){return BV(this._delegate,e._delegate)}}class nh extends Ii{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ys(this.firestore,e):null}doc(e){try{return new ys(this.firestore,void 0===e?Mv(this._delegate):Mv(this._delegate,e))}catch(t){throw Ei(t,"doc()","CollectionReference.doc()")}}add(e){return function CJ(n,e){const t=vt(n.firestore,nn),r=Mv(n),i=Bv(n.converter,e);return th(t,[Nv(vc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ys(this.firestore,t))}isEqual(e){return TV(this._delegate,e._delegate)}withConverter(e){return new nh(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}function Tc(n){return vt(n,bn)}class rA{constructor(...e){this._delegate=new ia(...e)}static documentId(){return new rA(wn.keyField().canonicalString())}isEqual(e){return(e=(0,lt.m9)(e))instanceof ia&&this._delegate._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jJ(){return new $D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bc(e)}static delete(){const e=function BJ(){return new cg("deleteField")}();return e._methodName="FieldValue.delete",new bc(e)}static arrayUnion(...e){const t=function $J(...n){return new zD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bc(t)}static arrayRemove(...e){const t=function zJ(...n){return new HD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bc(t)}static increment(e){const t=function HJ(n){return new qD("increment",n)}(e);return t._methodName="FieldValue.increment",new bc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const JJ={Firestore:QV,GeoPoint:Pv,Timestamp:Mn,Blob:gg,Transaction:YV,WriteBatch:JV,DocumentReference:ys,DocumentSnapshot:mg,Query:Ii,QueryDocumentSnapshot:_g,QuerySnapshot:nA,CollectionReference:nh,FieldPath:rA,FieldValue:bc,setLogLevel:function QJ(n){!function L7(n){Ha.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function t2(n,e){return function tX(n,e=rb){return new ut(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function iA(n,e){return t2(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function eX(n){(function XJ(n,e){n.INTERNAL.registerComponent(new $y.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},JJ)))})(n,(e,t)=>new QV(e,t,new ZJ)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(fo.Z);class n2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=u2(r,t);return new s2(i,s,this.afs)}snapshotChanges(){return function nX(n,e){return t2(n,e).pipe(ap(void 0),Ob(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(vi)}}function zv(n,e){return iA(n,e).pipe(ap(void 0),Ob(),Oe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const c=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function r2(n,e,t){return zv(n,t).pipe(wy((r,i)=>function rX(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iX(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Je(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function sA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function i2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class s2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ap(void 0),Ob(),ms(([r,i])=>i.length>0||!r),Oe(([,r])=>r),vi)}auditTrail(e){return this.stateChanges(e).pipe(wy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=i2(e);return r2(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return iA(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),vi)}get(e){return b(this.query.get(e)).pipe(vi)}add(e){return this.ref.add(e)}doc(e){return new n2(this.ref.doc(e),this.afs)}}class sX{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),ms(t=>t.length>0),vi):zv(this.query,this.afs.schedulers.outsideAngular).pipe(vi)}auditTrail(e){return this.stateChanges(e).pipe(wy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=i2(e);return r2(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return iA(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),vi)}get(e){return b(this.query.get(e)).pipe(vi)}}const o2=new Ie("angularfire2.enableFirestorePersistence"),a2=new Ie("angularfire2.firestore.persistenceSettings"),oX=new Ie("angularfire2.firestore.settings"),aX=new Ie("angularfire2.firestore.use-emulator");function u2(n,e=(t=>t)){return{query:e(n),ref:n}}let c2=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,c,f,m,y,I,T,R,P,H,V){this.schedulers=u;const G=jy(t,a,r),ne=f;m&&s1(G,a,y,T,R,P,I,H),[this.firestore,this.persistenceEnabled$]=Nb(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const Ee=a.runOutsideAngular(()=>G.firestore());if(s&&Ee.settings(s),ne&&Ee.useEmulator(...ne),i&&!dy(o)){const Me=()=>{try{return b(Ee.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),F(!1)}};return[Ee,a.runOutsideAngular(Me)]}return[Ee,F(!1)]},[s,ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=u2(i,r),a=this.schedulers.ngZone.run(()=>s);return new s2(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new sX(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new n2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(de(Cp),de(Sp,8),de(o2,8),de(oX,8),de(hs),de(At),de(yd),de(a2,8),de(aX,8),de(o1,8),de(Jk,8),de(Xk,8),de(e1,8),de(t1,8),de(n1,8),de(r1,8),de(Ap,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),uX=(()=>{class n{constructor(){fo.Z.registerVersion("angularfire",za.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:o2,useValue:!0},{provide:a2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[c2]})}return n})(),cX=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(de(c2))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lX(n,e){if(1&n&&(Ot(0,"mat-grid-tile")(1,"mat-card")(2,"mat-card-title"),on(3),kt(),Ot(4,"mat-card-subtitle"),on(5),kt(),Ot(6,"mat-card-subtitle")(7,"a",4),on(8),kt()(),Ot(9,"mat-card-subtitle")(10,"a",4),on(11),kt()(),Ot(12,"mat-card-subtitle"),on(13),kt()()()),2&n){const t=e.$implicit;$o(3),zu(t.Name),$o(2),zu(t.Phone_Number),$o(2),L_("href","mailto:",t.Email,"",h_),$o(1),zu(t.Email),$o(2),Mw("href",t.Website,h_),$o(1),zu(t.Website),$o(2),zu(t.Description)}}const dX=[{path:"",component:p7},{path:"services",component:(()=>{class n{constructor(t){this.servicesService=t,this.services=[],this.realestateservices=[{name:"Agent Imobiliar",person:"Nicolae Leva",phone:"206-566-9343",email:"nicolae.leva@206realty.com",website:"www.nicolaeleva.com",description:"Agent Imobiliar/Real Estate Broker"},{name:"Agent Imobiliar",person:"Gabriel Albut",phone:"206-484-9410",email:"albutlazea@yahoo.com",website:"www.gabrielal.johnlscott.com",description:"Agent Imobiliar/Real Estate Broker"},{name:"Agent Imobiliar",person:"Ioana Constantin",phone:"425 281 3934",email:"ioana@macyandco.com",website:"https://www.facebook.com/iconstantinrealty/",description:"We ofer the best service in town"},{name:"Agent Imobiliar",person:"Lilia Petica",phone:"206-915-1341",email:"liliap@windermere.com",website:"liliapetica.withwre.com",description:"We ofer the best service in town"},{name:"Agent Imobiliar",person:"Ghiurau Sergiu",phone:"206-834-5341",email:"sergiu@KW.com",website:"https://www.facebook.com/Sergiu-Real-Estate-Broker-127688671122818/",description:"We ofer the best service in town"},{name:"Agent Imobiliar",person:"Nadia Schmieder",phone:"425 677 4734",email:"nadia@macyandco.com",website:"www.johnsservice.com",description:"Nadia Real Estate (Facebook)"},{name:"Agent Imobiliar",person:"Vasi Nemes Jr",phone:"206-229-0390",email:"vnemes@206realty.com",website:"www.206realty.com",description:"We ofer the best service in town"},{name:"Agent Imobiliar",person:"Sergey Oleynikov",phone:"206-909-6295",email:"CONTACT@SERGEYOLEYNIKOV.COM",website:"www.sergeyoleynikov.com",description:"We ofer the best service in town"},{name:"Agent Imobiliar",person:"Anne Mehedinti",phone:"425-243-7494",email:"bellevuewabroker@gmail.com",website:"www.annemehedinti.com",description:"We ofer the best service in town"}],this.notaryservices=[{name:"Notar Public",person:"Nicolae Leva",phone:"206-566-9343",email:"leva.nicolae@gmail.com",website:"www.nicolaeleva.com",description:"Notar Public"},{name:"Notar Public",person:"Vladimir Popescu",phone:"253-632-2817",email:"vladimir_popescu@yahoo.com",website:"",description:"Notar Public"},{name:"Notar Public",person:"Daniela Ypersiel",phone:"253-455-8582",email:"cvltranslation@gmail.com",website:"",description:"Notar Public"},{name:"Notar Public",person:"Cristina Moldovan",phone:"1-866-928-6404",email:"cristina@traduterra.com",website:"lwww.traduterra.com",description:"Notar Public"},{name:"Notar Public",person:"Ionela Popescu",phone:"425-773-8751",email:"usionelapopescu@yahoo.com",website:"www.romanica-translations.com",description:"Notar Public"}],this.translationservices=[{name:"Traducator autorizat",person:"Daniela Ypersiel",phone:"253-455-8582",email:"cvltranslation@gmail.com",website:"",description:"Traducator"},{name:"Traducator autorizat",person:"Cristina Moldovan",phone:"1-866-928-6404",email:"cristina@traduterra.com",website:"www.traduterra.com",description:"Traducator"},{name:"Traducator autorizat",person:"Ionela Popescu",phone:"425-773-8751",email:"usionelapopescu@yahoo.com",website:"www.romanica-translations.com",description:"Traducator"}],this.lawservices=[{name:"Avocat",person:"Robert Radulescu",phone:"206-799-6472",email:"robert@robertradulescu.com",website:"",description:"Emigrari in WA si Cazuri civile in California"},{name:"Avocat",person:"Cristina Mehling",phone:"425-990-1046",email:"cm@mehlinglawfirm.com",website:"mehlinglawfirm.com",description:"Traducator"},{name:"Avocat",person:"Mihnea Andrei Andreescu",phone:"860-796-7552",email:"andreescu_mihnea97@yahoo.com",website:"https://buckleylaw.net/",description:""},{name:"Avocat",person:"Cosmin Popa",phone:"425-750-2061",email:"cosmin@popalaw.com",website:"www.popalaw.com",description:""},{name:"Avocat",person:"Octavian Jumanca",phone:"425-770-2550",email:"octavian@westlakelaw.net",website:"https://buckleylaw.net/",description:"emigrari"},{name:"Avocat",person:"Ruxandra Dragan",phone:"425-449-5700",email:"ruxandra@dragn-law.com",website:"",description:"emigrari"}]}ngOnInit(){this.servicesService.getServices().subscribe(t=>{this.services=t})}static#e=this.\u0275fac=function(r){return new(r||n)(We(cX))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-services"]],decls:8,vars:1,consts:[[1,"services-container"],[1,"section-header"],["cols","4","rowHeight","2:1","gutterSize","16px"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(r,i){1&r&&(Ot(0,"div",0)(1,"div",1)(2,"h2"),on(3,"Lista de Servicii"),kt(),Ot(4,"p"),on(5,"Discover what's happening in our community."),kt()(),Ot(6,"mat-grid-list",2),function vM(n,e,t,r,i,s,o,a){const u=ge(),c=Rt(),f=n+_t,m=c.firstCreatePass?function RH(n,e,t,r,i,s,o,a,u){const c=e.consts,f=$l(e,n,4,o||null,ss(c,a));fw(e,t,f,ss(c,u)),pl(e,f);const m=f.tView=hw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,c,u,e,t,r,i,s,o):c.data[f];os(m,!1);const y=EM(c,u,m,n);fl()&&a_(c,u,y,m),Yr(y,u),C_(u,u[f]=jR(y,u,y,m)),Fh(m)&&lw(c,u,m),null!=o&&dw(u,m,a)}(7,lX,14,7,"mat-grid-tile",3),kt()()),2&r&&($o(7),Dw("ngForOf",i.services))},dependencies:[kN,OO,FO,kO,W5,UO],styles:[".services-container[_ngcontent-%COMP%]{padding:20px;width:100vw}.mat-grid-tile-content[_ngcontent-%COMP%]{flex-direction:column}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}mat-card[_ngcontent-%COMP%]{height:100%;width:100%;border:1px solid black;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}"]})}return n})()},{path:"rules",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-rules"]],decls:2,vars:0,template:function(r,i){1&r&&(Ot(0,"p"),on(1,"rules works!"),kt())}})}return n})()},{path:"events",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-events"]],decls:2,vars:0,template:function(r,i){1&r&&(Ot(0,"p"),on(1,"events works!"),kt())}})}return n})()},{path:"jobs",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-jobs"]],decls:2,vars:0,template:function(r,i){1&r&&(Ot(0,"p"),on(1,"jobs works!"),kt())}})}return n})()}];let hX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({imports:[Hk.forRoot(dX),Hk]})}return n})(),fX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-navigation"]],decls:17,vars:0,consts:[["routerLink","/"],["routerLink","/services"],["routerLink","/events"],["routerLink","/Jobs"],["routerLink","/rules"]],template:function(r,i){1&r&&(Ot(0,"nav")(1,"ul")(2,"li")(3,"a",0),on(4,"Acasa"),kt()(),Ot(5,"li")(6,"a",1),on(7,"Servicii"),kt()(),Ot(8,"li")(9,"a",2),on(10,"Evenimente"),kt()(),Ot(11,"li")(12,"a",3),on(13,"Locuri de Munca"),kt()(),Ot(14,"li")(15,"a",4),on(16,"Regulament"),kt()()()())},dependencies:[Uy],styles:["nav[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 4px 8px #0000001a}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;display:flex;justify-content:center}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:14px 20px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-align:center;text-decoration:none;font-size:16px;display:block}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to right,blue,yellow,red) 1}"]})}return n})(),pX=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(Ot(0,"div",0),zf(1,"app-navigation")(2,"router-outlet"),kt())},dependencies:[wb,fX],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class l2{}class gX{}const oa="*";function d2(n,e=null){return{type:2,steps:n,options:e}}function h2(n){return{type:6,styles:n,offset:null}}class yg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class f2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function p2(n){return new N(3e3,!1)}function cu(n){switch(n.length){case 0:return new yg;case 1:return n[0];default:return new f2(n)}}function g2(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(u=>{const c=u.get("offset"),f=c==o,m=f&&a||new Map;u.forEach((y,I)=>{let T=I,R=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),R){case"!":R=t.get(I);break;case oa:R=r.get(I);break;default:R=n.normalizeStyleValue(I,T,R,i)}m.set(T,R)}),f||s.push(m),a=m,o=c}),i.length)throw function VX(n){return new N(3502,!1)}();return s}function aA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&uA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&uA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&uA(t,"destroy",n)))}}function uA(n,e,t){const s=cA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function cA(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Yi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function m2(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const QX=(()=>typeof document>"u"?null:document.documentElement)();function lA(n){const e=n.parentNode||n.host||null;return e===QX?null:e}let Dc=null,_2=!1;function y2(n,e){for(;e;){if(e===n)return!0;e=lA(e)}return!1}function v2(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let E2=(()=>{class n{validateStyleProperty(t){return function JX(n){Dc||(Dc=function XX(){return typeof document<"u"?document.body:null}()||{},_2=!!Dc.style&&"WebkitAppearance"in Dc.style);let e=!0;return Dc.style&&!function YX(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Dc.style,!e&&_2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Dc.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return y2(t,r)}getParentElement(t){return lA(t)}query(t,r,i){return v2(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],u){return new yg(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),dA=(()=>{class n{static#e=this.NOOP=new E2}return n})();const eee=1e3,hA="ng-enter",Hv="ng-leave",qv="ng-trigger",Wv=".ng-trigger",w2="ng-animating",fA=".ng-animating";function aa(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pA(parseFloat(e[1]),e[2])}function pA(n,e){return"s"===e?n*eee:n}function Gv(n,e,t){return n.hasOwnProperty("duration")?n:function nee(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(p2()),{duration:0,delay:0,easing:""};i=pA(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=pA(parseFloat(u),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(function mX(){return new N(3100,!1)}()),a=!0),s<0&&(e.push(function _X(){return new N(3101,!1)}()),a=!0),a&&e.splice(u,0,p2())}return{duration:i,delay:s,easing:o}}(n,e,t)}function vg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function T2(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function lu(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function wo(n,e,t){e.forEach((r,i)=>{const s=mA(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Ac(n,e){e.forEach((t,r)=>{const i=mA(r);n.style[i]=""})}function Eg(n){return Array.isArray(n)?1==n.length?n[0]:d2(n):n}const gA=new RegExp("{{\\s*(.+?)\\s*}}","g");function D2(n){let e=[];if("string"==typeof n){let t;for(;t=gA.exec(n);)e.push(t[1]);gA.lastIndex=0}return e}function Ig(n,e,t){const r=n.toString(),i=r.replace(gA,(s,o)=>{let a=e[o];return null==a&&(t.push(function vX(n){return new N(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Kv(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const see=/-+([a-z0-9])/g;function mA(n){return n.replace(see,(...e)=>e[1].toUpperCase())}function Ji(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function EX(n){return new N(3004,!1)}()}}function A2(n,e){return window.getComputedStyle(n)[e]}const Zv="*";function uee(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function cee(n,e,t){if(":"==n[0]){const u=function lee(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function OX(n){return new N(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function NX(n){return new N(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(C2(i,o));"<"==s[0]&&!(i==Zv&&o==Zv)&&e.push(C2(o,i))}(r,t,e)):t.push(n),t}const Qv=new Set(["true","1"]),Yv=new Set(["false","0"]);function C2(n,e){const t=Qv.has(n)||Yv.has(n),r=Qv.has(e)||Yv.has(e);return(i,s)=>{let o=n==Zv||n==i,a=e==Zv||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Qv.has(n):Yv.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Qv.has(e):Yv.has(e)),o&&a}}const dee=new RegExp("s*:selfs*,?","g");function _A(n,e,t,r){return new hee(n).build(e,t,r)}class hee{constructor(e){this._driver=e}build(e,t,r){const i=new gee(t);return this._resetContextStyleTimingState(i),Ji(this,Eg(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function wX(){return new N(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const u=a,c=u.name;c.toString().split(/\s*,\s*/).forEach(f=>{u.name=f,s.push(this.visitState(u,t))}),u.name=c}else if(1==a.type){const u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function TX(){return new N(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{D2(u).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(Kv(s.values()),t.errors.push(function bX(n,e){return new N(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ji(this,Eg(e.animation),t);return{type:1,matchers:uee(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ji(this,r,t)),options:Cc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ji(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Cc(e.options)}}visitAnimate(e,t){const r=function _ee(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return yA(Gv(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=yA(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Gv(t,e);return yA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:h2({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=h2(c)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===oa?r.push(a):t.errors.push(new N(3002,!1)):r.push(T2(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const c=t.collectedStyles.get(t.currentQuerySelector),f=c.get(u);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function AX(n,e,t,r,i){return new N(3010,!1)}()),m=!1),s=f.startTime),m&&c.set(u,{startTime:s,endTime:i}),t.options&&function iee(n,e,t){const r=e.params||{},i=D2(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function yX(n){return new N(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function CX(){return new N(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,c=0;const f=e.steps.map(H=>{const V=this._makeStyleAst(H,t);let G=null!=V.offset?V.offset:function mee(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),ne=0;return null!=G&&(s++,ne=V.offset=G),u=u||ne<0||ne>1,a=a||ne<c,c=ne,o.push(ne),V});u&&t.errors.push(function SX(){return new N(3012,!1)}()),a&&t.errors.push(function RX(){return new N(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function MX(){return new N(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,R=t.currentAnimateTimings,P=R.duration;return f.forEach((H,V)=>{const G=y>0?V==I?1:y*V:o[V],ne=G*P;t.currentTime=T+R.delay+ne,R.duration=ne,this._validateStyleAst(H,t),H.offset=G,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:Ji(this,Eg(e.animation),t),options:Cc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function fee(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(dee,"")),n=n.replace(/@\*/g,Wv).replace(/@\w+/g,t=>Wv+"-"+t.slice(1)).replace(/:animating/g,fA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Yi(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ji(this,Eg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Cc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function PX(){return new N(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Gv(e.timings,t.errors,!0);return{type:12,animation:Ji(this,Eg(e.animation),t),timings:r,options:null}}}class gee{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cc(n){return n?(n=vg(n)).params&&(n.params=function pee(n){return n?vg(n):null}(n.params)):n={},n}function yA(n,e,t){return{duration:n,delay:e,easing:t}}function vA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Jv{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Eee=new RegExp(":enter","g"),wee=new RegExp(":leave","g");function EA(n,e,t,r,i,s=new Map,o=new Map,a,u,c=[]){return(new Tee).buildKeyframes(n,e,t,r,i,s,o,a,u,c)}class Tee{buildKeyframes(e,t,r,i,s,o,a,u,c,f=[]){c=c||new Jv;const m=new IA(e,t,c,i,s,f,[]);m.options=u;const y=u.delay?aa(u.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,u),Ji(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let R=I.length-1;R>=0;R--){const P=I[R];if(P.element===t){T=P;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,u)}return I.length?I.map(T=>T.buildKeyframes()):[vA(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:aa(Ig(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?aa(r.duration):null,a=null!=r.delay?aa(r.delay):null;return 0!==o&&e.forEach(u=>{const c=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ji(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Xv);const o=aa(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ji(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?aa(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ji(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Gv(t.params?Ig(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?aa(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Xv);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((c,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,c);s&&m.delayNextStep(s),c===t.element&&(u=m.currentTimeline),Ji(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const f=t.currentTimeline;u&&f.delayNextStep(u);const m=f.currentTime;Ji(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const Xv={};class IA{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new eE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=aa(r.duration)),null!=r.delay&&(i.delay=aa(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ig(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new IA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Xv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new bee(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Eee,"."+this._enterClassName)).replace(wee,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function xX(n){return new N(3014,!1)}()),a}}class eE{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new eE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||oa),this._currentKeyframe.set(t,oa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Dee(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,oa)}else lu(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,u]of o){const c=Ig(u,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??oa),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const c=lu(a,new Map,this._backFill);c.forEach((f,m)=>{"!"===f?e.add(m):f===oa&&t.add(m)}),r||c.set("offset",u/this.duration),i.push(c)});const s=e.size?Kv(e.values()):[],o=t.size?Kv(t.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return vA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class bee extends eE{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,u=lu(e[0]);u.set("offset",0),s.push(u);const c=lu(e[0]);c.set("offset",M2(a)),s.push(c);const f=e.length-1;for(let m=1;m<=f;m++){let y=lu(e[m]);const I=y.get("offset");y.set("offset",M2((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return vA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function M2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wA{}const Aee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Cee extends wA{normalizePropertyName(e,t){return mA(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Aee.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function IX(n,e){return new N(3005,!1)}())}return o+s}}function P2(n,e,t,r,i,s,o,a,u,c,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:f,totalTime:m,errors:y}}const TA={};class x2{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function See(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,c,f){const m=[],y=this.ast.options&&this.ast.options.params||TA,T=this.buildStyles(r,a&&a.params||TA,m),R=u&&u.params||TA,P=this.buildStyles(i,R,m),H=new Set,V=new Map,G=new Map,ne="void"===i,Ee={params:Ree(R,y),delay:this.ast.options?.delay},Me=f?[]:EA(e,t,this.ast.animation,s,o,T,P,Ee,c,m);let j=0;if(Me.forEach(L=>{j=Math.max(L.duration+L.delay,j)}),m.length)return P2(t,this._triggerName,r,i,ne,T,P,[],[],V,G,j,m);Me.forEach(L=>{const z=L.element,q=Yi(V,z,new Set);L.preStyleProps.forEach(U=>q.add(U));const J=Yi(G,z,new Set);L.postStyleProps.forEach(U=>J.add(U)),z!==t&&H.add(z)});const x=Kv(H.values());return P2(t,this._triggerName,r,i,ne,T,P,Me,x,V,G,j)}}function Ree(n,e){const t=vg(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Mee{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=vg(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ig(o,i,t));const u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}}class xee{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Mee(i.style,i.options&&i.options.params||{},r))}),N2(this.states,"true","1"),N2(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new x2(e,i,this.states))}),this.fallbackTransition=function Nee(n,e,t){return new x2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function N2(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Oee=new Jv;class kee{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=_A(this._driver,t,r,[]);if(r.length)throw function UX(n){return new N(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=g2(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=EA(this._driver,t,s,hA,Hv,new Map,new Map,r,Oee,i),o.forEach(f=>{const m=Yi(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function BX(){return new N(3300,!1)}()),o=[]),i.length)throw function jX(n){return new N(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,oa))})});const c=cu(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function $X(n){return new N(3301,!1)}();return t}listen(e,t,r,i){const s=cA(t,"","","");return aA(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const O2="ng-animate-queued",bA="ng-animate-disabled",Bee=[],k2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vs="__ng_removed";class DA{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function qee(n){return n??null}(r?e.value:e),r){const s=vg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const wg="void",AA=new DA(wg);class $ee{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function zX(n,e){return new N(3302,!1)}();if(null==r||0==r.length)throw function HX(n){return new N(3303,!1)}();if(!function Wee(n){return"start"==n||"done"==n}(r))throw function qX(n,e){return new N(3400,!1)}();const s=Yi(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Yi(this._engine.statesByElement,e,new Map);return a.has(t)||(vs(e,qv),vs(e,qv+"-"+t),a.set(t,AA)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function WX(n){return new N(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new CA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(vs(e,qv),vs(e,qv+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t);const c=new DA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a.set(t,c),u||(u=AA),c.value!==wg&&u.value===c.value){if(!function Zee(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,c.params)){const R=[],P=s.matchStyles(u.value,u.params,R),H=s.matchStyles(c.value,c.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Ac(e,P),wo(e,H)})}return}const y=Yi(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(u.value,c.value,e,c.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:u,toState:c,player:o,isFallbackTransition:T}),T||(vs(e,O2),o.onStart(()=>{rh(e,O2)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const P=this._engine.playersByElement.get(e);if(P){let H=P.indexOf(o);H>=0&&P.splice(H,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Wv,!0);r.forEach(i=>{if(i[Vs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,c)=>{if(o.set(c,u.value),this._triggers.has(c)){const f=this.trigger(e,c,wg,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&cu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,c=r.get(o)||AA,f=new DA(wg),m=new CA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:c,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Vs];(!s||s===k2)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){vs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=cA(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,aA(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class zee{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new $ee(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const u=i.get(a);if(u){const c=r.indexOf(u);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(tE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!tE(t))return;const s=t[Vs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vs(e,bA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),rh(e,bA))}removeNode(e,t,r){if(tE(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Vs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return tE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Wv,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,fA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return cu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Vs];if(t&&t.setForRemoval){if(e[Vs]=k2,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(bA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)vs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?cu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function GX(n){return new N(3402,!1)}()}_flushAnimations(e,t){const r=new Jv,i=[],s=new Map,o=[],a=new Map,u=new Map,c=new Map,f=new Set;this.disabledNodes.forEach(Ve=>{f.add(Ve);const qe=this.driver.query(Ve,".ng-animate-queued",!0);for(let Ge=0;Ge<qe.length;Ge++)f.add(qe[Ge])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=V2(y,this.collectedEnterElements),T=new Map;let R=0;I.forEach((Ve,qe)=>{const Ge=hA+R++;T.set(qe,Ge),Ve.forEach(Ct=>vs(Ct,Ge))});const P=[],H=new Set,V=new Set;for(let Ve=0;Ve<this.collectedLeaveElements.length;Ve++){const qe=this.collectedLeaveElements[Ve],Ge=qe[Vs];Ge&&Ge.setForRemoval&&(P.push(qe),H.add(qe),Ge.hasAnimation?this.driver.query(qe,".ng-star-inserted",!0).forEach(Ct=>H.add(Ct)):V.add(qe))}const G=new Map,ne=V2(y,Array.from(H));ne.forEach((Ve,qe)=>{const Ge=Hv+R++;G.set(qe,Ge),Ve.forEach(Ct=>vs(Ct,Ge))}),e.push(()=>{I.forEach((Ve,qe)=>{const Ge=T.get(qe);Ve.forEach(Ct=>rh(Ct,Ge))}),ne.forEach((Ve,qe)=>{const Ge=G.get(qe);Ve.forEach(Ct=>rh(Ct,Ge))}),P.forEach(Ve=>{this.processLeaveNode(Ve)})});const Ee=[],Me=[];for(let Ve=this._namespaceList.length-1;Ve>=0;Ve--)this._namespaceList[Ve].drainQueuedTransitions(t).forEach(Ge=>{const Ct=Ge.player,rr=Ge.element;if(Ee.push(Ct),this.collectedEnterElements.length){const Gn=rr[Vs];if(Gn&&Gn.setForMove){if(Gn.previousTriggersValues&&Gn.previousTriggersValues.has(Ge.triggerName)){const la=Gn.previousTriggersValues.get(Ge.triggerName),Bi=this.statesByElement.get(Ge.element);if(Bi&&Bi.has(Ge.triggerName)){const da=Bi.get(Ge.triggerName);da.value=la,Bi.set(Ge.triggerName,da)}}return void Ct.destroy()}}const Is=!m||!this.driver.containsElement(m,rr),Wn=G.get(rr),Dn=T.get(rr),An=this._buildInstruction(Ge,r,Dn,Wn,Is);if(An.errors&&An.errors.length)return void Me.push(An);if(Is)return Ct.onStart(()=>Ac(rr,An.fromStyles)),Ct.onDestroy(()=>wo(rr,An.toStyles)),void i.push(Ct);if(Ge.isFallbackTransition)return Ct.onStart(()=>Ac(rr,An.fromStyles)),Ct.onDestroy(()=>wo(rr,An.toStyles)),void i.push(Ct);const hu=[];An.timelines.forEach(Gn=>{Gn.stretchStartingKeyframe=!0,this.disabledNodes.has(Gn.element)||hu.push(Gn)}),An.timelines=hu,r.append(rr,An.timelines),o.push({instruction:An,player:Ct,element:rr}),An.queriedElements.forEach(Gn=>Yi(a,Gn,[]).push(Ct)),An.preStyleProps.forEach((Gn,la)=>{if(Gn.size){let Bi=u.get(la);Bi||u.set(la,Bi=new Set),Gn.forEach((da,fu)=>Bi.add(fu))}}),An.postStyleProps.forEach((Gn,la)=>{let Bi=c.get(la);Bi||c.set(la,Bi=new Set),Gn.forEach((da,fu)=>Bi.add(fu))})});if(Me.length){const Ve=[];Me.forEach(qe=>{Ve.push(function KX(n,e){return new N(3505,!1)}())}),Ee.forEach(qe=>qe.destroy()),this.reportError(Ve)}const j=new Map,x=new Map;o.forEach(Ve=>{const qe=Ve.element;r.has(qe)&&(x.set(qe,qe),this._beforeAnimationBuild(Ve.player.namespaceId,Ve.instruction,j))}),i.forEach(Ve=>{const qe=Ve.element;this._getPreviousPlayers(qe,!1,Ve.namespaceId,Ve.triggerName,null).forEach(Ct=>{Yi(j,qe,[]).push(Ct),Ct.destroy()})});const L=P.filter(Ve=>B2(Ve,u,c)),z=new Map;L2(z,this.driver,V,c,oa).forEach(Ve=>{B2(Ve,u,c)&&L.push(Ve)});const J=new Map;I.forEach((Ve,qe)=>{L2(J,this.driver,new Set(Ve),u,"!")}),L.forEach(Ve=>{const qe=z.get(Ve),Ge=J.get(Ve);z.set(Ve,new Map([...qe?.entries()??[],...Ge?.entries()??[]]))});const U=[],Es=[],du={};o.forEach(Ve=>{const{element:qe,player:Ge,instruction:Ct}=Ve;if(r.has(qe)){if(f.has(qe))return Ge.onDestroy(()=>wo(qe,Ct.toStyles)),Ge.disabled=!0,Ge.overrideTotalTime(Ct.totalTime),void i.push(Ge);let rr=du;if(x.size>1){let Wn=qe;const Dn=[];for(;Wn=Wn.parentNode;){const An=x.get(Wn);if(An){rr=An;break}Dn.push(Wn)}Dn.forEach(An=>x.set(An,rr))}const Is=this._buildAnimation(Ge.namespaceId,Ct,j,s,J,z);if(Ge.setRealPlayer(Is),rr===du)U.push(Ge);else{const Wn=this.playersByElement.get(rr);Wn&&Wn.length&&(Ge.parentPlayer=cu(Wn)),i.push(Ge)}}else Ac(qe,Ct.fromStyles),Ge.onDestroy(()=>wo(qe,Ct.toStyles)),Es.push(Ge),f.has(qe)&&i.push(Ge)}),Es.forEach(Ve=>{const qe=s.get(Ve.element);if(qe&&qe.length){const Ge=cu(qe);Ve.setRealPlayer(Ge)}}),i.forEach(Ve=>{Ve.parentPlayer?Ve.syncPlayerEvents(Ve.parentPlayer):Ve.destroy()});for(let Ve=0;Ve<P.length;Ve++){const qe=P[Ve],Ge=qe[Vs];if(rh(qe,Hv),Ge&&Ge.hasAnimation)continue;let Ct=[];if(a.size){let Is=a.get(qe);Is&&Is.length&&Ct.push(...Is);let Wn=this.driver.query(qe,fA,!0);for(let Dn=0;Dn<Wn.length;Dn++){let An=a.get(Wn[Dn]);An&&An.length&&Ct.push(...An)}}const rr=Ct.filter(Is=>!Is.destroyed);rr.length?Gee(this,qe,rr):this.processLeaveNode(qe)}return P.length=0,U.forEach(Ve=>{this.players.push(Ve),Ve.onDone(()=>{Ve.destroy();const qe=this.players.indexOf(Ve);this.players.splice(qe,1)}),Ve.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==wg;a.forEach(c=>{c.queued||!u&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const c=u.element,f=c!==s,m=Yi(r,c,[]);this._getPreviousPlayers(c,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}Ac(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,u=t.element,c=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const R=T.element;f.add(R);const P=R[Vs];if(P&&P.removedBeforeQueried)return new yg(T.duration,T.delay);const H=R!==u,V=function Kee(n){const e=[];return U2(n,e),e}((r.get(R)||Bee).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===R),G=s.get(R),ne=o.get(R),Ee=g2(this._normalizer,T.keyframes,G,ne),Me=this._buildPlayer(T,Ee,V);if(T.subTimeline&&i&&m.add(R),H){const j=new CA(e,a,R);j.setRealPlayer(Me),c.push(j)}return Me});c.forEach(T=>{Yi(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function Hee(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>vs(T,w2));const I=cu(y);return I.onDestroy(()=>{f.forEach(T=>rh(T,w2)),wo(u,t.toStyles)}),m.forEach(T=>{Yi(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new yg(e.duration,e.delay)}}class CA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new yg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>aA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function tE(n){return n&&1===n.nodeType}function F2(n,e){const t=n.style.display;return n.style.display=e??"none",t}function L2(n,e,t,r,i){const s=[];t.forEach(u=>s.push(F2(u)));const o=[];r.forEach((u,c)=>{const f=new Map;u.forEach(m=>{const y=e.computeStyle(c,m,i);f.set(m,y),(!y||0==y.length)&&(c[Vs]=jee,o.push(c))}),n.set(c,f)});let a=0;return t.forEach(u=>F2(u,s[a++])),o}function V2(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let u=s.get(a);if(u)return u;const c=a.parentNode;return u=t.has(c)?c:i.has(c)?1:o(c),s.set(a,u),u}return e.forEach(a=>{const u=o(a);1!==u&&t.get(u).push(a)}),t}function vs(n,e){n.classList?.add(e)}function rh(n,e){n.classList?.remove(e)}function Gee(n,e,t){cu(t).onDone(()=>n.processLeaveNode(e))}function U2(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof f2?U2(r.players,e):e.push(r)}}function B2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class nE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new zee(e,t,r),this._timelineEngine=new kee(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],f=_A(this._driver,s,u,[]);if(u.length)throw function LX(n,e){return new N(3404,!1)}();a=function Pee(n,e,t){return new xee(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=m2(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=m2(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Yee=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&wo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wo(this._element,this._initialStyles),this._endStyles&&(wo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ac(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ac(this._element,this._endStyles),this._endStyles=null),wo(this._element,this._initialStyles),this._state=3)}}return n})();function SA(n){let e=null;return n.forEach((t,r)=>{(function Jee(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class j2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:A2(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Xee{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return y2(e,t)}getParentElement(e){return lA(e)}query(e,t,r){return v2(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const c=new Map,f=o.filter(I=>I instanceof j2);(function oee(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,R)=>c.set(R,T))});let m=function ree(n){return n.length?n[0]instanceof Map?n:n.map(e=>T2(e)):[]}(t).map(I=>lu(I));m=function aee(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,A2(n,a)))}}return e}(e,m,c);const y=function Qee(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=SA(e[0]),e.length>1&&(r=SA(e[e.length-1]))):e instanceof Map&&(t=SA(e)),t||r?new Yee(n,t,r):null}(e,m);return new j2(e,m,u,y)}}let ete=(()=>{class n extends l2{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:jn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?d2(t):t;return $2(this._renderer,null,r,"register",[i]),new tte(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(de(xf),de(Ur))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class tte extends gX{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new nte(this._id,e,t||{},this._renderer)}}class nte{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return $2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const z2="@.disabled";let rte=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new H2("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const u=f=>{Array.isArray(f)?f.forEach(u):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(u),new ite(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(de(xf),de(nE),de(At))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class H2{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==z2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ite extends H2{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==z2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function ste(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function ote(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const q2=[{provide:l2,useClass:ete},{provide:wA,useFactory:function ute(){return new Cee}},{provide:nE,useClass:(()=>{class n extends nE{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(de(Ur),de(dA),de(wA),de(Wu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})()},{provide:xf,useFactory:function cte(n,e,t){return new rte(n,e,t)},deps:[ZT,nE,At]}],RA=[{provide:dA,useFactory:()=>new Xee},{provide:nR,useValue:"BrowserAnimations"},...q2],W2=[{provide:dA,useClass:E2},{provide:nR,useValue:"NoopAnimations"},...q2];let lte=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?W2:RA}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n});static#n=this.\u0275inj=En({providers:RA,imports:[iO]})}return n})();const G2_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class ih{constructor(e){return e}}class MA{constructor(){return(0,Hn.getApps)()}}const PA=new Ie("angularfire2._apps"),hte={provide:ih,useFactory:function dte(n){return n&&1===n.length?n[0]:new ih((0,Hn.getApp)())},deps:[[new Vr,PA]]},fte={provide:MA,deps:[[new Vr,PA]]};function pte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ih(r)}}let gte=(()=>{class n{constructor(t){(0,Hn.registerVersion)("angularfire",za.full,"core"),(0,Hn.registerVersion)("angularfire",za.full,"app"),(0,Hn.registerVersion)("angular",XI.full,t.toString())}static \u0275fac=function(r){return new(r||n)(de(hs))};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[hte,fte]})}return n})();function mte(n,...e){return{ngModule:gte,providers:[{provide:PA,useFactory:pte(n),multi:!0,deps:[At,gi,yd,...e]}]}}const _te=xb(Hn.initializeApp,!0);Ke(455);class NA{constructor(){return By("auth")}}class kA{constructor(e){return e}}const Z2="firestore",FA=new Ie("angularfire2.firestore-instances");function Tte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kA(r)}}const bte={provide:class Ite{constructor(){return By(Z2)}},deps:[[new Vr,FA]]},Dte={provide:kA,useFactory:function wte(n,e){const t=Pb(Z2,n,e);return t&&new kA(t)},deps:[[new Vr,FA],ih]};let Ate=(()=>{class n{constructor(){(0,Hn.registerVersion)("angularfire",za.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[Dte,bte]})}return n})();function Cte(n,...e){return{ngModule:Ate,providers:[{provide:FA,useFactory:Tte(n),multi:!0,deps:[At,gi,yd,MA,[new Vr,NA],[new Vr,Ap],...e]}]}}const Ste=xb(KY,!0),Q2="firebasestorage.googleapis.com",Y2="storageBucket";class Bn extends lt.ZR{constructor(e,t,r=0){super(LA(e),`Firebase Storage: ${t} (${LA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Nn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Nn||{});function LA(n){return"storage/"+n}function VA(){return new Bn(Nn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function J2(){return new Bn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X2(){return new Bn(Nn.CANCELED,"User canceled the upload/download.")}function eU(){return new Bn(Nn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sh(n){return new Bn(Nn.INVALID_ARGUMENT,n)}function tU(){return new Bn(Nn.APP_DELETED,"The Firebase app was deleted.")}function nU(n){return new Bn(Nn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tg(n,e){return new Bn(Nn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bg(n){throw new Bn(Nn.INTERNAL_ERROR,"Internal error: "+n)}class ii{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ii.makeFromUrl(e,t)}catch{return new ii(e,"")}if(""===r.path)return r;throw function Vte(n){return new Bn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(ne){ne.path_=decodeURIComponent(ne.path)}const m=t.replace(/[.]/g,"\\."),G=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ne){"/"===ne.path.charAt(ne.path.length-1)&&(ne.path_=ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===Q2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let ne=0;ne<G.length;ne++){const Ee=G[ne],Me=Ee.regex.exec(e);if(Me){let x=Me[Ee.indices.path];x||(x=""),r=new ii(Me[Ee.indices.bucket],x),Ee.postModify(r);break}}if(null==r)throw function Lte(n){return new Bn(Nn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class zte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function iE(n){return"string"==typeof n||n instanceof String}function rU(n){return UA()&&n instanceof Blob}function UA(){return typeof Blob<"u"}function BA(n,e,t,r){if(r<e)throw sh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sh(`Invalid value for '${n}'. Expected ${t} or less.`)}function ua(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function iU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var oh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(oh||{});function sU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Zte{constructor(e,t,r,i,s,o,a,u,c,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function Wte(n){return void 0!==n}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=VA();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?tU():X2():J2())};this.canceled_?t(0,new sE(!1,null,!0)):this.backoffId_=function Hte(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let c=!1;function f(...P){c||(c=!0,e.apply(null,P))}function m(P){i=setTimeout(()=>{i=null,n(I,u())},P)}function y(){s&&clearTimeout(s)}function I(P,...H){if(c)return void y();if(P)return y(),void f.call(null,P,...H);if(u()||o)return y(),void f.call(null,P,...H);let G;r<64&&(r*=2),1===a?(a=2,G=0):G=1e3*(r+Math.random()),m(G)}let T=!1;function R(P){T||(T=!0,y(),!c&&(null!==i?(P||(a=2),clearTimeout(i),m(0)):P||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new sE(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===oh.NO_ERROR,u=s.getStatus();if(!a||sU(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===oh.ABORT;return void r(!1,new sE(!1,null,f))}const c=-1!==this.successCodes_.indexOf(u);r(!0,new sE(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qte(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sE{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function nne(...n){const e=function tne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(UA())return new Blob(n);throw new Bn(Nn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jA{constructor(e,t){this.data=e,this.contentType=t||null}}function $A(n,e){switch(n){case Xi.RAW:return new jA(oU(e));case Xi.BASE64:case Xi.BASE64URL:return new jA(aU(n,e));case Xi.DATA_URL:return new jA(function one(n){const e=new uU(n);return e.base64?aU(Xi.BASE64,e.rest):function sne(n){let e;try{e=decodeURIComponent(n)}catch{throw Tg(Xi.DATA_URL,"Malformed data URL.")}return oU(e)}(e.rest)}(e),function ane(n){return new uU(n).contentType}(e))}throw VA()}function oU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function aU(n,e){switch(n){case Xi.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Tg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xi.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Tg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function ine(n){if(typeof atob>"u")throw function $te(n){return new Bn(Nn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Tg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class uU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Tg(Xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function une(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class To{constructor(e,t){let r=0,i="";rU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(rU(this.data_)){const i=function rne(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new To(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new To(r,!0)}}static getBlob(...e){if(UA()){const t=e.map(r=>r instanceof To?r.data_:r);return new To(nne.apply(null,t))}{const t=e.map(o=>iE(o)?$A(Xi.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new To(i,!0)}}uploadData(){return this.data_}}function zA(n){let e;try{e=JSON.parse(n)}catch{return null}return function Kte(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function cU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function dne(n,e){return e}class wi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||dne}}let oE=null;function Dg(){if(oE)return oE;const n=[];n.push(new wi("bucket")),n.push(new wi("generation")),n.push(new wi("metageneration")),n.push(new wi("name","fullPath",!0));const t=new wi("name");t.xform=function e(s,o){return function hne(n){return!iE(n)||n.length<2?n:cU(n)}(o)},n.push(t);const i=new wi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new wi("timeCreated")),n.push(new wi("updated")),n.push(new wi("md5Hash",null,!0)),n.push(new wi("cacheControl",null,!0)),n.push(new wi("contentDisposition",null,!0)),n.push(new wi("contentEncoding",null,!0)),n.push(new wi("contentLanguage",null,!0)),n.push(new wi("contentType",null,!0)),n.push(new wi("metadata","customMetadata",!0)),oE=n,oE}function lU(n,e,t){const r=zA(e);return null===r?null:function pne(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function fne(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ii(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function HA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const dU="prefixes",hU="items";class bo{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Do(n){if(!n)throw VA()}function aE(n,e){return function t(r,i){const s=lU(n,i,e);return Do(null!==s),s}}function ah(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function kte(){return new Bn(Nn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Ote(){return new Bn(Nn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Nte(n){return new Bn(Nn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Fte(n){return new Bn(Nn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ag(n){const e=ah(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function xte(n){return new Bn(Nn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function fU(n,e,t){const i=ua(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new bo(i,"GET",aE(n,t),o);return a.errorHandler=Ag(e),a}function Ene(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=ua(e.bucketOnlyServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new bo(a,"GET",function yne(n,e){return function t(r,i){const s=function _ne(n,e,t){const r=zA(t);return null===r?null:function mne(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[dU])for(const i of t[dU]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new ii(e,s));r.prefixes.push(o)}if(t[hU])for(const i of t[hU]){const s=n._makeStorageReference(new ii(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Do(null!==s),s}}(n,e.bucket),c);return f.urlParams=s,f.errorHandler=ah(e),f}function gU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function bne(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class uE{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Do(!1)}return Do(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Sne={STATE_CHANGED:"state_changed"},Ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WA(n){switch(n){case"running":case"pausing":case"canceling":return Ti.RUNNING;case"paused":return Ti.PAUSED;case"success":return Ti.SUCCESS;case"canceled":return Ti.CANCELED;default:return Ti.ERROR}}class Rne{constructor(e,t,r){if(function Gte(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function uh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let yU=null;class Mne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Pne extends Mne{initXhr(){this.xhr_.responseType="text"}}function Us(){return yU?yU():new Pne}class vU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Dg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(sU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=J2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Dne(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=gU(e,r,i),a={name:o.fullPath},u=ua(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=HA(o,t),T=new bo(u,"POST",function I(R){let P;qA(R);try{P=R.getResponseHeader("X-Goog-Upload-URL")}catch{Do(!1)}return Do(iE(P)),P},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=ah(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Ane(n,e,t,r){const u=new bo(t,"POST",function s(c){const f=qA(c,["active","final"]);let m=null;try{m=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Do(!1)}m||Do(!1);const y=Number(m);return Do(!isNaN(y)),new uE(y,r.size(),"final"===f)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=ah(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Us,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new uE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Cne(n,e,t,r,i,s,o,a){const u=new uE(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function Bte(){return new Bn(Nn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=u.total-u.current;let f=c;i>0&&(f=Math.min(f,i));const m=u.current;let I="";I=0===f?"finalize":c===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${u.current}`},R=r.slice(m,m+f);if(null===R)throw eU();const G=new bo(t,"POST",function P(ne,Ee){const Me=qA(ne,["active","final"]),j=u.current+f,x=r.size();let L;return L="final"===Me?aE(e,s)(ne,Ee):null,new uE(j,x,"final"===Me,L)},e.maxUploadRetryTime);return G.headers=T,G.body=R.uploadData(),G.progressCallback=a||null,G.errorHandler=ah(n),G}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Us,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=fU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function mU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let G="";for(let ne=0;ne<2;ne++)G+=Math.random().toString().slice(2);return G}();o["Content-Type"]="multipart/related; boundary="+u;const c=gU(e,r,i),f=HA(c,t),I=To.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===I)throw eU();const T={name:c.fullPath},R=ua(s,n.host,n._protocol),H=n.maxUploadRetryTime,V=new bo(R,"POST",aE(n,t),H);return V.urlParams=T,V.headers=o,V.body=I.uploadData(),V.errorHandler=ah(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=X2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Rne(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WA(this._state)){case Ti.SUCCESS:uh(this._resolve.bind(null,this.snapshot))();break;case Ti.CANCELED:case Ti.ERROR:uh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WA(this._state)){case Ti.RUNNING:case Ti.PAUSED:e.next&&uh(e.next.bind(e,this.snapshot))();break;case Ti.SUCCESS:e.complete&&uh(e.complete.bind(e))();break;default:e.error&&uh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sc{constructor(e,t){this._service=e,this._location=t instanceof ii?t:ii.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sc(e,t)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cU(this._location.path)}get storage(){return this._service}get parent(){const e=function cne(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ii(this._location.bucket,e);return new Sc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nU(e)}}function IU(n,e,t){return GA.apply(this,arguments)}function GA(){return(GA=(0,ae.Z)(function*(n,e,t){const i=yield wU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield IU(n,e,i.nextPageToken))})).apply(this,arguments)}function wU(n,e){null!=e&&"number"==typeof e.maxResults&&BA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Ene(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Us)}function zne(n){n._throwIfRoot("getDownloadURL");const e=function Ine(n,e,t){const i=ua(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new bo(i,"GET",function vne(n,e){return function t(r,i){const s=lU(n,i,e);return Do(null!==s),function gne(n,e,t,r){const i=zA(e);if(null===i||!iE(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const m=n.fullPath;return ua("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+iU({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Ag(e),a}(n.storage,n._location,Dg());return n.storage.makeRequestWithTokens(e,Us).then(t=>{if(null===t)throw function jte(){return new Bn(Nn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function TU(n,e){const t=function lne(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ii(n._location.bucket,t);return new Sc(n.storage,r)}function bU(n,e){if(n instanceof KA){const t=n;if(null==t._bucket)throw function Ute(){return new Bn(Nn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Y2+"' property when initializing the app?")}();const r=new Sc(t,t._bucket);return null!=e?bU(r,e):r}return void 0!==e?TU(n,e):n}function Gne(n,e){if(e&&function qne(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KA)return function Wne(n,e){return new Sc(n,e)}(n,e);throw sh("To use ref(service, url), the first argument must be a Storage instance.")}return bU(n,e)}function DU(n,e){const t=e?.[Y2];return null==t?null:ii.makeFromBucketSpec(t,n)}class KA{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Q2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ii.makeFromBucketSpec(i,this._host):DU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ii.makeFromBucketSpec(this._url,e):DU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new zte(tU());{const o=function ene(n,e,t,r,i,s,o=!0){const a=iU(n.urlParams),u=n.url+a,c=Object.assign({},n.headers);return function Jte(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function Qte(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function Yte(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function Xte(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,r),new Zte(u,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const AU="@firebase/storage",SU="storage";function RU(n,e){return Gne(n=(0,lt.m9)(n),e)}function rre(n=(0,Hn.getApp)(),e){n=(0,lt.m9)(n);const r=(0,Hn._getProvider)(n,SU).getImmediate({identifier:e}),i=(0,lt.P0)("storage");return i&&MU(r,...i),r}function MU(n,e,t,r={}){!function Kne(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,lt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function ire(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KA(t,r,i,e,Hn.SDK_VERSION)}!function sre(){(0,Hn._registerComponent)(new $y.wA(SU,ire,"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(AU,"0.12.5",""),(0,Hn.registerVersion)(AU,"0.12.5","esm2017")}();class cE{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class PU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new cE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new cE(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new cE(o,this,this._ref)):{next:t.next?o=>t.next(new cE(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class xU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ca(e,this._service))}get items(){return this._delegate.items.map(e=>new ca(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ca{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function nre(n,e){return TU(n,e)}(this._delegate,e);return new ca(t,this.storage)}get root(){return new ca(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ca(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new PU(function Zne(n,e,t){return function Vne(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new vU(n,new To(e),t)}(n=(0,lt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Xi.RAW,r){this._throwIfRoot("putString");const i=$A(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new PU(new vU(this._delegate,new To(i.data,!0),s),this)}listAll(){return function Xne(n){return function Bne(n){const e={prefixes:[],items:[]};return IU(n,e).then(()=>e)}(n=(0,lt.m9)(n))}(this._delegate).then(e=>new xU(e,this.storage))}list(e){return function Jne(n,e){return wU(n=(0,lt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new xU(t,this.storage))}getMetadata(){return function Qne(n){return function jne(n){n._throwIfRoot("getMetadata");const e=fU(n.storage,n._location,Dg());return n.storage.makeRequestWithTokens(e,Us)}(n=(0,lt.m9)(n))}(this._delegate)}updateMetadata(e){return function Yne(n,e){return function $ne(n,e){n._throwIfRoot("updateMetadata");const t=function wne(n,e,t,r){const s=ua(e.fullServerUrl(),n.host,n._protocol),a=HA(t,r),c=n.maxOperationRetryTime,f=new bo(s,"PATCH",aE(n,r),c);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Ag(e),f}(n.storage,n._location,e,Dg());return n.storage.makeRequestWithTokens(t,Us)}(n=(0,lt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ere(n){return zne(n=(0,lt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function tre(n){return function Hne(n){n._throwIfRoot("deleteObject");const e=function Tne(n,e){const r=ua(e.fullServerUrl(),n.host,n._protocol),a=new bo(r,"DELETE",function o(u,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Ag(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Us)}(n=(0,lt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nU(e)}}class NU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(OU(e))throw sh("ref() expected a child path but got a URL, use refFromURL instead.");return new ca(RU(this._delegate,e),this)}refFromURL(e){if(!OU(e))throw sh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ii.makeFromUrl(e,this._delegate.host)}catch{throw sh("refFromUrl() expected a valid full URL but got an invalid one.")}return new ca(RU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){MU(this._delegate,e,t,r)}}function OU(n){return/^[A-Za-z]+:\/\//.test(n)}function cre(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new NU(t,r)}function kU(n){const e=function dre(n){return new ut(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(mO(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Oe(t=>t.bytesTransferred/t.totalBytes*100))}}function lE(n){return{getDownloadURL:()=>F(void 0).pipe(Gk,ke(()=>n.getDownloadURL()),vi),getMetadata:()=>F(void 0).pipe(Gk,ke(()=>n.getMetadata()),vi),delete:()=>b(n.delete()),child:e=>lE(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>kU(n.put(e,t)),putString:(e,t,r)=>kU(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function lre(n){const e={TaskState:Ti,TaskEvent:Sne,StringFormat:Xi,Storage:NU,Reference:ca};n.INTERNAL.registerComponent(new $y.wA("storage-compat",cre,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(fo.Z);const hre=new Ie("angularfire2.storageBucket"),fre=new Ie("angularfire2.storage.maxUploadRetryTime"),pre=new Ie("angularfire2.storage.maxOperationRetryTime"),gre=new Ie("angularfire2.storage.use-emulator");let mre=(()=>{class n{storage;constructor(t,r,i,s,o,a,u,c,f,m){const y=jy(t,o,r);this.storage=Nb(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),u&&I.setMaxUploadRetryTime(u),c&&I.setMaxOperationRetryTime(c),I},[u,c])}ref(t){return lE(this.storage.ref(t))}refFromURL(t){return lE(this.storage.refFromURL(t))}upload(t,r,i){return lE(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(de(Cp),de(Sp,8),de(hre,8),de(hs),de(At),de(yd),de(fre,8),de(pre,8),de(gre,8),de(Ap,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),_re=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=En({})}return n})(),yre=(()=>{class n{constructor(){fo.Z.registerVersion("angularfire",za.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[mre],imports:[_re]})}return n})();class ZA{constructor(e){return e}}const FU="storage",QA=new Ie("angularfire2.storage-instances");function Ire(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ZA(r)}}const wre={provide:class vre{constructor(){return By(FU)}},deps:[[new Vr,QA]]},Tre={provide:ZA,useFactory:function Ere(n,e){const t=Pb(FU,n,e);return t&&new ZA(t)},deps:[[new Vr,QA],ih]};let bre=(()=>{class n{constructor(){(0,Hn.registerVersion)("angularfire",za.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=En({providers:[Tre,wre]})}return n})();function Dre(n,...e){return{ngModule:bre,providers:[{provide:QA,useFactory:Ire(n),multi:!0,deps:[At,gi,yd,MA,[new Vr,NA],[new Vr,Ap],...e]}]}}const Are=xb(rre,!0);let Cre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$n({type:n,bootstrap:[pX]});static#n=this.\u0275inj=En({imports:[iO,hX,lte,L5,G5,uX,yre,x7.initializeApp(G2_firebase),mte(()=>_te(G2_firebase)),Cte(()=>Ste()),Dre(()=>Are())]})}return n})();b6().bootstrapModule(Cre).catch(n=>console.error(n))},106:(ts,Zn,Ke)=>{Ke.d(Zn,{Z:()=>Qn});var M=Ke(58),we=Ke(537),O=Ke(534),Ue=Ke(879);class xt{constructor(Xe,et){this._delegate=Xe,this.firebase=et,(0,O._addComponent)(Xe,new we.wA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Xe,et=O._DEFAULT_ENTRY_NAME){var ir;this._delegate.checkDestroyed();const mn=this._delegate.container.getProvider(Xe);return!mn.isInitialized()&&"EXPLICIT"===(null===(ir=mn.getComponent())||void 0===ir?void 0:ir.instantiationMode)&&mn.initialize(),mn.getImmediate({identifier:et})}_removeServiceInstance(Xe,et=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(et)}_addComponent(Xe){(0,O._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,O._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const On=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function St(){const Et=function Xt(Et){const Xe={},et={__esModule:!0,initializeApp:function gt(ot,Sn={}){const fe=O.initializeApp(ot,Sn);if((0,M.r3)(Xe,fe.name))return Xe[fe.name];const rn=new Et(fe,et);return Xe[fe.name]=rn,rn},app:mn,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function qr(ot){const Sn=ot.name,fe=Sn.replace("-compat","");if(O._registerComponent(ot)&&"PUBLIC"===ot.type){const rn=(Kt=mn())=>{if("function"!=typeof Kt[fe])throw On.create("invalid-app-argument",{appName:Sn});return Kt[fe]()};void 0!==ot.serviceProps&&(0,M.ZB)(rn,ot.serviceProps),et[fe]=rn,Et.prototype[fe]=function(...Kt){return this._getService.bind(this,Sn).apply(this,ot.multipleInstances?Kt:[])}}return"PUBLIC"===ot.type?et[fe]:null},removeApp:function ir(ot){delete Xe[ot]},useAsService:function Ft(ot,Sn){return"serverAuth"===Sn?null:Sn},modularAPIs:O}};function mn(ot){if(!(0,M.r3)(Xe,ot=ot||O._DEFAULT_ENTRY_NAME))throw On.create("no-app",{appName:ot});return Xe[ot]}return et.default=et,Object.defineProperty(et,"apps",{get:function Ut(){return Object.keys(Xe).map(ot=>Xe[ot])}}),mn.App=Et,et}(xt);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:St,extendNamespace:function Xe(et){(0,M.ZB)(Et,et)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),Et}(),ve=new Ue.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qn=le;!function Nt(Et){(0,O.registerVersion)("@firebase/app-compat","0.2.34",Et)}()},534:(ts,Zn,Ke)=>{Ke.r(Zn),Ke.d(Zn,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>Tr,_DEFAULT_ENTRY_NAME:()=>li,_addComponent:()=>Pr,_addOrOverwriteComponent:()=>en,_apps:()=>Rr,_clearComponents:()=>Si,_components:()=>yn,_getProvider:()=>kn,_isFirebaseApp:()=>Ds,_isFirebaseServerApp:()=>Qt,_registerComponent:()=>wr,_removeServiceInstance:()=>$s,_serverApps:()=>Mr,deleteApp:()=>Cs,getApp:()=>qs,getApps:()=>Ws,initializeApp:()=>As,initializeServerApp:()=>Hs,onLog:()=>b,registerVersion:()=>k,setLogLevel:()=>S});var M=Ke(861),we=Ke(537),O=Ke(879),Ue=Ke(58);const xt=(N,W)=>W.some(Q=>N instanceof Q);let gn,On;const le=new WeakMap,ve=new WeakMap,Be=new WeakMap,st=new WeakMap,Nt=new WeakMap;let Xe={get(N,W,Q){if(N instanceof IDBTransaction){if("done"===W)return ve.get(N);if("objectStoreNames"===W)return N.objectStoreNames||Be.get(N);if("store"===W)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return gt(N[W])},set:(N,W,Q)=>(N[W]=Q,!0),has:(N,W)=>N instanceof IDBTransaction&&("done"===W||"store"===W)||W in N};function mn(N){return"function"==typeof N?function ir(N){return N!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function St(){return On||(On=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(N)?function(...W){return N.apply(Ut(this),W),gt(le.get(this))}:function(...W){return gt(N.apply(Ut(this),W))}:function(W,...Q){const _e=N.call(Ut(this),W,...Q);return Be.set(_e,W.sort?W.sort():[W]),gt(_e)}}(N):(N instanceof IDBTransaction&&function Et(N){if(ve.has(N))return;const W=new Promise((Q,_e)=>{const tt=()=>{N.removeEventListener("complete",at),N.removeEventListener("error",ft),N.removeEventListener("abort",ft)},at=()=>{Q(),tt()},ft=()=>{_e(N.error||new DOMException("AbortError","AbortError")),tt()};N.addEventListener("complete",at),N.addEventListener("error",ft),N.addEventListener("abort",ft)});ve.set(N,W)}(N),xt(N,function Xt(){return gn||(gn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(N,Xe):N)}function gt(N){if(N instanceof IDBRequest)return function Qn(N){const W=new Promise((Q,_e)=>{const tt=()=>{N.removeEventListener("success",at),N.removeEventListener("error",ft)},at=()=>{Q(gt(N.result)),tt()},ft=()=>{_e(N.error),tt()};N.addEventListener("success",at),N.addEventListener("error",ft)});return W.then(Q=>{Q instanceof IDBCursor&&le.set(Q,N)}).catch(()=>{}),Nt.set(W,N),W}(N);if(st.has(N))return st.get(N);const W=mn(N);return W!==N&&(st.set(N,W),Nt.set(W,N)),W}const Ut=N=>Nt.get(N),ot=["get","getKey","getAll","getAllKeys","count"],Sn=["put","add","delete","clear"],fe=new Map;function rn(N,W){if(!(N instanceof IDBDatabase)||W in N||"string"!=typeof W)return;if(fe.get(W))return fe.get(W);const Q=W.replace(/FromIndex$/,""),_e=W!==Q,tt=Sn.includes(Q);if(!(Q in(_e?IDBIndex:IDBObjectStore).prototype)||!tt&&!ot.includes(Q))return;const at=function(){var ft=(0,M.Z)(function*(Ht,...It){const Ri=this.transaction(Ht,tt?"readwrite":"readonly");let So=Ri.store;return _e&&(So=So.index(It.shift())),(yield Promise.all([So[Q](...It),tt&&Ri.done]))[0]});return function(It){return ft.apply(this,arguments)}}();return fe.set(W,at),at}!function et(N){Xe=N(Xe)}(N=>({...N,get:(W,Q,_e)=>rn(W,Q)||N.get(W,Q,_e),has:(W,Q)=>!!rn(W,Q)||N.has(W,Q)}));class Kt{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function _n(N){const W=N.getComponent();return"VERSION"===W?.type}(Q)){const _e=Q.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(Q=>Q).join(" ")}}const ui="@firebase/app",ci="0.10.4",ut=new O.Yd("@firebase/app"),li="[DEFAULT]",$i={[ui]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Rr=new Map,Mr=new Map,yn=new Map;function Pr(N,W){try{N.container.addComponent(W)}catch(Q){ut.debug(`Component ${W.name} failed to register with FirebaseApp ${N.name}`,Q)}}function en(N,W){N.container.addOrOverwriteComponent(W)}function wr(N){const W=N.name;if(yn.has(W))return ut.debug(`There were multiple attempts to register component ${W}.`),!1;yn.set(W,N);for(const Q of Rr.values())Pr(Q,N);for(const Q of Mr.values())Pr(Q,N);return!0}function kn(N,W){const Q=N.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),N.container.getProvider(W)}function $s(N,W,Q=li){kn(N,W).clearInstance(Q)}function Ds(N){return void 0!==N.options}function Qt(N){return void 0!==N.settings}function Si(){yn.clear()}const Fn=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class sr{constructor(W,Q,_e){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new we.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}class vn extends sr{constructor(W,Q,_e,tt){const at=void 0!==Q.automaticDataCollectionEnabled&&Q.automaticDataCollectionEnabled,ft={name:_e,automaticDataCollectionEnabled:at};super(void 0!==W.apiKey?W:W.options,ft,tt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:at},Q),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Q.releaseOnDeref=void 0,k(ui,ci,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(W){this.isDeleted||(this._refCount++,void 0!==W&&this._finalizationRegistry.register(W,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Cs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}const Tr="10.12.1";function As(N,W={}){let Q=N;"object"!=typeof W&&(W={name:W});const _e=Object.assign({name:li,automaticDataCollectionEnabled:!1},W),tt=_e.name;if("string"!=typeof tt||!tt)throw Fn.create("bad-app-name",{appName:String(tt)});if(Q||(Q=(0,Ue.aH)()),!Q)throw Fn.create("no-options");const at=Rr.get(tt);if(at){if((0,Ue.vZ)(Q,at.options)&&(0,Ue.vZ)(_e,at.config))return at;throw Fn.create("duplicate-app",{appName:tt})}const ft=new we.H0(tt);for(const It of yn.values())ft.addComponent(It);const Ht=new sr(Q,_e,ft);return Rr.set(tt,Ht),Ht}function Hs(N,W){if((0,Ue.jU)())throw Fn.create("invalid-server-app-environment");let Q;void 0===W.automaticDataCollectionEnabled&&(W.automaticDataCollectionEnabled=!1),Q=Ds(N)?N.options:N;const _e=Object.assign(Object.assign({},W),Q);if(void 0!==_e.releaseOnDeref&&delete _e.releaseOnDeref,void 0!==W.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const at=""+(Ri=JSON.stringify(_e),[...Ri].reduce((So,cn)=>Math.imul(31,So)+cn.charCodeAt(0)|0,0)),ft=Mr.get(at);var Ri;if(ft)return ft.incRefCount(W.releaseOnDeref),ft;const Ht=new we.H0(at);for(const Ri of yn.values())Ht.addComponent(Ri);const It=new vn(Q,W,at,Ht);return Mr.set(at,It),It}function qs(N=li){const W=Rr.get(N);if(!W&&N===li&&(0,Ue.aH)())return As();if(!W)throw Fn.create("no-app",{appName:N});return W}function Ws(){return Array.from(Rr.values())}function Cs(N){return B.apply(this,arguments)}function B(){return(B=(0,M.Z)(function*(N){let W=!1;const Q=N.name;Rr.has(Q)?(W=!0,Rr.delete(Q)):Mr.has(Q)&&N.decRefCount()<=0&&(Mr.delete(Q),W=!0),W&&(yield Promise.all(N.container.getProviders().map(_e=>_e.delete())),N.isDeleted=!0)})).apply(this,arguments)}function k(N,W,Q){var _e;let tt=null!==(_e=$i[N])&&void 0!==_e?_e:N;Q&&(tt+=`-${Q}`);const at=tt.match(/\s|\//),ft=W.match(/\s|\//);if(at||ft){const Ht=[`Unable to register library "${tt}" with version "${W}":`];return at&&Ht.push(`library name "${tt}" contains illegal characters (whitespace or "/")`),at&&ft&&Ht.push("and"),ft&&Ht.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void ut.warn(Ht.join(" "))}wr(new we.wA(`${tt}-version`,()=>({library:tt,version:W}),"VERSION"))}function b(N,W){if(null!==N&&"function"!=typeof N)throw Fn.create("invalid-log-argument");(0,O.Am)(N,W)}function S(N){(0,O.Ub)(N)}const w="firebase-heartbeat-database",F=1,ce="firebase-heartbeat-store";let Ae=null;function ke(){return Ae||(Ae=function qr(N,W,{blocked:Q,upgrade:_e,blocking:tt,terminated:at}={}){const ft=indexedDB.open(N,W),Ht=gt(ft);return _e&&ft.addEventListener("upgradeneeded",It=>{_e(gt(ft.result),It.oldVersion,It.newVersion,gt(ft.transaction),It)}),Q&&ft.addEventListener("blocked",It=>Q(It.oldVersion,It.newVersion,It)),Ht.then(It=>{at&&It.addEventListener("close",()=>at()),tt&&It.addEventListener("versionchange",Ri=>tt(Ri.oldVersion,Ri.newVersion,Ri))}).catch(()=>{}),Ht}(w,F,{upgrade:(N,W)=>{if(0===W)try{N.createObjectStore(ce)}catch(Q){console.warn(Q)}}}).catch(N=>{throw Fn.create("idb-open",{originalErrorMessage:N.message})})),Ae}function Dt(){return(Dt=(0,M.Z)(function*(N){try{const Q=(yield ke()).transaction(ce),_e=yield Q.objectStore(ce).get(je(N));return yield Q.done,_e}catch(W){if(W instanceof Ue.ZR)ut.warn(W.message);else{const Q=Fn.create("idb-get",{originalErrorMessage:W?.message});ut.warn(Q.message)}}})).apply(this,arguments)}function Ce(N,W){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,M.Z)(function*(N,W){try{const _e=(yield ke()).transaction(ce,"readwrite");yield _e.objectStore(ce).put(W,je(N)),yield _e.done}catch(Q){if(Q instanceof Ue.ZR)ut.warn(Q.message);else{const _e=Fn.create("idb-set",{originalErrorMessage:Q?.message});ut.warn(_e.message)}}})).apply(this,arguments)}function je(N){return`${N.name}!${N.options.appId}`}class pa{constructor(W){this.container=W,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new ma(Q),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var W=this;return(0,M.Z)(function*(){var Q,_e;const at=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=Ze();if((null!=(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||(W._heartbeatsCache=yield W._heartbeatsCachePromise,null!=(null===(_e=W._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&W._heartbeatsCache.lastSentHeartbeatDate!==ft&&!W._heartbeatsCache.heartbeats.some(Ht=>Ht.date===ft))return W._heartbeatsCache.heartbeats.push({date:ft,agent:at}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(Ht=>{const It=new Date(Ht.date).valueOf();return Date.now()-It<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,M.Z)(function*(){var Q;if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null==(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||0===W._heartbeatsCache.heartbeats.length)return"";const _e=Ze(),{heartbeatsToSend:tt,unsentEntries:at}=function ga(N,W=1024){const Q=[];let _e=N.slice();for(const tt of N){const at=Q.find(ft=>ft.agent===tt.agent);if(at){if(at.dates.push(tt.date),Co(Q)>W){at.dates.pop();break}}else if(Q.push({agent:tt.agent,dates:[tt.date]}),Co(Q)>W){Q.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:Q,unsentEntries:_e}}(W._heartbeatsCache.heartbeats),ft=(0,Ue.L)(JSON.stringify({version:2,heartbeats:tt}));return W._heartbeatsCache.lastSentHeartbeatDate=_e,at.length>0?(W._heartbeatsCache.heartbeats=at,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),ft})()}}function Ze(){return(new Date).toISOString().substring(0,10)}class ma{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,M.Z)(function*(){if(yield W._canUseIndexedDBPromise){const _e=yield function Je(N){return Dt.apply(this,arguments)}(W.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const at=yield Q.read();return Ce(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:at.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const at=yield Q.read();return Ce(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...W.heartbeats]})}})()}}function Co(N){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:N})).length}!function Nc(N){wr(new we.wA("platform-logger",W=>new Kt(W),"PRIVATE")),wr(new we.wA("heartbeat",W=>new pa(W),"PRIVATE")),k(ui,ci,N),k(ui,ci,"esm2017"),k("fire-js","")}("")},537:(ts,Zn,Ke)=>{Ke.d(Zn,{H0:()=>Xt,wA:()=>O});var M=Ke(861),we=Ke(58);class O{constructor(le,ve,Be){this.name=le,this.instanceFactory=ve,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const Ue="[DEFAULT]";class xt{constructor(le,ve){this.name=le,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ve=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ve)){const Be=new we.BH;if(this.instancesDeferred.set(ve,Be),this.isInitialized(ve)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:ve});st&&Be.resolve(st)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(le){var ve;const Be=this.normalizeInstanceIdentifier(le?.identifier),st=null!==(ve=le?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Nt){if(st)return null;throw Nt}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function On(St){return"EAGER"===St.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[ve,Be]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(ve);try{const Nt=this.getOrInitializeService({instanceIdentifier:st});Be.resolve(Nt)}catch{}}}}clearInstance(le=Ue){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,M.Z)(function*(){const ve=Array.from(le.instances.values());yield Promise.all([...ve.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...ve.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=Ue){return this.instances.has(le)}getOptions(le=Ue){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ve={}}=le,Be=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Be,options:ve});for(const[Nt,Qn]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Nt)&&Qn.resolve(st);return st}onInit(le,ve){var Be;const st=this.normalizeInstanceIdentifier(ve),Nt=null!==(Be=this.onInitCallbacks.get(st))&&void 0!==Be?Be:new Set;Nt.add(le),this.onInitCallbacks.set(st,Nt);const Qn=this.instances.get(st);return Qn&&le(Qn,st),()=>{Nt.delete(le)}}invokeOnInitCallbacks(le,ve){const Be=this.onInitCallbacks.get(ve);if(Be)for(const st of Be)try{st(le,ve)}catch{}}getOrInitializeService({instanceIdentifier:le,options:ve={}}){let Be=this.instances.get(le);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(St=le,St===Ue?void 0:St),options:ve}),this.instances.set(le,Be),this.instancesOptions.set(le,ve),this.invokeOnInitCallbacks(Be,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Be)}catch{}var St;return Be||null}normalizeInstanceIdentifier(le=Ue){return this.component?this.component.multipleInstances?le:Ue:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xt{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ve=this.getProvider(le.name);if(ve.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ve.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ve=new xt(le,this);return this.providers.set(le,ve),ve}getProviders(){return Array.from(this.providers.values())}}},879:(ts,Zn,Ke)=>{Ke.d(Zn,{Am:()=>St,Ub:()=>Xt,Yd:()=>On,in:()=>we});const M=[];var we=function(le){return le[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",le}(we||{});const O={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Ue=we.INFO,xt={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},gn=(le,ve,...Be)=>{if(ve<le.logLevel)return;const st=(new Date).toISOString(),Nt=xt[ve];if(!Nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Nt](`[${st}]  ${le.name}:`,...Be)};class On{constructor(ve){this.name=ve,this._logLevel=Ue,this._logHandler=gn,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in we))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?O[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...ve),this._logHandler(this,we.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...ve),this._logHandler(this,we.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,we.INFO,...ve),this._logHandler(this,we.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,we.WARN,...ve),this._logHandler(this,we.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...ve),this._logHandler(this,we.ERROR,...ve)}}function Xt(le){M.forEach(ve=>{ve.setLogLevel(le)})}function St(le,ve){for(const Be of M){let st=null;ve&&ve.level&&(st=O[ve.level]),Be.userLogHandler=null===le?null:(Nt,Qn,...Et)=>{const Xe=Et.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");Qn>=(st??Nt.logLevel)&&le({level:we[Qn].toLowerCase(),message:Xe,args:Et,type:Nt.name})}}}},365:(ts,Zn,Ke)=>{Ke.r(Zn);var M=Ke(861),we=Ke(106),O=Ke(455),Ue=Ke(58),On=(Ke(534),Ke(879),Ke(537));function Xt(){return window}function ve(){return ve=(0,M.Z)(function*(b,S,w){var F;const{BuildInfo:ce}=Xt();(0,O.au)(S.sessionId,"AuthEvent did not contain a session ID");const Ae=yield function et(b){return ir.apply(this,arguments)}(S.sessionId),ke={};return(0,O.av)()?ke.ibi=ce.packageName:(0,O.aw)()?ke.apn=ce.packageName:(0,O.ax)(b,"operation-not-supported-in-this-environment"),ce.displayName&&(ke.appDisplayName=ce.displayName),ke.sessionId=Ae,(0,O.ay)(b,w,S.type,void 0,null!==(F=S.eventId)&&void 0!==F?F:void 0,ke)}),ve.apply(this,arguments)}function st(){return(st=(0,M.Z)(function*(b){const{BuildInfo:S}=Xt(),w={};(0,O.av)()?w.iosBundleId=S.packageName:(0,O.aw)()?w.androidPackageName=S.packageName:(0,O.ax)(b,"operation-not-supported-in-this-environment"),yield(0,O.az)(b,w)})).apply(this,arguments)}function Et(){return(Et=(0,M.Z)(function*(b,S,w){const{cordova:F}=Xt();let ce=()=>{};try{yield new Promise((Ae,ke)=>{let Je=null;function Dt(){var je;Ae();const or=null===(je=F.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof or&&or(),"function"==typeof w?.close&&w.close()}function Ce(){Je||(Je=window.setTimeout(()=>{ke((0,O.aB)(b,"redirect-cancelled-by-user"))},2e3))}function Bt(){"visible"===document?.visibilityState&&Ce()}S.addPassiveListener(Dt),document.addEventListener("resume",Ce,!1),(0,O.aw)()&&document.addEventListener("visibilitychange",Bt,!1),ce=()=>{S.removePassiveListener(Dt),document.removeEventListener("resume",Ce,!1),document.removeEventListener("visibilitychange",Bt,!1),Je&&window.clearTimeout(Je)}})}finally{ce()}})).apply(this,arguments)}function ir(){return(ir=(0,M.Z)(function*(b){const S=function mn(b){if((0,O.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const S=new ArrayBuffer(b.length),w=new Uint8Array(S);for(let F=0;F<b.length;F++)w[F]=b.charCodeAt(F);return w}(b),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(ce=>ce.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ut extends O.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function ot(b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,M.Z)(function*(b){const S=yield Kt()._get(_n(b));return S&&(yield Kt()._remove(_n(b))),S})).apply(this,arguments)}function rn(){const b=[];for(let w=0;w<20;w++){const F=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return b.join("")}function Kt(){return(0,O.aE)(O.b)}function _n(b){return(0,O.aF)("authEvent",b.config.apiKey,b.name)}function ut(b){if(!b?.includes("?"))return{};const[S,...w]=b.split("?");return(0,Ue.zd)(w.join("?"))}const ee=class Ai{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const F=S._key();let ce=w.eventManagers.get(F);return ce||(ce=new Ut(S),w.eventManagers.set(F,ce),w.attachCallbackListeners(S,ce)),ce})()}_openPopup(S){(0,O.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,F,ce){var Ae=this;return(0,M.Z)(function*(){!function Xe(b){var S,w,F,ce,Ae,ke,Je,Dt,Ce,Bt;const je=Xt();(0,O.aC)("function"==typeof(null===(S=je?.universalLinks)||void 0===S?void 0:S.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aC)(typeof(null===(w=je?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aC)("function"==typeof(null===(Ae=null===(ce=null===(F=je?.cordova)||void 0===F?void 0:F.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ae?void 0:Ae.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(Dt=null===(Je=null===(ke=je?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===Je?void 0:Je.browsertab)||void 0===Dt?void 0:Dt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(Bt=null===(Ce=je?.cordova)||void 0===Ce?void 0:Ce.InAppBrowser)||void 0===Bt?void 0:Bt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const ke=yield Ae._initialize(S);yield ke.initialized(),ke.resetRedirect(),(0,O.aI)(),yield Ae._originValidation(S);const Je=function qr(b,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:rn(),postBody:null,tenantId:b.tenantId,error:(0,O.aB)(b,"no-auth-event")}}(S,F,ce);yield function Ft(b,S){return Kt()._set(_n(b),S)}(S,Je);const Dt=yield function le(b,S,w){return ve.apply(this,arguments)}(S,Je,w),Ce=yield function Nt(b){const{cordova:S}=Xt();return new Promise(w=>{S.plugins.browsertab.isAvailable(F=>{let ce=null;F?S.plugins.browsertab.openUrl(b):ce=S.InAppBrowser.open(b,(0,O.aA)()?"_blank":"_system","location=yes"),w(ce)})})}(Dt);return function Qn(b,S,w){return Et.apply(this,arguments)}(S,ke,Ce)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Be(b){return st.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:F,handleOpenURL:ce,BuildInfo:Ae}=Xt(),ke=setTimeout((0,M.Z)(function*(){yield ot(S),w.onEvent(re())}),500),Je=function(){var Bt=(0,M.Z)(function*(je){clearTimeout(ke);const or=yield ot(S);let Ao=null;or&&je?.url&&(Ao=function fe(b,S){var w,F;const ce=function ci(b){const S=ut(b),w=S.link?decodeURIComponent(S.link):void 0,F=ut(w).link,ce=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return ut(ce).link||ce||F||w||b}(S);if(ce.includes("/__/auth/callback")){const Ae=ut(ce),ke=Ae.firebaseError?function ui(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Ae.firebaseError)):null,Je=null===(F=null===(w=ke?.code)||void 0===w?void 0:w.split("auth/"))||void 0===F?void 0:F[1],Dt=Je?(0,O.aB)(Je):null;return Dt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:ce,postBody:null}}return null}(or,je.url)),w.onEvent(Ao||re())});return function(or){return Bt.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,Je);const Dt=ce,Ce=`${Ae.packageName.toLowerCase()}://`;Xt().handleOpenURL=function(){var Bt=(0,M.Z)(function*(je){if(je.toLowerCase().startsWith(Ce)&&Je({url:je}),"function"==typeof Dt)try{Dt(je)}catch(or){console.error(or)}});return function(je){return Bt.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aB)("no-auth-event")}}function De(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Oe(b=(0,Ue.z$)()){return!("file:"!==De()&&"ionic:"!==De()&&"capacitor:"!==De()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yn(){try{const b=self.localStorage,S=O.aN();if(b)return b.setItem(S,"1"),b.removeItem(S),!function Zt(b=(0,Ue.z$)()){return function bt(){return(0,Ue.w1)()&&11===document?.documentMode}()||function sn(b=(0,Ue.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Ue.hl)()}catch{return Rn()&&(0,Ue.hl)()}return!1}function Rn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jn(){return(function mt(){return"http:"===De()||"https:"===De()}()||(0,Ue.ru)()||Oe())&&!function Le(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&Yn()&&!Rn()}function hr(){return Oe()&&typeof document<"u"}function Ts(){return(Ts=(0,M.Z)(function*(){return!!hr()&&new Promise(b=>{const S=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),b(!0)})})})).apply(this,arguments)}const Lt={LOCAL:"local",NONE:"none",SESSION:"session"},Ci=O.aC,js="persistence";function li(b){return $i.apply(this,arguments)}function $i(){return($i=(0,M.Z)(function*(b){yield b._initializationPromise;const S=Mr(),w=O.aF(js,b.config.apiKey,b.name);S&&S.setItem(w,b._getPersistence())})).apply(this,arguments)}function Mr(){var b;try{return(null===(b=function ji(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const yn=O.aC;class Pr{constructor(){this.browserResolver=O.aE(O.k),this.cordovaResolver=O.aE(ee),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,F,ce){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openPopup(S,w,F,ce)})()}_openRedirect(S,w,F,ce){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openRedirect(S,w,F,ce)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return hr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function Sr(){return Ts.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function en(b){return b.unwrap()}function kn(b){return Ds(b)}function Ds(b){const{_tokenResponse:S}=b instanceof Ue.ZR?b.customData:b;if(!S)return null;if(!(b instanceof Ue.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return O.P.credentialFromResult(b);const w=S.providerId;if(!w||w===O.p.PASSWORD)return null;let F;switch(w){case O.p.GOOGLE:F=O.X;break;case O.p.FACEBOOK:F=O.W;break;case O.p.GITHUB:F=O.Y;break;case O.p.TWITTER:F=O.$;break;default:const{oauthIdToken:ce,oauthAccessToken:Ae,oauthTokenSecret:ke,pendingToken:Je,nonce:Dt}=S;return Ae||ke||ce||Je?Je?w.startsWith("saml.")?O.aQ._create(w,Je):O.N._fromParams({providerId:w,signInMethod:w,pendingToken:Je,idToken:ce,accessToken:Ae}):new O.Z(w).credential({idToken:ce,accessToken:Ae,rawNonce:Dt}):null}return b instanceof Ue.ZR?F.credentialFromError(b):F.credentialFromResult(b)}function Qt(b,S){return S.catch(w=>{throw w instanceof Ue.ZR&&function $s(b,S){var w;const F=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Fn(b,O.as(b,S));else if(F){const ce=Ds(S),Ae=S;ce&&(Ae.credential=ce,Ae.tenantId=F.tenantId||void 0,Ae.email=F.email||void 0,Ae.phoneNumber=F.phoneNumber||void 0)}}(b,w),w}).then(w=>{const ce=w.user;return{operationType:w.operationType,credential:kn(w),additionalUserInfo:O.aq(w),user:sr.getOrCreate(ce)}})}function Si(b,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,M.Z)(function*(b,S){const w=yield S;return{verificationId:w.verificationId,confirm:F=>Qt(b,w.confirm(F))}})).apply(this,arguments)}class Fn{constructor(S,w){this.resolver=w,this.auth=function wr(b){return b.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Qt(en(this.auth),this.resolver.resolveSignIn(S))}}class sr{constructor(S){this._delegate=S,this.multiFactor=O.at(S)}static getOrCreate(S){return sr.USER_MAP.has(S)||sr.USER_MAP.set(S,new sr(S)),sr.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return Qt(w.auth,O.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var F=this;return(0,M.Z)(function*(){return Si(F.auth,O.l(F._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return Qt(w.auth,O.d(w._delegate,S,Pr))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield li(O.aJ(w.auth)),O.g(w._delegate,S,Pr)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return Qt(w.auth,O.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return Si(this.auth,O.r(this._delegate,S,w))}reauthenticateWithPopup(S){return Qt(this.auth,O.e(this._delegate,S,Pr))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield li(O.aJ(w.auth)),O.h(w._delegate,S,Pr)})()}sendEmailVerification(S){return O.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield O.ap(w._delegate,S),w})()}updateEmail(S){return O.al(this._delegate,S)}updatePassword(S){return O.am(this._delegate,S)}updatePhoneNumber(S){return O.u(this._delegate,S)}updateProfile(S){return O.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return O.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sr.USER_MAP=new WeakMap;const vn=O.aC;let Tr=(()=>{class b{constructor(w,F){if(this.app=w,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ce}=w.options;vn(ce,"invalid-api-key",{appName:w.name}),vn(ce,"invalid-api-key",{appName:w.name});const Ae=typeof window<"u"?Pr:void 0;this._delegate=F.initialize({options:{persistence:Hs(ce,w.name),popupRedirectResolver:Ae}}),this._delegate._updateErrorMap(O.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,F){O.K(this._delegate,w,F)}applyActionCode(w){return O.a7(this._delegate,w)}checkActionCode(w){return O.a8(this._delegate,w)}confirmPasswordReset(w,F){return O.a6(this._delegate,w,F)}createUserWithEmailAndPassword(w,F){var ce=this;return(0,M.Z)(function*(){return Qt(ce._delegate,O.aa(ce._delegate,w,F))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return O.af(this._delegate,w)}isSignInWithEmailLink(w){return O.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){vn(Jn(),w._delegate,"operation-not-supported-in-this-environment");const F=yield O.j(w._delegate,Pr);return F?Qt(w._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function oe(b,S){(0,O.aJ)(b)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,F,ce){const{next:Ae,error:ke,complete:Je}=As(w,F,ce);return this._delegate.onAuthStateChanged(Ae,ke,Je)}onIdTokenChanged(w,F,ce){const{next:Ae,error:ke,complete:Je}=As(w,F,ce);return this._delegate.onIdTokenChanged(Ae,ke,Je)}sendSignInLinkToEmail(w,F){return O.ac(this._delegate,w,F)}sendPasswordResetEmail(w,F){return O.a5(this._delegate,w,F||void 0)}setPersistence(w){var F=this;return(0,M.Z)(function*(){let ce;switch(function bs(b,S){Ci(Object.values(Lt).includes(S),b,"invalid-persistence-type"),(0,Ue.b$)()?Ci(S!==Lt.SESSION,b,"unsupported-persistence-type"):(0,Ue.UG)()?Ci(S===Lt.NONE,b,"unsupported-persistence-type"):Rn()?Ci(S===Lt.NONE||S===Lt.LOCAL&&(0,Ue.hl)(),b,"unsupported-persistence-type"):Ci(S===Lt.NONE||Yn(),b,"unsupported-persistence-type")}(F._delegate,w),w){case Lt.SESSION:ce=O.a;break;case Lt.LOCAL:ce=(yield O.aE(O.i)._isAvailable())?O.i:O.b;break;case Lt.NONE:ce=O.U;break;default:return O.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(ce)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Qt(this._delegate,O.a0(this._delegate))}signInWithCredential(w){return Qt(this._delegate,O.a1(this._delegate,w))}signInWithCustomToken(w){return Qt(this._delegate,O.a4(this._delegate,w))}signInWithEmailAndPassword(w,F){return Qt(this._delegate,O.ab(this._delegate,w,F))}signInWithEmailLink(w,F){return Qt(this._delegate,O.ae(this._delegate,w,F))}signInWithPhoneNumber(w,F){return Si(this._delegate,O.s(this._delegate,w,F))}signInWithPopup(w){var F=this;return(0,M.Z)(function*(){return vn(Jn(),F._delegate,"operation-not-supported-in-this-environment"),Qt(F._delegate,O.c(F._delegate,w,Pr))})()}signInWithRedirect(w){var F=this;return(0,M.Z)(function*(){return vn(Jn(),F._delegate,"operation-not-supported-in-this-environment"),yield li(F._delegate),O.f(F._delegate,w,Pr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return O.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Lt,b})();function As(b,S,w){let F=b;"function"!=typeof b&&({next:F,error:S,complete:w}=b);const ce=F;return{next:ke=>ce(ke&&sr.getOrCreate(ke)),error:S,complete:w}}function Hs(b,S){const w=function Rr(b,S){const w=Mr();if(!w)return[];const F=O.aF(js,b,S);switch(w.getItem(F)){case Lt.NONE:return[O.U];case Lt.LOCAL:return[O.i,O.a];case Lt.SESSION:return[O.a];default:return[]}}(b,S);if(typeof self<"u"&&!w.includes(O.i)&&w.push(O.i),typeof window<"u")for(const F of[O.b,O.a])w.includes(F)||w.push(F);return w.includes(O.U)||w.push(O.U),w}class qs{constructor(){this.providerId="phone",this._delegate=new O.P(en(we.Z.auth()))}static credential(S,w){return O.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}qs.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,qs.PROVIDER_ID=O.P.PROVIDER_ID;const Ws=O.aC;class Cs{constructor(S,w,F=we.Z.app()){var ce;Ws(null===(ce=F.options)||void 0===ce?void 0:ce.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new O.R(F.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function k(b){b.INTERNAL.registerComponent(new On.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),F=S.getProvider("auth");return new Tr(w,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.V,FacebookAuthProvider:O.W,GithubAuthProvider:O.Y,GoogleAuthProvider:O.X,OAuthProvider:O.Z,SAMLAuthProvider:O._,PhoneAuthProvider:qs,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Cs,TwitterAuthProvider:O.$,Auth:Tr,AuthCredential:O.L,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.8")}(we.Z)},861:(ts,Zn,Ke)=>{function M(O,Ue,xt,gn,On,Xt,St){try{var le=O[Xt](St),ve=le.value}catch(Be){return void xt(Be)}le.done?Ue(ve):Promise.resolve(ve).then(gn,On)}function we(O){return function(){var Ue=this,xt=arguments;return new Promise(function(gn,On){var Xt=O.apply(Ue,xt);function St(ve){M(Xt,gn,On,St,le,"next",ve)}function le(ve){M(Xt,gn,On,St,le,"throw",ve)}St(void 0)})}}Ke.d(Zn,{Z:()=>we})},582:(ts,Zn,Ke)=>{function Ue(ee,re){var oe={};for(var ue in ee)Object.prototype.hasOwnProperty.call(ee,ue)&&re.indexOf(ue)<0&&(oe[ue]=ee[ue]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ue=Object.getOwnPropertySymbols(ee);he<ue.length;he++)re.indexOf(ue[he])<0&&Object.prototype.propertyIsEnumerable.call(ee,ue[he])&&(oe[ue[he]]=ee[ue[he]])}return oe}function Be(ee,re,oe,ue){return new(oe||(oe=Promise))(function(se,De){function mt(bt){try{Le(ue.next(bt))}catch(sn){De(sn)}}function Oe(bt){try{Le(ue.throw(bt))}catch(sn){De(sn)}}function Le(bt){bt.done?se(bt.value):function he(se){return se instanceof oe?se:new oe(function(De){De(se)})}(bt.value).then(mt,Oe)}Le((ue=ue.apply(ee,re||[])).next())})}function gt(ee){return this instanceof gt?(this.v=ee,this):new gt(ee)}function Ut(ee,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ue=oe.apply(ee,re||[]),se=[];return he={},De("next"),De("throw"),De("return"),he[Symbol.asyncIterator]=function(){return this},he;function De(Zt){ue[Zt]&&(he[Zt]=function(Yn){return new Promise(function(Rn,Jn){se.push([Zt,Yn,Rn,Jn])>1||mt(Zt,Yn)})})}function mt(Zt,Yn){try{!function Oe(Zt){Zt.value instanceof gt?Promise.resolve(Zt.value.v).then(Le,bt):sn(se[0][2],Zt)}(ue[Zt](Yn))}catch(Rn){sn(se[0][3],Rn)}}function Le(Zt){mt("next",Zt)}function bt(Zt){mt("throw",Zt)}function sn(Zt,Yn){Zt(Yn),se.shift(),se.length&&mt(se[0][0],se[0][1])}}function Ft(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function Et(ee){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&ee[re],ue=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ue>=ee.length&&(ee=void 0),{value:ee&&ee[ue++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},ue("next"),ue("throw"),ue("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ue(se){oe[se]=ee[se]&&function(De){return new Promise(function(mt,Oe){!function he(se,De,mt,Oe){Promise.resolve(Oe).then(function(Le){se({value:Le,done:mt})},De)}(mt,Oe,(De=ee[se](De)).done,De.value)})}}}Ke.d(Zn,{FC:()=>Ut,KL:()=>Ft,_T:()=>Ue,mG:()=>Be,qq:()=>gt}),"function"==typeof SuppressedError&&SuppressedError}},ts=>{ts(ts.s=862)}]);
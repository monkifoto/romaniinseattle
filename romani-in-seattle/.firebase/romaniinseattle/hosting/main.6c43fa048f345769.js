"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{455:(ss,Qn,Ge)=>{Ge.d(Qn,{$:()=>am,A:()=>Ee,G:()=>Ot,K:()=>bh,L:()=>xo,N:()=>zi,P:()=>Om,R:()=>xm,U:()=>Xe,V:()=>wa,W:()=>Ju,X:()=>kh,Y:()=>Oh,Z:()=>bt,_:()=>Nc,a:()=>Ra,a0:()=>cm,a1:()=>ol,a2:()=>Kr,a3:()=>dm,a4:()=>hm,a5:()=>fm,a6:()=>cl,a7:()=>QE,a8:()=>Pe,a9:()=>hn,aA:()=>Hu,aB:()=>Ut,aC:()=>fe,aD:()=>hs,aE:()=>Ae,aF:()=>Dt,aG:()=>Il,aH:()=>Bm,aI:()=>pI,aJ:()=>un,aN:()=>Ma,aQ:()=>Gr,aa:()=>kc,ab:()=>ba,ac:()=>Vn,ad:()=>Ca,ae:()=>rt,af:()=>Un,ag:()=>Aa,ah:()=>Oc,ak:()=>Fc,al:()=>yt,am:()=>ZD,ap:()=>ZE,aq:()=>Lr,as:()=>eS,at:()=>vm,au:()=>Zt,av:()=>Mo,aw:()=>Ke,ax:()=>mt,ay:()=>Dl,az:()=>qm,b:()=>JE,c:()=>Fm,d:()=>Ye,e:()=>Lm,f:()=>Pt,g:()=>ls,h:()=>_r,i:()=>tI,j:()=>mI,k:()=>Xm,l:()=>cs,m:()=>lS,p:()=>en,r:()=>km,s:()=>sf,u:()=>Qr});var M=Ge(861),we=Ge(534),k=Ge(58),Ue=Ge(879),kt=Ge(582),mn=Ge(537);const en={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ot=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Yn=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new Ue.Yd("@firebase/auth");function _n(p,...l){et.logLevel<=Ue.in.ERROR&&et.error(`Auth (${we.SDK_VERSION}): ${p}`,...l)}function mt(p,...l){throw Sn(p,...l)}function Ut(p,...l){return Sn(p,...l)}function qr(p,l,d){const g=Object.assign(Object.assign({},Yn()),{[l]:d});return new k.LL("auth","Firebase",g).create(l,{appName:p.name})}function Lt(p){return qr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ot(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&mt(p,"argument-error"),qr(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return wt.create(p,...l)}function fe(p,l,...d){if(!p)throw Sn(l,...d)}function sn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw _n(l),new Error(l)}function Zt(p,l){p||sn(l)}function yn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ui(){return"http:"===li()||"https:"===li()}function li(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Di{constructor(l,d){this.shortDelay=l,this.longDelay=d,Zt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ui()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(p,l){Zt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class re{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Di(3e4,6e4);function he(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function se(p,l,d,g){return Te.apply(this,arguments)}function Te(){return(Te=(0,M.Z)(function*(p,l,d,g,v={}){return _t(p,v,(0,M.Z)(function*(){let C={},$={};g&&("GET"===l?$=g:C={body:JSON.stringify(g)});const J=(0,k.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),pe=yield p._getAdditionalHeaders();return pe["Content-Type"]="application/json",p.languageCode&&(pe["X-Firebase-Locale"]=p.languageCode),re.fetch()(on(p,p.config.apiHost,d,J),Object.assign({method:l,headers:pe,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function _t(p,l,d){return Me.apply(this,arguments)}function Me(){return(Me=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},oe),l);try{const v=new Xn(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield C.json();if("needConfirmation"in $)throw Rn(p,"account-exists-with-different-credential",$);if(C.ok&&!("errorMessage"in $))return $;{const J=C.ok?$.errorMessage:$.error.message,[pe,xe]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pe)throw Rn(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===pe)throw Rn(p,"email-already-in-use",$);if("USER_DISABLED"===pe)throw Rn(p,"user-disabled",$);const He=g[pe]||pe.toLowerCase().replace(/[_\s]+/g,"-");if(xe)throw qr(p,He,xe);mt(p,He)}}catch(v){if(v instanceof k.ZR)throw v;mt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Le(p,l,d,g){return At.apply(this,arguments)}function At(){return(At=(0,M.Z)(function*(p,l,d,g,v={}){const C=yield se(p,l,d,g,v);return"mfaPendingCredential"in C&&mt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function on(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ee(p.config,v):`${p.config.apiScheme}://${v}`}function Qt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Ut(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Ut(p,l,g);return v.customData._tokenResponse=d,v}function Jn(p){return void 0!==p&&void 0!==p.getResponse}function gr(p){return void 0!==p&&void 0!==p.enterprise}class Pr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return Qt(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function $i(){return($i=(0,M.Z)(function*(p){return(yield se(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ft(p,l){return Si.apply(this,arguments)}function Si(){return(Si=(0,M.Z)(function*(p,l){return se(p,"GET","/v2/recaptchaConfig",he(p,l))})).apply(this,arguments)}function Ds(){return(Ds=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function Hi(){return(Hi=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function xr(p,l){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function vn(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Cr(){return(Cr=(0,M.Z)(function*(p,l=!1){const d=(0,k.m9)(p),g=yield d.getIdToken(l),v=Ws(g);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,$=C?.sign_in_provider;return{claims:v,token:g,authTime:vn(On(v.auth_time)),issuedAtTime:vn(On(v.iat)),expirationTime:vn(On(v.exp)),signInProvider:$||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function On(p){return 1e3*Number(p)}function Ws(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return _n("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,k.tV)(d);return v?JSON.parse(v):(_n("Failed to decode base64 JWT payload"),null)}catch(v){return _n("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Ss(p){const l=Ws(p);return fe(l,"internal-error"),fe(typeof l.exp<"u","internal-error"),fe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Yt(p,l){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof k.ZR&&function Rs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Fn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class or{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function En(p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield Yt(p,xr(d,{idToken:g}));fe(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const $=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?Zs(C.providerUserInfo):[],J=function Ks(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,$),He=!!p.isAnonymous&&!(p.email&&C.passwordHash||J?.length),vt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:J,metadata:new or(C.createdAt,C.lastLoginAt),isAnonymous:He};Object.assign(p,vt)})).apply(this,arguments)}function Gs(){return(Gs=(0,M.Z)(function*(p){const l=(0,k.m9)(p);yield En(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Zs(p){return p.map(l=>{var{providerId:d}=l,g=(0,kt._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function B(){return(B=(0,M.Z)(function*(p,l){const d=yield _t(p,{},(0,M.Z)(function*(){const g=(0,k.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,$=on(p,v,"/v1/token",`key=${C}`),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",re.fetch()($,{method:"POST",headers:J,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,M.Z)(function*(p,l){return se(p,"POST","/v2/accounts:revokeToken",he(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){fe(l.idToken,"internal-error"),fe(typeof l.idToken<"u","internal-error"),fe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Ss(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){fe(0!==l.length,"internal-error");const d=Ss(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(fe(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:$}=yield function Ps(p,l){return B.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number($))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,$=new S;return g&&(fe("string"==typeof g,"internal-error",{appName:l}),$.refreshToken=g),v&&(fe("string"==typeof v,"internal-error",{appName:l}),$.accessToken=v),C&&(fe("number"==typeof C,"internal-error",{appName:l}),$.expirationTime=C),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return sn("not implemented")}}function w(p,l){fe("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class O{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,kt._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new or(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield Yt(d,d.stsTokenManager.getToken(d.auth,l));return fe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function tn(p){return Cr.apply(this,arguments)}(this,l)}reload(){return function Ms(p){return Gs.apply(this,arguments)}(this)}_assign(l){this!==l&&(fe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new O(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield En(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(l.auth.app))return Promise.reject(Lt(l.auth));const d=yield l.getIdToken();return yield Yt(l,function qs(p,l){return Ds.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,$,J,pe,xe,He;const vt=null!==(g=d.displayName)&&void 0!==g?g:void 0,vr=null!==(v=d.email)&&void 0!==v?v:void 0,Yr=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,Pl=null!==($=d.photoURL)&&void 0!==$?$:void 0,Sf=null!==(J=d.tenantId)&&void 0!==J?J:void 0,xl=null!==(pe=d._redirectEventId)&&void 0!==pe?pe:void 0,Fa=null!==(xe=d.createdAt)&&void 0!==xe?xe:void 0,e_=null!==(He=d.lastLoginAt)&&void 0!==He?He:void 0,{uid:Er,emailVerified:t_,isAnonymous:Rf,providerData:Wc,stsTokenManager:n_}=d;fe(Er&&n_,l,"internal-error");const r_=S.fromJSON(this.name,n_);fe("string"==typeof Er,l,"internal-error"),w(vt,l.name),w(vr,l.name),fe("boolean"==typeof t_,l,"internal-error"),fe("boolean"==typeof Rf,l,"internal-error"),w(Yr,l.name),w(Pl,l.name),w(Sf,l.name),w(xl,l.name),w(Fa,l.name),w(e_,l.name);const La=new O({uid:Er,auth:l,email:vr,emailVerified:t_,displayName:vt,isAnonymous:Rf,photoURL:Pl,phoneNumber:Yr,tenantId:Sf,stsTokenManager:r_,createdAt:Fa,lastLoginAt:e_});return Wc&&Array.isArray(Wc)&&(La.providerData=Wc.map(Va=>Object.assign({},Va))),xl&&(La._redirectEventId=xl),La}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const C=new O({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield En(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?Zs(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||C?.length),J=new S;J.updateFromIdToken(g);const pe=new O({uid:v.localId,auth:l,stsTokenManager:J,isAnonymous:$}),xe={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new or(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(pe,xe),pe})()}}const ue=new Map;function Ae(p){Zt(p instanceof Function,"Expected a class definition");let l=ue.get(p);return l?(Zt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,ue.set(p,l),l)}const Xe=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Dt(p,l,d){return`firebase:${p}:${l}:${d}`}class De{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Dt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Dt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?O._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new De(Ae(Xe),l,g);const v=(yield Promise.all(d.map(function(){var xe=(0,M.Z)(function*(He){if(yield He._isAvailable())return He});return function(He){return xe.apply(this,arguments)}}()))).filter(xe=>xe);let C=v[0]||Ae(Xe);const $=Dt(g,l.config.apiKey,l.name);let J=null;for(const xe of d)try{const He=yield xe._get($);if(He){const vt=O._fromJSON(l,He);xe!==C&&(J=vt),C=xe;break}}catch{}const pe=v.filter(xe=>xe._shouldAllowMigration);return C._shouldAllowMigration&&pe.length?(C=pe[0],J&&(yield C._set($,J.toJSON())),yield Promise.all(d.map(function(){var xe=(0,M.Z)(function*(He){if(He!==C)try{yield He._remove($)}catch{}});return function(He){return xe.apply(this,arguments)}}())),new De(C,l,g)):new De(C,l,g)})()}}function Bt(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(ya(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(je(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(va(l))return"Blackberry";if(Ea(l))return"Webos";if(ar(l))return"Safari";if((l.includes("chrome/")||Ro(l))&&!l.includes("edge/"))return"Chrome";if(Ke(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function je(p=(0,k.z$)()){return/firefox\//i.test(p)}function ar(p=(0,k.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Ro(p=(0,k.z$)()){return/crios\//i.test(p)}function ya(p=(0,k.z$)()){return/iemobile/i.test(p)}function Ke(p=(0,k.z$)()){return/android/i.test(p)}function va(p=(0,k.z$)()){return/blackberry/i.test(p)}function Ea(p=(0,k.z$)()){return/webos/i.test(p)}function Mo(p=(0,k.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Hu(p=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Q(p=(0,k.z$)()){return Mo(p)||Ke(p)||Ea(p)||va(p)||/windows phone/i.test(p)||ya(p)}function tt(p,l=[]){let d;switch(p){case"Browser":d=Bt((0,k.z$)());break;case"Worker":d=`${Bt((0,k.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${we.SDK_VERSION}/${g}`}class ct{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise(($,J)=>{try{$(l(C))}catch(pe){J(pe)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function qt(){return(qt=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v2/passwordPolicy",he(p,l))})).apply(this,arguments)}class Mi{constructor(l){var d,g,v,C;const $=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,$,J;const pe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,pe),this.validatePasswordCharacterOptions(l,pe),pe.isValid&&(pe.isValid=null===(d=pe.meetsMinPasswordLength)||void 0===d||d),pe.isValid&&(pe.isValid=null===(g=pe.meetsMaxPasswordLength)||void 0===g||g),pe.isValid&&(pe.isValid=null===(v=pe.containsLowercaseLetter)||void 0===v||v),pe.isValid&&(pe.isValid=null===(C=pe.containsUppercaseLetter)||void 0===C||C),pe.isValid&&(pe.isValid=null===($=pe.containsNumericCharacter)||void 0===$||$),pe.isValid&&(pe.isValid=null===(J=pe.containsNonAlphanumericCharacter)||void 0===J||J),pe}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class Po{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new ct(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Ae(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield De.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield xr(d,{idToken:l}),v=yield O._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,we._isFirebaseServerApp)(d.app)){const J=d.app.settings.authIdToken;return J?new Promise(pe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(J).then(pe,pe))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,$=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const J=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,pe=C?._redirectEventId,xe=yield d.tryRedirectSignIn(l);(!J||J===pe)&&xe?.user&&(C=xe.user,$=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(C)}catch(J){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(J))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield En(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Cs(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(d.app))return Promise.reject(Lt(d));const g=l?(0,k.m9)(l):null;return g&&fe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&fe(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,we._isFirebaseServerApp)(l.app)?Promise.reject(Lt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,we._isFirebaseServerApp)(this.app)?Promise.reject(Lt(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(Ae(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function ft(p){return qt.apply(this,arguments)}(l),g=new Mi(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new k.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,l){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Ae(l)||d._popupRedirectResolver;fe(g,d,"argument-error"),d.redirectPersistenceManager=yield De.create(d,[Ae(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let $=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(J,this,"internal-error"),J.then(()=>{$||C(this.currentUser)}),"function"==typeof d){const pe=l.addObserver(d,g,v);return()=>{$=!0,pe()}}{const pe=l.addObserver(d);return()=>{$=!0,pe()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=tt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function sr(p,...l){et.logLevel<=Ue.in.WARN&&et.warn(`Auth (${we.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function un(p){return(0,k.m9)(p)}class Qs{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,k.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zu={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yg(p){return zu.loadJS(p)}function Xg(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Ze{constructor(l){this.type="recaptcha-enterprise",this.auth=un(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function C(){return C=(0,M.Z)(function*(J){if(!d){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var pe=(0,M.Z)(function*(xe,He){Ft(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vt=>{if(void 0!==vt.recaptchaKey){const vr=new Pr(vt);return null==J.tenantId?J._agentRecaptchaConfig=vr:J._tenantRecaptchaConfigs[J.tenantId]=vr,xe(vr.siteKey)}He(new Error("recaptcha Enterprise site key undefined"))}).catch(vt=>{He(vt)})});return function(xe,He){return pe.apply(this,arguments)}}())}),C.apply(this,arguments)}function $(J,pe,xe){const He=window.grecaptcha;gr(He)?He.enterprise.ready(()=>{He.enterprise.execute(J,{action:l}).then(vt=>{pe(vt)}).catch(()=>{pe("NO_RECAPTCHA")})}):xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,pe)=>{(function v(J){return C.apply(this,arguments)})(g.auth).then(xe=>{if(!d&&gr(window.grecaptcha))$(xe,J,pe);else{if(typeof window>"u")return void pe(new Error("RecaptchaVerifier is only supported in browser"));let He=function HE(){return zu.recaptchaEnterpriseScript}();0!==He.length&&(He+=xe),Yg(He).then(()=>{$(xe,J,pe)}).catch(vt=>{pe(vt)})}}).catch(xe=>{pe(xe)})})})()}}function zE(p,l,d){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,M.Z)(function*(p,l,d,g=!1){const v=new Ze(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const $=Object.assign({},l);return Object.assign($,g?{captchaResp:C}:{captchaResponse:C}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function qu(p,l,d,g){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield zE(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,M.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield zE(p,l,d,"getOobCode"===d);return g(p,J)}return Promise.reject($)});return function($){return C.apply(this,arguments)}}())}),Ne.apply(this,arguments)}function bh(p,l,d){const g=un(p);fe(g._canInitEmulator,g,"emulator-config-failed"),fe(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=em(l),{host:$,port:J}=function Gu(p){const l=em(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:Ac(g.substr(C.length+1))}}{const[C,$]=g.split(":");return{host:C,port:Ac($)}}}(l);g.config.emulator={url:`${C}//${$}${null===J?"":`:${J}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:J,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Ch(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function em(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function Ac(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class xo{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return sn("not implemented")}_getIdTokenResponse(l){return sn("not implemented")}_linkToIdToken(l,d){return sn("not implemented")}_getReauthenticationResolver(l){return sn("not implemented")}}function tm(p,l){return pt.apply(this,arguments)}function pt(){return(pt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:resetPassword",he(p,l))})).apply(this,arguments)}function Ku(){return(Ku=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Wr(p,l){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Wt(){return(Wt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",he(p,l))})).apply(this,arguments)}function WD(p,l){return nm.apply(this,arguments)}function nm(){return(nm=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPassword",he(p,l))})).apply(this,arguments)}function ye(p,l){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendOobCode",he(p,l))})).apply(this,arguments)}function Qu(){return(Qu=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function Sh(p,l){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function Mh(p,l){return rm.apply(this,arguments)}function rm(){return(rm=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function im(){return(im=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function sm(){return(sm=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}function Rc(){return(Rc=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}class Ys extends xo{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new Ys(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new Ys(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return qu(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",WD);case"emailLink":return function KD(p,l){return sm.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:mt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return qu(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wr);case"emailLink":return function Sc(p,l){return Rc.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:mt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function xs(p,l){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithIdp",he(p,l))})).apply(this,arguments)}class zi extends xo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new zi(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):mt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,kt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new zi(g,v);return $.idToken=C.idToken||void 0,$.accessToken=C.accessToken||void 0,$.secret=C.secret,$.nonce=C.nonce,$.pendingToken=C.pendingToken||null,$}_getIdTokenResponse(l){return xs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,xs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,xs(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,k.xO)(d)}return l}}function xh(){return(xh=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendVerificationCode",he(p,l))})).apply(this,arguments)}function Nh(){return(Nh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l))})).apply(this,arguments)}function Yu(){return(Yu=(0,M.Z)(function*(p,l){const d=yield Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l));if(d.temporaryProof)throw Rn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ke={USER_NOT_FOUND:"user-not-found"};function Mc(){return(Mc=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),ke)})).apply(this,arguments)}class qi extends xo{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new qi({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new qi({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function Xs(p,l){return Nh.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function le(p,l){return Yu.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Xu(p,l){return Mc.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new qi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class Pc{constructor(l){var d,g,v,C,$,J;const pe=(0,k.zd)((0,k.pd)(l)),xe=null!==(d=pe.apiKey)&&void 0!==d?d:null,He=null!==(g=pe.oobCode)&&void 0!==g?g:null,vt=function GE(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=pe.mode)&&void 0!==v?v:null);fe(xe&&He&&vt,"argument-error"),this.apiKey=xe,this.operation=vt,this.code=He,this.continueUrl=null!==(C=pe.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==($=pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=pe.tenantId)&&void 0!==J?J:null}static parseLink(l){const d=function KE(p){const l=(0,k.zd)((0,k.pd)(p)).link,d=l?(0,k.zd)((0,k.pd)(l)).deep_link_id:null,g=(0,k.zd)((0,k.pd)(p)).deep_link_id;return(g?(0,k.zd)((0,k.pd)(g)).link:null)||g||d||l||p}(l);try{return new Pc(d)}catch{return null}}}let wa=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Ys._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Pc.parseLink(g);return fe(v,"argument-error"),Ys._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class $n{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Or extends $n{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class bt extends Or{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),zi._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return fe(l.idToken||l.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return bt.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return bt.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:$,providerId:J}=l;if(!g&&!v&&!d&&!C||!J)return null;try{return new bt(J)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:C})}catch{return null}}}let Ju=(()=>{class p extends Or{constructor(){super("facebook.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),kh=(()=>{class p extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Oh=(()=>{class p extends Or{constructor(){super("github.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Gr extends xo{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return xs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,xs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,xs(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Gr(g,C):null}static _create(l,d){return new Gr(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nc extends $n{constructor(l){fe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Nc.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Nc.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Gr.fromJSON(l);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return Gr._create(g,d)}catch{return null}}}let am=(()=>{class p extends Or{constructor(){super("twitter.com")}static credential(d,g){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function el(p,l){return tl.apply(this,arguments)}function tl(){return(tl=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signUp",he(p,l))})).apply(this,arguments)}class hi{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const C=yield O._fromIdTokenResponse(l,g,v),$=Ta(g);return new hi({user:C,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=Ta(g);return new hi({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function Ta(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function cm(p){return nl.apply(this,arguments)}function nl(){return(nl=(0,M.Z)(function*(p){var l;if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const d=un(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new hi({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield el(d,{returnSecureToken:!0}),v=yield hi._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class rl extends k.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,rl.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new rl(l,d,g,v)}}function Fh(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?rl._fromErrorAndOperation(p,C,l,g):C})}function um(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function ZE(p,l){return fi.apply(this,arguments)}function fi(){return fi=(0,M.Z)(function*(p,l){const d=(0,k.m9)(p);yield sl(!0,d,l);const{providerUserInfo:g}=yield function di(p,l){return Hi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=um(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),fi.apply(this,arguments)}function Lh(p,l){return il.apply(this,arguments)}function il(){return(il=(0,M.Z)(function*(p,l,d=!1){const g=yield Yt(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return hi._forOperation(p,"link",g)})).apply(this,arguments)}function sl(p,l,d){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,M.Z)(function*(p,l,d){yield En(l);const v=!1===p?"provider-already-linked":"no-such-provider";fe(um(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function lm(p,l){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,we._isFirebaseServerApp)(g.app))return Promise.reject(Lt(g));const v="reauthenticate";try{const C=yield Yt(p,Fh(g,v,l,p),d);fe(C.idToken,g,"internal-error");const $=Ws(C.idToken);fe($,g,"internal-error");const{sub:J}=$;return fe(p.uid===J,g,"user-mismatch"),hi._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&mt(g,"user-mismatch"),C}})).apply(this,arguments)}function Bh(p,l){return jh.apply(this,arguments)}function jh(){return(jh=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g="signIn",v=yield Fh(p,g,l),C=yield hi._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ol(p,l){return $h.apply(this,arguments)}function $h(){return($h=(0,M.Z)(function*(p,l){return Bh(un(p),l)})).apply(this,arguments)}function Kr(p,l){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,M.Z)(function*(p,l){const d=(0,k.m9)(p);return yield sl(!1,d,l.providerId),Lh(d,l)})).apply(this,arguments)}function dm(p,l){return zh.apply(this,arguments)}function zh(){return(zh=(0,M.Z)(function*(p,l){return lm((0,k.m9)(p),l)})).apply(this,arguments)}function qh(){return(qh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithCustomToken",he(p,l))})).apply(this,arguments)}function hm(p,l){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,M.Z)(function*(p,l){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const d=un(p),g=yield function Ln(p,l){return qh.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield hi._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Gt.apply(this,arguments)}class cr{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Ct._fromServerResponse(l,d):"totpInfo"in d?er._fromServerResponse(l,d):mt(l,"internal-error")}}class Ct extends cr{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Ct(d)}}class er extends cr{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new er(d)}}function ur(p,l,d){var g;fe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function eo(p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,M.Z)(function*(p){const l=un(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function fm(p,l,d){return al.apply(this,arguments)}function al(){return(al=(0,M.Z)(function*(p,l,d){const g=un(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&ur(g,v,d),yield qu(g,v,"getOobCode",Sh)})).apply(this,arguments)}function cl(p,l,d){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,M.Z)(function*(p,l,d){yield tm((0,k.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&eo(p),v});return function(v){return g.apply(this,arguments)}}())}),Wh.apply(this,arguments)}function QE(p,l){return dn.apply(this,arguments)}function dn(){return dn=(0,M.Z)(function*(p,l){yield function qD(p,l){return Wt.apply(this,arguments)}((0,k.m9)(p),{oobCode:l})}),dn.apply(this,arguments)}function Pe(p,l){return nt.apply(this,arguments)}function nt(){return(nt=(0,M.Z)(function*(p,l){const d=(0,k.m9)(p),g=yield tm(d,{oobCode:l}),v=g.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(g.mfaInfo,d,"internal-error");default:fe(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=cr._fromServerResponse(un(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function hn(p,l){return pi.apply(this,arguments)}function pi(){return(pi=(0,M.Z)(function*(p,l){const{data:d}=yield Pe((0,k.m9)(p),l);return d.email})).apply(this,arguments)}function kc(p,l,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=un(p),$=yield qu(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",el).catch(pe=>{throw"auth/password-does-not-meet-requirements"===pe.code&&eo(p),pe}),J=yield hi._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(J.user),J})).apply(this,arguments)}function ba(p,l,d){return(0,we._isFirebaseServerApp)(p.app)?Promise.reject(Lt(p)):ol((0,k.m9)(p),wa.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&eo(p),v});return function(v){return g.apply(this,arguments)}}())}function Vn(p,l,d){return os.apply(this,arguments)}function os(){return(os=(0,M.Z)(function*(p,l,d){const g=un(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C($,J){fe(J.handleCodeInApp,g,"argument-error"),J&&ur(g,$,J)})(v,d),yield qu(g,v,"getOobCode",Mh)})).apply(this,arguments)}function Ca(p,l){const d=Pc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function rt(p,l,d){return No.apply(this,arguments)}function No(){return(No=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=(0,k.m9)(p),v=wa.credentialWithLink(l,d||yn());return fe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ol(g,v)})).apply(this,arguments)}function to(){return(to=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:createAuthUri",he(p,l))})).apply(this,arguments)}function Un(p,l){return ko.apply(this,arguments)}function ko(){return ko=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:ui()?yn():"http://localhost"},{signinMethods:v}=yield function pm(p,l){return to.apply(this,arguments)}((0,k.m9)(p),g);return v||[]}),ko.apply(this,arguments)}function Aa(p,l){return xi.apply(this,arguments)}function xi(){return xi=(0,M.Z)(function*(p,l){const d=(0,k.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&ur(d.auth,v,l);const{email:C}=yield function Dh(p,l){return Qu.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),xi.apply(this,arguments)}function Oc(p,l,d){return ul.apply(this,arguments)}function ul(){return ul=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&ur(g.auth,C,d);const{email:$}=yield function GD(p,l){return im.apply(this,arguments)}(g.auth,C);$!==p.email&&(yield p.reload())}),ul.apply(this,arguments)}function Wi(){return(Wi=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Fc(p,l){return Oo.apply(this,arguments)}function Oo(){return Oo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,k.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},$=yield Yt(g,function no(p,l){return Wi.apply(this,arguments)}(g.auth,C));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const J=g.providerData.find(({providerId:pe})=>"password"===pe);J&&(J.displayName=g.displayName,J.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),Oo.apply(this,arguments)}function yt(p,l){const d=(0,k.m9)(p);return(0,we._isFirebaseServerApp)(d.auth.app)?Promise.reject(Lt(d.auth)):ll(d,l,null)}function ZD(p,l){return ll((0,k.m9)(p),null,l)}function ll(p,l,d){return dl.apply(this,arguments)}function dl(){return dl=(0,M.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const $=yield Yt(p,function Ah(p,l){return Ku.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary($,!0)}),dl.apply(this,arguments)}class Ns{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Fo extends Ns{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Lc extends Ns{constructor(l,d){super(l,"facebook.com",d)}}class mr extends Fo{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class QD extends Ns{constructor(l,d){super(l,"google.com",d)}}class Zr extends Fo{constructor(l,d,g){super(l,"twitter.com",d,g)}}function Lr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function as(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(l=Ws(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new Ns(C,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new Lc(C,v);case"github.com":return new mr(C,v);case"google.com":return new QD(C,v);case"twitter.com":return new Zr(C,v,p.screenName||null);case"custom":case"anonymous":return new Ns(C,null);default:return new Ns(C,g,v)}}(d)}class Sa{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new Sa("enroll",l,d)}static _fromMfaPendingCredential(l){return new Sa("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Sa._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return Sa._fromIdtoken(l.multiFactorSession.idToken)}return null}}class _m{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=un(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(J=>cr._fromServerResponse(g,J));fe(v.mfaPendingCredential,g,"internal-error");const $=Sa._fromMfaPendingCredential(v.mfaPendingCredential);return new _m($,C,function(){var J=(0,M.Z)(function*(pe){const xe=yield pe._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const He=Object.assign(Object.assign({},v),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(d.operationType){case"signIn":const vt=yield hi._fromIdTokenResponse(g,d.operationType,He);return yield g._updateCurrentUser(vt.user),vt;case"reauthenticate":return fe(d.user,g,"internal-error"),hi._forOperation(d.user,d.operationType,He);default:mt(g,"internal-error")}});return function(pe){return J.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function eS(p,l){var d;const g=(0,k.m9)(p),v=l;return fe(l.customData.operationType,g,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),_m._fromError(g,v)}class ym{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>cr._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new ym(l)}getSession(){var l=this;return(0,M.Z)(function*(){return Sa._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,C=yield g.getSession(),$=yield Yt(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield Yt(d.user,function iS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const hl=new WeakMap;function vm(p){const l=(0,k.m9)(p);return hl.has(l)||hl.set(l,ym._fromUser(l)),hl.get(l)}const Zh="__sak";class XE{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const JE=(()=>{class p extends XE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sS(){const p=(0,k.z$)();return ar(p)||Mo(p)}()&&function _e(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Q(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((J,pe,xe)=>{this.notifyListeners(J,xe)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(v);if(d.newValue!==J)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const J=this.storage.getItem(v);!g&&this.localCache[v]===J||this.notifyListeners(v,J)},$=this.storage.getItem(v);!function W(){return(0,k.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,M.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Ra=(()=>{class p extends XE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Em=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:C,eventType:$,data:J}=v.data,pe=g.handlersMap[$];if(!pe?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:$});const xe=Array.from(pe).map(function(){var vt=(0,M.Z)(function*(vr){return vr(v.origin,J)});return function(vr){return vt.apply(this,arguments)}}()),He=yield function Ni(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(xe);v.ports[0].postMessage({status:"done",eventId:C,eventType:$,response:He})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Ma(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class Im{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let $,J;return new Promise((pe,xe)=>{const He=Ma("",20);C.port1.start();const vt=setTimeout(()=>{xe(new Error("unsupported_event"))},g);J={messageChannel:C,onMessage(vr){const Yr=vr;if(Yr.data.eventId===He)switch(Yr.data.status){case"ack":clearTimeout(vt),$=setTimeout(()=>{xe(new Error("timeout"))},3e3);break;case"done":clearTimeout($),pe(Yr.data.response);break;default:clearTimeout(vt),clearTimeout($),xe(new Error("invalid_response"))}}},v.handlers.add(J),C.port1.addEventListener("message",J.onMessage),v.target.postMessage({eventType:l,eventId:He,data:d},[C.port2])}).finally(()=>{J&&v.removeMessageHandler(J)})})()}}function Bn(){return window}function fl(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function Vc(){return(Vc=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xh="firebaseLocalStorageDb",io="firebaseLocalStorage",Vo="fbase_key";class Pa{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Jh(p,l){return p.transaction([io],l?"readwrite":"readonly").objectStore(io)}function bm(){const p=indexedDB.open(Xh,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(io,{keyPath:Vo})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(io)?l(g):(g.close(),yield function oS(){const p=indexedDB.deleteDatabase(Xh);return new Pa(p).toPromise()}(),l(yield bm()))}))})}function Cm(p,l,d){return ef.apply(this,arguments)}function ef(){return(ef=(0,M.Z)(function*(p,l,d){const g=Jh(p,!0).put({[Vo]:l,value:d});return new Pa(g).toPromise()})).apply(this,arguments)}function gl(){return(gl=(0,M.Z)(function*(p,l){const d=Jh(p,!1).get(l),g=yield new Pa(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function ml(p,l){const d=Jh(p,!0).delete(l);return new Pa(d).toPromise()}const tI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield bm()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return fl()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=Em._getInstance(function Tm(){return fl()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Yh(){return Vc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Im(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function wm(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield bm();return yield Cm(d,Zh,"1"),yield ml(d,Zh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(C=>Cm(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(C=>function aS(p,l){return gl.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>ml(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries($=>{const J=Jh($,!1).getAll();return new Pa(J).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:$,value:J}of g)C.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(J)&&(d.notifyListeners($,J),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!C.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),_l=1e12;class Sm{constructor(l){this.auth=l,this.counter=_l,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new sI(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||_l;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||_l))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||_l))||void 0===g||g.execute(),""})()}}class sI{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rm(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nf=Xg("rcb"),cS=new Di(3e4,6e4);class oI{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Bn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return fe(function Uo(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Jn(Bn().grecaptcha)?Promise.resolve(Bn().grecaptcha):new Promise((g,v)=>{const C=Bn().setTimeout(()=>{v(Ut(l,"network-request-failed"))},cS.get());Bn()[nf]=()=>{Bn().clearTimeout(C),delete Bn()[nf];const J=Bn().grecaptcha;if(!J||!Jn(J))return void v(Ut(l,"internal-error"));const pe=J.render;J.render=(xe,He)=>{const vt=pe(xe,He);return this.counter++,vt},this.hostLanguage=d,g(J)},Yg(`${function jD(){return zu.recaptchaV2Script}()}?${(0,k.xO)({onload:nf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Ut(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Bn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mm{load(l){return(0,M.Z)(function*(){return new Sm(l)})()}clearedOneInstance(){}}const Pm="recaptcha",aI={theme:"light",type:"image"};class xm{constructor(l,d,g=Object.assign({},aI)){this.parameters=g,this.type=Pm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(l),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mm:new oI,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const $=J=>{J&&(l.tokenChangeListeners.delete($),C(J))};l.tokenChangeListeners.add($),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Bn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){fe(ui()&&!fl(),l.auth,"internal-error"),yield function Nm(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function As(p){return $i.apply(this,arguments)}(l.auth);fe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rf{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=qi._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function sf(p,l,d){return af.apply(this,arguments)}function af(){return(af=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=un(p),v=yield xa(g,l,(0,k.m9)(d));return new rf(v,C=>ol(g,C))})).apply(this,arguments)}function cs(p,l,d){return yl.apply(this,arguments)}function yl(){return(yl=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);yield sl(!1,g,"phone");const v=yield xa(g.auth,l,(0,k.m9)(d));return new rf(v,C=>Kr(g,C))})).apply(this,arguments)}function km(p,l,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth));const v=yield xa(g.auth,l,(0,k.m9)(d));return new rf(v,C=>dm(g,C))})).apply(this,arguments)}function xa(p,l,d){return Na.apply(this,arguments)}function Na(){return Na=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===Pm,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const $=C.session;if("phoneNumber"in C)return fe("enroll"===$.type,p,"internal-error"),(yield function tS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,l))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===$.type,p,"internal-error");const J=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return fe(J,p,"missing-multi-factor-info"),(yield function nI(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:start",he(p,l))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Ia(p,l){return xh.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),Na.apply(this,arguments)}function Qr(p,l){return cf.apply(this,arguments)}function cf(){return(cf=(0,M.Z)(function*(p,l){const d=(0,k.m9)(p);if((0,we._isFirebaseServerApp)(d.auth.app))return Promise.reject(Lt(d.auth));yield Lh(d,l)})).apply(this,arguments)}let Om=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=un(d)}verifyPhoneNumber(d,g){return xa(this.auth,d,(0,k.m9)(g))}static credential(d,g){return qi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?qi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function ki(p,l){return l?Ae(l):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Vr extends xo{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return xs(l,this._buildIdpRequest())}_linkToIdToken(l,d){return xs(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return xs(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function cI(p){return Bh(p.auth,new Vr(p),p.bypassAuthState)}function uI(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),lm(d,new Vr(p),p.bypassAuthState)}function lI(p){return us.apply(this,arguments)}function us(){return(us=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),Lh(d,new Vr(p),p.bypassAuthState)})).apply(this,arguments)}class uf{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:$,error:J,type:pe}=l;if(J)return void d.reject(J);const xe={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(pe)(xe))}catch(He){d.reject(He)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return cI;case"linkViaPopup":case"linkViaRedirect":return lI;case"reauthViaPopup":case"reauthViaRedirect":return uI;default:mt(this.auth,"internal-error")}}resolve(l){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dI=new Di(2e3,1e4);function Fm(p,l,d){return vl.apply(this,arguments)}function vl(){return(vl=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p,"operation-not-supported-in-this-environment"));const g=un(p);ot(p,l,$n);const v=ki(g,d);return new Vm(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function Lm(p,l,d){return lf.apply(this,arguments)}function lf(){return(lf=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ut(g.auth,"operation-not-supported-in-this-environment"));ot(g.auth,l,$n);const v=ki(g.auth,d);return new Vm(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function Ye(p,l,d){return El.apply(this,arguments)}function El(){return(El=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);ot(g.auth,l,$n);const v=ki(g.auth,d);return new Vm(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let Vm=(()=>{class p extends uf{constructor(d,g,v,C,$){super(d,g,C,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return fe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){Zt(1===d.filter.length,"Popup operations only handle one event");const g=Ma();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Ut(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,dI.get())};d()}}return p.currentPopupAction=null,p})();const hI="pendingRedirect",Uc=new Map;class fI extends uf{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=Uc.get(d.auth._key());if(!g){try{const C=(yield function Um(p,l){return so.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Uc.set(d.auth._key(),g)}return d.bypassAuthState||Uc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function so(){return(so=(0,M.Z)(function*(p,l){const d=ge(l),g=jm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function df(p,l){return hf.apply(this,arguments)}function hf(){return(hf=(0,M.Z)(function*(p,l){return jm(p)._set(ge(l),"true")})).apply(this,arguments)}function pI(){Uc.clear()}function Bm(p,l){Uc.set(p._key(),l)}function jm(p){return Ae(p._redirectPersistence)}function ge(p){return Dt(hI,p.config.apiKey,p.name)}function Pt(p,l,d){return function gI(p,l,d){return ff.apply(this,arguments)}(p,l,d)}function ff(){return(ff=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=un(p);ot(p,l,$n),yield g._initializationPromise;const v=ki(g,d);return yield df(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function _r(p,l,d){return function $m(p,l,d){return Bo.apply(this,arguments)}(p,l,d)}function Bo(){return(Bo=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);if(ot(g.auth,l,$n),(0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth));yield g.auth._initializationPromise;const v=ki(g.auth,d);yield df(v,g.auth);const C=yield ds(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function ls(p,l,d){return function pf(p,l,d){return Bc.apply(this,arguments)}(p,l,d)}function Bc(){return(Bc=(0,M.Z)(function*(p,l,d){const g=(0,k.m9)(p);ot(g.auth,l,$n),yield g.auth._initializationPromise;const v=ki(g.auth,d);yield sl(!1,g,l.providerId),yield df(v,g.auth);const C=yield ds(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function mI(p,l){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,M.Z)(function*(p,l){return yield un(p)._initializationPromise,Il(p,l,!1)})).apply(this,arguments)}function Il(p,l){return yr.apply(this,arguments)}function yr(){return(yr=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=un(p),v=ki(g,l),$=yield new fI(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,l)),$})).apply(this,arguments)}function ds(p){return wl.apply(this,arguments)}function wl(){return(wl=(0,M.Z)(function*(p){const l=Ma(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class hs{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function _I(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!gf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Ut(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zm(l))}saveEventToCache(l){this.cachedEventUids.add(zm(l)),this.lastProcessedEventTime=Date.now()}}function zm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function gf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function qm(p){return jc.apply(this,arguments)}function jc(){return(jc=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v1/projects",l)})).apply(this,arguments)}const mf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wm=/^https?/;function yf(){return(yf=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield qm(p);for(const d of l)try{if(Gm(d))return}catch{}mt(p,"unauthorized-domain")})).apply(this,arguments)}function Gm(p){const l=yn(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!Wm.test(d))return!1;if(mf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const vf=new Di(3e4,6e4);function Ef(){const p=Bn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let $c=null;const If=new Di(5e3,15e3),yI="__/auth/iframe",vI="emulator/auth/iframe",Ur={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function In(p){const l=p.config;fe(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ee(l,vI):`https://${p.config.authDomain}/${yI}`,g={apiKey:l.apiKey,appName:p.name,v:we.SDK_VERSION},v=jo.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,k.xO)(g).slice(1)}`}function wf(){return wf=(0,M.Z)(function*(p){const l=yield function Zm(p){return $c=$c||function Km(p){return new Promise((l,d)=>{var g,v,C;function $(){Ef(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Ef(),d(Ut(p,"network-request-failed"))},timeout:vf.get()})}if(null!==(v=null===(g=Bn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=Bn().gapi)||void 0===C||!C.load){const J=Xg("iframefcb");return Bn()[J]=()=>{gapi.load?$():d(Ut(p,"network-request-failed"))},Yg(`${function $D(){return zu.gapiScript}()}?onload=${J}`).catch(pe=>d(pe))}$()}}).catch(l=>{throw $c=null,l})}(p),$c}(p),d=Bn().gapi;return fe(d,p,"internal-error"),l.open({where:document.body,url:In(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ur,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(C,$){yield g.restyle({setHideOnLeave:!1});const J=Ut(p,"network-request-failed"),pe=Bn().setTimeout(()=>{$(J)},If.get());function xe(){Bn().clearTimeout(pe),C(g)}g.ping(xe).then(xe,()=>{$(J)})});return function(C,$){return v.apply(this,arguments)}}()))}),wf.apply(this,arguments)}const II={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ks{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Cl="__/auth/handler",Al="emulator/auth/handler",Tf=encodeURIComponent("fac");function Dl(p,l,d,g,v,C){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,M.Z)(function*(p,l,d,g,v,C){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:we.SDK_VERSION,eventId:v};if(l instanceof $n){l.setDefaultLanguage(p.languageCode),$.providerId=l.providerId||"",(0,k.xb)(l.getCustomParameters())||($.customParameters=JSON.stringify(l.getCustomParameters()));for(const[He,vt]of Object.entries(C||{}))$[He]=vt}if(l instanceof Or){const He=l.getScopes().filter(vt=>""!==vt);He.length>0&&($.scopes=He.join(","))}p.tenantId&&($.tid=p.tenantId);const J=$;for(const He of Object.keys(J))void 0===J[He]&&delete J[He];const pe=yield p._getAppCheckToken(),xe=pe?`#${Tf}=${encodeURIComponent(pe)}`:"";return`${function bI({config:p}){return p.emulator?ee(p,Al):`https://${p.authDomain}/${Cl}`}(p)}?${(0,k.xO)(J).slice(1)}${xe}`})).apply(this,arguments)}const oo="webStorageSupport",Xm=class Hc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ra,this._completeRedirectFn=Il,this._overrideRedirectResult=Bm}_openPopup(l,d,g,v){var C=this;return(0,M.Z)(function*(){var $;Zt(null===($=C.eventManagers[l._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield Dl(l,d,g,yn(),v);return function TI(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let J="";const pe=Object.assign(Object.assign({},II),{width:g.toString(),height:v.toString(),top:C,left:$}),xe=(0,k.z$)().toLowerCase();d&&(J=Ro(xe)?"_blank":d),je(xe)&&(l=l||"http://localhost",pe.scrollbars="yes");const He=Object.entries(pe).reduce((vr,[Yr,Pl])=>`${vr}${Yr}=${Pl},`,"");if(function x(p=(0,k.z$)()){var l;return Mo(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(xe)&&"_self"!==J)return function bl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",J),new ks(null);const vt=window.open(l||"",J,He);fe(vt,p,"popup-blocked");try{vt.focus()}catch{}return new ks(vt)}(l,J,Ma())})()}_openRedirect(l,d,g,v){var C=this;return(0,M.Z)(function*(){return yield C._originValidation(l),function Qh(p){Bn().location.href=p}(yield Dl(l,d,g,yn(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(Zt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function EI(p){return wf.apply(this,arguments)}(l),v=new hs(l);return g.register("authEvent",C=>(fe(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(oo,{type:oo},v=>{var C;const $=null===(C=v?.[0])||void 0===C?void 0:C[oo];void 0!==$&&d(!!$),mt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function _f(p){return yf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Q()||ar()||Mo()}};class uS{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return sn("unexpected MultiFactorSessionType")}}}class zc extends uS{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new zc(l)}_finalizeEnroll(l,d,g){return function nS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function Am(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lS=(()=>{class p{constructor(){}static assertion(d){return zc._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Rl="@firebase/auth";class AI{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,k.Pz)("authIdTokenMaxAge"),function BD(p){zu=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=Ut("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function fs(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Af(p){(0,we._registerComponent)(new mn.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=g.options;fe($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const pe={apiKey:$,authDomain:J,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tt(p)},xe=new Po(g,v,C,pe);return function qE(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Ae);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(xe,d),xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,we._registerComponent)(new mn.wA("auth-internal",l=>{const d=un(l.getProvider("auth").getImmediate());return new AI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,we.registerVersion)(Rl,"1.7.3",function qc(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,we.registerVersion)(Rl,"1.7.3","esm2017")}("Browser")},58:(ss,Qn,Ge)=>{Ge.d(Qn,{BH:()=>qr,G6:()=>Di,L:()=>Mt,LL:()=>se,P0:()=>_n,Pz:()=>Ut,Sg:()=>Lt,UG:()=>fe,ZB:()=>Be,ZR:()=>he,aH:()=>mt,b$:()=>yn,eu:()=>re,hl:()=>ee,jU:()=>sn,m9:()=>Ps,ne:()=>xr,pd:()=>di,r3:()=>Jn,ru:()=>Zt,tV:()=>de,uI:()=>Sn,vZ:()=>$i,w1:()=>li,xO:()=>qs,xb:()=>Pr,z$:()=>ot,zd:()=>Ds});const Ue=function(B){const F=[];let b=0;for(let S=0;S<B.length;S++){let w=B.charCodeAt(S);w<128?F[b++]=w:w<2048?(F[b++]=w>>6|192,F[b++]=63&w|128):55296==(64512&w)&&S+1<B.length&&56320==(64512&B.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&B.charCodeAt(++S)),F[b++]=w>>18|240,F[b++]=w>>12&63|128,F[b++]=w>>6&63|128,F[b++]=63&w|128):(F[b++]=w>>12|224,F[b++]=w>>6&63|128,F[b++]=63&w|128)}return F},mn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<B.length;w+=3){const O=B[w],ue=w+1<B.length,Ae=ue?B[w+1]:0,Fe=w+2<B.length,Xe=Fe?B[w+2]:0;let Bt=(15&Ae)<<2|Xe>>6,je=63&Xe;Fe||(je=64,ue||(Bt=64)),S.push(b[O>>2],b[(3&O)<<4|Ae>>4],b[Bt],b[je])}return S.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(Ue(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let b=0,S=0;for(;b<B.length;){const w=B[b++];if(w<128)F[S++]=String.fromCharCode(w);else if(w>191&&w<224){const O=B[b++];F[S++]=String.fromCharCode((31&w)<<6|63&O)}else if(w>239&&w<365){const Fe=((7&w)<<18|(63&B[b++])<<12|(63&B[b++])<<6|63&B[b++])-65536;F[S++]=String.fromCharCode(55296+(Fe>>10)),F[S++]=String.fromCharCode(56320+(1023&Fe))}else{const O=B[b++],ue=B[b++];F[S++]=String.fromCharCode((15&w)<<12|(63&O)<<6|63&ue)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const b=F?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<B.length;){const O=b[B.charAt(w++)],Ae=w<B.length?b[B.charAt(w)]:0;++w;const Xe=w<B.length?b[B.charAt(w)]:64;++w;const De=w<B.length?b[B.charAt(w)]:64;if(++w,null==O||null==Ae||null==Xe||null==De)throw new kn;S.push(O<<2|Ae>>4),64!==Xe&&(S.push(Ae<<4&240|Xe>>2),64!==De&&S.push(Xe<<6&192|De))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class kn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mt=function(B){return function(B){const F=Ue(B);return mn.encodeByteArray(F,!0)}(B).replace(/\./g,"")},de=function(B){try{return mn.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function Be(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const b in F)!F.hasOwnProperty(b)||!st(b)||(B[b]=Be(B[b],F[b]));return B}function st(B){return"__proto__"!==B}const et=()=>{try{return function Ot(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&de(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},_n=B=>{const F=(B=>{var F,b;return null===(b=null===(F=et())||void 0===F?void 0:F.emulatorHosts)||void 0===b?void 0:b[B]})(B);if(!F)return;const b=F.lastIndexOf(":");if(b<=0||b+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const S=parseInt(F.substring(b+1),10);return"["===F[0]?[F.substring(1,b-1),S]:[F.substring(0,b),S]},mt=()=>{var B;return null===(B=et())||void 0===B?void 0:B.config},Ut=B=>{var F;return null===(F=et())||void 0===F?void 0:F[`_${B}`]};class qr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,b)=>{this.resolve=F,this.reject=b})}wrapCallback(F){return(b,S)=>{b?this.reject(b):this.resolve(S),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(b):F(b,S))}}}function Lt(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=F||"demo-project",w=B.iat||0,O=B.sub||B.user_id;if(!O)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:O,user_id:O,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Mt(JSON.stringify({alg:"none",type:"JWT"})),Mt(JSON.stringify(ue)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Sn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function fe(){var B;const F=null===(B=et())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function sn(){return"object"==typeof self&&self.self===self}function Zt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function yn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function li(){const B=ot();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Di(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((B,F)=>{try{let b=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(S),B(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var O;F((null===(O=w.error)||void 0===O?void 0:O.message)||"")}}catch(b){F(b)}})}class he extends Error{constructor(F,b,S){super(b),this.code=F,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(F,b,S){this.service=F,this.serviceName=b,this.errors=S}create(F,...b){const S=b[0]||{},w=`${this.service}/${F}`,O=this.errors[F],ue=O?function Te(B,F){return B.replace(_t,(b,S)=>{const w=F[S];return null!=w?String(w):`<${S}?>`})}(O,S):"Error";return new he(w,`${this.serviceName}: ${ue} (${w}).`,S)}}const _t=/\{\$([^}]+)}/g;function Jn(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function Pr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function $i(B,F){if(B===F)return!0;const b=Object.keys(B),S=Object.keys(F);for(const w of b){if(!S.includes(w))return!1;const O=B[w],ue=F[w];if(Ft(O)&&Ft(ue)){if(!$i(O,ue))return!1}else if(O!==ue)return!1}for(const w of S)if(!b.includes(w))return!1;return!0}function Ft(B){return null!==B&&"object"==typeof B}function qs(B){const F=[];for(const[b,S]of Object.entries(B))Array.isArray(S)?S.forEach(w=>{F.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):F.push(encodeURIComponent(b)+"="+encodeURIComponent(S));return F.length?"&"+F.join("&"):""}function Ds(B){const F={};return B.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,O]=S.split("=");F[decodeURIComponent(w)]=decodeURIComponent(O)}}),F}function di(B){const F=B.indexOf("?");if(!F)return"";const b=B.indexOf("#",F);return B.substring(F,b>0?b:void 0)}function xr(B,F){const b=new Nr(B,F);return b.subscribe.bind(b)}class Nr{constructor(F,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{F(this)}).catch(S=>{this.error(S)})}next(F){this.forEachObserver(b=>{b.next(F)})}error(F){this.forEachObserver(b=>{b.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,b,S){let w;if(void 0===F&&void 0===b&&void 0===S)throw new Error("Missing Observer.");w=function kr(B,F){if("object"!=typeof B||null===B)return!1;for(const b of F)if(b in B&&"function"==typeof B[b])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:b,complete:S},void 0===w.next&&(w.next=tn),void 0===w.error&&(w.error=tn),void 0===w.complete&&(w.complete=tn);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),O}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,F)}sendOne(F,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{b(this.observers[F])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Ps(B){return B&&B._delegate?B._delegate:B}},498:(ss,Qn,Ge)=>{function M(n){return"function"==typeof n}function we(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const k=we(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof k?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{en(s)}catch(o){e=e??[],o instanceof k?e=[...e,...o.errors]:e.push(o)}}if(e)throw new k(e)}}add(e){var t;if(e&&e!==this)if(this.closed)en(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const mn=kt.EMPTY;function kn(n){return n instanceof kt||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function en(n){M(n)?n():n.unsubscribe()}const Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},de={setTimeout(n,e,...t){const{delegate:r}=de;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=de;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ee(n){de.setTimeout(()=>{const{onUnhandledError:e}=Mt;if(!e)throw n;e(n)})}function Be(){}const st=wt("C",void 0,void 0);function wt(n,e,t){return{kind:n,value:e,error:t}}let Je=null;function et(n){if(Mt.useDeprecatedSynchronousErrorHandling){const e=!Je;if(e&&(Je={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Je;if(Je=null,t)throw r}}else n()}class _n extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kn(e)&&e.add(this)):this.destination=sn}static create(e,t,r){return new Lt(e,t,r)}next(e){this.isStopped?fe(function Yn(n){return wt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fe(function Ot(n){return wt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fe(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Ut(n,e){return mt.call(n,e)}class qr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ot(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ot(r)}else ot(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ot(t)}}}class Lt extends _n{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ut(e.next,s),error:e.error&&Ut(e.error,s),complete:e.complete&&Ut(e.complete,s)}):i=e}this.destination=new qr(i)}}function ot(n){Mt.useDeprecatedSynchronousErrorHandling?function sr(n){Mt.useDeprecatedSynchronousErrorHandling&&Je&&(Je.errorThrown=!0,Je.error=n)}(n):Ee(n)}function fe(n,e){const{onStoppedNotification:t}=Mt;t&&de.setTimeout(()=>t(n,e))}const sn={closed:!0,next:Be,error:function Sn(n){throw n},complete:Be},Zt="function"==typeof Symbol&&Symbol.observable||"@@observable";function yn(n){return n}function li(n){return 0===n.length?yn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let at=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ee(n){return n&&n instanceof _n||function Di(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&kn(n)}(t)?t:new Lt(t,r,i);return et(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Cs(r))((i,s)=>{const o=new Lt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zt](){return this}pipe(...t){return li(t)(this)}toPromise(t){return new(t=Cs(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Cs(n){var e;return null!==(e=n??Mt.Promise)&&void 0!==e?e:Promise}const re=we(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let oe=(()=>{class n extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ce(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?mn:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new at;return t.source=this,t}}return n.create=(e,t)=>new ce(e,t),n})();class ce extends oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:mn}}function he(n){return M(n?.lift)}function se(n){return e=>{if(he(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new _t(n,e,t,r,i)}class _t extends _n{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Me(n,e){return se((t,r)=>{let i=0;t.subscribe(Te(r,s=>{r.next(n.call(e,s,i++))}))})}var Le=Ge(582);const At=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function on(n){return M(n?.then)}function Qt(n){return M(n[Zt])}function Xn(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Rn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gr=function Jn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pr(n){return M(n?.[gr])}function As(n){return(0,Le.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Le.qq)(t.read());if(i)return yield(0,Le.qq)(void 0);yield yield(0,Le.qq)(r)}}finally{t.releaseLock()}})}function $i(n){return M(n?.getReader)}function Ft(n){if(n instanceof at)return n;if(null!=n){if(Qt(n))return function Si(n){return new at(e=>{const t=n[Zt]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(At(n))return function qs(n){return new at(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(on(n))return function Ds(n){return new at(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ee)})}(n);if(Xn(n))return Hi(n);if(Pr(n))return function di(n){return new at(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if($i(n))return function xr(n){return Hi(As(n))}(n)}throw Rn(n)}function Hi(n){return new at(e=>{(function Nr(n,e){var t,r,i,s;return(0,Le.mG)(this,void 0,void 0,function*(){try{for(t=(0,Le.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function vn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function tn(n,e,t=1/0){return M(e)?tn((r,i)=>Me((s,o)=>e(r,s,i,o))(Ft(n(r,i))),t):("number"==typeof e&&(t=e),se((r,i)=>function kr(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=R=>u<r?T(R):c.push(R),T=R=>{s&&e.next(R),u++;let P=!1;Ft(t(R,f++)).subscribe(Te(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){const H=c.shift();o?vn(e,o,()=>T(H)):T(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(Te(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Cr(n=1/0){return tn(yn,n)}const On=new at(n=>n.complete());function Ri(n){return n[n.length-1]}function Fn(n){return function Yt(n){return n&&M(n.schedule)}(Ri(n))?n.pop():void 0}function En(n,e=0){return se((t,r)=>{t.subscribe(Te(r,i=>vn(r,n,()=>r.next(i),e),()=>vn(r,n,()=>r.complete(),e),i=>vn(r,n,()=>r.error(i),e)))})}function Ar(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ps(n,e){if(!n)throw new Error("Iterable cannot be null");return new at(t=>{vn(t,e,()=>{const r=n[Symbol.asyncIterator]();vn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function F(n,e){if(null!=n){if(Qt(n))return function Ms(n,e){return Ft(n).pipe(Ar(e),En(e))}(n,e);if(At(n))return function Ks(n,e){return new at(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(on(n))return function Gs(n,e){return Ft(n).pipe(Ar(e),En(e))}(n,e);if(Xn(n))return Ps(n,e);if(Pr(n))return function Zs(n,e){return new at(t=>{let r;return vn(t,e,()=>{r=n[gr](),vn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if($i(n))return function B(n,e){return Ps(As(n),e)}(n,e)}throw Rn(n)}(n,e):Ft(n)}function S(...n){const e=Fn(n),t=function or(n,e){return"number"==typeof Ri(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ft(r[0]):Cr(t)(b(r,e)):On}class w extends oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function O(...n){return b(n,Fn(n))}function ue(n={}){const{connector:e=(()=>new oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},T=()=>{const R=o;I(),R?.unsubscribe()};return se((R,P)=>{u++,!m&&!f&&y();const H=c=c??e();P.add(()=>{u--,0===u&&!m&&!f&&(a=Ae(T,i))}),H.subscribe(P),!o&&u>0&&(o=new Lt({next:V=>H.next(V),error:V=>{m=!0,y(),a=Ae(I,t,V),H.error(V)},complete:()=>{f=!0,y(),a=Ae(I,r),H.complete()}}),Ft(R).subscribe(o))})(s)}}function Ae(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Lt({next:()=>{r.unsubscribe(),n()}});return Ft(e(...t)).subscribe(r)}function Fe(n,e){return se((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Te(r,c=>{i?.unsubscribe();let u=0;const f=s++;Ft(n(c,f)).subscribe(i=Te(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xe(n,e=yn){return n=n??Dt,se((t,r)=>{let i,s=!0;t.subscribe(Te(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Dt(n,e){return n===e}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function je(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(je).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ar(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ro=De({__forward_ref__:De});function ya(n){return n.__forward_ref__=ya,n.toString=function(){return je(this())},n}function Ke(n){return va(n)?n():n}function va(n){return"function"==typeof n&&n.hasOwnProperty(Ro)&&n.__forward_ref__===ya}function Ea(n){return n&&!!n.\u0275providers}const Hu="https://g.co/ng/security#xss";class x extends Error{constructor(e,t){super(function W(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Q(n){return"string"==typeof n?n:null==n?"":String(n)}function qt(n,e){throw new x(-201,!1)}function Pi(n,e){null==n&&function Ze(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wu(n){return bh(n,Ac)||bh(n,xo)}function bh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Gu(n){return n&&(n.hasOwnProperty(Ch)||n.hasOwnProperty(tm))?n[Ch]:null}const Ac=De({\u0275prov:De}),Ch=De({\u0275inj:De}),xo=De({ngInjectableDef:De}),tm=De({ngInjectorDef:De});var pt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pt||{});let Ah;function Wr(n){const e=Ah;return Ah=n,e}function Zu(n,e,t){const r=Wu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&pt.Optional?null:void 0!==e?e:void qt(je(n))}const Wt=globalThis;class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Sc={},Rc="__NG_DI_FLAG__",Ys="ngTempTokenPath",Ph=/\n/gm,zi="__source";let Ia;function Xs(n){const e=Ia;return Ia=n,e}function Nh(n,e=pt.Default){if(void 0===Ia)throw new x(-203,!1);return null===Ia?Zu(n,void 0,e):Ia.get(n,e&pt.Optional?null:void 0,e)}function le(n,e=pt.Default){return(function Ku(){return Ah}()||Nh)(Ke(n),e)}function ke(n,e=pt.Default){return le(n,Xu(e))}function Xu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Mc(n){const e=[];for(let t=0;t<n.length;t++){const r=Ke(n[t]);if(Array.isArray(r)){if(0===r.length)throw new x(900,!1);let i,s=pt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=GE(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(le(i,s))}else e.push(le(r))}return e}function qi(n,e){return n[Rc]=e,n.prototype[Rc]=e,n}function GE(n){return n[Rc]}function Js(n){return{toString:n}.toString()}var wa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wa||{}),$n=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($n||{});const Or={},bt=[],Ju=De({\u0275cmp:De}),kh=De({\u0275dir:De}),Oh=De({\u0275pipe:De}),om=De({\u0275mod:De}),Gr=De({\u0275fac:De}),xc=De({__NG_ELEMENT_ID__:De}),Nc=De({__NG_ENV_ID__:De});function am(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function el(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];hi(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function tl(n){return 3===n||4===n||6===n}function hi(n){return 64===n.charCodeAt(0)}function Ta(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||cm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function cm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const nl="ng-template";function rl(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==am(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Fh(n){return 4===n.type&&n.value!==nl}function um(n,e,t){return e===(4!==n.type||t?n.value:nl)}function ZE(n,e,t){let r=4;const i=n.attrs||[],s=function Vh(n){for(let e=0;e<n.length;e++)if(tl(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!um(n,c,t)||""===c&&1===e.length){if(fi(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!rl(n.attrs,u,t)){if(fi(r))return!1;o=!0}continue}const m=Lh(8&r?"class":c,i,Fh(n),t);if(-1===m){if(fi(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==am(I,u,0)||2&r&&u!==y){if(fi(r))return!1;o=!0}}}}else{if(!o&&!fi(r)&&!fi(c))return!1;if(o&&fi(c))continue;o=!1,r=c|1&r}}return fi(r)||o}function fi(n){return 0==(1&n)}function Lh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function lm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function il(n,e,t=!1){for(let r=0;r<e.length;r++)if(ZE(n,e[r],t))return!0;return!1}function Bh(n,e){return n?":not("+e.trim()+")":e}function jh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!fi(o)&&(e+=Bh(s,i),i=""),r=o,s=s||!fi(r);t++}return""!==i&&(e+=Bh(s,i)),e}function Kr(n){return Js(()=>{const e=fm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$n.Emulated,styles:n.styles||bt,_:null,schemas:n.schemas||null,tView:null,id:""};al(t);const r=n.dependencies;return t.directiveDefs=cl(r,!1),t.pipeDefs=cl(r,!0),t.id=function QE(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function dm(n){return Ct(n)||er(n)}function zh(n){return null!==n}function Ln(n){return Js(()=>({type:n.type,bootstrap:n.bootstrap||bt,declarations:n.declarations||bt,imports:n.imports||bt,exports:n.exports||bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hm(n,e){if(null==n)return Or;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Gt(n){return Js(()=>{const e=fm(n);return al(e),e})}function Ct(n){return n[Ju]||null}function er(n){return n[kh]||null}function ur(n){return n[Oh]||null}function Fr(n,e){const t=n[om]||null;if(!t&&!0===e)throw new Error(`Type ${je(n)} does not have '\u0275mod' property.`);return t}function fm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Or,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hm(n.inputs,e),outputs:hm(n.outputs)}}function al(n){n.features?.forEach(e=>e(n))}function cl(n,e){if(!n)return null;const t=e?ur:dm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(zh)}const dn=0,Pe=1,nt=2,hn=3,pi=4,kc=5,lr=6,ba=7,Vn=8,os=9,Ca=10,rt=11,No=12,pm=13,to=14,Un=15,ko=16,Aa=17,xi=18,Oc=19,ul=20,no=21,Wi=22,Fc=23,Oo=24,yt=25,ll=1,dl=2,as=7,Fo=9,mr=11;function Zr(n){return Array.isArray(n)&&"object"==typeof n[ll]}function Lr(n){return Array.isArray(n)&&!0===n[ll]}function gm(n){return 0!=(4&n.flags)}function Da(n){return n.componentOffset>-1}function Gh(n){return 1==(1&n.flags)}function gi(n){return!!n.template}function Kh(n){return 0!=(512&n[nt])}function Lo(n,e){return n.hasOwnProperty(Gr)?n[Gr]:null}let Dr=null,Ra=!1;function Ni(n){const e=Dr;return Dr=n,e}const Em={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Im(n){if(!io(n)||n.dirty){if(!n.producerMustRecompute(n)&&!wm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function fl(n){n.dirty=!0,function Bn(n){if(void 0===n.liveConsumerNode)return;const e=Ra;Ra=!0;try{for(const t of n.liveConsumerNode)t.dirty||fl(t)}finally{Ra=e}}(n),n.consumerMarkedDirty?.(n)}function Yh(n){return n&&(n.nextProducerIndex=0),Ni(n)}function Vc(n,e){if(Ni(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(io(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)pl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function wm(n){Vo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Im(t),r!==t.version))return!0}return!1}function Tm(n){if(Vo(n),io(n))for(let e=0;e<n.producerNode.length;e++)pl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pl(n,e){if(function Pa(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Vo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)pl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Vo(i),i.producerIndexOfThis[r]=e}}function io(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Vo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let gl=null;const Rm=()=>{},nf=(()=>({...Em,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Rm}))();class oI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Uo(){return Mm}function Mm(n){return n.type.prototype.ngOnChanges&&(n.setInput=aI),Pm}function Pm(){const n=Nm(this),e=n?.current;if(e){const t=n.previous;if(t===Or)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function aI(n,e,t,r){const i=this.declaredInputs[t],s=Nm(n)||function rf(n,e){return n[xm]=e}(n,{previous:Or,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new oI(c&&c.currentValue,e,a===Or),n[r]=e}Uo.ngInherit=!0;const xm="__ngSimpleChanges__";function Nm(n){return n[xm]||null}const cs=function(n,e,t){};function Kt(n){for(;Array.isArray(n);)n=n[dn];return n}function Qr(n,e){return Kt(e[n.index])}function Om(n,e){return n.data[e]}function Vr(n,e){const t=e[n];return Zr(t)?t:t[dn]}function us(n,e){return null==e?null:n[e]}function uf(n){n[Aa]=0}function dI(n){1024&n[nt]||(n[nt]|=1024,vl(n,1))}function Fm(n){1024&n[nt]&&(n[nt]&=-1025,vl(n,-1))}function vl(n,e){let t=n[hn];if(null===t)return;t[kc]+=e;let r=t;for(t=t[hn];null!==t&&(1===e&&1===r[kc]||-1===e&&0===r[kc]);)t[kc]+=e,r=t,t=t[hn]}const Ye={lFrame:Km(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Um(){return Ye.bindingsEnabled}function ge(){return Ye.lFrame.lView}function Pt(){return Ye.lFrame.tView}function _r(){let n=$m();for(;null!==n&&64===n.type;)n=n.parent;return n}function $m(){return Ye.lFrame.currentTNode}function ls(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function pf(){return Ye.lFrame.isParent}function yr(){const n=Ye.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ka(){return Ye.lFrame.bindingIndex++}function _I(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,jc(e)}function jc(n){Ye.lFrame.currentDirectiveIndex=n}function _f(n){Ye.lFrame.currentQueryIndex=n}function yf(n){const e=n[Pe];return 2===e.type?e.declTNode:1===e.type?n[lr]:null}function Gm(n,e,t){if(t&pt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&pt.Host||(i=yf(s),null===i||(s=s[to],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ye.lFrame=Ef();return r.currentTNode=e,r.lView=n,!0}function vf(n){const e=Ef(),t=n[Pe];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ef(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?Km(n):e}function Km(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function $c(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zm=$c;function If(){const n=$c();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ur(){return Ye.lFrame.selectedIndex}function jo(n){Ye.lFrame.selectedIndex=n}function In(){const n=Ye.lFrame;return Om(n.tView,n.selectedIndex)}let Ym=!0;function Tl(){return Ym}function ks(n){Ym=n}function bl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Cl(n,e,t){Dl(n,e,3,t)}function Al(n,e,t,r){(3&n[nt])===t&&Dl(n,e,t,r)}function Tf(n,e){let t=n[nt];(3&t)===e&&(t&=8191,t+=1,n[nt]=t)}function Dl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Aa]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Aa]+=65536),(a<s||-1==s)&&(bI(n,t,e,c),n[Aa]=(4294901760&n[Aa])+c+2),c++}function Sl(n,e){cs(4,n,e);const t=Ni(null);try{e.call(n)}finally{Ni(t),cs(5,n,e)}}function bI(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[nt]>>13<n[Aa]>>16&&(3&n[nt])===e&&(n[nt]+=8192,Sl(a,s)):Sl(a,s)}const oo=-1;class Hc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Rl(n){return n!==oo}function Oa(n){return 32767&n}function qc(n,e){let t=function AI(n){return n>>16}(n),r=e;for(;t>0;)r=r[to],t--;return r}let Af=!0;function Ml(n){const e=Af;return Af=n,e}const Df=255,Jm=5;let fS=0;const fs={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Pe];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(Rl(i)){const o=Oa(i),a=qc(i,e),c=a[Pe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=r_(i),null===r)return oo;if(t++,i=i[to],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return oo}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(xc)&&(r=t[xc]),null==r&&(r=t[xc]=fS++);const i=r&Df;e.data[n+(i>>Jm)]|=1<<i}(n,e,t)}function J(n,e,t){if(t&pt.Optional||void 0!==n)return n;qt()}function pe(n,e,t,r){if(t&pt.Optional&&void 0===r&&(r=null),!(t&(pt.Self|pt.Host))){const i=n[os],s=Wr(void 0);try{return i?i.get(e,r,t&pt.Optional):Zu(e,r,t&pt.Optional)}finally{Wr(s)}}return J(r,0,t)}function xe(n,e,t,r=pt.Default,i){if(null!==n){if(2048&e[nt]&&!(r&pt.Self)){const o=function n_(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[nt]&&!(512&o[nt]);){const a=He(s,o,t,r|pt.Self,fs);if(a!==fs)return a;let c=s.parent;if(!c){const u=o[ul];if(u){const f=u.get(t,fs,r);if(f!==fs)return f}c=r_(o),o=o[to]}s=c}return i}(n,e,t,r,fs);if(o!==fs)return o}const s=He(n,e,t,r,fs);if(s!==fs)return s}return pe(e,t,r,i)}function He(n,e,t,r,i){const s=function Pl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(xc)?n[xc]:void 0;return"number"==typeof e?e>=0?e&Df:t_:e}(t);if("function"==typeof s){if(!Gm(e,n,r))return r&pt.Host?J(i,0,r):pe(e,t,r,i);try{let o;if(o=s(r),null!=o||r&pt.Optional)return o;qt()}finally{Zm()}}else if("number"==typeof s){let o=null,a=g(n,e),c=oo,u=r&pt.Host?e[Un][lr]:null;for((-1===a||r&pt.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==oo&&xl(r,!1)?(o=e[Pe],a=Oa(c),e=qc(c,e)):a=-1);-1!==a;){const f=e[Pe];if(Sf(s,a,f.data)){const m=vt(a,e,t,o,r,u);if(m!==fs)return m}c=e[a+8],c!==oo&&xl(r,e[Pe].data[a+8]===u)&&Sf(s,a,e)?(o=f,a=Oa(c),e=qc(c,e)):a=-1}}return i}function vt(n,e,t,r,i,s){const o=e[Pe],a=o.data[n+8],f=function vr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<c&&t===T||I>=c&&T.type===t)return I}if(i){const I=o[c];if(I&&gi(I)&&I.type===t)return c}return null}(a,o,t,null==r?Da(a)&&Af:r!=o&&0!=(3&a.type),i&pt.Host&&s===a);return null!==f?Yr(e,o,f,a):fs}function Yr(n,e,t,r){let i=n[t];const s=e.data;if(function Xm(n){return n instanceof Hc}(i)){const o=i;o.resolving&&function tt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Q(n)}(s[t]));const a=Ml(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Wr(o.injectImpl):null;Gm(n,r,pt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function TI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Mm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Wr(u),Ml(a),o.resolving=!1,Zm()}}return i}function Sf(n,e,t){return!!(t[e+(n>>Jm)]&1<<n)}function xl(n,e){return!(n&pt.Self||n&pt.Host&&e)}class Er{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xe(this._tNode,this._lView,e,Xu(r),t)}}function t_(){return new Er(_r(),ge())}function Wc(n){return va(n)?()=>{const e=Wc(Ke(n));return e&&e()}:Lo(n)}function r_(n){const e=n[Pe],t=e.type;return 2===t?e.declTNode:1===t?n[lr]:null}const Nl="__parameters__";function Ol(n,e,t){return Js(()=>{const r=function DI(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(Nl)?c[Nl]:Object.defineProperty(c,Nl,{value:[]})[Nl];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Ll(n,e){n.forEach(t=>Array.isArray(t)?Ll(t,e):e(t))}function gS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function i_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const dr=qi(Ol("Optional"),8),xf=qi(Ol("SkipSelf"),4);function l_(n){return 128==(128&n.flags)}var Ua=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ua||{});const NI=new Map;let r$=0;const OI="__ngContext__";function Xr(n,e){Zr(e)?(n[OI]=e[Oc],function s$(n){NI.set(n[Oc],n)}(e)):n[OI]=e}let FI;function LI(n,e){return FI(n,e)}function Of(n){const e=n[hn];return Lr(e)?e[hn]:e}function FS(n){return VS(n[No])}function LS(n){return VS(n[pi])}function VS(n){for(;null!==n&&!Lr(n);)n=n[pi];return n}function jl(n,e,t,r,i){if(null!=r){let s,o=!1;Lr(r)?s=r:Zr(r)&&(o=!0,r=r[dn]);const a=Kt(r);0===n&&null!==t?null==i?$S(e,t,a):Gc(e,t,a,i||null,!0):1===n&&null!==t?Gc(e,t,a,i||null,!0):2===n?function __(n,e,t){const r=g_(n,e);r&&function b$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function D$(n,e,t,r,i){const s=t[as];s!==Kt(t)&&jl(e,n,r,s,i);for(let a=mr;a<t.length;a++){const c=t[a];Lf(c[Pe],c,n,e,r,s)}}(e,n,s,t,i)}}function f_(n,e,t){return n.createElement(e,t)}function BS(n,e){const t=n[Fo],r=t.indexOf(e);Fm(e),t.splice(r,1)}function p_(n,e){if(n.length<=mr)return;const t=mr+e,r=n[t];if(r){const i=r[ko];null!==i&&i!==n&&BS(i,r),e>0&&(n[t-1][pi]=r[pi]);const s=i_(n,mr+e);!function m$(n,e){Lf(n,e,e[rt],2,null,null),e[dn]=null,e[lr]=null}(r[Pe],r);const o=s[xi];null!==o&&o.detachView(s[Pe]),r[hn]=null,r[pi]=null,r[nt]&=-129}return r}function UI(n,e){if(!(256&e[nt])){const t=e[rt];e[Fc]&&Tm(e[Fc]),e[Oo]&&Tm(e[Oo]),t.destroyNode&&Lf(n,e,t,3,null,null),function v$(n){let e=n[No];if(!e)return BI(n[Pe],n);for(;e;){let t=null;if(Zr(e))t=e[No];else{const r=e[mr];r&&(t=r)}if(!t){for(;e&&!e[pi]&&e!==n;)Zr(e)&&BI(e[Pe],e),e=e[hn];null===e&&(e=n),Zr(e)&&BI(e[Pe],e),t=e&&e[pi]}e=t}}(e)}}function BI(n,e){if(!(256&e[nt])){e[nt]&=-129,e[nt]|=256,function T$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Hc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];cs(4,a,c);try{c.call(a)}finally{cs(5,a,c)}}else{cs(4,i,s);try{s.call(i)}finally{cs(5,i,s)}}}}}(n,e),function w$(n,e){const t=n.cleanup,r=e[ba];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ba]=null);const i=e[no];if(null!==i){e[no]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Pe].type&&e[rt].destroy();const t=e[ko];if(null!==t&&Lr(e[hn])){t!==e[hn]&&BS(t,e);const r=e[xi];null!==r&&r.detachView(n)}!function o$(n){NI.delete(n[Oc])}(e)}}function jI(n,e,t){return function jS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[dn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===$n.None||s===$n.Emulated)return null}return Qr(r,t)}}(n,e.parent,t)}function Gc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $S(n,e,t){n.appendChild(e,t)}function HS(n,e,t,r,i){null!==r?Gc(n,e,t,r,i):$S(n,e,t)}function g_(n,e){return n.parentNode(e)}let $I,WI,v_,WS=function qS(n,e,t){return 40&n.type?Qr(n,t):null};function m_(n,e,t,r){const i=jI(n,r,e),s=e[rt],a=function zS(n,e,t){return WS(n,e,t)}(r.parent||e[lr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)HS(s,i,t[c],a,!1);else HS(s,i,t,a,!1);void 0!==$I&&$I(s,r,e,t,i)}function Ff(n,e){if(null!==e){const t=e.type;if(3&t)return Qr(e,n);if(4&t)return HI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ff(n,r);{const i=n[e.index];return Lr(i)?HI(-1,i):Kt(i)}}if(32&t)return LI(e,n)()||Kt(n[e.index]);{const r=KS(n,e);return null!==r?Array.isArray(r)?r[0]:Ff(Of(n[Un]),r):Ff(n,e.next)}}return null}function KS(n,e){return null!==e?n[Un][lr].projection[e.projection]:null}function HI(n,e){const t=mr+n+1;if(t<e.length){const r=e[t],i=r[Pe].firstChild;if(null!==i)return Ff(r,i)}return e[as]}function zI(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Xr(Kt(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)zI(n,e,t.child,r,i,s,!1),jl(e,n,i,a,s);else if(32&c){const u=LI(t,r);let f;for(;f=u();)jl(e,n,i,f,s);jl(e,n,i,a,s)}else 16&c?QS(n,e,r,t,i,s):jl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Lf(n,e,t,r,i,s){zI(t,r,n.firstChild,e,i,s,!1)}function QS(n,e,t,r,i,s){const o=t[Un],c=o[lr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)jl(e,n,i,c[u],s);else{let u=c;const f=o[hn];l_(r)&&(u.flags|=128),zI(n,e,u,f,i,s,!0)}}function YS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XS(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&el(n,e,r),null!==i&&YS(n,e,i),null!==s&&function R$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function tR(n){return function GI(){if(void 0===v_&&(v_=null,Wt.trustedTypes))try{v_=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return v_}()?.createScriptURL(n)||n}class Kc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Hu})`}}function Ki(n){return n instanceof Kc?n.changingThisBreaksApplicationSecurity:n}function ao(n,e){const t=function U$(n){return n instanceof Kc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Hu})`)}return t===e}const K$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Br=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Br||{});function w_(n){const e=Uf();return e?e.sanitize(Br.URL,n)||"":ao(n,"URL")?Ki(n):function E_(n){return(n=String(n)).match(K$)?n:"unsafe:"+n}(Q(n))}function uR(n){const e=Uf();if(e)return tR(e.sanitize(Br.RESOURCE_URL,n)||"");if(ao(n,"ResourceURL"))return tR(Ki(n));throw new x(904,!1)}function Uf(){const n=ge();return n&&n[Ca].sanitizer}const Bf=new ye("ENVIRONMENT_INITIALIZER"),dR=new ye("INJECTOR",-1),hR=new ye("INJECTOR_DEF_TYPES");class YI{get(e,t=Sc){if(t===Sc){const r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return t}}function oH(...n){return{\u0275providers:pR(0,n),\u0275fromNgModule:!0}}function pR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Ll(e,o=>{const a=o;T_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&gR(i,s),t}function gR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];XI(i,s=>{e(s,r)})}}function T_(n,e,t,r){if(!(n=Ke(n)))return!1;let i=null,s=Gu(n);const o=!s&&Ct(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Gu(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)T_(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Ll(s.imports,f=>{T_(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&gR(u,e)}if(!a){const u=Lo(i)||(()=>new i);e({provide:i,useFactory:u,deps:bt},i),e({provide:hR,useValue:i,multi:!0},i),e({provide:Bf,useValue:()=>le(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;XI(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function XI(n,e){for(let t of n)Ea(t)&&(t=t.\u0275providers),Array.isArray(t)?XI(t,e):e(t)}const aH=De({provide:String,useValue:De});function JI(n){return null!==n&&"object"==typeof n&&aH in n}function Zc(n){return"function"==typeof n}const ew=new ye("Set Injector scope."),b_={},uH={};let tw;function C_(){return void 0===tw&&(tw=new YI),tw}class gs{}class zl extends gs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rw(e,o=>this.processProvider(o)),this.records.set(dR,ql(void 0,this)),i.has("environment")&&this.records.set(gs,ql(void 0,this));const s=this.records.get(ew);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hR.multi,bt,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Xs(this),r=Wr(void 0);try{return e()}finally{Xs(t),Wr(r)}}get(e,t=Sc,r=pt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Nc))return e[Nc](this);r=Xu(r);const s=Xs(this),o=Wr(void 0);try{if(!(r&pt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function pH(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&Wu(e);c=u&&this.injectableDefInScope(u)?ql(nw(e),b_):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&pt.Self?C_():this.parent).get(e,t=r&pt.Optional&&t===Sc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ys]=a[Ys]||[]).unshift(je(e)),s)throw a;return function KE(n,e,t,r){const i=n[Ys];throw e[zi]&&i.unshift(e[zi]),n.message=function Pc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):je(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Ph,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ys]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Wr(o),Xs(s)}}resolveInjectorInitializers(){const e=Xs(this),t=Wr(void 0);try{const i=this.get(Bf.multi,bt,pt.Self);for(const s of i)s()}finally{Xs(e),Wr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){let t=Zc(e=Ke(e))?e:Ke(e&&e.provide);const r=function dH(n){return JI(n)?ql(void 0,n.useValue):ql(function yR(n,e,t){let r;if(Zc(n)){const i=Ke(n);return Lo(i)||nw(i)}if(JI(n))r=()=>Ke(n.useValue);else if(function _R(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Mc(n.deps||[]));else if(function mR(n){return!(!n||!n.useExisting)}(n))r=()=>le(Ke(n.useExisting));else{const i=Ke(n&&(n.useClass||n.provide));if(!function hH(n){return!!n.deps}(n))return Lo(i)||nw(i);r=()=>new i(...Mc(n.deps))}return r}(n),b_)}(e);if(Zc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ql(void 0,b_,!0),i.factory=()=>Mc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===b_&&(t.value=uH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function fH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ke(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function nw(n){const e=Wu(n),t=null!==e?e.factory:Lo(n);if(null!==t)return t;if(n instanceof ye)throw new x(204,!1);if(n instanceof Function)return function lH(n){const e=n.length;if(e>0)throw function Pf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new x(204,!1);const t=function em(n){return n&&(n[Ac]||n[xo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new x(204,!1)}function ql(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rw(n,e){for(const t of n)Array.isArray(t)?rw(t,e):t&&Ea(t)?rw(t.\u0275providers,e):e(t)}const A_=new ye("AppId",{providedIn:"root",factory:()=>gH}),gH="ng",vR=new ye("Platform Initializer"),ms=new ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ER=new ye("AnimationModuleType"),iw=new ye("CSP nonce",{providedIn:"root",factory:()=>function Hl(){if(void 0!==WI)return WI;if(typeof document<"u")return document;throw new x(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let IR=(n,e,t)=>null;function hw(n,e,t=!1){return IR(n,e,t)}class CH{}class bR{}class DH{resolveComponentFactory(e){throw function AH(n){const e=Error(`No component factory found for ${je(n)}.`);return e.ngComponent=n,e}(e)}}let x_=(()=>{class n{static#e=this.NULL=new DH}return n})();function SH(){return Kl(_r(),ge())}function Kl(n,e){return new Ho(Qr(n,e))}let Ho=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=SH}return n})();class Hf{}let N_=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function MH(){const n=ge(),t=Vr(_r().index,n);return(Zr(t)?t:n)[rt]}()}return n})(),PH=(()=>{class n{static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}return n})();class Qc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gw=new Qc("16.2.12"),mw={};function RR(n,e=null,t=null,r){const i=MR(n,e,t,r);return i.resolveInjectorInitializers(),i}function MR(n,e=null,t=null,r,i=new Set){const s=[t||bt,oH(n)];return r=r||("object"==typeof n?void 0:je(n)),new zl(s,e||C_(),r||null,i)}let Jr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Sc;static#t=this.NULL=new YI;static create(t,r){if(Array.isArray(t))return RR({name:""},r,t,"");{const i=t.name??"";return RR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Ne({token:n,providedIn:"any",factory:()=>le(dR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function yw(n){return n.ngOriginalError}class Os{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yw(e);for(;t&&yw(t);)t=yw(t);return t||null}}function Ew(n){return e=>{setTimeout(n,void 0,e)}}const mi=class VH extends oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ew(s),i&&(i=Ew(i)),o&&(o=Ew(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}};function xR(...n){}class St{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mi(!1),this.onMicrotaskEmpty=new mi(!1),this.onStable=new mi(!1),this.onError=new mi(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function UH(){const n="function"==typeof Wt.requestAnimationFrame;let e=Wt[n?"requestAnimationFrame":"setTimeout"],t=Wt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function $H(n){const e=()=>{!function jH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ww(n),n.isCheckStableRunning=!0,Iw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ww(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function zH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return NR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),kR(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return NR(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),kR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ww(n),Iw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!St.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(St.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,BH,xR,xR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const BH={};function Iw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ww(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function NR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kR(n){n._nesting--,Iw(n)}class HH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mi,this.onMicrotaskEmpty=new mi,this.onStable=new mi,this.onError=new mi}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const OR=new ye("",{providedIn:"root",factory:FR});function FR(){const n=ke(St);let e=!0;return S(new at(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new at(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{St.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{St.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ue()))}function zo(n){return n instanceof Function?n():n}let Tw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}return n})();function zf(n){for(;n;){n[nt]|=64;const e=Of(n);if(Kh(n)&&!e)return n;n=e}return null}const jR=new ye("",{providedIn:"root",factory:()=>!1});let O_=null;function qR(n,e){return n[e]??KR()}function WR(n,e){const t=KR();t.producerNode?.length&&(n[e]=O_,t.lView=n,O_=GR())}const ez={...Em,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zf(n.lView)},lView:null};function GR(){return Object.create(ez)}function KR(){return O_??=GR(),O_}const ut={};function Zi(n){ZR(Pt(),ge(),Ur()+n,!1)}function ZR(n,e,t,r){if(!r)if(3==(3&e[nt])){const s=n.preOrderCheckHooks;null!==s&&Cl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Al(e,s,0,t)}jo(t)}function Qe(n,e=pt.Default){const t=ge();return null===t?le(n,e):xe(_r(),t,Ke(n),e)}function F_(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[dn]=i,m[nt]=140|r,(null!==u||n&&2048&n[nt])&&(m[nt]|=2048),uf(m),m[hn]=m[to]=n,m[Vn]=t,m[Ca]=o||n&&n[Ca],m[rt]=a||n&&n[rt],m[os]=c||n&&n[os]||null,m[lr]=s,m[Oc]=function i$(){return r$++}(),m[Wi]=f,m[ul]=u,m[Un]=2==e.type?n[Un]:m,m}function Yl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function bw(n,e,t,r,i){const s=$m(),o=pf(),c=n.data[e]=function cz(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function so(){return null!==Ye.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function zm(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Bo(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ls(s,!0),s}function qf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YR(n,e,t,r,i){const s=qR(e,Fc),o=Ur(),a=2&r;try{jo(-1),a&&e.length>yt&&ZR(n,e,yt,!1),cs(a?2:0,i);const u=a?s:null,f=Yh(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{Vc(u,f)}}finally{a&&null===e[Fc]&&WR(e,Fc),jo(o),cs(a?3:1,i)}}function Cw(n,e,t){if(gm(e)){const r=Ni(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ni(r)}}}function Aw(n,e,t){Um()&&(function gz(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Da(t)&&function wz(n,e,t){const r=Qr(e,n),i=XR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=L_(n,F_(n,i,null,o,r,e,null,n[Ca].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),Xr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=Yr(e,n,a,t);Xr(u,e),null!==o&&Tz(0,a-i,u,c,0,o),gi(c)&&(Vr(t.index,e)[Vn]=Yr(e,n,a,t))}}(n,e,t,Qr(t,e)),64==(64&t.flags)&&rM(n,e,t))}function Dw(n,e,t=Qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function XR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Sw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Sw(n,e,t,r,i,s,o,a,c,u,f){const m=yt+r,y=m+i,I=function nz(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ut);return t}(m,y),T="function"==typeof u?u():u;return I[Pe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let JR=n=>null;function eM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?tM(t,e,i,s):r.hasOwnProperty(i)&&tM(t,e,r[i],s)}return t}function tM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Qi(n,e,t,r,i,s,o,a){const c=Qr(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(Nw(n,t,f,r,i),Da(e)&&function dz(n,e){const t=Vr(e,n);16&t[nt]||(t[nt]|=64)}(t,e.index)):3&e.type&&(r=function lz(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Rw(n,e,t,r){if(Um()){const i=null===r?null:{"":-1},s=function _z(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(il(e,o.selectors,!1))if(r||(r=[]),gi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Mw(n,e,a.length)}else r.unshift(o),Mw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&nM(n,e,t,o,i,a),i&&function yz(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new x(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Ta(t.mergedAttrs,t.attrs)}function nM(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function Ez(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=qf(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=Ta(t.mergedAttrs,f.hostAttrs),Iz(n,t,e,c,f),vz(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function uz(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;c=eM(m.inputs,f,c,y?y.inputs:null),u=eM(m.outputs,f,u,T);const R=null===c||null===o||Fh(e)?null:bz(c,f,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function rM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function qm(){return Ye.lFrame.currentDirectiveIndex}();try{jo(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];jc(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&mz(c,u)}}finally{jo(-1),jc(o)}}function mz(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Mw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function vz(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;gi(e)&&(t[""]=n)}}function Iz(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Lo(i.type)),o=new Hc(s,gi(i),Qe);n.blueprint[r]=o,t[r]=o,function fz(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function pz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,qf(n,t,i.hostVars,ut),i)}function co(n,e,t,r,i,s){const o=Qr(n,e);!function Pw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Q(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[rt],o,s,n.value,t,r,i)}function Tz(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)iM(r,t,o[a++],o[a++],o[a++])}function iM(n,e,t,r,i){const s=Ni(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Ni(s)}}function bz(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function sM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function oM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];_f(t[r]),o.contentQueries(2,e[s],s)}}}function L_(n,e){return n[No]?n[pm][pi]=e:n[No]=e,n[pm]=e,e}function xw(n,e,t){_f(0);const r=Ni(null);try{e(n,t)}finally{Ni(r)}}function lM(n,e){const t=n[os],r=t?t.get(Os,null):null;r&&r.handleError(e)}function Nw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];iM(n.data[o],e[o],r,a,i)}}function qo(n,e,t){const r=function Na(n,e){return Kt(e[n])}(e,n);!function US(n,e,t){n.setValue(e,t)}(n[rt],r,t)}function Cz(n,e){const t=Vr(e,n),r=t[Pe];!function Az(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[dn];null!==i&&null===t[Wi]&&(t[Wi]=hw(i,t[os])),kw(r,t,t[Vn])}function kw(n,e,t){vf(e);try{const r=n.viewQuery;null!==r&&xw(1,r,t);const i=n.template;null!==i&&YR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&oM(n,e),n.staticViewQueries&&xw(2,n.viewQuery,t);const s=n.components;null!==s&&function Dz(n,e){for(let t=0;t<e.length;t++)Cz(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[nt]&=-5,If()}}let dM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function sI(n,e,t){const r=Object.create(nf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>fl(r),run:()=>{if(r.dirty=!1,r.hasRun&&!wm(r))return;r.hasRun=!0;const o=Yh(r);try{r.cleanupFn(),r.cleanupFn=Rm,r.fn(i)}finally{Vc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}return n})();function V_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ar(i,a):2==s&&(r=ar(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Wf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Kt(s)),Lr(s)&&hM(s,r);const o=t.type;if(8&o)Wf(n,e,t.child,r);else if(32&o){const a=LI(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=KS(e,t);if(Array.isArray(a))r.push(...a);else{const c=Of(e[Un]);Wf(c[Pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hM(n,e){for(let t=mr;t<n.length;t++){const r=n[t],i=r[Pe].firstChild;null!==i&&Wf(r[Pe],r,i,e)}n[as]!==n[dn]&&e.push(n[as])}function U_(n,e,t,r=!0){const i=e[Ca],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{fM(n,e,n.template,t)}catch(c){throw r&&lM(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function fM(n,e,t,r){const i=e[nt];if(256!=(256&i)){e[Ca].effectManager?.flush(),vf(e);try{uf(e),function wl(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&YR(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&Cl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Al(e,u,0,null),Tf(e,0)}if(function Mz(n){for(let e=FS(n);null!==e;e=LS(e)){if(!e[dl])continue;const t=e[Fo];for(let r=0;r<t.length;r++){dI(t[r])}}}(e),pM(e,2),null!==n.contentQueries&&oM(n,e),o){const u=n.contentCheckHooks;null!==u&&Cl(e,u)}else{const u=n.contentHooks;null!==u&&Al(e,u,1),Tf(e,1)}!function tz(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=qR(e,Oo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)jo(~s);else{const o=s,a=t[++i],c=t[++i];_I(a,o),r.dirty=!1;const u=Yh(r);try{c(2,e[o])}finally{Vc(r,u)}}}}finally{null===e[Oo]&&WR(e,Oo),jo(-1)}}(n,e);const a=n.components;null!==a&&mM(e,a,0);const c=n.viewQuery;if(null!==c&&xw(2,c,r),o){const u=n.viewCheckHooks;null!==u&&Cl(e,u)}else{const u=n.viewHooks;null!==u&&Al(e,u,2),Tf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[nt]&=-73,Fm(e)}finally{If()}}}function pM(n,e){for(let t=FS(n);null!==t;t=LS(t))for(let r=mr;r<t.length;r++)gM(t[r],e)}function Pz(n,e,t){gM(Vr(e,n),t)}function gM(n,e){if(!function uI(n){return 128==(128&n[nt])}(n))return;const t=n[Pe],r=n[nt];if(80&r&&0===e||1024&r||2===e)fM(t,n,t.template,n[Vn]);else if(n[kc]>0){pM(n,1);const i=t.components;null!==i&&mM(n,i,1)}}function mM(n,e,t){for(let r=0;r<e.length;r++)Pz(n,e[r],t)}class Gf{get rootNodes(){const e=this._lView,t=e[Pe];return Wf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(e){this._lView[Vn]=e}get destroyed(){return 256==(256&this._lView[nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[hn];if(Lr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(p_(e,r),i_(t,r))}this._attachedToViewContainer=!1}UI(this._lView[Pe],this._lView)}onDestroy(e){!function Lm(n,e){if(256==(256&n[nt]))throw new x(911,!1);null===n[no]&&(n[no]=[]),n[no].push(e)}(this._lView,e)}markForCheck(){zf(this._cdRefInjectingView||this._lView)}detach(){this._lView[nt]&=-129}reattach(){this._lView[nt]|=128}detectChanges(){U_(this._lView[Pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y$(n,e){Lf(n,e,e[rt],2,null,null)}(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}}class xz extends Gf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;U_(e[Pe],e,e[Vn],!1)}checkNoChanges(){}get context(){return null}}class _M extends x_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ct(e);return new Kf(t,this.ngModule)}}function yM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class kz{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xu(r);const i=this.injector.get(e,mw,r);return i!==mw||t===mw?i:this.parentInjector.get(e,t,r)}}class Kf extends bR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=yM(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return yM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ol(n){return n.map(jh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof gs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new kz(e,s):e,a=o.get(Hf,null);if(null===a)throw new x(407,!1);const m={rendererFactory:a,sanitizer:o.get(PH,null),effectManager:o.get(dM,null),afterRenderEventManager:o.get(Tw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function rz(n,e,t,r){const s=r.get(jR,!1)||t===$n.ShadowDom,o=n.selectRootElement(e,s);return function iz(n){JR(n)}(o),o}(y,r,this.componentDef.encapsulation,o):f_(y,I,function Nz(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==T&&(V=hw(T,o,!0));const G=Sw(0,null,null,1,0,null,null,null,null,null,null),te=F_(null,G,null,H,null,null,m,y,o,null,V);let Ie,Re;vf(te);try{const j=this.componentDef;let N,L=null;j.findHostDirectiveDefs?(N=[],L=new Map,j.findHostDirectiveDefs(j,N,L),N.push(j)):N=[j];const z=function Fz(n,e){const t=n[Pe],r=yt;return n[r]=e,Yl(t,r,2,"#host",null)}(te,T),q=function Lz(n,e,t,r,i,s,o){const a=i[Pe];!function Vz(n,e,t,r){for(const i of n)e.mergedAttrs=Ta(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(V_(e,e.mergedAttrs,!0),null!==t&&XS(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=hw(e,i[os]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=F_(i,XR(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&Mw(a,n,r.length-1),L_(i,m),i[n.index]=m}(z,T,j,N,te,m,y);Re=Om(G,yt),T&&function Bz(n,e,t,r){if(r)el(n,t,["ng-version",gw.full]);else{const{attrs:i,classes:s}=function $h(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!fi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&el(n,t,i),s&&s.length>0&&YS(n,t,s.join(" "))}}(y,j,T,r),void 0!==t&&function jz(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Re,this.ngContentSelectors,t),Ie=function Uz(n,e,t,r,i,s){const o=_r(),a=i[Pe],c=Qr(o,i);nM(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Xr(Yr(i,a,o.directiveStart+f,o),i);rM(a,i,o),c&&Xr(c,i);const u=Yr(i,a,o.directiveStart+o.componentOffset,o);if(n[Vn]=i[Vn]=u,null!==s)for(const f of s)f(u,e);return Cw(a,o,n),u}(q,j,N,L,te,[$z]),kw(G,te,null)}finally{If()}return new Oz(this.componentType,Ie,Kl(Re,te),te,Re)}}class Oz extends CH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xz(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Nw(s[Pe],s,i,e,t),this.previousInputValues.set(e,t),zf(Vr(this._tNode.index,s))}}get injector(){return new Er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function $z(){const n=_r();bl(ge()[Pe],n)}function bM(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function j_(n){return!!Ow(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ow(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function uo(n,e,t){return n[e]=t}function ei(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Fw(n,e,t,r){const i=ge();return ei(i,ka(),e)&&(Pt(),co(In(),i,n,e,t,r)),Fw}function Jl(n,e,t,r){return ei(n,ka(),t)?e+Q(t)+r:ut}function $w(n,e,t,r,i,s,o,a){const c=ge(),u=Pt(),f=n+yt,m=u.firstCreatePass?function _q(n,e,t,r,i,s,o,a,c){const u=e.consts,f=Yl(e,n,4,o||null,us(u,a));Rw(e,t,f,us(u,c)),bl(e,f);const m=f.tView=Sw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];ls(m,!1);const y=LM(u,c,m,n);Tl()&&m_(u,c,y,m),Xr(y,c),L_(c,c[f]=sM(y,c,y,m)),Gh(m)&&Aw(u,c,m),null!=o&&Dw(c,m,a)}let LM=function VM(n,e,t,r){return ks(!0),e[rt].createComment("")};function ad(n,e,t){const r=ge();return ei(r,ka(),e)&&Qi(Pt(),In(),r,n,e,r[rt],t,!1),ad}function Hw(n,e,t,r,i){const o=i?"class":"style";Nw(n,t,e.inputs[o],o,r)}function Et(n,e,t,r){const i=ge(),s=Pt(),o=yt+n,a=i[rt],c=s.firstCreatePass?function wq(n,e,t,r,i,s){const o=e.consts,c=Yl(e,n,2,r,us(o,i));return Rw(e,t,c,us(o,s)),null!==c.attrs&&V_(c,c.attrs,!1),null!==c.mergedAttrs&&V_(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=UM(s,i,c,a,e,n);i[o]=u;const f=Gh(c);return ls(c,!0),XS(a,u,c),32!=(32&c.flags)&&Tl()&&m_(s,i,u,c),0===function hI(){return Ye.lFrame.elementDepthCount}()&&Xr(u,i),function Uc(){Ye.lFrame.elementDepthCount++}(),f&&(Aw(s,i,c),Cw(s,c,i)),null!==r&&Dw(i,c),Et}function gt(){let n=_r();pf()?function Bc(){Ye.lFrame.isParent=!1}():(n=n.parent,ls(n,!1));const e=n;(function df(n){return Ye.skipHydrationRootTNode===n})(e)&&function jm(){Ye.skipHydrationRootTNode=null}(),function fI(){Ye.lFrame.elementDepthCount--}();const t=Pt();return t.firstCreatePass&&(bl(t,n),gm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function dS(n){return 0!=(8&n.flags)}(e)&&Hw(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bf(n){return 0!=(16&n.flags)}(e)&&Hw(t,e,ge(),e.stylesWithoutHost,!1),gt}function cd(n,e,t,r){return Et(n,e,t,r),gt(),cd}let UM=(n,e,t,r,i,s)=>(ks(!0),f_(r,i,function Qm(){return Ye.lFrame.currentNamespace}()));function W_(n){return!!n&&"function"==typeof n.then}function $M(n){return!!n&&"function"==typeof n.subscribe}function Wo(n,e,t,r){const i=ge(),s=Pt(),o=_r();return function zM(n,e,t,r,i,s,o){const a=Gh(r),u=n.firstCreatePass&&function cM(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Vn],m=function aM(n){return n[ba]||(n[ba]=[])}(e);let y=!0;if(3&r.type||o){const R=Qr(r,e),P=o?o(R):R,H=m.length,V=o?te=>o(Kt(te[r.index])):r.index;let G=null;if(!o&&a&&(G=function Rq(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ba],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,y=!1;else{s=WM(r,e,f,s,!1);const te=t.listen(P,i,s);m.push(s,te),u&&u.push(i,V,H,H+1)}}else s=WM(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const R=T.length;if(R)for(let P=0;P<R;P+=2){const Ie=e[T[P]][T[P+1]].subscribe(s),Re=m.length;m.push(s,Ie),u&&u.push(i,r.index,Re,-(Re+1))}}}(s,i,i[rt],o,n,e,r),Wo}function qM(n,e,t,r){try{return cs(6,e,t),!1!==t(r)}catch(i){return lM(n,i),!1}finally{cs(7,e,t)}}function WM(n,e,t,r,i){return function s(o){if(o===Function)return r;zf(n.componentOffset>-1?Vr(n.index,e):e);let c=qM(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=qM(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function Ww(n,e,t){return K_(n,"",e,"",t),Ww}function K_(n,e,t,r,i){const s=ge(),o=Jl(s,e,t,r);return o!==ut&&Qi(Pt(),In(),s,n,o,s[rt],i,!1),K_}function jt(n,e=""){const t=ge(),r=Pt(),i=n+yt,s=r.firstCreatePass?Yl(r,i,1,e,null):r.data[i],o=gP(r,t,s,e,n);t[i]=o,Tl()&&m_(r,t,o,s),ls(s,!1)}let gP=(n,e,t,r,i)=>(ks(!0),function h_(n,e){return n.createText(e)}(e[rt],r));function $a(n){return Yw("",n,""),$a}function Yw(n,e,t){const r=ge(),i=Jl(r,n,e,t);return i!==ut&&qo(r,Ur(),i),Yw}const dd="en-US";let LP=dd;class eu{}class ux{}class iT extends eu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _M(this);const i=Fr(e);this._bootstrapComponents=zo(i.bootstrap),this._r3Injector=MR(e,t,[{provide:eu,useValue:this},{provide:x_,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sT extends ux{constructor(e){super(),this.moduleType=e}create(e){return new iT(this.moduleType,e,[])}}class lx extends eu{constructor(e){super(),this.componentFactoryResolver=new _M(this),this.instance=null;const t=new zl([...e.providers,{provide:eu,useValue:this},{provide:x_,useValue:this.componentFactoryResolver}],e.parent||C_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function oT(n,e,t=null){return new lx({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let C3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=pR(0,t.type),i=r.length>0?oT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(le(gs))})}return n})();function dx(n){n.getStandaloneInjector=e=>e.get(C3).getOrCreateStandaloneInjector(n)}function yx(n,e,t,r){return function Ex(n,e,t,r,i,s){const o=e+t;return ei(n,o,i)?uo(n,o+1,s?r.call(s,i):r(i)):sp(n,o+1)}(ge(),yr(),n,e,t,r)}function vx(n,e,t,r,i){return function Ix(n,e,t,r,i,s,o){const a=e+t;return function Yc(n,e,t,r){const i=ei(n,e,t);return ei(n,e+1,r)||i}(n,a,i,s)?uo(n,a+2,o?r.call(o,i,s):r(i,s)):sp(n,a+2)}(ge(),yr(),n,e,t,r,i)}function sp(n,e){const t=n[e];return t===ut?void 0:t}function Y3(n,e,t,r=!0){const i=e[Pe];if(function E$(n,e,t,r){const i=mr+r,s=t.length;r>0&&(t[i-1][pi]=e),r<s-mr?(e[pi]=t[i],gS(t,mr+r,e)):(t.push(e),e[pi]=null),e[hn]=t;const o=e[ko];null!==o&&t!==o&&function I$(n,e){const t=n[Fo];e[Un]!==e[hn][hn][Un]&&(n[dl]=!0),null===t?n[Fo]=[e]:t.push(e)}(o,e);const a=e[xi];null!==a&&a.insertView(n),e[nt]|=128}(i,e,n,t),r){const s=HI(t,n),o=e[rt],a=g_(o,n[as]);null!==a&&function _$(n,e,t,r,i,s){r[dn]=i,r[lr]=e,Lf(n,r,t,1,i,s)}(i,n[lr],o,e,a,s)}}Symbol;let Go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eW}return n})();const X3=Go,J3=class extends X3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Q3(n,e,t,r){const i=e.tView,a=F_(n,i,t,4096&n[nt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ko]=n[e.index];const u=n[xi];return null!==u&&(a[xi]=u.createEmbeddedView(i)),kw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Gf(i)}};function eW(){return function ny(n,e){return 4&n.type?new J3(e,n,Kl(n,e)):null}(_r(),ge())}let Vs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=oW}return n})();function oW(){return function Px(n,e){let t;const r=e[n.index];return Lr(r)?t=r:(t=sM(r,e,null,n),e[n.index]=t,L_(e,t)),xx(t,e,n,r),new Rx(t,n,e)}(_r(),ge())}const aW=Vs,Rx=class extends aW{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Kl(this._hostTNode,this._hostLView)}get injector(){return new Er(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(Rl(e)){const t=qc(e,this._hostLView),r=Oa(e);return new Er(t[Pe].data[r+8],t)}return new Er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Mx(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Mf(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new Kf(Ct(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const P=(o?u:this.parentInjector).get(gs,null);P&&(s=P)}Ct(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function lI(n){return Lr(n[hn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[hn],f=new Rx(u,u[lr],u[hn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Y3(a,i,o,!r),e.attachToViewContainerRef(),gS(uT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Mx(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);r&&(i_(uT(this._lContainer),t),UI(r[Pe],r))}detach(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);return r&&null!=i_(uT(this._lContainer),t)?new Gf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Mx(n){return n[8]}function uT(n){return n[8]||(n[8]=[])}let xx=function Nx(n,e,t,r){if(n[as])return;let i;i=8&t.type?Kt(r):function cW(n,e){const t=n[rt],r=t.createComment(""),i=Qr(e,n);return Gc(t,g_(t,i),r,function C$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[as]=i};const ET=new ye("Application Initializer");let IT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=ke(ET,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(W_(s))t.push(s);else if($M(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const fo=new ye("LocaleId",{providedIn:"root",factory:()=>ke(fo,pt.Optional|pt.SkipSelf)||function UW(){return typeof $localize<"u"&&$localize.locale||dd}()});let sN=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $W{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let oN=(()=>{class n{compileModuleSync(t){return new sT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=zo(Fr(t).declarations).reduce((o,a)=>{const c=Ct(a);return c&&o.push(new Kf(c)),o},[]);return new $W(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lN=new ye(""),oy=new ye("");let AT,bT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,AT||(function lG(n){AT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{St.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(le(St),le(CT),le(oy))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})(),CT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return AT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ha=null;const dN=new ye("AllowMultipleToken"),DT=new ye("PlatformDestroyListeners"),ST=new ye("appBootstrapListener");class fN{constructor(e,t){this.name=e,this.token=t}}function gN(n,e,t=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=RT();if(!o||o.injector.get(dN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function fG(n){if(Ha&&!Ha.get(dN,!1))throw new x(400,!1);(function hN(){!function eI(n){gl=n}(()=>{throw new x(600,!1)})})(),Ha=n;const e=n.get(_N);(function pN(n){n.get(vR,null)?.forEach(t=>t())})(n)}(function mN(n=[],e){return Jr.create({name:e,providers:[{provide:ew,useValue:"platform"},{provide:DT,useValue:new Set([()=>Ha=null])},...n]})}(a,r))}return function gG(n){const e=RT();if(!e)throw new x(401,!1);return e}()}}function RT(){return Ha?.get(_N)??null}let _N=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function mG(n="zone.js",e){return"noop"===n?new HH:"zone.js"===n?new St(e):n}(r?.ngZone,function yN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function b3(n,e,t){return new iT(n,e,t)}(t.moduleType,this.injector,function TN(n){return[{provide:St,useFactory:n},{provide:Bf,multi:!0,useFactory:()=>{const e=ke(yG,{optional:!0});return()=>e.initialize()}},{provide:wN,useFactory:_G},{provide:OR,useFactory:FR}]}(()=>i)),o=s.injector.get(Os,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{ay(this._modules,s),a.unsubscribe()})}),function vN(n,e,t){try{const r=t();return W_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(IT);return a.runInitializers(),a.donePromise.then(()=>(function VP(n){Pi(n,"Expected localeId to be defined"),"string"==typeof n&&(LP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(fo,dd)||dd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=EN({},r);return function dG(n,e,t){const r=new sT(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(tu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new x(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(DT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(le(Jr))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function EN(n,e){return Array.isArray(e)?e.reduce(EN,n):{...n,...e}}let tu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ke(wN),this.zoneIsStable=ke(OR),this.componentTypes=[],this.components=[],this.isStable=ke(sN).hasPendingTasks.pipe(Fe(t=>t?O(!1):this.zoneIsStable),Xe(),ue()),this._injector=ke(gs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof bR;if(!this._injector.get(IT).done)throw!i&&function eo(n){const e=Ct(n)||er(n)||ur(n);return null!==e&&e.standalone}(t),new x(405,!1);let o;o=i?t:this._injector.get(x_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function hG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(eu),u=o.create(Jr.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(lN,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),ay(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ay(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(ST,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ay(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ay(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wN=new ye("",{providedIn:"root",factory:()=>ke(Os).handleError.bind(void 0)});function _G(){const n=ke(St),e=ke(Os);return t=>n.runOutsideAngular(()=>e.handleError(t))}let yG=(()=>{class n{constructor(){this.zone=ke(St),this.applicationRef=ke(tu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let MT=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=EG}return n})();function EG(n){return function IG(n,e,t){if(Da(n)&&!t){const r=Vr(n.index,e);return new Gf(r,r)}return 47&n.type?new Gf(e[Un],e):null}(_r(),ge(),16==(16&n))}class SN{constructor(){}supports(e){return j_(e)}create(e){return new DG(e)}}const AG=(n,e)=>e;class DG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||AG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<MN(r,i,s)?t:r,a=MN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!j_(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Jz(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new SG(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new RN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class SG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class RN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new RG,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class PN{constructor(){}supports(e){return e instanceof Map||Ow(e)}create(){return new MG}}class MG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ow(e)))throw new x(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new PG(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class PG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xN(){return new ly([new SN])}let ly=(()=>{class n{static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:xN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||xN()),deps:[[n,new xf,new dr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new x(901,!1)}}return n})();function NN(){return new up([new PN])}let up=(()=>{class n{static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:NN});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||NN()),deps:[[n,new xf,new dr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new x(901,!1)}}return n})();const kG=gN(null,"core",[]);let OG=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(le(tu))};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({})}return n})();function FT(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let LT=null;function pd(){return LT}class ZG{}const Hn=new ye("DocumentToken");let VT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return ke(YG)},providedIn:"platform"})}return n})();const QG=new ye("Location Initialized");let YG=(()=>{class n extends VT{constructor(){super(),this._doc=ke(Hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pd().getBaseHref(this._doc)}onPopState(t){const r=pd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=pd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function UT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $N(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ko(n){return n&&"?"!==n[0]?"?"+n:n}let ru=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return ke(zN)},providedIn:"root"})}return n})();const HN=new ye("appBaseHref");let zN=(()=>{class n extends ru{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ke(Hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return UT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(VT),le(HN,8))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XG=(()=>{class n extends ru{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=UT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(VT),le(HN,8))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})(),BT=(()=>{class n{constructor(t){this._subject=new mi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function t9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}($N(qN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ko(r))}normalize(t){return n.stripTrailingSlash(function e9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,qN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ko;static#t=this.joinWithSlash=UT;static#n=this.stripTrailingSlash=$N;static#r=this.\u0275fac=function(r){return new(r||n)(le(ru))};static#i=this.\u0275prov=Ne({token:n,factory:function(){return function JG(){return new BT(le(ru))}()},providedIn:"root"})}return n})();function qN(n){return n.replace(/\/index.html$/,"")}const QT=/\s+/,ek=[];let tk=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=ek,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(QT):ek}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(QT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(QT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(ly),Qe(up),Qe(Ho),Qe(N_))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class j9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rk=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new j9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),ik(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ik(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(Vs),Qe(Go),Qe(ly))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function ik(n,e){n.context.$implicit=e.item}let sk=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ok("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ok("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(Vs),Qe(Go))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class $9{constructor(){this.$implicit=null,this.ngIf=null}}function ok(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${je(e)}'.`)}let uk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({})}return n})();const lk="browser";function wy(n){return"server"===n}let _6=(()=>{class n{static#e=this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new y6(le(Hn),window)})}return n})();class y6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function v6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class H6 extends ZG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rb extends H6{static makeCurrent(){!function KG(n){LT||(LT=n)}(new rb)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function z6(){return fp=fp||document.querySelector("base"),fp?fp.getAttribute("href"):null}();return null==t?null:function q6(n){Cy=Cy||document.createElement("a"),Cy.setAttribute("href",n);const e=Cy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function U9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Cy,fp=null,G6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const ib=new ye("EventManagerPlugins");let gk=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(le(ib),le(St))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class mk{constructor(e){this._doc=e}}const sb="ng-app-id";let _k=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${sb}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(sb),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(sb,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hn),le(A_),le(iw,8),le(ms))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const ob={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ab=/%COMP%/g,Y6=new ye("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function vk(n,e){return e.map(t=>t.replace(ab,n))}let cb=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=wy(a),this.defaultRenderer=new ub(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===$n.ShadowDom&&(r={...r,encapsulation:$n.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Ik?i.applyToHost(t):i instanceof lb&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case $n.Emulated:s=new Ik(c,u,r,this.appId,f,o,a,m);break;case $n.ShadowDom:return new t8(c,u,t,r,o,a,this.nonce,m);default:s=new lb(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(le(gk),le(_k),le(A_),le(Y6),le(Hn),le(ms),le(St),le(iw))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class ub{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ob[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ek(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ek(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ob[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ob[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ua.DashCase|Ua.Important)?e.style.setProperty(t,r,i&Ua.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ua.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=pd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Ek(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class t8 extends ub{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=vk(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lb extends ub{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?vk(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ik extends lb{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function X6(n){return"_ngcontent-%COMP%".replace(ab,n)}(u),this.hostAttr=function J6(n){return"_nghost-%COMP%".replace(ab,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let n8=(()=>{class n extends mk{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hn))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const wk=["alt","control","meta","shift"],r8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s8=(()=>{class n extends mk{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),wk.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=r8[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),wk.forEach(o=>{o!==i&&(0,i8[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hn))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const u8=gN(kG,"browser",[{provide:ms,useValue:lk},{provide:vR,useValue:function o8(){rb.makeCurrent()},multi:!0},{provide:Hn,useFactory:function c8(){return function N$(n){WI=n}(document),document},deps:[]}]),l8=new ye(""),Ck=[{provide:oy,useClass:class W6{addToWindow(e){Wt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new x(5103,!1);return s},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements(),Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(r=>{const i=Wt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?pd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:lN,useClass:bT,deps:[St,CT,oy]},{provide:bT,useClass:bT,deps:[St,CT,oy]}],Ak=[{provide:ew,useValue:"root"},{provide:Os,useFactory:function a8(){return new Os},deps:[]},{provide:ib,useClass:n8,multi:!0,deps:[Hn,St,ms]},{provide:ib,useClass:s8,multi:!0,deps:[Hn]},cb,_k,gk,{provide:Hf,useExisting:cb},{provide:class E6{},useClass:G6,deps:[]},[]];let fb,Dk=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:A_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(l8,12))};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({providers:[...Ak,...Ck],imports:[uk,OG]})}return n})(),Sk=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hn))};static#t=this.\u0275prov=Ne({token:n,factory:function(r){let i=null;return i=r?new r:function h8(){return new Sk(le(Hn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{fb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fb=!1}let pp,Nk=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function m6(n){return n===lk}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(le(ms))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ay(n){return function _8(){if(null==pp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pp=!0}))}finally{pp=pp||!1}return pp}()?n:!!n.capture}function Ok(n){return Array.isArray(n)?n:[n]}const{isArray:D8}=Array,{getPrototypeOf:S8,prototype:R8,keys:M8}=Object;const{isArray:x8}=Array;function Sy(...n){const e=Fn(n),t=function Rs(n){return M(Ri(n))?n.pop():void 0}(n),{args:r,keys:i}=function Lk(n){if(1===n.length){const e=n[0];if(D8(e))return{args:e,keys:null};if(function P8(n){return n&&"object"==typeof n&&S8(n)===R8}(e)){const t=M8(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return b([],e);const s=new at(function k8(n,e,t=yn){return r=>{Bk(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)Bk(e,()=>{const u=b(n[c],e);let f=!1;u.subscribe(Te(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function Uk(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):yn));return t?s.pipe(function Vk(n){return Me(e=>function N8(n,e){return x8(e)?n(...e):n(e)}(n,e))}(t)):s}function Bk(n,e,t){n?vn(t,n,e):e()}function Ry(...n){return function O8(){return Cr(1)}()(b(n,Fn(n)))}function su(n){return n<=0?()=>On:se((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xi(n,e){return se((t,r)=>{let i=0;t.subscribe(Te(r,s=>n.call(e,s,i++)&&r.next(s)))})}class L8 extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const My={setInterval(n,e,...t){const{delegate:r}=My;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=My;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class jk extends L8{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return My.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&My.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const gb={now:()=>(gb.delegate||Date).now(),delegate:void 0};class gp{constructor(e,t=gp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}gp.now=gb.now;class $k extends gp{constructor(e,t=gp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const mb=new $k(jk);function Hk(n,e=mb){return se((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Te(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function mp(...n){const e=Fn(n);return se((t,r)=>{(e?Ry(n,t,e):Ry(n,t)).subscribe(r)})}function zk(n){return se((e,t)=>{Ft(n).subscribe(Te(t,()=>t.complete(),Be)),!t.closed&&e.subscribe(t)})}const qk=new Set;let ou,V8=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):B8}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function U8(n,e){if(!qk.has(n))try{ou||(ou=document.createElement("style"),e&&(ou.nonce=e),ou.setAttribute("type","text/css"),document.head.appendChild(ou)),ou.sheet&&(ou.sheet.insertRule(`@media ${n} {body{ }}`,0),qk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Nk),le(iw,8))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function B8(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let j8=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Wk(Ok(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Sy(Wk(Ok(t)).map(o=>this._registerQuery(o).observable));return s=Ry(s.pipe(su(1)),s.pipe(function F8(n){return Xi((e,t)=>n<=t)}(1),Hk(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new at(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(mp(r),Me(({matches:o})=>({query:t,matches:o})),zk(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(le(V8),le(St))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Qk="cdk-high-contrast-black-on-white",Yk="cdk-high-contrast-white-on-black",_b="cdk-high-contrast-active";let X8=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=ke(j8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_b,Qk,Yk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(_b,Qk):2===r&&t.add(_b,Yk)}}static#e=this.\u0275fac=function(r){return new(r||n)(le(Nk),le(Hn))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({})}return n})();const n5=new ye("mat-sanity-checks",{providedIn:"root",factory:function t5(){return!0}});let qa=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function E8(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(le(X8),le(n5,8),le(Hn))};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[Xk,Xk]})}return n})(),tO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[qa,qa]})}return n})();const nO=Ay({passive:!0,capture:!0});class s5{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function v8(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nO)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nO)))}}class yb{static#e=this._eventManager=new s5;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Fk(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...rO,...r.animation},o=r.radius||function a5(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new i5(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!T&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",H),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(T||!u)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...rO,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Fk(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sO.forEach(r=>{yb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{oO.forEach(t=>{this._triggerElement.addEventListener(t,this,iO)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Z8(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Q8(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(sO.forEach(t=>yb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&oO.forEach(t=>e.removeEventListener(t,this,iO)))}}let p5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[qa,uk,qa]})}return n})();function _d(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new at(e?i=>e.schedule(r,0,i):r)}function fr(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Te(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):yn}function Wa(n){return se((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Te(t,void 0,void 0,o=>{s=Ft(n(o,Wa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Py(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yd(n,e){return M(e)?tn(n,e,1):tn(n,1)}let K5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[qa,qa]})}return n})(),Y5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[tO,qa,tO,qa]})}return n})();const Ly=we(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function CO(n){return new at(e=>{Ft(n()).subscribe(e)})}function Ab(){return se((n,e)=>{let t=null;n._refCount++;const r=Te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class AO extends at{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(Te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return Ab()(this)}}function Vy(n){return se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function DO(n=J5){return se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J5(){return new Ly}function Za(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):yn,su(1),t?Vy(e):DO(()=>new Ly))}function Uy(n,e){return se(function eK(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Te(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Db(n){return n<=0?()=>On:se((e,t)=>{let r=[];e.subscribe(Te(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const dt="primary",Ip=Symbol("RouteTitle");class rK{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vd(n){return new rK(n)}function iK(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function po(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!SO(n[i],e[i]))return!1;return!0}function SO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function RO(n){return n.length>0?n[n.length-1]:null}function Qa(n){return function X5(n){return!!n&&(n instanceof at||M(n.lift)&&M(n.subscribe))}(n)?n:W_(n)?b(Promise.resolve(n)):O(n)}const oK={exact:function xO(n,e,t){if(!lu(n.segments,e.segments)||!By(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xO(n.children[r],e.children[r],t))return!1;return!0},subset:NO},MO={exact:function aK(n,e){return po(n,e)},subset:function cK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>SO(n[t],e[t]))},ignored:()=>!0};function PO(n,e,t){return oK[t.paths](n.root,e.root,t.matrixParams)&&MO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function NO(n,e,t){return kO(n,e,e.segments,t)}function kO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!lu(i,t)||e.hasChildren()||!By(i,t,r))}if(n.segments.length===t.length){if(!lu(n.segments,t)||!By(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!NO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(lu(n.segments,i)&&By(n.segments,i,r)&&n.children[dt])&&kO(n.children[dt],e,s,r)}}function By(n,e,t){return e.every((r,i)=>MO[t](n[i].parameters,r.parameters))}class Ed{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vd(this.queryParams)),this._queryParamMap}toString(){return dK.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jy(this)}}class wp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vd(this.parameters)),this._parameterMap}toString(){return LO(this)}}function lu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Tp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return new Sb},providedIn:"root"})}return n})();class Sb{parse(e){const t=new wK(e);return new Ed(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bp(e.root,!0)}`,r=function pK(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$y(t)}=${$y(i)}`).join("&"):`${$y(t)}=${$y(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hK(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dK=new Sb;function jy(n){return n.segments.map(e=>LO(e)).join("/")}function bp(n,e){if(!n.hasChildren())return jy(n);if(e){const t=n.children[dt]?bp(n.children[dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==dt&&r.push(`${i}:${bp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===dt?[bp(n.children[dt],!1)]:[`${i}:${bp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${jy(n)}/${t[0]}`:`${jy(n)}/(${t.join("//")})`}}function OO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $y(n){return OO(n).replace(/%3B/gi,";")}function Rb(n){return OO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hy(n){return decodeURIComponent(n)}function FO(n){return Hy(n.replace(/\+/g,"%20"))}function LO(n){return`${Rb(n.path)}${function fK(n){return Object.keys(n).map(e=>`;${Rb(e)}=${Rb(n[e])}`).join("")}(n.parameters)}`}const gK=/^[^\/()?;#]+/;function Mb(n){const e=n.match(gK);return e?e[0]:""}const mK=/^[^\/()?;=#]+/,yK=/^[^=?&#]+/,EK=/^[^&#]+/;class wK{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Xt(e,t)),r}parseSegment(){const e=Mb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new wp(Hy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function _K(n){const e=n.match(mK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Mb(this.remaining);i&&(r=i,this.capture(r))}e[Hy(t)]=Hy(r)}parseQueryParam(e){const t=function vK(n){const e=n.match(yK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function IK(n){const e=n.match(EK);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=FO(t),s=FO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Mb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new x(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new Xt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}}function VO(n){return n.segments.length>0?new Xt([],{[dt]:n}):n}function UO(n){const e={};for(const r of Object.keys(n.children)){const s=UO(n.children[r]);if(r===dt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function TK(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function du(n){return n instanceof Ed}function BO(n){let e;const i=VO(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new Xt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function jO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Pb(i,i,i,t,r);const s=function CK(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new HO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new HO(t,e,r)}(e);if(s.toRoot())return Pb(i,i,new Xt([],{}),t,r);const o=function AK(n,e,t){if(n.isAbsolute)return new qy(e,!0,0);if(!t)return new qy(e,!1,NaN);if(null===t.parent)return new qy(t,!0,0);const r=zy(n.commands[0])?0:1;return function DK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new qy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ap(o.segmentGroup,o.index,s.commands):zO(o.segmentGroup,o.index,s.commands);return Pb(i,o.segmentGroup,a,t,r)}function zy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cp(n){return"object"==typeof n&&null!=n&&n.outlets}function Pb(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:$O(n,e,t);const a=VO(UO(o));return new Ed(a,s,i)}function $O(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:$O(s,e,t)}),new Xt(n.segments,r)}class HO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zy(r[0]))throw new x(4003,!1);const i=r.find(Cp);if(i&&i!==RO(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zO(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Ap(n,e,t);const r=function RK(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Cp(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!WO(c,u,o))return s;r+=2}else{if(!WO(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Xt(n.segments.slice(0,r.pathIndex),{});return s.children[dt]=new Xt(n.segments.slice(r.pathIndex),n.children),Ap(s,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?xb(n,e,t):r.match?Ap(n,0,i):xb(n,e,t)}function Ap(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function SK(n){return Cp(n[0])?n[0].outlets:{[dt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==dt)&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const s=Ap(n.children[dt],e,t);return new Xt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=zO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Xt(n.segments,i)}}function xb(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Cp(s)){const c=MK(s.outlets);return new Xt(r,c)}if(0===i&&zy(t[0])){r.push(new wp(n.segments[e].path,qO(t[0]))),i++;continue}const o=Cp(s)?s.outlets[dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&zy(a)?(r.push(new wp(o,qO(a))),i+=2):(r.push(new wp(o,{})),i++)}return new Xt(r,{})}function MK(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=xb(new Xt([],{}),0,r))}),e}function qO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function WO(n,e,t){return n==t.path&&po(e,t.parameters)}const Dp="imperative";class go{constructor(e,t){this.id=e,this.url=t}}class Wy extends go{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ya extends go{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sp extends go{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Id extends go{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Gy extends go{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GO extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PK extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xK extends go{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NK extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kK extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OK{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BK{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nb{}class kb{constructor(e){this.url=e}}class jK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rp,this.attachRef=null}}let Rp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jK,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class ZO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ob(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ob(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Fb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fb(e,this._root).map(t=>t.value)}}function Ob(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ob(n,t);if(r)return r}return null}function Fb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Fb(n,t);if(r.length)return r.unshift(e),r}return[]}class Xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class QO extends ZO{constructor(e,t){super(e),this.snapshot=t,Lb(this,e)}toString(){return this.snapshot.toString()}}function YO(n,e){const t=function $K(n,e){const o=new Ky([],{},{},"",{},dt,e,null,{});return new JO("",new Xo(o,[]))}(0,e),r=new w([new wp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new Td(r,i,o,a,s,dt,e,t.root);return c.snapshot=t.root,new QO(new Xo(c,[]),t)}class Td{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(u=>u[Ip]))??O(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(e=>vd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(e=>vd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function HK(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ky{get title(){return this.data?.[Ip]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class JO extends ZO{constructor(e,t){super(t),this.url=e,Lb(this,t)}toString(){return e1(this._root)}}function Lb(n,e){e.value._routerState=n,e.children.forEach(t=>Lb(n,t))}function e1(n){const e=n.children.length>0?` { ${n.children.map(e1).join(", ")} } `:"";return`${n.value}${e}`}function Vb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,po(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),po(e.params,t.params)||n.paramsSubject.next(t.params),function sK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!po(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),po(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ub(n,e){const t=po(n.params,e.params)&&function uK(n,e){return lu(n,e)&&n.every((t,r)=>po(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ub(n.parent,e.parent))}let Bb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new mi,this.deactivateEvents=new mi,this.attachEvents=new mi,this.detachEvents=new mi,this.parentContexts=ke(Rp),this.location=ke(Vs),this.changeDetector=ke(MT),this.environmentInjector=ke(gs),this.inputBinder=ke(Zy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new zK(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Uo]})}return n})();class zK{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Td?this.route:e===Rp?this.childContexts:this.parent.get(e,t)}}const Zy=new ye("");let t1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Sy([r.queryParams,r.params,r.data]).pipe(Fe(([s,o,a],c)=>(a={...s,...o,...a},0===c?O(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function GG(n){const e=Ct(n);if(!e)return null;const t=new Kf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();function Mp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function WK(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mp(n,r,i);return Mp(n,r)})}(n,e,t);return new Xo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Mp(n,a)),o}}const r=function GK(n){return new Td(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Mp(n,s));return new Xo(r,i)}}const jb="ngNavigationCancelingError";function n1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function r1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[jb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function s1(n){return n&&n[jb]}let o1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["ng-component"]],standalone:!0,features:[dx],decls:1,vars:0,template:function(r,i){1&r&&cd(0,"router-outlet")},dependencies:[Bb],encapsulation:2})}return n})();function $b(n){const e=n.children&&n.children.map($b),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=o1),t}function js(n){return n.outlet||dt}function Pp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tZ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=wd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=wd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new BK(s.value.snapshot))}),e.children.length&&this.forwardEvent(new VK(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Vb(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Pp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class a1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qy{constructor(e,t){this.component=e,this.route=t}}function nZ(n,e,t){const r=n._root;return xp(r,e?e._root:null,t,[r.value])}function bd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function qE(n){return null!==Wu(n)}(n)?e.get(n):n:r}function xp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=wd(e);return n.children.forEach(o=>{(function iZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function sZ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lu(n.url,e.url)||!po(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ub(n,e)||!po(n.queryParams,e.queryParams);default:return!Ub(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new a1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),xp(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qy(a.outlet.component,o))}else o&&Np(e,a,i),i.canActivateChecks.push(new a1(r)),xp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Np(a,t.getContext(o),i)),i}function Np(n,e,t){const r=wd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Np(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Qy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function kp(n){return"function"==typeof n}function c1(n){return n instanceof Ly||"EmptyError"===n?.name}const Yy=Symbol("INITIAL_VALUE");function Cd(){return Fe(n=>Sy(n.map(e=>e.pipe(su(1),mp(Yy)))).pipe(Me(e=>{for(const t of e)if(!0!==t){if(t===Yy)return Yy;if(!1===t||t instanceof Ed)return t}return!0}),Xi(e=>e!==Yy),su(1)))}function u1(n){return function ui(...n){return li(n)}(fr(e=>{if(du(e))throw n1(0,e)}),Me(e=>!0===e))}class Xy{constructor(e){this.segmentGroup=e||null}}class l1{constructor(e){this.urlTree=e}}function Ad(n){return _d(new Xy(n))}function d1(n){return _d(new l1(n))}class CZ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new x(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return O(r);if(i.numberOfChildren>1||!i.children[dt])return _d(new x(4e3,!1));i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ed(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Hb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AZ(n,e,t,r,i){const s=zb(n,e,t);return s.matched?(r=function ZK(n,e){return n.providers&&!n._injector&&(n._injector=oT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function wZ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?O(i.map(o=>{const a=bd(o,n);return Qa(function dZ(n){return n&&kp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Cd(),u1()):O(!0)}(r,e,t).pipe(Me(o=>!0===o?s:{...Hb}))):O(s)}function zb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||iK)(t,n,e);if(!i)return{...Hb};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function h1(n,e,t,r){return t.length>0&&function RZ(n,e,t){return t.some(r=>Jy(n,e,r)&&js(r)!==dt)}(n,t,r)?{segmentGroup:new Xt(e,SZ(r,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function MZ(n,e,t){return t.some(r=>Jy(n,e,r))}(n,t,r)?{segmentGroup:new Xt(n.segments,DZ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function DZ(n,e,t,r,i){const s={};for(const o of r)if(Jy(n,t,o)&&!i[js(o)]){const a=new Xt([],{});s[js(o)]=a}return{...i,...s}}function SZ(n,e){const t={};t[dt]=e;for(const r of n)if(""===r.path&&js(r)!==dt){const i=new Xt([],{});t[js(r)]=i}return t}function Jy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class kZ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new CZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,!1)}recognize(){const e=h1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(Wa(t=>{if(t instanceof l1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Xy?this.noMatchError(t):t}),Me(t=>{const r=new Ky([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,{}),i=new Xo(r,t),s=new JO("",i),o=function bK(n,e,t=null,r=null){return jO(BO(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,dt).pipe(Wa(r=>{throw r instanceof Xy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=XO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(yd(s=>{const o=r.children[s],a=function JK(n,e){const t=n.filter(r=>js(r)===e);return t.push(...n.filter(r=>js(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Uy((s,o)=>(s.push(...o),s)),Vy(null),function tK(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):yn,Db(1),t?Vy(e):DO(()=>new Ly))}(),tn(s=>{if(null===s)return Ad(r);const o=f1(s);return function OZ(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),O(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(yd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Wa(c=>{if(c instanceof Xy)return O(null);throw c}))),Za(a=>!!a),Wa(a=>{if(c1(a))return function xZ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?O([]):Ad(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function PZ(n,e,t,r){return!!(js(n)===r||r!==dt&&Jy(e,t,n))&&("**"===n.path||zb(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ad(i):Ad(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?d1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(tn(o=>{const a=new Xt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=zb(t,i,s);if(!a)return Ad(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?d1(m):this.applyRedirects.lineralizeSegments(i,m).pipe(tn(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?RO(i).parameters:{};a=O({snapshot:new Ky(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,p1(r),js(r),r.component??r._loadedComponent??null,r,g1(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=AZ(t,r,i,e).pipe(Me(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Ky(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,p1(r),js(r),r.component??r._loadedComponent??null,r,g1(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe(Fe(c=>null===c?Ad(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Fe(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:T,slicedSegments:R}=h1(t,y,I,u);if(0===R.length&&T.hasChildren())return this.processChildren(f,u,T).pipe(Me(H=>null===H?null:[new Xo(m,H)]));if(0===u.length&&0===R.length)return O([new Xo(m,[])]);const P=js(r)===s;return this.processSegment(f,u,T,R,P?dt:s,!0).pipe(Me(H=>[new Xo(m,H)]))}))))}getChildConfig(e,t,r){return t.children?O({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?O({routes:t._loadedRoutes,injector:t._loadedInjector}):function IZ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?O(!0):O(i.map(o=>{const a=bd(o,n);return Qa(function aZ(n){return n&&kp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Cd(),u1())}(e,t,r).pipe(tn(i=>i?this.configLoader.loadChildren(e,t).pipe(fr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function bZ(n){return _d(r1(!1,3))}())):O({routes:[],injector:e})}}function FZ(n){const e=n.value.routeConfig;return e&&""===e.path}function f1(n){const e=[],t=new Set;for(const r of n){if(!FZ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=f1(r.children);e.push(new Xo(r.value,i))}return e.filter(r=>!t.has(r))}function p1(n){return n.data||{}}function g1(n){return n.resolve||{}}function m1(n){return"string"==typeof n.title||null===n.title}function qb(n){return Fe(e=>{const t=n(e);return t?b(t).pipe(Me(()=>e)):O(e)})}const Dd=new ye("ROUTES");let Wb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ke(oN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return O(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Qa(t.loadComponent()).pipe(Me(_1),fr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Py(()=>{this.componentLoaders.delete(t)})),i=new AO(r,()=>new oe).pipe(Ab());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return O({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function HZ(n,e,t,r){return Qa(n.loadChildren()).pipe(Me(_1),tn(i=>i instanceof ux||Array.isArray(i)?O(i):b(e.compileModuleAsync(i))),Me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Dd,[],{optional:!0,self:!0}).flat()),{routes:o.map($b),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Py(()=>{this.childrenLoaders.delete(r)})),o=new AO(s,()=>new oe).pipe(Ab());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _1(n){return function zZ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ev=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=ke(Wb),this.environmentInjector=ke(gs),this.urlSerializer=ke(Tp),this.rootContexts=ke(Rp),this.inputBindingEnabled=null!==ke(Zy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new FK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new OK(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(s=>0!==s.id),Me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Fe(s=>{this.currentTransition=s;let o=!1,a=!1;return O(s).pipe(fr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fe(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Id(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),On}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return O(c).pipe(Fe(y=>{const I=this.transitions?.getValue();return this.events.next(new Wy(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?On:Promise.resolve(y)}),function LZ(n,e,t,r,i,s){return tn(o=>function NZ(n,e,t,r,i,s,o="emptyOnly"){return new kZ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Me(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),fr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new GO(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:R,extras:P}=c,H=new Wy(y,this.urlSerializer.serialize(I),T,R);this.events.next(H);const V=YO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:V,urlAfterRedirects:I,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},O(s)}{const y="";return this.events.next(new Id(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),On}}),fr(c=>{const u=new PK(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Me(c=>(this.currentTransition=s={...c,guards:nZ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function fZ(n,e){return tn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?O({...t,guardsResult:!0}):function pZ(n,e,t,r){return b(n).pipe(tn(i=>function EZ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?O(s.map(a=>{const c=Pp(e)??i,u=bd(a,c);return Qa(function lZ(n){return n&&kp(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Za())})).pipe(Cd()):O(!0)}(i.component,i.route,t,e,r)),Za(i=>!0!==i,!0))}(o,r,i,n).pipe(tn(a=>a&&function oZ(n){return"boolean"==typeof n}(a)?function gZ(n,e,t,r){return b(e).pipe(yd(i=>Ry(function _Z(n,e){return null!==n&&e&&e(new LK(n)),O(!0)}(i.route.parent,r),function mZ(n,e){return null!==n&&e&&e(new UK(n)),O(!0)}(i.route,r),function vZ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function rZ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>CO(()=>O(o.guards.map(c=>{const u=Pp(o.node)??t,f=bd(c,u);return Qa(function uZ(n){return n&&kp(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(Za())})).pipe(Cd())));return O(s).pipe(Cd())}(n,i.path,t),function yZ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return O(!0);const i=r.map(s=>CO(()=>{const o=Pp(e)??t,a=bd(s,o);return Qa(function cZ(n){return n&&kp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Za())}));return O(i).pipe(Cd())}(n,i.route,t))),Za(i=>!0!==i,!0))}(r,s,n,e):O(a)),Me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),fr(c=>{if(s.guardsResult=c.guardsResult,du(c.guardsResult))throw n1(0,c.guardsResult);const u=new xK(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Xi(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),qb(c=>{if(c.guards.canActivateChecks.length)return O(c).pipe(fr(u=>{const f=new NK(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Fe(u=>{let f=!1;return O(u).pipe(function VZ(n,e){return tn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return O(t);let s=0;return b(i).pipe(yd(o=>function UZ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!m1(i)&&(s[Ip]=i.title),function BZ(n,e,t,r){const i=function jZ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return O({});const s={};return b(i).pipe(tn(o=>function $Z(n,e,t,r){const i=Pp(e)??r,s=bd(n,i);return Qa(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Za(),fr(a=>{s[o]=a}))),Db(1),function nK(n){return Me(()=>n)}(s),Wa(o=>c1(o)?On:_d(o)))}(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=XO(n,t).resolve,i&&m1(i)&&(n.data[Ip]=i.title),null)))}(o.route,r,n,e)),fr(()=>s++),Db(1),tn(o=>s===i.length?O(t):On))})}(t.paramsInheritanceStrategy,this.environmentInjector),fr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),fr(u=>{const f=new kK(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),qb(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(fr(y=>{f.component=y}),Me(()=>{})));for(const y of f.children)m.push(...u(y));return m};return Sy(u(c.targetSnapshot.root)).pipe(Vy(),su(1))}),qb(()=>this.afterPreactivation()),Me(c=>{const u=function qK(n,e,t){const r=Mp(n,e._root,t?t._root:void 0);return new QO(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),fr(()=>{this.events.next(new Nb)}),((n,e,t,r)=>Me(i=>(new tZ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),su(1),fr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ya(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),zk(this.transitionAbortSubject.pipe(fr(c=>{throw c}))),Py(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Wa(c=>{if(a=!0,s1(c))this.events.next(new Sp(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function KK(n){return s1(n)&&du(n.url)}(c)?this.events.next(new kb(c.url)):s.resolve(!1);else{this.events.next(new Gy(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return On}))}))}cancelNavigationTransition(t,r,i){const s=new Sp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y1(n){return n!==Dp}let v1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===dt);return r}getResolvedTitleForRoute(t){return t.data[Ip]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return ke(qZ)},providedIn:"root"})}return n})(),qZ=(()=>{class n extends v1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Sk))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return ke(KZ)},providedIn:"root"})}return n})();class GZ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let KZ=(()=>{class n extends GZ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=function Rf(n){return Js(()=>{const e=n.prototype.constructor,t=e[Gr]||Wc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Gr]||Wc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}();static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tv=new ye("",{providedIn:"root",factory:()=>({})});let ZZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:function(){return ke(QZ)},providedIn:"root"})}return n})(),QZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Op=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Op||{});function E1(n,e){n.events.pipe(Xi(t=>t instanceof Ya||t instanceof Sp||t instanceof Gy||t instanceof Id),Me(t=>t instanceof Ya||t instanceof Id?Op.COMPLETE:t instanceof Sp&&(0===t.code||1===t.code)?Op.REDIRECTING:Op.FAILED),Xi(t=>t!==Op.REDIRECTING),su(1)).subscribe(()=>{e()})}function YZ(n){throw n}function XZ(n,e,t){return e.parse("/")}const JZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},e7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Es=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ke(iN),this.isNgZoneEnabled=!1,this._events=new oe,this.options=ke(tv,{optional:!0})||{},this.pendingTasks=ke(sN),this.errorHandler=this.options.errorHandler||YZ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||XZ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ke(ZZ),this.routeReuseStrategy=ke(WZ),this.titleStrategy=ke(v1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ke(Dd,{optional:!0})?.flat()??[],this.navigationTransitions=ke(ev),this.urlSerializer=ke(Tp),this.location=ke(BT),this.componentInputBindingEnabled=!!ke(Zy,{optional:!0}),this.eventsSubscription=new kt,this.isNgZoneEnabled=ke(St)instanceof St&&St.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ed,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=YO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(I1(r)&&this._events.next(r));if(r instanceof Wy)y1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Id)this.rawUrlTree=i.rawUrl;else if(r instanceof GO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Nb)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Sp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof kb){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||y1(i.source)};this.scheduleNavigation(s,Dp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Gy&&this.restoreHistory(i,!0),r instanceof Ya&&(this.navigated=!0),I1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Dp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($b),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=BO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return jO(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=du(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Dp,null,r)}navigate(t,r={skipLocationChange:!1}){return function t7(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new x(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...JZ}:!1===r?{...e7}:r,du(t))return PO(this.currentUrlTree,t,i);const s=this.parseUrl(t);return PO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return E1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I1(n){return!(n instanceof Nb||n instanceof kb)}let nv=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Ya&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function lR(n,e,t){return function sH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?uR:w_}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(Es),Qe(Td),function La(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(tl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(_r(),n)}("tabindex"),Qe(N_),Qe(Ho),Qe(ru))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Wo("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Fw("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",FT],skipLocationChange:["skipLocationChange","skipLocationChange",FT],replaceUrl:["replaceUrl","replaceUrl",FT],routerLink:"routerLink"},standalone:!0,features:[bM,Uo]})}return n})();class w1{}let i7=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Ya),yd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=oT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(Cr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):O(null);const s=i.pipe(tn(o=>null===o?O(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(Cr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(le(Es),le(oN),le(gs),le(w1),le(Wb))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Gb=new ye("");let T1=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ya?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Id&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof KO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new KO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function QR(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();function Jo(n,e){return{\u0275kind:n,\u0275providers:e}}function C1(){const n=ke(Jr);return e=>{const t=n.get(tu);if(e!==t.components[0])return;const r=n.get(Es),i=n.get(A1);1===n.get(Kb)&&r.initialNavigation(),n.get(D1,null,pt.Optional)?.setUpPreloading(),n.get(Gb,null,pt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const A1=new ye("",{factory:()=>new oe}),Kb=new ye("",{providedIn:"root",factory:()=>1}),D1=new ye("");function c7(n){return Jo(0,[{provide:D1,useExisting:i7},{provide:w1,useExisting:n}])}const S1=new ye("ROUTER_FORROOT_GUARD"),l7=[BT,{provide:Tp,useClass:Sb},Es,Rp,{provide:Td,useFactory:function b1(n){return n.routerState.root},deps:[Es]},Wb,[]];function d7(){return new fN("Router",Es)}let R1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[l7,[],{provide:Dd,multi:!0,useValue:t},{provide:S1,useFactory:g7,deps:[[Es,new dr,new xf]]},{provide:tv,useValue:r||{}},r?.useHash?{provide:ru,useClass:XG}:{provide:ru,useClass:zN},{provide:Gb,useFactory:()=>{const n=ke(_6),e=ke(St),t=ke(tv),r=ke(ev),i=ke(Tp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new T1(i,r,n,e,t)}},r?.preloadingStrategy?c7(r.preloadingStrategy).\u0275providers:[],{provide:fN,multi:!0,useFactory:d7},r?.initialNavigation?m7(r):[],r?.bindToComponentInputs?Jo(8,[t1,{provide:Zy,useExisting:t1}]).\u0275providers:[],[{provide:M1,useFactory:C1},{provide:ST,multi:!0,useExisting:M1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Dd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(S1,8))};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({})}return n})();function g7(n){return"guarded"}function m7(n){return["disabled"===n.initialNavigation?Jo(3,[{provide:ET,multi:!0,useFactory:()=>{const e=ke(Es);return()=>{e.setUpLocationChangeListener()}}},{provide:Kb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jo(2,[{provide:Kb,useValue:0},{provide:ET,multi:!0,deps:[Jr],useFactory:e=>{const t=e.get(QG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Es),s=e.get(A1);E1(i,()=>{r(!0)}),e.get(ev).afterPreactivation=()=>(r(!0),s.closed?O(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const M1=new ye("");let y7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-home"]],decls:33,vars:0,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"]],template:function(r,i){1&r&&(Et(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),jt(4,"Bine ati venit in comunitatea Romani in Seattle"),gt()()(),cd(5,"p"),Et(6,"div",3)(7,"div",4)(8,"h2"),jt(9,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),gt(),Et(10,"p"),jt(11," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),gt()()(),Et(12,"div",3)(13,"div",5)(14,"h2"),jt(15,"Evenimente"),gt(),Et(16,"p"),jt(17,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),gt()(),Et(18,"div",5)(19,"h2"),jt(20,"Servicii"),gt(),Et(21,"p"),jt(22,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),gt()(),Et(23,"div",5)(24,"h2"),jt(25,"Oportunit\u0103\u021bi"),gt(),Et(26,"p"),jt(27,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),gt()(),Et(28,"div",5)(29,"h2"),jt(30,"Resurse"),gt(),Et(31,"p"),jt(32,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),gt()()()())},styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}"]})}return n})();var qn=Ge(534);(0,qn.registerVersion)("firebase","10.12.1","app");const T7=new class w7 extends $k{}(class I7 extends jk{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Xa=new Qc("ANGULARFIRE2_VERSION");function Zb(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const rv=(n,e)=>{const t=e?[e]:(0,qn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Fp{constructor(){return rv(b7)}}const b7="app-check";function Sd(){}class P1{zone;delegate;constructor(e,t=T7){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class C7{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sd,{},Sd,Sd)),t.pipe(fr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new P1(Zone.current)),this.insideAngular=t.run(()=>new P1(Zone.current,mb)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(le(St))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Md(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function hu(n){return Md().ngZone.run(()=>n())}function x1(n){return n.pipe(En(Md().outsideAngular))}function Ei(n){return function D7(n){return function(t){return(t=t.lift(new C7(n.ngZone))).pipe(Ar(n.outsideAngular),En(n.insideAngular))}}(Md())(n)}const S7=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),hu(()=>n.apply(void 0,r))},Qb=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=hu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sd,{},Sd,Sd))),r[s]=S7(r[s],t));const i=function A7(n){return Md().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof at){const s=Md();return i.pipe(Ar(s.outsideAngular),En(s.insideAngular))}return hu(()=>i)}return i instanceof at?i.pipe(Ei):i instanceof Promise?hu(()=>new Promise((s,o)=>i.then(a=>hu(()=>s(a)),a=>hu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:hu(()=>i)};var mo=Ge(106);mo.Z.registerVersion("firebase","10.12.1","app-compat");const P7=["ngOnDestroy"];class N1{constructor(e){return e}}const Lp=new ye("angularfire2.app.options"),Vp=new ye("angularfire2.app.name");function iv(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=mo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>mo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;k7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new N1(o)}const k7=(n,...e)=>{},O7={provide:N1,useFactory:iv,deps:[Lp,St,[new dr,Vp]]};let F7=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Lp,useValue:t},{provide:Vp,useValue:r}]}}constructor(t){mo.Z.registerVersion("angularfire",Xa.full,"core"),mo.Z.registerVersion("angularfire",Xa.full,"app-compat"),mo.Z.registerVersion("angular",gw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(ms))};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[O7]})}return n})();function Yb(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function L7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(k1("error",`${e} was already initialized on the ${t} Firebase App with different settings.${V7?" You may need to reload as Firebase is not HMR aware.":""}`),k1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const V7=typeof module<"u"&&!!module.hot,k1=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ge(365);class U7 extends oe{constructor(e=1/0,t=1/0,r=gb){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function O1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ue({connector:()=>new U7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function F1(n,e){return M(e)?Fe(()=>n,e):Fe(()=>n)}const L1=new ye("angularfire2.auth.use-emulator"),V1=new ye("angularfire2.auth.settings"),U1=new ye("angularfire2.auth.tenant-id"),B1=new ye("angularfire2.auth.langugage-code"),j1=new ye("angularfire2.auth.use-device-language"),$1=new ye("angularfire.auth.persistence"),H1=(n,e,t,r,i,s,o,a)=>Yb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let z1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const T=new oe,R=O(void 0).pipe(En(o.outsideAngular),Fe(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ge.bind(Ge,365)))),Me(()=>iv(t,s,r)),Me(P=>H1(P,s,a,u,f,m,c,y)),O1({bufferSize:1,refCount:!1}));if(wy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=O(null);else{R.pipe(Za()).subscribe();const P=R.pipe(Fe(G=>G.getRedirectResult().then(te=>te,()=>null)),Ei,O1({bufferSize:1,refCount:!1})),H=R.pipe(Fe(G=>new at(te=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(Ie=>te.next(Ie),Ie=>te.error(Ie),()=>te.complete()))})))),V=R.pipe(Fe(G=>new at(te=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(Ie=>te.next(Ie),Ie=>te.error(Ie),()=>te.complete()))}))));this.authState=P.pipe(F1(H),Ar(o.outsideAngular),En(o.insideAngular)),this.user=P.pipe(F1(V),Ar(o.outsideAngular),En(o.insideAngular)),this.idToken=this.user.pipe(Fe(G=>G?b(G.getIdToken()):O(null))),this.idTokenResult=this.user.pipe(Fe(G=>G?b(G.getIdTokenResult()):O(null))),this.credential=S(P,T,this.authState.pipe(Xi(G=>!G))).pipe(Me(G=>G?.user?G:null),Ar(o.outsideAngular),En(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(P7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,R,s,{spy:{apply:(P,H,V)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&V.then(G=>T.next(G))}}})}static \u0275fac=function(r){return new(r||n)(le(Lp),le(Vp,8),le(ms),le(St),le(Rd),le(L1,8),le(V1,8),le(U1,8),le(B1,8),le(j1,8),le($1,8),le(Fp,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Xb(){return se((n,e)=>{let t,r=!1;n.subscribe(Te(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var fu,G1,ae=Ge(861),sv=Ge(537),_o=Ge(879),lt=Ge(58),q1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,N,L){L||(L=0);var z=Array(16);if("string"==typeof N)for(var q=0;16>q;++q)z[q]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(q=0;16>q;++q)z[q]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;var X=j.g[3],U=(N=j.g[0])+(X^(L=j.g[1])&((q=j.g[2])^X))+z[0]+3614090360&4294967295;U=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=L+(U<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[1]+3905402710&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[2]+606105819&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[3]+3250441966&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[4]+4118548399&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[5]+1200080426&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[6]+2821735955&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[7]+4249261313&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[8]+1770035416&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[9]+2336552879&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[10]+4294925233&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[11]+2304563134&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[12]+1804603682&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[13]+4254626195&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[14]+2792965006&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[15]+1236535329&4294967295)<<22&4294967295|U>>>10))+((U=N+(q^X&(L^q))+z[1]+4129170786&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[6]+3225465664&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[11]+643717713&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[0]+3921069994&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[5]+3593408605&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[10]+38016083&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[15]+3634488961&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[4]+3889429448&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[9]+568446438&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[14]+3275163606&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[3]+4107603335&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[8]+1163531501&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[13]+2850285829&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[2]+4243563512&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[7]+1735328473&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[12]+2368359562&4294967295)<<20&4294967295|U>>>12))+((U=N+(L^q^X)+z[5]+4294588738&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[8]+2272392833&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[11]+1839030562&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[14]+4259657740&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[1]+2763975236&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[4]+1272893353&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[7]+4139469664&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[10]+3200236656&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[13]+681279174&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[0]+3936430074&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[3]+3572445317&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[6]+76029189&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[9]+3654602809&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[12]+3873151461&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[15]+530742520&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[2]+3299628645&4294967295)<<23&4294967295|U>>>9))+((U=N+(q^(L|~X))+z[0]+4096336452&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[7]+1126891415&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[14]+2878612391&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[5]+4237533241&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[12]+1700485571&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[3]+2399980690&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[10]+4293915773&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[1]+2240044497&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[8]+1873313359&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[15]+4264355552&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[6]+2734768916&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[13]+1309151649&4294967295)<<21&4294967295|U>>>11))+((X=(N=L+((U=N+(q^(L|~X))+z[4]+4149444226&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[11]+3174756917&4294967295)<<10&4294967295|U>>>22))^((q=X+((U=q+(N^(X|~L))+z[2]+718787259&4294967295)<<15&4294967295|U>>>17))|~N))+z[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+X&4294967295}function o(j,N){this.h=N;for(var L=[],z=!0,q=j.length-1;0<=q;q--){var X=0|j[q];z&&X==N||(L[q]=X,z=!1)}this.g=L}(function e(j,N){function L(){}L.prototype=N.prototype,j.D=N.prototype,j.prototype=new L,j.prototype.constructor=j,j.C=function(z,q,X){for(var U=Array(arguments.length-2),Ts=2;Ts<arguments.length;Ts++)U[Ts-2]=arguments[Ts];return N.prototype[q].apply(z,U)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,N){void 0===N&&(N=j.length);for(var L=N-this.blockSize,z=this.B,q=this.h,X=0;X<N;){if(0==q)for(;X<=L;)i(this,j,X),X+=this.blockSize;if("string"==typeof j){for(;X<N;)if(z[q++]=j.charCodeAt(X++),q==this.blockSize){i(this,z),q=0;break}}else for(;X<N;)if(z[q++]=j[X++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var L=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=255&L,L/=256;for(this.u(j),j=Array(16),N=L=0;4>N;++N)for(var z=0;32>z;z+=8)j[L++]=this.g[N]>>>z&255;return j};var a={};function c(j){return-128<=j&&128>j?function s(j,N){var L=a;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=N(j)}(j,function(N){return new o([0|N],0>N?-1:0)}):new o([0|j],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return P(u(-j));for(var N=[],L=1,z=0;j>=L;z++)N[z]=j/L|0,L*=4294967296;return new o(N,0)}var m=c(0),y=c(1),I=c(16777216);function T(j){if(0!=j.h)return!1;for(var N=0;N<j.g.length;N++)if(0!=j.g[N])return!1;return!0}function R(j){return-1==j.h}function P(j){for(var N=j.g.length,L=[],z=0;z<N;z++)L[z]=~j.g[z];return new o(L,~j.h).add(y)}function H(j,N){return j.add(P(N))}function V(j,N){for(;(65535&j[N])!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function G(j,N){this.g=j,this.h=N}function te(j,N){if(T(N))throw Error("division by zero");if(T(j))return new G(m,m);if(R(j))return N=te(P(j),N),new G(P(N.g),P(N.h));if(R(N))return N=te(j,P(N)),new G(P(N.g),N.h);if(30<j.g.length){if(R(j)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var L=y,z=N;0>=z.l(j);)L=Ie(L),z=Ie(z);var q=Re(L,1),X=Re(z,1);for(z=Re(z,2),L=Re(L,2);!T(z);){var U=X.add(z);0>=U.l(j)&&(q=q.add(L),X=U),z=Re(z,1),L=Re(L,1)}return N=H(j,q.j(N)),new G(q,N)}for(q=m;0<=j.l(N);){for(L=Math.max(1,Math.floor(j.m()/N.m())),z=48>=(z=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,z-48),U=(X=u(L)).j(N);R(U)||0<U.l(j);)U=(X=u(L-=z)).j(N);T(X)&&(X=y),q=q.add(X),j=H(j,U)}return new G(q,j)}function Ie(j){for(var N=j.g.length+1,L=[],z=0;z<N;z++)L[z]=j.i(z)<<1|j.i(z-1)>>>31;return new o(L,j.h)}function Re(j,N){var L=N>>5;N%=32;for(var z=j.g.length-L,q=[],X=0;X<z;X++)q[X]=0<N?j.i(X+L)>>>N|j.i(X+L+1)<<32-N:j.i(X+L);return new o(q,j.h)}(n=o.prototype).m=function(){if(R(this))return-P(this).m();for(var j=0,N=1,L=0;L<this.g.length;L++){var z=this.i(L);j+=(0<=z?z:4294967296+z)*N,N*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(T(this))return"0";if(R(this))return"-"+P(this).toString(j);for(var N=u(Math.pow(j,6)),L=this,z="";;){var q=te(L,N).g,X=((0<(L=H(L,q.j(N))).g.length?L.g[0]:L.h)>>>0).toString(j);if(T(L=q))return X+z;for(;6>X.length;)X="0"+X;z=X+z}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return R(j=H(this,j))?-1:T(j)?0:1},n.abs=function(){return R(this)?P(this):this},n.add=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0,q=0;q<=N;q++){var X=z+(65535&this.i(q))+(65535&j.i(q)),U=(X>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);z=U>>>16,L[q]=(U&=65535)<<16|(X&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function(j){if(T(this)||T(j))return m;if(R(this))return R(j)?P(this).j(P(j)):P(P(this).j(j));if(R(j))return P(this.j(P(j)));if(0>this.l(I)&&0>j.l(I))return u(this.m()*j.m());for(var N=this.g.length+j.g.length,L=[],z=0;z<2*N;z++)L[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<j.g.length;q++){var X=this.i(z)>>>16,U=65535&this.i(z),Ts=j.i(q)>>>16,Ec=65535&j.i(q);L[2*z+2*q]+=U*Ec,V(L,2*z+2*q),L[2*z+2*q+1]+=X*Ec,V(L,2*z+2*q+1),L[2*z+2*q+1]+=U*Ts,V(L,2*z+2*q+1),L[2*z+2*q+2]+=X*Ts,V(L,2*z+2*q+2)}for(z=0;z<N;z++)L[z]=L[2*z+1]<<16|L[2*z];for(z=N;z<2*N;z++)L[z]=0;return new o(L,0)},n.A=function(j){return te(this,j).h},n.and=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)&j.i(z);return new o(L,this.h&j.h)},n.or=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)|j.i(z);return new o(L,this.h|j.h)},n.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)^j.i(z);return new o(L,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,G1=W1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(j,N){if(0==j.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==j.charAt(0))return P(f(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),z=m,q=0;q<j.length;q+=8){var X=Math.min(8,j.length-q),U=parseInt(j.substring(q,q+X),N);8>X?(X=u(Math.pow(N,X)),z=z.j(X).add(u(U))):z=(z=z.j(L)).add(u(U))}return z},fu=W1.Integer=o}).apply(typeof q1<"u"?q1:typeof self<"u"?self:typeof window<"u"?window:{});var K1,Z1,Up,Q1,av,Jb,Y1,X1,J1,ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ea={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ov&&ov];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var K=h[D];if(!(K in E))break e;E=E[K]}(_=_(D=E[h=h[h.length-1]]))!=D&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,D=!1,K={next:function(){if(!D&&E<h.length){var ie=E++;return{value:_(ie,h[ie]),done:!1}}return D=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,D),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(D,K,ie){for(var Ce=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)Ce[cn-2]=arguments[cn];return _.prototype[K].apply(D,Ce)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let D=0;D<_;D++)E[D]=h[D];return E}return[]}function P(h,_){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const K=h.length||0,ie=D.length||0;h.length=K+ie;for(let Ce=0;Ce<ie;Ce++)h[K+Ce]=D[Ce]}else h.push(D)}}function V(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var Ie=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function Re(h,_,E){for(const D in h)_.call(E,h[D],D,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,D;for(let K=1;K<arguments.length;K++){for(E in D=arguments[K],D)h[E]=D[E];for(let ie=0;ie<L.length;ie++)E=L[ie],Object.prototype.hasOwnProperty.call(D,E)&&(h[E]=D[E])}}function q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function X(h){a.setTimeout(()=>{throw h},0)}function U(){var h=Rt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Ec=new class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Ve,h=>h.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,We=!1,Rt=new class Ts{constructor(){this.h=this.g=null}add(_,E){const D=Ec.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}},ir=()=>{const h=a.Promise.resolve(void 0);qe=()=>{h.then(bs)}};var bs=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(E){X(E)}var _=Ec;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}We=!1};function Gn(){this.s=this.s,this.C=this.C}function Cn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Gn.prototype.s=!1,Gn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Cn.prototype.h=function(){this.defaultPrevented=!0};var An=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function Ic(h,_){if(Cn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ie){e:{try{te(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:gD[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ic.aa.h.call(this)}}T(Ic,Cn);var gD={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Kn="closure_listenable_"+(1e6*Math.random()|0),pa=0;function ji(h,_,E,D,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=K,this.key=++pa,this.da=this.fa=!1}function ga(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function wc(h){this.src=h,this.g={},this.h=0}function mD(h,_){var E=_.type;if(E in h.g){var ie,D=h.g[E],K=Array.prototype.indexOf.call(D,_,void 0);(ie=0<=K)&&Array.prototype.splice.call(D,K,1),ie&&(ga(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function _D(h,_,E,D){for(var K=0;K<h.length;++K){var ie=h[K];if(!ie.da&&ie.listener==_&&ie.capture==!!E&&ie.ha==D)return K}return-1}wc.prototype.add=function(h,_,E,D,K){var ie=h.toString();(h=this.g[ie])||(h=this.g[ie]=[],this.h++);var Ce=_D(h,_,D,K);return-1<Ce?(_=h[Ce],E||(_.fa=!1)):((_=new ji(_,this.src,ie,!!D,K)).fa=E,h.push(_)),_};var yD="closure_lm_"+(1e6*Math.random()|0),vD={};function IB(h,_,E,D,K){if(D&&D.once)return TB(h,_,E,D,K);if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)IB(h,_[ie],E,D,K);return null}return E=TD(E),h&&h[Kn]?h.K(_,E,u(D)?!!D.capture:!!D,K):wB(h,_,E,!1,D,K)}function wB(h,_,E,D,K,ie){if(!_)throw Error("Invalid event type");var Ce=u(K)?!!K.capture:!!K,cn=ID(h);if(cn||(h[yD]=cn=new wc(h)),(E=cn.add(_,E,D,Ce,ie)).proxy)return E;if(D=function Fie(){const _=Lie;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=D,D.src=h,D.listener=E,h.addEventListener)An||(K=Ce),void 0===K&&(K=!1),h.addEventListener(_.toString(),D,K);else if(h.attachEvent)h.attachEvent(CB(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return E}function TB(h,_,E,D,K){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)TB(h,_[ie],E,D,K);return null}return E=TD(E),h&&h[Kn]?h.L(_,E,u(D)?!!D.capture:!!D,K):wB(h,_,E,!0,D,K)}function bB(h,_,E,D,K){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)bB(h,_[ie],E,D,K);else D=u(D)?!!D.capture:!!D,E=TD(E),h&&h[Kn]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=_D(ie=h.g[_],E,D,K))&&(ga(ie[E]),Array.prototype.splice.call(ie,E,1),0==ie.length&&(delete h.g[_],h.h--))):h&&(h=ID(h))&&(_=h.g[_.toString()],h=-1,_&&(h=_D(_,E,D,K)),(E=-1<h?_[h]:null)&&ED(E))}function ED(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Kn])mD(_.i,h);else{var E=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(E,D,h.capture):_.detachEvent?_.detachEvent(CB(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=ID(_))?(mD(E,h),0==E.h&&(E.src=null,_[yD]=null)):ga(h)}}}function CB(h){return h in vD?vD[h]:vD[h]="on"+h}function Lie(h,_){if(h.da)h=!0;else{_=new Ic(_,this);var E=h.listener,D=h.ha||h.src;h.fa&&ED(h),h=E.call(D,_)}return h}function ID(h){return(h=h[yD])instanceof wc?h:null}var wD="__closure_events_fn_"+(1e9*Math.random()>>>0);function TD(h){return"function"==typeof h?h:(h[wD]||(h[wD]=function(_){return h.handleEvent(_)}),h[wD])}function oi(){Gn.call(this),this.i=new wc(this),this.M=this,this.F=null}function Ci(h,_){var E,D=h.F;if(D)for(E=[];D;D=D.F)E.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new Cn(_,h);else if(_ instanceof Cn)_.target=_.target||h;else{var K=_;z(_=new Cn(D,h),K)}if(K=!0,E)for(var ie=E.length-1;0<=ie;ie--){var Ce=_.g=E[ie];K=SE(Ce,D,!0,_)&&K}if(K=SE(Ce=_.g=h,D,!0,_)&&K,K=SE(Ce,D,!1,_)&&K,E)for(ie=0;ie<E.length;ie++)K=SE(Ce=_.g=E[ie],D,!1,_)&&K}function SE(h,_,E,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,ie=0;ie<_.length;++ie){var Ce=_[ie];if(Ce&&!Ce.da&&Ce.capture==E){var cn=Ce.listener,zr=Ce.ha||Ce.src;Ce.fa&&mD(h.i,Ce),K=!1!==cn.call(zr,D)&&K}}return K&&!D.defaultPrevented}function AB(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function DB(h){h.g=AB(()=>{h.g=null,h.i&&(h.i=!1,DB(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(oi,Gn),oi.prototype[Kn]=!0,oi.prototype.removeEventListener=function(h,_,E,D){bB(this,h,_,E,D)},oi.prototype.N=function(){if(oi.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],D=0;D<E.length;D++)ga(E[D]);delete h.g[_],h.h--}}this.F=null},oi.prototype.K=function(h,_,E,D){return this.i.add(String(h),_,!1,E,D)},oi.prototype.L=function(h,_,E,D){return this.i.add(String(h),_,!0,E,D)};class Vie extends Gn{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:DB(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lg(h){Gn.call(this),this.h=h,this.g={}}T(Lg,Gn);var SB=[];function RB(h){Re(h.g,function(_,E){this.g.hasOwnProperty(E)&&ED(_)},h),h.g={}}Lg.prototype.N=function(){Lg.aa.N.call(this),RB(this)},Lg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bD=a.JSON.stringify,Uie=a.JSON.parse,Bie=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function CD(){}function PB(){}CD.prototype.h=null;var Vg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function AD(){Cn.call(this,"d")}function DD(){Cn.call(this,"c")}T(AD,Cn),T(DD,Cn);var Uu={},xB=null;function RE(){return xB=xB||new oi}function NB(h){Cn.call(this,Uu.La,h)}function Ug(h){const _=RE();Ci(_,new NB(_))}function kB(h,_){Cn.call(this,Uu.STAT_EVENT,h),this.stat=_}function Ai(h){const _=RE();Ci(_,new kB(_,h))}function OB(h,_){Cn.call(this,Uu.Ma,h),this.size=_}function Bg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function jg(){this.g=!0}function Eh(h,_,E,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function zie(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var D=E[h];if(!(2>D.length)){var K=D[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var Ce=1;Ce<K.length;Ce++)K[Ce]=""}}}return bD(E)}catch{return _}}(h,E)+(D?" "+D:"")})}Uu.La="serverreachability",T(NB,Cn),Uu.STAT_EVENT="statevent",T(kB,Cn),Uu.Ma="timingevent",T(OB,Cn),jg.prototype.xa=function(){this.g=!1},jg.prototype.info=function(){};var SD,ME={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function PE(){}function Tc(h,_,E,D){this.j=h,this.i=_,this.l=E,this.R=D||1,this.U=new Lg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new LB}function LB(){this.i=null,this.g="",this.h=!1}T(PE,CD),PE.prototype.g=function(){return new XMLHttpRequest},PE.prototype.i=function(){return{}},SD=new PE;var VB={},RD={};function MD(h,_,E){h.L=1,h.v=OE(ma(_)),h.m=E,h.P=!0,UB(h,null)}function UB(h,_){h.F=Date.now(),xE(h),h.A=ma(h.v);var E=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),JB(E.i,"t",D),h.C=0,E=h.j.J,h.h=new LB,h.g=_j(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Vie(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,D=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(SB[0]=K.toString()),K=SB);for(var ie=0;ie<K.length;ie++){var Ce=IB(E,K[ie],D||_.handleEvent,!1,_.h||_);if(!Ce)break;_.g[Ce.key]=Ce}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Ug(),function jie(h,_,E,D,K,ie){h.info(function(){if(h.g)if(ie)for(var Ce="",cn=ie.split("&"),zr=0;zr<cn.length;zr++){var $t=cn[zr].split("=");if(1<$t.length){var ai=$t[0];$t=$t[1];var ci=ai.split("_");Ce=2<=ci.length&&"type"==ci[1]?Ce+(ai+"=")+$t+"&":Ce+(ai+"=redacted&")}}else Ce=null;else Ce=ie;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+_+"\n"+E+"\n"+Ce})}(h.i,h.u,h.A,h.l,h.R,h.m)}function BB(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function qie(h,_){var E=h.C,D=_.indexOf("\n",E);return-1==D?RD:(E=Number(_.substring(E,D)),isNaN(E)?VB:(D+=1)+E>_.length?RD:(_=_.slice(D,D+E),h.C=D+E,_))}function xE(h){h.S=Date.now()+h.I,jB(h,h.I)}function jB(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Bg(y(h.ba,h),_)}function PD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function $g(h){0==h.j.G||h.J||fj(h.j,h)}function Bu(h){PD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,RB(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function xD(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||ND(E.h,h)))if(!h.K&&ND(E.h,h)&&3==E.G){try{var D=E.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var K=D;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;BE(E),VE(E)}LD(E),Ai(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=Bg(y(E.Za,E),6e3));if(1>=zB(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else $u(E,11)}else if((h.K||E.g==h)&&BE(E),!V(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let $t=K[_];if(E.T=$t[0],$t=$t[1],2==E.G)if("c"==$t[0]){E.K=$t[1],E.ia=$t[2];const ai=$t[3];null!=ai&&(E.la=ai,E.j.info("VER="+E.la));const ci=$t[4];null!=ci&&(E.Aa=ci,E.j.info("SVER="+E.Aa));const Th=$t[5];null!=Th&&"number"==typeof Th&&0<Th&&(E.L=D=1.5*Th,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const zs=h.g;if(zs){const $E=zs.g?zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($E){var ie=D.h;ie.g||-1==$E.indexOf("spdy")&&-1==$E.indexOf("quic")&&-1==$E.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(kD(ie,ie.h),ie.h=null))}if(D.D){const UD=zs.g?zs.g.getResponseHeader("X-HTTP-Session-Id"):null;UD&&(D.ya=UD,Dn(D.I,D.D,UD))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ce=h;if((D=E).qa=mj(D,D.J?D.ia:null,D.W),Ce.K){qB(D.h,Ce);var cn=Ce,zr=D.L;zr&&(cn.I=zr),cn.B&&(PD(cn),xE(cn)),D.g=Ce}else dj(D);0<E.i.length&&UE(E)}else"stop"!=$t[0]&&"close"!=$t[0]||$u(E,7);else 3==E.G&&("stop"==$t[0]||"close"==$t[0]?"stop"==$t[0]?$u(E,7):FD(E):"noop"!=$t[0]&&E.l&&E.l.ta($t),E.v=0)}Ug()}catch{}}function $B(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function HB(h){return!!h.h||!!h.g&&h.g.size>=h.j}function zB(h){return h.h?1:h.g?h.g.size:0}function ND(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function kD(h,_){h.g?h.g.add(_):h.h=_}function qB(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function WB(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function GB(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Kie(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const D in h)_[E++]=D;return _}}}(h),D=function Gie(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,D=0;D<E;D++)_.push(h[D]);return _}for(D in _=[],E=0,h)_[E++]=h[D];return _}(h),K=D.length,ie=0;ie<K;ie++)_.call(void 0,D[ie],E&&E[ie],h)}Tc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==_a(h)?_.j():this.Y(h)},Tc.prototype.Y=function(h){try{if(h==this.g)e:{const ci=_a(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ci)&&(3!=ci||this.g&&(this.h.h||this.g.oa()||oj(this.g)))){this.J||4!=ci||7==_||Ug(),PD(this);var E=this.g.Z();this.X=E;t:if(BB(this)){var D=oj(this.g);h="";var K=D.length,ie=4==_a(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bu(this),$g(this);var Ce="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ie&&_==K-1)});D.length=0,this.h.g+=h,this.C=0,Ce=this.h.g}else Ce=this.g.oa();if(this.o=200==E,function $ie(h,_,E,D,K,ie,Ce){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+ie+" "+Ce})}(this.i,this.u,this.A,this.l,this.R,ci,E),this.o){if(this.T&&!this.K){t:{if(this.g){var cn,zr=this.g;if((cn=zr.g?zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(cn)){var $t=cn;break t}}$t=null}if(!(E=$t)){this.o=!1,this.s=3,Ai(12),Bu(this),$g(this);break e}Eh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xD(this,E)}if(this.P){let zs;for(E=!0;!this.J&&this.C<Ce.length;){if(zs=qie(this,Ce),zs==RD){4==ci&&(this.s=4,Ai(14),E=!1),Eh(this.i,this.l,null,"[Incomplete Response]");break}if(zs==VB){this.s=4,Ai(15),Eh(this.i,this.l,Ce,"[Invalid Chunk]"),E=!1;break}Eh(this.i,this.l,zs,null),xD(this,zs)}if(BB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ci||0!=Ce.length||this.h.h||(this.s=1,Ai(16),E=!1),this.o=this.o&&E,E){if(0<Ce.length&&!this.W){this.W=!0;var ai=this.j;ai.g==this&&ai.ba&&!ai.M&&(ai.j.info("Great, no buffering proxy detected. Bytes received: "+Ce.length),VD(ai),ai.M=!0,Ai(11))}}else Eh(this.i,this.l,Ce,"[Invalid Chunked Response]"),Bu(this),$g(this)}else Eh(this.i,this.l,Ce,null),xD(this,Ce);4==ci&&Bu(this),this.o&&!this.J&&(4==ci?fj(this.j,this):(this.o=!1,xE(this)))}else(function cse(h){const _={};h=(h.g&&2<=_a(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(V(h[D]))continue;var E=q(h[D]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ie=_[K]||[];_[K]=ie,ie.push(E)}!function j(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(D){return D.join(", ")})})(this.g),400==E&&0<Ce.indexOf("Unknown SID")?(this.s=3,Ai(12)):(this.s=0,Ai(13)),Bu(this),$g(this)}}}catch{}},Tc.prototype.cancel=function(){this.J=!0,Bu(this)},Tc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Hie(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Ug(),Ai(17)),Bu(this),this.s=2,$g(this)):jB(this,this.S-h)},$B.prototype.cancel=function(){if(this.i=WB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var KB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ju(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ju){this.h=h.h,NE(this,h.j),this.o=h.o,this.g=h.g,kE(this,h.s),this.l=h.l;var _=h.i,E=new qg;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ZB(this,E),this.m=h.m}else h&&(_=String(h).match(KB))?(this.h=!1,NE(this,_[1]||"",!0),this.o=Hg(_[2]||""),this.g=Hg(_[3]||"",!0),kE(this,_[4]),this.l=Hg(_[5]||"",!0),ZB(this,_[6]||"",!0),this.m=Hg(_[7]||"")):(this.h=!1,this.i=new qg(null,this.h))}function ma(h){return new ju(h)}function NE(h,_,E){h.j=E?Hg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function kE(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ZB(h,_,E){_ instanceof qg?(h.i=_,function tse(h,_){_&&!h.j&&(bc(h),h.i=null,h.g.forEach(function(E,D){var K=D.toLowerCase();D!=K&&(YB(this,D),JB(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=zg(_,Jie)),h.i=new qg(_,h.h))}function Dn(h,_,E){h.i.set(_,E)}function OE(h){return Dn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zg(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,Qie),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qie(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}ju.prototype.toString=function(){var h=[],_=this.j;_&&h.push(zg(_,QB,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(zg(_,QB,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(zg(E,"/"==E.charAt(0)?Xie:Yie,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",zg(E,ese)),h.join("")};var h,QB=/[#\/\?@]/g,Yie=/[#\?:]/g,Xie=/[#\?]/g,Jie=/[#\?@]/g,ese=/#/g;function qg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function bc(h){h.g||(h.g=new Map,h.h=0,h.i&&function Zie(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var D=h[E].indexOf("="),K=null;if(0<=D){var ie=h[E].substring(0,D);K=h[E].substring(D+1)}else ie=h[E];_(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function YB(h,_){bc(h),_=Ih(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function XB(h,_){return bc(h),_=Ih(h,_),h.g.has(_)}function JB(h,_,E){YB(h,_),0<E.length&&(h.i=null,h.g.set(Ih(h,_),R(E)),h.h+=E.length)}function Ih(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Cc(h,_,E,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(E)}catch{}}function ise(){this.g=new Bie}function sse(h,_,E){const D=E||"";try{GB(h,function(K,ie){let Ce=K;u(K)&&(Ce=bD(K)),_.push(D+ie+"="+encodeURIComponent(Ce))})}catch(K){throw _.push(D+"type="+encodeURIComponent("_badmap")),K}}function Wg(h){this.l=h.Ub||null,this.j=h.eb||!1}function FE(h,_){oi.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ej(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Gg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Kg(h)}function Kg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function tj(h){let _="";return Re(h,function(E,D){_+=D,_+=":",_+=E,_+="\r\n"}),_}function OD(h,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=tj(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Dn(h,_,E))}function Zn(h){oi.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=qg.prototype).add=function(h,_){bc(this),this.i=null,h=Ih(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){bc(this),this.g.forEach(function(E,D){E.forEach(function(K){h.call(_,K,D,this)},this)},this)},n.na=function(){bc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let D=0;D<_.length;D++){const K=h[D];for(let ie=0;ie<K.length;ie++)E.push(_[D])}return E},n.V=function(h){bc(this);let _=[];if("string"==typeof h)XB(this,h)&&(_=_.concat(this.g.get(Ih(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return bc(this),this.i=null,XB(this,h=Ih(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var D=_[E];const ie=encodeURIComponent(String(D)),Ce=this.V(D);for(D=0;D<Ce.length;D++){var K=ie;""!==Ce[D]&&(K+="="+encodeURIComponent(String(Ce[D]))),h.push(K)}}return this.i=h.join("&")},T(Wg,CD),Wg.prototype.g=function(){return new FE(this.l,this.j)},Wg.prototype.i=(h={},function(){return h}),T(FE,oi),(n=FE.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Kg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Kg(this)),this.g&&(this.readyState=3,Kg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ej(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gg(this):Kg(this),3==this.readyState&&ej(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Gg(this))},n.Qa=function(h){this.g&&(this.response=h,Gg(this))},n.ga=function(){this.g&&Gg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(FE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Zn,oi);var ose=/^https?$/i,ase=["POST","PUT"];function nj(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,rj(h),LE(h)}function rj(h){h.A||(h.A=!0,Ci(h,"complete"),Ci(h,"error"))}function ij(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=_a(h)||2!=h.Z()))if(h.u&&4==_a(h))AB(h.Ea,0,h);else if(Ci(h,"readystatechange"),4==_a(h)){h.h=!1;try{const Ce=h.Z();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=0===Ce){var K=String(h.D).match(KB)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!ose.test(K?K.toLowerCase():"")}E=D}if(E)Ci(h,"complete"),Ci(h,"success");else{h.m=6;try{var ie=2<_a(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",rj(h)}}finally{LE(h)}}}function LE(h,_){if(h.g){sj(h);const E=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ci(h,"ready");try{E.onreadystatechange=D}catch{}}}function sj(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function _a(h){return h.g?h.g.readyState:0}function oj(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Zg(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function aj(h){this.Aa=0,this.i=[],this.j=new jg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zg("baseRetryDelayMs",5e3,h),this.cb=Zg("retryDelaySeedMs",1e4,h),this.Wa=Zg("forwardChannelMaxRetries",2,h),this.wa=Zg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $B(h&&h.concurrentRequestLimit),this.Da=new ise,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function FD(h){if(cj(h),3==h.G){var _=h.U++,E=ma(h.I);if(Dn(E,"SID",h.K),Dn(E,"RID",_),Dn(E,"TYPE","terminate"),Qg(h,E),(_=new Tc(h,h.j,_)).L=2,_.v=OE(ma(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=_j(_.j,null),_.g.ea(_.v)),_.F=Date.now(),xE(_)}gj(h)}function VE(h){h.g&&(VD(h),h.g.cancel(),h.g=null)}function cj(h){VE(h),h.u&&(a.clearTimeout(h.u),h.u=null),BE(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function UE(h){if(!HB(h.h)&&!h.s){h.s=!0;var _=h.Ga;qe||ir(),We||(qe(),We=!0),Rt.add(_,h),h.B=0}}function uj(h,_){var E;E=_?_.l:h.U++;const D=ma(h.I);Dn(D,"SID",h.K),Dn(D,"RID",E),Dn(D,"AID",h.T),Qg(h,D),h.m&&h.o&&OD(D,h.m,h.o),E=new Tc(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=lj(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),kD(h.h,E),MD(E,D,_)}function Qg(h,_){h.H&&Re(h.H,function(E,D){Dn(_,D,E)}),h.l&&GB({},function(E,D){Dn(_,D,E)})}function lj(h,_,E){E=Math.min(h.i.length,E);var D=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let ie=-1;for(;;){const Ce=["count="+E];-1==ie?0<E?(ie=K[0].g,Ce.push("ofs="+ie)):ie=0:Ce.push("ofs="+ie);let cn=!0;for(let zr=0;zr<E;zr++){let $t=K[zr].g;const ai=K[zr].map;if($t-=ie,0>$t)ie=Math.max(0,K[zr].g-100),cn=!1;else try{sse(ai,Ce,"req"+$t+"_")}catch{D&&D(ai)}}if(cn){D=Ce.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,D}function dj(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;qe||ir(),We||(qe(),We=!0),Rt.add(_,h),h.v=0}}function LD(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Bg(y(h.Fa,h),pj(h,h.v)),h.v++,0))}function VD(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function hj(h){h.g=new Tc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ma(h.qa);Dn(_,"RID","rpc"),Dn(_,"SID",h.K),Dn(_,"AID",h.T),Dn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Dn(_,"TO",h.ja),Dn(_,"TYPE","xmlhttp"),Qg(h,_),h.m&&h.o&&OD(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=OE(ma(_)),E.m=null,E.P=!0,UB(E,h)}function BE(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function fj(h,_){var E=null;if(h.g==_){BE(h),VD(h),h.g=null;var D=2}else{if(!ND(h.h,_))return;E=_.D,qB(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;Ci(D=RE(),new OB(D,E)),UE(h)}else dj(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==D&&function use(h,_){return!(zB(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Bg(y(h.Ga,h,_),pj(h,h.B)),h.B++,0)))}(h,_)||2==D&&LD(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:$u(h,5);break;case 4:$u(h,10);break;case 3:$u(h,6);break;default:$u(h,2)}}function pj(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function $u(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),D=h.Xa;const K=!D;D=new ju(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||NE(D,"https"),OE(D),K?function nse(h,_){const E=new jg;if(a.Image){const D=new Image;D.onload=I(Cc,E,"TestLoadImage: loaded",!0,_,D),D.onerror=I(Cc,E,"TestLoadImage: error",!1,_,D),D.onabort=I(Cc,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=I(Cc,E,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),E):function rse(h,_){new jg;const D=new AbortController,K=setTimeout(()=>{D.abort(),Cc(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(ie=>{clearTimeout(K),Cc(0,0,!!ie.ok,_)}).catch(()=>{clearTimeout(K),Cc(0,0,!1,_)})}(D.toString(),E)}else Ai(2);h.G=0,h.l&&h.l.sa(_),gj(h),cj(h)}function gj(h){if(h.G=0,h.ka=[],h.l){const _=WB(h.h);(0!=_.length||0!=h.i.length)&&(P(h.ka,_),P(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function mj(h,_,E){var D=E instanceof ju?ma(E):new ju(E);if(""!=D.g)_&&(D.g=_+"."+D.g),kE(D,D.s);else{var K=a.location;D=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ie=new ju(null);D&&NE(ie,D),_&&(ie.g=_),K&&kE(ie,K),E&&(ie.l=E),D=ie}return _=h.ya,(E=h.D)&&_&&Dn(D,E,_),Dn(D,"VER",h.la),Qg(h,D),D}function _j(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Zn(h.Ca&&!h.pa?new Wg({eb:E}):h.pa)).Ha(h.J),_}function yj(){}function jE(){}function is(h,_){oi.call(this),this.g=new aj(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new wh(this)}function vj(h){AD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function Ej(){DD.call(this),this.status=1}function wh(h){this.g=h}(n=Zn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():SD.g(),this.v=function MB(h){return h.h||(h.h=h.i())}(this.o?this.o:SD),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){return void nj(this,ie)}if(h=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)E.set(K,D[K]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ie of D.keys())E.set(ie,D.get(ie))}D=Array.from(E.keys()).find(ie=>"content-type"==ie.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ase,_,void 0))||D||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ce]of E)this.g.setRequestHeader(ie,Ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sj(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){nj(this,ie)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ci(this,"complete"),Ci(this,"abort"),LE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),LE(this,!0)),Zn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ij(this):this.bb())},n.bb=function(){ij(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<_a(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Uie(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=aj.prototype).la=8,n.G=1,n.connect=function(h,_,E,D){Ai(0),this.W=h,this.H=_||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=mj(this,null,this.W),UE(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new Tc(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=N(ie),z(ie,this.S)):ie=this.S),null!==this.m||this.O||(K.H=ie,ie=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=lj(this,K,_),Dn(E=ma(this.I),"RID",h),Dn(E,"CVER",22),this.D&&Dn(E,"X-HTTP-Session-Id",this.D),Qg(this,E),ie&&(this.O?_="headers="+encodeURIComponent(String(tj(ie)))+"&"+_:this.m&&OD(E,this.m,ie)),kD(this.h,K),this.Ua&&Dn(E,"TYPE","init"),this.P?(Dn(E,"$req",_),Dn(E,"SID","null"),K.T=!0,MD(K,E,null)):MD(K,E,_),this.G=2}}else 3==this.G&&(h?uj(this,h):0==this.i.length||HB(this.h)||uj(this))},n.Fa=function(){if(this.u=null,hj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Bg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ai(10),VE(this),hj(this))},n.Za=function(){null!=this.C&&(this.C=null,VE(this),LD(this),Ai(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=yj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},jE.prototype.g=function(h,_){return new is(h,_)},T(is,oi),is.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},is.prototype.close=function(){FD(this.g)},is.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=bD(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&UE(_)},is.prototype.N=function(){this.g.l=null,delete this.j,FD(this.g),delete this.g,is.aa.N.call(this)},T(vj,AD),T(Ej,DD),T(wh,yj),wh.prototype.ua=function(){Ci(this.g,"a")},wh.prototype.ta=function(h){Ci(this.g,new vj(h))},wh.prototype.sa=function(h){Ci(this.g,new Ej)},wh.prototype.ra=function(){Ci(this.g,"b")},jE.prototype.createWebChannel=jE.prototype.g,is.prototype.send=is.prototype.o,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,J1=ea.createWebChannelTransport=function(){return new jE},X1=ea.getStatEventTarget=function(){return RE()},Y1=ea.Event=Uu,Jb=ea.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ME.NO_ERROR=0,ME.TIMEOUT=8,ME.HTTP_ERROR=6,av=ea.ErrorCode=ME,FB.COMPLETE="complete",Q1=ea.EventType=FB,PB.EventType=Vg,Vg.OPEN="a",Vg.CLOSE="b",Vg.ERROR="c",Vg.MESSAGE="d",oi.prototype.listen=oi.prototype.K,Up=ea.WebChannel=PB,Z1=ea.FetchXmlHttpFactory=Wg,Zn.prototype.listenOnce=Zn.prototype.L,Zn.prototype.getLastError=Zn.prototype.Ka,Zn.prototype.getLastErrorCode=Zn.prototype.Ba,Zn.prototype.getStatus=Zn.prototype.Z,Zn.prototype.getResponseJson=Zn.prototype.Oa,Zn.prototype.getResponseText=Zn.prototype.oa,Zn.prototype.send=Zn.prototype.ea,Zn.prototype.setWithCredentials=Zn.prototype.Ha,K1=ea.XhrIo=Zn}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});const eF="@firebase/firestore";class Sr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let Pd="10.12.1";const Ja=new _o.Yd("@firebase/firestore");function xd(){return Ja.logLevel}function ve(n,...e){if(Ja.logLevel<=_o.in.DEBUG){const t=e.map(e0);Ja.debug(`Firestore (${Pd}): ${n}`,...t)}}function nr(n,...e){if(Ja.logLevel<=_o.in.ERROR){const t=e.map(e0);Ja.error(`Firestore (${Pd}): ${n}`,...t)}}function Vi(n,...e){if(Ja.logLevel<=_o.in.WARN){const t=e.map(e0);Ja.warn(`Firestore (${Pd}): ${n}`,...t)}}function e0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Oe(n="Unexpected state"){const e=`FIRESTORE (${Pd}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function $e(n,e){n||Oe()}function be(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sr.UNAUTHENTICATED))}shutdown(){}}class z7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q7{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ae.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e("string"==typeof r.accessToken),new tF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(null===e||"string"==typeof e),new Sr(e)}}class W7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class G7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new W7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e("string"==typeof t.token),this.R=t.token,new nF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Z7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rF{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Z7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function it(n,e){return n<e?-1:n>e?1:0}function Nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iF(n){return n+"\0"}class Mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Mn(0,0))}static max(){return new ze(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Oe(),void 0===r?r=e.length-t:r>e.length-t&&Oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xt extends Bp{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new xt(t)}static emptyPath(){return new xt([])}}const Q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Bp{construct(e,t,r){return new wn(e,t,r)}static isValidIdentifier(e){return Q7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(xt.fromString(e))}static fromName(e){return new Se(xt.fromString(e).popFirst(5))}static empty(){return new Se(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new xt(e.slice()))}}class kd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function t0(n){return n.fields.find(e=>2===e.kind)}function pu(n){return n.fields.filter(e=>2!==e.kind)}kd.UNKNOWN_ID=-1;class gu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Od(0,Ji.min())}}function sF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(1e9===r?new Mn(t+1,0):new Mn(t,r));return new Ji(i,Se.empty(),e)}function oF(n){return new Ji(n.readTime,n.key,-1)}class Ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ji(ze.min(),Se.empty(),-1)}static max(){return new Ji(ze.max(),Se.empty(),-1)}}function n0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:it(n.largestBatchId,e.largestBatchId))}const aF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ec(n){return r0.apply(this,arguments)}function r0(){return(r0=(0,ae.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==aF)throw n;ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class cv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new jp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=s0(r.target.error);this.V.reject(new jp(e,i))}}static open(e,t,r,i){try{return new cv(t,e.transaction(i,r))}catch(s){throw new jp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eQ(t)}}class yo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===yo.S((0,lt.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),mu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,lt.hl)())return!1;if(yo.C())return!0;const e=(0,lt.z$)(),t=yo.S(e),r=0<t&&t<10,i=uF(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new jp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new me(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new me(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new jp(e,a))},s.onupgradeneeded=o=>{ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=cv.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),Y.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(ve("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function uF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class J7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return mu(this.B.delete())}}class jp extends me{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tc(n){return"IndexedDbTransactionError"===n.name}class eQ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mu(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),mu(this.store.add(e))}get(e){return mu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),mu(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),mu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=s=>{const o=s0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new J7(a),u=t(a.primaryKey,a.value,c);if(u instanceof Y){const f=u.catch(m=>(c.done(),Y.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mu(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=s0(r.target.error);t(i)}})}let lF=!1;function s0(n){const e=yo.S((0,lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lF||(lF=!0,setTimeout(()=>{throw r},0)),r}}return n}class tQ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ve("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){tc(r)?ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield ec(r)}yield t.X(6e4)}))}}class nQ{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Y.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ve("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ve("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=oF(s);n0(o,r)>0&&(r=o)}),new Ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let es=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function $p(n){return null==n}function Hp(n){return 0===n&&1/n==-1/0}function dF(n){return"number"==typeof n&&Number.isInteger(n)&&!Hp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hF(e)),e=rQ(n.get(t),e);return hF(e)}function rQ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hF(n){return n+"\x01\x01"}function vo(n){const e=n.length;if($e(e>=2),2===e)return $e("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),xt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Oe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Oe()}s=o+2}return new xt(r)}const fF=["userId","batchId"];function uv(n,e){return[n,ti(e)]}function pF(n,e,t){return[n,ti(e),t]}const iQ={},sQ=["prefixPath","collectionGroup","readTime","documentId"],oQ=["prefixPath","collectionGroup","documentId"],aQ=["collectionGroup","readTime","prefixPath","documentId"],cQ=["canonicalId","targetId"],uQ=["targetId","path"],lQ=["path","targetId"],dQ=["collectionId","parent"],hQ=["indexId","uid"],fQ=["uid","sequenceNumber"],pQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gQ=["indexId","uid","orderedDocumentKey"],mQ=["userId","collectionPath","documentId"],_Q=["userId","collectionPath","largestBatchId"],yQ=["userId","collectionGroup","largestBatchId"],gF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vQ=[...gF,"documentOverlays"],mF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_F=mF,yF=[..._F,"indexConfiguration","indexState","indexEntries"],EQ=yF;class o0 extends cF{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=be(n);return yo.F(t._e,e)}function vF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lv(this.root,e,this.comparator,!1)}getReverseIterator(){return new lv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lv(this.root,e,this.comparator,!0)}}class lv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??jr.RED,this.left=i??jr.EMPTY,this.right=s??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new jr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wF(this.data.getIterator())}getIteratorFrom(e){return new wF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class wF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fd(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new nn(wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class TF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TF("Invalid base64 string: "+s):s}}(e);return new br(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const wQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(n){if($e(!!n),"string"==typeof n){let e=0;const t=wQ.exec(n);if($e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function na(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function dv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hv(n){const e=n.mapValue.fields.__previous_value__;return dv(e)?hv(e):e}function zp(n){const e=ta(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}class TQ{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class rc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}const ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fv={nullValue:"NULL_VALUE"};function sc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dv(n)?4:DF(n)?9007199254740991:10:Oe()}function Eo(n,e){if(n===e)return!0;const t=sc(n);if(t!==sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zp(n).isEqual(zp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ta(i.timestampValue),a=ta(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,na(n.bytesValue).isEqual(na(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Wn(i.geoPointValue.latitude)===Wn(s.geoPointValue.latitude)&&Wn(i.geoPointValue.longitude)===Wn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Wn(i.integerValue)===Wn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Wn(i.doubleValue),a=Wn(s.doubleValue);return o===a?Hp(o)===Hp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Nd(n.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vF(o)!==vF(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Eo(o[c],a[c])))return!1;return!0}(n,e);default:return Oe()}var s}function qp(n,e){return void 0!==(n.values||[]).find(t=>Eo(t,e))}function oc(n,e){if(n===e)return 0;const t=sc(n),r=sc(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Wn(s.integerValue||s.doubleValue),c=Wn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return bF(n.timestampValue,e.timestampValue);case 4:return bF(zp(n),zp(e));case 5:return it(n.stringValue,e.stringValue);case 6:return function(s,o){const a=na(s),c=na(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=it(a[u],c[u]);if(0!==f)return f}return it(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=it(Wn(s.latitude),Wn(o.latitude));return 0!==a?a:it(Wn(s.longitude),Wn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=oc(a[u],c[u]);if(f)return f}return it(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ic.mapValue&&o===ic.mapValue)return 0;if(s===ic.mapValue)return 1;if(o===ic.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=it(c[m],f[m]);if(0!==y)return y;const I=oc(a[c[m]],u[f[m]]);if(0!==I)return I}return it(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Oe()}}function bF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return it(n,e);const t=ta(n),r=ta(e),i=it(t.seconds,r.seconds);return 0!==i?i:it(t.nanos,r.nanos)}function Ld(n){return a0(n)}function a0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ta(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?na(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=a0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${a0(t.fields[o])}`;return i+"}"}(n.mapValue):Oe()}function _u(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function c0(n){return!!n&&"integerValue"in n}function Wp(n){return!!n&&"arrayValue"in n}function CF(n){return!!n&&"nullValue"in n}function AF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gv(n){return!!n&&"mapValue"in n}function Gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bQ(n){return"nullValue"in n?fv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_u(rc.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Oe()}function CQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_u(rc.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ic:Oe()}function SF(n,e){const t=oc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RF(n,e){const t=oc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Gp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());gv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $r(Gp(this.value))}}function MF(n){const e=[];return nc(n.fields,(t,r)=>{const i=new wn([t]);if(gv(r)){const s=MF(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ui(e)}class Tn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tn(e,0,ze.min(),ze.min(),ze.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new Tn(e,1,t,ze.min(),r,i,0)}static newNoDocument(e,t){return new Tn(e,2,t,ze.min(),ze.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,ze.min(),ze.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ac{constructor(e,t){this.position=e,this.inclusive=t}}function PF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Se.comparator(Se.fromName(o.referenceValue),t.key):oc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function xF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Eo(n.position[t],e.position[t]))return!1;return!0}class Kp{constructor(e,t="asc"){this.field=e,this.dir=t}}function AQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NF{}class Nt extends NF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new DQ(e,t,r):"array-contains"===t?new MQ(e,r):"in"===t?new UF(e,r):"not-in"===t?new PQ(e,r):"array-contains-any"===t?new xQ(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new SQ(e,r):new RQ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(oc(t,this.value)):null!==t&&sc(this.value)===sc(t)&&this.matchesComparison(oc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends NF{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jt(e,t)}matches(e){return Vd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vd(n){return"and"===n.op}function u0(n){return"or"===n.op}function l0(n){return kF(n)&&Vd(n)}function kF(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function d0(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+Ld(n.value);if(l0(n))return n.filters.map(e=>d0(e)).join(",");{const e=n.filters.map(t=>d0(t)).join(",");return`${n.op}(${e})`}}function OF(n,e){return n instanceof Nt?(r=n,(i=e)instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&Eo(r.value,i.value)):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&OF(o,i.filters[a]),!0)}(n,e):void Oe();var r,i}function FF(n,e){const t=n.filters.concat(e);return Jt.create(t,n.op)}function LF(n){return n instanceof Nt?`${(t=n).field.canonicalString()} ${t.op} ${Ld(t.value)}`:n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(LF).join(" ,")+"}"}(n):"Filter";var t}class DQ extends Nt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class SQ extends Nt{constructor(e,t){super(e,"in",t),this.keys=VF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RQ extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=VF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class MQ extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wp(t)&&qp(t.arrayValue,this.value)}}class UF extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qp(this.value.arrayValue,t)}}class PQ extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qp(this.value.arrayValue,t)}}class xQ extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qp(this.value.arrayValue,r))}}class NQ{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function h0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new NQ(n,e,t,r,i,s,o)}function yu(n){const e=be(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>d0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),$p(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ld(r)).join(",")),e.ue=t}return e.ue}function Zp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xF(n.startAt,e.startAt)&&xF(n.endAt,e.endAt)}function mv(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _v(n,e){return n.filters.filter(t=>t instanceof Nt&&t.field.isEqual(e))}function BF(n,e,t){let r=fv,i=!0;for(const s of _v(n,e)){let o=fv,a=!0;switch(s.op){case"<":case"<=":o=bQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=fv}SF({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];SF({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function jF(n,e,t){let r=ic,i=!0;for(const s of _v(n,e)){let o=ic,a=!0;switch(s.op){case">=":case">":o=CQ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ic}RF({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];RF({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ra{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function $F(n,e,t,r,i,s,o,a){return new ra(n,e,t,r,i,s,o,a)}function Ud(n){return new ra(n)}function HF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function f0(n){return null!==n.collectionGroup}function Bd(n){const e=be(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nn(wn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Kp(s,r))}),t.has(wn.keyField().canonicalString())||e.ce.push(new Kp(wn.keyField(),r))}return e.ce}function ni(n){const e=be(n);return e.le||(e.le=function qF(n,e){if("F"===n.limitType)return h0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Kp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ac(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ac(n.startAt.position,n.startAt.inclusive):null;return h0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Bd(n))),e.le}function p0(n,e){const t=n.filters.concat([e]);return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yv(n,e,t){return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qp(n,e){return Zp(ni(n),ni(e))&&n.limitType===e.limitType}function WF(n){return`${yu(ni(n))}|lt:${n.limitType}`}function jd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LF(i)).join(", ")}]`),$p(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ld(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ld(i)).join(",")),`Target(${r})`}(ni(n))}; limitType=${n.limitType})`}function Yp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Bd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=PF(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Bd(r),i)||r.endAt&&!function(o,a,c){const u=PF(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Bd(r),i)));var r,i}function GF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KF(n){return(e,t)=>{let r=!1;for(const i of Bd(n)){const s=kQ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function kQ(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?oc(c,u):Oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}class ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IF(this.inner)}size(){return this.innerSize}}const OQ=new gn(Se.comparator);function Bi(){return OQ}const ZF=new gn(Se.comparator);function Xp(...n){let e=ZF;for(const t of n)e=e.insert(t.key,t);return e}function QF(n){let e=ZF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Io(){return Jp()}function YF(){return Jp()}function Jp(){return new ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const FQ=new gn(Se.comparator),LQ=new nn(Se.comparator);function ht(...n){let e=LQ;for(const t of n)e=e.add(t);return e}const VQ=new nn(it);function g0(){return VQ}function XF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function JF(n){return{integerValue:""+n}}function eL(n,e){return dF(e)?JF(e):XF(n,e)}class vv{constructor(){this._=void 0}}function UQ(n,e,t){return n instanceof $d?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dv(s)&&(s=hv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof vu?nL(n,e):n instanceof Eu?rL(n,e):function(i,s){const o=tL(i,s),a=iL(o)+iL(i.Pe);return c0(o)&&c0(i.Pe)?JF(a):XF(i.serializer,a)}(n,e)}function BQ(n,e,t){return n instanceof vu?nL(n,e):n instanceof Eu?rL(n,e):t}function tL(n,e){return n instanceof Hd?c0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class $d extends vv{}class vu extends vv{constructor(e){super(),this.elements=e}}function nL(n,e){const t=sL(e);for(const r of n.elements)t.some(i=>Eo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Eu extends vv{constructor(e){super(),this.elements=e}}function rL(n,e){let t=sL(e);for(const r of n.elements)t=t.filter(i=>!Eo(i,r));return{arrayValue:{values:t}}}class Hd extends vv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function iL(n){return Wn(n.integerValue||n.doubleValue)}function sL(n){return Wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class eg{constructor(e,t){this.field=e,this.transform=t}}class $Q{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ev(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Iv{}function oL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new qd(n.key,Pn.none()):new zd(n.key,n.data,Pn.none());{const t=n.data,r=$r.empty();let i=new nn(wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new sa(n.key,r,new Ui(i.toArray()),Pn.none())}}function HQ(n,e,t){n instanceof zd?function(i,s,o){const a=i.value.clone(),c=uL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof sa?function(i,s,o){if(!Ev(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(cL(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tg(n,e,t,r){return n instanceof zd?function(s,o,a,c){if(!Ev(s.precondition,o))return a;const u=s.value.clone(),f=lL(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof sa?function(s,o,a,c){if(!Ev(s.precondition,o))return a;const u=lL(s.fieldTransforms,c,o),f=o.data;return f.setAll(cL(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Ev(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function zQ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=tL(r.transform,i||null);null!=s&&(null===t&&(t=$r.empty()),t.set(r.field,s))}return t||null}function aL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Nd(r,i,(s,o)=>function jQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof vu&&i instanceof vu||r instanceof Eu&&i instanceof Eu?Nd(r.elements,i.elements,Eo):r instanceof Hd&&i instanceof Hd?Eo(r.Pe,i.Pe):r instanceof $d&&i instanceof $d);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class zd extends Iv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sa extends Iv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uL(n,e,t){const r=new Map;$e(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,BQ(o,a,t[i]))}return r}function lL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,UQ(s,o,e))}return r}class qd extends Iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m0 extends Iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HQ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=tg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=tg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=oL(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(t,r)=>aL(t,r))&&Nd(this.baseMutations,e.baseMutations,(t,r)=>aL(t,r))}}class y0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length);let i=FQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,t,r,i)}}class v0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var pr,Vt;function hL(n){switch(n){default:return Oe();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function fL(n){if(void 0===n)return nr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case pr.OK:return ne.OK;case pr.CANCELLED:return ne.CANCELLED;case pr.UNKNOWN:return ne.UNKNOWN;case pr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case pr.INTERNAL:return ne.INTERNAL;case pr.UNAVAILABLE:return ne.UNAVAILABLE;case pr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case pr.NOT_FOUND:return ne.NOT_FOUND;case pr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case pr.ABORTED:return ne.ABORTED;case pr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case pr.DATA_LOSS:return ne.DATA_LOSS;default:return Oe()}}(Vt=pr||(pr={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";function pL(){return new TextEncoder}const WQ=new fu([4294967295,4294967295],0);function gL(n){const e=pL().encode(n),t=new G1;return t.update(e),new Uint8Array(t.digest())}function mL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fu([t,r],0),new fu([i,s],0)]}class E0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ng(`Invalid padding: ${t}`);if(r<0)throw new ng(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ng(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ng(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(fu.fromNumber(r)));return 1===i.compare(WQ)&&(i=new fu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gL(e),[r,i]=mL(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new E0(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=gL(e),[r,i]=mL(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ng extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ig.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rg(ze.min(),i,new gn(it),Bi(),ht())}}class ig{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ig(r,t,ht(),ht(),ht())}}class Tv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class _L{constructor(e,t){this.targetId=e,this.me=t}}class yL{constructor(e,t,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vL{constructor(){this.fe=0,this.ge=IL(),this.pe=br.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ht(),t=ht(),r=ht();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Oe()}}),new ig(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=IL()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bi(),this.qe=EL(),this.Qe=new gn(it)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(mv(s))if(0===r){const o=new Se(s.path);this.Ue(t,o,Tn.newNoDocument(o,ze.min()))}else $e(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=na(r).toUint8Array()}catch(c){if(c instanceof TF)return Vi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new E0(o,i,s)}catch(c){return Vi(c instanceof ng?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&mv(a.target)){const c=new Se(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Tn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ht();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rg(e,t,this.Qe,this.ke,r);return this.ke=Bi(),this.qe=EL(),this.Qe=new gn(it),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vL,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nn(it),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vL),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function EL(){return new gn(Se.comparator)}function IL(){return new gn(Se.comparator)}const KQ={asc:"ASCENDING",desc:"DESCENDING"},ZQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QQ={and:"AND",or:"OR"};class YQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function I0(n,e){return n.useProto3Json||$p(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XQ(n,e){return Wd(n,e.toTimestamp())}function rr(n){return $e(!!n),ze.fromTimestamp(function(t){const r=ta(t);return new Mn(r.seconds,r.nanos)}(n))}function w0(n,e){return T0(n,e).canonicalString()}function T0(n,e){const t=(i=n,new xt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function TL(n){const e=xt.fromString(n);return $e(kL(e)),e}function sg(n,e){return w0(n.databaseId,e.path)}function wo(n,e){const t=TL(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(AL(t))}function bL(n,e){return w0(n.databaseId,e)}function CL(n){const e=TL(n);return 4===e.length?xt.emptyPath():AL(e)}function b0(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AL(n){return $e(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DL(n,e,t){return{name:sg(n,e),fields:t.value.mapValue.fields}}function SL(n,e,t){const r=wo(n,e.name),i=rr(e.updateTime),s=e.createTime?rr(e.createTime):ze.min(),o=new $r({mapValue:{fields:e.fields}}),a=Tn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function og(n,e){let t;if(e instanceof zd)t={update:DL(n,e.key,e.value)};else if(e instanceof qd)t={delete:sg(n,e.key)};else if(e instanceof sa)t={update:DL(n,e.key,e.data),updateMask:oY(e.fieldMask)};else{if(!(e instanceof m0))return Oe();t={verify:sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $d)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Oe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:XQ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Oe()),t;var s}function C0(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Pn.updateTime(rr(s.updateTime)):void 0!==s.exists?Pn.exists(s.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?($e("REQUEST_TIME"===a.setToServerValue),c=new $d):"appendMissingElements"in a?c=new vu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Eu(a.removeAllFromArray.values||[]):"increment"in a?c=new Hd(o,a.increment):Oe();const u=wn.fromServerFormat(a.fieldPath);return new eg(u,c)}(n,i)):[];var s;if(e.update){const i=wo(n,e.update.name),s=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ui((e.updateMask.fieldPaths||[]).map(f=>wn.fromServerFormat(f)));return new sa(i,s,o,t,r)}return new zd(i,s,t,r)}if(e.delete){const i=wo(n,e.delete);return new qd(i,t)}if(e.verify){const i=wo(n,e.verify);return new m0(i,t)}return Oe()}function RL(n,e){return{documents:[bL(n,e.path)]}}function bv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bL(n,i);const s=function(u){if(0!==u.length)return NL(Jt.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:cc((y=f).field),direction:rY(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=I0(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function PL(n){let e=CL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$e(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=xL(m);return y instanceof Jt&&l0(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Kp(Gd((T=y).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,$p(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new ac((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new ac(m.values||[],!m.before)}(t.endAt)),$F(e,i,o,s,a,"F",c,u)}function xL(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gd(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gd(t.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gd(t.unaryFilter.field);return Nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gd(t.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(n):void 0!==n.fieldFilter?Nt.create(Gd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jt.create(t.compositeFilter.filters.map(r=>xL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}}(t.compositeFilter.op))}(n):Oe();var t}function rY(n){return KQ[n]}function iY(n){return ZQ[n]}function sY(n){return QQ[n]}function cc(n){return{fieldPath:n.canonicalString()}}function Gd(n){return wn.fromServerFormat(n.fieldPath)}function NL(n){return n instanceof Nt?function(t){if("=="===t.op){if(AF(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NAN"}};if(CF(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AF(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NAN"}};if(CF(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cc(t.field),op:iY(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>NL(i));return 1===r.length?r[0]:{compositeFilter:{op:sY(t.op),filters:r}}}(n):Oe()}function oY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class oa{constructor(e,t,r,i,s=ze.min(),o=ze.min(),a=br.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OL{constructor(e){this.ct=e}}function FL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sg(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Wd(s,o.version.toTimestamp()),createTime:Wd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Iu(e.version)};else{if(!e.isUnknownDocument())return Oe();r.unknownDocument={path:t.path.toArray(),version:Iu(e.version)}}var s,o;return r}function Cv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Iu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wu(n){const e=new Mn(n.seconds,n.nanoseconds);return ze.fromTimestamp(e)}function Tu(n,e){const t=(e.baseMutations||[]).map(s=>C0(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>C0(n.ct,s)),i=Mn.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,i,t,r)}function ag(n){const e=wu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wu(n.lastLimboFreeSnapshotVersion):ze.min();let r;return r=void 0!==n.query.documents?($e(1===(s=n.query).documents.length),ni(Ud(CL(s.documents[0])))):function(s){return ni(PL(s))}(n.query),new oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken));var s}function LL(n,e){const t=Iu(e.snapshotVersion),r=Iu(e.lastLimboFreeSnapshotVersion);let i;i=mv(e.target)?RL(n.ct,e.target):bv(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function A0(n){const e=PL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yv(e,e.limit,"L"):e}function D0(n,e){return new v0(e.largestBatchId,C0(n.ct,e.overlayMutation))}function VL(n,e){const t=e.path.lastSegment();return[n,ti(e.path.popLast()),t]}function UL(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Iu(r.readTime),documentKey:ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class cY{getBundleMetadata(e,t){return BL(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:wu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return BL(e).put({bundleId:(i=t).id,createTime:Iu(rr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return jL(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:A0(s.bundledQuery),readTime:wu(s.readTime)};var s})}saveNamedQuery(e,t){return jL(e).put({name:(i=t).name,readTime:Iu(rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function BL(n){return Rr(n,"bundles")}function jL(n){return Rr(n,"namedQueries")}class Av{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Av(e,t.uid||"")}getOverlay(e,t){return cg(e).get(VL(this.userId,t)).next(r=>r?D0(this.serializer,r):null)}getOverlays(e,t){const r=Io();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new v0(t,o);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ti(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(cg(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Io(),s=ti(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cg(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=D0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Io();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cg(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=D0(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return cg(e).put(function(i,s,o){const[a,c,u]=VL(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:og(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function cg(n){return Rr(n,"documentOverlays")}class bu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Hp(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=ta(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(na(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?DF(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Oe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Se.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function uY(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $L(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=uY(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}bu.bt=new bu;class lY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=$L(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=$L(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class hY{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ug{constructor(){this.Gt=new lY,this.zt=new dY(this.Gt),this.jt=new hY(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Cu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cu(this.indexId,this.documentKey,this.arrayValue,r)}}function uc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=HL(n.arrayValue,e.arrayValue),0!==t?t:(t=HL(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function HL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zL{constructor(e){this.Yt=new nn((t,r)=>wn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if($e(e.collectionGroup===this.collectionId),this.en)return!1;const t=t0(e);if(void 0!==t&&!this.nn(t))return!1;const r=pu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new nn(wn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new gu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gu(r.field,"asc"===r.dir?0:1)));return new kd(kd.UNKNOWN_ID,this.collectionId,t,Od.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qL(n){var e,t;if($e(n instanceof Nt||n instanceof Jt),n instanceof Nt){if(n instanceof UF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Nt.create(n.field,"==",s)))||[];return Jt.create(i,"or")}return n}const r=n.filters.map(i=>qL(i));return Jt.create(r,n.op)}function fY(n){if(0===n.getFilters().length)return[];const e=M0(qL(n));return $e(WL(e)),S0(e)||R0(e)?[e]:e.getFilters()}function S0(n){return n instanceof Nt}function R0(n){return n instanceof Jt&&l0(n)}function WL(n){return S0(n)||R0(n)||function(t){if(t instanceof Jt&&u0(t)){for(const r of t.getFilters())if(!S0(r)&&!R0(r))return!1;return!0}return!1}(n)}function M0(n){if($e(n instanceof Nt||n instanceof Jt),n instanceof Nt)return n;if(1===n.filters.length)return M0(n.filters[0]);const e=n.filters.map(r=>M0(r));let t=Jt.create(e,n.op);return t=Dv(t),WL(t)?t:($e(t instanceof Jt),$e(Vd(t)),$e(t.filters.length>1),t.filters.reduce((r,i)=>P0(r,i)))}function P0(n,e){let t;return $e(n instanceof Nt||n instanceof Jt),$e(e instanceof Nt||e instanceof Jt),t=n instanceof Nt?e instanceof Nt?Jt.create([n,e],"and"):GL(n,e):e instanceof Nt?GL(e,n):function(i,s){if($e(i.filters.length>0&&s.filters.length>0),Vd(i)&&Vd(s))return FF(i,s.getFilters());const o=u0(i)?i:s,a=u0(i)?s:i,c=o.filters.map(u=>P0(u,a));return Jt.create(c,"or")}(n,e),Dv(t)}function GL(n,e){if(Vd(e))return FF(e,n.getFilters());{const t=e.filters.map(r=>P0(n,r));return Jt.create(t,"or")}}function Dv(n){if($e(n instanceof Nt||n instanceof Jt),n instanceof Nt)return n;const e=n.getFilters();if(1===e.length)return Dv(e[0]);if(kF(n))return n;const t=e.map(i=>Dv(i)),r=[];return t.forEach(i=>{i instanceof Nt?r.push(i):i instanceof Jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jt.create(r,n.op)}class pY{constructor(){this._n=new x0}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ji.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class x0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nn(xt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nn(xt.comparator)).toArray()}}const Sv=new Uint8Array(0);class gY{constructor(e,t){this.databaseId=t,this.an=new x0,this.un=new ia(r=>yu(r),(r,i)=>Zp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ti(i)};return KL(e).put(s)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iF(t),""],!1,!0);return KL(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(vo(o.parent))}return r})}addFieldIndex(e,t){const r=lg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Zd(e);return s.next(a=>{o.put(UL(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=lg(e),i=Zd(e),s=Kd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=lg(e),r=Kd(e),i=Zd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new zL(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Kd(e);let i=!0;const s=new Map;return Y.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ht();const a=[];return Y.forEach(s,(c,u)=>{var G;ve("IndexedDbIndexManager",`Using index ${G=c,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${yu(t)}`);const f=function(G,te){const Ie=t0(te);if(void 0===Ie)return null;for(const Re of _v(G,Ie.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(u,c),m=function(G,te){const Ie=new Map;for(const Re of pu(te))for(const j of _v(G,Re.fieldPath))switch(j.op){case"==":case"in":Ie.set(Re.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return Ie.set(Re.fieldPath.canonicalString(),j.value),Array.from(Ie.values())}return null}(u,c),y=function(G,te){const Ie=[];let Re=!0;for(const j of pu(te)){const N=0===j.kind?BF(G,j.fieldPath,G.startAt):jF(G,j.fieldPath,G.startAt);Ie.push(N.value),Re&&(Re=N.inclusive)}return new ac(Ie,Re)}(u,c),I=function(G,te){const Ie=[];let Re=!0;for(const j of pu(te)){const N=0===j.kind?jF(G,j.fieldPath,G.endAt):BF(G,j.fieldPath,G.endAt);Ie.push(N.value),Re&&(Re=N.inclusive)}return new ac(Ie,Re)}(u,c),T=this.hn(c,u,y),R=this.hn(c,u,I),P=this.Pn(c,u,m),H=this.In(c.indexId,f,T,y.inclusive,R,I.inclusive,P);return Y.forEach(H,V=>r.G(V,t.limit).next(G=>{G.forEach(te=>{const Ie=Se.fromSegments(te.documentKey);o.has(Ie)||(o=o.add(Ie),a.push(Ie))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:fY(Jt.create(e.filters,"and")).map(r=>h0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):Sv,I=this.En(e,y,r[m%u],i),T=this.dn(e,y,s[m%u],o),R=a.map(P=>this.En(e,y,P,!0));f.push(...this.createRange(I,T,R))}return f}En(e,t,r,i){const s=new Cu(e,Se.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Cu(e,Se.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new zL(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new nn(wn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new ug;for(const i of pu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);bu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new ug;return bu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new ug;return bu.bt.Pt(_u(this.databaseId,t),r.Ht(function(s){const o=pu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new ug);let s=0;for(const o of pu(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Wp(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);bu.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new ug;c.seed(a.Wt()),bu.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Nt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lg(e),i=Zd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Y.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Od(m.sequenceNumber,new Ji(wu(m.readTime),new Se(vo(m.documentKey)),m.largestBatchId)):Od.empty(),I=f.fields.map(([T,R])=>new gu(wn.fromServerFormat(T),R));return new kd(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:it(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lg(e),s=Zd(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,c=>s.put(UL(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Y.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?Y.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return Kd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Kd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Kd(e);let s=new nn(uc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Cu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new nn(uc);const i=this.An(t,e);if(null==i)return r;const s=t0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Wp(o))for(const a of o.arrayValue.values||[])r=r.add(new Cu(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Cu(t.indexId,e.key,Sv,i));return r}wn(e,t,r,i,s){ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),T=u.getIterator();let R=Fd(I),P=Fd(T);for(;R||P;){let H=!1,V=!1;if(R&&P){const G=f(R,P);G<0?V=!0:G>0&&(H=!0)}else null!=R?V=!0:H=!0;H?(m(P),P=Fd(T)):V?(y(R),R=Fd(I)):(R=Fd(I),P=Fd(T))}}(i,s,uc,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Y.waitFor(o)}gn(e){let t=1;return Zd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>uc(o,a)).filter((o,a,c)=>!a||0!==uc(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=uc(o,e),c=uc(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Sv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Sv,[]]))}return s}Dn(e,t){return uc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZL)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Oe())).next(ZL)}}function KL(n){return Rr(n,"collectionParents")}function Kd(n){return Rr(n,"indexEntries")}function lg(n){return Rr(n,"indexConfiguration")}function Zd(n){return Rr(n,"indexState")}function ZL(n){$e(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;n0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ji(e.readTime,e.documentKey,t)}const QL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{$e(1===a)}));const u=[];for(const f of t.mutations){const m=pF(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return Y.waitFor(s).next(()=>u)}function Rv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Oe();e=n.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class Mv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){$e(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Mv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Qd(e),o=lc(e);return o.add({}).next(a=>{$e("number"==typeof a);const c=new _0(a,t,r,i),u=function(I,T,R){const P=R.baseMutations.map(V=>og(I.ct,V)),H=R.mutations.map(V=>og(I.ct,V));return{userId:T,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:H}}(this.serializer,this.userId,c),f=[];let m=new nn((y,I)=>it(y.canonicalString(),I.canonicalString()));for(const y of i){const I=pF(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,iQ))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),Y.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return lc(e).get(t).next(r=>r?($e(r.userId===this.userId),Tu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return lc(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&($e(a.batchId>=r),s=Tu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).U("userMutationsIndex",t).next(r=>r.map(i=>Tu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=uv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Qd(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=vo(f);if(u===this.userId&&t.path.isEqual(y))return lc(e).get(m).next(I=>{if(!I)throw Oe();$e(I.userId===this.userId),s.push(Tu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(it);const i=[];return t.forEach(s=>{const o=uv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Qd(e).J({range:a},(u,f,m)=>{const[y,I,T]=u,R=vo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(T):m.done()});i.push(c)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=uv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new nn(it);return Qd(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,T=vo(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(lc(e).get(s).next(o=>{if(null===o)throw Oe();$e(o.userId===this.userId),r.push(Tu(this.serializer,o))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return YL(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=vo(s[1]);i.push(c)}else a.done()}).next(()=>{$e(0===i.length)})})}containsKey(e,t){return XL(e,this.userId,t)}xn(e){return JL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XL(n,e,t){const r=uv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Qd(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function lc(n){return Rr(n,"mutations")}function Qd(n){return Rr(n,"documentMutations")}function JL(n){return Rr(n,"mutationQueues")}class Au{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Au(0)}static Ln(){return new Au(-1)}}class mY{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Au(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ze.fromTimestamp(new Mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>($e(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Yd(e).J((o,a)=>{const c=ag(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Y.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Yd(e).J((r,i)=>{const s=ag(i);t(s)})}Bn(e){return eV(e).get("targetGlobalKey").next(t=>($e(null!==t),t))}kn(e,t){return eV(e).put("targetGlobalKey",t)}qn(e,t){return Yd(e).put(LL(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Yd(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=ag(a);Zp(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=dc(e);return t.forEach(o=>{const a=ti(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=dc(e);return Y.forEach(t,s=>{const o=ti(s.path);return Y.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=dc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=dc(e);let s=ht();return i.J({range:r,H:!0},(o,a,c)=>{const u=vo(o[1]),f=new Se(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ti(t.path),i=IDBKeyRange.bound([r],[iF(r)],!1,!0);let s=0;return dc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Yd(e).get(t).next(r=>r?ag(r):null)}}function Yd(n){return Rr(n,"targets")}function eV(n){return Rr(n,"targetGlobal")}function dc(n){return Rr(n,"targetDocuments")}function tV([n,e],[t,r]){const i=it(n,t);return 0===i?it(e,r):i}class _Y{constructor(e){this.Kn=e,this.buffer=new nn(tV),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tc(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ec(r)}yield t.zn(3e5)}))}}class yY{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(es.oe);const r=new _Y(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(QL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QL):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),xd()<=_o.in.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class vY{constructor(e,t){this.db=e,this.garbageCollector=function rV(n,e){return new yY(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Pv(e,r)}removeReference(e,t,r){return Pv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pv(e,t)}er(e,t){return function(i,s){let o=!1;return JL(i).Y(a=>XL(i,a,s).next(c=>(c&&(o=!0),Y.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ze.min()),dc(e).delete([0,ti(o.path)])))});i.push(c)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pv(e,t)}Xn(e,t){const r=dc(e);let i,s=es.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==es.oe&&t(new Se(vo(i)),s),s=u,i=c):s=es.oe}).next(()=>{s!==es.oe&&t(new Se(vo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pv(n,e){return dc(n).put((i=n.currentSequenceNumber,{targetId:0,path:ti(e.path),sequenceNumber:i}));var i}class iV{constructor(){this.changes=new ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Du(e).put(r)}removeEntry(e,t,r){return Du(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Cv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return Du(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return Du(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dg(t))},(i,s)=>{r={document:this.nr(t,s),size:Rv(s)}}).next(()=>r)}getEntries(e,t){let r=Bi();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Bi(),i=new gn(Se.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Rv(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new nn(cV);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(dg(i.first()),dg(i.last())),o=i.getIterator();let a=o.getNext();return Du(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Se.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&cV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(dg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Cv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Du(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=Bi();for(const m of u){const y=this.nr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Yp(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Bi();const o=aV(t,r),a=aV(t,Ji.max());return Du(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Se.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new IY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oV(e).get("remoteDocumentGlobalKey").next(t=>($e(!!t),t))}tr(e,t){return oV(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function aY(n,e){let t;if(e.document)t=SL(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=wu(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const r=Se.fromSegments(e.unknownDocument.path),i=wu(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Mn(i[0],i[1]);return ze.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ze.min()))return r}return Tn.newInvalidDocument(e)}}function sV(n){return new EY(n)}class IY extends iV{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ia(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nn((s,o)=>it(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=FL(this.ar.serializer,o);i=i.add(s.path.popLast());const u=Rv(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=FL(this.ar.serializer,o.convertToNoDocument(ze.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function oV(n){return Rr(n,"remoteDocumentGlobal")}function Du(n){return Rr(n,"remoteDocumentsV14")}function dg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aV(n,e){const t=e.documentKey.path.toArray();return[n,Cv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=it(t[s],r[s]),i)return i;return i=it(t.length,r.length),i||(i=it(t[t.length-2],r[r.length-2]),i||it(t[t.length-1],r[r.length-1]))}class wY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&tg(r.mutation,i,Ui.empty(),Mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ht()){const i=Io();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Xp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Io();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Bi();const o=Jp(),a=Jp();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof sa)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),tg(f.mutation,u,f.mutation.getFieldMask(),Mn.now())):o.set(u.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new wY(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Jp();let i=new gn((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||Ui.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||ht()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=YF();f.forEach(y=>{if(!s.has(y)){const I=oL(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Se.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):f0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(Io());let a=-1,c=s;return o.next(u=>Y.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ht())).next(f=>({batchId:a,changes:QF(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=Xp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Xp();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,c=>{const u=(m=t,y=c.child(s),new ra(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,Tn.newInvalidDocument(f)))});let a=Xp();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&tg(f.mutation,u,Ui.empty(),Mn.now()),Yp(t,u)&&(a=a.insert(c,u))}),a})}}class TY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:rr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:A0(i.bundledQuery),readTime:rr(i.readTime)}),Y.resolve();var i}}class bY{constructor(){this.overlays=new gn(Se.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Io();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=Io(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new gn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=Io(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Io(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v0(t,r));let s=this.hr.get(t);void 0===s&&(s=ht(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class N0{constructor(){this.Pr=new nn(Mr.Ir),this.Tr=new nn(Mr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Mr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Mr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Se(new xt([])),r=new Mr(t,e),i=new Mr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Se(new xt([])),r=new Mr(t,e),i=new Mr(t,e+1);let s=ht();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Mr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Se.comparator(e.key,t.key)||it(e.pr,t.pr)}static Er(e,t){return it(e.pr,t.pr)||Se.comparator(e.key,t.key)}}class CY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new nn(Mr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new _0(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Mr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mr(t,0),i=new Mr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(it);return t.forEach(i=>{const s=new Mr(i,0),o=new Mr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new Mr(new Se(s),0);let a=new nn(it);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$e(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const s=new Mr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Mr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AY{constructor(e){this.vr=e,this.docs=new gn(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Bi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Bi();const o=t.path,a=new Se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||n0(oF(f),r)<=0||(i.has(f.key)||Yp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Oe()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DY(this)}getSize(e){return Y.resolve(this.size)}}class DY extends iV{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class SY{constructor(e){this.persistence=e,this.Mr=new ia(t=>yu(t),Zp),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new N0,this.targetCount=0,this.Lr=Au.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Au(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class k0{constructor(e,t){this.Br={},this.overlays={},this.kr=new es(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new SY(this),this.indexManager=new pY,this.remoteDocumentCache=new AY(r=>this.referenceDelegate.Kr(r)),this.serializer=new OL(t),this.$r=new TY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new CY(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new RY(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class RY extends cF{constructor(e){super(),this.currentSequenceNumber=e}}class xv{constructor(e){this.persistence=e,this.zr=new N0,this.jr=null}static Hr(e){return new xv(e)}get Jr(){if(this.jr)return this.jr;throw Oe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Se.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class MY{constructor(e){this.serializer=e}O(e,t,r,i){const s=new cv("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fF,{unique:!0}),c.createObjectStore("documentMutations"),lV(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),lV(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ze.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fF,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return Y.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:mQ});u.createIndex("collectionPathOverlayIndex",_Q,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",yQ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:sQ});u.createIndex("documentKeyIndex",oQ),u.createIndex("collectionGroupIndex",aQ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:hQ}).createIndex("sequenceNumberIndex",fQ,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:pQ}).createIndex("documentKeyIndex",gQ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Rv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Y.forEach(a,c=>{$e(c.userId===s.userId);const u=Tu(this.serializer,c);return YL(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new xt(o),u=[0,ti(c)];s.push(t.get(u).next(f=>f?Y.resolve():t.put({targetId:0,path:ti(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:dQ});const r=t.store("collectionParents"),i=new x0,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:ti(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new xt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=vo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=ag(i),o=LL(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Se(xt.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):Oe()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=sV(this.serializer),s=new k0(xv.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:ht();Tu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),Y.forEach(a,(c,u)=>{const f=new Sr(u),m=Av.lt(this.serializer,f),y=s.getIndexManager(f),I=Mv.lt(f,this.serializer,y,s.referenceDelegate);return new uV(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new o0(t,es.oe),c).next()})})}}function lV(n){n.createObjectStore("targetDocuments",{keyPath:uQ}).createIndex("documentTargetsIndex",lQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cQ,{unique:!0}),n.createObjectStore("targetGlobal")}const O0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class F0{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!F0.D())throw new me(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vY(this,i),this.Ti=t+"main",this.serializer=new OL(c),this.Ei=new yo(this.Ti,this.ui,new MY(this.serializer)),this.Qr=new mY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sV(this.serializer),this.$r=new cY,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,O0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new es(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(tc(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return hg(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return kv(e).delete(this.clientId)}Di(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Rr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return Y.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):hg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,O0);return!1}}return!(!this.networkEnabled||!this.inForeground)||kv(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new o0(t,es.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>kv(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Mv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Av.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?EQ:15===c?yF:14===c?_F:13===c?mF:12===c?vQ:11===c?gF:void Oe();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new o0(a,this.kr?this.kr.next():es.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new me(ne.FAILED_PRECONDITION,aF);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return hg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ne.FAILED_PRECONDITION,O0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hg(e).put("owner",t)}static D(){return yo.D()}yi(e){const t=hg(e);return t.get("owner").next(r=>this.Si(r)?(ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,lt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hg(n){return Rr(n,"owner")}function kv(n){return Rr(n,"clientMetadata")}function L0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class V0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ht(),i=ht();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new V0(e,t.fromCache,r,i)}}class PY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dV{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,lt.G6)()?8:uF((0,lt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PY;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(xd()<=_o.in.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",jd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(xd()<=_o.in.DEBUG&&ve("QueryEngine","Query:",jd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(xd()<=_o.in.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",jd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):Y.resolve())}ji(e,t){if(HF(t))return Y.resolve(null);let r=ni(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=yv(t,null,"F"),r=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ht(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,yv(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return HF(t)||i.isEqual(ze.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Y.resolve(null):(xd()<=_o.in.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jd(t)),this.es(e,o,t,sF(i,-1)).next(a=>a))})}Zi(e,t){let r=new nn(KF(e));return t.forEach((i,s)=>{Yp(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return xd()<=_o.in.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",jd(t)),this.zi.getDocumentsMatchingQuery(e,t,Ji.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class xY{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new gn(it),this.rs=new ia(s=>yu(s),Zp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uV(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function hV(n,e,t,r){return new xY(n,e,t,r)}function fV(n,e){return U0.apply(this,arguments)}function U0(){return(U0=(0,ae.Z)(function*(n,e){const t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=ht();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function pV(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function gV(n,e,t){let r=ht(),i=ht();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Bi();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ze.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function OY(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xd(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Jd(n,e,t){return B0.apply(this,arguments)}function B0(){return(B0=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!tc(o))throw o;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function Ov(n,e,t){const r=be(n);let i=ze.min(),s=ht();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=be(c),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ze.min(),t?s:ht())).next(a=>(yV(r,GF(e),a),{documents:a,hs:s})))}function mV(n,e){const t=be(n),r=be(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function _V(n,e){const t=be(n),r=t.ss.get(e)||ze.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,sF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yV(t,e,i),i))}function yV(n,e,t){let r=n.ss.get(e)||ze.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function j0(){return(j0=(0,ae.Z)(function*(n,e,t,r){const i=be(n);let s=ht(),o=Bi();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Xd(i,(f=r,ni(Ud(xt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>gV(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function LY(n,e){return $0.apply(this,arguments)}function $0(){return($0=(0,ae.Z)(function*(n,e,t=ht()){const r=yield Xd(n,ni(A0(e.bundledQuery))),i=be(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=rr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(br.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function vV(n,e){return`firestore_clients_${n}_${e}`}function EV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function H0(n,e){return`firestore_targets_${n}_${e}`}class Fv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new me(i.error.code,i.error.message))),o?new Fv(e,t,i.state,s):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new me(r.error.code,r.error.message))),s?new fg(e,r.state,i):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=g0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Lv(e,s):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class z0{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new z0(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class q0{constructor(){this.activeTargetIds=g0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W0{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new gn(it),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=vV(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new q0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(vV(e.persistenceKey,i));if(s){const o=Lv.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(H0(this.persistenceKey,e));if(r){const i=fg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(H0(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve("SharedClientState","READ",e,t),t}setItem(e,t){ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=es.oe;if(null!=o)try{const c=JSON.parse(o);$e("number"==typeof c),a=c}catch(c){nr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==es.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Fv(this.currentUser,e,t,r),s=EV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=EV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=H0(this.persistenceKey,e),s=new fg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Lv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Fv.Es(new Sr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return fg.Es(i,t)}xs(e){return z0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=g0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class IV{constructor(){this.no=new q0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new q0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VY{io(e){}shutdown(){}}class wV{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vv=null;function G0(){return null===Vv?Vv=268435456+Math.round(2147483648*Math.random()):Vv++,"0x"+Vv.toString(16)}const UY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BY{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ii="WebChannelConnection";class jY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=G0(),c=this.vo(t,r.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(ve("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Vi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Pd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${UY[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=G0();return new Promise((o,a)=>{const c=new K1;c.setWithCredentials(!0),c.listenOnce(Q1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case av.NO_ERROR:const f=c.getResponseJson();ve(ii,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case av.TIMEOUT:ve(ii,`RPC '${e}' ${s} timed out`),a(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case av.HTTP_ERROR:const m=c.getStatus();if(ve(ii,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(H)>=0?H:ne.UNKNOWN}(I.status);a(new me(T,I.message))}else a(new me(ne.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{ve(ii,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ve(ii,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=G0(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J1(),a=X1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Z1({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");ve(ii,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const T=new BY({lo:P=>{I?ve(ii,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(ve(ii,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ve(ii,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},ho:()=>m.close()}),R=(P,H,V)=>{P.listen(H,G=>{try{V(G)}catch(te){setTimeout(()=>{throw te},0)}})};return R(m,Up.EventType.OPEN,()=>{I||(ve(ii,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),R(m,Up.EventType.CLOSE,()=>{I||(I=!0,ve(ii,`RPC '${e}' stream ${i} transport closed`),T.po())}),R(m,Up.EventType.ERROR,P=>{I||(I=!0,Vi(ii,`RPC '${e}' stream ${i} transport errored:`,P),T.po(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),R(m,Up.EventType.MESSAGE,P=>{var H;if(!I){const V=P.data[0];$e(!!V);const te=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(te){ve(ii,`RPC '${e}' stream ${i} received error:`,te);const Ie=te.status;let Re=function(L){const z=pr[L];if(void 0!==z)return fL(z)}(Ie),j=te.message;void 0===Re&&(Re=ne.INTERNAL,j="Unknown error status: "+Ie+" with message "+te.message),I=!0,T.po(new me(Re,j)),m.close()}else ve(ii,`RPC '${e}' stream ${i} received:`,V),T.yo(V)}}),R(a,Y1.STAT_EVENT,P=>{P.stat===Jb.PROXY?ve(ii,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Jb.NOPROXY&&ve(ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function TV(){return typeof window<"u"?window:null}function Uv(){return typeof document<"u"?document:null}function pg(n){return new YQ(n,!0)}class K0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class bV{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new K0(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ae.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ae.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ae.Z)(function*(){e.state=0,e.start()}))}c_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $Y extends bV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function eY(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Oe(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?($e(void 0===f||"string"==typeof f),br.fromBase64String(f||"")):($e(void 0===f||f instanceof Buffer||f instanceof Uint8Array),br.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?ne.UNKNOWN:fL(u.code);return new me(f,u.message||"")}(o);t=new yL(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=wo(n,r.document.name),s=rr(r.document.updateTime),o=r.document.createTime?rr(r.document.createTime):ze.min(),a=new $r({mapValue:{fields:r.document.fields}}),c=Tn.newFoundDocument(i,s,o,a);t=new Tv(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=wo(n,r.document),s=r.readTime?rr(r.readTime):ze.min(),o=Tn.newNoDocument(i,s);t=new Tv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=wo(n,r.document);t=new Tv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Oe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new qQ(i,s);t=new _L(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?rr(o.readTime):ze.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=b0(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=mv(c)?{documents:RL(s,c)}:{query:bv(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wL(s,o.resumeToken);const u=I0(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ze.min())>0){a.readTime=Wd(s,o.snapshotVersion.toTimestamp());const u=I0(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function nY(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=b0(this.serializer),t.removeTarget=e,this.i_(t)}}class HY extends bV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function tY(n,e){return n&&n.length>0?($e(void 0!==e),n.map(t=>function(i,s){let o=rr(i.updateTime?i.updateTime:s);return o.isEqual(ze.min())&&(o=rr(s)),new $Q(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.A_(r,t)}return $e(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=b0(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>og(this.serializer,r))};this.i_(t)}}class zY extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,T0(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(ne.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,T0(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ne.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class qY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(nr(t),this.y_=!1):ve("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class WY{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ae.Z)(function*(){var c;hc(o)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ae.Z)(function*(f){const m=be(f);m.M_.add(4),yield eh(m),m.N_.set("Unknown"),m.M_.delete(4),yield gg(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new qY(r,i)}}function gg(n){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,ae.Z)(function*(n){if(hc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function eh(n){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,ae.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Bv(n,e){const t=be(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),J0(t)?X0(t):rh(t).Xo()&&Y0(t,e))}function th(n,e){const t=be(n),r=rh(t);t.F_.delete(e),r.Xo()&&CV(t,e),0===t.F_.size&&(r.Xo()?r.n_():hc(t)&&t.N_.set("Unknown"))}function Y0(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rh(n).P_(e)}function CV(n,e){n.L_.xe(e),rh(n).I_(e)}function X0(n){n.L_=new GQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),rh(n).start(),n.N_.w_()}function J0(n){return hc(n)&&!rh(n).Zo()&&n.F_.size>0}function hc(n){return 0===be(n).M_.size}function AV(n){n.L_=void 0}function GY(n){return eC.apply(this,arguments)}function eC(){return(eC=(0,ae.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function KY(n){return tC.apply(this,arguments)}function tC(){return(tC=(0,ae.Z)(function*(n){n.F_.forEach((e,t)=>{Y0(n,e)})})).apply(this,arguments)}function ZY(n,e){return nC.apply(this,arguments)}function nC(){return(nC=(0,ae.Z)(function*(n,e){AV(n),J0(n)?(n.N_.D_(e),X0(n)):n.N_.set("Unknown")})).apply(this,arguments)}function QY(n,e,t){return rC.apply(this,arguments)}function rC(){return rC=(0,ae.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof yL&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jv(n,r)}else if(e instanceof Tv?n.L_.Ke(e):e instanceof _L?n.L_.He(e):n.L_.We(e),!t.isEqual(ze.min()))try{const r=yield pV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(br.EMPTY_BYTE_STRING,f.snapshotVersion)),CV(s,c);const m=new oa(f.target,c,u,f.sequenceNumber);Y0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield jv(n,r)}var r}),rC.apply(this,arguments)}function jv(n,e,t){return iC.apply(this,arguments)}function iC(){return(iC=(0,ae.Z)(function*(n,e,t){if(!tc(e))throw e;n.M_.add(1),yield eh(n),n.N_.set("Offline"),t||(t=()=>pV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield gg(n)}))})).apply(this,arguments)}function DV(n,e){return e().catch(t=>jv(n,t,e))}function nh(n){return sC.apply(this,arguments)}function sC(){return(sC=(0,ae.Z)(function*(n){const e=be(n),t=fc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;YY(e);)try{const i=yield OY(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,XY(e,i)}catch(i){yield jv(e,i)}SV(e)&&RV(e)})).apply(this,arguments)}function YY(n){return hc(n)&&n.v_.length<10}function XY(n,e){n.v_.push(e);const t=fc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function SV(n){return hc(n)&&!fc(n).Zo()&&n.v_.length>0}function RV(n){fc(n).start()}function JY(n){return oC.apply(this,arguments)}function oC(){return(oC=(0,ae.Z)(function*(n){fc(n).V_()})).apply(this,arguments)}function eX(n){return aC.apply(this,arguments)}function aC(){return(aC=(0,ae.Z)(function*(n){const e=fc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function tX(n,e,t){return cC.apply(this,arguments)}function cC(){return(cC=(0,ae.Z)(function*(n,e,t){const r=n.v_.shift(),i=y0.from(r,e,t);yield DV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nh(n)})).apply(this,arguments)}function nX(n,e){return uC.apply(this,arguments)}function uC(){return uC=(0,ae.Z)(function*(n,e){var t;e&&fc(n).E_&&(yield(t=(0,ae.Z)(function*(i,s){if(hL(a=s.code)&&a!==ne.ABORTED){const o=i.v_.shift();fc(i).t_(),yield DV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield nh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),SV(n)&&RV(n)}),uC.apply(this,arguments)}function MV(n,e){return lC.apply(this,arguments)}function lC(){return(lC=(0,ae.Z)(function*(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=hc(t);t.M_.add(3),yield eh(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield gg(t)})).apply(this,arguments)}function dC(n,e){return hC.apply(this,arguments)}function hC(){return(hC=(0,ae.Z)(function*(n,e){const t=be(n);e?(t.M_.delete(2),yield gg(t)):e||(t.M_.add(2),yield eh(t),t.N_.set("Unknown"))})).apply(this,arguments)}function rh(n){return n.B_||(n.B_=function(t,r,i){const s=be(t);return s.f_(),new $Y(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:GY.bind(null,n),To:KY.bind(null,n),Ao:ZY.bind(null,n),h_:QY.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.B_.t_(),J0(n)?X0(n):n.N_.set("Unknown")):(yield n.B_.stop(),AV(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function fc(n){return n.k_||(n.k_=function(t,r,i){const s=be(t);return s.f_(),new HY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:JY.bind(null,n),Ao:nX.bind(null,n),R_:eX.bind(null,n),A_:tX.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.k_.t_(),yield nh(n)):(yield n.k_.stop(),n.v_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class fC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new fC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ih(n,e){if(nr("AsyncQueue",`${e}: ${n}`),tc(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class sh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Xp(),this.sortedSet=new gn(this.comparator)}static emptySet(e){return new sh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PV{constructor(){this.q_=new gn(Se.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Oe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class oh{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new oh(e,t,sh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rX{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class iX{constructor(){this.queries=new ia(e=>WF(e),Qp),this.onlineState="Unknown",this.z_=new Set}}function pC(n,e){return gC.apply(this,arguments)}function gC(){return(gC=(0,ae.Z)(function*(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new rX,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=ih(o,`Initialization of query '${jd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&yC(t)})).apply(this,arguments)}function mC(n,e){return _C.apply(this,arguments)}function _C(){return(_C=(0,ae.Z)(function*(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function sX(n,e){const t=be(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&yC(t)}function oX(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function yC(n){n.z_.forEach(e=>{e.next()})}var vC,xV;(xV=vC||(vC={})).J_="default",xV.Cache="cache";class EC{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new oh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=oh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==vC.Cache}}class aX{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class NV{constructor(e){this.serializer=e}Ps(e){return wo(this.serializer,e)}Is(e){return e.metadata.exists?SL(this.serializer,e.document,!1):Tn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return rr(e)}}class cX{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=xt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new NV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ht()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function FY(n,e,t,r){return j0.apply(this,arguments)}(e.localStore,new NV(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield LY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function kV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OV{constructor(e){this.key=e}}class FV{constructor(e){this.key=e}}class LV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ht(),this.mutatedKeys=ht(),this.Ia=KF(e),this.Ta=new sh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new PV,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Yp(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;y&&I?y.data.isEqual(I.data)?T!==R&&(r.track({type:3,doc:I}),P=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),P=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),P=!0):y&&!I&&(r.track({type:1,doc:y}),P=!0,(c||u)&&(a=!0)),P&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return R(I)-R(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new oh(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new PV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ht(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new FV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new OV(r))}),t}pa(e){this.la=e.hs,this.Pa=ht();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return oh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class uX{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lX{constructor(e){this.key=e,this.wa=!1}}class dX{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ia(a=>WF(a),Qp),this.Da=new Map,this.Ca=new Set,this.va=new gn(Se.comparator),this.Fa=new Map,this.Ma=new N0,this.xa={},this.Oa=new Map,this.Na=Au.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function hX(n,e){return IC.apply(this,arguments)}function IC(){return(IC=(0,ae.Z)(function*(n,e,t=!0){const r=$v(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield VV(r,e,t,!0),i})).apply(this,arguments)}function fX(n,e){return wC.apply(this,arguments)}function wC(){return(wC=(0,ae.Z)(function*(n,e){const t=$v(n);yield VV(t,e,!0,!1)})).apply(this,arguments)}function VV(n,e,t,r){return TC.apply(this,arguments)}function TC(){return(TC=(0,ae.Z)(function*(n,e,t,r){const i=yield Xd(n.localStore,ni(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield bC(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Bv(n.remoteStore,i),a})).apply(this,arguments)}function bC(n,e,t,r,i){return CC.apply(this,arguments)}function CC(){return CC=(0,ae.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,ae.Z)(function*(P,H,V,G){let te=H.view.da(V);te.Xi&&(te=yield Ov(P.localStore,H.query,!1).then(({documents:N})=>H.view.da(N,te)));const Ie=G&&G.targetChanges.get(H.targetId),Re=G&&null!=G.targetMismatches.get(H.targetId),j=H.view.applyChanges(te,P.isPrimaryClient,Ie,Re);return FC(P,H.targetId,j.fa),j.snapshot}),function R(P,H,V,G){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield Ov(n.localStore,e,!0),o=new LV(e,s.hs),a=o.da(s.documents),c=ig.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);FC(n,t,u.fa);const f=new uX(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),CC.apply(this,arguments)}function pX(n,e,t){return AC.apply(this,arguments)}function AC(){return(AC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Qp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Jd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&th(r.remoteStore,i.targetId),ah(r,i.targetId)}).catch(ec))):(ah(r,i.targetId),yield Jd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function gX(n,e){return DC.apply(this,arguments)}function DC(){return(DC=(0,ae.Z)(function*(n,e){const t=be(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),th(t.remoteStore,r.targetId))})).apply(this,arguments)}function SC(){return(SC=(0,ae.Z)(function*(n,e,t){const r=GC(n);try{const i=yield function(o,a){const c=be(o),u=Mn.now(),f=a.reduce((I,T)=>I.add(T.key),ht());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=Bi(),R=ht();return c.os.getEntries(I,f).next(P=>{T=P,T.forEach((H,V)=>{V.isValidDocument()||(R=R.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(P=>{m=P;const H=[];for(const V of a){const G=zQ(V,m.get(V.key).overlayedDocument);null!=G&&H.push(new sa(V.key,G,MF(G.value.mapValue),Pn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,H,a)}).next(P=>{y=P;const H=P.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,P.batchId,H)})}).then(()=>({batchId:y.batchId,changes:QF(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new gn(it)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield aa(r,i.changes),yield nh(r.remoteStore)}catch(i){const s=ih(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function UV(n,e){return RC.apply(this,arguments)}function RC(){return(RC=(0,ae.Z)(function*(n,e){const t=be(n);try{const r=yield function kY(n,e){const t=be(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,P,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(br.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),P=I,H=f,(0===(R=y).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=Bi(),u=ht();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(gV(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(ze.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?$e(o.wa):i.removedDocuments.size>0&&($e(o.wa),o.wa=!1))}),yield aa(t,r,e)}catch(r){yield ec(r)}})).apply(this,arguments)}function BV(n,e,t){const r=be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=be(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&yC(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _X(n,e,t){return MC.apply(this,arguments)}function MC(){return(MC=(0,ae.Z)(function*(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new gn(Se.comparator);o=o.insert(s,Tn.newNoDocument(s,ze.min()));const a=ht().add(s),c=new rg(ze.min(),new Map,new gn(it),o,a);yield UV(r,c),r.va=r.va.remove(s),r.Fa.delete(e),LC(r)}else yield Jd(r.localStore,e,!1).then(()=>ah(r,e,t)).catch(ec)})).apply(this,arguments)}function yX(n,e){return PC.apply(this,arguments)}function PC(){return(PC=(0,ae.Z)(function*(n,e){const t=be(n),r=e.batch.batchId;try{const i=yield function NY(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=Y.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(c,T)).next(R=>{const P=u.docVersions.get(T);$e(null!==P),R.version.compareTo(P)<0&&(m.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ht();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);OC(t,r,null),kC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield aa(t,i)}catch(i){yield ec(i)}})).apply(this,arguments)}function vX(n,e,t){return xC.apply(this,arguments)}function xC(){return(xC=(0,ae.Z)(function*(n,e,t){const r=be(n);try{const i=yield function(o,a){const c=be(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>($e(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);OC(r,e,t),kC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield aa(r,i)}catch(i){yield ec(i)}})).apply(this,arguments)}function NC(){return(NC=(0,ae.Z)(function*(n,e){const t=be(n);hc(t.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=be(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=ih(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function kC(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function OC(n,e,t){const r=be(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function ah(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||jV(n,r)})}function jV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(th(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),LC(n))}function FC(n,e,t){for(const r of t)r instanceof OV?(n.Ma.addReference(r.key,e),IX(n,r)):r instanceof FV?(ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||jV(n,r.key)):Oe()}function IX(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(ve("SyncEngine","New document in limbo: "+t),n.Ca.add(r),LC(n))}function LC(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Se(xt.fromString(e)),r=n.Na.next();n.Fa.set(r,new lX(t)),n.va=n.va.insert(t,r),Bv(n.remoteStore,new oa(ni(Ud(t.path)),r,"TargetPurposeLimboResolution",es.oe))}}function aa(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=V0.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ae.Z)(function*(u,f){const m=be(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,I=>Y.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>Y.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!tc(y))throw y;ve("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),P=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,P)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),VC.apply(this,arguments)}function wX(n,e){return UC.apply(this,arguments)}function UC(){return(UC=(0,ae.Z)(function*(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield fV(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new me(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield aa(t,r.us)}var s})).apply(this,arguments)}function TX(n,e){const t=be(n),r=t.Fa.get(e);if(r&&r.wa)return ht().add(r.key);{let i=ht();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function bX(n,e){return BC.apply(this,arguments)}function BC(){return(BC=(0,ae.Z)(function*(n,e){const t=be(n),r=yield Ov(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&FC(t,e.targetId,i.fa),i})).apply(this,arguments)}function CX(n,e){return jC.apply(this,arguments)}function jC(){return(jC=(0,ae.Z)(function*(n,e){const t=be(n);return _V(t.localStore,e).then(r=>aa(t,r))})).apply(this,arguments)}function AX(n,e,t,r){return $C.apply(this,arguments)}function $C(){return($C=(0,ae.Z)(function*(n,e,t,r){const i=be(n),s=yield function(a,c){const u=be(a),f=be(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield nh(i.remoteStore):"acknowledged"===t||"rejected"===t?(OC(i,e,r||null),kC(i,e),c=e,be(be(i.localStore).mutationQueue).Mn(c)):Oe(),yield aa(i,s)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function HC(){return(HC=(0,ae.Z)(function*(n,e){const t=be(n);if($v(t),GC(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $V(t,r.toArray());t.La=!0,yield dC(t.remoteStore,!0);for(const s of i)Bv(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ah(t,o),Jd(t.localStore,o,!0))),th(t.remoteStore,o)}),yield i,yield $V(t,r),function(o){const a=be(o);a.Fa.forEach((c,u)=>{th(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new gn(Se.comparator)}(t),t.La=!1,yield dC(t.remoteStore,!1)}})).apply(this,arguments)}function $V(n,e,t){return zC.apply(this,arguments)}function zC(){return(zC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield Xd(r.localStore,ni(c[0]));for(const u of c){const f=r.ba.get(u),m=yield bX(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield mV(r.localStore,o);a=yield Xd(r.localStore,u),yield bC(r,HV(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function HV(n){return $F(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SX(n){return t=be(n).localStore,be(be(t).persistence).Bi();var t}function RX(n,e,t,r){return qC.apply(this,arguments)}function qC(){return(qC=(0,ae.Z)(function*(n,e,t,r){const i=be(n);if(i.La)return void ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield _V(i.localStore,GF(s[0])),a=rg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,br.EMPTY_BYTE_STRING);yield aa(i,o,a);break}case"rejected":yield Jd(i.localStore,e,!0),ah(i,e,r);break;default:Oe()}})).apply(this,arguments)}function MX(n,e,t){return WC.apply(this,arguments)}function WC(){return(WC=(0,ae.Z)(function*(n,e,t){const r=$v(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ve("SyncEngine","Adding an already active target "+i);continue}const s=yield mV(r.localStore,i),o=yield Xd(r.localStore,s);yield bC(r,HV(s),o.targetId,!1,o.resumeToken),Bv(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Jd(r.localStore,i,!1).then(()=>{th(r.remoteStore,i),ah(r,i)}).catch(ec))}})).apply(this,arguments)}function $v(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_X.bind(null,e),e.Sa.h_=sX.bind(null,e.eventManager),e.Sa.ka=oX.bind(null,e.eventManager),e}function GC(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vX.bind(null,e),e}class mg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=pg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hV(this.persistence,new dV,e.initialUser,this.serializer)}createPersistence(e){return new k0(xv.Hr,this.serializer)}createSharedClientState(e){return new IV}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KC extends mg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield GC(r.Qa.syncEngine),yield nh(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hV(this.persistence,new dV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new nQ(t,this.persistence);return new tQ(e.asyncQueue,r)}createPersistence(e){const t=L0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new F0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TV(),Uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new IV}}class zV extends KC{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof W0&&(r.sharedClientState.syncEngine={Zs:AX.bind(null,i),Xs:RX.bind(null,i),eo:MX.bind(null,i),Bi:SX.bind(null,i),Ys:CX.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ae.Z)(function*(o){yield function DX(n,e){return HC.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=TV();if(!W0.D(t))throw new me(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=L0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new W0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ch{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>BV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wX.bind(null,r.syncEngine),yield dC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iX}createDatastore(e){const t=pg(e.databaseInfo.databaseId),r=new jY(e.databaseInfo);return new zY(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>BV(this.syncEngine,t,0),a=wV.D()?new wV:new VY,new WY(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new dX(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;yield(r=(0,ae.Z)(function*(s){const o=be(s);ve("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield eh(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function qV(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Hv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NX{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ae.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new aX(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ae.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.Z)(function*(o,a){const c=be(o),u={documents:a.map(I=>sg(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,xt.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const T=function JQ(n,e){return"found"in e?function(r,i){$e(!!i.found);const s=wo(r,i.found.name),o=rr(i.found.updateTime),a=i.found.createTime?rr(i.found.createTime):ze.min(),c=new $r({mapValue:{fields:i.found.fields}});return Tn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){$e(!!i.missing),$e(!!i.readTime);const s=wo(r,i.missing),o=rr(i.readTime);return Tn.newNoDocument(s,o)}(n,e):Oe()}(c.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());$e(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Se.fromPath(i);e.mutations.push(new m0(s,e.precondition(s)))}),yield(r=(0,ae.Z)(function*(s,o){const a=be(s),c={writes:o.map(u=>og(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,xt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Oe();t=ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ze.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ze.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OX{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new K0(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ae.Z)(function*(){const t=new kX(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!$p(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hL(t)}return!1}}class FX{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=rF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.Z)(function*(a){ve("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ve("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ih(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zv(n,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(s){r.isEqual(s)||(yield fV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ZC.apply(this,arguments)}function QC(n,e){return YC.apply(this,arguments)}function YC(){return(YC=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XC(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>MV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>MV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function WV(n){return"FirebaseError"===n.name?n.code===ne.FAILED_PRECONDITION||n.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XC(n){return JC.apply(this,arguments)}function JC(){return(JC=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!WV(t))throw t;Vi("Error using user provided cache. Falling back to memory cache: "+t),yield zv(n,new mg)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield zv(n,new mg);return n._offlineComponents})).apply(this,arguments)}function qv(n){return eA.apply(this,arguments)}function eA(){return(eA=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield QC(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield QC(n,new ch))),n._onlineComponents})).apply(this,arguments)}function GV(n){return XC(n).then(e=>e.persistence)}function uh(n){return XC(n).then(e=>e.localStore)}function KV(n){return qv(n).then(e=>e.remoteStore)}function tA(n){return qv(n).then(e=>e.syncEngine)}function lh(n){return nA.apply(this,arguments)}function nA(){return(nA=(0,ae.Z)(function*(n){const e=yield qv(n),t=e.eventManager;return t.onListen=hX.bind(null,e.syncEngine),t.onUnlisten=pX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gX.bind(null,e.syncEngine),t})).apply(this,arguments)}function QV(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new Hv({next:y=>{o.enqueueAndForget(()=>mC(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new EC(Ud(a.path),f,{includeMetadataChanges:!0,ra:!0});return pC(s,m)}(yield lh(n),n.asyncQueue,e,t,r)})),r.promise}function YV(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new Hv({next:y=>{o.enqueueAndForget(()=>mC(s,m)),y.fromCache&&"server"===c.source?u.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new EC(a,f,{includeMetadataChanges:!0,ra:!0});return pC(s,m)}(yield lh(n),n.asyncQueue,e,t,r)})),r.promise}function XV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const JV=new Map;function rA(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e2(n,e,t,r){if(!0===e&&!0===r)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t2(n){if(!Se.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n2(n){if(Se.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Oe()}function It(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wv(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function r2(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class i2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=XV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _g{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new H7;switch(r.type){case"firstParty":return new G7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=JV.get(t);r&&(ve("ComponentProvider","Removing Datastore"),JV.delete(t),r.terminate())}(this),Promise.resolve()}}function s2(n,e,t,r={}){var i;const s=(n=It(n,_g))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Sr.MOCK_USER;else{a=(0,lt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Sr(u)}n._authCredentials=new z7(new tF(a,c))}}class Hr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hr(this.firestore,e,this._query)}}class bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class To extends Hr{constructor(e,t,r){super(e,t,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Se(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function o2(n,e,...t){if(n=(0,lt.m9)(n),rA("collection","path",e),n instanceof _g){const r=xt.fromString(e,...t);return n2(r),new To(n,null,r)}{if(!(n instanceof bn||n instanceof To))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return n2(r),new To(n.firestore,null,r)}}function Gv(n,e,...t){if(n=(0,lt.m9)(n),1===arguments.length&&(e=rF.newId()),rA("doc","path",e),n instanceof _g){const r=xt.fromString(e,...t);return t2(r),new bn(n,null,new Se(r))}{if(!(n instanceof bn||n instanceof To))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return t2(r),new bn(n.firestore,n instanceof To?n.converter:null,new Se(r))}}function a2(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),(n instanceof bn||n instanceof To)&&(e instanceof bn||e instanceof To)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iA(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),n instanceof Hr&&e instanceof Hr&&n.firestore===e.firestore&&Qp(n._query,e._query)&&n.converter===e.converter}class ZX{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new K0(this,"async_queue_retry"),this.hu=()=>{const t=Uv();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=Uv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Uv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Tr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ae.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!tc(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,nr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=fC.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Oe()}verifyOperationInProgress(){}du(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function sA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class QX{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rn extends _g{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ZX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||c2(this),this._firestoreClient.terminate()}}function XX(n,e){const t="object"==typeof n?n:(0,qn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,qn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,lt.P0)("firestore");s&&s2(i,...s)}return i}function xn(n){return n._firestoreClient||c2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function c2(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TQ(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,XV(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new FX(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function u2(n,e,t){const r=new Tr;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield zv(n,t),yield QC(n,e),r.resolve()}catch(i){const s=i;if(!WV(s))throw s;Vi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function l2(n){if(n._initialized||n._terminated)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bo(br.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bo(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ca{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Su{constructor(e){this._methodName=e}}class Kv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}const cJ=/^__.*__$/;class uJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new zd(e,this.data,t,this.fieldTransforms)}}class d2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function h2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Zv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Xv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(h2(this.fu)&&cJ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class lJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pg(e)}Fu(e,t,r,i=!1){return new Zv({fu:e,methodName:t,vu:r,path:wn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(n){const e=n._freezeSettings(),t=pg(n._databaseId);return new lJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qv(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);hA("Data must be an object, but it was:",o,r);const a=g2(r,o);let c,u;if(s.merge)c=new Ui(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Eg(e,m,t);if(!o.contains(y))throw new me(ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_2(f,y)||f.push(y)}c=new Ui(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new uJ(new $r(a),c,u)}class vg extends Su{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vg}}function f2(n,e,t){return new Zv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oA extends Su{_toFieldTransform(e){return new eg(e.path,new $d)}isEqual(e){return e instanceof oA}}class aA extends Su{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=f2(this,e,!0),r=this.Mu.map(s=>Mu(s,t)),i=new vu(r);return new eg(e.path,i)}isEqual(e){return e instanceof aA&&(0,lt.vZ)(this.Mu,e.Mu)}}class cA extends Su{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=f2(this,e,!0),r=this.Mu.map(s=>Mu(s,t)),i=new Eu(r);return new eg(e.path,i)}isEqual(e){return e instanceof cA&&(0,lt.vZ)(this.Mu,e.Mu)}}class uA extends Su{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Hd(e.serializer,eL(e.serializer,this.xu));return new eg(e.path,t)}isEqual(e){return e instanceof uA&&this.xu===e.xu}}function lA(n,e,t,r){const i=n.Fu(1,e,t);hA("Data must be an object, but it was:",i,r);const s=[],o=$r.empty();nc(r,(c,u)=>{const f=Yv(e,c,t);u=(0,lt.m9)(u);const m=i.Su(f);if(u instanceof vg)s.push(f);else{const y=Mu(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Ui(s);return new d2(o,a,i.fieldTransforms)}function dA(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Eg(e,r,t)],c=[i];if(s.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Eg(e,s[y])),c.push(s[y+1]);const u=[],f=$r.empty();for(let y=a.length-1;y>=0;--y)if(!_2(u,a[y])){const I=a[y];let T=c[y];T=(0,lt.m9)(T);const R=o.Su(I);if(T instanceof vg)u.push(I);else{const P=Mu(T,R);null!=P&&(u.push(I),f.set(I,P))}}const m=new Ui(u);return new d2(f,m,o.fieldTransforms)}function p2(n,e,t,r=!1){return Mu(t,n.Fu(r?4:3,e))}function Mu(n,e){if(m2(n=(0,lt.m9)(n)))return hA("Unsupported field value:",e,n),g2(n,e);if(n instanceof Su)return function(r,i){if(!h2(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Mu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,lt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return eL(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Mn.fromDate(r);return{timestampValue:Wd(i.serializer,s)}}if(r instanceof Mn){const s=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,s)}}if(r instanceof Kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bo)return{bytesValue:wL(i.serializer,r._byteString)};if(r instanceof bn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Wv(r)}`)}(n,e)}function g2(n,e){const t={};return IF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(n,(r,i)=>{const s=Mu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function m2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof Kv||n instanceof bo||n instanceof bn||n instanceof Su)}function hA(n,e,t){if(!m2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Wv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Eg(n,e,t){if((e=(0,lt.m9)(e))instanceof ca)return e._internalPath;if("string"==typeof e)return Yv(n,e);throw Xv("Field path arguments must be of type string or ",n,!1,void 0,t)}const dJ=new RegExp("[~\\*/\\[\\]]");function Yv(n,e,t){if(e.search(dJ)>=0)throw Xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ca(...e.split("."))._internalPath}catch{throw Xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new me(ne.INVALID_ARGUMENT,a+n+c)}function _2(n,e){return n.some(t=>t.isEqual(e))}class Ig{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hJ extends Ig{data(){return super.data()}}function Jv(n,e){return"string"==typeof e?Yv(n,e):e instanceof ca?e._internalPath:e._delegate._internalPath}function y2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fA{}class wg extends fA{}function pc(n,e,...t){let r=[];e instanceof fA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof dh).length,a=s.filter(c=>c instanceof Tg).length;if(o>1||o>0&&a>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Tg extends wg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Tg(e,t,r)}_apply(e){const t=this._parse(e);return w2(e._query,t),new Hr(e.firestore,e.converter,p0(e._query,t))}_parse(e){const t=Ru(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){I2(m,f);const I=[];for(const T of m)I.push(E2(c,s,T));y={arrayValue:{values:I}}}else y=E2(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||I2(m,f),y=p2(a,"where",m,"in"===f||"not-in"===f);return Nt.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class dh extends fA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)w2(o,c),o=p0(o,c)}(e._query,t),new Hr(e.firestore,e.converter,p0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pA extends wg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kp(s,o)}(e._query,this._field,this._direction);return new Hr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ra(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class eE extends wg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new eE(e,t,r)}_apply(e){return new Hr(e.firestore,e.converter,yv(e._query,this._limit,this._limitType))}}class tE extends wg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tE(e,t,r)}_apply(e){const t=v2(e,this.type,this._docOrFields,this._inclusive);return new Hr(e.firestore,e.converter,(s=t,new ra((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class nE extends wg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nE(e,t,r)}_apply(e){const t=v2(e,this.type,this._docOrFields,this._inclusive);return new Hr(e.firestore,e.converter,(s=t,new ra((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function v2(n,e,t,r){if(t[0]=(0,lt.m9)(t[0]),t[0]instanceof Ig)return function(s,o,a,c,u){if(!c)throw new me(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Bd(s))if(m.field.isKeyField())f.push(_u(o,c.key));else{const y=c.data.field(m.field);if(dv(y))throw new me(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new me(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new ac(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ru(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new me(ne.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const R=f[T];if(y[T].field.isKeyField()){if("string"!=typeof R)throw new me(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!f0(o)&&-1!==R.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const P=o.path.child(xt.fromString(R));if(!Se.isDocumentKey(P))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const H=new Se(P);I.push(_u(a,H))}else{const P=p2(c,u,R);I.push(P)}}return new ac(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function E2(n,e,t){if("string"==typeof(t=(0,lt.m9)(t))){if(""===t)throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f0(e)&&-1!==t.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xt.fromString(t));if(!Se.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _u(n,new Se(r))}if(t instanceof bn)return _u(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wv(t)}.`)}function I2(n,e){if(!Array.isArray(n)||0===n.length)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w2(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new me(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gA{convertValue(e,t="none"){switch(sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Kv(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zp(e));default:return null}}convertTimestamp(e){const t=ta(e);return new Mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);$e(kL(r));const i=new rc(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||nr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function rE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IJ extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends Ig{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bg extends ua{data(e={}){return super.data(e)}}class gc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bg(this._firestore,this._userDataWriter,r.key,r,new Pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new bg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new bg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:TJ(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function b2(n,e){return n instanceof ua&&e instanceof ua?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gc&&e instanceof gc&&n._firestore===e._firestore&&iA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class mc extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}function C2(n,e,t){n=It(n,bn);const r=It(n.firestore,rn),i=rE(n.converter,e,t);return hh(r,[Qv(Ru(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pn.none())])}function A2(n,e,t,...r){n=It(n,bn);const i=It(n.firestore,rn),s=Ru(i);let o;return o="string"==typeof(e=(0,lt.m9)(e))||e instanceof ca?dA(s,"updateDoc",n._key,e,t,r):lA(s,"updateDoc",n._key,e),hh(i,[o.toMutation(n._key,Pn.exists(!0))])}function D2(n,...e){var t,r,i;n=(0,lt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||sA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(sA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof bn)u=It(n.firestore,rn),f=Ud(n._key.path),c={next:m=>{e[o]&&e[o](mA(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=It(n,Hr);u=It(m.firestore,rn),f=m._query;const y=new mc(u);c={next:I=>{e[o]&&e[o](new gc(u,y,m,I))},error:e[o+1],complete:e[o+2]},y2(n._query)}return function(y,I,T,R){const P=new Hv(R),H=new EC(I,P,T);return y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return pC(yield lh(y),H)})),()=>{P.$a(),y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return mC(yield lh(y),H)}))}}(xn(u),f,a,c)}function hh(n,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function mX(n,e,t){return SC.apply(this,arguments)}(yield tA(r),i,s)})),s.promise}(xn(n),e)}function mA(n,e,t){const r=t.docs.get(e._key),i=new mc(n);return new ua(n,i,e._key,r,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}const jJ={maxAttempts:5};class S2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,r){this._verifyNotCommitted();const i=_c(e,this._firestore),s=rE(i.converter,t,r),o=Qv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Pn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=_c(e,this._firestore);let o;return o="string"==typeof(t=(0,lt.m9)(t))||t instanceof ca?dA(this._dataReader,"WriteBatch.update",s._key,t,r,i):lA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_c(e,this._firestore);return this._mutations=this._mutations.concat(new qd(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _c(n,e){if((n=(0,lt.m9)(n)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $J extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ru(t)}get(t){const r=_c(t,this._firestore),i=new IJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Oe();const o=s[0];if(o.isFoundDocument())return new Ig(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ig(this._firestore,i,r._key,null,r.converter);throw Oe()})}set(t,r,i){const s=_c(t,this._firestore),o=rE(s.converter,r,i),a=Qv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=_c(t,this._firestore);let a;return a="string"==typeof(r=(0,lt.m9)(r))||r instanceof ca?dA(this._dataReader,"Transaction.update",o._key,r,i,s):lA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=_c(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_c(e,this._firestore),r=new mc(this._firestore);return super.get(e).then(i=>new ua(this._firestore,r,t._key,i._document,new Pu(!1,!1),t.converter))}}function yA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function x2(){if(typeof Uint8Array>"u")throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function N2(){if(!function IQ(){return typeof atob<"u"}())throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Pd=qn.SDK_VERSION,(0,qn._registerComponent)(new sv.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rn(new q7(r.getProvider("auth-internal")),new K7(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,qn.registerVersion)(eF,"4.6.3",e),(0,qn.registerVersion)(eF,"4.6.3","esm2017")}();class Cg{constructor(e){this._delegate=e}static fromBase64String(e){return N2(),new Cg(bo.fromBase64String(e))}static fromUint8Array(e){return x2(),new Cg(bo.fromUint8Array(e))}toBase64(){return N2(),this._delegate.toBase64()}toUint8Array(){return x2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vA(n){return function XJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class JJ{enableIndexedDbPersistence(e,t){return function JX(n,e){l2(n=It(n,rn));const t=xn(n);if(t._uninitializedComponentsProvider)throw new me(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new ch;return u2(t,i,new KC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eJ(n){l2(n=It(n,rn));const e=xn(n);if(e._uninitializedComponentsProvider)throw new me(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new ch;return u2(e,r,new zV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tJ(n){if(n._initialized&&!n._terminated)throw new me(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(i){if(!yo.D())return Promise.resolve();const s=i+"main";yield yo.delete(s)}),function r(i){return t.apply(this,arguments)})(L0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class k2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){s2(this._delegate,e,t,r)}enableNetwork(){return function rJ(n){return function LX(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield GV(n),t=yield KV(n);return e.setNetworkEnabled(!0),function(i){const s=be(i);return s.M_.delete(0),gg(s)}(t)}))}(xn(n=It(n,rn)))}(this._delegate)}disableNetwork(){return function iJ(n){return function VX(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield GV(n),t=yield KV(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(s){const o=be(s);o.M_.add(0),yield eh(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(xn(n=It(n,rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,e2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nJ(n){return function(t){const r=new Tr;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function EX(n,e){return NC.apply(this,arguments)}(yield tA(t),r)})),r.promise}(xn(n=It(n,rn)))}(this._delegate)}onSnapshotsInSync(e){return function xJ(n,e){return function $X(n,e){const t=new Hv(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield lh(n),s=t,be(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield lh(n),s=t,void be(i).z_.delete(s);var i,s}))}}(xn(n=It(n,rn)),sA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fh(this,o2(this._delegate,e))}catch(t){throw Ii(t,"collection()","Firestore.collection()")}}doc(e){try{return new Is(this,Gv(this._delegate,e))}catch(t){throw Ii(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wi(this,function KX(n,e){if(n=It(n,_g),rA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hr(n,null,(r=e,new ra(xt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ii(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HJ(n,e,t){n=It(n,rn);const r=Object.assign(Object.assign({},jJ),t);return function(s){if(s.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Tr;return s.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const u=yield function ZV(n){return qv(n).then(e=>e.datastore)}(s);new OX(s.asyncQueue,u,a,o,c).Xa()})),c.promise}(xn(n),i=>e(new $J(n,i)),r)}(this._delegate,t=>e(new O2(this,t)))}batch(){return xn(this._delegate),new F2(new S2(this._delegate,e=>hh(this._delegate,e)))}loadBundle(e){return function sJ(n,e){const t=xn(n=It(n,rn)),r=new QX;return function HX(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?pL().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return qV(f,m);if(f instanceof ArrayBuffer)return qV(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new NX(f,a);var f}(t,pg(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function PX(n,e,t){const r=be(n);var i;(i=(0,ae.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(T,R){const P=be(T),H=rr(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=u).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(kV(u));const f=new cX(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield aa(o,y.ca,void 0),yield function(T,R){const P=be(T);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.$r.saveBundleMetadata(H,R))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return Vi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oJ(n,e){return function zX(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,i){const s=be(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield uh(n),e)}))}(xn(n=It(n,rn)),e).then(t=>t?new Hr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new wi(this,t):null)}}class sE extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cg(new bo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Is.forKey(t,this.firestore,null)}}class O2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sE(e)}get(e){const t=Nu(e);return this._delegate.get(t).then(r=>new Ag(this._firestore,new ua(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Nu(e);return r?(yA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Nu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Nu(e);return this._delegate.delete(t),this}}class F2{constructor(e){this._delegate=e}set(e,t,r){const i=Nu(e);return r?(yA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Nu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Nu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new xu(e,new sE(e),t),i.set(t,s)),s}}xu.INSTANCES=new WeakMap;class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Is(t,new bn(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new Is(t,new bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fh(this.firestore,o2(this._delegate,e))}catch(t){throw Ii(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,lt.m9)(e))instanceof bn&&a2(this._delegate,e)}set(e,t){t=yA("DocumentReference.set",t);try{return t?C2(this._delegate,e,t):C2(this._delegate,e)}catch(r){throw Ii(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?A2(this._delegate,e):A2(this._delegate,e,t,...r)}catch(i){throw Ii(i,"updateDoc()","DocumentReference.update()")}}delete(){return function MJ(n){return hh(It(n.firestore,rn),[new qd(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=L2(e),r=V2(e,i=>new Ag(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return D2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function CJ(n){n=It(n,bn);const e=It(n.firestore,rn),t=xn(e),r=new mc(e);return function UX(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=be(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new me(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=ih(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield uh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ua(e,r,n._key,i,new Pu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function AJ(n){n=It(n,bn);const e=It(n.firestore,rn);return QV(xn(e),n._key,{source:"server"}).then(t=>mA(e,n,t))}(this._delegate):function bJ(n){n=It(n,bn);const e=It(n.firestore,rn);return QV(xn(e),n._key).then(t=>mA(e,n,t))}(this._delegate),t.then(r=>new Ag(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?xu.getInstance(this.firestore,e):null))}}function Ii(n,e,t){return n.message=n.message.replace(e,t),n}function L2(n){for(const e of n)if("object"==typeof e&&!vA(e))return e;return{}}function V2(n,e){var t,r;let i;return i=vA(n[0])?n[0]:vA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ag{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Is(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return b2(this._delegate,e._delegate)}}class Dg extends Ag{data(e){const t=this._delegate.data(e);return this._delegate._converter||function $7(n,e){n||Oe()}(void 0!==t),t}}class wi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sE(e)}where(e,t,r){try{return new wi(this.firestore,pc(this._delegate,function fJ(n,e,t){const r=e,i=Jv("where",n);return Tg._create(i,r,t)}(e,t,r)))}catch(i){throw Ii(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wi(this.firestore,pc(this._delegate,function pJ(n,e="asc"){const t=e,r=Jv("orderBy",n);return pA._create(r,t)}(e,t)))}catch(r){throw Ii(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wi(this.firestore,pc(this._delegate,function gJ(n){return r2("limit",n),eE._create("limit",n,"F")}(e)))}catch(t){throw Ii(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wi(this.firestore,pc(this._delegate,function mJ(n){return r2("limitToLast",n),eE._create("limitToLast",n,"L")}(e)))}catch(t){throw Ii(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wi(this.firestore,pc(this._delegate,function _J(...n){return tE._create("startAt",n,!0)}(...e)))}catch(t){throw Ii(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wi(this.firestore,pc(this._delegate,function yJ(...n){return tE._create("startAfter",n,!1)}(...e)))}catch(t){throw Ii(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wi(this.firestore,pc(this._delegate,function vJ(...n){return nE._create("endBefore",n,!1)}(...e)))}catch(t){throw Ii(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wi(this.firestore,pc(this._delegate,function EJ(...n){return nE._create("endAt",n,!0)}(...e)))}catch(t){throw Ii(t,"endAt()","Query.endAt()")}}isEqual(e){return iA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SJ(n){n=It(n,Hr);const e=It(n.firestore,rn),t=xn(e),r=new mc(e);return function BX(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield Ov(s,o,!0),u=new LV(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=ih(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield uh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gc(e,r,n,i))}(this._delegate):"server"===e?.source?function RJ(n){n=It(n,Hr);const e=It(n.firestore,rn),t=xn(e),r=new mc(e);return YV(t,n._query,{source:"server"}).then(i=>new gc(e,r,n,i))}(this._delegate):function DJ(n){n=It(n,Hr);const e=It(n.firestore,rn),t=xn(e),r=new mc(e);return y2(n._query),YV(t,n._query).then(i=>new gc(e,r,n,i))}(this._delegate),t.then(r=>new EA(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=L2(e),r=V2(e,i=>new EA(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return D2(this._delegate,t,r)}withConverter(e){return new wi(this.firestore,this._delegate.withConverter(e?xu.getInstance(this.firestore,e):null))}}class tee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class EA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tee(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Dg(this._firestore,r))})}isEqual(e){return b2(this._delegate,e._delegate)}}class fh extends wi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Is(this.firestore,e):null}doc(e){try{return new Is(this.firestore,void 0===e?Gv(this._delegate):Gv(this._delegate,e))}catch(t){throw Ii(t,"doc()","CollectionReference.doc()")}}add(e){return function PJ(n,e){const t=It(n.firestore,rn),r=Gv(n),i=rE(n.converter,e);return hh(t,[Qv(Ru(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Is(this.firestore,t))}isEqual(e){return a2(this._delegate,e._delegate)}withConverter(e){return new fh(this.firestore,this._delegate.withConverter(e?xu.getInstance(this.firestore,e):null))}}function Nu(n){return It(n,bn)}class IA{constructor(...e){this._delegate=new ca(...e)}static documentId(){return new IA(wn.keyField().canonicalString())}isEqual(e){return(e=(0,lt.m9)(e))instanceof ca&&this._delegate._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qJ(){return new oA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ku(e)}static delete(){const e=function zJ(){return new vg("deleteField")}();return e._methodName="FieldValue.delete",new ku(e)}static arrayUnion(...e){const t=function WJ(...n){return new aA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ku(t)}static arrayRemove(...e){const t=function GJ(...n){return new cA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ku(t)}static increment(e){const t=function KJ(n){return new uA("increment",n)}(e);return t._methodName="FieldValue.increment",new ku(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nee={Firestore:k2,GeoPoint:Kv,Timestamp:Mn,Blob:Cg,Transaction:O2,WriteBatch:F2,DocumentReference:Is,DocumentSnapshot:Ag,Query:wi,QueryDocumentSnapshot:Dg,QuerySnapshot:EA,CollectionReference:fh,FieldPath:IA,FieldValue:ku,setLogLevel:function eee(n){!function j7(n){Ja.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function U2(n,e){return function see(n,e=mb){return new at(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wA(n,e){return U2(n,e).pipe(Me(t=>({payload:t,type:"query"})))}!function iee(n){(function ree(n,e){n.INTERNAL.registerComponent(new sv.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nee)))})(n,(e,t)=>new k2(e,t,new JJ)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(mo.Z);class B2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=W2(r,t);return new H2(i,s,this.afs)}snapshotChanges(){return function oee(n,e){return U2(n,e).pipe(mp(void 0),Xb(),Me(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return this.snapshotChanges().pipe(Me(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(Ei)}}function oE(n,e){return wA(n,e).pipe(mp(void 0),Xb(),Me(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function j2(n,e,t){return oE(n,t).pipe(Uy((r,i)=>function aee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Xe(),Me(r=>r.map(i=>({type:i.type,payload:i}))))}function TA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class H2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(mp(void 0),Xb(),Xi(([r,i])=>i.length>0||!r),Me(([,r])=>r),Ei)}auditTrail(e){return this.stateChanges(e).pipe(Uy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$2(e);return j2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ei)}get(e){return b(this.query.get(e)).pipe(Ei)}add(e){return this.ref.add(e)}doc(e){return new B2(this.ref.doc(e),this.afs)}}class uee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oE(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),Ei):oE(this.query,this.afs.schedulers.outsideAngular).pipe(Ei)}auditTrail(e){return this.stateChanges(e).pipe(Uy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$2(e);return j2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe(Me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ei)}get(e){return b(this.query.get(e)).pipe(Ei)}}const z2=new ye("angularfire2.enableFirestorePersistence"),q2=new ye("angularfire2.firestore.persistenceSettings"),lee=new ye("angularfire2.firestore.settings"),dee=new ye("angularfire2.firestore.use-emulator");function W2(n,e=(t=>t)){return{query:e(n),ref:n}}let G2=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,T,R,P,H,V){this.schedulers=c;const G=iv(t,a,r),te=f;m&&H1(G,a,y,T,R,P,I,H),[this.firestore,this.persistenceEnabled$]=Yb(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const Ie=a.runOutsideAngular(()=>G.firestore());if(s&&Ie.settings(s),te&&Ie.useEmulator(...te),i&&!wy(o)){const Re=()=>{try{return b(Ie.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),O(!1)}};return[Ie,a.runOutsideAngular(Re)]}return[Ie,O(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=W2(i,r),a=this.schedulers.ngZone.run(()=>s);return new H2(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new uee(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new B2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(le(Lp),le(Vp,8),le(z2,8),le(lee,8),le(ms),le(St),le(Rd),le(q2,8),le(dee,8),le(z1,8),le(L1,8),le(V1,8),le(U1,8),le(B1,8),le(j1,8),le($1,8),le(Fp,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),hee=(()=>{class n{constructor(){mo.Z.registerVersion("angularfire",Xa.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:z2,useValue:!0},{provide:q2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[G2]})}return n})(),fee=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(le(G2))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pee(n,e){1&n&&(Et(0,"div",11)(1,"span",12),jt(2,"Sponsor al Comunitatii"),gt(),Et(3,"span",13),jt(4,"\u2605"),gt()())}function gee(n,e){if(1&n&&(Et(0,"div",5)(1,"div",6)(2,"div",7),jt(3),gt(),Et(4,"div",8),jt(5),gt(),Et(6,"div",8),jt(7),gt(),Et(8,"div",8)(9,"a",9),jt(10),gt()(),Et(11,"div",8)(12,"a",9),jt(13),gt()(),Et(14,"div",8),jt(15),gt()(),$w(16,pee,5,0,"div",10),gt()),2&n){const t=e.$implicit;Zi(3),$a(t.Name),Zi(2),$a(t.Service_Type),Zi(2),$a(t.Phone_Number),Zi(2),K_("href","mailto:",t.Email,"",w_),Zi(1),$a(t.Email),Zi(2),Ww("href",t.Website,w_),Zi(1),$a(t.Website),Zi(2),$a(t.Description),Zi(1),ad("ngIf",t.Community_Sponsor)}}const mee=[{path:"",component:y7},{path:"services",component:(()=>{class n{constructor(t){this.servicesService=t,this.services=[]}ngOnInit(){this.servicesService.getServices().subscribe(t=>{this.services=t})}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(fee))};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-services"]],decls:9,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(Et(0,"div",0)(1,"div",1)(2,"h1"),jt(3,"Lista de Servicii"),gt()(),Et(4,"div",2)(5,"h2"),jt(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),gt()()(),Et(7,"div",3),$w(8,gee,17,9,"div",4),gt()),2&r&&(Zi(8),ad("ngForOf",i.services))},dependencies:[rk,sk],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:20px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"rules",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-rules"]],decls:2,vars:0,template:function(r,i){1&r&&(Et(0,"p"),jt(1,"rules works!"),gt())}})}return n})()},{path:"events",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-events"]],decls:2,vars:0,template:function(r,i){1&r&&(Et(0,"p"),jt(1,"events works!"),gt())}})}return n})()},{path:"jobs",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-jobs"]],decls:2,vars:0,template:function(r,i){1&r&&(Et(0,"p"),jt(1,"jobs works!"),gt())}})}return n})()}];let _ee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({imports:[R1.forRoot(mee),R1]})}return n})();const yee=function(n,e){return{"fa-bars":n,"fa-times":e}},vee=function(n){return{active:n}};let Eee=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/jobs",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(Et(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),jt(4,"Romani in Seattle"),gt()(),Et(5,"div",4),Wo("click",function(){return i.toggleMenu()}),cd(6,"i",5),gt(),Et(7,"ul",6)(8,"li",7)(9,"a",8),Wo("click",function(){return i.closeMenu()}),jt(10,"Home"),gt()(),Et(11,"li",7)(12,"a",9),Wo("click",function(){return i.closeMenu()}),jt(13,"Services"),gt()(),Et(14,"li",7)(15,"a",10),Wo("click",function(){return i.closeMenu()}),jt(16,"Evenimente"),gt()(),Et(17,"li",7)(18,"a",11),Wo("click",function(){return i.closeMenu()}),jt(19,"Locuri de Munca"),gt()(),Et(20,"li",7)(21,"a",12),Wo("click",function(){return i.closeMenu()}),jt(22,"Rules"),gt()()()()()),2&r&&(Zi(6),ad("ngClass",vx(2,yee,!i.menuOpen,i.menuOpen)),Zi(1),ad("ngClass",yx(5,vee,i.menuOpen)))},dependencies:[tk,nv],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{text-decoration:none;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to right,blue,yellow,red) 1}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),Iee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(Et(0,"footer",0)(1,"div",1),jt(2," \xa9 2024 Romani in Seattle. All rights reserved. "),gt()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),wee=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Kr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(Et(0,"div",0),cd(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),gt())},dependencies:[Bb,Eee,Iee],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class K2{}class Tee{}const la="*";function Z2(n,e=null){return{type:2,steps:n,options:e}}function Q2(n){return{type:6,styles:n,offset:null}}class Sg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Y2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function X2(n){return new x(3e3,!1)}function yc(n){switch(n.length){case 0:return new Sg;case 1:return n[0];default:return new Y2(n)}}function J2(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let T=I,R=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),R){case"!":R=t.get(I);break;case la:R=r.get(I);break;default:R=n.normalizeStyleValue(I,T,R,i)}m.set(T,R)}),f||s.push(m),a=m,o=u}),i.length)throw function Wee(n){return new x(3502,!1)}();return s}function CA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&AA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&AA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&AA(t,"destroy",n)))}}function AA(n,e,t){const s=DA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function DA(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ts(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function eU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const ite=(()=>typeof document>"u"?null:document.documentElement)();function SA(n){const e=n.parentNode||n.host||null;return e===ite?null:e}let Ou=null,tU=!1;function nU(n,e){for(;e;){if(e===n)return!0;e=SA(e)}return!1}function rU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let iU=(()=>{class n{validateStyleProperty(t){return function ote(n){Ou||(Ou=function ate(){return typeof document<"u"?document.body:null}()||{},tU=!!Ou.style&&"WebkitAppearance"in Ou.style);let e=!0;return Ou.style&&!function ste(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ou.style,!e&&tU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ou.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return nU(t,r)}getParentElement(t){return SA(t)}query(t,r,i){return rU(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Sg(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})(),RA=(()=>{class n{static#e=this.NOOP=new iU}return n})();const cte=1e3,MA="ng-enter",aE="ng-leave",cE="ng-trigger",uE=".ng-trigger",oU="ng-animating",PA=".ng-animating";function da(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xA(parseFloat(e[1]),e[2])}function xA(n,e){return"s"===e?n*cte:n}function lE(n,e,t){return n.hasOwnProperty("duration")?n:function lte(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(X2()),{duration:0,delay:0,easing:""};i=xA(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=xA(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function bee(){return new x(3100,!1)}()),a=!0),s<0&&(e.push(function Cee(){return new x(3101,!1)}()),a=!0),a&&e.splice(c,0,X2())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Rg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function aU(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function vc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Co(n,e,t){e.forEach((r,i)=>{const s=kA(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Fu(n,e){e.forEach((t,r)=>{const i=kA(r);n.style[i]=""})}function Mg(n){return Array.isArray(n)?1==n.length?n[0]:Z2(n):n}const NA=new RegExp("{{\\s*(.+?)\\s*}}","g");function uU(n){let e=[];if("string"==typeof n){let t;for(;t=NA.exec(n);)e.push(t[1]);NA.lastIndex=0}return e}function Pg(n,e,t){const r=n.toString(),i=r.replace(NA,(s,o)=>{let a=e[o];return null==a&&(t.push(function Dee(n){return new x(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function dE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const fte=/-+([a-z0-9])/g;function kA(n){return n.replace(fte,(...e)=>e[1].toUpperCase())}function ns(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function See(n){return new x(3004,!1)}()}}function lU(n,e){return window.getComputedStyle(n)[e]}const hE="*";function mte(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function _te(n,e,t){if(":"==n[0]){const c=function yte(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function $ee(n){return new x(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function jee(n){return new x(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(dU(i,o));"<"==s[0]&&!(i==hE&&o==hE)&&e.push(dU(o,i))}(r,t,e)):t.push(n),t}const fE=new Set(["true","1"]),pE=new Set(["false","0"]);function dU(n,e){const t=fE.has(n)||pE.has(n),r=fE.has(e)||pE.has(e);return(i,s)=>{let o=n==hE||n==i,a=e==hE||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?fE.has(n):pE.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?fE.has(e):pE.has(e)),o&&a}}const vte=new RegExp("s*:selfs*,?","g");function OA(n,e,t,r){return new Ete(n).build(e,t,r)}class Ete{constructor(e){this._driver=e}build(e,t,r){const i=new Tte(t);return this._resetContextStyleTimingState(i),ns(this,Mg(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Mee(){return new x(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function Pee(){return new x(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{uU(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(dE(s.values()),t.errors.push(function xee(n,e){return new x(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ns(this,Mg(e.animation),t);return{type:1,matchers:mte(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Lu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ns(this,r,t)),options:Lu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ns(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Lu(e.options)}}visitAnimate(e,t){const r=function Cte(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return FA(lE(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=FA(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=lE(t,e);return FA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Q2({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=Q2(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===la?r.push(a):t.errors.push(new x(3002,!1)):r.push(aU(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function kee(n,e,t,r,i){return new x(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function hte(n,e,t){const r=e.params||{},i=uU(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Aee(n){return new x(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Oee(){return new x(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(H=>{const V=this._makeStyleAst(H,t);let G=null!=V.offset?V.offset:function bte(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),te=0;return null!=G&&(s++,te=V.offset=G),c=c||te<0||te>1,a=a||te<u,u=te,o.push(te),V});c&&t.errors.push(function Fee(){return new x(3012,!1)}()),a&&t.errors.push(function Lee(){return new x(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Vee(){return new x(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,R=t.currentAnimateTimings,P=R.duration;return f.forEach((H,V)=>{const G=y>0?V==I?1:y*V:o[V],te=G*P;t.currentTime=T+R.delay+te,R.duration=te,this._validateStyleAst(H,t),H.offset=G,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:ns(this,Mg(e.animation),t),options:Lu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Ite(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(vte,"")),n=n.replace(/@\*/g,uE).replace(/@\w+/g,t=>uE+"-"+t.slice(1)).replace(/:animating/g,PA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ts(t.collectedStyles,t.currentQuerySelector,new Map);const a=ns(this,Mg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Lu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Uee(){return new x(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:lE(e.timings,t.errors,!0);return{type:12,animation:ns(this,Mg(e.animation),t),timings:r,options:null}}}class Tte{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Lu(n){return n?(n=Rg(n)).params&&(n.params=function wte(n){return n?Rg(n):null}(n.params)):n={},n}function FA(n,e,t){return{duration:n,delay:e,easing:t}}function LA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class gE{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ste=new RegExp(":enter","g"),Mte=new RegExp(":leave","g");function VA(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new Pte).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class Pte{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new gE;const m=new UA(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?da(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),ns(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let R=I.length-1;R>=0;R--){const P=I[R];if(P.element===t){T=P;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,c)}return I.length?I.map(T=>T.buildKeyframes()):[LA(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:da(Pg(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?da(r.duration):null,a=null!=r.delay?da(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ns(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mE);const o=da(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ns(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?da(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ns(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return lE(t.params?Pg(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?da(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mE);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),ns(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;ns(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const mE={};class UA{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new _E(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=da(r.duration)),null!=r.delay&&(i.delay=da(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Pg(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new UA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=mE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new xte(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Ste,"."+this._enterClassName)).replace(Mte,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function Bee(n){return new x(3014,!1)}()),a}}class _E{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new _E(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||la),this._currentKeyframe.set(t,la);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Nte(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,la)}else vc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=Pg(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??la),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=vc(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===la&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?dE(e.values()):[],o=t.size?dE(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return LA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class xte extends _E{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=vc(e[0]);c.set("offset",0),s.push(c);const u=vc(e[0]);u.set("offset",pU(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=vc(e[m]);const I=y.get("offset");y.set("offset",pU((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return LA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function pU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class BA{}const kte=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ote extends BA{normalizePropertyName(e,t){return kA(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(kte.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Ree(n,e){return new x(3005,!1)}())}return o+s}}function gU(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const jA={};class mU{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Fte(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||jA,T=this.buildStyles(r,a&&a.params||jA,m),R=c&&c.params||jA,P=this.buildStyles(i,R,m),H=new Set,V=new Map,G=new Map,te="void"===i,Ie={params:Lte(R,y),delay:this.ast.options?.delay},Re=f?[]:VA(e,t,this.ast.animation,s,o,T,P,Ie,u,m);let j=0;if(Re.forEach(L=>{j=Math.max(L.duration+L.delay,j)}),m.length)return gU(t,this._triggerName,r,i,te,T,P,[],[],V,G,j,m);Re.forEach(L=>{const z=L.element,q=ts(V,z,new Set);L.preStyleProps.forEach(U=>q.add(U));const X=ts(G,z,new Set);L.postStyleProps.forEach(U=>X.add(U)),z!==t&&H.add(z)});const N=dE(H.values());return gU(t,this._triggerName,r,i,te,T,P,Re,N,V,G,j)}}function Lte(n,e){const t=Rg(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Vte{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Rg(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Pg(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class Bte{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Vte(i.style,i.options&&i.options.params||{},r))}),_U(this.states,"true","1"),_U(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new mU(e,i,this.states))}),this.fallbackTransition=function jte(n,e,t){return new mU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function _U(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const $te=new gE;class Hte{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=OA(this._driver,t,r,[]);if(r.length)throw function Gee(n){return new x(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=J2(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=VA(this._driver,t,s,MA,aE,new Map,new Map,r,$te,i),o.forEach(f=>{const m=ts(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Kee(){return new x(3300,!1)}()),o=[]),i.length)throw function Zee(n){return new x(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,la))})});const u=yc(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Qee(n){return new x(3301,!1)}();return t}listen(e,t,r,i){const s=DA(t,"","","");return CA(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const yU="ng-animate-queued",$A="ng-animate-disabled",Kte=[],vU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zte={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$s="__ng_removed";class HA{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Jte(n){return n??null}(r?e.value:e),r){const s=Rg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const xg="void",zA=new HA(xg);class Qte{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ws(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Yee(n,e){return new x(3302,!1)}();if(null==r||0==r.length)throw function Xee(n){return new x(3303,!1)}();if(!function ene(n){return"start"==n||"done"==n}(r))throw function Jee(n,e){return new x(3400,!1)}();const s=ts(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=ts(this._engine.statesByElement,e,new Map);return a.has(t)||(ws(e,cE),ws(e,cE+"-"+t),a.set(t,zA)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ete(n){return new x(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new qA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ws(e,cE),ws(e,cE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new HA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=zA),u.value!==xg&&c.value===u.value){if(!function rne(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const R=[],P=s.matchStyles(c.value,c.params,R),H=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Fu(e,P),Co(e,H)})}return}const y=ts(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:T}),T||(ws(e,yU),o.onStart(()=>{ph(e,yU)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const P=this._engine.playersByElement.get(e);if(P){let H=P.indexOf(o);H>=0&&P.splice(H,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,uE,!0);r.forEach(i=>{if(i[$s])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,xg,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&yc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||zA,f=new HA(xg),m=new qA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[$s];(!s||s===vU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ws(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=DA(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,CA(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Yte{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Qte(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(yE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!yE(t))return;const s=t[$s];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ws(e,$A)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ph(e,$A))}removeNode(e,t,r){if(yE(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[$s]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return yE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,uE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,PA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[$s];if(t&&t.setForRemoval){if(e[$s]=vU,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains($A)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ws(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?yc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function tte(n){return new x(3402,!1)}()}_flushAnimations(e,t){const r=new gE,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(Ve=>{f.add(Ve);const qe=this.driver.query(Ve,".ng-animate-queued",!0);for(let We=0;We<qe.length;We++)f.add(qe[We])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=wU(y,this.collectedEnterElements),T=new Map;let R=0;I.forEach((Ve,qe)=>{const We=MA+R++;T.set(qe,We),Ve.forEach(Rt=>ws(Rt,We))});const P=[],H=new Set,V=new Set;for(let Ve=0;Ve<this.collectedLeaveElements.length;Ve++){const qe=this.collectedLeaveElements[Ve],We=qe[$s];We&&We.setForRemoval&&(P.push(qe),H.add(qe),We.hasAnimation?this.driver.query(qe,".ng-star-inserted",!0).forEach(Rt=>H.add(Rt)):V.add(qe))}const G=new Map,te=wU(y,Array.from(H));te.forEach((Ve,qe)=>{const We=aE+R++;G.set(qe,We),Ve.forEach(Rt=>ws(Rt,We))}),e.push(()=>{I.forEach((Ve,qe)=>{const We=T.get(qe);Ve.forEach(Rt=>ph(Rt,We))}),te.forEach((Ve,qe)=>{const We=G.get(qe);Ve.forEach(Rt=>ph(Rt,We))}),P.forEach(Ve=>{this.processLeaveNode(Ve)})});const Ie=[],Re=[];for(let Ve=this._namespaceList.length-1;Ve>=0;Ve--)this._namespaceList[Ve].drainQueuedTransitions(t).forEach(We=>{const Rt=We.player,ir=We.element;if(Ie.push(Rt),this.collectedEnterElements.length){const Kn=ir[$s];if(Kn&&Kn.setForMove){if(Kn.previousTriggersValues&&Kn.previousTriggersValues.has(We.triggerName)){const pa=Kn.previousTriggersValues.get(We.triggerName),ji=this.statesByElement.get(We.element);if(ji&&ji.has(We.triggerName)){const ga=ji.get(We.triggerName);ga.value=pa,ji.set(We.triggerName,ga)}}return void Rt.destroy()}}const bs=!m||!this.driver.containsElement(m,ir),Gn=G.get(ir),Cn=T.get(ir),An=this._buildInstruction(We,r,Cn,Gn,bs);if(An.errors&&An.errors.length)return void Re.push(An);if(bs)return Rt.onStart(()=>Fu(ir,An.fromStyles)),Rt.onDestroy(()=>Co(ir,An.toStyles)),void i.push(Rt);if(We.isFallbackTransition)return Rt.onStart(()=>Fu(ir,An.fromStyles)),Rt.onDestroy(()=>Co(ir,An.toStyles)),void i.push(Rt);const Ic=[];An.timelines.forEach(Kn=>{Kn.stretchStartingKeyframe=!0,this.disabledNodes.has(Kn.element)||Ic.push(Kn)}),An.timelines=Ic,r.append(ir,An.timelines),o.push({instruction:An,player:Rt,element:ir}),An.queriedElements.forEach(Kn=>ts(a,Kn,[]).push(Rt)),An.preStyleProps.forEach((Kn,pa)=>{if(Kn.size){let ji=c.get(pa);ji||c.set(pa,ji=new Set),Kn.forEach((ga,wc)=>ji.add(wc))}}),An.postStyleProps.forEach((Kn,pa)=>{let ji=u.get(pa);ji||u.set(pa,ji=new Set),Kn.forEach((ga,wc)=>ji.add(wc))})});if(Re.length){const Ve=[];Re.forEach(qe=>{Ve.push(function nte(n,e){return new x(3505,!1)}())}),Ie.forEach(qe=>qe.destroy()),this.reportError(Ve)}const j=new Map,N=new Map;o.forEach(Ve=>{const qe=Ve.element;r.has(qe)&&(N.set(qe,qe),this._beforeAnimationBuild(Ve.player.namespaceId,Ve.instruction,j))}),i.forEach(Ve=>{const qe=Ve.element;this._getPreviousPlayers(qe,!1,Ve.namespaceId,Ve.triggerName,null).forEach(Rt=>{ts(j,qe,[]).push(Rt),Rt.destroy()})});const L=P.filter(Ve=>bU(Ve,c,u)),z=new Map;IU(z,this.driver,V,u,la).forEach(Ve=>{bU(Ve,c,u)&&L.push(Ve)});const X=new Map;I.forEach((Ve,qe)=>{IU(X,this.driver,new Set(Ve),c,"!")}),L.forEach(Ve=>{const qe=z.get(Ve),We=X.get(Ve);z.set(Ve,new Map([...qe?.entries()??[],...We?.entries()??[]]))});const U=[],Ts=[],Ec={};o.forEach(Ve=>{const{element:qe,player:We,instruction:Rt}=Ve;if(r.has(qe)){if(f.has(qe))return We.onDestroy(()=>Co(qe,Rt.toStyles)),We.disabled=!0,We.overrideTotalTime(Rt.totalTime),void i.push(We);let ir=Ec;if(N.size>1){let Gn=qe;const Cn=[];for(;Gn=Gn.parentNode;){const An=N.get(Gn);if(An){ir=An;break}Cn.push(Gn)}Cn.forEach(An=>N.set(An,ir))}const bs=this._buildAnimation(We.namespaceId,Rt,j,s,X,z);if(We.setRealPlayer(bs),ir===Ec)U.push(We);else{const Gn=this.playersByElement.get(ir);Gn&&Gn.length&&(We.parentPlayer=yc(Gn)),i.push(We)}}else Fu(qe,Rt.fromStyles),We.onDestroy(()=>Co(qe,Rt.toStyles)),Ts.push(We),f.has(qe)&&i.push(We)}),Ts.forEach(Ve=>{const qe=s.get(Ve.element);if(qe&&qe.length){const We=yc(qe);Ve.setRealPlayer(We)}}),i.forEach(Ve=>{Ve.parentPlayer?Ve.syncPlayerEvents(Ve.parentPlayer):Ve.destroy()});for(let Ve=0;Ve<P.length;Ve++){const qe=P[Ve],We=qe[$s];if(ph(qe,aE),We&&We.hasAnimation)continue;let Rt=[];if(a.size){let bs=a.get(qe);bs&&bs.length&&Rt.push(...bs);let Gn=this.driver.query(qe,PA,!0);for(let Cn=0;Cn<Gn.length;Cn++){let An=a.get(Gn[Cn]);An&&An.length&&Rt.push(...An)}}const ir=Rt.filter(bs=>!bs.destroyed);ir.length?tne(this,qe,ir):this.processLeaveNode(qe)}return P.length=0,U.forEach(Ve=>{this.players.push(Ve),Ve.onDone(()=>{Ve.destroy();const qe=this.players.indexOf(Ve);this.players.splice(qe,1)}),Ve.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==xg;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=ts(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}Fu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const R=T.element;f.add(R);const P=R[$s];if(P&&P.removedBeforeQueried)return new Sg(T.duration,T.delay);const H=R!==c,V=function nne(n){const e=[];return TU(n,e),e}((r.get(R)||Kte).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===R),G=s.get(R),te=o.get(R),Ie=J2(this._normalizer,T.keyframes,G,te),Re=this._buildPlayer(T,Ie,V);if(T.subTimeline&&i&&m.add(R),H){const j=new qA(e,a,R);j.setRealPlayer(Re),u.push(j)}return Re});u.forEach(T=>{ts(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function Xte(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>ws(T,oU));const I=yc(y);return I.onDestroy(()=>{f.forEach(T=>ph(T,oU)),Co(c,t.toStyles)}),m.forEach(T=>{ts(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Sg(e.duration,e.delay)}}class qA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Sg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>CA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ts(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yE(n){return n&&1===n.nodeType}function EU(n,e){const t=n.style.display;return n.style.display=e??"none",t}function IU(n,e,t,r,i){const s=[];t.forEach(c=>s.push(EU(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[$s]=Zte,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>EU(c,s[a++])),o}function wU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function ws(n,e){n.classList?.add(e)}function ph(n,e){n.classList?.remove(e)}function tne(n,e,t){yc(t).onDone(()=>n.processLeaveNode(e))}function TU(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Y2?TU(r.players,e):e.push(r)}}function bU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class vE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Yte(e,t,r),this._timelineEngine=new Hte(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=OA(this._driver,s,c,[]);if(c.length)throw function qee(n,e){return new x(3404,!1)}();a=function Ute(n,e,t){return new Bte(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=eU(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=eU(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let sne=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Co(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Co(this._element,this._initialStyles),this._endStyles&&(Co(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fu(this._element,this._endStyles),this._endStyles=null),Co(this._element,this._initialStyles),this._state=3)}}return n})();function WA(n){let e=null;return n.forEach((t,r)=>{(function one(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class CU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:lU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ane{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return nU(e,t)}getParentElement(e){return SA(e)}query(e,t,r){return rU(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof CU);(function pte(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,R)=>u.set(R,T))});let m=function dte(n){return n.length?n[0]instanceof Map?n:n.map(e=>aU(e)):[]}(t).map(I=>vc(I));m=function gte(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,lU(n,a)))}}return e}(e,m,u);const y=function ine(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=WA(e[0]),e.length>1&&(r=WA(e[e.length-1]))):e instanceof Map&&(t=WA(e)),t||r?new sne(n,t,r):null}(e,m);return new CU(e,m,c,y)}}let cne=(()=>{class n extends K2{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:$n.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Z2(t):t;return AU(this._renderer,null,r,"register",[i]),new une(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hf),le(Hn))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class une extends Tee{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new lne(this._id,e,t||{},this._renderer)}}class lne{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return AU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AU(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const DU="@.disabled";let dne=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new SU("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new hne(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hf),le(vE),le(St))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class SU{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==DU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class hne extends SU{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==DU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function fne(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function pne(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const RU=[{provide:K2,useClass:cne},{provide:BA,useFactory:function mne(){return new Ote}},{provide:vE,useClass:(()=>{class n extends vE{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(le(Hn),le(RA),le(BA),le(tu))};static#t=this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})()},{provide:Hf,useFactory:function _ne(n,e,t){return new dne(n,e,t)},deps:[cb,vE,St]}],GA=[{provide:RA,useFactory:()=>new ane},{provide:ER,useValue:"BrowserAnimations"},...RU],MU=[{provide:RA,useClass:iU},{provide:ER,useValue:"NoopAnimations"},...RU];let yne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?MU:GA}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n});static#n=this.\u0275inj=ln({providers:GA,imports:[Dk]})}return n})();const PU_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class gh{constructor(e){return e}}class KA{constructor(){return(0,qn.getApps)()}}const ZA=new ye("angularfire2._apps"),Ene={provide:gh,useFactory:function vne(n){return n&&1===n.length?n[0]:new gh((0,qn.getApp)())},deps:[[new dr,ZA]]},Ine={provide:KA,deps:[[new dr,ZA]]};function wne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gh(r)}}let Tne=(()=>{class n{constructor(t){(0,qn.registerVersion)("angularfire",Xa.full,"core"),(0,qn.registerVersion)("angularfire",Xa.full,"app"),(0,qn.registerVersion)("angular",gw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(ms))};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[Ene,Ine]})}return n})();function bne(n,...e){return{ngModule:Tne,providers:[{provide:ZA,useFactory:wne(n),multi:!0,deps:[St,Jr,Rd,...e]}]}}const Cne=Qb(qn.initializeApp,!0);Ge(455);class YA{constructor(){return rv("auth")}}class JA{constructor(e){return e}}const NU="firestore",eD=new ye("angularfire2.firestore-instances");function Pne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new JA(r)}}const xne={provide:class Rne{constructor(){return rv(NU)}},deps:[[new dr,eD]]},Nne={provide:JA,useFactory:function Mne(n,e){const t=Zb(NU,n,e);return t&&new JA(t)},deps:[[new dr,eD],gh]};let kne=(()=>{class n{constructor(){(0,qn.registerVersion)("angularfire",Xa.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[Nne,xne]})}return n})();function One(n,...e){return{ngModule:kne,providers:[{provide:eD,useFactory:Pne(n),multi:!0,deps:[St,Jr,Rd,KA,[new dr,YA],[new dr,Fp],...e]}]}}const Fne=Qb(XX,!0),kU="firebasestorage.googleapis.com",OU="storageBucket";class jn extends lt.ZR{constructor(e,t,r=0){super(tD(e),`Firebase Storage: ${t} (${tD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Nn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Nn||{});function tD(n){return"storage/"+n}function nD(){return new jn(Nn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function FU(){return new jn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LU(){return new jn(Nn.CANCELED,"User canceled the upload/download.")}function VU(){return new jn(Nn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mh(n){return new jn(Nn.INVALID_ARGUMENT,n)}function UU(){return new jn(Nn.APP_DELETED,"The Firebase app was deleted.")}function BU(n){return new jn(Nn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ng(n,e){return new jn(Nn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function kg(n){throw new jn(Nn.INTERNAL_ERROR,"Internal error: "+n)}class si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=si.makeFromUrl(e,t)}catch{return new si(e,"")}if(""===r.path)return r;throw function Wne(n){return new jn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(te){te.path_=decodeURIComponent(te.path)}const m=t.replace(/[.]/g,"\\."),G=[{regex:a,indices:{bucket:1,path:3},postModify:function s(te){"/"===te.path.charAt(te.path.length-1)&&(te.path_=te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===kU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let te=0;te<G.length;te++){const Ie=G[te],Re=Ie.regex.exec(e);if(Re){let N=Re[Ie.indices.path];N||(N=""),r=new si(Re[Ie.indices.bucket],N),Ie.postModify(r);break}}if(null==r)throw function qne(n){return new jn(Nn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Yne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function IE(n){return"string"==typeof n||n instanceof String}function jU(n){return rD()&&n instanceof Blob}function rD(){return typeof Blob<"u"}function iD(n,e,t,r){if(r<e)throw mh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mh(`Invalid value for '${n}'. Expected ${t} or less.`)}function ha(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $U(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var _h=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(_h||{});function HU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class rre{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function ere(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=nD();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?UU():LU():FU())};this.canceled_?t(0,new wE(!1,null,!0)):this.backoffId_=function Xne(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...P){u||(u=!0,e.apply(null,P))}function m(P){i=setTimeout(()=>{i=null,n(I,c())},P)}function y(){s&&clearTimeout(s)}function I(P,...H){if(u)return void y();if(P)return y(),void f.call(null,P,...H);if(c()||o)return y(),void f.call(null,P,...H);let G;r<64&&(r*=2),1===a?(a=2,G=0):G=1e3*(r+Math.random()),m(G)}let T=!1;function R(P){T||(T=!0,y(),!u&&(null!==i?(P||(a=2),clearTimeout(i),m(0)):P||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new wE(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===_h.NO_ERROR,c=s.getStatus();if(!a||HU(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===_h.ABORT;return void r(!1,new wE(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new wE(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Jne(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class wE{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function lre(...n){const e=function ure(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(rD())return new Blob(n);throw new jn(Nn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sD{constructor(e,t){this.data=e,this.contentType=t||null}}function oD(n,e){switch(n){case rs.RAW:return new sD(zU(e));case rs.BASE64:case rs.BASE64URL:return new sD(qU(n,e));case rs.DATA_URL:return new sD(function pre(n){const e=new WU(n);return e.base64?qU(rs.BASE64,e.rest):function fre(n){let e;try{e=decodeURIComponent(n)}catch{throw Ng(rs.DATA_URL,"Malformed data URL.")}return zU(e)}(e.rest)}(e),function gre(n){return new WU(n).contentType}(e))}throw nD()}function zU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function qU(n,e){switch(n){case rs.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Ng(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Ng(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function hre(n){if(typeof atob>"u")throw function Qne(n){return new jn(Nn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ng(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class WU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ng(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function mre(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ao{constructor(e,t){let r=0,i="";jU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(jU(this.data_)){const i=function dre(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ao(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ao(r,!0)}}static getBlob(...e){if(rD()){const t=e.map(r=>r instanceof Ao?r.data_:r);return new Ao(lre.apply(null,t))}{const t=e.map(o=>IE(o)?oD(rs.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ao(i,!0)}}uploadData(){return this.data_}}function aD(n){let e;try{e=JSON.parse(n)}catch{return null}return function nre(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function GU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function vre(n,e){return e}class Ti{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||vre}}let TE=null;function Og(){if(TE)return TE;const n=[];n.push(new Ti("bucket")),n.push(new Ti("generation")),n.push(new Ti("metageneration")),n.push(new Ti("name","fullPath",!0));const t=new Ti("name");t.xform=function e(s,o){return function Ere(n){return!IE(n)||n.length<2?n:GU(n)}(o)},n.push(t);const i=new Ti("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Ti("timeCreated")),n.push(new Ti("updated")),n.push(new Ti("md5Hash",null,!0)),n.push(new Ti("cacheControl",null,!0)),n.push(new Ti("contentDisposition",null,!0)),n.push(new Ti("contentEncoding",null,!0)),n.push(new Ti("contentLanguage",null,!0)),n.push(new Ti("contentType",null,!0)),n.push(new Ti("metadata","customMetadata",!0)),TE=n,TE}function KU(n,e,t){const r=aD(e);return null===r?null:function wre(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Ire(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new si(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function cD(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const ZU="prefixes",QU="items";class Do{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function So(n){if(!n)throw nD()}function bE(n,e){return function t(r,i){const s=KU(n,i,e);return So(null!==s),s}}function yh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Hne(){return new jn(Nn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function $ne(){return new jn(Nn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function jne(n){return new jn(Nn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function zne(n){return new jn(Nn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Fg(n){const e=yh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Bne(n){return new jn(Nn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function YU(n,e,t){const i=ha(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Do(i,"GET",bE(n,t),o);return a.errorHandler=Fg(e),a}function Sre(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=ha(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Do(a,"GET",function Are(n,e){return function t(r,i){const s=function Cre(n,e,t){const r=aD(t);return null===r?null:function bre(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ZU])for(const i of t[ZU]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new si(e,s));r.prefixes.push(o)}if(t[QU])for(const i of t[QU]){const s=n._makeStorageReference(new si(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return So(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=yh(e),f}function JU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function xre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class CE{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function uD(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{So(!1)}return So(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Fre={STATE_CHANGED:"state_changed"},bi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lD(n){switch(n){case"running":case"pausing":case"canceling":return bi.RUNNING;case"paused":return bi.PAUSED;case"success":return bi.SUCCESS;case"canceled":return bi.CANCELED;default:return bi.ERROR}}class Lre{constructor(e,t,r){if(function tre(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function vh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let nB=null;class Vre{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_h.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_h.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_h.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw kg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ure extends Vre{initXhr(){this.xhr_.responseType="text"}}function Hs(){return nB?nB():new Ure}class rB{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Og(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(HU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=FU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Nre(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=JU(e,r,i),a={name:o.fullPath},c=ha(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=cD(o,t),T=new Do(c,"POST",function I(R){let P;uD(R);try{P=R.getResponseHeader("X-Goog-Upload-URL")}catch{So(!1)}return So(IE(P)),P},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=yh(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function kre(n,e,t,r){const c=new Do(t,"POST",function s(u){const f=uD(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{So(!1)}m||So(!1);const y=Number(m);return So(!isNaN(y)),new CE(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=yh(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Hs,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new CE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Ore(n,e,t,r,i,s,o,a){const c=new CE(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function Kne(){return new jn(Nn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(m,m+f);if(null===R)throw VU();const G=new Do(t,"POST",function P(te,Ie){const Re=uD(te,["active","final"]),j=c.current+f,N=r.size();let L;return L="final"===Re?bE(e,s)(te,Ie):null,new CE(j,N,"final"===Re,L)},e.maxUploadRetryTime);return G.headers=T,G.body=R.uploadData(),G.progressCallback=a||null,G.errorHandler=yh(n),G}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Hs,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=YU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Hs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function eB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let G="";for(let te=0;te<2;te++)G+=Math.random().toString().slice(2);return G}();o["Content-Type"]="multipart/related; boundary="+c;const u=JU(e,r,i),f=cD(u,t),I=Ao.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw VU();const T={name:u.fullPath},R=ha(s,n.host,n._protocol),H=n.maxUploadRetryTime,V=new Do(R,"POST",bE(n,t),H);return V.urlParams=T,V.headers=o,V.body=I.uploadData(),V.errorHandler=yh(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=LU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Lre(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lD(this._state)){case bi.SUCCESS:vh(this._resolve.bind(null,this.snapshot))();break;case bi.CANCELED:case bi.ERROR:vh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lD(this._state)){case bi.RUNNING:case bi.PAUSED:e.next&&vh(e.next.bind(e,this.snapshot))();break;case bi.SUCCESS:e.complete&&vh(e.complete.bind(e))();break;default:e.error&&vh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Vu{constructor(e,t){this._service=e,this._location=t instanceof si?t:si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vu(e,t)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GU(this._location.path)}get storage(){return this._service}get parent(){const e=function _re(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new si(this._location.bucket,e);return new Vu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw BU(e)}}function sB(n,e,t){return dD.apply(this,arguments)}function dD(){return(dD=(0,ae.Z)(function*(n,e,t){const i=yield oB(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield sB(n,e,i.nextPageToken))})).apply(this,arguments)}function oB(n,e){null!=e&&"number"==typeof e.maxResults&&iD("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Sre(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Hs)}function Yre(n){n._throwIfRoot("getDownloadURL");const e=function Rre(n,e,t){const i=ha(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Do(i,"GET",function Dre(n,e){return function t(r,i){const s=KU(n,i,e);return So(null!==s),function Tre(n,e,t,r){const i=aD(e);if(null===i||!IE(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return ha("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+$U({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Fg(e),a}(n.storage,n._location,Og());return n.storage.makeRequestWithTokens(e,Hs).then(t=>{if(null===t)throw function Zne(){return new jn(Nn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function aB(n,e){const t=function yre(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new si(n._location.bucket,t);return new Vu(n.storage,r)}function cB(n,e){if(n instanceof hD){const t=n;if(null==t._bucket)throw function Gne(){return new jn(Nn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OU+"' property when initializing the app?")}();const r=new Vu(t,t._bucket);return null!=e?cB(r,e):r}return void 0!==e?aB(n,e):n}function tie(n,e){if(e&&function Jre(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hD)return function eie(n,e){return new Vu(n,e)}(n,e);throw mh("To use ref(service, url), the first argument must be a Storage instance.")}return cB(n,e)}function uB(n,e){const t=e?.[OU];return null==t?null:si.makeFromBucketSpec(t,n)}class hD{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=kU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?si.makeFromBucketSpec(i,this._host):uB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?si.makeFromBucketSpec(this._url,e):uB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vu(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Yne(UU());{const o=function cre(n,e,t,r,i,s,o=!0){const a=$U(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function ore(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function ire(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function sre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function are(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new rre(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const lB="@firebase/storage",hB="storage";function fB(n,e){return tie(n=(0,lt.m9)(n),e)}function die(n=(0,qn.getApp)(),e){n=(0,lt.m9)(n);const r=(0,qn._getProvider)(n,hB).getImmediate({identifier:e}),i=(0,lt.P0)("storage");return i&&pB(r,...i),r}function pB(n,e,t,r={}){!function nie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,lt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function hie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hD(t,r,i,e,qn.SDK_VERSION)}!function fie(){(0,qn._registerComponent)(new sv.wA(hB,hie,"PUBLIC").setMultipleInstances(!0)),(0,qn.registerVersion)(lB,"0.12.5",""),(0,qn.registerVersion)(lB,"0.12.5","esm2017")}();class AE{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class gB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new AE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new AE(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new AE(o,this,this._ref)):{next:t.next?o=>t.next(new AE(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class mB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new fa(e,this._service))}get items(){return this._delegate.items.map(e=>new fa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class fa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function lie(n,e){return aB(n,e)}(this._delegate,e);return new fa(t,this.storage)}get root(){return new fa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new fa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new gB(function rie(n,e,t){return function Wre(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rB(n,new Ao(e),t)}(n=(0,lt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=rs.RAW,r){this._throwIfRoot("putString");const i=oD(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new gB(new rB(this._delegate,new Ao(i.data,!0),s),this)}listAll(){return function aie(n){return function Kre(n){const e={prefixes:[],items:[]};return sB(n,e).then(()=>e)}(n=(0,lt.m9)(n))}(this._delegate).then(e=>new mB(e,this.storage))}list(e){return function oie(n,e){return oB(n=(0,lt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new mB(t,this.storage))}getMetadata(){return function iie(n){return function Zre(n){n._throwIfRoot("getMetadata");const e=YU(n.storage,n._location,Og());return n.storage.makeRequestWithTokens(e,Hs)}(n=(0,lt.m9)(n))}(this._delegate)}updateMetadata(e){return function sie(n,e){return function Qre(n,e){n._throwIfRoot("updateMetadata");const t=function Mre(n,e,t,r){const s=ha(e.fullServerUrl(),n.host,n._protocol),a=cD(t,r),u=n.maxOperationRetryTime,f=new Do(s,"PATCH",bE(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Fg(e),f}(n.storage,n._location,e,Og());return n.storage.makeRequestWithTokens(t,Hs)}(n=(0,lt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function cie(n){return Yre(n=(0,lt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function uie(n){return function Xre(n){n._throwIfRoot("deleteObject");const e=function Pre(n,e){const r=ha(e.fullServerUrl(),n.host,n._protocol),a=new Do(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Fg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Hs)}(n=(0,lt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw BU(e)}}class _B{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yB(e))throw mh("ref() expected a child path but got a URL, use refFromURL instead.");return new fa(fB(this._delegate,e),this)}refFromURL(e){if(!yB(e))throw mh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{si.makeFromUrl(e,this._delegate.host)}catch{throw mh("refFromUrl() expected a valid full URL but got an invalid one.")}return new fa(fB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){pB(this._delegate,e,t,r)}}function yB(n){return/^[A-Za-z]+:\/\//.test(n)}function _ie(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new _B(t,r)}function vB(n){const e=function vie(n){return new at(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(Hk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Me(t=>t.bytesTransferred/t.totalBytes*100))}}function DE(n){return{getDownloadURL:()=>O(void 0).pipe(x1,Fe(()=>n.getDownloadURL()),Ei),getMetadata:()=>O(void 0).pipe(x1,Fe(()=>n.getMetadata()),Ei),delete:()=>b(n.delete()),child:e=>DE(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>vB(n.put(e,t)),putString:(e,t,r)=>vB(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function yie(n){const e={TaskState:bi,TaskEvent:Fre,StringFormat:rs,Storage:_B,Reference:fa};n.INTERNAL.registerComponent(new sv.wA("storage-compat",_ie,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(mo.Z);const Eie=new ye("angularfire2.storageBucket"),Iie=new ye("angularfire2.storage.maxUploadRetryTime"),wie=new ye("angularfire2.storage.maxOperationRetryTime"),Tie=new ye("angularfire2.storage.use-emulator");let bie=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=iv(t,o,r);this.storage=Yb(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return DE(this.storage.ref(t))}refFromURL(t){return DE(this.storage.refFromURL(t))}upload(t,r,i){return DE(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(le(Lp),le(Vp,8),le(Eie,8),le(ms),le(St),le(Rd),le(Iie,8),le(wie,8),le(Tie,8),le(Fp,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Cie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=ln({})}return n})(),Aie=(()=>{class n{constructor(){mo.Z.registerVersion("angularfire",Xa.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[bie],imports:[Cie]})}return n})();class fD{constructor(e){return e}}const EB="storage",pD=new ye("angularfire2.storage-instances");function Rie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fD(r)}}const Mie={provide:class Die{constructor(){return rv(EB)}},deps:[[new dr,pD]]},Pie={provide:fD,useFactory:function Sie(n,e){const t=Zb(EB,n,e);return t&&new fD(t)},deps:[[new dr,pD],gh]};let xie=(()=>{class n{constructor(){(0,qn.registerVersion)("angularfire",Xa.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=ln({providers:[Pie,Mie]})}return n})();function Nie(n,...e){return{ngModule:xie,providers:[{provide:pD,useFactory:Rie(n),multi:!0,deps:[St,Jr,Rd,KA,[new dr,YA],[new dr,Fp],...e]}]}}const kie=Qb(die,!0);let Oie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ln({type:n,bootstrap:[wee]});static#n=this.\u0275inj=ln({imports:[Dk,_ee,yne,p5,K5,Y5,hee,Aie,F7.initializeApp(PU_firebase),bne(()=>Cne(PU_firebase)),One(()=>Fne()),Nie(()=>kie())]})}return n})();u8().bootstrapModule(Oie).catch(n=>console.error(n))},106:(ss,Qn,Ge)=>{Ge.d(Qn,{Z:()=>Yn});var M=Ge(58),we=Ge(537),k=Ge(534),Ue=Ge(879);class kt{constructor(Je,et){this._delegate=Je,this.firebase=et,(0,k._addComponent)(Je,new we.wA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Je,et=k._DEFAULT_ENTRY_NAME){var sr;this._delegate.checkDestroyed();const _n=this._delegate.container.getProvider(Je);return!_n.isInitialized()&&"EXPLICIT"===(null===(sr=_n.getComponent())||void 0===sr?void 0:sr.instantiationMode)&&_n.initialize(),_n.getImmediate({identifier:et})}_removeServiceInstance(Je,et=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(et)}_addComponent(Je){(0,k._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,k._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const kn=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function Mt(){const wt=function en(wt){const Je={},et={__esModule:!0,initializeApp:function mt(ot,Sn={}){const fe=k.initializeApp(ot,Sn);if((0,M.r3)(Je,fe.name))return Je[fe.name];const sn=new wt(fe,et);return Je[fe.name]=sn,sn},app:_n,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function qr(ot){const Sn=ot.name,fe=Sn.replace("-compat","");if(k._registerComponent(ot)&&"PUBLIC"===ot.type){const sn=(Zt=_n())=>{if("function"!=typeof Zt[fe])throw kn.create("invalid-app-argument",{appName:Sn});return Zt[fe]()};void 0!==ot.serviceProps&&(0,M.ZB)(sn,ot.serviceProps),et[fe]=sn,wt.prototype[fe]=function(...Zt){return this._getService.bind(this,Sn).apply(this,ot.multipleInstances?Zt:[])}}return"PUBLIC"===ot.type?et[fe]:null},removeApp:function sr(ot){delete Je[ot]},useAsService:function Lt(ot,Sn){return"serverAuth"===Sn?null:Sn},modularAPIs:k}};function _n(ot){if(!(0,M.r3)(Je,ot=ot||k._DEFAULT_ENTRY_NAME))throw kn.create("no-app",{appName:ot});return Je[ot]}return et.default=et,Object.defineProperty(et,"apps",{get:function Ut(){return Object.keys(Je).map(ot=>Je[ot])}}),_n.App=wt,et}(kt);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:Mt,extendNamespace:function Je(et){(0,M.ZB)(wt,et)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),wt}(),Ee=new Ue.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yn=de;!function Ot(wt){(0,k.registerVersion)("@firebase/app-compat","0.2.34",wt)}()},534:(ss,Qn,Ge)=>{Ge.r(Qn),Ge.d(Qn,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>di,_addComponent:()=>kr,_addOrOverwriteComponent:()=>tn,_apps:()=>xr,_clearComponents:()=>Ri,_components:()=>vn,_getProvider:()=>On,_isFirebaseApp:()=>Ss,_isFirebaseServerApp:()=>Yt,_registerComponent:()=>Cr,_removeServiceInstance:()=>Ws,_serverApps:()=>Nr,deleteApp:()=>Ps,getApp:()=>Ks,getApps:()=>Zs,initializeApp:()=>Ms,initializeServerApp:()=>Gs,onLog:()=>b,registerVersion:()=>F,setLogLevel:()=>S});var M=Ge(861),we=Ge(537),k=Ge(879),Ue=Ge(58);const kt=(x,W)=>W.some(Q=>x instanceof Q);let mn,kn;const de=new WeakMap,Ee=new WeakMap,Be=new WeakMap,st=new WeakMap,Ot=new WeakMap;let Je={get(x,W,Q){if(x instanceof IDBTransaction){if("done"===W)return Ee.get(x);if("objectStoreNames"===W)return x.objectStoreNames||Be.get(x);if("store"===W)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return mt(x[W])},set:(x,W,Q)=>(x[W]=Q,!0),has:(x,W)=>x instanceof IDBTransaction&&("done"===W||"store"===W)||W in x};function _n(x){return"function"==typeof x?function sr(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Mt(){return kn||(kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...W){return x.apply(Ut(this),W),mt(de.get(this))}:function(...W){return mt(x.apply(Ut(this),W))}:function(W,...Q){const _e=x.call(Ut(this),W,...Q);return Be.set(_e,W.sort?W.sort():[W]),mt(_e)}}(x):(x instanceof IDBTransaction&&function wt(x){if(Ee.has(x))return;const W=new Promise((Q,_e)=>{const tt=()=>{x.removeEventListener("complete",ct),x.removeEventListener("error",ft),x.removeEventListener("abort",ft)},ct=()=>{Q(),tt()},ft=()=>{_e(x.error||new DOMException("AbortError","AbortError")),tt()};x.addEventListener("complete",ct),x.addEventListener("error",ft),x.addEventListener("abort",ft)});Ee.set(x,W)}(x),kt(x,function en(){return mn||(mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Je):x)}function mt(x){if(x instanceof IDBRequest)return function Yn(x){const W=new Promise((Q,_e)=>{const tt=()=>{x.removeEventListener("success",ct),x.removeEventListener("error",ft)},ct=()=>{Q(mt(x.result)),tt()},ft=()=>{_e(x.error),tt()};x.addEventListener("success",ct),x.addEventListener("error",ft)});return W.then(Q=>{Q instanceof IDBCursor&&de.set(Q,x)}).catch(()=>{}),Ot.set(W,x),W}(x);if(st.has(x))return st.get(x);const W=_n(x);return W!==x&&(st.set(x,W),Ot.set(W,x)),W}const Ut=x=>Ot.get(x),ot=["get","getKey","getAll","getAllKeys","count"],Sn=["put","add","delete","clear"],fe=new Map;function sn(x,W){if(!(x instanceof IDBDatabase)||W in x||"string"!=typeof W)return;if(fe.get(W))return fe.get(W);const Q=W.replace(/FromIndex$/,""),_e=W!==Q,tt=Sn.includes(Q);if(!(Q in(_e?IDBIndex:IDBObjectStore).prototype)||!tt&&!ot.includes(Q))return;const ct=function(){var ft=(0,M.Z)(function*(qt,...Tt){const Mi=this.transaction(qt,tt?"readwrite":"readonly");let Po=Mi.store;return _e&&(Po=Po.index(Tt.shift())),(yield Promise.all([Po[Q](...Tt),tt&&Mi.done]))[0]});return function(Tt){return ft.apply(this,arguments)}}();return fe.set(W,ct),ct}!function et(x){Je=x(Je)}(x=>({...x,get:(W,Q,_e)=>sn(W,Q)||x.get(W,Q,_e),has:(W,Q)=>!!sn(W,Q)||x.has(W,Q)}));class Zt{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function yn(x){const W=x.getComponent();return"VERSION"===W?.type}(Q)){const _e=Q.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(Q=>Q).join(" ")}}const ui="@firebase/app",li="0.10.4",at=new k.Yd("@firebase/app"),di="[DEFAULT]",Hi={[ui]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},xr=new Map,Nr=new Map,vn=new Map;function kr(x,W){try{x.container.addComponent(W)}catch(Q){at.debug(`Component ${W.name} failed to register with FirebaseApp ${x.name}`,Q)}}function tn(x,W){x.container.addOrOverwriteComponent(W)}function Cr(x){const W=x.name;if(vn.has(W))return at.debug(`There were multiple attempts to register component ${W}.`),!1;vn.set(W,x);for(const Q of xr.values())kr(Q,x);for(const Q of Nr.values())kr(Q,x);return!0}function On(x,W){const Q=x.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),x.container.getProvider(W)}function Ws(x,W,Q=di){On(x,W).clearInstance(Q)}function Ss(x){return void 0!==x.options}function Yt(x){return void 0!==x.settings}function Ri(){vn.clear()}const Fn=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class or{constructor(W,Q,_e){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new we.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}class En extends or{constructor(W,Q,_e,tt){const ct=void 0!==Q.automaticDataCollectionEnabled&&Q.automaticDataCollectionEnabled,ft={name:_e,automaticDataCollectionEnabled:ct};super(void 0!==W.apiKey?W:W.options,ft,tt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ct},Q),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Q.releaseOnDeref=void 0,F(ui,li,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(W){this.isDeleted||(this._refCount++,void 0!==W&&this._finalizationRegistry.register(W,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ps(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}const Ar="10.12.1";function Ms(x,W={}){let Q=x;"object"!=typeof W&&(W={name:W});const _e=Object.assign({name:di,automaticDataCollectionEnabled:!1},W),tt=_e.name;if("string"!=typeof tt||!tt)throw Fn.create("bad-app-name",{appName:String(tt)});if(Q||(Q=(0,Ue.aH)()),!Q)throw Fn.create("no-options");const ct=xr.get(tt);if(ct){if((0,Ue.vZ)(Q,ct.options)&&(0,Ue.vZ)(_e,ct.config))return ct;throw Fn.create("duplicate-app",{appName:tt})}const ft=new we.H0(tt);for(const Tt of vn.values())ft.addComponent(Tt);const qt=new or(Q,_e,ft);return xr.set(tt,qt),qt}function Gs(x,W){if((0,Ue.jU)())throw Fn.create("invalid-server-app-environment");let Q;void 0===W.automaticDataCollectionEnabled&&(W.automaticDataCollectionEnabled=!1),Q=Ss(x)?x.options:x;const _e=Object.assign(Object.assign({},W),Q);if(void 0!==_e.releaseOnDeref&&delete _e.releaseOnDeref,void 0!==W.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const ct=""+(Mi=JSON.stringify(_e),[...Mi].reduce((Po,un)=>Math.imul(31,Po)+un.charCodeAt(0)|0,0)),ft=Nr.get(ct);var Mi;if(ft)return ft.incRefCount(W.releaseOnDeref),ft;const qt=new we.H0(ct);for(const Mi of vn.values())qt.addComponent(Mi);const Tt=new En(Q,W,ct,qt);return Nr.set(ct,Tt),Tt}function Ks(x=di){const W=xr.get(x);if(!W&&x===di&&(0,Ue.aH)())return Ms();if(!W)throw Fn.create("no-app",{appName:x});return W}function Zs(){return Array.from(xr.values())}function Ps(x){return B.apply(this,arguments)}function B(){return(B=(0,M.Z)(function*(x){let W=!1;const Q=x.name;xr.has(Q)?(W=!0,xr.delete(Q)):Nr.has(Q)&&x.decRefCount()<=0&&(Nr.delete(Q),W=!0),W&&(yield Promise.all(x.container.getProviders().map(_e=>_e.delete())),x.isDeleted=!0)})).apply(this,arguments)}function F(x,W,Q){var _e;let tt=null!==(_e=Hi[x])&&void 0!==_e?_e:x;Q&&(tt+=`-${Q}`);const ct=tt.match(/\s|\//),ft=W.match(/\s|\//);if(ct||ft){const qt=[`Unable to register library "${tt}" with version "${W}":`];return ct&&qt.push(`library name "${tt}" contains illegal characters (whitespace or "/")`),ct&&ft&&qt.push("and"),ft&&qt.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void at.warn(qt.join(" "))}Cr(new we.wA(`${tt}-version`,()=>({library:tt,version:W}),"VERSION"))}function b(x,W){if(null!==x&&"function"!=typeof x)throw Fn.create("invalid-log-argument");(0,k.Am)(x,W)}function S(x){(0,k.Ub)(x)}const w="firebase-heartbeat-database",O=1,ue="firebase-heartbeat-store";let Ae=null;function Fe(){return Ae||(Ae=function qr(x,W,{blocked:Q,upgrade:_e,blocking:tt,terminated:ct}={}){const ft=indexedDB.open(x,W),qt=mt(ft);return _e&&ft.addEventListener("upgradeneeded",Tt=>{_e(mt(ft.result),Tt.oldVersion,Tt.newVersion,mt(ft.transaction),Tt)}),Q&&ft.addEventListener("blocked",Tt=>Q(Tt.oldVersion,Tt.newVersion,Tt)),qt.then(Tt=>{ct&&Tt.addEventListener("close",()=>ct()),tt&&Tt.addEventListener("versionchange",Mi=>tt(Mi.oldVersion,Mi.newVersion,Mi))}).catch(()=>{}),qt}(w,O,{upgrade:(x,W)=>{if(0===W)try{x.createObjectStore(ue)}catch(Q){console.warn(Q)}}}).catch(x=>{throw Fn.create("idb-open",{originalErrorMessage:x.message})})),Ae}function Dt(){return(Dt=(0,M.Z)(function*(x){try{const Q=(yield Fe()).transaction(ue),_e=yield Q.objectStore(ue).get(je(x));return yield Q.done,_e}catch(W){if(W instanceof Ue.ZR)at.warn(W.message);else{const Q=Fn.create("idb-get",{originalErrorMessage:W?.message});at.warn(Q.message)}}})).apply(this,arguments)}function De(x,W){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,M.Z)(function*(x,W){try{const _e=(yield Fe()).transaction(ue,"readwrite");yield _e.objectStore(ue).put(W,je(x)),yield _e.done}catch(Q){if(Q instanceof Ue.ZR)at.warn(Q.message);else{const _e=Fn.create("idb-set",{originalErrorMessage:Q?.message});at.warn(_e.message)}}})).apply(this,arguments)}function je(x){return`${x.name}!${x.options.appId}`}class ya{constructor(W){this.container=W,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Ea(Q),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var W=this;return(0,M.Z)(function*(){var Q,_e;const ct=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=Ke();if((null!=(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||(W._heartbeatsCache=yield W._heartbeatsCachePromise,null!=(null===(_e=W._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&W._heartbeatsCache.lastSentHeartbeatDate!==ft&&!W._heartbeatsCache.heartbeats.some(qt=>qt.date===ft))return W._heartbeatsCache.heartbeats.push({date:ft,agent:ct}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(qt=>{const Tt=new Date(qt.date).valueOf();return Date.now()-Tt<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,M.Z)(function*(){var Q;if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null==(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||0===W._heartbeatsCache.heartbeats.length)return"";const _e=Ke(),{heartbeatsToSend:tt,unsentEntries:ct}=function va(x,W=1024){const Q=[];let _e=x.slice();for(const tt of x){const ct=Q.find(ft=>ft.agent===tt.agent);if(ct){if(ct.dates.push(tt.date),Mo(Q)>W){ct.dates.pop();break}}else if(Q.push({agent:tt.agent,dates:[tt.date]}),Mo(Q)>W){Q.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:Q,unsentEntries:_e}}(W._heartbeatsCache.heartbeats),ft=(0,Ue.L)(JSON.stringify({version:2,heartbeats:tt}));return W._heartbeatsCache.lastSentHeartbeatDate=_e,ct.length>0?(W._heartbeatsCache.heartbeats=ct,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),ft})()}}function Ke(){return(new Date).toISOString().substring(0,10)}class Ea{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,M.Z)(function*(){if(yield W._canUseIndexedDBPromise){const _e=yield function Xe(x){return Dt.apply(this,arguments)}(W.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const ct=yield Q.read();return De(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:ct.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const ct=yield Q.read();return De(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...W.heartbeats]})}})()}}function Mo(x){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:x})).length}!function Hu(x){Cr(new we.wA("platform-logger",W=>new Zt(W),"PRIVATE")),Cr(new we.wA("heartbeat",W=>new ya(W),"PRIVATE")),F(ui,li,x),F(ui,li,"esm2017"),F("fire-js","")}("")},537:(ss,Qn,Ge)=>{Ge.d(Qn,{H0:()=>en,wA:()=>k});var M=Ge(861),we=Ge(58);class k{constructor(de,Ee,Be){this.name=de,this.instanceFactory=Ee,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const Ue="[DEFAULT]";class kt{constructor(de,Ee){this.name=de,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const Ee=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(Ee)){const Be=new we.BH;if(this.instancesDeferred.set(Ee,Be),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:Ee});st&&Be.resolve(st)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(de){var Ee;const Be=this.normalizeInstanceIdentifier(de?.identifier),st=null!==(Ee=de?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Ot){if(st)return null;throw Ot}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function kn(Mt){return"EAGER"===Mt.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[Ee,Be]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(Ee);try{const Ot=this.getOrInitializeService({instanceIdentifier:st});Be.resolve(Ot)}catch{}}}}clearInstance(de=Ue){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,M.Z)(function*(){const Ee=Array.from(de.instances.values());yield Promise.all([...Ee.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...Ee.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=Ue){return this.instances.has(de)}getOptions(de=Ue){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:Ee={}}=de,Be=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Be,options:Ee});for(const[Ot,Yn]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Ot)&&Yn.resolve(st);return st}onInit(de,Ee){var Be;const st=this.normalizeInstanceIdentifier(Ee),Ot=null!==(Be=this.onInitCallbacks.get(st))&&void 0!==Be?Be:new Set;Ot.add(de),this.onInitCallbacks.set(st,Ot);const Yn=this.instances.get(st);return Yn&&de(Yn,st),()=>{Ot.delete(de)}}invokeOnInitCallbacks(de,Ee){const Be=this.onInitCallbacks.get(Ee);if(Be)for(const st of Be)try{st(de,Ee)}catch{}}getOrInitializeService({instanceIdentifier:de,options:Ee={}}){let Be=this.instances.get(de);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(Mt=de,Mt===Ue?void 0:Mt),options:Ee}),this.instances.set(de,Be),this.instancesOptions.set(de,Ee),this.invokeOnInitCallbacks(Be,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,Be)}catch{}var Mt;return Be||null}normalizeInstanceIdentifier(de=Ue){return this.component?this.component.multipleInstances?de:Ue:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const Ee=this.getProvider(de.name);if(Ee.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);Ee.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const Ee=new kt(de,this);return this.providers.set(de,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},879:(ss,Qn,Ge)=>{Ge.d(Qn,{Am:()=>Mt,Ub:()=>en,Yd:()=>kn,in:()=>we});const M=[];var we=function(de){return de[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",de}(we||{});const k={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Ue=we.INFO,kt={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},mn=(de,Ee,...Be)=>{if(Ee<de.logLevel)return;const st=(new Date).toISOString(),Ot=kt[Ee];if(!Ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[Ot](`[${st}]  ${de.name}:`,...Be)};class kn{constructor(Ee){this.name=Ee,this._logLevel=Ue,this._logHandler=mn,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in we))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?k[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...Ee),this._logHandler(this,we.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...Ee),this._logHandler(this,we.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,we.INFO,...Ee),this._logHandler(this,we.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,we.WARN,...Ee),this._logHandler(this,we.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...Ee),this._logHandler(this,we.ERROR,...Ee)}}function en(de){M.forEach(Ee=>{Ee.setLogLevel(de)})}function Mt(de,Ee){for(const Be of M){let st=null;Ee&&Ee.level&&(st=k[Ee.level]),Be.userLogHandler=null===de?null:(Ot,Yn,...wt)=>{const Je=wt.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");Yn>=(st??Ot.logLevel)&&de({level:we[Yn].toLowerCase(),message:Je,args:wt,type:Ot.name})}}}},365:(ss,Qn,Ge)=>{Ge.r(Qn);var M=Ge(861),we=Ge(106),k=Ge(455),Ue=Ge(58),kn=(Ge(534),Ge(879),Ge(537));function en(){return window}function Ee(){return Ee=(0,M.Z)(function*(b,S,w){var O;const{BuildInfo:ue}=en();(0,k.au)(S.sessionId,"AuthEvent did not contain a session ID");const Ae=yield function et(b){return sr.apply(this,arguments)}(S.sessionId),Fe={};return(0,k.av)()?Fe.ibi=ue.packageName:(0,k.aw)()?Fe.apn=ue.packageName:(0,k.ax)(b,"operation-not-supported-in-this-environment"),ue.displayName&&(Fe.appDisplayName=ue.displayName),Fe.sessionId=Ae,(0,k.ay)(b,w,S.type,void 0,null!==(O=S.eventId)&&void 0!==O?O:void 0,Fe)}),Ee.apply(this,arguments)}function st(){return(st=(0,M.Z)(function*(b){const{BuildInfo:S}=en(),w={};(0,k.av)()?w.iosBundleId=S.packageName:(0,k.aw)()?w.androidPackageName=S.packageName:(0,k.ax)(b,"operation-not-supported-in-this-environment"),yield(0,k.az)(b,w)})).apply(this,arguments)}function wt(){return(wt=(0,M.Z)(function*(b,S,w){const{cordova:O}=en();let ue=()=>{};try{yield new Promise((Ae,Fe)=>{let Xe=null;function Dt(){var je;Ae();const ar=null===(je=O.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof ar&&ar(),"function"==typeof w?.close&&w.close()}function De(){Xe||(Xe=window.setTimeout(()=>{Fe((0,k.aB)(b,"redirect-cancelled-by-user"))},2e3))}function Bt(){"visible"===document?.visibilityState&&De()}S.addPassiveListener(Dt),document.addEventListener("resume",De,!1),(0,k.aw)()&&document.addEventListener("visibilitychange",Bt,!1),ue=()=>{S.removePassiveListener(Dt),document.removeEventListener("resume",De,!1),document.removeEventListener("visibilitychange",Bt,!1),Xe&&window.clearTimeout(Xe)}})}finally{ue()}})).apply(this,arguments)}function sr(){return(sr=(0,M.Z)(function*(b){const S=function _n(b){if((0,k.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const S=new ArrayBuffer(b.length),w=new Uint8Array(S);for(let O=0;O<b.length;O++)w[O]=b.charCodeAt(O);return w}(b),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ut extends k.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function ot(b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,M.Z)(function*(b){const S=yield Zt()._get(yn(b));return S&&(yield Zt()._remove(yn(b))),S})).apply(this,arguments)}function sn(){const b=[];for(let w=0;w<20;w++){const O=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(O))}return b.join("")}function Zt(){return(0,k.aE)(k.b)}function yn(b){return(0,k.aF)("authEvent",b.config.apiKey,b.name)}function at(b){if(!b?.includes("?"))return{};const[S,...w]=b.split("?");return(0,Ue.zd)(w.join("?"))}const ee=class Di{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const O=S._key();let ue=w.eventManagers.get(O);return ue||(ue=new Ut(S),w.eventManagers.set(O,ue),w.attachCallbackListeners(S,ue)),ue})()}_openPopup(S){(0,k.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,O,ue){var Ae=this;return(0,M.Z)(function*(){!function Je(b){var S,w,O,ue,Ae,Fe,Xe,Dt,De,Bt;const je=en();(0,k.aC)("function"==typeof(null===(S=je?.universalLinks)||void 0===S?void 0:S.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aC)(typeof(null===(w=je?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aC)("function"==typeof(null===(Ae=null===(ue=null===(O=je?.cordova)||void 0===O?void 0:O.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ae?void 0:Ae.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(Dt=null===(Xe=null===(Fe=je?.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===Dt?void 0:Dt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(Bt=null===(De=je?.cordova)||void 0===De?void 0:De.InAppBrowser)||void 0===Bt?void 0:Bt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Fe=yield Ae._initialize(S);yield Fe.initialized(),Fe.resetRedirect(),(0,k.aI)(),yield Ae._originValidation(S);const Xe=function qr(b,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:sn(),postBody:null,tenantId:b.tenantId,error:(0,k.aB)(b,"no-auth-event")}}(S,O,ue);yield function Lt(b,S){return Zt()._set(yn(b),S)}(S,Xe);const Dt=yield function de(b,S,w){return Ee.apply(this,arguments)}(S,Xe,w),De=yield function Ot(b){const{cordova:S}=en();return new Promise(w=>{S.plugins.browsertab.isAvailable(O=>{let ue=null;O?S.plugins.browsertab.openUrl(b):ue=S.InAppBrowser.open(b,(0,k.aA)()?"_blank":"_system","location=yes"),w(ue)})})}(Dt);return function Yn(b,S,w){return wt.apply(this,arguments)}(S,Fe,De)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Be(b){return st.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:O,handleOpenURL:ue,BuildInfo:Ae}=en(),Fe=setTimeout((0,M.Z)(function*(){yield ot(S),w.onEvent(re())}),500),Xe=function(){var Bt=(0,M.Z)(function*(je){clearTimeout(Fe);const ar=yield ot(S);let Ro=null;ar&&je?.url&&(Ro=function fe(b,S){var w,O;const ue=function li(b){const S=at(b),w=S.link?decodeURIComponent(S.link):void 0,O=at(w).link,ue=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return at(ue).link||ue||O||w||b}(S);if(ue.includes("/__/auth/callback")){const Ae=at(ue),Fe=Ae.firebaseError?function ui(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Ae.firebaseError)):null,Xe=null===(O=null===(w=Fe?.code)||void 0===w?void 0:w.split("auth/"))||void 0===O?void 0:O[1],Dt=Xe?(0,k.aB)(Xe):null;return Dt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:ue,postBody:null}}return null}(ar,je.url)),w.onEvent(Ro||re())});return function(ar){return Bt.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,Xe);const Dt=ue,De=`${Ae.packageName.toLowerCase()}://`;en().handleOpenURL=function(){var Bt=(0,M.Z)(function*(je){if(je.toLowerCase().startsWith(De)&&Xe({url:je}),"function"==typeof Dt)try{Dt(je)}catch(ar){console.error(ar)}});return function(je){return Bt.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aB)("no-auth-event")}}function Te(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Me(b=(0,Ue.z$)()){return!("file:"!==Te()&&"ionic:"!==Te()&&"capacitor:"!==Te()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){try{const b=self.localStorage,S=k.aN();if(b)return b.setItem(S,"1"),b.removeItem(S),!function Qt(b=(0,Ue.z$)()){return function At(){return(0,Ue.w1)()&&11===document?.documentMode}()||function on(b=(0,Ue.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Ue.hl)()}catch{return Rn()&&(0,Ue.hl)()}return!1}function Rn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jn(){return(function _t(){return"http:"===Te()||"https:"===Te()}()||(0,Ue.ru)()||Me())&&!function Le(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&Xn()&&!Rn()}function gr(){return Me()&&typeof document<"u"}function As(){return(As=(0,M.Z)(function*(){return!!gr()&&new Promise(b=>{const S=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),b(!0)})})})).apply(this,arguments)}const Ft={LOCAL:"local",NONE:"none",SESSION:"session"},Si=k.aC,qs="persistence";function di(b){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,M.Z)(function*(b){yield b._initializationPromise;const S=Nr(),w=k.aF(qs,b.config.apiKey,b.name);S&&S.setItem(w,b._getPersistence())})).apply(this,arguments)}function Nr(){var b;try{return(null===(b=function $i(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const vn=k.aC;class kr{constructor(){this.browserResolver=k.aE(k.k),this.cordovaResolver=k.aE(ee),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,O,ue){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openPopup(S,w,O,ue)})()}_openRedirect(S,w,O,ue){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openRedirect(S,w,O,ue)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function Pr(){return As.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function tn(b){return b.unwrap()}function On(b){return Ss(b)}function Ss(b){const{_tokenResponse:S}=b instanceof Ue.ZR?b.customData:b;if(!S)return null;if(!(b instanceof Ue.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return k.P.credentialFromResult(b);const w=S.providerId;if(!w||w===k.p.PASSWORD)return null;let O;switch(w){case k.p.GOOGLE:O=k.X;break;case k.p.FACEBOOK:O=k.W;break;case k.p.GITHUB:O=k.Y;break;case k.p.TWITTER:O=k.$;break;default:const{oauthIdToken:ue,oauthAccessToken:Ae,oauthTokenSecret:Fe,pendingToken:Xe,nonce:Dt}=S;return Ae||Fe||ue||Xe?Xe?w.startsWith("saml.")?k.aQ._create(w,Xe):k.N._fromParams({providerId:w,signInMethod:w,pendingToken:Xe,idToken:ue,accessToken:Ae}):new k.Z(w).credential({idToken:ue,accessToken:Ae,rawNonce:Dt}):null}return b instanceof Ue.ZR?O.credentialFromError(b):O.credentialFromResult(b)}function Yt(b,S){return S.catch(w=>{throw w instanceof Ue.ZR&&function Ws(b,S){var w;const O=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Fn(b,k.as(b,S));else if(O){const ue=Ss(S),Ae=S;ue&&(Ae.credential=ue,Ae.tenantId=O.tenantId||void 0,Ae.email=O.email||void 0,Ae.phoneNumber=O.phoneNumber||void 0)}}(b,w),w}).then(w=>{const ue=w.user;return{operationType:w.operationType,credential:On(w),additionalUserInfo:k.aq(w),user:or.getOrCreate(ue)}})}function Ri(b,S){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,M.Z)(function*(b,S){const w=yield S;return{verificationId:w.verificationId,confirm:O=>Yt(b,w.confirm(O))}})).apply(this,arguments)}class Fn{constructor(S,w){this.resolver=w,this.auth=function Cr(b){return b.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Yt(tn(this.auth),this.resolver.resolveSignIn(S))}}class or{constructor(S){this._delegate=S,this.multiFactor=k.at(S)}static getOrCreate(S){return or.USER_MAP.has(S)||or.USER_MAP.set(S,new or(S)),or.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,k.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var O=this;return(0,M.Z)(function*(){return Ri(O.auth,k.l(O._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,k.d(w._delegate,S,kr))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield di(k.aJ(w.auth)),k.g(w._delegate,S,kr)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,k.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return Ri(this.auth,k.r(this._delegate,S,w))}reauthenticateWithPopup(S){return Yt(this.auth,k.e(this._delegate,S,kr))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield di(k.aJ(w.auth)),k.h(w._delegate,S,kr)})()}sendEmailVerification(S){return k.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield k.ap(w._delegate,S),w})()}updateEmail(S){return k.al(this._delegate,S)}updatePassword(S){return k.am(this._delegate,S)}updatePhoneNumber(S){return k.u(this._delegate,S)}updateProfile(S){return k.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return k.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}or.USER_MAP=new WeakMap;const En=k.aC;let Ar=(()=>{class b{constructor(w,O){if(this.app=w,O.isInitialized())return this._delegate=O.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=w.options;En(ue,"invalid-api-key",{appName:w.name}),En(ue,"invalid-api-key",{appName:w.name});const Ae=typeof window<"u"?kr:void 0;this._delegate=O.initialize({options:{persistence:Gs(ue,w.name),popupRedirectResolver:Ae}}),this._delegate._updateErrorMap(k.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,O){k.K(this._delegate,w,O)}applyActionCode(w){return k.a7(this._delegate,w)}checkActionCode(w){return k.a8(this._delegate,w)}confirmPasswordReset(w,O){return k.a6(this._delegate,w,O)}createUserWithEmailAndPassword(w,O){var ue=this;return(0,M.Z)(function*(){return Yt(ue._delegate,k.aa(ue._delegate,w,O))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return k.af(this._delegate,w)}isSignInWithEmailLink(w){return k.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){En(Jn(),w._delegate,"operation-not-supported-in-this-environment");const O=yield k.j(w._delegate,kr);return O?Yt(w._delegate,Promise.resolve(O)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function oe(b,S){(0,k.aJ)(b)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,O,ue){const{next:Ae,error:Fe,complete:Xe}=Ms(w,O,ue);return this._delegate.onAuthStateChanged(Ae,Fe,Xe)}onIdTokenChanged(w,O,ue){const{next:Ae,error:Fe,complete:Xe}=Ms(w,O,ue);return this._delegate.onIdTokenChanged(Ae,Fe,Xe)}sendSignInLinkToEmail(w,O){return k.ac(this._delegate,w,O)}sendPasswordResetEmail(w,O){return k.a5(this._delegate,w,O||void 0)}setPersistence(w){var O=this;return(0,M.Z)(function*(){let ue;switch(function Ds(b,S){Si(Object.values(Ft).includes(S),b,"invalid-persistence-type"),(0,Ue.b$)()?Si(S!==Ft.SESSION,b,"unsupported-persistence-type"):(0,Ue.UG)()?Si(S===Ft.NONE,b,"unsupported-persistence-type"):Rn()?Si(S===Ft.NONE||S===Ft.LOCAL&&(0,Ue.hl)(),b,"unsupported-persistence-type"):Si(S===Ft.NONE||Xn(),b,"unsupported-persistence-type")}(O._delegate,w),w){case Ft.SESSION:ue=k.a;break;case Ft.LOCAL:ue=(yield k.aE(k.i)._isAvailable())?k.i:k.b;break;case Ft.NONE:ue=k.U;break;default:return k.ax("argument-error",{appName:O._delegate.name})}return O._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Yt(this._delegate,k.a0(this._delegate))}signInWithCredential(w){return Yt(this._delegate,k.a1(this._delegate,w))}signInWithCustomToken(w){return Yt(this._delegate,k.a4(this._delegate,w))}signInWithEmailAndPassword(w,O){return Yt(this._delegate,k.ab(this._delegate,w,O))}signInWithEmailLink(w,O){return Yt(this._delegate,k.ae(this._delegate,w,O))}signInWithPhoneNumber(w,O){return Ri(this._delegate,k.s(this._delegate,w,O))}signInWithPopup(w){var O=this;return(0,M.Z)(function*(){return En(Jn(),O._delegate,"operation-not-supported-in-this-environment"),Yt(O._delegate,k.c(O._delegate,w,kr))})()}signInWithRedirect(w){var O=this;return(0,M.Z)(function*(){return En(Jn(),O._delegate,"operation-not-supported-in-this-environment"),yield di(O._delegate),k.f(O._delegate,w,kr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return k.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ft,b})();function Ms(b,S,w){let O=b;"function"!=typeof b&&({next:O,error:S,complete:w}=b);const ue=O;return{next:Fe=>ue(Fe&&or.getOrCreate(Fe)),error:S,complete:w}}function Gs(b,S){const w=function xr(b,S){const w=Nr();if(!w)return[];const O=k.aF(qs,b,S);switch(w.getItem(O)){case Ft.NONE:return[k.U];case Ft.LOCAL:return[k.i,k.a];case Ft.SESSION:return[k.a];default:return[]}}(b,S);if(typeof self<"u"&&!w.includes(k.i)&&w.push(k.i),typeof window<"u")for(const O of[k.b,k.a])w.includes(O)||w.push(O);return w.includes(k.U)||w.push(k.U),w}class Ks{constructor(){this.providerId="phone",this._delegate=new k.P(tn(we.Z.auth()))}static credential(S,w){return k.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}Ks.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ks.PROVIDER_ID=k.P.PROVIDER_ID;const Zs=k.aC;class Ps{constructor(S,w,O=we.Z.app()){var ue;Zs(null===(ue=O.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:O.name}),this._delegate=new k.R(O.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(b){b.INTERNAL.registerComponent(new kn.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),O=S.getProvider("auth");return new Ar(w,O)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.V,FacebookAuthProvider:k.W,GithubAuthProvider:k.Y,GoogleAuthProvider:k.X,OAuthProvider:k.Z,SAMLAuthProvider:k._,PhoneAuthProvider:Ks,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Ps,TwitterAuthProvider:k.$,Auth:Ar,AuthCredential:k.L,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.8")}(we.Z)},861:(ss,Qn,Ge)=>{function M(k,Ue,kt,mn,kn,en,Mt){try{var de=k[en](Mt),Ee=de.value}catch(Be){return void kt(Be)}de.done?Ue(Ee):Promise.resolve(Ee).then(mn,kn)}function we(k){return function(){var Ue=this,kt=arguments;return new Promise(function(mn,kn){var en=k.apply(Ue,kt);function Mt(Ee){M(en,mn,kn,Mt,de,"next",Ee)}function de(Ee){M(en,mn,kn,Mt,de,"throw",Ee)}Mt(void 0)})}}Ge.d(Qn,{Z:()=>we})},582:(ss,Qn,Ge)=>{function Ue(ee,re){var oe={};for(var ce in ee)Object.prototype.hasOwnProperty.call(ee,ce)&&re.indexOf(ce)<0&&(oe[ce]=ee[ce]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ce=Object.getOwnPropertySymbols(ee);he<ce.length;he++)re.indexOf(ce[he])<0&&Object.prototype.propertyIsEnumerable.call(ee,ce[he])&&(oe[ce[he]]=ee[ce[he]])}return oe}function Be(ee,re,oe,ce){return new(oe||(oe=Promise))(function(se,Te){function _t(At){try{Le(ce.next(At))}catch(on){Te(on)}}function Me(At){try{Le(ce.throw(At))}catch(on){Te(on)}}function Le(At){At.done?se(At.value):function he(se){return se instanceof oe?se:new oe(function(Te){Te(se)})}(At.value).then(_t,Me)}Le((ce=ce.apply(ee,re||[])).next())})}function mt(ee){return this instanceof mt?(this.v=ee,this):new mt(ee)}function Ut(ee,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ce=oe.apply(ee,re||[]),se=[];return he={},Te("next"),Te("throw"),Te("return"),he[Symbol.asyncIterator]=function(){return this},he;function Te(Qt){ce[Qt]&&(he[Qt]=function(Xn){return new Promise(function(Rn,Jn){se.push([Qt,Xn,Rn,Jn])>1||_t(Qt,Xn)})})}function _t(Qt,Xn){try{!function Me(Qt){Qt.value instanceof mt?Promise.resolve(Qt.value.v).then(Le,At):on(se[0][2],Qt)}(ce[Qt](Xn))}catch(Rn){on(se[0][3],Rn)}}function Le(Qt){_t("next",Qt)}function At(Qt){_t("throw",Qt)}function on(Qt,Xn){Qt(Xn),se.shift(),se.length&&_t(se[0][0],se[0][1])}}function Lt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function wt(ee){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&ee[re],ce=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ce>=ee.length&&(ee=void 0),{value:ee&&ee[ce++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},ce("next"),ce("throw"),ce("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ce(se){oe[se]=ee[se]&&function(Te){return new Promise(function(_t,Me){!function he(se,Te,_t,Me){Promise.resolve(Me).then(function(Le){se({value:Le,done:_t})},Te)}(_t,Me,(Te=ee[se](Te)).done,Te.value)})}}}Ge.d(Qn,{FC:()=>Ut,KL:()=>Lt,_T:()=>Ue,mG:()=>Be,qq:()=>mt}),"function"==typeof SuppressedError&&SuppressedError}},ss=>{ss(ss.s=498)}]);
"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(ls,zn,We)=>{We.d(zn,{$:()=>$t,A:()=>Ce,G:()=>jt,K:()=>Cl,L:()=>Ms,N:()=>Wi,P:()=>H_,R:()=>j_,U:()=>pt,V:()=>mo,W:()=>Q,X:()=>ve,Y:()=>Pe,Z:()=>L,_:()=>_t,a:()=>Tc,a0:()=>__,a1:()=>ld,a2:()=>Gn,a3:()=>E_,a4:()=>I_,a5:()=>b_,a6:()=>dd,a7:()=>hb,a8:()=>He,a9:()=>Un,aA:()=>fa,aB:()=>Zt,aC:()=>te,aD:()=>no,aE:()=>Oe,aF:()=>Xt,aG:()=>Cd,aH:()=>Z_,aI:()=>Rb,aJ:()=>Ln,aN:()=>Cc,aQ:()=>Ke,aa:()=>Nl,ab:()=>vc,ac:()=>dr,ad:()=>Ec,ae:()=>wt,af:()=>hr,ag:()=>Ic,ah:()=>Ol,ak:()=>kl,al:()=>zt,am:()=>fM,ap:()=>db,aq:()=>mi,as:()=>yM,at:()=>S_,au:()=>vt,av:()=>cc,aw:()=>dt,ax:()=>Kt,ay:()=>Pd,az:()=>ty,b:()=>gb,c:()=>q_,d:()=>yt,e:()=>G_,f:()=>Jt,g:()=>eo,h:()=>Xr,i:()=>_b,j:()=>Pb,k:()=>cy,l:()=>Xs,m:()=>SM,p:()=>Bt,r:()=>z_,s:()=>sp,u:()=>Pi});var P=We(861),Re=We(303),U=We(58),xe=We(879),Rt=We(582),Cn=We(537);const Bt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ce={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const jt=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Hn=function It(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pt=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new xe.Yd("@firebase/auth");function gn(p,...u){rt.logLevel<=xe.in.ERROR&&rt.error(`Auth (${Re.SDK_VERSION}): ${p}`,...u)}function Kt(p,...u){throw Se(p,...u)}function Zt(p,...u){return Se(p,...u)}function Cr(p,u,d){const g=Object.assign(Object.assign({},Hn()),{[u]:d});return new U.LL("auth","Firebase",g).create(u,{appName:p.name})}function xt(p){return Cr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ft(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Kt(p,"argument-error"),Cr(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Se(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Pt.create(p,...u)}function te(p,u,...d){if(!p)throw Se(u,...d)}function Je(p){const u="INTERNAL ASSERTION FAILED: "+p;throw gn(u),new Error(u)}function vt(p,u){p||Je(u)}function Nt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Pn(){return"http:"===dn()||"https:"===dn()}function dn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class cr{constructor(u,d){this.shortDelay=u,this.longDelay=d,vt(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Et(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pn()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(p,u){vt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class se{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ge=new cr(3e4,6e4);function Ee(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function ae(p,u,d,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,P.Z)(function*(p,u,d,g,v={}){return Ft(p,v,(0,P.Z)(function*(){let C={},q={};g&&("GET"===u?q=g:C={body:JSON.stringify(g)});const re=(0,U.xO)(Object.assign({key:p.config.apiKey},q)).slice(1),be=yield p._getAdditionalHeaders();return be["Content-Type"]="application/json",p.languageCode&&(be["X-Firebase-Locale"]=p.languageCode),se.fetch()(_n(p,p.config.apiHost,d,re),Object.assign({method:u,headers:be,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function Ft(p,u,d){return Me.apply(this,arguments)}function Me(){return(Me=(0,P.Z)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},le),u);try{const v=new vn(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const q=yield C.json();if("needConfirmation"in q)throw Sn(p,"account-exists-with-different-credential",q);if(C.ok&&!("errorMessage"in q))return q;{const re=C.ok?q.errorMessage:q.error.message,[be,Ge]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===be)throw Sn(p,"credential-already-in-use",q);if("EMAIL_EXISTS"===be)throw Sn(p,"email-already-in-use",q);if("USER_DISABLED"===be)throw Sn(p,"user-disabled",q);const it=g[be]||be.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw Cr(p,it,Ge);Kt(p,it)}}catch(v){if(v instanceof U.ZR)throw v;Kt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Qe(p,u,d,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(p,u,d,g,v={}){const C=yield ae(p,u,d,g,v);return"mfaPendingCredential"in C&&Kt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function _n(p,u,d,g){const v=`${u}${d}?${g}`;return p.config.emulator?ie(p.config,v):`${p.config.apiScheme}://${v}`}function hn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vn{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Zt(this.auth,"network-request-failed")),ge.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Zt(p,u,g);return v.customData._tokenResponse=d,v}function Yt(p){return void 0!==p&&void 0!==p.getResponse}function qn(p){return void 0!==p&&void 0!==p.enterprise}class Ar{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return hn(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function oi(){return(oi=(0,P.Z)(function*(p){return(yield ae(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(p,u){return ai.apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(p,u){return ae(p,"GET","/v2/recaptchaConfig",Ee(p,u))})).apply(this,arguments)}function Ci(){return(Ci=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function qs(p,u){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function gr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Fr(){return(Fr=(0,P.Z)(function*(p,u=!1){const d=(0,U.m9)(p),g=yield d.getIdToken(u),v=Gs(g);te(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,q=C?.sign_in_provider;return{claims:v,token:g,authTime:gr(Fn(v.auth_time)),issuedAtTime:gr(Fn(v.iat)),expirationTime:gr(Fn(v.exp)),signInProvider:q||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Fn(p){return 1e3*Number(p)}function Gs(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,U.tV)(d);return v?JSON.parse(v):(gn("Failed to decode base64 JWT payload"),null)}catch(v){return gn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Di(p){const u=Gs(p);return te(u,"internal-error"),te(typeof u.exp<"u","internal-error"),te(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function cn(p,u){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,P.Z)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof U.ZR&&function Si({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ds{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,P.Z)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,P.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class lr{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function En(p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,P.Z)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),v=yield cn(p,qs(d,{idToken:g}));te(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const q=null!==(u=C.providerUserInfo)&&void 0!==u&&u.length?Ws(C.providerUserInfo):[],re=function Ss(p,u){return[...p.filter(g=>!u.some(v=>v.providerId===g.providerId)),...u]}(p.providerData,q),it=!!p.isAnonymous&&!(p.email&&C.passwordHash||re?.length),Ht={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:re,metadata:new lr(C.createdAt,C.lastLoginAt),isAnonymous:it};Object.assign(p,Ht)})).apply(this,arguments)}function fs(){return(fs=(0,P.Z)(function*(p){const u=(0,U.m9)(p);yield En(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Ws(p){return p.map(u=>{var{providerId:d}=u,g=(0,Rt._T)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function M(){return(M=(0,P.Z)(function*(p,u){const d=yield Ft(p,{},(0,P.Z)(function*(){const g=(0,U.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,q=_n(p,v,"/v1/token",`key=${C}`),re=yield p._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(q,{method:"POST",headers:re,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,P.Z)(function*(p,u){return ae(p,"POST","/v2/accounts:revokeToken",Ee(p,u))})).apply(this,arguments)}class D{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){te(u.idToken,"internal-error"),te(typeof u.idToken<"u","internal-error"),te(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Di(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){te(0!==u.length,"internal-error");const d=Di(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,P.Z)(function*(){return d||!g.accessToken||g.isExpired?(te(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,P.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:q}=yield function ke(p,u){return M.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(v,C,Number(q))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,q=new D;return g&&(te("string"==typeof g,"internal-error",{appName:u}),q.refreshToken=g),v&&(te("string"==typeof v,"internal-error",{appName:u}),q.accessToken=v),C&&(te("number"==typeof C,"internal-error",{appName:u}),q.expirationTime=C),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new D,this.toJSON())}_performRefresh(){return Je("not implemented")}}function w(p,u){te("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class F{constructor(u){var{uid:d,auth:g,stsTokenManager:v}=u,C=(0,Rt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ds(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new lr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,P.Z)(function*(){const g=yield cn(d,d.stsTokenManager.getToken(d.auth,u));return te(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function nn(p){return Fr.apply(this,arguments)}(this,u)}reload(){return function hs(p){return fs.apply(this,arguments)}(this)}_assign(u){this!==u&&(te(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new F(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,P.Z)(function*(){let v=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield En(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,P.Z)(function*(){if((0,Re._isFirebaseServerApp)(u.auth.app))return Promise.reject(xt(u.auth));const d=yield u.getIdToken();return yield cn(u,function us(p,u){return Ci.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,v,C,q,re,be,Ge,it;const Ht=null!==(g=d.displayName)&&void 0!==g?g:void 0,ei=null!==(v=d.email)&&void 0!==v?v:void 0,xi=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,kd=null!==(q=d.photoURL)&&void 0!==q?q:void 0,Ap=null!==(re=d.tenantId)&&void 0!==re?re:void 0,Fd=null!==(be=d._redirectEventId)&&void 0!==be?be:void 0,Pc=null!==(Ge=d.createdAt)&&void 0!==Ge?Ge:void 0,uy=null!==(it=d.lastLoginAt)&&void 0!==it?it:void 0,{uid:ti,emailVerified:dy,isAnonymous:Hr,providerData:ql,stsTokenManager:hy}=d;te(ti&&hy,u,"internal-error");const fy=D.fromJSON(this.name,hy);te("string"==typeof ti,u,"internal-error"),w(Ht,u.name),w(ei,u.name),te("boolean"==typeof dy,u,"internal-error"),te("boolean"==typeof Hr,u,"internal-error"),w(xi,u.name),w(kd,u.name),w(Ap,u.name),w(Fd,u.name),w(Pc,u.name),w(uy,u.name);const xc=new F({uid:ti,auth:u,email:ei,emailVerified:dy,displayName:Ht,isAnonymous:Hr,photoURL:kd,phoneNumber:xi,tenantId:Ap,stsTokenManager:fy,createdAt:Pc,lastLoginAt:uy});return ql&&Array.isArray(ql)&&(xc.providerData=ql.map(Nc=>Object.assign({},Nc))),Fd&&(xc._redirectEventId=Fd),xc}static _fromIdTokenResponse(u,d,g=!1){return(0,P.Z)(function*(){const v=new D;v.updateFromServerResponse(d);const C=new F({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:g});return yield En(C),C})()}static _fromGetAccountInfoResponse(u,d,g){return(0,P.Z)(function*(){const v=d.users[0];te(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?Ws(v.providerUserInfo):[],q=!(v.email&&v.passwordHash||C?.length),re=new D;re.updateFromIdToken(g);const be=new F({uid:v.localId,auth:u,stsTokenManager:re,isAnonymous:q}),Ge={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new lr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(be,Ge),be})()}}const de=new Map;function Oe(p){vt(p instanceof Function,"Expected a class definition");let u=de.get(p);return u?(vt(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,de.set(p,u),u)}const pt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,P.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,P.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,P.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Xt(p,u,d){return`firebase:${p}:${u}:${d}`}class Fe{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Xt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Xt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,P.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?F._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,P.Z)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,P.Z)(function*(){if(!d.length)return new Fe(Oe(pt),u,g);const v=(yield Promise.all(d.map(function(){var Ge=(0,P.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let C=v[0]||Oe(pt);const q=Xt(g,u.config.apiKey,u.name);let re=null;for(const Ge of d)try{const it=yield Ge._get(q);if(it){const Ht=F._fromJSON(u,it);Ge!==C&&(re=Ht),C=Ge;break}}catch{}const be=v.filter(Ge=>Ge._shouldAllowMigration);return C._shouldAllowMigration&&be.length?(C=be[0],re&&(yield C._set(q,re.toJSON())),yield Promise.all(d.map(function(){var Ge=(0,P.Z)(function*(it){if(it!==C)try{yield it._remove(q)}catch{}});return function(it){return Ge.apply(this,arguments)}}())),new Fe(C,u,g)):new Fe(C,u,g)})()}}function In(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(ln(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(st(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(oc(u))return"Blackberry";if(ac(u))return"Webos";if(Vr(u))return"Safari";if((u.includes("chrome/")||po(u))&&!u.includes("edge/"))return"Chrome";if(dt(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function st(p=(0,U.z$)()){return/firefox\//i.test(p)}function Vr(p=(0,U.z$)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function po(p=(0,U.z$)()){return/crios\//i.test(p)}function ln(p=(0,U.z$)()){return/iemobile/i.test(p)}function dt(p=(0,U.z$)()){return/android/i.test(p)}function oc(p=(0,U.z$)()){return/blackberry/i.test(p)}function ac(p=(0,U.z$)()){return/webos/i.test(p)}function cc(p=(0,U.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function fa(p=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function gt(p=(0,U.z$)()){return cc(p)||dt(p)||ac(p)||oc(p)||/windows phone/i.test(p)||ln(p)}function uc(p,u=[]){let d;switch(p){case"Browser":d=In((0,U.z$)());break;case"Worker":d=`${In((0,U.z$)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Re.SDK_VERSION}/${g}`}class Sr{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=C=>new Promise((q,re)=>{try{q(u(C))}catch(be){re(be)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,P.Z)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const v of d.queue)yield v(u),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function ur(){return(ur=(0,P.Z)(function*(p,u={}){return ae(p,"GET","/v2/passwordPolicy",Ee(p,u))})).apply(this,arguments)}class xf{constructor(u){var d,g,v,C;const q=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=q.minPasswordLength)&&void 0!==d?d:6,q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=q.maxPasswordLength),void 0!==q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=q.containsLowercaseCharacter),void 0!==q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=q.containsUppercaseCharacter),void 0!==q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=q.containsNumericCharacter),void 0!==q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=q.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=u.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,v,C,q,re;const be={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,be),this.validatePasswordCharacterOptions(u,be),be.isValid&&(be.isValid=null===(d=be.meetsMinPasswordLength)||void 0===d||d),be.isValid&&(be.isValid=null===(g=be.meetsMaxPasswordLength)||void 0===g||g),be.isValid&&(be.isValid=null===(v=be.containsLowercaseLetter)||void 0===v||v),be.isValid&&(be.isValid=null===(C=be.containsUppercaseLetter)||void 0===C||C),be.isValid&&(be.isValid=null===(q=be.containsNumericCharacter)||void 0===q||q),be.isValid&&(be.isValid=null===(re=be.containsNonAlphanumericCharacter)||void 0===re||re),be}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)g=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=C))}}class Nf{constructor(u,d,g,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new Sr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=Oe(d)),this._initializationPromise=this.queue((0,P.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Fe.create(g,u),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,P.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,P.Z)(function*(){try{const g=yield qs(d,{idToken:u}),v=yield F._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,P.Z)(function*(){var g;if((0,Re._isFirebaseServerApp)(d.app)){const re=d.app.settings.authIdToken;return re?new Promise(be=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(re).then(be,be))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,q=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const re=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,be=C?._redirectEventId,Ge=yield d.tryRedirectSignIn(u);(!re||re===be)&&Ge?.user&&(C=Ge.user,q=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(q)try{yield d.beforeStateQueue.runMiddleware(C)}catch(re){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(re))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(u){var d=this;return(0,P.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,P.Z)(function*(){try{yield En(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function mn(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,P.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,P.Z)(function*(){if((0,Re._isFirebaseServerApp)(d.app))return Promise.reject(xt(d));const g=u?(0,U.m9)(u):null;return g&&te(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,P.Z)(function*(){if(!g._deleted)return u&&te(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,P.Z)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,P.Z)(function*(){return(0,Re._isFirebaseServerApp)(u.app)?Promise.reject(xt(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,Re._isFirebaseServerApp)(this.app)?Promise.reject(xt(this)):this.queue((0,P.Z)(function*(){yield d.assertedPersistence.setPersistence(Oe(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,P.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,P.Z)(function*(){const d=yield function Pf(p){return ur.apply(this,arguments)}(u),g=new xf(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new U.LL("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,P.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function x(p,u){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,P.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,P.Z)(function*(){if(!d.redirectPersistenceManager){const g=u&&Oe(u)||d._popupRedirectResolver;te(g,d,"argument-error"),d.redirectPersistenceManager=yield Fe.create(d,[Oe(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,P.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,P.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,P.Z)(function*(){if(u===d.currentUser)return d.queue((0,P.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let q=!1;const re=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(re,this,"internal-error"),re.then(()=>{q||C(this.currentUser)}),"function"==typeof d){const be=u.addObserver(d,g,v);return()=>{q=!0,be()}}{const be=u.addObserver(d);return()=>{q=!0,be()}}}directlySetCurrentUser(u){var d=this;return(0,P.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=uc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,P.Z)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield u._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var u=this;return(0,P.Z)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Dn(p,...u){rt.logLevel<=xe.in.WARN&&rt.warn(`Auth (${Re.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Ln(p){return(0,U.m9)(p)}class Ks{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,U.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dc={loadJS:()=>(0,P.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qu(p){return dc.loadJS(p)}function Xu(p){return`__${p}${Math.floor(1e6*Math.random())}`}class ht{constructor(u){this.type="recaptcha-enterprise",this.auth=Ln(u)}verify(u="verify",d=!1){var g=this;return(0,P.Z)(function*(){function C(){return C=(0,P.Z)(function*(re){if(!d){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var be=(0,P.Z)(function*(Ge,it){Lt(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ht=>{if(void 0!==Ht.recaptchaKey){const ei=new Ar(Ht);return null==re.tenantId?re._agentRecaptchaConfig=ei:re._tenantRecaptchaConfigs[re.tenantId]=ei,Ge(ei.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(Ht=>{it(Ht)})});return function(Ge,it){return be.apply(this,arguments)}}())}),C.apply(this,arguments)}function q(re,be,Ge){const it=window.grecaptcha;qn(it)?it.enterprise.ready(()=>{it.enterprise.execute(re,{action:u}).then(Ht=>{be(Ht)}).catch(()=>{be("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,be)=>{(function v(re){return C.apply(this,arguments)})(g.auth).then(Ge=>{if(!d&&qn(window.grecaptcha))q(Ge,re,be);else{if(typeof window>"u")return void be(new Error("RecaptchaVerifier is only supported in browser"));let it=function Of(){return dc.recaptchaEnterpriseScript}();0!==it.length&&(it+=Ge),Qu(it).then(()=>{q(Ge,re,be)}).catch(Ht=>{be(Ht)})}}).catch(Ge=>{be(Ge)})})})()}}function Ju(p,u,d){return ed.apply(this,arguments)}function ed(){return(ed=(0,P.Z)(function*(p,u,d,g=!1){const v=new ht(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const q=Object.assign({},u);return Object.assign(q,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),q})).apply(this,arguments)}function hc(p,u,d,g){return Le.apply(this,arguments)}function Le(){return Le=(0,P.Z)(function*(p,u,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield Ju(p,u,d,"getOobCode"===d);return g(p,C)}return g(p,u).catch(function(){var C=(0,P.Z)(function*(q){if("auth/missing-recaptcha-token"===q.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const re=yield Ju(p,u,d,"getOobCode"===d);return g(p,re)}return Promise.reject(q)});return function(q){return C.apply(this,arguments)}}())}),Le.apply(this,arguments)}function Cl(p,u,d){const g=Ln(p);te(g._canInitEmulator,g,"emulator-config-failed"),te(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=td(u),{host:q,port:re}=function fc(p){const u=td(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:go(g.substr(C.length+1))}}{const[C,q]=g.split(":");return{host:C,port:go(q)}}}(u);g.config.emulator={url:`${C}//${q}${null===re?"":`:${re}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:q,port:re,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Al(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function td(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function go(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class Ms{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Je("not implemented")}_getIdTokenResponse(u){return Je("not implemented")}_linkToIdToken(u,d){return Je("not implemented")}_getReauthenticationResolver(u){return Je("not implemented")}}function nd(p,u){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:resetPassword",Ee(p,u))})).apply(this,arguments)}function Ro(){return(Ro=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ci(p,u){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function on(){return(on=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:update",Ee(p,u))})).apply(this,arguments)}function g_(p,u){return pc.apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithPassword",Ee(p,u))})).apply(this,arguments)}function Ie(p,u){return xo.apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:sendOobCode",Ee(p,u))})).apply(this,arguments)}function mc(){return(mc=(0,P.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function ga(p,u){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function ma(p,u){return rd.apply(this,arguments)}function rd(){return(rd=(0,P.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function Ml(){return(Ml=(0,P.Z)(function*(p,u){return Ie(p,u)})).apply(this,arguments)}function _a(){return(_a=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithEmailLink",Ee(p,u))})).apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithEmailLink",Ee(p,u))})).apply(this,arguments)}class Mr extends Ms{constructor(u,d,g,v=null){super("password",g),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new Mr(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new Mr(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,P.Z)(function*(){switch(d.signInMethod){case"password":return hc(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",g_);case"emailLink":return function kf(p,u){return _a.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Kt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,P.Z)(function*(){switch(g.signInMethod){case"password":return hc(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ci);case"emailLink":return function No(p,u){return Oo.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Kt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Gi(p,u){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithIdp",Ee(p,u))})).apply(this,arguments)}class Wi extends Ms{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new Wi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Kt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v}=d,C=(0,Rt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const q=new Wi(g,v);return q.idToken=C.idToken||void 0,q.accessToken=C.accessToken||void 0,q.secret=C.secret,q.nonce=C.nonce,q.pendingToken=C.pendingToken||null,q}_getIdTokenResponse(u){return Gi(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Gi(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Gi(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,U.xO)(d)}return u}}function Pl(){return(Pl=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:sendVerificationCode",Ee(p,u))})).apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,u))})).apply(this,arguments)}function xl(){return(xl=(0,P.Z)(function*(p,u){const d=yield Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,u));if(d.temporaryProof)throw Sn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const qe={USER_NOT_FOUND:"user-not-found"};function Ea(){return(Ea=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",Ee(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),qe)})).apply(this,arguments)}class Ki extends Ms{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Ki({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Ki({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function Zs(p,u){return va.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function fe(p,u){return xl.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function _c(p,u){return Ea.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=u;return g||d||v||C?new Ki({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class yc{constructor(u){var d,g,v,C,q,re;const be=(0,U.zd)((0,U.pd)(u)),Ge=null!==(d=be.apiKey)&&void 0!==d?d:null,it=null!==(g=be.oobCode)&&void 0!==g?g:null,Ht=function m_(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=be.mode)&&void 0!==v?v:null);te(Ge&&it&&Ht,"argument-error"),this.apiKey=Ge,this.operation=Ht,this.code=it,this.continueUrl=null!==(C=be.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(q=be.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(re=be.tenantId)&&void 0!==re?re:null}static parseLink(u){const d=function id(p){const u=(0,U.zd)((0,U.pd)(p)).link,d=u?(0,U.zd)((0,U.pd)(u)).deep_link_id:null,g=(0,U.zd)((0,U.pd)(p)).deep_link_id;return(g?(0,U.zd)((0,U.pd)(g)).link:null)||g||d||u||p}(u);try{return new yc(d)}catch{return null}}}let mo=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Mr._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=yc.parseLink(g);return te(v,"argument-error"),Mr._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class tr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class S extends tr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class L extends S{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Wi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return te(u.idToken||u.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return L.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return L.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:q,providerId:re}=u;if(!g&&!v&&!d&&!C||!re)return null;try{return new L(re)._credential({idToken:d,accessToken:g,nonce:q,pendingToken:C})}catch{return null}}}let Q=(()=>{class p extends S{constructor(){super("facebook.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ve=(()=>{class p extends S{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Pe=(()=>{class p extends S{constructor(){super("github.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Ke extends Ms{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return Gi(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Gi(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Gi(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Ke(g,C):null}static _create(u,d){return new Ke(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _t extends tr{constructor(u){te(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return _t.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return _t.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Ke.fromJSON(u);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return Ke._create(g,d)}catch{return null}}}let $t=(()=>{class p extends S{constructor(){super("twitter.com")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Ur(p,u){return ps.apply(this,arguments)}function ps(){return(ps=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signUp",Ee(p,u))})).apply(this,arguments)}class Br{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,v=!1){return(0,P.Z)(function*(){const C=yield F._fromIdTokenResponse(u,g,v),q=pi(g);return new Br({user:C,providerId:q,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,P.Z)(function*(){yield u._updateTokensIfNecessary(g,!0);const v=pi(g);return new Br({user:u,providerId:v,_tokenResponse:g,operationType:d})})()}}function pi(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function __(p){return sd.apply(this,arguments)}function sd(){return(sd=(0,P.Z)(function*(p){var u;if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const d=Ln(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Br({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Ur(d,{returnSecureToken:!0}),v=yield Br._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class od extends U.ZR{constructor(u,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,od.prototype),this.customData={appName:u.name,tenantId:null!==(C=u.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,v){return new od(u,d,g,v)}}function Lf(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?od._fromErrorAndOperation(p,C,u,g):C})}function y_(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function db(p,u){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,P.Z)(function*(p,u){const d=(0,U.m9)(p);yield cd(!0,d,u);const{providerUserInfo:g}=yield function qi(p,u){return Zr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=y_(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Zi.apply(this,arguments)}function Vf(p,u){return ad.apply(this,arguments)}function ad(){return(ad=(0,P.Z)(function*(p,u,d=!1){const g=yield cn(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Br._forOperation(p,"link",g)})).apply(this,arguments)}function cd(p,u,d){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,P.Z)(function*(p,u,d){yield En(u);const v=!1===p?"provider-already-linked":"no-such-provider";te(y_(u.providerData).has(d)===p,u.auth,v)})).apply(this,arguments)}function v_(p,u){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,P.Z)(function*(p,u,d=!1){const{auth:g}=p;if((0,Re._isFirebaseServerApp)(g.app))return Promise.reject(xt(g));const v="reauthenticate";try{const C=yield cn(p,Lf(g,v,u,p),d);te(C.idToken,g,"internal-error");const q=Gs(C.idToken);te(q,g,"internal-error");const{sub:re}=q;return te(p.uid===re,g,"user-mismatch"),Br._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&Kt(g,"user-mismatch"),C}})).apply(this,arguments)}function jf(p,u){return $f.apply(this,arguments)}function $f(){return($f=(0,P.Z)(function*(p,u,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g="signIn",v=yield Lf(p,g,u),C=yield Br._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ld(p,u){return zf.apply(this,arguments)}function zf(){return(zf=(0,P.Z)(function*(p,u){return jf(Ln(p),u)})).apply(this,arguments)}function Gn(p,u){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,P.Z)(function*(p,u){const d=(0,U.m9)(p);return yield cd(!1,d,u.providerId),Vf(d,u)})).apply(this,arguments)}function E_(p,u){return qf.apply(this,arguments)}function qf(){return(qf=(0,P.Z)(function*(p,u){return v_((0,U.m9)(p),u)})).apply(this,arguments)}function Gf(){return(Gf=(0,P.Z)(function*(p,u){return Qe(p,"POST","/v1/accounts:signInWithCustomToken",Ee(p,u))})).apply(this,arguments)}function I_(p,u){return et.apply(this,arguments)}function et(){return et=(0,P.Z)(function*(p,u){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const d=Ln(p),g=yield function xn(p,u){return Gf.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield Br._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),et.apply(this,arguments)}class jr{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Gt._fromServerResponse(u,d):"totpInfo"in d?Rr._fromServerResponse(u,d):Kt(u,"internal-error")}}class Gt extends jr{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Gt(d)}}class Rr extends jr{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Rr(d)}}function $r(p,u,d){var g;te((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ko(p){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(p){const u=Ln(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function b_(p,u,d){return ud.apply(this,arguments)}function ud(){return(ud=(0,P.Z)(function*(p,u,d){const g=Ln(p),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&$r(g,v,d),yield hc(g,v,"getOobCode",ga)})).apply(this,arguments)}function dd(p,u,d){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,P.Z)(function*(p,u,d){yield nd((0,U.m9)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,P.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&ko(p),v});return function(v){return g.apply(this,arguments)}}())}),Wf.apply(this,arguments)}function hb(p,u){return Vn.apply(this,arguments)}function Vn(){return Vn=(0,P.Z)(function*(p,u){yield function p_(p,u){return on.apply(this,arguments)}((0,U.m9)(p),{oobCode:u})}),Vn.apply(this,arguments)}function He(p,u){return bt.apply(this,arguments)}function bt(){return(bt=(0,P.Z)(function*(p,u){const d=(0,U.m9)(p),g=yield nd(d,{oobCode:u}),v=g.requestType;switch(te(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(g.mfaInfo,d,"internal-error");default:te(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=jr._fromServerResponse(Ln(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function Un(p,u){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,P.Z)(function*(p,u){const{data:d}=yield He((0,U.m9)(p),u);return d.email})).apply(this,arguments)}function Nl(p,u,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,P.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g=Ln(p),q=yield hc(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ur).catch(be=>{throw"auth/password-does-not-meet-requirements"===be.code&&ko(p),be}),re=yield Br._fromIdTokenResponse(g,"signIn",q);return yield g._updateCurrentUser(re.user),re})).apply(this,arguments)}function vc(p,u,d){return(0,Re._isFirebaseServerApp)(p.app)?Promise.reject(xt(p)):ld((0,U.m9)(p),mo.credential(u,d)).catch(function(){var g=(0,P.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&ko(p),v});return function(v){return g.apply(this,arguments)}}())}function dr(p,u,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,P.Z)(function*(p,u,d){const g=Ln(p),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function C(q,re){te(re.handleCodeInApp,g,"argument-error"),re&&$r(g,q,re)})(v,d),yield hc(g,v,"getOobCode",ma)})).apply(this,arguments)}function Ec(p,u){const d=yc.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}function wt(p,u,d){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g=(0,U.m9)(p),v=mo.credentialWithLink(u,d||Nt());return te(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ld(g,v)})).apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:createAuthUri",Ee(p,u))})).apply(this,arguments)}function hr(p,u){return ba.apply(this,arguments)}function ba(){return ba=(0,P.Z)(function*(p,u){const g={identifier:u,continueUri:Pn()?Nt():"http://localhost"},{signinMethods:v}=yield function w_(p,u){return Fo.apply(this,arguments)}((0,U.m9)(p),g);return v||[]}),ba.apply(this,arguments)}function Ic(p,u){return gs.apply(this,arguments)}function gs(){return gs=(0,P.Z)(function*(p,u){const d=(0,U.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&$r(d.auth,v,u);const{email:C}=yield function gc(p,u){return mc.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),gs.apply(this,arguments)}function Ol(p,u,d){return hd.apply(this,arguments)}function hd(){return hd=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&$r(g.auth,C,d);const{email:q}=yield function Rs(p,u){return Ml.apply(this,arguments)}(g.auth,C);q!==p.email&&(yield p.reload())}),hd.apply(this,arguments)}function xs(){return(xs=(0,P.Z)(function*(p,u){return ae(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function kl(p,u){return wa.apply(this,arguments)}function wa(){return wa=(0,P.Z)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,U.m9)(p),C={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},q=yield cn(g,function Lo(p,u){return xs.apply(this,arguments)}(g.auth,C));g.displayName=q.displayName||null,g.photoURL=q.photoUrl||null;const re=g.providerData.find(({providerId:be})=>"password"===be);re&&(re.displayName=g.displayName,re.photoURL=g.photoURL),yield g._updateTokensIfNecessary(q)}),wa.apply(this,arguments)}function zt(p,u){const d=(0,U.m9)(p);return(0,Re._isFirebaseServerApp)(d.auth.app)?Promise.reject(xt(d.auth)):fd(d,u,null)}function fM(p,u){return fd((0,U.m9)(p),null,u)}function fd(p,u,d){return pd.apply(this,arguments)}function pd(){return pd=(0,P.Z)(function*(p,u,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(C.email=u),d&&(C.password=d);const q=yield cn(p,function Dl(p,u){return Ro.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(q,!0)}),pd.apply(this,arguments)}class _o{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class Ta extends _o{constructor(u,d,g,v){super(u,d,g),this.username=v}}class Fl extends _o{constructor(u,d){super(u,"facebook.com",d)}}class Yr extends Ta{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class pM extends _o{constructor(u,d){super(u,"google.com",d)}}class Ri extends Ta{constructor(u,d,g){super(u,"twitter.com",d,g)}}function mi(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ys(p){var u,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const q=null===(d=null===(u=Gs(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(q)return new _o(C,"anonymous"!==q&&"custom"!==q?q:null)}if(!g)return null;switch(g){case"facebook.com":return new Fl(C,v);case"github.com":return new Yr(C,v);case"google.com":return new pM(C,v);case"twitter.com":return new Ri(C,v,p.screenName||null);case"custom":case"anonymous":return new _o(C,null);default:return new _o(C,g,v)}}(d)}class wc{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new wc("enroll",u,d)}static _fromMfaPendingCredential(u){return new wc("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return wc._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return wc._fromIdtoken(u.multiFactorSession.idToken)}return null}}class A_{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Ln(u),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(re=>jr._fromServerResponse(g,re));te(v.mfaPendingCredential,g,"internal-error");const q=wc._fromMfaPendingCredential(v.mfaPendingCredential);return new A_(q,C,function(){var re=(0,P.Z)(function*(be){const Ge=yield be._process(g,q);delete v.mfaInfo,delete v.mfaPendingCredential;const it=Object.assign(Object.assign({},v),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(d.operationType){case"signIn":const Ht=yield Br._fromIdTokenResponse(g,d.operationType,it);return yield g._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return te(d.user,g,"internal-error"),Br._forOperation(d.user,d.operationType,it);default:Kt(g,"internal-error")}});return function(be){return re.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,P.Z)(function*(){return d.signInResolver(u)})()}}function yM(p,u){var d;const g=(0,U.m9)(p),v=u;return te(u.customData.operationType,g,"argument-error"),te(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),A_._fromError(g,v)}class D_{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>jr._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new D_(u)}getSession(){var u=this;return(0,P.Z)(function*(){return wc._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,P.Z)(function*(){const v=u,C=yield g.getSession(),q=yield cn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(q),g.user.reload()})()}unenroll(u){var d=this;return(0,P.Z)(function*(){const g="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const C=yield cn(d.user,function bM(p,u){return ae(p,"POST","/v2/accounts/mfaEnrollment:withdraw",Ee(p,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:q})=>q!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const gd=new WeakMap;function S_(p){const u=(0,U.m9)(p);return gd.has(u)||gd.set(u,D_._fromUser(u)),gd.get(u)}const Qf="__sak";class pb{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const gb=(()=>{class p extends pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wM(){const p=(0,U.z$)();return Vr(p)||cc(p)}()&&function rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((re,be,Ge)=>{this.notifyListeners(re,Ge)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(v);if(d.newValue!==re)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const re=this.storage.getItem(v);!g&&this.localCache[v]===re||this.notifyListeners(v,re)},q=this.storage.getItem(v);!function lc(){return(0,U.w1)()&&10===document.documentMode}()||q===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,P.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,P.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,P.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Tc=(()=>{class p extends pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let M_=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,P.Z)(function*(){const v=d,{eventId:C,eventType:q,data:re}=v.data,be=g.handlersMap[q];if(!be?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:q});const Ge=Array.from(be).map(function(){var Ht=(0,P.Z)(function*(ei){return ei(v.origin,re)});return function(ei){return Ht.apply(this,arguments)}}()),it=yield function ms(p){return Promise.all(p.map(function(){var u=(0,P.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Ge);v.ports[0].postMessage({status:"done",eventId:C,eventType:q,response:it})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Cc(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class R_{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var v=this;return(0,P.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let q,re;return new Promise((be,Ge)=>{const it=Cc("",20);C.port1.start();const Ht=setTimeout(()=>{Ge(new Error("unsupported_event"))},g);re={messageChannel:C,onMessage(ei){const xi=ei;if(xi.data.eventId===it)switch(xi.data.status){case"ack":clearTimeout(Ht),q=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),be(xi.data.response);break;default:clearTimeout(Ht),clearTimeout(q),Ge(new Error("invalid_response"))}}},v.handlers.add(re),C.port1.addEventListener("message",re.onMessage),v.target.postMessage({eventType:u,eventId:it,data:d},[C.port2])}).finally(()=>{re&&v.removeMessageHandler(re)})})()}}function fr(){return window}function md(){return typeof fr().WorkerGlobalScope<"u"&&"function"==typeof fr().importScripts}function Ll(){return(Ll=(0,P.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Jf="firebaseLocalStorageDb",Uo="firebaseLocalStorage",Aa="fbase_key";class Ac{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function ep(p,u){return p.transaction([Uo],u?"readwrite":"readonly").objectStore(Uo)}function N_(){const p=indexedDB.open(Jf,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Uo,{keyPath:Aa})}catch(v){d(v)}}),p.addEventListener("success",(0,P.Z)(function*(){const g=p.result;g.objectStoreNames.contains(Uo)?u(g):(g.close(),yield function TM(){const p=indexedDB.deleteDatabase(Jf);return new Ac(p).toPromise()}(),u(yield N_()))}))})}function O_(p,u,d){return tp.apply(this,arguments)}function tp(){return(tp=(0,P.Z)(function*(p,u,d){const g=ep(p,!0).put({[Aa]:u,value:d});return new Ac(g).toPromise()})).apply(this,arguments)}function yd(){return(yd=(0,P.Z)(function*(p,u){const d=ep(p,!1).get(u),g=yield new Ac(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function vd(p,u){const d=ep(p,!0).delete(u);return new Ac(d).toPromise()}const _b=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,P.Z)(function*(){return d.db||(d.db=yield N_()),d.db})()}_withRetries(d){var g=this;return(0,P.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,P.Z)(function*(){return md()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,P.Z)(function*(){d.receiver=M_._getInstance(function x_(){return md()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,P.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,P.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,P.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Xf(){return Ll.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new R_(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,P.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function P_(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.Z)(function*(){try{if(!indexedDB)return!1;const d=yield N_();return yield O_(d,Qf,"1"),yield vd(d,Qf),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,P.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,P.Z)(function*(){return v._withPendingWrite((0,P.Z)(function*(){return yield v._withRetries(C=>O_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,P.Z)(function*(){const v=yield g._withRetries(C=>function CM(p,u){return yd.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,P.Z)(function*(){return g._withPendingWrite((0,P.Z)(function*(){return yield g._withRetries(v=>vd(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,P.Z)(function*(){const g=yield d._withRetries(q=>{const re=ep(q,!1).getAll();return new Ac(re).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:q,value:re}of g)C.add(q),JSON.stringify(d.localCache[q])!==JSON.stringify(re)&&(d.notifyListeners(q,re),v.push(q));for(const q of Object.keys(d.localCache))d.localCache[q]&&!C.has(q)&&(d.notifyListeners(q,null),v.push(q));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,P.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Ed=1e12;class L_{constructor(u){this.auth=u,this.counter=Ed,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Ib(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||Ed;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Ed))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,P.Z)(function*(){var g;return null===(g=d._widgets.get(u||Ed))||void 0===g||g.execute(),""})()}}class Ib{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;te(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function V_(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rp=Xu("rcb"),AM=new cr(3e4,6e4);class bb{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=fr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return te(function _s(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Yt(fr().grecaptcha)?Promise.resolve(fr().grecaptcha):new Promise((g,v)=>{const C=fr().setTimeout(()=>{v(Zt(u,"network-request-failed"))},AM.get());fr()[rp]=()=>{fr().clearTimeout(C),delete fr()[rp];const re=fr().grecaptcha;if(!re||!Yt(re))return void v(Zt(u,"internal-error"));const be=re.render;re.render=(Ge,it)=>{const Ht=be(Ge,it);return this.counter++,Ht},this.hostLanguage=d,g(re)},Qu(`${function Yu(){return dc.recaptchaV2Script}()}?${(0,U.xO)({onload:rp,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Zt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=fr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class U_{load(u){return(0,P.Z)(function*(){return new L_(u)})()}clearedOneInstance(){}}const B_="recaptcha",wb={theme:"light",type:"image"};class j_{constructor(u,d,g=Object.assign({},wb)){this.parameters=g,this.type=B_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(u),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;te(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new U_:new bb,this.validateStartingState()}verify(){var u=this;return(0,P.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const q=re=>{re&&(u.tokenChangeListeners.delete(q),C(re))};u.tokenChangeListeners.add(q),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=fr()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,P.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,P.Z)(function*(){te(Pn()&&!md(),u.auth,"internal-error"),yield function $_(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Hi(p){return oi.apply(this,arguments)}(u.auth);te(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ip{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Ki._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function sp(p,u,d){return op.apply(this,arguments)}function op(){return(op=(0,P.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g=Ln(p),v=yield Dc(g,u,(0,U.m9)(d));return new ip(v,C=>ld(g,C))})).apply(this,arguments)}function Xs(p,u,d){return Id.apply(this,arguments)}function Id(){return(Id=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);yield cd(!1,g,"phone");const v=yield Dc(g.auth,u,(0,U.m9)(d));return new ip(v,C=>Gn(g,C))})).apply(this,arguments)}function z_(p,u,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(xt(g.auth));const v=yield Dc(g.auth,u,(0,U.m9)(d));return new ip(v,C=>E_(g,C))})).apply(this,arguments)}function Dc(p,u,d){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,P.Z)(function*(p,u,d){var g;const v=yield d.verify();try{let C;if(te("string"==typeof v,p,"argument-error"),te(d.type===B_,p,"argument-error"),C="string"==typeof u?{phoneNumber:u}:u,"session"in C){const q=C.session;if("phoneNumber"in C)return te("enroll"===q.type,p,"internal-error"),(yield function vM(p,u){return ae(p,"POST","/v2/accounts/mfaEnrollment:start",Ee(p,u))}(p,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{te("signin"===q.type,p,"internal-error");const re=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return te(re,p,"missing-multi-factor-info"),(yield function yb(p,u){return ae(p,"POST","/v2/accounts/mfaSignIn:start",Ee(p,u))}(p,{mfaPendingCredential:q.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function ya(p,u){return Pl.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return q}}finally{d._reset()}}),Sc.apply(this,arguments)}function Pi(p,u){return ap.apply(this,arguments)}function ap(){return(ap=(0,P.Z)(function*(p,u){const d=(0,U.m9)(p);if((0,Re._isFirebaseServerApp)(d.auth.app))return Promise.reject(xt(d.auth));yield Vf(d,u)})).apply(this,arguments)}let H_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Ln(d)}verifyPhoneNumber(d,g){return Dc(this.auth,d,(0,U.m9)(g))}static credential(d,g){return Ki._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Ki._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function ys(p,u){return u?Oe(u):(te(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class _i extends Ms{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Gi(u,this._buildIdpRequest())}_linkToIdToken(u,d){return Gi(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return Gi(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function Tb(p){return jf(p.auth,new _i(p),p.bypassAuthState)}function Cb(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),v_(d,new _i(p),p.bypassAuthState)}function Ab(p){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),Vf(d,new _i(p),p.bypassAuthState)})).apply(this,arguments)}class cp{constructor(u,d,g,v,C=!1){this.auth=u,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,P.Z)(function*(g,v){u.pendingPromise={resolve:g,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(C){u.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,P.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:q,error:re,type:be}=u;if(re)return void d.reject(re);const Ge={auth:d.auth,requestUri:g,sessionId:v,tenantId:q||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(be)(Ge))}catch(it){d.reject(it)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Tb;case"linkViaPopup":case"linkViaRedirect":return Ab;case"reauthViaPopup":case"reauthViaRedirect":return Cb;default:Kt(this.auth,"internal-error")}}resolve(u){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Db=new cr(2e3,1e4);function q_(p,u,d){return bd.apply(this,arguments)}function bd(){return(bd=(0,P.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Zt(p,"operation-not-supported-in-this-environment"));const g=Ln(p);ft(p,u,tr);const v=ys(g,d);return new W_(g,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function G_(p,u,d){return lp.apply(this,arguments)}function lp(){return(lp=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Zt(g.auth,"operation-not-supported-in-this-environment"));ft(g.auth,u,tr);const v=ys(g.auth,d);return new W_(g.auth,"reauthViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}function yt(p,u,d){return wd.apply(this,arguments)}function wd(){return(wd=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);ft(g.auth,u,tr);const v=ys(g.auth,d);return new W_(g.auth,"linkViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}let W_=(()=>{class p extends cp{constructor(d,g,v,C,q){super(d,g,C,q),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,P.Z)(function*(){const g=yield d.execute();return te(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,P.Z)(function*(){vt(1===d.filter.length,"Popup operations only handle one event");const g=Cc();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Zt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Db.get())};d()}}return p.currentPopupAction=null,p})();const Sb="pendingRedirect",Vl=new Map;class Mb extends cp{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,P.Z)(function*(){let g=Vl.get(d.auth._key());if(!g){try{const C=(yield function K_(p,u){return Bo.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Vl.set(d.auth._key(),g)}return d.bypassAuthState||Vl.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,P.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const v=yield g.auth._redirectUserForId(u.eventId);if(v)return g.user=v,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,P.Z)(function*(){})()}cleanUp(){}}function Bo(){return(Bo=(0,P.Z)(function*(p,u){const d=we(u),g=Q_(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function up(p,u){return dp.apply(this,arguments)}function dp(){return(dp=(0,P.Z)(function*(p,u){return Q_(p)._set(we(u),"true")})).apply(this,arguments)}function Rb(){Vl.clear()}function Z_(p,u){Vl.set(p._key(),u)}function Q_(p){return Oe(p._redirectPersistence)}function we(p){return Xt(Sb,p.config.apiKey,p.name)}function Jt(p,u,d){return function Y_(p,u,d){return Td.apply(this,arguments)}(p,u,d)}function Td(){return(Td=(0,P.Z)(function*(p,u,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g=Ln(p);ft(p,u,tr),yield g._initializationPromise;const v=ys(g,d);return yield up(v,g),v._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function Xr(p,u,d){return function X_(p,u,d){return Da.apply(this,arguments)}(p,u,d)}function Da(){return(Da=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);if(ft(g.auth,u,tr),(0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(xt(g.auth));yield g.auth._initializationPromise;const v=ys(g.auth,d);yield up(v,g.auth);const C=yield to(g);return v._openRedirect(g.auth,u,"reauthViaRedirect",C)})).apply(this,arguments)}function eo(p,u,d){return function hp(p,u,d){return Ul.apply(this,arguments)}(p,u,d)}function Ul(){return(Ul=(0,P.Z)(function*(p,u,d){const g=(0,U.m9)(p);ft(g.auth,u,tr),yield g.auth._initializationPromise;const v=ys(g.auth,d);yield cd(!1,g,u.providerId),yield up(v,g.auth);const C=yield to(g);return v._openRedirect(g.auth,u,"linkViaRedirect",C)})).apply(this,arguments)}function Pb(p,u){return J_.apply(this,arguments)}function J_(){return(J_=(0,P.Z)(function*(p,u){return yield Ln(p)._initializationPromise,Cd(p,u,!1)})).apply(this,arguments)}function Cd(p,u){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(p,u,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(xt(p));const g=Ln(p),v=ys(g,u),q=yield new Mb(g,v,d).execute();return q&&!d&&(delete q.user._redirectEventId,yield g._persistUserIfCurrent(q.user),yield g._setRedirectUser(null,u)),q})).apply(this,arguments)}function to(p){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,P.Z)(function*(p){const u=Cc(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class no{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function xb(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fp(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!fp(u)){const v=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Zt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ey(u))}saveEventToCache(u){this.cachedEventUids.add(ey(u)),this.lastProcessedEventTime=Date.now()}}function ey(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function fp({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function ty(p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,P.Z)(function*(p,u={}){return ae(p,"GET","/v1/projects",u)})).apply(this,arguments)}const pp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ny=/^https?/;function mp(){return(mp=(0,P.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield ty(p);for(const d of u)try{if(ry(d))return}catch{}Kt(p,"unauthorized-domain")})).apply(this,arguments)}function ry(p){const u=Nt(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const q=new URL(p);return""===q.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&q.hostname===g}if(!ny.test(d))return!1;if(pp.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const _p=new cr(3e4,6e4);function yp(){const p=fr().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let jl=null;const vp=new cr(5e3,15e3),Nb="__/auth/iframe",Ob="emulator/auth/iframe",yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wn(p){const u=p.config;te(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?ie(u,Ob):`https://${p.config.authDomain}/${Nb}`,g={apiKey:u.apiKey,appName:p.name,v:Re.SDK_VERSION},v=Sa.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,U.xO)(g).slice(1)}`}function Ep(){return Ep=(0,P.Z)(function*(p){const u=yield function sy(p){return jl=jl||function iy(p){return new Promise((u,d)=>{var g,v,C;function q(){yp(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{yp(),d(Zt(p,"network-request-failed"))},timeout:_p.get()})}if(null!==(v=null===(g=fr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(C=fr().gapi)||void 0===C||!C.load){const re=Xu("iframefcb");return fr()[re]=()=>{gapi.load?q():d(Zt(p,"network-request-failed"))},Qu(`${function d_(){return dc.gapiScript}()}?onload=${re}`).catch(be=>d(be))}q()}}).catch(u=>{throw jl=null,u})}(p),jl}(p),d=fr().gapi;return te(d,p,"internal-error"),u.open({where:document.body,url:Wn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yi,dontclear:!0},g=>new Promise(function(){var v=(0,P.Z)(function*(C,q){yield g.restyle({setHideOnLeave:!1});const re=Zt(p,"network-request-failed"),be=fr().setTimeout(()=>{q(re)},vp.get());function Ge(){fr().clearTimeout(be),C(g)}g.ping(Ge).then(Ge,()=>{q(re)})});return function(C,q){return v.apply(this,arguments)}}()))}),Ep.apply(this,arguments)}const Fb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yo{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Md="__/auth/handler",Rd="emulator/auth/handler",Ip=encodeURIComponent("fac");function Pd(p,u,d,g,v,C){return xd.apply(this,arguments)}function xd(){return(xd=(0,P.Z)(function*(p,u,d,g,v,C){te(p.config.authDomain,p,"auth-domain-config-required"),te(p.config.apiKey,p,"invalid-api-key");const q={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Re.SDK_VERSION,eventId:v};if(u instanceof tr){u.setDefaultLanguage(p.languageCode),q.providerId=u.providerId||"",(0,U.xb)(u.getCustomParameters())||(q.customParameters=JSON.stringify(u.getCustomParameters()));for(const[it,Ht]of Object.entries(C||{}))q[it]=Ht}if(u instanceof S){const it=u.getScopes().filter(Ht=>""!==Ht);it.length>0&&(q.scopes=it.join(","))}p.tenantId&&(q.tid=p.tenantId);const re=q;for(const it of Object.keys(re))void 0===re[it]&&delete re[it];const be=yield p._getAppCheckToken(),Ge=be?`#${Ip}=${encodeURIComponent(be)}`:"";return`${function Ub({config:p}){return p.emulator?ie(p,Rd):`https://${p.authDomain}/${Md}`}(p)}?${(0,U.xO)(re).slice(1)}${Ge}`})).apply(this,arguments)}const jo="webStorageSupport",cy=class $l{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tc,this._completeRedirectFn=Cd,this._overrideRedirectResult=Z_}_openPopup(u,d,g,v){var C=this;return(0,P.Z)(function*(){var q;vt(null===(q=C.eventManagers[u._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const re=yield Pd(u,d,g,Nt(),v);return function Vb(p,u,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),q=Math.max((window.screen.availWidth-g)/2,0).toString();let re="";const be=Object.assign(Object.assign({},Fb),{width:g.toString(),height:v.toString(),top:C,left:q}),Ge=(0,U.z$)().toLowerCase();d&&(re=po(Ge)?"_blank":d),st(Ge)&&(u=u||"http://localhost",be.scrollbars="yes");const it=Object.entries(be).reduce((ei,[xi,kd])=>`${ei}${xi}=${kd},`,"");if(function ue(p=(0,U.z$)()){var u;return cc(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ge)&&"_self"!==re)return function Sd(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",re),new yo(null);const Ht=window.open(u||"",re,it);te(Ht,p,"popup-blocked");try{Ht.focus()}catch{}return new yo(Ht)}(u,re,Cc())})()}_openRedirect(u,d,g,v){var C=this;return(0,P.Z)(function*(){return yield C._originValidation(u),function Yf(p){fr().location.href=p}(yield Pd(u,d,g,Nt(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(vt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,P.Z)(function*(){const g=yield function kb(p){return Ep.apply(this,arguments)}(u),v=new no(u);return g.register("authEvent",C=>(te(C?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=g,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(jo,{type:jo},v=>{var C;const q=null===(C=v?.[0])||void 0===C?void 0:C[jo];void 0!==q&&d(!!q),Kt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function gp(p){return mp.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return gt()||Vr()||cc()}};class DM{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return Je("unexpected MultiFactorSessionType")}}}class zl extends DM{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new zl(u)}_finalizeEnroll(u,d,g){return function EM(p,u){return ae(p,"POST","/v2/accounts/mfaEnrollment:finalize",Ee(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function k_(p,u){return ae(p,"POST","/v2/accounts/mfaSignIn:finalize",Ee(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let SM=(()=>{class p{constructor(){}static assertion(d){return zl._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Nd="@firebase/auth";class jb{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,P.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function Zu(p){dc=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=v=>{const C=Zt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function ro(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Tp(p){(0,Re._registerComponent)(new Cn.wA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),C=u.getProvider("app-check-internal"),{apiKey:q,authDomain:re}=g.options;te(q&&!q.includes(":"),"invalid-api-key",{appName:g.name});const be={apiKey:q,authDomain:re,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uc(p)},Ge=new Nf(g,v,C,be);return function Tl(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Oe);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Ge,d),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Cn.wA("auth-internal",u=>{const d=Ln(u.getProvider("auth").getImmediate());return new jb(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(Nd,"1.7.4",function Hl(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Re.registerVersion)(Nd,"1.7.4","esm2017")}("Browser")},58:(ls,zn,We)=>{We.d(zn,{$s:()=>fs,BH:()=>Cr,G6:()=>cr,L:()=>Dt,LL:()=>ae,P0:()=>gn,Pz:()=>Zt,Sg:()=>xt,UG:()=>te,ZB:()=>Ye,ZR:()=>Ee,aH:()=>Kt,b$:()=>Nt,eu:()=>se,hl:()=>ie,jU:()=>Je,m9:()=>ke,ne:()=>qs,pd:()=>qi,r3:()=>Yt,ru:()=>vt,tV:()=>me,uI:()=>Se,vZ:()=>oi,w1:()=>dn,xO:()=>us,xb:()=>Ar,z$:()=>ft,zI:()=>le,zd:()=>Ci});const xe=function(M){const x=[];let b=0;for(let D=0;D<M.length;D++){let w=M.charCodeAt(D);w<128?x[b++]=w:w<2048?(x[b++]=w>>6|192,x[b++]=63&w|128):55296==(64512&w)&&D+1<M.length&&56320==(64512&M.charCodeAt(D+1))?(w=65536+((1023&w)<<10)+(1023&M.charCodeAt(++D)),x[b++]=w>>18|240,x[b++]=w>>12&63|128,x[b++]=w>>6&63|128,x[b++]=63&w|128):(x[b++]=w>>12|224,x[b++]=w>>6&63|128,x[b++]=63&w|128)}return x},Cn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(M,x){if(!Array.isArray(M))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,D=[];for(let w=0;w<M.length;w+=3){const F=M[w],de=w+1<M.length,Oe=de?M[w+1]:0,$e=w+2<M.length,pt=$e?M[w+2]:0;let In=(15&Oe)<<2|pt>>6,st=63&pt;$e||(st=64,de||(In=64)),D.push(b[F>>2],b[(3&F)<<4|Oe>>4],b[In],b[st])}return D.join("")},encodeString(M,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(M):this.encodeByteArray(xe(M),x)},decodeString(M,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(M):function(M){const x=[];let b=0,D=0;for(;b<M.length;){const w=M[b++];if(w<128)x[D++]=String.fromCharCode(w);else if(w>191&&w<224){const F=M[b++];x[D++]=String.fromCharCode((31&w)<<6|63&F)}else if(w>239&&w<365){const $e=((7&w)<<18|(63&M[b++])<<12|(63&M[b++])<<6|63&M[b++])-65536;x[D++]=String.fromCharCode(55296+($e>>10)),x[D++]=String.fromCharCode(56320+(1023&$e))}else{const F=M[b++],de=M[b++];x[D++]=String.fromCharCode((15&w)<<12|(63&F)<<6|63&de)}}return x.join("")}(this.decodeStringToByteArray(M,x))},decodeStringToByteArray(M,x){this.init_();const b=x?this.charToByteMapWebSafe_:this.charToByteMap_,D=[];for(let w=0;w<M.length;){const F=b[M.charAt(w++)],Oe=w<M.length?b[M.charAt(w)]:0;++w;const pt=w<M.length?b[M.charAt(w)]:64;++w;const Fe=w<M.length?b[M.charAt(w)]:64;if(++w,null==F||null==Oe||null==pt||null==Fe)throw new An;D.push(F<<2|Oe>>4),64!==pt&&(D.push(Oe<<4&240|pt>>2),64!==Fe&&D.push(pt<<6&192|Fe))}return D},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let M=0;M<this.ENCODED_VALS.length;M++)this.byteToCharMap_[M]=this.ENCODED_VALS.charAt(M),this.charToByteMap_[this.byteToCharMap_[M]]=M,this.byteToCharMapWebSafe_[M]=this.ENCODED_VALS_WEBSAFE.charAt(M),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[M]]=M,M>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(M)]=M,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(M)]=M)}}};class An extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dt=function(M){return function(M){const x=xe(M);return Cn.encodeByteArray(x,!0)}(M).replace(/\./g,"")},me=function(M){try{return Cn.decodeString(M,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function Ye(M,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===M&&(M={});break;case Array:M=[];break;default:return x}for(const b in x)!x.hasOwnProperty(b)||!It(b)||(M[b]=Ye(M[b],x[b]));return M}function It(M){return"__proto__"!==M}const rt=()=>{try{return function jt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const M=process.env.__FIREBASE_DEFAULTS__;return M?JSON.parse(M):void 0})()||(()=>{if(typeof document>"u")return;let M;try{M=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const x=M&&me(M[1]);return x&&JSON.parse(x)})()}catch(M){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${M}`)}},gn=M=>{const x=(M=>{var x,b;return null===(b=null===(x=rt())||void 0===x?void 0:x.emulatorHosts)||void 0===b?void 0:b[M]})(M);if(!x)return;const b=x.lastIndexOf(":");if(b<=0||b+1===x.length)throw new Error(`Invalid host ${x} with no separate hostname and port!`);const D=parseInt(x.substring(b+1),10);return"["===x[0]?[x.substring(1,b-1),D]:[x.substring(0,b),D]},Kt=()=>{var M;return null===(M=rt())||void 0===M?void 0:M.config},Zt=M=>{var x;return null===(x=rt())||void 0===x?void 0:x[`_${M}`]};class Cr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,b)=>{this.resolve=x,this.reject=b})}wrapCallback(x){return(b,D)=>{b?this.reject(b):this.resolve(D),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x(b):x(b,D))}}}function xt(M,x){if(M.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const D=x||"demo-project",w=M.iat||0,F=M.sub||M.user_id;if(!F)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${D}`,aud:D,iat:w,exp:w+3600,auth_time:w,sub:F,user_id:F,firebase:{sign_in_provider:"custom",identities:{}}},M);return[Dt(JSON.stringify({alg:"none",type:"JWT"})),Dt(JSON.stringify(de)),""].join(".")}function ft(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function te(){var M;const x=null===(M=rt())||void 0===M?void 0:M.forceEnvironment;if("node"===x)return!0;if("browser"===x)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function vt(){const M="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof M&&void 0!==M.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dn(){const M=ft();return M.indexOf("MSIE ")>=0||M.indexOf("Trident/")>=0}function cr(){return!te()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((M,x)=>{try{let b=!0;const D="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(D);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(D),M(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var F;x((null===(F=w.error)||void 0===F?void 0:F.message)||"")}}catch(b){x(b)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(x,b,D){super(b),this.code=x,this.customData=D,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(x,b,D){this.service=x,this.serviceName=b,this.errors=D}create(x,...b){const D=b[0]||{},w=`${this.service}/${x}`,F=this.errors[x],de=F?function Ne(M,x){return M.replace(Ft,(b,D)=>{const w=x[D];return null!=w?String(w):`<${D}?>`})}(F,D):"Error";return new Ee(w,`${this.serviceName}: ${de} (${w}).`,D)}}const Ft=/\{\$([^}]+)}/g;function Yt(M,x){return Object.prototype.hasOwnProperty.call(M,x)}function Ar(M){for(const x in M)if(Object.prototype.hasOwnProperty.call(M,x))return!1;return!0}function oi(M,x){if(M===x)return!0;const b=Object.keys(M),D=Object.keys(x);for(const w of b){if(!D.includes(w))return!1;const F=M[w],de=x[w];if(Lt(F)&&Lt(de)){if(!oi(F,de))return!1}else if(F!==de)return!1}for(const w of D)if(!b.includes(w))return!1;return!0}function Lt(M){return null!==M&&"object"==typeof M}function us(M){const x=[];for(const[b,D]of Object.entries(M))Array.isArray(D)?D.forEach(w=>{x.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):x.push(encodeURIComponent(b)+"="+encodeURIComponent(D));return x.length?"&"+x.join("&"):""}function Ci(M){const x={};return M.replace(/^\?/,"").split("&").forEach(D=>{if(D){const[w,F]=D.split("=");x[decodeURIComponent(w)]=decodeURIComponent(F)}}),x}function qi(M){const x=M.indexOf("?");if(!x)return"";const b=M.indexOf("#",x);return M.substring(x,b>0?b:void 0)}function qs(M,x){const b=new Ai(M,x);return b.subscribe.bind(b)}class Ai{constructor(x,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{x(this)}).catch(D=>{this.error(D)})}next(x){this.forEachObserver(b=>{b.next(x)})}error(x){this.forEachObserver(b=>{b.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,b,D){let w;if(void 0===x&&void 0===b&&void 0===D)throw new Error("Missing Observer.");w=function Qr(M,x){if("object"!=typeof M||null===M)return!1;for(const b of x)if(b in M&&"function"==typeof M[b])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:b,complete:D},void 0===w.next&&(w.next=nn),void 0===w.error&&(w.error=nn),void 0===w.complete&&(w.complete=nn);const F=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),F}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,x)}sendOne(x,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{b(this.observers[x])}catch(D){typeof console<"u"&&console.error&&console.error(D)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}const lr=1e3,En=2,Dr=144e5,hs=.5;function fs(M,x=lr,b=En){const D=x*Math.pow(b,M),w=Math.round(hs*D*(Math.random()-.5)*2);return Math.min(Dr,D+w)}function ke(M){return M&&M._delegate?M._delegate:M}},296:(ls,zn,We)=>{function P(n){return"function"==typeof n}function Re(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const U=Re(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function xe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Rt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(P(r))try{r()}catch(s){e=s instanceof U?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Bt(s)}catch(o){e=e??[],o instanceof U?e=[...e,...o.errors]:e.push(o)}}if(e)throw new U(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bt(e);else{if(e instanceof Rt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xe(t,e)}remove(e){const{_finalizers:t}=this;t&&xe(t,e),e instanceof Rt&&e._removeParent(this)}}Rt.EMPTY=(()=>{const n=new Rt;return n.closed=!0,n})();const Cn=Rt.EMPTY;function An(n){return n instanceof Rt||n&&"closed"in n&&P(n.remove)&&P(n.add)&&P(n.unsubscribe)}function Bt(n){P(n)?n():n.unsubscribe()}const Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},me={setTimeout(n,e,...t){const{delegate:r}=me;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=me;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ce(n){me.setTimeout(()=>{const{onUnhandledError:e}=Dt;if(!e)throw n;e(n)})}function Ye(){}const It=Pt("C",void 0,void 0);function Pt(n,e,t){return{kind:n,value:e,error:t}}let ct=null;function rt(n){if(Dt.useDeprecatedSynchronousErrorHandling){const e=!ct;if(e&&(ct={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ct;if(ct=null,t)throw r}}else n()}class gn extends Rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,An(e)&&e.add(this)):this.destination=Je}static create(e,t,r){return new xt(e,t,r)}next(e){this.isStopped?te(function Hn(n){return Pt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?te(function jt(n){return Pt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?te(It,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Kt=Function.prototype.bind;function Zt(n,e){return Kt.call(n,e)}class Cr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ft(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ft(r)}else ft(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ft(t)}}}class xt extends gn{constructor(e,t,r){let i;if(super(),P(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Dt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zt(e.next,s),error:e.error&&Zt(e.error,s),complete:e.complete&&Zt(e.complete,s)}):i=e}this.destination=new Cr(i)}}function ft(n){Dt.useDeprecatedSynchronousErrorHandling?function Dn(n){Dt.useDeprecatedSynchronousErrorHandling&&ct&&(ct.errorThrown=!0,ct.error=n)}(n):Ce(n)}function te(n,e){const{onStoppedNotification:t}=Dt;t&&me.setTimeout(()=>t(n,e))}const Je={closed:!0,next:Ye,error:function Se(n){throw n},complete:Ye},vt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Nt(n){return n}function dn(n){return 0===n.length?Nt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Et=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ie(n){return n&&n instanceof gn||function cr(n){return n&&P(n.next)&&P(n.error)&&P(n.complete)}(n)&&An(n)}(t)?t:new xt(t,r,i);return rt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=mn(r))((i,s)=>{const o=new xt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[vt](){return this}pipe(...t){return dn(t)(this)}toPromise(t){return new(t=mn(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mn(n){var e;return null!==(e=n??Dt.Promise)&&void 0!==e?e:Promise}const se=Re(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let le=(()=>{class n extends Et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ge(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new se}next(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Cn:(this.currentObservers=null,s.push(t),new Rt(()=>{this.currentObservers=null,xe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Et;return t.source=this,t}}return n.create=(e,t)=>new ge(e,t),n})();class ge extends le{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Cn}}function Ee(n){return P(n?.lift)}function ae(n){return e=>{if(Ee(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new Ft(n,e,t,r,i)}class Ft extends gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Me(n,e){return ae((t,r)=>{let i=0;t.subscribe(Ne(r,s=>{r.next(n.call(e,s,i++))}))})}var Qe=We(582);const Vt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function _n(n){return P(n?.then)}function hn(n){return P(n[vt])}function vn(n){return Symbol.asyncIterator&&P(n?.[Symbol.asyncIterator])}function Sn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const qn=function Yt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ar(n){return P(n?.[qn])}function Hi(n){return(0,Qe.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Qe.qq)(t.read());if(i)return yield(0,Qe.qq)(void 0);yield yield(0,Qe.qq)(r)}}finally{t.releaseLock()}})}function oi(n){return P(n?.getReader)}function Lt(n){if(n instanceof Et)return n;if(null!=n){if(hn(n))return function ai(n){return new Et(e=>{const t=n[vt]();if(P(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Vt(n))return function us(n){return new Et(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(_n(n))return function Ci(n){return new Et(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ce)})}(n);if(vn(n))return Zr(n);if(Ar(n))return function qi(n){return new Et(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(oi(n))return function qs(n){return Zr(Hi(n))}(n)}throw Sn(n)}function Zr(n){return new Et(e=>{(function Ai(n,e){var t,r,i,s;return(0,Qe.mG)(this,void 0,void 0,function*(){try{for(t=(0,Qe.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function gr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nn(n,e,t=1/0){return P(e)?nn((r,i)=>Me((s,o)=>e(r,s,i,o))(Lt(n(r,i))),t):("number"==typeof e&&(t=e),ae((r,i)=>function Qr(n,e,t,r,i,s,o,a){const c=[];let l=0,f=0,m=!1;const y=()=>{m&&!c.length&&!l&&e.complete()},I=N=>l<r?T(N):c.push(N),T=N=>{s&&e.next(N),l++;let O=!1;Lt(t(N,f++)).subscribe(Ne(e,W=>{i?.(W),s?I(W):e.next(W)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;c.length&&l<r;){const W=c.shift();o?gr(e,o,()=>T(W)):T(W)}y()}catch(W){e.error(W)}}))};return n.subscribe(Ne(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Fr(n=1/0){return nn(Nt,n)}const Fn=new Et(n=>n.complete());function Lr(n){return n[n.length-1]}function Si(n){return P(Lr(n))?n.pop():void 0}function ds(n){return function cn(n){return n&&P(n.schedule)}(Lr(n))?n.pop():void 0}function En(n,e=0){return ae((t,r)=>{t.subscribe(Ne(r,i=>gr(r,n,()=>r.next(i),e),()=>gr(r,n,()=>r.complete(),e),i=>gr(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ke(n,e){if(!n)throw new Error("Iterable cannot be null");return new Et(t=>{gr(t,e,()=>{const r=n[Symbol.asyncIterator]();gr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function x(n,e){if(null!=n){if(hn(n))return function hs(n,e){return Lt(n).pipe(Dr(e),En(e))}(n,e);if(Vt(n))return function Ss(n,e){return new Et(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(_n(n))return function fs(n,e){return Lt(n).pipe(Dr(e),En(e))}(n,e);if(vn(n))return ke(n,e);if(Ar(n))return function Ws(n,e){return new Et(t=>{let r;return gr(t,e,()=>{r=n[qn](),gr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>P(r?.return)&&r.return()})}(n,e);if(oi(n))return function M(n,e){return ke(Hi(n),e)}(n,e)}throw Sn(n)}(n,e):Lt(n)}function D(...n){const e=ds(n),t=function lr(n,e){return"number"==typeof Lr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Lt(r[0]):Fr(t)(b(r,e)):Fn}class w extends le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function F(...n){return b(n,ds(n))}function de(n={}){const{connector:e=(()=>new le),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},T=()=>{const N=o;I(),N?.unsubscribe()};return ae((N,O)=>{l++,!m&&!f&&y();const W=c=c??e();O.add(()=>{l--,0===l&&!m&&!f&&(a=Oe(T,i))}),W.subscribe(O),!o&&l>0&&(o=new xt({next:j=>W.next(j),error:j=>{m=!0,y(),a=Oe(I,t,j),W.error(j)},complete:()=>{f=!0,y(),a=Oe(I,r),W.complete()}}),Lt(N).subscribe(o))})(s)}}function Oe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new xt({next:()=>{r.unsubscribe(),n()}});return Lt(e(...t)).subscribe(r)}function $e(n,e){return ae((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ne(r,c=>{i?.unsubscribe();let l=0;const f=s++;Lt(n(c,f)).subscribe(i=Ne(r,m=>r.next(e?e(c,m,f,l++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pt(n,e=Nt){return n=n??Xt,ae((t,r)=>{let i,s=!0;t.subscribe(Ne(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Xt(n,e){return n===e}function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function In(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function st(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(st).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Vr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const po=Fe({__forward_ref__:Fe});function ln(n){return n.__forward_ref__=ln,n.toString=function(){return st(this())},n}function dt(n){return oc(n)?n():n}function oc(n){return"function"==typeof n&&n.hasOwnProperty(po)&&n.__forward_ref__===ln}function ac(n){return n&&!!n.\u0275providers}const fa="https://g.co/ng/security#xss";class ue extends Error{constructor(e,t){super(function lc(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function gt(n){return"string"==typeof n?n:null==n?"":String(n)}function ur(n,e){throw new ue(-201,!1)}function Mi(n,e){null==n&&function ht(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function pa(n){return Cl(n,go)||Cl(n,Ms)}function Cl(n,e){return n.hasOwnProperty(e)?n[e]:null}function fc(n){return n&&(n.hasOwnProperty(Al)||n.hasOwnProperty(nd))?n[Al]:null}const go=Fe({\u0275prov:Fe}),Al=Fe({\u0275inj:Fe}),Ms=Fe({ngInjectableDef:Fe}),nd=Fe({ngInjectorDef:Fe});var Ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ct||{});let Dl;function ci(n){const e=Dl;return Dl=n,e}function Po(n,e,t){const r=pa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ct.Optional?null:void 0!==e?e:void ur(st(n))}const on=globalThis;class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const No={},Oo="__NG_DI_FLAG__",Mr="ngTempTokenPath",Rl=/\n/gm,Wi="__source";let ya;function Zs(n){const e=ya;return ya=n,e}function va(n,e=Ct.Default){if(void 0===ya)throw new ue(-203,!1);return null===ya?Po(n,void 0,e):ya.get(n,e&Ct.Optional?null:void 0,e)}function fe(n,e=Ct.Default){return(function Ro(){return Dl}()||va)(dt(n),e)}function qe(n,e=Ct.Default){return fe(n,_c(e))}function _c(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ea(n){const e=[];for(let t=0;t<n.length;t++){const r=dt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ue(900,!1);let i,s=Ct.Default;for(let o=0;o<r.length;o++){const a=r[o],c=m_(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(fe(i,s))}else e.push(fe(r))}return e}function Ki(n,e){return n[Oo]=e,n.prototype[Oo]=e,n}function m_(n){return n[Oo]}function Ps(n){return{toString:n}.toString()}var mo=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mo||{}),tr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(tr||{});const S={},L=[],Q=Fe({\u0275cmp:Fe}),ve=Fe({\u0275dir:Fe}),Pe=Fe({\u0275pipe:Fe}),ze=Fe({\u0275mod:Fe}),Ke=Fe({\u0275fac:Fe}),mt=Fe({__NG_ELEMENT_ID__:Fe}),_t=Fe({__NG_ENV_ID__:Fe});function $t(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ur(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Br(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ps(n){return 3===n||4===n||6===n}function Br(n){return 64===n.charCodeAt(0)}function pi(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||__(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function __(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const sd="ng-template";function od(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==$t(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Lf(n){return 4===n.type&&n.value!==sd}function y_(n,e,t){return e===(4!==n.type||t?n.value:sd)}function db(n,e,t){let r=4;const i=n.attrs||[],s=function Uf(n){for(let e=0;e<n.length;e++)if(ps(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!y_(n,c,t)||""===c&&1===e.length){if(Zi(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!od(n.attrs,l,t)){if(Zi(r))return!1;o=!0}continue}const m=Vf(8&r?"class":c,i,Lf(n),t);if(-1===m){if(Zi(r))return!1;o=!0;continue}if(""!==l){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==$t(I,l,0)||2&r&&l!==y){if(Zi(r))return!1;o=!0}}}}else{if(!o&&!Zi(r)&&!Zi(c))return!1;if(o&&Zi(c))continue;o=!1,r=c|1&r}}return Zi(r)||o}function Zi(n){return 0==(1&n)}function Vf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function v_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ad(n,e,t=!1){for(let r=0;r<e.length;r++)if(db(n,e[r],t))return!0;return!1}function jf(n,e){return n?":not("+e.trim()+")":e}function $f(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Zi(o)&&(e+=jf(s,i),i=""),r=o,s=s||!Zi(r);t++}return""!==i&&(e+=jf(s,i)),e}function Gn(n){return Ps(()=>{const e=b_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||tr.Emulated,styles:n.styles||L,_:null,schemas:n.schemas||null,tView:null,id:""};ud(t);const r=n.dependencies;return t.directiveDefs=dd(r,!1),t.pipeDefs=dd(r,!0),t.id=function hb(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function E_(n){return Gt(n)||Rr(n)}function qf(n){return null!==n}function xn(n){return Ps(()=>({type:n.type,bootstrap:n.bootstrap||L,declarations:n.declarations||L,imports:n.imports||L,exports:n.exports||L,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function I_(n,e){if(null==n)return S;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function et(n){return Ps(()=>{const e=b_(n);return ud(e),e})}function jr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gt(n){return n[Q]||null}function Rr(n){return n[ve]||null}function $r(n){return n[Pe]||null}function gi(n,e){const t=n[ze]||null;if(!t&&!0===e)throw new Error(`Type ${st(n)} does not have '\u0275mod' property.`);return t}function b_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||S,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||L,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:I_(n.inputs,e),outputs:I_(n.outputs)}}function ud(n){n.features?.forEach(e=>e(n))}function dd(n,e){if(!n)return null;const t=e?$r:E_;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(qf)}const Vn=0,He=1,bt=2,Un=3,Qi=4,Nl=5,zr=6,vc=7,dr=8,Qs=9,Ec=10,wt=11,Ia=12,w_=13,Fo=14,hr=15,ba=16,Ic=17,gs=18,Ol=19,hd=20,Lo=21,xs=22,kl=23,wa=24,zt=25,fd=1,pd=2,Ys=7,Ta=9,Yr=11;function Ri(n){return Array.isArray(n)&&"object"==typeof n[fd]}function mi(n){return Array.isArray(n)&&!0===n[fd]}function T_(n){return 0!=(4&n.flags)}function bc(n){return n.componentOffset>-1}function Kf(n){return 1==(1&n.flags)}function Yi(n){return!!n.template}function Zf(n){return 0!=(512&n[bt])}function Ca(n,e){return n.hasOwnProperty(Ke)?n[Ke]:null}let li=null,Tc=!1;function ms(n){const e=li;return li=n,e}const M_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function R_(n){if(!Uo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!P_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function md(n){n.dirty=!0,function fr(n){if(void 0===n.liveConsumerNode)return;const e=Tc;Tc=!0;try{for(const t of n.liveConsumerNode)t.dirty||md(t)}finally{Tc=e}}(n),n.consumerMarkedDirty?.(n)}function Xf(n){return n&&(n.nextProducerIndex=0),ms(n)}function Ll(n,e){if(ms(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Uo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)_d(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function P_(n){Aa(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(R_(t),r!==t.version))return!0}return!1}function x_(n){if(Aa(n),Uo(n))for(let e=0;e<n.producerNode.length;e++)_d(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function _d(n,e){if(function Ac(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Aa(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)_d(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Aa(i),i.producerIndexOfThis[r]=e}}function Uo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Aa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let yd=null;const V_=()=>{},rp=(()=>({...M_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:V_}))();class bb{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function _s(){return U_}function U_(n){return n.type.prototype.ngOnChanges&&(n.setInput=wb),B_}function B_(){const n=$_(this),e=n?.current;if(e){const t=n.previous;if(t===S)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function wb(n,e,t,r){const i=this.declaredInputs[t],s=$_(n)||function ip(n,e){return n[j_]=e}(n,{previous:S,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new bb(c&&c.currentValue,e,a===S),n[r]=e}_s.ngInherit=!0;const j_="__ngSimpleChanges__";function $_(n){return n[j_]||null}const Xs=function(n,e,t){};function yn(n){for(;Array.isArray(n);)n=n[Vn];return n}function Sc(n,e){return yn(e[n])}function Pi(n,e){return yn(e[n.index])}function H_(n,e){return n.data[e]}function ys(n,e){return n[e]}function _i(n,e){const t=e[n];return Ri(t)?t:t[Vn]}function Js(n,e){return null==e?null:n[e]}function cp(n){n[Ic]=0}function Db(n){1024&n[bt]||(n[bt]|=1024,bd(n,1))}function q_(n){1024&n[bt]&&(n[bt]&=-1025,bd(n,-1))}function bd(n,e){let t=n[Un];if(null===t)return;t[Nl]+=e;let r=t;for(t=t[Un];null!==t&&(1===e&&1===r[Nl]||-1===e&&0===r[Nl]);)t[Nl]+=e,r=t,t=t[Un]}const yt={lFrame:iy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function K_(){return yt.bindingsEnabled}function we(){return yt.lFrame.lView}function Jt(){return yt.lFrame.tView}function Xr(){let n=X_();for(;null!==n&&64===n.type;)n=n.parent;return n}function X_(){return yt.lFrame.currentTNode}function eo(n,e){const t=yt.lFrame;t.currentTNode=n,t.isParent=e}function hp(){return yt.lFrame.isParent}function Jr(){const n=yt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Mc(){return yt.lFrame.bindingIndex++}function xb(n,e){const t=yt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bl(e)}function Bl(n){yt.lFrame.currentDirectiveIndex=n}function gp(n){yt.lFrame.currentQueryIndex=n}function mp(n){const e=n[He];return 2===e.type?e.declTNode:1===e.type?n[zr]:null}function ry(n,e,t){if(t&Ct.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ct.Host||(i=mp(s),null===i||(s=s[Fo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=yt.lFrame=yp();return r.currentTNode=e,r.lView=n,!0}function _p(n){const e=yp(),t=n[He];yt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yp(){const n=yt.lFrame,e=null===n?null:n.child;return null===e?iy(n):e}function iy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function jl(){const n=yt.lFrame;return yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const sy=jl;function vp(){const n=jl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yi(){return yt.lFrame.selectedIndex}function Sa(n){yt.lFrame.selectedIndex=n}function Wn(){const n=yt.lFrame;return H_(n.tView,n.selectedIndex)}let ay=!0;function Dd(){return ay}function yo(n){ay=n}function Sd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Md(n,e,t){Pd(n,e,3,t)}function Rd(n,e,t,r){(3&n[bt])===t&&Pd(n,e,t,r)}function Ip(n,e){let t=n[bt];(3&t)===e&&(t&=8191,t+=1,n[bt]=t)}function Pd(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Ic]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Ic]+=65536),(a<s||-1==s)&&(Ub(n,t,e,c),n[Ic]=(4294901760&n[Ic])+c+2),c++}function xd(n,e){Xs(4,n,e);const t=ms(null);try{e.call(n)}finally{ms(t),Xs(5,n,e)}}function Ub(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[bt]>>13<n[Ic]>>16&&(3&n[bt])===e&&(n[bt]+=8192,xd(a,s)):xd(a,s)}const jo=-1;class $l{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Nd(n){return n!==jo}function Rc(n){return 32767&n}function Hl(n,e){let t=function jb(n){return n>>16}(n),r=e;for(;t>0;)r=r[Fo],t--;return r}let Tp=!0;function Od(n){const e=Tp;return Tp=n,e}const Cp=255,ly=5;let PM=0;const ro={};function u(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[He];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(Nd(i)){const o=Rc(i),a=Hl(i,e),c=a[He].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=fy(i),null===r)return jo;if(t++,i=i[Fo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return jo}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(mt)&&(r=t[mt]),null==r&&(r=t[mt]=PM++);const i=r&Cp;e.data[n+(i>>ly)]|=1<<i}(n,e,t)}function re(n,e,t){if(t&Ct.Optional||void 0!==n)return n;ur()}function be(n,e,t,r){if(t&Ct.Optional&&void 0===r&&(r=null),!(t&(Ct.Self|Ct.Host))){const i=n[Qs],s=ci(void 0);try{return i?i.get(e,r,t&Ct.Optional):Po(e,r,t&Ct.Optional)}finally{ci(s)}}return re(r,0,t)}function Ge(n,e,t,r=Ct.Default,i){if(null!==n){if(2048&e[bt]&&!(r&Ct.Self)){const o=function hy(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[bt]&&!(512&o[bt]);){const a=it(s,o,t,r|Ct.Self,ro);if(a!==ro)return a;let c=s.parent;if(!c){const l=o[hd];if(l){const f=l.get(t,ro,r);if(f!==ro)return f}c=fy(o),o=o[Fo]}s=c}return i}(n,e,t,r,ro);if(o!==ro)return o}const s=it(n,e,t,r,ro);if(s!==ro)return s}return be(e,t,r,i)}function it(n,e,t,r,i){const s=function kd(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mt)?n[mt]:void 0;return"number"==typeof e?e>=0?e&Cp:dy:e}(t);if("function"==typeof s){if(!ry(e,n,r))return r&Ct.Host?re(i,0,r):be(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ct.Optional)return o;ur()}finally{sy()}}else if("number"==typeof s){let o=null,a=g(n,e),c=jo,l=r&Ct.Host?e[hr][zr]:null;for((-1===a||r&Ct.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==jo&&Fd(r,!1)?(o=e[He],a=Rc(c),e=Hl(c,e)):a=-1);-1!==a;){const f=e[He];if(Ap(s,a,f.data)){const m=Ht(a,e,t,o,r,l);if(m!==ro)return m}c=e[a+8],c!==jo&&Fd(r,e[He].data[a+8]===l)&&Ap(s,a,e)?(o=f,a=Rc(c),e=Hl(c,e)):a=-1}}return i}function Ht(n,e,t,r,i,s){const o=e[He],a=o.data[n+8],f=function ei(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<c&&t===T||I>=c&&T.type===t)return I}if(i){const I=o[c];if(I&&Yi(I)&&I.type===t)return c}return null}(a,o,t,null==r?bc(a)&&Tp:r!=o&&0!=(3&a.type),i&Ct.Host&&s===a);return null!==f?xi(e,o,f,a):ro}function xi(n,e,t,r){let i=n[t];const s=e.data;if(function cy(n){return n instanceof $l}(i)){const o=i;o.resolving&&function uc(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,`Circular dependency in DI detected for ${n}${t}`)}(function rn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():gt(n)}(s[t]));const a=Od(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ci(o.injectImpl):null;ry(n,r,Ct.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Vb(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=U_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&ci(l),Od(a),o.resolving=!1,sy()}}return i}function Ap(n,e,t){return!!(t[e+(n>>ly)]&1<<n)}function Fd(n,e){return!(n&Ct.Self||n&Ct.Host&&e)}class ti{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ge(this._tNode,this._lView,e,_c(r),t)}}function dy(){return new ti(Xr(),we())}function Hr(n){return Ps(()=>{const e=n.prototype.constructor,t=e[Ke]||ql(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ke]||ql(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ql(n){return oc(n)?()=>{const e=ql(dt(n));return e&&e()}:Ca(n)}function fy(n){const e=n[He],t=e.type;return 2===t?e.declTNode:1===t?n[zr]:null}const Ld="__parameters__";function Ud(n,e,t){return Ps(()=>{const r=function $b(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,f){const m=c.hasOwnProperty(Ld)?c[Ld]:Object.defineProperty(c,Ld,{value:[]})[Ld];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function jd(n,e){n.forEach(t=>Array.isArray(t)?jd(t,e):e(t))}function NM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function py(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ns(n,e,t){let r=$d(n,e);return r>=0?n[1|r]=t:(r=~r,function l3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function zb(n,e){const t=$d(n,e);if(t>=0)return n[1|t]}function $d(n,e){return function OM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const qr=Ki(Ud("Optional"),8),Mp=Ki(Ud("SkipSelf"),4);function Ey(n){return 128==(128&n.flags)}var Oc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Oc||{});const Kb=new Map;let N3=0;const Qb="__ngContext__";function Ni(n,e){Ri(e)?(n[Qb]=e[Ol],function k3(n){Kb.set(n[Ol],n)}(e)):n[Qb]=e}let Yb;function Xb(n,e){return Yb(n,e)}function xp(n){const e=n[Un];return mi(e)?e[Un]:e}function eR(n){return nR(n[Ia])}function tR(n){return nR(n[Qi])}function nR(n){for(;null!==n&&!mi(n);)n=n[Qi];return n}function qd(n,e,t,r,i){if(null!=r){let s,o=!1;mi(r)?s=r:Ri(r)&&(o=!0,r=r[Vn]);const a=yn(r);0===n&&null!==t?null==i?oR(e,t,a):Gl(e,t,a,i||null,!0):1===n&&null!==t?Gl(e,t,a,i||null,!0):2===n?function Dy(n,e,t){const r=Cy(n,e);r&&function eH(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function rH(n,e,t,r,i){const s=t[Ys];s!==yn(t)&&qd(e,n,r,s,i);for(let a=Yr;a<t.length;a++){const c=t[a];Op(c[He],c,n,e,r,s)}}(e,n,s,t,i)}}function wy(n,e,t){return n.createElement(e,t)}function iR(n,e){const t=n[Ta],r=t.indexOf(e);q_(e),t.splice(r,1)}function Ty(n,e){if(n.length<=Yr)return;const t=Yr+e,r=n[t];if(r){const i=r[ba];null!==i&&i!==n&&iR(i,r),e>0&&(n[t-1][Qi]=r[Qi]);const s=py(n,Yr+e);!function G3(n,e){Op(n,e,e[wt],2,null,null),e[Vn]=null,e[zr]=null}(r[He],r);const o=s[gs];null!==o&&o.detachView(s[He]),r[Un]=null,r[Qi]=null,r[bt]&=-129}return r}function ew(n,e){if(!(256&e[bt])){const t=e[wt];e[kl]&&x_(e[kl]),e[wa]&&x_(e[wa]),t.destroyNode&&Op(n,e,t,3,null,null),function Z3(n){let e=n[Ia];if(!e)return tw(n[He],n);for(;e;){let t=null;if(Ri(e))t=e[Ia];else{const r=e[Yr];r&&(t=r)}if(!t){for(;e&&!e[Qi]&&e!==n;)Ri(e)&&tw(e[He],e),e=e[Un];null===e&&(e=n),Ri(e)&&tw(e[He],e),t=e&&e[Qi]}e=t}}(e)}}function tw(n,e){if(!(256&e[bt])){e[bt]&=-129,e[bt]|=256,function J3(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof $l)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Xs(4,a,c);try{c.call(a)}finally{Xs(5,a,c)}}else{Xs(4,i,s);try{s.call(i)}finally{Xs(5,i,s)}}}}}(n,e),function X3(n,e){const t=n.cleanup,r=e[vc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[vc]=null);const i=e[Lo];if(null!==i){e[Lo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[He].type&&e[wt].destroy();const t=e[ba];if(null!==t&&mi(e[Un])){t!==e[Un]&&iR(t,e);const r=e[gs];null!==r&&r.detachView(n)}!function F3(n){Kb.delete(n[Ol])}(e)}}function nw(n,e,t){return function sR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Vn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===tr.None||s===tr.Emulated)return null}return Pi(r,t)}}(n,e.parent,t)}function Gl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function oR(n,e,t){n.appendChild(e,t)}function aR(n,e,t,r,i){null!==r?Gl(n,e,t,r,i):oR(n,e,t)}function Cy(n,e){return n.parentNode(e)}let rw,aw,My,uR=function lR(n,e,t){return 40&n.type?Pi(n,t):null};function Ay(n,e,t,r){const i=nw(n,r,e),s=e[wt],a=function cR(n,e,t){return uR(n,e,t)}(r.parent||e[zr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)aR(s,i,t[c],a,!1);else aR(s,i,t,a,!1);void 0!==rw&&rw(s,r,e,t,i)}function Np(n,e){if(null!==e){const t=e.type;if(3&t)return Pi(e,n);if(4&t)return iw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Np(n,r);{const i=n[e.index];return mi(i)?iw(-1,i):yn(i)}}if(32&t)return Xb(e,n)()||yn(n[e.index]);{const r=hR(n,e);return null!==r?Array.isArray(r)?r[0]:Np(xp(n[hr]),r):Np(n,e.next)}}return null}function hR(n,e){return null!==e?n[hr][zr].projection[e.projection]:null}function iw(n,e){const t=Yr+n+1;if(t<e.length){const r=e[t],i=r[He].firstChild;if(null!==i)return Np(r,i)}return e[Ys]}function sw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Ni(yn(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)sw(n,e,t.child,r,i,s,!1),qd(e,n,i,a,s);else if(32&c){const l=Xb(t,r);let f;for(;f=l();)qd(e,n,i,f,s);qd(e,n,i,a,s)}else 16&c?pR(n,e,r,t,i,s):qd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Op(n,e,t,r,i,s){sw(t,r,n.firstChild,e,i,s,!1)}function pR(n,e,t,r,i,s){const o=t[hr],c=o[zr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)qd(e,n,i,c[l],s);else{let l=c;const f=o[Un];Ey(r)&&(l.flags|=128),sw(n,e,l,f,i,s,!0)}}function gR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Ur(n,e,r),null!==i&&gR(n,e,i),null!==s&&function sH(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function vR(n){return function cw(){if(void 0===My&&(My=null,on.trustedTypes))try{My=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return My}()?.createScriptURL(n)||n}class Wl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fa})`}}function Os(n){return n instanceof Wl?n.changingThisBreaksApplicationSecurity:n}function $o(n,e){const t=function gH(n){return n instanceof Wl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${fa})`)}return t===e}const TH=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var vi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vi||{});function Kn(n){const e=Fp();return e?e.sanitize(vi.URL,n)||"":$o(n,"URL")?Os(n):function Ry(n){return(n=String(n)).match(TH)?n:"unsafe:"+n}(gt(n))}function DR(n){const e=Fp();if(e)return vR(e.sanitize(vi.RESOURCE_URL,n)||"");if($o(n,"ResourceURL"))return vR(Os(n));throw new ue(904,!1)}function Fp(){const n=we();return n&&n[Ec].sanitizer}const Lp=new Ie("ENVIRONMENT_INITIALIZER"),MR=new Ie("INJECTOR",-1),RR=new Ie("INJECTOR_DEF_TYPES");class hw{get(e,t=No){if(t===No){const r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return t}}function FH(...n){return{\u0275providers:xR(0,n),\u0275fromNgModule:!0}}function xR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return jd(e,o=>{const a=o;xy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&NR(i,s),t}function NR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];fw(i,s=>{e(s,r)})}}function xy(n,e,t,r){if(!(n=dt(n)))return!1;let i=null,s=fc(n);const o=!s&&Gt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=fc(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)xy(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{jd(s.imports,f=>{xy(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&NR(l,e)}if(!a){const l=Ca(i)||(()=>new i);e({provide:i,useFactory:l,deps:L},i),e({provide:RR,useValue:i,multi:!0},i),e({provide:Lp,useValue:()=>fe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=n;fw(c,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function fw(n,e){for(let t of n)ac(t)&&(t=t.\u0275providers),Array.isArray(t)?fw(t,e):e(t)}const LH=Fe({provide:String,useValue:Fe});function pw(n){return null!==n&&"object"==typeof n&&LH in n}function Kl(n){return"function"==typeof n}const gw=new Ie("Set Injector scope."),Ny={},UH={};let mw;function Oy(){return void 0===mw&&(mw=new hw),mw}class so{}class Kd extends so{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yw(e,o=>this.processProvider(o)),this.records.set(MR,Zd(void 0,this)),i.has("environment")&&this.records.set(so,Zd(void 0,this));const s=this.records.get(gw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(RR.multi,L,Ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Zs(this),r=ci(void 0);try{return e()}finally{Zs(t),ci(r)}}get(e,t=No,r=Ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_t))return e[_t](this);r=_c(r);const s=Zs(this),o=ci(void 0);try{if(!(r&Ct.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function HH(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&pa(e);c=l&&this.injectableDefInScope(l)?Zd(_w(e),Ny):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ct.Self?Oy():this.parent).get(e,t=r&Ct.Optional&&t===No?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Mr]=a[Mr]||[]).unshift(st(e)),s)throw a;return function id(n,e,t,r){const i=n[Mr];throw e[Wi]&&i.unshift(e[Wi]),n.message=function yc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):st(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Rl,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Mr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ci(o),Zs(s)}}resolveInjectorInitializers(){const e=Zs(this),t=ci(void 0);try{const i=this.get(Lp.multi,L,Ct.Self);for(const s of i)s()}finally{Zs(e),ci(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){let t=Kl(e=dt(e))?e:dt(e&&e.provide);const r=function jH(n){return pw(n)?Zd(void 0,n.useValue):Zd(FR(n),Ny)}(e);if(Kl(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Zd(void 0,Ny,!0),i.factory=()=>Ea(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Ny&&(t.value=UH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function zH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=dt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function _w(n){const e=pa(n),t=null!==e?e.factory:Ca(n);if(null!==t)return t;if(n instanceof Ie)throw new ue(204,!1);if(n instanceof Function)return function BH(n){const e=n.length;if(e>0)throw function Sp(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new ue(204,!1);const t=function td(n){return n&&(n[go]||n[Ms])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ue(204,!1)}function FR(n,e,t){let r;if(Kl(n)){const i=dt(n);return Ca(i)||_w(i)}if(pw(n))r=()=>dt(n.useValue);else if(function kR(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ea(n.deps||[]));else if(function OR(n){return!(!n||!n.useExisting)}(n))r=()=>fe(dt(n.useExisting));else{const i=dt(n&&(n.useClass||n.provide));if(!function $H(n){return!!n.deps}(n))return Ca(i)||_w(i);r=()=>new i(...Ea(n.deps))}return r}function Zd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function yw(n,e){for(const t of n)Array.isArray(t)?yw(t,e):t&&ac(t)?yw(t.\u0275providers,e):e(t)}const ky=new Ie("AppId",{providedIn:"root",factory:()=>qH}),qH="ng",LR=new Ie("Platform Initializer"),ks=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VR=new Ie("AnimationModuleType"),vw=new Ie("CSP nonce",{providedIn:"root",factory:()=>function Wd(){if(void 0!==aw)return aw;if(typeof document<"u")return document;throw new ue(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let UR=(n,e,t)=>null;function Dw(n,e,t=!1){return UR(n,e,t)}class t4{}class $R{}class r4{resolveComponentFactory(e){throw function n4(n){const e=Error(`No component factory found for ${st(n)}.`);return e.ngComponent=n,e}(e)}}let jy=(()=>{class n{static#e=this.NULL=new r4}return n})();function i4(){return Xd(Xr(),we())}function Xd(n,e){return new Es(Pi(n,e))}let Es=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=i4}return n})();class Bp{}let Ra=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function o4(){const n=we(),t=_i(Xr().index,n);return(Ri(t)?t:n)[wt]}()}return n})(),a4=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}return n})();class kc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Rw=new kc("16.2.12"),Pw={};function WR(n,e=null,t=null,r){const i=KR(n,e,t,r);return i.resolveInjectorInitializers(),i}function KR(n,e=null,t=null,r,i=new Set){const s=[t||L,FH(n)];return r=r||("object"==typeof n?void 0:st(n)),new Kd(s,e||Oy(),r||null,i)}let Ei=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=No;static#t=this.NULL=new hw;static create(t,r){if(Array.isArray(t))return WR({name:""},r,t,"");{const i=t.name??"";return WR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>fe(MR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function Nw(n){return n.ngOriginalError}class vo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Nw(e);for(;t&&Nw(t);)t=Nw(t);return t||null}}function kw(n){return e=>{setTimeout(n,void 0,e)}}const mr=class p4 extends le{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=kw(s),i&&(i=kw(i)),o&&(o=kw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Rt&&e.add(a),a}};function QR(...n){}class Wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mr(!1),this.onMicrotaskEmpty=new mr(!1),this.onStable=new mr(!1),this.onError=new mr(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function g4(){const n="function"==typeof on.requestAnimationFrame;let e=on[n?"requestAnimationFrame":"setTimeout"],t=on[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function y4(n){const e=()=>{!function _4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(on,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Lw(n),n.isCheckStableRunning=!0,Fw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Lw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function E4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return YR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),XR(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return YR(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),XR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Lw(n),Fw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new ue(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,m4,QR,QR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const m4={};function Fw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Lw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function YR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XR(n){n._nesting--,Fw(n)}class v4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mr,this.onMicrotaskEmpty=new mr,this.onStable=new mr,this.onError=new mr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const JR=new Ie("",{providedIn:"root",factory:eP});function eP(){const n=qe(Wt);let e=!0;return D(new Et(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Et(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(de()))}function Pa(n){return n instanceof Function?n():n}let Vw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function jp(n){for(;n;){n[bt]|=64;const e=xp(n);if(Zf(n)&&!e)return n;n=e}return null}const sP=new Ie("",{providedIn:"root",factory:()=>!1});let zy=null;function lP(n,e){return n[e]??hP()}function uP(n,e){const t=hP();t.producerNode?.length&&(n[e]=zy,t.lView=n,zy=dP())}const R4={...M_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jp(n.lView)},lView:null};function dP(){return Object.create(R4)}function hP(){return zy??=dP(),zy}const St={};function ye(n){fP(Jt(),we(),yi()+n,!1)}function fP(n,e,t,r){if(!r)if(3==(3&e[bt])){const s=n.preOrderCheckHooks;null!==s&&Md(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Rd(e,s,0,t)}Sa(t)}function pe(n,e=Ct.Default){const t=we();return null===t?fe(n,e):Ge(Xr(),t,dt(n),e)}function Hy(n,e,t,r,i,s,o,a,c,l,f){const m=e.blueprint.slice();return m[Vn]=i,m[bt]=140|r,(null!==l||n&&2048&n[bt])&&(m[bt]|=2048),cp(m),m[Un]=m[Fo]=n,m[dr]=t,m[Ec]=o||n&&n[Ec],m[wt]=a||n&&n[wt],m[Qs]=c||n&&n[Qs]||null,m[zr]=s,m[Ol]=function O3(){return N3++}(),m[xs]=f,m[hd]=l,m[hr]=2==e.type?n[hr]:m,m}function th(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Uw(n,e,t,r,i){const s=X_(),o=hp(),c=n.data[e]=function V4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Bo(){return null!==yt.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function ey(){return yt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Da(){const n=yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return eo(s,!0),s}function $p(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gP(n,e,t,r,i){const s=lP(e,kl),o=yi(),a=2&r;try{Sa(-1),a&&e.length>zt&&fP(n,e,zt,!1),Xs(a?2:0,i);const l=a?s:null,f=Xf(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Ll(l,f)}}finally{a&&null===e[kl]&&uP(e,kl),Sa(o),Xs(a?3:1,i)}}function Bw(n,e,t){if(T_(e)){const r=ms(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ms(r)}}}function jw(n,e,t){K_()&&(function q4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;bc(t)&&function X4(n,e,t){const r=Pi(e,n),i=mP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=qy(n,Hy(n,i,null,o,r,e,null,n[Ec].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||u(t,e),Ni(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=xi(e,n,a,t);Ni(l,e),null!==o&&J4(0,a-i,l,c,0,o),Yi(c)&&(_i(t.index,e)[dr]=xi(e,n,a,t))}}(n,e,t,Pi(t,e)),64==(64&t.flags)&&IP(n,e,t))}function $w(n,e,t=Pi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function mP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=zw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function zw(n,e,t,r,i,s,o,a,c,l,f){const m=zt+r,y=m+i,I=function x4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:St);return t}(m,y),T="function"==typeof l?l():l;return I[He]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let _P=n=>null;function yP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?vP(t,e,i,s):r.hasOwnProperty(i)&&vP(t,e,r[i],s)}return t}function vP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Fs(n,e,t,r,i,s,o,a){const c=Pi(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(Kw(n,t,f,r,i),bc(e)&&function j4(n,e){const t=_i(e,n);16&t[bt]||(t[bt]|=64)}(t,e.index)):3&e.type&&(r=function B4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Hw(n,e,t,r){if(K_()){const i=null===r?null:{"":-1},s=function W4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ad(e,o.selectors,!1))if(r||(r=[]),Yi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),qw(n,e,a.length)}else r.unshift(o),qw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&EP(n,e,t,o,i,a),i&&function K4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ue(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=pi(t.mergedAttrs,t.attrs)}function EP(n,e,t,r,i,s){for(let l=0;l<r.length;l++)C(u(t,e),n,r[l].type);!function Q4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=$p(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=pi(t.mergedAttrs,f.hostAttrs),Y4(n,t,e,c,f),Z4(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function U4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;c=yP(m.inputs,f,c,y?y.inputs:null),l=yP(m.outputs,f,l,T);const N=null===c||null===o||Lf(e)?null:eq(c,f,o);a.push(N)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function IP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function ty(){return yt.lFrame.currentDirectiveIndex}();try{Sa(s);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];Bl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&G4(c,l)}}finally{Sa(-1),Bl(o)}}function G4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function qw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Z4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yi(e)&&(t[""]=n)}}function Y4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ca(i.type)),o=new $l(s,Yi(i),pe);n.blueprint[r]=o,t[r]=o,function z4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function H4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,$p(n,t,i.hostVars,St),i)}function zo(n,e,t,r,i,s){const o=Pi(n,e);!function Gw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?gt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[wt],o,s,n.value,t,r,i)}function J4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)bP(r,t,o[a++],o[a++],o[a++])}function bP(n,e,t,r,i){const s=ms(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ms(s)}}function eq(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function wP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function TP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];gp(t[r]),o.contentQueries(2,e[s],s)}}}function qy(n,e){return n[Ia]?n[w_][Qi]=e:n[Ia]=e,n[w_]=e,e}function Ww(n,e,t){gp(0);const r=ms(null);try{e(n,t)}finally{ms(r)}}function SP(n,e){const t=n[Qs],r=t?t.get(vo,null):null;r&&r.handleError(e)}function Kw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];bP(n.data[o],e[o],r,a,i)}}function tq(n,e){const t=_i(e,n),r=t[He];!function nq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Vn];null!==i&&null===t[xs]&&(t[xs]=Dw(i,t[Qs])),Zw(r,t,t[dr])}function Zw(n,e,t){_p(e);try{const r=n.viewQuery;null!==r&&Ww(1,r,t);const i=n.template;null!==i&&gP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&TP(n,e),n.staticViewQueries&&Ww(2,n.viewQuery,t);const s=n.components;null!==s&&function rq(n,e){for(let t=0;t<e.length;t++)tq(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[bt]&=-5,vp()}}let MP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Ib(n,e,t){const r=Object.create(rp);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>md(r),run:()=>{if(r.dirty=!1,r.hasRun&&!P_(r))return;r.hasRun=!0;const o=Xf(r);try{r.cleanupFn(),r.cleanupFn=V_,r.fn(i)}finally{Ll(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function Gy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vr(i,a):2==s&&(r=Vr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function zp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(yn(s)),mi(s)&&RP(s,r);const o=t.type;if(8&o)zp(n,e,t.child,r);else if(32&o){const a=Xb(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=hR(e,t);if(Array.isArray(a))r.push(...a);else{const c=xp(e[hr]);zp(c[He],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RP(n,e){for(let t=Yr;t<n.length;t++){const r=n[t],i=r[He].firstChild;null!==i&&zp(r[He],r,i,e)}n[Ys]!==n[Vn]&&e.push(n[Ys])}function Wy(n,e,t,r=!0){const i=e[Ec],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{PP(n,e,n.template,t)}catch(c){throw r&&SP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function PP(n,e,t,r){const i=e[bt];if(256!=(256&i)){e[Ec].effectManager?.flush(),_p(e);try{cp(e),function Ad(n){return yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&gP(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Md(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Rd(e,l,0,null),Ip(e,0)}if(function oq(n){for(let e=eR(n);null!==e;e=tR(e)){if(!e[pd])continue;const t=e[Ta];for(let r=0;r<t.length;r++){Db(t[r])}}}(e),xP(e,2),null!==n.contentQueries&&TP(n,e),o){const l=n.contentCheckHooks;null!==l&&Md(e,l)}else{const l=n.contentHooks;null!==l&&Rd(e,l,1),Ip(e,1)}!function P4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=lP(e,wa);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Sa(~s);else{const o=s,a=t[++i],c=t[++i];xb(a,o),r.dirty=!1;const l=Xf(r);try{c(2,e[o])}finally{Ll(r,l)}}}}finally{null===e[wa]&&uP(e,wa),Sa(-1)}}(n,e);const a=n.components;null!==a&&OP(e,a,0);const c=n.viewQuery;if(null!==c&&Ww(2,c,r),o){const l=n.viewCheckHooks;null!==l&&Md(e,l)}else{const l=n.viewHooks;null!==l&&Rd(e,l,2),Ip(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[bt]&=-73,q_(e)}finally{vp()}}}function xP(n,e){for(let t=eR(n);null!==t;t=tR(t))for(let r=Yr;r<t.length;r++)NP(t[r],e)}function aq(n,e,t){NP(_i(e,n),t)}function NP(n,e){if(!function Cb(n){return 128==(128&n[bt])}(n))return;const t=n[He],r=n[bt];if(80&r&&0===e||1024&r||2===e)PP(t,n,t.template,n[dr]);else if(n[Nl]>0){xP(n,1);const i=t.components;null!==i&&OP(n,i,1)}}function OP(n,e,t){for(let r=0;r<e.length;r++)aq(n,e[r],t)}class Hp{get rootNodes(){const e=this._lView,t=e[He];return zp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(e){this._lView[dr]=e}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Un];if(mi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ty(e,r),py(t,r))}this._attachedToViewContainer=!1}ew(this._lView[He],this._lView)}onDestroy(e){!function G_(n,e){if(256==(256&n[bt]))throw new ue(911,!1);null===n[Lo]&&(n[Lo]=[]),n[Lo].push(e)}(this._lView,e)}markForCheck(){jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){Wy(this._lView[He],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function K3(n,e){Op(n,e,e[wt],2,null,null)}(this._lView[He],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e}}class cq extends Hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Wy(e[He],e,e[dr],!1)}checkNoChanges(){}get context(){return null}}class kP extends jy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Gt(e);return new qp(t,this.ngModule)}}function FP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class uq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_c(r);const i=this.injector.get(e,Pw,r);return i!==Pw||t===Pw?i:this.parentInjector.get(e,t,r)}}class qp extends $R{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=FP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return FP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ld(n){return n.map($f).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof so?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new uq(e,s):e,a=o.get(Bp,null);if(null===a)throw new ue(407,!1);const m={rendererFactory:a,sanitizer:o.get(a4,null),effectManager:o.get(MP,null),afterRenderEventManager:o.get(Vw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function N4(n,e,t,r){const s=r.get(sP,!1)||t===tr.ShadowDom,o=n.selectRootElement(e,s);return function O4(n){_P(n)}(o),o}(y,r,this.componentDef.encapsulation,o):wy(y,I,function lq(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),W=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let j=null;null!==T&&(j=Dw(T,o,!0));const X=zw(0,null,null,1,0,null,null,null,null,null,null),oe=Hy(null,X,null,W,null,null,m,y,o,null,j);let De,je;_p(oe);try{const H=this.componentDef;let V,B=null;H.findHostDirectiveDefs?(V=[],B=new Map,H.findHostDirectiveDefs(H,V,B),V.push(H)):V=[H];const K=function hq(n,e){const t=n[He],r=zt;return n[r]=e,th(t,r,2,"#host",null)}(oe,T),Y=function fq(n,e,t,r,i,s,o){const a=i[He];!function pq(n,e,t,r){for(const i of n)e.mergedAttrs=pi(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Gy(e,e.mergedAttrs,!0),null!==t&&mR(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Dw(e,i[Qs]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=Hy(i,mP(t),null,f,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&qw(a,n,r.length-1),qy(i,m),i[n.index]=m}(K,T,H,V,oe,m,y);je=H_(X,zt),T&&function mq(n,e,t,r){if(r)Ur(n,t,["ng-version",Rw.full]);else{const{attrs:i,classes:s}=function zf(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Zi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ur(n,t,i),s&&s.length>0&&gR(n,t,s.join(" "))}}(y,H,T,r),void 0!==t&&function _q(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(je,this.ngContentSelectors,t),De=function gq(n,e,t,r,i,s){const o=Xr(),a=i[He],c=Pi(o,i);EP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Ni(xi(i,a,o.directiveStart+f,o),i);IP(a,i,o),c&&Ni(c,i);const l=xi(i,a,o.directiveStart+o.componentOffset,o);if(n[dr]=i[dr]=l,null!==s)for(const f of s)f(l,e);return Bw(a,o,n),l}(Y,H,V,B,oe,[yq]),Zw(X,oe,null)}finally{vp()}return new dq(this.componentType,De,Xd(je,oe),oe,je)}}class dq extends t4{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new cq(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Kw(s[He],s,i,e,t),this.previousInputValues.set(e,t),jp(_i(this._tNode.index,s))}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function yq(){const n=Xr();Sd(we()[He],n)}function bn(n){let e=function LP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Yi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Ky(n.inputs),o.inputTransforms=Ky(n.inputTransforms),o.declaredInputs=Ky(n.declaredInputs),o.outputs=Ky(n.outputs);const a=i.hostBindings;a&&bq(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&Eq(n,c),l&&Iq(n,l),In(n.inputs,i.inputs),In(n.declaredInputs,i.declaredInputs),In(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),In(o.inputTransforms,i.inputTransforms)),Yi(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pi(i.hostAttrs,t=pi(t,i.hostAttrs))}}(r)}function Ky(n){return n===S?{}:n===L?[]:n}function Eq(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Iq(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function bq(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function jP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Zy(n){return!!Qw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Qw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ho(n,e,t){return n[e]=t}function Oi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function qo(n,e,t,r){const i=we();return Oi(i,Mc(),e)&&(Jt(),zo(Wn(),i,n,e,t,r)),qo}function rh(n,e,t,r){return Oi(n,Mc(),t)?e+gt(t)+r:St}function Nn(n,e,t,r,i,s,o,a){const c=we(),l=Jt(),f=n+zt,m=l.firstCreatePass?function Wq(n,e,t,r,i,s,o,a,c){const l=e.consts,f=th(e,n,4,o||null,Js(l,a));Hw(e,t,f,Js(l,c)),Sd(e,f);const m=f.tView=zw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,c,e,t,r,i,s,o):l.data[f];eo(m,!1);const y=ex(l,c,m,n);Dd()&&Ay(l,c,y,m),Ni(y,c),qy(c,c[f]=wP(y,c,y,m)),Kf(m)&&jw(l,c,m),null!=o&&$w(c,m,a)}let ex=function tx(n,e,t,r){return yo(!0),e[wt].createComment("")};function tt(n,e,t){const r=we();return Oi(r,Mc(),e)&&Fs(Jt(),Wn(),r,n,e,r[wt],t,!1),tt}function n0(n,e,t,r,i){const o=i?"class":"style";Kw(n,t,e.inputs[o],o,r)}function $(n,e,t,r){const i=we(),s=Jt(),o=zt+n,a=i[wt],c=s.firstCreatePass?function Yq(n,e,t,r,i,s){const o=e.consts,c=th(e,n,2,r,Js(o,i));return Hw(e,t,c,Js(o,s)),null!==c.attrs&&Gy(c,c.attrs,!1),null!==c.mergedAttrs&&Gy(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],l=rx(s,i,c,a,e,n);i[o]=l;const f=Kf(c);return eo(c,!0),mR(a,l,c),32!=(32&c.flags)&&Dd()&&Ay(s,i,l,c),0===function Sb(){return yt.lFrame.elementDepthCount}()&&Ni(l,i),function Vl(){yt.lFrame.elementDepthCount++}(),f&&(jw(s,i,c),Bw(s,c,i)),null!==r&&$w(i,c),$}function k(){let n=Xr();hp()?function Ul(){yt.lFrame.isParent=!1}():(n=n.parent,eo(n,!1));const e=n;(function up(n){return yt.skipHydrationRootTNode===n})(e)&&function Q_(){yt.skipHydrationRootTNode=null}(),function Mb(){yt.lFrame.elementDepthCount--}();const t=Jt();return t.firstCreatePass&&(Sd(t,n),T_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function MM(n){return 0!=(8&n.flags)}(e)&&n0(t,e,we(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bp(n){return 0!=(16&n.flags)}(e)&&n0(t,e,we(),e.stylesWithoutHost,!1),k}function lt(n,e,t,r){return $(n,e,t,r),k(),lt}let rx=(n,e,t,r,i,s)=>(yo(!0),wy(r,i,function oy(){return yt.lFrame.currentNamespace}()));function Qp(n){return!!n&&"function"==typeof n.then}function ax(n){return!!n&&"function"==typeof n.subscribe}function At(n,e,t,r){const i=we(),s=Jt(),o=Xr();return function lx(n,e,t,r,i,s,o){const a=Kf(r),l=n.firstCreatePass&&function AP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[dr],m=function CP(n){return n[vc]||(n[vc]=[])}(e);let y=!0;if(3&r.type||o){const N=Pi(r,e),O=o?o(N):N,W=m.length,j=o?oe=>o(yn(oe[r.index])):r.index;let X=null;if(!o&&a&&(X=function rG(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[vc],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==X)(X.__ngLastListenerFn__||X).__ngNextListenerFn__=s,X.__ngLastListenerFn__=s,y=!1;else{s=dx(r,e,f,s,!1);const oe=t.listen(O,i,s);m.push(s,oe),l&&l.push(i,j,W,W+1)}}else s=dx(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const N=T.length;if(N)for(let O=0;O<N;O+=2){const De=e[T[O]][T[O+1]].subscribe(s),je=m.length;m.push(s,De),l&&l.push(i,r.index,je,-(je+1))}}}(s,i,i[wt],o,n,e,r),At}function ux(n,e,t,r){try{return Xs(6,e,t),!1!==t(r)}catch(i){return SP(n,i),!1}finally{Xs(7,e,t)}}function dx(n,e,t,r,i){return function s(o){if(o===Function)return r;jp(n.componentOffset>-1?_i(n.index,e):e);let c=ux(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)c=ux(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function Na(n=1){return function Nb(n){return(yt.lFrame.contextLView=function Ob(n,e){for(;n>0;)e=e[Fo],n--;return e}(n,yt.lFrame.contextLView))[dr]}(n)}function Ls(n,e,t){return Go(n,"",e,"",t),Ls}function Go(n,e,t,r,i){const s=we(),o=rh(s,e,t,r);return o!==St&&Fs(Jt(),Wn(),s,n,o,s[wt],i,!1),Go}function tv(n,e){return n<<17|e<<2}function Lc(n){return n>>17&32767}function o0(n){return 2|n}function Ql(n){return(131068&n)>>2}function a0(n,e){return-131069&n|e<<2}function c0(n){return 1|n}function Ex(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Lc(s):Ql(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];uG(n[a],e)&&(c=!0,n[a+1]=r?c0(f):o0(f)),a=r?Lc(f):Ql(f)}c&&(n[t+1]=r?o0(s):c0(s))}function uG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&$d(n,e)>=0}function hh(n,e){return function Eo(n,e,t,r){const i=we(),s=Jt(),o=function no(n){const e=yt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Mx(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[yi()],o=function Sx(n,e){return e>=n.expandoStartIndex}(n,t);(function Nx(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function vG(n,e,t,r){const i=function pp(n){const e=yt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Yp(t=l0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=l0(i,n,e,t,r),null===s){let c=function EG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ql(r))return n[Lc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=l0(null,n,e,c[1],r),c=Yp(c,e.attrs,r),function IG(n,e,t,r){n[Lc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function bG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Yp(r,n[s].hostAttrs,t);return Yp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function cG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lc(o),c=Ql(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||$d(t,f)>0)&&(l=!0)):f=t,i)if(0!==c){const y=Lc(n[a+1]);n[r+1]=tv(y,a),0!==y&&(n[y+1]=a0(n[y+1],r)),n[a+1]=function oG(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=tv(a,0),0!==a&&(n[a+1]=a0(n[a+1],r)),a=r;else n[r+1]=tv(c,0),0===a?a=r:n[c+1]=a0(n[c+1],r),c=r;l&&(n[r+1]=o0(n[r+1])),Ex(n,f,r,!0),Ex(n,f,r,!1),function lG(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&$d(s,e)>=0&&(t[r+1]=c0(t[r+1]))}(e,f,n,r,s),o=tv(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==St&&Oi(i,o,e)&&function Px(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],f=function aG(n){return 1==(1&n)}(l)?xx(c,e,t,i,Ql(l),o):void 0;nv(f)||(nv(s)||function sG(n){return 2==(2&n)}(l)&&(s=xx(c,null,t,i,a,o)),function iH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Oc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Oc.Important),n.setStyle(t,r,i,s))}}(r,o,Sc(yi(),t),i,s))}(s,s.data[yi()],i,i[wt],n,i[o+1]=function AG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=st(Os(n)))),n}(e,t),r,o)}(n,e,null,!0),hh}function l0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Yp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Yp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ns(n,o,!!t||e[++s]))}return void 0===n?null:n}function xx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),f=l?c[1]:c,m=null===f;let y=t[i+1];y===St&&(y=m?L:void 0);let I=m?zb(y,r):f===r?y:void 0;if(l&&!nv(I)&&(I=zb(c,r)),nv(I)&&(a=I,o))return a;const T=n[i+1];i=o?Lc(T):Ql(T)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=zb(c,r))}return a}function nv(n){return void 0!==n}function G(n,e=""){const t=we(),r=Jt(),i=n+zt,s=r.firstCreatePass?th(r,i,1,e,null):r.data[i],o=Ox(r,t,s,e,n);t[i]=o,Dd()&&Ay(r,t,o,s),eo(s,!1)}let Ox=(n,e,t,r,i)=>(yo(!0),function by(n,e){return n.createText(e)}(e[wt],r));function Ut(n){return Pr("",n,""),Ut}function Pr(n,e,t){const r=we(),i=rh(r,n,e,t);return i!==St&&function xa(n,e,t){const r=Sc(e,n);!function rR(n,e,t){n.setValue(e,t)}(n[wt],r,t)}(r,yi(),i),Pr}const Yl=void 0;var KG=["en",[["a","p"],["AM","PM"],Yl],[["AM","PM"],Yl,Yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yl,"{1} 'at' {0}",Yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WG(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let fh={};function Xi(n){const e=function ZG(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=t1(e);if(t)return t;const r=e.split("-")[0];if(t=t1(r),t)return t;if("en"===r)return KG;throw new ue(701,!1)}function t1(n){return n in fh||(fh[n]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[n]),fh[n]}var Bn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bn||{});const ph="en-US";let n1=ph;function h0(n,e,t,r,i){if(n=dt(n),Array.isArray(n))for(let s=0;s<n.length;s++)h0(n[s],e,t,r,i);else{const s=Jt(),o=we(),a=Xr();let c=Kl(n)?n:dt(n.provide);const l=FR(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Kl(n)||!n.multi){const I=new $l(l,i,pe),T=p0(c,e,i?f:f+y,m);-1===T?(C(u(a,o),s,c),f0(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[T]=I,o[T]=I)}else{const I=p0(c,e,f+y,m),T=p0(c,e,f,f+y),O=T>=0&&t[T];if(i&&!O||!i&&!(I>=0&&t[I])){C(u(a,o),s,c);const W=function W6(n,e,t,r,i){const s=new $l(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,S1(s,i,r&&!t),s}(i?G6:q6,t.length,i,r,l);!i&&O&&(t[T].providerFactory=W),f0(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),o.push(W)}else f0(s,n,I>-1?I:T,S1(t[i?T:I],l,!i&&r));!i&&r&&O&&t[T].componentProviders++}}}function f0(n,e,t,r){const i=Kl(e),s=function VH(n){return!!n.useClass}(e);if(i||s){const c=(s?dt(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,c]):l[f+1].push(r,c)}else l.push(t,c)}}}function S1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function p0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function q6(n,e,t,r){return g0(this.multi,[])}function G6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=xi(t,t[He],this.providerFactory.index,r);s=a.slice(0,o),g0(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],g0(i,s);return s}function g0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function nr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function H6(n,e,t){const r=Jt();if(r.firstCreatePass){const i=Yi(n);h0(t,r.data,r.blueprint,i,!0),h0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Xl{}class M1{}class m0 extends Xl{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kP(this);const i=gi(e);this._bootstrapComponents=Pa(i.bootstrap),this._r3Injector=KR(e,t,[{provide:Xl,useValue:this},{provide:jy,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class _0 extends M1{constructor(e){super(),this.moduleType=e}create(e){return new m0(this.moduleType,e,[])}}class R1 extends Xl{constructor(e){super(),this.componentFactoryResolver=new kP(this),this.instance=null;const t=new Kd([...e.providers,{provide:Xl,useValue:this},{provide:jy,useValue:this.componentFactoryResolver}],e.parent||Oy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function y0(n,e,t=null){return new R1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Q6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=xR(0,t.type),i=r.length>0?y0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(fe(so))})}return n})();function P1(n){n.getStandaloneInjector=e=>e.get(Q6).getOrCreateStandaloneInjector(n)}function rg(n,e){const t=n[e];return t===St?void 0:t}function B1(n,e,t,r,i,s){const o=e+t;return Oi(n,o,i)?Ho(n,o+1,s?r.call(s,i):r(i)):rg(n,o+1)}function j1(n,e,t,r,i,s,o){const a=e+t;return function Zl(n,e,t,r){const i=Oi(n,e,t);return Oi(n,e+1,r)||i}(n,a,i,s)?Ho(n,a+2,o?r.call(o,i,s):r(i,s)):rg(n,a+2)}function gh(n,e){const t=Jt();let r;const i=n+zt;t.firstCreatePass?(r=function fW(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ca(r.type)),a=ci(pe);try{const c=Od(!1),l=s();return Od(c),function Qq(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,we(),i,l),l}finally{ci(a)}}function ig(n,e,t,r){const i=n+zt,s=we(),o=ys(s,i);return sg(s,i)?j1(s,Jr(),e,o.transform,t,r,o):o.transform(t,r)}function sg(n,e){return n[He].data[e].pure}function vW(n,e,t,r=!0){const i=e[He];if(function Q3(n,e,t,r){const i=Yr+r,s=t.length;r>0&&(t[i-1][Qi]=e),r<s-Yr?(e[Qi]=t[i],NM(t,Yr+r,e)):(t.push(e),e[Qi]=null),e[Un]=t;const o=e[ba];null!==o&&t!==o&&function Y3(n,e){const t=n[Ta];e[hr]!==e[Un][Un][hr]&&(n[pd]=!0),null===t?n[Ta]=[e]:t.push(e)}(o,e);const a=e[gs];null!==a&&a.insertView(n),e[bt]|=128}(i,e,n,t),r){const s=iw(t,n),o=e[wt],a=Cy(o,n[Ys]);null!==a&&function W3(n,e,t,r,i,s){r[Vn]=i,r[zr]=e,Op(n,r,t,1,i,s)}(i,n[zr],o,e,a,s)}}Symbol;let Oa=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=bW}return n})();const EW=Oa,IW=class extends EW{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function yW(n,e,t,r){const i=e.tView,a=Hy(n,i,t,4096&n[bt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ba]=n[e.index];const l=n[gs];return null!==l&&(a[gs]=l.createEmbeddedView(i)),Zw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Hp(i)}};function bW(){return function av(n,e){return 4&n.type?new IW(e,n,Xd(n,e)):null}(Xr(),we())}let bo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=SW}return n})();function SW(){return function X1(n,e){let t;const r=e[n.index];return mi(r)?t=r:(t=wP(r,e,null,n),e[n.index]=t,qy(e,t)),J1(t,e,n,r),new Q1(t,n,e)}(Xr(),we())}const MW=bo,Q1=class extends MW{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(Nd(e)){const t=Hl(e,this._hostLView),r=Rc(e);return new ti(t[He].data[r+8],t)}return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Y1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Yr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Dp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}const c=o?e:new qp(Gt(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const O=(o?l:this.parentInjector).get(so,null);O&&(s=O)}Gt(c.componentType??{});const I=c.create(l,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Ab(n){return mi(n[Un])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=i[Un],f=new Q1(l,l[zr],l[Un]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return vW(a,i,o,!r),e.attachToViewContainerRef(),NM(I0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Y1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ty(this._lContainer,t);r&&(py(I0(this._lContainer),t),ew(r[He],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ty(this._lContainer,t);return r&&null!=py(I0(this._lContainer),t)?new Hp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Y1(n){return n[8]}function I0(n){return n[8]||(n[8]=[])}let J1=function eN(n,e,t,r){if(n[Ys])return;let i;i=8&t.type?yn(r):function RW(n,e){const t=n[wt],r=t.createComment(""),i=Pi(e,n);return Gl(t,Cy(t,i),r,function tH(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ys]=i};const x0=new Ie("Application Initializer");let N0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=qe(x0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Qp(s))t.push(s);else if(ax(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Zo=new Ie("LocaleId",{providedIn:"root",factory:()=>qe(Zo,Ct.Optional|Ct.SkipSelf)||function a5(){return typeof $localize<"u"&&$localize.locale||ph}()});let AN=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class u5{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let DN=(()=>{class n{compileModuleSync(t){return new _0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Pa(gi(t).declarations).reduce((o,a)=>{const c=Gt(a);return c&&o.push(new qp(c)),o},[]);return new u5(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PN=new Ie(""),dv=new Ie("");let V0,F0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,V0||(function x5(n){V0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Wt),fe(L0),fe(dv))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),L0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return V0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Vc=null;const xN=new Ie("AllowMultipleToken"),U0=new Ie("PlatformDestroyListeners"),B0=new Ie("appBootstrapListener");class ON{constructor(e,t){this.name=e,this.token=t}}function FN(n,e,t=[]){const r=`Platform: ${e}`,i=new Ie(r);return(s=[])=>{let o=j0();if(!o||o.injector.get(xN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function k5(n){if(Vc&&!Vc.get(xN,!1))throw new ue(400,!1);(function NN(){!function mb(n){yd=n}(()=>{throw new ue(600,!1)})})(),Vc=n;const e=n.get(VN);(function kN(n){n.get(LR,null)?.forEach(t=>t())})(n)}(function LN(n=[],e){return Ei.create({name:e,providers:[{provide:gw,useValue:"platform"},{provide:U0,useValue:new Set([()=>Vc=null])},...n]})}(a,r))}return function L5(n){const e=j0();if(!e)throw new ue(401,!1);return e}()}}function j0(){return Vc?.get(VN)??null}let VN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function V5(n="zone.js",e){return"noop"===n?new v4:"zone.js"===n?new Wt(e):n}(r?.ngZone,function UN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Z6(n,e,t){return new m0(n,e,t)}(t.moduleType,this.injector,function HN(n){return[{provide:Wt,useFactory:n},{provide:Lp,multi:!0,useFactory:()=>{const e=qe(B5,{optional:!0});return()=>e.initialize()}},{provide:zN,useFactory:U5},{provide:JR,useFactory:eP}]}(()=>i)),o=s.injector.get(vo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{hv(this._modules,s),a.unsubscribe()})}),function BN(n,e,t){try{const r=t();return Qp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(N0);return a.runInitializers(),a.donePromise.then(()=>(function r1(n){Mi(n,"Expected localeId to be defined"),"string"==typeof n&&(n1=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Zo,ph)||ph),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=jN({},r);return function N5(n,e,t){const r=new _0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Jl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new ue(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(U0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ei))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function jN(n,e){return Array.isArray(e)?e.reduce(jN,n):{...n,...e}}let Jl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(zN),this.zoneIsStable=qe(JR),this.componentTypes=[],this.components=[],this.isStable=qe(AN).hasPendingTasks.pipe($e(t=>t?F(!1):this.zoneIsStable),pt(),de()),this._injector=qe(so)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof $R;if(!this._injector.get(N0).done)throw!i&&function ko(n){const e=Gt(n)||Rr(n)||$r(n);return null!==e&&e.standalone}(t),new ue(405,!1);let o;o=i?t:this._injector.get(jy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function O5(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Xl),l=o.create(Ei.NULL,[],r||o.selector,a),f=l.location.nativeElement,m=l.injector.get(PN,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),hv(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ue(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;hv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(B0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zN=new Ie("",{providedIn:"root",factory:()=>qe(vo).handleError.bind(void 0)});function U5(){const n=qe(Wt),e=qe(vo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let B5=(()=>{class n{constructor(){this.zone=qe(Wt),this.applicationRef=qe(Jl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let fv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=$5}return n})();function $5(n){return function z5(n,e,t){if(bc(n)&&!t){const r=_i(n.index,e);return new Hp(r,r)}return 47&n.type?new Hp(e[hr],e):null}(Xr(),we(),16==(16&n))}class ZN{constructor(){}supports(e){return Zy(e)}create(e){return new Z5(e)}}const K5=(n,e)=>e;class Z5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||K5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<YN(r,i,s)?t:r,a=YN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=c-i;if(l!=f){for(let y=0;y<l;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<l&&(s[y]=I+1)}s[o.previousIndex]=f-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Zy(e))throw new ue(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Mq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Q5(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new QN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Q5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Y5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class QN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Y5,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class XN{constructor(){}supports(e){return e instanceof Map||Qw(e)}create(){return new X5}}class X5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Qw(e)))throw new ue(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new J5(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class J5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JN(){return new mv([new ZN])}let mv=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:JN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JN()),deps:[[n,new Mp,new qr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new ue(901,!1)}}return n})();function eO(){return new cg([new XN])}let cg=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:eO});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||eO()),deps:[[n,new Mp,new qr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ue(901,!1)}}return n})();const n9=FN(null,"core",[]);let r9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jl))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({})}return n})();function yh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let W0=null;function Uc(){return W0}class _9{}const _r=new Ie("DocumentToken");let K0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(v9)},providedIn:"platform"})}return n})();const y9=new Ie("Location Initialized");let v9=(()=>{class n extends K0{constructor(){super(),this._doc=qe(_r),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Uc().getBaseHref(this._doc)}onPopState(t){const r=Uc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Uc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Z0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function lO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ka(n){return n&&"?"!==n[0]?"?"+n:n}let tu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(dO)},providedIn:"root"})}return n})();const uO=new Ie("appBaseHref");let dO=(()=>{class n extends tu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??qe(_r).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Z0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ka(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ka(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ka(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(K0),fe(uO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E9=(()=>{class n extends tu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Z0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(K0),fe(uO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),Q0=(()=>{class n{constructor(t){this._subject=new mr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function w9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(lO(hO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ka(r))}normalize(t){return n.stripTrailingSlash(function b9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,hO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ka;static#t=this.joinWithSlash=Z0;static#n=this.stripTrailingSlash=lO;static#r=this.\u0275fac=function(r){return new(r||n)(fe(tu))};static#i=this.\u0275prov=Le({token:n,factory:function(){return function I9(){return new Q0(fe(tu))}()},providedIn:"root"})}return n})();function hO(n){return n.replace(/\/index.html$/,"")}var es=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(es||{}),On=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(On||{}),Vs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Vs||{}),xr=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(xr||{});function vv(n,e){return co(Xi(n)[Bn.DateFormat],e)}function Ev(n,e){return co(Xi(n)[Bn.TimeFormat],e)}function Iv(n,e){return co(Xi(n)[Bn.DateTimeFormat],e)}function ao(n,e){const t=Xi(n),r=t[Bn.NumberSymbols][e];if(typeof r>"u"){if(e===xr.CurrencyDecimal)return t[Bn.NumberSymbols][xr.Decimal];if(e===xr.CurrencyGroup)return t[Bn.NumberSymbols][xr.Group]}return r}function pO(n){if(!n[Bn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function co(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function X0(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const L9=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,lg={},V9=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Fa=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Fa||{}),fn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(fn||{}),pn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(pn||{});function U9(n,e,t,r){let i=function K9(n){if(_O(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return bv(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(L9))return function Z9(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(r)}const e=new Date(n);if(!_O(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=La(t,e)||e;let a,o=[];for(;e;){if(a=V9.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let c=i.getTimezoneOffset();r&&(c=mO(r,c),i=function W9(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function G9(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(mO(e,i)-i))}(i,r,!0));let l="";return o.forEach(f=>{const m=function q9(n){if(eT[n])return eT[n];let e;switch(n){case"G":case"GG":case"GGG":e=jn(pn.Eras,On.Abbreviated);break;case"GGGG":e=jn(pn.Eras,On.Wide);break;case"GGGGG":e=jn(pn.Eras,On.Narrow);break;case"y":e=Gr(fn.FullYear,1,0,!1,!0);break;case"yy":e=Gr(fn.FullYear,2,0,!0,!0);break;case"yyy":e=Gr(fn.FullYear,3,0,!1,!0);break;case"yyyy":e=Gr(fn.FullYear,4,0,!1,!0);break;case"Y":e=Av(1);break;case"YY":e=Av(2,!0);break;case"YYY":e=Av(3);break;case"YYYY":e=Av(4);break;case"M":case"L":e=Gr(fn.Month,1,1);break;case"MM":case"LL":e=Gr(fn.Month,2,1);break;case"MMM":e=jn(pn.Months,On.Abbreviated);break;case"MMMM":e=jn(pn.Months,On.Wide);break;case"MMMMM":e=jn(pn.Months,On.Narrow);break;case"LLL":e=jn(pn.Months,On.Abbreviated,es.Standalone);break;case"LLLL":e=jn(pn.Months,On.Wide,es.Standalone);break;case"LLLLL":e=jn(pn.Months,On.Narrow,es.Standalone);break;case"w":e=J0(1);break;case"ww":e=J0(2);break;case"W":e=J0(1,!0);break;case"d":e=Gr(fn.Date,1);break;case"dd":e=Gr(fn.Date,2);break;case"c":case"cc":e=Gr(fn.Day,1);break;case"ccc":e=jn(pn.Days,On.Abbreviated,es.Standalone);break;case"cccc":e=jn(pn.Days,On.Wide,es.Standalone);break;case"ccccc":e=jn(pn.Days,On.Narrow,es.Standalone);break;case"cccccc":e=jn(pn.Days,On.Short,es.Standalone);break;case"E":case"EE":case"EEE":e=jn(pn.Days,On.Abbreviated);break;case"EEEE":e=jn(pn.Days,On.Wide);break;case"EEEEE":e=jn(pn.Days,On.Narrow);break;case"EEEEEE":e=jn(pn.Days,On.Short);break;case"a":case"aa":case"aaa":e=jn(pn.DayPeriods,On.Abbreviated);break;case"aaaa":e=jn(pn.DayPeriods,On.Wide);break;case"aaaaa":e=jn(pn.DayPeriods,On.Narrow);break;case"b":case"bb":case"bbb":e=jn(pn.DayPeriods,On.Abbreviated,es.Standalone,!0);break;case"bbbb":e=jn(pn.DayPeriods,On.Wide,es.Standalone,!0);break;case"bbbbb":e=jn(pn.DayPeriods,On.Narrow,es.Standalone,!0);break;case"B":case"BB":case"BBB":e=jn(pn.DayPeriods,On.Abbreviated,es.Format,!0);break;case"BBBB":e=jn(pn.DayPeriods,On.Wide,es.Format,!0);break;case"BBBBB":e=jn(pn.DayPeriods,On.Narrow,es.Format,!0);break;case"h":e=Gr(fn.Hours,1,-12);break;case"hh":e=Gr(fn.Hours,2,-12);break;case"H":e=Gr(fn.Hours,1);break;case"HH":e=Gr(fn.Hours,2);break;case"m":e=Gr(fn.Minutes,1);break;case"mm":e=Gr(fn.Minutes,2);break;case"s":e=Gr(fn.Seconds,1);break;case"ss":e=Gr(fn.Seconds,2);break;case"S":e=Gr(fn.FractionalSeconds,1);break;case"SS":e=Gr(fn.FractionalSeconds,2);break;case"SSS":e=Gr(fn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Tv(Fa.Short);break;case"ZZZZZ":e=Tv(Fa.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Tv(Fa.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Tv(Fa.Long);break;default:return null}return eT[n]=e,e}(f);l+=m?m(i,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function bv(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function La(n,e){const t=function C9(n){return Xi(n)[Bn.LocaleId]}(n);if(lg[t]=lg[t]||{},lg[t][e])return lg[t][e];let r="";switch(e){case"shortDate":r=vv(n,Vs.Short);break;case"mediumDate":r=vv(n,Vs.Medium);break;case"longDate":r=vv(n,Vs.Long);break;case"fullDate":r=vv(n,Vs.Full);break;case"shortTime":r=Ev(n,Vs.Short);break;case"mediumTime":r=Ev(n,Vs.Medium);break;case"longTime":r=Ev(n,Vs.Long);break;case"fullTime":r=Ev(n,Vs.Full);break;case"short":const i=La(n,"shortTime"),s=La(n,"shortDate");r=wv(Iv(n,Vs.Short),[i,s]);break;case"medium":const o=La(n,"mediumTime"),a=La(n,"mediumDate");r=wv(Iv(n,Vs.Medium),[o,a]);break;case"long":const c=La(n,"longTime"),l=La(n,"longDate");r=wv(Iv(n,Vs.Long),[c,l]);break;case"full":const f=La(n,"fullTime"),m=La(n,"fullDate");r=wv(Iv(n,Vs.Full),[f,m])}return r&&(lg[t][e]=r),r}function wv(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function wo(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Gr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function j9(n,e){switch(n){case fn.FullYear:return e.getFullYear();case fn.Month:return e.getMonth();case fn.Date:return e.getDate();case fn.Hours:return e.getHours();case fn.Minutes:return e.getMinutes();case fn.Seconds:return e.getSeconds();case fn.FractionalSeconds:return e.getMilliseconds();case fn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===fn.Hours)0===a&&-12===t&&(a=12);else if(n===fn.FractionalSeconds)return function B9(n,e){return wo(n,3).substring(0,e)}(a,e);const c=ao(o,xr.MinusSign);return wo(a,e,c,r,i)}}function jn(n,e,t=es.Format,r=!1){return function(i,s){return function $9(n,e,t,r,i,s){switch(t){case pn.Months:return function S9(n,e,t){const r=Xi(n),s=co([r[Bn.MonthsFormat],r[Bn.MonthsStandalone]],e);return co(s,t)}(e,i,r)[n.getMonth()];case pn.Days:return function D9(n,e,t){const r=Xi(n),s=co([r[Bn.DaysFormat],r[Bn.DaysStandalone]],e);return co(s,t)}(e,i,r)[n.getDay()];case pn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function x9(n){const e=Xi(n);return pO(e),(e[Bn.ExtraData][2]||[]).map(r=>"string"==typeof r?X0(r):[X0(r[0]),X0(r[1])])}(e),f=function N9(n,e,t){const r=Xi(n);pO(r);const s=co([r[Bn.ExtraData][0],r[Bn.ExtraData][1]],e)||[];return co(s,t)||[]}(e,i,r),m=l.findIndex(y=>{if(Array.isArray(y)){const[I,T]=y,N=o>=I.hours&&a>=I.minutes,O=o<T.hours||o===T.hours&&a<T.minutes;if(I.hours<T.hours){if(N&&O)return!0}else if(N||O)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(-1!==m)return f[m]}return function A9(n,e,t){const r=Xi(n),s=co([r[Bn.DayPeriodsFormat],r[Bn.DayPeriodsStandalone]],e);return co(s,t)}(e,i,r)[o<12?0:1];case pn.Eras:return function M9(n,e){return co(Xi(n)[Bn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Tv(n){return function(e,t,r){const i=-1*r,s=ao(t,xr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Fa.Short:return(i>=0?"+":"")+wo(o,2,s)+wo(Math.abs(i%60),2,s);case Fa.ShortGMT:return"GMT"+(i>=0?"+":"")+wo(o,1,s);case Fa.Long:return"GMT"+(i>=0?"+":"")+wo(o,2,s)+":"+wo(Math.abs(i%60),2,s);case Fa.Extended:return 0===r?"Z":(i>=0?"+":"")+wo(o,2,s)+":"+wo(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const z9=0,Cv=4;function gO(n){return bv(n.getFullYear(),n.getMonth(),n.getDate()+(Cv-n.getDay()))}function J0(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=gO(t),o=function H9(n){const e=bv(n,z9,1).getDay();return bv(n,0,1+(e<=Cv?Cv:Cv+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return wo(i,n,ao(r,xr.MinusSign))}}function Av(n,e=!1){return function(t,r){return wo(gO(t).getFullYear(),n,ao(r,xr.MinusSign),e)}}const eT={};function mO(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function _O(n){return n instanceof Date&&!isNaN(n.valueOf())}const oT=/\s+/,IO=[];let bO=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=IO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(oT):IO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(oT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(oT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(mv),pe(cg),pe(Es),pe(Ra))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class l8{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new l8(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),TO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{TO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(bo),pe(Oa),pe(mv))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function TO(n,e){n.context.$implicit=e.item}let dg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new u8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){CO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){CO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(bo),pe(Oa))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class u8{constructor(){this.$implicit=null,this.ngIf=null}}function CO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${st(e)}'.`)}const w8=new Ie("DATE_PIPE_DEFAULT_TIMEZONE"),T8=new Ie("DATE_PIPE_DEFAULT_OPTIONS");let hg=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return U9(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function To(n,e){return new ue(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Zo,16),pe(w8,24),pe(T8,24))};static#t=this.\u0275pipe=jr({name:"date",type:n,pure:!0,standalone:!0})}return n})(),DO=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=jr({name:"json",type:n,pure:!1,standalone:!0})}return n})(),MO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({})}return n})();const RO="browser";function PO(n){return n===RO}function Sv(n){return"server"===n}let F8=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new L8(fe(_r),window)})}return n})();class L8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function V8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class c7 extends _9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fT extends c7{static makeCurrent(){!function m9(n){W0||(W0=n)}(new fT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function l7(){return pg=pg||document.querySelector("base"),pg?pg.getAttribute("href"):null}();return null==t?null:function u7(n){Pv=Pv||document.createElement("a"),Pv.setAttribute("href",n);const e=Pv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function a8(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Pv,pg=null,h7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const pT=new Ie("EventManagerPlugins");let FO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(fe(pT),fe(Wt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class LO{constructor(e){this._doc=e}}const gT="ng-app-id";let VO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${gT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(gT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(gT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_r),fe(ky),fe(vw,8),fe(ks))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const mT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_T=/%COMP%/g,m7=new Ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function BO(n,e){return e.map(t=>t.replace(_T,n))}let yT=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Sv(a),this.defaultRenderer=new vT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tr.ShadowDom&&(r={...r,encapsulation:tr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof $O?i.applyToHost(t):i instanceof ET&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case tr.Emulated:s=new $O(c,l,r,this.appId,f,o,a,m);break;case tr.ShadowDom:return new E7(c,l,t,r,o,a,this.nonce,m);default:s=new ET(c,l,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(FO),fe(VO),fe(ky),fe(m7),fe(_r),fe(ks),fe(Wt),fe(vw))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class vT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(mT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(jO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=mT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Oc.DashCase|Oc.Important)?e.style.setProperty(t,r,i&Oc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Oc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Uc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function jO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class E7 extends vT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=BO(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ET extends vT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?BO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $O extends ET{constructor(e,t,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=function _7(n){return"_ngcontent-%COMP%".replace(_T,n)}(l),this.hostAttr=function y7(n){return"_nghost-%COMP%".replace(_T,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let I7=(()=>{class n extends LO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_r))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const zO=["alt","control","meta","shift"],b7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let T7=(()=>{class n extends LO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Uc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),zO.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=b7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zO.forEach(o=>{o!==i&&(0,w7[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_r))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const S7=FN(n9,"browser",[{provide:ks,useValue:RO},{provide:LR,useValue:function C7(){fT.makeCurrent()},multi:!0},{provide:_r,useFactory:function D7(){return function lH(n){aw=n}(document),document},deps:[]}]),M7=new Ie(""),GO=[{provide:dv,useClass:class d7{addToWindow(e){on.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new ue(5103,!1);return s},on.getAllAngularTestabilities=()=>e.getAllTestabilities(),on.getAllAngularRootElements=()=>e.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(r=>{const i=on.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Uc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:PN,useClass:F0,deps:[Wt,L0,dv]},{provide:F0,useClass:F0,deps:[Wt,L0,dv]}],WO=[{provide:gw,useValue:"root"},{provide:vo,useFactory:function A7(){return new vo},deps:[]},{provide:pT,useClass:I7,multi:!0,deps:[_r,Wt,ks]},{provide:pT,useClass:T7,multi:!0,deps:[_r]},yT,VO,FO,{provide:Bp,useExisting:yT},{provide:class U8{},useClass:h7,deps:[]},[]];let wT,KO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ky,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(M7,12))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({providers:[...WO,...GO],imports:[MO,r9]})}return n})(),ZO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_r))};static#t=this.\u0275prov=Le({token:n,factory:function(r){let i=null;return i=r?new r:function P7(){return new ZO(fe(_r))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{wT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wT=!1}let gg,ek=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?PO(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ks))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xv(n){return function F7(){if(null==gg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gg=!0}))}finally{gg=gg||!1}return gg}()?n:!!n.capture}function nk(n){return Array.isArray(n)?n:[n]}const{isArray:G7}=Array,{getPrototypeOf:W7,prototype:K7,keys:Z7}=Object;function ik(n){if(1===n.length){const e=n[0];if(G7(e))return{args:e,keys:null};if(function Q7(n){return n&&"object"==typeof n&&W7(n)===K7}(e)){const t=Z7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Y7}=Array;function sk(n){return Me(e=>function X7(n,e){return Y7(e)?n(...e):n(e)}(n,e))}function ok(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ov(...n){const e=ds(n),t=Si(n),{args:r,keys:i}=ik(n);if(0===r.length)return b([],e);const s=new Et(function J7(n,e,t=Nt){return r=>{ak(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)ak(e,()=>{const l=b(n[c],e);let f=!1;l.subscribe(Ne(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ok(i,o):Nt));return t?s.pipe(sk(t)):s}function ak(n,e,t){n?gr(t,n,e):e()}function kv(...n){return function eK(){return Fr(1)}()(b(n,ds(n)))}function ru(n){return n<=0?()=>Fn:ae((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ws(n,e){return ae((t,r)=>{let i=0;t.subscribe(Ne(r,s=>n.call(e,s,i++)&&r.next(s)))})}class nK extends Rt{constructor(e,t){super()}schedule(e,t=0){return this}}const Fv={setInterval(n,e,...t){const{delegate:r}=Fv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Fv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class ck extends nK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Fv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Fv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const CT={now:()=>(CT.delegate||Date).now(),delegate:void 0};class mg{constructor(e,t=mg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}mg.now=CT.now;class lk extends mg{constructor(e,t=mg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const AT=new lk(ck);function uk(n,e=AT){return ae((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=s;s=null,r.next(l)}};function c(){const l=o+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(Ne(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function _g(...n){const e=ds(n);return ae((t,r)=>{(e?kv(n,t,e):kv(n,t)).subscribe(r)})}function dk(n){return ae((e,t)=>{Lt(n).subscribe(Ne(t,()=>t.complete(),Ye)),!t.closed&&e.subscribe(t)})}const hk=new Set;let iu,rK=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sK}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function iK(n,e){if(!hk.has(n))try{iu||(iu=document.createElement("style"),e&&(iu.nonce=e),iu.setAttribute("type","text/css"),document.head.appendChild(iu)),iu.sheet&&(iu.sheet.insertRule(`@media ${n} {body{ }}`,0),hk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ek),fe(vw,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sK(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let oK=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return fk(nk(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Ov(fk(nk(t)).map(o=>this._registerQuery(o).observable));return s=kv(s.pipe(ru(1)),s.pipe(function tK(n){return ws((e,t)=>n<=t)}(1),uk(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Et(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(_g(r),Me(({matches:o})=>({query:t,matches:o})),dk(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(fe(rK),fe(Wt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const _k="cdk-high-contrast-black-on-white",yk="cdk-high-contrast-white-on-black",DT="cdk-high-contrast-active";let _K=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=qe(oK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(DT,_k,yk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(DT,_k):2===r&&t.add(DT,yk)}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ek),fe(_r))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({})}return n})();const IK=new Ie("mat-sanity-checks",{providedIn:"root",factory:function EK(){return!0}});let jc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function U7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_K),fe(IK,8),fe(_r))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[vk,vk]})}return n})(),bk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[jc,jc]})}return n})();const wk=xv({passive:!0,capture:!0});class TK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function V7(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,wk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,wk)))}}class ST{static#e=this._eventManager=new TK;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rk(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Tk,...r.animation},o=r.radius||function AK(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,l=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,N=new wK(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",N.state=0,r.persistent||(this._mostRecentTransientRipple=N);return!T&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const W=()=>this._finishRippleTransition(N),j=()=>this._destroyRipple(N);f.addEventListener("transitionend",W),f.addEventListener("transitioncancel",j)}),this._activeRipples.set(N,null),(T||!l)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...Tk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=rk(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Ak.forEach(r=>{ST._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Dk.forEach(t=>{this._triggerElement.addEventListener(t,this,Ck)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function pK(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function gK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Ak.forEach(t=>ST._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Dk.forEach(t=>e.removeEventListener(t,this,Ck)))}}let NK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[jc,MO,jc]})}return n})();function Ih(n,e){const t=P(n)?n:()=>n,r=i=>i.error(t());return new Et(e?i=>e.schedule(r,0,i):r)}function MT(...n){const e=Si(n),{args:t,keys:r}=ik(n),i=new Et(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let f=0;f<o;f++){let m=!1;Lt(t[f]).subscribe(Ne(s,y=>{m||(m=!0,l--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(l||s.next(r?ok(r,a):a),s.complete())}))}});return e?i.pipe(sk(e)):i}function Wr(n,e,t){const r=P(n)||e||t?{next:n,error:e,complete:t}:n;return r?ae((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ne(s,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),s.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Nt}function $c(n){return ae((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ne(t,void 0,void 0,o=>{s=Lt(n(o,$c(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function vg(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function bh(n,e){return P(e)?nn(n,e,1):nn(n,1)}let hZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[jc,jc]})}return n})(),gZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[bk,jc,bk,jc]})}return n})();const $v=Re(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Gk(n){return new Et(e=>{Lt(n()).subscribe(e)})}function LT(){return ae((n,e)=>{let t=null;n._refCount++;const r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Wk extends Et{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ee(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rt;const t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rt.EMPTY)}return e}refCount(){return LT()(this)}}function zv(n){return ae((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Kk(n=_Z){return ae((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _Z(){return new $v}function qc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,s)=>n(i,s,r)):Nt,ru(1),t?zv(e):Kk(()=>new $v))}function Hv(n,e){return ae(function yZ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Ne(o,f=>{const m=l++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function VT(n){return n<=0?()=>Fn:ae((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const Ot="primary",wg=Symbol("RouteTitle");class IZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wh(n){return new IZ(n)}function bZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Zk(n[i],e[i]))return!1;return!0}function Zk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Qk(n){return n.length>0?n[n.length-1]:null}function Gc(n){return function mZ(n){return!!n&&(n instanceof Et||P(n.lift)&&P(n.subscribe))}(n)?n:Qp(n)?b(Promise.resolve(n)):F(n)}const TZ={exact:function Jk(n,e,t){if(!cu(n.segments,e.segments)||!qv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Jk(n.children[r],e.children[r],t))return!1;return!0},subset:eF},Yk={exact:function CZ(n,e){return Yo(n,e)},subset:function AZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Zk(n[t],e[t]))},ignored:()=>!0};function Xk(n,e,t){return TZ[t.paths](n.root,e.root,t.matrixParams)&&Yk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eF(n,e,t){return tF(n,e,e.segments,t)}function tF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!cu(i,t)||e.hasChildren()||!qv(i,t,r))}if(n.segments.length===t.length){if(!cu(n.segments,t)||!qv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!eF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(cu(n.segments,i)&&qv(n.segments,i,r)&&n.children[Ot])&&tF(n.children[Ot],e,s,r)}}function qv(n,e,t){return e.every((r,i)=>Yk[t](n[i].parameters,r.parameters))}class Th{constructor(e=new wn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wh(this.queryParams)),this._queryParamMap}toString(){return MZ.serialize(this)}}class wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gv(this)}}class Tg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wh(this.parameters)),this._parameterMap}toString(){return iF(this)}}function cu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Cg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new UT},providedIn:"root"})}return n})();class UT{parse(e){const t=new BZ(e);return new Th(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ag(e.root,!0)}`,r=function xZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Wv(t)}=${Wv(i)}`).join("&"):`${Wv(t)}=${Wv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function RZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const MZ=new UT;function Gv(n){return n.segments.map(e=>iF(e)).join("/")}function Ag(n,e){if(!n.hasChildren())return Gv(n);if(e){const t=n.children[Ot]?Ag(n.children[Ot],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ot&&r.push(`${i}:${Ag(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ot&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ot&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ot?[Ag(n.children[Ot],!1)]:[`${i}:${Ag(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${Gv(n)}/${t[0]}`:`${Gv(n)}/(${t.join("//")})`}}function nF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wv(n){return nF(n).replace(/%3B/gi,";")}function BT(n){return nF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kv(n){return decodeURIComponent(n)}function rF(n){return Kv(n.replace(/\+/g,"%20"))}function iF(n){return`${BT(n.path)}${function PZ(n){return Object.keys(n).map(e=>`;${BT(e)}=${BT(n[e])}`).join("")}(n.parameters)}`}const NZ=/^[^\/()?;#]+/;function jT(n){const e=n.match(NZ);return e?e[0]:""}const OZ=/^[^\/()?;=#]+/,FZ=/^[^=?&#]+/,VZ=/^[^&#]+/;class BZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new wn(e,t)),r}parseSegment(){const e=jT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new Tg(Kv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function kZ(n){const e=n.match(OZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=jT(this.remaining);i&&(r=i,this.capture(r))}e[Kv(t)]=Kv(r)}parseQueryParam(e){const t=function LZ(n){const e=n.match(FZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function UZ(n){const e=n.match(VZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=rF(t),s=rF(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ue(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ot);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ot]:new wn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}}function sF(n){return n.segments.length>0?new wn([],{[Ot]:n}):n}function oF(n){const e={};for(const r of Object.keys(n.children)){const s=oF(n.children[r]);if(r===Ot&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function jZ(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new wn(n.segments.concat(e.segments),e.children)}return n}(new wn(n.segments,e))}function lu(n){return n instanceof Th}function aF(n){let e;const i=sF(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new wn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function cF(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return $T(i,i,i,t,r);const s=function zZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new uF(t,e,r)}(e);if(s.toRoot())return $T(i,i,new wn([],{}),t,r);const o=function HZ(n,e,t){if(n.isAbsolute)return new Qv(e,!0,0);if(!t)return new Qv(e,!1,NaN);if(null===t.parent)return new Qv(t,!0,0);const r=Zv(n.commands[0])?0:1;return function qZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ue(4005,!1);i=r.segments.length}return new Qv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Sg(o.segmentGroup,o.index,s.commands):dF(o.segmentGroup,o.index,s.commands);return $T(i,o.segmentGroup,a,t,r)}function Zv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Dg(n){return"object"==typeof n&&null!=n&&n.outlets}function $T(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:lF(n,e,t);const a=sF(oF(o));return new Th(a,s,i)}function lF(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:lF(s,e,t)}),new wn(n.segments,r)}class uF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zv(r[0]))throw new ue(4003,!1);const i=r.find(Dg);if(i&&i!==Qk(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dF(n,e,t){if(n||(n=new wn([],{})),0===n.segments.length&&n.hasChildren())return Sg(n,e,t);const r=function WZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Dg(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!fF(c,l,o))return s;r+=2}else{if(!fF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new wn(n.segments.slice(0,r.pathIndex),{});return s.children[Ot]=new wn(n.segments.slice(r.pathIndex),n.children),Sg(s,0,i)}return r.match&&0===i.length?new wn(n.segments,{}):r.match&&!n.hasChildren()?zT(n,e,t):r.match?Sg(n,0,i):zT(n,e,t)}function Sg(n,e,t){if(0===t.length)return new wn(n.segments,{});{const r=function GZ(n){return Dg(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Ot)&&n.children[Ot]&&1===n.numberOfChildren&&0===n.children[Ot].segments.length){const s=Sg(n.children[Ot],e,t);return new wn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=dF(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new wn(n.segments,i)}}function zT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Dg(s)){const c=KZ(s.outlets);return new wn(r,c)}if(0===i&&Zv(t[0])){r.push(new Tg(n.segments[e].path,hF(t[0]))),i++;continue}const o=Dg(s)?s.outlets[Ot]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Zv(a)?(r.push(new Tg(o,hF(a))),i+=2):(r.push(new Tg(o,{})),i++)}return new wn(r,{})}function KZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=zT(new wn([],{}),0,r))}),e}function hF(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fF(n,e,t){return n==t.path&&Yo(e,t.parameters)}const Mg="imperative";class Xo{constructor(e,t){this.id=e,this.url=t}}class Yv extends Xo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ua extends Xo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rg extends Xo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ch extends Xo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xv extends Xo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pF extends Xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZZ extends Xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QZ extends Xo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YZ extends Xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XZ extends Xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class HT{}class qT{constructor(e){this.url=e}}class sQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Pg,this.attachRef=null}}let Pg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sQ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=GT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=GT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=WT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return WT(e,this._root).map(t=>t.value)}}function GT(n,e){if(n===e.value)return e;for(const t of e.children){const r=GT(n,t);if(r)return r}return null}function WT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=WT(n,t);if(r.length)return r.unshift(e),r}return[]}class Ba{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ah(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _F extends mF{constructor(e,t){super(e),this.snapshot=t,KT(this,e)}toString(){return this.snapshot.toString()}}function yF(n,e){const t=function oQ(n,e){const o=new Jv([],{},{},"",{},Ot,e,null,{});return new EF("",new Ba(o,[]))}(0,e),r=new w([new Tg("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new Co(r,i,o,a,s,Ot,e,t.root);return c.snapshot=t.root,new _F(new Ba(c,[]),t)}class Co{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(l=>l[wg]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(e=>wh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(e=>wh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function aQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jv{get title(){return this.data?.[wg]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EF extends mF{constructor(e,t){super(t),this.url=e,KT(this,t)}toString(){return IF(this._root)}}function KT(n,e){e.value._routerState=n,e.children.forEach(t=>KT(n,t))}function IF(n){const e=n.children.length>0?` { ${n.children.map(IF).join(", ")} } `:"";return`${n.value}${e}`}function ZT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Yo(e.params,t.params)||n.paramsSubject.next(t.params),function wZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Yo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function QT(n,e){const t=Yo(n.params,e.params)&&function DZ(n,e){return cu(n,e)&&n.every((t,r)=>Yo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||QT(n.parent,e.parent))}let YT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new mr,this.deactivateEvents=new mr,this.attachEvents=new mr,this.detachEvents=new mr,this.parentContexts=qe(Pg),this.location=qe(bo),this.changeDetector=qe(fv),this.environmentInjector=qe(so),this.inputBinder=qe(eE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cQ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_s]})}return n})();class cQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Co?this.route:e===Pg?this.childContexts:this.parent.get(e,t)}}const eE=new Ie("");let bF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Ov([r.queryParams,r.params,r.data]).pipe($e(([s,o,a],c)=>(a={...s,...o,...a},0===c?F(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function g9(n){const e=Gt(n);if(!e)return null;const t=new qp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function xg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xg(n,r,i);return xg(n,r)})}(n,e,t);return new Ba(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xg(n,a)),o}}const r=function dQ(n){return new Co(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>xg(n,s));return new Ba(r,i)}}const XT="ngNavigationCancelingError";function wF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=lu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function TF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[XT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function CF(n){return n&&n[XT]}let AF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gn({type:n,selectors:[["ng-component"]],standalone:!0,features:[P1],decls:1,vars:0,template:function(r,i){1&r&&lt(0,"router-outlet")},dependencies:[YT],encapsulation:2})}return n})();function JT(n){const e=n.children&&n.children.map(JT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=AF),t}function Ao(n){return n.outlet||Ot}function Ng(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ZT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ah(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ah(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new iQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ZT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ZT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ng(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class DF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tE{constructor(e,t){this.component=e,this.route=t}}function EQ(n,e,t){const r=n._root;return Og(r,e?e._root:null,t,[r.value])}function Dh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Tl(n){return null!==pa(n)}(n)?e.get(n):n:r}function Og(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ah(e);return n.children.forEach(o=>{(function bQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function wQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!cu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cu(n.url,e.url)||!Yo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!QT(n,e)||!Yo(n.queryParams,e.queryParams);default:return!QT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new DF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Og(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tE(a.outlet.component,o))}else o&&kg(e,a,i),i.canActivateChecks.push(new DF(r)),Og(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>kg(a,t.getContext(o),i)),i}function kg(n,e,t){const r=Ah(n),i=n.value;Object.entries(r).forEach(([s,o])=>{kg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new tE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Fg(n){return"function"==typeof n}function SF(n){return n instanceof $v||"EmptyError"===n?.name}const nE=Symbol("INITIAL_VALUE");function Sh(){return $e(n=>Ov(n.map(e=>e.pipe(ru(1),_g(nE)))).pipe(Me(e=>{for(const t of e)if(!0!==t){if(t===nE)return nE;if(!1===t||t instanceof Th)return t}return!0}),ws(e=>e!==nE),ru(1)))}function MF(n){return function Pn(...n){return dn(n)}(Wr(e=>{if(lu(e))throw wF(0,e)}),Me(e=>!0===e))}class rE{constructor(e){this.segmentGroup=e||null}}class RF{constructor(e){this.urlTree=e}}function Mh(n){return Ih(new rE(n))}function PF(n){return Ih(new RF(n))}class zQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ue(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return F(r);if(i.numberOfChildren>1||!i.children[Ot])return Ih(new ue(4e3,!1));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Th(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new wn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new ue(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const eC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HQ(n,e,t,r,i){const s=tC(n,e,t);return s.matched?(r=function fQ(n,e){return n.providers&&!n._injector&&(n._injector=y0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function BQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?F(i.map(o=>{const a=Dh(o,n);return Gc(function MQ(n){return n&&Fg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Sh(),MF()):F(!0)}(r,e,t).pipe(Me(o=>!0===o?s:{...eC}))):F(s)}function tC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...eC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||bZ)(t,n,e);if(!i)return{...eC};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xF(n,e,t,r){return t.length>0&&function WQ(n,e,t){return t.some(r=>iE(n,e,r)&&Ao(r)!==Ot)}(n,t,r)?{segmentGroup:new wn(e,GQ(r,new wn(t,n.children))),slicedSegments:[]}:0===t.length&&function KQ(n,e,t){return t.some(r=>iE(n,e,r))}(n,t,r)?{segmentGroup:new wn(n.segments,qQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new wn(n.segments,n.children),slicedSegments:t}}function qQ(n,e,t,r,i){const s={};for(const o of r)if(iE(n,t,o)&&!i[Ao(o)]){const a=new wn([],{});s[Ao(o)]=a}return{...i,...s}}function GQ(n,e){const t={};t[Ot]=e;for(const r of n)if(""===r.path&&Ao(r)!==Ot){const i=new wn([],{});t[Ao(r)]=i}return t}function iE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class XQ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new zQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new ue(4002,!1)}recognize(){const e=xF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe($c(t=>{if(t instanceof RF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof rE?this.noMatchError(t):t}),Me(t=>{const r=new Jv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,{}),i=new Ba(r,t),s=new EF("",i),o=function $Z(n,e,t=null,r=null){return cF(aF(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ot).pipe($c(r=>{throw r instanceof rE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=vF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(bh(s=>{const o=r.children[s],a=function _Q(n,e){const t=n.filter(r=>Ao(r)===e);return t.push(...n.filter(r=>Ao(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Hv((s,o)=>(s.push(...o),s)),zv(null),function vZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,s)=>n(i,s,r)):Nt,VT(1),t?zv(e):Kk(()=>new $v))}(),nn(s=>{if(null===s)return Mh(r);const o=NF(s);return function JQ(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),F(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(bh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe($c(c=>{if(c instanceof rE)return F(null);throw c}))),qc(a=>!!a),$c(a=>{if(SF(a))return function QQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?F([]):Mh(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function ZQ(n,e,t,r){return!!(Ao(n)===r||r!==Ot&&iE(e,t,n))&&("**"===n.path||tC(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Mh(i):Mh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(nn(o=>{const a=new wn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:f}=tC(t,i,s);if(!a)return Mh(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?PF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(nn(y=>this.processSegment(e,r,t,y.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Qk(i).parameters:{};a=F({snapshot:new Jv(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OF(r),Ao(r),r.component??r._loadedComponent??null,r,kF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=HQ(t,r,i,e).pipe(Me(({matched:c,consumedSegments:l,remainingSegments:f,parameters:m})=>c?{snapshot:new Jv(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OF(r),Ao(r),r.component??r._loadedComponent??null,r,kF(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe($e(c=>null===c?Mh(t):this.getChildConfig(e=r._injector??e,r,i).pipe($e(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:T,slicedSegments:N}=xF(t,y,I,l);if(0===N.length&&T.hasChildren())return this.processChildren(f,l,T).pipe(Me(W=>null===W?null:[new Ba(m,W)]));if(0===l.length&&0===N.length)return F([new Ba(m,[])]);const O=Ao(r)===s;return this.processSegment(f,l,T,N,O?Ot:s,!0).pipe(Me(W=>[new Ba(m,W)]))}))))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?F({routes:t._loadedRoutes,injector:t._loadedInjector}):function UQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?F(!0):F(i.map(o=>{const a=Dh(o,n);return Gc(function CQ(n){return n&&Fg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Sh(),MF())}(e,t,r).pipe(nn(i=>i?this.configLoader.loadChildren(e,t).pipe(Wr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function $Q(n){return Ih(TF(!1,3))}())):F({routes:[],injector:e})}}function eY(n){const e=n.value.routeConfig;return e&&""===e.path}function NF(n){const e=[],t=new Set;for(const r of n){if(!eY(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=NF(r.children);e.push(new Ba(r.value,i))}return e.filter(r=>!t.has(r))}function OF(n){return n.data||{}}function kF(n){return n.resolve||{}}function FF(n){return"string"==typeof n.title||null===n.title}function nC(n){return $e(e=>{const t=n(e);return t?b(t).pipe(Me(()=>e)):F(e)})}const Rh=new Ie("ROUTES");let rC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=qe(DN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gc(t.loadComponent()).pipe(Me(LF),Wr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),vg(()=>{this.componentLoaders.delete(t)})),i=new Wk(r,()=>new le).pipe(LT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function aY(n,e,t,r){return Gc(n.loadChildren()).pipe(Me(LF),nn(i=>i instanceof M1||Array.isArray(i)?F(i):b(e.compileModuleAsync(i))),Me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Rh,[],{optional:!0,self:!0}).flat()),{routes:o.map(JT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(vg(()=>{this.childrenLoaders.delete(r)})),o=new Wk(s,()=>new le).pipe(LT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LF(n){return function cY(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new le,this.transitionAbortSubject=new le,this.configLoader=qe(rC),this.environmentInjector=qe(so),this.urlSerializer=qe(Cg),this.rootContexts=qe(Pg),this.inputBindingEnabled=null!==qe(eE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eQ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new JZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(s=>0!==s.id),Me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),$e(s=>{this.currentTransition=s;let o=!1,a=!1;return F(s).pipe(Wr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$e(c=>{const l=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Ch(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),Fn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe($e(y=>{const I=this.transitions?.getValue();return this.events.next(new Yv(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?Fn:Promise.resolve(y)}),function tY(n,e,t,r,i,s){return nn(o=>function YQ(n,e,t,r,i,s,o="emptyOnly"){return new XQ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Me(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new pF(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:N,extras:O}=c,W=new Yv(y,this.urlSerializer.serialize(I),T,N);this.events.next(W);const j=yF(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:j,urlAfterRedirects:I,extras:{...O,skipLocationChange:!1,replaceUrl:!1}},F(s)}{const y="";return this.events.next(new Ch(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),Fn}}),Wr(c=>{const l=new ZZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Me(c=>(this.currentTransition=s={...c,guards:EQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function PQ(n,e){return nn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?F({...t,guardsResult:!0}):function xQ(n,e,t,r){return b(n).pipe(nn(i=>function VQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?F(s.map(a=>{const c=Ng(e)??i,l=Dh(a,c);return Gc(function SQ(n){return n&&Fg(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(qc())})).pipe(Sh()):F(!0)}(i.component,i.route,t,e,r)),qc(i=>!0!==i,!0))}(o,r,i,n).pipe(nn(a=>a&&function TQ(n){return"boolean"==typeof n}(a)?function NQ(n,e,t,r){return b(e).pipe(bh(i=>kv(function kQ(n,e){return null!==n&&e&&e(new tQ(n)),F(!0)}(i.route.parent,r),function OQ(n,e){return null!==n&&e&&e(new rQ(n)),F(!0)}(i.route,r),function LQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function IQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Gk(()=>F(o.guards.map(c=>{const l=Ng(o.node)??t,f=Dh(c,l);return Gc(function DQ(n){return n&&Fg(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(qc())})).pipe(Sh())));return F(s).pipe(Sh())}(n,i.path,t),function FQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return F(!0);const i=r.map(s=>Gk(()=>{const o=Ng(e)??t,a=Dh(s,o);return Gc(function AQ(n){return n&&Fg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(qc())}));return F(i).pipe(Sh())}(n,i.route,t))),qc(i=>!0!==i,!0))}(r,s,n,e):F(a)),Me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Wr(c=>{if(s.guardsResult=c.guardsResult,lu(c.guardsResult))throw wF(0,c.guardsResult);const l=new QZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ws(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),nC(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Wr(l=>{const f=new YZ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),$e(l=>{let f=!1;return F(l).pipe(function nY(n,e){return nn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=0;return b(i).pipe(bh(o=>function rY(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!FF(i)&&(s[wg]=i.title),function iY(n,e,t,r){const i=function sY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return F({});const s={};return b(i).pipe(nn(o=>function oY(n,e,t,r){const i=Ng(e)??r,s=Dh(n,i);return Gc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(qc(),Wr(a=>{s[o]=a}))),VT(1),function EZ(n){return Me(()=>n)}(s),$c(o=>SF(o)?Fn:Ih(o)))}(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=vF(n,t).resolve,i&&FF(i)&&(n.data[wg]=i.title),null)))}(o.route,r,n,e)),Wr(()=>s++),VT(1),nn(o=>s===i.length?F(t):Fn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Wr(l=>{const f=new XZ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),nC(c=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Wr(y=>{f.component=y}),Me(()=>{})));for(const y of f.children)m.push(...l(y));return m};return Ov(l(c.targetSnapshot.root)).pipe(zv(),ru(1))}),nC(()=>this.afterPreactivation()),Me(c=>{const l=function lQ(n,e,t){const r=xg(n,e._root,t?t._root:void 0);return new _F(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},s}),Wr(()=>{this.events.next(new HT)}),((n,e,t,r)=>Me(i=>(new vQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ru(1),Wr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ua(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),dk(this.transitionAbortSubject.pipe(Wr(c=>{throw c}))),vg(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),$c(c=>{if(a=!0,CF(c))this.events.next(new Rg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function hQ(n){return CF(n)&&lu(n.url)}(c)?this.events.next(new qT(c.url)):s.resolve(!1);else{this.events.next(new Xv(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){s.reject(l)}}return Fn}))}))}cancelNavigationTransition(t,r,i){const s=new Rg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VF(n){return n!==Mg}let UF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[wg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(lY)},providedIn:"root"})}return n})(),lY=(()=>{class n extends UF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ZO))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(hY)},providedIn:"root"})}return n})();class dY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let hY=(()=>{class n extends dY{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oE=new Ie("",{providedIn:"root",factory:()=>({})});let fY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(pY)},providedIn:"root"})}return n})(),pY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Lg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Lg||{});function BF(n,e){n.events.pipe(ws(t=>t instanceof Ua||t instanceof Rg||t instanceof Xv||t instanceof Ch),Me(t=>t instanceof Ua||t instanceof Ch?Lg.COMPLETE:t instanceof Rg&&(0===t.code||1===t.code)?Lg.REDIRECTING:Lg.FAILED),ws(t=>t!==Lg.REDIRECTING),ru(1)).subscribe(()=>{e()})}function gY(n){throw n}function mY(n,e,t){return e.parse("/")}const _Y={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=qe(CN),this.isNgZoneEnabled=!1,this._events=new le,this.options=qe(oE,{optional:!0})||{},this.pendingTasks=qe(AN),this.errorHandler=this.options.errorHandler||gY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=qe(fY),this.routeReuseStrategy=qe(uY),this.titleStrategy=qe(UF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qe(Rh,{optional:!0})?.flat()??[],this.navigationTransitions=qe(sE),this.urlSerializer=qe(Cg),this.location=qe(Q0),this.componentInputBindingEnabled=!!qe(eE,{optional:!0}),this.eventsSubscription=new Rt,this.isNgZoneEnabled=qe(Wt)instanceof Wt&&Wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Th,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=yF(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(jF(r)&&this._events.next(r));if(r instanceof Yv)VF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Ch)this.rawUrlTree=i.rawUrl;else if(r instanceof pF){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof HT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Rg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof qT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VF(i.source)};this.scheduleNavigation(s,Mg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Xv&&this.restoreHistory(i,!0),r instanceof Ua&&(this.navigated=!0),jF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(JT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=aF(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return cF(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=lu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Mg,null,r)}navigate(t,r={skipLocationChange:!1}){return function vY(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ue(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{..._Y}:!1===r?{...yY}:r,lu(t))return Xk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Xk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return BF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jF(n){return!(n instanceof HT||n instanceof qT)}let aE=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new le,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ua&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function SR(n,e,t){return function kH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?DR:Kn}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rr),pe(Co),function xc(n){return function q(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(ps(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Xr(),n)}("tabindex"),pe(Ra),pe(Es),pe(tu))};static#t=this.\u0275dir=et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&At("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&qo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",yh],skipLocationChange:["skipLocationChange","skipLocationChange",yh],replaceUrl:["replaceUrl","replaceUrl",yh],routerLink:"routerLink"},standalone:!0,features:[jP,_s]})}return n})();class $F{}let bY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ws(t=>t instanceof Ua),bh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=y0(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(Fr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):F(null);const s=i.pipe(nn(o=>null===o?F(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(Fr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(rr),fe(DN),fe(so),fe($F),fe(rC))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const iC=new Ie("");let zF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ua?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ch&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function pP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function ja(n,e){return{\u0275kind:n,\u0275providers:e}}function qF(){const n=qe(Ei);return e=>{const t=n.get(Jl);if(e!==t.components[0])return;const r=n.get(rr),i=n.get(GF);1===n.get(sC)&&r.initialNavigation(),n.get(WF,null,Ct.Optional)?.setUpPreloading(),n.get(iC,null,Ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const GF=new Ie("",{factory:()=>new le}),sC=new Ie("",{providedIn:"root",factory:()=>1}),WF=new Ie("");function AY(n){return ja(0,[{provide:WF,useExisting:bY},{provide:$F,useExisting:n}])}const KF=new Ie("ROUTER_FORROOT_GUARD"),SY=[Q0,{provide:Cg,useClass:UT},rr,Pg,{provide:Co,useFactory:function HF(n){return n.routerState.root},deps:[rr]},rC,[]];function MY(){return new ON("Router",rr)}let ZF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[SY,[],{provide:Rh,multi:!0,useValue:t},{provide:KF,useFactory:NY,deps:[[rr,new qr,new Mp]]},{provide:oE,useValue:r||{}},r?.useHash?{provide:tu,useClass:E9}:{provide:tu,useClass:dO},{provide:iC,useFactory:()=>{const n=qe(F8),e=qe(Wt),t=qe(oE),r=qe(sE),i=qe(Cg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zF(i,r,n,e,t)}},r?.preloadingStrategy?AY(r.preloadingStrategy).\u0275providers:[],{provide:ON,multi:!0,useFactory:MY},r?.initialNavigation?OY(r):[],r?.bindToComponentInputs?ja(8,[bF,{provide:eE,useExisting:bF}]).\u0275providers:[],[{provide:QF,useFactory:qF},{provide:B0,multi:!0,useExisting:QF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Rh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(KF,8))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({})}return n})();function NY(n){return"guarded"}function OY(n){return["disabled"===n.initialNavigation?ja(3,[{provide:x0,multi:!0,useFactory:()=>{const e=qe(rr);return()=>{e.setUpLocationChangeListener()}}},{provide:sC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ja(2,[{provide:sC,useValue:0},{provide:x0,multi:!0,deps:[Ei],useFactory:e=>{const t=e.get(y9,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(rr),s=e.get(GF);BF(i,()=>{r(!0)}),e.get(sE).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const QF=new Ie("");var vr=We(303);(0,vr.registerVersion)("firebase","10.12.2","app");const BY=new class UY extends lk{}(class VY extends ck{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Wc=new kc("ANGULARFIRE2_VERSION");function oC(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const cE=(n,e)=>{const t=e?[e]:(0,vr.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Vg{constructor(){return cE(jY)}}const jY="app-check";function Ph(){}class YF{zone;delegate;constructor(e,t=BY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class $Y{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ph,{},Ph,Ph)),t.pipe(Wr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uu=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new YF(Zone.current)),this.insideAngular=t.run(()=>new YF(Zone.current,AT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(fe(Wt))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function du(n){return xh().ngZone.run(()=>n())}function XF(n){return n.pipe(En(xh().outsideAngular))}function ts(n){return function HY(n){return function(t){return(t=t.lift(new $Y(n.ngZone))).pipe(Dr(n.outsideAngular),En(n.insideAngular))}}(xh())(n)}const qY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),du(()=>n.apply(void 0,r))},aC=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=du(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ph,{},Ph,Ph))),r[s]=qY(r[s],t));const i=function zY(n){return xh().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Et){const s=xh();return i.pipe(Dr(s.outsideAngular),En(s.insideAngular))}return du(()=>i)}return i instanceof Et?i.pipe(ts):i instanceof Promise?du(()=>new Promise((s,o)=>i.then(a=>du(()=>s(a)),a=>du(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:du(()=>i)};var Jo=We(106);Jo.Z.registerVersion("firebase","10.12.2","app-compat");const KY=["ngOnDestroy"],JF=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(KY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,m),m})})})});class cC{constructor(e){return e}}const Ug=new Ie("angularfire2.app.options"),Bg=new Ie("angularfire2.app.name");function lE(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Jo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Jo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;ZY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new cC(o)}const ZY=(n,...e)=>{},QY={provide:cC,useFactory:lE,deps:[Ug,Wt,[new qr,Bg]]};let YY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ug,useValue:t},{provide:Bg,useValue:r}]}}constructor(t){Jo.Z.registerVersion("angularfire",Wc.full,"core"),Jo.Z.registerVersion("angularfire",Wc.full,"app-compat"),Jo.Z.registerVersion("angular",Rw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(ks))};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[QY]})}return n})();function uE(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function XY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(tL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${JY?" You may need to reload as Firebase is not HMR aware.":""}`),tL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const JY=typeof module<"u"&&!!module.hot,tL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],We(365);class eX extends le{constructor(e=1/0,t=1/0,r=CT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function lC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,de({connector:()=>new eX(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nL(n,e){return P(e)?$e(()=>n,e):$e(()=>n)}const rL=new Ie("angularfire2.auth.use-emulator"),iL=new Ie("angularfire2.auth.settings"),sL=new Ie("angularfire2.auth.tenant-id"),oL=new Ie("angularfire2.auth.langugage-code"),aL=new Ie("angularfire2.auth.use-device-language"),cL=new Ie("angularfire.auth.persistence"),lL=(n,e,t,r,i,s,o,a)=>uE(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))c.settings[l]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let uL=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,f,m,y,I){const T=new le,N=F(void 0).pipe(En(o.outsideAngular),$e(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,365)))),Me(()=>lE(t,s,r)),Me(O=>lL(O,s,a,l,f,m,c,y)),lC({bufferSize:1,refCount:!1}));if(Sv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{N.pipe(qc()).subscribe();const O=N.pipe($e(X=>X.getRedirectResult().then(oe=>oe,()=>null)),ts,lC({bufferSize:1,refCount:!1})),W=N.pipe($e(X=>new Et(oe=>({unsubscribe:s.runOutsideAngular(()=>X.onAuthStateChanged(De=>oe.next(De),De=>oe.error(De),()=>oe.complete()))})))),j=N.pipe($e(X=>new Et(oe=>({unsubscribe:s.runOutsideAngular(()=>X.onIdTokenChanged(De=>oe.next(De),De=>oe.error(De),()=>oe.complete()))}))));this.authState=O.pipe(nL(W),Dr(o.outsideAngular),En(o.insideAngular)),this.user=O.pipe(nL(j),Dr(o.outsideAngular),En(o.insideAngular)),this.idToken=this.user.pipe($e(X=>X?b(X.getIdToken()):F(null))),this.idTokenResult=this.user.pipe($e(X=>X?b(X.getIdTokenResult()):F(null))),this.credential=D(O,T,this.authState.pipe(ws(X=>!X))).pipe(Me(X=>X?.user?X:null),Dr(o.outsideAngular),En(o.insideAngular))}return JF(this,N,s,{spy:{apply:(O,W,j)=>{(O.startsWith("signIn")||O.startsWith("createUser"))&&j.then(X=>T.next(X))}}})}static \u0275fac=function(r){return new(r||n)(fe(Ug),fe(Bg,8),fe(ks),fe(Wt),fe(uu),fe(rL,8),fe(iL,8),fe(sL,8),fe(oL,8),fe(aL,8),fe(cL,8),fe(Vg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function uC(){return ae((n,e)=>{let t,r=!1;n.subscribe(Ne(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var hu,fL,_e=We(861),dE=We(537),ea=We(879),Mt=We(58),dL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hL={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,V,B){B||(B=0);var K=Array(16);if("string"==typeof V)for(var Y=0;16>Y;++Y)K[Y]=V.charCodeAt(B++)|V.charCodeAt(B++)<<8|V.charCodeAt(B++)<<16|V.charCodeAt(B++)<<24;else for(Y=0;16>Y;++Y)K[Y]=V[B++]|V[B++]<<8|V[B++]<<16|V[B++]<<24;var ne=H.g[3],z=(V=H.g[0])+(ne^(B=H.g[1])&((Y=H.g[2])^ne))+K[0]+3614090360&4294967295;z=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=(B=(Y=(ne=(V=B+(z<<7&4294967295|z>>>25))+((z=ne+(Y^V&(B^Y))+K[1]+3905402710&4294967295)<<12&4294967295|z>>>20))+((z=Y+(B^ne&(V^B))+K[2]+606105819&4294967295)<<17&4294967295|z>>>15))+((z=B+(V^Y&(ne^V))+K[3]+3250441966&4294967295)<<22&4294967295|z>>>10))+((z=V+(ne^B&(Y^ne))+K[4]+4118548399&4294967295)<<7&4294967295|z>>>25))+((z=ne+(Y^V&(B^Y))+K[5]+1200080426&4294967295)<<12&4294967295|z>>>20))+((z=Y+(B^ne&(V^B))+K[6]+2821735955&4294967295)<<17&4294967295|z>>>15))+((z=B+(V^Y&(ne^V))+K[7]+4249261313&4294967295)<<22&4294967295|z>>>10))+((z=V+(ne^B&(Y^ne))+K[8]+1770035416&4294967295)<<7&4294967295|z>>>25))+((z=ne+(Y^V&(B^Y))+K[9]+2336552879&4294967295)<<12&4294967295|z>>>20))+((z=Y+(B^ne&(V^B))+K[10]+4294925233&4294967295)<<17&4294967295|z>>>15))+((z=B+(V^Y&(ne^V))+K[11]+2304563134&4294967295)<<22&4294967295|z>>>10))+((z=V+(ne^B&(Y^ne))+K[12]+1804603682&4294967295)<<7&4294967295|z>>>25))+((z=ne+(Y^V&(B^Y))+K[13]+4254626195&4294967295)<<12&4294967295|z>>>20))+((z=Y+(B^ne&(V^B))+K[14]+2792965006&4294967295)<<17&4294967295|z>>>15))+((z=B+(V^Y&(ne^V))+K[15]+1236535329&4294967295)<<22&4294967295|z>>>10))+((z=V+(Y^ne&(B^Y))+K[1]+4129170786&4294967295)<<5&4294967295|z>>>27))+((z=ne+(B^Y&(V^B))+K[6]+3225465664&4294967295)<<9&4294967295|z>>>23))+((z=Y+(V^B&(ne^V))+K[11]+643717713&4294967295)<<14&4294967295|z>>>18))+((z=B+(ne^V&(Y^ne))+K[0]+3921069994&4294967295)<<20&4294967295|z>>>12))+((z=V+(Y^ne&(B^Y))+K[5]+3593408605&4294967295)<<5&4294967295|z>>>27))+((z=ne+(B^Y&(V^B))+K[10]+38016083&4294967295)<<9&4294967295|z>>>23))+((z=Y+(V^B&(ne^V))+K[15]+3634488961&4294967295)<<14&4294967295|z>>>18))+((z=B+(ne^V&(Y^ne))+K[4]+3889429448&4294967295)<<20&4294967295|z>>>12))+((z=V+(Y^ne&(B^Y))+K[9]+568446438&4294967295)<<5&4294967295|z>>>27))+((z=ne+(B^Y&(V^B))+K[14]+3275163606&4294967295)<<9&4294967295|z>>>23))+((z=Y+(V^B&(ne^V))+K[3]+4107603335&4294967295)<<14&4294967295|z>>>18))+((z=B+(ne^V&(Y^ne))+K[8]+1163531501&4294967295)<<20&4294967295|z>>>12))+((z=V+(Y^ne&(B^Y))+K[13]+2850285829&4294967295)<<5&4294967295|z>>>27))+((z=ne+(B^Y&(V^B))+K[2]+4243563512&4294967295)<<9&4294967295|z>>>23))+((z=Y+(V^B&(ne^V))+K[7]+1735328473&4294967295)<<14&4294967295|z>>>18))+((z=B+(ne^V&(Y^ne))+K[12]+2368359562&4294967295)<<20&4294967295|z>>>12))+((z=V+(B^Y^ne)+K[5]+4294588738&4294967295)<<4&4294967295|z>>>28))+((z=ne+(V^B^Y)+K[8]+2272392833&4294967295)<<11&4294967295|z>>>21))+((z=Y+(ne^V^B)+K[11]+1839030562&4294967295)<<16&4294967295|z>>>16))+((z=B+(Y^ne^V)+K[14]+4259657740&4294967295)<<23&4294967295|z>>>9))+((z=V+(B^Y^ne)+K[1]+2763975236&4294967295)<<4&4294967295|z>>>28))+((z=ne+(V^B^Y)+K[4]+1272893353&4294967295)<<11&4294967295|z>>>21))+((z=Y+(ne^V^B)+K[7]+4139469664&4294967295)<<16&4294967295|z>>>16))+((z=B+(Y^ne^V)+K[10]+3200236656&4294967295)<<23&4294967295|z>>>9))+((z=V+(B^Y^ne)+K[13]+681279174&4294967295)<<4&4294967295|z>>>28))+((z=ne+(V^B^Y)+K[0]+3936430074&4294967295)<<11&4294967295|z>>>21))+((z=Y+(ne^V^B)+K[3]+3572445317&4294967295)<<16&4294967295|z>>>16))+((z=B+(Y^ne^V)+K[6]+76029189&4294967295)<<23&4294967295|z>>>9))+((z=V+(B^Y^ne)+K[9]+3654602809&4294967295)<<4&4294967295|z>>>28))+((z=ne+(V^B^Y)+K[12]+3873151461&4294967295)<<11&4294967295|z>>>21))+((z=Y+(ne^V^B)+K[15]+530742520&4294967295)<<16&4294967295|z>>>16))+((z=B+(Y^ne^V)+K[2]+3299628645&4294967295)<<23&4294967295|z>>>9))+((z=V+(Y^(B|~ne))+K[0]+4096336452&4294967295)<<6&4294967295|z>>>26))+((z=ne+(B^(V|~Y))+K[7]+1126891415&4294967295)<<10&4294967295|z>>>22))+((z=Y+(V^(ne|~B))+K[14]+2878612391&4294967295)<<15&4294967295|z>>>17))+((z=B+(ne^(Y|~V))+K[5]+4237533241&4294967295)<<21&4294967295|z>>>11))+((z=V+(Y^(B|~ne))+K[12]+1700485571&4294967295)<<6&4294967295|z>>>26))+((z=ne+(B^(V|~Y))+K[3]+2399980690&4294967295)<<10&4294967295|z>>>22))+((z=Y+(V^(ne|~B))+K[10]+4293915773&4294967295)<<15&4294967295|z>>>17))+((z=B+(ne^(Y|~V))+K[1]+2240044497&4294967295)<<21&4294967295|z>>>11))+((z=V+(Y^(B|~ne))+K[8]+1873313359&4294967295)<<6&4294967295|z>>>26))+((z=ne+(B^(V|~Y))+K[15]+4264355552&4294967295)<<10&4294967295|z>>>22))+((z=Y+(V^(ne|~B))+K[6]+2734768916&4294967295)<<15&4294967295|z>>>17))+((z=B+(ne^(Y|~V))+K[13]+1309151649&4294967295)<<21&4294967295|z>>>11))+((ne=(V=B+((z=V+(Y^(B|~ne))+K[4]+4149444226&4294967295)<<6&4294967295|z>>>26))+((z=ne+(B^(V|~Y))+K[11]+3174756917&4294967295)<<10&4294967295|z>>>22))^((Y=ne+((z=Y+(V^(ne|~B))+K[2]+718787259&4294967295)<<15&4294967295|z>>>17))|~V))+K[9]+3951481745&4294967295,H.g[0]=H.g[0]+V&4294967295,H.g[1]=H.g[1]+(Y+(z<<21&4294967295|z>>>11))&4294967295,H.g[2]=H.g[2]+Y&4294967295,H.g[3]=H.g[3]+ne&4294967295}function o(H,V){this.h=V;for(var B=[],K=!0,Y=H.length-1;0<=Y;Y--){var ne=0|H[Y];K&&ne==V||(B[Y]=ne,K=!1)}this.g=B}(function e(H,V){function B(){}B.prototype=V.prototype,H.D=V.prototype,H.prototype=new B,H.prototype.constructor=H,H.C=function(K,Y,ne){for(var z=Array(arguments.length-2),ho=2;ho<arguments.length;ho++)z[ho-2]=arguments[ho];return V.prototype[Y].apply(K,z)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,V){void 0===V&&(V=H.length);for(var B=V-this.blockSize,K=this.B,Y=this.h,ne=0;ne<V;){if(0==Y)for(;ne<=B;)i(this,H,ne),ne+=this.blockSize;if("string"==typeof H){for(;ne<V;)if(K[Y++]=H.charCodeAt(ne++),Y==this.blockSize){i(this,K),Y=0;break}}else for(;ne<V;)if(K[Y++]=H[ne++],Y==this.blockSize){i(this,K),Y=0;break}}this.h=Y,this.o+=V},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var V=1;V<H.length-8;++V)H[V]=0;var B=8*this.o;for(V=H.length-8;V<H.length;++V)H[V]=255&B,B/=256;for(this.u(H),H=Array(16),V=B=0;4>V;++V)for(var K=0;32>K;K+=8)H[B++]=this.g[V]>>>K&255;return H};var a={};function c(H){return-128<=H&&128>H?function s(H,V){var B=a;return Object.prototype.hasOwnProperty.call(B,H)?B[H]:B[H]=V(H)}(H,function(V){return new o([0|V],0>V?-1:0)}):new o([0|H],0>H?-1:0)}function l(H){if(isNaN(H)||!isFinite(H))return m;if(0>H)return O(l(-H));for(var V=[],B=1,K=0;H>=B;K++)V[K]=H/B|0,B*=4294967296;return new o(V,0)}var m=c(0),y=c(1),I=c(16777216);function T(H){if(0!=H.h)return!1;for(var V=0;V<H.g.length;V++)if(0!=H.g[V])return!1;return!0}function N(H){return-1==H.h}function O(H){for(var V=H.g.length,B=[],K=0;K<V;K++)B[K]=~H.g[K];return new o(B,~H.h).add(y)}function W(H,V){return H.add(O(V))}function j(H,V){for(;(65535&H[V])!=H[V];)H[V+1]+=H[V]>>>16,H[V]&=65535,V++}function X(H,V){this.g=H,this.h=V}function oe(H,V){if(T(V))throw Error("division by zero");if(T(H))return new X(m,m);if(N(H))return V=oe(O(H),V),new X(O(V.g),O(V.h));if(N(V))return V=oe(H,O(V)),new X(O(V.g),V.h);if(30<H.g.length){if(N(H)||N(V))throw Error("slowDivide_ only works with positive integers.");for(var B=y,K=V;0>=K.l(H);)B=De(B),K=De(K);var Y=je(B,1),ne=je(K,1);for(K=je(K,2),B=je(B,2);!T(K);){var z=ne.add(K);0>=z.l(H)&&(Y=Y.add(B),ne=z),K=je(K,1),B=je(B,1)}return V=W(H,Y.j(V)),new X(Y,V)}for(Y=m;0<=H.l(V);){for(B=Math.max(1,Math.floor(H.m()/V.m())),K=48>=(K=Math.ceil(Math.log(B)/Math.LN2))?1:Math.pow(2,K-48),z=(ne=l(B)).j(V);N(z)||0<z.l(H);)z=(ne=l(B-=K)).j(V);T(ne)&&(ne=y),Y=Y.add(ne),H=W(H,z)}return new X(Y,H)}function De(H){for(var V=H.g.length+1,B=[],K=0;K<V;K++)B[K]=H.i(K)<<1|H.i(K-1)>>>31;return new o(B,H.h)}function je(H,V){var B=V>>5;V%=32;for(var K=H.g.length-B,Y=[],ne=0;ne<K;ne++)Y[ne]=0<V?H.i(ne+B)>>>V|H.i(ne+B+1)<<32-V:H.i(ne+B);return new o(Y,H.h)}(n=o.prototype).m=function(){if(N(this))return-O(this).m();for(var H=0,V=1,B=0;B<this.g.length;B++){var K=this.i(B);H+=(0<=K?K:4294967296+K)*V,V*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(T(this))return"0";if(N(this))return"-"+O(this).toString(H);for(var V=l(Math.pow(H,6)),B=this,K="";;){var Y=oe(B,V).g,ne=((0<(B=W(B,Y.j(V))).g.length?B.g[0]:B.h)>>>0).toString(H);if(T(B=Y))return ne+K;for(;6>ne.length;)ne="0"+ne;K=ne+K}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return N(H=W(this,H))?-1:T(H)?0:1},n.abs=function(){return N(this)?O(this):this},n.add=function(H){for(var V=Math.max(this.g.length,H.g.length),B=[],K=0,Y=0;Y<=V;Y++){var ne=K+(65535&this.i(Y))+(65535&H.i(Y)),z=(ne>>>16)+(this.i(Y)>>>16)+(H.i(Y)>>>16);K=z>>>16,B[Y]=(z&=65535)<<16|(ne&=65535)}return new o(B,-2147483648&B[B.length-1]?-1:0)},n.j=function(H){if(T(this)||T(H))return m;if(N(this))return N(H)?O(this).j(O(H)):O(O(this).j(H));if(N(H))return O(this.j(O(H)));if(0>this.l(I)&&0>H.l(I))return l(this.m()*H.m());for(var V=this.g.length+H.g.length,B=[],K=0;K<2*V;K++)B[K]=0;for(K=0;K<this.g.length;K++)for(var Y=0;Y<H.g.length;Y++){var ne=this.i(K)>>>16,z=65535&this.i(K),ho=H.i(Y)>>>16,yl=65535&H.i(Y);B[2*K+2*Y]+=z*yl,j(B,2*K+2*Y),B[2*K+2*Y+1]+=ne*yl,j(B,2*K+2*Y+1),B[2*K+2*Y+1]+=z*ho,j(B,2*K+2*Y+1),B[2*K+2*Y+2]+=ne*ho,j(B,2*K+2*Y+2)}for(K=0;K<V;K++)B[K]=B[2*K+1]<<16|B[2*K];for(K=V;K<2*V;K++)B[K]=0;return new o(B,0)},n.A=function(H){return oe(this,H).h},n.and=function(H){for(var V=Math.max(this.g.length,H.g.length),B=[],K=0;K<V;K++)B[K]=this.i(K)&H.i(K);return new o(B,this.h&H.h)},n.or=function(H){for(var V=Math.max(this.g.length,H.g.length),B=[],K=0;K<V;K++)B[K]=this.i(K)|H.i(K);return new o(B,this.h|H.h)},n.xor=function(H){for(var V=Math.max(this.g.length,H.g.length),B=[],K=0;K<V;K++)B[K]=this.i(K)^H.i(K);return new o(B,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fL=hL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function f(H,V){if(0==H.length)throw Error("number format error: empty string");if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if("-"==H.charAt(0))return O(f(H.substring(1),V));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=l(Math.pow(V,8)),K=m,Y=0;Y<H.length;Y+=8){var ne=Math.min(8,H.length-Y),z=parseInt(H.substring(Y,Y+ne),V);8>ne?(ne=l(Math.pow(V,ne)),K=K.j(ne).add(l(z))):K=(K=K.j(B)).add(l(z))}return K},hu=hL.Integer=o}).apply(typeof dL<"u"?dL:typeof self<"u"?self:typeof window<"u"?window:{});var pL,gL,jg,mL,fE,dC,_L,yL,vL,hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$a={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof hE&&hE];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var J=h[R];if(!(J in E))break e;E=E[J]}(_=_(R=E[h=h[h.length-1]]))!=R&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,R=!1,J={next:function(){if(!R&&E<h.length){var he=E++;return{value:_(he,h[he]),done:!1}}return R=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,R),h.apply(_,J)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(R,J,he){for(var Ue=Array(arguments.length-2),kn=2;kn<arguments.length;kn++)Ue[kn-2]=arguments[kn];return _.prototype[J].apply(R,Ue)}}function N(h){const _=h.length;if(0<_){const E=Array(_);for(let R=0;R<_;R++)E[R]=h[R];return E}return[]}function O(h,_){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(c(R)){const J=h.length||0,he=R.length||0;h.length=J+he;for(let Ue=0;Ue<he;Ue++)h[J+Ue]=R[Ue]}else h.push(R)}}function j(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var De=!(-1==X().indexOf("Gecko")||-1!=X().toLowerCase().indexOf("webkit")&&-1==X().indexOf("Edge")||-1!=X().indexOf("Trident")||-1!=X().indexOf("MSIE")||-1!=X().indexOf("Edge"));function je(h,_,E){for(const R in h)_.call(E,h[R],R,h)}function V(h){const _={};for(const E in h)_[E]=h[E];return _}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(h,_){let E,R;for(let J=1;J<arguments.length;J++){for(E in R=arguments[J],R)h[E]=R[E];for(let he=0;he<B.length;he++)E=B[he],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function Y(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ne(h){a.setTimeout(()=>{throw h},0)}function z(){var h=Qt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var yl=new class W{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Xe,h=>h.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let at,ut=!1,Qt=new class ho{constructor(){this.h=this.g=null}add(_,E){const R=yl.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}},kr=()=>{const h=a.Promise.resolve(void 0);at=()=>{h.then(fo)}};var fo=()=>{for(var h;h=z();){try{h.h.call(h.g)}catch(E){ne(E)}var _=yl;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ut=!1};function br(){this.s=this.s,this.C=this.C}function Xn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}br.prototype.s=!1,br.prototype.ma=function(){this.s||(this.s=!0,this.N())},br.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Xn.prototype.h=function(){this.defaultPrevented=!0};var Jn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function vl(h,_){if(Xn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(De){e:{try{oe(_.nodeName);var J=!0;break e}catch{}J=!1}J||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,R?(this.clientX=void 0!==R.clientX?R.clientX:R.pageX,this.clientY=void 0!==R.clientY?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:$S[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&vl.aa.h.call(this)}}T(vl,Xn);var $S={2:"touch",3:"pen",4:"mouse"};vl.prototype.h=function(){vl.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var wr="closure_listenable_"+(1e6*Math.random()|0),nc=0;function Ds(h,_,E,R,J){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=J,this.key=++nc,this.da=this.fa=!1}function rc(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function El(h){this.src=h,this.g={},this.h=0}function zS(h,_){var E=_.type;if(E in h.g){var he,R=h.g[E],J=Array.prototype.indexOf.call(R,_,void 0);(he=0<=J)&&Array.prototype.splice.call(R,J,1),he&&(rc(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function HS(h,_,E,R){for(var J=0;J<h.length;++J){var he=h[J];if(!he.da&&he.listener==_&&he.capture==!!E&&he.ha==R)return J}return-1}El.prototype.add=function(h,_,E,R,J){var he=h.toString();(h=this.g[he])||(h=this.g[he]=[],this.h++);var Ue=HS(h,_,R,J);return-1<Ue?(_=h[Ue],E||(_.fa=!1)):((_=new Ds(_,this.src,he,!!R,J)).fa=E,h.push(_)),_};var qS="closure_lm_"+(1e6*Math.random()|0),GS={};function Q$(h,_,E,R,J){if(R&&R.once)return X$(h,_,E,R,J);if(Array.isArray(_)){for(var he=0;he<_.length;he++)Q$(h,_[he],E,R,J);return null}return E=QS(E),h&&h[wr]?h.K(_,E,l(R)?!!R.capture:!!R,J):Y$(h,_,E,!1,R,J)}function Y$(h,_,E,R,J,he){if(!_)throw Error("Invalid event type");var Ue=l(J)?!!J.capture:!!J,kn=KS(h);if(kn||(h[qS]=kn=new El(h)),(E=kn.add(_,E,R,Ue,he)).proxy)return E;if(R=function kce(){const _=Fce;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)Jn||(J=Ue),void 0===J&&(J=!1),h.addEventListener(_.toString(),R,J);else if(h.attachEvent)h.attachEvent(ez(_.toString()),R);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(R)}return E}function X$(h,_,E,R,J){if(Array.isArray(_)){for(var he=0;he<_.length;he++)X$(h,_[he],E,R,J);return null}return E=QS(E),h&&h[wr]?h.L(_,E,l(R)?!!R.capture:!!R,J):Y$(h,_,E,!0,R,J)}function J$(h,_,E,R,J){if(Array.isArray(_))for(var he=0;he<_.length;he++)J$(h,_[he],E,R,J);else R=l(R)?!!R.capture:!!R,E=QS(E),h&&h[wr]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=HS(he=h.g[_],E,R,J))&&(rc(he[E]),Array.prototype.splice.call(he,E,1),0==he.length&&(delete h.g[_],h.h--))):h&&(h=KS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=HS(_,E,R,J)),(E=-1<h?_[h]:null)&&WS(E))}function WS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[wr])zS(_.i,h);else{var E=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(E,R,h.capture):_.detachEvent?_.detachEvent(ez(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=KS(_))?(zS(E,h),0==E.h&&(E.src=null,_[qS]=null)):rc(h)}}}function ez(h){return h in GS?GS[h]:GS[h]="on"+h}function Fce(h,_){if(h.da)h=!0;else{_=new vl(_,this);var E=h.listener,R=h.ha||h.src;h.fa&&WS(h),h=E.call(R,_)}return h}function KS(h){return(h=h[qS])instanceof El?h:null}var ZS="__closure_events_fn_"+(1e9*Math.random()>>>0);function QS(h){return"function"==typeof h?h:(h[ZS]||(h[ZS]=function(_){return h.handleEvent(_)}),h[ZS])}function ji(){br.call(this),this.i=new El(this),this.M=this,this.F=null}function as(h,_){var E,R=h.F;if(R)for(E=[];R;R=R.F)E.push(R);if(h=h.M,R=_.type||_,"string"==typeof _)_=new Xn(_,h);else if(_ instanceof Xn)_.target=_.target||h;else{var J=_;K(_=new Xn(R,h),J)}if(J=!0,E)for(var he=E.length-1;0<=he;he--){var Ue=_.g=E[he];J=QI(Ue,R,!0,_)&&J}if(J=QI(Ue=_.g=h,R,!0,_)&&J,J=QI(Ue,R,!1,_)&&J,E)for(he=0;he<E.length;he++)J=QI(Ue=_.g=E[he],R,!1,_)&&J}function QI(h,_,E,R){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var J=!0,he=0;he<_.length;++he){var Ue=_[he];if(Ue&&!Ue.da&&Ue.capture==E){var kn=Ue.listener,Ti=Ue.ha||Ue.src;Ue.fa&&zS(h.i,Ue),J=!1!==kn.call(Ti,R)&&J}}return J&&!R.defaultPrevented}function tz(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function nz(h){h.g=tz(()=>{h.g=null,h.i&&(h.i=!1,nz(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(ji,br),ji.prototype[wr]=!0,ji.prototype.removeEventListener=function(h,_,E,R){J$(this,h,_,E,R)},ji.prototype.N=function(){if(ji.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],R=0;R<E.length;R++)rc(E[R]);delete h.g[_],h.h--}}this.F=null},ji.prototype.K=function(h,_,E,R){return this.i.add(String(h),_,!1,E,R)},ji.prototype.L=function(h,_,E,R){return this.i.add(String(h),_,!0,E,R)};class Lce extends br{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:nz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ym(h){br.call(this),this.h=h,this.g={}}T(Ym,br);var rz=[];function iz(h){je(h.g,function(_,E){this.g.hasOwnProperty(E)&&WS(_)},h),h.g={}}Ym.prototype.N=function(){Ym.aa.N.call(this),iz(this)},Ym.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var YS=a.JSON.stringify,Vce=a.JSON.parse,Uce=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function XS(){}function oz(){}XS.prototype.h=null;var Xm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function JS(){Xn.call(this,"d")}function eM(){Xn.call(this,"c")}T(JS,Xn),T(eM,Xn);var qu={},az=null;function YI(){return az=az||new ji}function cz(h){Xn.call(this,qu.La,h)}function Jm(h){const _=YI();as(_,new cz(_))}function lz(h,_){Xn.call(this,qu.STAT_EVENT,h),this.stat=_}function cs(h){const _=YI();as(_,new lz(_,h))}function uz(h,_){Xn.call(this,qu.Ma,h),this.size=_}function e_(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function t_(){this.g=!0}function Df(h,_,E,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function zce(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var R=E[h];if(!(2>R.length)){var J=R[1];if(Array.isArray(J)&&!(1>J.length)){var he=J[0];if("noop"!=he&&"stop"!=he&&"close"!=he)for(var Ue=1;Ue<J.length;Ue++)J[Ue]=""}}}return YS(E)}catch{return _}}(h,E)+(R?" "+R:"")})}qu.La="serverreachability",T(cz,Xn),qu.STAT_EVENT="statevent",T(lz,Xn),qu.Ma="timingevent",T(uz,Xn),t_.prototype.xa=function(){this.g=!1},t_.prototype.info=function(){};var tM,XI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function JI(){}function Il(h,_,E,R){this.j=h,this.i=_,this.l=E,this.R=R||1,this.U=new Ym(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hz}function hz(){this.i=null,this.g="",this.h=!1}T(JI,XS),JI.prototype.g=function(){return new XMLHttpRequest},JI.prototype.i=function(){return{}},tM=new JI;var fz={},nM={};function rM(h,_,E){h.L=1,h.v=rb(ic(_)),h.m=E,h.P=!0,pz(h,null)}function pz(h,_){h.F=Date.now(),eb(h),h.A=ic(h.v);var E=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Sz(E.i,"t",R),h.C=0,E=h.j.J,h.h=new hz,h.g=Gz(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Lce(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,R=h.ca;var J="readystatechange";Array.isArray(J)||(J&&(rz[0]=J.toString()),J=rz);for(var he=0;he<J.length;he++){var Ue=Q$(E,J[he],R||_.handleEvent,!1,_.h||_);if(!Ue)break;_.g[Ue.key]=Ue}_=h.H?V(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Jm(),function Bce(h,_,E,R,J,he){h.info(function(){if(h.g)if(he)for(var Ue="",kn=he.split("&"),Ti=0;Ti<kn.length;Ti++){var un=kn[Ti].split("=");if(1<un.length){var $i=un[0];un=un[1];var zi=$i.split("_");Ue=2<=zi.length&&"type"==zi[1]?Ue+($i+"=")+un+"&":Ue+($i+"=redacted&")}}else Ue=null;else Ue=he;return"XMLHTTP REQ ("+R+") [attempt "+J+"]: "+_+"\n"+E+"\n"+Ue})}(h.i,h.u,h.A,h.l,h.R,h.m)}function gz(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Hce(h,_){var E=h.C,R=_.indexOf("\n",E);return-1==R?nM:(E=Number(_.substring(E,R)),isNaN(E)?fz:(R+=1)+E>_.length?nM:(_=_.slice(R,R+E),h.C=R+E,_))}function eb(h){h.S=Date.now()+h.I,mz(h,h.I)}function mz(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=e_(y(h.ba,h),_)}function iM(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function n_(h){0==h.j.G||h.J||$z(h.j,h)}function Gu(h){iM(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,iz(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function sM(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||oM(E.h,h)))if(!h.K&&oM(E.h,h)&&3==E.G){try{var R=E.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&3==R.length){var J=R;if(0==J[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;cb(E),ob(E)}uM(E),cs(18)}}else E.za=J[1],0<E.za-E.T&&37500>J[2]&&E.F&&0==E.v&&!E.C&&(E.C=e_(y(E.Za,E),6e3));if(1>=vz(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ku(E,11)}else if((h.K||E.g==h)&&cb(E),!j(_))for(J=E.Da.g.parse(_),_=0;_<J.length;_++){let un=J[_];if(E.T=un[0],un=un[1],2==E.G)if("c"==un[0]){E.K=un[1],E.ia=un[2];const $i=un[3];null!=$i&&(E.la=$i,E.j.info("VER="+E.la));const zi=un[4];null!=zi&&(E.Aa=zi,E.j.info("SVER="+E.Aa));const Rf=un[5];null!=Rf&&"number"==typeof Rf&&0<Rf&&(E.L=R=1.5*Rf,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Mo=h.g;if(Mo){const ub=Mo.g?Mo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ub){var he=R.h;he.g||-1==ub.indexOf("spdy")&&-1==ub.indexOf("quic")&&-1==ub.indexOf("h2")||(he.j=he.l,he.g=new Set,he.h&&(aM(he,he.h),he.h=null))}if(R.D){const hM=Mo.g?Mo.g.getResponseHeader("X-HTTP-Session-Id"):null;hM&&(R.ya=hM,er(R.I,R.D,hM))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ue=h;if((R=E).qa=qz(R,R.J?R.ia:null,R.W),Ue.K){Ez(R.h,Ue);var kn=Ue,Ti=R.L;Ti&&(kn.I=Ti),kn.B&&(iM(kn),eb(kn)),R.g=Ue}else Bz(R);0<E.i.length&&ab(E)}else"stop"!=un[0]&&"close"!=un[0]||Ku(E,7);else 3==E.G&&("stop"==un[0]||"close"==un[0]?"stop"==un[0]?Ku(E,7):lM(E):"noop"!=un[0]&&E.l&&E.l.ta(un),E.v=0)}Jm()}catch{}}function _z(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yz(h){return!!h.h||!!h.g&&h.g.size>=h.j}function vz(h){return h.h?1:h.g?h.g.size:0}function oM(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function aM(h,_){h.g?h.g.add(_):h.h=_}function Ez(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function Iz(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return N(h.i)}function bz(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Wce(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const R in h)_[E++]=R;return _}}}(h),R=function Gce(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,R=0;R<E;R++)_.push(h[R]);return _}for(R in _=[],E=0,h)_[E++]=h[R];return _}(h),J=R.length,he=0;he<J;he++)_.call(void 0,R[he],E&&E[he],h)}Il.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==sc(h)?_.j():this.Y(h)},Il.prototype.Y=function(h){try{if(h==this.g)e:{const zi=sc(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>zi)&&(3!=zi||this.g&&(this.h.h||this.g.oa()||kz(this.g)))){this.J||4!=zi||7==_||Jm(),iM(this);var E=this.g.Z();this.X=E;t:if(gz(this)){var R=kz(this.g);h="";var J=R.length,he=4==sc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gu(this),n_(this);var Ue="";break t}this.h.i=new a.TextDecoder}for(_=0;_<J;_++)this.h.h=!0,h+=this.h.i.decode(R[_],{stream:!(he&&_==J-1)});R.length=0,this.h.g+=h,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=200==E,function jce(h,_,E,R,J,he,Ue){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+J+"]: "+_+"\n"+E+"\n"+he+" "+Ue})}(this.i,this.u,this.A,this.l,this.R,zi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var kn,Ti=this.g;if((kn=Ti.g?Ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(kn)){var un=kn;break t}}un=null}if(!(E=un)){this.o=!1,this.s=3,cs(12),Gu(this),n_(this);break e}Df(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sM(this,E)}if(this.P){let Mo;for(E=!0;!this.J&&this.C<Ue.length;){if(Mo=Hce(this,Ue),Mo==nM){4==zi&&(this.s=4,cs(14),E=!1),Df(this.i,this.l,null,"[Incomplete Response]");break}if(Mo==fz){this.s=4,cs(15),Df(this.i,this.l,Ue,"[Invalid Chunk]"),E=!1;break}Df(this.i,this.l,Mo,null),sM(this,Mo)}if(gz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=zi||0!=Ue.length||this.h.h||(this.s=1,cs(16),E=!1),this.o=this.o&&E,E){if(0<Ue.length&&!this.W){this.W=!0;var $i=this.j;$i.g==this&&$i.ba&&!$i.M&&($i.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),dM($i),$i.M=!0,cs(11))}}else Df(this.i,this.l,Ue,"[Invalid Chunked Response]"),Gu(this),n_(this)}else Df(this.i,this.l,Ue,null),sM(this,Ue);4==zi&&Gu(this),this.o&&!this.J&&(4==zi?$z(this.j,this):(this.o=!1,eb(this)))}else(function ale(h){const _={};h=(h.g&&2<=sc(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let R=0;R<h.length;R++){if(j(h[R]))continue;var E=Y(h[R]);const J=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const he=_[J]||[];_[J]=he,he.push(E)}!function H(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(R){return R.join(", ")})})(this.g),400==E&&0<Ue.indexOf("Unknown SID")?(this.s=3,cs(12)):(this.s=0,cs(13)),Gu(this),n_(this)}}}catch{}},Il.prototype.cancel=function(){this.J=!0,Gu(this)},Il.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function $ce(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Jm(),cs(17)),Gu(this),this.s=2,n_(this)):mz(this,this.S-h)},_z.prototype.cancel=function(){if(this.i=Iz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var wz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wu(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Wu){this.h=h.h,tb(this,h.j),this.o=h.o,this.g=h.g,nb(this,h.s),this.l=h.l;var _=h.i,E=new s_;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Tz(this,E),this.m=h.m}else h&&(_=String(h).match(wz))?(this.h=!1,tb(this,_[1]||"",!0),this.o=r_(_[2]||""),this.g=r_(_[3]||"",!0),nb(this,_[4]),this.l=r_(_[5]||"",!0),Tz(this,_[6]||"",!0),this.m=r_(_[7]||"")):(this.h=!1,this.i=new s_(null,this.h))}function ic(h){return new Wu(h)}function tb(h,_,E){h.j=E?r_(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function nb(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Tz(h,_,E){_ instanceof s_?(h.i=_,function ele(h,_){_&&!h.j&&(bl(h),h.i=null,h.g.forEach(function(E,R){var J=R.toLowerCase();R!=J&&(Az(this,R),Sz(this,J,E))},h)),h.j=_}(h.i,h.h)):(E||(_=i_(_,Xce)),h.i=new s_(_,h.h))}function er(h,_,E){h.i.set(_,E)}function rb(h){return er(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function r_(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function i_(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,Zce),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zce(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Wu.prototype.toString=function(){var h=[],_=this.j;_&&h.push(i_(_,Cz,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(i_(_,Cz,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(i_(E,"/"==E.charAt(0)?Yce:Qce,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",i_(E,Jce)),h.join("")};var h,Cz=/[#\/\?@]/g,Qce=/[#\?:]/g,Yce=/[#\?]/g,Xce=/[#\?@]/g,Jce=/#/g;function s_(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function bl(h){h.g||(h.g=new Map,h.h=0,h.i&&function Kce(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var R=h[E].indexOf("="),J=null;if(0<=R){var he=h[E].substring(0,R);J=h[E].substring(R+1)}else he=h[E];_(he,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function Az(h,_){bl(h),_=Sf(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Dz(h,_){return bl(h),_=Sf(h,_),h.g.has(_)}function Sz(h,_,E){Az(h,_),0<E.length&&(h.i=null,h.g.set(Sf(h,_),N(E)),h.h+=E.length)}function Sf(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function wl(h,_,E,R,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),R(E)}catch{}}function rle(){this.g=new Uce}function ile(h,_,E){const R=E||"";try{bz(h,function(J,he){let Ue=J;l(J)&&(Ue=YS(J)),_.push(R+he+"="+encodeURIComponent(Ue))})}catch(J){throw _.push(R+"type="+encodeURIComponent("_badmap")),J}}function o_(h){this.l=h.Ub||null,this.j=h.eb||!1}function ib(h,_){ji.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mz(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function a_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,c_(h)}function c_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function Rz(h){let _="";return je(h,function(E,R){_+=R,_+=":",_+=E,_+="\r\n"}),_}function cM(h,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Rz(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):er(h,_,E))}function Tr(h){ji.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=s_.prototype).add=function(h,_){bl(this),this.i=null,h=Sf(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){bl(this),this.g.forEach(function(E,R){E.forEach(function(J){h.call(_,J,R,this)},this)},this)},n.na=function(){bl(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let R=0;R<_.length;R++){const J=h[R];for(let he=0;he<J.length;he++)E.push(_[R])}return E},n.V=function(h){bl(this);let _=[];if("string"==typeof h)Dz(this,h)&&(_=_.concat(this.g.get(Sf(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return bl(this),this.i=null,Dz(this,h=Sf(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var R=_[E];const he=encodeURIComponent(String(R)),Ue=this.V(R);for(R=0;R<Ue.length;R++){var J=he;""!==Ue[R]&&(J+="="+encodeURIComponent(String(Ue[R]))),h.push(J)}}return this.i=h.join("&")},T(o_,XS),o_.prototype.g=function(){return new ib(this.l,this.j)},o_.prototype.i=(h={},function(){return h}),T(ib,ji),(n=ib.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,c_(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,a_(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,c_(this)),this.g&&(this.readyState=3,c_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mz(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?a_(this):c_(this),3==this.readyState&&Mz(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,a_(this))},n.Qa=function(h){this.g&&(this.response=h,a_(this))},n.ga=function(){this.g&&a_(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(ib.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Tr,ji);var sle=/^https?$/i,ole=["POST","PUT"];function Pz(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,xz(h),sb(h)}function xz(h){h.A||(h.A=!0,as(h,"complete"),as(h,"error"))}function Nz(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=sc(h)||2!=h.Z()))if(h.u&&4==sc(h))tz(h.Ea,0,h);else if(as(h,"readystatechange"),4==sc(h)){h.h=!1;try{const Ue=h.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=0===Ue){var J=String(h.D).match(wz)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),R=!sle.test(J?J.toLowerCase():"")}E=R}if(E)as(h,"complete"),as(h,"success");else{h.m=6;try{var he=2<sc(h)?h.g.statusText:""}catch{he=""}h.l=he+" ["+h.Z()+"]",xz(h)}}finally{sb(h)}}}function sb(h,_){if(h.g){Oz(h);const E=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||as(h,"ready");try{E.onreadystatechange=R}catch{}}}function Oz(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function sc(h){return h.g?h.g.readyState:0}function kz(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function l_(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Fz(h){this.Aa=0,this.i=[],this.j=new t_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=l_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=l_("baseRetryDelayMs",5e3,h),this.cb=l_("retryDelaySeedMs",1e4,h),this.Wa=l_("forwardChannelMaxRetries",2,h),this.wa=l_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new _z(h&&h.concurrentRequestLimit),this.Da=new rle,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function lM(h){if(Lz(h),3==h.G){var _=h.U++,E=ic(h.I);if(er(E,"SID",h.K),er(E,"RID",_),er(E,"TYPE","terminate"),u_(h,E),(_=new Il(h,h.j,_)).L=2,_.v=rb(ic(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=Gz(_.j,null),_.g.ea(_.v)),_.F=Date.now(),eb(_)}Hz(h)}function ob(h){h.g&&(dM(h),h.g.cancel(),h.g=null)}function Lz(h){ob(h),h.u&&(a.clearTimeout(h.u),h.u=null),cb(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function ab(h){if(!yz(h.h)&&!h.s){h.s=!0;var _=h.Ga;at||kr(),ut||(at(),ut=!0),Qt.add(_,h),h.B=0}}function Vz(h,_){var E;E=_?_.l:h.U++;const R=ic(h.I);er(R,"SID",h.K),er(R,"RID",E),er(R,"AID",h.T),u_(h,R),h.m&&h.o&&cM(R,h.m,h.o),E=new Il(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Uz(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),aM(h.h,E),rM(E,R,_)}function u_(h,_){h.H&&je(h.H,function(E,R){er(_,R,E)}),h.l&&bz({},function(E,R){er(_,R,E)})}function Uz(h,_,E){E=Math.min(h.i.length,E);var R=h.l?y(h.l.Na,h.l,h):null;e:{var J=h.i;let he=-1;for(;;){const Ue=["count="+E];-1==he?0<E?(he=J[0].g,Ue.push("ofs="+he)):he=0:Ue.push("ofs="+he);let kn=!0;for(let Ti=0;Ti<E;Ti++){let un=J[Ti].g;const $i=J[Ti].map;if(un-=he,0>un)he=Math.max(0,J[Ti].g-100),kn=!1;else try{ile($i,Ue,"req"+un+"_")}catch{R&&R($i)}}if(kn){R=Ue.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,R}function Bz(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;at||kr(),ut||(at(),ut=!0),Qt.add(_,h),h.v=0}}function uM(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=e_(y(h.Fa,h),zz(h,h.v)),h.v++,0))}function dM(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function jz(h){h.g=new Il(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ic(h.qa);er(_,"RID","rpc"),er(_,"SID",h.K),er(_,"AID",h.T),er(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&er(_,"TO",h.ja),er(_,"TYPE","xmlhttp"),u_(h,_),h.m&&h.o&&cM(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=rb(ic(_)),E.m=null,E.P=!0,pz(E,h)}function cb(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function $z(h,_){var E=null;if(h.g==_){cb(h),dM(h),h.g=null;var R=2}else{if(!oM(h.h,_))return;E=_.D,Ez(h.h,_),R=1}if(0!=h.G)if(_.o)if(1==R){E=_.m?_.m.length:0,_=Date.now()-_.F;var J=h.B;as(R=YI(),new uz(R,E)),ab(h)}else Bz(h);else if(3==(J=_.s)||0==J&&0<_.X||!(1==R&&function cle(h,_){return!(vz(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=e_(y(h.Ga,h,_),zz(h,h.B)),h.B++,0)))}(h,_)||2==R&&uM(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),J){case 1:Ku(h,5);break;case 4:Ku(h,10);break;case 3:Ku(h,6);break;default:Ku(h,2)}}function zz(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Ku(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),R=h.Xa;const J=!R;R=new Wu(R||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tb(R,"https"),rb(R),J?function tle(h,_){const E=new t_;if(a.Image){const R=new Image;R.onload=I(wl,E,"TestLoadImage: loaded",!0,_,R),R.onerror=I(wl,E,"TestLoadImage: error",!1,_,R),R.onabort=I(wl,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=I(wl,E,"TestLoadImage: timeout",!1,_,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}(R.toString(),E):function nle(h,_){new t_;const R=new AbortController,J=setTimeout(()=>{R.abort(),wl(0,0,!1,_)},1e4);fetch(h,{signal:R.signal}).then(he=>{clearTimeout(J),wl(0,0,!!he.ok,_)}).catch(()=>{clearTimeout(J),wl(0,0,!1,_)})}(R.toString(),E)}else cs(2);h.G=0,h.l&&h.l.sa(_),Hz(h),Lz(h)}function Hz(h){if(h.G=0,h.ka=[],h.l){const _=Iz(h.h);(0!=_.length||0!=h.i.length)&&(O(h.ka,_),O(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function qz(h,_,E){var R=E instanceof Wu?ic(E):new Wu(E);if(""!=R.g)_&&(R.g=_+"."+R.g),nb(R,R.s);else{var J=a.location;R=J.protocol,_=_?_+"."+J.hostname:J.hostname,J=+J.port;var he=new Wu(null);R&&tb(he,R),_&&(he.g=_),J&&nb(he,J),E&&(he.l=E),R=he}return _=h.ya,(E=h.D)&&_&&er(R,E,_),er(R,"VER",h.la),u_(h,R),R}function Gz(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Tr(h.Ca&&!h.pa?new o_({eb:E}):h.pa)).Ha(h.J),_}function Wz(){}function lb(){}function Hs(h,_){ji.call(this),this.g=new Fz(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!j(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Mf(this)}function Kz(h){JS.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function Zz(){eM.call(this),this.status=1}function Mf(h){this.g=h}(n=Tr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tM.g(),this.v=function sz(h){return h.h||(h.h=h.i())}(this.o?this.o:tM),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(he){return void Pz(this,he)}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var J in R)E.set(J,R[J]);else{if("function"!=typeof R.keys||"function"!=typeof R.get)throw Error("Unknown input type for opt_headers: "+String(R));for(const he of R.keys())E.set(he,R.get(he))}R=Array.from(E.keys()).find(he=>"content-type"==he.toLowerCase()),J=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ole,_,void 0))||R||J||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ue]of E)this.g.setRequestHeader(he,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oz(this),this.u=!0,this.g.send(h),this.u=!1}catch(he){Pz(this,he)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,as(this,"complete"),as(this,"abort"),sb(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sb(this,!0)),Tr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nz(this):this.bb())},n.bb=function(){Nz(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<sc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Vce(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Fz.prototype).la=8,n.G=1,n.connect=function(h,_,E,R){cs(0),this.W=h,this.H=_||{},E&&void 0!==R&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=qz(this,null,this.W),ab(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const J=new Il(this,this.j,h);let he=this.o;if(this.S&&(he?(he=V(he),K(he,this.S)):he=this.S),null!==this.m||this.O||(J.H=he,he=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var R=this.i[E];if(void 0===(R="__data__"in R.map&&"string"==typeof(R=R.map.__data__)?R.length:void 0))break;if(4096<(_+=R)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Uz(this,J,_),er(E=ic(this.I),"RID",h),er(E,"CVER",22),this.D&&er(E,"X-HTTP-Session-Id",this.D),u_(this,E),he&&(this.O?_="headers="+encodeURIComponent(String(Rz(he)))+"&"+_:this.m&&cM(E,this.m,he)),aM(this.h,J),this.Ua&&er(E,"TYPE","init"),this.P?(er(E,"$req",_),er(E,"SID","null"),J.T=!0,rM(J,E,null)):rM(J,E,_),this.G=2}}else 3==this.G&&(h?Vz(this,h):0==this.i.length||yz(this.h)||Vz(this))},n.Fa=function(){if(this.u=null,jz(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=e_(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cs(10),ob(this),jz(this))},n.Za=function(){null!=this.C&&(this.C=null,ob(this),uM(this),cs(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),cs(2)):(this.j.info("Failed to ping google.com"),cs(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Wz.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},lb.prototype.g=function(h,_){return new Hs(h,_)},T(Hs,ji),Hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){lM(this.g)},Hs.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=YS(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&ab(_)},Hs.prototype.N=function(){this.g.l=null,delete this.j,lM(this.g),delete this.g,Hs.aa.N.call(this)},T(Kz,JS),T(Zz,eM),T(Mf,Wz),Mf.prototype.ua=function(){as(this.g,"a")},Mf.prototype.ta=function(h){as(this.g,new Kz(h))},Mf.prototype.sa=function(h){as(this.g,new Zz)},Mf.prototype.ra=function(){as(this.g,"b")},lb.prototype.createWebChannel=lb.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,vL=$a.createWebChannelTransport=function(){return new lb},yL=$a.getStatEventTarget=function(){return YI()},_L=$a.Event=qu,dC=$a.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},XI.NO_ERROR=0,XI.TIMEOUT=8,XI.HTTP_ERROR=6,fE=$a.ErrorCode=XI,dz.COMPLETE="complete",mL=$a.EventType=dz,oz.EventType=Xm,Xm.OPEN="a",Xm.CLOSE="b",Xm.ERROR="c",Xm.MESSAGE="d",ji.prototype.listen=ji.prototype.K,jg=$a.WebChannel=oz,gL=$a.FetchXmlHttpFactory=o_,Tr.prototype.listenOnce=Tr.prototype.L,Tr.prototype.getLastError=Tr.prototype.Ka,Tr.prototype.getLastErrorCode=Tr.prototype.Ba,Tr.prototype.getStatus=Tr.prototype.Z,Tr.prototype.getResponseJson=Tr.prototype.Oa,Tr.prototype.getResponseText=Tr.prototype.oa,Tr.prototype.send=Tr.prototype.ea,Tr.prototype.setWithCredentials=Tr.prototype.Ha,pL=$a.XhrIo=Tr}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});const EL="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let Nh="10.12.1";const Kc=new ea.Yd("@firebase/firestore");function Oh(){return Kc.logLevel}function Ae(n,...e){if(Kc.logLevel<=ea.in.DEBUG){const t=e.map(hC);Kc.debug(`Firestore (${Nh}): ${n}`,...t)}}function Nr(n,...e){if(Kc.logLevel<=ea.in.ERROR){const t=e.map(hC);Kc.error(`Firestore (${Nh}): ${n}`,...t)}}function Ts(n,...e){if(Kc.logLevel<=ea.in.WARN){const t=e.map(hC);Kc.warn(`Firestore (${Nh}): ${n}`,...t)}}function hC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ze(n="Unexpected state"){const e=`FIRESTORE (${Nh}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function nt(n,e){n||Ze()}function Ve(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class IL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class sX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oX{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,_e.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt("string"==typeof r.accessToken),new IL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nt(null===e||"string"==typeof e),new ui(e)}}class aX{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cX{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aX(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt("string"==typeof t.token),this.R=t.token,new bL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uX(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=uX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TL(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ot(e)}static min(){return new ot(new ir(0,0))}static max(){return new ot(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $g{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ze(),void 0===r?r=e.length-t:r>e.length-t&&Ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$g.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $g?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends $g{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new en(t)}static emptyPath(){return new en([])}}const dX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends $g{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return dX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(en.fromString(e))}static fromName(e){return new Be(en.fromString(e).popFirst(5))}static empty(){return new Be(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new en(e.slice()))}}class Fh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function fC(n){return n.fields.find(e=>2===e.kind)}function fu(n){return n.fields.filter(e=>2!==e.kind)}Fh.UNKNOWN_ID=-1;class pu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lh(0,Us.min())}}function CL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ot.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Us(i,Be.empty(),e)}function AL(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(ot.min(),Be.empty(),-1)}static max(){return new Us(ot.max(),Be.empty(),-1)}}function pC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const DL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Zc(n){return gC.apply(this,arguments)}function gC(){return(gC=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==DL)throw n;Ae("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new ee((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class pE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ii,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=mC(r.target.error);this.V.reject(new zg(e,i))}}static open(e,t,r,i){try{return new pE(t,e.transaction(i,r))}catch(s){throw new zg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gX(t)}}class ta{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ta.S((0,Mt.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),gu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Mt.hl)())return!1;if(ta.C())return!0;const e=(0,Mt.z$)(),t=ta.S(e),r=0<t&&t<10,i=ML(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new zg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Te(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Te(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new zg(e,a))},s.onupgradeneeded=o=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,_e.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=pE.open(s.db,e,o?"readonly":"readwrite",r),l=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),ee.reject(f))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,f="FirebaseError"!==l.name&&a<3;if(Ae("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function ML(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return gu(this.B.delete())}}class zg extends Te{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qc(n){return"IndexedDbTransactionError"===n.name}class gX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gu(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),gu(this.store.add(e))}get(e){return gu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),gu(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),gu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new ee((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=s=>{const o=mC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new pX(a),l=t(a.primaryKey,a.value,c);if(l instanceof ee){const f=l.catch(m=>(c.done(),ee.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gu(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=mC(r.target.error);t(i)}})}let RL=!1;function mC(n){const e=ta.S((0,Mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RL||(RL=!0,setTimeout(()=>{throw r},0)),r}}return n}class mX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Ae("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Qc(r)?Ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Zc(r)}yield t.X(6e4)}))}}class _X{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return ee.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ae("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=AL(s);pC(o,r)>0&&(r=o)}),new Us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Hg(n){return null==n}function qg(n){return 0===n&&1/n==-1/0}function PL(n){return"number"==typeof n&&Number.isInteger(n)&&!qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xL(e)),e=yX(n.get(t),e);return xL(e)}function yX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function xL(n){return n+"\x01\x01"}function na(n){const e=n.length;if(nt(e>=2),2===e)return nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ze(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ze()}s=o+2}return new en(r)}const NL=["userId","batchId"];function gE(n,e){return[n,ki(e)]}function OL(n,e,t){return[n,ki(e),t]}const vX={},EX=["prefixPath","collectionGroup","readTime","documentId"],IX=["prefixPath","collectionGroup","documentId"],bX=["collectionGroup","readTime","prefixPath","documentId"],wX=["canonicalId","targetId"],TX=["targetId","path"],CX=["path","targetId"],AX=["collectionId","parent"],DX=["indexId","uid"],SX=["uid","sequenceNumber"],MX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RX=["indexId","uid","orderedDocumentKey"],PX=["userId","collectionPath","documentId"],xX=["userId","collectionPath","largestBatchId"],NX=["userId","collectionGroup","largestBatchId"],kL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OX=[...kL,"documentOverlays"],FL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LL=FL,VL=[...LL,"indexConfiguration","indexState","indexEntries"],kX=VL;class _C extends SL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function di(n,e){const t=Ve(n);return ta.F(t._e,e)}function UL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $n{constructor(e,t){this.comparator=e,this.root=t||Ii.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mE(this.root,e,this.comparator,!1)}getReverseIterator(){return new mE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mE(this.root,e,this.comparator,!0)}}class mE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ii.RED,this.left=i??Ii.EMPTY,this.right=s??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ii(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const e=this.left.check();if(e!==this.right.check())throw Ze();return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ii(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $L(this.data.getIterator())}getIteratorFrom(e){return new $L(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class $L{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vh(n){return n.hasNext()?n.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new Mn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zL("Invalid base64 string: "+s):s}}(e);return new si(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const LX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(n){if(nt(!!n),"string"==typeof n){let e=0;const t=LX.exec(n);if(nt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ha(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function _E(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yE(n){const e=n.mapValue.fields.__previous_value__;return _E(e)?yE(e):e}function Gg(n){const e=za(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class VX{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}const Jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vE={nullValue:"NULL_VALUE"};function el(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_E(n)?4:WL(n)?9007199254740991:10:Ze()}function ra(n,e){if(n===e)return!0;const t=el(n);if(t!==el(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gg(n).isEqual(Gg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=za(i.timestampValue),a=za(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ha(n.bytesValue).isEqual(Ha(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Er(i.geoPointValue.latitude)===Er(s.geoPointValue.latitude)&&Er(i.geoPointValue.longitude)===Er(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Er(i.integerValue)===Er(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Er(i.doubleValue),a=Er(s.doubleValue);return o===a?qg(o)===qg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UL(o)!==UL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!ra(o[c],a[c])))return!1;return!0}(n,e);default:return Ze()}var s}function Wg(n,e){return void 0!==(n.values||[]).find(t=>ra(t,e))}function tl(n,e){if(n===e)return 0;const t=el(n),r=el(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Er(s.integerValue||s.doubleValue),c=Er(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return HL(n.timestampValue,e.timestampValue);case 4:return HL(Gg(n),Gg(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ha(s),c=Ha(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const f=Tt(a[l],c[l]);if(0!==f)return f}return Tt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(Er(s.latitude),Er(o.latitude));return 0!==a?a:Tt(Er(s.longitude),Er(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const f=tl(a[l],c[l]);if(f)return f}return Tt(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Jc.mapValue&&o===Jc.mapValue)return 0;if(s===Jc.mapValue)return 1;if(o===Jc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},f=Object.keys(l);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=Tt(c[m],f[m]);if(0!==y)return y;const I=tl(a[c[m]],l[f[m]]);if(0!==I)return I}return Tt(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Ze()}}function HL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=za(n),r=za(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function Uh(n){return yC(n)}function yC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=za(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ha(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=yC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yC(t.fields[o])}`;return i+"}"}(n.mapValue):Ze()}function mu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vC(n){return!!n&&"integerValue"in n}function Kg(n){return!!n&&"arrayValue"in n}function qL(n){return!!n&&"nullValue"in n}function GL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function IE(n){return!!n&&"mapValue"in n}function Zg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UX(n){return"nullValue"in n?vE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mu(Xc.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ze()}function BX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mu(Xc.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jc:Ze()}function KL(n,e){const t=tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZL(n,e){const t=tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!IE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zg(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());IE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];IE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bi(Zg(this.value))}}function QL(n){const e=[];return Yc(n.fields,(t,r)=>{const i=new Zn([t]);if(IE(r)){const s=QL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cs(e)}class Qn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qn(e,0,ot.min(),ot.min(),ot.min(),bi.empty(),0)}static newFoundDocument(e,t,r,i){return new Qn(e,1,t,ot.min(),r,i,0)}static newNoDocument(e,t){return new Qn(e,2,t,ot.min(),ot.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,ot.min(),ot.min(),bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}function YL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),t.key):tl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function XL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ra(n.position[t],e.position[t]))return!1;return!0}class Qg{constructor(e,t="asc"){this.field=e,this.dir=t}}function jX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JL{}class tn extends JL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new $X(e,t,r):"array-contains"===t?new qX(e,r):"in"===t?new sV(e,r):"not-in"===t?new GX(e,r):"array-contains-any"===t?new WX(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new zX(e,r):new HX(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tl(t,this.value)):null!==t&&el(this.value)===el(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends JL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Tn(e,t)}matches(e){return Bh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bh(n){return"and"===n.op}function EC(n){return"or"===n.op}function IC(n){return eV(n)&&Bh(n)}function eV(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function bC(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Uh(n.value);if(IC(n))return n.filters.map(e=>bC(e)).join(",");{const e=n.filters.map(t=>bC(t)).join(",");return`${n.op}(${e})`}}function tV(n,e){return n instanceof tn?(r=n,(i=e)instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&ra(r.value,i.value)):n instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&tV(o,i.filters[a]),!0)}(n,e):void Ze();var r,i}function nV(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function rV(n){return n instanceof tn?`${(t=n).field.canonicalString()} ${t.op} ${Uh(t.value)}`:n instanceof Tn?function(t){return t.op.toString()+" {"+t.getFilters().map(rV).join(" ,")+"}"}(n):"Filter";var t}class $X extends tn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class zX extends tn{constructor(e,t){super(e,"in",t),this.keys=iV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HX extends tn{constructor(e,t){super(e,"not-in",t),this.keys=iV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class qX extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kg(t)&&Wg(t.arrayValue,this.value)}}class sV extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wg(this.value.arrayValue,t)}}class GX extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wg(this.value.arrayValue,t)}}class WX extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wg(this.value.arrayValue,r))}}class KX{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function wC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new KX(n,e,t,r,i,s,o)}function _u(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Hg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uh(r)).join(",")),e.ue=t}return e.ue}function Yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XL(n.startAt,e.startAt)&&XL(n.endAt,e.endAt)}function bE(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wE(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function oV(n,e,t){let r=vE,i=!0;for(const s of wE(n,e)){let o=vE,a=!0;switch(s.op){case"<":case"<=":o=UX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=vE}KL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];KL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function aV(n,e,t){let r=Jc,i=!0;for(const s of wE(n,e)){let o=Jc,a=!0;switch(s.op){case">=":case">":o=BX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jc}ZL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ZL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class qa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function cV(n,e,t,r,i,s,o,a){return new qa(n,e,t,r,i,s,o,a)}function jh(n){return new qa(n)}function lV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function TC(n){return null!==n.collectionGroup}function $h(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mn(Zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qg(s,r))}),t.has(Zn.keyField().canonicalString())||e.ce.push(new Qg(Zn.keyField(),r))}return e.ce}function Fi(n){const e=Ve(n);return e.le||(e.le=function dV(n,e){if("F"===n.limitType)return wC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Qg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new nl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nl(n.startAt.position,n.startAt.inclusive):null;return wC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,$h(n))),e.le}function CC(n,e){const t=n.filters.concat([e]);return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function TE(n,e,t){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xg(n,e){return Yg(Fi(n),Fi(e))&&n.limitType===e.limitType}function hV(n){return`${_u(Fi(n))}|lt:${n.limitType}`}function zh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rV(i)).join(", ")}]`),Hg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Uh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Uh(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function Jg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of $h(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const l=YL(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,$h(r),i)||r.endAt&&!function(o,a,c){const l=YL(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,$h(r),i)));var r,i}function fV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pV(n){return(e,t)=>{let r=!1;for(const i of $h(n)){const s=ZX(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ZX(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return null!==c&&null!==l?tl(c,l):Ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ze()}}class Ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jL(this.inner)}size(){return this.innerSize}}const QX=new $n(Be.comparator);function As(){return QX}const gV=new $n(Be.comparator);function em(...n){let e=gV;for(const t of n)e=e.insert(t.key,t);return e}function mV(n){let e=gV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ia(){return tm()}function _V(){return tm()}function tm(){return new Ga(n=>n.toString(),(n,e)=>n.isEqual(e))}const YX=new $n(Be.comparator),XX=new Mn(Be.comparator);function kt(...n){let e=XX;for(const t of n)e=e.add(t);return e}const JX=new Mn(Tt);function AC(){return JX}function yV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qg(e)?"-0":e}}function vV(n){return{integerValue:""+n}}function EV(n,e){return PL(e)?vV(e):yV(n,e)}class CE{constructor(){this._=void 0}}function eJ(n,e,t){return n instanceof Hh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_E(s)&&(s=yE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof yu?bV(n,e):n instanceof vu?wV(n,e):function(i,s){const o=IV(i,s),a=TV(o)+TV(i.Pe);return vC(o)&&vC(i.Pe)?vV(a):yV(i.serializer,a)}(n,e)}function tJ(n,e,t){return n instanceof yu?bV(n,e):n instanceof vu?wV(n,e):t}function IV(n,e){return n instanceof qh?vC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Hh extends CE{}class yu extends CE{constructor(e){super(),this.elements=e}}function bV(n,e){const t=CV(e);for(const r of n.elements)t.some(i=>ra(i,r))||t.push(r);return{arrayValue:{values:t}}}class vu extends CE{constructor(e){super(),this.elements=e}}function wV(n,e){let t=CV(e);for(const r of n.elements)t=t.filter(i=>!ra(i,r));return{arrayValue:{values:t}}}class qh extends CE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function TV(n){return Er(n.integerValue||n.doubleValue)}function CV(n){return Kg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nm{constructor(e,t){this.field=e,this.transform=t}}class rJ{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class DE{}function AV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wh(n.key,sr.none()):new Gh(n.key,n.data,sr.none());{const t=n.data,r=bi.empty();let i=new Mn(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Wa(n.key,r,new Cs(i.toArray()),sr.none())}}function iJ(n,e,t){n instanceof Gh?function(i,s,o){const a=i.value.clone(),c=MV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Wa?function(i,s,o){if(!AE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=MV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(SV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rm(n,e,t,r){return n instanceof Gh?function(s,o,a,c){if(!AE(s.precondition,o))return a;const l=s.value.clone(),f=RV(s.fieldTransforms,c,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wa?function(s,o,a,c){if(!AE(s.precondition,o))return a;const l=RV(s.fieldTransforms,c,o),f=o.data;return f.setAll(SV(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,AE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function sJ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=IV(r.transform,i||null);null!=s&&(null===t&&(t=bi.empty()),t.set(r.field,s))}return t||null}function DV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&kh(r,i,(s,o)=>function nJ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof yu&&i instanceof yu||r instanceof vu&&i instanceof vu?kh(r.elements,i.elements,ra):r instanceof qh&&i instanceof qh?ra(r.Pe,i.Pe):r instanceof Hh&&i instanceof Hh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Gh extends DE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wa extends DE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MV(n,e,t){const r=new Map;nt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tJ(o,a,t[i]))}return r}function RV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,eJ(s,o,e))}return r}class Wh extends DE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DC extends DE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iJ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_V();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=AV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>DV(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>DV(t,r))}}class MC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nt(e.mutations.length===r.length);let i=YX;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new MC(e,t,r,i)}}class RC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oJ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,an;function xV(n){switch(n){default:return Ze();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function NV(n){if(void 0===n)return Nr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Kr.OK:return ce.OK;case Kr.CANCELLED:return ce.CANCELLED;case Kr.UNKNOWN:return ce.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return ce.INTERNAL;case Kr.UNAVAILABLE:return ce.UNAVAILABLE;case Kr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Kr.NOT_FOUND:return ce.NOT_FOUND;case Kr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Kr.ABORTED:return ce.ABORTED;case Kr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Kr.DATA_LOSS:return ce.DATA_LOSS;default:return Ze()}}(an=Kr||(Kr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";function OV(){return new TextEncoder}const aJ=new hu([4294967295,4294967295],0);function kV(n){const e=OV().encode(n),t=new fL;return t.update(e),new Uint8Array(t.digest())}function FV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hu([t,r],0),new hu([i,s],0)]}class PC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new im(`Invalid padding: ${t}`);if(r<0)throw new im(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new im(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new im(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=hu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(hu.fromNumber(r)));return 1===i.compare(aJ)&&(i=new hu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=kV(e),[r,i]=FV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new PC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=kV(e),[r,i]=FV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class im extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,om.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sm(ot.min(),i,new $n(Tt),As(),kt())}}class om{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new om(r,t,kt(),kt(),kt())}}class ME{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class LV{constructor(e,t){this.targetId=e,this.me=t}}class VV{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UV{constructor(){this.fe=0,this.ge=jV(),this.pe=si.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=kt(),t=kt(),r=kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ze()}}),new om(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=jV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=BV(),this.Qe=new $n(Tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(bE(s))if(0===r){const o=new Be(s.path);this.Ue(t,o,Qn.newNoDocument(o,ot.min()))}else nt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Ha(r).toUint8Array()}catch(c){if(c instanceof zL)return Ts("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new PC(o,i,s)}catch(c){return Ts(c instanceof im?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&bE(a.target)){const c=new Be(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Qn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=kt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new sm(e,t,this.Qe,this.ke,r);return this.ke=As(),this.qe=BV(),this.Qe=new $n(Tt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new UV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Mn(Tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function BV(){return new $n(Be.comparator)}function jV(){return new $n(Be.comparator)}const lJ={asc:"ASCENDING",desc:"DESCENDING"},uJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dJ={and:"AND",or:"OR"};class hJ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xC(n,e){return n.useProto3Json||Hg(e)?e:{value:e}}function Kh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $V(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fJ(n,e){return Kh(n,e.toTimestamp())}function Or(n){return nt(!!n),ot.fromTimestamp(function(t){const r=za(t);return new ir(r.seconds,r.nanos)}(n))}function NC(n,e){return OC(n,e).canonicalString()}function OC(n,e){const t=(i=n,new en(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function zV(n){const e=en.fromString(n);return nt(e2(e)),e}function am(n,e){return NC(n.databaseId,e.path)}function sa(n,e){const t=zV(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(GV(t))}function HV(n,e){return NC(n.databaseId,e)}function qV(n){const e=zV(n);return 4===e.length?en.emptyPath():GV(e)}function kC(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GV(n){return nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function WV(n,e,t){return{name:am(n,e),fields:t.value.mapValue.fields}}function KV(n,e,t){const r=sa(n,e.name),i=Or(e.updateTime),s=e.createTime?Or(e.createTime):ot.min(),o=new bi({mapValue:{fields:e.fields}}),a=Qn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function cm(n,e){let t;if(e instanceof Gh)t={update:WV(n,e.key,e.value)};else if(e instanceof Wh)t={delete:am(n,e.key)};else if(e instanceof Wa)t={update:WV(n,e.key,e.data),updateMask:IJ(e.fieldMask)};else{if(!(e instanceof DC))return Ze();t={verify:am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ze()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:fJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ze()),t;var s}function FC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?sr.updateTime(Or(s.updateTime)):void 0!==s.exists?sr.exists(s.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(nt("REQUEST_TIME"===a.setToServerValue),c=new Hh):"appendMissingElements"in a?c=new yu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new vu(a.removeAllFromArray.values||[]):"increment"in a?c=new qh(o,a.increment):Ze();const l=Zn.fromServerFormat(a.fieldPath);return new nm(l,c)}(n,i)):[];var s;if(e.update){const i=sa(n,e.update.name),s=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Cs((e.updateMask.fieldPaths||[]).map(f=>Zn.fromServerFormat(f)));return new Wa(i,s,o,t,r)}return new Gh(i,s,t,r)}if(e.delete){const i=sa(n,e.delete);return new Wh(i,t)}if(e.verify){const i=sa(n,e.verify);return new DC(i,t)}return Ze()}function ZV(n,e){return{documents:[HV(n,e.path)]}}function RE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HV(n,i);const s=function(l){if(0!==l.length)return JV(Tn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:rl((y=f).field),direction:yJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=xC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function YV(n){let e=qV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nt(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=XV(m);return y instanceof Tn&&IC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Qg(Zh((T=y).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Hg(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new nl((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new nl(m.values||[],!m.before)}(t.endAt)),cV(e,i,o,s,a,"F",c,l)}function XV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Zh(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zh(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zh(t.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zh(t.unaryFilter.field);return tn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ze()}}(n):void 0!==n.fieldFilter?tn.create(Zh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ze()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Tn.create(t.compositeFilter.filters.map(r=>XV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ze()}}(t.compositeFilter.op))}(n):Ze();var t}function yJ(n){return lJ[n]}function vJ(n){return uJ[n]}function EJ(n){return dJ[n]}function rl(n){return{fieldPath:n.canonicalString()}}function Zh(n){return Zn.fromServerFormat(n.fieldPath)}function JV(n){return n instanceof tn?function(t){if("=="===t.op){if(GL(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(qL(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(GL(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(qL(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:vJ(t.op),value:t.value}}}(n):n instanceof Tn?function(t){const r=t.getFilters().map(i=>JV(i));return 1===r.length?r[0]:{compositeFilter:{op:EJ(t.op),filters:r}}}(n):Ze()}function IJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ka{constructor(e,t,r,i,s=ot.min(),o=ot.min(),a=si.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t2{constructor(e){this.ct=e}}function n2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:PE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:am(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Kh(s,o.version.toTimestamp()),createTime:Kh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eu(e.version)};else{if(!e.isUnknownDocument())return Ze();r.unknownDocument={path:t.path.toArray(),version:Eu(e.version)}}var s,o;return r}function PE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Iu(n){const e=new ir(n.seconds,n.nanoseconds);return ot.fromTimestamp(e)}function bu(n,e){const t=(e.baseMutations||[]).map(s=>FC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>FC(n.ct,s)),i=ir.fromMillis(e.localWriteTimeMs);return new SC(e.batchId,i,t,r)}function lm(n){const e=Iu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Iu(n.lastLimboFreeSnapshotVersion):ot.min();let r;return r=void 0!==n.query.documents?(nt(1===(s=n.query).documents.length),Fi(jh(qV(s.documents[0])))):function(s){return Fi(YV(s))}(n.query),new Ka(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken));var s}function r2(n,e){const t=Eu(e.snapshotVersion),r=Eu(e.lastLimboFreeSnapshotVersion);let i;i=bE(e.target)?ZV(n.ct,e.target):RE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_u(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function LC(n){const e=YV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TE(e,e.limit,"L"):e}function VC(n,e){return new RC(e.largestBatchId,FC(n.ct,e.overlayMutation))}function i2(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}function s2(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Eu(r.readTime),documentKey:ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class wJ{getBundleMetadata(e,t){return o2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Iu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return o2(e).put({bundleId:(i=t).id,createTime:Eu(Or(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return a2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:LC(s.bundledQuery),readTime:Iu(s.readTime)};var s})}saveNamedQuery(e,t){return a2(e).put({name:(i=t).name,readTime:Eu(Or(i.readTime)),bundledQuery:i.bundledQuery});var i}}function o2(n){return di(n,"bundles")}function a2(n){return di(n,"namedQueries")}class xE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new xE(e,t.uid||"")}getOverlay(e,t){return um(e).get(i2(this.userId,t)).next(r=>r?VC(this.serializer,r):null)}getOverlays(e,t){const r=ia();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new RC(t,o);i.push(this.ht(e,a))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ki(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(um(e).j("collectionPathOverlayIndex",a))}),ee.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ia(),s=ki(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return um(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=VC(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ia();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return um(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,f)=>{const m=VC(this.serializer,l);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return um(e).put(function(i,s,o){const[a,c,l]=i2(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cm(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function um(n){return di(n,"documentOverlays")}class wu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Er(e.integerValue));else if("doubleValue"in e){const r=Er(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),qg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=za(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ha(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?WL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ze()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function TJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function c2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=TJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}wu.bt=new wu;class CJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=c2(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=c2(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class AJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class DJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class dm{constructor(){this.Gt=new CJ,this.zt=new AJ(this.Gt),this.jt=new DJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Tu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tu(this.indexId,this.documentKey,this.arrayValue,r)}}function il(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l2(n.arrayValue,e.arrayValue),0!==t?t:(t=l2(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function l2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class u2{constructor(e){this.Yt=new Mn((t,r)=>Zn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(nt(e.collectionGroup===this.collectionId),this.en)return!1;const t=fC(e);if(void 0!==t&&!this.nn(t))return!1;const r=fu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Mn(Zn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new pu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new pu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new pu(r.field,"asc"===r.dir?0:1)));return new Fh(Fh.UNKNOWN_ID,this.collectionId,t,Lh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function d2(n){var e,t;if(nt(n instanceof tn||n instanceof Tn),n instanceof tn){if(n instanceof sV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>tn.create(n.field,"==",s)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>d2(i));return Tn.create(r,n.op)}function SJ(n){if(0===n.getFilters().length)return[];const e=jC(d2(n));return nt(h2(e)),UC(e)||BC(e)?[e]:e.getFilters()}function UC(n){return n instanceof tn}function BC(n){return n instanceof Tn&&IC(n)}function h2(n){return UC(n)||BC(n)||function(t){if(t instanceof Tn&&EC(t)){for(const r of t.getFilters())if(!UC(r)&&!BC(r))return!1;return!0}return!1}(n)}function jC(n){if(nt(n instanceof tn||n instanceof Tn),n instanceof tn)return n;if(1===n.filters.length)return jC(n.filters[0]);const e=n.filters.map(r=>jC(r));let t=Tn.create(e,n.op);return t=NE(t),h2(t)?t:(nt(t instanceof Tn),nt(Bh(t)),nt(t.filters.length>1),t.filters.reduce((r,i)=>$C(r,i)))}function $C(n,e){let t;return nt(n instanceof tn||n instanceof Tn),nt(e instanceof tn||e instanceof Tn),t=n instanceof tn?e instanceof tn?Tn.create([n,e],"and"):f2(n,e):e instanceof tn?f2(e,n):function(i,s){if(nt(i.filters.length>0&&s.filters.length>0),Bh(i)&&Bh(s))return nV(i,s.getFilters());const o=EC(i)?i:s,a=EC(i)?s:i,c=o.filters.map(l=>$C(l,a));return Tn.create(c,"or")}(n,e),NE(t)}function f2(n,e){if(Bh(e))return nV(e,n.getFilters());{const t=e.filters.map(r=>$C(n,r));return Tn.create(t,"or")}}function NE(n){if(nt(n instanceof tn||n instanceof Tn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return NE(e[0]);if(eV(n))return n;const t=e.map(i=>NE(i)),r=[];return t.forEach(i=>{i instanceof tn?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class MJ{constructor(){this._n=new zC}addToCollectionParentIndex(e,t){return this._n.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Us.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class zC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(en.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(en.comparator)).toArray()}}const OE=new Uint8Array(0);class RJ{constructor(e,t){this.databaseId=t,this.an=new zC,this.un=new Ga(r=>_u(r),(r,i)=>Yg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ki(i)};return p2(e).put(s)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[TL(t),""],!1,!0);return p2(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(na(o.parent))}return r})}addFieldIndex(e,t){const r=hm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Yh(e);return s.next(a=>{o.put(s2(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=hm(e),i=Yh(e),s=Qh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=hm(e),r=Qh(e),i=Yh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return ee.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new u2(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Qh(e);let i=!0;const s=new Map;return ee.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=kt();const a=[];return ee.forEach(s,(c,l)=>{var X;Ae("IndexedDbIndexManager",`Using index ${X=c,`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${_u(t)}`);const f=function(X,oe){const De=fC(oe);if(void 0===De)return null;for(const je of wE(X,De.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(l,c),m=function(X,oe){const De=new Map;for(const je of fu(oe))for(const H of wE(X,je.fieldPath))switch(H.op){case"==":case"in":De.set(je.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return De.set(je.fieldPath.canonicalString(),H.value),Array.from(De.values())}return null}(l,c),y=function(X,oe){const De=[];let je=!0;for(const H of fu(oe)){const V=0===H.kind?oV(X,H.fieldPath,X.startAt):aV(X,H.fieldPath,X.startAt);De.push(V.value),je&&(je=V.inclusive)}return new nl(De,je)}(l,c),I=function(X,oe){const De=[];let je=!0;for(const H of fu(oe)){const V=0===H.kind?aV(X,H.fieldPath,X.endAt):oV(X,H.fieldPath,X.endAt);De.push(V.value),je&&(je=V.inclusive)}return new nl(De,je)}(l,c),T=this.hn(c,l,y),N=this.hn(c,l,I),O=this.Pn(c,l,m),W=this.In(c.indexId,f,T,y.inclusive,N,I.inclusive,O);return ee.forEach(W,j=>r.G(j,t.limit).next(X=>{X.forEach(oe=>{const De=Be.fromSegments(oe.documentKey);o.has(De)||(o=o.add(De),a.push(De))})}))}).next(()=>a)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:SJ(Tn.create(e.filters,"and")).map(r=>wC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),l=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/l]):OE,I=this.En(e,y,r[m%l],i),T=this.dn(e,y,s[m%l],o),N=a.map(O=>this.En(e,y,O,!0));f.push(...this.createRange(I,T,N))}return f}En(e,t,r,i){const s=new Tu(e,Be.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Tu(e,Be.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new u2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return ee.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let l=new Mn(Zn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new dm;for(const i of fu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);wu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new dm;return wu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new dm;return wu.bt.Pt(mu(this.databaseId,t),r.Ht(function(s){const o=fu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new dm);let s=0;for(const o of fu(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Kg(a))i=this.mn(i,o,a);else{const l=c.Ht(o.kind);wu.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new dm;c.seed(a.Wt()),wu.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hm(e),i=Yh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return ee.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Lh(m.sequenceNumber,new Us(Iu(m.readTime),new Be(na(m.documentKey)),m.largestBatchId)):Lh.empty(),I=f.fields.map(([T,N])=>new pu(Zn.fromServerFormat(T),N));return new Fh(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=hm(e),s=Yh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>ee.forEach(a,c=>s.put(s2(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?ee.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),ee.forEach(a,c=>this.pn(e,i,c).next(l=>{const f=this.yn(s,c);return l.isEqual(f)?ee.resolve():this.wn(e,s,c,l,f)}))))})}Sn(e,t,r,i){return Qh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Qh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Qh(e);let s=new Mn(il);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Tu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Mn(il);const i=this.An(t,e);if(null==i)return r;const s=fC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Kg(o))for(const a of o.arrayValue.values||[])r=r.add(new Tu(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Tu(t.indexId,e.key,OE,i));return r}wn(e,t,r,i,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,l,f,m,y){const I=c.getIterator(),T=l.getIterator();let N=Vh(I),O=Vh(T);for(;N||O;){let W=!1,j=!1;if(N&&O){const X=f(N,O);X<0?j=!0:X>0&&(W=!0)}else null!=N?j=!0:W=!0;W?(m(O),O=Vh(T)):j?(y(N),N=Vh(I)):(N=Vh(I),O=Vh(T))}}(i,s,il,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),ee.waitFor(o)}gn(e){let t=1;return Yh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>il(o,a)).filter((o,a,c)=>!a||0!==il(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=il(o,e),c=il(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,OE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,OE,[]]))}return s}Dn(e,t){return il(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(g2)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ze())).next(g2)}}function p2(n){return di(n,"collectionParents")}function Qh(n){return di(n,"indexEntries")}function hm(n){return di(n,"indexConfiguration")}function Yh(n){return di(n,"indexState")}function g2(n){nt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;pC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Us(e.readTime,e.documentKey,t)}const m2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{nt(1===a)}));const l=[];for(const f of t.mutations){const m=OL(e,f.key.path,t.batchId);s.push(i.delete(m)),l.push(f.key)}return ee.waitFor(s).next(()=>l)}function kE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ze();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class FE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){nt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new FE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xh(e),o=sl(e);return o.add({}).next(a=>{nt("number"==typeof a);const c=new SC(a,t,r,i),l=function(I,T,N){const O=N.baseMutations.map(j=>cm(I.ct,j)),W=N.mutations.map(j=>cm(I.ct,j));return{userId:T,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:W}}(this.serializer,this.userId,c),f=[];let m=new Mn((y,I)=>Tt(y.canonicalString(),I.canonicalString()));for(const y of i){const I=OL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(l)),f.push(s.put(I,vX))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),ee.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return sl(e).get(t).next(r=>r?(nt(r.userId===this.userId),bu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?ee.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return sl(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(nt(a.batchId>=r),s=bu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).U("userMutationsIndex",t).next(r=>r.map(i=>bu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xh(e).J({range:i},(o,a,c)=>{const[l,f,m]=o,y=na(f);if(l===this.userId&&t.path.isEqual(y))return sl(e).get(m).next(I=>{if(!I)throw Ze();nt(I.userId===this.userId),s.push(bu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Tt);const i=[];return t.forEach(s=>{const o=gE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Xh(e).J({range:a},(l,f,m)=>{const[y,I,T]=l,N=na(I);y===this.userId&&s.path.isEqual(N)?r=r.add(T):m.done()});i.push(c)}),ee.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=gE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Mn(Tt);return Xh(e).J({range:o},(c,l,f)=>{const[m,y,I]=c,T=na(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(sl(e).get(s).next(o=>{if(null===o)throw Ze();nt(o.userId===this.userId),r.push(bu(this.serializer,o))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xh(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=na(s[1]);i.push(c)}else a.done()}).next(()=>{nt(0===i.length)})})}containsKey(e,t){return y2(e,this.userId,t)}xn(e){return v2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function y2(n,e,t){const r=gE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xh(n).J({range:s,H:!0},(a,c,l)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),l.done()}).next(()=>o)}function sl(n){return di(n,"mutations")}function Xh(n){return di(n,"documentMutations")}function v2(n){return di(n,"mutationQueues")}class Cu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Cu(0)}static Ln(){return new Cu(-1)}}class PJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Cu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ot.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(nt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Jh(e).J((o,a)=>{const c=lm(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>ee.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Jh(e).J((r,i)=>{const s=lm(i);t(s)})}Bn(e){return E2(e).get("targetGlobalKey").next(t=>(nt(null!==t),t))}kn(e,t){return E2(e).put("targetGlobalKey",t)}qn(e,t){return Jh(e).put(r2(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_u(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Jh(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const l=lm(a);Yg(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ol(e);return t.forEach(o=>{const a=ki(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=ol(e);return ee.forEach(t,s=>{const o=ki(s.path);return ee.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ol(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ol(e);let s=kt();return i.J({range:r,H:!0},(o,a,c)=>{const l=na(o[1]),f=new Be(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[TL(r)],!1,!0);let s=0;return ol(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Jh(e).get(t).next(r=>r?lm(r):null)}}function Jh(n){return di(n,"targets")}function E2(n){return di(n,"targetGlobal")}function ol(n){return di(n,"targetDocuments")}function I2([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class xJ{constructor(e){this.Kn=e,this.buffer=new Mn(I2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();I2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Qc(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Zc(r)}yield t.zn(3e5)}))}}class NJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Bs.oe);const r=new xJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(m2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Oh()<=ea.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(l-c)+`ms\nTotal Duration: ${l-f}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class OJ{constructor(e,t){this.db=e,this.garbageCollector=function w2(n,e){return new NJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return LE(e,r)}removeReference(e,t,r){return LE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LE(e,t)}er(e,t){return function(i,s){let o=!1;return v2(i).Y(a=>y2(i,a,s).next(c=>(c&&(o=!0),ee.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ot.min()),ol(e).delete([0,ki(o.path)])))});i.push(c)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LE(e,t)}Xn(e,t){const r=ol(e);let i,s=Bs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{0===o?(s!==Bs.oe&&t(new Be(na(i)),s),s=l,i=c):s=Bs.oe}).next(()=>{s!==Bs.oe&&t(new Be(na(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LE(n,e){return ol(n).put((i=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:i}));var i}class T2{constructor(){this.changes=new Ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Au(e).put(r)}removeEntry(e,t,r){return Au(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],PE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Au(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Au(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},(i,s)=>{r={document:this.nr(t,s),size:kE(s)}}).next(()=>r)}getEntries(e,t){let r=As();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=As(),i=new $n(Be.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,kE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return ee.resolve();let i=new Mn(S2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(fm(i.first()),fm(i.last())),o=i.getIterator();let a=o.getNext();return Au(e).J({index:"documentKeyIndex",range:s},(c,l,f)=>{const m=Be.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&S2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.$(fm(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),PE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Au(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=As();for(const m of l){const y=this.nr(Be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Jg(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=As();const o=D2(t,r),a=D2(t,Us.max());return Au(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,f)=>{const m=this.nr(Be.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new FJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return A2(e).get("remoteDocumentGlobalKey").next(t=>(nt(!!t),t))}tr(e,t){return A2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function bJ(n,e){let t;if(e.document)t=KV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Iu(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ze();{const r=Be.fromSegments(e.unknownDocument.path),i=Iu(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new ir(i[0],i[1]);return ot.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ot.min()))return r}return Qn.newInvalidDocument(e)}}function C2(n){return new kJ(n)}class FJ extends T2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ga(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mn((s,o)=>Tt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=n2(this.ar.serializer,o);i=i.add(s.path.popLast());const l=kE(c);r+=l-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=n2(this.ar.serializer,o.convertToNoDocument(ot.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function A2(n){return di(n,"remoteDocumentGlobal")}function Au(n){return di(n,"remoteDocumentsV14")}function fm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D2(n,e){const t=e.documentKey.path.toArray();return[n,PE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function S2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Tt(t[s],r[s]),i)return i;return i=Tt(t.length,r.length),i||(i=Tt(t[t.length-2],r[r.length-2]),i||Tt(t[t.length-1],r[r.length-1]))}class LJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class M2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&rm(r.mutation,i,Cs.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=ia();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=em();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=As();const o=tm(),a=tm();return t.forEach((c,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof Wa)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),rm(f.mutation,l,f.mutation.getFieldMask(),ir.now())):o.set(l.key,Cs.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new LJ(f,null!==(m=o.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=tm();let i=new $n((o,a)=>o-a),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let f=r.get(c)||Cs.empty();f=a.applyToLocalView(l,f),r.set(c,f);const m=(i.get(a.batchId)||kt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,f=c.value,m=_V();f.forEach(y=>{if(!s.has(y)){const I=AV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,m))}return ee.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):TC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ee.resolve(ia());let a=-1,c=s;return o.next(l=>ee.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?ee.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,kt())).next(f=>({batchId:a,changes:mV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=em();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=em();return this.indexManager.getCollectionParents(e,s).next(a=>ee.forEach(a,c=>{const l=(m=t,y=c.child(s),new qa(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,Qn.newInvalidDocument(f)))});let a=em();return o.forEach((c,l)=>{const f=s.get(c);void 0!==f&&rm(f.mutation,l,Cs.empty(),ir.now()),Jg(t,l)&&(a=a.insert(c,l))}),a})}}class VJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Or(i.createTime)}),ee.resolve();var i}getNamedQuery(e,t){return ee.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:LC(i.bundledQuery),readTime:Or(i.readTime)}),ee.resolve();var i}}class UJ{constructor(){this.overlays=new $n(Be.comparator),this.hr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=ia(),s=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new $n((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=ia(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=ia(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return ee.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new RC(t,r));let s=this.hr.get(t);void 0===s&&(s=kt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class HC{constructor(){this.Pr=new Mn(hi.Ir),this.Tr=new Mn(hi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new hi(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new hi(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Be(new en([])),r=new hi(t,e),i=new hi(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Be(new en([])),r=new hi(t,e),i=new hi(t,e+1);let s=kt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hi(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Be.comparator(e.key,t.key)||Tt(e.pr,t.pr)}static Er(e,t){return Tt(e.pr,t.pr)||Be.comparator(e.key,t.key)}}class BJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Mn(hi.Ir)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new SC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new hi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,t){return ee.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Tt);return t.forEach(i=>{const s=new hi(i,0),o=new hi(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),ee.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new hi(new Be(s),0);let a=new Mn(Tt);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),ee.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return ee.forEach(t.mutations,i=>{const s=new hi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new hi(t,0),i=this.wr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jJ{constructor(e){this.vr=e,this.docs=new $n(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=As();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=As();const o=t.path,a=new Be(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:f}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||pC(AL(f),r)<=0||(i.has(f.key)||Jg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ze()}Fr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $J(this)}getSize(e){return ee.resolve(this.size)}}class $J extends T2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class zJ{constructor(e){this.persistence=e,this.Mr=new Ga(t=>_u(t),Yg),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Or=0,this.Nr=new HC,this.targetCount=0,this.Lr=Cu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),ee.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.qn(t),ee.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Nr.containsKey(t))}}class qC{constructor(e,t){this.Br={},this.overlays={},this.kr=new Bs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zJ(this),this.indexManager=new MJ,this.remoteDocumentCache=new jJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new t2(t),this.$r=new VJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new BJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new HJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return ee.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class HJ extends SL{constructor(e){super(),this.currentSequenceNumber=e}}class VE{constructor(e){this.persistence=e,this.zr=new HC,this.jr=null}static Hr(e){return new VE(e)}get Jr(){if(this.jr)return this.jr;throw Ze()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ee.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Jr,r=>{const i=Be.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ot.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return ee.or([()=>ee.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class qJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new pE("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NL,{unique:!0}),c.createObjectStore("documentMutations"),R2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),R2(e)),o=o.next(()=>function(c){const l=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ot.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NL,{unique:!0});const m=l.store("mutations"),y=f.map(I=>m.put(I));return ee.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:PX});l.createIndex("collectionPathOverlayIndex",xX,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",NX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:EX});l.createIndex("documentKeyIndex",IX),l.createIndex("collectionGroupIndex",bX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:DX}).createIndex("sequenceNumberIndex",SX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:MX}).createIndex("documentKeyIndex",RX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=kE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>ee.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>ee.forEach(a,c=>{nt(c.userId===s.userId);const l=bu(this.serializer,c);return _2(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new en(o),l=[0,ki(c)];s.push(t.get(l).next(f=>f?ee.resolve():t.put({targetId:0,path:ki(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:AX});const r=t.store("collectionParents"),i=new zC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:ki(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new en(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{const f=na(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=lm(i),o=r2(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Be(en.fromString(m.document.name).popFirst(5)):m.noDocument?Be.fromSegments(m.noDocument.path):m.unknownDocument?Be.fromSegments(m.unknownDocument.path):Ze()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=C2(this.serializer),s=new qC(VE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var l;let f=null!==(l=a.get(c.userId))&&void 0!==l?l:kt();bu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),ee.forEach(a,(c,l)=>{const f=new ui(l),m=xE.lt(this.serializer,f),y=s.getIndexManager(f),I=FE.lt(f,this.serializer,y,s.referenceDelegate);return new M2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new _C(t,Bs.oe),c).next()})})}}function R2(n){n.createObjectStore("targetDocuments",{keyPath:TX}).createIndex("documentTargetsIndex",CX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wX,{unique:!0}),n.createObjectStore("targetGlobal")}const GC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WC{constructor(e,t,r,i,s,o,a,c,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!WC.D())throw new Te(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OJ(this,i),this.Ti=t+"main",this.serializer=new t2(c),this.Ei=new ta(this.Ti,this.ui,new qJ(this.serializer)),this.Qr=new PJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=C2(this.serializer),this.$r=new wJ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ce.FAILED_PRECONDITION,GC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Bs(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Qc(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return pm(e).get("owner").next(t=>ee.resolve(this.Si(t)))}bi(e){return BE(e).delete(this.clientId)}Di(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return ee.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ee.resolve(!0):pm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Te(ce.FAILED_PRECONDITION,GC);return!1}}return!(!this.networkEnabled||!this.inForeground)||BE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _C(t,Bs.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>BE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return FE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?kX:15===c?VL:14===c?LL:13===c?FL:12===c?OX:11===c?kL:void Ze();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new _C(a,this.kr?this.kr.next():Bs.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Te(ce.FAILED_PRECONDITION,DL);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return pm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ce.FAILED_PRECONDITION,GC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pm(e).put("owner",t)}static D(){return ta.D()}yi(e){const t=pm(e);return t.get("owner").next(r=>this.Si(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Mt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pm(n){return di(n,"owner")}function BE(n){return di(n,"clientMetadata")}function KC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=kt(),i=kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ZC(e,t.fromCache,r,i)}}class GJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class P2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Mt.G6)()?8:ML((0,Mt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new GJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Oh()<=ea.in.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",zh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ee.resolve()):(Oh()<=ea.in.DEBUG&&Ae("QueryEngine","Query:",zh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Oh()<=ea.in.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",zh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):ee.resolve())}ji(e,t){if(lV(t))return ee.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=TE(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=kt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Zi(t,a);return this.Xi(t,l,o,c.readTime)?this.ji(e,TE(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return lV(t)||i.isEqual(ot.min())?ee.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?ee.resolve(null):(Oh()<=ea.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zh(t)),this.es(e,o,t,CL(i,-1)).next(a=>a))})}Zi(e,t){let r=new Mn(pV(e));return t.forEach((i,s)=>{Jg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Oh()<=ea.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",zh(t)),this.zi.getDocumentsMatchingQuery(e,t,Us.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class WJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new $n(Tt),this.rs=new Ga(s=>_u(s),Yg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function x2(n,e,t,r){return new WJ(n,e,t,r)}function N2(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,_e.Z)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=kt();for(const l of i){o.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function O2(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function k2(n,e,t){let r=kt(),i=kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=As();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ot.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function QJ(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ef(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ka(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function tf(n,e,t){return YC.apply(this,arguments)}function YC(){return(YC=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qc(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function jE(n,e,t){const r=Ve(n);let i=ot.min(),s=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,f){const m=Ve(c),y=m.rs.get(f);return void 0!==y?ee.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,o,Fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ot.min(),t?s:kt())).next(a=>(V2(r,fV(e),a),{documents:a,hs:s})))}function F2(n,e){const t=Ve(n),r=Ve(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function L2(n,e){const t=Ve(n),r=t.ss.get(e)||ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,CL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(V2(t,e,i),i))}function V2(n,e,t){let r=n.ss.get(e)||ot.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function XC(){return(XC=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n);let s=kt(),o=As();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(s=s.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield ef(i,(f=r,Fi(jh(en.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>k2(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function XJ(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,_e.Z)(function*(n,e,t=kt()){const r=yield ef(n,Fi(LC(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Or(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(si.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function U2(n,e){return`firestore_clients_${n}_${e}`}function B2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eA(n,e){return`firestore_targets_${n}_${e}`}class $E{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Te(i.error.code,i.error.message))),o?new $E(e,t,i.state,s):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Te(r.error.code,r.error.message))),s?new gm(e,r.state,i):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=AC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=PL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new zE(e,s):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tA{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tA(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nA{constructor(){this.activeTargetIds=AC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rA{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new $n(Tt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=U2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new nA),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(U2(e.persistenceKey,i));if(s){const o=zE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eA(this.persistenceKey,e));if(r){const i=gm.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eA(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Bs.oe;if(null!=o)try{const c=JSON.parse(o);nt("number"==typeof c),a=c}catch(c){Nr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Bs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new $E(this.currentUser,e,t,r),s=B2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=B2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=eA(this.persistenceKey,e),s=new gm(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return zE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return $E.Es(new ui(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return gm.Es(i,t)}xs(e){return tA.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=AC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class j2{constructor(){this.no=new nA,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class JJ{io(e){}shutdown(){}}class $2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let HE=null;function iA(){return null===HE?HE=268435456+Math.round(2147483648*Math.random()):HE++,"0x"+HE.toString(16)}const eee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tee{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Vi="WebChannelConnection";class nee extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=iA(),c=this.vo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,c,l,i).then(f=>(Ae("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Ts("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Nh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${eee[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=iA();return new Promise((o,a)=>{const c=new pL;c.setWithCredentials(!0),c.listenOnce(mL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fE.NO_ERROR:const f=c.getResponseJson();Ae(Vi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case fE.TIMEOUT:Ae(Vi,`RPC '${e}' ${s} timed out`),a(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case fE.HTTP_ERROR:const m=c.getStatus();if(Ae(Vi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(O){const W=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(W)>=0?W:ce.UNKNOWN}(I.status);a(new Te(T,I.message))}else a(new Te(ce.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Ae(Vi,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ae(Vi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=iA(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vL(),a=yL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new gL({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Ae(Vi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const T=new tee({lo:O=>{I?Ae(Vi,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(Ae(Vi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ae(Vi,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},ho:()=>m.close()}),N=(O,W,j)=>{O.listen(W,X=>{try{j(X)}catch(oe){setTimeout(()=>{throw oe},0)}})};return N(m,jg.EventType.OPEN,()=>{I||(Ae(Vi,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),N(m,jg.EventType.CLOSE,()=>{I||(I=!0,Ae(Vi,`RPC '${e}' stream ${i} transport closed`),T.po())}),N(m,jg.EventType.ERROR,O=>{I||(I=!0,Ts(Vi,`RPC '${e}' stream ${i} transport errored:`,O),T.po(new Te(ce.UNAVAILABLE,"The operation could not be completed")))}),N(m,jg.EventType.MESSAGE,O=>{var W;if(!I){const j=O.data[0];nt(!!j);const oe=j.error||(null===(W=j[0])||void 0===W?void 0:W.error);if(oe){Ae(Vi,`RPC '${e}' stream ${i} received error:`,oe);const De=oe.status;let je=function(B){const K=Kr[B];if(void 0!==K)return NV(K)}(De),H=oe.message;void 0===je&&(je=ce.INTERNAL,H="Unknown error status: "+De+" with message "+oe.message),I=!0,T.po(new Te(je,H)),m.close()}else Ae(Vi,`RPC '${e}' stream ${i} received:`,j),T.yo(j)}}),N(a,_L.STAT_EVENT,O=>{O.stat===dC.PROXY?Ae(Vi,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===dC.NOPROXY&&Ae(Vi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function z2(){return typeof window<"u"?window:null}function qE(){return typeof document<"u"?document:null}function mm(n){return new hJ(n,!0)}class sA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class H2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new sA(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,_e.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,_e.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Te(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,_e.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ree extends H2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function gJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ze(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(nt(void 0===f||"string"==typeof f),si.fromBase64String(f||"")):(nt(void 0===f||f instanceof Buffer||f instanceof Uint8Array),si.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?ce.UNKNOWN:NV(l.code);return new Te(f,l.message||"")}(o);t=new VV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=sa(n,r.document.name),s=Or(r.document.updateTime),o=r.document.createTime?Or(r.document.createTime):ot.min(),a=new bi({mapValue:{fields:r.document.fields}}),c=Qn.newFoundDocument(i,s,o,a);t=new ME(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=sa(n,r.document),s=r.readTime?Or(r.readTime):ot.min(),o=Qn.newNoDocument(i,s);t=new ME([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=sa(n,r.document);t=new ME([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ze();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new oJ(i,s);t=new LV(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ot.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ot.min():o.readTime?Or(o.readTime):ot.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=kC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=bE(c)?{documents:ZV(s,c)}:{query:RE(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$V(s,o.resumeToken);const l=xC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ot.min())>0){a.readTime=Kh(s,o.snapshotVersion.toTimestamp());const l=xC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function _J(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=kC(this.serializer),t.removeTarget=e,this.i_(t)}}class iee extends H2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function mJ(n,e){return n&&n.length>0?(nt(void 0!==e),n.map(t=>function(i,s){let o=Or(i.updateTime?i.updateTime:s);return o.isEqual(ot.min())&&(o=Or(s)),new rJ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.A_(r,t)}return nt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=kC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cm(this.serializer,r))};this.i_(t)}}class see extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,OC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ce.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,OC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ce.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class oee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nr(t),this.y_=!1):Ae("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class aee{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,_e.Z)(function*(){var c;al(o)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,_e.Z)(function*(f){const m=Ve(f);m.M_.add(4),yield nf(m),m.N_.set("Unknown"),m.M_.delete(4),yield _m(m)}),function l(f){return c.apply(this,arguments)})(o))}))}),this.N_=new oee(r,i)}}function _m(n){return oA.apply(this,arguments)}function oA(){return(oA=(0,_e.Z)(function*(n){if(al(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function nf(n){return aA.apply(this,arguments)}function aA(){return(aA=(0,_e.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function GE(n,e){const t=Ve(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),uA(t)?lA(t):af(t).Xo()&&cA(t,e))}function rf(n,e){const t=Ve(n),r=af(t);t.F_.delete(e),r.Xo()&&q2(t,e),0===t.F_.size&&(r.Xo()?r.n_():al(t)&&t.N_.set("Unknown"))}function cA(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}af(n).P_(e)}function q2(n,e){n.L_.xe(e),af(n).I_(e)}function lA(n){n.L_=new cJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),af(n).start(),n.N_.w_()}function uA(n){return al(n)&&!af(n).Zo()&&n.F_.size>0}function al(n){return 0===Ve(n).M_.size}function G2(n){n.L_=void 0}function cee(n){return dA.apply(this,arguments)}function dA(){return(dA=(0,_e.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function lee(n){return hA.apply(this,arguments)}function hA(){return(hA=(0,_e.Z)(function*(n){n.F_.forEach((e,t)=>{cA(n,e)})})).apply(this,arguments)}function uee(n,e){return fA.apply(this,arguments)}function fA(){return(fA=(0,_e.Z)(function*(n,e){G2(n),uA(n)?(n.N_.D_(e),lA(n)):n.N_.set("Unknown")})).apply(this,arguments)}function dee(n,e,t){return pA.apply(this,arguments)}function pA(){return pA=(0,_e.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof VV&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WE(n,r)}else if(e instanceof ME?n.L_.Ke(e):e instanceof LV?n.L_.He(e):n.L_.We(e),!t.isEqual(ot.min()))try{const r=yield O2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(l);f&&s.F_.set(l,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(si.EMPTY_BYTE_STRING,f.snapshotVersion)),q2(s,c);const m=new Ka(f.target,c,l,f.sequenceNumber);cA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield WE(n,r)}var r}),pA.apply(this,arguments)}function WE(n,e,t){return gA.apply(this,arguments)}function gA(){return(gA=(0,_e.Z)(function*(n,e,t){if(!Qc(e))throw e;n.M_.add(1),yield nf(n),n.N_.set("Offline"),t||(t=()=>O2(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield _m(n)}))})).apply(this,arguments)}function W2(n,e){return e().catch(t=>WE(n,t,e))}function sf(n){return mA.apply(this,arguments)}function mA(){return(mA=(0,_e.Z)(function*(n){const e=Ve(n),t=cl(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;hee(e);)try{const i=yield QJ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,fee(e,i)}catch(i){yield WE(e,i)}K2(e)&&Z2(e)})).apply(this,arguments)}function hee(n){return al(n)&&n.v_.length<10}function fee(n,e){n.v_.push(e);const t=cl(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function K2(n){return al(n)&&!cl(n).Zo()&&n.v_.length>0}function Z2(n){cl(n).start()}function pee(n){return _A.apply(this,arguments)}function _A(){return(_A=(0,_e.Z)(function*(n){cl(n).V_()})).apply(this,arguments)}function gee(n){return yA.apply(this,arguments)}function yA(){return(yA=(0,_e.Z)(function*(n){const e=cl(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function mee(n,e,t){return vA.apply(this,arguments)}function vA(){return(vA=(0,_e.Z)(function*(n,e,t){const r=n.v_.shift(),i=MC.from(r,e,t);yield W2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sf(n)})).apply(this,arguments)}function _ee(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,_e.Z)(function*(n,e){var t;e&&cl(n).E_&&(yield(t=(0,_e.Z)(function*(i,s){if(xV(a=s.code)&&a!==ce.ABORTED){const o=i.v_.shift();cl(i).t_(),yield W2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield sf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),K2(n)&&Z2(n)}),EA.apply(this,arguments)}function Q2(n,e){return IA.apply(this,arguments)}function IA(){return(IA=(0,_e.Z)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=al(t);t.M_.add(3),yield nf(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield _m(t)})).apply(this,arguments)}function bA(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,_e.Z)(function*(n,e){const t=Ve(n);e?(t.M_.delete(2),yield _m(t)):e||(t.M_.add(2),yield nf(t),t.N_.set("Unknown"))})).apply(this,arguments)}function af(n){return n.B_||(n.B_=function(t,r,i){const s=Ve(t);return s.f_(),new ree(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:cee.bind(null,n),To:lee.bind(null,n),Ao:uee.bind(null,n),h_:dee.bind(null,n)}),n.x_.push(function(){var e=(0,_e.Z)(function*(t){t?(n.B_.t_(),uA(n)?lA(n):n.N_.set("Unknown")):(yield n.B_.stop(),G2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function cl(n){return n.k_||(n.k_=function(t,r,i){const s=Ve(t);return s.f_(),new iee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:pee.bind(null,n),Ao:_ee.bind(null,n),R_:gee.bind(null,n),A_:mee.bind(null,n)}),n.x_.push(function(){var e=(0,_e.Z)(function*(t){t?(n.k_.t_(),yield sf(n)):(yield n.k_.stop(),n.v_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class TA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new TA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cf(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),Qc(n))return new Te(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class lf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=em(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new lf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new lf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Y2{constructor(){this.q_=new $n(Be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ze():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class uf{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new uf(e,t,lf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class yee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class vee{constructor(){this.queries=new Ga(e=>hV(e),Xg),this.onlineState="Unknown",this.z_=new Set}}function CA(n,e){return AA.apply(this,arguments)}function AA(){return(AA=(0,_e.Z)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new yee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=cf(o,`Initialization of query '${zh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&MA(t)})).apply(this,arguments)}function DA(n,e){return SA.apply(this,arguments)}function SA(){return(SA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Eee(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&MA(t)}function Iee(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function MA(n){n.z_.forEach(e=>{e.next()})}var RA,X2;(X2=RA||(RA={})).J_="default",X2.Cache="cache";class PA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=uf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==RA.Cache}}class bee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class J2{constructor(e){this.serializer=e}Ps(e){return sa(this.serializer,e)}Is(e){return e.metadata.exists?KV(this.serializer,e.document,!1):Qn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Or(e)}}class wee{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eU(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=en.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new J2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||kt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function YJ(n,e,t,r){return XC.apply(this,arguments)}(e.localStore,new J2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield XJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function eU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tU{constructor(e){this.key=e}}class nU{constructor(e){this.key=e}}class rU{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=kt(),this.mutatedKeys=kt(),this.Ia=pV(e),this.Ta=new lf(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new Y2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Jg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;y&&I?y.data.isEqual(I.data)?T!==N&&(r.track({type:3,doc:I}),O=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),O=!0,(c&&this.Ia(I,c)>0||l&&this.Ia(I,l)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),O=!0):y&&!I&&(r.track({type:1,doc:y}),O=!0,(c||l)&&(a=!0)),O&&(I?(o=o.add(I),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return N(I)-N(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,0!==o.length||l?{snapshot:new uf(this.query,e.Ta,s,o,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Y2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=kt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new nU(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new tU(r))}),t}pa(e){this.la=e.hs,this.Pa=kt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return uf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Tee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cee{constructor(e){this.key=e,this.wa=!1}}class Aee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ga(a=>hV(a),Xg),this.Da=new Map,this.Ca=new Set,this.va=new $n(Be.comparator),this.Fa=new Map,this.Ma=new HC,this.xa={},this.Oa=new Map,this.Na=Cu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Dee(n,e){return xA.apply(this,arguments)}function xA(){return(xA=(0,_e.Z)(function*(n,e,t=!0){const r=KE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield iU(r,e,t,!0),i})).apply(this,arguments)}function See(n,e){return NA.apply(this,arguments)}function NA(){return(NA=(0,_e.Z)(function*(n,e){const t=KE(n);yield iU(t,e,!0,!1)})).apply(this,arguments)}function iU(n,e,t,r){return OA.apply(this,arguments)}function OA(){return(OA=(0,_e.Z)(function*(n,e,t,r){const i=yield ef(n.localStore,Fi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield kA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&GE(n.remoteStore,i),a})).apply(this,arguments)}function kA(n,e,t,r,i){return FA.apply(this,arguments)}function FA(){return FA=(0,_e.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,_e.Z)(function*(O,W,j,X){let oe=W.view.da(j);oe.Xi&&(oe=yield jE(O.localStore,W.query,!1).then(({documents:V})=>W.view.da(V,oe)));const De=X&&X.targetChanges.get(W.targetId),je=X&&null!=X.targetMismatches.get(W.targetId),H=W.view.applyChanges(oe,O.isPrimaryClient,De,je);return WA(O,W.targetId,H.fa),H.snapshot}),function N(O,W,j,X){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield jE(n.localStore,e,!0),o=new rU(e,s.hs),a=o.da(s.documents),c=om.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,c);WA(n,t,l.fa);const f=new Tee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),FA.apply(this,arguments)}function Mee(n,e,t){return LA.apply(this,arguments)}function LA(){return(LA=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Xg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rf(r.remoteStore,i.targetId),df(r,i.targetId)}).catch(Zc))):(df(r,i.targetId),yield tf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Ree(n,e){return VA.apply(this,arguments)}function VA(){return(VA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rf(t.remoteStore,r.targetId))})).apply(this,arguments)}function UA(){return(UA=(0,_e.Z)(function*(n,e,t){const r=iD(n);try{const i=yield function(o,a){const c=Ve(o),l=ir.now(),f=a.reduce((I,T)=>I.add(T.key),kt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=As(),N=kt();return c.os.getEntries(I,f).next(O=>{T=O,T.forEach((W,j)=>{j.isValidDocument()||(N=N.add(W))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(O=>{m=O;const W=[];for(const j of a){const X=sJ(j,m.get(j.key).overlayedDocument);null!=X&&W.push(new Wa(j.key,X,QL(X.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(I,l,W,a)}).next(O=>{y=O;const W=O.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(I,O.batchId,W)})}).then(()=>({batchId:y.batchId,changes:mV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new $n(Tt)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Za(r,i.changes),yield sf(r.remoteStore)}catch(i){const s=cf(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function sU(n,e){return BA.apply(this,arguments)}function BA(){return(BA=(0,_e.Z)(function*(n,e){const t=Ve(n);try{const r=yield function ZJ(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var N,O,W;null!==e.targetMismatches.get(m)?I=I.withResumeToken(si.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),O=I,W=f,(0===(N=y).resumeToken.approximateByteSize()||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=As(),l=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(k2(s,o,e.documentUpdates).next(f=>{c=f.cs,l=f.ls})),!r.isEqual(ot.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return ee.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?nt(o.wa):i.removedDocuments.size>0&&(nt(o.wa),o.wa=!1))}),yield Za(t,r,e)}catch(r){yield Zc(r)}})).apply(this,arguments)}function oU(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ve(o);c.onlineState=a;let l=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&MA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xee(n,e,t){return jA.apply(this,arguments)}function jA(){return(jA=(0,_e.Z)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new $n(Be.comparator);o=o.insert(s,Qn.newNoDocument(s,ot.min()));const a=kt().add(s),c=new sm(ot.min(),new Map,new $n(Tt),o,a);yield sU(r,c),r.va=r.va.remove(s),r.Fa.delete(e),KA(r)}else yield tf(r.localStore,e,!1).then(()=>df(r,e,t)).catch(Zc)})).apply(this,arguments)}function Nee(n,e){return $A.apply(this,arguments)}function $A(){return($A=(0,_e.Z)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function KJ(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,f){const m=l.batch,y=m.keys();let I=ee.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(c,T)).next(N=>{const O=l.docVersions.get(T);nt(null!==O),N.version.compareTo(O)<0&&(m.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=kt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);GA(t,r,null),qA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Za(t,i)}catch(i){yield Zc(i)}})).apply(this,arguments)}function Oee(n,e,t){return zA.apply(this,arguments)}function zA(){return(zA=(0,_e.Z)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const c=Ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(nt(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>c.localDocuments.getDocuments(l,f))})}(r.localStore,e);GA(r,e,t),qA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Za(r,i)}catch(i){yield Zc(i)}})).apply(this,arguments)}function HA(){return(HA=(0,_e.Z)(function*(n,e){const t=Ve(n);al(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ve(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=cf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function qA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function GA(n,e,t){const r=Ve(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||aU(n,r)})}function aU(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(rf(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),KA(n))}function WA(n,e,t){for(const r of t)r instanceof tU?(n.Ma.addReference(r.key,e),Fee(n,r)):r instanceof nU?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||aU(n,r.key)):Ze()}function Fee(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.Ca.add(r),KA(n))}function KA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Be(en.fromString(e)),r=n.Na.next();n.Fa.set(r,new Cee(t)),n.va=n.va.insert(t,r),GE(n.remoteStore,new Ka(Fi(jh(t.path)),r,"TargetPurposeLimboResolution",Bs.oe))}}function Za(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=ZC.Ki(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,_e.Z)(function*(l,f){const m=Ve(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ee.forEach(f,I=>ee.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>ee.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!Qc(y))throw y;Ae("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),O=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,O)}}}),function c(l,f){return a.apply(this,arguments)})(r.localStore,s))}),ZA.apply(this,arguments)}function Lee(n,e){return QA.apply(this,arguments)}function QA(){return(QA=(0,_e.Z)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield N2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new Te(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Za(t,r.us)}var s})).apply(this,arguments)}function Vee(n,e){const t=Ve(n),r=t.Fa.get(e);if(r&&r.wa)return kt().add(r.key);{let i=kt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Uee(n,e){return YA.apply(this,arguments)}function YA(){return(YA=(0,_e.Z)(function*(n,e){const t=Ve(n),r=yield jE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&WA(t,e.targetId,i.fa),i})).apply(this,arguments)}function Bee(n,e){return XA.apply(this,arguments)}function XA(){return(XA=(0,_e.Z)(function*(n,e){const t=Ve(n);return L2(t.localStore,e).then(r=>Za(t,r))})).apply(this,arguments)}function jee(n,e,t,r){return JA.apply(this,arguments)}function JA(){return(JA=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n),s=yield function(a,c){const l=Ve(a),f=Ve(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?l.localDocuments.getDocuments(m,y):ee.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield sf(i.remoteStore):"acknowledged"===t||"rejected"===t?(GA(i,e,r||null),qA(i,e),c=e,Ve(Ve(i.localStore).mutationQueue).Mn(c)):Ze(),yield Za(i,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function eD(){return(eD=(0,_e.Z)(function*(n,e){const t=Ve(n);if(KE(t),iD(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield cU(t,r.toArray());t.La=!0,yield bA(t.remoteStore,!0);for(const s of i)GE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(df(t,o),tf(t.localStore,o,!0))),rf(t.remoteStore,o)}),yield i,yield cU(t,r),function(o){const a=Ve(o);a.Fa.forEach((c,l)=>{rf(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new $n(Be.comparator)}(t),t.La=!1,yield bA(t.remoteStore,!1)}})).apply(this,arguments)}function cU(n,e,t){return tD.apply(this,arguments)}function tD(){return(tD=(0,_e.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield ef(r.localStore,Fi(c[0]));for(const l of c){const f=r.ba.get(l),m=yield Uee(r,f);m.snapshot&&s.push(m.snapshot)}}else{const l=yield F2(r.localStore,o);a=yield ef(r.localStore,l),yield kA(r,lU(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function lU(n){return cV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zee(n){return t=Ve(n).localStore,Ve(Ve(t).persistence).Bi();var t}function Hee(n,e,t,r){return nD.apply(this,arguments)}function nD(){return(nD=(0,_e.Z)(function*(n,e,t,r){const i=Ve(n);if(i.La)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield L2(i.localStore,fV(s[0])),a=sm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,si.EMPTY_BYTE_STRING);yield Za(i,o,a);break}case"rejected":yield tf(i.localStore,e,!0),df(i,e,r);break;default:Ze()}})).apply(this,arguments)}function qee(n,e,t){return rD.apply(this,arguments)}function rD(){return(rD=(0,_e.Z)(function*(n,e,t){const r=KE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const s=yield F2(r.localStore,i),o=yield ef(r.localStore,s);yield kA(r,lU(s),o.targetId,!1,o.resumeToken),GE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield tf(r.localStore,i,!1).then(()=>{rf(r.remoteStore,i),df(r,i)}).catch(Zc))}})).apply(this,arguments)}function KE(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xee.bind(null,e),e.Sa.h_=Eee.bind(null,e.eventManager),e.Sa.ka=Iee.bind(null,e.eventManager),e}function iD(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oee.bind(null,e),e}class ym{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=mm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return x2(this.persistence,new P2,e.initialUser,this.serializer)}createPersistence(e){return new qC(VE.Hr,this.serializer)}createSharedClientState(e){return new j2}terminate(){var e=this;return(0,_e.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sD extends ym{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield iD(r.Qa.syncEngine),yield sf(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return x2(this.persistence,new P2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new b2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new _X(t,this.persistence);return new mX(e.asyncQueue,r)}createPersistence(e){const t=KC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new WC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,z2(),qE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new j2}}class uU extends sD{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof rA&&(r.sharedClientState.syncEngine={Zs:jee.bind(null,i),Xs:Hee.bind(null,i),eo:qee.bind(null,i),Bi:zee.bind(null,i),Ys:Bee.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,_e.Z)(function*(o){yield function $ee(n,e){return eD.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=z2();if(!rA.D(t))throw new Te(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class hf{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>oU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Lee.bind(null,r.syncEngine),yield bA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vee}createDatastore(e){const t=mm(e.databaseInfo.databaseId),r=new nee(e.databaseInfo);return new see(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>oU(this.syncEngine,t,0),a=$2.D()?new $2:new JJ,new aee(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,l,f){const m=new Aee(i,s,o,a,c,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,_e.Z)(function*(){var t,r;yield(r=(0,_e.Z)(function*(s){const o=Ve(s);Ae("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield nf(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function dU(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Kee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new ii,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,_e.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new bee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,_e.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Zee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Te(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,_e.Z)(function*(o,a){const c=Ve(o),l={documents:a.map(I=>am(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,en.emptyPath(),l,a.length),m=new Map;f.forEach(I=>{const T=function pJ(n,e){return"found"in e?function(r,i){nt(!!i.found);const s=sa(r,i.found.name),o=Or(i.found.updateTime),a=i.found.createTime?Or(i.found.createTime):ot.min(),c=new bi({mapValue:{fields:i.found.fields}});return Qn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){nt(!!i.missing),nt(!!i.readTime);const s=sa(r,i.missing),o=Or(i.readTime);return Qn.newNoDocument(s,o)}(n,e):Ze()}(c.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());nt(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Be.fromPath(i);e.mutations.push(new DC(s,e.precondition(s)))}),yield(r=(0,_e.Z)(function*(s,o){const a=Ve(s),c={writes:o.map(l=>cm(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,en.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ze();t=ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ot.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ot.min()))throw new Te(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qee{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new sA(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,_e.Z)(function*(){const t=new Zee(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Hg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xV(t)}return!1}}class Yee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=wL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,_e.Z)(function*(a){Ae("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=cf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function QE(n,e){return oD.apply(this,arguments)}function oD(){return oD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(s){r.isEqual(s)||(yield N2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),oD.apply(this,arguments)}function aD(n,e){return cD.apply(this,arguments)}function cD(){return(cD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lD(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Q2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Q2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function hU(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function lD(n){return uD.apply(this,arguments)}function uD(){return(uD=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield QE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!hU(t))throw t;Ts("Error using user provided cache. Falling back to memory cache: "+t),yield QE(n,new ym)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield QE(n,new ym);return n._offlineComponents})).apply(this,arguments)}function YE(n){return dD.apply(this,arguments)}function dD(){return(dD=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield aD(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield aD(n,new hf))),n._onlineComponents})).apply(this,arguments)}function fU(n){return lD(n).then(e=>e.persistence)}function ff(n){return lD(n).then(e=>e.localStore)}function pU(n){return YE(n).then(e=>e.remoteStore)}function hD(n){return YE(n).then(e=>e.syncEngine)}function pf(n){return fD.apply(this,arguments)}function fD(){return(fD=(0,_e.Z)(function*(n){const e=yield YE(n),t=e.eventManager;return t.onListen=Dee.bind(null,e.syncEngine),t.onUnlisten=Mee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=See.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ree.bind(null,e.syncEngine),t})).apply(this,arguments)}function mU(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,o,a,c,l){const f=new ZE({next:y=>{o.enqueueAndForget(()=>DA(s,m));const I=y.docs.has(a);!I&&y.fromCache?l.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?l.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new PA(jh(a.path),f,{includeMetadataChanges:!0,ra:!0});return CA(s,m)}(yield pf(n),n.asyncQueue,e,t,r)})),r.promise}function _U(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,o,a,c,l){const f=new ZE({next:y=>{o.enqueueAndForget(()=>DA(s,m)),y.fromCache&&"server"===c.source?l.reject(new Te(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new PA(a,f,{includeMetadataChanges:!0,ra:!0});return CA(s,m)}(yield pf(n),n.asyncQueue,e,t,r)})),r.promise}function yU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const vU=new Map;function pD(n,e,t){if(!t)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EU(n,e,t,r){if(!0===e&&!0===r)throw new Te(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IU(n){if(!Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bU(n){if(Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ze()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XE(n);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wU(n,e){if(e<=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class TU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new iX;switch(r.type){case"firstParty":return new cX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=vU.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),vU.delete(t),r.terminate())}(this),Promise.resolve()}}function CU(n,e,t,r={}){var i;const s=(n=qt(n,vm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ui.MOCK_USER;else{a=(0,Mt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ui(l)}n._authCredentials=new sX(new IL(a,c))}}class wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class oa extends wi{constructor(e,t,r){super(e,t,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new Be(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function AU(n,e,...t){if(n=(0,Mt.m9)(n),pD("collection","path",e),n instanceof vm){const r=en.fromString(e,...t);return bU(r),new oa(n,null,r)}{if(!(n instanceof Yn||n instanceof oa))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return bU(r),new oa(n.firestore,null,r)}}function JE(n,e,...t){if(n=(0,Mt.m9)(n),1===arguments.length&&(e=wL.newId()),pD("doc","path",e),n instanceof vm){const r=en.fromString(e,...t);return IU(r),new Yn(n,null,new Be(r))}{if(!(n instanceof Yn||n instanceof oa))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return IU(r),new Yn(n.firestore,n instanceof oa?n.converter:null,new Be(r))}}function DU(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),(n instanceof Yn||n instanceof oa)&&(e instanceof Yn||e instanceof oa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gD(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),n instanceof wi&&e instanceof wi&&n.firestore===e.firestore&&Xg(n._query,e._query)&&n.converter===e.converter}class ute{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new sA(this,"async_queue_retry"),this.hu=()=>{const t=qE();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=qE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=qE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new ii;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,_e.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Qc(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=TA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ze()}verifyOperationInProgress(){}du(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function mD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class dte{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends vm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ute,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SU(this),this._firestoreClient.terminate()}}function fte(n,e){const t="object"==typeof n?n:(0,vr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,vr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Mt.P0)("firestore");s&&CU(i,...s)}return i}function or(n){return n._firestoreClient||SU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function SU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yU(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new Yee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function MU(n,e,t){const r=new ii;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield QE(n,t),yield aD(n,e),r.resolve()}catch(i){const s=i;if(!hU(s))throw s;Ts("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function RU(n){if(n._initialized||n._terminated)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(si.fromBase64String(e))}catch(t){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new aa(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Du{constructor(e){this._methodName=e}}class eI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const wte=/^__.*__$/;class Tte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}class PU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}class tI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new tI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return iI(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(xU(this.fu)&&wte.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Cte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mm(e)}Fu(e,t,r,i=!1){return new tI({fu:e,methodName:t,vu:r,path:Zn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Su(n){const e=n._freezeSettings(),t=mm(n._databaseId);return new Cte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nI(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);wD("Data must be an object, but it was:",o,r);const a=kU(r,o);let c,l;if(s.merge)c=new Cs(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=bm(e,m,t);if(!o.contains(y))throw new Te(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);LU(f,y)||f.push(y)}c=new Cs(f),l=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=o.fieldTransforms;return new Tte(new bi(a),c,l)}class Im extends Du{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Im}}function NU(n,e,t){return new tI({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _D extends Du{_toFieldTransform(e){return new nm(e.path,new Hh)}isEqual(e){return e instanceof _D}}class yD extends Du{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NU(this,e,!0),r=this.Mu.map(s=>Mu(s,t)),i=new yu(r);return new nm(e.path,i)}isEqual(e){return e instanceof yD&&(0,Mt.vZ)(this.Mu,e.Mu)}}class vD extends Du{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NU(this,e,!0),r=this.Mu.map(s=>Mu(s,t)),i=new vu(r);return new nm(e.path,i)}isEqual(e){return e instanceof vD&&(0,Mt.vZ)(this.Mu,e.Mu)}}class ED extends Du{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new qh(e.serializer,EV(e.serializer,this.xu));return new nm(e.path,t)}isEqual(e){return e instanceof ED&&this.xu===e.xu}}function ID(n,e,t,r){const i=n.Fu(1,e,t);wD("Data must be an object, but it was:",i,r);const s=[],o=bi.empty();Yc(r,(c,l)=>{const f=rI(e,c,t);l=(0,Mt.m9)(l);const m=i.Su(f);if(l instanceof Im)s.push(f);else{const y=Mu(l,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Cs(s);return new PU(o,a,i.fieldTransforms)}function bD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[bm(e,r,t)],c=[i];if(s.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(bm(e,s[y])),c.push(s[y+1]);const l=[],f=bi.empty();for(let y=a.length-1;y>=0;--y)if(!LU(l,a[y])){const I=a[y];let T=c[y];T=(0,Mt.m9)(T);const N=o.Su(I);if(T instanceof Im)l.push(I);else{const O=Mu(T,N);null!=O&&(l.push(I),f.set(I,O))}}const m=new Cs(l);return new PU(f,m,o.fieldTransforms)}function OU(n,e,t,r=!1){return Mu(t,n.Fu(r?4:3,e))}function Mu(n,e){if(FU(n=(0,Mt.m9)(n)))return wD("Unsupported field value:",e,n),kU(n,e);if(n instanceof Du)return function(r,i){if(!xU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Mu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Mt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return EV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=ir.fromDate(r);return{timestampValue:Kh(i.serializer,s)}}if(r instanceof ir){const s=new ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(i.serializer,s)}}if(r instanceof eI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof aa)return{bytesValue:$V(i.serializer,r._byteString)};if(r instanceof Yn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:NC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${XE(r)}`)}(n,e)}function kU(n,e){const t={};return jL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(n,(r,i)=>{const s=Mu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function FU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof eI||n instanceof aa||n instanceof Yn||n instanceof Du)}function wD(n,e,t){if(!FU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=XE(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function bm(n,e,t){if((e=(0,Mt.m9)(e))instanceof Qa)return e._internalPath;if("string"==typeof e)return rI(n,e);throw iI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ate=new RegExp("[~\\*/\\[\\]]");function rI(n,e,t){if(e.search(Ate)>=0)throw iI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qa(...e.split("."))._internalPath}catch{throw iI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Te(ce.INVALID_ARGUMENT,a+n+c)}function LU(n,e){return n.some(t=>t.isEqual(e))}class wm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dte extends wm{data(){return super.data()}}function sI(n,e){return"string"==typeof e?rI(n,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}function VU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TD{}class Tm extends TD{}function ll(n,e,...t){let r=[];e instanceof TD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof gf).length,a=s.filter(c=>c instanceof Cm).length;if(o>1||o>0&&a>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Cm extends Tm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cm(e,t,r)}_apply(e){const t=this._parse(e);return $U(e._query,t),new wi(e.firestore,e.converter,CC(e._query,t))}_parse(e){const t=Su(e.firestore);return function(s,o,a,c,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){jU(m,f);const I=[];for(const T of m)I.push(BU(c,s,T));y={arrayValue:{values:I}}}else y=BU(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||jU(m,f),y=OU(a,"where",m,"in"===f||"not-in"===f);return tn.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class gf extends TD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)$U(o,c),o=CC(o,c)}(e._query,t),new wi(e.firestore,e.converter,CC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class CD extends Tm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new CD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qg(s,o)}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class oI extends Tm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oI(e,t,r)}_apply(e){return new wi(e.firestore,e.converter,TE(e._query,this._limit,this._limitType))}}class aI extends Tm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aI(e,t,r)}_apply(e){const t=UU(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(s=t,new qa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class cI extends Tm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cI(e,t,r)}_apply(e){const t=UU(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(s=t,new qa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function UU(n,e,t,r){if(t[0]=(0,Mt.m9)(t[0]),t[0]instanceof wm)return function(s,o,a,c,l){if(!c)throw new Te(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of $h(s))if(m.field.isKeyField())f.push(mu(o,c.key));else{const y=c.data.field(m.field);if(_E(y))throw new Te(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new Te(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new nl(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Su(n.firestore);return function(o,a,c,l,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new Te(ce.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const N=f[T];if(y[T].field.isKeyField()){if("string"!=typeof N)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!TC(o)&&-1!==N.indexOf("/"))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);const O=o.path.child(en.fromString(N));if(!Be.isDocumentKey(O))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const W=new Be(O);I.push(mu(a,W))}else{const O=OU(c,l,N);I.push(O)}}return new nl(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BU(n,e,t){if("string"==typeof(t=(0,Mt.m9)(t))){if(""===t)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TC(e)&&-1!==t.indexOf("/"))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!Be.isDocumentKey(r))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mu(n,new Be(r))}if(t instanceof Yn)return mu(n,t._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XE(t)}.`)}function jU(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $U(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AD{convertValue(e,t="none"){switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ze()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new eI(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gg(e));default:return null}}convertTimestamp(e){const t=za(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);nt(e2(r));const i=new Xc(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||Nr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function lI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fte extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class Ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends wm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Am(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Am extends Ya{data(e={}){return super.data(e)}}class ul{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ru(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Am(this._firestore,this._userDataWriter,r.key,r,new Ru(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Am(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ru(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Am(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ru(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Vte(a.type),doc:c,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}function HU(n,e){return n instanceof Ya&&e instanceof Ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ul&&e instanceof ul&&n._firestore===e._firestore&&gD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class dl extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function qU(n,e,t){n=qt(n,Yn);const r=qt(n.firestore,Rn),i=lI(n.converter,e,t);return mf(r,[nI(Su(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function GU(n,e,t,...r){n=qt(n,Yn);const i=qt(n.firestore,Rn),s=Su(i);let o;return o="string"==typeof(e=(0,Mt.m9)(e))||e instanceof Qa?bD(s,"updateDoc",n._key,e,t,r):ID(s,"updateDoc",n._key,e),mf(i,[o.toMutation(n._key,sr.exists(!0))])}function WU(n,...e){var t,r,i;n=(0,Mt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||mD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,l,f;if(n instanceof Yn)l=qt(n.firestore,Rn),f=jh(n._key.path),c={next:m=>{e[o]&&e[o](DD(l,n,m))},error:e[o+1],complete:e[o+2]};else{const m=qt(n,wi);l=qt(m.firestore,Rn),f=m._query;const y=new dl(l);c={next:I=>{e[o]&&e[o](new ul(l,y,m,I))},error:e[o+1],complete:e[o+2]},VU(n._query)}return function(y,I,T,N){const O=new ZE(N),W=new PA(I,O,T);return y.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return CA(yield pf(y),W)})),()=>{O.$a(),y.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return DA(yield pf(y),W)}))}}(or(l),f,a,c)}function mf(n,e){return function(r,i){const s=new ii;return r.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Pee(n,e,t){return UA.apply(this,arguments)}(yield hD(r),i,s)})),s.promise}(or(n),e)}function DD(n,e,t){const r=t.docs.get(e._key),i=new dl(n);return new Ya(n,i,e._key,r,new Ru(t.hasPendingWrites,t.fromCache),e.converter)}const nne={maxAttempts:5};class KU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Su(e)}set(e,t,r){this._verifyNotCommitted();const i=hl(e,this._firestore),s=lI(i.converter,t,r),o=nI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=hl(e,this._firestore);let o;return o="string"==typeof(t=(0,Mt.m9)(t))||t instanceof Qa?bD(this._dataReader,"WriteBatch.update",s._key,t,r,i):ID(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hl(e,this._firestore);return this._mutations=this._mutations.concat(new Wh(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hl(n,e){if((n=(0,Mt.m9)(n)).firestore!==e)throw new Te(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rne extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Su(t)}get(t){const r=hl(t,this._firestore),i=new Fte(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ze();const o=s[0];if(o.isFoundDocument())return new wm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new wm(this._firestore,i,r._key,null,r.converter);throw Ze()})}set(t,r,i){const s=hl(t,this._firestore),o=lI(s.converter,r,i),a=nI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=hl(t,this._firestore);let a;return a="string"==typeof(r=(0,Mt.m9)(r))||r instanceof Qa?bD(this._dataReader,"Transaction.update",o._key,r,i,s):ID(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=hl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hl(e,this._firestore),r=new dl(this._firestore);return super.get(e).then(i=>new Ya(this._firestore,r,t._key,i._document,new Ru(!1,!1),t.converter))}}function MD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XU(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function JU(){if(!function FX(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Nh=vr.SDK_VERSION,(0,vr._registerComponent)(new dE.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Rn(new oX(r.getProvider("auth-internal")),new lX(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(EL,"4.6.3",e),(0,vr.registerVersion)(EL,"4.6.3","esm2017")}();class Dm{constructor(e){this._delegate=e}static fromBase64String(e){return JU(),new Dm(aa.fromBase64String(e))}static fromUint8Array(e){return XU(),new Dm(aa.fromUint8Array(e))}toBase64(){return JU(),this._delegate.toBase64()}toUint8Array(){return XU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RD(n){return function fne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pne{enableIndexedDbPersistence(e,t){return function pte(n,e){RU(n=qt(n,Rn));const t=or(n);if(t._uninitializedComponentsProvider)throw new Te(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new hf;return MU(t,i,new sD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gte(n){RU(n=qt(n,Rn));const e=or(n);if(e._uninitializedComponentsProvider)throw new Te(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new hf;return MU(e,r,new uU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mte(n){if(n._initialized&&!n._terminated)throw new Te(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(i){if(!ta.D())return Promise.resolve();const s=i+"main";yield ta.delete(s)}),function r(i){return t.apply(this,arguments)})(KC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){CU(this._delegate,e,t,r)}enableNetwork(){return function yte(n){return function Xee(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!0),function(i){const s=Ve(i);return s.M_.delete(0),_m(s)}(t)}))}(or(n=qt(n,Rn)))}(this._delegate)}disableNetwork(){return function vte(n){return function Jee(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(s){const o=Ve(s);o.M_.add(0),yield nf(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(or(n=qt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,EU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _te(n){return function(t){const r=new ii;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function kee(n,e){return HA.apply(this,arguments)}(yield hD(t),r)})),r.promise}(or(n=qt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function Wte(n,e){return function rte(n,e){const t=new ZE(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield pf(n),s=t,Ve(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield pf(n),s=t,void Ve(i).z_.delete(s);var i,s}))}}(or(n=qt(n,Rn)),mD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _f(this,AU(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new lo(this,JE(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function lte(n,e){if(n=qt(n,vm),pD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wi(n,null,(r=e,new qa(en.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ine(n,e,t){n=qt(n,Rn);const r=Object.assign(Object.assign({},nne),t);return function(s){if(s.maxAttempts<1)throw new Te(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new ii;return s.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const l=yield function gU(n){return YE(n).then(e=>e.datastore)}(s);new Qee(s.asyncQueue,l,a,o,c).Xa()})),c.promise}(or(n),i=>e(new rne(n,i)),r)}(this._delegate,t=>e(new tB(this,t)))}batch(){return or(this._delegate),new nB(new KU(this._delegate,e=>mf(this._delegate,e)))}loadBundle(e){return function Ete(n,e){const t=or(n=qt(n,Rn)),r=new dte;return function ite(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?OV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return dU(f,m);if(f instanceof ArrayBuffer)return dU(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Kee(f,a);var f}(t,mm(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Gee(n,e,t){const r=Ve(n);var i;(i=(0,_e.Z)(function*(o,a,c){try{const l=yield a.getMetadata();if(yield function(T,N){const O=Ve(T),W=Or(N.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",j=>O.$r.getBundleMetadata(j,N.id)).then(j=>!!j&&j.createTime.compareTo(W)>=0)}(o.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=l).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(eU(l));const f=new wee(l,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield Za(o,y.ca,void 0),yield function(T,N){const O=Ve(T);return O.persistence.runTransaction("Save bundle","readwrite",W=>O.$r.saveBundleMetadata(W,N))}(o.localStore,l),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return Ts("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield hD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ite(n,e){return function ste(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(r,i){const s=Ve(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield ff(n),e)}))}(or(n=qt(n,Rn)),e).then(t=>t?new wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class dI extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dm(new aa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lo.forKey(t,this.firestore,null)}}class tB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}get(e){const t=xu(e);return this._delegate.get(t).then(r=>new Sm(this._firestore,new Ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=xu(e);return r?(MD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=xu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=xu(e);return this._delegate.delete(t),this}}class nB{constructor(e){this._delegate=e}set(e,t,r){const i=xu(e);return r?(MD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=xu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=xu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Am(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Pu(e,new dI(e),t),i.set(t,s)),s}}Pu.INSTANCES=new WeakMap;class lo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lo(t,new Yn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new lo(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _f(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _f(this.firestore,AU(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Yn&&DU(this._delegate,e)}set(e,t){t=MD("DocumentReference.set",t);try{return t?qU(this._delegate,e,t):qU(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GU(this._delegate,e):GU(this._delegate,e,t,...r)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qte(n){return mf(qt(n.firestore,Rn),[new Wh(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=rB(e),r=iB(e,i=>new Sm(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Bte(n){n=qt(n,Yn);const e=qt(n.firestore,Rn),t=or(e),r=new dl(e);return function ete(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Ve(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Te(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=cf(c,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ff(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ya(e,r,n._key,i,new Ru(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function jte(n){n=qt(n,Yn);const e=qt(n.firestore,Rn);return mU(or(e),n._key,{source:"server"}).then(t=>DD(e,n,t))}(this._delegate):function Ute(n){n=qt(n,Yn);const e=qt(n.firestore,Rn);return mU(or(e),n._key).then(t=>DD(e,n,t))}(this._delegate),t.then(r=>new Sm(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lo(this.firestore,this._delegate.withConverter(e?Pu.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function rB(n){for(const e of n)if("object"==typeof e&&!RD(e))return e;return{}}function iB(n,e){var t,r;let i;return i=RD(n[0])?n[0]:RD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Sm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HU(this._delegate,e._delegate)}}class Mm extends Sm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function rX(n,e){n||Ze()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}where(e,t,r){try{return new rs(this.firestore,ll(this._delegate,function Ste(n,e,t){const r=e,i=sI("where",n);return Cm._create(i,r,t)}(e,t,r)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,ll(this._delegate,function Mte(n,e="asc"){const t=e,r=sI("orderBy",n);return CD._create(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,ll(this._delegate,function Rte(n){return wU("limit",n),oI._create("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,ll(this._delegate,function Pte(n){return wU("limitToLast",n),oI._create("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,ll(this._delegate,function xte(...n){return aI._create("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,ll(this._delegate,function Nte(...n){return aI._create("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,ll(this._delegate,function Ote(...n){return cI._create("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,ll(this._delegate,function kte(...n){return cI._create("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return gD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zte(n){n=qt(n,wi);const e=qt(n.firestore,Rn),t=or(e),r=new dl(e);return function tte(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,o,a){try{const c=yield jE(s,o,!0),l=new rU(o,c.hs),f=l.da(c.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const l=cf(c,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ff(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ul(e,r,n,i))}(this._delegate):"server"===e?.source?function Hte(n){n=qt(n,wi);const e=qt(n.firestore,Rn),t=or(e),r=new dl(e);return _U(t,n._query,{source:"server"}).then(i=>new ul(e,r,n,i))}(this._delegate):function $te(n){n=qt(n,wi);const e=qt(n.firestore,Rn),t=or(e),r=new dl(e);return VU(n._query),_U(t,n._query).then(i=>new ul(e,r,n,i))}(this._delegate),t.then(r=>new PD(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rB(e),r=iB(e,i=>new PD(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WU(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Pu.getInstance(this.firestore,e):null))}}class mne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mne(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Mm(this._firestore,r))})}isEqual(e){return HU(this._delegate,e._delegate)}}class _f extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lo(this.firestore,e):null}doc(e){try{return new lo(this.firestore,void 0===e?JE(this._delegate):JE(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function Gte(n,e){const t=qt(n.firestore,Rn),r=JE(n),i=lI(n.converter,e);return mf(t,[nI(Su(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lo(this.firestore,t))}isEqual(e){return DU(this._delegate,e._delegate)}withConverter(e){return new _f(this.firestore,this._delegate.withConverter(e?Pu.getInstance(this.firestore,e):null))}}function xu(n){return qt(n,Yn)}class xD{constructor(...e){this._delegate=new Qa(...e)}static documentId(){return new xD(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function one(){return new _D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nu(e)}static delete(){const e=function sne(){return new Im("deleteField")}();return e._methodName="FieldValue.delete",new Nu(e)}static arrayUnion(...e){const t=function ane(...n){return new yD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Nu(t)}static arrayRemove(...e){const t=function cne(...n){return new vD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Nu(t)}static increment(e){const t=function lne(n){return new ED("increment",n)}(e);return t._methodName="FieldValue.increment",new Nu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _ne={Firestore:eB,GeoPoint:eI,Timestamp:ir,Blob:Dm,Transaction:tB,WriteBatch:nB,DocumentReference:lo,DocumentSnapshot:Sm,Query:rs,QueryDocumentSnapshot:Mm,QuerySnapshot:PD,CollectionReference:_f,FieldPath:xD,FieldValue:Nu,setLogLevel:function gne(n){!function nX(n){Kc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sB(n,e){return function Ene(n,e=AT){return new Et(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ND(n,e){return sB(n,e).pipe(Me(t=>({payload:t,type:"query"})))}!function vne(n){(function yne(n,e){n.INTERNAL.registerComponent(new dE.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_ne)))})(n,(e,t)=>new eB(e,t,new pne)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Jo.Z);class oB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=hB(r,t);return new lB(i,s,this.afs)}snapshotChanges(){return function Ine(n,e){return sB(n,e).pipe(_g(void 0),uC(),Me(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return this.snapshotChanges().pipe(Me(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(ts)}}function hI(n,e){return ND(n,e).pipe(_g(void 0),uC(),Me(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function aB(n,e,t){return hI(n,t).pipe(Hv((r,i)=>function bne(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function wne(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),pt(),Me(r=>r.map(i=>({type:i.type,payload:i}))))}function OD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function cB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lB{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(_g(void 0),uC(),ws(([r,i])=>i.length>0||!r),Me(([,r])=>r),ts)}auditTrail(e){return this.stateChanges(e).pipe(Hv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cB(e);return aB(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return ND(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ts)}get(e){return b(this.query.get(e)).pipe(ts)}add(e){return this.ref.add(e)}doc(e){return new oB(this.ref.doc(e),this.afs)}}class Tne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hI(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.filter(r=>e.indexOf(r.type)>-1)),ws(t=>t.length>0),ts):hI(this.query,this.afs.schedulers.outsideAngular).pipe(ts)}auditTrail(e){return this.stateChanges(e).pipe(Hv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cB(e);return aB(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return ND(this.query,this.afs.schedulers.outsideAngular).pipe(Me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ts)}get(e){return b(this.query.get(e)).pipe(ts)}}const uB=new Ie("angularfire2.enableFirestorePersistence"),dB=new Ie("angularfire2.firestore.persistenceSettings"),Cne=new Ie("angularfire2.firestore.settings"),Ane=new Ie("angularfire2.firestore.use-emulator");function hB(n,e=(t=>t)){return{query:e(n),ref:n}}let Ou=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,f,m,y,I,T,N,O,W,j){this.schedulers=c;const X=lE(t,a,r),oe=f;m&&lL(X,a,y,T,N,O,I,W),[this.firestore,this.persistenceEnabled$]=uE(`${X.name}.firestore`,"AngularFirestore",X.name,()=>{const De=a.runOutsideAngular(()=>X.firestore());if(s&&De.settings(s),oe&&De.useEmulator(...oe),i&&!Sv(o)){const je=()=>{try{return b(De.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),F(!1)}};return[De,a.runOutsideAngular(je)]}return[De,F(!1)]},[s,oe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=hB(i,r),a=this.schedulers.ngZone.run(()=>s);return new lB(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Tne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oB(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(fe(Ug),fe(Bg,8),fe(uB,8),fe(Cne,8),fe(ks),fe(Wt),fe(uu),fe(dB,8),fe(Ane,8),fe(uL,8),fe(rL,8),fe(iL,8),fe(sL,8),fe(oL,8),fe(aL,8),fe(cL,8),fe(Vg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Dne=(()=>{class n{constructor(){Jo.Z.registerVersion("angularfire",Wc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uB,useValue:!0},{provide:dB,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[Ou]})}return n})(),kD=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}addEvent(t){const r=this.firestore.createId();return this.firestore.collection("Events").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ou))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fI=(()=>{class n{constructor(t){this.firestore=t}getOffers(){return this.firestore.collection("Offers",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Me(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getOffersWithId(){return this.firestore.collection("Offers",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Me(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}addOffer(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Offers").doc(t.id).set(t)}getOffer(t){return this.firestore.collection("Offers").doc(t).valueChanges()}updateOffer(t,r){return this.firestore.collection("Offers").doc(t).update(r)}getAllOfferTypes(){return this.firestore.collection("OfferTypes").valueChanges().pipe(Me(t=>{const r=t.map(i=>i.OfferType);return Array.from(new Set(r))}))}getOfferById(t){return this.firestore.collection("Offers").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ou))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sne(n,e){1&n&&($(0,"span",12),G(1,"\u2605"),k())}function Mne(n,e){1&n&&($(0,"p"),G(1,"Oferta a expirat"),k())}function Rne(n,e){1&n&&($(0,"p"),G(1,"Oferta este valabil\u0101"),k())}function Pne(n,e){if(1&n&&($(0,"div")(1,"a",13),lt(2,"img",14),k(),lt(3,"br"),G(4," Facebook"),k()),2&n){const t=Na();ye(1),Ls("href",t.offer.Facebook,Kn)}}function xne(n,e){if(1&n&&($(0,"div")(1,"a",13),lt(2,"img",15),k(),lt(3,"br"),G(4," Instagram"),k()),2&n){const t=Na();ye(1),Go("href","https://www.instagram.com/",t.offer.Instagram,"",Kn)}}function Nne(n,e){if(1&n&&($(0,"div")(1,"a",16),lt(2,"img",17),k(),lt(3,"br"),G(4," Email"),k()),2&n){const t=Na();ye(1),Go("href","mailto:",t.offer.Email,"",Kn)}}function One(n,e){if(1&n&&($(0,"div")(1,"a",13),lt(2,"img",18),k(),lt(3,"br"),G(4," Website"),k()),2&n){const t=Na();ye(1),Ls("href",t.offer.Website,Kn)}}let fB=(()=>{class n{constructor(t){this.router=t,this.currentImageIndex=1}ngOnInit(){this.offer.Image1||(this.offer.Image1="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image2||(this.offer.Image2="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image3||(this.offer.Image3="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image4||(this.offer.Image4="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image5||(this.offer.Image5="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.startImageCarousel()}startImageCarousel(){setInterval(()=>{this.currentImageIndex=this.currentImageIndex%5+1},3e3)}nextImage(){this.currentImageIndex=this.currentImageIndex%5+1}prevImage(){this.currentImageIndex=(this.currentImageIndex-2+5)%5+1}navigateToDetails(){console.log("Navigating to details:",this.offer.id),this.router.navigate(["/offers",this.offer.id])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-offer-card"]],inputs:{offer:"offer"},decls:56,vars:21,consts:[[1,"offer-card"],[1,"carousel"],[1,"prev",3,"click"],[1,"next",3,"click"],[1,"image-container"],[3,"src","alt"],[1,"offer-details"],["class","sponsor-icon",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"offer-footer"],[1,"social-icons"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"button",2),At("click",function(){return i.prevImage()}),G(3,"\u276e"),k(),$(4,"button",3),At("click",function(){return i.nextImage()}),G(5,"\u276f"),k(),$(6,"div",4),lt(7,"img",5),k()(),$(8,"div",6)(9,"h3"),G(10),k(),Nn(11,Sne,2,0,"span",7),$(12,"p")(13,"strong"),G(14,"Compania:"),k(),G(15),k(),$(16,"p")(17,"strong"),G(18,"Persona de contact:"),k(),G(19),k(),lt(20,"hr"),$(21,"p")(22,"strong"),G(23,"Numar de Tel:"),k(),G(24),k(),$(25,"p")(26,"strong"),G(27,"Locatie:"),k(),G(28),k(),$(29,"p")(30,"strong"),G(31,"Descriiere:"),k(),G(32),k(),$(33,"p")(34,"strong"),G(35,"Pret:"),k(),G(36),k(),$(37,"p")(38,"strong"),G(39,"Tip de ofert\u0101:"),k(),G(40),k(),$(41,"p")(42,"strong"),G(43,"Creata pe data de:"),k(),G(44),gh(45,"date"),k(),Nn(46,Mne,2,0,"p",8),Nn(47,Rne,2,0,"p",8),$(48,"button",9),At("click",function(){return i.navigateToDetails()}),G(49,"View Details"),k()(),$(50,"div",10)(51,"div",11),Nn(52,Pne,5,1,"div",8),Nn(53,xne,5,1,"div",8),Nn(54,Nne,5,1,"div",8),Nn(55,One,5,1,"div",8),k()()()),2&r&&(ye(7),Go("alt","Image ",i.currentImageIndex,""),tt("src",i.offer["Image"+i.currentImageIndex],Kn),ye(3),Ut(i.offer.Title),ye(1),tt("ngIf",i.offer.Community_Sponsor),ye(4),Pr(" ",i.offer.Company_Name,""),ye(4),Pr(" ",i.offer.Contact_Name,""),ye(5),Pr(" ",i.offer.Phone_Number,""),ye(4),Pr(" ",i.offer.Location,""),ye(4),Ut(i.offer.Description),ye(4),Ut(i.offer.Price),ye(4),Ut(i.offer.OfferType),ye(4),Pr(" ",ig(45,18,i.offer.Date_Created,"shortDate"),""),ye(2),tt("ngIf",i.offer.Filled),ye(1),tt("ngIf",!i.offer.Filled),ye(5),tt("ngIf",i.offer.Facebook),ye(1),tt("ngIf",i.offer.Instagram),ye(1),tt("ngIf",i.offer.Email),ye(1),tt("ngIf",i.offer.Website))},dependencies:[dg,hg],styles:[".offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.image-container[_ngcontent-%COMP%]{width:400px;height:250px;overflow:hidden;display:flex;justify-content:center;align-items:center}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}"]})}return n})();function kne(n,e){1&n&&($(0,"div",23)(1,"span",24),G(2,"Sponsor al Comunitatii"),k(),$(3,"span",25),G(4,"\u2605"),k()())}function Fne(n,e){if(1&n&&($(0,"div",15)(1,"div",16)(2,"div",17),G(3),k(),$(4,"div",18),lt(5,"img",19),k(),$(6,"div",20),G(7),k(),$(8,"div",20),G(9),k(),$(10,"div",20),G(11),k(),$(12,"div",20),G(13),k(),$(14,"div",20)(15,"a",21),G(16),k()(),$(17,"div",20)(18,"a",21),G(19),k()(),$(20,"div",20),G(21),k()(),Nn(22,kne,5,0,"div",22),k()),2&n){const t=e.$implicit;ye(3),Ut(t.Name),ye(2),Ls("src",t.Poster_Image,Kn),ye(2),Ut(t.Location),ye(2),Ut(t.Event_date),ye(2),Ut(t.Price),ye(2),Ut(t.Phone_Number),ye(2),Go("href","mailto:",t.Contact,"",Kn),ye(1),Ut(t.Contact),ye(2),Ls("href",t.Website,Kn),ye(1),Ut(t.Website),ye(2),Ut(t.Description),ye(1),tt("ngIf",t.Community_Sponsor)}}function Lne(n,e){1&n&&lt(0,"app-offer-card",26),2&n&&tt("offer",e.$implicit)}function Vne(n,e){if(1&n&&($(0,"li",27)(1,"a",28),G(2),k()()),2&n){const t=e.$implicit;ye(1),Ls("href",t.url,Kn),ye(1),Ut(t.name)}}let Une=(()=>{class n{constructor(t,r,i){this.eventService=t,this.offersService=r,this.router=i,this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"},{name:"Biserica Sfintii Trei Ierarhi",url:"http://www.ortodox.org/"}],this.events=[],this.offers=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t}),this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(kD),pe(fI),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-home"]],decls:48,vars:3,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"],[3,"offer"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),G(4,"Bine ati venit in comunitatea "),$(5,"a",3),G(6,"Romani in Seattle"),k()()()(),lt(7,"p"),$(8,"div",4)(9,"div",5)(10,"h2"),G(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),k(),$(12,"p"),G(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),k()()(),$(14,"div",4)(15,"div",6)(16,"h2"),G(17,"Evenimente"),k(),$(18,"p"),G(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),k()(),$(20,"div",6)(21,"h2"),G(22,"Servicii"),k(),$(23,"p"),G(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),k()(),$(25,"div",6)(26,"h2"),G(27,"Oportunit\u0103\u021bi"),k(),$(28,"p"),G(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),k()(),$(30,"div",6)(31,"h2"),G(32,"Resurse"),k(),$(33,"p"),G(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),k()()(),$(35,"h1"),G(36,"Evenimente"),k(),$(37,"div",7),Nn(38,Fne,23,12,"div",8),k(),$(39,"h1"),G(40,"Oferte"),k(),$(41,"div",9),Nn(42,Lne,1,1,"app-offer-card",10),k(),$(43,"section",11)(44,"h2",12),G(45,"Resurse utile pentru comunitate"),k(),$(46,"ul",13),Nn(47,Vne,3,2,"li",14),k()()()),2&r&&(ye(38),tt("ngForOf",i.events),ye(4),tt("ngForOf",i.offers),ye(5),tt("ngForOf",i.resourceLinks))},dependencies:[Qo,dg,fB],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.offers[_ngcontent-%COMP%], .offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative;text-align:left}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.image-container[_ngcontent-%COMP%]{width:400px;height:250px;overflow:hidden;display:flex;justify-content:center;align-items:center}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}"]})}return n})(),pI=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Me(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getService(t){return this.firestore.collection("Services").doc(t).valueChanges()}getServiceById(t){return this.firestore.doc(`services/${t}`).valueChanges().pipe(Me(r=>r?{id:t,...r}:void 0))}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe(Me(t=>{const r=t.map(i=>i.Name);return Array.from(new Set(r))}))}addServiceWithDate(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Services").doc(t.id).set(t)}addService(t){const r=this.firestore.createId();return this.firestore.collection("Services").doc(r).set(t),this.firestore.doc(`Services/${r}`).valueChanges().pipe(Me(i=>i?{id:r,...i}:void 0))}updateService(t,r){return console.log("Update Service: "+t),console.log(r),this.firestore.collection("Services").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ou))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pB=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ra),pe(Es))};static#t=this.\u0275dir=et({type:n})}return n})(),ku=(()=>{class n extends pB{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,features:[bn]})}return n})();const ca=new Ie("NgValueAccessor"),jne={provide:ca,useExisting:ln(()=>Fu),multi:!0},zne=new Ie("CompositionEventMode");let Fu=(()=>{class n extends pB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $ne(){const n=Uc()?Uc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ra),pe(Es),pe(zne,8))};static#t=this.\u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&At("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[nr([jne]),bn]})}return n})();function fl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function mB(n){return null!=n&&"number"==typeof n.length}const Ui=new Ie("NgValidators"),pl=new Ie("NgAsyncValidators"),Hne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ir{static min(e){return function _B(n){return e=>{if(fl(e.value)||fl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function yB(n){return e=>{if(fl(e.value)||fl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return vB(e)}static requiredTrue(e){return function EB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function IB(n){return fl(n.value)||Hne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function bB(n){return e=>fl(e.value)||!mB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function wB(n){return e=>mB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function TB(n){if(!n)return gI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(fl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return RB(e)}static composeAsync(e){return PB(e)}}function vB(n){return fl(n.value)?{required:!0}:null}function gI(n){return null}function CB(n){return null!=n}function AB(n){return Qp(n)?b(n):n}function DB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function SB(n,e){return e.map(t=>t(n))}function MB(n){return n.map(e=>function qne(n){return!n.validate}(e)?e:t=>e.validate(t))}function RB(n){if(!n)return null;const e=n.filter(CB);return 0==e.length?null:function(t){return DB(SB(t,e))}}function FD(n){return null!=n?RB(MB(n)):null}function PB(n){if(!n)return null;const e=n.filter(CB);return 0==e.length?null:function(t){return MT(SB(t,e).map(AB)).pipe(Me(DB))}}function LD(n){return null!=n?PB(MB(n)):null}function xB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NB(n){return n._rawValidators}function OB(n){return n._rawAsyncValidators}function VD(n){return n?Array.isArray(n)?n:[n]:[]}function mI(n,e){return Array.isArray(n)?n.includes(e):n===e}function kB(n,e){const t=VD(e);return VD(n).forEach(i=>{mI(t,i)||t.push(i)}),t}function FB(n,e){return VD(e).filter(t=>!mI(n,t))}class LB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class is extends LB{get formDirective(){return null}get path(){return null}}class gl extends LB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yf=(()=>{class n extends VB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(gl,2))};static#t=this.\u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&hh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}return n})(),Rm=(()=>{class n extends VB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(is,10))};static#t=this.\u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&hh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}return n})();const Pm="VALID",yI="INVALID",vf="PENDING",xm="DISABLED";function jD(n){return(vI(n)?n.validators:n)||null}function $D(n,e){return(vI(e)?e.asyncValidators:n)||null}function vI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function BB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[t])throw new ue(1001,"")}function jB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new ue(1002,"")})}class EI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Pm}get invalid(){return this.status===yI}get pending(){return this.status==vf}get disabled(){return this.status===xm}get enabled(){return this.status!==xm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FB(e,this._rawAsyncValidators))}hasValidator(e){return mI(this._rawValidators,e)}hasAsyncValidator(e){return mI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pm||this.status===vf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xm:Pm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vf,this._hasOwnPendingAsyncValidator=!0;const t=AB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new mr,this.statusChanges=new mr}_calculateStatus(){return this._allControlsDisabled()?xm:this.errors?yI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vf)?vf:this._anyControlsHaveStatus(yI)?yI:Pm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Zne(n){return Array.isArray(n)?FD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Qne(n){return Array.isArray(n)?LD(n):n||null}(this._rawAsyncValidators)}}class Nm extends EI{constructor(e,t,r){super(jD(t),$D(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jB(this,0,e),Object.keys(e).forEach(r=>{BB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class $B extends Nm{}const Lu=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>Om}),Om="always";function II(n,e){return[...e.path,n]}function km(n,e,t=Om){zD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Xne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&zB(n,e)})}(n,e),function ere(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Jne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&zB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Yne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function bI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),TI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zD(n,e){const t=NB(n);null!==e.validator?n.setValidators(xB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=OB(n);null!==e.asyncValidator?n.setAsyncValidators(xB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wI(e._rawValidators,i),wI(e._rawAsyncValidators,i)}function TI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=NB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=OB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return wI(e._rawValidators,r),wI(e._rawAsyncValidators,r),t}function zB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HB(n,e){zD(n,e)}function qD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function qB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function GD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fu?t=s:function rre(n){return Object.getPrototypeOf(n.constructor)===ku}(s)?r=s:i=s}),i||r||t||null}const sre={provide:is,useExisting:ln(()=>CI)},Fm=(()=>Promise.resolve())();let CI=(()=>{class n extends is{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new mr,this.form=new Nm({},FD(t),LD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fm.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),km(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fm.then(()=>{const r=this._findContainer(t.path),i=new Nm({});HB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fm.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,qB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ui,10),pe(pl,10),pe(Lu,8))};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&At("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[nr([sre]),bn]})}return n})();function GB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function WB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Lm=class extends EI{constructor(e=null,t,r){super(jD(t),$D(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=WB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){WB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cre={provide:gl,useExisting:ln(()=>AI)},QB=(()=>Promise.resolve())();let AI=(()=>{class n extends gl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Lm,this._registered=!1,this.name="",this.update=new mr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=GD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),qD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){km(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){QB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&yh(r);QB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?II(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(pe(is,9),pe(Ui,10),pe(pl,10),pe(ca,10),pe(fv,8),pe(Lu,8))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[nr([cre]),bn,_s]})}return n})(),Vm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),XB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({})}return n})();const WD=new Ie("NgModelWithFormControlWarning"),pre={provide:is,useExisting:ln(()=>Ef)};let Ef=(()=>{class n extends is{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new mr,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(TI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return km(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){bI(t.control||null,t,!1),function ire(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,qB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(bI(r||null,t),(n=>n instanceof Lm)(i)&&(km(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);HB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function tre(n,e){return TI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zD(this.form,this),this._oldForm&&TI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ui,10),pe(pl,10),pe(Lu,8))};static#t=this.\u0275dir=et({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&At("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[nr([pre]),bn,_s]})}return n})();const _re={provide:gl,useExisting:ln(()=>Um)};let Um=(()=>{class n extends gl{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new mr,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=GD(0,s)}ngOnChanges(t){this._added||this._setUpControl(),qD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return II(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(pe(is,13),pe(Ui,10),pe(pl,10),pe(ca,10),pe(WD,8))};static#n=this.\u0275dir=et({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[nr([_re]),bn,_s]})}return n})();const yre={provide:ca,useExisting:ln(()=>Vu),multi:!0};function rj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Vu=(()=>{class n extends ku{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=rj(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function vre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&At("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[nr([yre]),bn]})}return n})(),Bm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(rj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Es),pe(Ra),pe(Vu,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Ere={provide:ca,useExisting:ln(()=>QD),multi:!0};function ij(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let QD=(()=>{class n extends ku{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Ire(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&At("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[nr([Ere]),bn]})}return n})(),jm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Es),pe(Ra),pe(QD,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Uu=(()=>{class n{constructor(){this._validator=gI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,features:[_s]})}return n})();const Tre={provide:Ui,useExisting:ln(()=>Bu),multi:!0};let Bu=(()=>{class n extends Uu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=yh,this.createValidator=t=>vB}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Hr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&qo("required",i._enabled?"":null)},inputs:{required:"required"},features:[nr([Tre]),bn]})}return n})(),pj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[XB]})}return n})();class gj extends EI{constructor(e,t,r){super(jD(t),$D(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jB(this,0,e),e.forEach((r,i)=>{BB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function mj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let DI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return mj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Nm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new $B(i,r)}control(t,r,i){let s={};return this.useNonNullable?(mj(r)?s=r:(s.validators=r,s.asyncValidators=i),new Lm(t,{...s,nonNullable:!0})):new Lm(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new gj(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Lm||t instanceof EI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lu,useValue:t.callSetDisabledState??Om}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[pj]})}return n})(),Pre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Lu,useValue:t.callSetDisabledState??Om}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[pj]})}return n})();function xre(n,e){1&n&&($(0,"span",14),G(1,"\u2605"),k())}function Nre(n,e){if(1&n&&($(0,"div")(1,"a",15),lt(2,"img",16),k(),lt(3,"br"),G(4," Facebook"),k()),2&n){const t=Na();ye(1),Ls("href",t.svc.Facebook,Kn)}}function Ore(n,e){if(1&n&&($(0,"div")(1,"a",15),lt(2,"img",17),k(),lt(3,"br"),G(4," Instagram"),k()),2&n){const t=Na();ye(1),Go("href","https://www.instagram.com/",t.svc.Instagram,"",Kn)}}function kre(n,e){if(1&n&&($(0,"div")(1,"a",18),lt(2,"img",19),k(),lt(3,"br"),G(4," Email"),k()),2&n){const t=Na();ye(1),Go("href","mailto:",t.svc.Email,"",Kn)}}function Fre(n,e){if(1&n&&($(0,"div")(1,"a",15),lt(2,"img",20),k(),lt(3,"br"),G(4," Website"),k()),2&n){const t=Na();ye(1),Ls("href",t.svc.Website,Kn)}}let Lre=(()=>{class n{constructor(t){this.router=t}viewDetails(){this.router.navigate(["/services",this.svc.id])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-service-card"]],inputs:{svc:"svc"},decls:22,vars:11,consts:[[1,"service-card"],[1,"service-card-image-container"],[1,"service-card-image",3,"src","alt"],[1,"service-card-content"],[1,"card-header"],[1,"card-title"],["class","sponsor-icon",4,"ngIf"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-description"],[3,"click"],[1,"card-footer"],[1,"social-icons"],[4,"ngIf"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1),lt(2,"img",2),k(),$(3,"div",3)(4,"div",4)(5,"div",5),G(6),Nn(7,xre,2,0,"span",6),k(),$(8,"div",7),G(9),k(),$(10,"div",8),G(11),k(),$(12,"div",9),G(13),k(),$(14,"button",10),At("click",function(){return i.viewDetails()}),G(15,"View Details"),k()(),$(16,"div",11)(17,"div",12),Nn(18,Nre,5,1,"div",13),Nn(19,Ore,5,1,"div",13),Nn(20,kre,5,1,"div",13),Nn(21,Fre,5,1,"div",13),k()()()()),2&r&&(ye(2),Ls("alt",i.svc.Name),tt("src",i.svc.Image,Kn),ye(4),Ut(i.svc.Name),ye(1),tt("ngIf",i.svc.Community_Sponsor),ye(2),Ut(i.svc.Service_Type),ye(2),Ut(i.svc.Phone_Number),ye(2),Ut(i.svc.Description),ye(5),tt("ngIf",i.svc.Facebook),ye(1),tt("ngIf",i.svc.Instagram),ye(1),tt("ngIf",i.svc.Email),ye(1),tt("ngIf",i.svc.Website))},dependencies:[dg],styles:[".service-card[_ngcontent-%COMP%]{background-color:transparent;width:400px;min-height:500px;display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;box-shadow:0 4px 8px #00000080;margin:10px;padding:40px;box-sizing:border-box;position:relative}.service-card-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:15px}.service-card-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #ddd}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold;font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:1rem;color:#666;margin-top:4px}.card-description[_ngcontent-%COMP%]{text-align:left;font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;color:#666;margin-top:4px}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.service-card-front[_ngcontent-%COMP%]{background-color:#fff;color:#000}.service-card-content[_ngcontent-%COMP%]{padding:0}.service-date[_ngcontent-%COMP%]{font-size:12px;color:#f1c40f}.service-footer[_ngcontent-%COMP%]{margin-top:10px}.featured[_ngcontent-%COMP%]{font-weight:700;color:#f39c12}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}#browser-icon[_ngcontent-%COMP%]{fill:red;stroke:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.editButton[_ngcontent-%COMP%]{visibility:hidden}"]})}return n})();function Vre(n,e){if(1&n&&($(0,"option",14),G(1),k()),2&n){const t=e.$implicit;tt("value",t),ye(1),Ut(t)}}function Ure(n,e){1&n&&lt(0,"app-service-card",15),2&n&&tt("svc",e.$implicit)}let Bre=(()=>{class n{constructor(t,r,i){this.servicesService=t,this.route=r,this.router=i,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedServiceType=t.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}navigateToEditService(t){this.router.navigate(["/edit-service",t])}handleChange(t){const{target:r}=t;return r&&console.log(r.value),r.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(t){console.log("Filter changed:",t),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:t},queryParamsHandling:"merge"}),this.filterServices(t)}filterServices(t){console.log("Filter Serices: "+t),this.fetchServiceTypes(),t&&""!==t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(t=>t.Service_Type))]}shareLink(){const r=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(r?"?"+r:"")).then(()=>{alert("Link copied to clipboard!")},s=>{console.error("Could not copy text: ",s)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(pI),pe(Co),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],[3,"svc",4,"ngFor","ngForOf"],[3,"value"],[3,"svc"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3,"Lista de Servicii"),k()(),$(4,"div",2)(5,"h2"),G(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),k()()(),$(7,"div",3)(8,"div",4)(9,"label",5),G(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),k()(),$(11,"div",4)(12,"select",6),At("change",function(o){return i.onFilterChange(i.handleChange(o))})("ngModelChange",function(o){return i.selectedServiceType=o}),$(13,"option",7),G(14,"Toate serviciile"),k(),Nn(15,Vre,2,2,"option",8),k()(),$(16,"div",4)(17,"button",9),At("click",function(){return i.navigateToAddService()}),G(18,"Adaugati un Serviciu"),k()(),$(19,"button",10),At("click",function(){return i.shareLink()}),lt(20,"i",11),G(21," Share "),k()(),$(22,"div",12),Nn(23,Ure,1,1,"app-service-card",13),k()),2&r&&(ye(12),tt("ngModel",i.selectedServiceType),ye(3),tt("ngForOf",i.serviceTypes),ye(8),tt("ngForOf",i.filteredServices))},dependencies:[Qo,Bm,jm,Vu,yf,AI,Lre],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}"]})}return n})(),jre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-rules"]],decls:32,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","#",1,"cta-button"]],template:function(r,i){1&r&&($(0,"div",0),lt(1,"div",1),$(2,"div",2)(3,"h1"),G(4,"Regulile \u0219i Reglement\u0103rile"),k(),$(5,"p"),G(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),k(),$(7,"a",3),G(8,"Get Started"),k()()(),$(9,"h2"),G(10,"Regulile \u0219i Reglement\u0103rile"),k(),$(11,"ul")(12,"li"),G(13,"Nu este permis\u0103 nicio form\u0103 de publicitate."),k(),$(14,"li"),G(15,"Respecta\u021bi to\u021bi membrii."),k(),$(16,"li"),G(17,"F\u0103r\u0103 spam."),k(),$(18,"li"),G(19,"F\u0103r\u0103 limbaj ofensator."),k(),$(20,"li"),G(21,"R\u0103m\xe2ne\u021bi la subiect."),k(),$(22,"li"),G(23,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),k(),$(24,"li"),G(25,"Folosi\u021bi un limbaj adecvat."),k(),$(26,"li"),G(27,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),k(),$(28,"li"),G(29,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),k()(),$(30,"p"),G(31,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),k())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(http://source.unsplash.com/800x600/?Seattle) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:#f60;border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}"]})}return n})();function $re(n,e){1&n&&($(0,"div",15)(1,"span",16),G(2,"Sponsor al Comunitatii"),k(),$(3,"span",17),G(4,"\u2605"),k()())}function zre(n,e){if(1&n&&($(0,"div",7)(1,"div",8)(2,"div",9),G(3),k(),$(4,"div",10),lt(5,"img",11),k(),$(6,"div",12),G(7),k(),$(8,"div",12),G(9),k(),$(10,"div",12),G(11),k(),$(12,"div",12),G(13),k(),$(14,"div",12)(15,"a",13),G(16),k()(),$(17,"div",12)(18,"a",13),G(19),k()(),$(20,"div",12),G(21),k()(),Nn(22,$re,5,0,"div",14),k()),2&n){const t=e.$implicit;ye(3),Ut(t.Name),ye(2),Ls("src",t.Poster_Image,Kn),ye(2),Ut(t.Location),ye(2),Ut(t.Event_date),ye(2),Ut(t.Price),ye(2),Ut(t.Phone_Number),ye(2),Go("href","mailto:",t.Contact,"",Kn),ye(1),Ut(t.Contact),ye(2),Ls("href",t.Website,Kn),ye(1),Ut(t.Website),ye(2),Ut(t.Description),ye(1),tt("ngIf",t.Community_Sponsor)}}let Hre=(()=>{class n{constructor(t,r){this.eventService=t,this.router=r,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(kD),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3,"Lista de Evenimente"),k()(),$(4,"div",2)(5,"h2"),G(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),k()()(),$(7,"div",3)(8,"button",4),At("click",function(){return i.navigateToAddEvent()}),G(9,"Adaugati un Eveniment"),k()(),$(10,"div",5),Nn(11,zre,23,12,"div",6),k()),2&r&&(ye(11),tt("ngForOf",i.events))},dependencies:[Qo,dg],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();function qre(n,e){1&n&&lt(0,"app-offer-card",7),2&n&&tt("offer",e.$implicit)}let Gre=(()=>{class n{constructor(t,r){this.offersService=t,this.router=r,this.offers=[]}ngOnInit(){this.offersService.getOffersWithId().subscribe(t=>{console.log(t),this.offers=t})}navigateToAddOffer(){this.router.navigate(["/add-offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(fI),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-offers"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[3,"offer"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3,"De toate pentru to\u021bi"),k()(),$(4,"div",2)(5,"h2"),G(6,"Descoperi\u021bi oferte de membrii comunit\u0103\u021bii"),k()()(),$(7,"div",3)(8,"button",4),At("click",function(){return i.navigateToAddOffer()}),G(9,"Adaugati oferte"),k()(),$(10,"div",5),Nn(11,qre,1,1,"app-offer-card",6),k()),2&r&&(ye(11),tt("ngForOf",i.offers))},dependencies:[Qo,fB],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-offer-container[_ngcontent-%COMP%], .add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offer-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offers-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.offer-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.offer-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();class Wre{constructor(){this.Name="",this.Phone_Number="",this.Email="",this.Description="",this.Website="",this.Facebook="",this.Instagram="",this.Date_Created="",this.Image=""}}class _j extends Wre{constructor(){super(...arguments),this.id=""}}const yj="firebasestorage.googleapis.com",vj="storageBucket";class pr extends Mt.ZR{constructor(e,t,r=0){super(YD(e),`Firebase Storage: ${t} (${YD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ar=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ar||{});function YD(n){return"storage/"+n}function XD(){return new pr(ar.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ej(){return new pr(ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ij(){return new pr(ar.CANCELED,"User canceled the upload/download.")}function bj(){return new pr(ar.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function If(n){return new pr(ar.INVALID_ARGUMENT,n)}function wj(){return new pr(ar.APP_DELETED,"The Firebase app was deleted.")}function Tj(n){return new pr(ar.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $m(n,e){return new pr(ar.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function zm(n){throw new pr(ar.INTERNAL_ERROR,"Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function rie(n){return new pr(ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(oe){oe.path_=decodeURIComponent(oe.path)}const m=t.replace(/[.]/g,"\\."),X=[{regex:a,indices:{bucket:1,path:3},postModify:function s(oe){"/"===oe.path.charAt(oe.path.length-1)&&(oe.path_=oe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===yj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let oe=0;oe<X.length;oe++){const De=X[oe],je=De.regex.exec(e);if(je){let V=je[De.indices.path];V||(V=""),r=new Bi(je[De.indices.bucket],V),De.postModify(r);break}}if(null==r)throw function nie(n){return new pr(ar.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class cie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SI(n){return"string"==typeof n||n instanceof String}function Cj(n){return JD()&&n instanceof Blob}function JD(){return typeof Blob<"u"}function eS(n,e,t,r){if(r<e)throw If(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw If(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Aj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var bf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(bf||{});function Dj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class pie{constructor(e,t,r,i,s,o,a,c,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function die(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=XD();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?wj():Ij():Ej())};this.canceled_?t(0,new MI(!1,null,!0)):this.backoffId_=function lie(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function f(...O){l||(l=!0,e.apply(null,O))}function m(O){i=setTimeout(()=>{i=null,n(I,c())},O)}function y(){s&&clearTimeout(s)}function I(O,...W){if(l)return void y();if(O)return y(),void f.call(null,O,...W);if(c()||o)return y(),void f.call(null,O,...W);let X;r<64&&(r*=2),1===a?(a=2,X=0):X=1e3*(r+Math.random()),m(X)}let T=!1;function N(O){T||(T=!0,y(),!l&&(null!==i?(O||(a=2),clearTimeout(i),m(0)):O||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}((r,i)=>{if(i)return void r(!1,new MI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===bf.NO_ERROR,c=s.getStatus();if(!a||Dj(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===bf.ABORT;return void r(!1,new MI(!1,null,f))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new MI(l,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function uie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class MI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Iie(...n){const e=function Eie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(JD())return new Blob(n);throw new pr(ar.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tS{constructor(e,t){this.data=e,this.contentType=t||null}}function nS(n,e){switch(n){case js.RAW:return new tS(Sj(e));case js.BASE64:case js.BASE64URL:return new tS(Mj(n,e));case js.DATA_URL:return new tS(function Cie(n){const e=new Rj(n);return e.base64?Mj(js.BASE64,e.rest):function Tie(n){let e;try{e=decodeURIComponent(n)}catch{throw $m(js.DATA_URL,"Malformed data URL.")}return Sj(e)}(e.rest)}(e),function Aie(n){return new Rj(n).contentType}(e))}throw XD()}function Sj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Mj(n,e){switch(n){case js.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw $m(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw $m(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function wie(n){if(typeof atob>"u")throw function aie(n){return new pr(ar.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:$m(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Rj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $m(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Die(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class la{constructor(e,t){let r=0,i="";Cj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Cj(this.data_)){const i=function bie(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new la(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new la(r,!0)}}static getBlob(...e){if(JD()){const t=e.map(r=>r instanceof la?r.data_:r);return new la(Iie.apply(null,t))}{const t=e.map(o=>SI(o)?nS(js.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new la(i,!0)}}uploadData(){return this.data_}}function rS(n){let e;try{e=JSON.parse(n)}catch{return null}return function fie(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Pj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Rie(n,e){return e}class ss{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Rie}}let RI=null;function Hm(){if(RI)return RI;const n=[];n.push(new ss("bucket")),n.push(new ss("generation")),n.push(new ss("metageneration")),n.push(new ss("name","fullPath",!0));const t=new ss("name");t.xform=function e(s,o){return function Pie(n){return!SI(n)||n.length<2?n:Pj(n)}(o)},n.push(t);const i=new ss("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new ss("timeCreated")),n.push(new ss("updated")),n.push(new ss("md5Hash",null,!0)),n.push(new ss("cacheControl",null,!0)),n.push(new ss("contentDisposition",null,!0)),n.push(new ss("contentEncoding",null,!0)),n.push(new ss("contentLanguage",null,!0)),n.push(new ss("contentType",null,!0)),n.push(new ss("metadata","customMetadata",!0)),RI=n,RI}function xj(n,e,t){const r=rS(e);return null===r?null:function Nie(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function xie(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function iS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Nj="prefixes",Oj="items";class ua{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function da(n){if(!n)throw XD()}function PI(n,e){return function t(r,i){const s=xj(n,i,e);return da(null!==s),s}}function wf(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function eie(){return new pr(ar.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Jre(){return new pr(ar.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Xre(n){return new pr(ar.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function tie(n){return new pr(ar.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function qm(n){const e=wf(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Yre(n){return new pr(ar.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function kj(n,e,t){const i=Xa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ua(i,"GET",PI(n,t),o);return a.errorHandler=qm(e),a}function Uie(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Xa(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new ua(a,"GET",function Lie(n,e){return function t(r,i){const s=function Fie(n,e,t){const r=rS(t);return null===r?null:function kie(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Nj])for(const i of t[Nj]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Bi(e,s));r.prefixes.push(o)}if(t[Oj])for(const i of t[Oj]){const s=n._makeStorageReference(new Bi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return da(null!==s),s}}(n,e.bucket),l);return f.urlParams=s,f.errorHandler=wf(e),f}function Lj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function zie(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{da(!1)}return da(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Wie={STATE_CHANGED:"state_changed"},os={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oS(n){switch(n){case"running":case"pausing":case"canceling":return os.RUNNING;case"paused":return os.PAUSED;case"success":return os.SUCCESS;case"canceled":return os.CANCELED;default:return os.ERROR}}class Kie{constructor(e,t,r){if(function hie(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Tf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Bj=null;class Zie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw zm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Qie extends Zie{initXhr(){this.xhr_.responseType="text"}}function Do(){return Bj?Bj():new Qie}class jj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Hm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ar.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Dj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Ej()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ar.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Hie(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=Lj(e,r,i),a={name:o.fullPath},c=Xa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=iS(o,t),T=new ua(c,"POST",function I(N){let O;sS(N);try{O=N.getResponseHeader("X-Goog-Upload-URL")}catch{da(!1)}return da(SI(O)),O},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=wf(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Do,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function qie(n,e,t,r){const c=new ua(t,"POST",function s(l){const f=sS(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{da(!1)}m||da(!1);const y=Number(m);return da(!isNaN(y)),new xI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=wf(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Do,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Gie(n,e,t,r,i,s,o,a){const c=new xI(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function sie(){return new pr(ar.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=c.total-c.current;let f=l;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":l===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(m,m+f);if(null===N)throw bj();const X=new ua(t,"POST",function O(oe,De){const je=sS(oe,["active","final"]),H=c.current+f,V=r.size();let B;return B="final"===je?PI(e,s)(oe,De):null,new xI(H,V,"final"===je,B)},e.maxUploadRetryTime);return X.headers=T,X.body=N.uploadData(),X.progressCallback=a||null,X.errorHandler=wf(n),X}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Do,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=kj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Do,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Vj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let X="";for(let oe=0;oe<2;oe++)X+=Math.random().toString().slice(2);return X}();o["Content-Type"]="multipart/related; boundary="+c;const l=Lj(e,r,i),f=iS(l,t),I=la.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw bj();const T={name:l.fullPath},N=Xa(s,n.host,n._protocol),W=n.maxUploadRetryTime,j=new ua(N,"POST",PI(n,t),W);return j.urlParams=T,j.headers=o,j.body=I.uploadData(),j.errorHandler=wf(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Do,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ij(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=oS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Kie(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(oS(this._state)){case os.SUCCESS:Tf(this._resolve.bind(null,this.snapshot))();break;case os.CANCELED:case os.ERROR:Tf(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(oS(this._state)){case os.RUNNING:case os.PAUSED:e.next&&Tf(e.next.bind(e,this.snapshot))();break;case os.SUCCESS:e.complete&&Tf(e.complete.bind(e))();break;default:e.error&&Tf(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ju{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ju(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pj(this._location.path)}get storage(){return this._service}get parent(){const e=function Sie(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new ju(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Tj(e)}}function zj(n,e,t){return aS.apply(this,arguments)}function aS(){return(aS=(0,_e.Z)(function*(n,e,t){const i=yield Hj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zj(n,e,i.nextPageToken))})).apply(this,arguments)}function Hj(n,e){null!=e&&"number"==typeof e.maxResults&&eS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Uie(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Do)}function cse(n){n._throwIfRoot("getDownloadURL");const e=function Bie(n,e,t){const i=Xa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ua(i,"GET",function Vie(n,e){return function t(r,i){const s=xj(n,i,e);return da(null!==s),function Oie(n,e,t,r){const i=rS(e);if(null===i||!SI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const m=n.fullPath;return Xa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+Aj({alt:"media",token:l})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=qm(e),a}(n.storage,n._location,Hm());return n.storage.makeRequestWithTokens(e,Do).then(t=>{if(null===t)throw function oie(){return new pr(ar.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function qj(n,e){const t=function Mie(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new ju(n.storage,r)}function Gj(n,e){if(n instanceof cS){const t=n;if(null==t._bucket)throw function iie(){return new pr(ar.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vj+"' property when initializing the app?")}();const r=new ju(t,t._bucket);return null!=e?Gj(r,e):r}return void 0!==e?qj(n,e):n}function hse(n,e){if(e&&function use(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cS)return function dse(n,e){return new ju(n,e)}(n,e);throw If("To use ref(service, url), the first argument must be a Storage instance.")}return Gj(n,e)}function Wj(n,e){const t=e?.[vj];return null==t?null:Bi.makeFromBucketSpec(t,n)}class cS{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=yj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bi.makeFromBucketSpec(i,this._host):Wj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):Wj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ju(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new cie(wj());{const o=function vie(n,e,t,r,i,s,o=!0){const a=Aj(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return function _ie(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function gie(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function mie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function yie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new pie(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Kj="@firebase/storage",Qj="storage";function Yj(n,e){return hse(n=(0,Mt.m9)(n),e)}function bse(n=(0,vr.getApp)(),e){n=(0,Mt.m9)(n);const r=(0,vr._getProvider)(n,Qj).getImmediate({identifier:e}),i=(0,Mt.P0)("storage");return i&&Xj(r,...i),r}function Xj(n,e,t,r={}){!function fse(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Mt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function wse(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cS(t,r,i,e,vr.SDK_VERSION)}!function Tse(){(0,vr._registerComponent)(new dE.wA(Qj,wse,"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(Kj,"0.12.5",""),(0,vr.registerVersion)(Kj,"0.12.5","esm2017")}();class NI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Jj{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new NI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new NI(o,this,this._ref)):{next:t.next?o=>t.next(new NI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class e${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ja(e,this._service))}get items(){return this._delegate.items.map(e=>new Ja(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ja{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ise(n,e){return qj(n,e)}(this._delegate,e);return new Ja(t,this.storage)}get root(){return new Ja(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ja(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Jj(function pse(n,e,t){return function rse(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new jj(n,new la(e),t)}(n=(0,Mt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=js.RAW,r){this._throwIfRoot("putString");const i=nS(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new Jj(new jj(this._delegate,new la(i.data,!0),s),this)}listAll(){return function yse(n){return function sse(n){const e={prefixes:[],items:[]};return zj(n,e).then(()=>e)}(n=(0,Mt.m9)(n))}(this._delegate).then(e=>new e$(e,this.storage))}list(e){return function _se(n,e){return Hj(n=(0,Mt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new e$(t,this.storage))}getMetadata(){return function gse(n){return function ose(n){n._throwIfRoot("getMetadata");const e=kj(n.storage,n._location,Hm());return n.storage.makeRequestWithTokens(e,Do)}(n=(0,Mt.m9)(n))}(this._delegate)}updateMetadata(e){return function mse(n,e){return function ase(n,e){n._throwIfRoot("updateMetadata");const t=function jie(n,e,t,r){const s=Xa(e.fullServerUrl(),n.host,n._protocol),a=iS(t,r),l=n.maxOperationRetryTime,f=new ua(s,"PATCH",PI(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=qm(e),f}(n.storage,n._location,e,Hm());return n.storage.makeRequestWithTokens(t,Do)}(n=(0,Mt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function vse(n){return cse(n=(0,Mt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ese(n){return function lse(n){n._throwIfRoot("deleteObject");const e=function $ie(n,e){const r=Xa(e.fullServerUrl(),n.host,n._protocol),a=new ua(r,"DELETE",function o(c,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=qm(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Do)}(n=(0,Mt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Tj(e)}}class t${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(n$(e))throw If("ref() expected a child path but got a URL, use refFromURL instead.");return new Ja(Yj(this._delegate,e),this)}refFromURL(e){if(!n$(e))throw If("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw If("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ja(Yj(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){Xj(this._delegate,e,t,r)}}function n$(n){return/^[A-Za-z]+:\/\//.test(n)}function Sse(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new t$(t,r)}function r$(n){const e=function Rse(n){return new Et(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(uk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Me(t=>t.bytesTransferred/t.totalBytes*100))}}function OI(n){return{getDownloadURL:()=>F(void 0).pipe(XF,$e(()=>n.getDownloadURL()),ts),getMetadata:()=>F(void 0).pipe(XF,$e(()=>n.getMetadata()),ts),delete:()=>b(n.delete()),child:e=>OI(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>r$(n.put(e,t)),putString:(e,t,r)=>r$(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function Mse(n){const e={TaskState:os,TaskEvent:Wie,StringFormat:js,Storage:t$,Reference:Ja};n.INTERNAL.registerComponent(new dE.wA("storage-compat",Sse,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Jo.Z);const Pse=new Ie("angularfire2.storageBucket"),xse=new Ie("angularfire2.storage.maxUploadRetryTime"),Nse=new Ie("angularfire2.storage.maxOperationRetryTime"),Ose=new Ie("angularfire2.storage.use-emulator");let i$=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,l,f,m){const y=lE(t,o,r);this.storage=uE(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),c&&I.setMaxUploadRetryTime(c),l&&I.setMaxOperationRetryTime(l),I},[c,l])}ref(t){return OI(this.storage.ref(t))}refFromURL(t){return OI(this.storage.refFromURL(t))}upload(t,r,i){return OI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(fe(Ug),fe(Bg,8),fe(Pse,8),fe(ks),fe(Wt),fe(uu),fe(xse,8),fe(Nse,8),fe(Ose,8),fe(Vg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),kse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=sn({})}return n})(),Fse=(()=>{class n{constructor(){Jo.Z.registerVersion("angularfire",Wc.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[i$],imports:[kse]})}return n})(),s$=(()=>{class n{constructor(t){this.storage=t}uploadImage(t,r){const i=`${r}/${t.name}`,s=this.storage.ref(i),o=this.storage.upload(i,t);return new Et(a=>{o.snapshotChanges().pipe(vg(()=>{s.getDownloadURL().subscribe(c=>{a.next(c),a.complete()})})).subscribe()})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(i$))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lse(n,e){if(1&n&&($(0,"option",26),G(1),k()),2&n){const t=e.$implicit;tt("value",t),ye(1),Ut(t)}}let o$=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.servicesService=r,this.imageUploadService=i,this.router=s,this.serviceTypes=[],this.selectedFile=null,this.serviceObj=new _j,this.serviceForm=this.fb.group({Name:["",Ir.required],Email:["",[Ir.required,Ir.email]],Phone_Number:[""],Website:[""],Facebook:[""],Instagram:[""],Image:[""],Description:[""],Date_Created:[""],Community_Sponsor:[""],Service_Type:["",Ir.required]})}ngOnInit(){this.fetchServiceTypes()}onFileSelected(t){this.selectedFile=t.target.files[0]}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&(this.serviceObj.Name=this.serviceForm.value.Name,this.serviceObj.Phone_Number=this.serviceForm.value.Phone_Number,this.serviceObj.Service_Type=this.serviceForm.value.Service_Type,this.serviceObj.Community_Sponsor=!1,this.serviceObj.Email=this.serviceForm.value.Email,this.serviceObj.Website=this.serviceForm.value.Website,this.serviceObj.Facebook=this.serviceForm.value.Facebook,this.serviceObj.Instagram=this.serviceForm.value.Instagram,this.serviceObj.Description=this.serviceForm.value.Description,this.serviceObj.Date_Created=this.serviceForm.value.Date_Created,this.serviceObj.Image=this.serviceForm.value.Image,this.selectedFile?this.imageUploadService.uploadImage(this.selectedFile,"serviceImages").subscribe(t=>{this.serviceObj.Image=t,console.log(t),this.saveService()}):this.saveService())}saveService(){this.servicesService.addService({id:this.serviceObj.id,Name:this.serviceObj.Name,Phone_Number:this.serviceObj.Phone_Number,Service_Type:this.serviceObj.Service_Type,Community_Sponsor:!1,Email:this.serviceObj.Email,Website:this.serviceObj.Website,Facebook:this.serviceObj.Facebook,Instagram:this.serviceObj.Instagram,Description:this.serviceObj.Description,Date_Created:this.serviceObj.Date_Created,Image:this.serviceObj.Image}).subscribe(r=>{console.log("Service added successfully with ID:",r?.id),this.serviceForm.reset(),this.router.navigate(["/services",r?.id])})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(DI),pe(pI),pe(s$),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-add-service"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Service_Type",1,"required"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["for","Image"],["type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3,"Lista de Servicii"),k()(),$(4,"div",2)(5,"h2"),G(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),k()()(),$(7,"div",3)(8,"form",4),At("ngSubmit",function(){return i.onSubmit()}),$(9,"div",5)(10,"label",6),G(11,"Nume:"),k(),lt(12,"input",7),k(),$(13,"div",5)(14,"label",8),G(15,"Adresa Email:"),k(),lt(16,"input",9),k(),$(17,"div",5)(18,"label",10),G(19,"Numar de telefon:"),k(),lt(20,"input",11),k(),$(21,"div",5)(22,"label",12),G(23,"Pagina Web:"),k(),lt(24,"input",13),k(),$(25,"div",5)(26,"label",14),G(27,"Pagina Facebook:"),k(),lt(28,"input",15),k(),$(29,"div",5)(30,"label",16),G(31,"Instagram:"),k(),lt(32,"input",17),k(),$(33,"div",5)(34,"label",18),G(35,"Descriere a serviciile oferite:"),k(),lt(36,"textarea",19),k(),$(37,"div",5)(38,"label",20),G(39,"Categoria de serviciului:"),k(),$(40,"select",21),Nn(41,Lse,2,2,"option",22),k()(),$(42,"div",5)(43,"label",23),G(44,"Categoria de serviciului:"),k(),$(45,"input",24),At("change",function(o){return i.onFileSelected(o)}),k()(),$(46,"button",25),G(47,"Add Service"),k()()()),2&r&&(ye(8),tt("formGroup",i.serviceForm),ye(33),tt("ngForOf",i.serviceTypes),ye(5),tt("disabled",i.serviceForm.invalid))},dependencies:[Qo,Vm,Bm,jm,Fu,Vu,yf,Rm,Bu,Ef,Um],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})(),Vse=(()=>{class n{constructor(t,r){this.fb=t,this.eventsService=r,this.eventForm=this.fb.group({Approved:[""],Community_Sponsor:[""],Contact:[""],Description:["",Ir.required],Event_date:["",Ir.required],Location:["",Ir.required],Name:["",Ir.required],Phone_Number:[""],Poster_Image:["",Ir.required],Price:["",Ir.required],Website:[""]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(r=>{console.error("Error adding event: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(DI),pe(kD))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-add-event"]],decls:40,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Contact"],["id","Contact","formControlName","Contact","required",""],["for","Poster_Image",1,"required"],["id","Poster_Image","formControlName","Poster_Image","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Event_date",1,"required"],["id","Event_date","type","date","formControlName","Event_date","required",""],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Price",1,"required"],["id","Price","formControlName","Price","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&($(0,"div",0)(1,"form",1),At("ngSubmit",function(){return i.onSubmit()}),$(2,"div",2)(3,"label",3),G(4,"Event Name:"),k(),lt(5,"input",4),k(),$(6,"div",2)(7,"label",5),G(8,"Contatct Name:"),k(),lt(9,"input",6),k(),$(10,"div",2)(11,"label",7),G(12,"Poster Image:"),k(),lt(13,"input",8),k(),$(14,"div",2)(15,"label",9),G(16,"Phone Number:"),k(),lt(17,"input",10),k(),$(18,"div",2)(19,"label",11),G(20,"Date:"),k(),lt(21,"input",12),k(),$(22,"div",2)(23,"label",13),G(24,"Location:"),k(),lt(25,"input",14),k(),$(26,"div",2)(27,"label",15),G(28,"Description:"),k(),lt(29,"textarea",16),k(),$(30,"div",2)(31,"label",17),G(32,"Price:"),k(),lt(33,"input",18),k(),$(34,"div",2)(35,"label",19),G(36,"Website:"),k(),lt(37,"input",20),k(),$(38,"button",21),G(39,"Add Event"),k()()()),2&r&&(ye(1),tt("formGroup",i.eventForm),ye(37),tt("disabled",i.eventForm.invalid))},dependencies:[Vm,Fu,yf,Rm,Bu,Ef,Um],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function Use(n,e){if(1&n&&($(0,"option",28),G(1),k()),2&n){const t=e.$implicit;tt("value",t),ye(1),Ut(t)}}let Bse=(()=>{class n{constructor(t,r,i,s,o){this.fb=t,this.offersService=r,this.firestore=i,this.imageUploadService=s,this.router=o,this.offerTypes=[],this.offer={Title:"",Company_Name:"",Contact_Name:"",Phone_Number:"",Email:"",Description:"",Location:"",Website:"",Filled:!1,Date_Created:(new Date).toISOString(),Price:"",Image1:"",Image2:"",Image3:"",Image4:"",Image5:"",OfferType:"",Facebook:"",Instagram:"",id:"",Community_Sponsor:!1},this.selectedFiles=null,this.offerForm=this.fb.group({Title:["",Ir.required],Company_Name:[""],Contact_Name:["",Ir.required],Phone_Number:["",Ir.required],Email:["",[Ir.email]],Location:["",Ir.required],Website:[""],Description:["",Ir.required],Price:[""],Image1:[""],Image2:[""],Image3:[""],Image4:[""],Image5:[""],Filled:!1,Date_Created:[""],OfferType:[""],Community_Sponsor:!1})}onFileSelected(t){this.selectedFiles=t.target.files}ngOnInit(){this.offersService.getAllOfferTypes().subscribe(t=>{this.offerTypes=t})}onSubmit(t){var r=this;if(console.log(t),this.selectedFiles&&this.selectedFiles.length>0){const i=[];for(let s=0;s<this.selectedFiles.length;s++){const a=this.imageUploadService.uploadImage(this.selectedFiles[s],"offers");i.push(a)}MT(i).pipe(Me(s=>{this.offer.Image1=s[0]||"",this.offer.Image2=s[1]||"",this.offer.Image3=s[2]||"",this.offer.Image4=s[3]||"",this.offer.Image5=s[4]||""}),$e((0,_e.Z)(function*(){return r.saveOffer()}))).subscribe()}else this.saveOffer().subscribe()}saveOffer(){return b(this.firestore.collection("Offers").add(this.offer).then(t=>{console.log("Offer added with ID:",t.id),this.router.navigate(["/offers",t.id])}).catch(t=>{console.error("Error adding offer:",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(DI),pe(fI),pe(Ou),pe(s$),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-add-offers"]],decls:50,vars:11,consts:[[1,"form-container"],[3,"ngSubmit"],["offerForm","ngForm"],[1,"form-group"],["for","Title",1,"required"],["type","text","name","Title","required","","placeholder","Title",3,"ngModel","ngModelChange"],["for","Company_Name"],["type","text","name","Company_Name","required","","placeholder","Company Name",3,"ngModel","ngModelChange"],["for","Contact_Name",1,"required"],["type","text","name","Contact_Name","required","","placeholder","Contact Name",3,"ngModel","ngModelChange"],["for","Phone_Number",1,"required"],["type","text","name","Phone_Number","required","","placeholder","Phone Number",3,"ngModel","ngModelChange"],["for","Email"],["type","email","name","Email","required","","placeholder","Email",3,"ngModel","ngModelChange"],["for","Description",1,"required"],["name","Description","required","","placeholder","Description",3,"ngModel","ngModelChange"],["for","Price"],["type","text","name","Price","required","","placeholder","Price",3,"ngModel","ngModelChange"],["for","Location",1,"required"],["type","text","name","Location","required","","placeholder","Location",3,"ngModel","ngModelChange"],["for","Website"],["type","url","name","Website","placeholder","Website",3,"ngModel","ngModelChange"],["for","OfferType"],["id","OfferType","name","OfferType","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","Images"],["type","file","id","Images","multiple","","accept","image/*",1,"form-control",3,"change"],["type","submit"],[3,"value"]],template:function(r,i){if(1&r){const s=function ox(){return we()}();$(0,"div",0)(1,"form",1,2),At("ngSubmit",function(){!function Y_(n){return yt.lFrame.contextLView=n,n[dr]}(s);const a=function nx(n){return ys(function Pb(){return yt.lFrame.contextLView}(),zt+n)}(2);return function Td(n){return yt.lFrame.contextLView=null,n}(i.onSubmit(a))}),$(3,"div",3)(4,"label",4),G(5,"Offer Title:"),k(),$(6,"input",5),At("ngModelChange",function(a){return i.offer.Title=a}),k()(),$(7,"div",3)(8,"label",6),G(9,"Numele Companiei:"),k(),$(10,"input",7),At("ngModelChange",function(a){return i.offer.Company_Name=a}),k()(),$(11,"div",3)(12,"label",8),G(13,"Numele persoanei de contact:"),k(),$(14,"input",9),At("ngModelChange",function(a){return i.offer.Contact_Name=a}),k()(),$(15,"div",3)(16,"label",10),G(17,"Numar de telfon:"),k(),$(18,"input",11),At("ngModelChange",function(a){return i.offer.Phone_Number=a}),k()(),$(19,"div",3)(20,"label",12),G(21,"Adresa de Email:"),k(),$(22,"input",13),At("ngModelChange",function(a){return i.offer.Email=a}),k()(),$(23,"div",3)(24,"label",14),G(25,"Descriiere:"),k(),$(26,"textarea",15),At("ngModelChange",function(a){return i.offer.Description=a}),k()(),$(27,"div",3)(28,"label",16),G(29,"Pret:"),k(),$(30,"input",17),At("ngModelChange",function(a){return i.offer.Price=a}),k()(),$(31,"div",3)(32,"label",18),G(33,"Locatie:"),k(),$(34,"input",19),At("ngModelChange",function(a){return i.offer.Location=a}),k()(),$(35,"div",3)(36,"label",20),G(37,"Website:"),k(),$(38,"input",21),At("ngModelChange",function(a){return i.offer.Website=a}),k()(),$(39,"div",3)(40,"label",22),G(41,"Tip de oferta"),k(),$(42,"select",23),At("ngModelChange",function(a){return i.offer.OfferType=a}),Nn(43,Use,2,2,"option",24),k()(),$(44,"div",3)(45,"label",25),G(46,"Images"),k(),$(47,"input",26),At("change",function(a){return i.onFileSelected(a)}),k()(),$(48,"button",27),G(49,"Adauga Oferta"),k()()()}2&r&&(ye(6),tt("ngModel",i.offer.Title),ye(4),tt("ngModel",i.offer.Company_Name),ye(4),tt("ngModel",i.offer.Contact_Name),ye(4),tt("ngModel",i.offer.Phone_Number),ye(4),tt("ngModel",i.offer.Email),ye(4),tt("ngModel",i.offer.Description),ye(4),tt("ngModel",i.offer.Price),ye(4),tt("ngModel",i.offer.Location),ye(4),tt("ngModel",i.offer.Website),ye(4),tt("ngModel",i.offer.OfferType),ye(1),tt("ngForOf",i.offerTypes))},dependencies:[Qo,Vm,Bm,jm,Fu,Vu,yf,Rm,Bu,AI,CI],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function jse(n,e){if(1&n&&($(0,"option",26),G(1),k()),2&n){const t=e.$implicit;tt("value",t),ye(1),Ut(t)}}let $se=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.route=r,this.router=i,this.servicesService=s,this.serviceId=null,this.serviceTypes=[],this.serviceForm=this.fb.group({Name:["",Ir.required],Email:["",Ir.email],Phone_Number:["",Ir.required],Website:["",Ir.required],Facebook:[""],Instagram:[""],Description:["",Ir.required],Service_Type:["",Ir.required],Image:[""]})}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{this.serviceForm.patchValue({Name:t?.Name,Email:t?.Email?"":t?.Email,Phone_Number:t?.Phone_Number,Service_Type:t?.Service_Type,Website:t?.Website,Facebook:t?.Facebook,Instagram:t?.Instagram,Description:t?.Description,Image:t?.Image})}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.serviceId&&(console.log(this.serviceForm),this.serviceForm.value.Facebook=this.serviceForm.value.Facebook||"",this.serviceForm.value.Instagram=this.serviceForm.value.Instagram||"",this.serviceForm.value.Image=this.serviceForm.value.Image||"",this.serviceForm.value.Email=this.serviceForm.value.Email||"",this.servicesService.updateService(this.serviceId,this.serviceForm.value).then(()=>{console.log("Service updated successfully"),this.router.navigate(["/services"])}).catch(t=>{console.error("Error updating service: ",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(DI),pe(Co),pe(rr),pe(pI))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-edit-services"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Image"],["id","Image","formControlName","Image"],["for","Service_Type"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3,"Lista de Servicii"),k()(),$(4,"div",2)(5,"h2"),G(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),k()()(),$(7,"div",3)(8,"form",4),At("ngSubmit",function(){return i.onSubmit()}),$(9,"div",5)(10,"label",6),G(11,"Nume:"),k(),lt(12,"input",7),k(),$(13,"div",5)(14,"label",8),G(15,"Adresa Email:"),k(),lt(16,"input",9),k(),$(17,"div",5)(18,"label",10),G(19,"Numar de telefon:"),k(),lt(20,"input",11),k(),$(21,"div",5)(22,"label",12),G(23,"Pagina Web:"),k(),lt(24,"input",13),k(),$(25,"div",5)(26,"label",14),G(27,"Pagina Facebook:"),k(),lt(28,"input",15),k(),$(29,"div",5)(30,"label",16),G(31,"Instagram:"),k(),lt(32,"input",17),k(),$(33,"div",5)(34,"label",18),G(35,"Descriere a serviciile oferite:"),k(),lt(36,"textarea",19),k(),$(37,"div",5)(38,"label",20),G(39,"Imagine:"),k(),lt(40,"input",21),k(),$(41,"div",5)(42,"label",22),G(43,"Categoria de serviciului:"),k(),$(44,"select",23),Nn(45,jse,2,2,"option",24),k()(),$(46,"button",25),G(47,"Salvati Serviciu"),k()()()),2&r&&(ye(8),tt("formGroup",i.serviceForm),ye(37),tt("ngForOf",i.serviceTypes),ye(1),tt("disabled",i.serviceForm.invalid))},dependencies:[Qo,Vm,Bm,jm,Fu,Vu,yf,Rm,Bu,Ef,Um],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}"]})}return n})(),zse=(()=>{class n{constructor(t){this.firestore=t}getAnalytics(){return this.firestore.collection("analytics").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ou))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hse(n,e){if(1&n&&($(0,"tr")(1,"td"),G(2),k(),$(3,"td"),G(4),gh(5,"json"),k(),$(6,"td"),G(7),gh(8,"date"),k()()),2&n){const t=e.$implicit;ye(2),Ut(t.page_path),ye(2),Ut(function q1(n,e,t){const r=n+zt,i=we(),s=ys(i,r);return sg(i,r)?B1(i,Jr(),e,s.transform,t,s):s.transform(t)}(5,3,t.query_params)),ye(3),Ut(ig(8,5,t.timestamp,"medium"))}}function Gse(n,e){if(1&n&&($(0,"div",5),lt(1,"img",6),k()),2&n){const t=e.$implicit;ye(1),tt("src",t,Kn)}}const Wse=[{path:"",component:Une},{path:"rules",component:jre},{path:"analytics",component:(()=>{class n{constructor(t){this.analyticsService=t,this.analyticsData=[]}ngOnInit(){this.analyticsService.getAnalytics().subscribe(t=>{this.analyticsData=t})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(zse))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-analytics"]],decls:14,vars:1,consts:[[1,"container"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&($(0,"div",0)(1,"h2"),G(2,"Analytics Data"),k(),$(3,"table",1)(4,"thead")(5,"tr")(6,"th"),G(7,"Page Path"),k(),$(8,"th"),G(9,"Query Params"),k(),$(10,"th"),G(11,"Timestamp"),k()()(),$(12,"tbody"),Nn(13,Hse,9,8,"tr",2),k()()()),2&r&&(ye(13),tt("ngForOf",i.analyticsData))},dependencies:[Qo,DO,hg],styles:[".container[_ngcontent-%COMP%]{margin:20px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}return n})()},{path:"events",component:Hre},{path:"add-event",component:Vse},{path:"offers",component:Gre},{path:"add-offers",component:Bse},{path:"offers/:id",component:(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.offerService=i,this.images=[]}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.offerService.getOfferById(t).subscribe(r=>{this.offer=r,this.images=[r.Image1,r.Image2,r.Image3,r.Image4,r.Image5].filter(i=>!!i)})}goBack(){this.router.navigate(["/offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Co),pe(rr),pe(fI))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-offer-detail"]],decls:45,vars:15,consts:[[1,"offer-detail"],[1,"carousel"],["class","image-container",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[3,"click"],[1,"image-container"],["alt","Offer Image",3,"src"]],template:function(r,i){1&r&&($(0,"div",0)(1,"h2"),G(2),k(),$(3,"div",1),Nn(4,Gse,2,1,"div",2),k(),$(5,"p")(6,"strong"),G(7,"Company Name:"),k(),G(8),k(),$(9,"p")(10,"strong"),G(11,"Contact Name:"),k(),G(12),k(),$(13,"p")(14,"strong"),G(15,"Phone Number:"),k(),G(16),k(),$(17,"p")(18,"strong"),G(19,"Email:"),k(),G(20),k(),$(21,"p")(22,"strong"),G(23,"Description:"),k(),G(24),k(),$(25,"p")(26,"strong"),G(27,"Location:"),k(),G(28),k(),$(29,"p")(30,"strong"),G(31,"Website:"),k(),$(32,"a",3),G(33),k()(),$(34,"p")(35,"strong"),G(36,"Offer Type:"),k(),G(37),k(),$(38,"p")(39,"strong"),G(40,"Date Created:"),k(),G(41),gh(42,"date"),k(),$(43,"button",4),At("click",function(){return i.goBack()}),G(44,"Back to Offers"),k()()),2&r&&(ye(2),Ut(null==i.offer?null:i.offer.Title),ye(2),tt("ngForOf",i.images),ye(4),Pr(" ",null==i.offer?null:i.offer.Company_Name,""),ye(4),Pr(" ",null==i.offer?null:i.offer.Contact_Name,""),ye(4),Pr(" ",null==i.offer?null:i.offer.Phone_Number,""),ye(4),Pr(" ",null==i.offer?null:i.offer.Email,""),ye(4),Pr(" ",null==i.offer?null:i.offer.Description,""),ye(4),Pr(" ",null==i.offer?null:i.offer.Location,""),ye(4),tt("href",null==i.offer?null:i.offer.Website,Kn),ye(1),Ut(null==i.offer?null:i.offer.Website),ye(4),Pr(" ",null==i.offer?null:i.offer.OfferType,""),ye(4),Pr(" ",ig(42,12,null==i.offer?null:i.offer.Date_Created,"shortDate"),""))},dependencies:[Qo,hg],styles:[".offer-detail[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:16px;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 4px #0000001a}.carousel[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:300px;margin-bottom:16px}.image-container[_ngcontent-%COMP%]{flex:0 0 400px;overflow:hidden;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover}button[_ngcontent-%COMP%]{display:block;margin:16px auto;padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})()},{path:"services",component:Bre},{path:"add-service",component:o$},{path:"services/add",component:o$},{path:"services/:id",component:(()=>{class n{constructor(t,r,i){this.route=t,this.servicesService=r,this.router=i,this.service=new _j,this.serviceId=null}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{t&&(this.service.Community_Sponsor=t?.Community_Sponsor,this.service.Name=t.Name,this.service.Date_Created=t.Date_Created,this.service.Description=t.Description,this.service.Email=t.Email,this.service.Facebook=t.Facebook,this.service.Instagram=t.Instagram,this.service.Phone_Number=t.Phone_Number,this.service.Service_Type=t.Service_Type,this.service.Website=t.Website,this.service.Image=t.Image)})}goBack(){this.router.navigate(["/services"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Co),pe(pI),pe(rr))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-service-detail"]],decls:49,vars:17,consts:[[1,"service-details-container"],[1,"service-header"],[1,"service-content"],[1,"service-image"],[3,"src","alt"],[1,"service-details"],["target","_blank",3,"href"],[1,"service-actions"],[3,"click"]],template:function(r,i){1&r&&($(0,"div",0)(1,"div",1)(2,"h1"),G(3),k()(),$(4,"div",2)(5,"div",3),lt(6,"img",4),k(),$(7,"div",5)(8,"h2"),G(9,"Contact Details"),k(),$(10,"p")(11,"strong"),G(12,"Service Type:"),k(),G(13),k(),$(14,"p")(15,"strong"),G(16,"Phone Number:"),k(),G(17),k(),$(18,"p")(19,"strong"),G(20,"Email:"),k(),G(21),k(),$(22,"p")(23,"strong"),G(24,"Website:"),k(),$(25,"a",6),G(26),k()(),$(27,"p")(28,"strong"),G(29,"Facebook:"),k(),$(30,"a",6),G(31),k()(),$(32,"p")(33,"strong"),G(34,"Instagram:"),k(),$(35,"a",6),G(36),k()(),$(37,"p")(38,"strong"),G(39,"Community Sponsor:"),k(),G(40),k(),$(41,"p")(42,"strong"),G(43,"Date Created:"),k(),G(44),gh(45,"date"),k()()(),$(46,"div",7)(47,"button",8),At("click",function(){return i.goBack()}),G(48,"Inapoi la Servicii"),k()()()),2&r&&(ye(3),Ut(i.service.Name),ye(3),Ls("alt",i.service.Name),tt("src",i.service.Image,Kn),ye(7),Pr(" ",i.service.Service_Type,""),ye(4),Pr(" ",i.service.Phone_Number,""),ye(4),Pr(" ",i.service.Email,""),ye(4),tt("href",i.service.Website,Kn),ye(1),Ut(i.service.Website),ye(4),tt("href",i.service.Facebook,Kn),ye(1),Ut(i.service.Facebook),ye(4),tt("href",i.service.Instagram,Kn),ye(1),Ut(i.service.Instagram),ye(4),Pr(" ",i.service.Community_Sponsor?"Yes":"No",""),ye(4),Pr(" ",ig(45,14,i.service.Date_Created,"shortDate"),""))},dependencies:[hg],styles:[".service-details-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 0 10px #0000001a}.service-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:2.5em;margin-bottom:20px;color:#333}.service-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.service-image[_ngcontent-%COMP%]{flex:1;margin-right:20px}.service-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:10px;box-shadow:0 0 10px #0000001a}.service-details[_ngcontent-%COMP%]{flex:2;font-size:1.2em;color:#555}.service-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;margin-bottom:10px;color:#444}.service-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.service-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.service-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.service-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1em;color:#fff;background-color:#007bff;border:none;border-radius:5px;cursor:pointer}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})()},{path:"edit-service/:id",component:$se}];let Kse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({imports:[ZF.forRoot(Wse),ZF]})}return n})();var Zse=We(513);const Yse=new Ie("angularfire2.analytics.analyticsCollectionEnabled"),Xse=new Ie("angularfire2.analytics.appVersion"),Jse=new Ie("angularfire2.analytics.appName"),eoe=new Ie("angularfire2.analytics.debugMode"),toe=new Ie("angularfire2.analytics.config"),kI="dataLayer";let c$=(()=>{class n{measurementId;analyticsInitialized=new Promise(()=>{});updateConfig(t){var r=this;return(0,_e.Z)(function*(){yield r.analyticsInitialized,window.gtag("config",r.measurementId,{...t,update:!0})})()}constructor(t,r,i,s,o,a,c,l,f){if(PO(c)){window[kI]=window[kI]||[];const y=(...N)=>"config"===N[0]&&"firebase"===N[2].origin&&(this.measurementId=N[1],!0),I=N=>{window.gtag=(...O)=>{N&&N(...O),"event"===O[0]&&O[2].send_to===this.measurementId&&(s&&(O[2].app_name=s),i&&(O[2].app_version=i)),o&&typeof console<"u"&&console.info(...O),function(...W){window[kI].push(arguments)}(...O)}};window[kI].some(y)?(this.analyticsInitialized=Promise.resolve(),I()):this.analyticsInitialized=new Promise(N=>{I((...O)=>{y(...O)&&N()})}),a&&this.updateConfig(a),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const m=F(void 0).pipe(En(f.outsideAngular),$e(Zse.Gb),$e(y=>y?l.runOutsideAngular(()=>We.e(861).then(We.bind(We,244))):Fn),Me(()=>uE("analytics","AngularFireAnalytics",t.name,()=>{const y=t.analytics();return!1===r&&y.setAnalyticsCollectionEnabled(!1),y},[t,r,a,o])),lC({bufferSize:1,refCount:!1}));return JF(this,m,l)}static \u0275fac=function(r){return new(r||n)(fe(cC),fe(Yse,8),fe(Xse,8),fe(Jse,8),fe(eoe,8),fe(toe,8),fe(ks),fe(Wt),fe(uu))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const aoe=function(n,e){return{"fa-bars":n,"fa-times":e}},coe=function(n){return{active:n}};let loe=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/offers",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&($(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),G(4,"Romani in Seattle"),k()(),$(5,"div",4),At("click",function(){return i.toggleMenu()}),lt(6,"i",5),k(),$(7,"ul",6)(8,"li",7)(9,"a",8),At("click",function(){return i.closeMenu()}),G(10,"Home"),k()(),$(11,"li",7)(12,"a",9),At("click",function(){return i.closeMenu()}),G(13,"Servicii"),k()(),$(14,"li",7)(15,"a",10),At("click",function(){return i.closeMenu()}),G(16,"Evenimente"),k()(),$(17,"li",7)(18,"a",11),At("click",function(){return i.closeMenu()}),G(19,"Oferte"),k()(),$(20,"li",7)(21,"a",12),At("click",function(){return i.closeMenu()}),G(22,"Regulament"),k()()()()()),2&r&&(ye(6),tt("ngClass",function U1(n,e,t,r,i){return j1(we(),Jr(),n,e,t,r,i)}(2,aoe,!i.menuOpen,i.menuOpen)),ye(1),tt("ngClass",function V1(n,e,t,r){return B1(we(),Jr(),n,e,t,r)}(5,coe,i.menuOpen)))},dependencies:[bO,aE],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{color:#333;text-decoration:none;text-transform:uppercase;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to left,blue 0,blue 33.3%,yellow 33.3%,yellow 66.6%,red 66.6%,red)}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),uoe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&($(0,"footer",0)(1,"div",1),G(2," \xa9 2024 Romani in Seattle. All rights reserved. "),k()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),doe=(()=>{class n{constructor(t,r,i,s){this.router=t,this.analytics=r,this.activatedRoute=i,this.firestore=s,this.title="romani-in-seattle"}ngOnInit(){this.router.events.pipe(ws(t=>t instanceof Ua)).subscribe(t=>{const r=t.urlAfterRedirects,i=this.activatedRoute.snapshot.queryParams,s=new Date;this.firestore.collection("analytics").add({page_path:r,query_params:i,timestamp:s}).then(()=>{console.log("Analytics data saved")}).catch(o=>{console.error("Error saving analytics data",o)})})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rr),pe(c$),pe(Co),pe(Ou))};static#t=this.\u0275cmp=Gn({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&($(0,"div",0),lt(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),k())},dependencies:[YT,loe,uoe],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class l${}class hoe{}const ec="*";function u$(n,e=null){return{type:2,steps:n,options:e}}function d$(n){return{type:6,styles:n,offset:null}}class Gm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class h${constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function f$(n){return new ue(3e3,!1)}function ml(n){switch(n.length){case 0:return new Gm;case 1:return n[0];default:return new h$(n)}}function p$(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),f=l==o,m=f&&a||new Map;c.forEach((y,I)=>{let T=I,N=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),N){case"!":N=t.get(I);break;case ec:N=r.get(I);break;default:N=n.normalizeStyleValue(I,T,N,i)}m.set(T,N)}),f||s.push(m),a=m,o=l}),i.length)throw function koe(n){return new ue(3502,!1)}();return s}function uS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&dS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&dS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&dS(t,"destroy",n)))}}function dS(n,e,t){const s=hS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function hS(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function $s(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function g$(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Woe=(()=>typeof document>"u"?null:document.documentElement)();function fS(n){const e=n.parentNode||n.host||null;return e===Woe?null:e}let $u=null,m$=!1;function _$(n,e){for(;e;){if(e===n)return!0;e=fS(e)}return!1}function y$(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let v$=(()=>{class n{validateStyleProperty(t){return function Zoe(n){$u||($u=function Qoe(){return typeof document<"u"?document.body:null}()||{},m$=!!$u.style&&"WebkitAppearance"in $u.style);let e=!0;return $u.style&&!function Koe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in $u.style,!e&&m$&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in $u.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return _$(t,r)}getParentElement(t){return fS(t)}query(t,r,i){return y$(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Gm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),pS=(()=>{class n{static#e=this.NOOP=new v$}return n})();const Yoe=1e3,gS="ng-enter",FI="ng-leave",LI="ng-trigger",VI=".ng-trigger",I$="ng-animating",mS=".ng-animating";function tc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:_S(parseFloat(e[1]),e[2])}function _S(n,e){return"s"===e?n*Yoe:n}function UI(n,e,t){return n.hasOwnProperty("duration")?n:function Joe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(f$()),{duration:0,delay:0,easing:""};i=_S(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=_S(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function foe(){return new ue(3100,!1)}()),a=!0),s<0&&(e.push(function poe(){return new ue(3101,!1)}()),a=!0),a&&e.splice(c,0,f$())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Wm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function b$(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function _l(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function ha(n,e,t){e.forEach((r,i)=>{const s=vS(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function zu(n,e){e.forEach((t,r)=>{const i=vS(r);n.style[i]=""})}function Km(n){return Array.isArray(n)?1==n.length?n[0]:u$(n):n}const yS=new RegExp("{{\\s*(.+?)\\s*}}","g");function T$(n){let e=[];if("string"==typeof n){let t;for(;t=yS.exec(n);)e.push(t[1]);yS.lastIndex=0}return e}function Zm(n,e,t){const r=n.toString(),i=r.replace(yS,(s,o)=>{let a=e[o];return null==a&&(t.push(function moe(n){return new ue(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function BI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const nae=/-+([a-z0-9])/g;function vS(n){return n.replace(nae,(...e)=>e[1].toUpperCase())}function zs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _oe(n){return new ue(3004,!1)}()}}function C$(n,e){return window.getComputedStyle(n)[e]}const jI="*";function sae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function oae(n,e,t){if(":"==n[0]){const c=function aae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Poe(n){return new ue(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Roe(n){return new ue(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(A$(i,o));"<"==s[0]&&!(i==jI&&o==jI)&&e.push(A$(o,i))}(r,t,e)):t.push(n),t}const $I=new Set(["true","1"]),zI=new Set(["false","0"]);function A$(n,e){const t=$I.has(n)||zI.has(n),r=$I.has(e)||zI.has(e);return(i,s)=>{let o=n==jI||n==i,a=e==jI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?$I.has(n):zI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?$I.has(e):zI.has(e)),o&&a}}const cae=new RegExp("s*:selfs*,?","g");function ES(n,e,t,r){return new lae(n).build(e,t,r)}class lae{constructor(e){this._driver=e}build(e,t,r){const i=new hae(t);return this._resetContextStyleTimingState(i),zs(this,Km(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function voe(){return new ue(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function Eoe(){return new ue(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{T$(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(BI(s.values()),t.errors.push(function Ioe(n,e){return new ue(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=zs(this,Km(e.animation),t);return{type:1,matchers:sae(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Hu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>zs(this,r,t)),options:Hu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=zs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Hu(e.options)}}visitAnimate(e,t){const r=function pae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return IS(UI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=IS(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=UI(t,e);return IS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:d$({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=d$(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ec?r.push(a):t.errors.push(new ue(3002,!1)):r.push(b$(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),f=l.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function woe(n,e,t,r,i){return new ue(3010,!1)}()),m=!1),s=f.startTime),m&&l.set(c,{startTime:s,endTime:i}),t.options&&function tae(n,e,t){const r=e.params||{},i=T$(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function goe(n){return new ue(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Toe(){return new ue(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,l=0;const f=e.steps.map(W=>{const j=this._makeStyleAst(W,t);let X=null!=j.offset?j.offset:function fae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(j.styles),oe=0;return null!=X&&(s++,oe=j.offset=X),c=c||oe<0||oe>1,a=a||oe<l,l=oe,o.push(oe),j});c&&t.errors.push(function Coe(){return new ue(3012,!1)}()),a&&t.errors.push(function Aoe(){return new ue(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Doe(){return new ue(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,N=t.currentAnimateTimings,O=N.duration;return f.forEach((W,j)=>{const X=y>0?j==I?1:y*j:o[j],oe=X*O;t.currentTime=T+N.delay+oe,N.duration=oe,this._validateStyleAst(W,t),W.offset=X,r.styles.push(W)}),r}visitReference(e,t){return{type:8,animation:zs(this,Km(e.animation),t),options:Hu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Hu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Hu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function uae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(cae,"")),n=n.replace(/@\*/g,VI).replace(/@\w+/g,t=>VI+"-"+t.slice(1)).replace(/:animating/g,mS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,$s(t.collectedStyles,t.currentQuerySelector,new Map);const a=zs(this,Km(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Hu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Soe(){return new ue(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:UI(e.timings,t.errors,!0);return{type:12,animation:zs(this,Km(e.animation),t),timings:r,options:null}}}class hae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Hu(n){return n?(n=Wm(n)).params&&(n.params=function dae(n){return n?Wm(n):null}(n.params)):n={},n}function IS(n,e,t){return{duration:n,delay:e,easing:t}}function bS(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class HI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const _ae=new RegExp(":enter","g"),vae=new RegExp(":leave","g");function wS(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return(new Eae).buildKeyframes(n,e,t,r,i,s,o,a,c,l)}class Eae{buildKeyframes(e,t,r,i,s,o,a,c,l,f=[]){l=l||new HI;const m=new TS(e,t,l,i,s,f,[]);m.options=c;const y=c.delay?tc(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),zs(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let N=I.length-1;N>=0;N--){const O=I[N];if(O.element===t){T=O;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,c)}return I.length?I.map(T=>T.buildKeyframes()):[bS(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:tc(Zm(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?tc(r.duration):null,a=null!=r.delay?tc(r.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=qI);const o=tc(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>zs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?tc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),zs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return UI(t.params?Zm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?tc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,l);s&&m.delayNextStep(s),l===t.element&&(c=m.currentTimeline),zs(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;zs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const qI={};class TS{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new GI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=tc(r.duration)),null!=r.delay&&(i.delay=tc(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Zm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new TS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=qI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Iae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(_ae,"."+this._enterClassName)).replace(vae,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function Moe(n){return new ue(3014,!1)}()),a}}class GI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new GI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ec),this._currentKeyframe.set(t,ec);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function bae(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ec)}else _l(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=Zm(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ec),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=_l(a,new Map,this._backFill);l.forEach((f,m)=>{"!"===f?e.add(m):f===ec&&t.add(m)}),r||l.set("offset",c/this.duration),i.push(l)});const s=e.size?BI(e.values()):[],o=t.size?BI(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return bS(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Iae extends GI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=_l(e[0]);c.set("offset",0),s.push(c);const l=_l(e[0]);l.set("offset",M$(a)),s.push(l);const f=e.length-1;for(let m=1;m<=f;m++){let y=_l(e[m]);const I=y.get("offset");y.set("offset",M$((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return bS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function M$(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class CS{}const wae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Tae extends CS{normalizePropertyName(e,t){return vS(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(wae.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function yoe(n,e){return new ue(3005,!1)}())}return o+s}}function R$(n,e,t,r,i,s,o,a,c,l,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:f,totalTime:m,errors:y}}const AS={};class P${constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Cae(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,f){const m=[],y=this.ast.options&&this.ast.options.params||AS,T=this.buildStyles(r,a&&a.params||AS,m),N=c&&c.params||AS,O=this.buildStyles(i,N,m),W=new Set,j=new Map,X=new Map,oe="void"===i,De={params:Aae(N,y),delay:this.ast.options?.delay},je=f?[]:wS(e,t,this.ast.animation,s,o,T,O,De,l,m);let H=0;if(je.forEach(B=>{H=Math.max(B.duration+B.delay,H)}),m.length)return R$(t,this._triggerName,r,i,oe,T,O,[],[],j,X,H,m);je.forEach(B=>{const K=B.element,Y=$s(j,K,new Set);B.preStyleProps.forEach(z=>Y.add(z));const ne=$s(X,K,new Set);B.postStyleProps.forEach(z=>ne.add(z)),K!==t&&W.add(K)});const V=BI(W.values());return R$(t,this._triggerName,r,i,oe,T,O,je,V,j,X,H)}}function Aae(n,e){const t=Wm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Dae{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Wm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Zm(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class Mae{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Dae(i.style,i.options&&i.options.params||{},r))}),x$(this.states,"true","1"),x$(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new P$(e,i,this.states))}),this.fallbackTransition=function Rae(n,e,t){return new P$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function x$(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Pae=new HI;class xae{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=ES(this._driver,t,r,[]);if(r.length)throw function Foe(n){return new ue(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=p$(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=wS(this._driver,t,s,gS,FI,new Map,new Map,r,Pae,i),o.forEach(f=>{const m=$s(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Loe(){return new ue(3300,!1)}()),o=[]),i.length)throw function Voe(n){return new ue(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,ec))})});const l=ml(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Uoe(n){return new ue(3301,!1)}();return t}listen(e,t,r,i){const s=hS(t,"","","");return uS(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const N$="ng-animate-queued",DS="ng-animate-disabled",Lae=[],O$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},So="__ng_removed";class SS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function $ae(n){return n??null}(r?e.value:e),r){const s=Wm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Qm="void",MS=new SS(Qm);class Uae{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,uo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Boe(n,e){return new ue(3302,!1)}();if(null==r||0==r.length)throw function joe(n){return new ue(3303,!1)}();if(!function zae(n){return"start"==n||"done"==n}(r))throw function $oe(n,e){return new ue(3400,!1)}();const s=$s(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=$s(this._engine.statesByElement,e,new Map);return a.has(t)||(uo(e,LI),uo(e,LI+"-"+t),a.set(t,MS)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function zoe(n){return new ue(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new RS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(uo(e,LI),uo(e,LI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new SS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=MS),l.value!==Qm&&c.value===l.value){if(!function Gae(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const N=[],O=s.matchStyles(c.value,c.params,N),W=s.matchStyles(l.value,l.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{zu(e,O),ha(e,W)})}return}const y=$s(this._engine.playersByElement,e,[]);y.forEach(N=>{N.namespaceId==this.id&&N.triggerName==t&&N.queued&&N.destroy()});let I=s.matchTransition(c.value,l.value,e,l.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:l,player:o,isFallbackTransition:T}),T||(uo(e,N$),o.onStart(()=>{Cf(e,N$)})),o.onDone(()=>{let N=this.players.indexOf(o);N>=0&&this.players.splice(N,1);const O=this._engine.playersByElement.get(e);if(O){let W=O.indexOf(o);W>=0&&O.splice(W,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,VI,!0);r.forEach(i=>{if(i[So])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const f=this.trigger(e,l,Qm,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&ml(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,l=r.get(o)||MS,f=new SS(Qm),m=new RS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[So];(!s||s===O$)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){uo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=hS(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,uS(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Bae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Uae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(WI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!WI(t))return;const s=t[So];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),uo(e,DS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Cf(e,DS))}removeNode(e,t,r){if(WI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[So]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return WI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,VI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,mS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ml(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[So];if(t&&t.setForRemoval){if(e[So]=O$,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(DS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)uo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ml(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Hoe(n){return new ue(3402,!1)}()}_flushAnimations(e,t){const r=new HI,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,f=new Set;this.disabledNodes.forEach(Xe=>{f.add(Xe);const at=this.driver.query(Xe,".ng-animate-queued",!0);for(let ut=0;ut<at.length;ut++)f.add(at[ut])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=L$(y,this.collectedEnterElements),T=new Map;let N=0;I.forEach((Xe,at)=>{const ut=gS+N++;T.set(at,ut),Xe.forEach(Qt=>uo(Qt,ut))});const O=[],W=new Set,j=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const at=this.collectedLeaveElements[Xe],ut=at[So];ut&&ut.setForRemoval&&(O.push(at),W.add(at),ut.hasAnimation?this.driver.query(at,".ng-star-inserted",!0).forEach(Qt=>W.add(Qt)):j.add(at))}const X=new Map,oe=L$(y,Array.from(W));oe.forEach((Xe,at)=>{const ut=FI+N++;X.set(at,ut),Xe.forEach(Qt=>uo(Qt,ut))}),e.push(()=>{I.forEach((Xe,at)=>{const ut=T.get(at);Xe.forEach(Qt=>Cf(Qt,ut))}),oe.forEach((Xe,at)=>{const ut=X.get(at);Xe.forEach(Qt=>Cf(Qt,ut))}),O.forEach(Xe=>{this.processLeaveNode(Xe)})});const De=[],je=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(t).forEach(ut=>{const Qt=ut.player,kr=ut.element;if(De.push(Qt),this.collectedEnterElements.length){const wr=kr[So];if(wr&&wr.setForMove){if(wr.previousTriggersValues&&wr.previousTriggersValues.has(ut.triggerName)){const nc=wr.previousTriggersValues.get(ut.triggerName),Ds=this.statesByElement.get(ut.element);if(Ds&&Ds.has(ut.triggerName)){const rc=Ds.get(ut.triggerName);rc.value=nc,Ds.set(ut.triggerName,rc)}}return void Qt.destroy()}}const fo=!m||!this.driver.containsElement(m,kr),br=X.get(kr),Xn=T.get(kr),Jn=this._buildInstruction(ut,r,Xn,br,fo);if(Jn.errors&&Jn.errors.length)return void je.push(Jn);if(fo)return Qt.onStart(()=>zu(kr,Jn.fromStyles)),Qt.onDestroy(()=>ha(kr,Jn.toStyles)),void i.push(Qt);if(ut.isFallbackTransition)return Qt.onStart(()=>zu(kr,Jn.fromStyles)),Qt.onDestroy(()=>ha(kr,Jn.toStyles)),void i.push(Qt);const vl=[];Jn.timelines.forEach(wr=>{wr.stretchStartingKeyframe=!0,this.disabledNodes.has(wr.element)||vl.push(wr)}),Jn.timelines=vl,r.append(kr,Jn.timelines),o.push({instruction:Jn,player:Qt,element:kr}),Jn.queriedElements.forEach(wr=>$s(a,wr,[]).push(Qt)),Jn.preStyleProps.forEach((wr,nc)=>{if(wr.size){let Ds=c.get(nc);Ds||c.set(nc,Ds=new Set),wr.forEach((rc,El)=>Ds.add(El))}}),Jn.postStyleProps.forEach((wr,nc)=>{let Ds=l.get(nc);Ds||l.set(nc,Ds=new Set),wr.forEach((rc,El)=>Ds.add(El))})});if(je.length){const Xe=[];je.forEach(at=>{Xe.push(function qoe(n,e){return new ue(3505,!1)}())}),De.forEach(at=>at.destroy()),this.reportError(Xe)}const H=new Map,V=new Map;o.forEach(Xe=>{const at=Xe.element;r.has(at)&&(V.set(at,at),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,H))}),i.forEach(Xe=>{const at=Xe.element;this._getPreviousPlayers(at,!1,Xe.namespaceId,Xe.triggerName,null).forEach(Qt=>{$s(H,at,[]).push(Qt),Qt.destroy()})});const B=O.filter(Xe=>U$(Xe,c,l)),K=new Map;F$(K,this.driver,j,l,ec).forEach(Xe=>{U$(Xe,c,l)&&B.push(Xe)});const ne=new Map;I.forEach((Xe,at)=>{F$(ne,this.driver,new Set(Xe),c,"!")}),B.forEach(Xe=>{const at=K.get(Xe),ut=ne.get(Xe);K.set(Xe,new Map([...at?.entries()??[],...ut?.entries()??[]]))});const z=[],ho=[],yl={};o.forEach(Xe=>{const{element:at,player:ut,instruction:Qt}=Xe;if(r.has(at)){if(f.has(at))return ut.onDestroy(()=>ha(at,Qt.toStyles)),ut.disabled=!0,ut.overrideTotalTime(Qt.totalTime),void i.push(ut);let kr=yl;if(V.size>1){let br=at;const Xn=[];for(;br=br.parentNode;){const Jn=V.get(br);if(Jn){kr=Jn;break}Xn.push(br)}Xn.forEach(Jn=>V.set(Jn,kr))}const fo=this._buildAnimation(ut.namespaceId,Qt,H,s,ne,K);if(ut.setRealPlayer(fo),kr===yl)z.push(ut);else{const br=this.playersByElement.get(kr);br&&br.length&&(ut.parentPlayer=ml(br)),i.push(ut)}}else zu(at,Qt.fromStyles),ut.onDestroy(()=>ha(at,Qt.toStyles)),ho.push(ut),f.has(at)&&i.push(ut)}),ho.forEach(Xe=>{const at=s.get(Xe.element);if(at&&at.length){const ut=ml(at);Xe.setRealPlayer(ut)}}),i.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<O.length;Xe++){const at=O[Xe],ut=at[So];if(Cf(at,FI),ut&&ut.hasAnimation)continue;let Qt=[];if(a.size){let fo=a.get(at);fo&&fo.length&&Qt.push(...fo);let br=this.driver.query(at,mS,!0);for(let Xn=0;Xn<br.length;Xn++){let Jn=a.get(br[Xn]);Jn&&Jn.length&&Qt.push(...Jn)}}const kr=Qt.filter(fo=>!fo.destroyed);kr.length?Hae(this,at,kr):this.processLeaveNode(at)}return O.length=0,z.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const at=this.players.indexOf(Xe);this.players.splice(at,1)}),Xe.play()}),z}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Qm;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,f=l!==s,m=$s(r,l,[]);this._getPreviousPlayers(l,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}zu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,l=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const N=T.element;f.add(N);const O=N[So];if(O&&O.removedBeforeQueried)return new Gm(T.duration,T.delay);const W=N!==c,j=function qae(n){const e=[];return V$(n,e),e}((r.get(N)||Lae).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===N),X=s.get(N),oe=o.get(N),De=p$(this._normalizer,T.keyframes,X,oe),je=this._buildPlayer(T,De,j);if(T.subTimeline&&i&&m.add(N),W){const H=new RS(e,a,N);H.setRealPlayer(je),l.push(H)}return je});l.forEach(T=>{$s(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function jae(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>uo(T,I$));const I=ml(y);return I.onDestroy(()=>{f.forEach(T=>Cf(T,I$)),ha(c,t.toStyles)}),m.forEach(T=>{$s(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gm(e.duration,e.delay)}}class RS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>uS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$s(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function WI(n){return n&&1===n.nodeType}function k$(n,e){const t=n.style.display;return n.style.display=e??"none",t}function F$(n,e,t,r,i){const s=[];t.forEach(c=>s.push(k$(c)));const o=[];r.forEach((c,l)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(l,m,i);f.set(m,y),(!y||0==y.length)&&(l[So]=Vae,o.push(l))}),n.set(l,f)});let a=0;return t.forEach(c=>k$(c,s[a++])),o}function L$(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function uo(n,e){n.classList?.add(e)}function Cf(n,e){n.classList?.remove(e)}function Hae(n,e,t){ml(t).onDone(()=>n.processLeaveNode(e))}function V$(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof h$?V$(r.players,e):e.push(r)}}function U$(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class KI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Bae(e,t,r),this._timelineEngine=new xae(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=ES(this._driver,s,c,[]);if(c.length)throw function Ooe(n,e){return new ue(3404,!1)}();a=function Sae(n,e,t){return new Mae(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=g$(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=g$(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Kae=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ha(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ha(this._element,this._initialStyles),this._endStyles&&(ha(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(zu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zu(this._element,this._endStyles),this._endStyles=null),ha(this._element,this._initialStyles),this._state=3)}}return n})();function PS(n){let e=null;return n.forEach((t,r)=>{(function Zae(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class B${constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:C$(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Qae{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return _$(e,t)}getParentElement(e){return fS(e)}query(e,t,r){return y$(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const l=new Map,f=o.filter(I=>I instanceof B$);(function rae(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,N)=>l.set(N,T))});let m=function eae(n){return n.length?n[0]instanceof Map?n:n.map(e=>b$(e)):[]}(t).map(I=>_l(I));m=function iae(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,C$(n,a)))}}return e}(e,m,l);const y=function Wae(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=PS(e[0]),e.length>1&&(r=PS(e[e.length-1]))):e instanceof Map&&(t=PS(e)),t||r?new Kae(n,t,r):null}(e,m);return new B$(e,m,c,y)}}let Yae=(()=>{class n extends l${constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:tr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?u$(t):t;return j$(this._renderer,null,r,"register",[i]),new Xae(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Bp),fe(_r))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class Xae extends hoe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Jae(this._id,e,t||{},this._renderer)}}class Jae{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return j$(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function j$(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $$="@.disabled";let ece=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new z$("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new tce(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Bp),fe(KI),fe(Wt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class z${constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$$?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tce extends z${constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$$?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function nce(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function rce(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const H$=[{provide:l$,useClass:Yae},{provide:CS,useFactory:function sce(){return new Tae}},{provide:KI,useClass:(()=>{class n extends KI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(_r),fe(pS),fe(CS),fe(Jl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})()},{provide:Bp,useFactory:function oce(n,e,t){return new ece(n,e,t)},deps:[yT,KI,Wt]}],xS=[{provide:pS,useFactory:()=>new Qae},{provide:VR,useValue:"BrowserAnimations"},...H$],q$=[{provide:pS,useClass:v$},{provide:VR,useValue:"NoopAnimations"},...H$];let ace=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?q$:xS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=sn({providers:xS,imports:[KO]})}return n})();const G$_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class Af{constructor(e){return e}}class NS{constructor(){return(0,vr.getApps)()}}const OS=new Ie("angularfire2._apps"),lce={provide:Af,useFactory:function cce(n){return n&&1===n.length?n[0]:new Af((0,vr.getApp)())},deps:[[new qr,OS]]},uce={provide:NS,deps:[[new qr,OS]]};function dce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Af(r)}}let hce=(()=>{class n{constructor(t){(0,vr.registerVersion)("angularfire",Wc.full,"core"),(0,vr.registerVersion)("angularfire",Wc.full,"app"),(0,vr.registerVersion)("angular",Rw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(ks))};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[lce,uce]})}return n})();function fce(n,...e){return{ngModule:hce,providers:[{provide:OS,useFactory:dce(n),multi:!0,deps:[Wt,Ei,uu,...e]}]}}const pce=aC(vr.initializeApp,!0);We(35);class FS{constructor(){return cE("auth")}}class VS{constructor(e){return e}}const K$="firestore",US=new Ie("angularfire2.firestore-instances");function Ece(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new VS(r)}}const Ice={provide:class yce{constructor(){return cE(K$)}},deps:[[new qr,US]]},bce={provide:VS,useFactory:function vce(n,e){const t=oC(K$,n,e);return t&&new VS(t)},deps:[[new qr,US],Af]};let wce=(()=>{class n{constructor(){(0,vr.registerVersion)("angularfire",Wc.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[bce,Ice]})}return n})();function Tce(n,...e){return{ngModule:wce,providers:[{provide:US,useFactory:Ece(n),multi:!0,deps:[Wt,Ei,uu,NS,[new qr,FS],[new qr,Vg],...e]}]}}const Cce=aC(fte,!0);class BS{constructor(e){return e}}const Z$="storage",jS=new Ie("angularfire2.storage-instances");function Sce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new BS(r)}}const Mce={provide:class Ace{constructor(){return cE(Z$)}},deps:[[new qr,jS]]},Rce={provide:BS,useFactory:function Dce(n,e){const t=oC(Z$,n,e);return t&&new BS(t)},deps:[[new qr,jS],Af]};let Pce=(()=>{class n{constructor(){(0,vr.registerVersion)("angularfire",Wc.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=sn({providers:[Rce,Mce]})}return n})();function xce(n,...e){return{ngModule:Pce,providers:[{provide:jS,useFactory:Sce(n),multi:!0,deps:[Wt,Ei,uu,NS,[new qr,FS],[new qr,Vg],...e]}]}}const Nce=aC(bse,!0);let Oce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n,bootstrap:[doe]});static#n=this.\u0275inj=sn({imports:[KO,Kse,ace,NK,hZ,gZ,Dne,Fse,YY.initializeApp(G$_firebase),fce(()=>pce(G$_firebase)),Tce(()=>Cce()),xce(()=>Nce()),Pre,Rre]})}return n})();S7().bootstrapModule(Oce).catch(n=>console.error(n))},513:(ls,zn,We)=>{We.d(zn,{Gb:()=>Zs,Kz:()=>id,EI:()=>Ki,lT:()=>fe,Iv:()=>_c,xP:()=>Ea,Xd:()=>Rl});var P=We(861),Re=We(303),U=We(879),xe=We(58),Rt=We(537),Cn=We(878);const An="@firebase/installations",Bt="0.6.7",Dt=1e4,me=`w:${Bt}`,Ce="FIS_v2",Ye="https://firebaseinstallations.googleapis.com/v1",It=36e5,ct=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(S){return S instanceof xe.ZR&&S.code.includes("request-failed")}function Dn({projectId:S}){return`${Ye}/projects/${S}/installations`}function gn(S){return{token:S.token,requestStatus:2,expiresIn:te(S.expiresIn),creationTime:Date.now()}}function Kt(S,L){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,P.Z)(function*(S,L){const ve=(yield L.json()).error;return ct.create("request-failed",{requestName:S,serverCode:ve.code,serverMessage:ve.message,serverStatus:ve.status})})).apply(this,arguments)}function Cr({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function ft(S){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*(S){const L=yield S();return L.status>=500&&L.status<600?S():L})).apply(this,arguments)}function te(S){return Number(S.replace("s","000"))}function Nt(){return(Nt=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:L},{fid:Q}){const ve=Dn(S),Pe=Cr(S),ze=L.getImmediate({optional:!0});if(ze){const $t=yield ze.getHeartbeatsHeader();$t&&Pe.append("x-firebase-client",$t)}const mt={method:"POST",headers:Pe,body:JSON.stringify({fid:Q,authVersion:Ce,appId:S.appId,sdkVersion:me})},_t=yield ft(()=>fetch(ve,mt));if(_t.ok){const $t=yield _t.json();return{fid:$t.fid||Q,registrationStatus:2,refreshToken:$t.refreshToken,authToken:gn($t.authToken)}}throw yield Kt("Create Installation",_t)})).apply(this,arguments)}function Pn(S){return new Promise(L=>{setTimeout(L,S)})}const Et=/^[cdef][\w-]{21}$/,mn="";function cr(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const Q=function ie(S){return function dn(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Et.test(Q)?Q:mn}catch{return mn}}function se(S){return`${S.appName}!${S.appId}`}const le=new Map;function ge(S,L){const Q=se(S);Ne(Q,L),function Ft(S,L){const Q=function Qe(){return!Me&&"BroadcastChannel"in self&&(Me=new BroadcastChannel("[Firebase] FID Change"),Me.onmessage=S=>{Ne(S.data.key,S.data.fid)}),Me}();Q&&Q.postMessage({key:S,fid:L}),function Vt(){0===le.size&&Me&&(Me.close(),Me=null)}()}(Q,L)}function Ne(S,L){const Q=le.get(S);if(Q)for(const ve of Q)ve(L)}let Me=null;const _n="firebase-installations-database",hn=1,vn="firebase-installations-store";let Sn=null;function Yt(){return Sn||(Sn=(0,Cn.X3)(_n,hn,{upgrade:(S,L)=>{0===L&&S.createObjectStore(vn)}})),Sn}function qn(S,L){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,P.Z)(function*(S,L){const Q=se(S),Pe=(yield Yt()).transaction(vn,"readwrite"),ze=Pe.objectStore(vn),Ke=yield ze.get(Q);return yield ze.put(L,Q),yield Pe.done,(!Ke||Ke.fid!==L.fid)&&ge(S,L.fid),L})).apply(this,arguments)}function Hi(S){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*(S){const L=se(S),ve=(yield Yt()).transaction(vn,"readwrite");yield ve.objectStore(vn).delete(L),yield ve.done})).apply(this,arguments)}function Lt(S,L){return ai.apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(S,L){const Q=se(S),Pe=(yield Yt()).transaction(vn,"readwrite"),ze=Pe.objectStore(vn),Ke=yield ze.get(Q),mt=L(Ke);return void 0===mt?yield ze.delete(Q):yield ze.put(mt,Q),yield Pe.done,mt&&(!Ke||Ke.fid!==mt.fid)&&ge(S,mt.fid),mt})).apply(this,arguments)}function us(S){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,P.Z)(function*(S){let L;const Q=yield Lt(S.appConfig,ve=>{const Pe=function qi(S){return Fr(S||{fid:cr(),registrationStatus:0})}(ve),ze=function Zr(S,L){if(0===L.registrationStatus){if(!navigator.onLine)return{installationEntry:L,registrationPromise:Promise.reject(ct.create("app-offline"))};const Q={fid:L.fid,registrationStatus:1,registrationTime:Date.now()},ve=function qs(S,L){return Ai.apply(this,arguments)}(S,Q);return{installationEntry:Q,registrationPromise:ve}}return 1===L.registrationStatus?{installationEntry:L,registrationPromise:gr(S)}:{installationEntry:L}}(S,Pe);return L=ze.registrationPromise,ze.installationEntry});return Q.fid===mn?{installationEntry:yield L}:{installationEntry:Q,registrationPromise:L}}),Ci.apply(this,arguments)}function Ai(){return Ai=(0,P.Z)(function*(S,L){try{const Q=yield function vt(S,L){return Nt.apply(this,arguments)}(S,L);return qn(S.appConfig,Q)}catch(Q){throw rt(Q)&&409===Q.customData.serverCode?yield Hi(S.appConfig):yield qn(S.appConfig,{fid:L.fid,registrationStatus:0}),Q}}),Ai.apply(this,arguments)}function gr(S){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(S){let L=yield nn(S.appConfig);for(;1===L.registrationStatus;)yield Pn(100),L=yield nn(S.appConfig);if(0===L.registrationStatus){const{installationEntry:Q,registrationPromise:ve}=yield us(S);return ve||Q}return L})).apply(this,arguments)}function nn(S){return Lt(S,L=>{if(!L)throw ct.create("installation-not-found");return Fr(L)})}function Fr(S){return function Fn(S){return 1===S.registrationStatus&&S.registrationTime+Dt<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Di(){return(Di=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:L},Q){const ve=function cn(S,{fid:L}){return`${Dn(S)}/${L}/authTokens:generate`}(S,Q),Pe=function xt(S,{refreshToken:L}){const Q=Cr(S);return Q.append("Authorization",function Je(S){return`${Ce} ${S}`}(L)),Q}(S,Q),ze=L.getImmediate({optional:!0});if(ze){const $t=yield ze.getHeartbeatsHeader();$t&&Pe.append("x-firebase-client",$t)}const mt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:me,appId:S.appId}})},_t=yield ft(()=>fetch(ve,mt));if(_t.ok)return gn(yield _t.json());throw yield Kt("Generate Auth Token",_t)})).apply(this,arguments)}function Lr(S){return Si.apply(this,arguments)}function Si(){return Si=(0,P.Z)(function*(S,L=!1){let Q;const ve=yield Lt(S.appConfig,ze=>{if(!fs(ze))throw ct.create("not-registered");const Ke=ze.authToken;if(!L&&function Ss(S){return 2===S.requestStatus&&!function Ws(S){const L=Date.now();return L<S.creationTime||S.creationTime+S.expiresIn<L+It}(S)}(Ke))return ze;if(1===Ke.requestStatus)return Q=function ds(S,L){return lr.apply(this,arguments)}(S,L),ze;{if(!navigator.onLine)throw ct.create("app-offline");const mt=function ke(S){const L={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:L})}(ze);return Q=function Dr(S,L){return hs.apply(this,arguments)}(S,mt),mt}});return Q?yield Q:ve.authToken}),Si.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(S,L){let Q=yield En(S.appConfig);for(;1===Q.authToken.requestStatus;)yield Pn(100),Q=yield En(S.appConfig);const ve=Q.authToken;return 0===ve.requestStatus?Lr(S,L):ve})).apply(this,arguments)}function En(S){return Lt(S,L=>{if(!fs(L))throw ct.create("not-registered");return function M(S){return 1===S.requestStatus&&S.requestTime+Dt<Date.now()}(L.authToken)?Object.assign(Object.assign({},L),{authToken:{requestStatus:0}}):L})}function hs(){return hs=(0,P.Z)(function*(S,L){try{const Q=yield function Gs(S,L){return Di.apply(this,arguments)}(S,L),ve=Object.assign(Object.assign({},L),{authToken:Q});return yield qn(S.appConfig,ve),Q}catch(Q){if(!rt(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const ve=Object.assign(Object.assign({},L),{authToken:{requestStatus:0}});yield qn(S.appConfig,ve)}else yield Hi(S.appConfig);throw Q}}),hs.apply(this,arguments)}function fs(S){return void 0!==S&&2===S.registrationStatus}function b(){return(b=(0,P.Z)(function*(S){const L=S,{installationEntry:Q,registrationPromise:ve}=yield us(L);return ve?ve.catch(console.error):Lr(L).catch(console.error),Q.fid})).apply(this,arguments)}function w(){return w=(0,P.Z)(function*(S,L=!1){const Q=S;return yield function F(S){return de.apply(this,arguments)}(Q),(yield Lr(Q,L)).token}),w.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*(S){const{registrationPromise:L}=yield us(S);L&&(yield L)})).apply(this,arguments)}function po(S){return ct.create("missing-app-config-values",{valueName:S})}const ln="installations",oc=S=>{const L=S.getProvider("app").getImmediate(),Q=function Vr(S){if(!S||!S.options)throw po("App Configuration");if(!S.name)throw po("App Name");const L=["projectId","apiKey","appId"];for(const Q of L)if(!S.options[Q])throw po(Q);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(L);return{app:L,appConfig:Q,heartbeatServiceProvider:(0,Re._getProvider)(L,"heartbeat"),_delete:()=>Promise.resolve()}},ac=S=>{const L=S.getProvider("app").getImmediate(),Q=(0,Re._getProvider)(L,ln).getImmediate();return{getId:()=>function x(S){return b.apply(this,arguments)}(Q),getToken:Pe=>function D(S){return w.apply(this,arguments)}(Q,Pe)}};(function cc(){(0,Re._registerComponent)(new Rt.wA(ln,oc,"PUBLIC")),(0,Re._registerComponent)(new Rt.wA("installations-internal",ac,"PRIVATE"))})(),(0,Re.registerVersion)(An,Bt),(0,Re.registerVersion)(An,Bt,"esm2017");const fa="analytics",ue="firebase_id",lc="origin",gt=6e4,rn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uc="https://www.googletagmanager.com/gtag/js",Sr=new U.Yd("@firebase/analytics"),ur=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fi(S){if(!S.startsWith(uc)){const L=ur.create("invalid-gtag-resource",{gtagURL:S});return Sr.warn(L.message),""}return S}function xf(S){return Promise.all(S.map(L=>L.catch(Q=>Q)))}function Zu(){return(Zu=(0,P.Z)(function*(S,L,Q,ve,Pe,ze){const Ke=ve[Pe];try{if(Ke)yield L[Ke];else{const _t=(yield xf(Q)).find($t=>$t.measurementId===Pe);_t&&(yield L[_t.appId])}}catch(mt){Sr.error(mt)}S("config",Pe,ze)})).apply(this,arguments)}function Yu(){return(Yu=(0,P.Z)(function*(S,L,Q,ve,Pe){try{let ze=[];if(Pe&&Pe.send_to){let Ke=Pe.send_to;Array.isArray(Ke)||(Ke=[Ke]);const mt=yield xf(Q);for(const _t of Ke){const $t=mt.find(ps=>ps.measurementId===_t),Ur=$t&&L[$t.appId];if(!Ur){ze=[];break}ze.push(Ur)}}0===ze.length&&(ze=Object.values(L)),yield Promise.all(ze),S("event",ve,Pe||{})}catch(ze){Sr.error(ze)}})).apply(this,arguments)}const h_=30,Ju=new class ht{constructor(L={},Q=1e3){this.throttleMetadata=L,this.intervalMillis=Q}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,Q){this.throttleMetadata[L]=Q}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function ed(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Le(){return(Le=(0,P.Z)(function*(S){var L;const{appId:Q,apiKey:ve}=S,Pe={method:"GET",headers:ed(ve)},ze=rn.replace("{app-id}",Q),Ke=yield fetch(ze,Pe);if(200!==Ke.status&&304!==Ke.status){let mt="";try{const _t=yield Ke.json();null!==(L=_t.error)&&void 0!==L&&L.message&&(mt=_t.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:mt})}return Ke.json()})).apply(this,arguments)}function sn(){return(sn=(0,P.Z)(function*(S,L=Ju,Q){const{appId:ve,apiKey:Pe,measurementId:ze}=S.options;if(!ve)throw ur.create("no-app-id");if(!Pe){if(ze)return{measurementId:ze,appId:ve};throw ur.create("no-api-key")}const Ke=L.getThrottleMetadata(ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mt=new fc;return setTimeout((0,P.Z)(function*(){mt.abort()}),void 0!==Q?Q:gt),pa({appId:ve,apiKey:Pe,measurementId:ze},Ke,mt,L)})).apply(this,arguments)}function pa(S,L,Q){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,P.Z)(function*(S,{throttleEndTimeMillis:L,backoffCount:Q},ve,Pe=Ju){var ze;const{appId:Ke,measurementId:mt}=S;try{yield function Cl(S,L){return new Promise((Q,ve)=>{const Pe=Math.max(L-Date.now(),0),ze=setTimeout(Q,Pe);S.addEventListener(()=>{clearTimeout(ze),ve(ur.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(ve,L)}catch(_t){if(mt)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:Ke,measurementId:mt};throw _t}try{const _t=yield function hc(S){return Le.apply(this,arguments)}(S);return Pe.deleteThrottleMetadata(Ke),_t}catch(_t){const $t=_t;if(!function td(S){if(!(S instanceof xe.ZR&&S.customData))return!1;const L=Number(S.customData.httpStatus);return 429===L||500===L||503===L||504===L}($t)){if(Pe.deleteThrottleMetadata(Ke),mt)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:Ke,measurementId:mt};throw _t}const Ur=503===Number(null===(ze=$t?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,xe.$s)(Q,Pe.intervalMillis,h_):(0,xe.$s)(Q,Pe.intervalMillis),ps={throttleEndTimeMillis:Date.now()+Ur,backoffCount:Q+1};return Pe.setThrottleMetadata(Ke,ps),Sr.debug(`Calling attemptFetch again in ${Ur} millis`),pa(S,ps,ve,Pe)}}),Tl.apply(this,arguments)}class fc{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}let go,Ie;function Ms(){return(Ms=(0,P.Z)(function*(S,L,Q,ve,Pe){if(Pe&&Pe.global)S("event",Q,ve);else{const ze=yield L;S("event",Q,Object.assign(Object.assign({},ve),{send_to:ze}))}})).apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(S,L,Q,ve){if(ve&&ve.global)return S("set",{screen_name:Q}),Promise.resolve();S("config",yield L,{update:!0,screen_name:Q})})).apply(this,arguments)}function Ro(){return(Ro=(0,P.Z)(function*(S,L,Q,ve){if(ve&&ve.global)return S("set",{user_id:Q}),Promise.resolve();S("config",yield L,{update:!0,user_id:Q})})).apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(S,L,Q,ve){if(ve&&ve.global){const Pe={};for(const ze of Object.keys(Q))Pe[`user_properties.${ze}`]=Q[ze];return S("set",Pe),Promise.resolve()}S("config",yield L,{update:!0,user_properties:Q})})).apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(S,L){const Q=yield S;window[`ga-disable-${Q}`]=!L})).apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(){if(!(0,xe.hl)())return Sr.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(S){return Sr.warn(ur.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function ma(){return ma=(0,P.Z)(function*(S,L,Q,ve,Pe,ze,Ke){var mt;const _t=function f_(S){return sn.apply(this,arguments)}(S);_t.then(pi=>{Q[pi.measurementId]=pi.appId,S.options.measurementId&&pi.measurementId!==S.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${pi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pi=>Sr.error(pi)),L.push(_t);const $t=function mc(){return ga.apply(this,arguments)}().then(pi=>{if(pi)return ve.getId()}),[Ur,ps]=yield Promise.all([_t,$t]);(function Xu(S){const L=window.document.getElementsByTagName("script");for(const Q of Object.values(L))if(Q.src&&Q.src.includes(uc)&&Q.src.includes(S))return Q;return null})(ze)||function Ln(S,L){const Q=function Nf(S,L){let Q;return window.trustedTypes&&(Q=window.trustedTypes.createPolicy(S,L)),Q}("firebase-js-sdk-policy",{createScriptURL:fi}),ve=document.createElement("script"),Pe=`${uc}?l=${S}&id=${L}`;ve.src=Q?Q?.createScriptURL(Pe):Pe,ve.async=!0,document.head.appendChild(ve)}(ze,Ur.measurementId),Ie&&(Pe("consent","default",Ie),function xo(S){Ie=S}(void 0)),Pe("js",new Date);const Br=null!==(mt=Ke?.config)&&void 0!==mt?mt:{};return Br[lc]="firebase",Br.update=!0,null!=ps&&(Br[ue]=ps),Pe("config",Ur.measurementId,Br),go&&(Pe("set",go),function gc(S){go=S}(void 0)),Ur.measurementId}),ma.apply(this,arguments)}class rd{constructor(L){this.app=L}_delete(){return delete Rs[this.app.options.appId],Promise.resolve()}}let Rs={},Ml=[];const kf={};let Oo,Mr,_a="dataLayer",No="gtag",Gi=!1;function Rl(S){if(Gi)throw ur.create("already-initialized");S.dataLayerName&&(_a=S.dataLayerName),S.gtagName&&(No=S.gtagName)}function Wi(S,L,Q){!function Ff(){const S=[];if((0,xe.ru)()&&S.push("This is a browser extension environment."),(0,xe.zI)()||S.push("Cookies are not available."),S.length>0){const L=S.map((ve,Pe)=>`(${Pe+1}) ${ve}`).join(" "),Q=ur.create("invalid-analytics-context",{errorInfo:L});Sr.warn(Q.message)}}();const ve=S.options.appId;if(!ve)throw ur.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ur.create("no-api-key");Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rs[ve])throw ur.create("already-exists",{id:ve});if(!Gi){!function Ks(S){let L=[];Array.isArray(window[S])?L=window[S]:window[S]=L}(_a);const{wrappedGtag:ze,gtagCore:Ke}=function d_(S,L,Q,ve,Pe){let ze=function(...Ke){window[ve].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(ze=window[Pe]),window[Pe]=function Of(S,L,Q,ve){function ze(){return ze=(0,P.Z)(function*(Ke,...mt){try{if("event"===Ke){const[_t,$t]=mt;yield function Qu(S,L,Q,ve,Pe){return Yu.apply(this,arguments)}(S,L,Q,_t,$t)}else if("config"===Ke){const[_t,$t]=mt;yield function dc(S,L,Q,ve,Pe,ze){return Zu.apply(this,arguments)}(S,L,Q,ve,_t,$t)}else if("consent"===Ke){const[_t,$t]=mt;S("consent",_t,$t)}else if("get"===Ke){const[_t,$t,Ur]=mt;S("get",_t,$t,Ur)}else if("set"===Ke){const[_t]=mt;S("set",_t)}else S(Ke,...mt)}catch(_t){Sr.error(_t)}}),ze.apply(this,arguments)}return function Pe(Ke){return ze.apply(this,arguments)}}(ze,S,L,Q),{gtagCore:ze,wrappedGtag:window[Pe]}}(Rs,Ml,kf,_a,No);Mr=ze,Oo=Ke,Gi=!0}return Rs[ve]=function Sl(S,L,Q,ve,Pe,ze,Ke){return ma.apply(this,arguments)}(S,Ml,kf,L,Oo,_a,Q),new rd(S)}function Zs(){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}function fe(S,L,Q){S=(0,xe.m9)(S),function nd(S,L,Q,ve){return Ct.apply(this,arguments)}(Mr,Rs[S.app.options.appId],L,Q).catch(ve=>Sr.error(ve))}function _c(S,L,Q){S=(0,xe.m9)(S),function Dl(S,L,Q,ve){return Ro.apply(this,arguments)}(Mr,Rs[S.app.options.appId],L,Q).catch(ve=>Sr.error(ve))}function Ea(S,L,Q){S=(0,xe.m9)(S),function ci(S,L,Q,ve){return Po.apply(this,arguments)}(Mr,Rs[S.app.options.appId],L,Q).catch(ve=>Sr.error(ve))}function Ki(S,L){S=(0,xe.m9)(S),function g_(S,L){return pc.apply(this,arguments)}(Rs[S.app.options.appId],L).catch(Q=>Sr.error(Q))}function id(S,L,Q,ve){S=(0,xe.m9)(S),function Al(S,L,Q,ve,Pe){return Ms.apply(this,arguments)}(Mr,Rs[S.app.options.appId],L,Q,ve).catch(Pe=>Sr.error(Pe))}const Ps="@firebase/analytics";!function tr(){(0,Re._registerComponent)(new Rt.wA(fa,(L,{options:Q})=>Wi(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,Re._registerComponent)(new Rt.wA("analytics-internal",function S(L){try{const Q=L.getProvider(fa).getImmediate();return{logEvent:(ve,Pe,ze)=>id(Q,ve,Pe,ze)}}catch(Q){throw ur.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,Re.registerVersion)(Ps,"0.10.4"),(0,Re.registerVersion)(Ps,"0.10.4","esm2017")}()},106:(ls,zn,We)=>{We.d(zn,{Z:()=>Hn});var P=We(58),Re=We(537),U=We(303),xe=We(879);class Rt{constructor(ct,rt){this._delegate=ct,this.firebase=rt,(0,U._addComponent)(ct,new Re.wA("app-compat",()=>this,"PUBLIC")),this.container=ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this._delegate.automaticDataCollectionEnabled=ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ct=>{this._delegate.checkDestroyed(),ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ct,rt=U._DEFAULT_ENTRY_NAME){var Dn;this._delegate.checkDestroyed();const gn=this._delegate.container.getProvider(ct);return!gn.isInitialized()&&"EXPLICIT"===(null===(Dn=gn.getComponent())||void 0===Dn?void 0:Dn.instantiationMode)&&gn.initialize(),gn.getImmediate({identifier:rt})}_removeServiceInstance(ct,rt=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ct).clearInstance(rt)}_addComponent(ct){(0,U._addComponent)(this._delegate,ct)}_addOrOverwriteComponent(ct){(0,U._addOrOverwriteComponent)(this._delegate,ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const An=new P.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),me=function Dt(){const Pt=function Bt(Pt){const ct={},rt={__esModule:!0,initializeApp:function Kt(ft,Se={}){const te=U.initializeApp(ft,Se);if((0,P.r3)(ct,te.name))return ct[te.name];const Je=new Pt(te,rt);return ct[te.name]=Je,Je},app:gn,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Cr(ft){const Se=ft.name,te=Se.replace("-compat","");if(U._registerComponent(ft)&&"PUBLIC"===ft.type){const Je=(vt=gn())=>{if("function"!=typeof vt[te])throw An.create("invalid-app-argument",{appName:Se});return vt[te]()};void 0!==ft.serviceProps&&(0,P.ZB)(Je,ft.serviceProps),rt[te]=Je,Pt.prototype[te]=function(...vt){return this._getService.bind(this,Se).apply(this,ft.multipleInstances?vt:[])}}return"PUBLIC"===ft.type?rt[te]:null},removeApp:function Dn(ft){delete ct[ft]},useAsService:function xt(ft,Se){return"serverAuth"===Se?null:Se},modularAPIs:U}};function gn(ft){if(!(0,P.r3)(ct,ft=ft||U._DEFAULT_ENTRY_NAME))throw An.create("no-app",{appName:ft});return ct[ft]}return rt.default=rt,Object.defineProperty(rt,"apps",{get:function Zt(){return Object.keys(ct).map(ft=>ct[ft])}}),gn.App=Pt,rt}(Rt);return Pt.INTERNAL=Object.assign(Object.assign({},Pt.INTERNAL),{createFirebaseNamespace:Dt,extendNamespace:function ct(rt){(0,P.ZB)(Pt,rt)},createSubscribe:P.ne,ErrorFactory:P.LL,deepExtend:P.ZB}),Pt}(),Ce=new xe.Yd("@firebase/app-compat");if((0,P.jU)()&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Hn=me;!function jt(Pt){(0,U.registerVersion)("@firebase/app-compat","0.2.35",Pt)}()},303:(ls,zn,We)=>{We.r(zn),We.d(zn,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>se,_addComponent:()=>Ne,_addOrOverwriteComponent:()=>Ft,_apps:()=>ge,_clearComponents:()=>vn,_components:()=>ae,_getProvider:()=>Qe,_isFirebaseApp:()=>_n,_isFirebaseServerApp:()=>hn,_registerComponent:()=>Me,_removeServiceInstance:()=>Vt,_serverApps:()=>Ee,deleteApp:()=>Ci,getApp:()=>ai,getApps:()=>us,initializeApp:()=>oi,initializeServerApp:()=>Lt,onLog:()=>qs,registerVersion:()=>Zr,setLogLevel:()=>Ai});var P=We(861),Re=We(537),U=We(879),xe=We(58),Rt=We(878);class Cn{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map(x=>{if(function An(ke){const M=ke.getComponent();return"VERSION"===M?.type}(x)){const b=x.getImmediate();return`${b.library}/${b.version}`}return null}).filter(x=>x).join(" ")}}const Bt="@firebase/app",Dt="0.10.5",me=new U.Yd("@firebase/app"),se="[DEFAULT]",le={[Bt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ge=new Map,Ee=new Map,ae=new Map;function Ne(ke,M){try{ke.container.addComponent(M)}catch(x){me.debug(`Component ${M.name} failed to register with FirebaseApp ${ke.name}`,x)}}function Ft(ke,M){ke.container.addOrOverwriteComponent(M)}function Me(ke){const M=ke.name;if(ae.has(M))return me.debug(`There were multiple attempts to register component ${M}.`),!1;ae.set(M,ke);for(const x of ge.values())Ne(x,ke);for(const x of Ee.values())Ne(x,ke);return!0}function Qe(ke,M){const x=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return x&&x.triggerHeartbeat(),ke.container.getProvider(M)}function Vt(ke,M,x=se){Qe(ke,M).clearInstance(x)}function _n(ke){return void 0!==ke.options}function hn(ke){return void 0!==ke.settings}function vn(){ae.clear()}const Yt=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qn{constructor(M,x,b){this._isDeleted=!1,this._options=Object.assign({},M),this._config=Object.assign({},x),this._name=x.name,this._automaticDataCollectionEnabled=x.automaticDataCollectionEnabled,this._container=b,this.container.addComponent(new Re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(M){this.checkDestroyed(),this._automaticDataCollectionEnabled=M}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(M){this._isDeleted=M}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}class Ar extends qn{constructor(M,x,b,D){const w=void 0!==x.automaticDataCollectionEnabled&&x.automaticDataCollectionEnabled,F={name:b,automaticDataCollectionEnabled:w};super(void 0!==M.apiKey?M:M.options,F,D),this._serverConfig=Object.assign({automaticDataCollectionEnabled:w},x),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,x.releaseOnDeref=void 0,Zr(Bt,Dt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(M){this.isDeleted||(this._refCount++,void 0!==M&&this._finalizationRegistry.register(M,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ci(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yt.create("server-app-deleted")}}const Hi="10.12.2";function oi(ke,M={}){let x=ke;"object"!=typeof M&&(M={name:M});const b=Object.assign({name:se,automaticDataCollectionEnabled:!1},M),D=b.name;if("string"!=typeof D||!D)throw Yt.create("bad-app-name",{appName:String(D)});if(x||(x=(0,xe.aH)()),!x)throw Yt.create("no-options");const w=ge.get(D);if(w){if((0,xe.vZ)(x,w.options)&&(0,xe.vZ)(b,w.config))return w;throw Yt.create("duplicate-app",{appName:D})}const F=new Re.H0(D);for(const Oe of ae.values())F.addComponent(Oe);const de=new qn(x,b,F);return ge.set(D,de),de}function Lt(ke,M){if((0,xe.jU)())throw Yt.create("invalid-server-app-environment");let x;void 0===M.automaticDataCollectionEnabled&&(M.automaticDataCollectionEnabled=!1),x=_n(ke)?ke.options:ke;const b=Object.assign(Object.assign({},M),x);if(void 0!==b.releaseOnDeref&&delete b.releaseOnDeref,void 0!==M.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Yt.create("finalization-registry-not-supported",{});const w=""+($e=JSON.stringify(b),[...$e].reduce((pt,Xt)=>Math.imul(31,pt)+Xt.charCodeAt(0)|0,0)),F=Ee.get(w);var $e;if(F)return F.incRefCount(M.releaseOnDeref),F;const de=new Re.H0(w);for(const $e of ae.values())de.addComponent($e);const Oe=new Ar(x,M,w,de);return Ee.set(w,Oe),Oe}function ai(ke=se){const M=ge.get(ke);if(!M&&ke===se&&(0,xe.aH)())return oi();if(!M)throw Yt.create("no-app",{appName:ke});return M}function us(){return Array.from(ge.values())}function Ci(ke){return qi.apply(this,arguments)}function qi(){return(qi=(0,P.Z)(function*(ke){let M=!1;const x=ke.name;ge.has(x)?(M=!0,ge.delete(x)):Ee.has(x)&&ke.decRefCount()<=0&&(Ee.delete(x),M=!0),M&&(yield Promise.all(ke.container.getProviders().map(b=>b.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function Zr(ke,M,x){var b;let D=null!==(b=le[ke])&&void 0!==b?b:ke;x&&(D+=`-${x}`);const w=D.match(/\s|\//),F=M.match(/\s|\//);if(w||F){const de=[`Unable to register library "${D}" with version "${M}":`];return w&&de.push(`library name "${D}" contains illegal characters (whitespace or "/")`),w&&F&&de.push("and"),F&&de.push(`version name "${M}" contains illegal characters (whitespace or "/")`),void me.warn(de.join(" "))}Me(new Re.wA(`${D}-version`,()=>({library:D,version:M}),"VERSION"))}function qs(ke,M){if(null!==ke&&"function"!=typeof ke)throw Yt.create("invalid-log-argument");(0,U.Am)(ke,M)}function Ai(ke){(0,U.Ub)(ke)}const gr="firebase-heartbeat-database",Qr=1,nn="firebase-heartbeat-store";let Fr=null;function Fn(){return Fr||(Fr=(0,Rt.X3)(gr,Qr,{upgrade:(ke,M)=>{if(0===M)try{ke.createObjectStore(nn)}catch(x){console.warn(x)}}}).catch(ke=>{throw Yt.create("idb-open",{originalErrorMessage:ke.message})})),Fr}function Di(){return(Di=(0,P.Z)(function*(ke){try{const x=(yield Fn()).transaction(nn),b=yield x.objectStore(nn).get(Si(ke));return yield x.done,b}catch(M){if(M instanceof xe.ZR)me.warn(M.message);else{const x=Yt.create("idb-get",{originalErrorMessage:M?.message});me.warn(x.message)}}})).apply(this,arguments)}function cn(ke,M){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,P.Z)(function*(ke,M){try{const b=(yield Fn()).transaction(nn,"readwrite");yield b.objectStore(nn).put(M,Si(ke)),yield b.done}catch(x){if(x instanceof xe.ZR)me.warn(x.message);else{const b=Yt.create("idb-set",{originalErrorMessage:x?.message});me.warn(b.message)}}})).apply(this,arguments)}function Si(ke){return`${ke.name}!${ke.options.appId}`}class En{constructor(M){this.container=M,this._heartbeatsCache=null;const x=this.container.getProvider("app").getImmediate();this._storage=new fs(x),this._heartbeatsCachePromise=this._storage.read().then(b=>(this._heartbeatsCache=b,b))}triggerHeartbeat(){var M=this;return(0,P.Z)(function*(){var x,b;const w=M.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),F=Dr();if((null!=(null===(x=M._heartbeatsCache)||void 0===x?void 0:x.heartbeats)||(M._heartbeatsCache=yield M._heartbeatsCachePromise,null!=(null===(b=M._heartbeatsCache)||void 0===b?void 0:b.heartbeats)))&&M._heartbeatsCache.lastSentHeartbeatDate!==F&&!M._heartbeatsCache.heartbeats.some(de=>de.date===F))return M._heartbeatsCache.heartbeats.push({date:F,agent:w}),M._heartbeatsCache.heartbeats=M._heartbeatsCache.heartbeats.filter(de=>{const Oe=new Date(de.date).valueOf();return Date.now()-Oe<=2592e6}),M._storage.overwrite(M._heartbeatsCache)})()}getHeartbeatsHeader(){var M=this;return(0,P.Z)(function*(){var x;if(null===M._heartbeatsCache&&(yield M._heartbeatsCachePromise),null==(null===(x=M._heartbeatsCache)||void 0===x?void 0:x.heartbeats)||0===M._heartbeatsCache.heartbeats.length)return"";const b=Dr(),{heartbeatsToSend:D,unsentEntries:w}=function hs(ke,M=1024){const x=[];let b=ke.slice();for(const D of ke){const w=x.find(F=>F.agent===D.agent);if(w){if(w.dates.push(D.date),Ss(x)>M){w.dates.pop();break}}else if(x.push({agent:D.agent,dates:[D.date]}),Ss(x)>M){x.pop();break}b=b.slice(1)}return{heartbeatsToSend:x,unsentEntries:b}}(M._heartbeatsCache.heartbeats),F=(0,xe.L)(JSON.stringify({version:2,heartbeats:D}));return M._heartbeatsCache.lastSentHeartbeatDate=b,w.length>0?(M._heartbeatsCache.heartbeats=w,yield M._storage.overwrite(M._heartbeatsCache)):(M._heartbeatsCache.heartbeats=[],M._storage.overwrite(M._heartbeatsCache)),F})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class fs{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var M=this;return(0,P.Z)(function*(){if(yield M._canUseIndexedDBPromise){const b=yield function Gs(ke){return Di.apply(this,arguments)}(M.app);return b?.heartbeats?b:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(M){var x=this;return(0,P.Z)(function*(){var b;if(yield x._canUseIndexedDBPromise){const w=yield x.read();return cn(x.app,{lastSentHeartbeatDate:null!==(b=M.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:M.heartbeats})}})()}add(M){var x=this;return(0,P.Z)(function*(){var b;if(yield x._canUseIndexedDBPromise){const w=yield x.read();return cn(x.app,{lastSentHeartbeatDate:null!==(b=M.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:[...w.heartbeats,...M.heartbeats]})}})()}}function Ss(ke){return(0,xe.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function Ws(ke){Me(new Re.wA("platform-logger",M=>new Cn(M),"PRIVATE")),Me(new Re.wA("heartbeat",M=>new En(M),"PRIVATE")),Zr(Bt,Dt,ke),Zr(Bt,Dt,"esm2017"),Zr("fire-js","")}("")},537:(ls,zn,We)=>{We.d(zn,{H0:()=>Bt,wA:()=>U});var P=We(861),Re=We(58);class U{constructor(me,Ce,Ye){this.name=me,this.instanceFactory=Ce,this.type=Ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const xe="[DEFAULT]";class Rt{constructor(me,Ce){this.name=me,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const Ce=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(Ce)){const Ye=new Re.BH;if(this.instancesDeferred.set(Ce,Ye),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const It=this.getOrInitializeService({instanceIdentifier:Ce});It&&Ye.resolve(It)}catch{}}return this.instancesDeferred.get(Ce).promise}getImmediate(me){var Ce;const Ye=this.normalizeInstanceIdentifier(me?.identifier),It=null!==(Ce=me?.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(Ye)&&!this.shouldAutoInitialize()){if(It)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ye})}catch(jt){if(It)return null;throw jt}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function An(Dt){return"EAGER"===Dt.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:xe})}catch{}for(const[Ce,Ye]of this.instancesDeferred.entries()){const It=this.normalizeInstanceIdentifier(Ce);try{const jt=this.getOrInitializeService({instanceIdentifier:It});Ye.resolve(jt)}catch{}}}}clearInstance(me=xe){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,P.Z)(function*(){const Ce=Array.from(me.instances.values());yield Promise.all([...Ce.filter(Ye=>"INTERNAL"in Ye).map(Ye=>Ye.INTERNAL.delete()),...Ce.filter(Ye=>"_delete"in Ye).map(Ye=>Ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=xe){return this.instances.has(me)}getOptions(me=xe){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:Ce={}}=me,Ye=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(Ye))throw Error(`${this.name}(${Ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const It=this.getOrInitializeService({instanceIdentifier:Ye,options:Ce});for(const[jt,Hn]of this.instancesDeferred.entries())Ye===this.normalizeInstanceIdentifier(jt)&&Hn.resolve(It);return It}onInit(me,Ce){var Ye;const It=this.normalizeInstanceIdentifier(Ce),jt=null!==(Ye=this.onInitCallbacks.get(It))&&void 0!==Ye?Ye:new Set;jt.add(me),this.onInitCallbacks.set(It,jt);const Hn=this.instances.get(It);return Hn&&me(Hn,It),()=>{jt.delete(me)}}invokeOnInitCallbacks(me,Ce){const Ye=this.onInitCallbacks.get(Ce);if(Ye)for(const It of Ye)try{It(me,Ce)}catch{}}getOrInitializeService({instanceIdentifier:me,options:Ce={}}){let Ye=this.instances.get(me);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Dt=me,Dt===xe?void 0:Dt),options:Ce}),this.instances.set(me,Ye),this.instancesOptions.set(me,Ce),this.invokeOnInitCallbacks(Ye,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,Ye)}catch{}var Dt;return Ye||null}normalizeInstanceIdentifier(me=xe){return this.component?this.component.multipleInstances?me:xe:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Bt{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const Ce=this.getProvider(me.name);if(Ce.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);Ce.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const Ce=new Rt(me,this);return this.providers.set(me,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},879:(ls,zn,We)=>{We.d(zn,{Am:()=>Dt,Ub:()=>Bt,Yd:()=>An,in:()=>Re});const P=[];var Re=function(me){return me[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",me}(Re||{});const U={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},xe=Re.INFO,Rt={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},Cn=(me,Ce,...Ye)=>{if(Ce<me.logLevel)return;const It=(new Date).toISOString(),jt=Rt[Ce];if(!jt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[jt](`[${It}]  ${me.name}:`,...Ye)};class An{constructor(Ce){this.name=Ce,this._logLevel=xe,this._logHandler=Cn,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in Re))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?U[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...Ce),this._logHandler(this,Re.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...Ce),this._logHandler(this,Re.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...Ce),this._logHandler(this,Re.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...Ce),this._logHandler(this,Re.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...Ce),this._logHandler(this,Re.ERROR,...Ce)}}function Bt(me){P.forEach(Ce=>{Ce.setLogLevel(me)})}function Dt(me,Ce){for(const Ye of P){let It=null;Ce&&Ce.level&&(It=U[Ce.level]),Ye.userLogHandler=null===me?null:(jt,Hn,...Pt)=>{const ct=Pt.map(rt=>{if(null==rt)return null;if("string"==typeof rt)return rt;if("number"==typeof rt||"boolean"==typeof rt)return rt.toString();if(rt instanceof Error)return rt.message;try{return JSON.stringify(rt)}catch{return null}}).filter(rt=>rt).join(" ");Hn>=(It??jt.logLevel)&&me({level:Re[Hn].toLowerCase(),message:ct,args:Pt,type:jt.name})}}}},365:(ls,zn,We)=>{We.r(zn);var P=We(861),Re=We(106),U=We(35),xe=We(58),An=(We(303),We(879),We(537));function Bt(){return window}function Ce(){return Ce=(0,P.Z)(function*(b,D,w){var F;const{BuildInfo:de}=Bt();(0,U.au)(D.sessionId,"AuthEvent did not contain a session ID");const Oe=yield function rt(b){return Dn.apply(this,arguments)}(D.sessionId),$e={};return(0,U.av)()?$e.ibi=de.packageName:(0,U.aw)()?$e.apn=de.packageName:(0,U.ax)(b,"operation-not-supported-in-this-environment"),de.displayName&&($e.appDisplayName=de.displayName),$e.sessionId=Oe,(0,U.ay)(b,w,D.type,void 0,null!==(F=D.eventId)&&void 0!==F?F:void 0,$e)}),Ce.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(b){const{BuildInfo:D}=Bt(),w={};(0,U.av)()?w.iosBundleId=D.packageName:(0,U.aw)()?w.androidPackageName=D.packageName:(0,U.ax)(b,"operation-not-supported-in-this-environment"),yield(0,U.az)(b,w)})).apply(this,arguments)}function Pt(){return(Pt=(0,P.Z)(function*(b,D,w){const{cordova:F}=Bt();let de=()=>{};try{yield new Promise((Oe,$e)=>{let pt=null;function Xt(){var st;Oe();const Vr=null===(st=F.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Vr&&Vr(),"function"==typeof w?.close&&w.close()}function Fe(){pt||(pt=window.setTimeout(()=>{$e((0,U.aB)(b,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===document?.visibilityState&&Fe()}D.addPassiveListener(Xt),document.addEventListener("resume",Fe,!1),(0,U.aw)()&&document.addEventListener("visibilitychange",In,!1),de=()=>{D.removePassiveListener(Xt),document.removeEventListener("resume",Fe,!1),document.removeEventListener("visibilitychange",In,!1),pt&&window.clearTimeout(pt)}})}finally{de()}})).apply(this,arguments)}function Dn(){return(Dn=(0,P.Z)(function*(b){const D=function gn(b){if((0,U.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const D=new ArrayBuffer(b.length),w=new Uint8Array(D);for(let F=0;F<b.length;F++)w[F]=b.charCodeAt(F);return w}(b),w=yield crypto.subtle.digest("SHA-256",D);return Array.from(new Uint8Array(w)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Zt extends U.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(D=>{this.resolveInialized=D})}addPassiveListener(D){this.passiveListeners.add(D)}removePassiveListener(D){this.passiveListeners.delete(D)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(D){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(D)),super.onEvent(D)}initialized(){var D=this;return(0,P.Z)(function*(){yield D.initPromise})()}}function ft(b){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*(b){const D=yield vt()._get(Nt(b));return D&&(yield vt()._remove(Nt(b))),D})).apply(this,arguments)}function Je(){const b=[];for(let w=0;w<20;w++){const F=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(F))}return b.join("")}function vt(){return(0,U.aE)(U.b)}function Nt(b){return(0,U.aF)("authEvent",b.config.apiKey,b.name)}function Et(b){if(!b?.includes("?"))return{};const[D,...w]=b.split("?");return(0,xe.zd)(w.join("?"))}const ie=class cr{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aG,this._overrideRedirectResult=U.aH}_initialize(D){var w=this;return(0,P.Z)(function*(){const F=D._key();let de=w.eventManagers.get(F);return de||(de=new Zt(D),w.eventManagers.set(F,de),w.attachCallbackListeners(D,de)),de})()}_openPopup(D){(0,U.ax)(D,"operation-not-supported-in-this-environment")}_openRedirect(D,w,F,de){var Oe=this;return(0,P.Z)(function*(){!function ct(b){var D,w,F,de,Oe,$e,pt,Xt,Fe,In;const st=Bt();(0,U.aC)("function"==typeof(null===(D=st?.universalLinks)||void 0===D?void 0:D.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aC)(typeof(null===(w=st?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aC)("function"==typeof(null===(Oe=null===(de=null===(F=st?.cordova)||void 0===F?void 0:F.plugins)||void 0===de?void 0:de.browsertab)||void 0===Oe?void 0:Oe.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aC)("function"==typeof(null===(Xt=null===(pt=null===($e=st?.cordova)||void 0===$e?void 0:$e.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===Xt?void 0:Xt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aC)("function"==typeof(null===(In=null===(Fe=st?.cordova)||void 0===Fe?void 0:Fe.InAppBrowser)||void 0===In?void 0:In.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(D);const $e=yield Oe._initialize(D);yield $e.initialized(),$e.resetRedirect(),(0,U.aI)(),yield Oe._originValidation(D);const pt=function Cr(b,D,w=null){return{type:D,eventId:w,urlResponse:null,sessionId:Je(),postBody:null,tenantId:b.tenantId,error:(0,U.aB)(b,"no-auth-event")}}(D,F,de);yield function xt(b,D){return vt()._set(Nt(b),D)}(D,pt);const Xt=yield function me(b,D,w){return Ce.apply(this,arguments)}(D,pt,w),Fe=yield function jt(b){const{cordova:D}=Bt();return new Promise(w=>{D.plugins.browsertab.isAvailable(F=>{let de=null;F?D.plugins.browsertab.openUrl(b):de=D.InAppBrowser.open(b,(0,U.aA)()?"_blank":"_system","location=yes"),w(de)})})}(Xt);return function Hn(b,D,w){return Pt.apply(this,arguments)}(D,$e,Fe)})()}_isIframeWebStorageSupported(D,w){throw new Error("Method not implemented.")}_originValidation(D){const w=D._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Ye(b){return It.apply(this,arguments)}(D)),this.originValidationPromises[w]}attachCallbackListeners(D,w){const{universalLinks:F,handleOpenURL:de,BuildInfo:Oe}=Bt(),$e=setTimeout((0,P.Z)(function*(){yield ft(D),w.onEvent(se())}),500),pt=function(){var In=(0,P.Z)(function*(st){clearTimeout($e);const Vr=yield ft(D);let po=null;Vr&&st?.url&&(po=function te(b,D){var w,F;const de=function dn(b){const D=Et(b),w=D.link?decodeURIComponent(D.link):void 0,F=Et(w).link,de=D.deep_link_id?decodeURIComponent(D.deep_link_id):void 0;return Et(de).link||de||F||w||b}(D);if(de.includes("/__/auth/callback")){const Oe=Et(de),$e=Oe.firebaseError?function Pn(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Oe.firebaseError)):null,pt=null===(F=null===(w=$e?.code)||void 0===w?void 0:w.split("auth/"))||void 0===F?void 0:F[1],Xt=pt?(0,U.aB)(pt):null;return Xt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Xt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:de,postBody:null}}return null}(Vr,st.url)),w.onEvent(po||se())});return function(Vr){return In.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,pt);const Xt=de,Fe=`${Oe.packageName.toLowerCase()}://`;Bt().handleOpenURL=function(){var In=(0,P.Z)(function*(st){if(st.toLowerCase().startsWith(Fe)&&pt({url:st}),"function"==typeof Xt)try{Xt(st)}catch(Vr){console.error(Vr)}});return function(st){return In.apply(this,arguments)}}()}};function se(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.aB)("no-auth-event")}}function Ne(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Me(b=(0,xe.z$)()){return!("file:"!==Ne()&&"ionic:"!==Ne()&&"capacitor:"!==Ne()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function vn(){try{const b=self.localStorage,D=U.aN();if(b)return b.setItem(D,"1"),b.removeItem(D),!function hn(b=(0,xe.z$)()){return function Vt(){return(0,xe.w1)()&&11===document?.documentMode}()||function _n(b=(0,xe.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,xe.hl)()}catch{return Sn()&&(0,xe.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yt(){return(function Ft(){return"http:"===Ne()||"https:"===Ne()}()||(0,xe.ru)()||Me())&&!function Qe(){return(0,xe.b$)()||(0,xe.UG)()}()&&vn()&&!Sn()}function qn(){return Me()&&typeof document<"u"}function Hi(){return(Hi=(0,P.Z)(function*(){return!!qn()&&new Promise(b=>{const D=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(D),b(!0)})})})).apply(this,arguments)}const Lt={LOCAL:"local",NONE:"none",SESSION:"session"},ai=U.aC,us="persistence";function qi(b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(b){yield b._initializationPromise;const D=Ai(),w=U.aF(us,b.config.apiKey,b.name);D&&D.setItem(w,b._getPersistence())})).apply(this,arguments)}function Ai(){var b;try{return(null===(b=function oi(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const gr=U.aC;class Qr{constructor(){this.browserResolver=U.aE(U.k),this.cordovaResolver=U.aE(ie),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aG,this._overrideRedirectResult=U.aH}_initialize(D){var w=this;return(0,P.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(D)})()}_openPopup(D,w,F,de){var Oe=this;return(0,P.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openPopup(D,w,F,de)})()}_openRedirect(D,w,F,de){var Oe=this;return(0,P.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openRedirect(D,w,F,de)})()}_isIframeWebStorageSupported(D,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(D,w)}_originValidation(D){return this.assertedUnderlyingResolver._originValidation(D)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var D=this;return(0,P.Z)(function*(){if(D.underlyingResolver)return;const w=yield function Ar(){return Hi.apply(this,arguments)}();D.underlyingResolver=w?D.cordovaResolver:D.browserResolver})()}}function nn(b){return b.unwrap()}function Fn(b){return Di(b)}function Di(b){const{_tokenResponse:D}=b instanceof xe.ZR?b.customData:b;if(!D)return null;if(!(b instanceof xe.ZR)&&"temporaryProof"in D&&"phoneNumber"in D)return U.P.credentialFromResult(b);const w=D.providerId;if(!w||w===U.p.PASSWORD)return null;let F;switch(w){case U.p.GOOGLE:F=U.X;break;case U.p.FACEBOOK:F=U.W;break;case U.p.GITHUB:F=U.Y;break;case U.p.TWITTER:F=U.$;break;default:const{oauthIdToken:de,oauthAccessToken:Oe,oauthTokenSecret:$e,pendingToken:pt,nonce:Xt}=D;return Oe||$e||de||pt?pt?w.startsWith("saml.")?U.aQ._create(w,pt):U.N._fromParams({providerId:w,signInMethod:w,pendingToken:pt,idToken:de,accessToken:Oe}):new U.Z(w).credential({idToken:de,accessToken:Oe,rawNonce:Xt}):null}return b instanceof xe.ZR?F.credentialFromError(b):F.credentialFromResult(b)}function cn(b,D){return D.catch(w=>{throw w instanceof xe.ZR&&function Gs(b,D){var w;const F=null===(w=D.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===D?.code)D.resolver=new ds(b,U.as(b,D));else if(F){const de=Di(D),Oe=D;de&&(Oe.credential=de,Oe.tenantId=F.tenantId||void 0,Oe.email=F.email||void 0,Oe.phoneNumber=F.phoneNumber||void 0)}}(b,w),w}).then(w=>{const de=w.user;return{operationType:w.operationType,credential:Fn(w),additionalUserInfo:U.aq(w),user:lr.getOrCreate(de)}})}function Lr(b,D){return Si.apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(b,D){const w=yield D;return{verificationId:w.verificationId,confirm:F=>cn(b,w.confirm(F))}})).apply(this,arguments)}class ds{constructor(D,w){this.resolver=w,this.auth=function Fr(b){return b.wrapped()}(D)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(D){return cn(nn(this.auth),this.resolver.resolveSignIn(D))}}class lr{constructor(D){this._delegate=D,this.multiFactor=U.at(D)}static getOrCreate(D){return lr.USER_MAP.has(D)||lr.USER_MAP.set(D,new lr(D)),lr.USER_MAP.get(D)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(D){return this._delegate.getIdTokenResult(D)}getIdToken(D){return this._delegate.getIdToken(D)}linkAndRetrieveDataWithCredential(D){return this.linkWithCredential(D)}linkWithCredential(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,U.a2(w._delegate,D))})()}linkWithPhoneNumber(D,w){var F=this;return(0,P.Z)(function*(){return Lr(F.auth,U.l(F._delegate,D,w))})()}linkWithPopup(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,U.d(w._delegate,D,Qr))})()}linkWithRedirect(D){var w=this;return(0,P.Z)(function*(){return yield qi(U.aJ(w.auth)),U.g(w._delegate,D,Qr)})()}reauthenticateAndRetrieveDataWithCredential(D){return this.reauthenticateWithCredential(D)}reauthenticateWithCredential(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,U.a3(w._delegate,D))})()}reauthenticateWithPhoneNumber(D,w){return Lr(this.auth,U.r(this._delegate,D,w))}reauthenticateWithPopup(D){return cn(this.auth,U.e(this._delegate,D,Qr))}reauthenticateWithRedirect(D){var w=this;return(0,P.Z)(function*(){return yield qi(U.aJ(w.auth)),U.h(w._delegate,D,Qr)})()}sendEmailVerification(D){return U.ag(this._delegate,D)}unlink(D){var w=this;return(0,P.Z)(function*(){return yield U.ap(w._delegate,D),w})()}updateEmail(D){return U.al(this._delegate,D)}updatePassword(D){return U.am(this._delegate,D)}updatePhoneNumber(D){return U.u(this._delegate,D)}updateProfile(D){return U.ak(this._delegate,D)}verifyBeforeUpdateEmail(D,w){return U.ah(this._delegate,D,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lr.USER_MAP=new WeakMap;const En=U.aC;let Dr=(()=>{class b{constructor(w,F){if(this.app=w,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=w.options;En(de,"invalid-api-key",{appName:w.name}),En(de,"invalid-api-key",{appName:w.name});const Oe=typeof window<"u"?Qr:void 0;this._delegate=F.initialize({options:{persistence:fs(de,w.name),popupRedirectResolver:Oe}}),this._delegate._updateErrorMap(U.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,F){U.K(this._delegate,w,F)}applyActionCode(w){return U.a7(this._delegate,w)}checkActionCode(w){return U.a8(this._delegate,w)}confirmPasswordReset(w,F){return U.a6(this._delegate,w,F)}createUserWithEmailAndPassword(w,F){var de=this;return(0,P.Z)(function*(){return cn(de._delegate,U.aa(de._delegate,w,F))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return U.af(this._delegate,w)}isSignInWithEmailLink(w){return U.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,P.Z)(function*(){En(Yt(),w._delegate,"operation-not-supported-in-this-environment");const F=yield U.j(w._delegate,Qr);return F?cn(w._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function le(b,D){(0,U.aJ)(b)._logFramework(D)}(this._delegate,w)}onAuthStateChanged(w,F,de){const{next:Oe,error:$e,complete:pt}=hs(w,F,de);return this._delegate.onAuthStateChanged(Oe,$e,pt)}onIdTokenChanged(w,F,de){const{next:Oe,error:$e,complete:pt}=hs(w,F,de);return this._delegate.onIdTokenChanged(Oe,$e,pt)}sendSignInLinkToEmail(w,F){return U.ac(this._delegate,w,F)}sendPasswordResetEmail(w,F){return U.a5(this._delegate,w,F||void 0)}setPersistence(w){var F=this;return(0,P.Z)(function*(){let de;switch(function Ci(b,D){ai(Object.values(Lt).includes(D),b,"invalid-persistence-type"),(0,xe.b$)()?ai(D!==Lt.SESSION,b,"unsupported-persistence-type"):(0,xe.UG)()?ai(D===Lt.NONE,b,"unsupported-persistence-type"):Sn()?ai(D===Lt.NONE||D===Lt.LOCAL&&(0,xe.hl)(),b,"unsupported-persistence-type"):ai(D===Lt.NONE||vn(),b,"unsupported-persistence-type")}(F._delegate,w),w){case Lt.SESSION:de=U.a;break;case Lt.LOCAL:de=(yield U.aE(U.i)._isAvailable())?U.i:U.b;break;case Lt.NONE:de=U.U;break;default:return U.ax("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return cn(this._delegate,U.a0(this._delegate))}signInWithCredential(w){return cn(this._delegate,U.a1(this._delegate,w))}signInWithCustomToken(w){return cn(this._delegate,U.a4(this._delegate,w))}signInWithEmailAndPassword(w,F){return cn(this._delegate,U.ab(this._delegate,w,F))}signInWithEmailLink(w,F){return cn(this._delegate,U.ae(this._delegate,w,F))}signInWithPhoneNumber(w,F){return Lr(this._delegate,U.s(this._delegate,w,F))}signInWithPopup(w){var F=this;return(0,P.Z)(function*(){return En(Yt(),F._delegate,"operation-not-supported-in-this-environment"),cn(F._delegate,U.c(F._delegate,w,Qr))})()}signInWithRedirect(w){var F=this;return(0,P.Z)(function*(){return En(Yt(),F._delegate,"operation-not-supported-in-this-environment"),yield qi(F._delegate),U.f(F._delegate,w,Qr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return U.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Lt,b})();function hs(b,D,w){let F=b;"function"!=typeof b&&({next:F,error:D,complete:w}=b);const de=F;return{next:$e=>de($e&&lr.getOrCreate($e)),error:D,complete:w}}function fs(b,D){const w=function qs(b,D){const w=Ai();if(!w)return[];const F=U.aF(us,b,D);switch(w.getItem(F)){case Lt.NONE:return[U.U];case Lt.LOCAL:return[U.i,U.a];case Lt.SESSION:return[U.a];default:return[]}}(b,D);if(typeof self<"u"&&!w.includes(U.i)&&w.push(U.i),typeof window<"u")for(const F of[U.b,U.a])w.includes(F)||w.push(F);return w.includes(U.U)||w.push(U.U),w}class Ss{constructor(){this.providerId="phone",this._delegate=new U.P(nn(Re.Z.auth()))}static credential(D,w){return U.P.credential(D,w)}verifyPhoneNumber(D,w){return this._delegate.verifyPhoneNumber(D,w)}unwrap(){return this._delegate}}Ss.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Ss.PROVIDER_ID=U.P.PROVIDER_ID;const Ws=U.aC;class ke{constructor(D,w,F=Re.Z.app()){var de;Ws(null===(de=F.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new U.R(F.auth(),D,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function x(b){b.INTERNAL.registerComponent(new An.wA("auth-compat",D=>{const w=D.getProvider("app-compat").getImmediate(),F=D.getProvider("auth");return new Dr(w,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.V,FacebookAuthProvider:U.W,GithubAuthProvider:U.Y,GoogleAuthProvider:U.X,OAuthProvider:U.Z,SAMLAuthProvider:U._,PhoneAuthProvider:Ss,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:ke,TwitterAuthProvider:U.$,Auth:Dr,AuthCredential:U.L,Error:xe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.9")}(Re.Z)},878:(ls,zn,We)=>{We.d(zn,{X3:()=>gn});var P=We(861);const Re=(Se,te)=>te.some(Je=>Se instanceof Je);let U,xe;const An=new WeakMap,Bt=new WeakMap,Dt=new WeakMap,me=new WeakMap,Ce=new WeakMap;let jt={get(Se,te,Je){if(Se instanceof IDBTransaction){if("done"===te)return Bt.get(Se);if("objectStoreNames"===te)return Se.objectStoreNames||Dt.get(Se);if("store"===te)return Je.objectStoreNames[1]?void 0:Je.objectStore(Je.objectStoreNames[0])}return rt(Se[te])},set:(Se,te,Je)=>(Se[te]=Je,!0),has:(Se,te)=>Se instanceof IDBTransaction&&("done"===te||"store"===te)||te in Se};function ct(Se){return"function"==typeof Se?function Pt(Se){return Se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Cn(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Se)?function(...te){return Se.apply(Dn(this),te),rt(An.get(this))}:function(...te){return rt(Se.apply(Dn(this),te))}:function(te,...Je){const vt=Se.call(Dn(this),te,...Je);return Dt.set(vt,te.sort?te.sort():[te]),rt(vt)}}(Se):(Se instanceof IDBTransaction&&function It(Se){if(Bt.has(Se))return;const te=new Promise((Je,vt)=>{const Nt=()=>{Se.removeEventListener("complete",Pn),Se.removeEventListener("error",dn),Se.removeEventListener("abort",dn)},Pn=()=>{Je(),Nt()},dn=()=>{vt(Se.error||new DOMException("AbortError","AbortError")),Nt()};Se.addEventListener("complete",Pn),Se.addEventListener("error",dn),Se.addEventListener("abort",dn)});Bt.set(Se,te)}(Se),Re(Se,function Rt(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Se,jt):Se)}function rt(Se){if(Se instanceof IDBRequest)return function Ye(Se){const te=new Promise((Je,vt)=>{const Nt=()=>{Se.removeEventListener("success",Pn),Se.removeEventListener("error",dn)},Pn=()=>{Je(rt(Se.result)),Nt()},dn=()=>{vt(Se.error),Nt()};Se.addEventListener("success",Pn),Se.addEventListener("error",dn)});return te.then(Je=>{Je instanceof IDBCursor&&An.set(Je,Se)}).catch(()=>{}),Ce.set(te,Se),te}(Se);if(me.has(Se))return me.get(Se);const te=ct(Se);return te!==Se&&(me.set(Se,te),Ce.set(te,Se)),te}const Dn=Se=>Ce.get(Se);function gn(Se,te,{blocked:Je,upgrade:vt,blocking:Nt,terminated:Pn}={}){const dn=indexedDB.open(Se,te),Et=rt(dn);return vt&&dn.addEventListener("upgradeneeded",mn=>{vt(rt(dn.result),mn.oldVersion,mn.newVersion,rt(dn.transaction),mn)}),Je&&dn.addEventListener("blocked",mn=>Je(mn.oldVersion,mn.newVersion,mn)),Et.then(mn=>{Pn&&mn.addEventListener("close",()=>Pn()),Nt&&mn.addEventListener("versionchange",cr=>Nt(cr.oldVersion,cr.newVersion,cr))}).catch(()=>{}),Et}const Zt=["get","getKey","getAll","getAllKeys","count"],Cr=["put","add","delete","clear"],xt=new Map;function ft(Se,te){if(!(Se instanceof IDBDatabase)||te in Se||"string"!=typeof te)return;if(xt.get(te))return xt.get(te);const Je=te.replace(/FromIndex$/,""),vt=te!==Je,Nt=Cr.includes(Je);if(!(Je in(vt?IDBIndex:IDBObjectStore).prototype)||!Nt&&!Zt.includes(Je))return;const Pn=function(){var dn=(0,P.Z)(function*(Et,...mn){const cr=this.transaction(Et,Nt?"readwrite":"readonly");let ie=cr.store;return vt&&(ie=ie.index(mn.shift())),(yield Promise.all([ie[Je](...mn),Nt&&cr.done]))[0]});return function(mn){return dn.apply(this,arguments)}}();return xt.set(te,Pn),Pn}!function Hn(Se){jt=Se(jt)}(Se=>({...Se,get:(te,Je,vt)=>ft(te,Je)||Se.get(te,Je,vt),has:(te,Je)=>!!ft(te,Je)||Se.has(te,Je)}))},861:(ls,zn,We)=>{function P(U,xe,Rt,Cn,An,Bt,Dt){try{var me=U[Bt](Dt),Ce=me.value}catch(Ye){return void Rt(Ye)}me.done?xe(Ce):Promise.resolve(Ce).then(Cn,An)}function Re(U){return function(){var xe=this,Rt=arguments;return new Promise(function(Cn,An){var Bt=U.apply(xe,Rt);function Dt(Ce){P(Bt,Cn,An,Dt,me,"next",Ce)}function me(Ce){P(Bt,Cn,An,Dt,me,"throw",Ce)}Dt(void 0)})}}We.d(zn,{Z:()=>Re})},582:(ls,zn,We)=>{function xe(ie,se){var le={};for(var ge in ie)Object.prototype.hasOwnProperty.call(ie,ge)&&se.indexOf(ge)<0&&(le[ge]=ie[ge]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(ge=Object.getOwnPropertySymbols(ie);Ee<ge.length;Ee++)se.indexOf(ge[Ee])<0&&Object.prototype.propertyIsEnumerable.call(ie,ge[Ee])&&(le[ge[Ee]]=ie[ge[Ee]])}return le}function Ye(ie,se,le,ge){return new(le||(le=Promise))(function(ae,Ne){function Ft(Vt){try{Qe(ge.next(Vt))}catch(_n){Ne(_n)}}function Me(Vt){try{Qe(ge.throw(Vt))}catch(_n){Ne(_n)}}function Qe(Vt){Vt.done?ae(Vt.value):function Ee(ae){return ae instanceof le?ae:new le(function(Ne){Ne(ae)})}(Vt.value).then(Ft,Me)}Qe((ge=ge.apply(ie,se||[])).next())})}function Kt(ie){return this instanceof Kt?(this.v=ie,this):new Kt(ie)}function Zt(ie,se,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ge=le.apply(ie,se||[]),ae=[];return Ee={},Ne("next"),Ne("throw"),Ne("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function Ne(hn){ge[hn]&&(Ee[hn]=function(vn){return new Promise(function(Sn,Yt){ae.push([hn,vn,Sn,Yt])>1||Ft(hn,vn)})})}function Ft(hn,vn){try{!function Me(hn){hn.value instanceof Kt?Promise.resolve(hn.value.v).then(Qe,Vt):_n(ae[0][2],hn)}(ge[hn](vn))}catch(Sn){_n(ae[0][3],Sn)}}function Qe(hn){Ft("next",hn)}function Vt(hn){Ft("throw",hn)}function _n(hn,vn){hn(vn),ae.shift(),ae.length&&Ft(ae[0][0],ae[0][1])}}function xt(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,se=ie[Symbol.asyncIterator];return se?se.call(ie):(ie=function Pt(ie){var se="function"==typeof Symbol&&Symbol.iterator,le=se&&ie[se],ge=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&ge>=ie.length&&(ie=void 0),{value:ie&&ie[ge++],done:!ie}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},ge("next"),ge("throw"),ge("return"),le[Symbol.asyncIterator]=function(){return this},le);function ge(ae){le[ae]=ie[ae]&&function(Ne){return new Promise(function(Ft,Me){!function Ee(ae,Ne,Ft,Me){Promise.resolve(Me).then(function(Qe){ae({value:Qe,done:Ft})},Ne)}(Ft,Me,(Ne=ie[ae](Ne)).done,Ne.value)})}}}We.d(zn,{FC:()=>Zt,KL:()=>xt,_T:()=>xe,mG:()=>Ye,qq:()=>Kt}),"function"==typeof SuppressedError&&SuppressedError}},ls=>{ls(ls.s=296)}]);
"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(vs,or,Je)=>{Je.d(or,{$:()=>qm,A:()=>Te,G:()=>Vt,K:()=>Jh,L:()=>Ko,N:()=>ss,P:()=>v_,R:()=>m_,U:()=>rt,V:()=>ka,W:()=>Cl,X:()=>df,Y:()=>hf,Z:()=>Dt,_:()=>Xc,a:()=>$a,a0:()=>Gm,a1:()=>xl,a2:()=>yr,a3:()=>Zm,a4:()=>Qm,a5:()=>Ym,a6:()=>Ol,a7:()=>GI,a8:()=>ke,a9:()=>vn,aA:()=>gl,aB:()=>$t,aC:()=>me,aD:()=>As,aE:()=>Pe,aF:()=>Mt,aG:()=>Kl,aH:()=>T_,aI:()=>lw,aJ:()=>_n,aN:()=>Ha,aQ:()=>oi,aa:()=>Jc,ab:()=>La,ac:()=>Wn,ad:()=>Va,ae:()=>ct,af:()=>Kn,ag:()=>Ua,ah:()=>eu,ak:()=>tu,al:()=>wt,am:()=>rR,ap:()=>qI,aq:()=>Zr,as:()=>cR,at:()=>r_,au:()=>Jt,av:()=>Go,aw:()=>et,ax:()=>Et,ay:()=>ed,az:()=>M_,b:()=>ZI,c:()=>E_,d:()=>nt,e:()=>I_,f:()=>Ot,g:()=>Ts,h:()=>Rr,i:()=>YI,j:()=>dw,k:()=>L_,l:()=>ws,m:()=>yR,p:()=>on,r:()=>y_,s:()=>kf,u:()=>ci});var M=Je(861),Ae=Je(534),O=Je(58),He=Je(879),Lt=Je(582),Cn=Je(537);const on={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Vt=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ar=function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new He.Yd("@firebase/auth");function An(p,...l){st.logLevel<=He.in.ERROR&&st.error(`Auth (${Ae.SDK_VERSION}): ${p}`,...l)}function Et(p,...l){throw Ln(p,...l)}function $t(p,...l){return Ln(p,...l)}function ii(p,l,d){const g=Object.assign(Object.assign({},ar()),{[l]:d});return new O.LL("auth","Firebase",g).create(l,{appName:p.name})}function Bt(p){return ii(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dt(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&Et(p,"argument-error"),ii(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ln(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Ct.create(p,...l)}function me(p,l,...d){if(!p)throw Ln(l,...d)}function hn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw An(l),new Error(l)}function Jt(p,l){p||hn(l)}function Dn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function wi(){return"http:"===bi()||"https:"===bi()}function bi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Bi{constructor(l,d){this.shortDelay=l,this.longDelay=d,Jt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wi()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(p,l){Jt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class ie{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new Bi(3e4,6e4);function ge(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function oe(p,l,d,g){return De.apply(this,arguments)}function De(){return(De=(0,M.Z)(function*(p,l,d,g,v={}){return It(p,v,(0,M.Z)(function*(){let C={},$={};g&&("GET"===l?$=g:C={body:JSON.stringify(g)});const J=(0,O.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),_e=yield p._getAdditionalHeaders();return _e["Content-Type"]="application/json",p.languageCode&&(_e["X-Firebase-Locale"]=p.languageCode),ie.fetch()(fn(p,p.config.apiHost,d,J),Object.assign({method:l,headers:_e,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function It(p,l,d){return Me.apply(this,arguments)}function Me(){return(Me=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ae),l);try{const v=new cr(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield C.json();if("needConfirmation"in $)throw Vn(p,"account-exists-with-different-credential",$);if(C.ok&&!("errorMessage"in $))return $;{const J=C.ok?$.errorMessage:$.error.message,[_e,Ve]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_e)throw Vn(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===_e)throw Vn(p,"email-already-in-use",$);if("USER_DISABLED"===_e)throw Vn(p,"user-disabled",$);const Ke=g[_e]||_e.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw ii(p,Ke,Ve);Et(p,Ke)}}catch(v){if(v instanceof O.ZR)throw v;Et(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function je(p,l,d,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,M.Z)(function*(p,l,d,g,v={}){const C=yield oe(p,l,d,g,v);return"mfaPendingCredential"in C&&Et(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function fn(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?te(p.config,v):`${p.config.apiScheme}://${v}`}function en(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cr{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g($t(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=$t(p,l,g);return v.customData._tokenResponse=d,v}function ur(p){return void 0!==p&&void 0!==p.getResponse}function Dr(p){return void 0!==p&&void 0!==p.enterprise}class Hr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return en(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function rs(){return(rs=(0,M.Z)(function*(p){return(yield oe(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ut(p,l){return ji.apply(this,arguments)}function ji(){return(ji=(0,M.Z)(function*(p,l){return oe(p,"GET","/v2/recaptchaConfig",ge(p,l))})).apply(this,arguments)}function Bs(){return(Bs=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function is(){return(is=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function zr(p,l){return qr.apply(this,arguments)}function qr(){return(qr=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function Sn(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Lr(){return(Lr=(0,M.Z)(function*(p,l=!1){const d=(0,O.m9)(p),g=yield d.getIdToken(l),v=oo(g);me(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,$=C?.sign_in_provider;return{claims:v,token:g,authTime:Sn(qn(v.auth_time)),issuedAtTime:Sn(qn(v.iat)),expirationTime:Sn(qn(v.exp)),signInProvider:$||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function qn(p){return 1e3*Number(p)}function oo(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return An("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,O.tV)(d);return v?JSON.parse(v):(An("Failed to decode base64 JWT payload"),null)}catch(v){return An("Caught error parsing JWT payload as JSON",v?.toString()),null}}function js(p){const l=oo(p);return me(l,"internal-error"),me(typeof l.exp<"u","internal-error"),me(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function tn(p,l){return $i.apply(this,arguments)}function $i(){return($i=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof O.ZR&&function $s({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Gn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class mr{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rn(p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield tn(p,zr(d,{idToken:g}));me(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const $=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?uo(C.providerUserInfo):[],J=function co(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,$),Ke=!!p.isAnonymous&&!(p.email&&C.passwordHash||J?.length),bt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:J,metadata:new mr(C.createdAt,C.lastLoginAt),isAnonymous:Ke};Object.assign(p,bt)})).apply(this,arguments)}function ao(){return(ao=(0,M.Z)(function*(p){const l=(0,O.m9)(p);yield Rn(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function uo(p){return p.map(l=>{var{providerId:d}=l,g=(0,Lt._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function B(){return(B=(0,M.Z)(function*(p,l){const d=yield It(p,{},(0,M.Z)(function*(){const g=(0,O.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,$=fn(p,v,"/v1/token",`key=${C}`),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()($,{method:"POST",headers:J,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,M.Z)(function*(p,l){return oe(p,"POST","/v2/accounts:revokeToken",ge(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){me(l.idToken,"internal-error"),me(typeof l.idToken<"u","internal-error"),me(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):js(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){me(0!==l.length,"internal-error");const d=js(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(me(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:$}=yield function zs(p,l){return B.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number($))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,$=new S;return g&&(me("string"==typeof g,"internal-error",{appName:l}),$.refreshToken=g),v&&(me("string"==typeof v,"internal-error",{appName:l}),$.accessToken=v),C&&(me("number"==typeof C,"internal-error",{appName:l}),$.expirationTime=C),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return hn("not implemented")}}function w(p,l){me("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class k{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,Lt._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new mr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield tn(d,d.stsTokenManager.getToken(d.auth,l));return me(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function an(p){return Lr.apply(this,arguments)}(this,l)}reload(){return function Hs(p){return ao.apply(this,arguments)}(this)}_assign(l){this!==l&&(me(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new k(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield Rn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,Ae._isFirebaseServerApp)(l.auth.app))return Promise.reject(Bt(l.auth));const d=yield l.getIdToken();return yield tn(l,function so(p,l){return Bs.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,$,J,_e,Ve,Ke;const bt=null!==(g=d.displayName)&&void 0!==g?g:void 0,Pr=null!==(v=d.email)&&void 0!==v?v:void 0,ui=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,id=null!==($=d.photoURL)&&void 0!==$?$:void 0,np=null!==(J=d.tenantId)&&void 0!==J?J:void 0,sd=null!==(_e=d._redirectEventId)&&void 0!==_e?_e:void 0,Za=null!==(Ve=d.createdAt)&&void 0!==Ve?Ve:void 0,U_=null!==(Ke=d.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:xr,emailVerified:B_,isAnonymous:wr,providerData:du,stsTokenManager:j_}=d;me(xr&&j_,l,"internal-error");const $_=S.fromJSON(this.name,j_);me("string"==typeof xr,l,"internal-error"),w(bt,l.name),w(Pr,l.name),me("boolean"==typeof B_,l,"internal-error"),me("boolean"==typeof wr,l,"internal-error"),w(ui,l.name),w(id,l.name),w(np,l.name),w(sd,l.name),w(Za,l.name),w(U_,l.name);const Qa=new k({uid:xr,auth:l,email:Pr,emailVerified:B_,displayName:bt,isAnonymous:wr,photoURL:id,phoneNumber:ui,tenantId:np,stsTokenManager:$_,createdAt:Za,lastLoginAt:U_});return du&&Array.isArray(du)&&(Qa.providerData=du.map(Ya=>Object.assign({},Ya))),sd&&(Qa._redirectEventId=sd),Qa}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const C=new k({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield Rn(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];me(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?uo(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||C?.length),J=new S;J.updateFromIdToken(g);const _e=new k({uid:v.localId,auth:l,stsTokenManager:J,isAnonymous:$}),Ve={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new mr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(_e,Ve),_e})()}}const de=new Map;function Pe(p){Jt(p instanceof Function,"Expected a class definition");let l=de.get(p);return l?(Jt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,de.set(p,l),l)}const rt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Mt(p,l,d){return`firebase:${p}:${l}:${d}`}class xe{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Mt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Mt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?k._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new xe(Pe(rt),l,g);const v=(yield Promise.all(d.map(function(){var Ve=(0,M.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let C=v[0]||Pe(rt);const $=Mt(g,l.config.apiKey,l.name);let J=null;for(const Ve of d)try{const Ke=yield Ve._get($);if(Ke){const bt=k._fromJSON(l,Ke);Ve!==C&&(J=bt),C=Ve;break}}catch{}const _e=v.filter(Ve=>Ve._shouldAllowMigration);return C._shouldAllowMigration&&_e.length?(C=_e[0],J&&(yield C._set($,J.toJSON())),yield Promise.all(d.map(function(){var Ve=(0,M.Z)(function*(Ke){if(Ke!==C)try{yield Ke._remove($)}catch{}});return function(Ke){return Ve.apply(this,arguments)}}())),new xe(C,l,g)):new xe(C,l,g)})()}}function zt(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(Gt(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Ge(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(xa(l))return"Blackberry";if(Na(l))return"Webos";if(_r(l))return"Safari";if((l.includes("chrome/")||qo(l))&&!l.includes("edge/"))return"Chrome";if(et(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Ge(p=(0,O.z$)()){return/firefox\//i.test(p)}function _r(p=(0,O.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function qo(p=(0,O.z$)()){return/crios\//i.test(p)}function Gt(p=(0,O.z$)()){return/iemobile/i.test(p)}function et(p=(0,O.z$)()){return/android/i.test(p)}function xa(p=(0,O.z$)()){return/blackberry/i.test(p)}function Na(p=(0,O.z$)()){return/webos/i.test(p)}function Go(p=(0,O.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function gl(p=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Q(p=(0,O.z$)()){return Go(p)||et(p)||Na(p)||xa(p)||/windows phone/i.test(p)||Gt(p)}function ot(p,l=[]){let d;switch(p){case"Browser":d=zt((0,O.z$)());break;case"Worker":d=`${zt((0,O.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ae.SDK_VERSION}/${g}`}class ft{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise(($,J)=>{try{$(l(C))}catch(_e){J(_e)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Zt(){return(Zt=(0,M.Z)(function*(p,l={}){return oe(p,"GET","/v2/passwordPolicy",ge(p,l))})).apply(this,arguments)}class Hi{constructor(l){var d,g,v,C;const $=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,$,J;const _e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,_e),this.validatePasswordCharacterOptions(l,_e),_e.isValid&&(_e.isValid=null===(d=_e.meetsMinPasswordLength)||void 0===d||d),_e.isValid&&(_e.isValid=null===(g=_e.meetsMaxPasswordLength)||void 0===g||g),_e.isValid&&(_e.isValid=null===(v=_e.containsLowercaseLetter)||void 0===v||v),_e.isValid&&(_e.isValid=null===(C=_e.containsUppercaseLetter)||void 0===C||C),_e.isValid&&(_e.isValid=null===($=_e.containsNumericCharacter)||void 0===$||$),_e.isValid&&(_e.isValid=null===(J=_e.containsNonAlphanumericCharacter)||void 0===J||J),_e}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class Wo{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Pe(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield xe.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield zr(d,{idToken:l}),v=yield k._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,Ae._isFirebaseServerApp)(d.app)){const J=d.app.settings.authIdToken;return J?new Promise(_e=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(J).then(_e,_e))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,$=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const J=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,_e=C?._redirectEventId,Ve=yield d.tryRedirectSignIn(l);(!J||J===_e)&&Ve?.user&&(C=Ve.user,$=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(C)}catch(J){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(J))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return me(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield Rn(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Vs(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,Ae._isFirebaseServerApp)(d.app))return Promise.reject(Bt(d));const g=l?(0,O.m9)(l):null;return g&&me(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&me(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,Ae._isFirebaseServerApp)(l.app)?Promise.reject(Bt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Ae._isFirebaseServerApp)(this.app)?Promise.reject(Bt(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(Pe(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function yt(p){return Zt.apply(this,arguments)}(l),g=new Hi(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new O.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,l){return T.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Pe(l)||d._popupRedirectResolver;me(g,d,"argument-error"),d.redirectPersistenceManager=yield xe.create(d,[Pe(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let $=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(J,this,"internal-error"),J.then(()=>{$||C(this.currentUser)}),"function"==typeof d){const _e=l.addObserver(d,g,v);return()=>{$=!0,_e()}}{const _e=l.addObserver(d);return()=>{$=!0,_e()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function gr(p,...l){st.logLevel<=He.in.WARN&&st.warn(`Auth (${Ae.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function _n(p){return(0,O.m9)(p)}class lo{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,O.ne)(d=>this.observer=d)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ml={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function km(p){return ml.loadJS(p)}function Fm(p){return`__${p}${Math.floor(1e6*Math.random())}`}class tt{constructor(l){this.type="recaptcha-enterprise",this.auth=_n(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function C(){return C=(0,M.Z)(function*(J){if(!d){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var _e=(0,M.Z)(function*(Ve,Ke){Ut(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(bt=>{if(void 0!==bt.recaptchaKey){const Pr=new Hr(bt);return null==J.tenantId?J._agentRecaptchaConfig=Pr:J._tenantRecaptchaConfigs[J.tenantId]=Pr,Ve(Pr.siteKey)}Ke(new Error("recaptcha Enterprise site key undefined"))}).catch(bt=>{Ke(bt)})});return function(Ve,Ke){return _e.apply(this,arguments)}}())}),C.apply(this,arguments)}function $(J,_e,Ve){const Ke=window.grecaptcha;Dr(Ke)?Ke.enterprise.ready(()=>{Ke.enterprise.execute(J,{action:l}).then(bt=>{_e(bt)}).catch(()=>{_e("NO_RECAPTCHA")})}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,_e)=>{(function v(J){return C.apply(this,arguments)})(g.auth).then(Ve=>{if(!d&&Dr(window.grecaptcha))$(Ve,J,_e);else{if(typeof window>"u")return void _e(new Error("RecaptchaVerifier is only supported in browser"));let Ke=function UI(){return ml.recaptchaEnterpriseScript}();0!==Ke.length&&(Ke+=Ve),km(Ke).then(()=>{$(Ve,J,_e)}).catch(bt=>{_e(bt)})}}).catch(Ve=>{_e(Ve)})})})()}}function BI(p,l,d){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,M.Z)(function*(p,l,d,g=!1){const v=new tt(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const $=Object.assign({},l);return Object.assign($,g?{captchaResp:C}:{captchaResponse:C}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function _l(p,l,d,g){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield BI(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,M.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield BI(p,l,d,"getOobCode"===d);return g(p,J)}return Promise.reject($)});return function($){return C.apply(this,arguments)}}())}),Fe.apply(this,arguments)}function Jh(p,l,d){const g=_n(p);me(g._canInitEmulator,g,"emulator-config-failed"),me(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=Vm(l),{host:$,port:J}=function vl(p){const l=Vm(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:qc(g.substr(C.length+1))}}{const[C,$]=g.split(":");return{host:C,port:qc($)}}}(l);g.config.emulator={url:`${C}//${$}${null===J?"":`:${J}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:J,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function ef(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Vm(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function qc(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Ko{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return hn("not implemented")}_getIdTokenResponse(l){return hn("not implemented")}_linkToIdToken(l,d){return hn("not implemented")}_getReauthenticationResolver(l){return hn("not implemented")}}function Um(p,l){return vt.apply(this,arguments)}function vt(){return(vt=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:resetPassword",ge(p,l))})).apply(this,arguments)}function El(){return(El=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function si(p,l){return Il.apply(this,arguments)}function Il(){return(Il=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Yt(){return(Yt=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:update",ge(p,l))})).apply(this,arguments)}function eR(p,l){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPassword",ge(p,l))})).apply(this,arguments)}function Ee(p,l){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:sendOobCode",ge(p,l))})).apply(this,arguments)}function wl(){return(wl=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function rf(p,l){return sf.apply(this,arguments)}function sf(){return(sf=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function af(p,l){return jm.apply(this,arguments)}function jm(){return(jm=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function $m(){return($m=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function Hm(){return(Hm=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithEmailLink",ge(p,l))})).apply(this,arguments)}function Kc(){return(Kc=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithEmailLink",ge(p,l))})).apply(this,arguments)}class ho extends Ko{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new ho(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new ho(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return _l(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eR);case"emailLink":return function nR(p,l){return Hm.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:Et(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return _l(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",si);case"emailLink":return function Wc(p,l){return Kc.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:Et(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function qs(p,l){return cf.apply(this,arguments)}function cf(){return(cf=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithIdp",ge(p,l))})).apply(this,arguments)}class ss extends Ko{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new ss(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):Et("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,Lt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new ss(g,v);return $.idToken=C.idToken||void 0,$.accessToken=C.accessToken||void 0,$.secret=C.secret,$.nonce=C.nonce,$.pendingToken=C.pendingToken||null,$}_getIdTokenResponse(l){return qs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,qs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,qs(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,O.xO)(d)}return l}}function uf(){return(uf=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:sendVerificationCode",ge(p,l))})).apply(this,arguments)}function lf(){return(lf=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPhoneNumber",ge(p,l))})).apply(this,arguments)}function bl(){return(bl=(0,M.Z)(function*(p,l){const d=yield je(p,"POST","/v1/accounts:signInWithPhoneNumber",ge(p,l));if(d.temporaryProof)throw Vn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Le={USER_NOT_FOUND:"user-not-found"};function Zc(){return(Zc=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPhoneNumber",ge(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Le)})).apply(this,arguments)}class os extends Ko{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new os({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new os({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function fo(p,l){return lf.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function he(p,l){return bl.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Tl(p,l){return Zc.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new os({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class Qc{constructor(l){var d,g,v,C,$,J;const _e=(0,O.zd)((0,O.pd)(l)),Ve=null!==(d=_e.apiKey)&&void 0!==d?d:null,Ke=null!==(g=_e.oobCode)&&void 0!==g?g:null,bt=function HI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=_e.mode)&&void 0!==v?v:null);me(Ve&&Ke&&bt,"argument-error"),this.apiKey=Ve,this.operation=bt,this.code=Ke,this.continueUrl=null!==(C=_e.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==($=_e.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=_e.tenantId)&&void 0!==J?J:null}static parseLink(l){const d=function zI(p){const l=(0,O.zd)((0,O.pd)(p)).link,d=l?(0,O.zd)((0,O.pd)(l)).deep_link_id:null,g=(0,O.zd)((0,O.pd)(p)).deep_link_id;return(g?(0,O.zd)((0,O.pd)(g)).link:null)||g||d||l||p}(l);try{return new Qc(d)}catch{return null}}}let ka=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return ho._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Qc.parseLink(g);return me(v,"argument-error"),ho._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Yn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Wr extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Dt extends Wr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return me("providerId"in d&&"signInMethod"in d,"argument-error"),ss._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return me(l.idToken||l.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Dt.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Dt.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:$,providerId:J}=l;if(!g&&!v&&!d&&!C||!J)return null;try{return new Dt(J)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:C})}catch{return null}}}let Cl=(()=>{class p extends Wr{constructor(){super("facebook.com")}static credential(d){return ss._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),df=(()=>{class p extends Wr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return ss._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),hf=(()=>{class p extends Wr{constructor(){super("github.com")}static credential(d){return ss._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class oi extends Ko{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return qs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,qs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,qs(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new oi(g,C):null}static _create(l,d){return new oi(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xc extends Yn{constructor(l){me(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Xc.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Xc.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=oi.fromJSON(l);return me(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return oi._create(g,d)}catch{return null}}}let qm=(()=>{class p extends Wr{constructor(){super("twitter.com")}static credential(d,g){return ss._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Al(p,l){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signUp",ge(p,l))})).apply(this,arguments)}class Ci{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const C=yield k._fromIdTokenResponse(l,g,v),$=Fa(g);return new Ci({user:C,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=Fa(g);return new Ci({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function Fa(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Gm(p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,M.Z)(function*(p){var l;if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const d=_n(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new Ci({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Al(d,{returnSecureToken:!0}),v=yield Ci._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Rl extends O.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Rl.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new Rl(l,d,g,v)}}function ff(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?Rl._fromErrorAndOperation(p,C,l,g):C})}function Wm(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function qI(p,l){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);yield Pl(!0,d,l);const{providerUserInfo:g}=yield function Ti(p,l){return is.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=Wm(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Ai.apply(this,arguments)}function pf(p,l){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,M.Z)(function*(p,l,d=!1){const g=yield tn(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return Ci._forOperation(p,"link",g)})).apply(this,arguments)}function Pl(p,l,d){return gf.apply(this,arguments)}function gf(){return(gf=(0,M.Z)(function*(p,l,d){yield Rn(l);const v=!1===p?"provider-already-linked":"no-such-provider";me(Wm(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function Km(p,l){return mf.apply(this,arguments)}function mf(){return(mf=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(Bt(g));const v="reauthenticate";try{const C=yield tn(p,ff(g,v,l,p),d);me(C.idToken,g,"internal-error");const $=oo(C.idToken);me($,g,"internal-error");const{sub:J}=$;return me(p.uid===J,g,"user-mismatch"),Ci._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&Et(g,"user-mismatch"),C}})).apply(this,arguments)}function _f(p,l){return yf.apply(this,arguments)}function yf(){return(yf=(0,M.Z)(function*(p,l,d=!1){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g="signIn",v=yield ff(p,g,l),C=yield Ci._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function xl(p,l){return vf.apply(this,arguments)}function vf(){return(vf=(0,M.Z)(function*(p,l){return _f(_n(p),l)})).apply(this,arguments)}function yr(p,l){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);return yield Pl(!1,d,l.providerId),pf(d,l)})).apply(this,arguments)}function Zm(p,l){return If.apply(this,arguments)}function If(){return(If=(0,M.Z)(function*(p,l){return Km((0,O.m9)(p),l)})).apply(this,arguments)}function wf(){return(wf=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithCustomToken",ge(p,l))})).apply(this,arguments)}function Qm(p,l){return qe.apply(this,arguments)}function qe(){return qe=(0,M.Z)(function*(p,l){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const d=_n(p),g=yield function pn(p,l){return wf.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield Ci._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),qe.apply(this,arguments)}class vr{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?St._fromServerResponse(l,d):"totpInfo"in d?lr._fromServerResponse(l,d):Et(l,"internal-error")}}class St extends vr{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new St(d)}}class lr extends vr{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new lr(d)}}function Er(p,l,d){var g;me((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),me(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(me(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(me(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function go(p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,M.Z)(function*(p){const l=_n(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Ym(p,l,d){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,M.Z)(function*(p,l,d){const g=_n(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Er(g,v,d),yield _l(g,v,"getOobCode",rf)})).apply(this,arguments)}function Ol(p,l,d){return bf.apply(this,arguments)}function bf(){return bf=(0,M.Z)(function*(p,l,d){yield Um((0,O.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&go(p),v});return function(v){return g.apply(this,arguments)}}())}),bf.apply(this,arguments)}function GI(p,l){return yn.apply(this,arguments)}function yn(){return yn=(0,M.Z)(function*(p,l){yield function JS(p,l){return Yt.apply(this,arguments)}((0,O.m9)(p),{oobCode:l})}),yn.apply(this,arguments)}function ke(p,l){return at.apply(this,arguments)}function at(){return(at=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),g=yield Um(d,{oobCode:l}),v=g.requestType;switch(me(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(g.mfaInfo,d,"internal-error");default:me(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=vr._fromServerResponse(_n(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function vn(p,l){return Di.apply(this,arguments)}function Di(){return(Di=(0,M.Z)(function*(p,l){const{data:d}=yield ke((0,O.m9)(p),l);return d.email})).apply(this,arguments)}function Jc(p,l,d){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,M.Z)(function*(p,l,d){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g=_n(p),$=yield _l(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Al).catch(_e=>{throw"auth/password-does-not-meet-requirements"===_e.code&&go(p),_e}),J=yield Ci._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(J.user),J})).apply(this,arguments)}function La(p,l,d){return(0,Ae._isFirebaseServerApp)(p.app)?Promise.reject(Bt(p)):xl((0,O.m9)(p),ka.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&go(p),v});return function(v){return g.apply(this,arguments)}}())}function Wn(p,l,d){return Es.apply(this,arguments)}function Es(){return(Es=(0,M.Z)(function*(p,l,d){const g=_n(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C($,J){me(J.handleCodeInApp,g,"argument-error"),J&&Er(g,$,J)})(v,d),yield _l(g,v,"getOobCode",af)})).apply(this,arguments)}function Va(p,l){const d=Qc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function ct(p,l,d){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,M.Z)(function*(p,l,d){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g=(0,O.m9)(p),v=ka.credentialWithLink(l,d||Dn());return me(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),xl(g,v)})).apply(this,arguments)}function mo(){return(mo=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:createAuthUri",ge(p,l))})).apply(this,arguments)}function Kn(p,l){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:wi()?Dn():"http://localhost"},{signinMethods:v}=yield function Xm(p,l){return mo.apply(this,arguments)}((0,O.m9)(p),g);return v||[]}),Qo.apply(this,arguments)}function Ua(p,l){return qi.apply(this,arguments)}function qi(){return qi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&Er(d.auth,v,l);const{email:C}=yield function nf(p,l){return wl.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),qi.apply(this,arguments)}function eu(p,l,d){return kl.apply(this,arguments)}function kl(){return kl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&Er(g.auth,C,d);const{email:$}=yield function tR(p,l){return $m.apply(this,arguments)}(g.auth,C);$!==p.email&&(yield p.reload())}),kl.apply(this,arguments)}function as(){return(as=(0,M.Z)(function*(p,l){return oe(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function tu(p,l){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,O.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},$=yield tn(g,function _o(p,l){return as.apply(this,arguments)}(g.auth,C));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const J=g.providerData.find(({providerId:_e})=>"password"===_e);J&&(J.displayName=g.displayName,J.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),Yo.apply(this,arguments)}function wt(p,l){const d=(0,O.m9)(p);return(0,Ae._isFirebaseServerApp)(d.auth.app)?Promise.reject(Bt(d.auth)):Fl(d,l,null)}function rR(p,l){return Fl((0,O.m9)(p),null,l)}function Fl(p,l,d){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,M.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const $=yield tn(p,function tf(p,l){return El.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary($,!0)}),Ll.apply(this,arguments)}class Gs{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Xo extends Gs{constructor(l,d,g,v){super(l,d,g),this.username=v}}class nu extends Gs{constructor(l,d){super(l,"facebook.com",d)}}class Sr extends Xo{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class iR extends Gs{constructor(l,d){super(l,"google.com",d)}}class ai extends Xo{constructor(l,d,g){super(l,"twitter.com",d,g)}}function Zr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Is(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(l=oo(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new Gs(C,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new nu(C,v);case"github.com":return new Sr(C,v);case"google.com":return new iR(C,v);case"twitter.com":return new ai(C,v,p.screenName||null);case"custom":case"anonymous":return new Gs(C,null);default:return new Gs(C,g,v)}}(d)}class ja{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new ja("enroll",l,d)}static _fromMfaPendingCredential(l){return new ja("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ja._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return ja._fromIdtoken(l.multiFactorSession.idToken)}return null}}class t_{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=_n(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(J=>vr._fromServerResponse(g,J));me(v.mfaPendingCredential,g,"internal-error");const $=ja._fromMfaPendingCredential(v.mfaPendingCredential);return new t_($,C,function(){var J=(0,M.Z)(function*(_e){const Ve=yield _e._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const Ke=Object.assign(Object.assign({},v),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(d.operationType){case"signIn":const bt=yield Ci._fromIdTokenResponse(g,d.operationType,Ke);return yield g._updateCurrentUser(bt.user),bt;case"reauthenticate":return me(d.user,g,"internal-error"),Ci._forOperation(d.user,d.operationType,Ke);default:Et(g,"internal-error")}});return function(_e){return J.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function cR(p,l){var d;const g=(0,O.m9)(p),v=l;return me(l.customData.operationType,g,"argument-error"),me(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),t_._fromError(g,v)}class n_{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>vr._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new n_(l)}getSession(){var l=this;return(0,M.Z)(function*(){return ja._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,C=yield g.getSession(),$=yield tn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield tn(d.user,function hR(p,l){return oe(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ge(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Vl=new WeakMap;function r_(p){const l=(0,O.m9)(p);return Vl.has(l)||Vl.set(l,n_._fromUser(l)),Vl.get(l)}const Af="__sak";class KI{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Af,"1"),this.storage.removeItem(Af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZI=(()=>{class p extends KI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fR(){const p=(0,O.z$)();return _r(p)||Go(p)}()&&function we(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Q(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((J,_e,Ve)=>{this.notifyListeners(J,Ve)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(v);if(d.newValue!==J)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const J=this.storage.getItem(v);!g&&this.localCache[v]===J||this.notifyListeners(v,J)},$=this.storage.getItem(v);!function G(){return(0,O.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,M.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),$a=(()=>{class p extends KI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let i_=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:C,eventType:$,data:J}=v.data,_e=g.handlersMap[$];if(!_e?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:$});const Ve=Array.from(_e).map(function(){var bt=(0,M.Z)(function*(Pr){return Pr(v.origin,J)});return function(Pr){return bt.apply(this,arguments)}}()),Ke=yield function Gi(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Ve);v.ports[0].postMessage({status:"done",eventId:C,eventType:$,response:Ke})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Ha(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class s_{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let $,J;return new Promise((_e,Ve)=>{const Ke=Ha("",20);C.port1.start();const bt=setTimeout(()=>{Ve(new Error("unsupported_event"))},g);J={messageChannel:C,onMessage(Pr){const ui=Pr;if(ui.data.eventId===Ke)switch(ui.data.status){case"ack":clearTimeout(bt),$=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout($),_e(ui.data.response);break;default:clearTimeout(bt),clearTimeout($),Ve(new Error("invalid_response"))}}},v.handlers.add(J),C.port1.addEventListener("message",J.onMessage),v.target.postMessage({eventType:l,eventId:Ke,data:d},[C.port2])}).finally(()=>{J&&v.removeMessageHandler(J)})})()}}function Zn(){return window}function Ul(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function ru(){return(ru=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Rf="firebaseLocalStorageDb",vo="firebaseLocalStorage",ea="fbase_key";class za{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Mf(p,l){return p.transaction([vo],l?"readwrite":"readonly").objectStore(vo)}function c_(){const p=indexedDB.open(Rf,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(vo,{keyPath:ea})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(vo)?l(g):(g.close(),yield function pR(){const p=indexedDB.deleteDatabase(Rf);return new za(p).toPromise()}(),l(yield c_()))}))})}function u_(p,l,d){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,M.Z)(function*(p,l,d){const g=Mf(p,!0).put({[ea]:l,value:d});return new za(g).toPromise()})).apply(this,arguments)}function jl(){return(jl=(0,M.Z)(function*(p,l){const d=Mf(p,!1).get(l),g=yield new za(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function $l(p,l){const d=Mf(p,!0).delete(l);return new za(d).toPromise()}const YI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield c_()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return Ul()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=i_._getInstance(function a_(){return Ul()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Sf(){return ru.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new s_(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function o_(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield c_();return yield u_(d,Af,"1"),yield $l(d,Af),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(C=>u_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(C=>function gR(p,l){return jl.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>$l(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries($=>{const J=Mf($,!1).getAll();return new za(J).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:$,value:J}of g)C.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(J)&&(d.notifyListeners($,J),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!C.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Hl=1e12;class h_{constructor(l){this.auth=l,this.counter=Hl,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new tw(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||Hl;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||Hl))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||Hl))||void 0===g||g.execute(),""})()}}class tw{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;me(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function f_(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nf=Fm("rcb"),mR=new Bi(3e4,6e4);class nw{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Zn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return me(function Wi(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&ur(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((g,v)=>{const C=Zn().setTimeout(()=>{v($t(l,"network-request-failed"))},mR.get());Zn()[Nf]=()=>{Zn().clearTimeout(C),delete Zn()[Nf];const J=Zn().grecaptcha;if(!J||!ur(J))return void v($t(l,"internal-error"));const _e=J.render;J.render=(Ve,Ke)=>{const bt=_e(Ve,Ke);return this.counter++,bt},this.hostLanguage=d,g(J)},km(`${function ZS(){return ml.recaptchaV2Script}()}?${(0,O.xO)({onload:Nf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v($t(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Zn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class p_{load(l){return(0,M.Z)(function*(){return new h_(l)})()}clearedOneInstance(){}}const g_="recaptcha",rw={theme:"light",type:"image"};class m_{constructor(l,d,g=Object.assign({},rw)){this.parameters=g,this.type=g_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(l),this.isInvisible="invisible"===this.parameters.size,me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;me(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new p_:new nw,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const $=J=>{J&&(l.tokenChangeListeners.delete($),C(J))};l.tokenChangeListeners.add($),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Zn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){me(wi()&&!Ul(),l.auth,"internal-error"),yield function __(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Us(p){return rs.apply(this,arguments)}(l.auth);me(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Of{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=os._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function kf(p,l,d){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,M.Z)(function*(p,l,d){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g=_n(p),v=yield qa(g,l,(0,O.m9)(d));return new Of(v,C=>xl(g,C))})).apply(this,arguments)}function ws(p,l,d){return zl.apply(this,arguments)}function zl(){return(zl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);yield Pl(!1,g,"phone");const v=yield qa(g.auth,l,(0,O.m9)(d));return new Of(v,C=>yr(g,C))})).apply(this,arguments)}function y_(p,l,d){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,Ae._isFirebaseServerApp)(g.auth.app))return Promise.reject(Bt(g.auth));const v=yield qa(g.auth,l,(0,O.m9)(d));return new Of(v,C=>Zm(g,C))})).apply(this,arguments)}function qa(p,l,d){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(me("string"==typeof v,p,"argument-error"),me(d.type===g_,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const $=C.session;if("phoneNumber"in C)return me("enroll"===$.type,p,"internal-error"),(yield function uR(p,l){return oe(p,"POST","/v2/accounts/mfaEnrollment:start",ge(p,l))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{me("signin"===$.type,p,"internal-error");const J=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return me(J,p,"missing-multi-factor-info"),(yield function XI(p,l){return oe(p,"POST","/v2/accounts/mfaSignIn:start",ge(p,l))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Oa(p,l){return uf.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),Ga.apply(this,arguments)}function ci(p,l){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);if((0,Ae._isFirebaseServerApp)(d.auth.app))return Promise.reject(Bt(d.auth));yield pf(d,l)})).apply(this,arguments)}let v_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=_n(d)}verifyPhoneNumber(d,g){return qa(this.auth,d,(0,O.m9)(g))}static credential(d,g){return os._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?os._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ki(p,l){return l?Pe(l):(me(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Qr extends Ko{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return qs(l,this._buildIdpRequest())}_linkToIdToken(l,d){return qs(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return qs(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function iw(p){return _f(p.auth,new Qr(p),p.bypassAuthState)}function sw(p){const{auth:l,user:d}=p;return me(d,l,"internal-error"),Km(d,new Qr(p),p.bypassAuthState)}function ow(p){return bs.apply(this,arguments)}function bs(){return(bs=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return me(d,l,"internal-error"),pf(d,new Qr(p),p.bypassAuthState)})).apply(this,arguments)}class Vf{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:$,error:J,type:_e}=l;if(J)return void d.reject(J);const Ve={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(_e)(Ve))}catch(Ke){d.reject(Ke)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return iw;case"linkViaPopup":case"linkViaRedirect":return ow;case"reauthViaPopup":case"reauthViaRedirect":return sw;default:Et(this.auth,"internal-error")}}resolve(l){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aw=new Bi(2e3,1e4);function E_(p,l,d){return ql.apply(this,arguments)}function ql(){return(ql=(0,M.Z)(function*(p,l,d){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject($t(p,"operation-not-supported-in-this-environment"));const g=_n(p);dt(p,l,Yn);const v=Ki(g,d);return new w_(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function I_(p,l,d){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,Ae._isFirebaseServerApp)(g.auth.app))return Promise.reject($t(g.auth,"operation-not-supported-in-this-environment"));dt(g.auth,l,Yn);const v=Ki(g.auth,d);return new w_(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function nt(p,l,d){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);dt(g.auth,l,Yn);const v=Ki(g.auth,d);return new w_(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let w_=(()=>{class p extends Vf{constructor(d,g,v,C,$){super(d,g,C,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return me(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){Jt(1===d.filter.length,"Popup operations only handle one event");const g=Ha();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject($t(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,aw.get())};d()}}return p.currentPopupAction=null,p})();const cw="pendingRedirect",iu=new Map;class uw extends Vf{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=iu.get(d.auth._key());if(!g){try{const C=(yield function b_(p,l){return Eo.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}iu.set(d.auth._key(),g)}return d.bypassAuthState||iu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function Eo(){return(Eo=(0,M.Z)(function*(p,l){const d=ye(l),g=C_(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function Bf(p,l){return jf.apply(this,arguments)}function jf(){return(jf=(0,M.Z)(function*(p,l){return C_(p)._set(ye(l),"true")})).apply(this,arguments)}function lw(){iu.clear()}function T_(p,l){iu.set(p._key(),l)}function C_(p){return Pe(p._redirectPersistence)}function ye(p){return Mt(cw,p.config.apiKey,p.name)}function Ot(p,l,d){return function A_(p,l,d){return Wl.apply(this,arguments)}(p,l,d)}function Wl(){return(Wl=(0,M.Z)(function*(p,l,d){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g=_n(p);dt(p,l,Yn),yield g._initializationPromise;const v=Ki(g,d);return yield Bf(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function Rr(p,l,d){return function D_(p,l,d){return ta.apply(this,arguments)}(p,l,d)}function ta(){return(ta=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if(dt(g.auth,l,Yn),(0,Ae._isFirebaseServerApp)(g.auth.app))return Promise.reject(Bt(g.auth));yield g.auth._initializationPromise;const v=Ki(g.auth,d);yield Bf(v,g.auth);const C=yield Cs(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function Ts(p,l,d){return function $f(p,l,d){return su.apply(this,arguments)}(p,l,d)}function su(){return(su=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);dt(g.auth,l,Yn),yield g.auth._initializationPromise;const v=Ki(g.auth,d);yield Pl(!1,g,l.providerId),yield Bf(v,g.auth);const C=yield Cs(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function dw(p,l){return S_.apply(this,arguments)}function S_(){return(S_=(0,M.Z)(function*(p,l){return yield _n(p)._initializationPromise,Kl(p,l,!1)})).apply(this,arguments)}function Kl(p,l){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,M.Z)(function*(p,l,d=!1){if((0,Ae._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p));const g=_n(p),v=Ki(g,l),$=yield new uw(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,l)),$})).apply(this,arguments)}function Cs(p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,M.Z)(function*(p){const l=Ha(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class As{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function hw(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!Hf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError($t(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(R_(l))}saveEventToCache(l){this.cachedEventUids.add(R_(l)),this.lastProcessedEventTime=Date.now()}}function R_(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function Hf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function M_(p){return ou.apply(this,arguments)}function ou(){return(ou=(0,M.Z)(function*(p,l={}){return oe(p,"GET","/v1/projects",l)})).apply(this,arguments)}const zf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P_=/^https?/;function Gf(){return(Gf=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield M_(p);for(const d of l)try{if(x_(d))return}catch{}Et(p,"unauthorized-domain")})).apply(this,arguments)}function x_(p){const l=Dn(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!P_.test(d))return!1;if(zf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Wf=new Bi(3e4,6e4);function Kf(){const p=Zn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let au=null;const Zf=new Bi(5e3,15e3),fw="__/auth/iframe",pw="emulator/auth/iframe",Yr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},na=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mn(p){const l=p.config;me(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?te(l,pw):`https://${p.config.authDomain}/${fw}`,g={apiKey:l.apiKey,appName:p.name,v:Ae.SDK_VERSION},v=na.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,O.xO)(g).slice(1)}`}function Qf(){return Qf=(0,M.Z)(function*(p){const l=yield function O_(p){return au=au||function N_(p){return new Promise((l,d)=>{var g,v,C;function $(){Kf(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Kf(),d($t(p,"network-request-failed"))},timeout:Wf.get()})}if(null!==(v=null===(g=Zn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=Zn().gapi)||void 0===C||!C.load){const J=Fm("iframefcb");return Zn()[J]=()=>{gapi.load?$():d($t(p,"network-request-failed"))},km(`${function QS(){return ml.gapiScript}()}?onload=${J}`).catch(_e=>d(_e))}$()}}).catch(l=>{throw au=null,l})}(p),au}(p),d=Zn().gapi;return me(d,p,"internal-error"),l.open({where:document.body,url:Mn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yr,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(C,$){yield g.restyle({setHideOnLeave:!1});const J=$t(p,"network-request-failed"),_e=Zn().setTimeout(()=>{$(J)},Zf.get());function Ve(){Zn().clearTimeout(_e),C(g)}g.ping(Ve).then(Ve,()=>{$(J)})});return function(C,$){return v.apply(this,arguments)}}()))}),Qf.apply(this,arguments)}const mw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ws{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xl="__/auth/handler",Jl="emulator/auth/handler",Yf=encodeURIComponent("fac");function ed(p,l,d,g,v,C){return td.apply(this,arguments)}function td(){return(td=(0,M.Z)(function*(p,l,d,g,v,C){me(p.config.authDomain,p,"auth-domain-config-required"),me(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Ae.SDK_VERSION,eventId:v};if(l instanceof Yn){l.setDefaultLanguage(p.languageCode),$.providerId=l.providerId||"",(0,O.xb)(l.getCustomParameters())||($.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ke,bt]of Object.entries(C||{}))$[Ke]=bt}if(l instanceof Wr){const Ke=l.getScopes().filter(bt=>""!==bt);Ke.length>0&&($.scopes=Ke.join(","))}p.tenantId&&($.tid=p.tenantId);const J=$;for(const Ke of Object.keys(J))void 0===J[Ke]&&delete J[Ke];const _e=yield p._getAppCheckToken(),Ve=_e?`#${Yf}=${encodeURIComponent(_e)}`:"";return`${function vw({config:p}){return p.emulator?te(p,Jl):`https://${p.authDomain}/${Xl}`}(p)}?${(0,O.xO)(J).slice(1)}${Ve}`})).apply(this,arguments)}const Io="webStorageSupport",L_=class cu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$a,this._completeRedirectFn=Kl,this._overrideRedirectResult=T_}_openPopup(l,d,g,v){var C=this;return(0,M.Z)(function*(){var $;Jt(null===($=C.eventManagers[l._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield ed(l,d,g,Dn(),v);return function yw(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let J="";const _e=Object.assign(Object.assign({},mw),{width:g.toString(),height:v.toString(),top:C,left:$}),Ve=(0,O.z$)().toLowerCase();d&&(J=qo(Ve)?"_blank":d),Ge(Ve)&&(l=l||"http://localhost",_e.scrollbars="yes");const Ke=Object.entries(_e).reduce((Pr,[ui,id])=>`${Pr}${ui}=${id},`,"");if(function P(p=(0,O.z$)()){var l;return Go(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Ve)&&"_self"!==J)return function Yl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",J),new Ws(null);const bt=window.open(l||"",J,Ke);me(bt,p,"popup-blocked");try{bt.focus()}catch{}return new Ws(bt)}(l,J,Ha())})()}_openRedirect(l,d,g,v){var C=this;return(0,M.Z)(function*(){return yield C._originValidation(l),function Df(p){Zn().location.href=p}(yield ed(l,d,g,Dn(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(Jt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function gw(p){return Qf.apply(this,arguments)}(l),v=new As(l);return g.register("authEvent",C=>(me(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(Io,{type:Io},v=>{var C;const $=null===(C=v?.[0])||void 0===C?void 0:C[Io];void 0!==$&&d(!!$),Et(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function qf(p){return Gf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Q()||_r()||Go()}};class _R{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return hn("unexpected MultiFactorSessionType")}}}class uu extends _R{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new uu(l)}_finalizeEnroll(l,d,g){return function lR(p,l){return oe(p,"POST","/v2/accounts/mfaEnrollment:finalize",ge(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function l_(p,l){return oe(p,"POST","/v2/accounts/mfaSignIn:finalize",ge(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yR=(()=>{class p{constructor(){}static assertion(d){return uu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var nd="@firebase/auth";class Iw{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function KS(p){ml=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=$t("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function Ds(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function ep(p){(0,Ae._registerComponent)(new Cn.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=g.options;me($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const _e={apiKey:$,authDomain:J,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ot(p)},Ve=new Wo(g,v,C,_e);return function jI(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Pe);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Ve,d),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new Cn.wA("auth-internal",l=>{const d=_n(l.getProvider("auth").getImmediate());return new Iw(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)(nd,"1.7.4",function lu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ae.registerVersion)(nd,"1.7.4","esm2017")}("Browser")},58:(vs,or,Je)=>{Je.d(or,{BH:()=>ii,G6:()=>Bi,L:()=>Nt,LL:()=>oe,P0:()=>An,Pz:()=>$t,Sg:()=>Bt,UG:()=>me,ZB:()=>ze,ZR:()=>ge,aH:()=>Et,b$:()=>Dn,eu:()=>ie,hl:()=>te,jU:()=>hn,m9:()=>zs,ne:()=>zr,pd:()=>Ti,r3:()=>ur,ru:()=>Jt,tV:()=>fe,uI:()=>Ln,vZ:()=>rs,w1:()=>bi,xO:()=>so,xb:()=>Hr,z$:()=>dt,zd:()=>Bs});const He=function(B){const F=[];let T=0;for(let S=0;S<B.length;S++){let w=B.charCodeAt(S);w<128?F[T++]=w:w<2048?(F[T++]=w>>6|192,F[T++]=63&w|128):55296==(64512&w)&&S+1<B.length&&56320==(64512&B.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&B.charCodeAt(++S)),F[T++]=w>>18|240,F[T++]=w>>12&63|128,F[T++]=w>>6&63|128,F[T++]=63&w|128):(F[T++]=w>>12|224,F[T++]=w>>6&63|128,F[T++]=63&w|128)}return F},Cn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<B.length;w+=3){const k=B[w],de=w+1<B.length,Pe=de?B[w+1]:0,Be=w+2<B.length,rt=Be?B[w+2]:0;let zt=(15&Pe)<<2|rt>>6,Ge=63&rt;Be||(Ge=64,de||(zt=64)),S.push(T[k>>2],T[(3&k)<<4|Pe>>4],T[zt],T[Ge])}return S.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(He(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let T=0,S=0;for(;T<B.length;){const w=B[T++];if(w<128)F[S++]=String.fromCharCode(w);else if(w>191&&w<224){const k=B[T++];F[S++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const Be=((7&w)<<18|(63&B[T++])<<12|(63&B[T++])<<6|63&B[T++])-65536;F[S++]=String.fromCharCode(55296+(Be>>10)),F[S++]=String.fromCharCode(56320+(1023&Be))}else{const k=B[T++],de=B[T++];F[S++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&de)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const T=F?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<B.length;){const k=T[B.charAt(w++)],Pe=w<B.length?T[B.charAt(w)]:0;++w;const rt=w<B.length?T[B.charAt(w)]:64;++w;const xe=w<B.length?T[B.charAt(w)]:64;if(++w,null==k||null==Pe||null==rt||null==xe)throw new zn;S.push(k<<2|Pe>>4),64!==rt&&(S.push(Pe<<4&240|rt>>2),64!==xe&&S.push(rt<<6&192|xe))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class zn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nt=function(B){return function(B){const F=He(B);return Cn.encodeByteArray(F,!0)}(B).replace(/\./g,"")},fe=function(B){try{return Cn.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function ze(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const T in F)!F.hasOwnProperty(T)||!lt(T)||(B[T]=ze(B[T],F[T]));return B}function lt(B){return"__proto__"!==B}const st=()=>{try{return function Vt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&fe(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},An=B=>{const F=(B=>{var F,T;return null===(T=null===(F=st())||void 0===F?void 0:F.emulatorHosts)||void 0===T?void 0:T[B]})(B);if(!F)return;const T=F.lastIndexOf(":");if(T<=0||T+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const S=parseInt(F.substring(T+1),10);return"["===F[0]?[F.substring(1,T-1),S]:[F.substring(0,T),S]},Et=()=>{var B;return null===(B=st())||void 0===B?void 0:B.config},$t=B=>{var F;return null===(F=st())||void 0===F?void 0:F[`_${B}`]};class ii{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,T)=>{this.resolve=F,this.reject=T})}wrapCallback(F){return(T,S)=>{T?this.reject(T):this.resolve(S),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(T):F(T,S))}}}function Bt(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=F||"demo-project",w=B.iat||0,k=B.sub||B.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Nt(JSON.stringify({alg:"none",type:"JWT"})),Nt(JSON.stringify(de)),""].join(".")}function dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ln(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function me(){var B;const F=null===(B=st())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function hn(){return"object"==typeof self&&self.self===self}function Jt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bi(){const B=dt();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Bi(){return!me()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise((B,F)=>{try{let T=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),T||self.indexedDB.deleteDatabase(S),B(!0)},w.onupgradeneeded=()=>{T=!1},w.onerror=()=>{var k;F((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(T){F(T)}})}class ge extends Error{constructor(F,T,S){super(T),this.code=F,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(F,T,S){this.service=F,this.serviceName=T,this.errors=S}create(F,...T){const S=T[0]||{},w=`${this.service}/${F}`,k=this.errors[F],de=k?function De(B,F){return B.replace(It,(T,S)=>{const w=F[S];return null!=w?String(w):`<${S}?>`})}(k,S):"Error";return new ge(w,`${this.serviceName}: ${de} (${w}).`,S)}}const It=/\{\$([^}]+)}/g;function ur(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function Hr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function rs(B,F){if(B===F)return!0;const T=Object.keys(B),S=Object.keys(F);for(const w of T){if(!S.includes(w))return!1;const k=B[w],de=F[w];if(Ut(k)&&Ut(de)){if(!rs(k,de))return!1}else if(k!==de)return!1}for(const w of S)if(!T.includes(w))return!1;return!0}function Ut(B){return null!==B&&"object"==typeof B}function so(B){const F=[];for(const[T,S]of Object.entries(B))Array.isArray(S)?S.forEach(w=>{F.push(encodeURIComponent(T)+"="+encodeURIComponent(w))}):F.push(encodeURIComponent(T)+"="+encodeURIComponent(S));return F.length?"&"+F.join("&"):""}function Bs(B){const F={};return B.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,k]=S.split("=");F[decodeURIComponent(w)]=decodeURIComponent(k)}}),F}function Ti(B){const F=B.indexOf("?");if(!F)return"";const T=B.indexOf("#",F);return B.substring(F,T>0?T:void 0)}function zr(B,F){const T=new qr(B,F);return T.subscribe.bind(T)}class qr{constructor(F,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then(()=>{F(this)}).catch(S=>{this.error(S)})}next(F){this.forEachObserver(T=>{T.next(F)})}error(F){this.forEachObserver(T=>{T.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,T,S){let w;if(void 0===F&&void 0===T&&void 0===S)throw new Error("Missing Observer.");w=function Gr(B,F){if("object"!=typeof B||null===B)return!1;for(const T of F)if(T in B&&"function"==typeof B[T])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:T,complete:S},void 0===w.next&&(w.next=an),void 0===w.error&&(w.error=an),void 0===w.complete&&(w.complete=an);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,F)}sendOne(F,T){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{T(this.observers[F])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}function zs(B){return B&&B._delegate?B._delegate:B}},161:(vs,or,Je)=>{function M(n){return"function"==typeof n}function Ae(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=Ae(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function He(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Lt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{on(s)}catch(o){e=e??[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)on(e);else{if(e instanceof Lt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&He(t,e)}remove(e){const{_finalizers:t}=this;t&&He(t,e),e instanceof Lt&&e._removeParent(this)}}Lt.EMPTY=(()=>{const n=new Lt;return n.closed=!0,n})();const Cn=Lt.EMPTY;function zn(n){return n instanceof Lt||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function on(n){M(n)?n():n.unsubscribe()}const Nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fe={setTimeout(n,e,...t){const{delegate:r}=fe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=fe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Te(n){fe.setTimeout(()=>{const{onUnhandledError:e}=Nt;if(!e)throw n;e(n)})}function ze(){}const lt=Ct("C",void 0,void 0);function Ct(n,e,t){return{kind:n,value:e,error:t}}let it=null;function st(n){if(Nt.useDeprecatedSynchronousErrorHandling){const e=!it;if(e&&(it={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=it;if(it=null,t)throw r}}else n()}class An extends Lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zn(e)&&e.add(this)):this.destination=hn}static create(e,t,r){return new Bt(e,t,r)}next(e){this.isStopped?me(function ar(n){return Ct("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?me(function Vt(n){return Ct("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?me(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Et=Function.prototype.bind;function $t(n,e){return Et.call(n,e)}class ii{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){dt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){dt(r)}else dt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dt(t)}}}class Bt extends An{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Nt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$t(e.next,s),error:e.error&&$t(e.error,s),complete:e.complete&&$t(e.complete,s)}):i=e}this.destination=new ii(i)}}function dt(n){Nt.useDeprecatedSynchronousErrorHandling?function gr(n){Nt.useDeprecatedSynchronousErrorHandling&&it&&(it.errorThrown=!0,it.error=n)}(n):Te(n)}function me(n,e){const{onStoppedNotification:t}=Nt;t&&fe.setTimeout(()=>t(n,e))}const hn={closed:!0,next:ze,error:function Ln(n){throw n},complete:ze},Jt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Dn(n){return n}function bi(n){return 0===n.length?Dn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ht=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function te(n){return n&&n instanceof An||function Bi(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&zn(n)}(t)?t:new Bt(t,r,i);return st(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Vs(r))((i,s)=>{const o=new Bt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Jt](){return this}pipe(...t){return bi(t)(this)}toPromise(t){return new(t=Vs(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Vs(n){var e;return null!==(e=n??Nt.Promise)&&void 0!==e?e:Promise}const ie=Ae(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ae=(()=>{class n extends ht{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new le(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ie}next(t){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Cn:(this.currentObservers=null,s.push(t),new Lt(()=>{this.currentObservers=null,He(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ht;return t.source=this,t}}return n.create=(e,t)=>new le(e,t),n})();class le extends ae{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Cn}}function ge(n){return M(n?.lift)}function oe(n){return e=>{if(ge(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new It(n,e,t,r,i)}class It extends An{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Me(n,e){return oe((t,r)=>{let i=0;t.subscribe(De(r,s=>{r.next(n.call(e,s,i++))}))})}var je=Je(582);const Rt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function fn(n){return M(n?.then)}function en(n){return M(n[Jt])}function cr(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Vn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Dr=function ur(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Hr(n){return M(n?.[Dr])}function Us(n){return(0,je.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,je.qq)(t.read());if(i)return yield(0,je.qq)(void 0);yield yield(0,je.qq)(r)}}finally{t.releaseLock()}})}function rs(n){return M(n?.getReader)}function Ut(n){if(n instanceof ht)return n;if(null!=n){if(en(n))return function ji(n){return new ht(e=>{const t=n[Jt]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Rt(n))return function so(n){return new ht(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(fn(n))return function Bs(n){return new ht(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Te)})}(n);if(cr(n))return is(n);if(Hr(n))return function Ti(n){return new ht(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(rs(n))return function zr(n){return is(Us(n))}(n)}throw Vn(n)}function is(n){return new ht(e=>{(function qr(n,e){var t,r,i,s;return(0,je.mG)(this,void 0,void 0,function*(){try{for(t=(0,je.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Sn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function an(n,e,t=1/0){return M(e)?an((r,i)=>Me((s,o)=>e(r,s,i,o))(Ut(n(r,i))),t):("number"==typeof e&&(t=e),oe((r,i)=>function Gr(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=R=>u<r?b(R):c.push(R),b=R=>{s&&e.next(R),u++;let x=!1;Ut(t(R,f++)).subscribe(De(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){const H=c.shift();o?Sn(e,o,()=>b(H)):b(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(De(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Lr(n=1/0){return an(Dn,n)}const qn=new ht(n=>n.complete());function $i(n){return n[n.length-1]}function $s(n){return M($i(n))?n.pop():void 0}function Gn(n){return function tn(n){return n&&M(n.schedule)}($i(n))?n.pop():void 0}function Rn(n,e=0){return oe((t,r)=>{t.subscribe(De(r,i=>Sn(r,n,()=>r.next(i),e),()=>Sn(r,n,()=>r.complete(),e),i=>Sn(r,n,()=>r.error(i),e)))})}function Vr(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zs(n,e){if(!n)throw new Error("Iterable cannot be null");return new ht(t=>{Sn(t,e,()=>{const r=n[Symbol.asyncIterator]();Sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T(n,e){return e?function F(n,e){if(null!=n){if(en(n))return function Hs(n,e){return Ut(n).pipe(Vr(e),Rn(e))}(n,e);if(Rt(n))return function co(n,e){return new ht(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(fn(n))return function ao(n,e){return Ut(n).pipe(Vr(e),Rn(e))}(n,e);if(cr(n))return zs(n,e);if(Hr(n))return function uo(n,e){return new ht(t=>{let r;return Sn(t,e,()=>{r=n[Dr](),Sn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if(rs(n))return function B(n,e){return zs(Us(n),e)}(n,e)}throw Vn(n)}(n,e):Ut(n)}function S(...n){const e=Gn(n),t=function mr(n,e){return"number"==typeof $i(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ut(r[0]):Lr(t)(T(r,e)):qn}class w extends ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return T(n,Gn(n))}function de(n={}){const{connector:e=(()=>new ae),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},b=()=>{const R=o;I(),R?.unsubscribe()};return oe((R,x)=>{u++,!m&&!f&&y();const H=c=c??e();x.add(()=>{u--,0===u&&!m&&!f&&(a=Pe(b,i))}),H.subscribe(x),!o&&u>0&&(o=new Bt({next:V=>H.next(V),error:V=>{m=!0,y(),a=Pe(I,t,V),H.error(V)},complete:()=>{f=!0,y(),a=Pe(I,r),H.complete()}}),Ut(R).subscribe(o))})(s)}}function Pe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Bt({next:()=>{r.unsubscribe(),n()}});return Ut(e(...t)).subscribe(r)}function Be(n,e){return oe((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(De(r,c=>{i?.unsubscribe();let u=0;const f=s++;Ut(n(c,f)).subscribe(i=De(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function rt(n,e=Dn){return n=n??Mt,oe((t,r)=>{let i,s=!0;t.subscribe(De(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Mt(n,e){return n===e}function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function zt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function _r(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const qo=xe({__forward_ref__:xe});function Gt(n){return n.__forward_ref__=Gt,n.toString=function(){return Ge(this())},n}function et(n){return xa(n)?n():n}function xa(n){return"function"==typeof n&&n.hasOwnProperty(qo)&&n.__forward_ref__===Gt}function Na(n){return n&&!!n.\u0275providers}const gl="https://g.co/ng/security#xss";class P extends Error{constructor(e,t){super(function G(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Q(n){return"string"==typeof n?n:null==n?"":String(n)}function Zt(n,e){throw new P(-201,!1)}function zi(n,e){null==n&&function tt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yl(n){return Jh(n,qc)||Jh(n,Ko)}function Jh(n,e){return n.hasOwnProperty(e)?n[e]:null}function vl(n){return n&&(n.hasOwnProperty(ef)||n.hasOwnProperty(Um))?n[ef]:null}const qc=xe({\u0275prov:xe}),ef=xe({\u0275inj:xe}),Ko=xe({ngInjectableDef:xe}),Um=xe({ngInjectorDef:xe});var vt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(vt||{});let tf;function si(n){const e=tf;return tf=n,e}function Il(n,e,t){const r=yl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&vt.Optional?null:void 0!==e?e:void Zt(Ge(n))}const Yt=globalThis;class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Wc={},Kc="__NG_DI_FLAG__",ho="ngTempTokenPath",cf=/\n/gm,ss="__source";let Oa;function fo(n){const e=Oa;return Oa=n,e}function lf(n,e=vt.Default){if(void 0===Oa)throw new P(-203,!1);return null===Oa?Il(n,void 0,e):Oa.get(n,e&vt.Optional?null:void 0,e)}function he(n,e=vt.Default){return(function El(){return tf}()||lf)(et(n),e)}function Le(n,e=vt.Default){return he(n,Tl(e))}function Tl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zc(n){const e=[];for(let t=0;t<n.length;t++){const r=et(n[t]);if(Array.isArray(r)){if(0===r.length)throw new P(900,!1);let i,s=vt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=HI(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(he(i,s))}else e.push(he(r))}return e}function os(n,e){return n[Kc]=e,n.prototype[Kc]=e,n}function HI(n){return n[Kc]}function po(n){return{toString:n}.toString()}var ka=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ka||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{});const Wr={},Dt=[],Cl=xe({\u0275cmp:xe}),df=xe({\u0275dir:xe}),hf=xe({\u0275pipe:xe}),zm=xe({\u0275mod:xe}),oi=xe({\u0275fac:xe}),Yc=xe({__NG_ELEMENT_ID__:xe}),Xc=xe({__NG_ENV_ID__:xe});function qm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Al(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ci(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Dl(n){return 3===n||4===n||6===n}function Ci(n){return 64===n.charCodeAt(0)}function Fa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Gm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Gm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Sl="ng-template";function Rl(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==qm(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ff(n){return 4===n.type&&n.value!==Sl}function Wm(n,e,t){return e===(4!==n.type||t?n.value:Sl)}function qI(n,e,t){let r=4;const i=n.attrs||[],s=function gf(n){for(let e=0;e<n.length;e++)if(Dl(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Wm(n,c,t)||""===c&&1===e.length){if(Ai(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!Rl(n.attrs,u,t)){if(Ai(r))return!1;o=!0}continue}const m=pf(8&r?"class":c,i,ff(n),t);if(-1===m){if(Ai(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==qm(I,u,0)||2&r&&u!==y){if(Ai(r))return!1;o=!0}}}}else{if(!o&&!Ai(r)&&!Ai(c))return!1;if(o&&Ai(c))continue;o=!1,r=c|1&r}}return Ai(r)||o}function Ai(n){return 0==(1&n)}function pf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Km(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Ml(n,e,t=!1){for(let r=0;r<e.length;r++)if(qI(n,e[r],t))return!0;return!1}function _f(n,e){return n?":not("+e.trim()+")":e}function yf(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ai(o)&&(e+=_f(s,i),i=""),r=o,s=s||!Ai(r);t++}return""!==i&&(e+=_f(s,i)),e}function yr(n){return po(()=>{const e=Ym(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ka.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||Dt,_:null,schemas:n.schemas||null,tView:null,id:""};Nl(t);const r=n.dependencies;return t.directiveDefs=Ol(r,!1),t.pipeDefs=Ol(r,!0),t.id=function GI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Zm(n){return St(n)||lr(n)}function If(n){return null!==n}function pn(n){return po(()=>({type:n.type,bootstrap:n.bootstrap||Dt,declarations:n.declarations||Dt,imports:n.imports||Dt,exports:n.exports||Dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qm(n,e){if(null==n)return Wr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function qe(n){return po(()=>{const e=Ym(n);return Nl(e),e})}function St(n){return n[Cl]||null}function lr(n){return n[df]||null}function Er(n){return n[hf]||null}function Kr(n,e){const t=n[zm]||null;if(!t&&!0===e)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return t}function Ym(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Wr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Dt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qm(n.inputs,e),outputs:Qm(n.outputs)}}function Nl(n){n.features?.forEach(e=>e(n))}function Ol(n,e){if(!n)return null;const t=e?Er:Zm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(If)}const yn=0,ke=1,at=2,vn=3,Di=4,Jc=5,Ir=6,La=7,Wn=8,Es=9,Va=10,ct=11,Zo=12,Xm=13,mo=14,Kn=15,Qo=16,Ua=17,qi=18,eu=19,kl=20,_o=21,as=22,tu=23,Yo=24,wt=25,Fl=1,Ll=2,Is=7,Xo=9,Sr=11;function ai(n){return Array.isArray(n)&&"object"==typeof n[Fl]}function Zr(n){return Array.isArray(n)&&!0===n[Fl]}function Jm(n){return 0!=(4&n.flags)}function Ba(n){return n.componentOffset>-1}function Tf(n){return 1==(1&n.flags)}function Si(n){return!!n.template}function Cf(n){return 0!=(512&n[at])}function Jo(n,e){return n.hasOwnProperty(oi)?n[oi]:null}let Ur=null,$a=!1;function Gi(n){const e=Ur;return Ur=n,e}const i_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function s_(n){if(!vo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!o_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Ul(n){n.dirty=!0,function Zn(n){if(void 0===n.liveConsumerNode)return;const e=$a;$a=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ul(t)}finally{$a=e}}(n),n.consumerMarkedDirty?.(n)}function Sf(n){return n&&(n.nextProducerIndex=0),Gi(n)}function ru(n,e){if(Gi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(vo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Bl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function o_(n){ea(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(s_(t),r!==t.version))return!0}return!1}function a_(n){if(ea(n),vo(n))for(let e=0;e<n.producerNode.length;e++)Bl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Bl(n,e){if(function za(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ea(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Bl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ea(i),i.producerIndexOfThis[r]=e}}function vo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ea(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let jl=null;const f_=()=>{},Nf=(()=>({...i_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:f_}))();class nw{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Wi(){return p_}function p_(n){return n.type.prototype.ngOnChanges&&(n.setInput=rw),g_}function g_(){const n=__(this),e=n?.current;if(e){const t=n.previous;if(t===Wr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function rw(n,e,t,r){const i=this.declaredInputs[t],s=__(n)||function Of(n,e){return n[m_]=e}(n,{previous:Wr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new nw(c&&c.currentValue,e,a===Wr),n[r]=e}Wi.ngInherit=!0;const m_="__ngSimpleChanges__";function __(n){return n[m_]||null}const ws=function(n,e,t){};function Xt(n){for(;Array.isArray(n);)n=n[yn];return n}function Ga(n,e){return Xt(e[n])}function ci(n,e){return Xt(e[n.index])}function v_(n,e){return n.data[e]}function Qr(n,e){const t=e[n];return ai(t)?t:t[yn]}function bs(n,e){return null==e?null:n[e]}function Vf(n){n[Ua]=0}function aw(n){1024&n[at]||(n[at]|=1024,ql(n,1))}function E_(n){1024&n[at]&&(n[at]&=-1025,ql(n,-1))}function ql(n,e){let t=n[vn];if(null===t)return;t[Jc]+=e;let r=t;for(t=t[vn];null!==t&&(1===e&&1===r[Jc]||-1===e&&0===r[Jc]);)t[Jc]+=e,r=t,t=t[vn]}const nt={lFrame:N_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function b_(){return nt.bindingsEnabled}function ye(){return nt.lFrame.lView}function Ot(){return nt.lFrame.tView}function Rr(){let n=D_();for(;null!==n&&64===n.type;)n=n.parent;return n}function D_(){return nt.lFrame.currentTNode}function Ts(n,e){const t=nt.lFrame;t.currentTNode=n,t.isParent=e}function $f(){return nt.lFrame.isParent}function Mr(){const n=nt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Wa(){return nt.lFrame.bindingIndex++}function hw(n,e){const t=nt.lFrame;t.bindingIndex=t.bindingRootIndex=n,ou(e)}function ou(n){nt.lFrame.currentDirectiveIndex=n}function qf(n){nt.lFrame.currentQueryIndex=n}function Gf(n){const e=n[ke];return 2===e.type?e.declTNode:1===e.type?n[Ir]:null}function x_(n,e,t){if(t&vt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&vt.Host||(i=Gf(s),null===i||(s=s[mo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=nt.lFrame=Kf();return r.currentTNode=e,r.lView=n,!0}function Wf(n){const e=Kf(),t=n[ke];nt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Kf(){const n=nt.lFrame,e=null===n?null:n.child;return null===e?N_(n):e}function N_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function au(){const n=nt.lFrame;return nt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const O_=au;function Zf(){const n=au();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yr(){return nt.lFrame.selectedIndex}function na(n){nt.lFrame.selectedIndex=n}function Mn(){const n=nt.lFrame;return v_(n.tView,n.selectedIndex)}let F_=!0;function Ql(){return F_}function Ws(n){F_=n}function Yl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Xl(n,e,t){ed(n,e,3,t)}function Jl(n,e,t,r){(3&n[at])===t&&ed(n,e,t,r)}function Yf(n,e){let t=n[at];(3&t)===e&&(t&=8191,t+=1,n[at]=t)}function ed(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Ua]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Ua]+=65536),(a<s||-1==s)&&(vw(n,t,e,c),n[Ua]=(4294901760&n[Ua])+c+2),c++}function td(n,e){ws(4,n,e);const t=Gi(null);try{e.call(n)}finally{Gi(t),ws(5,n,e)}}function vw(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[at]>>13<n[Ua]>>16&&(3&n[at])===e&&(n[at]+=8192,td(a,s)):td(a,s)}const Io=-1;class cu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function nd(n){return n!==Io}function Ka(n){return 32767&n}function lu(n,e){let t=function Iw(n){return n>>16}(n),r=e;for(;t>0;)r=r[mo],t--;return r}let ep=!0;function rd(n){const e=ep;return ep=n,e}const tp=255,V_=5;let IR=0;const Ds={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[ke];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(nd(i)){const o=Ka(i),a=lu(i,e),c=a[ke].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=$_(i),null===r)return Io;if(t++,i=i[mo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Io}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Yc)&&(r=t[Yc]),null==r&&(r=t[Yc]=IR++);const i=r&tp;e.data[n+(i>>V_)]|=1<<i}(n,e,t)}function J(n,e,t){if(t&vt.Optional||void 0!==n)return n;Zt()}function _e(n,e,t,r){if(t&vt.Optional&&void 0===r&&(r=null),!(t&(vt.Self|vt.Host))){const i=n[Es],s=si(void 0);try{return i?i.get(e,r,t&vt.Optional):Il(e,r,t&vt.Optional)}finally{si(s)}}return J(r,0,t)}function Ve(n,e,t,r=vt.Default,i){if(null!==n){if(2048&e[at]&&!(r&vt.Self)){const o=function j_(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[at]&&!(512&o[at]);){const a=Ke(s,o,t,r|vt.Self,Ds);if(a!==Ds)return a;let c=s.parent;if(!c){const u=o[kl];if(u){const f=u.get(t,Ds,r);if(f!==Ds)return f}c=$_(o),o=o[mo]}s=c}return i}(n,e,t,r,Ds);if(o!==Ds)return o}const s=Ke(n,e,t,r,Ds);if(s!==Ds)return s}return _e(e,t,r,i)}function Ke(n,e,t,r,i){const s=function id(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Yc)?n[Yc]:void 0;return"number"==typeof e?e>=0?e&tp:B_:e}(t);if("function"==typeof s){if(!x_(e,n,r))return r&vt.Host?J(i,0,r):_e(e,t,r,i);try{let o;if(o=s(r),null!=o||r&vt.Optional)return o;Zt()}finally{O_()}}else if("number"==typeof s){let o=null,a=g(n,e),c=Io,u=r&vt.Host?e[Kn][Ir]:null;for((-1===a||r&vt.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==Io&&sd(r,!1)?(o=e[ke],a=Ka(c),e=lu(c,e)):a=-1);-1!==a;){const f=e[ke];if(np(s,a,f.data)){const m=bt(a,e,t,o,r,u);if(m!==Ds)return m}c=e[a+8],c!==Io&&sd(r,e[ke].data[a+8]===u)&&np(s,a,e)?(o=f,a=Ka(c),e=lu(c,e)):a=-1}}return i}function bt(n,e,t,r,i,s){const o=e[ke],a=o.data[n+8],f=function Pr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const b=o[I];if(I<c&&t===b||I>=c&&b.type===t)return I}if(i){const I=o[c];if(I&&Si(I)&&I.type===t)return c}return null}(a,o,t,null==r?Ba(a)&&ep:r!=o&&0!=(3&a.type),i&vt.Host&&s===a);return null!==f?ui(e,o,f,a):Ds}function ui(n,e,t,r){let i=n[t];const s=e.data;if(function L_(n){return n instanceof cu}(i)){const o=i;o.resolving&&function ot(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new P(-200,`Circular dependency in DI detected for ${n}${t}`)}(function we(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Q(n)}(s[t]));const a=rd(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?si(o.injectImpl):null;x_(n,r,vt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function yw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=p_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&si(u),rd(a),o.resolving=!1,O_()}}return i}function np(n,e,t){return!!(t[e+(n>>V_)]&1<<n)}function sd(n,e){return!(n&vt.Self||n&vt.Host&&e)}class xr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ve(this._tNode,this._lView,e,Tl(r),t)}}function B_(){return new xr(Rr(),ye())}function wr(n){return po(()=>{const e=n.prototype.constructor,t=e[oi]||du(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[oi]||du(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function du(n){return xa(n)?()=>{const e=du(et(n));return e&&e()}:Jo(n)}function $_(n){const e=n[ke],t=e.type;return 2===t?e.declTNode:1===t?n[Ir]:null}const od="__parameters__";function cd(n,e,t){return po(()=>{const r=function ww(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(od)?c[od]:Object.defineProperty(c,od,{value:[]})[od];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ld(n,e){n.forEach(t=>Array.isArray(t)?ld(t,e):e(t))}function bR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function H_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cs(n,e,t){let r=dd(n,e);return r>=0?n[1|r]=t:(r=~r,function qH(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function bw(n,e){const t=dd(n,e);if(t>=0)return n[1|t]}function dd(n,e){return function TR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const br=os(cd("Optional"),8),sp=os(cd("SkipSelf"),4);function Z_(n){return 128==(128&n.flags)}var Xa=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xa||{});const Sw=new Map;let gz=0;const Mw="__ngContext__";function li(n,e){ai(e)?(n[Mw]=e[eu],function _z(n){Sw.set(n[eu],n)}(e)):n[Mw]=e}let Pw;function xw(n,e){return Pw(n,e)}function cp(n){const e=n[vn];return Zr(e)?e[vn]:e}function zR(n){return GR(n[Zo])}function qR(n){return GR(n[Di])}function GR(n){for(;null!==n&&!Zr(n);)n=n[Di];return n}function pd(n,e,t,r,i){if(null!=r){let s,o=!1;Zr(r)?s=r:ai(r)&&(o=!0,r=r[yn]);const a=Xt(r);0===n&&null!==t?null==i?QR(e,t,a):hu(e,t,a,i||null,!0):1===n&&null!==t?hu(e,t,a,i||null,!0):2===n?function ny(n,e,t){const r=ey(n,e);r&&function Fz(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Uz(n,e,t,r,i){const s=t[Is];s!==Xt(t)&&pd(e,n,r,s,i);for(let a=Sr;a<t.length;a++){const c=t[a];lp(c[ke],c,n,e,r,s)}}(e,n,s,t,i)}}function X_(n,e,t){return n.createElement(e,t)}function KR(n,e){const t=n[Xo],r=t.indexOf(e);E_(e),t.splice(r,1)}function J_(n,e){if(n.length<=Sr)return;const t=Sr+e,r=n[t];if(r){const i=r[Qo];null!==i&&i!==n&&KR(i,r),e>0&&(n[t-1][Di]=r[Di]);const s=H_(n,Sr+e);!function Sz(n,e){lp(n,e,e[ct],2,null,null),e[yn]=null,e[Ir]=null}(r[ke],r);const o=s[qi];null!==o&&o.detachView(s[ke]),r[vn]=null,r[Di]=null,r[at]&=-129}return r}function Ow(n,e){if(!(256&e[at])){const t=e[ct];e[tu]&&a_(e[tu]),e[Yo]&&a_(e[Yo]),t.destroyNode&&lp(n,e,t,3,null,null),function Pz(n){let e=n[Zo];if(!e)return kw(n[ke],n);for(;e;){let t=null;if(ai(e))t=e[Zo];else{const r=e[Sr];r&&(t=r)}if(!t){for(;e&&!e[Di]&&e!==n;)ai(e)&&kw(e[ke],e),e=e[vn];null===e&&(e=n),ai(e)&&kw(e[ke],e),t=e&&e[Di]}e=t}}(e)}}function kw(n,e){if(!(256&e[at])){e[at]&=-129,e[at]|=256,function kz(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof cu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];ws(4,a,c);try{c.call(a)}finally{ws(5,a,c)}}else{ws(4,i,s);try{s.call(i)}finally{ws(5,i,s)}}}}}(n,e),function Oz(n,e){const t=n.cleanup,r=e[La];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[La]=null);const i=e[_o];if(null!==i){e[_o]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[ke].type&&e[ct].destroy();const t=e[Qo];if(null!==t&&Zr(e[vn])){t!==e[vn]&&KR(t,e);const r=e[qi];null!==r&&r.detachView(n)}!function yz(n){Sw.delete(n[eu])}(e)}}function Fw(n,e,t){return function ZR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[yn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Yn.None||s===Yn.Emulated)return null}return ci(r,t)}}(n,e.parent,t)}function hu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QR(n,e,t){n.appendChild(e,t)}function YR(n,e,t,r,i){null!==r?hu(n,e,t,r,i):QR(n,e,t)}function ey(n,e){return n.parentNode(e)}let Lw,jw,iy,eM=function JR(n,e,t){return 40&n.type?ci(n,t):null};function ty(n,e,t,r){const i=Fw(n,r,e),s=e[ct],a=function XR(n,e,t){return eM(n,e,t)}(r.parent||e[Ir],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)YR(s,i,t[c],a,!1);else YR(s,i,t,a,!1);void 0!==Lw&&Lw(s,r,e,t,i)}function up(n,e){if(null!==e){const t=e.type;if(3&t)return ci(e,n);if(4&t)return Vw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return up(n,r);{const i=n[e.index];return Zr(i)?Vw(-1,i):Xt(i)}}if(32&t)return xw(e,n)()||Xt(n[e.index]);{const r=nM(n,e);return null!==r?Array.isArray(r)?r[0]:up(cp(n[Kn]),r):up(n,e.next)}}return null}function nM(n,e){return null!==e?n[Kn][Ir].projection[e.projection]:null}function Vw(n,e){const t=Sr+n+1;if(t<e.length){const r=e[t],i=r[ke].firstChild;if(null!==i)return up(r,i)}return e[Is]}function Uw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&li(Xt(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)Uw(n,e,t.child,r,i,s,!1),pd(e,n,i,a,s);else if(32&c){const u=xw(t,r);let f;for(;f=u();)pd(e,n,i,f,s);pd(e,n,i,a,s)}else 16&c?iM(n,e,r,t,i,s):pd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function lp(n,e,t,r,i,s){Uw(t,r,n.firstChild,e,i,s,!1)}function iM(n,e,t,r,i,s){const o=t[Kn],c=o[Ir].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)pd(e,n,i,c[u],s);else{let u=c;const f=o[vn];Z_(r)&&(u.flags|=128),Uw(n,e,u,f,i,s,!0)}}function sM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function oM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Al(n,e,r),null!==i&&sM(n,e,i),null!==s&&function jz(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function uM(n){return function $w(){if(void 0===iy&&(iy=null,Yt.trustedTypes))try{iy=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iy}()?.createScriptURL(n)||n}class fu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gl})`}}function us(n){return n instanceof fu?n.changingThisBreaksApplicationSecurity:n}function wo(n,e){const t=function Yz(n){return n instanceof fu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gl})`)}return t===e}const a3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Xr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xr||{});function Ja(n){const e=hp();return e?e.sanitize(Xr.URL,n)||"":wo(n,"URL")?us(n):function sy(n){return(n=String(n)).match(a3)?n:"unsafe:"+n}(Q(n))}function _M(n){const e=hp();if(e)return uM(e.sanitize(Xr.RESOURCE_URL,n)||"");if(wo(n,"ResourceURL"))return uM(us(n));throw new P(904,!1)}function hp(){const n=ye();return n&&n[Va].sanitizer}const fp=new Ee("ENVIRONMENT_INITIALIZER"),vM=new Ee("INJECTOR",-1),EM=new Ee("INJECTOR_DEF_TYPES");class Gw{get(e,t=Wc){if(t===Wc){const r=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw r.name="NullInjectorError",r}return t}}function v3(...n){return{\u0275providers:wM(0,n),\u0275fromNgModule:!0}}function wM(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return ld(e,o=>{const a=o;ay(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&bM(i,s),t}function bM(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Ww(i,s=>{e(s,r)})}}function ay(n,e,t,r){if(!(n=et(n)))return!1;let i=null,s=vl(n);const o=!s&&St(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=vl(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)ay(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{ld(s.imports,f=>{ay(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&bM(u,e)}if(!a){const u=Jo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Dt},i),e({provide:EM,useValue:i,multi:!0},i),e({provide:fp,useValue:()=>he(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;Ww(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function Ww(n,e){for(let t of n)Na(t)&&(t=t.\u0275providers),Array.isArray(t)?Ww(t,e):e(t)}const E3=xe({provide:String,useValue:xe});function Kw(n){return null!==n&&"object"==typeof n&&E3 in n}function pu(n){return"function"==typeof n}const Zw=new Ee("Set Injector scope."),cy={},w3={};let Qw;function uy(){return void 0===Qw&&(Qw=new Gw),Qw}class Rs{}class _d extends Rs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xw(e,o=>this.processProvider(o)),this.records.set(vM,yd(void 0,this)),i.has("environment")&&this.records.set(Rs,yd(void 0,this));const s=this.records.get(Zw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(EM.multi,Dt,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=fo(this),r=si(void 0);try{return e()}finally{fo(t),si(r)}}get(e,t=Wc,r=vt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xc))return e[Xc](this);r=Tl(r);const s=fo(this),o=si(void 0);try{if(!(r&vt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function D3(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&yl(e);c=u&&this.injectableDefInScope(u)?yd(Yw(e),cy):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&vt.Self?uy():this.parent).get(e,t=r&vt.Optional&&t===Wc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ho]=a[ho]||[]).unshift(Ge(e)),s)throw a;return function zI(n,e,t,r){const i=n[ho];throw e[ss]&&i.unshift(e[ss]),n.message=function Qc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ge(e);if(Array.isArray(e))i=e.map(Ge).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ge(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(cf,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[ho]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{si(o),fo(s)}}resolveInjectorInitializers(){const e=fo(this),t=si(void 0);try{const i=this.get(fp.multi,Dt,vt.Self);for(const s of i)s()}finally{fo(e),si(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let t=pu(e=et(e))?e:et(e&&e.provide);const r=function T3(n){return Kw(n)?yd(void 0,n.useValue):yd(AM(n),cy)}(e);if(pu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=yd(void 0,cy,!0),i.factory=()=>Zc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===cy&&(t.value=w3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function A3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=et(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Yw(n){const e=yl(n),t=null!==e?e.factory:Jo(n);if(null!==t)return t;if(n instanceof Ee)throw new P(204,!1);if(n instanceof Function)return function b3(n){const e=n.length;if(e>0)throw function ip(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new P(204,!1);const t=function Vm(n){return n&&(n[qc]||n[Ko])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new P(204,!1)}function AM(n,e,t){let r;if(pu(n)){const i=et(n);return Jo(i)||Yw(i)}if(Kw(n))r=()=>et(n.useValue);else if(function CM(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Zc(n.deps||[]));else if(function TM(n){return!(!n||!n.useExisting)}(n))r=()=>he(et(n.useExisting));else{const i=et(n&&(n.useClass||n.provide));if(!function C3(n){return!!n.deps}(n))return Jo(i)||Yw(i);r=()=>new i(...Zc(n.deps))}return r}function yd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xw(n,e){for(const t of n)Array.isArray(t)?Xw(t,e):t&&Na(t)?Xw(t.\u0275providers,e):e(t)}const ly=new Ee("AppId",{providedIn:"root",factory:()=>S3}),S3="ng",DM=new Ee("Platform Initializer"),Ms=new Ee("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),SM=new Ee("AnimationModuleType"),Jw=new Ee("CSP nonce",{providedIn:"root",factory:()=>function md(){if(void 0!==jw)return jw;if(typeof document<"u")return document;throw new P(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let RM=(n,e,t)=>null;function ab(n,e,t=!1){return RM(n,e,t)}class V3{}class xM{}class B3{resolveComponentFactory(e){throw function U3(n){const e=Error(`No component factory found for ${Ge(n)}.`);return e.ngComponent=n,e}(e)}}let my=(()=>{class n{static#e=this.NULL=new B3}return n})();function j3(){return Id(Rr(),ye())}function Id(n,e){return new Qi(ci(n,e))}let Qi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=j3}return n})();class mp{}let ia=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function H3(){const n=ye(),t=Qr(Rr().index,n);return(ai(t)?t:n)[ct]}()}return n})(),z3=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>null})}return n})();class ec{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const lb=new ec("16.2.12"),db={};function LM(n,e=null,t=null,r){const i=VM(n,e,t,r);return i.resolveInjectorInitializers(),i}function VM(n,e=null,t=null,r,i=new Set){const s=[t||Dt,v3(n)];return r=r||("object"==typeof n?void 0:Ge(n)),new _d(s,e||uy(),r||null,i)}let Jr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Wc;static#t=this.NULL=new Gw;static create(t,r){if(Array.isArray(t))return LM({name:""},r,t,"");{const i=t.name??"";return LM({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Fe({token:n,providedIn:"any",factory:()=>he(vM)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function fb(n){return n.ngOriginalError}class Ks{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fb(e);for(;t&&fb(t);)t=fb(t);return t||null}}function gb(n){return e=>{setTimeout(n,void 0,e)}}const Xn=class Y3 extends ae{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=gb(s),i&&(i=gb(i)),o&&(o=gb(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Lt&&e.add(a),a}};function BM(...n){}class Pt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xn(!1),this.onMicrotaskEmpty=new Xn(!1),this.onStable=new Xn(!1),this.onError=new Xn(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function X3(){const n="function"==typeof Yt.requestAnimationFrame;let e=Yt[n?"requestAnimationFrame":"setTimeout"],t=Yt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function tq(n){const e=()=>{!function eq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,_b(n),n.isCheckStableRunning=!0,mb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),_b(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function rq(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return jM(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),$M(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return jM(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),$M(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,_b(n),mb(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pt.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(Pt.isInAngularZone())throw new P(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,J3,BM,BM);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const J3={};function mb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _b(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $M(n){n._nesting--,mb(n)}class nq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xn,this.onMicrotaskEmpty=new Xn,this.onStable=new Xn,this.onError=new Xn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HM=new Ee("",{providedIn:"root",factory:zM});function zM(){const n=Le(Pt);let e=!0;return S(new ht(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ht(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(de()))}function sa(n){return n instanceof Function?n():n}let yb=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function _p(n){for(;n;){n[at]|=64;const e=cp(n);if(Cf(n)&&!e)return n;n=e}return null}const ZM=new Ee("",{providedIn:"root",factory:()=>!1});let yy=null;function JM(n,e){return n[e]??nP()}function eP(n,e){const t=nP();t.producerNode?.length&&(n[e]=yy,t.lView=n,yy=tP())}const fq={...i_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_p(n.lView)},lView:null};function tP(){return Object.create(fq)}function nP(){return yy??=tP(),yy}const pt={};function Ye(n){rP(Ot(),ye(),Yr()+n,!1)}function rP(n,e,t,r){if(!r)if(3==(3&e[at])){const s=n.preOrderCheckHooks;null!==s&&Xl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Jl(e,s,0,t)}na(t)}function pe(n,e=vt.Default){const t=ye();return null===t?he(n,e):Ve(Rr(),t,et(n),e)}function vy(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[yn]=i,m[at]=140|r,(null!==u||n&&2048&n[at])&&(m[at]|=2048),Vf(m),m[vn]=m[mo]=n,m[Wn]=t,m[Va]=o||n&&n[Va],m[ct]=a||n&&n[ct],m[Es]=c||n&&n[Es]||null,m[Ir]=s,m[eu]=function mz(){return gz++}(),m[as]=f,m[kl]=u,m[Kn]=2==e.type?n[Kn]:m,m}function Td(n,e,t,r,i){let s=n.data[e];if(null===s)s=function vb(n,e,t,r,i){const s=D_(),o=$f(),c=n.data[e]=function Iq(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Eo(){return null!==nt.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function R_(){return nt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function ta(){const n=nt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ts(s,!0),s}function yp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sP(n,e,t,r,i){const s=JM(e,tu),o=Yr(),a=2&r;try{na(-1),a&&e.length>wt&&rP(n,e,wt,!1),ws(a?2:0,i);const u=a?s:null,f=Sf(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{ru(u,f)}}finally{a&&null===e[tu]&&eP(e,tu),na(o),ws(a?3:1,i)}}function Eb(n,e,t){if(Jm(e)){const r=Gi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Gi(r)}}}function Ib(n,e,t){b_()&&(function Sq(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ba(t)&&function kq(n,e,t){const r=ci(e,n),i=oP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Ey(n,vy(n,i,null,o,r,e,null,n[Va].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),li(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=ui(e,n,a,t);li(u,e),null!==o&&Fq(0,a-i,u,c,0,o),Si(c)&&(Qr(t.index,e)[Wn]=ui(e,n,a,t))}}(n,e,t,ci(t,e)),64==(64&t.flags)&&dP(n,e,t))}function wb(n,e,t=ci){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function oP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=bb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function bb(n,e,t,r,i,s,o,a,c,u,f){const m=wt+r,y=m+i,I=function gq(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:pt);return t}(m,y),b="function"==typeof u?u():u;return I[ke]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}let aP=n=>null;function cP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?uP(t,e,i,s):r.hasOwnProperty(i)&&uP(t,e,r[i],s)}return t}function uP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function ls(n,e,t,r,i,s,o,a){const c=ci(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(Sb(n,t,f,r,i),Ba(e)&&function Tq(n,e){const t=Qr(e,n);16&t[at]||(t[at]|=64)}(t,e.index)):3&e.type&&(r=function bq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Tb(n,e,t,r){if(b_()){const i=null===r?null:{"":-1},s=function Mq(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Ml(e,o.selectors,!1))if(r||(r=[]),Si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Cb(n,e,a.length)}else r.unshift(o),Cb(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lP(n,e,t,o,i,a),i&&function Pq(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new P(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Fa(t.mergedAttrs,t.attrs)}function lP(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function Nq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=yp(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=Fa(t.mergedAttrs,f.hostAttrs),Oq(n,t,e,c,f),xq(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function wq(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,b=y?y.outputs:null;c=cP(m.inputs,f,c,y?y.inputs:null),u=cP(m.outputs,f,u,b);const R=null===c||null===o||ff(e)?null:Lq(c,f,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function dP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function M_(){return nt.lFrame.currentDirectiveIndex}();try{na(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];ou(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Rq(c,u)}}finally{na(-1),ou(o)}}function Rq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Cb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function xq(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function Oq(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Jo(i.type)),o=new cu(s,Si(i),pe);n.blueprint[r]=o,t[r]=o,function Aq(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Dq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,yp(n,t,i.hostVars,pt),i)}function bo(n,e,t,r,i,s){const o=ci(n,e);!function Ab(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Q(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[ct],o,s,n.value,t,r,i)}function Fq(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hP(r,t,o[a++],o[a++],o[a++])}function hP(n,e,t,r,i){const s=Gi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Gi(s)}}function Lq(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function pP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];qf(t[r]),o.contentQueries(2,e[s],s)}}}function Ey(n,e){return n[Zo]?n[Xm][Di]=e:n[Zo]=e,n[Xm]=e,e}function Db(n,e,t){qf(0);const r=Gi(null);try{e(n,t)}finally{Gi(r)}}function yP(n,e){const t=n[Es],r=t?t.get(Ks,null):null;r&&r.handleError(e)}function Sb(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];hP(n.data[o],e[o],r,a,i)}}function Vq(n,e){const t=Qr(e,n),r=t[ke];!function Uq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[yn];null!==i&&null===t[as]&&(t[as]=ab(i,t[Es])),Rb(r,t,t[Wn])}function Rb(n,e,t){Wf(e);try{const r=n.viewQuery;null!==r&&Db(1,r,t);const i=n.template;null!==i&&sP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&pP(n,e),n.staticViewQueries&&Db(2,n.viewQuery,t);const s=n.components;null!==s&&function Bq(n,e){for(let t=0;t<e.length;t++)Vq(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[at]&=-5,Zf()}}let vP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function tw(n,e,t){const r=Object.create(Nf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Ul(r),run:()=>{if(r.dirty=!1,r.hasRun&&!o_(r))return;r.hasRun=!0;const o=Sf(r);try{r.cleanupFn(),r.cleanupFn=f_,r.fn(i)}finally{ru(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Iy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=_r(i,a):2==s&&(r=_r(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function vp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Xt(s)),Zr(s)&&EP(s,r);const o=t.type;if(8&o)vp(n,e,t.child,r);else if(32&o){const a=xw(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=nM(e,t);if(Array.isArray(a))r.push(...a);else{const c=cp(e[Kn]);vp(c[ke],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function EP(n,e){for(let t=Sr;t<n.length;t++){const r=n[t],i=r[ke].firstChild;null!==i&&vp(r[ke],r,i,e)}n[Is]!==n[yn]&&e.push(n[Is])}function wy(n,e,t,r=!0){const i=e[Va],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{IP(n,e,n.template,t)}catch(c){throw r&&yP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function IP(n,e,t,r){const i=e[at];if(256!=(256&i)){e[Va].effectManager?.flush(),Wf(e);try{Vf(e),function Zl(n){return nt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sP(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&Xl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Jl(e,u,0,null),Yf(e,0)}if(function Hq(n){for(let e=zR(n);null!==e;e=qR(e)){if(!e[Ll])continue;const t=e[Xo];for(let r=0;r<t.length;r++){aw(t[r])}}}(e),wP(e,2),null!==n.contentQueries&&pP(n,e),o){const u=n.contentCheckHooks;null!==u&&Xl(e,u)}else{const u=n.contentHooks;null!==u&&Jl(e,u,1),Yf(e,1)}!function pq(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=JM(e,Yo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)na(~s);else{const o=s,a=t[++i],c=t[++i];hw(a,o),r.dirty=!1;const u=Sf(r);try{c(2,e[o])}finally{ru(r,u)}}}}finally{null===e[Yo]&&eP(e,Yo),na(-1)}}(n,e);const a=n.components;null!==a&&TP(e,a,0);const c=n.viewQuery;if(null!==c&&Db(2,c,r),o){const u=n.viewCheckHooks;null!==u&&Xl(e,u)}else{const u=n.viewHooks;null!==u&&Jl(e,u,2),Yf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[at]&=-73,E_(e)}finally{Zf()}}}function wP(n,e){for(let t=zR(n);null!==t;t=qR(t))for(let r=Sr;r<t.length;r++)bP(t[r],e)}function zq(n,e,t){bP(Qr(e,n),t)}function bP(n,e){if(!function sw(n){return 128==(128&n[at])}(n))return;const t=n[ke],r=n[at];if(80&r&&0===e||1024&r||2===e)IP(t,n,t.template,n[Wn]);else if(n[Jc]>0){wP(n,1);const i=t.components;null!==i&&TP(n,i,1)}}function TP(n,e,t){for(let r=0;r<e.length;r++)zq(n,e[r],t)}class Ep{get rootNodes(){const e=this._lView,t=e[ke];return vp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return 256==(256&this._lView[at])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[vn];if(Zr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(J_(e,r),H_(t,r))}this._attachedToViewContainer=!1}Ow(this._lView[ke],this._lView)}onDestroy(e){!function I_(n,e){if(256==(256&n[at]))throw new P(911,!1);null===n[_o]&&(n[_o]=[]),n[_o].push(e)}(this._lView,e)}markForCheck(){_p(this._cdRefInjectingView||this._lView)}detach(){this._lView[at]&=-129}reattach(){this._lView[at]|=128}detectChanges(){wy(this._lView[ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mz(n,e){lp(n,e,e[ct],2,null,null)}(this._lView[ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e}}class qq extends Ep{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;wy(e[ke],e,e[Wn],!1)}checkNoChanges(){}get context(){return null}}class CP extends my{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=St(e);return new Ip(t,this.ngModule)}}function AP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Wq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tl(r);const i=this.injector.get(e,db,r);return i!==db||t===db?i:this.parentInjector.get(e,t,r)}}class Ip extends xM{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=AP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return AP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function xl(n){return n.map(yf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Rs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Wq(e,s):e,a=o.get(mp,null);if(null===a)throw new P(407,!1);const m={rendererFactory:a,sanitizer:o.get(z3,null),effectManager:o.get(vP,null),afterRenderEventManager:o.get(yb,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",b=r?function mq(n,e,t,r){const s=r.get(ZM,!1)||t===Yn.ShadowDom,o=n.selectRootElement(e,s);return function _q(n){aP(n)}(o),o}(y,r,this.componentDef.encapsulation,o):X_(y,I,function Gq(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==b&&(V=ab(b,o,!0));const W=bb(0,null,null,1,0,null,null,null,null,null,null),ne=vy(null,W,null,H,null,null,m,y,o,null,V);let Ce,Oe;Wf(ne);try{const j=this.componentDef;let N,L=null;j.findHostDirectiveDefs?(N=[],L=new Map,j.findHostDirectiveDefs(j,N,L),N.push(j)):N=[j];const z=function Zq(n,e){const t=n[ke],r=wt;return n[r]=e,Td(t,r,2,"#host",null)}(ne,b),q=function Qq(n,e,t,r,i,s,o){const a=i[ke];!function Yq(n,e,t,r){for(const i of n)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Iy(e,e.mergedAttrs,!0),null!==t&&oM(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=ab(e,i[Es]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=vy(i,oP(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&Cb(a,n,r.length-1),Ey(i,m),i[n.index]=m}(z,b,j,N,ne,m,y);Oe=v_(W,wt),b&&function Jq(n,e,t,r){if(r)Al(n,t,["ng-version",lb.full]);else{const{attrs:i,classes:s}=function vf(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ai(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Al(n,t,i),s&&s.length>0&&sM(n,t,s.join(" "))}}(y,j,b,r),void 0!==t&&function e4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Oe,this.ngContentSelectors,t),Ce=function Xq(n,e,t,r,i,s){const o=Rr(),a=i[ke],c=ci(o,i);lP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)li(ui(i,a,o.directiveStart+f,o),i);dP(a,i,o),c&&li(c,i);const u=ui(i,a,o.directiveStart+o.componentOffset,o);if(n[Wn]=i[Wn]=u,null!==s)for(const f of s)f(u,e);return Eb(a,o,n),u}(q,j,N,L,ne,[t4]),Rb(W,ne,null)}finally{Zf()}return new Kq(this.componentType,Ce,Id(Oe,ne),ne,Oe)}}class Kq extends V3{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new qq(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Sb(s[ke],s,i,e,t),this.previousInputValues.set(e,t),_p(Qr(this._tNode.index,s))}}get injector(){return new xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function t4(){const n=Rr();Yl(ye()[ke],n)}function nn(n){let e=function DP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new P(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=by(n.inputs),o.inputTransforms=by(n.inputTransforms),o.declaredInputs=by(n.declaredInputs),o.outputs=by(n.outputs);const a=i.hostBindings;a&&s4(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&r4(n,c),u&&i4(n,u),zt(n.inputs,i.inputs),zt(n.declaredInputs,i.declaredInputs),zt(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),zt(o.inputTransforms,i.inputTransforms)),Si(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===nn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function n4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,t=Fa(t,i.hostAttrs))}}(r)}function by(n){return n===Wr?{}:n===Dt?[]:n}function r4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function i4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function s4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function PP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Ty(n){return!!Mb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Mb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function To(n,e,t){return n[e]=t}function di(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Co(n,e,t,r){const i=ye();return di(i,Wa(),e)&&(Ot(),bo(Mn(),i,n,e,t,r)),Co}function Ad(n,e,t,r){return di(n,Wa(),t)?e+Q(t)+r:pt}function Zs(n,e,t,r,i,s,o,a){const c=ye(),u=Ot(),f=n+wt,m=u.firstCreatePass?function M4(n,e,t,r,i,s,o,a,c){const u=e.consts,f=Td(e,n,4,o||null,bs(u,a));Tb(e,t,f,bs(u,c)),Yl(e,f);const m=f.tView=bb(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];Ts(m,!1);const y=zP(u,c,m,n);Ql()&&ty(u,c,y,m),li(y,c),Ey(c,c[f]=fP(y,c,y,m)),Tf(m)&&Ib(u,c,m),null!=o&&wb(c,m,a)}let zP=function qP(n,e,t,r){return Ws(!0),e[ct].createComment("")};function En(n,e,t){const r=ye();return di(r,Wa(),e)&&ls(Ot(),Mn(),r,n,e,r[ct],t,!1),En}function Fb(n,e,t,r,i){const o=i?"class":"style";Sb(n,t,e.inputs[o],o,r)}function ce(n,e,t,r){const i=ye(),s=Ot(),o=wt+n,a=i[ct],c=s.firstCreatePass?function k4(n,e,t,r,i,s){const o=e.consts,c=Td(e,n,2,r,bs(o,i));return Tb(e,t,c,bs(o,s)),null!==c.attrs&&Iy(c,c.attrs,!1),null!==c.mergedAttrs&&Iy(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=GP(s,i,c,a,e,n);i[o]=u;const f=Tf(c);return Ts(c,!0),oM(a,u,c),32!=(32&c.flags)&&Ql()&&ty(s,i,u,c),0===function cw(){return nt.lFrame.elementDepthCount}()&&li(u,i),function iu(){nt.lFrame.elementDepthCount++}(),f&&(Ib(s,i,c),Eb(s,c,i)),null!==r&&wb(i,c),ce}function ee(){let n=Rr();$f()?function su(){nt.lFrame.isParent=!1}():(n=n.parent,Ts(n,!1));const e=n;(function Bf(n){return nt.skipHydrationRootTNode===n})(e)&&function C_(){nt.skipHydrationRootTNode=null}(),function uw(){nt.lFrame.elementDepthCount--}();const t=Ot();return t.firstCreatePass&&(Yl(t,n),Jm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function vR(n){return 0!=(8&n.flags)}(e)&&Fb(t,e,ye(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Xf(n){return 0!=(16&n.flags)}(e)&&Fb(t,e,ye(),e.stylesWithoutHost,!1),ee}function Ht(n,e,t,r){return ce(n,e,t,r),ee(),Ht}let GP=(n,e,t,r,i,s)=>(Ws(!0),X_(r,i,function k_(){return nt.lFrame.currentNamespace}()));function Ap(n){return!!n&&"function"==typeof n.then}function QP(n){return!!n&&"function"==typeof n.subscribe}function cn(n,e,t,r){const i=ye(),s=Ot(),o=Rr();return function XP(n,e,t,r,i,s,o){const a=Tf(r),u=n.firstCreatePass&&function mP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Wn],m=function gP(n){return n[La]||(n[La]=[])}(e);let y=!0;if(3&r.type||o){const R=ci(r,e),x=o?o(R):R,H=m.length,V=o?ne=>o(Xt(ne[r.index])):r.index;let W=null;if(!o&&a&&(W=function j4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[La],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,y=!1;else{s=ex(r,e,f,s,!1);const ne=t.listen(x,i,s);m.push(s,ne),u&&u.push(i,V,H,H+1)}}else s=ex(r,e,f,s,!1);const I=r.outputs;let b;if(y&&null!==I&&(b=I[i])){const R=b.length;if(R)for(let x=0;x<R;x+=2){const Ce=e[b[x]][b[x+1]].subscribe(s),Oe=m.length;m.push(s,Ce),u&&u.push(i,r.index,Oe,-(Oe+1))}}}(s,i,i[ct],o,n,e,r),cn}function JP(n,e,t,r){try{return ws(6,e,t),!1!==t(r)}catch(i){return yP(n,i),!1}finally{ws(7,e,t)}}function ex(n,e,t,r,i){return function s(o){if(o===Function)return r;_p(n.componentOffset>-1?Qr(n.index,e):e);let c=JP(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=JP(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function tx(n=1){return function fw(n){return(nt.lFrame.contextLView=function pw(n,e){for(;n>0;)e=e[mo],n--;return e}(n,nt.lFrame.contextLView))[Wn]}(n)}function mu(n,e,t){return Dp(n,"",e,"",t),mu}function Dp(n,e,t,r,i){const s=ye(),o=Ad(s,e,t,r);return o!==pt&&ls(Ot(),Mn(),s,n,o,s[ct],i,!1),Dp}function My(n,e){return n<<17|e<<2}function nc(n){return n>>17&32767}function Ub(n){return 2|n}function _u(n){return(131068&n)>>2}function Bb(n,e){return-131069&n|e<<2}function jb(n){return 1|n}function lx(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?nc(s):_u(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];K4(n[a],e)&&(c=!0,n[a+1]=r?jb(f):Ub(f)),a=r?nc(f):_u(f)}c&&(n[t+1]=r?Ub(s):jb(s))}function K4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&dd(n,e)>=0}function kd(n,e){return function Qs(n,e,t,r){const i=ye(),s=Ot(),o=function As(n){const e=nt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function vx(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Yr()],o=function yx(n,e){return e>=n.expandoStartIndex}(n,t);(function bx(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function rG(n,e,t,r){const i=function zf(n){const e=nt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Sp(t=$b(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=$b(i,n,e,t,r),null===s){let c=function iG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==_u(r))return n[nc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=$b(null,n,e,c[1],r),c=Sp(c,e.attrs,r),function sG(n,e,t,r){n[nc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function oG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Sp(r,n[s].hostAttrs,t);return Sp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function G4(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=nc(o),c=_u(o);n[r]=t;let f,u=!1;if(Array.isArray(t)?(f=t[1],(null===f||dd(t,f)>0)&&(u=!0)):f=t,i)if(0!==c){const y=nc(n[a+1]);n[r+1]=My(y,a),0!==y&&(n[y+1]=Bb(n[y+1],r)),n[a+1]=function z4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=My(a,0),0!==a&&(n[a+1]=Bb(n[a+1],r)),a=r;else n[r+1]=My(c,0),0===a?a=r:n[c+1]=Bb(n[c+1],r),c=r;u&&(n[r+1]=Ub(n[r+1])),lx(n,f,r,!0),lx(n,f,r,!1),function W4(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&dd(s,e)>=0&&(t[r+1]=jb(t[r+1]))}(e,f,n,r,s),o=My(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==pt&&di(i,o,e)&&function Ix(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],f=function q4(n){return 1==(1&n)}(u)?wx(c,e,t,i,_u(u),o):void 0;Py(f)||(Py(s)||function H4(n){return 2==(2&n)}(u)&&(s=wx(c,null,t,i,a,o)),function Bz(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Xa.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xa.Important),n.setStyle(t,r,i,s))}}(r,o,Ga(Yr(),t),i,s))}(s,s.data[Yr()],i,i[ct],n,i[o+1]=function lG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ge(us(n)))),n}(e,t),r,o)}(n,e,null,!0),kd}function $b(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Sp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Sp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),cs(n,o,!!t||e[++s]))}return void 0===n?null:n}function wx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=null===f;let y=t[i+1];y===pt&&(y=m?Dt:void 0);let I=m?bw(y,r):f===r?y:void 0;if(u&&!Py(I)&&(I=bw(c,r)),Py(I)&&(a=I,o))return a;const b=n[i+1];i=o?nc(b):_u(b)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=bw(c,r))}return a}function Py(n){return void 0!==n}function ve(n,e=""){const t=ye(),r=Ot(),i=n+wt,s=r.firstCreatePass?Td(r,i,1,e,null):r.data[i],o=Tx(r,t,s,e,n);t[i]=o,Ql()&&ty(r,t,o,s),Ts(s,!1)}let Tx=(n,e,t,r,i)=>(Ws(!0),function Y_(n,e){return n.createText(e)}(e[ct],r));function un(n){return Hb("",n,""),un}function Hb(n,e,t){const r=ye(),i=Ad(r,n,e,t);return i!==pt&&function oa(n,e,t){const r=Ga(e,n);!function WR(n,e,t){n.setValue(e,t)}(n[ct],r,t)}(r,Yr(),i),Hb}const Ld="en-US";let Gx=Ld;function Gb(n,e,t,r,i){if(n=et(n),Array.isArray(n))for(let s=0;s<n.length;s++)Gb(n[s],e,t,r,i);else{const s=Ot(),o=ye(),a=Rr();let c=pu(n)?n:et(n.provide);const u=AM(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(pu(n)||!n.multi){const I=new cu(u,i,pe),b=Kb(c,e,i?f:f+y,m);-1===b?(C(l(a,o),s,c),Wb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[b]=I,o[b]=I)}else{const I=Kb(c,e,f+y,m),b=Kb(c,e,f,f+y),x=b>=0&&t[b];if(i&&!x||!i&&!(I>=0&&t[I])){C(l(a,o),s,c);const H=function PW(n,e,t,r,i){const s=new cu(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,_N(s,i,r&&!t),s}(i?MW:RW,t.length,i,r,u);!i&&x&&(t[b].providerFactory=H),Wb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else Wb(s,n,I>-1?I:b,_N(t[i?b:I],u,!i&&r));!i&&r&&x&&t[b].componentProviders++}}}function Wb(n,e,t,r){const i=pu(e),s=function I3(n){return!!n.useClass}(e);if(i||s){const c=(s?et(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function _N(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Kb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RW(n,e,t,r){return Zb(this.multi,[])}function MW(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ui(t,t[ke],this.providerFactory.index,r);s=a.slice(0,o),Zb(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Zb(i,s);return s}function Zb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Un(n,e=[]){return t=>{t.providersResolver=(r,i)=>function SW(n,e,t){const r=Ot();if(r.firstCreatePass){const i=Si(n);Gb(t,r.data,r.blueprint,i,!0),Gb(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class vu{}class yN{}class Qb extends vu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CP(this);const i=Kr(e);this._bootstrapComponents=sa(i.bootstrap),this._r3Injector=VM(e,t,[{provide:vu,useValue:this},{provide:my,useValue:this.componentFactoryResolver},...r],Ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yb extends yN{constructor(e){super(),this.moduleType=e}create(e){return new Qb(this.moduleType,e,[])}}class vN extends vu{constructor(e){super(),this.componentFactoryResolver=new CP(this),this.instance=null;const t=new _d([...e.providers,{provide:vu,useValue:this},{provide:my,useValue:this.componentFactoryResolver}],e.parent||uy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Xb(n,e,t=null){return new vN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let OW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=wM(0,t.type),i=r.length>0?Xb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Fe({token:n,providedIn:"environment",factory:()=>new n(he(Rs))})}return n})();function EN(n){n.getStandaloneInjector=e=>e.get(OW).getOrCreateStandaloneInjector(n)}function DN(n,e,t,r){return function RN(n,e,t,r,i,s){const o=e+t;return di(n,o,i)?To(n,o+1,s?r.call(s,i):r(i)):Op(n,o+1)}(ye(),Mr(),n,e,t,r)}function SN(n,e,t,r,i){return function MN(n,e,t,r,i,s,o){const a=e+t;return function gu(n,e,t,r){const i=di(n,e,t);return di(n,e+1,r)||i}(n,a,i,s)?To(n,a+2,o?r.call(o,i,s):r(i,s)):Op(n,a+2)}(ye(),Mr(),n,e,t,r,i)}function Op(n,e){const t=n[e];return t===pt?void 0:t}function o6(n,e,t,r=!0){const i=e[ke];if(function xz(n,e,t,r){const i=Sr+r,s=t.length;r>0&&(t[i-1][Di]=e),r<s-Sr?(e[Di]=t[i],bR(t,Sr+r,e)):(t.push(e),e[Di]=null),e[vn]=t;const o=e[Qo];null!==o&&t!==o&&function Nz(n,e){const t=n[Xo];e[Kn]!==e[vn][vn][Kn]&&(n[Ll]=!0),null===t?n[Xo]=[e]:t.push(e)}(o,e);const a=e[qi];null!==a&&a.insertView(n),e[at]|=128}(i,e,n,t),r){const s=Vw(t,n),o=e[ct],a=ey(o,n[Is]);null!==a&&function Rz(n,e,t,r,i,s){r[yn]=i,r[Ir]=e,lp(n,r,t,1,i,s)}(i,n[Ir],o,e,a,s)}}Symbol;let aa=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=u6}return n})();const a6=aa,c6=class extends a6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function s6(n,e,t,r){const i=e.tView,a=vy(n,i,t,4096&n[at]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Qo]=n[e.index];const u=n[qi];return null!==u&&(a[qi]=u.createEmbeddedView(i)),Rb(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Ep(i)}};function u6(){return function Fy(n,e){return 4&n.type?new c6(e,n,Id(n,e)):null}(Rr(),ye())}let Xs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=g6}return n})();function g6(){return function BN(n,e){let t;const r=e[n.index];return Zr(r)?t=r:(t=fP(r,e,null,n),e[n.index]=t,Ey(e,t)),jN(t,e,n,r),new VN(t,n,e)}(Rr(),ye())}const m6=Xs,VN=class extends m6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Id(this._hostTNode,this._hostLView)}get injector(){return new xr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(nd(e)){const t=lu(e,this._hostLView),r=Ka(e);return new xr(t[ke].data[r+8],t)}return new xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=UN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function rp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new Ip(St(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const x=(o?u:this.parentInjector).get(Rs,null);x&&(s=x)}St(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function ow(n){return Zr(n[vn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[vn],f=new VN(u,u[Ir],u[vn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return o6(a,i,o,!r),e.attachToViewContainerRef(),bR(tT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=UN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=J_(this._lContainer,t);r&&(H_(tT(this._lContainer),t),Ow(r[ke],r))}detach(e){const t=this._adjustIndex(e,-1),r=J_(this._lContainer,t);return r&&null!=H_(tT(this._lContainer),t)?new Ep(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UN(n){return n[8]}function tT(n){return n[8]||(n[8]=[])}let jN=function $N(n,e,t,r){if(n[Is])return;let i;i=8&t.type?Xt(r):function _6(n,e){const t=n[ct],r=t.createComment(""),i=ci(e,n);return hu(t,ey(t,i),r,function Lz(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Is]=i};const hT=new Ee("Application Initializer");let fT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Le(hT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Ap(s))t.push(s);else if(QP(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const So=new Ee("LocaleId",{providedIn:"root",factory:()=>Le(So,vt.Optional|vt.SkipSelf)||function K6(){return typeof $localize<"u"&&$localize.locale||Ld}()});let g1=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Y6{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let m1=(()=>{class n{compileModuleSync(t){return new Yb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=sa(Kr(t).declarations).reduce((o,a)=>{const c=St(a);return c&&o.push(new Ip(c)),o},[]);return new Y6(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const E1=new Ee(""),By=new Ee("");let yT,mT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yT||(function v9(n){yT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(he(Pt),he(_T),he(By))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),_T=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return yT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),rc=null;const I1=new Ee("AllowMultipleToken"),vT=new Ee("PlatformDestroyListeners"),ET=new Ee("appBootstrapListener");class b1{constructor(e,t){this.name=e,this.token=t}}function C1(n,e,t=[]){const r=`Platform: ${e}`,i=new Ee(r);return(s=[])=>{let o=IT();if(!o||o.injector.get(I1,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function w9(n){if(rc&&!rc.get(I1,!1))throw new P(400,!1);(function w1(){!function QI(n){jl=n}(()=>{throw new P(600,!1)})})(),rc=n;const e=n.get(D1);(function T1(n){n.get(DM,null)?.forEach(t=>t())})(n)}(function A1(n=[],e){return Jr.create({name:e,providers:[{provide:Zw,useValue:"platform"},{provide:vT,useValue:new Set([()=>rc=null])},...n]})}(a,r))}return function T9(n){const e=IT();if(!e)throw new P(401,!1);return e}()}}function IT(){return rc?.get(D1)??null}let D1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function C9(n="zone.js",e){return"noop"===n?new nq:"zone.js"===n?new Pt(e):n}(r?.ngZone,function S1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function NW(n,e,t){return new Qb(n,e,t)}(t.moduleType,this.injector,function N1(n){return[{provide:Pt,useFactory:n},{provide:fp,multi:!0,useFactory:()=>{const e=Le(D9,{optional:!0});return()=>e.initialize()}},{provide:x1,useFactory:A9},{provide:HM,useFactory:zM}]}(()=>i)),o=s.injector.get(Ks,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{jy(this._modules,s),a.unsubscribe()})}),function R1(n,e,t){try{const r=t();return Ap(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(fT);return a.runInitializers(),a.donePromise.then(()=>(function Wx(n){zi(n,"Expected localeId to be defined"),"string"==typeof n&&(Gx=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(So,Ld)||Ld),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=M1({},r);return function E9(n,e,t){const r=new Yb(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Eu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new P(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new P(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jr))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function M1(n,e){return Array.isArray(e)?e.reduce(M1,n):{...n,...e}}let Eu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Le(x1),this.zoneIsStable=Le(HM),this.componentTypes=[],this.components=[],this.isStable=Le(g1).hasPendingTasks.pipe(Be(t=>t?k(!1):this.zoneIsStable),rt(),de()),this._injector=Le(Rs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof xM;if(!this._injector.get(fT).done)throw!i&&function go(n){const e=St(n)||lr(n)||Er(n);return null!==e&&e.standalone}(t),new P(405,!1);let o;o=i?t:this._injector.get(my).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function I9(n){return n.isBoundToModule}(o)?void 0:this._injector.get(vu),u=o.create(Jr.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(E1,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),jy(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;jy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(ET,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const x1=new Ee("",{providedIn:"root",factory:()=>Le(Ks).handleError.bind(void 0)});function A9(){const n=Le(Pt),e=Le(Ks);return t=>n.runOutsideAngular(()=>e.handleError(t))}let D9=(()=>{class n{constructor(){this.zone=Le(Pt),this.applicationRef=Le(Eu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let $y=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=R9}return n})();function R9(n){return function M9(n,e,t){if(Ba(n)&&!t){const r=Qr(n.index,e);return new Ep(r,r)}return 47&n.type?new Ep(e[Kn],e):null}(Rr(),ye(),16==(16&n))}class V1{constructor(){}supports(e){return Ty(e)}create(e){return new F9(e)}}const k9=(n,e)=>e;class F9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||k9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<B1(r,i,s)?t:r,a=B1(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,b=I+y;f<=b&&b<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ty(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function h4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new L9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new U1),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new U1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class L9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class U1{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new V9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function B1(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class j1{constructor(){}supports(e){return e instanceof Map||Mb(e)}create(){return new U9}}class U9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Mb(e)))throw new P(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new B9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class B9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $1(){return new qy([new V1])}let qy=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:$1});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$1()),deps:[[n,new sp,new br]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new P(901,!1)}}return n})();function H1(){return new Vp([new j1])}let Vp=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:H1});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||H1()),deps:[[n,new sp,new br]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new P(901,!1)}}return n})();const H9=C1(null,"core",[]);let z9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(he(Eu))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function Bd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let DT=null;function ic(){return DT}class i5{}const Jn=new Ee("DocumentToken");let ST=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return Le(o5)},providedIn:"platform"})}return n})();const s5=new Ee("Location Initialized");let o5=(()=>{class n extends ST{constructor(){super(),this._doc=Le(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ic().getBaseHref(this._doc)}onPopState(t){const r=ic().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ic().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function RT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function X1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ca(n){return n&&"?"!==n[0]?"?"+n:n}let wu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return Le(eO)},providedIn:"root"})}return n})();const J1=new Ee("appBaseHref");let eO=(()=>{class n extends wu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Le(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return RT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ca(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ca(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ca(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(ST),he(J1,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a5=(()=>{class n extends wu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=RT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(ST),he(J1,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),MT=(()=>{class n{constructor(t){this._subject=new Xn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function l5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(X1(tO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ca(r))}normalize(t){return n.stripTrailingSlash(function u5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,tO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ca;static#t=this.joinWithSlash=RT;static#n=this.stripTrailingSlash=X1;static#r=this.\u0275fac=function(r){return new(r||n)(he(wu))};static#i=this.\u0275prov=Fe({token:n,factory:function(){return function c5(){return new MT(he(wu))}()},providedIn:"root"})}return n})();function tO(n){return n.replace(/\/index.html$/,"")}const BT=/\s+/,lO=[];let dO=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=lO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(BT):lO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(BT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(BT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(qy),pe(Vp),pe(Qi),pe(ia))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Q5{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bu=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Q5(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),fO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{fO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Xs),pe(aa),pe(qy))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function fO(n,e){n.context.$implicit=e.item}let rv=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Y5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Xs),pe(aa))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Y5{constructor(){this.$implicit=null,this.ngIf=null}}function pO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ge(e)}'.`)}let _O=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const yO="browser";function iv(n){return"server"===n}let A8=(()=>{class n{static#e=this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new D8(he(Jn),window)})}return n})();class D8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function S8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class X8 extends i5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class WT extends X8{static makeCurrent(){!function r5(n){DT||(DT=n)}(new WT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function J8(){return $p=$p||document.querySelector("base"),$p?$p.getAttribute("href"):null}();return null==t?null:function eK(n){av=av||document.createElement("a"),av.setAttribute("href",n);const e=av.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$p=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function K5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let av,$p=null,nK=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const KT=new Ee("EventManagerPlugins");let bO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new P(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(he(KT),he(Pt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class TO{constructor(e){this._doc=e}}const ZT="ng-app-id";let CO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ZT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(ZT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(ZT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jn),he(ly),he(Jw,8),he(Ms))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const QT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},YT=/%COMP%/g,oK=new Ee("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function DO(n,e){return e.map(t=>t.replace(YT,n))}let XT=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=iv(a),this.defaultRenderer=new JT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r={...r,encapsulation:Yn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof RO?i.applyToHost(t):i instanceof e0&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:s=new RO(c,u,r,this.appId,f,o,a,m);break;case Yn.ShadowDom:return new lK(c,u,t,r,o,a,this.nonce,m);default:s=new e0(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(he(bO),he(CO),he(ly),he(oK),he(Jn),he(Ms),he(Pt),he(Jw))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class JT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(QT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=QT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=QT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xa.DashCase|Xa.Important)?e.style.setProperty(t,r,i&Xa.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=ic().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function SO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class lK extends JT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=DO(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class e0 extends JT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?DO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class RO extends e0{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function aK(n){return"_ngcontent-%COMP%".replace(YT,n)}(u),this.hostAttr=function cK(n){return"_nghost-%COMP%".replace(YT,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let dK=(()=>{class n extends TO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jn))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const MO=["alt","control","meta","shift"],hK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pK=(()=>{class n extends TO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ic().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),MO.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=hK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MO.forEach(o=>{o!==i&&(0,fK[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jn))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();const yK=C1(H9,"browser",[{provide:Ms,useValue:yO},{provide:DM,useValue:function gK(){WT.makeCurrent()},multi:!0},{provide:Jn,useFactory:function _K(){return function qz(n){jw=n}(document),document},deps:[]}]),vK=new Ee(""),NO=[{provide:By,useClass:class tK{addToWindow(e){Yt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new P(5103,!1);return s},Yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yt.getAllAngularRootElements=()=>e.getAllRootElements(),Yt.frameworkStabilizers||(Yt.frameworkStabilizers=[]),Yt.frameworkStabilizers.push(r=>{const i=Yt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ic().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:E1,useClass:mT,deps:[Pt,_T,By]},{provide:mT,useClass:mT,deps:[Pt,_T,By]}],OO=[{provide:Zw,useValue:"root"},{provide:Ks,useFactory:function mK(){return new Ks},deps:[]},{provide:KT,useClass:dK,multi:!0,deps:[Jn,Pt,Ms]},{provide:KT,useClass:pK,multi:!0,deps:[Jn]},XT,CO,bO,{provide:mp,useExisting:XT},{provide:class R8{},useClass:nK,deps:[]},[]];let r0,kO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ly,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(he(vK,12))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({providers:[...OO,...NO],imports:[_O,z9]})}return n})(),FO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jn))};static#t=this.\u0275prov=Fe({token:n,factory:function(r){let i=null;return i=r?new r:function IK(){return new FO(he(Jn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{r0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{r0=!1}let Hp,jO=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function C8(n){return n===yO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!r0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ms))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cv(n){return function AK(){if(null==Hp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Hp=!0}))}finally{Hp=Hp||!1}return Hp}()?n:!!n.capture}function HO(n){return Array.isArray(n)?n:[n]}const{isArray:FK}=Array,{getPrototypeOf:LK,prototype:VK,keys:UK}=Object;function qO(n){if(1===n.length){const e=n[0];if(FK(e))return{args:e,keys:null};if(function BK(n){return n&&"object"==typeof n&&LK(n)===VK}(e)){const t=UK(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jK}=Array;function GO(n){return Me(e=>function $K(n,e){return jK(e)?n(...e):n(e)}(n,e))}function WO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lv(...n){const e=Gn(n),t=$s(n),{args:r,keys:i}=qO(n);if(0===r.length)return T([],e);const s=new ht(function HK(n,e,t=Dn){return r=>{KO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)KO(e,()=>{const u=T(n[c],e);let f=!1;u.subscribe(De(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>WO(i,o):Dn));return t?s.pipe(GO(t)):s}function KO(n,e,t){n?Sn(t,n,e):e()}function dv(...n){return function zK(){return Lr(1)}()(T(n,Gn(n)))}function Cu(n){return n<=0?()=>qn:oe((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hs(n,e){return oe((t,r)=>{let i=0;t.subscribe(De(r,s=>n.call(e,s,i++)&&r.next(s)))})}class GK extends Lt{constructor(e,t){super()}schedule(e,t=0){return this}}const hv={setInterval(n,e,...t){const{delegate:r}=hv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=hv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class ZO extends GK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return hv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&hv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,He(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const o0={now:()=>(o0.delegate||Date).now(),delegate:void 0};class zp{constructor(e,t=zp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}zp.now=o0.now;class QO extends zp{constructor(e,t=zp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const a0=new QO(ZO);function YO(n,e=a0){return oe((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(De(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function qp(...n){const e=Gn(n);return oe((t,r)=>{(e?dv(n,t,e):dv(n,t)).subscribe(r)})}function XO(n){return oe((e,t)=>{Ut(n).subscribe(De(t,()=>t.complete(),ze)),!t.closed&&e.subscribe(t)})}const JO=new Set;let Au,WK=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ZK}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function KK(n,e){if(!JO.has(n))try{Au||(Au=document.createElement("style"),e&&(Au.nonce=e),Au.setAttribute("type","text/css"),document.head.appendChild(Au)),Au.sheet&&(Au.sheet.insertRule(`@media ${n} {body{ }}`,0),JO.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(jO),he(Jw,8))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZK(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let QK=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ae}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ek(HO(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=lv(ek(HO(t)).map(o=>this._registerQuery(o).observable));return s=dv(s.pipe(Cu(1)),s.pipe(function qK(n){return hs((e,t)=>n<=t)}(1),YO(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new ht(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(qp(r),Me(({matches:o})=>({query:t,matches:o})),XO(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(he(WK),he(Pt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ek(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const ik="cdk-high-contrast-black-on-white",sk="cdk-high-contrast-white-on-black",c0="cdk-high-contrast-active";let a7=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Le(QK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(c0,ik,sk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(c0,ik):2===r&&t.add(c0,sk)}}static#e=this.\u0275fac=function(r){return new(r||n)(he(jO),he(Jn))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ok=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const d7=new Ee("mat-sanity-checks",{providedIn:"root",factory:function l7(){return!0}});let oc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function RK(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(he(a7),he(d7,8),he(Jn))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[ok,ok]})}return n})(),uk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[oc,oc]})}return n})();const lk=cv({passive:!0,capture:!0});class p7{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function SK(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,lk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,lk)))}}class u0{static#e=this._eventManager=new p7;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=zO(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...dk,...r.animation},o=r.radius||function m7(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,b="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new f7(this,f,r,b);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!b&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",H),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(b||!u)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...dk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=zO(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,fk.forEach(r=>{u0._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{pk.forEach(t=>{this._triggerElement.addEventListener(t,this,hk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function i7(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function s7(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(fk.forEach(t=>u0._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&pk.forEach(t=>e.removeEventListener(t,this,hk)))}}let b7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[oc,_O,oc]})}return n})();function Hd(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new ht(e?i=>e.schedule(r,0,i):r)}function Cr(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(De(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Dn}function ac(n){return oe((e,t)=>{let s,r=null,i=!1;r=e.subscribe(De(t,void 0,void 0,o=>{s=Ut(n(o,ac(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fv(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zd(n,e){return M(e)?an(n,e,1):an(n,1)}let nZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[oc,oc]})}return n})(),sZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[uk,oc,uk,oc]})}return n})();const vv=Ae(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ok(n){return new ht(e=>{Ut(n()).subscribe(e)})}function _0(){return oe((n,e)=>{let t=null;n._refCount++;const r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kk extends ht{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ge(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lt;const t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lt.EMPTY)}return e}refCount(){return _0()(this)}}function Ev(n){return oe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fk(n=aZ){return oe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function aZ(){return new vv}function lc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hs((i,s)=>n(i,s,r)):Dn,Cu(1),t?Ev(e):Fk(()=>new vv))}function Iv(n,e){return oe(function cZ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(De(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function y0(n){return n<=0?()=>qn:oe((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const mt="primary",Qp=Symbol("RouteTitle");class dZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qd(n){return new dZ(n)}function hZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ro(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Lk(n[i],e[i]))return!1;return!0}function Lk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Vk(n){return n.length>0?n[n.length-1]:null}function dc(n){return function oZ(n){return!!n&&(n instanceof ht||M(n.lift)&&M(n.subscribe))}(n)?n:Ap(n)?T(Promise.resolve(n)):k(n)}const pZ={exact:function jk(n,e,t){if(!Mu(n.segments,e.segments)||!wv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jk(n.children[r],e.children[r],t))return!1;return!0},subset:$k},Uk={exact:function gZ(n,e){return Ro(n,e)},subset:function mZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lk(n[t],e[t]))},ignored:()=>!0};function Bk(n,e,t){return pZ[t.paths](n.root,e.root,t.matrixParams)&&Uk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $k(n,e,t){return Hk(n,e,e.segments,t)}function Hk(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mu(i,t)||e.hasChildren()||!wv(i,t,r))}if(n.segments.length===t.length){if(!Mu(n.segments,t)||!wv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!$k(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Mu(n.segments,i)&&wv(n.segments,i,r)&&n.children[mt])&&Hk(n.children[mt],e,s,r)}}function wv(n,e,t){return e.every((r,i)=>Uk[t](n[i].parameters,r.parameters))}class Gd{constructor(e=new rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qd(this.queryParams)),this._queryParamMap}toString(){return vZ.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bv(this)}}class Yp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qd(this.parameters)),this._parameterMap}toString(){return Gk(this)}}function Mu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Xp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return new v0},providedIn:"root"})}return n})();class v0{parse(e){const t=new MZ(e);return new Gd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jp(e.root,!0)}`,r=function wZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Tv(t)}=${Tv(i)}`).join("&"):`${Tv(t)}=${Tv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function EZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vZ=new v0;function bv(n){return n.segments.map(e=>Gk(e)).join("/")}function Jp(n,e){if(!n.hasChildren())return bv(n);if(e){const t=n.children[mt]?Jp(n.children[mt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==mt&&r.push(`${i}:${Jp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===mt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==mt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===mt?[Jp(n.children[mt],!1)]:[`${i}:${Jp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[mt]?`${bv(n)}/${t[0]}`:`${bv(n)}/(${t.join("//")})`}}function zk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tv(n){return zk(n).replace(/%3B/gi,";")}function E0(n){return zk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cv(n){return decodeURIComponent(n)}function qk(n){return Cv(n.replace(/\+/g,"%20"))}function Gk(n){return`${E0(n.path)}${function IZ(n){return Object.keys(n).map(e=>`;${E0(e)}=${E0(n[e])}`).join("")}(n.parameters)}`}const bZ=/^[^\/()?;#]+/;function I0(n){const e=n.match(bZ);return e?e[0]:""}const TZ=/^[^\/()?;=#]+/,AZ=/^[^=?&#]+/,SZ=/^[^&#]+/;class MZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[mt]=new rn(e,t)),r}parseSegment(){const e=I0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new P(4009,!1);return this.capture(e),new Yp(Cv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function CZ(n){const e=n.match(TZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=I0(this.remaining);i&&(r=i,this.capture(r))}e[Cv(t)]=Cv(r)}parseQueryParam(e){const t=function DZ(n){const e=n.match(AZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function RZ(n){const e=n.match(SZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=qk(t),s=qk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=I0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new P(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=mt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[mt]:new rn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new P(4011,!1)}}function Wk(n){return n.segments.length>0?new rn([],{[mt]:n}):n}function Kk(n){const e={};for(const r of Object.keys(n.children)){const s=Kk(n.children[r]);if(r===mt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function PZ(n){if(1===n.numberOfChildren&&n.children[mt]){const e=n.children[mt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function Pu(n){return n instanceof Gd}function Zk(n){let e;const i=Wk(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new rn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Qk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return w0(i,i,i,t,r);const s=function NZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Xk(t,e,r)}(e);if(s.toRoot())return w0(i,i,new rn([],{}),t,r);const o=function OZ(n,e,t){if(n.isAbsolute)return new Dv(e,!0,0);if(!t)return new Dv(e,!1,NaN);if(null===t.parent)return new Dv(t,!0,0);const r=Av(n.commands[0])?0:1;return function kZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new Dv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?tg(o.segmentGroup,o.index,s.commands):Jk(o.segmentGroup,o.index,s.commands);return w0(i,o.segmentGroup,a,t,r)}function Av(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eg(n){return"object"==typeof n&&null!=n&&n.outlets}function w0(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:Yk(n,e,t);const a=Wk(Kk(o));return new Gd(a,s,i)}function Yk(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Yk(s,e,t)}),new rn(n.segments,r)}class Xk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Av(r[0]))throw new P(4003,!1);const i=r.find(eg);if(i&&i!==Vk(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jk(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return tg(n,e,t);const r=function LZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(eg(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!tF(c,u,o))return s;r+=2}else{if(!tF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new rn(n.segments.slice(0,r.pathIndex),{});return s.children[mt]=new rn(n.segments.slice(r.pathIndex),n.children),tg(s,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?b0(n,e,t):r.match?tg(n,0,i):b0(n,e,t)}function tg(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function FZ(n){return eg(n[0])?n[0].outlets:{[mt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==mt)&&n.children[mt]&&1===n.numberOfChildren&&0===n.children[mt].segments.length){const s=tg(n.children[mt],e,t);return new rn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Jk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new rn(n.segments,i)}}function b0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(eg(s)){const c=VZ(s.outlets);return new rn(r,c)}if(0===i&&Av(t[0])){r.push(new Yp(n.segments[e].path,eF(t[0]))),i++;continue}const o=eg(s)?s.outlets[mt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Av(a)?(r.push(new Yp(o,eF(a))),i+=2):(r.push(new Yp(o,{})),i++)}return new rn(r,{})}function VZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=b0(new rn([],{}),0,r))}),e}function eF(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tF(n,e,t){return n==t.path&&Ro(e,t.parameters)}const ng="imperative";class Mo{constructor(e,t){this.id=e,this.url=t}}class Sv extends Mo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hc extends Mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rg extends Mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wd extends Mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Rv extends Mo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nF extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UZ extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BZ extends Mo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jZ extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $Z extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class T0{}class C0{constructor(e){this.url=e}}class ZZ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ig,this.attachRef=null}}let ig=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ZZ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class iF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=A0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=A0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=D0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return D0(e,this._root).map(t=>t.value)}}function A0(n,e){if(n===e.value)return e;for(const t of e.children){const r=A0(n,t);if(r)return r}return null}function D0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=D0(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Kd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sF extends iF{constructor(e,t){super(e),this.snapshot=t,S0(this,e)}toString(){return this.snapshot.toString()}}function oF(n,e){const t=function QZ(n,e){const o=new Mv([],{},{},"",{},mt,e,null,{});return new cF("",new ha(o,[]))}(0,e),r=new w([new Yp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new fc(r,i,o,a,s,mt,e,t.root);return c.snapshot=t.root,new sF(new ha(c,[]),t)}class fc{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(u=>u[Qp]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(e=>qd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(e=>qd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function YZ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Mv{get title(){return this.data?.[Qp]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cF extends iF{constructor(e,t){super(t),this.url=e,S0(this,t)}toString(){return uF(this._root)}}function S0(n,e){e.value._routerState=n,e.children.forEach(t=>S0(n,t))}function uF(n){const e=n.children.length>0?` { ${n.children.map(uF).join(", ")} } `:"";return`${n.value}${e}`}function R0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ro(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ro(e.params,t.params)||n.paramsSubject.next(t.params),function fZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ro(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ro(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function M0(n,e){const t=Ro(n.params,e.params)&&function _Z(n,e){return Mu(n,e)&&n.every((t,r)=>Ro(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||M0(n.parent,e.parent))}let P0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=mt,this.activateEvents=new Xn,this.deactivateEvents=new Xn,this.attachEvents=new Xn,this.detachEvents=new Xn,this.parentContexts=Le(ig),this.location=Le(Xs),this.changeDetector=Le($y),this.environmentInjector=Le(Rs),this.inputBinder=Le(Pv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new P(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new XZ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wi]})}return n})();class XZ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fc?this.route:e===ig?this.childContexts:this.parent.get(e,t)}}const Pv=new Ee("");let lF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=lv([r.queryParams,r.params,r.data]).pipe(Be(([s,o,a],c)=>(a={...s,...o,...a},0===c?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function n5(n){const e=St(n);if(!e)return null;const t=new Ip(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function sg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function eQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sg(n,r,i);return sg(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>sg(n,a)),o}}const r=function tQ(n){return new fc(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>sg(n,s));return new ha(r,i)}}const x0="ngNavigationCancelingError";function dF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Pu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function hF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[x0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function fF(n){return n&&n[x0]}let pF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["ng-component"]],standalone:!0,features:[EN],decls:1,vars:0,template:function(r,i){1&r&&Ht(0,"router-outlet")},dependencies:[P0],encapsulation:2})}return n})();function N0(n){const e=n.children&&n.children.map(N0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==mt&&(t.component=pF),t}function to(n){return n.outlet||mt}function og(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class uQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),R0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Kd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Kd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Kd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Kd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new KZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new GZ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(R0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),R0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=og(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class gF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xv{constructor(e,t){this.component=e,this.route=t}}function lQ(n,e,t){const r=n._root;return ag(r,e?e._root:null,t,[r.value])}function Zd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function jI(n){return null!==yl(n)}(n)?e.get(n):n:r}function ag(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Kd(e);return n.children.forEach(o=>{(function hQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function fQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mu(n.url,e.url)||!Ro(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!M0(n,e)||!Ro(n.queryParams,e.queryParams);default:return!M0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new gF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ag(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xv(a.outlet.component,o))}else o&&cg(e,a,i),i.canActivateChecks.push(new gF(r)),ag(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>cg(a,t.getContext(o),i)),i}function cg(n,e,t){const r=Kd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{cg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new xv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ug(n){return"function"==typeof n}function mF(n){return n instanceof vv||"EmptyError"===n?.name}const Nv=Symbol("INITIAL_VALUE");function Qd(){return Be(n=>lv(n.map(e=>e.pipe(Cu(1),qp(Nv)))).pipe(Me(e=>{for(const t of e)if(!0!==t){if(t===Nv)return Nv;if(!1===t||t instanceof Gd)return t}return!0}),hs(e=>e!==Nv),Cu(1)))}function _F(n){return function wi(...n){return bi(n)}(Cr(e=>{if(Pu(e))throw dF(0,e)}),Me(e=>!0===e))}class Ov{constructor(e){this.segmentGroup=e||null}}class yF{constructor(e){this.urlTree=e}}function Yd(n){return Hd(new Ov(n))}function vF(n){return Hd(new yF(n))}class NQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new P(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[mt])return Hd(new P(4e3,!1));i=i.children[mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Gd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new rn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new P(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const O0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OQ(n,e,t,r,i){const s=k0(n,e,t);return s.matched?(r=function rQ(n,e){return n.providers&&!n._injector&&(n._injector=Xb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function MQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Zd(o,n);return dc(function vQ(n){return n&&ug(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Qd(),_F()):k(!0)}(r,e,t).pipe(Me(o=>!0===o?s:{...O0}))):k(s)}function k0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...O0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hZ)(t,n,e);if(!i)return{...O0};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function EF(n,e,t,r){return t.length>0&&function LQ(n,e,t){return t.some(r=>kv(n,e,r)&&to(r)!==mt)}(n,t,r)?{segmentGroup:new rn(e,FQ(r,new rn(t,n.children))),slicedSegments:[]}:0===t.length&&function VQ(n,e,t){return t.some(r=>kv(n,e,r))}(n,t,r)?{segmentGroup:new rn(n.segments,kQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new rn(n.segments,n.children),slicedSegments:t}}function kQ(n,e,t,r,i){const s={};for(const o of r)if(kv(n,t,o)&&!i[to(o)]){const a=new rn([],{});s[to(o)]=a}return{...i,...s}}function FQ(n,e){const t={};t[mt]=e;for(const r of n)if(""===r.path&&to(r)!==mt){const i=new rn([],{});t[to(r)]=i}return t}function kv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class $Q{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new NQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new P(4002,!1)}recognize(){const e=EF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,mt).pipe(ac(t=>{if(t instanceof yF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Ov?this.noMatchError(t):t}),Me(t=>{const r=new Mv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},mt,this.rootComponentType,null,{}),i=new ha(r,t),s=new cF("",i),o=function xZ(n,e,t=null,r=null){return Qk(Zk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,mt).pipe(ac(r=>{throw r instanceof Ov?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=aF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return T(i).pipe(zd(s=>{const o=r.children[s],a=function aQ(n,e){const t=n.filter(r=>to(r)===e);return t.push(...n.filter(r=>to(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Iv((s,o)=>(s.push(...o),s)),Ev(null),function uZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hs((i,s)=>n(i,s,r)):Dn,y0(1),t?Ev(e):Fk(()=>new vv))}(),an(s=>{if(null===s)return Yd(r);const o=IF(s);return function HQ(n){n.sort((e,t)=>e.value.outlet===mt?-1:t.value.outlet===mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return T(t).pipe(zd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(ac(c=>{if(c instanceof Ov)return k(null);throw c}))),lc(a=>!!a),ac(a=>{if(mF(a))return function BQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):Yd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function UQ(n,e,t,r){return!!(to(n)===r||r!==mt&&kv(e,t,n))&&("**"===n.path||k0(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Yd(i):Yd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(an(o=>{const a=new rn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=k0(t,i,s);if(!a)return Yd(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?vF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(an(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Vk(i).parameters:{};a=k({snapshot:new Mv(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wF(r),to(r),r.component??r._loadedComponent??null,r,bF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=OQ(t,r,i,e).pipe(Me(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Mv(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wF(r),to(r),r.component??r._loadedComponent??null,r,bF(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe(Be(c=>null===c?Yd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Be(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:b,slicedSegments:R}=EF(t,y,I,u);if(0===R.length&&b.hasChildren())return this.processChildren(f,u,b).pipe(Me(H=>null===H?null:[new ha(m,H)]));if(0===u.length&&0===R.length)return k([new ha(m,[])]);const x=to(r)===s;return this.processSegment(f,u,b,R,x?mt:s,!0).pipe(Me(H=>[new ha(m,H)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function RQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Zd(o,n);return dc(function gQ(n){return n&&ug(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Qd(),_F())}(e,t,r).pipe(an(i=>i?this.configLoader.loadChildren(e,t).pipe(Cr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function xQ(n){return Hd(hF(!1,3))}())):k({routes:[],injector:e})}}function zQ(n){const e=n.value.routeConfig;return e&&""===e.path}function IF(n){const e=[],t=new Set;for(const r of n){if(!zQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=IF(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function wF(n){return n.data||{}}function bF(n){return n.resolve||{}}function TF(n){return"string"==typeof n.title||null===n.title}function F0(n){return Be(e=>{const t=n(e);return t?T(t).pipe(Me(()=>e)):k(e)})}const Xd=new Ee("ROUTES");let L0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Le(m1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=dc(t.loadComponent()).pipe(Me(CF),Cr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),fv(()=>{this.componentLoaders.delete(t)})),i=new kk(r,()=>new ae).pipe(_0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function YQ(n,e,t,r){return dc(n.loadChildren()).pipe(Me(CF),an(i=>i instanceof yN||Array.isArray(i)?k(i):T(e.compileModuleAsync(i))),Me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Xd,[],{optional:!0,self:!0}).flat()),{routes:o.map(N0),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(fv(()=>{this.childrenLoaders.delete(r)})),o=new kk(s,()=>new ae).pipe(_0());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CF(n){return function XQ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Fv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ae,this.transitionAbortSubject=new ae,this.configLoader=Le(L0),this.environmentInjector=Le(Rs),this.urlSerializer=Le(Xp),this.rootContexts=Le(ig),this.inputBindingEnabled=null!==Le(Pv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new zZ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new HZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ng,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hs(s=>0!==s.id),Me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Be(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(Cr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Be(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Wd(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),qn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(Be(y=>{const I=this.transitions?.getValue();return this.events.next(new Sv(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?qn:Promise.resolve(y)}),function qQ(n,e,t,r,i,s){return an(o=>function jQ(n,e,t,r,i,s,o="emptyOnly"){return new $Q(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Me(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Cr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new nF(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:b,restoredState:R,extras:x}=c,H=new Sv(y,this.urlSerializer.serialize(I),b,R);this.events.next(H);const V=oF(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:V,urlAfterRedirects:I,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const y="";return this.events.next(new Wd(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),qn}}),Cr(c=>{const u=new UZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Me(c=>(this.currentTransition=s={...c,guards:lQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function IQ(n,e){return an(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function wQ(n,e,t,r){return T(n).pipe(an(i=>function SQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const c=og(e)??i,u=Zd(a,c);return dc(function yQ(n){return n&&ug(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(lc())})).pipe(Qd()):k(!0)}(i.component,i.route,t,e,r)),lc(i=>!0!==i,!0))}(o,r,i,n).pipe(an(a=>a&&function pQ(n){return"boolean"==typeof n}(a)?function bQ(n,e,t,r){return T(e).pipe(zd(i=>dv(function CQ(n,e){return null!==n&&e&&e(new qZ(n)),k(!0)}(i.route.parent,r),function TQ(n,e){return null!==n&&e&&e(new WZ(n)),k(!0)}(i.route,r),function DQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function dQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Ok(()=>k(o.guards.map(c=>{const u=og(o.node)??t,f=Zd(c,u);return dc(function _Q(n){return n&&ug(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(lc())})).pipe(Qd())));return k(s).pipe(Qd())}(n,i.path,t),function AQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>Ok(()=>{const o=og(e)??t,a=Zd(s,o);return dc(function mQ(n){return n&&ug(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(lc())}));return k(i).pipe(Qd())}(n,i.route,t))),lc(i=>!0!==i,!0))}(r,s,n,e):k(a)),Me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Cr(c=>{if(s.guardsResult=c.guardsResult,Pu(c.guardsResult))throw dF(0,c.guardsResult);const u=new BZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),hs(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),F0(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Cr(u=>{const f=new jZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Be(u=>{let f=!1;return k(u).pipe(function GQ(n,e){return an(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return T(i).pipe(zd(o=>function WQ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!TF(i)&&(s[Qp]=i.title),function KQ(n,e,t,r){const i=function ZQ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return T(i).pipe(an(o=>function QQ(n,e,t,r){const i=og(e)??r,s=Zd(n,i);return dc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(lc(),Cr(a=>{s[o]=a}))),y0(1),function lZ(n){return Me(()=>n)}(s),ac(o=>mF(o)?qn:Hd(o)))}(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=aF(n,t).resolve,i&&TF(i)&&(n.data[Qp]=i.title),null)))}(o.route,r,n,e)),Cr(()=>s++),y0(1),an(o=>s===i.length?k(t):qn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Cr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),Cr(u=>{const f=new $Z(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),F0(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Cr(y=>{f.component=y}),Me(()=>{})));for(const y of f.children)m.push(...u(y));return m};return lv(u(c.targetSnapshot.root)).pipe(Ev(),Cu(1))}),F0(()=>this.afterPreactivation()),Me(c=>{const u=function JZ(n,e,t){const r=sg(n,e._root,t?t._root:void 0);return new sF(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Cr(()=>{this.events.next(new T0)}),((n,e,t,r)=>Me(i=>(new uQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Cu(1),Cr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),XO(this.transitionAbortSubject.pipe(Cr(c=>{throw c}))),fv(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ac(c=>{if(a=!0,fF(c))this.events.next(new rg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function nQ(n){return fF(n)&&Pu(n.url)}(c)?this.events.next(new C0(c.url)):s.resolve(!1);else{this.events.next(new Rv(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return qn}))}))}cancelNavigationTransition(t,r,i){const s=new rg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AF(n){return n!==ng}let DF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===mt);return r}getResolvedTitleForRoute(t){return t.data[Qp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return Le(JQ)},providedIn:"root"})}return n})(),JQ=(()=>{class n extends DF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(he(FO))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return Le(nY)},providedIn:"root"})}return n})();class tY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let nY=(()=>{class n extends tY{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Lv=new Ee("",{providedIn:"root",factory:()=>({})});let rY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:function(){return Le(iY)},providedIn:"root"})}return n})(),iY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(lg||{});function SF(n,e){n.events.pipe(hs(t=>t instanceof hc||t instanceof rg||t instanceof Rv||t instanceof Wd),Me(t=>t instanceof hc||t instanceof Wd?lg.COMPLETE:t instanceof rg&&(0===t.code||1===t.code)?lg.REDIRECTING:lg.FAILED),hs(t=>t!==lg.REDIRECTING),Cu(1)).subscribe(()=>{e()})}function sY(n){throw n}function oY(n,e,t){return e.parse("/")}const aY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Le(p1),this.isNgZoneEnabled=!1,this._events=new ae,this.options=Le(Lv,{optional:!0})||{},this.pendingTasks=Le(g1),this.errorHandler=this.options.errorHandler||sY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Le(rY),this.routeReuseStrategy=Le(eY),this.titleStrategy=Le(DF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Le(Xd,{optional:!0})?.flat()??[],this.navigationTransitions=Le(Fv),this.urlSerializer=Le(Xp),this.location=Le(MT),this.componentInputBindingEnabled=!!Le(Pv,{optional:!0}),this.eventsSubscription=new Lt,this.isNgZoneEnabled=Le(Pt)instanceof Pt&&Pt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Gd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oF(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(RF(r)&&this._events.next(r));if(r instanceof Sv)AF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Wd)this.rawUrlTree=i.rawUrl;else if(r instanceof nF){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof T0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof rg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof C0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||AF(i.source)};this.scheduleNavigation(s,ng,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Rv&&this.restoreHistory(i,!0),r instanceof hc&&(this.navigated=!0),RF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ng,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(N0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=Zk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return Qk(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Pu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ng,null,r)}navigate(t,r={skipLocationChange:!1}){return function uY(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new P(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...aY}:!1===r?{...cY}:r,Pu(t))return Bk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Bk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return SF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RF(n){return!(n instanceof T0||n instanceof C0)}let Vv=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ae,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof hc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function yM(n,e,t){return function y3(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?_M:Ja}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(hi),pe(fc),function Qa(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Dl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Rr(),n)}("tabindex"),pe(ia),pe(Qi),pe(wu))};static#t=this.\u0275dir=qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&cn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Co("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Bd],skipLocationChange:["skipLocationChange","skipLocationChange",Bd],replaceUrl:["replaceUrl","replaceUrl",Bd],routerLink:"routerLink"},standalone:!0,features:[PP,Wi]})}return n})();class MF{}let hY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(hs(t=>t instanceof hc),zd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Xb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return T(i).pipe(Lr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(an(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?T([s,this.loader.loadComponent(r)]).pipe(Lr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(he(hi),he(m1),he(Rs),he(MF),he(L0))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const V0=new Ee("");let PF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Wd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function iP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();function fa(n,e){return{\u0275kind:n,\u0275providers:e}}function NF(){const n=Le(Jr);return e=>{const t=n.get(Eu);if(e!==t.components[0])return;const r=n.get(hi),i=n.get(OF);1===n.get(U0)&&r.initialNavigation(),n.get(kF,null,vt.Optional)?.setUpPreloading(),n.get(V0,null,vt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const OF=new Ee("",{factory:()=>new ae}),U0=new Ee("",{providedIn:"root",factory:()=>1}),kF=new Ee("");function mY(n){return fa(0,[{provide:kF,useExisting:hY},{provide:MF,useExisting:n}])}const FF=new Ee("ROUTER_FORROOT_GUARD"),yY=[MT,{provide:Xp,useClass:v0},hi,ig,{provide:fc,useFactory:function xF(n){return n.routerState.root},deps:[hi]},L0,[]];function vY(){return new b1("Router",hi)}let LF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yY,[],{provide:Xd,multi:!0,useValue:t},{provide:FF,useFactory:bY,deps:[[hi,new br,new sp]]},{provide:Lv,useValue:r||{}},r?.useHash?{provide:wu,useClass:a5}:{provide:wu,useClass:eO},{provide:V0,useFactory:()=>{const n=Le(A8),e=Le(Pt),t=Le(Lv),r=Le(Fv),i=Le(Xp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new PF(i,r,n,e,t)}},r?.preloadingStrategy?mY(r.preloadingStrategy).\u0275providers:[],{provide:b1,multi:!0,useFactory:vY},r?.initialNavigation?TY(r):[],r?.bindToComponentInputs?fa(8,[lF,{provide:Pv,useExisting:lF}]).\u0275providers:[],[{provide:VF,useFactory:NF},{provide:ET,multi:!0,useExisting:VF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(he(FF,8))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function bY(n){return"guarded"}function TY(n){return["disabled"===n.initialNavigation?fa(3,[{provide:hT,multi:!0,useFactory:()=>{const e=Le(hi);return()=>{e.setUpLocationChangeListener()}}},{provide:U0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fa(2,[{provide:U0,useValue:0},{provide:hT,multi:!0,deps:[Jr],useFactory:e=>{const t=e.get(s5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(hi),s=e.get(OF);SF(i,()=>{r(!0)}),e.get(Fv).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const VF=new Ee("");function AY(n,e){if(1&n&&(ce(0,"li",11)(1,"a",12),ve(2),ee()()),2&n){const t=e.$implicit;Ye(1),mu("href",t.url,Ja),Ye(1),un(t.name)}}let DY=(()=>{class n{constructor(){this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"}]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-home"]],decls:40,vars:1,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),ve(4,"Bine ati venit in comunitatea "),ce(5,"a",3),ve(6,"Romani in Seattle"),ee()()()(),Ht(7,"p"),ce(8,"div",4)(9,"div",5)(10,"h2"),ve(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),ee(),ce(12,"p"),ve(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),ee()()(),ce(14,"div",4)(15,"div",6)(16,"h2"),ve(17,"Evenimente"),ee(),ce(18,"p"),ve(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),ee()(),ce(20,"div",6)(21,"h2"),ve(22,"Servicii"),ee(),ce(23,"p"),ve(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),ee()(),ce(25,"div",6)(26,"h2"),ve(27,"Oportunit\u0103\u021bi"),ee(),ce(28,"p"),ve(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),ee()(),ce(30,"div",6)(31,"h2"),ve(32,"Resurse"),ee(),ce(33,"p"),ve(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),ee()()(),ce(35,"section",7)(36,"h2",8),ve(37,"Resurse utile pentru comunitate"),ee(),ce(38,"ul",9),Zs(39,AY,3,2,"li",10),ee()()()),2&r&&(Ye(39),En("ngForOf",i.resourceLinks))},dependencies:[bu],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();var tr=Je(534);(0,tr.registerVersion)("firebase","10.12.2","app");const xY=new class PY extends QO{}(class MY extends ZO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),pc=new ec("ANGULARFIRE2_VERSION");function B0(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Uv=(n,e)=>{const t=e?[e]:(0,tr.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class dg{constructor(){return Uv(NY)}}const NY="app-check";function Jd(){}class UF{zone;delegate;constructor(e,t=xY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class OY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jd,{},Jd,Jd)),t.pipe(Cr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new UF(Zone.current)),this.insideAngular=t.run(()=>new UF(Zone.current,a0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(he(Pt))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function th(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function xu(n){return th().ngZone.run(()=>n())}function BF(n){return n.pipe(Rn(th().outsideAngular))}function xi(n){return function FY(n){return function(t){return(t=t.lift(new OY(n.ngZone))).pipe(Vr(n.outsideAngular),Rn(n.insideAngular))}}(th())(n)}const LY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),xu(()=>n.apply(void 0,r))},j0=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=xu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jd,{},Jd,Jd))),r[s]=LY(r[s],t));const i=function kY(n){return th().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ht){const s=th();return i.pipe(Vr(s.outsideAngular),Rn(s.insideAngular))}return xu(()=>i)}return i instanceof ht?i.pipe(xi):i instanceof Promise?xu(()=>new Promise((s,o)=>i.then(a=>xu(()=>s(a)),a=>xu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:xu(()=>i)};var Po=Je(106);Po.Z.registerVersion("firebase","10.12.2","app-compat");const BY=["ngOnDestroy"];class jF{constructor(e){return e}}const hg=new Ee("angularfire2.app.options"),fg=new Ee("angularfire2.app.name");function Bv(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Po.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Po.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;HY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new jF(o)}const HY=(n,...e)=>{},zY={provide:jF,useFactory:Bv,deps:[hg,Pt,[new br,fg]]};let qY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:hg,useValue:t},{provide:fg,useValue:r}]}}constructor(t){Po.Z.registerVersion("angularfire",pc.full,"core"),Po.Z.registerVersion("angularfire",pc.full,"app-compat"),Po.Z.registerVersion("angular",lb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(he(Ms))};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[zY]})}return n})();function $0(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function GY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||($F("error",`${e} was already initialized on the ${t} Firebase App with different settings.${WY?" You may need to reload as Firebase is not HMR aware.":""}`),$F("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const WY=typeof module<"u"&&!!module.hot,$F=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Je(365);class KY extends ae{constructor(e=1/0,t=1/0,r=o0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function HF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,de({connector:()=>new KY(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function zF(n,e){return M(e)?Be(()=>n,e):Be(()=>n)}const qF=new Ee("angularfire2.auth.use-emulator"),GF=new Ee("angularfire2.auth.settings"),WF=new Ee("angularfire2.auth.tenant-id"),KF=new Ee("angularfire2.auth.langugage-code"),ZF=new Ee("angularfire2.auth.use-device-language"),QF=new Ee("angularfire.auth.persistence"),YF=(n,e,t,r,i,s,o,a)=>$0(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let XF=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const b=new ae,R=k(void 0).pipe(Rn(o.outsideAngular),Be(()=>s.runOutsideAngular(()=>Promise.resolve().then(Je.bind(Je,365)))),Me(()=>Bv(t,s,r)),Me(x=>YF(x,s,a,u,f,m,c,y)),HF({bufferSize:1,refCount:!1}));if(iv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{R.pipe(lc()).subscribe();const x=R.pipe(Be(W=>W.getRedirectResult().then(ne=>ne,()=>null)),xi,HF({bufferSize:1,refCount:!1})),H=R.pipe(Be(W=>new ht(ne=>({unsubscribe:s.runOutsideAngular(()=>W.onAuthStateChanged(Ce=>ne.next(Ce),Ce=>ne.error(Ce),()=>ne.complete()))})))),V=R.pipe(Be(W=>new ht(ne=>({unsubscribe:s.runOutsideAngular(()=>W.onIdTokenChanged(Ce=>ne.next(Ce),Ce=>ne.error(Ce),()=>ne.complete()))}))));this.authState=x.pipe(zF(H),Vr(o.outsideAngular),Rn(o.insideAngular)),this.user=x.pipe(zF(V),Vr(o.outsideAngular),Rn(o.insideAngular)),this.idToken=this.user.pipe(Be(W=>W?T(W.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Be(W=>W?T(W.getIdTokenResult()):k(null))),this.credential=S(x,b,this.authState.pipe(hs(W=>!W))).pipe(Me(W=>W?.user?W:null),Vr(o.outsideAngular),Rn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(BY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,R,s,{spy:{apply:(x,H,V)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&V.then(W=>b.next(W))}}})}static \u0275fac=function(r){return new(r||n)(he(hg),he(fg,8),he(Ms),he(Pt),he(eh),he(qF,8),he(GF,8),he(WF,8),he(KF,8),he(ZF,8),he(QF,8),he(dg,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function H0(){return oe((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Nu,tL,ue=Je(861),jv=Je(537),xo=Je(879),gt=Je(58),JF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eL={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,N,L){L||(L=0);var z=Array(16);if("string"==typeof N)for(var q=0;16>q;++q)z[q]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(q=0;16>q;++q)z[q]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;var X=j.g[3],U=(N=j.g[0])+(X^(L=j.g[1])&((q=j.g[2])^X))+z[0]+3614090360&4294967295;U=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=L+(U<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[1]+3905402710&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[2]+606105819&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[3]+3250441966&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[4]+4118548399&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[5]+1200080426&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[6]+2821735955&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[7]+4249261313&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[8]+1770035416&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[9]+2336552879&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[10]+4294925233&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[11]+2304563134&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[12]+1804603682&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[13]+4254626195&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[14]+2792965006&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[15]+1236535329&4294967295)<<22&4294967295|U>>>10))+((U=N+(q^X&(L^q))+z[1]+4129170786&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[6]+3225465664&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[11]+643717713&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[0]+3921069994&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[5]+3593408605&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[10]+38016083&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[15]+3634488961&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[4]+3889429448&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[9]+568446438&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[14]+3275163606&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[3]+4107603335&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[8]+1163531501&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[13]+2850285829&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[2]+4243563512&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[7]+1735328473&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[12]+2368359562&4294967295)<<20&4294967295|U>>>12))+((U=N+(L^q^X)+z[5]+4294588738&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[8]+2272392833&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[11]+1839030562&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[14]+4259657740&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[1]+2763975236&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[4]+1272893353&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[7]+4139469664&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[10]+3200236656&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[13]+681279174&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[0]+3936430074&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[3]+3572445317&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[6]+76029189&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[9]+3654602809&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[12]+3873151461&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[15]+530742520&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[2]+3299628645&4294967295)<<23&4294967295|U>>>9))+((U=N+(q^(L|~X))+z[0]+4096336452&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[7]+1126891415&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[14]+2878612391&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[5]+4237533241&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[12]+1700485571&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[3]+2399980690&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[10]+4293915773&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[1]+2240044497&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[8]+1873313359&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[15]+4264355552&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[6]+2734768916&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[13]+1309151649&4294967295)<<21&4294967295|U>>>11))+((X=(N=L+((U=N+(q^(L|~X))+z[4]+4149444226&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[11]+3174756917&4294967295)<<10&4294967295|U>>>22))^((q=X+((U=q+(N^(X|~L))+z[2]+718787259&4294967295)<<15&4294967295|U>>>17))|~N))+z[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+X&4294967295}function o(j,N){this.h=N;for(var L=[],z=!0,q=j.length-1;0<=q;q--){var X=0|j[q];z&&X==N||(L[q]=X,z=!1)}this.g=L}(function e(j,N){function L(){}L.prototype=N.prototype,j.D=N.prototype,j.prototype=new L,j.prototype.constructor=j,j.C=function(z,q,X){for(var U=Array(arguments.length-2),Fs=2;Fs<arguments.length;Fs++)U[Fs-2]=arguments[Fs];return N.prototype[q].apply(z,U)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,N){void 0===N&&(N=j.length);for(var L=N-this.blockSize,z=this.B,q=this.h,X=0;X<N;){if(0==q)for(;X<=L;)i(this,j,X),X+=this.blockSize;if("string"==typeof j){for(;X<N;)if(z[q++]=j.charCodeAt(X++),q==this.blockSize){i(this,z),q=0;break}}else for(;X<N;)if(z[q++]=j[X++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var L=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=255&L,L/=256;for(this.u(j),j=Array(16),N=L=0;4>N;++N)for(var z=0;32>z;z+=8)j[L++]=this.g[N]>>>z&255;return j};var a={};function c(j){return-128<=j&&128>j?function s(j,N){var L=a;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=N(j)}(j,function(N){return new o([0|N],0>N?-1:0)}):new o([0|j],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return x(u(-j));for(var N=[],L=1,z=0;j>=L;z++)N[z]=j/L|0,L*=4294967296;return new o(N,0)}var m=c(0),y=c(1),I=c(16777216);function b(j){if(0!=j.h)return!1;for(var N=0;N<j.g.length;N++)if(0!=j.g[N])return!1;return!0}function R(j){return-1==j.h}function x(j){for(var N=j.g.length,L=[],z=0;z<N;z++)L[z]=~j.g[z];return new o(L,~j.h).add(y)}function H(j,N){return j.add(x(N))}function V(j,N){for(;(65535&j[N])!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function W(j,N){this.g=j,this.h=N}function ne(j,N){if(b(N))throw Error("division by zero");if(b(j))return new W(m,m);if(R(j))return N=ne(x(j),N),new W(x(N.g),x(N.h));if(R(N))return N=ne(j,x(N)),new W(x(N.g),N.h);if(30<j.g.length){if(R(j)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var L=y,z=N;0>=z.l(j);)L=Ce(L),z=Ce(z);var q=Oe(L,1),X=Oe(z,1);for(z=Oe(z,2),L=Oe(L,2);!b(z);){var U=X.add(z);0>=U.l(j)&&(q=q.add(L),X=U),z=Oe(z,1),L=Oe(L,1)}return N=H(j,q.j(N)),new W(q,N)}for(q=m;0<=j.l(N);){for(L=Math.max(1,Math.floor(j.m()/N.m())),z=48>=(z=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,z-48),U=(X=u(L)).j(N);R(U)||0<U.l(j);)U=(X=u(L-=z)).j(N);b(X)&&(X=y),q=q.add(X),j=H(j,U)}return new W(q,j)}function Ce(j){for(var N=j.g.length+1,L=[],z=0;z<N;z++)L[z]=j.i(z)<<1|j.i(z-1)>>>31;return new o(L,j.h)}function Oe(j,N){var L=N>>5;N%=32;for(var z=j.g.length-L,q=[],X=0;X<z;X++)q[X]=0<N?j.i(X+L)>>>N|j.i(X+L+1)<<32-N:j.i(X+L);return new o(q,j.h)}(n=o.prototype).m=function(){if(R(this))return-x(this).m();for(var j=0,N=1,L=0;L<this.g.length;L++){var z=this.i(L);j+=(0<=z?z:4294967296+z)*N,N*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(R(this))return"-"+x(this).toString(j);for(var N=u(Math.pow(j,6)),L=this,z="";;){var q=ne(L,N).g,X=((0<(L=H(L,q.j(N))).g.length?L.g[0]:L.h)>>>0).toString(j);if(b(L=q))return X+z;for(;6>X.length;)X="0"+X;z=X+z}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return R(j=H(this,j))?-1:b(j)?0:1},n.abs=function(){return R(this)?x(this):this},n.add=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0,q=0;q<=N;q++){var X=z+(65535&this.i(q))+(65535&j.i(q)),U=(X>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);z=U>>>16,L[q]=(U&=65535)<<16|(X&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function(j){if(b(this)||b(j))return m;if(R(this))return R(j)?x(this).j(x(j)):x(x(this).j(j));if(R(j))return x(this.j(x(j)));if(0>this.l(I)&&0>j.l(I))return u(this.m()*j.m());for(var N=this.g.length+j.g.length,L=[],z=0;z<2*N;z++)L[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<j.g.length;q++){var X=this.i(z)>>>16,U=65535&this.i(z),Fs=j.i(q)>>>16,Uc=65535&j.i(q);L[2*z+2*q]+=U*Uc,V(L,2*z+2*q),L[2*z+2*q+1]+=X*Uc,V(L,2*z+2*q+1),L[2*z+2*q+1]+=U*Fs,V(L,2*z+2*q+1),L[2*z+2*q+2]+=X*Fs,V(L,2*z+2*q+2)}for(z=0;z<N;z++)L[z]=L[2*z+1]<<16|L[2*z];for(z=N;z<2*N;z++)L[z]=0;return new o(L,0)},n.A=function(j){return ne(this,j).h},n.and=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)&j.i(z);return new o(L,this.h&j.h)},n.or=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)|j.i(z);return new o(L,this.h|j.h)},n.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)^j.i(z);return new o(L,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tL=eL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(j,N){if(0==j.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==j.charAt(0))return x(f(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),z=m,q=0;q<j.length;q+=8){var X=Math.min(8,j.length-q),U=parseInt(j.substring(q,q+X),N);8>X?(X=u(Math.pow(N,X)),z=z.j(X).add(u(U))):z=(z=z.j(L)).add(u(U))}return z},Nu=eL.Integer=o}).apply(typeof JF<"u"?JF:typeof self<"u"?self:typeof window<"u"?window:{});var nL,rL,pg,iL,Hv,z0,sL,oL,aL,$v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $v&&$v];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var K=h[D];if(!(K in E))break e;E=E[K]}(_=_(D=E[h=h[h.length-1]]))!=D&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,D=!1,K={next:function(){if(!D&&E<h.length){var se=E++;return{value:_(se,h[se]),done:!1}}return D=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,D),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function b(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(D,K,se){for(var Re=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)Re[mn-2]=arguments[mn];return _.prototype[K].apply(D,Re)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let D=0;D<_;D++)E[D]=h[D];return E}return[]}function x(h,_){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const K=h.length||0,se=D.length||0;h.length=K+se;for(let Re=0;Re<se;Re++)h[K+Re]=D[Re]}else h.push(D)}}function V(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var Ce=!(-1==W().indexOf("Gecko")||-1!=W().toLowerCase().indexOf("webkit")&&-1==W().indexOf("Edge")||-1!=W().indexOf("Trident")||-1!=W().indexOf("MSIE")||-1!=W().indexOf("Edge"));function Oe(h,_,E){for(const D in h)_.call(E,h[D],D,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,D;for(let K=1;K<arguments.length;K++){for(E in D=arguments[K],D)h[E]=D[E];for(let se=0;se<L.length;se++)E=L[se],Object.prototype.hasOwnProperty.call(D,E)&&(h[E]=D[E])}}function q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function X(h){a.setTimeout(()=>{throw h},0)}function U(){var h=xt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Uc=new class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new $e,h=>h.reset());class $e{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,Xe=!1,xt=new class Fs{constructor(){this.h=this.g=null}add(_,E){const D=Uc.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}},pr=()=>{const h=a.Promise.resolve(void 0);Qe=()=>{h.then(Ls)}};var Ls=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(E){X(E)}var _=Uc;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Xe=!1};function rr(){this.s=this.s,this.C=this.C}function On(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rr.prototype.s=!1,rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},On.prototype.h=function(){this.defaultPrevented=!0};var kn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function Bc(h,_){if(On.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ce){e:{try{ne(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:bS[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Bc.aa.h.call(this)}}b(Bc,On);var bS={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Sa=0;function ns(h,_,E,D,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=K,this.key=++Sa,this.da=this.fa=!1}function Ra(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function jc(h){this.src=h,this.g={},this.h=0}function TS(h,_){var E=_.type;if(E in h.g){var se,D=h.g[E],K=Array.prototype.indexOf.call(D,_,void 0);(se=0<=K)&&Array.prototype.splice.call(D,K,1),se&&(Ra(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function CS(h,_,E,D){for(var K=0;K<h.length;++K){var se=h[K];if(!se.da&&se.listener==_&&se.capture==!!E&&se.ha==D)return K}return-1}jc.prototype.add=function(h,_,E,D,K){var se=h.toString();(h=this.g[se])||(h=this.g[se]=[],this.h++);var Re=CS(h,_,D,K);return-1<Re?(_=h[Re],E||(_.fa=!1)):((_=new ns(_,this.src,se,!!D,K)).fa=E,h.push(_)),_};var AS="closure_lm_"+(1e6*Math.random()|0),DS={};function N$(h,_,E,D,K){if(D&&D.once)return k$(h,_,E,D,K);if(Array.isArray(_)){for(var se=0;se<_.length;se++)N$(h,_[se],E,D,K);return null}return E=PS(E),h&&h[ir]?h.K(_,E,u(D)?!!D.capture:!!D,K):O$(h,_,E,!1,D,K)}function O$(h,_,E,D,K,se){if(!_)throw Error("Invalid event type");var Re=u(K)?!!K.capture:!!K,mn=RS(h);if(mn||(h[AS]=mn=new jc(h)),(E=mn.add(_,E,D,Re,se)).proxy)return E;if(D=function Qae(){const _=Yae;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=D,D.src=h,D.listener=E,h.addEventListener)kn||(K=Re),void 0===K&&(K=!1),h.addEventListener(_.toString(),D,K);else if(h.attachEvent)h.attachEvent(L$(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return E}function k$(h,_,E,D,K){if(Array.isArray(_)){for(var se=0;se<_.length;se++)k$(h,_[se],E,D,K);return null}return E=PS(E),h&&h[ir]?h.L(_,E,u(D)?!!D.capture:!!D,K):O$(h,_,E,!0,D,K)}function F$(h,_,E,D,K){if(Array.isArray(_))for(var se=0;se<_.length;se++)F$(h,_[se],E,D,K);else D=u(D)?!!D.capture:!!D,E=PS(E),h&&h[ir]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=CS(se=h.g[_],E,D,K))&&(Ra(se[E]),Array.prototype.splice.call(se,E,1),0==se.length&&(delete h.g[_],h.h--))):h&&(h=RS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=CS(_,E,D,K)),(E=-1<h?_[h]:null)&&SS(E))}function SS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[ir])TS(_.i,h);else{var E=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(E,D,h.capture):_.detachEvent?_.detachEvent(L$(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=RS(_))?(TS(E,h),0==E.h&&(E.src=null,_[AS]=null)):Ra(h)}}}function L$(h){return h in DS?DS[h]:DS[h]="on"+h}function Yae(h,_){if(h.da)h=!0;else{_=new Bc(_,this);var E=h.listener,D=h.ha||h.src;h.fa&&SS(h),h=E.call(D,_)}return h}function RS(h){return(h=h[AS])instanceof jc?h:null}var MS="__closure_events_fn_"+(1e9*Math.random()>>>0);function PS(h){return"function"==typeof h?h:(h[MS]||(h[MS]=function(_){return h.handleEvent(_)}),h[MS])}function vi(){rr.call(this),this.i=new jc(this),this.M=this,this.F=null}function Vi(h,_){var E,D=h.F;if(D)for(E=[];D;D=D.F)E.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new On(_,h);else if(_ instanceof On)_.target=_.target||h;else{var K=_;z(_=new On(D,h),K)}if(K=!0,E)for(var se=E.length-1;0<=se;se--){var Re=_.g=E[se];K=TI(Re,D,!0,_)&&K}if(K=TI(Re=_.g=h,D,!0,_)&&K,K=TI(Re,D,!1,_)&&K,E)for(se=0;se<E.length;se++)K=TI(Re=_.g=E[se],D,!1,_)&&K}function TI(h,_,E,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,se=0;se<_.length;++se){var Re=_[se];if(Re&&!Re.da&&Re.capture==E){var mn=Re.listener,ri=Re.ha||Re.src;Re.fa&&TS(h.i,Re),K=!1!==mn.call(ri,D)&&K}}return K&&!D.defaultPrevented}function V$(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function U$(h){h.g=V$(()=>{h.g=null,h.i&&(h.i=!1,U$(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(vi,rr),vi.prototype[ir]=!0,vi.prototype.removeEventListener=function(h,_,E,D){F$(this,h,_,E,D)},vi.prototype.N=function(){if(vi.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],D=0;D<E.length;D++)Ra(E[D]);delete h.g[_],h.h--}}this.F=null},vi.prototype.K=function(h,_,E,D){return this.i.add(String(h),_,!1,E,D)},vi.prototype.L=function(h,_,E,D){return this.i.add(String(h),_,!0,E,D)};class Xae extends rr{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:U$(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Im(h){rr.call(this),this.h=h,this.g={}}b(Im,rr);var B$=[];function j$(h){Oe(h.g,function(_,E){this.g.hasOwnProperty(E)&&SS(_)},h),h.g={}}Im.prototype.N=function(){Im.aa.N.call(this),j$(this)},Im.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xS=a.JSON.stringify,Jae=a.JSON.parse,ece=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function NS(){}function H$(){}NS.prototype.h=null;var wm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function OS(){On.call(this,"d")}function kS(){On.call(this,"c")}b(OS,On),b(kS,On);var dl={},z$=null;function CI(){return z$=z$||new vi}function q$(h){On.call(this,dl.La,h)}function bm(h){const _=CI();Vi(_,new q$(_))}function G$(h,_){On.call(this,dl.STAT_EVENT,h),this.stat=_}function Ui(h){const _=CI();Vi(_,new G$(_,h))}function W$(h,_){On.call(this,dl.Ma,h),this.size=_}function Tm(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Cm(){this.g=!0}function Zh(h,_,E,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function ice(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var D=E[h];if(!(2>D.length)){var K=D[1];if(Array.isArray(K)&&!(1>K.length)){var se=K[0];if("noop"!=se&&"stop"!=se&&"close"!=se)for(var Re=1;Re<K.length;Re++)K[Re]=""}}}return xS(E)}catch{return _}}(h,E)+(D?" "+D:"")})}dl.La="serverreachability",b(q$,On),dl.STAT_EVENT="statevent",b(G$,On),dl.Ma="timingevent",b(W$,On),Cm.prototype.xa=function(){this.g=!1},Cm.prototype.info=function(){};var FS,AI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function DI(){}function $c(h,_,E,D){this.j=h,this.i=_,this.l=E,this.R=D||1,this.U=new Im(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Z$}function Z$(){this.i=null,this.g="",this.h=!1}b(DI,NS),DI.prototype.g=function(){return new XMLHttpRequest},DI.prototype.i=function(){return{}},FS=new DI;var Q$={},LS={};function VS(h,_,E){h.L=1,h.v=PI(Ma(_)),h.m=E,h.P=!0,Y$(h,null)}function Y$(h,_){h.F=Date.now(),SI(h),h.A=Ma(h.v);var E=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),dH(E.i,"t",D),h.C=0,E=h.j.J,h.h=new Z$,h.g=RH(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Xae(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,D=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(B$[0]=K.toString()),K=B$);for(var se=0;se<K.length;se++){var Re=N$(E,K[se],D||_.handleEvent,!1,_.h||_);if(!Re)break;_.g[Re.key]=Re}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),bm(),function tce(h,_,E,D,K,se){h.info(function(){if(h.g)if(se)for(var Re="",mn=se.split("&"),ri=0;ri<mn.length;ri++){var qt=mn[ri].split("=");if(1<qt.length){var Ei=qt[0];qt=qt[1];var Ii=Ei.split("_");Re=2<=Ii.length&&"type"==Ii[1]?Re+(Ei+"=")+qt+"&":Re+(Ei+"=redacted&")}}else Re=null;else Re=se;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+_+"\n"+E+"\n"+Re})}(h.i,h.u,h.A,h.l,h.R,h.m)}function X$(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function sce(h,_){var E=h.C,D=_.indexOf("\n",E);return-1==D?LS:(E=Number(_.substring(E,D)),isNaN(E)?Q$:(D+=1)+E>_.length?LS:(_=_.slice(D,D+E),h.C=D+E,_))}function SI(h){h.S=Date.now()+h.I,J$(h,h.I)}function J$(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Tm(y(h.ba,h),_)}function US(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Am(h){0==h.j.G||h.J||CH(h.j,h)}function hl(h){US(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,j$(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function BS(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||jS(E.h,h)))if(!h.K&&jS(E.h,h)&&3==E.G){try{var D=E.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var K=D;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;FI(E),OI(E)}qS(E),Ui(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=Tm(y(E.Za,E),6e3));if(1>=nH(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else pl(E,11)}else if((h.K||E.g==h)&&FI(E),!V(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let qt=K[_];if(E.T=qt[0],qt=qt[1],2==E.G)if("c"==qt[0]){E.K=qt[1],E.ia=qt[2];const Ei=qt[3];null!=Ei&&(E.la=Ei,E.j.info("VER="+E.la));const Ii=qt[4];null!=Ii&&(E.Aa=Ii,E.j.info("SVER="+E.Aa));const Xh=qt[5];null!=Xh&&"number"==typeof Xh&&0<Xh&&(E.L=D=1.5*Xh,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const io=h.g;if(io){const VI=io.g?io.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(VI){var se=D.h;se.g||-1==VI.indexOf("spdy")&&-1==VI.indexOf("quic")&&-1==VI.indexOf("h2")||(se.j=se.l,se.g=new Set,se.h&&($S(se,se.h),se.h=null))}if(D.D){const WS=io.g?io.g.getResponseHeader("X-HTTP-Session-Id"):null;WS&&(D.ya=WS,Fn(D.I,D.D,WS))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Re=h;if((D=E).qa=SH(D,D.J?D.ia:null,D.W),Re.K){rH(D.h,Re);var mn=Re,ri=D.L;ri&&(mn.I=ri),mn.B&&(US(mn),SI(mn)),D.g=Re}else bH(D);0<E.i.length&&kI(E)}else"stop"!=qt[0]&&"close"!=qt[0]||pl(E,7);else 3==E.G&&("stop"==qt[0]||"close"==qt[0]?"stop"==qt[0]?pl(E,7):zS(E):"noop"!=qt[0]&&E.l&&E.l.ta(qt),E.v=0)}bm()}catch{}}function eH(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tH(h){return!!h.h||!!h.g&&h.g.size>=h.j}function nH(h){return h.h?1:h.g?h.g.size:0}function jS(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function $S(h,_){h.g?h.g.add(_):h.h=_}function rH(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function iH(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function sH(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function cce(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const D in h)_[E++]=D;return _}}}(h),D=function ace(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,D=0;D<E;D++)_.push(h[D]);return _}for(D in _=[],E=0,h)_[E++]=h[D];return _}(h),K=D.length,se=0;se<K;se++)_.call(void 0,D[se],E&&E[se],h)}$c.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Pa(h)?_.j():this.Y(h)},$c.prototype.Y=function(h){try{if(h==this.g)e:{const Ii=Pa(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>Ii)&&(3!=Ii||this.g&&(this.h.h||this.g.oa()||yH(this.g)))){this.J||4!=Ii||7==_||bm(),US(this);var E=this.g.Z();this.X=E;t:if(X$(this)){var D=yH(this.g);h="";var K=D.length,se=4==Pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hl(this),Am(this);var Re="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(se&&_==K-1)});D.length=0,this.h.g+=h,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=200==E,function nce(h,_,E,D,K,se,Re){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+se+" "+Re})}(this.i,this.u,this.A,this.l,this.R,Ii,E),this.o){if(this.T&&!this.K){t:{if(this.g){var mn,ri=this.g;if((mn=ri.g?ri.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(mn)){var qt=mn;break t}}qt=null}if(!(E=qt)){this.o=!1,this.s=3,Ui(12),hl(this),Am(this);break e}Zh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,BS(this,E)}if(this.P){let io;for(E=!0;!this.J&&this.C<Re.length;){if(io=sce(this,Re),io==LS){4==Ii&&(this.s=4,Ui(14),E=!1),Zh(this.i,this.l,null,"[Incomplete Response]");break}if(io==Q$){this.s=4,Ui(15),Zh(this.i,this.l,Re,"[Invalid Chunk]"),E=!1;break}Zh(this.i,this.l,io,null),BS(this,io)}if(X$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ii||0!=Re.length||this.h.h||(this.s=1,Ui(16),E=!1),this.o=this.o&&E,E){if(0<Re.length&&!this.W){this.W=!0;var Ei=this.j;Ei.g==this&&Ei.ba&&!Ei.M&&(Ei.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),GS(Ei),Ei.M=!0,Ui(11))}}else Zh(this.i,this.l,Re,"[Invalid Chunked Response]"),hl(this),Am(this)}else Zh(this.i,this.l,Re,null),BS(this,Re);4==Ii&&hl(this),this.o&&!this.J&&(4==Ii?CH(this.j,this):(this.o=!1,SI(this)))}else(function wce(h){const _={};h=(h.g&&2<=Pa(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(V(h[D]))continue;var E=q(h[D]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const se=_[K]||[];_[K]=se,se.push(E)}!function j(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(D){return D.join(", ")})})(this.g),400==E&&0<Re.indexOf("Unknown SID")?(this.s=3,Ui(12)):(this.s=0,Ui(13)),hl(this),Am(this)}}}catch{}},$c.prototype.cancel=function(){this.J=!0,hl(this)},$c.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function rce(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(bm(),Ui(17)),hl(this),this.s=2,Am(this)):J$(this,this.S-h)},eH.prototype.cancel=function(){if(this.i=iH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var oH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof fl){this.h=h.h,RI(this,h.j),this.o=h.o,this.g=h.g,MI(this,h.s),this.l=h.l;var _=h.i,E=new Rm;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),aH(this,E),this.m=h.m}else h&&(_=String(h).match(oH))?(this.h=!1,RI(this,_[1]||"",!0),this.o=Dm(_[2]||""),this.g=Dm(_[3]||"",!0),MI(this,_[4]),this.l=Dm(_[5]||"",!0),aH(this,_[6]||"",!0),this.m=Dm(_[7]||"")):(this.h=!1,this.i=new Rm(null,this.h))}function Ma(h){return new fl(h)}function RI(h,_,E){h.j=E?Dm(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function MI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function aH(h,_,E){_ instanceof Rm?(h.i=_,function gce(h,_){_&&!h.j&&(Hc(h),h.i=null,h.g.forEach(function(E,D){var K=D.toLowerCase();D!=K&&(uH(this,D),dH(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Sm(_,fce)),h.i=new Rm(_,h.h))}function Fn(h,_,E){h.i.set(_,E)}function PI(h){return Fn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dm(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Sm(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,lce),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function lce(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}fl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Sm(_,cH,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Sm(_,cH,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Sm(E,"/"==E.charAt(0)?hce:dce,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Sm(E,pce)),h.join("")};var h,cH=/[#\/\?@]/g,dce=/[#\?:]/g,hce=/[#\?]/g,fce=/[#\?@]/g,pce=/#/g;function Rm(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Hc(h){h.g||(h.g=new Map,h.h=0,h.i&&function uce(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var D=h[E].indexOf("="),K=null;if(0<=D){var se=h[E].substring(0,D);K=h[E].substring(D+1)}else se=h[E];_(se,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function uH(h,_){Hc(h),_=Qh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function lH(h,_){return Hc(h),_=Qh(h,_),h.g.has(_)}function dH(h,_,E){uH(h,_),0<E.length&&(h.i=null,h.g.set(Qh(h,_),R(E)),h.h+=E.length)}function Qh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function zc(h,_,E,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(E)}catch{}}function yce(){this.g=new ece}function vce(h,_,E){const D=E||"";try{sH(h,function(K,se){let Re=K;u(K)&&(Re=xS(K)),_.push(D+se+"="+encodeURIComponent(Re))})}catch(K){throw _.push(D+"type="+encodeURIComponent("_badmap")),K}}function Mm(h){this.l=h.Ub||null,this.j=h.eb||!1}function xI(h,_){vi.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function hH(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Pm(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xm(h)}function xm(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function fH(h){let _="";return Oe(h,function(E,D){_+=D,_+=":",_+=E,_+="\r\n"}),_}function HS(h,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=fH(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Fn(h,_,E))}function sr(h){vi.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Rm.prototype).add=function(h,_){Hc(this),this.i=null,h=Qh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Hc(this),this.g.forEach(function(E,D){E.forEach(function(K){h.call(_,K,D,this)},this)},this)},n.na=function(){Hc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let D=0;D<_.length;D++){const K=h[D];for(let se=0;se<K.length;se++)E.push(_[D])}return E},n.V=function(h){Hc(this);let _=[];if("string"==typeof h)lH(this,h)&&(_=_.concat(this.g.get(Qh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Hc(this),this.i=null,lH(this,h=Qh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var D=_[E];const se=encodeURIComponent(String(D)),Re=this.V(D);for(D=0;D<Re.length;D++){var K=se;""!==Re[D]&&(K+="="+encodeURIComponent(String(Re[D]))),h.push(K)}}return this.i=h.join("&")},b(Mm,NS),Mm.prototype.g=function(){return new xI(this.l,this.j)},Mm.prototype.i=(h={},function(){return h}),b(xI,vi),(n=xI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,xm(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pm(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xm(this)),this.g&&(this.readyState=3,xm(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hH(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Pm(this):xm(this),3==this.readyState&&hH(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Pm(this))},n.Qa=function(h){this.g&&(this.response=h,Pm(this))},n.ga=function(){this.g&&Pm(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(xI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(sr,vi);var Ece=/^https?$/i,Ice=["POST","PUT"];function pH(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,gH(h),NI(h)}function gH(h){h.A||(h.A=!0,Vi(h,"complete"),Vi(h,"error"))}function mH(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Pa(h)||2!=h.Z()))if(h.u&&4==Pa(h))V$(h.Ea,0,h);else if(Vi(h,"readystatechange"),4==Pa(h)){h.h=!1;try{const Re=h.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=0===Re){var K=String(h.D).match(oH)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!Ece.test(K?K.toLowerCase():"")}E=D}if(E)Vi(h,"complete"),Vi(h,"success");else{h.m=6;try{var se=2<Pa(h)?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.Z()+"]",gH(h)}}finally{NI(h)}}}function NI(h,_){if(h.g){_H(h);const E=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Vi(h,"ready");try{E.onreadystatechange=D}catch{}}}function _H(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Pa(h){return h.g?h.g.readyState:0}function yH(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nm(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function vH(h){this.Aa=0,this.i=[],this.j=new Cm,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nm("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nm("baseRetryDelayMs",5e3,h),this.cb=Nm("retryDelaySeedMs",1e4,h),this.Wa=Nm("forwardChannelMaxRetries",2,h),this.wa=Nm("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new eH(h&&h.concurrentRequestLimit),this.Da=new yce,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zS(h){if(EH(h),3==h.G){var _=h.U++,E=Ma(h.I);if(Fn(E,"SID",h.K),Fn(E,"RID",_),Fn(E,"TYPE","terminate"),Om(h,E),(_=new $c(h,h.j,_)).L=2,_.v=PI(Ma(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=RH(_.j,null),_.g.ea(_.v)),_.F=Date.now(),SI(_)}DH(h)}function OI(h){h.g&&(GS(h),h.g.cancel(),h.g=null)}function EH(h){OI(h),h.u&&(a.clearTimeout(h.u),h.u=null),FI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function kI(h){if(!tH(h.h)&&!h.s){h.s=!0;var _=h.Ga;Qe||pr(),Xe||(Qe(),Xe=!0),xt.add(_,h),h.B=0}}function IH(h,_){var E;E=_?_.l:h.U++;const D=Ma(h.I);Fn(D,"SID",h.K),Fn(D,"RID",E),Fn(D,"AID",h.T),Om(h,D),h.m&&h.o&&HS(D,h.m,h.o),E=new $c(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=wH(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$S(h.h,E),VS(E,D,_)}function Om(h,_){h.H&&Oe(h.H,function(E,D){Fn(_,D,E)}),h.l&&sH({},function(E,D){Fn(_,D,E)})}function wH(h,_,E){E=Math.min(h.i.length,E);var D=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let se=-1;for(;;){const Re=["count="+E];-1==se?0<E?(se=K[0].g,Re.push("ofs="+se)):se=0:Re.push("ofs="+se);let mn=!0;for(let ri=0;ri<E;ri++){let qt=K[ri].g;const Ei=K[ri].map;if(qt-=se,0>qt)se=Math.max(0,K[ri].g-100),mn=!1;else try{vce(Ei,Re,"req"+qt+"_")}catch{D&&D(Ei)}}if(mn){D=Re.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,D}function bH(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Qe||pr(),Xe||(Qe(),Xe=!0),xt.add(_,h),h.v=0}}function qS(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Tm(y(h.Fa,h),AH(h,h.v)),h.v++,0))}function GS(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function TH(h){h.g=new $c(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Ma(h.qa);Fn(_,"RID","rpc"),Fn(_,"SID",h.K),Fn(_,"AID",h.T),Fn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Fn(_,"TO",h.ja),Fn(_,"TYPE","xmlhttp"),Om(h,_),h.m&&h.o&&HS(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=PI(Ma(_)),E.m=null,E.P=!0,Y$(E,h)}function FI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function CH(h,_){var E=null;if(h.g==_){FI(h),GS(h),h.g=null;var D=2}else{if(!jS(h.h,_))return;E=_.D,rH(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;Vi(D=CI(),new W$(D,E)),kI(h)}else bH(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==D&&function bce(h,_){return!(nH(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Tm(y(h.Ga,h,_),AH(h,h.B)),h.B++,0)))}(h,_)||2==D&&qS(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:pl(h,5);break;case 4:pl(h,10);break;case 3:pl(h,6);break;default:pl(h,2)}}function AH(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function pl(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),D=h.Xa;const K=!D;D=new fl(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||RI(D,"https"),PI(D),K?function mce(h,_){const E=new Cm;if(a.Image){const D=new Image;D.onload=I(zc,E,"TestLoadImage: loaded",!0,_,D),D.onerror=I(zc,E,"TestLoadImage: error",!1,_,D),D.onabort=I(zc,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=I(zc,E,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),E):function _ce(h,_){new Cm;const D=new AbortController,K=setTimeout(()=>{D.abort(),zc(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(se=>{clearTimeout(K),zc(0,0,!!se.ok,_)}).catch(()=>{clearTimeout(K),zc(0,0,!1,_)})}(D.toString(),E)}else Ui(2);h.G=0,h.l&&h.l.sa(_),DH(h),EH(h)}function DH(h){if(h.G=0,h.ka=[],h.l){const _=iH(h.h);(0!=_.length||0!=h.i.length)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function SH(h,_,E){var D=E instanceof fl?Ma(E):new fl(E);if(""!=D.g)_&&(D.g=_+"."+D.g),MI(D,D.s);else{var K=a.location;D=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var se=new fl(null);D&&RI(se,D),_&&(se.g=_),K&&MI(se,K),E&&(se.l=E),D=se}return _=h.ya,(E=h.D)&&_&&Fn(D,E,_),Fn(D,"VER",h.la),Om(h,D),D}function RH(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new sr(h.Ca&&!h.pa?new Mm({eb:E}):h.pa)).Ha(h.J),_}function MH(){}function LI(){}function ys(h,_){vi.call(this),this.g=new vH(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Yh(this)}function PH(h){OS.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function xH(){kS.call(this),this.status=1}function Yh(h){this.g=h}(n=sr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():FS.g(),this.v=function $$(h){return h.h||(h.h=h.i())}(this.o?this.o:FS),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(se){return void pH(this,se)}if(h=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)E.set(K,D[K]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const se of D.keys())E.set(se,D.get(se))}D=Array.from(E.keys()).find(se=>"content-type"==se.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ice,_,void 0))||D||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Re]of E)this.g.setRequestHeader(se,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_H(this),this.u=!0,this.g.send(h),this.u=!1}catch(se){pH(this,se)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Vi(this,"complete"),Vi(this,"abort"),NI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),NI(this,!0)),sr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mH(this):this.bb())},n.bb=function(){mH(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Jae(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=vH.prototype).la=8,n.G=1,n.connect=function(h,_,E,D){Ui(0),this.W=h,this.H=_||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=SH(this,null,this.W),kI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new $c(this,this.j,h);let se=this.o;if(this.S&&(se?(se=N(se),z(se,this.S)):se=this.S),null!==this.m||this.O||(K.H=se,se=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=wH(this,K,_),Fn(E=Ma(this.I),"RID",h),Fn(E,"CVER",22),this.D&&Fn(E,"X-HTTP-Session-Id",this.D),Om(this,E),se&&(this.O?_="headers="+encodeURIComponent(String(fH(se)))+"&"+_:this.m&&HS(E,this.m,se)),$S(this.h,K),this.Ua&&Fn(E,"TYPE","init"),this.P?(Fn(E,"$req",_),Fn(E,"SID","null"),K.T=!0,VS(K,E,null)):VS(K,E,_),this.G=2}}else 3==this.G&&(h?IH(this,h):0==this.i.length||tH(this.h)||IH(this))},n.Fa=function(){if(this.u=null,TH(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Tm(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ui(10),OI(this),TH(this))},n.Za=function(){null!=this.C&&(this.C=null,OI(this),qS(this),Ui(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ui(2)):(this.j.info("Failed to ping google.com"),Ui(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=MH.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},LI.prototype.g=function(h,_){return new ys(h,_)},b(ys,vi),ys.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ys.prototype.close=function(){zS(this.g)},ys.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=xS(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&kI(_)},ys.prototype.N=function(){this.g.l=null,delete this.j,zS(this.g),delete this.g,ys.aa.N.call(this)},b(PH,OS),b(xH,kS),b(Yh,MH),Yh.prototype.ua=function(){Vi(this.g,"a")},Yh.prototype.ta=function(h){Vi(this.g,new PH(h))},Yh.prototype.sa=function(h){Vi(this.g,new xH)},Yh.prototype.ra=function(){Vi(this.g,"b")},LI.prototype.createWebChannel=LI.prototype.g,ys.prototype.send=ys.prototype.o,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,aL=pa.createWebChannelTransport=function(){return new LI},oL=pa.getStatEventTarget=function(){return CI()},sL=pa.Event=dl,z0=pa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},AI.NO_ERROR=0,AI.TIMEOUT=8,AI.HTTP_ERROR=6,Hv=pa.ErrorCode=AI,K$.COMPLETE="complete",iL=pa.EventType=K$,H$.EventType=wm,wm.OPEN="a",wm.CLOSE="b",wm.ERROR="c",wm.MESSAGE="d",vi.prototype.listen=vi.prototype.K,pg=pa.WebChannel=H$,rL=pa.FetchXmlHttpFactory=Mm,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,nL=pa.XhrIo=sr}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});const cL="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let nh="10.12.1";const gc=new xo.Yd("@firebase/firestore");function rh(){return gc.logLevel}function be(n,...e){if(gc.logLevel<=xo.in.DEBUG){const t=e.map(q0);gc.debug(`Firestore (${nh}): ${n}`,...t)}}function hr(n,...e){if(gc.logLevel<=xo.in.ERROR){const t=e.map(q0);gc.error(`Firestore (${nh}): ${n}`,...t)}}function Ji(n,...e){if(gc.logLevel<=xo.in.WARN){const t=e.map(q0);gc.warn(`Firestore (${nh}): ${n}`,...t)}}function q0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n="Unexpected state"){const e=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function We(n,e){n||Ue()}function Se(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class JY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eX{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ue.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We("string"==typeof r.accessToken),new uL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return We(null===e||"string"==typeof e),new Br(e)}}class tX{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nX{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new tX(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We("string"==typeof t.token),this.R=t.token,new lL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iX(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=iX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ut(n,e){return n<e?-1:n>e?1:0}function ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hL(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Bn(0,0))}static max(){return new Ze(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gg{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ue(),void 0===r?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kt extends gg{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new kt(t)}static emptyPath(){return new kt([])}}const sX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends gg{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return sX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ie(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ie(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Ie(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ie(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(kt.fromString(e))}static fromName(e){return new Ne(kt.fromString(e).popFirst(5))}static empty(){return new Ne(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new kt(e.slice()))}}class sh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function G0(n){return n.fields.find(e=>2===e.kind)}function Ou(n){return n.fields.filter(e=>2!==e.kind)}sh.UNKNOWN_ID=-1;class ku{constructor(e,t){this.fieldPath=e,this.kind=t}}class oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oh(0,fs.min())}}function fL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new fs(i,Ne.empty(),e)}function pL(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(Ze.min(),Ne.empty(),-1)}static max(){return new fs(Ze.max(),Ne.empty(),-1)}}function W0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ne.comparator(n.documentKey,e.documentKey),0!==t?t:ut(n.largestBatchId,e.largestBatchId))}const gL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mc(n){return K0.apply(this,arguments)}function K0(){return(K0=(0,ue.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==gL)throw n;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class zv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new kr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Z0(r.target.error);this.V.reject(new mg(e,i))}}static open(e,t,r,i){try{return new zv(t,e.transaction(i,r))}catch(s){throw new mg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uX(t)}}class No{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===No.S((0,gt.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return be("SimpleDb","Removing database:",e),Fu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,gt.hl)())return!1;if(No.C())return!0;const e=(0,gt.z$)(),t=No.S(e),r=0<t&&t<10,i=_L(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ue.Z)(function*(){return t.db||(be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new mg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ie(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new mg(e,a))},s.onupgradeneeded=o=>{be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ue.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=zv.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),Y.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(be("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function _L(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class cX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Fu(this.B.delete())}}class mg extends Ie{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _c(n){return"IndexedDbTransactionError"===n.name}class uX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fu(r)}add(e){return be("SimpleDb","ADD",this.store.name,e,e),Fu(this.store.add(e))}get(e){return Fu(this.store.get(e)).next(t=>(void 0===t&&(t=null),be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return be("SimpleDb","DELETE",this.store.name,e),Fu(this.store.delete(e))}count(){return be("SimpleDb","COUNT",this.store.name),Fu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=s=>{const o=Z0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new cX(a),u=t(a.primaryKey,a.value,c);if(u instanceof Y){const f=u.catch(m=>(c.done(),Y.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fu(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Z0(r.target.error);t(i)}})}let yL=!1;function Z0(n){const e=No.S((0,gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yL||(yL=!0,setTimeout(()=>{throw r},0)),r}}return n}class lX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;be("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{be("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){_c(r)?be("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield mc(r)}yield t.X(6e4)}))}}class dX{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Y.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return be("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(be("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=pL(s);W0(o,r)>0&&(r=o)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ps=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _g(n){return null==n}function yg(n){return 0===n&&1/n==-1/0}function vL(n){return"number"==typeof n&&Number.isInteger(n)&&!yg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EL(e)),e=hX(n.get(t),e);return EL(e)}function hX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function EL(n){return n+"\x01\x01"}function Oo(n){const e=n.length;if(We(e>=2),2===e)return We("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ue(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ue()}s=o+2}return new kt(r)}const IL=["userId","batchId"];function qv(n,e){return[n,fi(e)]}function wL(n,e,t){return[n,fi(e),t]}const fX={},pX=["prefixPath","collectionGroup","readTime","documentId"],gX=["prefixPath","collectionGroup","documentId"],mX=["collectionGroup","readTime","prefixPath","documentId"],_X=["canonicalId","targetId"],yX=["targetId","path"],vX=["path","targetId"],EX=["collectionId","parent"],IX=["indexId","uid"],wX=["uid","sequenceNumber"],bX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TX=["indexId","uid","orderedDocumentKey"],CX=["userId","collectionPath","documentId"],AX=["userId","collectionPath","largestBatchId"],DX=["userId","collectionGroup","largestBatchId"],bL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SX=[...bL,"documentOverlays"],TL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CL=TL,AL=[...CL,"indexConfiguration","indexState","indexEntries"],RX=AL;class Q0 extends mL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function jr(n,e){const t=Se(n);return No.F(t._e,e)}function DL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bn{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gv(this.root,e,this.comparator,!0)}}class Gv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ei.RED,this.left=i??ei.EMPTY,this.right=s??ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ei(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ML(this.data.getIterator())}getIteratorFrom(e){return new ML(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class ML{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ah(n){return n.hasNext()?n.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new es([])}unionWith(e){let t=new ln(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class PL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PL("Invalid base64 string: "+s):s}}(e);return new Fr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const PX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(We(!!n),"string"==typeof n){let e=0;const t=PX.exec(n);if(We(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ma(n){return"string"==typeof n?Fr.fromBase64String(n):Fr.fromUint8Array(n)}function Wv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kv(n){const e=n.mapValue.fields.__previous_value__;return Wv(e)?Kv(e):e}function vg(n){const e=ga(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class xX{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}const Ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zv={nullValue:"NULL_VALUE"};function Ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wv(n)?4:kL(n)?9007199254740991:10:Ue()}function ko(n,e){if(n===e)return!0;const t=Ic(n);if(t!==Ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vg(n).isEqual(vg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ga(i.timestampValue),a=ga(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ma(n.bytesValue).isEqual(ma(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nr(i.geoPointValue.latitude)===nr(s.geoPointValue.latitude)&&nr(i.geoPointValue.longitude)===nr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nr(i.integerValue)===nr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nr(i.doubleValue),a=nr(s.doubleValue);return o===a?yg(o)===yg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ih(n.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(DL(o)!==DL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!ko(o[c],a[c])))return!1;return!0}(n,e);default:return Ue()}var s}function Eg(n,e){return void 0!==(n.values||[]).find(t=>ko(t,e))}function wc(n,e){if(n===e)return 0;const t=Ic(n),r=Ic(e);if(t!==r)return ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nr(s.integerValue||s.doubleValue),c=nr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return xL(n.timestampValue,e.timestampValue);case 4:return xL(vg(n),vg(e));case 5:return ut(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ma(s),c=ma(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=ut(a[u],c[u]);if(0!==f)return f}return ut(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ut(nr(s.latitude),nr(o.latitude));return 0!==a?a:ut(nr(s.longitude),nr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=wc(a[u],c[u]);if(f)return f}return ut(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ec.mapValue&&o===Ec.mapValue)return 0;if(s===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=ut(c[m],f[m]);if(0!==y)return y;const I=wc(a[c[m]],u[f[m]]);if(0!==I)return I}return ut(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Ue()}}function xL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ut(n,e);const t=ga(n),r=ga(e),i=ut(t.seconds,r.seconds);return 0!==i?i:ut(t.nanos,r.nanos)}function ch(n){return Y0(n)}function Y0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ga(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ma(n.bytesValue).toBase64():"referenceValue"in n?Ne.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Y0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Y0(t.fields[o])}`;return i+"}"}(n.mapValue):Ue()}function Lu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function X0(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function NL(n){return!!n&&"nullValue"in n}function OL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yv(n){return!!n&&"mapValue"in n}function wg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NX(n){return"nullValue"in n?Zv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lu(vc.empty(),Ne.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ue()}function OX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lu(vc.empty(),Ne.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ec:Ue()}function FL(n,e){const t=wc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function LL(n,e){const t=wc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wg(t)}setAll(e){let t=Pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=wg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Yv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ti(wg(this.value))}}function VL(n){const e=[];return yc(n.fields,(t,r)=>{const i=new Pn([t]);if(Yv(r)){const s=VL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new es(e)}class xn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,Ze.min(),Ze.min(),Ze.min(),ti.empty(),0)}static newFoundDocument(e,t,r,i){return new xn(e,1,t,Ze.min(),r,i,0)}static newNoDocument(e,t){return new xn(e,2,t,Ze.min(),Ze.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Ze.min(),Ze.min(),ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bc{constructor(e,t){this.position=e,this.inclusive=t}}function UL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ne.comparator(Ne.fromName(o.referenceValue),t.key):wc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function BL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ko(n.position[t],e.position[t]))return!1;return!0}class bg{constructor(e,t="asc"){this.field=e,this.dir=t}}function kX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jL{}class Ft extends jL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new FX(e,t,r):"array-contains"===t?new UX(e,r):"in"===t?new WL(e,r):"not-in"===t?new BX(e,r):"array-contains-any"===t?new jX(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new LX(e,r):new VX(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wc(t,this.value)):null!==t&&Ic(this.value)===Ic(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends jL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new sn(e,t)}matches(e){return uh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uh(n){return"and"===n.op}function J0(n){return"or"===n.op}function eC(n){return $L(n)&&uh(n)}function $L(n){for(const e of n.filters)if(e instanceof sn)return!1;return!0}function tC(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+ch(n.value);if(eC(n))return n.filters.map(e=>tC(e)).join(",");{const e=n.filters.map(t=>tC(t)).join(",");return`${n.op}(${e})`}}function HL(n,e){return n instanceof Ft?(r=n,(i=e)instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&ko(r.value,i.value)):n instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&HL(o,i.filters[a]),!0)}(n,e):void Ue();var r,i}function zL(n,e){const t=n.filters.concat(e);return sn.create(t,n.op)}function qL(n){return n instanceof Ft?`${(t=n).field.canonicalString()} ${t.op} ${ch(t.value)}`:n instanceof sn?function(t){return t.op.toString()+" {"+t.getFilters().map(qL).join(" ,")+"}"}(n):"Filter";var t}class FX extends Ft{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class LX extends Ft{constructor(e,t){super(e,"in",t),this.keys=GL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VX extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=GL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class UX extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Eg(t.arrayValue,this.value)}}class WL extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Eg(this.value.arrayValue,t)}}class BX extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Eg(this.value.arrayValue,t)}}class jX extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eg(this.value.arrayValue,r))}}class $X{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function nC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $X(n,e,t,r,i,s,o)}function Vu(n){const e=Se(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),_g(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ch(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ch(r)).join(",")),e.ue=t}return e.ue}function Tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BL(n.startAt,e.startAt)&&BL(n.endAt,e.endAt)}function Xv(n){return Ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jv(n,e){return n.filters.filter(t=>t instanceof Ft&&t.field.isEqual(e))}function KL(n,e,t){let r=Zv,i=!0;for(const s of Jv(n,e)){let o=Zv,a=!0;switch(s.op){case"<":case"<=":o=NX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Zv}FL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];FL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function ZL(n,e,t){let r=Ec,i=!0;for(const s of Jv(n,e)){let o=Ec,a=!0;switch(s.op){case">=":case">":o=OX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ec}LL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];LL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class _a{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function QL(n,e,t,r,i,s,o,a){return new _a(n,e,t,r,i,s,o,a)}function lh(n){return new _a(n)}function YL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function rC(n){return null!==n.collectionGroup}function dh(n){const e=Se(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(Pn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bg(s,r))}),t.has(Pn.keyField().canonicalString())||e.ce.push(new bg(Pn.keyField(),r))}return e.ce}function pi(n){const e=Se(n);return e.le||(e.le=function JL(n,e){if("F"===n.limitType)return nC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new bg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new bc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bc(n.startAt.position,n.startAt.inclusive):null;return nC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,dh(n))),e.le}function iC(n,e){const t=n.filters.concat([e]);return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function eE(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cg(n,e){return Tg(pi(n),pi(e))&&n.limitType===e.limitType}function eV(n){return`${Vu(pi(n))}|lt:${n.limitType}`}function hh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qL(i)).join(", ")}]`),_g(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ch(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ch(i)).join(",")),`Target(${r})`}(pi(n))}; limitType=${n.limitType})`}function Ag(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of dh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=UL(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,dh(r),i)||r.endAt&&!function(o,a,c){const u=UL(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,dh(r),i)));var r,i}function tV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nV(n){return(e,t)=>{let r=!1;for(const i of dh(n)){const s=HX(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function HX(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?wc(c,u):Ue()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RL(this.inner)}size(){return this.innerSize}}const zX=new bn(Ne.comparator);function ts(){return zX}const rV=new bn(Ne.comparator);function Dg(...n){let e=rV;for(const t of n)e=e.insert(t.key,t);return e}function iV(n){let e=rV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fo(){return Sg()}function sV(){return Sg()}function Sg(){return new ya(n=>n.toString(),(n,e)=>n.isEqual(e))}const qX=new bn(Ne.comparator),GX=new ln(Ne.comparator);function _t(...n){let e=GX;for(const t of n)e=e.add(t);return e}const WX=new ln(ut);function sC(){return WX}function oV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yg(e)?"-0":e}}function aV(n){return{integerValue:""+n}}function cV(n,e){return vL(e)?aV(e):oV(n,e)}class tE{constructor(){this._=void 0}}function KX(n,e,t){return n instanceof fh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wv(s)&&(s=Kv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Uu?lV(n,e):n instanceof Bu?dV(n,e):function(i,s){const o=uV(i,s),a=hV(o)+hV(i.Pe);return X0(o)&&X0(i.Pe)?aV(a):oV(i.serializer,a)}(n,e)}function ZX(n,e,t){return n instanceof Uu?lV(n,e):n instanceof Bu?dV(n,e):t}function uV(n,e){return n instanceof ph?X0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class fh extends tE{}class Uu extends tE{constructor(e){super(),this.elements=e}}function lV(n,e){const t=fV(e);for(const r of n.elements)t.some(i=>ko(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bu extends tE{constructor(e){super(),this.elements=e}}function dV(n,e){let t=fV(e);for(const r of n.elements)t=t.filter(i=>!ko(i,r));return{arrayValue:{values:t}}}class ph extends tE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function hV(n){return nr(n.integerValue||n.doubleValue)}function fV(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rg{constructor(e,t){this.field=e,this.transform=t}}class YX{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class rE{}function pV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mh(n.key,jn.none()):new gh(n.key,n.data,jn.none());{const t=n.data,r=ti.empty();let i=new ln(Pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new va(n.key,r,new es(i.toArray()),jn.none())}}function XX(n,e,t){n instanceof gh?function(i,s,o){const a=i.value.clone(),c=_V(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof va?function(i,s,o){if(!nE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_V(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(mV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mg(n,e,t,r){return n instanceof gh?function(s,o,a,c){if(!nE(s.precondition,o))return a;const u=s.value.clone(),f=yV(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof va?function(s,o,a,c){if(!nE(s.precondition,o))return a;const u=yV(s.fieldTransforms,c,o),f=o.data;return f.setAll(mV(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,nE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function JX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=uV(r.transform,i||null);null!=s&&(null===t&&(t=ti.empty()),t.set(r.field,s))}return t||null}function gV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&ih(r,i,(s,o)=>function QX(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Uu&&i instanceof Uu||r instanceof Bu&&i instanceof Bu?ih(r.elements,i.elements,ko):r instanceof ph&&i instanceof ph?ko(r.Pe,i.Pe):r instanceof fh&&i instanceof fh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class gh extends rE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class va extends rE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _V(n,e,t){const r=new Map;We(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ZX(o,a,t[i]))}return r}function yV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,KX(s,o,e))}return r}class mh extends rE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oC extends rE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&XX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=pV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_t())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(t,r)=>gV(t,r))&&ih(this.baseMutations,e.baseMutations,(t,r)=>gV(t,r))}}class cC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){We(e.mutations.length===r.length);let i=qX;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cC(e,t,r,i)}}class uC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eJ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ar,jt;function EV(n){switch(n){default:return Ue();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function IV(n){if(void 0===n)return hr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ar.OK:return re.OK;case Ar.CANCELLED:return re.CANCELLED;case Ar.UNKNOWN:return re.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return re.INTERNAL;case Ar.UNAVAILABLE:return re.UNAVAILABLE;case Ar.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ar.NOT_FOUND:return re.NOT_FOUND;case Ar.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ar.ABORTED:return re.ABORTED;case Ar.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ar.DATA_LOSS:return re.DATA_LOSS;default:return Ue()}}(jt=Ar||(Ar={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function wV(){return new TextEncoder}const tJ=new Nu([4294967295,4294967295],0);function bV(n){const e=wV().encode(n),t=new tL;return t.update(e),new Uint8Array(t.digest())}function TV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nu([t,r],0),new Nu([i,s],0)]}class lC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pg(`Invalid padding: ${t}`);if(r<0)throw new Pg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Pg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Pg(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Nu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Nu.fromNumber(r)));return 1===i.compare(tJ)&&(i=new Nu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=bV(e),[r,i]=TV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=bV(e),[r,i]=TV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ng.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xg(Ze.min(),i,new bn(ut),ts(),_t())}}class Ng{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ng(r,t,_t(),_t(),_t())}}class sE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class CV{constructor(e,t){this.targetId=e,this.me=t}}class AV{constructor(e,t,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class DV{constructor(){this.fe=0,this.ge=RV(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=_t(),t=_t(),r=_t();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ue()}}),new Ng(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=RV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=SV(),this.Qe=new bn(ut)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Xv(s))if(0===r){const o=new Ne(s.path);this.Ue(t,o,xn.newNoDocument(o,Ze.min()))}else We(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ma(r).toUint8Array()}catch(c){if(c instanceof PL)return Ji("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new lC(o,i,s)}catch(c){return Ji(c instanceof Pg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Xv(a.target)){const c=new Ne(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,xn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=_t();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new xg(e,t,this.Qe,this.ke,r);return this.ke=ts(),this.qe=SV(),this.Qe=new bn(ut),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new DV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(ut),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||be("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new DV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function SV(){return new bn(Ne.comparator)}function RV(){return new bn(Ne.comparator)}const rJ={asc:"ASCENDING",desc:"DESCENDING"},iJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sJ={and:"AND",or:"OR"};class oJ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dC(n,e){return n.useProto3Json||_g(e)?e:{value:e}}function _h(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aJ(n,e){return _h(n,e.toTimestamp())}function fr(n){return We(!!n),Ze.fromTimestamp(function(t){const r=ga(t);return new Bn(r.seconds,r.nanos)}(n))}function hC(n,e){return fC(n,e).canonicalString()}function fC(n,e){const t=(i=n,new kt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function PV(n){const e=kt.fromString(n);return We($V(e)),e}function Og(n,e){return hC(n.databaseId,e.path)}function Lo(n,e){const t=PV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(OV(t))}function xV(n,e){return hC(n.databaseId,e)}function NV(n){const e=PV(n);return 4===e.length?kt.emptyPath():OV(e)}function pC(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OV(n){return We(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kV(n,e,t){return{name:Og(n,e),fields:t.value.mapValue.fields}}function FV(n,e,t){const r=Lo(n,e.name),i=fr(e.updateTime),s=e.createTime?fr(e.createTime):Ze.min(),o=new ti({mapValue:{fields:e.fields}}),a=xn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function kg(n,e){let t;if(e instanceof gh)t={update:kV(n,e.key,e.value)};else if(e instanceof mh)t={delete:Og(n,e.key)};else if(e instanceof va)t={update:kV(n,e.key,e.data),updateMask:gJ(e.fieldMask)};else{if(!(e instanceof oC))return Ue();t={verify:Og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ph)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ue()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:aJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ue()),t;var s}function gC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?jn.updateTime(fr(s.updateTime)):void 0!==s.exists?jn.exists(s.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(We("REQUEST_TIME"===a.setToServerValue),c=new fh):"appendMissingElements"in a?c=new Uu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Bu(a.removeAllFromArray.values||[]):"increment"in a?c=new ph(o,a.increment):Ue();const u=Pn.fromServerFormat(a.fieldPath);return new Rg(u,c)}(n,i)):[];var s;if(e.update){const i=Lo(n,e.update.name),s=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new es((e.updateMask.fieldPaths||[]).map(f=>Pn.fromServerFormat(f)));return new va(i,s,o,t,r)}return new gh(i,s,t,r)}if(e.delete){const i=Lo(n,e.delete);return new mh(i,t)}if(e.verify){const i=Lo(n,e.verify);return new oC(i,t)}return Ue()}function LV(n,e){return{documents:[xV(n,e.path)]}}function oE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xV(n,i);const s=function(u){if(0!==u.length)return jV(sn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:Tc((y=f).field),direction:hJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=dC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function UV(n){let e=NV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){We(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=BV(m);return y instanceof sn&&eC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new bg(yh((b=y).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,_g(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new bc((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new bc(m.values||[],!m.before)}(t.endAt)),QL(e,i,o,s,a,"F",c,u)}function BV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yh(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yh(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yh(t.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yh(t.unaryFilter.field);return Ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(n):void 0!==n.fieldFilter?Ft.create(yh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return sn.create(t.compositeFilter.filters.map(r=>BV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue()}}(t.compositeFilter.op))}(n):Ue();var t}function hJ(n){return rJ[n]}function fJ(n){return iJ[n]}function pJ(n){return sJ[n]}function Tc(n){return{fieldPath:n.canonicalString()}}function yh(n){return Pn.fromServerFormat(n.fieldPath)}function jV(n){return n instanceof Ft?function(t){if("=="===t.op){if(OL(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NAN"}};if(NL(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(OL(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NAN"}};if(NL(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tc(t.field),op:fJ(t.op),value:t.value}}}(n):n instanceof sn?function(t){const r=t.getFilters().map(i=>jV(i));return 1===r.length?r[0]:{compositeFilter:{op:pJ(t.op),filters:r}}}(n):Ue()}function gJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $V(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ea{constructor(e,t,r,i,s=Ze.min(),o=Ze.min(),a=Fr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class HV{constructor(e){this.ct=e}}function zV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:aE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Og(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:_h(s,o.version.toTimestamp()),createTime:_h(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ju(e.version)};else{if(!e.isUnknownDocument())return Ue();r.unknownDocument={path:t.path.toArray(),version:ju(e.version)}}var s,o;return r}function aE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ju(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $u(n){const e=new Bn(n.seconds,n.nanoseconds);return Ze.fromTimestamp(e)}function Hu(n,e){const t=(e.baseMutations||[]).map(s=>gC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>gC(n.ct,s)),i=Bn.fromMillis(e.localWriteTimeMs);return new aC(e.batchId,i,t,r)}function Fg(n){const e=$u(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$u(n.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=void 0!==n.query.documents?(We(1===(s=n.query).documents.length),pi(lh(NV(s.documents[0])))):function(s){return pi(UV(s))}(n.query),new Ea(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fr.fromBase64String(n.resumeToken));var s}function qV(n,e){const t=ju(e.snapshotVersion),r=ju(e.lastLimboFreeSnapshotVersion);let i;i=Xv(e.target)?LV(n.ct,e.target):oE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mC(n){const e=UV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?eE(e,e.limit,"L"):e}function _C(n,e){return new uC(e.largestBatchId,gC(n.ct,e.overlayMutation))}function GV(n,e){const t=e.path.lastSegment();return[n,fi(e.path.popLast()),t]}function WV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ju(r.readTime),documentKey:fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class _J{getBundleMetadata(e,t){return KV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:$u(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return KV(e).put({bundleId:(i=t).id,createTime:ju(fr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return ZV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:mC(s.bundledQuery),readTime:$u(s.readTime)};var s})}saveNamedQuery(e,t){return ZV(e).put({name:(i=t).name,readTime:ju(fr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function KV(n){return jr(n,"bundles")}function ZV(n){return jr(n,"namedQueries")}class cE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new cE(e,t.uid||"")}getOverlay(e,t){return Lg(e).get(GV(this.userId,t)).next(r=>r?_C(this.serializer,r):null)}getOverlays(e,t){const r=Fo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new uC(t,o);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(fi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Lg(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Fo(),s=fi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Lg(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=_C(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Fo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lg(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=_C(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Lg(e).put(function(i,s,o){const[a,c,u]=GV(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:kg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Lg(n){return jr(n,"documentOverlays")}class zu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),yg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=ga(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ma(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?kL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ue()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Ne.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function yJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function QV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=yJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}zu.bt=new zu;class vJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=QV(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=QV(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class IJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Vg{constructor(){this.Gt=new vJ,this.zt=new EJ(this.Gt),this.jt=new IJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class qu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qu(this.indexId,this.documentKey,this.arrayValue,r)}}function Cc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=YV(n.arrayValue,e.arrayValue),0!==t?t:(t=YV(n.directionalValue,e.directionalValue),0!==t?t:Ne.comparator(n.documentKey,e.documentKey)))}function YV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XV{constructor(e){this.Yt=new ln((t,r)=>Pn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(We(e.collectionGroup===this.collectionId),this.en)return!1;const t=G0(e);if(void 0!==t&&!this.nn(t))return!1;const r=Ou(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new ln(Pn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new ku(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ku(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ku(r.field,"asc"===r.dir?0:1)));return new sh(sh.UNKNOWN_ID,this.collectionId,t,oh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function JV(n){var e,t;if(We(n instanceof Ft||n instanceof sn),n instanceof Ft){if(n instanceof WL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Ft.create(n.field,"==",s)))||[];return sn.create(i,"or")}return n}const r=n.filters.map(i=>JV(i));return sn.create(r,n.op)}function wJ(n){if(0===n.getFilters().length)return[];const e=EC(JV(n));return We(e2(e)),yC(e)||vC(e)?[e]:e.getFilters()}function yC(n){return n instanceof Ft}function vC(n){return n instanceof sn&&eC(n)}function e2(n){return yC(n)||vC(n)||function(t){if(t instanceof sn&&J0(t)){for(const r of t.getFilters())if(!yC(r)&&!vC(r))return!1;return!0}return!1}(n)}function EC(n){if(We(n instanceof Ft||n instanceof sn),n instanceof Ft)return n;if(1===n.filters.length)return EC(n.filters[0]);const e=n.filters.map(r=>EC(r));let t=sn.create(e,n.op);return t=uE(t),e2(t)?t:(We(t instanceof sn),We(uh(t)),We(t.filters.length>1),t.filters.reduce((r,i)=>IC(r,i)))}function IC(n,e){let t;return We(n instanceof Ft||n instanceof sn),We(e instanceof Ft||e instanceof sn),t=n instanceof Ft?e instanceof Ft?sn.create([n,e],"and"):t2(n,e):e instanceof Ft?t2(e,n):function(i,s){if(We(i.filters.length>0&&s.filters.length>0),uh(i)&&uh(s))return zL(i,s.getFilters());const o=J0(i)?i:s,a=J0(i)?s:i,c=o.filters.map(u=>IC(u,a));return sn.create(c,"or")}(n,e),uE(t)}function t2(n,e){if(uh(e))return zL(e,n.getFilters());{const t=e.filters.map(r=>IC(n,r));return sn.create(t,"or")}}function uE(n){if(We(n instanceof Ft||n instanceof sn),n instanceof Ft)return n;const e=n.getFilters();if(1===e.length)return uE(e[0]);if($L(n))return n;const t=e.map(i=>uE(i)),r=[];return t.forEach(i=>{i instanceof Ft?r.push(i):i instanceof sn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:sn.create(r,n.op)}class bJ{constructor(){this._n=new wC}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(fs.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class wC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(kt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(kt.comparator)).toArray()}}const lE=new Uint8Array(0);class TJ{constructor(e,t){this.databaseId=t,this.an=new wC,this.un=new ya(r=>Vu(r),(r,i)=>Tg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:fi(i)};return n2(e).put(s)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hL(t),""],!1,!0);return n2(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Oo(o.parent))}return r})}addFieldIndex(e,t){const r=Ug(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Eh(e);return s.next(a=>{o.put(WV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Ug(e),i=Eh(e),s=vh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ug(e),r=vh(e),i=Eh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new XV(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=vh(e);let i=!0;const s=new Map;return Y.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_t();const a=[];return Y.forEach(s,(c,u)=>{var W;be("IndexedDbIndexManager",`Using index ${W=c,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${Vu(t)}`);const f=function(W,ne){const Ce=G0(ne);if(void 0===Ce)return null;for(const Oe of Jv(W,Ce.fieldPath))switch(Oe.op){case"array-contains-any":return Oe.value.arrayValue.values||[];case"array-contains":return[Oe.value]}return null}(u,c),m=function(W,ne){const Ce=new Map;for(const Oe of Ou(ne))for(const j of Jv(W,Oe.fieldPath))switch(j.op){case"==":case"in":Ce.set(Oe.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return Ce.set(Oe.fieldPath.canonicalString(),j.value),Array.from(Ce.values())}return null}(u,c),y=function(W,ne){const Ce=[];let Oe=!0;for(const j of Ou(ne)){const N=0===j.kind?KL(W,j.fieldPath,W.startAt):ZL(W,j.fieldPath,W.startAt);Ce.push(N.value),Oe&&(Oe=N.inclusive)}return new bc(Ce,Oe)}(u,c),I=function(W,ne){const Ce=[];let Oe=!0;for(const j of Ou(ne)){const N=0===j.kind?ZL(W,j.fieldPath,W.endAt):KL(W,j.fieldPath,W.endAt);Ce.push(N.value),Oe&&(Oe=N.inclusive)}return new bc(Ce,Oe)}(u,c),b=this.hn(c,u,y),R=this.hn(c,u,I),x=this.Pn(c,u,m),H=this.In(c.indexId,f,b,y.inclusive,R,I.inclusive,x);return Y.forEach(H,V=>r.G(V,t.limit).next(W=>{W.forEach(ne=>{const Ce=Ne.fromSegments(ne.documentKey);o.has(Ce)||(o=o.add(Ce),a.push(Ce))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wJ(sn.create(e.filters,"and")).map(r=>nC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):lE,I=this.En(e,y,r[m%u],i),b=this.dn(e,y,s[m%u],o),R=a.map(x=>this.En(e,y,x,!0));f.push(...this.createRange(I,b,R))}return f}En(e,t,r,i){const s=new qu(e,Ne.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new qu(e,Ne.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new XV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new ln(Pn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Vg;for(const i of Ou(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);zu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Vg;return zu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Vg;return zu.bt.Pt(Lu(this.databaseId,t),r.Ht(function(s){const o=Ou(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Vg);let s=0;for(const o of Ou(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Ig(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);zu.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new Vg;c.seed(a.Wt()),zu.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Ft&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ug(e),i=Eh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Y.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new oh(m.sequenceNumber,new fs($u(m.readTime),new Ne(Oo(m.documentKey)),m.largestBatchId)):oh.empty(),I=f.fields.map(([b,R])=>new ku(Pn.fromServerFormat(b),R));return new sh(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ug(e),s=Eh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,c=>s.put(WV(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Y.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?Y.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return vh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return vh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=vh(e);let s=new ln(Cc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new qu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new ln(Cc);const i=this.An(t,e);if(null==i)return r;const s=G0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Ig(o))for(const a of o.arrayValue.values||[])r=r.add(new qu(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new qu(t.indexId,e.key,lE,i));return r}wn(e,t,r,i,s){be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),b=u.getIterator();let R=ah(I),x=ah(b);for(;R||x;){let H=!1,V=!1;if(R&&x){const W=f(R,x);W<0?V=!0:W>0&&(H=!0)}else null!=R?V=!0:H=!0;H?(m(x),x=ah(b)):V?(y(R),R=ah(I)):(R=ah(I),x=ah(b))}}(i,s,Cc,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Y.waitFor(o)}gn(e){let t=1;return Eh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Cc(o,a)).filter((o,a,c)=>!a||0!==Cc(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Cc(o,e),c=Cc(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lE,[]]))}return s}Dn(e,t){return Cc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(r2)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ue())).next(r2)}}function n2(n){return jr(n,"collectionParents")}function vh(n){return jr(n,"indexEntries")}function Ug(n){return jr(n,"indexConfiguration")}function Eh(n){return jr(n,"indexState")}function r2(n){We(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;W0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const i2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gi(e,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function s2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{We(1===a)}));const u=[];for(const f of t.mutations){const m=wL(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return Y.waitFor(s).next(()=>u)}function dE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue();e=n.noDocument}return JSON.stringify(e).length}gi.DEFAULT_COLLECTION_PERCENTILE=10,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gi.DEFAULT=new gi(41943040,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gi.DISABLED=new gi(-1,0,0);class hE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){We(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new hE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Ih(e),o=Ac(e);return o.add({}).next(a=>{We("number"==typeof a);const c=new aC(a,t,r,i),u=function(I,b,R){const x=R.baseMutations.map(V=>kg(I.ct,V)),H=R.mutations.map(V=>kg(I.ct,V));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:H}}(this.serializer,this.userId,c),f=[];let m=new ln((y,I)=>ut(y.canonicalString(),I.canonicalString()));for(const y of i){const I=wL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,fX))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),Y.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return Ac(e).get(t).next(r=>r?(We(r.userId===this.userId),Hu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ac(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(We(a.batchId>=r),s=Hu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ac(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).U("userMutationsIndex",t).next(r=>r.map(i=>Hu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ih(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=Oo(f);if(u===this.userId&&t.path.isEqual(y))return Ac(e).get(m).next(I=>{if(!I)throw Ue();We(I.userId===this.userId),s.push(Hu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(ut);const i=[];return t.forEach(s=>{const o=qv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ih(e).J({range:a},(u,f,m)=>{const[y,I,b]=u,R=Oo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(b):m.done()});i.push(c)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=qv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ln(ut);return Ih(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,b=Oo(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ac(e).get(s).next(o=>{if(null===o)throw Ue();We(o.userId===this.userId),r.push(Hu(this.serializer,o))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return s2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ih(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Oo(s[1]);i.push(c)}else a.done()}).next(()=>{We(0===i.length)})})}containsKey(e,t){return o2(e,this.userId,t)}xn(e){return a2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function o2(n,e,t){const r=qv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ih(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function Ac(n){return jr(n,"mutations")}function Ih(n){return jr(n,"documentMutations")}function a2(n){return jr(n,"mutationQueues")}class Gu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Gu(0)}static Ln(){return new Gu(-1)}}class CJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Gu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ze.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(We(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return wh(e).J((o,a)=>{const c=Fg(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Y.waitFor(s)).next(()=>i)}forEachTarget(e,t){return wh(e).J((r,i)=>{const s=Fg(i);t(s)})}Bn(e){return c2(e).get("targetGlobalKey").next(t=>(We(null!==t),t))}kn(e,t){return c2(e).put("targetGlobalKey",t)}qn(e,t){return wh(e).put(qV(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return wh(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=Fg(a);Tg(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Dc(e);return t.forEach(o=>{const a=fi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dc(e);return Y.forEach(t,s=>{const o=fi(s.path);return Y.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Dc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dc(e);let s=_t();return i.J({range:r,H:!0},(o,a,c)=>{const u=Oo(o[1]),f=new Ne(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=fi(t.path),i=IDBKeyRange.bound([r],[hL(r)],!1,!0);let s=0;return Dc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return wh(e).get(t).next(r=>r?Fg(r):null)}}function wh(n){return jr(n,"targets")}function c2(n){return jr(n,"targetGlobal")}function Dc(n){return jr(n,"targetDocuments")}function u2([n,e],[t,r]){const i=ut(n,t);return 0===i?ut(e,r):i}class AJ{constructor(e){this.Kn=e,this.buffer=new ln(u2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();u2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class l2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_c(r)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield mc(r)}yield t.zn(3e5)}))}}class DJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(ps.oe);const r=new AJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(i2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),rh()<=xo.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class SJ{constructor(e,t){this.db=e,this.garbageCollector=function d2(n,e){return new DJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return fE(e,r)}removeReference(e,t,r){return fE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fE(e,t)}er(e,t){return function(i,s){let o=!1;return a2(i).Y(a=>o2(i,a,s).next(c=>(c&&(o=!0),Y.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ze.min()),Dc(e).delete([0,fi(o.path)])))});i.push(c)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fE(e,t)}Xn(e,t){const r=Dc(e);let i,s=ps.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ps.oe&&t(new Ne(Oo(i)),s),s=u,i=c):s=ps.oe}).next(()=>{s!==ps.oe&&t(new Ne(Oo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fE(n,e){return Dc(n).put((i=n.currentSequenceNumber,{targetId:0,path:fi(e.path),sequenceNumber:i}));var i}class h2{constructor(){this.changes=new ya(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wu(e).put(r)}removeEntry(e,t,r){return Wu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],aE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return Wu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return Wu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bg(t))},(i,s)=>{r={document:this.nr(t,s),size:dE(s)}}).next(()=>r)}getEntries(e,t){let r=ts();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=ts(),i=new bn(Ne.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,dE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new ln(m2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Bg(i.first()),Bg(i.last())),o=i.getIterator();let a=o.getNext();return Wu(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Ne.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&m2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(Bg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),aE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wu(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=ts();for(const m of u){const y=this.nr(Ne.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Ag(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=ts();const o=g2(t,r),a=g2(t,fs.max());return Wu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Ne.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new MJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return p2(e).get("remoteDocumentGlobalKey").next(t=>(We(!!t),t))}tr(e,t){return p2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function mJ(n,e){let t;if(e.document)t=FV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ne.fromSegments(e.noDocument.path),i=$u(e.noDocument.readTime);t=xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue();{const r=Ne.fromSegments(e.unknownDocument.path),i=$u(e.unknownDocument.version);t=xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Bn(i[0],i[1]);return Ze.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ze.min()))return r}return xn.newInvalidDocument(e)}}function f2(n){return new RJ(n)}class MJ extends h2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ya(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ln((s,o)=>ut(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=zV(this.ar.serializer,o);i=i.add(s.path.popLast());const u=dE(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=zV(this.ar.serializer,o.convertToNoDocument(Ze.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function p2(n){return jr(n,"remoteDocumentGlobal")}function Wu(n){return jr(n,"remoteDocumentsV14")}function Bg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function g2(n,e){const t=e.documentKey.path.toArray();return[n,aE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function m2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ut(t[s],r[s]),i)return i;return i=ut(t.length,r.length),i||(i=ut(t[t.length-2],r[r.length-2]),i||ut(t[t.length-1],r[r.length-1]))}class PJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Mg(r.mutation,i,es.empty(),Bn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_t()){const i=Fo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Dg();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Fo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_t()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ts();const o=Sg(),a=Sg();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof va)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),Mg(f.mutation,u,f.mutation.getFieldMask(),Bn.now())):o.set(u.key,es.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new PJ(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Sg();let i=new bn((o,a)=>o-a),s=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||es.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||_t()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=sV();f.forEach(y=>{if(!s.has(y)){const I=pV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ne.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):rC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(Fo());let a=-1,c=s;return o.next(u=>Y.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,_t())).next(f=>({batchId:a,changes:iV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next(r=>{let i=Dg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Dg();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,c=>{const u=(m=t,y=c.child(s),new _a(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,xn.newInvalidDocument(f)))});let a=Dg();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&Mg(f.mutation,u,es.empty(),Bn.now()),Ag(t,u)&&(a=a.insert(c,u))}),a})}}class xJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:fr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:mC(i.bundledQuery),readTime:fr(i.readTime)}),Y.resolve();var i}}class NJ{constructor(){this.overlays=new bn(Ne.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=Fo(),s=t.length+1,o=new Ne(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new bn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=Fo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Fo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uC(t,r));let s=this.hr.get(t);void 0===s&&(s=_t(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class bC{constructor(){this.Pr=new ln($r.Ir),this.Tr=new ln($r.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new $r(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new $r(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Ne(new kt([])),r=new $r(t,e),i=new $r(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ne(new kt([])),r=new $r(t,e),i=new $r(t,e+1);let s=_t();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new $r(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class $r{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ne.comparator(e.key,t.key)||ut(e.pr,t.pr)}static Er(e,t){return ut(e.pr,t.pr)||Ne.comparator(e.key,t.key)}}class OJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new ln($r.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new aC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new $r(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $r(t,0),i=new $r(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(ut);return t.forEach(i=>{const s=new $r(i,0),o=new $r(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ne.isDocumentKey(s)||(s=s.child(""));const o=new $r(new Ne(s),0);let a=new ln(ut);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){We(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const s=new $r(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new $r(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kJ{constructor(e){this.vr=e,this.docs=new bn(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ts();const o=t.path,a=new Ne(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||W0(pL(f),r)<=0||(i.has(f.key)||Ag(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ue()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FJ(this)}getSize(e){return Y.resolve(this.size)}}class FJ extends h2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class LJ{constructor(e){this.persistence=e,this.Mr=new ya(t=>Vu(t),Tg),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bC,this.targetCount=0,this.Lr=Gu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Gu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class TC{constructor(e,t){this.Br={},this.overlays={},this.kr=new ps(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new LJ(this),this.indexManager=new bJ,this.remoteDocumentCache=new kJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new HV(t),this.$r=new xJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new OJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new VJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class VJ extends mL{constructor(e){super(),this.currentSequenceNumber=e}}class pE{constructor(e){this.persistence=e,this.zr=new bC,this.jr=null}static Hr(e){return new pE(e)}get Jr(){if(this.jr)return this.jr;throw Ue()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Ne.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class UJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new zv("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IL,{unique:!0}),c.createObjectStore("documentMutations"),y2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),y2(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IL,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return Y.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:CX});u.createIndex("collectionPathOverlayIndex",AX,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",DX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:pX});u.createIndex("documentKeyIndex",gX),u.createIndex("collectionGroupIndex",mX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:IX}).createIndex("sequenceNumberIndex",wX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:bX}).createIndex("documentKeyIndex",TX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=dE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Y.forEach(a,c=>{We(c.userId===s.userId);const u=Hu(this.serializer,c);return s2(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new kt(o),u=[0,fi(c)];s.push(t.get(u).next(f=>f?Y.resolve():t.put({targetId:0,path:fi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:EX});const r=t.store("collectionParents"),i=new wC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:fi(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new kt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=Oo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Fg(i),o=qV(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Ne(kt.fromString(m.document.name).popFirst(5)):m.noDocument?Ne.fromSegments(m.noDocument.path):m.unknownDocument?Ne.fromSegments(m.unknownDocument.path):Ue()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=f2(this.serializer),s=new TC(pE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:_t();Hu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),Y.forEach(a,(c,u)=>{const f=new Br(u),m=cE.lt(this.serializer,f),y=s.getIndexManager(f),I=hE.lt(f,this.serializer,y,s.referenceDelegate);return new _2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new Q0(t,ps.oe),c).next()})})}}function y2(n){n.createObjectStore("targetDocuments",{keyPath:yX}).createIndex("documentTargetsIndex",vX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_X,{unique:!0}),n.createObjectStore("targetGlobal")}const CC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AC{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!AC.D())throw new Ie(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SJ(this,i),this.Ti=t+"main",this.serializer=new HV(c),this.Ei=new No(this.Ti,this.ui,new UJ(this.serializer)),this.Qr=new CJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f2(this.serializer),this.$r=new _J,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(re.FAILED_PRECONDITION,CC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ps(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ue.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ue.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(_c(e))return be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jg(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return mE(e).delete(this.clientId)}Di(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=jr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return Y.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):jg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ie(re.FAILED_PRECONDITION,CC);return!1}}return!(!this.networkEnabled||!this.inForeground)||mE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Q0(t,ps.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return hE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?RX:15===c?AL:14===c?CL:13===c?TL:12===c?SX:11===c?bL:void Ue();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Q0(a,this.kr?this.kr.next():ps.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ie(re.FAILED_PRECONDITION,gL);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return jg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(re.FAILED_PRECONDITION,CC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jg(e).put("owner",t)}static D(){return No.D()}yi(e){const t=jg(e);return t.get("owner").next(r=>this.Si(r)?(be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,gt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jg(n){return jr(n,"owner")}function mE(n){return jr(n,"clientMetadata")}function DC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class SC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=_t(),i=_t();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new SC(e,t.fromCache,r,i)}}class BJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class v2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,gt.G6)()?8:_L((0,gt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new BJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(rh()<=xo.in.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",hh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(rh()<=xo.in.DEBUG&&be("QueryEngine","Query:",hh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rh()<=xo.in.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",hh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):Y.resolve())}ji(e,t){if(YL(t))return Y.resolve(null);let r=pi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=eE(t,null,"F"),r=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_t(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,eE(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return YL(t)||i.isEqual(Ze.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Y.resolve(null):(rh()<=xo.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hh(t)),this.es(e,o,t,fL(i,-1)).next(a=>a))})}Zi(e,t){let r=new ln(nV(e));return t.forEach((i,s)=>{Ag(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return rh()<=xo.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",hh(t)),this.zi.getDocumentsMatchingQuery(e,t,fs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class jJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new bn(ut),this.rs=new ya(s=>Vu(s),Tg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function E2(n,e,t,r){return new jJ(n,e,t,r)}function I2(n,e){return RC.apply(this,arguments)}function RC(){return(RC=(0,ue.Z)(function*(n,e){const t=Se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=_t();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function w2(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function b2(n,e,t){let r=_t(),i=_t();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ts();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ze.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):be("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function zJ(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bh(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ea(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Th(n,e,t){return MC.apply(this,arguments)}function MC(){return(MC=(0,ue.Z)(function*(n,e,t){const r=Se(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_c(o))throw o;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function _E(n,e,t){const r=Se(n);let i=Ze.min(),s=_t();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=Se(c),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Ze.min(),t?s:_t())).next(a=>(A2(r,tV(e),a),{documents:a,hs:s})))}function T2(n,e){const t=Se(n),r=Se(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function C2(n,e){const t=Se(n),r=t.ss.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,fL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(A2(t,e,i),i))}function A2(n,e,t){let r=n.ss.get(e)||Ze.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function PC(){return(PC=(0,ue.Z)(function*(n,e,t,r){const i=Se(n);let s=_t(),o=ts();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield bh(i,(f=r,pi(lh(kt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>b2(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function GJ(n,e){return xC.apply(this,arguments)}function xC(){return(xC=(0,ue.Z)(function*(n,e,t=_t()){const r=yield bh(n,pi(mC(e.bundledQuery))),i=Se(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=fr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Fr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function D2(n,e){return`firestore_clients_${n}_${e}`}function S2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function NC(n,e){return`firestore_targets_${n}_${e}`}class yE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ie(i.error.code,i.error.message))),o?new yE(e,t,i.state,s):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $g{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ie(r.error.code,r.error.message))),s?new $g(e,r.state,i):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=sC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=vL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new vE(e,s):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class OC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OC(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kC{constructor(){this.activeTargetIds=sC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FC{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new bn(ut),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=D2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new kC),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(D2(e.persistenceKey,i));if(s){const o=vE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(NC(this.persistenceKey,e));if(r){const i=$g.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return be("SharedClientState","READ",e,t),t}setItem(e,t){be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=ps.oe;if(null!=o)try{const c=JSON.parse(o);We("number"==typeof c),a=c}catch(c){hr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ps.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new yE(this.currentUser,e,t,r),s=S2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=S2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=NC(this.persistenceKey,e),s=new $g(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return vE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return yE.Es(new Br(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return $g.Es(i,t)}xs(e){return OC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=sC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class R2{constructor(){this.no=new kC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new kC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WJ{io(e){}shutdown(){}}class M2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let EE=null;function LC(){return null===EE?EE=268435456+Math.round(2147483648*Math.random()):EE++,"0x"+EE.toString(16)}const KJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const mi="WebChannelConnection";class QJ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=LC(),c=this.vo(t,r.toUriEncodedString());be("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(be("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Ji("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+nh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${KJ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=LC();return new Promise((o,a)=>{const c=new nL;c.setWithCredentials(!0),c.listenOnce(iL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Hv.NO_ERROR:const f=c.getResponseJson();be(mi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Hv.TIMEOUT:be(mi,`RPC '${e}' ${s} timed out`),a(new Ie(re.DEADLINE_EXCEEDED,"Request time out"));break;case Hv.HTTP_ERROR:const m=c.getStatus();if(be(mi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const b=function(x){const H=x.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(H)>=0?H:re.UNKNOWN}(I.status);a(new Ie(b,I.message))}else a(new Ie(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ie(re.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{be(mi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);be(mi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=LC(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aL(),a=oL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new rL({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");be(mi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const b=new ZJ({lo:x=>{I?be(mi,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(y||(be(mi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),be(mi,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},ho:()=>m.close()}),R=(x,H,V)=>{x.listen(H,W=>{try{V(W)}catch(ne){setTimeout(()=>{throw ne},0)}})};return R(m,pg.EventType.OPEN,()=>{I||(be(mi,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),R(m,pg.EventType.CLOSE,()=>{I||(I=!0,be(mi,`RPC '${e}' stream ${i} transport closed`),b.po())}),R(m,pg.EventType.ERROR,x=>{I||(I=!0,Ji(mi,`RPC '${e}' stream ${i} transport errored:`,x),b.po(new Ie(re.UNAVAILABLE,"The operation could not be completed")))}),R(m,pg.EventType.MESSAGE,x=>{var H;if(!I){const V=x.data[0];We(!!V);const ne=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(ne){be(mi,`RPC '${e}' stream ${i} received error:`,ne);const Ce=ne.status;let Oe=function(L){const z=Ar[L];if(void 0!==z)return IV(z)}(Ce),j=ne.message;void 0===Oe&&(Oe=re.INTERNAL,j="Unknown error status: "+Ce+" with message "+ne.message),I=!0,b.po(new Ie(Oe,j)),m.close()}else be(mi,`RPC '${e}' stream ${i} received:`,V),b.yo(V)}}),R(a,sL.STAT_EVENT,x=>{x.stat===z0.PROXY?be(mi,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===z0.NOPROXY&&be(mi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}}function P2(){return typeof window<"u"?window:null}function IE(){return typeof document<"u"?document:null}function Hg(n){return new oJ(n,!0)}class VC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class x2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new VC(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ue.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ue.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ue.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Ie(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ue.Z)(function*(){e.state=0,e.start()}))}c_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YJ extends x2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function uJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ue(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(We(void 0===f||"string"==typeof f),Fr.fromBase64String(f||"")):(We(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Fr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?re.UNKNOWN:IV(u.code);return new Ie(f,u.message||"")}(o);t=new AV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Lo(n,r.document.name),s=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):Ze.min(),a=new ti({mapValue:{fields:r.document.fields}}),c=xn.newFoundDocument(i,s,o,a);t=new sE(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Lo(n,r.document),s=r.readTime?fr(r.readTime):Ze.min(),o=xn.newNoDocument(i,s);t=new sE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Lo(n,r.document);t=new sE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ue();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new eJ(i,s);t=new CV(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ze.min():o.readTime?fr(o.readTime):Ze.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=pC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=Xv(c)?{documents:LV(s,c)}:{query:oE(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MV(s,o.resumeToken);const u=dC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ze.min())>0){a.readTime=_h(s,o.snapshotVersion.toTimestamp());const u=dC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function dJ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=pC(this.serializer),t.removeTarget=e,this.i_(t)}}class XJ extends x2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function lJ(n,e){return n&&n.length>0?(We(void 0!==e),n.map(t=>function(i,s){let o=fr(i.updateTime?i.updateTime:s);return o.isEqual(Ze.min())&&(o=fr(s)),new YX(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.A_(r,t)}return We(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=pC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kg(this.serializer,r))};this.i_(t)}}class JJ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ie(re.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,fC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(re.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,fC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(re.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class eee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(hr(t),this.y_=!1):be("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class tee{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ue.Z)(function*(){var c;Sc(o)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ue.Z)(function*(f){const m=Se(f);m.M_.add(4),yield Ch(m),m.N_.set("Unknown"),m.M_.delete(4),yield zg(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new eee(r,i)}}function zg(n){return UC.apply(this,arguments)}function UC(){return(UC=(0,ue.Z)(function*(n){if(Sc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Ch(n){return BC.apply(this,arguments)}function BC(){return(BC=(0,ue.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function wE(n,e){const t=Se(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),HC(t)?$C(t):Sh(t).Xo()&&jC(t,e))}function Ah(n,e){const t=Se(n),r=Sh(t);t.F_.delete(e),r.Xo()&&N2(t,e),0===t.F_.size&&(r.Xo()?r.n_():Sc(t)&&t.N_.set("Unknown"))}function jC(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sh(n).P_(e)}function N2(n,e){n.L_.xe(e),Sh(n).I_(e)}function $C(n){n.L_=new nJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sh(n).start(),n.N_.w_()}function HC(n){return Sc(n)&&!Sh(n).Zo()&&n.F_.size>0}function Sc(n){return 0===Se(n).M_.size}function O2(n){n.L_=void 0}function nee(n){return zC.apply(this,arguments)}function zC(){return(zC=(0,ue.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function ree(n){return qC.apply(this,arguments)}function qC(){return(qC=(0,ue.Z)(function*(n){n.F_.forEach((e,t)=>{jC(n,e)})})).apply(this,arguments)}function iee(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,ue.Z)(function*(n,e){O2(n),HC(n)?(n.N_.D_(e),$C(n)):n.N_.set("Unknown")})).apply(this,arguments)}function see(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=(0,ue.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof AV&&2===e.state&&e.cause)try{yield(r=(0,ue.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bE(n,r)}else if(e instanceof sE?n.L_.Ke(e):e instanceof CV?n.L_.He(e):n.L_.We(e),!t.isEqual(Ze.min()))try{const r=yield w2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(Fr.EMPTY_BYTE_STRING,f.snapshotVersion)),N2(s,c);const m=new Ea(f.target,c,u,f.sequenceNumber);jC(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){be("RemoteStore","Failed to raise snapshot:",r),yield bE(n,r)}var r}),WC.apply(this,arguments)}function bE(n,e,t){return KC.apply(this,arguments)}function KC(){return(KC=(0,ue.Z)(function*(n,e,t){if(!_c(e))throw e;n.M_.add(1),yield Ch(n),n.N_.set("Offline"),t||(t=()=>w2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield zg(n)}))})).apply(this,arguments)}function k2(n,e){return e().catch(t=>bE(n,t,e))}function Dh(n){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,ue.Z)(function*(n){const e=Se(n),t=Rc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;oee(e);)try{const i=yield zJ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,aee(e,i)}catch(i){yield bE(e,i)}F2(e)&&L2(e)})).apply(this,arguments)}function oee(n){return Sc(n)&&n.v_.length<10}function aee(n,e){n.v_.push(e);const t=Rc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function F2(n){return Sc(n)&&!Rc(n).Zo()&&n.v_.length>0}function L2(n){Rc(n).start()}function cee(n){return QC.apply(this,arguments)}function QC(){return(QC=(0,ue.Z)(function*(n){Rc(n).V_()})).apply(this,arguments)}function uee(n){return YC.apply(this,arguments)}function YC(){return(YC=(0,ue.Z)(function*(n){const e=Rc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function lee(n,e,t){return XC.apply(this,arguments)}function XC(){return(XC=(0,ue.Z)(function*(n,e,t){const r=n.v_.shift(),i=cC.from(r,e,t);yield k2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dh(n)})).apply(this,arguments)}function dee(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,ue.Z)(function*(n,e){var t;e&&Rc(n).E_&&(yield(t=(0,ue.Z)(function*(i,s){if(EV(a=s.code)&&a!==re.ABORTED){const o=i.v_.shift();Rc(i).t_(),yield k2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Dh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),F2(n)&&L2(n)}),JC.apply(this,arguments)}function V2(n,e){return eA.apply(this,arguments)}function eA(){return(eA=(0,ue.Z)(function*(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const r=Sc(t);t.M_.add(3),yield Ch(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield zg(t)})).apply(this,arguments)}function tA(n,e){return nA.apply(this,arguments)}function nA(){return(nA=(0,ue.Z)(function*(n,e){const t=Se(n);e?(t.M_.delete(2),yield zg(t)):e||(t.M_.add(2),yield Ch(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Sh(n){return n.B_||(n.B_=function(t,r,i){const s=Se(t);return s.f_(),new YJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:nee.bind(null,n),To:ree.bind(null,n),Ao:iee.bind(null,n),h_:see.bind(null,n)}),n.x_.push(function(){var e=(0,ue.Z)(function*(t){t?(n.B_.t_(),HC(n)?$C(n):n.N_.set("Unknown")):(yield n.B_.stop(),O2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Rc(n){return n.k_||(n.k_=function(t,r,i){const s=Se(t);return s.f_(),new XJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:cee.bind(null,n),Ao:dee.bind(null,n),R_:uee.bind(null,n),A_:lee.bind(null,n)}),n.x_.push(function(){var e=(0,ue.Z)(function*(t){t?(n.k_.t_(),yield Dh(n)):(yield n.k_.stop(),n.v_.length>0&&(be("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class rA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new rA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rh(n,e){if(hr("AsyncQueue",`${e}: ${n}`),_c(n))return new Ie(re.UNAVAILABLE,`${e}: ${n}`);throw n}class Mh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=Dg(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new Mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Mh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class U2{constructor(){this.q_=new bn(Ne.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ue():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ph{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ph(e,t,Mh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class hee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class fee{constructor(){this.queries=new ya(e=>eV(e),Cg),this.onlineState="Unknown",this.z_=new Set}}function iA(n,e){return sA.apply(this,arguments)}function sA(){return(sA=(0,ue.Z)(function*(n,e){const t=Se(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new hee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Rh(o,`Initialization of query '${hh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&cA(t)})).apply(this,arguments)}function oA(n,e){return aA.apply(this,arguments)}function aA(){return(aA=(0,ue.Z)(function*(n,e){const t=Se(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function pee(n,e){const t=Se(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&cA(t)}function gee(n,e,t){const r=Se(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function cA(n){n.z_.forEach(e=>{e.next()})}var uA,B2;(B2=uA||(uA={})).J_="default",B2.Cache="cache";class lA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ph(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==uA.Cache}}class mee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class j2{constructor(e){this.serializer=e}Ps(e){return Lo(this.serializer,e)}Is(e){return e.metadata.exists?FV(this.serializer,e.document,!1):xn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return fr(e)}}class _ee{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=kt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new j2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||_t()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function qJ(n,e,t,r){return PC.apply(this,arguments)}(e.localStore,new j2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield GJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function $2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class H2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class q2{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_t(),this.mutatedKeys=_t(),this.Ia=nV(e),this.Ta=new Mh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new U2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Ag(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let x=!1;y&&I?y.data.isEqual(I.data)?b!==R&&(r.track({type:3,doc:I}),x=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),x=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),x=!0):y&&!I&&(r.track({type:1,doc:y}),x=!0,(c||u)&&(a=!0)),x&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,b){const R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return R(I)-R(b)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new Ph(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new U2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=_t(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new z2(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new H2(r))}),t}pa(e){this.la=e.hs,this.Pa=_t();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ph.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class yee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vee{constructor(e){this.key=e,this.wa=!1}}class Eee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ya(a=>eV(a),Cg),this.Da=new Map,this.Ca=new Set,this.va=new bn(Ne.comparator),this.Fa=new Map,this.Ma=new bC,this.xa={},this.Oa=new Map,this.Na=Gu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Iee(n,e){return dA.apply(this,arguments)}function dA(){return(dA=(0,ue.Z)(function*(n,e,t=!0){const r=TE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield G2(r,e,t,!0),i})).apply(this,arguments)}function wee(n,e){return hA.apply(this,arguments)}function hA(){return(hA=(0,ue.Z)(function*(n,e){const t=TE(n);yield G2(t,e,!0,!1)})).apply(this,arguments)}function G2(n,e,t,r){return fA.apply(this,arguments)}function fA(){return(fA=(0,ue.Z)(function*(n,e,t,r){const i=yield bh(n.localStore,pi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield pA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&wE(n.remoteStore,i),a})).apply(this,arguments)}function pA(n,e,t,r,i){return gA.apply(this,arguments)}function gA(){return gA=(0,ue.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(b=(0,ue.Z)(function*(x,H,V,W){let ne=H.view.da(V);ne.Xi&&(ne=yield _E(x.localStore,H.query,!1).then(({documents:N})=>H.view.da(N,ne)));const Ce=W&&W.targetChanges.get(H.targetId),Oe=W&&null!=W.targetMismatches.get(H.targetId),j=H.view.applyChanges(ne,x.isPrimaryClient,Ce,Oe);return AA(x,H.targetId,j.fa),j.snapshot}),function R(x,H,V,W){return b.apply(this,arguments)})(n,m,y,I);var b};const s=yield _E(n.localStore,e,!0),o=new q2(e,s.hs),a=o.da(s.documents),c=Ng.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);AA(n,t,u.fa);const f=new yee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),gA.apply(this,arguments)}function bee(n,e,t){return mA.apply(this,arguments)}function mA(){return(mA=(0,ue.Z)(function*(n,e,t){const r=Se(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Cg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Th(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ah(r.remoteStore,i.targetId),xh(r,i.targetId)}).catch(mc))):(xh(r,i.targetId),yield Th(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Tee(n,e){return _A.apply(this,arguments)}function _A(){return(_A=(0,ue.Z)(function*(n,e){const t=Se(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ah(t.remoteStore,r.targetId))})).apply(this,arguments)}function yA(){return(yA=(0,ue.Z)(function*(n,e,t){const r=LA(n);try{const i=yield function(o,a){const c=Se(o),u=Bn.now(),f=a.reduce((I,b)=>I.add(b.key),_t());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=ts(),R=_t();return c.os.getEntries(I,f).next(x=>{b=x,b.forEach((H,V)=>{V.isValidDocument()||(R=R.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(x=>{m=x;const H=[];for(const V of a){const W=JX(V,m.get(V.key).overlayedDocument);null!=W&&H.push(new va(V.key,W,VL(W.value.mapValue),jn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,H,a)}).next(x=>{y=x;const H=x.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,x.batchId,H)})}).then(()=>({batchId:y.batchId,changes:iV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new bn(ut)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Ia(r,i.changes),yield Dh(r.remoteStore)}catch(i){const s=Rh(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function W2(n,e){return vA.apply(this,arguments)}function vA(){return(vA=(0,ue.Z)(function*(n,e){const t=Se(n);try{const r=yield function HJ(n,e){const t=Se(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,x,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Fr.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),x=I,H=f,(0===(R=y).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=ts(),u=_t();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(b2(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(Ze.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?We(o.wa):i.removedDocuments.size>0&&(We(o.wa),o.wa=!1))}),yield Ia(t,r,e)}catch(r){yield mc(r)}})).apply(this,arguments)}function K2(n,e,t){const r=Se(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Se(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&cA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Aee(n,e,t){return EA.apply(this,arguments)}function EA(){return(EA=(0,ue.Z)(function*(n,e,t){const r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new bn(Ne.comparator);o=o.insert(s,xn.newNoDocument(s,Ze.min()));const a=_t().add(s),c=new xg(Ze.min(),new Map,new bn(ut),o,a);yield W2(r,c),r.va=r.va.remove(s),r.Fa.delete(e),DA(r)}else yield Th(r.localStore,e,!1).then(()=>xh(r,e,t)).catch(mc)})).apply(this,arguments)}function Dee(n,e){return IA.apply(this,arguments)}function IA(){return(IA=(0,ue.Z)(function*(n,e){const t=Se(n),r=e.batch.batchId;try{const i=yield function $J(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=Y.resolve();return y.forEach(b=>{I=I.next(()=>f.getEntry(c,b)).next(R=>{const x=u.docVersions.get(b);We(null!==x),R.version.compareTo(x)<0&&(m.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_t();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);CA(t,r,null),TA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ia(t,i)}catch(i){yield mc(i)}})).apply(this,arguments)}function See(n,e,t){return wA.apply(this,arguments)}function wA(){return(wA=(0,ue.Z)(function*(n,e,t){const r=Se(n);try{const i=yield function(o,a){const c=Se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(We(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);CA(r,e,t),TA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ia(r,i)}catch(i){yield mc(i)}})).apply(this,arguments)}function bA(){return(bA=(0,ue.Z)(function*(n,e){const t=Se(n);Sc(t.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Se(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Rh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function TA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function CA(n,e,t){const r=Se(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||Z2(n,r)})}function Z2(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Ah(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),DA(n))}function AA(n,e,t){for(const r of t)r instanceof H2?(n.Ma.addReference(r.key,e),Mee(n,r)):r instanceof z2?(be("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||Z2(n,r.key)):Ue()}function Mee(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(be("SyncEngine","New document in limbo: "+t),n.Ca.add(r),DA(n))}function DA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Ne(kt.fromString(e)),r=n.Na.next();n.Fa.set(r,new vee(t)),n.va=n.va.insert(t,r),wE(n.remoteStore,new Ea(pi(lh(t.path)),r,"TargetPurposeLimboResolution",ps.oe))}}function Ia(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,ue.Z)(function*(n,e,t){const r=Se(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=SC.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ue.Z)(function*(u,f){const m=Se(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,I=>Y.forEach(I.qi,b=>m.persistence.referenceDelegate.addReference(y,I.targetId,b)).next(()=>Y.forEach(I.Qi,b=>m.persistence.referenceDelegate.removeReference(y,I.targetId,b)))))}catch(y){if(!_c(y))throw y;be("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const b=m.ns.get(I),x=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.ns=m.ns.insert(I,x)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),SA.apply(this,arguments)}function Pee(n,e){return RA.apply(this,arguments)}function RA(){return(RA=(0,ue.Z)(function*(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const r=yield I2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new Ie(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ia(t,r.us)}var s})).apply(this,arguments)}function xee(n,e){const t=Se(n),r=t.Fa.get(e);if(r&&r.wa)return _t().add(r.key);{let i=_t();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Nee(n,e){return MA.apply(this,arguments)}function MA(){return(MA=(0,ue.Z)(function*(n,e){const t=Se(n),r=yield _E(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&AA(t,e.targetId,i.fa),i})).apply(this,arguments)}function Oee(n,e){return PA.apply(this,arguments)}function PA(){return(PA=(0,ue.Z)(function*(n,e){const t=Se(n);return C2(t.localStore,e).then(r=>Ia(t,r))})).apply(this,arguments)}function kee(n,e,t,r){return xA.apply(this,arguments)}function xA(){return(xA=(0,ue.Z)(function*(n,e,t,r){const i=Se(n),s=yield function(a,c){const u=Se(a),f=Se(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield Dh(i.remoteStore):"acknowledged"===t||"rejected"===t?(CA(i,e,r||null),TA(i,e),c=e,Se(Se(i.localStore).mutationQueue).Mn(c)):Ue(),yield Ia(i,s)):be("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function NA(){return(NA=(0,ue.Z)(function*(n,e){const t=Se(n);if(TE(t),LA(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Q2(t,r.toArray());t.La=!0,yield tA(t.remoteStore,!0);for(const s of i)wE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(xh(t,o),Th(t.localStore,o,!0))),Ah(t.remoteStore,o)}),yield i,yield Q2(t,r),function(o){const a=Se(o);a.Fa.forEach((c,u)=>{Ah(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new bn(Ne.comparator)}(t),t.La=!1,yield tA(t.remoteStore,!1)}})).apply(this,arguments)}function Q2(n,e,t){return OA.apply(this,arguments)}function OA(){return(OA=(0,ue.Z)(function*(n,e,t){const r=Se(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield bh(r.localStore,pi(c[0]));for(const u of c){const f=r.ba.get(u),m=yield Nee(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield T2(r.localStore,o);a=yield bh(r.localStore,u),yield pA(r,Y2(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function Y2(n){return QL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Lee(n){return t=Se(n).localStore,Se(Se(t).persistence).Bi();var t}function Vee(n,e,t,r){return kA.apply(this,arguments)}function kA(){return(kA=(0,ue.Z)(function*(n,e,t,r){const i=Se(n);if(i.La)return void be("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield C2(i.localStore,tV(s[0])),a=xg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fr.EMPTY_BYTE_STRING);yield Ia(i,o,a);break}case"rejected":yield Th(i.localStore,e,!0),xh(i,e,r);break;default:Ue()}})).apply(this,arguments)}function Uee(n,e,t){return FA.apply(this,arguments)}function FA(){return(FA=(0,ue.Z)(function*(n,e,t){const r=TE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){be("SyncEngine","Adding an already active target "+i);continue}const s=yield T2(r.localStore,i),o=yield bh(r.localStore,s);yield pA(r,Y2(s),o.targetId,!1,o.resumeToken),wE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Th(r.localStore,i,!1).then(()=>{Ah(r.remoteStore,i),xh(r,i)}).catch(mc))}})).apply(this,arguments)}function TE(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=W2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Aee.bind(null,e),e.Sa.h_=pee.bind(null,e.eventManager),e.Sa.ka=gee.bind(null,e.eventManager),e}function LA(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=See.bind(null,e),e}class qg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=Hg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return E2(this.persistence,new v2,e.initialUser,this.serializer)}createPersistence(e){return new TC(pE.Hr,this.serializer)}createSharedClientState(e){return new R2}terminate(){var e=this;return(0,ue.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VA extends qg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield LA(r.Qa.syncEngine),yield Dh(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return E2(this.persistence,new v2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new l2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new dX(t,this.persistence);return new lX(e.asyncQueue,r)}createPersistence(e){const t=DC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gi.withCacheSize(this.cacheSizeBytes):gi.DEFAULT;return new AC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,P2(),IE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new R2}}class X2 extends VA{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof FC&&(r.sharedClientState.syncEngine={Zs:kee.bind(null,i),Xs:Vee.bind(null,i),eo:Uee.bind(null,i),Bi:Lee.bind(null,i),Ys:Oee.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ue.Z)(function*(o){yield function Fee(n,e){return NA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=P2();if(!FC.D(t))throw new Ie(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new FC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Nh{initialize(e,t){var r=this;return(0,ue.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>K2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Pee.bind(null,r.syncEngine),yield tA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fee}createDatastore(e){const t=Hg(e.databaseInfo.databaseId),r=new QJ(e.databaseInfo);return new JJ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>K2(this.syncEngine,t,0),a=M2.D()?new M2:new WJ,new tee(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new Eee(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ue.Z)(function*(){var t,r;yield(r=(0,ue.Z)(function*(s){const o=Se(s);be("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Ch(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function J2(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class CE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $ee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new kr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ue.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new mee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ue.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Hee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ie(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ue.Z)(function*(o,a){const c=Se(o),u={documents:a.map(I=>Og(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,kt.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const b=function cJ(n,e){return"found"in e?function(r,i){We(!!i.found);const s=Lo(r,i.found.name),o=fr(i.found.updateTime),a=i.found.createTime?fr(i.found.createTime):Ze.min(),c=new ti({mapValue:{fields:i.found.fields}});return xn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){We(!!i.missing),We(!!i.readTime);const s=Lo(r,i.missing),o=fr(i.readTime);return xn.newNoDocument(s,o)}(n,e):Ue()}(c.serializer,I);m.set(b.key.toString(),b)});const y=[];return a.forEach(I=>{const b=m.get(I.toString());We(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ne.fromPath(i);e.mutations.push(new oC(s,e.precondition(s)))}),yield(r=(0,ue.Z)(function*(s,o){const a=Se(s),c={writes:o.map(u=>kg(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,kt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ue();t=Ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ze.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ze.min()))throw new Ie(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zee{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new VC(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ue.Z)(function*(){const t=new Hee(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!_g(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!EV(t)}return!1}}class qee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Br.UNAUTHENTICATED,this.clientId=dL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ue.Z)(function*(a){be("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(be("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function AE(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ue.Z)(function*(s){r.isEqual(s)||(yield I2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),UA.apply(this,arguments)}function BA(n,e){return jA.apply(this,arguments)}function jA(){return(jA=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield $A(n);be("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>V2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>V2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function eU(n){return"FirebaseError"===n.name?n.code===re.FAILED_PRECONDITION||n.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function $A(n){return HA.apply(this,arguments)}function HA(){return(HA=(0,ue.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield AE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!eU(t))throw t;Ji("Error using user provided cache. Falling back to memory cache: "+t),yield AE(n,new qg)}}else be("FirestoreClient","Using default OfflineComponentProvider"),yield AE(n,new qg);return n._offlineComponents})).apply(this,arguments)}function DE(n){return zA.apply(this,arguments)}function zA(){return(zA=(0,ue.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),yield BA(n,n._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),yield BA(n,new Nh))),n._onlineComponents})).apply(this,arguments)}function tU(n){return $A(n).then(e=>e.persistence)}function Oh(n){return $A(n).then(e=>e.localStore)}function nU(n){return DE(n).then(e=>e.remoteStore)}function qA(n){return DE(n).then(e=>e.syncEngine)}function kh(n){return GA.apply(this,arguments)}function GA(){return(GA=(0,ue.Z)(function*(n){const e=yield DE(n),t=e.eventManager;return t.onListen=Iee.bind(null,e.syncEngine),t.onUnlisten=bee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Tee.bind(null,e.syncEngine),t})).apply(this,arguments)}function iU(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(s,o,a,c,u){const f=new CE({next:y=>{o.enqueueAndForget(()=>oA(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new Ie(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new Ie(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new lA(lh(a.path),f,{includeMetadataChanges:!0,ra:!0});return iA(s,m)}(yield kh(n),n.asyncQueue,e,t,r)})),r.promise}function sU(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(s,o,a,c,u){const f=new CE({next:y=>{o.enqueueAndForget(()=>oA(s,m)),y.fromCache&&"server"===c.source?u.reject(new Ie(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new lA(a,f,{includeMetadataChanges:!0,ra:!0});return iA(s,m)}(yield kh(n),n.asyncQueue,e,t,r)})),r.promise}function oU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const aU=new Map;function WA(n,e,t){if(!t)throw new Ie(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cU(n,e,t,r){if(!0===e&&!0===r)throw new Ie(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uU(n){if(!Ne.isDocumentKey(n))throw new Ie(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lU(n){if(Ne.isDocumentKey(n))throw new Ie(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ue()}function Tt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SE(n);throw new Ie(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dU(n,e){if(e<=0)throw new Ie(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=oU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new XY;switch(r.type){case"firstParty":return new nX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aU.get(t);r&&(be("ComponentProvider","Removing Datastore"),aU.delete(t),r.terminate())}(this),Promise.resolve()}}function fU(n,e,t,r={}){var i;const s=(n=Tt(n,Gg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Br.MOCK_USER;else{a=(0,gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ie(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Br(u)}n._authCredentials=new JY(new uL(a,c))}}class ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class Vo extends ni{constructor(e,t,r){super(e,t,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Ne(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function pU(n,e,...t){if(n=(0,gt.m9)(n),WA("collection","path",e),n instanceof Gg){const r=kt.fromString(e,...t);return lU(r),new Vo(n,null,r)}{if(!(n instanceof Nn||n instanceof Vo))throw new Ie(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return lU(r),new Vo(n.firestore,null,r)}}function RE(n,e,...t){if(n=(0,gt.m9)(n),1===arguments.length&&(e=dL.newId()),WA("doc","path",e),n instanceof Gg){const r=kt.fromString(e,...t);return uU(r),new Nn(n,null,new Ne(r))}{if(!(n instanceof Nn||n instanceof Vo))throw new Ie(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return uU(r),new Nn(n.firestore,n instanceof Vo?n.converter:null,new Ne(r))}}function gU(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),(n instanceof Nn||n instanceof Vo)&&(e instanceof Nn||e instanceof Vo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KA(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&Cg(n._query,e._query)&&n.converter===e.converter}class ite{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new VC(this,"async_queue_retry"),this.hu=()=>{const t=IE();t&&be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=IE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=IE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new kr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ue.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!_c(t))throw t;be("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,hr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=rA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ue()}verifyOperationInProgress(){}du(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function ZA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class ste{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dn extends Gg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ite,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mU(this),this._firestoreClient.terminate()}}function ate(n,e){const t="object"==typeof n?n:(0,tr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,tr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,gt.P0)("firestore");s&&fU(i,...s)}return i}function $n(n){return n._firestoreClient||mU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,oU(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new qee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _U(n,e,t){const r=new kr;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield AE(n,t),yield BA(n,e),r.resolve()}catch(i){const s=i;if(!eU(s))throw s;Ji("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function yU(n){if(n._initialized||n._terminated)throw new Ie(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Fr.fromBase64String(e))}catch(t){throw new Ie(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ku{constructor(e){this._methodName=e}}class ME{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}}const _te=/^__.*__$/;class yte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new gh(e,this.data,t,this.fieldTransforms)}}class vU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class PE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new PE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return OE(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(EU(this.fu)&&_te.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class vte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hg(e)}Fu(e,t,r,i=!1){return new PE({fu:e,methodName:t,vu:r,path:Pn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zu(n){const e=n._freezeSettings(),t=Hg(n._databaseId);return new vte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xE(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);nD("Data must be an object, but it was:",o,r);const a=bU(r,o);let c,u;if(s.merge)c=new es(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Zg(e,m,t);if(!o.contains(y))throw new Ie(re.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);CU(f,y)||f.push(y)}c=new es(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new yte(new ti(a),c,u)}class Kg extends Ku{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kg}}function IU(n,e,t){return new PE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class QA extends Ku{_toFieldTransform(e){return new Rg(e.path,new fh)}isEqual(e){return e instanceof QA}}class YA extends Ku{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=IU(this,e,!0),r=this.Mu.map(s=>Qu(s,t)),i=new Uu(r);return new Rg(e.path,i)}isEqual(e){return e instanceof YA&&(0,gt.vZ)(this.Mu,e.Mu)}}class XA extends Ku{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=IU(this,e,!0),r=this.Mu.map(s=>Qu(s,t)),i=new Bu(r);return new Rg(e.path,i)}isEqual(e){return e instanceof XA&&(0,gt.vZ)(this.Mu,e.Mu)}}class JA extends Ku{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new ph(e.serializer,cV(e.serializer,this.xu));return new Rg(e.path,t)}isEqual(e){return e instanceof JA&&this.xu===e.xu}}function eD(n,e,t,r){const i=n.Fu(1,e,t);nD("Data must be an object, but it was:",i,r);const s=[],o=ti.empty();yc(r,(c,u)=>{const f=NE(e,c,t);u=(0,gt.m9)(u);const m=i.Su(f);if(u instanceof Kg)s.push(f);else{const y=Qu(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new es(s);return new vU(o,a,i.fieldTransforms)}function tD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Zg(e,r,t)],c=[i];if(s.length%2!=0)throw new Ie(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Zg(e,s[y])),c.push(s[y+1]);const u=[],f=ti.empty();for(let y=a.length-1;y>=0;--y)if(!CU(u,a[y])){const I=a[y];let b=c[y];b=(0,gt.m9)(b);const R=o.Su(I);if(b instanceof Kg)u.push(I);else{const x=Qu(b,R);null!=x&&(u.push(I),f.set(I,x))}}const m=new es(u);return new vU(f,m,o.fieldTransforms)}function wU(n,e,t,r=!1){return Qu(t,n.Fu(r?4:3,e))}function Qu(n,e){if(TU(n=(0,gt.m9)(n)))return nD("Unsupported field value:",e,n),bU(n,e);if(n instanceof Ku)return function(r,i){if(!EU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Qu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,gt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return cV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Bn.fromDate(r);return{timestampValue:_h(i.serializer,s)}}if(r instanceof Bn){const s=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(i.serializer,s)}}if(r instanceof ME)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Uo)return{bytesValue:MV(i.serializer,r._byteString)};if(r instanceof Nn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${SE(r)}`)}(n,e)}function bU(n,e){const t={};return RL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yc(n,(r,i)=>{const s=Qu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function TU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof ME||n instanceof Uo||n instanceof Nn||n instanceof Ku)}function nD(n,e,t){if(!TU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=SE(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Zg(n,e,t){if((e=(0,gt.m9)(e))instanceof wa)return e._internalPath;if("string"==typeof e)return NE(n,e);throw OE("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ete=new RegExp("[~\\*/\\[\\]]");function NE(n,e,t){if(e.search(Ete)>=0)throw OE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wa(...e.split("."))._internalPath}catch{throw OE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function OE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ie(re.INVALID_ARGUMENT,a+n+c)}function CU(n,e){return n.some(t=>t.isEqual(e))}class Qg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ite(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ite extends Qg{data(){return super.data()}}function kE(n,e){return"string"==typeof e?NE(n,e):e instanceof wa?e._internalPath:e._delegate._internalPath}function AU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rD{}class Yg extends rD{}function Mc(n,e,...t){let r=[];e instanceof rD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Fh).length,a=s.filter(c=>c instanceof Xg).length;if(o>1||o>0&&a>0)throw new Ie(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Xg extends Yg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xg(e,t,r)}_apply(e){const t=this._parse(e);return MU(e._query,t),new ni(e.firestore,e.converter,iC(e._query,t))}_parse(e){const t=Zu(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new Ie(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){RU(m,f);const I=[];for(const b of m)I.push(SU(c,s,b));y={arrayValue:{values:I}}}else y=SU(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||RU(m,f),y=wU(a,"where",m,"in"===f||"not-in"===f);return Ft.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Fh extends rD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)MU(o,c),o=iC(o,c)}(e._query,t),new ni(e.firestore,e.converter,iC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class iD extends Yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ie(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ie(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bg(s,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new _a(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class FE extends Yg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new FE(e,t,r)}_apply(e){return new ni(e.firestore,e.converter,eE(e._query,this._limit,this._limitType))}}class LE extends Yg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new LE(e,t,r)}_apply(e){const t=DU(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,(s=t,new _a((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class VE extends Yg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new VE(e,t,r)}_apply(e){const t=DU(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,(s=t,new _a((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function DU(n,e,t,r){if(t[0]=(0,gt.m9)(t[0]),t[0]instanceof Qg)return function(s,o,a,c,u){if(!c)throw new Ie(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of dh(s))if(m.field.isKeyField())f.push(Lu(o,c.key));else{const y=c.data.field(m.field);if(Wv(y))throw new Ie(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new Ie(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new bc(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zu(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new Ie(re.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let b=0;b<f.length;b++){const R=f[b];if(y[b].field.isKeyField()){if("string"!=typeof R)throw new Ie(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!rC(o)&&-1!==R.indexOf("/"))throw new Ie(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const x=o.path.child(kt.fromString(R));if(!Ne.isDocumentKey(x))throw new Ie(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const H=new Ne(x);I.push(Lu(a,H))}else{const x=wU(c,u,R);I.push(x)}}return new bc(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function SU(n,e,t){if("string"==typeof(t=(0,gt.m9)(t))){if(""===t)throw new Ie(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rC(e)&&-1!==t.indexOf("/"))throw new Ie(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Ne.isDocumentKey(r))throw new Ie(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lu(n,new Ne(r))}if(t instanceof Nn)return Lu(n,t._key);throw new Ie(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SE(t)}.`)}function RU(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sD{convertValue(e,t="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ME(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vg(e));default:return null}}convertTimestamp(e){const t=ga(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);We($V(r));const i=new vc(r.get(1),r.get(3)),s=new Ne(r.popFirst(5));return i.isEqual(t)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function UE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Mte extends sD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class Yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends Qg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Jg extends ba{data(e={}){return super.data(e)}}class Pc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Jg(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Jg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Jg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:xte(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}function xU(n,e){return n instanceof ba&&e instanceof ba?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pc&&e instanceof Pc&&n._firestore===e._firestore&&KA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xc extends sD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function NU(n,e,t){n=Tt(n,Nn);const r=Tt(n.firestore,dn),i=UE(n.converter,e,t);return Lh(r,[xE(Zu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jn.none())])}function OU(n,e,t,...r){n=Tt(n,Nn);const i=Tt(n.firestore,dn),s=Zu(i);let o;return o="string"==typeof(e=(0,gt.m9)(e))||e instanceof wa?tD(s,"updateDoc",n._key,e,t,r):eD(s,"updateDoc",n._key,e),Lh(i,[o.toMutation(n._key,jn.exists(!0))])}function kU(n,...e){var t,r,i;n=(0,gt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||ZA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ZA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof Nn)u=Tt(n.firestore,dn),f=lh(n._key.path),c={next:m=>{e[o]&&e[o](oD(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Tt(n,ni);u=Tt(m.firestore,dn),f=m._query;const y=new xc(u);c={next:I=>{e[o]&&e[o](new Pc(u,y,m,I))},error:e[o+1],complete:e[o+2]},AU(n._query)}return function(y,I,b,R){const x=new CE(R),H=new lA(I,x,b);return y.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return iA(yield kh(y),H)})),()=>{x.$a(),y.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return oA(yield kh(y),H)}))}}($n(u),f,a,c)}function Lh(n,e){return function(r,i){const s=new kr;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function Cee(n,e,t){return yA.apply(this,arguments)}(yield qA(r),i,s)})),s.promise}($n(n),e)}function oD(n,e,t){const r=t.docs.get(e._key),i=new xc(n);return new ba(n,i,e._key,r,new Yu(t.hasPendingWrites,t.fromCache),e.converter)}const Qte={maxAttempts:5};class FU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zu(e)}set(e,t,r){this._verifyNotCommitted();const i=Nc(e,this._firestore),s=UE(i.converter,t,r),o=xE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Nc(e,this._firestore);let o;return o="string"==typeof(t=(0,gt.m9)(t))||t instanceof wa?tD(this._dataReader,"WriteBatch.update",s._key,t,r,i):eD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nc(e,this._firestore);return this._mutations=this._mutations.concat(new mh(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nc(n,e){if((n=(0,gt.m9)(n)).firestore!==e)throw new Ie(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Yte extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Zu(t)}get(t){const r=Nc(t,this._firestore),i=new Mte(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ue();const o=s[0];if(o.isFoundDocument())return new Qg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Qg(this._firestore,i,r._key,null,r.converter);throw Ue()})}set(t,r,i){const s=Nc(t,this._firestore),o=UE(s.converter,r,i),a=xE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Nc(t,this._firestore);let a;return a="string"==typeof(r=(0,gt.m9)(r))||r instanceof wa?tD(this._dataReader,"Transaction.update",o._key,r,i,s):eD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Nc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nc(e,this._firestore),r=new xc(this._firestore);return super.get(e).then(i=>new ba(this._firestore,r,t._key,i._document,new Yu(!1,!1),t.converter))}}function cD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BU(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function jU(){if(!function MX(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){nh=tr.SDK_VERSION,(0,tr._registerComponent)(new jv.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new dn(new eX(r.getProvider("auth-internal")),new rX(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ie(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(cL,"4.6.3",e),(0,tr.registerVersion)(cL,"4.6.3","esm2017")}();class em{constructor(e){this._delegate=e}static fromBase64String(e){return jU(),new em(Uo.fromBase64String(e))}static fromUint8Array(e){return BU(),new em(Uo.fromUint8Array(e))}toBase64(){return jU(),this._delegate.toBase64()}toUint8Array(){return BU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uD(n){return function ane(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cne{enableIndexedDbPersistence(e,t){return function cte(n,e){yU(n=Tt(n,dn));const t=$n(n);if(t._uninitializedComponentsProvider)throw new Ie(re.FAILED_PRECONDITION,"SDK cache is already specified.");Ji("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Nh;return _U(t,i,new VA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ute(n){yU(n=Tt(n,dn));const e=$n(n);if(e._uninitializedComponentsProvider)throw new Ie(re.FAILED_PRECONDITION,"SDK cache is already specified.");Ji("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Nh;return _U(e,r,new X2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lte(n){if(n._initialized&&!n._terminated)throw new Ie(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(i){if(!No.D())return Promise.resolve();const s=i+"main";yield No.delete(s)}),function r(i){return t.apply(this,arguments)})(DC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $U{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ji("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){fU(this._delegate,e,t,r)}enableNetwork(){return function hte(n){return function Gee(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield tU(n),t=yield nU(n);return e.setNetworkEnabled(!0),function(i){const s=Se(i);return s.M_.delete(0),zg(s)}(t)}))}($n(n=Tt(n,dn)))}(this._delegate)}disableNetwork(){return function fte(n){return function Wee(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield tU(n),t=yield nU(n);return e.setNetworkEnabled(!1),(r=(0,ue.Z)(function*(s){const o=Se(s);o.M_.add(0),yield Ch(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}($n(n=Tt(n,dn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dte(n){return function(t){const r=new kr;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function Ree(n,e){return bA.apply(this,arguments)}(yield qA(t),r)})),r.promise}($n(n=Tt(n,dn)))}(this._delegate)}onSnapshotsInSync(e){return function jte(n,e){return function Yee(n,e){const t=new CE(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return i=yield kh(n),s=t,Se(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return i=yield kh(n),s=t,void Se(i).z_.delete(s);var i,s}))}}($n(n=Tt(n,dn)),ZA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vh(this,pU(this._delegate,e))}catch(t){throw Ni(t,"collection()","Firestore.collection()")}}doc(e){try{return new Os(this,RE(this._delegate,e))}catch(t){throw Ni(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oi(this,function rte(n,e){if(n=Tt(n,Gg),WA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,(r=e,new _a(kt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ni(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xte(n,e,t){n=Tt(n,dn);const r=Object.assign(Object.assign({},Qte),t);return function(s){if(s.maxAttempts<1)throw new Ie(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new kr;return s.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const u=yield function rU(n){return DE(n).then(e=>e.datastore)}(s);new zee(s.asyncQueue,u,a,o,c).Xa()})),c.promise}($n(n),i=>e(new Yte(n,i)),r)}(this._delegate,t=>e(new HU(this,t)))}batch(){return $n(this._delegate),new zU(new FU(this._delegate,e=>Lh(this._delegate,e)))}loadBundle(e){return function pte(n,e){const t=$n(n=Tt(n,dn)),r=new ste;return function Xee(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?wV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return J2(f,m);if(f instanceof ArrayBuffer)return J2(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new $ee(f,a);var f}(t,Hg(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function Bee(n,e,t){const r=Se(n);var i;(i=(0,ue.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(b,R){const x=Se(b),H=fr(R.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",V=>x.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(b=u).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);c._updateProgress($2(u));const f=new _ee(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield Ia(o,y.ca,void 0),yield function(b,R){const x=Se(b);return x.persistence.runTransaction("Save bundle","readwrite",H=>x.$r.saveBundleMetadata(H,R))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return Ji("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var b}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield qA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gte(n,e){return function Jee(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(r,i){const s=Se(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Oh(n),e)}))}($n(n=Tt(n,dn)),e).then(t=>t?new ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Oi(this,t):null)}}class jE extends sD{constructor(e){super(),this.firestore=e}convertBytes(e){return new em(new Uo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Os.forKey(t,this.firestore,null)}}class HU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jE(e)}get(e){const t=Ju(e);return this._delegate.get(t).then(r=>new tm(this._firestore,new ba(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ju(e);return r?(cD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ju(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ju(e);return this._delegate.delete(t),this}}class zU{constructor(e){this._delegate=e}set(e,t,r){const i=Ju(e);return r?(cD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ju(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ju(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Jg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Xu(e,new jE(e),t),i.set(t,s)),s}}Xu.INSTANCES=new WeakMap;class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Os(t,new Nn(t._delegate,r,new Ne(e)))}static forKey(e,t,r){return new Os(t,new Nn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vh(this.firestore,pU(this._delegate,e))}catch(t){throw Ni(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,gt.m9)(e))instanceof Nn&&gU(this._delegate,e)}set(e,t){t=cD("DocumentReference.set",t);try{return t?NU(this._delegate,e,t):NU(this._delegate,e)}catch(r){throw Ni(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?OU(this._delegate,e):OU(this._delegate,e,t,...r)}catch(i){throw Ni(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ute(n){return Lh(Tt(n.firestore,dn),[new mh(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=qU(e),r=GU(e,i=>new tm(this.firestore,new ba(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Ote(n){n=Tt(n,Nn);const e=Tt(n.firestore,dn),t=$n(e),r=new xc(e);return function Kee(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Se(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Ie(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=Rh(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Oh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ba(e,r,n._key,i,new Yu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function kte(n){n=Tt(n,Nn);const e=Tt(n.firestore,dn);return iU($n(e),n._key,{source:"server"}).then(t=>oD(e,n,t))}(this._delegate):function Nte(n){n=Tt(n,Nn);const e=Tt(n.firestore,dn);return iU($n(e),n._key).then(t=>oD(e,n,t))}(this._delegate),t.then(r=>new tm(this.firestore,new ba(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?Xu.getInstance(this.firestore,e):null))}}function Ni(n,e,t){return n.message=n.message.replace(e,t),n}function qU(n){for(const e of n)if("object"==typeof e&&!uD(e))return e;return{}}function GU(n,e){var t,r;let i;return i=uD(n[0])?n[0]:uD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class tm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Os(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xU(this._delegate,e._delegate)}}class nm extends tm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function YY(n,e){n||Ue()}(void 0!==t),t}}class Oi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jE(e)}where(e,t,r){try{return new Oi(this.firestore,Mc(this._delegate,function wte(n,e,t){const r=e,i=kE("where",n);return Xg._create(i,r,t)}(e,t,r)))}catch(i){throw Ni(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Oi(this.firestore,Mc(this._delegate,function bte(n,e="asc"){const t=e,r=kE("orderBy",n);return iD._create(r,t)}(e,t)))}catch(r){throw Ni(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Oi(this.firestore,Mc(this._delegate,function Tte(n){return dU("limit",n),FE._create("limit",n,"F")}(e)))}catch(t){throw Ni(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Oi(this.firestore,Mc(this._delegate,function Cte(n){return dU("limitToLast",n),FE._create("limitToLast",n,"L")}(e)))}catch(t){throw Ni(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Oi(this.firestore,Mc(this._delegate,function Ate(...n){return LE._create("startAt",n,!0)}(...e)))}catch(t){throw Ni(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Oi(this.firestore,Mc(this._delegate,function Dte(...n){return LE._create("startAfter",n,!1)}(...e)))}catch(t){throw Ni(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Oi(this.firestore,Mc(this._delegate,function Ste(...n){return VE._create("endBefore",n,!1)}(...e)))}catch(t){throw Ni(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Oi(this.firestore,Mc(this._delegate,function Rte(...n){return VE._create("endAt",n,!0)}(...e)))}catch(t){throw Ni(t,"endAt()","Query.endAt()")}}isEqual(e){return KA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Lte(n){n=Tt(n,ni);const e=Tt(n.firestore,dn),t=$n(e),r=new xc(e);return function Zee(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(s,o,a){try{const c=yield _E(s,o,!0),u=new q2(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=Rh(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Oh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Pc(e,r,n,i))}(this._delegate):"server"===e?.source?function Vte(n){n=Tt(n,ni);const e=Tt(n.firestore,dn),t=$n(e),r=new xc(e);return sU(t,n._query,{source:"server"}).then(i=>new Pc(e,r,n,i))}(this._delegate):function Fte(n){n=Tt(n,ni);const e=Tt(n.firestore,dn),t=$n(e),r=new xc(e);return AU(n._query),sU(t,n._query).then(i=>new Pc(e,r,n,i))}(this._delegate),t.then(r=>new lD(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qU(e),r=GU(e,i=>new lD(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kU(this._delegate,t,r)}withConverter(e){return new Oi(this.firestore,this._delegate.withConverter(e?Xu.getInstance(this.firestore,e):null))}}class lne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new nm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Oi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lne(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new nm(this._firestore,r))})}isEqual(e){return xU(this._delegate,e._delegate)}}class Vh extends Oi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Os(this.firestore,e):null}doc(e){try{return new Os(this.firestore,void 0===e?RE(this._delegate):RE(this._delegate,e))}catch(t){throw Ni(t,"doc()","CollectionReference.doc()")}}add(e){return function Bte(n,e){const t=Tt(n.firestore,dn),r=RE(n),i=UE(n.converter,e);return Lh(t,[xE(Zu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Os(this.firestore,t))}isEqual(e){return gU(this._delegate,e._delegate)}withConverter(e){return new Vh(this.firestore,this._delegate.withConverter(e?Xu.getInstance(this.firestore,e):null))}}function Ju(n){return Tt(n,Nn)}class dD{constructor(...e){this._delegate=new wa(...e)}static documentId(){return new dD(Pn.keyField().canonicalString())}isEqual(e){return(e=(0,gt.m9)(e))instanceof wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class el{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ene(){return new QA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new el(e)}static delete(){const e=function Jte(){return new Kg("deleteField")}();return e._methodName="FieldValue.delete",new el(e)}static arrayUnion(...e){const t=function tne(...n){return new YA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new el(t)}static arrayRemove(...e){const t=function nne(...n){return new XA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new el(t)}static increment(e){const t=function rne(n){return new JA("increment",n)}(e);return t._methodName="FieldValue.increment",new el(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dne={Firestore:$U,GeoPoint:ME,Timestamp:Bn,Blob:em,Transaction:HU,WriteBatch:zU,DocumentReference:Os,DocumentSnapshot:tm,Query:Oi,QueryDocumentSnapshot:nm,QuerySnapshot:lD,CollectionReference:Vh,FieldPath:dD,FieldValue:el,setLogLevel:function une(n){!function QY(n){gc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function WU(n,e){return function pne(n,e=a0){return new ht(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hD(n,e){return WU(n,e).pipe(Me(t=>({payload:t,type:"query"})))}!function fne(n){(function hne(n,e){n.INTERNAL.registerComponent(new jv.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},dne)))})(n,(e,t)=>new $U(e,t,new cne)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Po.Z);class KU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=eB(r,t);return new YU(i,s,this.afs)}snapshotChanges(){return function gne(n,e){return WU(n,e).pipe(qp(void 0),H0(),Me(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xi)}valueChanges(e={}){return this.snapshotChanges().pipe(Me(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return T(this.ref.get(e)).pipe(xi)}}function $E(n,e){return hD(n,e).pipe(qp(void 0),H0(),Me(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function ZU(n,e,t){return $E(n,t).pipe(Iv((r,i)=>function mne(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _ne(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),rt(),Me(r=>r.map(i=>({type:i.type,payload:i}))))}function fD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function QU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class YU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$E(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qp(void 0),H0(),hs(([r,i])=>i.length>0||!r),Me(([,r])=>r),xi)}auditTrail(e){return this.stateChanges(e).pipe(Iv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QU(e);return ZU(this.query,t,this.afs.schedulers.outsideAngular).pipe(xi)}valueChanges(e={}){return hD(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),xi)}get(e){return T(this.query.get(e)).pipe(xi)}add(e){return this.ref.add(e)}doc(e){return new KU(this.ref.doc(e),this.afs)}}class yne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$E(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.filter(r=>e.indexOf(r.type)>-1)),hs(t=>t.length>0),xi):$E(this.query,this.afs.schedulers.outsideAngular).pipe(xi)}auditTrail(e){return this.stateChanges(e).pipe(Iv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QU(e);return ZU(this.query,t,this.afs.schedulers.outsideAngular).pipe(xi)}valueChanges(e={}){return hD(this.query,this.afs.schedulers.outsideAngular).pipe(Me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),xi)}get(e){return T(this.query.get(e)).pipe(xi)}}const XU=new Ee("angularfire2.enableFirestorePersistence"),JU=new Ee("angularfire2.firestore.persistenceSettings"),vne=new Ee("angularfire2.firestore.settings"),Ene=new Ee("angularfire2.firestore.use-emulator");function eB(n,e=(t=>t)){return{query:e(n),ref:n}}let HE=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,b,R,x,H,V){this.schedulers=c;const W=Bv(t,a,r),ne=f;m&&YF(W,a,y,b,R,x,I,H),[this.firestore,this.persistenceEnabled$]=$0(`${W.name}.firestore`,"AngularFirestore",W.name,()=>{const Ce=a.runOutsideAngular(()=>W.firestore());if(s&&Ce.settings(s),ne&&Ce.useEmulator(...ne),i&&!iv(o)){const Oe=()=>{try{return T(Ce.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),k(!1)}};return[Ce,a.runOutsideAngular(Oe)]}return[Ce,k(!1)]},[s,ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=eB(i,r),a=this.schedulers.ngZone.run(()=>s);return new YU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new yne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new KU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(he(hg),he(fg,8),he(XU,8),he(vne,8),he(Ms),he(Pt),he(eh),he(JU,8),he(Ene,8),he(XF,8),he(qF,8),he(GF,8),he(WF,8),he(KF,8),he(ZF,8),he(QF,8),he(dg,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Ine=(()=>{class n{constructor(){Po.Z.registerVersion("angularfire",pc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XU,useValue:!0},{provide:JU,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[HE]})}return n})(),pD=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Me(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getService(t){return this.firestore.collection("Services").doc(t).valueChanges()}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe(Me(t=>{const r=t.map(i=>i.Name);return Array.from(new Set(r))}))}addService(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Services").doc(t.id).set(t)}updateService(t,r){return console.log("Update Service: "+t),console.log(r),this.firestore.collection("Services").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(he(HE))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tB=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ia),pe(Qi))};static#t=this.\u0275dir=qe({type:n})}return n})(),tl=(()=>{class n extends tB{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,features:[nn]})}return n})();const Bo=new Ee("NgValueAccessor"),bne={provide:Bo,useExisting:Gt(()=>nl),multi:!0},Cne=new Ee("CompositionEventMode");let nl=(()=>{class n extends tB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tne(){const n=ic()?ic().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ia),pe(Qi),pe(Cne,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&cn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Un([bne]),nn]})}return n})();function Oc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rB(n){return null!=n&&"number"==typeof n.length}const _i=new Ee("NgValidators"),kc=new Ee("NgAsyncValidators"),Ane=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tn{static min(e){return function iB(n){return e=>{if(Oc(e.value)||Oc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sB(n){return e=>{if(Oc(e.value)||Oc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return oB(e)}static requiredTrue(e){return function aB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cB(n){return Oc(n.value)||Ane.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uB(n){return e=>Oc(e.value)||!rB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function lB(n){return e=>rB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function dB(n){if(!n)return zE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Oc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return _B(e)}static composeAsync(e){return yB(e)}}function oB(n){return Oc(n.value)?{required:!0}:null}function zE(n){return null}function hB(n){return null!=n}function fB(n){return Ap(n)?T(n):n}function pB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function gB(n,e){return e.map(t=>t(n))}function mB(n){return n.map(e=>function Dne(n){return!n.validate}(e)?e:t=>e.validate(t))}function _B(n){if(!n)return null;const e=n.filter(hB);return 0==e.length?null:function(t){return pB(gB(t,e))}}function gD(n){return null!=n?_B(mB(n)):null}function yB(n){if(!n)return null;const e=n.filter(hB);return 0==e.length?null:function(t){return function gk(...n){const e=$s(n),{args:t,keys:r}=qO(n),i=new ht(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let f=0;f<o;f++){let m=!1;Ut(t[f]).subscribe(De(s,y=>{m||(m=!0,u--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(u||s.next(r?WO(r,a):a),s.complete())}))}});return e?i.pipe(GO(e)):i}(gB(t,e).map(fB)).pipe(Me(pB))}}function mD(n){return null!=n?yB(mB(n)):null}function vB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function EB(n){return n._rawValidators}function IB(n){return n._rawAsyncValidators}function _D(n){return n?Array.isArray(n)?n:[n]:[]}function qE(n,e){return Array.isArray(n)?n.includes(e):n===e}function wB(n,e){const t=_D(e);return _D(n).forEach(i=>{qE(t,i)||t.push(i)}),t}function bB(n,e){return _D(e).filter(t=>!qE(n,t))}class TB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ki extends TB{get formDirective(){return null}get path(){return null}}class Fc extends TB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Uh=(()=>{class n extends CB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Fc,2))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[nn]})}return n})(),rm=(()=>{class n extends CB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ki,10))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[nn]})}return n})();const im="VALID",WE="INVALID",Bh="PENDING",sm="DISABLED";function ED(n){return(KE(n)?n.validators:n)||null}function ID(n,e){return(KE(e)?e.asyncValidators:n)||null}function KE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function DB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new P(1e3,"");if(!r[t])throw new P(1001,"")}function SB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new P(1002,"")})}class ZE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===im}get invalid(){return this.status===WE}get pending(){return this.status==Bh}get disabled(){return this.status===sm}get enabled(){return this.status!==sm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bB(e,this._rawAsyncValidators))}hasValidator(e){return qE(this._rawValidators,e)}hasAsyncValidator(e){return qE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=im,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===im||this.status===Bh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sm:im}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bh,this._hasOwnPendingAsyncValidator=!0;const t=fB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xn,this.statusChanges=new Xn}_calculateStatus(){return this._allControlsDisabled()?sm:this.errors?WE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bh)?Bh:this._anyControlsHaveStatus(WE)?WE:im}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Pne(n){return Array.isArray(n)?gD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function xne(n){return Array.isArray(n)?mD(n):n||null}(this._rawAsyncValidators)}}class om extends ZE{constructor(e,t,r){super(ED(t),ID(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){SB(this,0,e),Object.keys(e).forEach(r=>{DB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class RB extends om{}const rl=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>am}),am="always";function QE(n,e){return[...e.path,n]}function cm(n,e,t=am){wD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function One(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MB(n,e)})}(n,e),function Fne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function kne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Nne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function YE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),JE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function XE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wD(n,e){const t=EB(n);null!==e.validator?n.setValidators(vB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=IB(n);null!==e.asyncValidator?n.setAsyncValidators(vB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();XE(e._rawValidators,i),XE(e._rawAsyncValidators,i)}function JE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=EB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=IB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return XE(e._rawValidators,r),XE(e._rawAsyncValidators,r),t}function MB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function CD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===nl?t=s:function Une(n){return Object.getPrototypeOf(n.constructor)===tl}(s)?r=s:i=s}),i||r||t||null}function NB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function OB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const lm=class extends ZE{constructor(e=null,t,r){super(ED(t),ID(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),KE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=OB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){OB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},zne={provide:Fc,useExisting:Gt(()=>DD)},LB=(()=>Promise.resolve())();let DD=(()=>{class n extends Fc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new lm,this._registered=!1,this.name="",this.update=new Xn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=CD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),TD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){LB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Bd(r);LB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?QE(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ki,9),pe(_i,10),pe(kc,10),pe(Bo,10),pe($y,8),pe(rl,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Un([zne]),nn,Wi]})}return n})(),dm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),UB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const SD=new Ee("NgModelWithFormControlWarning"),Qne={provide:ki,useExisting:Gt(()=>il)};let il=(()=>{class n extends ki{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Xn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(JE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return cm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){YE(t.control||null,t,!1),function Bne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(YE(r||null,t),(n=>n instanceof lm)(i)&&(cm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function PB(n,e){wD(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Lne(n,e){return JE(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wD(this.form,this),this._oldForm&&JE(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_i,10),pe(kc,10),pe(rl,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&cn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([Qne]),nn,Wi]})}return n})();const Jne={provide:Fc,useExisting:Gt(()=>jh)};let jh=(()=>{class n extends Fc{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Xn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=CD(0,s)}ngOnChanges(t){this._added||this._setUpControl(),TD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return QE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(pe(ki,13),pe(_i,10),pe(kc,10),pe(Bo,10),pe(SD,8))};static#n=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Un([Jne]),nn,Wi]})}return n})();const ere={provide:Bo,useExisting:Gt(()=>$h),multi:!0};function zB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $h=(()=>{class n extends tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=zB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function tre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&cn("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([ere]),nn]})}return n})(),eI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(zB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Qi),pe(ia),pe($h,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const nre={provide:Bo,useExisting:Gt(()=>PD),multi:!0};function qB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let PD=(()=>{class n extends tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function rre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&cn("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([nre]),nn]})}return n})(),tI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(qB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(qB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Qi),pe(ia),pe(PD,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),sl=(()=>{class n{constructor(){this._validator=zE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,features:[Wi]})}return n})();const ore={provide:_i,useExisting:Gt(()=>ol),multi:!0};let ol=(()=>{class n extends sl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bd,this.createValidator=t=>oB}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Co("required",i._enabled?"":null)},inputs:{required:"required"},features:[Un([ore]),nn]})}return n})(),tj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[UB]})}return n})();class nj extends ZE{constructor(e,t,r){super(ED(t),ID(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){SB(this,0,e),e.forEach((r,i)=>{DB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function rj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let nI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return rj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new om(i,s)}record(t,r=null){const i=this._reduceControls(t);return new RB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(rj(r)?s=r:(s.validators=r,s.asyncValidators=i),new lm(t,{...s,nonNullable:!0})):new lm(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new nj(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof lm||t instanceof ZE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rl,useValue:t.callSetDisabledState??am}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[tj]})}return n})(),fre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:SD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:rl,useValue:t.callSetDisabledState??am}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[tj]})}return n})();function pre(n,e){if(1&n&&(ce(0,"option",14),ve(1),ee()),2&n){const t=e.$implicit;En("value",t),Ye(1),un(t)}}function gre(n,e){1&n&&(ce(0,"div",24)(1,"span",25),ve(2,"Sponsor al Comunitatii"),ee(),ce(3,"span",26),ve(4,"\u2605"),ee()())}function mre(n,e){if(1&n){const t=function ZP(){return ye()}();ce(0,"div",15)(1,"div",16)(2,"div",17),ve(3),ee(),ce(4,"div",18),ve(5),ee(),ce(6,"div",19),ve(7),ee(),ce(8,"div",20)(9,"a",21),ve(10),ee()(),ce(11,"div",20)(12,"a",21),ve(13),ee()(),ce(14,"div",20),ve(15),ee(),ce(16,"div")(17,"button",22),cn("click",function(){const s=function A_(n){return nt.lFrame.contextLView=n,n[Wn]}(t).$implicit;return function Wl(n){return nt.lFrame.contextLView=null,n}(tx().navigateToEditService(s.id))}),ve(18,"Edit"),ee()()(),Zs(19,gre,5,0,"div",23),ee()}if(2&n){const t=e.$implicit;Ye(3),un(t.Name),Ye(2),un(t.Service_Type),Ye(2),un(t.Phone_Number),Ye(2),Dp("href","mailto:",t.Email,"",Ja),Ye(1),un(t.Email),Ye(2),mu("href",t.Website,Ja),Ye(1),un(t.Website),Ye(2),un(t.Description),Ye(4),En("ngIf",t.Community_Sponsor)}}let _re=(()=>{class n{constructor(t,r,i){this.servicesService=t,this.route=r,this.router=i,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedServiceType=t.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}navigateToEditService(t){this.router.navigate(["/edit-service",t])}handleChange(t){const{target:r}=t;return r&&console.log(r.value),r.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(t){console.log("Filter changed:",t),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:t},queryParamsHandling:"merge"}),this.filterServices(t)}filterServices(t){console.log("Filter Serices: "+t),this.fetchServiceTypes(),t&&""!==t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(t=>t.Service_Type))]}shareLink(){const r=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(r?"?"+r:"")).then(()=>{alert("Link copied to clipboard!")},s=>{console.error("Could not copy text: ",s)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(pD),pe(fc),pe(hi))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[3,"value"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-subtitle"],[3,"href"],[1,"editButton",3,"click"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1"),ve(3,"Lista de Servicii"),ee()(),ce(4,"div",2)(5,"h2"),ve(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),ee()()(),ce(7,"div",3)(8,"div",4)(9,"label",5),ve(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),ee()(),ce(11,"div",4)(12,"select",6),cn("change",function(o){return i.onFilterChange(i.handleChange(o))})("ngModelChange",function(o){return i.selectedServiceType=o}),ce(13,"option",7),ve(14,"Toate serviciile"),ee(),Zs(15,pre,2,2,"option",8),ee()(),ce(16,"div",4)(17,"button",9),cn("click",function(){return i.navigateToAddService()}),ve(18,"Adaugati un Serviciu"),ee()(),ce(19,"button",10),cn("click",function(){return i.shareLink()}),Ht(20,"i",11),ve(21," Share "),ee()(),ce(22,"div",12),Zs(23,mre,20,9,"div",13),ee()),2&r&&(Ye(12),En("ngModel",i.selectedServiceType),Ye(3),En("ngForOf",i.serviceTypes),Ye(8),En("ngForOf",i.filteredServices))},dependencies:[bu,rv,eI,tI,$h,Uh,DD],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})(),yre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-rules"]],decls:32,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","#",1,"cta-button"]],template:function(r,i){1&r&&(ce(0,"div",0),Ht(1,"div",1),ce(2,"div",2)(3,"h1"),ve(4,"Regulile \u0219i Reglement\u0103rile"),ee(),ce(5,"p"),ve(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),ee(),ce(7,"a",3),ve(8,"Get Started"),ee()()(),ce(9,"h2"),ve(10,"Regulile \u0219i Reglement\u0103rile"),ee(),ce(11,"ul")(12,"li"),ve(13,"Nu este permis\u0103 nicio form\u0103 de publicitate."),ee(),ce(14,"li"),ve(15,"Respecta\u021bi to\u021bi membrii."),ee(),ce(16,"li"),ve(17,"F\u0103r\u0103 spam."),ee(),ce(18,"li"),ve(19,"F\u0103r\u0103 limbaj ofensator."),ee(),ce(20,"li"),ve(21,"R\u0103m\xe2ne\u021bi la subiect."),ee(),ce(22,"li"),ve(23,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),ee(),ce(24,"li"),ve(25,"Folosi\u021bi un limbaj adecvat."),ee(),ce(26,"li"),ve(27,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),ee(),ce(28,"li"),ve(29,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),ee()(),ce(30,"p"),ve(31,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),ee())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(http://source.unsplash.com/800x600/?Seattle) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:#f60;border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}"]})}return n})(),ij=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}addEvent(t){const r=this.firestore.createId();return this.firestore.collection("events").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(HE))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vre(n,e){1&n&&(ce(0,"div",15)(1,"span",16),ve(2,"Sponsor al Comunitatii"),ee(),ce(3,"span",17),ve(4,"\u2605"),ee()())}function Ere(n,e){if(1&n&&(ce(0,"div",7)(1,"div",8)(2,"div",9),ve(3),ee(),ce(4,"div",10),Ht(5,"img",11),ee(),ce(6,"div",12),ve(7),ee(),ce(8,"div",12),ve(9),ee(),ce(10,"div",12),ve(11),ee(),ce(12,"div",12),ve(13),ee(),ce(14,"div",12)(15,"a",13),ve(16),ee()(),ce(17,"div",12)(18,"a",13),ve(19),ee()(),ce(20,"div",12),ve(21),ee()(),Zs(22,vre,5,0,"div",14),ee()),2&n){const t=e.$implicit;Ye(3),un(t.Name),Ye(2),mu("src",t.Poster_Image,Ja),Ye(2),un(t.Location),Ye(2),un(t.Event_date),Ye(2),un(t.Price),Ye(2),un(t.Phone_Number),Ye(2),Dp("href","mailto:",t.Contact,"",Ja),Ye(1),un(t.Contact),Ye(2),mu("href",t.Website,Ja),Ye(1),un(t.Website),Ye(2),un(t.Description),Ye(1),En("ngIf",t.Community_Sponsor)}}let Ire=(()=>{class n{constructor(t,r){this.eventService=t,this.router=r,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ij),pe(hi))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1"),ve(3,"Lista de Evenimente"),ee()(),ce(4,"div",2)(5,"h2"),ve(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),ee()()(),ce(7,"div",3)(8,"button",4),cn("click",function(){return i.navigateToAddEvent()}),ve(9,"Adaugati un Eveniment"),ee()(),ce(10,"div",5),Zs(11,Ere,23,12,"div",6),ee()),2&r&&(Ye(11),En("ngForOf",i.events))},dependencies:[bu,rv],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})(),sj=(()=>{class n{constructor(t){this.firestore=t}getJobs(){return this.firestore.collection("Jobs").snapshotChanges().pipe(Me(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}addJob(t){const r=this.firestore.createId(),i=(new Date).toISOString().split("T")[0];return t.Date_Created=i,this.firestore.collection("Jobs").doc(r).set(t)}getJob(t){return this.firestore.collection("Jobs").doc(t).valueChanges()}updateJob(t,r){return this.firestore.collection("Jobs").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(he(HE))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wre(n,e){1&n&&(ce(0,"div",13)(1,"span",14),ve(2,"Expired"),ee()())}function bre(n,e){if(1&n&&(ce(0,"div",8)(1,"div",9),Ht(2,"img",10),ee(),ce(3,"div",11)(4,"h3"),ve(5),ee(),ce(6,"h4"),ve(7),ee(),ce(8,"p"),ve(9),ee(),Ht(10,"hr"),ce(11,"p"),ve(12),ee(),ce(13,"p"),ve(14),ee(),ce(15,"p"),ve(16),ee(),ce(17,"p"),ve(18),ee(),ce(19,"p"),ve(20),ee(),Zs(21,wre,3,0,"div",12),ee()()),2&n){const t=e.$implicit;Ye(2),mu("alt",t.Title),Ye(3),un(t.Title),Ye(2),un(t.Company_Name),Ye(2),un(t.Contact_Name),Ye(3),un(t.Location),Ye(2),un(t.Phone_Number),Ye(2),un(t.Email),Ye(2),un(t.Website),Ye(2),un(t.Job_Description),Ye(1),En("ngIf",t.Filled)}}function Cre(n,e){if(1&n&&(ce(0,"option",20),ve(1),ee()),2&n){const t=e.$implicit;En("value",t),Ye(1),un(t)}}function Rre(n,e){if(1&n&&(ce(0,"option",20),ve(1),ee()),2&n){const t=e.$implicit;En("value",t),Ye(1),un(t)}}const Mre=[{path:"",component:DY},{path:"services",component:_re},{path:"rules",component:yre},{path:"events",component:Ire},{path:"jobs",component:(()=>{class n{constructor(t,r){this.jobsService=t,this.router=r,this.jobs=[]}ngOnInit(){this.jobsService.getJobs().subscribe(t=>{this.jobs=t})}navigateToAddJob(){this.router.navigate(["/add-job"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(sj),pe(hi))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-jobs"]],decls:15,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-job-container"],[3,"click"],[1,"jobs"],[1,"job-list"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-card-image"],["src","http://source.unsplash.com/800x600/?Caregiver",3,"alt"],[1,"job-card-content"],["class","job-footer",4,"ngIf"],[1,"job-footer"],[1,"featured"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1"),ve(3,"Locuri de munca"),ee()(),ce(4,"div",2)(5,"h2"),ve(6,"Descoperi\u021bi locuri de munca oferite de membrii comunit\u0103\u021bii"),ee()()(),ce(7,"div",3)(8,"button",4),cn("click",function(){return i.navigateToAddJob()}),ve(9,"Adaugati un loc de munca"),ee()(),ce(10,"div",5)(11,"h2"),ve(12,"Locuri de munca"),ee(),ce(13,"div",6),Zs(14,bre,22,10,"div",7),ee()()),2&r&&(Ye(14),En("ngForOf",i.jobs))},dependencies:[bu,rv],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-job-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.jobs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.job-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.job-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.job-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.job-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.job-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.job-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.job-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.job-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.job-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.job-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.job-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"add-service",component:(()=>{class n{constructor(t,r){this.fb=t,this.servicesService=r,this.serviceTypes=[],this.serviceForm=this.fb.group({businessName:["",Tn.required],email:["",[Tn.required,Tn.email]],phone:["",Tn.required],website:["",Tn.required],description:["",Tn.required],serviceType:["",Tn.required]})}ngOnInit(){this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.servicesService.addService({id:this.serviceForm.value.ID,Name:this.serviceForm.value.businessName,Phone_Number:this.serviceForm.value.phone,Service_Type:this.serviceForm.value.serviceType,Community_Sponsor:!1,Email:this.serviceForm.value.email,Website:this.serviceForm.value.website,Description:this.serviceForm.value.description,Date_Created:this.serviceForm.value.Date_Created}).then(()=>{console.log("Service added successfully"),this.serviceForm.reset()}).catch(r=>{console.error("Error adding service: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(nI),pe(pD))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-service"]],decls:36,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName"],["id","businessName","formControlName","businessName","required",""],["for","email"],["id","email","type","email","formControlName","email"],["for","phone"],["id","phone","formControlName","phone"],["for","website"],["id","website","formControlName","website"],["for","description"],["id","description","formControlName","description"],["for","serviceType"],["id","serviceType","formControlName","serviceType","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1"),ve(3,"Lista de Servicii"),ee()(),ce(4,"div",2)(5,"h2"),ve(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),ee()()(),ce(7,"div",3)(8,"form",4),cn("ngSubmit",function(){return i.onSubmit()}),ce(9,"div",5)(10,"label",6),ve(11,"Nume:"),ee(),Ht(12,"input",7),ee(),ce(13,"div",5)(14,"label",8),ve(15,"Adresa Email:"),ee(),Ht(16,"input",9),ee(),ce(17,"div",5)(18,"label",10),ve(19,"Numar de telefon:"),ee(),Ht(20,"input",11),ee(),ce(21,"div",5)(22,"label",12),ve(23,"Pagina Web:"),ee(),Ht(24,"input",13),ee(),ce(25,"div",5)(26,"label",14),ve(27,"Descriere a serviciile oferite:"),ee(),Ht(28,"textarea",15),ee(),ce(29,"div",5)(30,"label",16),ve(31,"Categoria de serviciului:"),ee(),ce(32,"select",17),Zs(33,Cre,2,2,"option",18),ee()(),ce(34,"button",19),ve(35,"Add Service"),ee()()()),2&r&&(Ye(8),En("formGroup",i.serviceForm),Ye(25),En("ngForOf",i.serviceTypes),Ye(1),En("disabled",i.serviceForm.invalid))},dependencies:[bu,dm,eI,tI,nl,$h,Uh,rm,ol,il,jh],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}"]})}return n})()},{path:"add-event",component:(()=>{class n{constructor(t,r){this.fb=t,this.eventsService=r,this.eventForm=this.fb.group({name:["",Tn.required],date:["",Tn.required],location:["",Tn.required],description:["",Tn.required]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(r=>{console.error("Error adding event: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(nI),pe(ij))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-event"]],decls:20,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name","required",""],["for","date"],["id","date","type","date","formControlName","date","required",""],["for","location"],["id","location","formControlName","location","required",""],["for","description"],["id","description","formControlName","description","required",""],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"form",1),cn("ngSubmit",function(){return i.onSubmit()}),ce(2,"div",2)(3,"label",3),ve(4,"Event Name:"),ee(),Ht(5,"input",4),ee(),ce(6,"div",2)(7,"label",5),ve(8,"Date:"),ee(),Ht(9,"input",6),ee(),ce(10,"div",2)(11,"label",7),ve(12,"Location:"),ee(),Ht(13,"input",8),ee(),ce(14,"div",2)(15,"label",9),ve(16,"Description:"),ee(),Ht(17,"textarea",10),ee(),ce(18,"button",11),ve(19,"Add Event"),ee()()()),2&r&&(Ye(1),En("formGroup",i.eventForm),Ye(17),En("disabled",i.eventForm.invalid))},dependencies:[dm,nl,Uh,rm,ol,il,jh],styles:[".form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}"]})}return n})()},{path:"add-job",component:(()=>{class n{constructor(t,r){this.fb=t,this.jobsService=r,this.jobForm=this.fb.group({Title:["",Tn.required],Company_Name:["",Tn.required],Contact_Name:["",Tn.required],Phone_Number:["",Tn.required],Location:["",Tn.required],Website:["",Tn.required],Job_Description:["",Tn.required],Email:["",[Tn.required,Tn.email]]})}ngOnInit(){}onSubmit(){this.jobForm.valid&&this.jobsService.addJob(this.jobForm.value).then(()=>{console.log("Job added successfully"),this.jobForm.reset()}).catch(r=>{console.error("Error adding job: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(nI),pe(sj))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-job"]],decls:36,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Title"],["id","Title","formControlName","Title","required",""],["for","Company_Name"],["id","Company_Name","formControlName","Company_Name","required",""],["for","Contact_Name"],["id","Contact_Name","formControlName","Contact_Name","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number","required",""],["for","Email"],["id","Email","type","email","formControlName","Email","required",""],["for","Job_Description"],["id","Job_Description","formControlName","Job_Description","required",""],["for","Location"],["id","Location","formControlName","Location","required",""],["for","Website"],["id","Website","formControlName","Website","required",""],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"form",1),cn("ngSubmit",function(){return i.onSubmit()}),ce(2,"div",2)(3,"label",3),ve(4,"Job Title:"),ee(),Ht(5,"input",4),ee(),ce(6,"div",2)(7,"label",5),ve(8,"Company Name:"),ee(),Ht(9,"input",6),ee(),ce(10,"div",2)(11,"label",7),ve(12,"Contact Name:"),ee(),Ht(13,"input",8),ee(),ce(14,"div",2)(15,"label",9),ve(16,"Phone Number:"),ee(),Ht(17,"input",10),ee(),ce(18,"div",2)(19,"label",11),ve(20,"Contact Email:"),ee(),Ht(21,"input",12),ee(),ce(22,"div",2)(23,"label",13),ve(24,"Job Description:"),ee(),Ht(25,"textarea",14),ee(),ce(26,"div",2)(27,"label",15),ve(28,"Location:"),ee(),Ht(29,"input",16),ee(),ce(30,"div",2)(31,"label",17),ve(32,"Location:"),ee(),Ht(33,"input",18),ee(),ce(34,"button",19),ve(35,"Add Job"),ee()()()),2&r&&(Ye(1),En("formGroup",i.jobForm),Ye(33),En("disabled",i.jobForm.invalid))},dependencies:[dm,nl,Uh,rm,ol,il,jh],styles:[".form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}"]})}return n})()},{path:"edit-service/:id",component:(()=>{class n{constructor(t,r,i,s){this.fb=t,this.route=r,this.router=i,this.servicesService=s,this.serviceId=null,this.serviceTypes=[],this.serviceForm=this.fb.group({Name:["",Tn.required],Email:["",Tn.email],Phone_Number:["",Tn.required],Website:["",Tn.required],Description:["",Tn.required],Service_Type:["",Tn.required]})}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{this.serviceForm.patchValue({Name:t?.Name,Email:t?.Email,Phone_Number:t?.Phone_Number,Service_Type:t?.Service_Type,Website:t?.Website,Description:t?.Description})}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.serviceId&&this.servicesService.updateService(this.serviceId,this.serviceForm.value).then(()=>{console.log("Service updated successfully"),this.router.navigate(["/services"])}).catch(t=>{console.error("Error updating service: ",t)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(nI),pe(fc),pe(hi),pe(pD))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-edit-services"]],decls:36,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Description"],["id","Description","formControlName","Description"],["for","Service_Type"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1"),ve(3,"Lista de Servicii"),ee()(),ce(4,"div",2)(5,"h2"),ve(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),ee()()(),ce(7,"div",3)(8,"form",4),cn("ngSubmit",function(){return i.onSubmit()}),ce(9,"div",5)(10,"label",6),ve(11,"Nume:"),ee(),Ht(12,"input",7),ee(),ce(13,"div",5)(14,"label",8),ve(15,"Adresa Email:"),ee(),Ht(16,"input",9),ee(),ce(17,"div",5)(18,"label",10),ve(19,"Numar de telefon:"),ee(),Ht(20,"input",11),ee(),ce(21,"div",5)(22,"label",12),ve(23,"Pagina Web:"),ee(),Ht(24,"input",13),ee(),ce(25,"div",5)(26,"label",14),ve(27,"Descriere a serviciile oferite:"),ee(),Ht(28,"textarea",15),ee(),ce(29,"div",5)(30,"label",16),ve(31,"Categoria de serviciului:"),ee(),ce(32,"select",17),Zs(33,Rre,2,2,"option",18),ee()(),ce(34,"button",19),ve(35,"Salvati Serviciu"),ee()()()),2&r&&(Ye(8),En("formGroup",i.serviceForm),Ye(25),En("ngForOf",i.serviceTypes),Ye(1),En("disabled",i.serviceForm.invalid))},dependencies:[bu,dm,eI,tI,nl,$h,Uh,rm,ol,il,jh],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}"]})}return n})()}];let Pre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({imports:[LF.forRoot(Mre),LF]})}return n})();const xre=function(n,e){return{"fa-bars":n,"fa-times":e}},Nre=function(n){return{active:n}};let Ore=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/jobs",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(ce(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),ve(4,"Romani in Seattle"),ee()(),ce(5,"div",4),cn("click",function(){return i.toggleMenu()}),Ht(6,"i",5),ee(),ce(7,"ul",6)(8,"li",7)(9,"a",8),cn("click",function(){return i.closeMenu()}),ve(10,"Home"),ee()(),ce(11,"li",7)(12,"a",9),cn("click",function(){return i.closeMenu()}),ve(13,"Servicii"),ee()(),ce(14,"li",7)(15,"a",10),cn("click",function(){return i.closeMenu()}),ve(16,"Evenimente"),ee()(),ce(17,"li",7)(18,"a",11),cn("click",function(){return i.closeMenu()}),ve(19,"Locuri de Munca"),ee()(),ce(20,"li",7)(21,"a",12),cn("click",function(){return i.closeMenu()}),ve(22,"Regulament"),ee()()()()()),2&r&&(Ye(6),En("ngClass",SN(2,xre,!i.menuOpen,i.menuOpen)),Ye(1),En("ngClass",DN(5,Nre,i.menuOpen)))},dependencies:[dO,Vv],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{color:#333;text-decoration:none;text-transform:uppercase;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to left,blue 0,blue 33.3%,yellow 33.3%,yellow 66.6%,red 66.6%,red)}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),kre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(ce(0,"footer",0)(1,"div",1),ve(2," \xa9 2024 Romani in Seattle. All rights reserved. "),ee()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),Fre=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(ce(0,"div",0),Ht(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),ee())},dependencies:[P0,Ore,kre],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class oj{}class Lre{}const Ta="*";function aj(n,e=null){return{type:2,steps:n,options:e}}function cj(n){return{type:6,styles:n,offset:null}}class hm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uj{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function lj(n){return new P(3e3,!1)}function Lc(n){switch(n.length){case 0:return new hm;case 1:return n[0];default:return new uj(n)}}function dj(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let b=I,R=y;if("offset"!==I)switch(b=n.normalizePropertyName(b,i),R){case"!":R=t.get(I);break;case Ta:R=r.get(I);break;default:R=n.normalizeStyleValue(I,b,R,i)}m.set(b,R)}),f||s.push(m),a=m,o=u}),i.length)throw function oie(n){return new P(3502,!1)}();return s}function ND(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&OD(t,"start",n)));break;case"done":n.onDone(()=>r(t&&OD(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&OD(t,"destroy",n)))}}function OD(n,e,t){const s=kD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function kD(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function gs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const yie=(()=>typeof document>"u"?null:document.documentElement)();function FD(n){const e=n.parentNode||n.host||null;return e===yie?null:e}let al=null,fj=!1;function pj(n,e){for(;e;){if(e===n)return!0;e=FD(e)}return!1}function gj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let mj=(()=>{class n{validateStyleProperty(t){return function Eie(n){al||(al=function Iie(){return typeof document<"u"?document.body:null}()||{},fj=!!al.style&&"WebkitAppearance"in al.style);let e=!0;return al.style&&!function vie(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in al.style,!e&&fj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in al.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return pj(t,r)}getParentElement(t){return FD(t)}query(t,r,i){return gj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new hm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})(),LD=(()=>{class n{static#e=this.NOOP=new mj}return n})();const wie=1e3,VD="ng-enter",rI="ng-leave",iI="ng-trigger",sI=".ng-trigger",yj="ng-animating",UD=".ng-animating";function Ca(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:BD(parseFloat(e[1]),e[2])}function BD(n,e){return"s"===e?n*wie:n}function oI(n,e,t){return n.hasOwnProperty("duration")?n:function Tie(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(lj()),{duration:0,delay:0,easing:""};i=BD(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=BD(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Vre(){return new P(3100,!1)}()),a=!0),s<0&&(e.push(function Ure(){return new P(3101,!1)}()),a=!0),a&&e.splice(c,0,lj())}return{duration:i,delay:s,easing:o}}(n,e,t)}function fm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Vc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function jo(n,e,t){e.forEach((r,i)=>{const s=$D(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function cl(n,e){e.forEach((t,r)=>{const i=$D(r);n.style[i]=""})}function pm(n){return Array.isArray(n)?1==n.length?n[0]:aj(n):n}const jD=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ij(n){let e=[];if("string"==typeof n){let t;for(;t=jD.exec(n);)e.push(t[1]);jD.lastIndex=0}return e}function gm(n,e,t){const r=n.toString(),i=r.replace(jD,(s,o)=>{let a=e[o];return null==a&&(t.push(function jre(n){return new P(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function aI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Die=/-+([a-z0-9])/g;function $D(n){return n.replace(Die,(...e)=>e[1].toUpperCase())}function ms(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function $re(n){return new P(3004,!1)}()}}function wj(n,e){return window.getComputedStyle(n)[e]}const cI="*";function Mie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Pie(n,e,t){if(":"==n[0]){const c=function xie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function nie(n){return new P(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function tie(n){return new P(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(bj(i,o));"<"==s[0]&&!(i==cI&&o==cI)&&e.push(bj(o,i))}(r,t,e)):t.push(n),t}const uI=new Set(["true","1"]),lI=new Set(["false","0"]);function bj(n,e){const t=uI.has(n)||lI.has(n),r=uI.has(e)||lI.has(e);return(i,s)=>{let o=n==cI||n==i,a=e==cI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?uI.has(n):lI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?uI.has(e):lI.has(e)),o&&a}}const Nie=new RegExp("s*:selfs*,?","g");function HD(n,e,t,r){return new Oie(n).build(e,t,r)}class Oie{constructor(e){this._driver=e}build(e,t,r){const i=new Lie(t);return this._resetContextStyleTimingState(i),ms(this,pm(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function zre(){return new P(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function qre(){return new P(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ij(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(aI(s.values()),t.errors.push(function Gre(n,e){return new P(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ms(this,pm(e.animation),t);return{type:1,matchers:Mie(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ul(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ms(this,r,t)),options:ul(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ms(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:ul(e.options)}}visitAnimate(e,t){const r=function Uie(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return zD(oI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zD(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=oI(t,e);return zD(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:cj({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=cj(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Ta?r.push(a):t.errors.push(new P(3002,!1)):r.push(vj(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function Kre(n,e,t,r,i){return new P(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function Aie(n,e,t){const r=e.params||{},i=Ij(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Bre(n){return new P(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Zre(){return new P(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(H=>{const V=this._makeStyleAst(H,t);let W=null!=V.offset?V.offset:function Vie(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),ne=0;return null!=W&&(s++,ne=V.offset=W),c=c||ne<0||ne>1,a=a||ne<u,u=ne,o.push(ne),V});c&&t.errors.push(function Qre(){return new P(3012,!1)}()),a&&t.errors.push(function Yre(){return new P(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Xre(){return new P(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,b=t.currentTime,R=t.currentAnimateTimings,x=R.duration;return f.forEach((H,V)=>{const W=y>0?V==I?1:y*V:o[V],ne=W*x;t.currentTime=b+R.delay+ne,R.duration=ne,this._validateStyleAst(H,t),H.offset=W,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:ms(this,pm(e.animation),t),options:ul(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ul(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ul(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function kie(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Nie,"")),n=n.replace(/@\*/g,sI).replace(/@\w+/g,t=>sI+"-"+t.slice(1)).replace(/:animating/g,UD),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,gs(t.collectedStyles,t.currentQuerySelector,new Map);const a=ms(this,pm(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ul(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Jre(){return new P(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:oI(e.timings,t.errors,!0);return{type:12,animation:ms(this,pm(e.animation),t),timings:r,options:null}}}class Lie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ul(n){return n?(n=fm(n)).params&&(n.params=function Fie(n){return n?fm(n):null}(n.params)):n={},n}function zD(n,e,t){return{duration:n,delay:e,easing:t}}function qD(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class dI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $ie=new RegExp(":enter","g"),zie=new RegExp(":leave","g");function GD(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new qie).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class qie{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new dI;const m=new WD(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?Ca(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),ms(this,r,m);const I=m.timelines.filter(b=>b.containsAnimation());if(I.length&&a.size){let b;for(let R=I.length-1;R>=0;R--){const x=I[R];if(x.element===t){b=x;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,m.errors,c)}return I.length?I.map(b=>b.buildKeyframes()):[qD(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Ca(gm(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Ca(r.duration):null,a=null!=r.delay?Ca(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ms(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=hI);const o=Ca(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ms(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ca(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ms(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return oI(t.params?gm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ca(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=hI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),ms(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;ms(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const hI={};class WD{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new fI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ca(r.duration)),null!=r.delay&&(i.delay=Ca(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=gm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new WD(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=hI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Gie(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace($ie,"."+this._enterClassName)).replace(zie,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function eie(n){return new P(3014,!1)}()),a}}class fI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new fI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ta),this._currentKeyframe.set(t,Ta);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Wie(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Ta)}else Vc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=gm(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ta),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=Vc(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===Ta&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?aI(e.values()):[],o=t.size?aI(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return qD(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Gie extends fI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Vc(e[0]);c.set("offset",0),s.push(c);const u=Vc(e[0]);u.set("offset",Aj(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=Vc(e[m]);const I=y.get("offset");y.set("offset",Aj((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return qD(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Aj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class KD{}const Kie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Zie extends KD{normalizePropertyName(e,t){return $D(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Kie.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Hre(n,e){return new P(3005,!1)}())}return o+s}}function Dj(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const ZD={};class Sj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Qie(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||ZD,b=this.buildStyles(r,a&&a.params||ZD,m),R=c&&c.params||ZD,x=this.buildStyles(i,R,m),H=new Set,V=new Map,W=new Map,ne="void"===i,Ce={params:Yie(R,y),delay:this.ast.options?.delay},Oe=f?[]:GD(e,t,this.ast.animation,s,o,b,x,Ce,u,m);let j=0;if(Oe.forEach(L=>{j=Math.max(L.duration+L.delay,j)}),m.length)return Dj(t,this._triggerName,r,i,ne,b,x,[],[],V,W,j,m);Oe.forEach(L=>{const z=L.element,q=gs(V,z,new Set);L.preStyleProps.forEach(U=>q.add(U));const X=gs(W,z,new Set);L.postStyleProps.forEach(U=>X.add(U)),z!==t&&H.add(z)});const N=aI(H.values());return Dj(t,this._triggerName,r,i,ne,b,x,Oe,N,V,W,j)}}function Yie(n,e){const t=fm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Xie{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=fm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=gm(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class ese{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Xie(i.style,i.options&&i.options.params||{},r))}),Rj(this.states,"true","1"),Rj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Sj(e,i,this.states))}),this.fallbackTransition=function tse(n,e,t){return new Sj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Rj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const nse=new dI;class rse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=HD(this._driver,t,r,[]);if(r.length)throw function aie(n){return new P(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=dj(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=GD(this._driver,t,s,VD,rI,new Map,new Map,r,nse,i),o.forEach(f=>{const m=gs(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function cie(){return new P(3300,!1)}()),o=[]),i.length)throw function uie(n){return new P(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,Ta))})});const u=Lc(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function lie(n){return new P(3301,!1)}();return t}listen(e,t,r,i){const s=kD(t,"","","");return ND(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Mj="ng-animate-queued",QD="ng-animate-disabled",cse=[],Pj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},use={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},no="__ng_removed";class YD{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function fse(n){return n??null}(r?e.value:e),r){const s=fm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const mm="void",XD=new YD(mm);class lse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ks(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function die(n,e){return new P(3302,!1)}();if(null==r||0==r.length)throw function hie(n){return new P(3303,!1)}();if(!function pse(n){return"start"==n||"done"==n}(r))throw function fie(n,e){return new P(3400,!1)}();const s=gs(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=gs(this._engine.statesByElement,e,new Map);return a.has(t)||(ks(e,iI),ks(e,iI+"-"+t),a.set(t,XD)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function pie(n){return new P(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new JD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ks(e,iI),ks(e,iI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new YD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=XD),u.value!==mm&&c.value===u.value){if(!function _se(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const R=[],x=s.matchStyles(c.value,c.params,R),H=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{cl(e,x),jo(e,H)})}return}const y=gs(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),b=!1;if(!I){if(!i)return;I=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:b}),b||(ks(e,Mj),o.onStart(()=>{Hh(e,Mj)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const x=this._engine.playersByElement.get(e);if(x){let H=x.indexOf(o);H>=0&&x.splice(H,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,sI,!0);r.forEach(i=>{if(i[no])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,mm,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Lc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||XD,f=new YD(mm),m=new JD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[no];(!s||s===Pj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ks(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=kD(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,ND(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class dse{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new lse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(pI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!pI(t))return;const s=t[no];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ks(e,QD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hh(e,QD))}removeNode(e,t,r){if(pI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[no]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return pI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,sI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,UD,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Lc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[no];if(t&&t.setForRemoval){if(e[no]=Pj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(QD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ks(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Lc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function gie(n){return new P(3402,!1)}()}_flushAnimations(e,t){const r=new dI,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach($e=>{f.add($e);const Qe=this.driver.query($e,".ng-animate-queued",!0);for(let Xe=0;Xe<Qe.length;Xe++)f.add(Qe[Xe])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=Oj(y,this.collectedEnterElements),b=new Map;let R=0;I.forEach(($e,Qe)=>{const Xe=VD+R++;b.set(Qe,Xe),$e.forEach(xt=>ks(xt,Xe))});const x=[],H=new Set,V=new Set;for(let $e=0;$e<this.collectedLeaveElements.length;$e++){const Qe=this.collectedLeaveElements[$e],Xe=Qe[no];Xe&&Xe.setForRemoval&&(x.push(Qe),H.add(Qe),Xe.hasAnimation?this.driver.query(Qe,".ng-star-inserted",!0).forEach(xt=>H.add(xt)):V.add(Qe))}const W=new Map,ne=Oj(y,Array.from(H));ne.forEach(($e,Qe)=>{const Xe=rI+R++;W.set(Qe,Xe),$e.forEach(xt=>ks(xt,Xe))}),e.push(()=>{I.forEach(($e,Qe)=>{const Xe=b.get(Qe);$e.forEach(xt=>Hh(xt,Xe))}),ne.forEach(($e,Qe)=>{const Xe=W.get(Qe);$e.forEach(xt=>Hh(xt,Xe))}),x.forEach($e=>{this.processLeaveNode($e)})});const Ce=[],Oe=[];for(let $e=this._namespaceList.length-1;$e>=0;$e--)this._namespaceList[$e].drainQueuedTransitions(t).forEach(Xe=>{const xt=Xe.player,pr=Xe.element;if(Ce.push(xt),this.collectedEnterElements.length){const ir=pr[no];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has(Xe.triggerName)){const Sa=ir.previousTriggersValues.get(Xe.triggerName),ns=this.statesByElement.get(Xe.element);if(ns&&ns.has(Xe.triggerName)){const Ra=ns.get(Xe.triggerName);Ra.value=Sa,ns.set(Xe.triggerName,Ra)}}return void xt.destroy()}}const Ls=!m||!this.driver.containsElement(m,pr),rr=W.get(pr),On=b.get(pr),kn=this._buildInstruction(Xe,r,On,rr,Ls);if(kn.errors&&kn.errors.length)return void Oe.push(kn);if(Ls)return xt.onStart(()=>cl(pr,kn.fromStyles)),xt.onDestroy(()=>jo(pr,kn.toStyles)),void i.push(xt);if(Xe.isFallbackTransition)return xt.onStart(()=>cl(pr,kn.fromStyles)),xt.onDestroy(()=>jo(pr,kn.toStyles)),void i.push(xt);const Bc=[];kn.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||Bc.push(ir)}),kn.timelines=Bc,r.append(pr,kn.timelines),o.push({instruction:kn,player:xt,element:pr}),kn.queriedElements.forEach(ir=>gs(a,ir,[]).push(xt)),kn.preStyleProps.forEach((ir,Sa)=>{if(ir.size){let ns=c.get(Sa);ns||c.set(Sa,ns=new Set),ir.forEach((Ra,jc)=>ns.add(jc))}}),kn.postStyleProps.forEach((ir,Sa)=>{let ns=u.get(Sa);ns||u.set(Sa,ns=new Set),ir.forEach((Ra,jc)=>ns.add(jc))})});if(Oe.length){const $e=[];Oe.forEach(Qe=>{$e.push(function mie(n,e){return new P(3505,!1)}())}),Ce.forEach(Qe=>Qe.destroy()),this.reportError($e)}const j=new Map,N=new Map;o.forEach($e=>{const Qe=$e.element;r.has(Qe)&&(N.set(Qe,Qe),this._beforeAnimationBuild($e.player.namespaceId,$e.instruction,j))}),i.forEach($e=>{const Qe=$e.element;this._getPreviousPlayers(Qe,!1,$e.namespaceId,$e.triggerName,null).forEach(xt=>{gs(j,Qe,[]).push(xt),xt.destroy()})});const L=x.filter($e=>Fj($e,c,u)),z=new Map;Nj(z,this.driver,V,u,Ta).forEach($e=>{Fj($e,c,u)&&L.push($e)});const X=new Map;I.forEach(($e,Qe)=>{Nj(X,this.driver,new Set($e),c,"!")}),L.forEach($e=>{const Qe=z.get($e),Xe=X.get($e);z.set($e,new Map([...Qe?.entries()??[],...Xe?.entries()??[]]))});const U=[],Fs=[],Uc={};o.forEach($e=>{const{element:Qe,player:Xe,instruction:xt}=$e;if(r.has(Qe)){if(f.has(Qe))return Xe.onDestroy(()=>jo(Qe,xt.toStyles)),Xe.disabled=!0,Xe.overrideTotalTime(xt.totalTime),void i.push(Xe);let pr=Uc;if(N.size>1){let rr=Qe;const On=[];for(;rr=rr.parentNode;){const kn=N.get(rr);if(kn){pr=kn;break}On.push(rr)}On.forEach(kn=>N.set(kn,pr))}const Ls=this._buildAnimation(Xe.namespaceId,xt,j,s,X,z);if(Xe.setRealPlayer(Ls),pr===Uc)U.push(Xe);else{const rr=this.playersByElement.get(pr);rr&&rr.length&&(Xe.parentPlayer=Lc(rr)),i.push(Xe)}}else cl(Qe,xt.fromStyles),Xe.onDestroy(()=>jo(Qe,xt.toStyles)),Fs.push(Xe),f.has(Qe)&&i.push(Xe)}),Fs.forEach($e=>{const Qe=s.get($e.element);if(Qe&&Qe.length){const Xe=Lc(Qe);$e.setRealPlayer(Xe)}}),i.forEach($e=>{$e.parentPlayer?$e.syncPlayerEvents($e.parentPlayer):$e.destroy()});for(let $e=0;$e<x.length;$e++){const Qe=x[$e],Xe=Qe[no];if(Hh(Qe,rI),Xe&&Xe.hasAnimation)continue;let xt=[];if(a.size){let Ls=a.get(Qe);Ls&&Ls.length&&xt.push(...Ls);let rr=this.driver.query(Qe,UD,!0);for(let On=0;On<rr.length;On++){let kn=a.get(rr[On]);kn&&kn.length&&xt.push(...kn)}}const pr=xt.filter(Ls=>!Ls.destroyed);pr.length?gse(this,Qe,pr):this.processLeaveNode(Qe)}return x.length=0,U.forEach($e=>{this.players.push($e),$e.onDone(()=>{$e.destroy();const Qe=this.players.indexOf($e);this.players.splice(Qe,1)}),$e.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==mm;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=gs(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const b=I.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),I.destroy(),m.push(I)})}cl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(b=>{const R=b.element;f.add(R);const x=R[no];if(x&&x.removedBeforeQueried)return new hm(b.duration,b.delay);const H=R!==c,V=function mse(n){const e=[];return kj(n,e),e}((r.get(R)||cse).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===R),W=s.get(R),ne=o.get(R),Ce=dj(this._normalizer,b.keyframes,W,ne),Oe=this._buildPlayer(b,Ce,V);if(b.subTimeline&&i&&m.add(R),H){const j=new JD(e,a,R);j.setRealPlayer(Oe),u.push(j)}return Oe});u.forEach(b=>{gs(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function hse(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),f.forEach(b=>ks(b,yj));const I=Lc(y);return I.onDestroy(()=>{f.forEach(b=>Hh(b,yj)),jo(c,t.toStyles)}),m.forEach(b=>{gs(i,b,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new hm(e.duration,e.delay)}}class JD{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new hm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>ND(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){gs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function pI(n){return n&&1===n.nodeType}function xj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Nj(n,e,t,r,i){const s=[];t.forEach(c=>s.push(xj(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[no]=use,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>xj(c,s[a++])),o}function Oj(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function ks(n,e){n.classList?.add(e)}function Hh(n,e){n.classList?.remove(e)}function gse(n,e,t){Lc(t).onDone(()=>n.processLeaveNode(e))}function kj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof uj?kj(r.players,e):e.push(r)}}function Fj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class gI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new dse(e,t,r),this._timelineEngine=new rse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=HD(this._driver,s,c,[]);if(c.length)throw function sie(n,e){return new P(3404,!1)}();a=function Jie(n,e,t){return new ese(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=hj(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=hj(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let vse=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jo(this._element,this._initialStyles),this._endStyles&&(jo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(cl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cl(this._element,this._endStyles),this._endStyles=null),jo(this._element,this._initialStyles),this._state=3)}}return n})();function eS(n){let e=null;return n.forEach((t,r)=>{(function Ese(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Lj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:wj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ise{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return pj(e,t)}getParentElement(e){return FD(e)}query(e,t,r){return gj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof Lj);(function Sie(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((b,R)=>u.set(R,b))});let m=function Cie(n){return n.length?n[0]instanceof Map?n:n.map(e=>vj(e)):[]}(t).map(I=>Vc(I));m=function Rie(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,wj(n,a)))}}return e}(e,m,u);const y=function yse(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=eS(e[0]),e.length>1&&(r=eS(e[e.length-1]))):e instanceof Map&&(t=eS(e)),t||r?new vse(n,t,r):null}(e,m);return new Lj(e,m,c,y)}}let wse=(()=>{class n extends oj{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Yn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?aj(t):t;return Vj(this._renderer,null,r,"register",[i]),new bse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(he(mp),he(Jn))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class bse extends Lre{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Tse(this._id,e,t||{},this._renderer)}}class Tse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Vj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Vj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Uj="@.disabled";let Cse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new Bj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new Ase(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(he(mp),he(gI),he(Pt))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})();class Bj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Uj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ase extends Bj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Uj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Dse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Sse(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const jj=[{provide:oj,useClass:wse},{provide:KD,useFactory:function Mse(){return new Zie}},{provide:gI,useClass:(()=>{class n extends gI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(he(Jn),he(LD),he(KD),he(Eu))};static#t=this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}return n})()},{provide:mp,useFactory:function Pse(n,e,t){return new Cse(n,e,t)},deps:[XT,gI,Pt]}],tS=[{provide:LD,useFactory:()=>new Ise},{provide:SM,useValue:"BrowserAnimations"},...jj],$j=[{provide:LD,useClass:mj},{provide:SM,useValue:"NoopAnimations"},...jj];let xse=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?$j:tS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=Qt({providers:tS,imports:[kO]})}return n})();const Hj_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class zh{constructor(e){return e}}class nS{constructor(){return(0,tr.getApps)()}}const rS=new Ee("angularfire2._apps"),Ose={provide:zh,useFactory:function Nse(n){return n&&1===n.length?n[0]:new zh((0,tr.getApp)())},deps:[[new br,rS]]},kse={provide:nS,deps:[[new br,rS]]};function Fse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new zh(r)}}let Lse=(()=>{class n{constructor(t){(0,tr.registerVersion)("angularfire",pc.full,"core"),(0,tr.registerVersion)("angularfire",pc.full,"app"),(0,tr.registerVersion)("angular",lb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(he(Ms))};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[Ose,kse]})}return n})();function Vse(n,...e){return{ngModule:Lse,providers:[{provide:rS,useFactory:Fse(n),multi:!0,deps:[Pt,Jr,eh,...e]}]}}const Use=j0(tr.initializeApp,!0);Je(35);class sS{constructor(){return Uv("auth")}}class aS{constructor(e){return e}}const qj="firestore",cS=new Ee("angularfire2.firestore-instances");function qse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new aS(r)}}const Gse={provide:class Hse{constructor(){return Uv(qj)}},deps:[[new br,cS]]},Wse={provide:aS,useFactory:function zse(n,e){const t=B0(qj,n,e);return t&&new aS(t)},deps:[[new br,cS],zh]};let Kse=(()=>{class n{constructor(){(0,tr.registerVersion)("angularfire",pc.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[Wse,Gse]})}return n})();function Zse(n,...e){return{ngModule:Kse,providers:[{provide:cS,useFactory:qse(n),multi:!0,deps:[Pt,Jr,eh,nS,[new br,sS],[new br,dg],...e]}]}}const Qse=j0(ate,!0),Gj="firebasestorage.googleapis.com",Wj="storageBucket";class Qn extends gt.ZR{constructor(e,t,r=0){super(uS(e),`Firebase Storage: ${t} (${uS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hn||{});function uS(n){return"storage/"+n}function lS(){return new Qn(Hn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Kj(){return new Qn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zj(){return new Qn(Hn.CANCELED,"User canceled the upload/download.")}function Qj(){return new Qn(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qh(n){return new Qn(Hn.INVALID_ARGUMENT,n)}function Yj(){return new Qn(Hn.APP_DELETED,"The Firebase app was deleted.")}function Xj(n){return new Qn(Hn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _m(n,e){return new Qn(Hn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ym(n){throw new Qn(Hn.INTERNAL_ERROR,"Internal error: "+n)}class yi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yi.makeFromUrl(e,t)}catch{return new yi(e,"")}if(""===r.path)return r;throw function ooe(n){return new Qn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(ne){ne.path_=decodeURIComponent(ne.path)}const m=t.replace(/[.]/g,"\\."),W=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ne){"/"===ne.path.charAt(ne.path.length-1)&&(ne.path_=ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===Gj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let ne=0;ne<W.length;ne++){const Ce=W[ne],Oe=Ce.regex.exec(e);if(Oe){let N=Oe[Ce.indices.path];N||(N=""),r=new yi(Oe[Ce.indices.bucket],N),Ce.postModify(r);break}}if(null==r)throw function soe(n){return new Qn(Hn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class doe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _I(n){return"string"==typeof n||n instanceof String}function Jj(n){return dS()&&n instanceof Blob}function dS(){return typeof Blob<"u"}function hS(n,e,t,r){if(r<e)throw qh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw qh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Aa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function e$(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Gh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Gh||{});function t$(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class _oe{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,b)=>{this.resolve_=I,this.reject_=b,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function poe(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=lS();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?Yj():Zj():Kj())};this.canceled_?t(0,new yI(!1,null,!0)):this.backoffId_=function hoe(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...x){u||(u=!0,e.apply(null,x))}function m(x){i=setTimeout(()=>{i=null,n(I,c())},x)}function y(){s&&clearTimeout(s)}function I(x,...H){if(u)return void y();if(x)return y(),void f.call(null,x,...H);if(c()||o)return y(),void f.call(null,x,...H);let W;r<64&&(r*=2),1===a?(a=2,W=0):W=1e3*(r+Math.random()),m(W)}let b=!1;function R(x){b||(b=!0,y(),!u&&(null!==i?(x||(a=2),clearTimeout(i),m(0)):x||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new yI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Gh.NO_ERROR,c=s.getStatus();if(!a||t$(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Gh.ABORT;return void r(!1,new yI(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new yI(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function foe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class yI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Toe(...n){const e=function boe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(dS())return new Blob(n);throw new Qn(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const _s={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fS{constructor(e,t){this.data=e,this.contentType=t||null}}function pS(n,e){switch(n){case _s.RAW:return new fS(n$(e));case _s.BASE64:case _s.BASE64URL:return new fS(r$(n,e));case _s.DATA_URL:return new fS(function Soe(n){const e=new i$(n);return e.base64?r$(_s.BASE64,e.rest):function Doe(n){let e;try{e=decodeURIComponent(n)}catch{throw _m(_s.DATA_URL,"Malformed data URL.")}return n$(e)}(e.rest)}(e),function Roe(n){return new i$(n).contentType}(e))}throw lS()}function n$(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function r$(n,e){switch(n){case _s.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw _m(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _s.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw _m(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Aoe(n){if(typeof atob>"u")throw function loe(n){return new Qn(Hn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:_m(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class i${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw _m(_s.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Moe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $o{constructor(e,t){let r=0,i="";Jj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jj(this.data_)){const i=function Coe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new $o(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $o(r,!0)}}static getBlob(...e){if(dS()){const t=e.map(r=>r instanceof $o?r.data_:r);return new $o(Toe.apply(null,t))}{const t=e.map(o=>_I(o)?pS(_s.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $o(i,!0)}}uploadData(){return this.data_}}function gS(n){let e;try{e=JSON.parse(n)}catch{return null}return function moe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function s$(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Noe(n,e){return e}class Fi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Noe}}let vI=null;function vm(){if(vI)return vI;const n=[];n.push(new Fi("bucket")),n.push(new Fi("generation")),n.push(new Fi("metageneration")),n.push(new Fi("name","fullPath",!0));const t=new Fi("name");t.xform=function e(s,o){return function Ooe(n){return!_I(n)||n.length<2?n:s$(n)}(o)},n.push(t);const i=new Fi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Fi("timeCreated")),n.push(new Fi("updated")),n.push(new Fi("md5Hash",null,!0)),n.push(new Fi("cacheControl",null,!0)),n.push(new Fi("contentDisposition",null,!0)),n.push(new Fi("contentEncoding",null,!0)),n.push(new Fi("contentLanguage",null,!0)),n.push(new Fi("contentType",null,!0)),n.push(new Fi("metadata","customMetadata",!0)),vI=n,vI}function o$(n,e,t){const r=gS(e);return null===r?null:function Foe(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function koe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new yi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function mS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const a$="prefixes",c$="items";class Ho{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zo(n){if(!n)throw lS()}function EI(n,e){return function t(r,i){const s=o$(n,i,e);return zo(null!==s),s}}function Wh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function roe(){return new Qn(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function noe(){return new Qn(Hn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function toe(n){return new Qn(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function ioe(n){return new Qn(Hn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Em(n){const e=Wh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function eoe(n){return new Qn(Hn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function u$(n,e,t){const i=Aa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Ho(i,"GET",EI(n,t),o);return a.errorHandler=Em(e),a}function $oe(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Aa(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Ho(a,"GET",function Boe(n,e){return function t(r,i){const s=function Uoe(n,e,t){const r=gS(t);return null===r?null:function Voe(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[a$])for(const i of t[a$]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new yi(e,s));r.prefixes.push(o)}if(t[c$])for(const i of t[c$]){const s=n._makeStorageReference(new yi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return zo(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=Wh(e),f}function d$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Goe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class II{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function _S(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{zo(!1)}return zo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Qoe={STATE_CHANGED:"state_changed"},Li={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yS(n){switch(n){case"running":case"pausing":case"canceling":return Li.RUNNING;case"paused":return Li.PAUSED;case"success":return Li.SUCCESS;case"canceled":return Li.CANCELED;default:return Li.ERROR}}class Yoe{constructor(e,t,r){if(function goe(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Kh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let p$=null;class Xoe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ym("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ym("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ym("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ym("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ym("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Joe extends Xoe{initXhr(){this.xhr_.responseType="text"}}function ro(){return p$?p$():new Joe}class g${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=vm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(t$(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Kj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Hn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Woe(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=d$(e,r,i),a={name:o.fullPath},c=Aa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=mS(o,t),b=new Ho(c,"POST",function I(R){let x;_S(R);try{x=R.getResponseHeader("X-Goog-Upload-URL")}catch{zo(!1)}return zo(_I(x)),x},n.maxUploadRetryTime);return b.urlParams=a,b.headers=f,b.body=m,b.errorHandler=Wh(e),b}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Koe(n,e,t,r){const c=new Ho(t,"POST",function s(u){const f=_S(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{zo(!1)}m||zo(!1);const y=Number(m);return zo(!isNaN(y)),new II(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Wh(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ro,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new II(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Zoe(n,e,t,r,i,s,o,a){const c=new II(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function coe(){return new Qn(Hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const b={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(m,m+f);if(null===R)throw Qj();const W=new Ho(t,"POST",function x(ne,Ce){const Oe=_S(ne,["active","final"]),j=c.current+f,N=r.size();let L;return L="final"===Oe?EI(e,s)(ne,Ce):null,new II(j,N,"final"===Oe,L)},e.maxUploadRetryTime);return W.headers=b,W.body=R.uploadData(),W.progressCallback=a||null,W.errorHandler=Wh(n),W}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,ro,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=u$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function h$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let W="";for(let ne=0;ne<2;ne++)W+=Math.random().toString().slice(2);return W}();o["Content-Type"]="multipart/related; boundary="+c;const u=d$(e,r,i),f=mS(u,t),I=$o.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw Qj();const b={name:u.fullPath},R=Aa(s,n.host,n._protocol),H=n.maxUploadRetryTime,V=new Ho(R,"POST",EI(n,t),H);return V.urlParams=b,V.headers=o,V.body=I.uploadData(),V.errorHandler=Wh(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ro,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Zj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Yoe(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yS(this._state)){case Li.SUCCESS:Kh(this._resolve.bind(null,this.snapshot))();break;case Li.CANCELED:case Li.ERROR:Kh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yS(this._state)){case Li.RUNNING:case Li.PAUSED:e.next&&Kh(e.next.bind(e,this.snapshot))();break;case Li.SUCCESS:e.complete&&Kh(e.complete.bind(e))();break;default:e.error&&Kh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ll{constructor(e,t){this._service=e,this._location=t instanceof yi?t:yi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ll(e,t)}get root(){const e=new yi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s$(this._location.path)}get storage(){return this._service}get parent(){const e=function Poe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new yi(this._location.bucket,e);return new ll(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Xj(e)}}function _$(n,e,t){return vS.apply(this,arguments)}function vS(){return(vS=(0,ue.Z)(function*(n,e,t){const i=yield y$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield _$(n,e,i.nextPageToken))})).apply(this,arguments)}function y$(n,e){null!=e&&"number"==typeof e.maxResults&&hS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=$oe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ro)}function dae(n){n._throwIfRoot("getDownloadURL");const e=function Hoe(n,e,t){const i=Aa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Ho(i,"GET",function joe(n,e){return function t(r,i){const s=o$(n,i,e);return zo(null!==s),function Loe(n,e,t,r){const i=gS(e);if(null===i||!_I(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return Aa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+e$({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Em(e),a}(n.storage,n._location,vm());return n.storage.makeRequestWithTokens(e,ro).then(t=>{if(null===t)throw function uoe(){return new Qn(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function v$(n,e){const t=function xoe(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new yi(n._location.bucket,t);return new ll(n.storage,r)}function E$(n,e){if(n instanceof ES){const t=n;if(null==t._bucket)throw function aoe(){return new Qn(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wj+"' property when initializing the app?")}();const r=new ll(t,t._bucket);return null!=e?E$(r,e):r}return void 0!==e?v$(n,e):n}function gae(n,e){if(e&&function fae(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ES)return function pae(n,e){return new ll(n,e)}(n,e);throw qh("To use ref(service, url), the first argument must be a Storage instance.")}return E$(n,e)}function I$(n,e){const t=e?.[Wj];return null==t?null:yi.makeFromBucketSpec(t,n)}class ES{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?yi.makeFromBucketSpec(i,this._host):I$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?yi.makeFromBucketSpec(this._url,e):I$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ue.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ue.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ll(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new doe(Yj());{const o=function woe(n,e,t,r,i,s,o=!0){const a=e$(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function Eoe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function yoe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function voe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function Ioe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new _oe(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ue.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const w$="@firebase/storage",T$="storage";function C$(n,e){return gae(n=(0,gt.m9)(n),e)}function Cae(n=(0,tr.getApp)(),e){n=(0,gt.m9)(n);const r=(0,tr._getProvider)(n,T$).getImmediate({identifier:e}),i=(0,gt.P0)("storage");return i&&A$(r,...i),r}function A$(n,e,t,r={}){!function mae(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Aae(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ES(t,r,i,e,tr.SDK_VERSION)}!function Dae(){(0,tr._registerComponent)(new jv.wA(T$,Aae,"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(w$,"0.12.5",""),(0,tr.registerVersion)(w$,"0.12.5","esm2017")}();class wI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class D${constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new wI(o,this,this._ref)):{next:t.next?o=>t.next(new wI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class S${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Da(e,this._service))}get items(){return this._delegate.items.map(e=>new Da(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Da{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Tae(n,e){return v$(n,e)}(this._delegate,e);return new Da(t,this.storage)}get root(){return new Da(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Da(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new D$(function _ae(n,e,t){return function oae(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new g$(n,new $o(e),t)}(n=(0,gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=_s.RAW,r){this._throwIfRoot("putString");const i=pS(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new D$(new g$(this._delegate,new $o(i.data,!0),s),this)}listAll(){return function Iae(n){return function cae(n){const e={prefixes:[],items:[]};return _$(n,e).then(()=>e)}(n=(0,gt.m9)(n))}(this._delegate).then(e=>new S$(e,this.storage))}list(e){return function Eae(n,e){return y$(n=(0,gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new S$(t,this.storage))}getMetadata(){return function yae(n){return function uae(n){n._throwIfRoot("getMetadata");const e=u$(n.storage,n._location,vm());return n.storage.makeRequestWithTokens(e,ro)}(n=(0,gt.m9)(n))}(this._delegate)}updateMetadata(e){return function vae(n,e){return function lae(n,e){n._throwIfRoot("updateMetadata");const t=function zoe(n,e,t,r){const s=Aa(e.fullServerUrl(),n.host,n._protocol),a=mS(t,r),u=n.maxOperationRetryTime,f=new Ho(s,"PATCH",EI(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Em(e),f}(n.storage,n._location,e,vm());return n.storage.makeRequestWithTokens(t,ro)}(n=(0,gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function wae(n){return dae(n=(0,gt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function bae(n){return function hae(n){n._throwIfRoot("deleteObject");const e=function qoe(n,e){const r=Aa(e.fullServerUrl(),n.host,n._protocol),a=new Ho(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Em(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ro)}(n=(0,gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Xj(e)}}class R${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(M$(e))throw qh("ref() expected a child path but got a URL, use refFromURL instead.");return new Da(C$(this._delegate,e),this)}refFromURL(e){if(!M$(e))throw qh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yi.makeFromUrl(e,this._delegate.host)}catch{throw qh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Da(C$(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){A$(this._delegate,e,t,r)}}function M$(n){return/^[A-Za-z]+:\/\//.test(n)}function Pae(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new R$(t,r)}function P$(n){const e=function Nae(n){return new ht(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(YO(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Me(t=>t.bytesTransferred/t.totalBytes*100))}}function bI(n){return{getDownloadURL:()=>k(void 0).pipe(BF,Be(()=>n.getDownloadURL()),xi),getMetadata:()=>k(void 0).pipe(BF,Be(()=>n.getMetadata()),xi),delete:()=>T(n.delete()),child:e=>bI(n.child(e)),updateMetadata:e=>T(n.updateMetadata(e)),put:(e,t)=>P$(n.put(e,t)),putString:(e,t,r)=>P$(n.putString(e,t,r)),list:e=>T(n.list(e)),listAll:()=>T(n.listAll())}}!function xae(n){const e={TaskState:Li,TaskEvent:Qoe,StringFormat:_s,Storage:R$,Reference:Da};n.INTERNAL.registerComponent(new jv.wA("storage-compat",Pae,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Po.Z);const Oae=new Ee("angularfire2.storageBucket"),kae=new Ee("angularfire2.storage.maxUploadRetryTime"),Fae=new Ee("angularfire2.storage.maxOperationRetryTime"),Lae=new Ee("angularfire2.storage.use-emulator");let Vae=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=Bv(t,o,r);this.storage=$0(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),b=f;return b&&I.useEmulator(...b),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return bI(this.storage.ref(t))}refFromURL(t){return bI(this.storage.refFromURL(t))}upload(t,r,i){return bI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(he(hg),he(fg,8),he(Oae,8),he(Ms),he(Pt),he(eh),he(kae,8),he(Fae,8),he(Lae,8),he(dg,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Uae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=Qt({})}return n})(),Bae=(()=>{class n{constructor(){Po.Z.registerVersion("angularfire",pc.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[Vae],imports:[Uae]})}return n})();class IS{constructor(e){return e}}const x$="storage",wS=new Ee("angularfire2.storage-instances");function Hae(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new IS(r)}}const zae={provide:class jae{constructor(){return Uv(x$)}},deps:[[new br,wS]]},qae={provide:IS,useFactory:function $ae(n,e){const t=B0(x$,n,e);return t&&new IS(t)},deps:[[new br,wS],zh]};let Gae=(()=>{class n{constructor(){(0,tr.registerVersion)("angularfire",pc.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=Qt({providers:[qae,zae]})}return n})();function Wae(n,...e){return{ngModule:Gae,providers:[{provide:wS,useFactory:Hae(n),multi:!0,deps:[Pt,Jr,eh,nS,[new br,sS],[new br,dg],...e]}]}}const Kae=j0(Cae,!0);let Zae=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n,bootstrap:[Fre]});static#n=this.\u0275inj=Qt({imports:[kO,Pre,xse,b7,nZ,sZ,Ine,Bae,qY.initializeApp(Hj_firebase),Vse(()=>Use(Hj_firebase)),Zse(()=>Qse()),Wae(()=>Kae()),fre,hre]})}return n})();yK().bootstrapModule(Zae).catch(n=>console.error(n))},106:(vs,or,Je)=>{Je.d(or,{Z:()=>ar});var M=Je(58),Ae=Je(537),O=Je(534),He=Je(879);class Lt{constructor(it,st){this._delegate=it,this.firebase=st,(0,O._addComponent)(it,new Ae.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(it,st=O._DEFAULT_ENTRY_NAME){var gr;this._delegate.checkDestroyed();const An=this._delegate.container.getProvider(it);return!An.isInitialized()&&"EXPLICIT"===(null===(gr=An.getComponent())||void 0===gr?void 0:gr.instantiationMode)&&An.initialize(),An.getImmediate({identifier:st})}_removeServiceInstance(it,st=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(st)}_addComponent(it){(0,O._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,O._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const zn=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Nt(){const Ct=function on(Ct){const it={},st={__esModule:!0,initializeApp:function Et(dt,Ln={}){const me=O.initializeApp(dt,Ln);if((0,M.r3)(it,me.name))return it[me.name];const hn=new Ct(me,st);return it[me.name]=hn,hn},app:An,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ii(dt){const Ln=dt.name,me=Ln.replace("-compat","");if(O._registerComponent(dt)&&"PUBLIC"===dt.type){const hn=(Jt=An())=>{if("function"!=typeof Jt[me])throw zn.create("invalid-app-argument",{appName:Ln});return Jt[me]()};void 0!==dt.serviceProps&&(0,M.ZB)(hn,dt.serviceProps),st[me]=hn,Ct.prototype[me]=function(...Jt){return this._getService.bind(this,Ln).apply(this,dt.multipleInstances?Jt:[])}}return"PUBLIC"===dt.type?st[me]:null},removeApp:function gr(dt){delete it[dt]},useAsService:function Bt(dt,Ln){return"serverAuth"===Ln?null:Ln},modularAPIs:O}};function An(dt){if(!(0,M.r3)(it,dt=dt||O._DEFAULT_ENTRY_NAME))throw zn.create("no-app",{appName:dt});return it[dt]}return st.default=st,Object.defineProperty(st,"apps",{get:function $t(){return Object.keys(it).map(dt=>it[dt])}}),An.App=Ct,st}(Lt);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:Nt,extendNamespace:function it(st){(0,M.ZB)(Ct,st)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),Ct}(),Te=new He.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){Te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&Te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ar=fe;!function Vt(Ct){(0,O.registerVersion)("@firebase/app-compat","0.2.35",Ct)}()},534:(vs,or,Je)=>{Je.r(or),Je.d(or,{FirebaseError:()=>He.ZR,SDK_VERSION:()=>Vr,_DEFAULT_ENTRY_NAME:()=>Ti,_addComponent:()=>Gr,_addOrOverwriteComponent:()=>an,_apps:()=>zr,_clearComponents:()=>$i,_components:()=>Sn,_getProvider:()=>qn,_isFirebaseApp:()=>js,_isFirebaseServerApp:()=>tn,_registerComponent:()=>Lr,_removeServiceInstance:()=>oo,_serverApps:()=>qr,deleteApp:()=>zs,getApp:()=>co,getApps:()=>uo,initializeApp:()=>Hs,initializeServerApp:()=>ao,onLog:()=>T,registerVersion:()=>F,setLogLevel:()=>S});var M=Je(861),Ae=Je(537),O=Je(879),He=Je(58);const Lt=(P,G)=>G.some(Q=>P instanceof Q);let Cn,zn;const fe=new WeakMap,Te=new WeakMap,ze=new WeakMap,lt=new WeakMap,Vt=new WeakMap;let it={get(P,G,Q){if(P instanceof IDBTransaction){if("done"===G)return Te.get(P);if("objectStoreNames"===G)return P.objectStoreNames||ze.get(P);if("store"===G)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Et(P[G])},set:(P,G,Q)=>(P[G]=Q,!0),has:(P,G)=>P instanceof IDBTransaction&&("done"===G||"store"===G)||G in P};function An(P){return"function"==typeof P?function gr(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Nt(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...G){return P.apply($t(this),G),Et(fe.get(this))}:function(...G){return Et(P.apply($t(this),G))}:function(G,...Q){const we=P.call($t(this),G,...Q);return ze.set(we,G.sort?G.sort():[G]),Et(we)}}(P):(P instanceof IDBTransaction&&function Ct(P){if(Te.has(P))return;const G=new Promise((Q,we)=>{const ot=()=>{P.removeEventListener("complete",ft),P.removeEventListener("error",yt),P.removeEventListener("abort",yt)},ft=()=>{Q(),ot()},yt=()=>{we(P.error||new DOMException("AbortError","AbortError")),ot()};P.addEventListener("complete",ft),P.addEventListener("error",yt),P.addEventListener("abort",yt)});Te.set(P,G)}(P),Lt(P,function on(){return Cn||(Cn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,it):P)}function Et(P){if(P instanceof IDBRequest)return function ar(P){const G=new Promise((Q,we)=>{const ot=()=>{P.removeEventListener("success",ft),P.removeEventListener("error",yt)},ft=()=>{Q(Et(P.result)),ot()},yt=()=>{we(P.error),ot()};P.addEventListener("success",ft),P.addEventListener("error",yt)});return G.then(Q=>{Q instanceof IDBCursor&&fe.set(Q,P)}).catch(()=>{}),Vt.set(G,P),G}(P);if(lt.has(P))return lt.get(P);const G=An(P);return G!==P&&(lt.set(P,G),Vt.set(G,P)),G}const $t=P=>Vt.get(P),dt=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],me=new Map;function hn(P,G){if(!(P instanceof IDBDatabase)||G in P||"string"!=typeof G)return;if(me.get(G))return me.get(G);const Q=G.replace(/FromIndex$/,""),we=G!==Q,ot=Ln.includes(Q);if(!(Q in(we?IDBIndex:IDBObjectStore).prototype)||!ot&&!dt.includes(Q))return;const ft=function(){var yt=(0,M.Z)(function*(Zt,...At){const Hi=this.transaction(Zt,ot?"readwrite":"readonly");let Wo=Hi.store;return we&&(Wo=Wo.index(At.shift())),(yield Promise.all([Wo[Q](...At),ot&&Hi.done]))[0]});return function(At){return yt.apply(this,arguments)}}();return me.set(G,ft),ft}!function st(P){it=P(it)}(P=>({...P,get:(G,Q,we)=>hn(G,Q)||P.get(G,Q,we),has:(G,Q)=>!!hn(G,Q)||P.has(G,Q)}));class Jt{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function Dn(P){const G=P.getComponent();return"VERSION"===G?.type}(Q)){const we=Q.getImmediate();return`${we.library}/${we.version}`}return null}).filter(Q=>Q).join(" ")}}const wi="@firebase/app",bi="0.10.5",ht=new O.Yd("@firebase/app"),Ti="[DEFAULT]",is={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},zr=new Map,qr=new Map,Sn=new Map;function Gr(P,G){try{P.container.addComponent(G)}catch(Q){ht.debug(`Component ${G.name} failed to register with FirebaseApp ${P.name}`,Q)}}function an(P,G){P.container.addOrOverwriteComponent(G)}function Lr(P){const G=P.name;if(Sn.has(G))return ht.debug(`There were multiple attempts to register component ${G}.`),!1;Sn.set(G,P);for(const Q of zr.values())Gr(Q,P);for(const Q of qr.values())Gr(Q,P);return!0}function qn(P,G){const Q=P.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),P.container.getProvider(G)}function oo(P,G,Q=Ti){qn(P,G).clearInstance(Q)}function js(P){return void 0!==P.options}function tn(P){return void 0!==P.settings}function $i(){Sn.clear()}const Gn=new He.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mr{constructor(G,Q,we){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=we,this.container.addComponent(new Ae.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}class Rn extends mr{constructor(G,Q,we,ot){const ft=void 0!==Q.automaticDataCollectionEnabled&&Q.automaticDataCollectionEnabled,yt={name:we,automaticDataCollectionEnabled:ft};super(void 0!==G.apiKey?G:G.options,yt,ot),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ft},Q),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Q.releaseOnDeref=void 0,F(wi,bi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(G){this.isDeleted||(this._refCount++,void 0!==G&&this._finalizationRegistry.register(G,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){zs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Gn.create("server-app-deleted")}}const Vr="10.12.2";function Hs(P,G={}){let Q=P;"object"!=typeof G&&(G={name:G});const we=Object.assign({name:Ti,automaticDataCollectionEnabled:!1},G),ot=we.name;if("string"!=typeof ot||!ot)throw Gn.create("bad-app-name",{appName:String(ot)});if(Q||(Q=(0,He.aH)()),!Q)throw Gn.create("no-options");const ft=zr.get(ot);if(ft){if((0,He.vZ)(Q,ft.options)&&(0,He.vZ)(we,ft.config))return ft;throw Gn.create("duplicate-app",{appName:ot})}const yt=new Ae.H0(ot);for(const At of Sn.values())yt.addComponent(At);const Zt=new mr(Q,we,yt);return zr.set(ot,Zt),Zt}function ao(P,G){if((0,He.jU)())throw Gn.create("invalid-server-app-environment");let Q;void 0===G.automaticDataCollectionEnabled&&(G.automaticDataCollectionEnabled=!1),Q=js(P)?P.options:P;const we=Object.assign(Object.assign({},G),Q);if(void 0!==we.releaseOnDeref&&delete we.releaseOnDeref,void 0!==G.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Gn.create("finalization-registry-not-supported",{});const ft=""+(Hi=JSON.stringify(we),[...Hi].reduce((Wo,_n)=>Math.imul(31,Wo)+_n.charCodeAt(0)|0,0)),yt=qr.get(ft);var Hi;if(yt)return yt.incRefCount(G.releaseOnDeref),yt;const Zt=new Ae.H0(ft);for(const Hi of Sn.values())Zt.addComponent(Hi);const At=new Rn(Q,G,ft,Zt);return qr.set(ft,At),At}function co(P=Ti){const G=zr.get(P);if(!G&&P===Ti&&(0,He.aH)())return Hs();if(!G)throw Gn.create("no-app",{appName:P});return G}function uo(){return Array.from(zr.values())}function zs(P){return B.apply(this,arguments)}function B(){return(B=(0,M.Z)(function*(P){let G=!1;const Q=P.name;zr.has(Q)?(G=!0,zr.delete(Q)):qr.has(Q)&&P.decRefCount()<=0&&(qr.delete(Q),G=!0),G&&(yield Promise.all(P.container.getProviders().map(we=>we.delete())),P.isDeleted=!0)})).apply(this,arguments)}function F(P,G,Q){var we;let ot=null!==(we=is[P])&&void 0!==we?we:P;Q&&(ot+=`-${Q}`);const ft=ot.match(/\s|\//),yt=G.match(/\s|\//);if(ft||yt){const Zt=[`Unable to register library "${ot}" with version "${G}":`];return ft&&Zt.push(`library name "${ot}" contains illegal characters (whitespace or "/")`),ft&&yt&&Zt.push("and"),yt&&Zt.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void ht.warn(Zt.join(" "))}Lr(new Ae.wA(`${ot}-version`,()=>({library:ot,version:G}),"VERSION"))}function T(P,G){if(null!==P&&"function"!=typeof P)throw Gn.create("invalid-log-argument");(0,O.Am)(P,G)}function S(P){(0,O.Ub)(P)}const w="firebase-heartbeat-database",k=1,de="firebase-heartbeat-store";let Pe=null;function Be(){return Pe||(Pe=function ii(P,G,{blocked:Q,upgrade:we,blocking:ot,terminated:ft}={}){const yt=indexedDB.open(P,G),Zt=Et(yt);return we&&yt.addEventListener("upgradeneeded",At=>{we(Et(yt.result),At.oldVersion,At.newVersion,Et(yt.transaction),At)}),Q&&yt.addEventListener("blocked",At=>Q(At.oldVersion,At.newVersion,At)),Zt.then(At=>{ft&&At.addEventListener("close",()=>ft()),ot&&At.addEventListener("versionchange",Hi=>ot(Hi.oldVersion,Hi.newVersion,Hi))}).catch(()=>{}),Zt}(w,k,{upgrade:(P,G)=>{if(0===G)try{P.createObjectStore(de)}catch(Q){console.warn(Q)}}}).catch(P=>{throw Gn.create("idb-open",{originalErrorMessage:P.message})})),Pe}function Mt(){return(Mt=(0,M.Z)(function*(P){try{const Q=(yield Be()).transaction(de),we=yield Q.objectStore(de).get(Ge(P));return yield Q.done,we}catch(G){if(G instanceof He.ZR)ht.warn(G.message);else{const Q=Gn.create("idb-get",{originalErrorMessage:G?.message});ht.warn(Q.message)}}})).apply(this,arguments)}function xe(P,G){return zt.apply(this,arguments)}function zt(){return(zt=(0,M.Z)(function*(P,G){try{const we=(yield Be()).transaction(de,"readwrite");yield we.objectStore(de).put(G,Ge(P)),yield we.done}catch(Q){if(Q instanceof He.ZR)ht.warn(Q.message);else{const we=Gn.create("idb-set",{originalErrorMessage:Q?.message});ht.warn(we.message)}}})).apply(this,arguments)}function Ge(P){return`${P.name}!${P.options.appId}`}class Gt{constructor(G){this.container=G,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Na(Q),this._heartbeatsCachePromise=this._storage.read().then(we=>(this._heartbeatsCache=we,we))}triggerHeartbeat(){var G=this;return(0,M.Z)(function*(){var Q,we;const ft=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=et();if((null!=(null===(Q=G._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||(G._heartbeatsCache=yield G._heartbeatsCachePromise,null!=(null===(we=G._heartbeatsCache)||void 0===we?void 0:we.heartbeats)))&&G._heartbeatsCache.lastSentHeartbeatDate!==yt&&!G._heartbeatsCache.heartbeats.some(Zt=>Zt.date===yt))return G._heartbeatsCache.heartbeats.push({date:yt,agent:ft}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(Zt=>{const At=new Date(Zt.date).valueOf();return Date.now()-At<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,M.Z)(function*(){var Q;if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null==(null===(Q=G._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||0===G._heartbeatsCache.heartbeats.length)return"";const we=et(),{heartbeatsToSend:ot,unsentEntries:ft}=function xa(P,G=1024){const Q=[];let we=P.slice();for(const ot of P){const ft=Q.find(yt=>yt.agent===ot.agent);if(ft){if(ft.dates.push(ot.date),Go(Q)>G){ft.dates.pop();break}}else if(Q.push({agent:ot.agent,dates:[ot.date]}),Go(Q)>G){Q.pop();break}we=we.slice(1)}return{heartbeatsToSend:Q,unsentEntries:we}}(G._heartbeatsCache.heartbeats),yt=(0,He.L)(JSON.stringify({version:2,heartbeats:ot}));return G._heartbeatsCache.lastSentHeartbeatDate=we,ft.length>0?(G._heartbeatsCache.heartbeats=ft,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),yt})()}}function et(){return(new Date).toISOString().substring(0,10)}class Na{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,He.hl)()&&(0,He.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,M.Z)(function*(){if(yield G._canUseIndexedDBPromise){const we=yield function rt(P){return Mt.apply(this,arguments)}(G.app);return we?.heartbeats?we:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(G){var Q=this;return(0,M.Z)(function*(){var we;if(yield Q._canUseIndexedDBPromise){const ft=yield Q.read();return xe(Q.app,{lastSentHeartbeatDate:null!==(we=G.lastSentHeartbeatDate)&&void 0!==we?we:ft.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var Q=this;return(0,M.Z)(function*(){var we;if(yield Q._canUseIndexedDBPromise){const ft=yield Q.read();return xe(Q.app,{lastSentHeartbeatDate:null!==(we=G.lastSentHeartbeatDate)&&void 0!==we?we:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...G.heartbeats]})}})()}}function Go(P){return(0,He.L)(JSON.stringify({version:2,heartbeats:P})).length}!function gl(P){Lr(new Ae.wA("platform-logger",G=>new Jt(G),"PRIVATE")),Lr(new Ae.wA("heartbeat",G=>new Gt(G),"PRIVATE")),F(wi,bi,P),F(wi,bi,"esm2017"),F("fire-js","")}("")},537:(vs,or,Je)=>{Je.d(or,{H0:()=>on,wA:()=>O});var M=Je(861),Ae=Je(58);class O{constructor(fe,Te,ze){this.name=fe,this.instanceFactory=Te,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const He="[DEFAULT]";class Lt{constructor(fe,Te){this.name=fe,this.container=Te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const Te=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(Te)){const ze=new Ae.BH;if(this.instancesDeferred.set(Te,ze),this.isInitialized(Te)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:Te});lt&&ze.resolve(lt)}catch{}}return this.instancesDeferred.get(Te).promise}getImmediate(fe){var Te;const ze=this.normalizeInstanceIdentifier(fe?.identifier),lt=null!==(Te=fe?.optional)&&void 0!==Te&&Te;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(Vt){if(lt)return null;throw Vt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function zn(Nt){return"EAGER"===Nt.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:He})}catch{}for(const[Te,ze]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(Te);try{const Vt=this.getOrInitializeService({instanceIdentifier:lt});ze.resolve(Vt)}catch{}}}}clearInstance(fe=He){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,M.Z)(function*(){const Te=Array.from(fe.instances.values());yield Promise.all([...Te.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),...Te.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=He){return this.instances.has(fe)}getOptions(fe=He){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:Te={}}=fe,ze=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:ze,options:Te});for(const[Vt,ar]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(Vt)&&ar.resolve(lt);return lt}onInit(fe,Te){var ze;const lt=this.normalizeInstanceIdentifier(Te),Vt=null!==(ze=this.onInitCallbacks.get(lt))&&void 0!==ze?ze:new Set;Vt.add(fe),this.onInitCallbacks.set(lt,Vt);const ar=this.instances.get(lt);return ar&&fe(ar,lt),()=>{Vt.delete(fe)}}invokeOnInitCallbacks(fe,Te){const ze=this.onInitCallbacks.get(Te);if(ze)for(const lt of ze)try{lt(fe,Te)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:Te={}}){let ze=this.instances.get(fe);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(Nt=fe,Nt===He?void 0:Nt),options:Te}),this.instances.set(fe,ze),this.instancesOptions.set(fe,Te),this.invokeOnInitCallbacks(ze,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,ze)}catch{}var Nt;return ze||null}normalizeInstanceIdentifier(fe=He){return this.component?this.component.multipleInstances?fe:He:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class on{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const Te=this.getProvider(fe.name);if(Te.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);Te.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const Te=new Lt(fe,this);return this.providers.set(fe,Te),Te}getProviders(){return Array.from(this.providers.values())}}},879:(vs,or,Je)=>{Je.d(or,{Am:()=>Nt,Ub:()=>on,Yd:()=>zn,in:()=>Ae});const M=[];var Ae=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(Ae||{});const O={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},He=Ae.INFO,Lt={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},Cn=(fe,Te,...ze)=>{if(Te<fe.logLevel)return;const lt=(new Date).toISOString(),Vt=Lt[Te];if(!Vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Te})`);console[Vt](`[${lt}]  ${fe.name}:`,...ze)};class zn{constructor(Te){this.name=Te,this._logLevel=He,this._logHandler=Cn,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(Te){if(!(Te in Ae))throw new TypeError(`Invalid value "${Te}" assigned to \`logLevel\``);this._logLevel=Te}setLogLevel(Te){this._logLevel="string"==typeof Te?O[Te]:Te}get logHandler(){return this._logHandler}set logHandler(Te){if("function"!=typeof Te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Te}get userLogHandler(){return this._userLogHandler}set userLogHandler(Te){this._userLogHandler=Te}debug(...Te){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...Te),this._logHandler(this,Ae.DEBUG,...Te)}log(...Te){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...Te),this._logHandler(this,Ae.VERBOSE,...Te)}info(...Te){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...Te),this._logHandler(this,Ae.INFO,...Te)}warn(...Te){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...Te),this._logHandler(this,Ae.WARN,...Te)}error(...Te){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...Te),this._logHandler(this,Ae.ERROR,...Te)}}function on(fe){M.forEach(Te=>{Te.setLogLevel(fe)})}function Nt(fe,Te){for(const ze of M){let lt=null;Te&&Te.level&&(lt=O[Te.level]),ze.userLogHandler=null===fe?null:(Vt,ar,...Ct)=>{const it=Ct.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");ar>=(lt??Vt.logLevel)&&fe({level:Ae[ar].toLowerCase(),message:it,args:Ct,type:Vt.name})}}}},365:(vs,or,Je)=>{Je.r(or);var M=Je(861),Ae=Je(106),O=Je(35),He=Je(58),zn=(Je(534),Je(879),Je(537));function on(){return window}function Te(){return Te=(0,M.Z)(function*(T,S,w){var k;const{BuildInfo:de}=on();(0,O.au)(S.sessionId,"AuthEvent did not contain a session ID");const Pe=yield function st(T){return gr.apply(this,arguments)}(S.sessionId),Be={};return(0,O.av)()?Be.ibi=de.packageName:(0,O.aw)()?Be.apn=de.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),de.displayName&&(Be.appDisplayName=de.displayName),Be.sessionId=Pe,(0,O.ay)(T,w,S.type,void 0,null!==(k=S.eventId)&&void 0!==k?k:void 0,Be)}),Te.apply(this,arguments)}function lt(){return(lt=(0,M.Z)(function*(T){const{BuildInfo:S}=on(),w={};(0,O.av)()?w.iosBundleId=S.packageName:(0,O.aw)()?w.androidPackageName=S.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),yield(0,O.az)(T,w)})).apply(this,arguments)}function Ct(){return(Ct=(0,M.Z)(function*(T,S,w){const{cordova:k}=on();let de=()=>{};try{yield new Promise((Pe,Be)=>{let rt=null;function Mt(){var Ge;Pe();const _r=null===(Ge=k.plugins.browsertab)||void 0===Ge?void 0:Ge.close;"function"==typeof _r&&_r(),"function"==typeof w?.close&&w.close()}function xe(){rt||(rt=window.setTimeout(()=>{Be((0,O.aB)(T,"redirect-cancelled-by-user"))},2e3))}function zt(){"visible"===document?.visibilityState&&xe()}S.addPassiveListener(Mt),document.addEventListener("resume",xe,!1),(0,O.aw)()&&document.addEventListener("visibilitychange",zt,!1),de=()=>{S.removePassiveListener(Mt),document.removeEventListener("resume",xe,!1),document.removeEventListener("visibilitychange",zt,!1),rt&&window.clearTimeout(rt)}})}finally{de()}})).apply(this,arguments)}function gr(){return(gr=(0,M.Z)(function*(T){const S=function An(T){if((0,O.au)(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const S=new ArrayBuffer(T.length),w=new Uint8Array(S);for(let k=0;k<T.length;k++)w[k]=T.charCodeAt(k);return w}(T),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class $t extends O.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function dt(T){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,M.Z)(function*(T){const S=yield Jt()._get(Dn(T));return S&&(yield Jt()._remove(Dn(T))),S})).apply(this,arguments)}function hn(){const T=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());T.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return T.join("")}function Jt(){return(0,O.aE)(O.b)}function Dn(T){return(0,O.aF)("authEvent",T.config.apiKey,T.name)}function ht(T){if(!T?.includes("?"))return{};const[S,...w]=T.split("?");return(0,He.zd)(w.join("?"))}const te=class Bi{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const k=S._key();let de=w.eventManagers.get(k);return de||(de=new $t(S),w.eventManagers.set(k,de),w.attachCallbackListeners(S,de)),de})()}_openPopup(S){(0,O.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,k,de){var Pe=this;return(0,M.Z)(function*(){!function it(T){var S,w,k,de,Pe,Be,rt,Mt,xe,zt;const Ge=on();(0,O.aC)("function"==typeof(null===(S=Ge?.universalLinks)||void 0===S?void 0:S.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aC)(typeof(null===(w=Ge?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aC)("function"==typeof(null===(Pe=null===(de=null===(k=Ge?.cordova)||void 0===k?void 0:k.plugins)||void 0===de?void 0:de.browsertab)||void 0===Pe?void 0:Pe.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(Mt=null===(rt=null===(Be=Ge?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===rt?void 0:rt.browsertab)||void 0===Mt?void 0:Mt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(zt=null===(xe=Ge?.cordova)||void 0===xe?void 0:xe.InAppBrowser)||void 0===zt?void 0:zt.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Be=yield Pe._initialize(S);yield Be.initialized(),Be.resetRedirect(),(0,O.aI)(),yield Pe._originValidation(S);const rt=function ii(T,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:hn(),postBody:null,tenantId:T.tenantId,error:(0,O.aB)(T,"no-auth-event")}}(S,k,de);yield function Bt(T,S){return Jt()._set(Dn(T),S)}(S,rt);const Mt=yield function fe(T,S,w){return Te.apply(this,arguments)}(S,rt,w),xe=yield function Vt(T){const{cordova:S}=on();return new Promise(w=>{S.plugins.browsertab.isAvailable(k=>{let de=null;k?S.plugins.browsertab.openUrl(T):de=S.InAppBrowser.open(T,(0,O.aA)()?"_blank":"_system","location=yes"),w(de)})})}(Mt);return function ar(T,S,w){return Ct.apply(this,arguments)}(S,Be,xe)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function ze(T){return lt.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:k,handleOpenURL:de,BuildInfo:Pe}=on(),Be=setTimeout((0,M.Z)(function*(){yield dt(S),w.onEvent(ie())}),500),rt=function(){var zt=(0,M.Z)(function*(Ge){clearTimeout(Be);const _r=yield dt(S);let qo=null;_r&&Ge?.url&&(qo=function me(T,S){var w,k;const de=function bi(T){const S=ht(T),w=S.link?decodeURIComponent(S.link):void 0,k=ht(w).link,de=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return ht(de).link||de||k||w||T}(S);if(de.includes("/__/auth/callback")){const Pe=ht(de),Be=Pe.firebaseError?function wi(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(Pe.firebaseError)):null,rt=null===(k=null===(w=Be?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],Mt=rt?(0,O.aB)(rt):null;return Mt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:de,postBody:null}}return null}(_r,Ge.url)),w.onEvent(qo||ie())});return function(_r){return zt.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,rt);const Mt=de,xe=`${Pe.packageName.toLowerCase()}://`;on().handleOpenURL=function(){var zt=(0,M.Z)(function*(Ge){if(Ge.toLowerCase().startsWith(xe)&&rt({url:Ge}),"function"==typeof Mt)try{Mt(Ge)}catch(_r){console.error(_r)}});return function(Ge){return zt.apply(this,arguments)}}()}};function ie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aB)("no-auth-event")}}function De(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function Me(T=(0,He.z$)()){return!("file:"!==De()&&"ionic:"!==De()&&"capacitor:"!==De()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){try{const T=self.localStorage,S=O.aN();if(T)return T.setItem(S,"1"),T.removeItem(S),!function en(T=(0,He.z$)()){return function Rt(){return(0,He.w1)()&&11===document?.documentMode}()||function fn(T=(0,He.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,He.hl)()}catch{return Vn()&&(0,He.hl)()}return!1}function Vn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ur(){return(function It(){return"http:"===De()||"https:"===De()}()||(0,He.ru)()||Me())&&!function je(){return(0,He.b$)()||(0,He.UG)()}()&&cr()&&!Vn()}function Dr(){return Me()&&typeof document<"u"}function Us(){return(Us=(0,M.Z)(function*(){return!!Dr()&&new Promise(T=>{const S=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),T(!0)})})})).apply(this,arguments)}const Ut={LOCAL:"local",NONE:"none",SESSION:"session"},ji=O.aC,so="persistence";function Ti(T){return is.apply(this,arguments)}function is(){return(is=(0,M.Z)(function*(T){yield T._initializationPromise;const S=qr(),w=O.aF(so,T.config.apiKey,T.name);S&&S.setItem(w,T._getPersistence())})).apply(this,arguments)}function qr(){var T;try{return(null===(T=function rs(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const Sn=O.aC;class Gr{constructor(){this.browserResolver=O.aE(O.k),this.cordovaResolver=O.aE(te),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,k,de){var Pe=this;return(0,M.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openPopup(S,w,k,de)})()}_openRedirect(S,w,k,de){var Pe=this;return(0,M.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openRedirect(S,w,k,de)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return Dr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function Hr(){return Us.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function an(T){return T.unwrap()}function qn(T){return js(T)}function js(T){const{_tokenResponse:S}=T instanceof He.ZR?T.customData:T;if(!S)return null;if(!(T instanceof He.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return O.P.credentialFromResult(T);const w=S.providerId;if(!w||w===O.p.PASSWORD)return null;let k;switch(w){case O.p.GOOGLE:k=O.X;break;case O.p.FACEBOOK:k=O.W;break;case O.p.GITHUB:k=O.Y;break;case O.p.TWITTER:k=O.$;break;default:const{oauthIdToken:de,oauthAccessToken:Pe,oauthTokenSecret:Be,pendingToken:rt,nonce:Mt}=S;return Pe||Be||de||rt?rt?w.startsWith("saml.")?O.aQ._create(w,rt):O.N._fromParams({providerId:w,signInMethod:w,pendingToken:rt,idToken:de,accessToken:Pe}):new O.Z(w).credential({idToken:de,accessToken:Pe,rawNonce:Mt}):null}return T instanceof He.ZR?k.credentialFromError(T):k.credentialFromResult(T)}function tn(T,S){return S.catch(w=>{throw w instanceof He.ZR&&function oo(T,S){var w;const k=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Gn(T,O.as(T,S));else if(k){const de=js(S),Pe=S;de&&(Pe.credential=de,Pe.tenantId=k.tenantId||void 0,Pe.email=k.email||void 0,Pe.phoneNumber=k.phoneNumber||void 0)}}(T,w),w}).then(w=>{const de=w.user;return{operationType:w.operationType,credential:qn(w),additionalUserInfo:O.aq(w),user:mr.getOrCreate(de)}})}function $i(T,S){return $s.apply(this,arguments)}function $s(){return($s=(0,M.Z)(function*(T,S){const w=yield S;return{verificationId:w.verificationId,confirm:k=>tn(T,w.confirm(k))}})).apply(this,arguments)}class Gn{constructor(S,w){this.resolver=w,this.auth=function Lr(T){return T.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return tn(an(this.auth),this.resolver.resolveSignIn(S))}}class mr{constructor(S){this._delegate=S,this.multiFactor=O.at(S)}static getOrCreate(S){return mr.USER_MAP.has(S)||mr.USER_MAP.set(S,new mr(S)),mr.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return tn(w.auth,O.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var k=this;return(0,M.Z)(function*(){return $i(k.auth,O.l(k._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return tn(w.auth,O.d(w._delegate,S,Gr))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ti(O.aJ(w.auth)),O.g(w._delegate,S,Gr)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return tn(w.auth,O.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return $i(this.auth,O.r(this._delegate,S,w))}reauthenticateWithPopup(S){return tn(this.auth,O.e(this._delegate,S,Gr))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ti(O.aJ(w.auth)),O.h(w._delegate,S,Gr)})()}sendEmailVerification(S){return O.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield O.ap(w._delegate,S),w})()}updateEmail(S){return O.al(this._delegate,S)}updatePassword(S){return O.am(this._delegate,S)}updatePhoneNumber(S){return O.u(this._delegate,S)}updateProfile(S){return O.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return O.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mr.USER_MAP=new WeakMap;const Rn=O.aC;let Vr=(()=>{class T{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=w.options;Rn(de,"invalid-api-key",{appName:w.name}),Rn(de,"invalid-api-key",{appName:w.name});const Pe=typeof window<"u"?Gr:void 0;this._delegate=k.initialize({options:{persistence:ao(de,w.name),popupRedirectResolver:Pe}}),this._delegate._updateErrorMap(O.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){O.K(this._delegate,w,k)}applyActionCode(w){return O.a7(this._delegate,w)}checkActionCode(w){return O.a8(this._delegate,w)}confirmPasswordReset(w,k){return O.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var de=this;return(0,M.Z)(function*(){return tn(de._delegate,O.aa(de._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return O.af(this._delegate,w)}isSignInWithEmailLink(w){return O.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){Rn(ur(),w._delegate,"operation-not-supported-in-this-environment");const k=yield O.j(w._delegate,Gr);return k?tn(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function ae(T,S){(0,O.aJ)(T)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,k,de){const{next:Pe,error:Be,complete:rt}=Hs(w,k,de);return this._delegate.onAuthStateChanged(Pe,Be,rt)}onIdTokenChanged(w,k,de){const{next:Pe,error:Be,complete:rt}=Hs(w,k,de);return this._delegate.onIdTokenChanged(Pe,Be,rt)}sendSignInLinkToEmail(w,k){return O.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return O.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,M.Z)(function*(){let de;switch(function Bs(T,S){ji(Object.values(Ut).includes(S),T,"invalid-persistence-type"),(0,He.b$)()?ji(S!==Ut.SESSION,T,"unsupported-persistence-type"):(0,He.UG)()?ji(S===Ut.NONE,T,"unsupported-persistence-type"):Vn()?ji(S===Ut.NONE||S===Ut.LOCAL&&(0,He.hl)(),T,"unsupported-persistence-type"):ji(S===Ut.NONE||cr(),T,"unsupported-persistence-type")}(k._delegate,w),w){case Ut.SESSION:de=O.a;break;case Ut.LOCAL:de=(yield O.aE(O.i)._isAvailable())?O.i:O.b;break;case Ut.NONE:de=O.U;break;default:return O.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return tn(this._delegate,O.a0(this._delegate))}signInWithCredential(w){return tn(this._delegate,O.a1(this._delegate,w))}signInWithCustomToken(w){return tn(this._delegate,O.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return tn(this._delegate,O.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return tn(this._delegate,O.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return $i(this._delegate,O.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,M.Z)(function*(){return Rn(ur(),k._delegate,"operation-not-supported-in-this-environment"),tn(k._delegate,O.c(k._delegate,w,Gr))})()}signInWithRedirect(w){var k=this;return(0,M.Z)(function*(){return Rn(ur(),k._delegate,"operation-not-supported-in-this-environment"),yield Ti(k._delegate),O.f(k._delegate,w,Gr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return O.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Ut,T})();function Hs(T,S,w){let k=T;"function"!=typeof T&&({next:k,error:S,complete:w}=T);const de=k;return{next:Be=>de(Be&&mr.getOrCreate(Be)),error:S,complete:w}}function ao(T,S){const w=function zr(T,S){const w=qr();if(!w)return[];const k=O.aF(so,T,S);switch(w.getItem(k)){case Ut.NONE:return[O.U];case Ut.LOCAL:return[O.i,O.a];case Ut.SESSION:return[O.a];default:return[]}}(T,S);if(typeof self<"u"&&!w.includes(O.i)&&w.push(O.i),typeof window<"u")for(const k of[O.b,O.a])w.includes(k)||w.push(k);return w.includes(O.U)||w.push(O.U),w}class co{constructor(){this.providerId="phone",this._delegate=new O.P(an(Ae.Z.auth()))}static credential(S,w){return O.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}co.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,co.PROVIDER_ID=O.P.PROVIDER_ID;const uo=O.aC;class zs{constructor(S,w,k=Ae.Z.app()){var de;uo(null===(de=k.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new O.R(k.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(T){T.INTERNAL.registerComponent(new zn.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),k=S.getProvider("auth");return new Vr(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.V,FacebookAuthProvider:O.W,GithubAuthProvider:O.Y,GoogleAuthProvider:O.X,OAuthProvider:O.Z,SAMLAuthProvider:O._,PhoneAuthProvider:co,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:zs,TwitterAuthProvider:O.$,Auth:Vr,AuthCredential:O.L,Error:He.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.5.9")}(Ae.Z)},861:(vs,or,Je)=>{function M(O,He,Lt,Cn,zn,on,Nt){try{var fe=O[on](Nt),Te=fe.value}catch(ze){return void Lt(ze)}fe.done?He(Te):Promise.resolve(Te).then(Cn,zn)}function Ae(O){return function(){var He=this,Lt=arguments;return new Promise(function(Cn,zn){var on=O.apply(He,Lt);function Nt(Te){M(on,Cn,zn,Nt,fe,"next",Te)}function fe(Te){M(on,Cn,zn,Nt,fe,"throw",Te)}Nt(void 0)})}}Je.d(or,{Z:()=>Ae})},582:(vs,or,Je)=>{function He(te,ie){var ae={};for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&ie.indexOf(le)<0&&(ae[le]=te[le]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(le=Object.getOwnPropertySymbols(te);ge<le.length;ge++)ie.indexOf(le[ge])<0&&Object.prototype.propertyIsEnumerable.call(te,le[ge])&&(ae[le[ge]]=te[le[ge]])}return ae}function ze(te,ie,ae,le){return new(ae||(ae=Promise))(function(oe,De){function It(Rt){try{je(le.next(Rt))}catch(fn){De(fn)}}function Me(Rt){try{je(le.throw(Rt))}catch(fn){De(fn)}}function je(Rt){Rt.done?oe(Rt.value):function ge(oe){return oe instanceof ae?oe:new ae(function(De){De(oe)})}(Rt.value).then(It,Me)}je((le=le.apply(te,ie||[])).next())})}function Et(te){return this instanceof Et?(this.v=te,this):new Et(te)}function $t(te,ie,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,le=ae.apply(te,ie||[]),oe=[];return ge={},De("next"),De("throw"),De("return"),ge[Symbol.asyncIterator]=function(){return this},ge;function De(en){le[en]&&(ge[en]=function(cr){return new Promise(function(Vn,ur){oe.push([en,cr,Vn,ur])>1||It(en,cr)})})}function It(en,cr){try{!function Me(en){en.value instanceof Et?Promise.resolve(en.value.v).then(je,Rt):fn(oe[0][2],en)}(le[en](cr))}catch(Vn){fn(oe[0][3],Vn)}}function je(en){It("next",en)}function Rt(en){It("throw",en)}function fn(en,cr){en(cr),oe.shift(),oe.length&&It(oe[0][0],oe[0][1])}}function Bt(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ie=te[Symbol.asyncIterator];return ie?ie.call(te):(te=function Ct(te){var ie="function"==typeof Symbol&&Symbol.iterator,ae=ie&&te[ie],le=0;if(ae)return ae.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&le>=te.length&&(te=void 0),{value:te&&te[le++],done:!te}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),ae={},le("next"),le("throw"),le("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function le(oe){ae[oe]=te[oe]&&function(De){return new Promise(function(It,Me){!function ge(oe,De,It,Me){Promise.resolve(Me).then(function(je){oe({value:je,done:It})},De)}(It,Me,(De=te[oe](De)).done,De.value)})}}}Je.d(or,{FC:()=>$t,KL:()=>Bt,_T:()=>He,mG:()=>ze,qq:()=>Et}),"function"==typeof SuppressedError&&SuppressedError}},vs=>{vs(vs.s=161)}]);
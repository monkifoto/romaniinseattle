"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(ms,tr,Xe)=>{Xe.d(tr,{$:()=>Fm,A:()=>Ee,G:()=>Lt,K:()=>zh,L:()=>Go,N:()=>ns,P:()=>l_,R:()=>a_,U:()=>nt,V:()=>Na,W:()=>yl,X:()=>ef,Y:()=>tf,Z:()=>At,_:()=>Kc,a:()=>Ba,a0:()=>Lm,a1:()=>Cl,a2:()=>zr,a3:()=>Bm,a4:()=>jm,a5:()=>$m,a6:()=>Dl,a7:()=>FI,a8:()=>Oe,a9:()=>mn,aA:()=>cl,aB:()=>jt,aC:()=>fe,aD:()=>bs,aE:()=>Se,aF:()=>Rt,aG:()=>Bl,aH:()=>g_,aI:()=>ew,aJ:()=>fn,aN:()=>ja,aQ:()=>ri,aa:()=>Zc,ab:()=>ka,ac:()=>$n,ad:()=>Fa,ae:()=>at,af:()=>Hn,ag:()=>La,ah:()=>Qc,ak:()=>Yc,al:()=>It,am:()=>YS,ap:()=>kI,aq:()=>Gr,as:()=>nR,at:()=>Km,au:()=>Yt,av:()=>zo,aw:()=>Je,ax:()=>vt,ay:()=>Gl,az:()=>E_,b:()=>UI,c:()=>d_,d:()=>tt,e:()=>h_,f:()=>Nt,g:()=>Is,h:()=>Tr,i:()=>jI,j:()=>nw,k:()=>D_,l:()=>vs,m:()=>hR,p:()=>sn,r:()=>u_,s:()=>Af,u:()=>si});var M=Xe(861),Te=Xe(534),O=Xe(58),He=Xe(879),Ft=Xe(582),En=Xe(537);const sn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Lt=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nr=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new He.Yd("@firebase/auth");function In(p,...l){it.logLevel<=He.in.ERROR&&it.error(`Auth (${Te.SDK_VERSION}): ${p}`,...l)}function vt(p,...l){throw xn(p,...l)}function jt(p,...l){return xn(p,...l)}function ti(p,l,d){const g=Object.assign(Object.assign({},nr()),{[l]:d});return new O.LL("auth","Firebase",g).create(l,{appName:p.name})}function Ut(p){return ti(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lt(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&vt(p,"argument-error"),ti(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xn(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Tt.create(p,...l)}function fe(p,l,...d){if(!p)throw xn(l,...d)}function un(p){const l="INTERNAL ASSERTION FAILED: "+p;throw In(l),new Error(l)}function Yt(p,l){p||un(l)}function wn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function yi(){return"http:"===vi()||"https:"===vi()}function vi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Fi{constructor(l,d){this.shortDelay=l,this.longDelay=d,Yt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yi()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(p,l){Yt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class re{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Fi(3e4,6e4);function he(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function se(p,l,d,g){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,M.Z)(function*(p,l,d,g,v={}){return Et(p,v,(0,M.Z)(function*(){let C={},$={};g&&("GET"===l?$=g:C={body:JSON.stringify(g)});const J=(0,O.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),pe=yield p._getAdditionalHeaders();return pe["Content-Type"]="application/json",p.languageCode&&(pe["X-Firebase-Locale"]=p.languageCode),re.fetch()(ln(p,p.config.apiHost,d,J),Object.assign({method:l,headers:pe,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function Et(p,l,d){return xe.apply(this,arguments)}function xe(){return(xe=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},oe),l);try{const v=new rr(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield C.json();if("needConfirmation"in $)throw Nn(p,"account-exists-with-different-credential",$);if(C.ok&&!("errorMessage"in $))return $;{const J=C.ok?$.errorMessage:$.error.message,[pe,Le]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pe)throw Nn(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===pe)throw Nn(p,"email-already-in-use",$);if("USER_DISABLED"===pe)throw Nn(p,"user-disabled",$);const Ke=g[pe]||pe.toLowerCase().replace(/[_\s]+/g,"-");if(Le)throw ti(p,Ke,Le);vt(p,Ke)}}catch(v){if(v instanceof O.ZR)throw v;vt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function je(p,l,d,g){return St.apply(this,arguments)}function St(){return(St=(0,M.Z)(function*(p,l,d,g,v={}){const C=yield se(p,l,d,g,v);return"mfaPendingCredential"in C&&vt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function ln(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ee(p.config,v):`${p.config.apiScheme}://${v}`}function Xt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rr{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(jt(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=jt(p,l,g);return v.customData._tokenResponse=d,v}function ir(p){return void 0!==p&&void 0!==p.getResponse}function wr(p){return void 0!==p&&void 0!==p.enterprise}class Ur{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return Xt(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function es(){return(es=(0,M.Z)(function*(p){return(yield se(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vt(p,l){return Li.apply(this,arguments)}function Li(){return(Li=(0,M.Z)(function*(p,l){return se(p,"GET","/v2/recaptchaConfig",he(p,l))})).apply(this,arguments)}function Us(){return(Us=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function ts(){return(ts=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Br(p,l){return jr.apply(this,arguments)}function jr(){return(jr=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function bn(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function xr(){return(xr=(0,M.Z)(function*(p,l=!1){const d=(0,O.m9)(p),g=yield d.getIdToken(l),v=io(g);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,$=C?.sign_in_provider;return{claims:v,token:g,authTime:bn(Bn(v.auth_time)),issuedAtTime:bn(Bn(v.iat)),expirationTime:bn(Bn(v.exp)),signInProvider:$||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Bn(p){return 1e3*Number(p)}function io(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return In("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,O.tV)(d);return v?JSON.parse(v):(In("Failed to decode base64 JWT payload"),null)}catch(v){return In("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Bs(p){const l=io(p);return fe(l,"internal-error"),fe(typeof l.exp<"u","internal-error"),fe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Jt(p,l){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof O.ZR&&function js({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class jn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class dr{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tn(p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield Jt(p,Br(d,{idToken:g}));fe(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const $=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?ao(C.providerUserInfo):[],J=function oo(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,$),Ke=!!p.isAnonymous&&!(p.email&&C.passwordHash||J?.length),wt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:J,metadata:new dr(C.createdAt,C.lastLoginAt),isAnonymous:Ke};Object.assign(p,wt)})).apply(this,arguments)}function so(){return(so=(0,M.Z)(function*(p){const l=(0,O.m9)(p);yield Tn(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function ao(p){return p.map(l=>{var{providerId:d}=l,g=(0,Ft._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function B(){return(B=(0,M.Z)(function*(p,l){const d=yield Et(p,{},(0,M.Z)(function*(){const g=(0,O.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,$=ln(p,v,"/v1/token",`key=${C}`),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",re.fetch()($,{method:"POST",headers:J,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,M.Z)(function*(p,l){return se(p,"POST","/v2/accounts:revokeToken",he(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){fe(l.idToken,"internal-error"),fe(typeof l.idToken<"u","internal-error"),fe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Bs(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){fe(0!==l.length,"internal-error");const d=Bs(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(fe(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:$}=yield function Hs(p,l){return B.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number($))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,$=new S;return g&&(fe("string"==typeof g,"internal-error",{appName:l}),$.refreshToken=g),v&&(fe("string"==typeof v,"internal-error",{appName:l}),$.accessToken=v),C&&(fe("number"==typeof C,"internal-error",{appName:l}),$.expirationTime=C),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return un("not implemented")}}function w(p,l){fe("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class k{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,Ft._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new dr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield Jt(d,d.stsTokenManager.getToken(d.auth,l));return fe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function on(p){return xr.apply(this,arguments)}(this,l)}reload(){return function $s(p){return so.apply(this,arguments)}(this)}_assign(l){this!==l&&(fe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new k(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield Tn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,Te._isFirebaseServerApp)(l.auth.app))return Promise.reject(Ut(l.auth));const d=yield l.getIdToken();return yield Jt(l,function ro(p,l){return Us.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,$,J,pe,Le,Ke;const wt=null!==(g=d.displayName)&&void 0!==g?g:void 0,Ar=null!==(v=d.email)&&void 0!==v?v:void 0,oi=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,Ql=null!==($=d.photoURL)&&void 0!==$?$:void 0,Kf=null!==(J=d.tenantId)&&void 0!==J?J:void 0,Yl=null!==(pe=d._redirectEventId)&&void 0!==pe?pe:void 0,Wa=null!==(Le=d.createdAt)&&void 0!==Le?Le:void 0,R_=null!==(Ke=d.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:Dr,emailVerified:M_,isAnonymous:mr,providerData:au,stsTokenManager:P_}=d;fe(Dr&&P_,l,"internal-error");const x_=S.fromJSON(this.name,P_);fe("string"==typeof Dr,l,"internal-error"),w(wt,l.name),w(Ar,l.name),fe("boolean"==typeof M_,l,"internal-error"),fe("boolean"==typeof mr,l,"internal-error"),w(oi,l.name),w(Ql,l.name),w(Kf,l.name),w(Yl,l.name),w(Wa,l.name),w(R_,l.name);const Ka=new k({uid:Dr,auth:l,email:Ar,emailVerified:M_,displayName:wt,isAnonymous:mr,photoURL:Ql,phoneNumber:oi,tenantId:Kf,stsTokenManager:x_,createdAt:Wa,lastLoginAt:R_});return au&&Array.isArray(au)&&(Ka.providerData=au.map(Za=>Object.assign({},Za))),Yl&&(Ka._redirectEventId=Yl),Ka}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const C=new k({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield Tn(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?ao(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||C?.length),J=new S;J.updateFromIdToken(g);const pe=new k({uid:v.localId,auth:l,stsTokenManager:J,isAnonymous:$}),Le={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new dr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(pe,Le),pe})()}}const ue=new Map;function Se(p){Yt(p instanceof Function,"Expected a class definition");let l=ue.get(p);return l?(Yt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,ue.set(p,l),l)}const nt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Rt(p,l,d){return`firebase:${p}:${l}:${d}`}class Re{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Rt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Rt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?k._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new Re(Se(nt),l,g);const v=(yield Promise.all(d.map(function(){var Le=(0,M.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Le.apply(this,arguments)}}()))).filter(Le=>Le);let C=v[0]||Se(nt);const $=Rt(g,l.config.apiKey,l.name);let J=null;for(const Le of d)try{const Ke=yield Le._get($);if(Ke){const wt=k._fromJSON(l,Ke);Le!==C&&(J=wt),C=Le;break}}catch{}const pe=v.filter(Le=>Le._shouldAllowMigration);return C._shouldAllowMigration&&pe.length?(C=pe[0],J&&(yield C._set($,J.toJSON())),yield Promise.all(d.map(function(){var Le=(0,M.Z)(function*(Ke){if(Ke!==C)try{yield Ke._remove($)}catch{}});return function(Ke){return Le.apply(this,arguments)}}())),new Re(C,l,g)):new Re(C,l,g)})()}}function $t(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(qt(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Ge(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Ma(l))return"Blackberry";if(Pa(l))return"Webos";if(hr(l))return"Safari";if((l.includes("chrome/")||Ho(l))&&!l.includes("edge/"))return"Chrome";if(Je(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Ge(p=(0,O.z$)()){return/firefox\//i.test(p)}function hr(p=(0,O.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Ho(p=(0,O.z$)()){return/crios\//i.test(p)}function qt(p=(0,O.z$)()){return/iemobile/i.test(p)}function Je(p=(0,O.z$)()){return/android/i.test(p)}function Ma(p=(0,O.z$)()){return/blackberry/i.test(p)}function Pa(p=(0,O.z$)()){return/webos/i.test(p)}function zo(p=(0,O.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function cl(p=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Q(p=(0,O.z$)()){return zo(p)||Je(p)||Pa(p)||Ma(p)||/windows phone/i.test(p)||qt(p)}function st(p,l=[]){let d;switch(p){case"Browser":d=$t((0,O.z$)());break;case"Worker":d=`${$t((0,O.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Te.SDK_VERSION}/${g}`}class ht{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise(($,J)=>{try{$(l(C))}catch(pe){J(pe)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Kt(){return(Kt=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v2/passwordPolicy",he(p,l))})).apply(this,arguments)}class Ui{constructor(l){var d,g,v,C;const $=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,$,J;const pe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,pe),this.validatePasswordCharacterOptions(l,pe),pe.isValid&&(pe.isValid=null===(d=pe.meetsMinPasswordLength)||void 0===d||d),pe.isValid&&(pe.isValid=null===(g=pe.meetsMaxPasswordLength)||void 0===g||g),pe.isValid&&(pe.isValid=null===(v=pe.containsLowercaseLetter)||void 0===v||v),pe.isValid&&(pe.isValid=null===(C=pe.containsUppercaseLetter)||void 0===C||C),pe.isValid&&(pe.isValid=null===($=pe.containsNumericCharacter)||void 0===$||$),pe.isValid&&(pe.isValid=null===(J=pe.containsNonAlphanumericCharacter)||void 0===J||J),pe}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class qo{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new co(this),this.idTokenSubscription=new co(this),this.beforeStateQueue=new ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Se(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Re.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield Br(d,{idToken:l}),v=yield k._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,Te._isFirebaseServerApp)(d.app)){const J=d.app.settings.authIdToken;return J?new Promise(pe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(J).then(pe,pe))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,$=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const J=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,pe=C?._redirectEventId,Le=yield d.tryRedirectSignIn(l);(!J||J===pe)&&Le?.user&&(C=Le.user,$=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(C)}catch(J){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(J))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield Tn(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Ls(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,Te._isFirebaseServerApp)(d.app))return Promise.reject(Ut(d));const g=l?(0,O.m9)(l):null;return g&&fe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&fe(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,Te._isFirebaseServerApp)(l.app)?Promise.reject(Ut(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Te._isFirebaseServerApp)(this.app)?Promise.reject(Ut(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(Se(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function _t(p){return Kt.apply(this,arguments)}(l),g=new Ui(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new O.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,l){return T.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Se(l)||d._popupRedirectResolver;fe(g,d,"argument-error"),d.redirectPersistenceManager=yield Re.create(d,[Se(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let $=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(J,this,"internal-error"),J.then(()=>{$||C(this.currentUser)}),"function"==typeof d){const pe=l.addObserver(d,g,v);return()=>{$=!0,pe()}}{const pe=l.addObserver(d);return()=>{$=!0,pe()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=st(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function lr(p,...l){it.logLevel<=He.in.WARN&&it.warn(`Auth (${Te.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function fn(p){return(0,O.m9)(p)}class co{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,O.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ul={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Am(p){return ul.loadJS(p)}function Dm(p){return`__${p}${Math.floor(1e6*Math.random())}`}class et{constructor(l){this.type="recaptcha-enterprise",this.auth=fn(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function C(){return C=(0,M.Z)(function*(J){if(!d){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var pe=(0,M.Z)(function*(Le,Ke){Vt(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(wt=>{if(void 0!==wt.recaptchaKey){const Ar=new Ur(wt);return null==J.tenantId?J._agentRecaptchaConfig=Ar:J._tenantRecaptchaConfigs[J.tenantId]=Ar,Le(Ar.siteKey)}Ke(new Error("recaptcha Enterprise site key undefined"))}).catch(wt=>{Ke(wt)})});return function(Le,Ke){return pe.apply(this,arguments)}}())}),C.apply(this,arguments)}function $(J,pe,Le){const Ke=window.grecaptcha;wr(Ke)?Ke.enterprise.ready(()=>{Ke.enterprise.execute(J,{action:l}).then(wt=>{pe(wt)}).catch(()=>{pe("NO_RECAPTCHA")})}):Le(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,pe)=>{(function v(J){return C.apply(this,arguments)})(g.auth).then(Le=>{if(!d&&wr(window.grecaptcha))$(Le,J,pe);else{if(typeof window>"u")return void pe(new Error("RecaptchaVerifier is only supported in browser"));let Ke=function RI(){return ul.recaptchaEnterpriseScript}();0!==Ke.length&&(Ke+=Le),Am(Ke).then(()=>{$(Le,J,pe)}).catch(wt=>{pe(wt)})}}).catch(Le=>{pe(Le)})})})()}}function MI(p,l,d){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,M.Z)(function*(p,l,d,g=!1){const v=new et(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const $=Object.assign({},l);return Object.assign($,g?{captchaResp:C}:{captchaResponse:C}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function ll(p,l,d,g){return ke.apply(this,arguments)}function ke(){return ke=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield MI(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,M.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield MI(p,l,d,"getOobCode"===d);return g(p,J)}return Promise.reject($)});return function($){return C.apply(this,arguments)}}())}),ke.apply(this,arguments)}function zh(p,l,d){const g=fn(p);fe(g._canInitEmulator,g,"emulator-config-failed"),fe(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=Rm(l),{host:$,port:J}=function hl(p){const l=Rm(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:jc(g.substr(C.length+1))}}{const[C,$]=g.split(":");return{host:C,port:jc($)}}}(l);g.config.emulator={url:`${C}//${$}${null===J?"":`:${J}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:J,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function qh(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Rm(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function jc(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Go{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return un("not implemented")}_getIdTokenResponse(l){return un("not implemented")}_linkToIdToken(l,d){return un("not implemented")}_getReauthenticationResolver(l){return un("not implemented")}}function Mm(p,l){return yt.apply(this,arguments)}function yt(){return(yt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:resetPassword",he(p,l))})).apply(this,arguments)}function fl(){return(fl=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ni(p,l){return pl.apply(this,arguments)}function pl(){return(pl=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Zt(){return(Zt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",he(p,l))})).apply(this,arguments)}function KS(p,l){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPassword",he(p,l))})).apply(this,arguments)}function me(p,l){return $c.apply(this,arguments)}function $c(){return($c=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendOobCode",he(p,l))})).apply(this,arguments)}function gl(){return(gl=(0,M.Z)(function*(p,l){return me(p,l)})).apply(this,arguments)}function Kh(p,l){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,M.Z)(function*(p,l){return me(p,l)})).apply(this,arguments)}function Qh(p,l){return xm.apply(this,arguments)}function xm(){return(xm=(0,M.Z)(function*(p,l){return me(p,l)})).apply(this,arguments)}function Nm(){return(Nm=(0,M.Z)(function*(p,l){return me(p,l)})).apply(this,arguments)}function Om(){return(Om=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}function zc(){return(zc=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}class uo extends Go{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new uo(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new uo(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return ll(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",KS);case"emailLink":return function QS(p,l){return Om.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:vt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return ll(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ni);case"emailLink":return function Hc(p,l){return zc.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:vt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function zs(p,l){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithIdp",he(p,l))})).apply(this,arguments)}class ns extends Go{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new ns(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):vt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,Ft._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new ns(g,v);return $.idToken=C.idToken||void 0,$.accessToken=C.accessToken||void 0,$.secret=C.secret,$.nonce=C.nonce,$.pendingToken=C.pendingToken||null,$}_getIdTokenResponse(l){return zs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,zs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,zs(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,O.xO)(d)}return l}}function Xh(){return(Xh=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendVerificationCode",he(p,l))})).apply(this,arguments)}function Jh(){return(Jh=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l))})).apply(this,arguments)}function ml(){return(ml=(0,M.Z)(function*(p,l){const d=yield je(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l));if(d.temporaryProof)throw Nn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Fe={USER_NOT_FOUND:"user-not-found"};function qc(){return(qc=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Fe)})).apply(this,arguments)}class rs extends Go{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new rs({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new rs({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function lo(p,l){return Jh.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function le(p,l){return ml.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function _l(p,l){return qc.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new rs({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class Gc{constructor(l){var d,g,v,C,$,J;const pe=(0,O.zd)((0,O.pd)(l)),Le=null!==(d=pe.apiKey)&&void 0!==d?d:null,Ke=null!==(g=pe.oobCode)&&void 0!==g?g:null,wt=function NI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=pe.mode)&&void 0!==v?v:null);fe(Le&&Ke&&wt,"argument-error"),this.apiKey=Le,this.operation=wt,this.code=Ke,this.continueUrl=null!==(C=pe.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==($=pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=pe.tenantId)&&void 0!==J?J:null}static parseLink(l){const d=function OI(p){const l=(0,O.zd)((0,O.pd)(p)).link,d=l?(0,O.zd)((0,O.pd)(l)).deep_link_id:null,g=(0,O.zd)((0,O.pd)(p)).deep_link_id;return(g?(0,O.zd)((0,O.pd)(g)).link:null)||g||d||l||p}(l);try{return new Gc(d)}catch{return null}}}let Na=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return uo._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Gc.parseLink(g);return fe(v,"argument-error"),uo._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Gn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Hr extends Gn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class At extends Hr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),ns._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return fe(l.idToken||l.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return At.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return At.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:$,providerId:J}=l;if(!g&&!v&&!d&&!C||!J)return null;try{return new At(J)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:C})}catch{return null}}}let yl=(()=>{class p extends Hr{constructor(){super("facebook.com")}static credential(d){return ns._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ef=(()=>{class p extends Hr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return ns._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),tf=(()=>{class p extends Hr{constructor(){super("github.com")}static credential(d){return ns._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class ri extends Go{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return zs(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,zs(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,zs(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new ri(g,C):null}static _create(l,d){return new ri(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kc extends Gn{constructor(l){fe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Kc.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Kc.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=ri.fromJSON(l);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return ri._create(g,d)}catch{return null}}}let Fm=(()=>{class p extends Hr{constructor(){super("twitter.com")}static credential(d,g){return ns._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function vl(p,l){return El.apply(this,arguments)}function El(){return(El=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signUp",he(p,l))})).apply(this,arguments)}class Ii{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const C=yield k._fromIdTokenResponse(l,g,v),$=Oa(g);return new Ii({user:C,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=Oa(g);return new Ii({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function Oa(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Lm(p){return Il.apply(this,arguments)}function Il(){return(Il=(0,M.Z)(function*(p){var l;if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const d=fn(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new Ii({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield vl(d,{returnSecureToken:!0}),v=yield Ii._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class wl extends O.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,wl.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new wl(l,d,g,v)}}function nf(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?wl._fromErrorAndOperation(p,C,l,g):C})}function Vm(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function kI(p,l){return wi.apply(this,arguments)}function wi(){return wi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);yield Tl(!0,d,l);const{providerUserInfo:g}=yield function Ei(p,l){return ts.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=Vm(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),wi.apply(this,arguments)}function rf(p,l){return bl.apply(this,arguments)}function bl(){return(bl=(0,M.Z)(function*(p,l,d=!1){const g=yield Jt(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return Ii._forOperation(p,"link",g)})).apply(this,arguments)}function Tl(p,l,d){return sf.apply(this,arguments)}function sf(){return(sf=(0,M.Z)(function*(p,l,d){yield Tn(l);const v=!1===p?"provider-already-linked":"no-such-provider";fe(Vm(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function Um(p,l){return af.apply(this,arguments)}function af(){return(af=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,Te._isFirebaseServerApp)(g.app))return Promise.reject(Ut(g));const v="reauthenticate";try{const C=yield Jt(p,nf(g,v,l,p),d);fe(C.idToken,g,"internal-error");const $=io(C.idToken);fe($,g,"internal-error");const{sub:J}=$;return fe(p.uid===J,g,"user-mismatch"),Ii._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&vt(g,"user-mismatch"),C}})).apply(this,arguments)}function cf(p,l){return uf.apply(this,arguments)}function uf(){return(uf=(0,M.Z)(function*(p,l,d=!1){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g="signIn",v=yield nf(p,g,l),C=yield Ii._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Cl(p,l){return lf.apply(this,arguments)}function lf(){return(lf=(0,M.Z)(function*(p,l){return cf(fn(p),l)})).apply(this,arguments)}function zr(p,l){return df.apply(this,arguments)}function df(){return(df=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);return yield Tl(!1,d,l.providerId),rf(d,l)})).apply(this,arguments)}function Bm(p,l){return hf.apply(this,arguments)}function hf(){return(hf=(0,M.Z)(function*(p,l){return Um((0,O.m9)(p),l)})).apply(this,arguments)}function ff(){return(ff=(0,M.Z)(function*(p,l){return je(p,"POST","/v1/accounts:signInWithCustomToken",he(p,l))})).apply(this,arguments)}function jm(p,l){return qe.apply(this,arguments)}function qe(){return qe=(0,M.Z)(function*(p,l){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const d=fn(p),g=yield function pn(p,l){return ff.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield Ii._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),qe.apply(this,arguments)}class fr{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Dt._fromServerResponse(l,d):"totpInfo"in d?sr._fromServerResponse(l,d):vt(l,"internal-error")}}class Dt extends fr{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Dt(d)}}class sr extends fr{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new sr(d)}}function pr(p,l,d){var g;fe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function fo(p){return qr.apply(this,arguments)}function qr(){return(qr=(0,M.Z)(function*(p){const l=fn(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function $m(p,l,d){return Al.apply(this,arguments)}function Al(){return(Al=(0,M.Z)(function*(p,l,d){const g=fn(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&pr(g,v,d),yield ll(g,v,"getOobCode",Kh)})).apply(this,arguments)}function Dl(p,l,d){return pf.apply(this,arguments)}function pf(){return pf=(0,M.Z)(function*(p,l,d){yield Mm((0,O.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&fo(p),v});return function(v){return g.apply(this,arguments)}}())}),pf.apply(this,arguments)}function FI(p,l){return gn.apply(this,arguments)}function gn(){return gn=(0,M.Z)(function*(p,l){yield function WS(p,l){return Zt.apply(this,arguments)}((0,O.m9)(p),{oobCode:l})}),gn.apply(this,arguments)}function Oe(p,l){return ot.apply(this,arguments)}function ot(){return(ot=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),g=yield Mm(d,{oobCode:l}),v=g.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(g.mfaInfo,d,"internal-error");default:fe(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=fr._fromServerResponse(fn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function mn(p,l){return bi.apply(this,arguments)}function bi(){return(bi=(0,M.Z)(function*(p,l){const{data:d}=yield Oe((0,O.m9)(p),l);return d.email})).apply(this,arguments)}function Zc(p,l,d){return gr.apply(this,arguments)}function gr(){return(gr=(0,M.Z)(function*(p,l,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g=fn(p),$=yield ll(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vl).catch(pe=>{throw"auth/password-does-not-meet-requirements"===pe.code&&fo(p),pe}),J=yield Ii._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(J.user),J})).apply(this,arguments)}function ka(p,l,d){return(0,Te._isFirebaseServerApp)(p.app)?Promise.reject(Ut(p)):Cl((0,O.m9)(p),Na.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&fo(p),v});return function(v){return g.apply(this,arguments)}}())}function $n(p,l,d){return _s.apply(this,arguments)}function _s(){return(_s=(0,M.Z)(function*(p,l,d){const g=fn(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C($,J){fe(J.handleCodeInApp,g,"argument-error"),J&&pr(g,$,J)})(v,d),yield ll(g,v,"getOobCode",Qh)})).apply(this,arguments)}function Fa(p,l){const d=Gc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function at(p,l,d){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,M.Z)(function*(p,l,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g=(0,O.m9)(p),v=Na.credentialWithLink(l,d||wn());return fe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Cl(g,v)})).apply(this,arguments)}function po(){return(po=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:createAuthUri",he(p,l))})).apply(this,arguments)}function Hn(p,l){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:yi()?wn():"http://localhost"},{signinMethods:v}=yield function Hm(p,l){return po.apply(this,arguments)}((0,O.m9)(p),g);return v||[]}),Ko.apply(this,arguments)}function La(p,l){return ji.apply(this,arguments)}function ji(){return ji=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&pr(d.auth,v,l);const{email:C}=yield function Wh(p,l){return gl.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),ji.apply(this,arguments)}function Qc(p,l,d){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&pr(g.auth,C,d);const{email:$}=yield function ZS(p,l){return Nm.apply(this,arguments)}(g.auth,C);$!==p.email&&(yield p.reload())}),Sl.apply(this,arguments)}function is(){return(is=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Yc(p,l){return Zo.apply(this,arguments)}function Zo(){return Zo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,O.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},$=yield Jt(g,function go(p,l){return is.apply(this,arguments)}(g.auth,C));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const J=g.providerData.find(({providerId:pe})=>"password"===pe);J&&(J.displayName=g.displayName,J.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),Zo.apply(this,arguments)}function It(p,l){const d=(0,O.m9)(p);return(0,Te._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ut(d.auth)):Rl(d,l,null)}function YS(p,l){return Rl((0,O.m9)(p),null,l)}function Rl(p,l,d){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,M.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const $=yield Jt(p,function Gh(p,l){return fl.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary($,!0)}),Ml.apply(this,arguments)}class qs{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Qo extends qs{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Xc extends qs{constructor(l,d){super(l,"facebook.com",d)}}class br extends Qo{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class XS extends qs{constructor(l,d){super(l,"google.com",d)}}class ii extends Qo{constructor(l,d,g){super(l,"twitter.com",d,g)}}function Gr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function ys(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(l=io(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new qs(C,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new Xc(C,v);case"github.com":return new br(C,v);case"google.com":return new XS(C,v);case"twitter.com":return new ii(C,v,p.screenName||null);case"custom":case"anonymous":return new qs(C,null);default:return new qs(C,g,v)}}(d)}class Ua{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new Ua("enroll",l,d)}static _fromMfaPendingCredential(l){return new Ua("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ua._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return Ua._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Gm{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=fn(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(J=>fr._fromServerResponse(g,J));fe(v.mfaPendingCredential,g,"internal-error");const $=Ua._fromMfaPendingCredential(v.mfaPendingCredential);return new Gm($,C,function(){var J=(0,M.Z)(function*(pe){const Le=yield pe._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const Ke=Object.assign(Object.assign({},v),{idToken:Le.idToken,refreshToken:Le.refreshToken});switch(d.operationType){case"signIn":const wt=yield Ii._fromIdTokenResponse(g,d.operationType,Ke);return yield g._updateCurrentUser(wt.user),wt;case"reauthenticate":return fe(d.user,g,"internal-error"),Ii._forOperation(d.user,d.operationType,Ke);default:vt(g,"internal-error")}});return function(pe){return J.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function nR(p,l){var d;const g=(0,O.m9)(p),v=l;return fe(l.customData.operationType,g,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Gm._fromError(g,v)}class Wm{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>fr._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new Wm(l)}getSession(){var l=this;return(0,M.Z)(function*(){return Ua._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,C=yield g.getSession(),$=yield Jt(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield Jt(d.user,function oR(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Pl=new WeakMap;function Km(p){const l=(0,O.m9)(p);return Pl.has(l)||Pl.set(l,Wm._fromUser(l)),Pl.get(l)}const _f="__sak";class VI{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const UI=(()=>{class p extends VI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function aR(){const p=(0,O.z$)();return hr(p)||zo(p)}()&&function ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Q(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((J,pe,Le)=>{this.notifyListeners(J,Le)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(v);if(d.newValue!==J)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const J=this.storage.getItem(v);!g&&this.localCache[v]===J||this.notifyListeners(v,J)},$=this.storage.getItem(v);!function G(){return(0,O.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,M.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Ba=(()=>{class p extends VI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Zm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:C,eventType:$,data:J}=v.data,pe=g.handlersMap[$];if(!pe?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:$});const Le=Array.from(pe).map(function(){var wt=(0,M.Z)(function*(Ar){return Ar(v.origin,J)});return function(Ar){return wt.apply(this,arguments)}}()),Ke=yield function $i(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Le);v.ports[0].postMessage({status:"done",eventId:C,eventType:$,response:Ke})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function ja(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class Qm{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let $,J;return new Promise((pe,Le)=>{const Ke=ja("",20);C.port1.start();const wt=setTimeout(()=>{Le(new Error("unsupported_event"))},g);J={messageChannel:C,onMessage(Ar){const oi=Ar;if(oi.data.eventId===Ke)switch(oi.data.status){case"ack":clearTimeout(wt),$=setTimeout(()=>{Le(new Error("timeout"))},3e3);break;case"done":clearTimeout($),pe(oi.data.response);break;default:clearTimeout(wt),clearTimeout($),Le(new Error("invalid_response"))}}},v.handlers.add(J),C.port1.addEventListener("message",J.onMessage),v.target.postMessage({eventType:l,eventId:Ke,data:d},[C.port2])}).finally(()=>{J&&v.removeMessageHandler(J)})})()}}function zn(){return window}function xl(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function Jc(){return(Jc=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ef="firebaseLocalStorageDb",_o="firebaseLocalStorage",Xo="fbase_key";class $a{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function If(p,l){return p.transaction([_o],l?"readwrite":"readonly").objectStore(_o)}function Jm(){const p=indexedDB.open(Ef,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(_o,{keyPath:Xo})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(_o)?l(g):(g.close(),yield function cR(){const p=indexedDB.deleteDatabase(Ef);return new $a(p).toPromise()}(),l(yield Jm()))}))})}function e_(p,l,d){return wf.apply(this,arguments)}function wf(){return(wf=(0,M.Z)(function*(p,l,d){const g=If(p,!0).put({[Xo]:l,value:d});return new $a(g).toPromise()})).apply(this,arguments)}function Ol(){return(Ol=(0,M.Z)(function*(p,l){const d=If(p,!1).get(l),g=yield new $a(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function kl(p,l){const d=If(p,!0).delete(l);return new $a(d).toPromise()}const jI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield Jm()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return xl()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=Zm._getInstance(function Xm(){return xl()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function vf(){return Jc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Qm(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Ym(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Jm();return yield e_(d,_f,"1"),yield kl(d,_f),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(C=>e_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(C=>function uR(p,l){return Ol.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>kl(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries($=>{const J=If($,!1).getAll();return new $a(J).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:$,value:J}of g)C.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(J)&&(d.notifyListeners($,J),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!C.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Fl=1e12;class r_{constructor(l){this.auth=l,this.counter=Fl,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new qI(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||Fl;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||Fl))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||Fl))||void 0===g||g.execute(),""})()}}class qI{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function i_(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Tf=Dm("rcb"),lR=new Fi(3e4,6e4);class GI{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=zn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return fe(function Hi(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&ir(zn().grecaptcha)?Promise.resolve(zn().grecaptcha):new Promise((g,v)=>{const C=zn().setTimeout(()=>{v(jt(l,"network-request-failed"))},lR.get());zn()[Tf]=()=>{zn().clearTimeout(C),delete zn()[Tf];const J=zn().grecaptcha;if(!J||!ir(J))return void v(jt(l,"internal-error"));const pe=J.render;J.render=(Le,Ke)=>{const wt=pe(Le,Ke);return this.counter++,wt},this.hostLanguage=d,g(J)},Am(`${function HS(){return ul.recaptchaV2Script}()}?${(0,O.xO)({onload:Tf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(jt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=zn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class s_{load(l){return(0,M.Z)(function*(){return new r_(l)})()}clearedOneInstance(){}}const o_="recaptcha",WI={theme:"light",type:"image"};class a_{constructor(l,d,g=Object.assign({},WI)){this.parameters=g,this.type=o_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(l),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new s_:new GI,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const $=J=>{J&&(l.tokenChangeListeners.delete($),C(J))};l.tokenChangeListeners.add($),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=zn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){fe(yi()&&!xl(),l.auth,"internal-error"),yield function c_(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Vs(p){return es.apply(this,arguments)}(l.auth);fe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cf{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=rs._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Af(p,l,d){return Df.apply(this,arguments)}function Df(){return(Df=(0,M.Z)(function*(p,l,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g=fn(p),v=yield Ha(g,l,(0,O.m9)(d));return new Cf(v,C=>Cl(g,C))})).apply(this,arguments)}function vs(p,l,d){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);yield Tl(!1,g,"phone");const v=yield Ha(g.auth,l,(0,O.m9)(d));return new Cf(v,C=>zr(g,C))})).apply(this,arguments)}function u_(p,l,d){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ut(g.auth));const v=yield Ha(g.auth,l,(0,O.m9)(d));return new Cf(v,C=>Bm(g,C))})).apply(this,arguments)}function Ha(p,l,d){return za.apply(this,arguments)}function za(){return za=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===o_,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const $=C.session;if("phoneNumber"in C)return fe("enroll"===$.type,p,"internal-error"),(yield function rR(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,l))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===$.type,p,"internal-error");const J=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return fe(J,p,"missing-multi-factor-info"),(yield function $I(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:start",he(p,l))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function xa(p,l){return Xh.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),za.apply(this,arguments)}function si(p,l){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);if((0,Te._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ut(d.auth));yield rf(d,l)})).apply(this,arguments)}let l_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=fn(d)}verifyPhoneNumber(d,g){return Ha(this.auth,d,(0,O.m9)(g))}static credential(d,g){return rs._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?rs._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function zi(p,l){return l?Se(l):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Wr extends Go{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return zs(l,this._buildIdpRequest())}_linkToIdToken(l,d){return zs(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return zs(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function KI(p){return cf(p.auth,new Wr(p),p.bypassAuthState)}function ZI(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),Um(d,new Wr(p),p.bypassAuthState)}function QI(p){return Es.apply(this,arguments)}function Es(){return(Es=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),rf(d,new Wr(p),p.bypassAuthState)})).apply(this,arguments)}class Rf{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:$,error:J,type:pe}=l;if(J)return void d.reject(J);const Le={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(pe)(Le))}catch(Ke){d.reject(Ke)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return KI;case"linkViaPopup":case"linkViaRedirect":return QI;case"reauthViaPopup":case"reauthViaRedirect":return ZI;default:vt(this.auth,"internal-error")}}resolve(l){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const YI=new Fi(2e3,1e4);function d_(p,l,d){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,M.Z)(function*(p,l,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(jt(p,"operation-not-supported-in-this-environment"));const g=fn(p);lt(p,l,Gn);const v=zi(g,d);return new f_(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function h_(p,l,d){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(jt(g.auth,"operation-not-supported-in-this-environment"));lt(g.auth,l,Gn);const v=zi(g.auth,d);return new f_(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function tt(p,l,d){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);lt(g.auth,l,Gn);const v=zi(g.auth,d);return new f_(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let f_=(()=>{class p extends Rf{constructor(d,g,v,C,$){super(d,g,C,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return fe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){Yt(1===d.filter.length,"Popup operations only handle one event");const g=ja();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,YI.get())};d()}}return p.currentPopupAction=null,p})();const XI="pendingRedirect",eu=new Map;class JI extends Rf{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=eu.get(d.auth._key());if(!g){try{const C=(yield function p_(p,l){return yo.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}eu.set(d.auth._key(),g)}return d.bypassAuthState||eu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function yo(){return(yo=(0,M.Z)(function*(p,l){const d=ge(l),g=m_(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function Pf(p,l){return xf.apply(this,arguments)}function xf(){return(xf=(0,M.Z)(function*(p,l){return m_(p)._set(ge(l),"true")})).apply(this,arguments)}function ew(){eu.clear()}function g_(p,l){eu.set(p._key(),l)}function m_(p){return Se(p._redirectPersistence)}function ge(p){return Rt(XI,p.config.apiKey,p.name)}function Nt(p,l,d){return function tw(p,l,d){return Nf.apply(this,arguments)}(p,l,d)}function Nf(){return(Nf=(0,M.Z)(function*(p,l,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g=fn(p);lt(p,l,Gn),yield g._initializationPromise;const v=zi(g,d);return yield Pf(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function Tr(p,l,d){return function __(p,l,d){return Jo.apply(this,arguments)}(p,l,d)}function Jo(){return(Jo=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if(lt(g.auth,l,Gn),(0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ut(g.auth));yield g.auth._initializationPromise;const v=zi(g.auth,d);yield Pf(v,g.auth);const C=yield ws(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function Is(p,l,d){return function Of(p,l,d){return tu.apply(this,arguments)}(p,l,d)}function tu(){return(tu=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);lt(g.auth,l,Gn),yield g.auth._initializationPromise;const v=zi(g.auth,d);yield Tl(!1,g,l.providerId),yield Pf(v,g.auth);const C=yield ws(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function nw(p,l){return y_.apply(this,arguments)}function y_(){return(y_=(0,M.Z)(function*(p,l){return yield fn(p)._initializationPromise,Bl(p,l,!1)})).apply(this,arguments)}function Bl(p,l){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,M.Z)(function*(p,l,d=!1){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p));const g=fn(p),v=zi(g,l),$=yield new JI(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,l)),$})).apply(this,arguments)}function ws(p){return jl.apply(this,arguments)}function jl(){return(jl=(0,M.Z)(function*(p){const l=ja(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class bs{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function rw(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!kf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(jt(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(v_(l))}saveEventToCache(l){this.cachedEventUids.add(v_(l)),this.lastProcessedEventTime=Date.now()}}function v_(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function kf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function E_(p){return nu.apply(this,arguments)}function nu(){return(nu=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v1/projects",l)})).apply(this,arguments)}const Ff=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I_=/^https?/;function Vf(){return(Vf=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield E_(p);for(const d of l)try{if(w_(d))return}catch{}vt(p,"unauthorized-domain")})).apply(this,arguments)}function w_(p){const l=wn(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!I_.test(d))return!1;if(Ff.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Uf=new Fi(3e4,6e4);function Bf(){const p=zn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let ru=null;const jf=new Fi(5e3,15e3),iw="__/auth/iframe",sw="emulator/auth/iframe",Kr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(p){const l=p.config;fe(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ee(l,sw):`https://${p.config.authDomain}/${iw}`,g={apiKey:l.apiKey,appName:p.name,v:Te.SDK_VERSION},v=ea.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,O.xO)(g).slice(1)}`}function $f(){return $f=(0,M.Z)(function*(p){const l=yield function T_(p){return ru=ru||function b_(p){return new Promise((l,d)=>{var g,v,C;function $(){Bf(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Bf(),d(jt(p,"network-request-failed"))},timeout:Uf.get()})}if(null!==(v=null===(g=zn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=zn().gapi)||void 0===C||!C.load){const J=Dm("iframefcb");return zn()[J]=()=>{gapi.load?$():d(jt(p,"network-request-failed"))},Am(`${function zS(){return ul.gapiScript}()}?onload=${J}`).catch(pe=>d(pe))}$()}}).catch(l=>{throw ru=null,l})}(p),ru}(p),d=zn().gapi;return fe(d,p,"internal-error"),l.open({where:document.body,url:Cn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kr,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(C,$){yield g.restyle({setHideOnLeave:!1});const J=jt(p,"network-request-failed"),pe=zn().setTimeout(()=>{$(J)},jf.get());function Le(){zn().clearTimeout(pe),C(g)}g.ping(Le).then(Le,()=>{$(J)})});return function(C,$){return v.apply(this,arguments)}}()))}),$f.apply(this,arguments)}const aw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gs{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zl="__/auth/handler",ql="emulator/auth/handler",Hf=encodeURIComponent("fac");function Gl(p,l,d,g,v,C){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,M.Z)(function*(p,l,d,g,v,C){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Te.SDK_VERSION,eventId:v};if(l instanceof Gn){l.setDefaultLanguage(p.languageCode),$.providerId=l.providerId||"",(0,O.xb)(l.getCustomParameters())||($.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ke,wt]of Object.entries(C||{}))$[Ke]=wt}if(l instanceof Hr){const Ke=l.getScopes().filter(wt=>""!==wt);Ke.length>0&&($.scopes=Ke.join(","))}p.tenantId&&($.tid=p.tenantId);const J=$;for(const Ke of Object.keys(J))void 0===J[Ke]&&delete J[Ke];const pe=yield p._getAppCheckToken(),Le=pe?`#${Hf}=${encodeURIComponent(pe)}`:"";return`${function lw({config:p}){return p.emulator?ee(p,ql):`https://${p.authDomain}/${zl}`}(p)}?${(0,O.xO)(J).slice(1)}${Le}`})).apply(this,arguments)}const vo="webStorageSupport",D_=class iu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ba,this._completeRedirectFn=Bl,this._overrideRedirectResult=g_}_openPopup(l,d,g,v){var C=this;return(0,M.Z)(function*(){var $;Yt(null===($=C.eventManagers[l._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield Gl(l,d,g,wn(),v);return function uw(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let J="";const pe=Object.assign(Object.assign({},aw),{width:g.toString(),height:v.toString(),top:C,left:$}),Le=(0,O.z$)().toLowerCase();d&&(J=Ho(Le)?"_blank":d),Ge(Le)&&(l=l||"http://localhost",pe.scrollbars="yes");const Ke=Object.entries(pe).reduce((Ar,[oi,Ql])=>`${Ar}${oi}=${Ql},`,"");if(function P(p=(0,O.z$)()){var l;return zo(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Le)&&"_self"!==J)return function Hl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",J),new Gs(null);const wt=window.open(l||"",J,Ke);fe(wt,p,"popup-blocked");try{wt.focus()}catch{}return new Gs(wt)}(l,J,ja())})()}_openRedirect(l,d,g,v){var C=this;return(0,M.Z)(function*(){return yield C._originValidation(l),function yf(p){zn().location.href=p}(yield Gl(l,d,g,wn(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(Yt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function ow(p){return $f.apply(this,arguments)}(l),v=new bs(l);return g.register("authEvent",C=>(fe(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(vo,{type:vo},v=>{var C;const $=null===(C=v?.[0])||void 0===C?void 0:C[vo];void 0!==$&&d(!!$),vt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Lf(p){return Vf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Q()||hr()||zo()}};class dR{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return un("unexpected MultiFactorSessionType")}}}class su extends dR{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new su(l)}_finalizeEnroll(l,d,g){return function iR(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function t_(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hR=(()=>{class p{constructor(){}static assertion(d){return su._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Kl="@firebase/auth";class hw{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function $S(p){ul=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=jt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function Ts(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Gf(p){(0,Te._registerComponent)(new En.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=g.options;fe($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const pe={apiKey:$,authDomain:J,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:st(p)},Le=new qo(g,v,C,pe);return function PI(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Se);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Le,d),Le},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new En.wA("auth-internal",l=>{const d=fn(l.getProvider("auth").getImmediate());return new hw(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(Kl,"1.7.4",function ou(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Te.registerVersion)(Kl,"1.7.4","esm2017")}("Browser")},58:(ms,tr,Xe)=>{Xe.d(tr,{BH:()=>ti,G6:()=>Fi,L:()=>xt,LL:()=>se,P0:()=>In,Pz:()=>jt,Sg:()=>Ut,UG:()=>fe,ZB:()=>ze,ZR:()=>he,aH:()=>vt,b$:()=>wn,eu:()=>re,hl:()=>ee,jU:()=>un,m9:()=>Hs,ne:()=>Br,pd:()=>Ei,r3:()=>ir,ru:()=>Yt,tV:()=>de,uI:()=>xn,vZ:()=>es,w1:()=>vi,xO:()=>ro,xb:()=>Ur,z$:()=>lt,zd:()=>Us});const He=function(B){const F=[];let T=0;for(let S=0;S<B.length;S++){let w=B.charCodeAt(S);w<128?F[T++]=w:w<2048?(F[T++]=w>>6|192,F[T++]=63&w|128):55296==(64512&w)&&S+1<B.length&&56320==(64512&B.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&B.charCodeAt(++S)),F[T++]=w>>18|240,F[T++]=w>>12&63|128,F[T++]=w>>6&63|128,F[T++]=63&w|128):(F[T++]=w>>12|224,F[T++]=w>>6&63|128,F[T++]=63&w|128)}return F},En={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<B.length;w+=3){const k=B[w],ue=w+1<B.length,Se=ue?B[w+1]:0,Be=w+2<B.length,nt=Be?B[w+2]:0;let $t=(15&Se)<<2|nt>>6,Ge=63&nt;Be||(Ge=64,ue||($t=64)),S.push(T[k>>2],T[(3&k)<<4|Se>>4],T[$t],T[Ge])}return S.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(He(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let T=0,S=0;for(;T<B.length;){const w=B[T++];if(w<128)F[S++]=String.fromCharCode(w);else if(w>191&&w<224){const k=B[T++];F[S++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const Be=((7&w)<<18|(63&B[T++])<<12|(63&B[T++])<<6|63&B[T++])-65536;F[S++]=String.fromCharCode(55296+(Be>>10)),F[S++]=String.fromCharCode(56320+(1023&Be))}else{const k=B[T++],ue=B[T++];F[S++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&ue)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const T=F?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<B.length;){const k=T[B.charAt(w++)],Se=w<B.length?T[B.charAt(w)]:0;++w;const nt=w<B.length?T[B.charAt(w)]:64;++w;const Re=w<B.length?T[B.charAt(w)]:64;if(++w,null==k||null==Se||null==nt||null==Re)throw new Un;S.push(k<<2|Se>>4),64!==nt&&(S.push(Se<<4&240|nt>>2),64!==Re&&S.push(nt<<6&192|Re))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class Un extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xt=function(B){return function(B){const F=He(B);return En.encodeByteArray(F,!0)}(B).replace(/\./g,"")},de=function(B){try{return En.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function ze(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const T in F)!F.hasOwnProperty(T)||!ut(T)||(B[T]=ze(B[T],F[T]));return B}function ut(B){return"__proto__"!==B}const it=()=>{try{return function Lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&de(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},In=B=>{const F=(B=>{var F,T;return null===(T=null===(F=it())||void 0===F?void 0:F.emulatorHosts)||void 0===T?void 0:T[B]})(B);if(!F)return;const T=F.lastIndexOf(":");if(T<=0||T+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const S=parseInt(F.substring(T+1),10);return"["===F[0]?[F.substring(1,T-1),S]:[F.substring(0,T),S]},vt=()=>{var B;return null===(B=it())||void 0===B?void 0:B.config},jt=B=>{var F;return null===(F=it())||void 0===F?void 0:F[`_${B}`]};class ti{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,T)=>{this.resolve=F,this.reject=T})}wrapCallback(F){return(T,S)=>{T?this.reject(T):this.resolve(S),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(T):F(T,S))}}}function Ut(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=F||"demo-project",w=B.iat||0,k=B.sub||B.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},B);return[xt(JSON.stringify({alg:"none",type:"JWT"})),xt(JSON.stringify(ue)),""].join(".")}function lt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function fe(){var B;const F=null===(B=it())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function un(){return"object"==typeof self&&self.self===self}function Yt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function wn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vi(){const B=lt();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Fi(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((B,F)=>{try{let T=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),T||self.indexedDB.deleteDatabase(S),B(!0)},w.onupgradeneeded=()=>{T=!1},w.onerror=()=>{var k;F((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(T){F(T)}})}class he extends Error{constructor(F,T,S){super(T),this.code=F,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(F,T,S){this.service=F,this.serviceName=T,this.errors=S}create(F,...T){const S=T[0]||{},w=`${this.service}/${F}`,k=this.errors[F],ue=k?function Ce(B,F){return B.replace(Et,(T,S)=>{const w=F[S];return null!=w?String(w):`<${S}?>`})}(k,S):"Error";return new he(w,`${this.serviceName}: ${ue} (${w}).`,S)}}const Et=/\{\$([^}]+)}/g;function ir(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function Ur(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function es(B,F){if(B===F)return!0;const T=Object.keys(B),S=Object.keys(F);for(const w of T){if(!S.includes(w))return!1;const k=B[w],ue=F[w];if(Vt(k)&&Vt(ue)){if(!es(k,ue))return!1}else if(k!==ue)return!1}for(const w of S)if(!T.includes(w))return!1;return!0}function Vt(B){return null!==B&&"object"==typeof B}function ro(B){const F=[];for(const[T,S]of Object.entries(B))Array.isArray(S)?S.forEach(w=>{F.push(encodeURIComponent(T)+"="+encodeURIComponent(w))}):F.push(encodeURIComponent(T)+"="+encodeURIComponent(S));return F.length?"&"+F.join("&"):""}function Us(B){const F={};return B.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,k]=S.split("=");F[decodeURIComponent(w)]=decodeURIComponent(k)}}),F}function Ei(B){const F=B.indexOf("?");if(!F)return"";const T=B.indexOf("#",F);return B.substring(F,T>0?T:void 0)}function Br(B,F){const T=new jr(B,F);return T.subscribe.bind(T)}class jr{constructor(F,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then(()=>{F(this)}).catch(S=>{this.error(S)})}next(F){this.forEachObserver(T=>{T.next(F)})}error(F){this.forEachObserver(T=>{T.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,T,S){let w;if(void 0===F&&void 0===T&&void 0===S)throw new Error("Missing Observer.");w=function $r(B,F){if("object"!=typeof B||null===B)return!1;for(const T of F)if(T in B&&"function"==typeof B[T])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:T,complete:S},void 0===w.next&&(w.next=on),void 0===w.error&&(w.error=on),void 0===w.complete&&(w.complete=on);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,F)}sendOne(F,T){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{T(this.observers[F])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function on(){}function Hs(B){return B&&B._delegate?B._delegate:B}},114:(ms,tr,Xe)=>{function M(n){return"function"==typeof n}function Te(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=Te(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function He(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{sn(s)}catch(o){e=e??[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sn(e);else{if(e instanceof Ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&He(t,e)}remove(e){const{_finalizers:t}=this;t&&He(t,e),e instanceof Ft&&e._removeParent(this)}}Ft.EMPTY=(()=>{const n=new Ft;return n.closed=!0,n})();const En=Ft.EMPTY;function Un(n){return n instanceof Ft||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function sn(n){M(n)?n():n.unsubscribe()}const xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},de={setTimeout(n,e,...t){const{delegate:r}=de;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=de;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ee(n){de.setTimeout(()=>{const{onUnhandledError:e}=xt;if(!e)throw n;e(n)})}function ze(){}const ut=Tt("C",void 0,void 0);function Tt(n,e,t){return{kind:n,value:e,error:t}}let rt=null;function it(n){if(xt.useDeprecatedSynchronousErrorHandling){const e=!rt;if(e&&(rt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=rt;if(rt=null,t)throw r}}else n()}class In extends Ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Un(e)&&e.add(this)):this.destination=un}static create(e,t,r){return new Ut(e,t,r)}next(e){this.isStopped?fe(function nr(n){return Tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fe(function Lt(n){return Tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fe(ut,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vt=Function.prototype.bind;function jt(n,e){return vt.call(n,e)}class ti{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){lt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){lt(r)}else lt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){lt(t)}}}class Ut extends In{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jt(e.next,s),error:e.error&&jt(e.error,s),complete:e.complete&&jt(e.complete,s)}):i=e}this.destination=new ti(i)}}function lt(n){xt.useDeprecatedSynchronousErrorHandling?function lr(n){xt.useDeprecatedSynchronousErrorHandling&&rt&&(rt.errorThrown=!0,rt.error=n)}(n):Ee(n)}function fe(n,e){const{onStoppedNotification:t}=xt;t&&de.setTimeout(()=>t(n,e))}const un={closed:!0,next:ze,error:function xn(n){throw n},complete:ze},Yt="function"==typeof Symbol&&Symbol.observable||"@@observable";function wn(n){return n}function vi(n){return 0===n.length?wn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ee(n){return n&&n instanceof In||function Fi(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&Un(n)}(t)?t:new Ut(t,r,i);return it(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ls(r))((i,s)=>{const o=new Ut({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Yt](){return this}pipe(...t){return vi(t)(this)}toPromise(t){return new(t=Ls(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ls(n){var e;return null!==(e=n??xt.Promise)&&void 0!==e?e:Promise}const re=Te(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let oe=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ce(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?En:(this.currentObservers=null,s.push(t),new Ft(()=>{this.currentObservers=null,He(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new ce(e,t),n})();class ce extends oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:En}}function he(n){return M(n?.lift)}function se(n){return e=>{if(he(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(n,e,t,r,i){return new Et(n,e,t,r,i)}class Et extends In{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xe(n,e){return se((t,r)=>{let i=0;t.subscribe(Ce(r,s=>{r.next(n.call(e,s,i++))}))})}var je=Xe(582);const St=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ln(n){return M(n?.then)}function Xt(n){return M(n[Yt])}function rr(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Nn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wr=function ir(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ur(n){return M(n?.[wr])}function Vs(n){return(0,je.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,je.qq)(t.read());if(i)return yield(0,je.qq)(void 0);yield yield(0,je.qq)(r)}}finally{t.releaseLock()}})}function es(n){return M(n?.getReader)}function Vt(n){if(n instanceof dt)return n;if(null!=n){if(Xt(n))return function Li(n){return new dt(e=>{const t=n[Yt]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(St(n))return function ro(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ln(n))return function Us(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ee)})}(n);if(rr(n))return ts(n);if(Ur(n))return function Ei(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(es(n))return function Br(n){return ts(Vs(n))}(n)}throw Nn(n)}function ts(n){return new dt(e=>{(function jr(n,e){var t,r,i,s;return(0,je.mG)(this,void 0,void 0,function*(){try{for(t=(0,je.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function on(n,e,t=1/0){return M(e)?on((r,i)=>xe((s,o)=>e(r,s,i,o))(Vt(n(r,i))),t):("number"==typeof e&&(t=e),se((r,i)=>function $r(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=R=>u<r?b(R):c.push(R),b=R=>{s&&e.next(R),u++;let x=!1;Vt(t(R,f++)).subscribe(Ce(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){const H=c.shift();o?bn(e,o,()=>b(H)):b(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(Ce(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function xr(n=1/0){return on(wn,n)}const Bn=new dt(n=>n.complete());function Vi(n){return n[n.length-1]}function js(n){return M(Vi(n))?n.pop():void 0}function jn(n){return function Jt(n){return n&&M(n.schedule)}(Vi(n))?n.pop():void 0}function Tn(n,e=0){return se((t,r)=>{t.subscribe(Ce(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function Nr(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Hs(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{bn(t,e,()=>{const r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T(n,e){return e?function F(n,e){if(null!=n){if(Xt(n))return function $s(n,e){return Vt(n).pipe(Nr(e),Tn(e))}(n,e);if(St(n))return function oo(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ln(n))return function so(n,e){return Vt(n).pipe(Nr(e),Tn(e))}(n,e);if(rr(n))return Hs(n,e);if(Ur(n))return function ao(n,e){return new dt(t=>{let r;return bn(t,e,()=>{r=n[wr](),bn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if(es(n))return function B(n,e){return Hs(Vs(n),e)}(n,e)}throw Nn(n)}(n,e):Vt(n)}function S(...n){const e=jn(n),t=function dr(n,e){return"number"==typeof Vi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Vt(r[0]):xr(t)(T(r,e)):Bn}class w extends oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return T(n,jn(n))}function ue(n={}){const{connector:e=(()=>new oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},b=()=>{const R=o;I(),R?.unsubscribe()};return se((R,x)=>{u++,!m&&!f&&y();const H=c=c??e();x.add(()=>{u--,0===u&&!m&&!f&&(a=Se(b,i))}),H.subscribe(x),!o&&u>0&&(o=new Ut({next:V=>H.next(V),error:V=>{m=!0,y(),a=Se(I,t,V),H.error(V)},complete:()=>{f=!0,y(),a=Se(I,r),H.complete()}}),Vt(R).subscribe(o))})(s)}}function Se(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ut({next:()=>{r.unsubscribe(),n()}});return Vt(e(...t)).subscribe(r)}function Be(n,e){return se((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ce(r,c=>{i?.unsubscribe();let u=0;const f=s++;Vt(n(c,f)).subscribe(i=Ce(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nt(n,e=wn){return n=n??Rt,se((t,r)=>{let i,s=!0;t.subscribe(Ce(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Rt(n,e){return n===e}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function $t(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function hr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ho=Re({__forward_ref__:Re});function qt(n){return n.__forward_ref__=qt,n.toString=function(){return Ge(this())},n}function Je(n){return Ma(n)?n():n}function Ma(n){return"function"==typeof n&&n.hasOwnProperty(Ho)&&n.__forward_ref__===qt}function Pa(n){return n&&!!n.\u0275providers}const cl="https://g.co/ng/security#xss";class P extends Error{constructor(e,t){super(function G(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Q(n){return"string"==typeof n?n:null==n?"":String(n)}function Kt(n,e){throw new P(-201,!1)}function Bi(n,e){null==n&&function et(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function en(n){return{providers:n.providers||[],imports:n.imports||[]}}function dl(n){return zh(n,jc)||zh(n,Go)}function zh(n,e){return n.hasOwnProperty(e)?n[e]:null}function hl(n){return n&&(n.hasOwnProperty(qh)||n.hasOwnProperty(Mm))?n[qh]:null}const jc=Re({\u0275prov:Re}),qh=Re({\u0275inj:Re}),Go=Re({ngInjectableDef:Re}),Mm=Re({ngInjectorDef:Re});var yt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(yt||{});let Gh;function ni(n){const e=Gh;return Gh=n,e}function pl(n,e,t){const r=dl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&yt.Optional?null:void 0!==e?e:void Kt(Ge(n))}const Zt=globalThis;class me{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Hc={},zc="__NG_DI_FLAG__",uo="ngTempTokenPath",Yh=/\n/gm,ns="__source";let xa;function lo(n){const e=xa;return xa=n,e}function Jh(n,e=yt.Default){if(void 0===xa)throw new P(-203,!1);return null===xa?pl(n,void 0,e):xa.get(n,e&yt.Optional?null:void 0,e)}function le(n,e=yt.Default){return(function fl(){return Gh}()||Jh)(Je(n),e)}function Fe(n,e=yt.Default){return le(n,_l(e))}function _l(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qc(n){const e=[];for(let t=0;t<n.length;t++){const r=Je(n[t]);if(Array.isArray(r)){if(0===r.length)throw new P(900,!1);let i,s=yt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=NI(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(le(i,s))}else e.push(le(r))}return e}function rs(n,e){return n[zc]=e,n.prototype[zc]=e,n}function NI(n){return n[zc]}function ho(n){return{toString:n}.toString()}var Na=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Na||{}),Gn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gn||{});const Hr={},At=[],yl=Re({\u0275cmp:Re}),ef=Re({\u0275dir:Re}),tf=Re({\u0275pipe:Re}),km=Re({\u0275mod:Re}),ri=Re({\u0275fac:Re}),Wc=Re({__NG_ELEMENT_ID__:Re}),Kc=Re({__NG_ENV_ID__:Re});function Fm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function vl(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ii(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function El(n){return 3===n||4===n||6===n}function Ii(n){return 64===n.charCodeAt(0)}function Oa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Lm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Lm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Il="ng-template";function wl(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Fm(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function nf(n){return 4===n.type&&n.value!==Il}function Vm(n,e,t){return e===(4!==n.type||t?n.value:Il)}function kI(n,e,t){let r=4;const i=n.attrs||[],s=function sf(n){for(let e=0;e<n.length;e++)if(El(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Vm(n,c,t)||""===c&&1===e.length){if(wi(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!wl(n.attrs,u,t)){if(wi(r))return!1;o=!0}continue}const m=rf(8&r?"class":c,i,nf(n),t);if(-1===m){if(wi(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==Fm(I,u,0)||2&r&&u!==y){if(wi(r))return!1;o=!0}}}}else{if(!o&&!wi(r)&&!wi(c))return!1;if(o&&wi(c))continue;o=!1,r=c|1&r}}return wi(r)||o}function wi(n){return 0==(1&n)}function rf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Um(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function bl(n,e,t=!1){for(let r=0;r<e.length;r++)if(kI(n,e[r],t))return!0;return!1}function cf(n,e){return n?":not("+e.trim()+")":e}function uf(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!wi(o)&&(e+=cf(s,i),i=""),r=o,s=s||!wi(r);t++}return""!==i&&(e+=cf(s,i)),e}function zr(n){return ho(()=>{const e=$m(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Na.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gn.Emulated,styles:n.styles||At,_:null,schemas:n.schemas||null,tView:null,id:""};Al(t);const r=n.dependencies;return t.directiveDefs=Dl(r,!1),t.pipeDefs=Dl(r,!0),t.id=function FI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Bm(n){return Dt(n)||sr(n)}function hf(n){return null!==n}function pn(n){return ho(()=>({type:n.type,bootstrap:n.bootstrap||At,declarations:n.declarations||At,imports:n.imports||At,exports:n.exports||At,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jm(n,e){if(null==n)return Hr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function qe(n){return ho(()=>{const e=$m(n);return Al(e),e})}function Dt(n){return n[yl]||null}function sr(n){return n[ef]||null}function pr(n){return n[tf]||null}function qr(n,e){const t=n[km]||null;if(!t&&!0===e)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return t}function $m(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Hr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||At,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jm(n.inputs,e),outputs:jm(n.outputs)}}function Al(n){n.features?.forEach(e=>e(n))}function Dl(n,e){if(!n)return null;const t=e?pr:Bm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(hf)}const gn=0,Oe=1,ot=2,mn=3,bi=4,Zc=5,gr=6,ka=7,$n=8,_s=9,Fa=10,at=11,Wo=12,Hm=13,po=14,Hn=15,Ko=16,La=17,ji=18,Qc=19,Sl=20,go=21,is=22,Yc=23,Zo=24,It=25,Rl=1,Ml=2,ys=7,Qo=9,br=11;function ii(n){return Array.isArray(n)&&"object"==typeof n[Rl]}function Gr(n){return Array.isArray(n)&&!0===n[Rl]}function zm(n){return 0!=(4&n.flags)}function Va(n){return n.componentOffset>-1}function gf(n){return 1==(1&n.flags)}function Ti(n){return!!n.template}function mf(n){return 0!=(512&n[ot])}function Yo(n,e){return n.hasOwnProperty(ri)?n[ri]:null}let Or=null,Ba=!1;function $i(n){const e=Or;return Or=n,e}const Zm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Qm(n){if(!_o(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Ym(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function xl(n){n.dirty=!0,function zn(n){if(void 0===n.liveConsumerNode)return;const e=Ba;Ba=!0;try{for(const t of n.liveConsumerNode)t.dirty||xl(t)}finally{Ba=e}}(n),n.consumerMarkedDirty?.(n)}function vf(n){return n&&(n.nextProducerIndex=0),$i(n)}function Jc(n,e){if($i(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(_o(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Nl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ym(n){Xo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Qm(t),r!==t.version))return!0}return!1}function Xm(n){if(Xo(n),_o(n))for(let e=0;e<n.producerNode.length;e++)Nl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Nl(n,e){if(function $a(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Xo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Nl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Xo(i),i.producerIndexOfThis[r]=e}}function _o(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Xo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ol=null;const i_=()=>{},Tf=(()=>({...Zm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:i_}))();class GI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Hi(){return s_}function s_(n){return n.type.prototype.ngOnChanges&&(n.setInput=WI),o_}function o_(){const n=c_(this),e=n?.current;if(e){const t=n.previous;if(t===Hr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WI(n,e,t,r){const i=this.declaredInputs[t],s=c_(n)||function Cf(n,e){return n[a_]=e}(n,{previous:Hr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new GI(c&&c.currentValue,e,a===Hr),n[r]=e}Hi.ngInherit=!0;const a_="__ngSimpleChanges__";function c_(n){return n[a_]||null}const vs=function(n,e,t){};function Qt(n){for(;Array.isArray(n);)n=n[gn];return n}function za(n,e){return Qt(e[n])}function si(n,e){return Qt(e[n.index])}function l_(n,e){return n.data[e]}function Wr(n,e){const t=e[n];return ii(t)?t:t[gn]}function Es(n,e){return null==e?null:n[e]}function Rf(n){n[La]=0}function YI(n){1024&n[ot]||(n[ot]|=1024,Vl(n,1))}function d_(n){1024&n[ot]&&(n[ot]&=-1025,Vl(n,-1))}function Vl(n,e){let t=n[mn];if(null===t)return;t[Zc]+=e;let r=t;for(t=t[mn];null!==t&&(1===e&&1===r[Zc]||-1===e&&0===r[Zc]);)t[Zc]+=e,r=t,t=t[mn]}const tt={lFrame:b_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function p_(){return tt.bindingsEnabled}function ge(){return tt.lFrame.lView}function Nt(){return tt.lFrame.tView}function Tr(){let n=__();for(;null!==n&&64===n.type;)n=n.parent;return n}function __(){return tt.lFrame.currentTNode}function Is(n,e){const t=tt.lFrame;t.currentTNode=n,t.isParent=e}function Of(){return tt.lFrame.isParent}function Cr(){const n=tt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qa(){return tt.lFrame.bindingIndex++}function rw(n,e){const t=tt.lFrame;t.bindingIndex=t.bindingRootIndex=n,nu(e)}function nu(n){tt.lFrame.currentDirectiveIndex=n}function Lf(n){tt.lFrame.currentQueryIndex=n}function Vf(n){const e=n[Oe];return 2===e.type?e.declTNode:1===e.type?n[gr]:null}function w_(n,e,t){if(t&yt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&yt.Host||(i=Vf(s),null===i||(s=s[po],10&i.type))););if(null===i)return!1;e=i,n=s}const r=tt.lFrame=Bf();return r.currentTNode=e,r.lView=n,!0}function Uf(n){const e=Bf(),t=n[Oe];tt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Bf(){const n=tt.lFrame,e=null===n?null:n.child;return null===e?b_(n):e}function b_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ru(){const n=tt.lFrame;return tt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T_=ru;function jf(){const n=ru();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Kr(){return tt.lFrame.selectedIndex}function ea(n){tt.lFrame.selectedIndex=n}function Cn(){const n=tt.lFrame;return l_(n.tView,n.selectedIndex)}let A_=!0;function $l(){return A_}function Gs(n){A_=n}function Hl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function zl(n,e,t){Gl(n,e,3,t)}function ql(n,e,t,r){(3&n[ot])===t&&Gl(n,e,t,r)}function Hf(n,e){let t=n[ot];(3&t)===e&&(t&=8191,t+=1,n[ot]=t)}function Gl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[La]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[La]+=65536),(a<s||-1==s)&&(lw(n,t,e,c),n[La]=(4294901760&n[La])+c+2),c++}function Wl(n,e){vs(4,n,e);const t=$i(null);try{e.call(n)}finally{$i(t),vs(5,n,e)}}function lw(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ot]>>13<n[La]>>16&&(3&n[ot])===e&&(n[ot]+=8192,Wl(a,s)):Wl(a,s)}const vo=-1;class iu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Kl(n){return n!==vo}function Ga(n){return 32767&n}function ou(n,e){let t=function hw(n){return n>>16}(n),r=e;for(;t>0;)r=r[po],t--;return r}let Gf=!0;function Zl(n){const e=Gf;return Gf=n,e}const Wf=255,S_=5;let gR=0;const Ts={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Oe];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(Kl(i)){const o=Ga(i),a=ou(i,e),c=a[Oe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=x_(i),null===r)return vo;if(t++,i=i[po],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return vo}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wc)&&(r=t[Wc]),null==r&&(r=t[Wc]=gR++);const i=r&Wf;e.data[n+(i>>S_)]|=1<<i}(n,e,t)}function J(n,e,t){if(t&yt.Optional||void 0!==n)return n;Kt()}function pe(n,e,t,r){if(t&yt.Optional&&void 0===r&&(r=null),!(t&(yt.Self|yt.Host))){const i=n[_s],s=ni(void 0);try{return i?i.get(e,r,t&yt.Optional):pl(e,r,t&yt.Optional)}finally{ni(s)}}return J(r,0,t)}function Le(n,e,t,r=yt.Default,i){if(null!==n){if(2048&e[ot]&&!(r&yt.Self)){const o=function P_(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ot]&&!(512&o[ot]);){const a=Ke(s,o,t,r|yt.Self,Ts);if(a!==Ts)return a;let c=s.parent;if(!c){const u=o[Sl];if(u){const f=u.get(t,Ts,r);if(f!==Ts)return f}c=x_(o),o=o[po]}s=c}return i}(n,e,t,r,Ts);if(o!==Ts)return o}const s=Ke(n,e,t,r,Ts);if(s!==Ts)return s}return pe(e,t,r,i)}function Ke(n,e,t,r,i){const s=function Ql(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Wc)?n[Wc]:void 0;return"number"==typeof e?e>=0?e&Wf:M_:e}(t);if("function"==typeof s){if(!w_(e,n,r))return r&yt.Host?J(i,0,r):pe(e,t,r,i);try{let o;if(o=s(r),null!=o||r&yt.Optional)return o;Kt()}finally{T_()}}else if("number"==typeof s){let o=null,a=g(n,e),c=vo,u=r&yt.Host?e[Hn][gr]:null;for((-1===a||r&yt.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==vo&&Yl(r,!1)?(o=e[Oe],a=Ga(c),e=ou(c,e)):a=-1);-1!==a;){const f=e[Oe];if(Kf(s,a,f.data)){const m=wt(a,e,t,o,r,u);if(m!==Ts)return m}c=e[a+8],c!==vo&&Yl(r,e[Oe].data[a+8]===u)&&Kf(s,a,e)?(o=f,a=Ga(c),e=ou(c,e)):a=-1}}return i}function wt(n,e,t,r,i,s){const o=e[Oe],a=o.data[n+8],f=function Ar(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const b=o[I];if(I<c&&t===b||I>=c&&b.type===t)return I}if(i){const I=o[c];if(I&&Ti(I)&&I.type===t)return c}return null}(a,o,t,null==r?Va(a)&&Gf:r!=o&&0!=(3&a.type),i&yt.Host&&s===a);return null!==f?oi(e,o,f,a):Ts}function oi(n,e,t,r){let i=n[t];const s=e.data;if(function D_(n){return n instanceof iu}(i)){const o=i;o.resolving&&function st(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new P(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ye(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Q(n)}(s[t]));const a=Zl(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ni(o.injectImpl):null;w_(n,r,yt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function uw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=s_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&ni(u),Zl(a),o.resolving=!1,T_()}}return i}function Kf(n,e,t){return!!(t[e+(n>>S_)]&1<<n)}function Yl(n,e){return!(n&yt.Self||n&yt.Host&&e)}class Dr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Le(this._tNode,this._lView,e,_l(r),t)}}function M_(){return new Dr(Tr(),ge())}function mr(n){return ho(()=>{const e=n.prototype.constructor,t=e[ri]||au(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ri]||au(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function au(n){return Ma(n)?()=>{const e=au(Je(n));return e&&e()}:Yo(n)}function x_(n){const e=n[Oe],t=e.type;return 2===t?e.declTNode:1===t?n[gr]:null}const Xl="__parameters__";function ed(n,e,t){return ho(()=>{const r=function fw(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(Xl)?c[Xl]:Object.defineProperty(c,Xl,{value:[]})[Xl];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function nd(n,e){n.forEach(t=>Array.isArray(t)?nd(t,e):e(t))}function _R(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function N_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ss(n,e,t){let r=rd(n,e);return r>=0?n[1|r]=t:(r=~r,function UH(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function pw(n,e){const t=rd(n,e);if(t>=0)return n[1|t]}function rd(n,e){return function yR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const _r=rs(ed("Optional"),8),Yf=rs(ed("SkipSelf"),4);function U_(n){return 128==(128&n.flags)}var Qa=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qa||{});const vw=new Map;let uz=0;const Iw="__ngContext__";function ai(n,e){ii(e)?(n[Iw]=e[Qc],function dz(n){vw.set(n[Qc],n)}(e)):n[Iw]=e}let ww;function bw(n,e){return ww(n,e)}function ep(n){const e=n[mn];return Gr(e)?e[mn]:e}function VR(n){return BR(n[Wo])}function UR(n){return BR(n[bi])}function BR(n){for(;null!==n&&!Gr(n);)n=n[bi];return n}function od(n,e,t,r,i){if(null!=r){let s,o=!1;Gr(r)?s=r:ii(r)&&(o=!0,r=r[gn]);const a=Qt(r);0===n&&null!==t?null==i?zR(e,t,a):cu(e,t,a,i||null,!0):1===n&&null!==t?cu(e,t,a,i||null,!0):2===n?function G_(n,e,t){const r=z_(n,e);r&&function Mz(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Nz(n,e,t,r,i){const s=t[ys];s!==Qt(t)&&od(e,n,r,s,i);for(let a=br;a<t.length;a++){const c=t[a];np(c[Oe],c,n,e,r,s)}}(e,n,s,t,i)}}function $_(n,e,t){return n.createElement(e,t)}function $R(n,e){const t=n[Qo],r=t.indexOf(e);d_(e),t.splice(r,1)}function H_(n,e){if(n.length<=br)return;const t=br+e,r=n[t];if(r){const i=r[Ko];null!==i&&i!==n&&$R(i,r),e>0&&(n[t-1][bi]=r[bi]);const s=N_(n,br+e);!function wz(n,e){np(n,e,e[at],2,null,null),e[gn]=null,e[gr]=null}(r[Oe],r);const o=s[ji];null!==o&&o.detachView(s[Oe]),r[mn]=null,r[bi]=null,r[ot]&=-129}return r}function Cw(n,e){if(!(256&e[ot])){const t=e[at];e[Yc]&&Xm(e[Yc]),e[Zo]&&Xm(e[Zo]),t.destroyNode&&np(n,e,t,3,null,null),function Cz(n){let e=n[Wo];if(!e)return Aw(n[Oe],n);for(;e;){let t=null;if(ii(e))t=e[Wo];else{const r=e[br];r&&(t=r)}if(!t){for(;e&&!e[bi]&&e!==n;)ii(e)&&Aw(e[Oe],e),e=e[mn];null===e&&(e=n),ii(e)&&Aw(e[Oe],e),t=e&&e[bi]}e=t}}(e)}}function Aw(n,e){if(!(256&e[ot])){e[ot]&=-129,e[ot]|=256,function Rz(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof iu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];vs(4,a,c);try{c.call(a)}finally{vs(5,a,c)}}else{vs(4,i,s);try{s.call(i)}finally{vs(5,i,s)}}}}}(n,e),function Sz(n,e){const t=n.cleanup,r=e[ka];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ka]=null);const i=e[go];if(null!==i){e[go]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Oe].type&&e[at].destroy();const t=e[Ko];if(null!==t&&Gr(e[mn])){t!==e[mn]&&$R(t,e);const r=e[ji];null!==r&&r.detachView(n)}!function hz(n){vw.delete(n[Qc])}(e)}}function Dw(n,e,t){return function HR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[gn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Gn.None||s===Gn.Emulated)return null}return si(r,t)}}(n,e.parent,t)}function cu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function zR(n,e,t){n.appendChild(e,t)}function qR(n,e,t,r,i){null!==r?cu(n,e,t,r,i):zR(n,e,t)}function z_(n,e){return n.parentNode(e)}let Sw,xw,K_,KR=function WR(n,e,t){return 40&n.type?si(n,t):null};function q_(n,e,t,r){const i=Dw(n,r,e),s=e[at],a=function GR(n,e,t){return KR(n,e,t)}(r.parent||e[gr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)qR(s,i,t[c],a,!1);else qR(s,i,t,a,!1);void 0!==Sw&&Sw(s,r,e,t,i)}function tp(n,e){if(null!==e){const t=e.type;if(3&t)return si(e,n);if(4&t)return Rw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return tp(n,r);{const i=n[e.index];return Gr(i)?Rw(-1,i):Qt(i)}}if(32&t)return bw(e,n)()||Qt(n[e.index]);{const r=QR(n,e);return null!==r?Array.isArray(r)?r[0]:tp(ep(n[Hn]),r):tp(n,e.next)}}return null}function QR(n,e){return null!==e?n[Hn][gr].projection[e.projection]:null}function Rw(n,e){const t=br+n+1;if(t<e.length){const r=e[t],i=r[Oe].firstChild;if(null!==i)return tp(r,i)}return e[ys]}function Mw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&ai(Qt(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)Mw(n,e,t.child,r,i,s,!1),od(e,n,i,a,s);else if(32&c){const u=bw(t,r);let f;for(;f=u();)od(e,n,i,f,s);od(e,n,i,a,s)}else 16&c?XR(n,e,r,t,i,s):od(e,n,i,a,s);t=o?t.projectionNext:t.next}}function np(n,e,t,r,i,s){Mw(t,r,n.firstChild,e,i,s,!1)}function XR(n,e,t,r,i,s){const o=t[Hn],c=o[gr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)od(e,n,i,c[u],s);else{let u=c;const f=o[mn];U_(r)&&(u.flags|=128),Mw(n,e,u,f,i,s,!0)}}function JR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&vl(n,e,r),null!==i&&JR(n,e,i),null!==s&&function kz(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function rM(n){return function Nw(){if(void 0===K_&&(K_=null,Zt.trustedTypes))try{K_=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return K_}()?.createScriptURL(n)||n}class uu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cl})`}}function os(n){return n instanceof uu?n.changingThisBreaksApplicationSecurity:n}function Eo(n,e){const t=function qz(n){return n instanceof uu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cl})`)}return t===e}const eq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Zr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Zr||{});function lu(n){const e=ip();return e?e.sanitize(Zr.URL,n)||"":Eo(n,"URL")?os(n):function Z_(n){return(n=String(n)).match(eq)?n:"unsafe:"+n}(Q(n))}function dM(n){const e=ip();if(e)return rM(e.sanitize(Zr.RESOURCE_URL,n)||"");if(Eo(n,"ResourceURL"))return rM(os(n));throw new P(904,!1)}function ip(){const n=ge();return n&&n[Fa].sanitizer}const sp=new me("ENVIRONMENT_INITIALIZER"),fM=new me("INJECTOR",-1),pM=new me("INJECTOR_DEF_TYPES");class Lw{get(e,t=Hc){if(t===Hc){const r=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw r.name="NullInjectorError",r}return t}}function hq(...n){return{\u0275providers:mM(0,n),\u0275fromNgModule:!0}}function mM(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return nd(e,o=>{const a=o;Y_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&_M(i,s),t}function _M(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Vw(i,s=>{e(s,r)})}}function Y_(n,e,t,r){if(!(n=Je(n)))return!1;let i=null,s=hl(n);const o=!s&&Dt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=hl(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Y_(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{nd(s.imports,f=>{Y_(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&_M(u,e)}if(!a){const u=Yo(i)||(()=>new i);e({provide:i,useFactory:u,deps:At},i),e({provide:pM,useValue:i,multi:!0},i),e({provide:sp,useValue:()=>le(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;Vw(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function Vw(n,e){for(let t of n)Pa(t)&&(t=t.\u0275providers),Array.isArray(t)?Vw(t,e):e(t)}const fq=Re({provide:String,useValue:Re});function Uw(n){return null!==n&&"object"==typeof n&&fq in n}function du(n){return"function"==typeof n}const Bw=new me("Set Injector scope."),X_={},gq={};let jw;function J_(){return void 0===jw&&(jw=new Lw),jw}class As{}class ud extends As{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hw(e,o=>this.processProvider(o)),this.records.set(fM,ld(void 0,this)),i.has("environment")&&this.records.set(As,ld(void 0,this));const s=this.records.get(Bw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pM.multi,At,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=lo(this),r=ni(void 0);try{return e()}finally{lo(t),ni(r)}}get(e,t=Hc,r=yt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Kc))return e[Kc](this);r=_l(r);const s=lo(this),o=ni(void 0);try{if(!(r&yt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function Eq(n){return"function"==typeof n||"object"==typeof n&&n instanceof me}(e)&&dl(e);c=u&&this.injectableDefInScope(u)?ld($w(e),X_):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&yt.Self?J_():this.parent).get(e,t=r&yt.Optional&&t===Hc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[uo]=a[uo]||[]).unshift(Ge(e)),s)throw a;return function OI(n,e,t,r){const i=n[uo];throw e[ns]&&i.unshift(e[ns]),n.message=function Gc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ge(e);if(Array.isArray(e))i=e.map(Ge).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ge(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Yh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[uo]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ni(o),lo(s)}}resolveInjectorInitializers(){const e=lo(this),t=ni(void 0);try{const i=this.get(sp.multi,At,yt.Self);for(const s of i)s()}finally{lo(e),ni(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let t=du(e=Je(e))?e:Je(e&&e.provide);const r=function _q(n){return Uw(n)?ld(void 0,n.useValue):ld(EM(n),X_)}(e);if(du(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ld(void 0,X_,!0),i.factory=()=>qc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===X_&&(t.value=gq,t.value=t.factory()),"object"==typeof t.value&&t.value&&function vq(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Je(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function $w(n){const e=dl(n),t=null!==e?e.factory:Yo(n);if(null!==t)return t;if(n instanceof me)throw new P(204,!1);if(n instanceof Function)return function mq(n){const e=n.length;if(e>0)throw function Qf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new P(204,!1);const t=function Rm(n){return n&&(n[jc]||n[Go])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new P(204,!1)}function EM(n,e,t){let r;if(du(n)){const i=Je(n);return Yo(i)||$w(i)}if(Uw(n))r=()=>Je(n.useValue);else if(function vM(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...qc(n.deps||[]));else if(function yM(n){return!(!n||!n.useExisting)}(n))r=()=>le(Je(n.useExisting));else{const i=Je(n&&(n.useClass||n.provide));if(!function yq(n){return!!n.deps}(n))return Yo(i)||$w(i);r=()=>new i(...qc(n.deps))}return r}function ld(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Hw(n,e){for(const t of n)Array.isArray(t)?Hw(t,e):t&&Pa(t)?Hw(t.\u0275providers,e):e(t)}const ey=new me("AppId",{providedIn:"root",factory:()=>Iq}),Iq="ng",IM=new me("Platform Initializer"),Ds=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wM=new me("AnimationModuleType"),zw=new me("CSP nonce",{providedIn:"root",factory:()=>function cd(){if(void 0!==xw)return xw;if(typeof document<"u")return document;throw new P(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bM=(n,e,t)=>null;function Xw(n,e,t=!1){return bM(n,e,t)}class Pq{}class AM{}class Nq{resolveComponentFactory(e){throw function xq(n){const e=Error(`No component factory found for ${Ge(n)}.`);return e.ngComponent=n,e}(e)}}let oy=(()=>{class n{static#e=this.NULL=new Nq}return n})();function Oq(){return fd(Tr(),ge())}function fd(n,e){return new Gi(si(n,e))}let Gi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Oq}return n})();class cp{}let na=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Fq(){const n=ge(),t=Wr(Tr().index,n);return(ii(t)?t:n)[at]}()}return n})(),Lq=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}return n})();class Ya{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const tb=new Ya("16.2.12"),nb={};function PM(n,e=null,t=null,r){const i=xM(n,e,t,r);return i.resolveInjectorInitializers(),i}function xM(n,e=null,t=null,r,i=new Set){const s=[t||At,hq(n)];return r=r||("object"==typeof n?void 0:Ge(n)),new ud(s,e||J_(),r||null,i)}let Qr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Hc;static#t=this.NULL=new Lw;static create(t,r){if(Array.isArray(t))return PM({name:""},r,t,"");{const i=t.name??"";return PM({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=ke({token:n,providedIn:"any",factory:()=>le(fM)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function ib(n){return n.ngOriginalError}class Ws{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ib(e);for(;t&&ib(t);)t=ib(t);return t||null}}function ob(n){return e=>{setTimeout(n,void 0,e)}}const Wn=class zq extends oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=ob(s),i&&(i=ob(i)),o&&(o=ob(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ft&&e.add(a),a}};function OM(...n){}class Mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wn(!1),this.onMicrotaskEmpty=new Wn(!1),this.onStable=new Wn(!1),this.onError=new Wn(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function qq(){const n="function"==typeof Zt.requestAnimationFrame;let e=Zt[n?"requestAnimationFrame":"setTimeout"],t=Zt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Kq(n){const e=()=>{!function Wq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Zt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,cb(n),n.isCheckStableRunning=!0,ab(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),cb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Qq(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return kM(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),FM(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return kM(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),FM(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,cb(n),ab(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mt.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(Mt.isInAngularZone())throw new P(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Gq,OM,OM);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Gq={};function ab(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FM(n){n._nesting--,ab(n)}class Zq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wn,this.onMicrotaskEmpty=new Wn,this.onStable=new Wn,this.onError=new Wn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const LM=new me("",{providedIn:"root",factory:VM});function VM(){const n=Fe(Mt);let e=!0;return S(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Mt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ue()))}function ra(n){return n instanceof Function?n():n}let ub=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function up(n){for(;n;){n[ot]|=64;const e=ep(n);if(mf(n)&&!e)return n;n=e}return null}const HM=new me("",{providedIn:"root",factory:()=>!1});let cy=null;function WM(n,e){return n[e]??QM()}function KM(n,e){const t=QM();t.producerNode?.length&&(n[e]=cy,t.lView=n,cy=ZM())}const a3={...Zm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{up(n.lView)},lView:null};function ZM(){return Object.create(a3)}function QM(){return cy??=ZM(),cy}const ft={};function Ht(n){YM(Nt(),ge(),Kr()+n,!1)}function YM(n,e,t,r){if(!r)if(3==(3&e[ot])){const s=n.preOrderCheckHooks;null!==s&&zl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ql(e,s,0,t)}ea(t)}function Ie(n,e=yt.Default){const t=ge();return null===t?le(n,e):Le(Tr(),t,Je(n),e)}function uy(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[gn]=i,m[ot]=140|r,(null!==u||n&&2048&n[ot])&&(m[ot]|=2048),Rf(m),m[mn]=m[po]=n,m[$n]=t,m[Fa]=o||n&&n[Fa],m[at]=a||n&&n[at],m[_s]=c||n&&n[_s]||null,m[gr]=s,m[Qc]=function lz(){return uz++}(),m[is]=f,m[Sl]=u,m[Hn]=2==e.type?n[Hn]:m,m}function md(n,e,t,r,i){let s=n.data[e];if(null===s)s=function lb(n,e,t,r,i){const s=__(),o=Of(),c=n.data[e]=function g3(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function yo(){return null!==tt.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function v_(){return tt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Jo(){const n=tt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Is(s,!0),s}function lp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function JM(n,e,t,r,i){const s=WM(e,Yc),o=Kr(),a=2&r;try{ea(-1),a&&e.length>It&&YM(n,e,It,!1),vs(a?2:0,i);const u=a?s:null,f=vf(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{Jc(u,f)}}finally{a&&null===e[Yc]&&KM(e,Yc),ea(o),vs(a?3:1,i)}}function db(n,e,t){if(zm(e)){const r=$i(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{$i(r)}}}function hb(n,e,t){p_()&&(function w3(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Va(t)&&function R3(n,e,t){const r=si(e,n),i=eP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=ly(n,uy(n,i,null,o,r,e,null,n[Fa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),ai(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=oi(e,n,a,t);ai(u,e),null!==o&&M3(0,a-i,u,c,0,o),Ti(c)&&(Wr(t.index,e)[$n]=oi(e,n,a,t))}}(n,e,t,si(t,e)),64==(64&t.flags)&&sP(n,e,t))}function fb(n,e,t=si){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function eP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=pb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pb(n,e,t,r,i,s,o,a,c,u,f){const m=It+r,y=m+i,I=function u3(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ft);return t}(m,y),b="function"==typeof u?u():u;return I[Oe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}let tP=n=>null;function nP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?rP(t,e,i,s):r.hasOwnProperty(i)&&rP(t,e,r[i],s)}return t}function rP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function as(n,e,t,r,i,s,o,a){const c=si(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(vb(n,t,f,r,i),Va(e)&&function y3(n,e){const t=Wr(e,n);16&t[ot]||(t[ot]|=64)}(t,e.index)):3&e.type&&(r=function _3(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function gb(n,e,t,r){if(p_()){const i=null===r?null:{"":-1},s=function T3(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(bl(e,o.selectors,!1))if(r||(r=[]),Ti(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),mb(n,e,a.length)}else r.unshift(o),mb(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&iP(n,e,t,o,i,a),i&&function C3(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new P(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Oa(t.mergedAttrs,t.attrs)}function iP(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function D3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=lp(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=Oa(t.mergedAttrs,f.hostAttrs),S3(n,t,e,c,f),A3(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function m3(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,b=y?y.outputs:null;c=nP(m.inputs,f,c,y?y.inputs:null),u=nP(m.outputs,f,u,b);const R=null===c||null===o||nf(e)?null:P3(c,f,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function sP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function E_(){return tt.lFrame.currentDirectiveIndex}();try{ea(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];nu(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&b3(c,u)}}finally{ea(-1),nu(o)}}function b3(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function mb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function A3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ti(e)&&(t[""]=n)}}function S3(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Yo(i.type)),o=new iu(s,Ti(i),Ie);n.blueprint[r]=o,t[r]=o,function E3(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function I3(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,lp(n,t,i.hostVars,ft),i)}function Io(n,e,t,r,i,s){const o=si(n,e);!function _b(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Q(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[at],o,s,n.value,t,r,i)}function M3(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)oP(r,t,o[a++],o[a++],o[a++])}function oP(n,e,t,r,i){const s=$i(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{$i(s)}}function P3(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function aP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function cP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Lf(t[r]),o.contentQueries(2,e[s],s)}}}function ly(n,e){return n[Wo]?n[Hm][bi]=e:n[Wo]=e,n[Hm]=e,e}function yb(n,e,t){Lf(0);const r=$i(null);try{e(n,t)}finally{$i(r)}}function hP(n,e){const t=n[_s],r=t?t.get(Ws,null):null;r&&r.handleError(e)}function vb(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];oP(n.data[o],e[o],r,a,i)}}function x3(n,e){const t=Wr(e,n),r=t[Oe];!function N3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[gn];null!==i&&null===t[is]&&(t[is]=Xw(i,t[_s])),Eb(r,t,t[$n])}function Eb(n,e,t){Uf(e);try{const r=n.viewQuery;null!==r&&yb(1,r,t);const i=n.template;null!==i&&JM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&cP(n,e),n.staticViewQueries&&yb(2,n.viewQuery,t);const s=n.components;null!==s&&function O3(n,e){for(let t=0;t<e.length;t++)x3(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ot]&=-5,jf()}}let fP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function qI(n,e,t){const r=Object.create(Tf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>xl(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Ym(r))return;r.hasRun=!0;const o=vf(r);try{r.cleanupFn(),r.cleanupFn=i_,r.fn(i)}finally{Jc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function dy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=hr(i,a):2==s&&(r=hr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function dp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Qt(s)),Gr(s)&&pP(s,r);const o=t.type;if(8&o)dp(n,e,t.child,r);else if(32&o){const a=bw(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=QR(e,t);if(Array.isArray(a))r.push(...a);else{const c=ep(e[Hn]);dp(c[Oe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pP(n,e){for(let t=br;t<n.length;t++){const r=n[t],i=r[Oe].firstChild;null!==i&&dp(r[Oe],r,i,e)}n[ys]!==n[gn]&&e.push(n[ys])}function hy(n,e,t,r=!0){const i=e[Fa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{gP(n,e,n.template,t)}catch(c){throw r&&hP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function gP(n,e,t,r){const i=e[ot];if(256!=(256&i)){e[Fa].effectManager?.flush(),Uf(e);try{Rf(e),function jl(n){return tt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&JM(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&zl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ql(e,u,0,null),Hf(e,0)}if(function L3(n){for(let e=VR(n);null!==e;e=UR(e)){if(!e[Ml])continue;const t=e[Qo];for(let r=0;r<t.length;r++){YI(t[r])}}}(e),mP(e,2),null!==n.contentQueries&&cP(n,e),o){const u=n.contentCheckHooks;null!==u&&zl(e,u)}else{const u=n.contentHooks;null!==u&&ql(e,u,1),Hf(e,1)}!function c3(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=WM(e,Zo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)ea(~s);else{const o=s,a=t[++i],c=t[++i];rw(a,o),r.dirty=!1;const u=vf(r);try{c(2,e[o])}finally{Jc(r,u)}}}}finally{null===e[Zo]&&KM(e,Zo),ea(-1)}}(n,e);const a=n.components;null!==a&&yP(e,a,0);const c=n.viewQuery;if(null!==c&&yb(2,c,r),o){const u=n.viewCheckHooks;null!==u&&zl(e,u)}else{const u=n.viewHooks;null!==u&&ql(e,u,2),Hf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ot]&=-73,d_(e)}finally{jf()}}}function mP(n,e){for(let t=VR(n);null!==t;t=UR(t))for(let r=br;r<t.length;r++)_P(t[r],e)}function V3(n,e,t){_P(Wr(e,n),t)}function _P(n,e){if(!function ZI(n){return 128==(128&n[ot])}(n))return;const t=n[Oe],r=n[ot];if(80&r&&0===e||1024&r||2===e)gP(t,n,t.template,n[$n]);else if(n[Zc]>0){mP(n,1);const i=t.components;null!==i&&yP(n,i,1)}}function yP(n,e,t){for(let r=0;r<e.length;r++)V3(n,e[r],t)}class hp{get rootNodes(){const e=this._lView,t=e[Oe];return dp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$n]}set context(e){this._lView[$n]=e}get destroyed(){return 256==(256&this._lView[ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[mn];if(Gr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(H_(e,r),N_(t,r))}this._attachedToViewContainer=!1}Cw(this._lView[Oe],this._lView)}onDestroy(e){!function h_(n,e){if(256==(256&n[ot]))throw new P(911,!1);null===n[go]&&(n[go]=[]),n[go].push(e)}(this._lView,e)}markForCheck(){up(this._cdRefInjectingView||this._lView)}detach(){this._lView[ot]&=-129}reattach(){this._lView[ot]|=128}detectChanges(){hy(this._lView[Oe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tz(n,e){np(n,e,e[at],2,null,null)}(this._lView[Oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e}}class U3 extends hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;hy(e[Oe],e,e[$n],!1)}checkNoChanges(){}get context(){return null}}class vP extends oy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Dt(e);return new fp(t,this.ngModule)}}function EP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class j3{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_l(r);const i=this.injector.get(e,nb,r);return i!==nb||t===nb?i:this.parentInjector.get(e,t,r)}}class fp extends AM{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=EP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return EP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Cl(n){return n.map(uf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof As?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new j3(e,s):e,a=o.get(cp,null);if(null===a)throw new P(407,!1);const m={rendererFactory:a,sanitizer:o.get(Lq,null),effectManager:o.get(fP,null),afterRenderEventManager:o.get(ub,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",b=r?function l3(n,e,t,r){const s=r.get(HM,!1)||t===Gn.ShadowDom,o=n.selectRootElement(e,s);return function d3(n){tP(n)}(o),o}(y,r,this.componentDef.encapsulation,o):$_(y,I,function B3(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==b&&(V=Xw(b,o,!0));const W=pb(0,null,null,1,0,null,null,null,null,null,null),te=uy(null,W,null,H,null,null,m,y,o,null,V);let we,Ne;Uf(te);try{const j=this.componentDef;let N,L=null;j.findHostDirectiveDefs?(N=[],L=new Map,j.findHostDirectiveDefs(j,N,L),N.push(j)):N=[j];const z=function H3(n,e){const t=n[Oe],r=It;return n[r]=e,md(t,r,2,"#host",null)}(te,b),q=function z3(n,e,t,r,i,s,o){const a=i[Oe];!function q3(n,e,t,r){for(const i of n)e.mergedAttrs=Oa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(dy(e,e.mergedAttrs,!0),null!==t&&eM(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Xw(e,i[_s]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=uy(i,eP(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&mb(a,n,r.length-1),ly(i,m),i[n.index]=m}(z,b,j,N,te,m,y);Ne=l_(W,It),b&&function W3(n,e,t,r){if(r)vl(n,t,["ng-version",tb.full]);else{const{attrs:i,classes:s}=function lf(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!wi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&vl(n,t,i),s&&s.length>0&&JR(n,t,s.join(" "))}}(y,j,b,r),void 0!==t&&function K3(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Ne,this.ngContentSelectors,t),we=function G3(n,e,t,r,i,s){const o=Tr(),a=i[Oe],c=si(o,i);iP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)ai(oi(i,a,o.directiveStart+f,o),i);sP(a,i,o),c&&ai(c,i);const u=oi(i,a,o.directiveStart+o.componentOffset,o);if(n[$n]=i[$n]=u,null!==s)for(const f of s)f(u,e);return db(a,o,n),u}(q,j,N,L,te,[Z3]),Eb(W,te,null)}finally{jf()}return new $3(this.componentType,we,fd(Ne,te),te,Ne)}}class $3 extends Pq{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new U3(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;vb(s[Oe],s,i,e,t),this.previousInputValues.set(e,t),up(Wr(this._tNode.index,s))}}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Z3(){const n=Tr();Hl(ge()[Oe],n)}function tn(n){let e=function IP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ti(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new P(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=fy(n.inputs),o.inputTransforms=fy(n.inputTransforms),o.declaredInputs=fy(n.declaredInputs),o.outputs=fy(n.outputs);const a=i.hostBindings;a&&J3(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&Y3(n,c),u&&X3(n,u),$t(n.inputs,i.inputs),$t(n.declaredInputs,i.declaredInputs),$t(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),$t(o.inputTransforms,i.inputTransforms)),Ti(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===tn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Q3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oa(i.hostAttrs,t=Oa(t,i.hostAttrs))}}(r)}function fy(n){return n===Hr?{}:n===At?[]:n}function Y3(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function X3(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function J3(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function CP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function py(n){return!!Ib(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ib(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function wo(n,e,t){return n[e]=t}function ci(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bo(n,e,t,r){const i=ge();return ci(i,qa(),e)&&(Nt(),Io(Cn(),i,n,e,t,r)),bo}function yd(n,e,t,r){return ci(n,qa(),t)?e+Q(t)+r:ft}function fu(n,e,t,r,i,s,o,a){const c=ge(),u=Nt(),f=n+It,m=u.firstCreatePass?function T4(n,e,t,r,i,s,o,a,c){const u=e.consts,f=md(e,n,4,o||null,Es(u,a));gb(e,t,f,Es(u,c)),Hl(e,f);const m=f.tView=pb(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];Is(m,!1);const y=VP(u,c,m,n);$l()&&q_(u,c,y,m),ai(y,c),ly(c,c[f]=aP(y,c,y,m)),gf(m)&&hb(u,c,m),null!=o&&fb(c,m,a)}let VP=function UP(n,e,t,r){return Gs(!0),e[at].createComment("")};function Wi(n,e,t){const r=ge();return ci(r,qa(),e)&&as(Nt(),Cn(),r,n,e,r[at],t,!1),Wi}function Db(n,e,t,r,i){const o=i?"class":"style";vb(n,t,e.inputs[o],o,r)}function Me(n,e,t,r){const i=ge(),s=Nt(),o=It+n,a=i[at],c=s.firstCreatePass?function R4(n,e,t,r,i,s){const o=e.consts,c=md(e,n,2,r,Es(o,i));return gb(e,t,c,Es(o,s)),null!==c.attrs&&dy(c,c.attrs,!1),null!==c.mergedAttrs&&dy(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=BP(s,i,c,a,e,n);i[o]=u;const f=gf(c);return Is(c,!0),eM(a,u,c),32!=(32&c.flags)&&$l()&&q_(s,i,u,c),0===function XI(){return tt.lFrame.elementDepthCount}()&&ai(u,i),function eu(){tt.lFrame.elementDepthCount++}(),f&&(hb(s,i,c),db(s,c,i)),null!==r&&fb(i,c),Me}function be(){let n=Tr();Of()?function tu(){tt.lFrame.isParent=!1}():(n=n.parent,Is(n,!1));const e=n;(function Pf(n){return tt.skipHydrationRootTNode===n})(e)&&function m_(){tt.skipHydrationRootTNode=null}(),function JI(){tt.lFrame.elementDepthCount--}();const t=Nt();return t.firstCreatePass&&(Hl(t,n),zm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function fR(n){return 0!=(8&n.flags)}(e)&&Db(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function zf(n){return 0!=(16&n.flags)}(e)&&Db(t,e,ge(),e.stylesWithoutHost,!1),be}function Rs(n,e,t,r){return Me(n,e,t,r),be(),Rs}let BP=(n,e,t,r,i,s)=>(Gs(!0),$_(r,i,function C_(){return tt.lFrame.currentNamespace}()));function yp(n){return!!n&&"function"==typeof n.then}function HP(n){return!!n&&"function"==typeof n.subscribe}function yr(n,e,t,r){const i=ge(),s=Nt(),o=Tr();return function qP(n,e,t,r,i,s,o){const a=gf(r),u=n.firstCreatePass&&function lP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[$n],m=function uP(n){return n[ka]||(n[ka]=[])}(e);let y=!0;if(3&r.type||o){const R=si(r,e),x=o?o(R):R,H=m.length,V=o?te=>o(Qt(te[r.index])):r.index;let W=null;if(!o&&a&&(W=function F4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ka],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,y=!1;else{s=WP(r,e,f,s,!1);const te=t.listen(x,i,s);m.push(s,te),u&&u.push(i,V,H,H+1)}}else s=WP(r,e,f,s,!1);const I=r.outputs;let b;if(y&&null!==I&&(b=I[i])){const R=b.length;if(R)for(let x=0;x<R;x+=2){const we=e[b[x]][b[x+1]].subscribe(s),Ne=m.length;m.push(s,we),u&&u.push(i,r.index,Ne,-(Ne+1))}}}(s,i,i[at],o,n,e,r),yr}function GP(n,e,t,r){try{return vs(6,e,t),!1!==t(r)}catch(i){return hP(n,i),!1}finally{vs(7,e,t)}}function WP(n,e,t,r,i){return function s(o){if(o===Function)return r;up(n.componentOffset>-1?Wr(n.index,e):e);let c=GP(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=GP(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function vp(n,e,t){return Ep(n,"",e,"",t),vp}function Ep(n,e,t,r,i){const s=ge(),o=yd(s,e,t,r);return o!==ft&&as(Nt(),Cn(),s,n,o,s[at],i,!1),Ep}function Ey(n,e){return n<<17|e<<2}function Ja(n){return n>>17&32767}function Mb(n){return 2|n}function pu(n){return(131068&n)>>2}function Pb(n,e){return-131069&n|e<<2}function xb(n){return 1|n}function nx(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ja(s):pu(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];z4(n[a],e)&&(c=!0,n[a+1]=r?xb(f):Mb(f)),a=r?Ja(f):pu(f)}c&&(n[t+1]=r?Mb(s):xb(s))}function z4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&rd(n,e)>=0}function Dd(n,e){return function Ks(n,e,t,r){const i=ge(),s=Nt(),o=function bs(n){const e=tt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function dx(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Kr()],o=function lx(n,e){return e>=n.expandoStartIndex}(n,t);(function gx(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function J4(n,e,t,r){const i=function Ff(n){const e=tt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ip(t=Nb(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Nb(i,n,e,t,r),null===s){let c=function eG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==pu(r))return n[Ja(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Nb(null,n,e,c[1],r),c=Ip(c,e.attrs,r),function tG(n,e,t,r){n[Ja(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function nG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ip(r,n[s].hostAttrs,t);return Ip(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function $4(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ja(o),c=pu(o);n[r]=t;let f,u=!1;if(Array.isArray(t)?(f=t[1],(null===f||rd(t,f)>0)&&(u=!0)):f=t,i)if(0!==c){const y=Ja(n[a+1]);n[r+1]=Ey(y,a),0!==y&&(n[y+1]=Pb(n[y+1],r)),n[a+1]=function B4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Ey(a,0),0!==a&&(n[a+1]=Pb(n[a+1],r)),a=r;else n[r+1]=Ey(c,0),0===a?a=r:n[c+1]=Pb(n[c+1],r),c=r;u&&(n[r+1]=Mb(n[r+1])),nx(n,f,r,!0),nx(n,f,r,!1),function H4(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&rd(s,e)>=0&&(t[r+1]=xb(t[r+1]))}(e,f,n,r,s),o=Ey(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ft&&ci(i,o,e)&&function fx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],f=function j4(n){return 1==(1&n)}(u)?px(c,e,t,i,pu(u),o):void 0;Iy(f)||(Iy(s)||function U4(n){return 2==(2&n)}(u)&&(s=px(c,null,t,i,a,o)),function Oz(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Qa.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qa.Important),n.setStyle(t,r,i,s))}}(r,o,za(Kr(),t),i,s))}(s,s.data[Kr()],i,i[at],n,i[o+1]=function oG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ge(os(n)))),n}(e,t),r,o)}(n,e,null,!0),Dd}function Nb(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ip(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Ip(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ss(n,o,!!t||e[++s]))}return void 0===n?null:n}function px(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=null===f;let y=t[i+1];y===ft&&(y=m?At:void 0);let I=m?pw(y,r):f===r?y:void 0;if(u&&!Iy(I)&&(I=pw(c,r)),Iy(I)&&(a=I,o))return a;const b=n[i+1];i=o?Ja(b):pu(b)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=pw(c,r))}return a}function Iy(n){return void 0!==n}function Ue(n,e=""){const t=ge(),r=Nt(),i=n+It,s=r.firstCreatePass?md(r,i,1,e,null):r.data[i],o=mx(r,t,s,e,n);t[i]=o,$l()&&q_(r,t,o,s),Is(s,!1)}let mx=(n,e,t,r,i)=>(Gs(!0),function j_(n,e){return n.createText(e)}(e[at],r));function kr(n){return Ob("",n,""),kr}function Ob(n,e,t){const r=ge(),i=yd(r,n,e,t);return i!==ft&&function ia(n,e,t){const r=za(e,n);!function jR(n,e,t){n.setValue(e,t)}(n[at],r,t)}(r,Kr(),i),Ob}const Rd="en-US";let Vx=Rd;function Lb(n,e,t,r,i){if(n=Je(n),Array.isArray(n))for(let s=0;s<n.length;s++)Lb(n[s],e,t,r,i);else{const s=Nt(),o=ge(),a=Tr();let c=du(n)?n:Je(n.provide);const u=EM(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(du(n)||!n.multi){const I=new iu(u,i,Ie),b=Ub(c,e,i?f:f+y,m);-1===b?(C(l(a,o),s,c),Vb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[b]=I,o[b]=I)}else{const I=Ub(c,e,f+y,m),b=Ub(c,e,f,f+y),x=b>=0&&t[b];if(i&&!x||!i&&!(I>=0&&t[I])){C(l(a,o),s,c);const H=function DW(n,e,t,r,i){const s=new iu(n,t,Ie);return s.multi=[],s.index=e,s.componentProviders=0,uN(s,i,r&&!t),s}(i?AW:CW,t.length,i,r,u);!i&&x&&(t[b].providerFactory=H),Vb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else Vb(s,n,I>-1?I:b,uN(t[i?b:I],u,!i&&r));!i&&r&&x&&t[b].componentProviders++}}}function Vb(n,e,t,r){const i=du(e),s=function pq(n){return!!n.useClass}(e);if(i||s){const c=(s?Je(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function uN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ub(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function CW(n,e,t,r){return Bb(this.multi,[])}function AW(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=oi(t,t[Oe],this.providerFactory.index,r);s=a.slice(0,o),Bb(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Bb(i,s);return s}function Bb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function On(n,e=[]){return t=>{t.providersResolver=(r,i)=>function TW(n,e,t){const r=Nt();if(r.firstCreatePass){const i=Ti(n);Lb(t,r.data,r.blueprint,i,!0),Lb(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class mu{}class lN{}class jb extends mu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vP(this);const i=qr(e);this._bootstrapComponents=ra(i.bootstrap),this._r3Injector=xM(e,t,[{provide:mu,useValue:this},{provide:oy,useValue:this.componentFactoryResolver},...r],Ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $b extends lN{constructor(e){super(),this.moduleType=e}create(e){return new jb(this.moduleType,e,[])}}class dN extends mu{constructor(e){super(),this.componentFactoryResolver=new vP(this),this.instance=null;const t=new ud([...e.providers,{provide:mu,useValue:this},{provide:oy,useValue:this.componentFactoryResolver}],e.parent||J_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Hb(n,e,t=null){return new dN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let MW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=mM(0,t.type),i=r.length>0?Hb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(le(As))})}return n})();function hN(n){n.getStandaloneInjector=e=>e.get(MW).getOrCreateStandaloneInjector(n)}function vN(n,e,t,r){return function IN(n,e,t,r,i,s){const o=e+t;return ci(n,o,i)?wo(n,o+1,s?r.call(s,i):r(i)):Dp(n,o+1)}(ge(),Cr(),n,e,t,r)}function EN(n,e,t,r,i){return function wN(n,e,t,r,i,s,o){const a=e+t;return function hu(n,e,t,r){const i=ci(n,e,t);return ci(n,e+1,r)||i}(n,a,i,s)?wo(n,a+2,o?r.call(o,i,s):r(i,s)):Dp(n,a+2)}(ge(),Cr(),n,e,t,r,i)}function Dp(n,e){const t=n[e];return t===ft?void 0:t}function n9(n,e,t,r=!0){const i=e[Oe];if(function Az(n,e,t,r){const i=br+r,s=t.length;r>0&&(t[i-1][bi]=e),r<s-br?(e[bi]=t[i],_R(t,br+r,e)):(t.push(e),e[bi]=null),e[mn]=t;const o=e[Ko];null!==o&&t!==o&&function Dz(n,e){const t=n[Qo];e[Hn]!==e[mn][mn][Hn]&&(n[Ml]=!0),null===t?n[Qo]=[e]:t.push(e)}(o,e);const a=e[ji];null!==a&&a.insertView(n),e[ot]|=128}(i,e,n,t),r){const s=Rw(t,n),o=e[at],a=z_(o,n[ys]);null!==a&&function bz(n,e,t,r,i,s){r[gn]=i,r[gr]=e,np(n,r,t,1,i,s)}(i,n[gr],o,e,a,s)}}Symbol;let sa=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=s9}return n})();const r9=sa,i9=class extends r9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function t9(n,e,t,r){const i=e.tView,a=uy(n,i,t,4096&n[ot]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ko]=n[e.index];const u=n[ji];return null!==u&&(a[ji]=u.createEmbeddedView(i)),Eb(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new hp(i)}};function s9(){return function Ay(n,e){return 4&n.type?new i9(e,n,fd(n,e)):null}(Tr(),ge())}let Qs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=d9}return n})();function d9(){return function xN(n,e){let t;const r=e[n.index];return Gr(r)?t=r:(t=aP(r,e,null,n),e[n.index]=t,ly(e,t)),NN(t,e,n,r),new MN(t,n,e)}(Tr(),ge())}const h9=Qs,MN=class extends h9{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return fd(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(Kl(e)){const t=ou(e,this._hostLView),r=Ga(e);return new Dr(t[Oe].data[r+8],t)}return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=PN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-br}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Zf(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new fp(Dt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const x=(o?u:this.parentInjector).get(As,null);x&&(s=x)}Dt(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function QI(n){return Gr(n[mn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[mn],f=new MN(u,u[gr],u[mn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return n9(a,i,o,!r),e.attachToViewContainerRef(),_R(Gb(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=PN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=H_(this._lContainer,t);r&&(N_(Gb(this._lContainer),t),Cw(r[Oe],r))}detach(e){const t=this._adjustIndex(e,-1),r=H_(this._lContainer,t);return r&&null!=N_(Gb(this._lContainer),t)?new hp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function PN(n){return n[8]}function Gb(n){return n[8]||(n[8]=[])}let NN=function ON(n,e,t,r){if(n[ys])return;let i;i=8&t.type?Qt(r):function f9(n,e){const t=n[at],r=t.createComment(""),i=si(e,n);return cu(t,z_(t,i),r,function Pz(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ys]=i};const rT=new me("Application Initializer");let iT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(rT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(yp(s))t.push(s);else if(HP(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ao=new me("LocaleId",{providedIn:"root",factory:()=>Fe(Ao,yt.Optional|yt.SkipSelf)||function z9(){return typeof $localize<"u"&&$localize.locale||Rd}()});let oO=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class W9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let aO=(()=>{class n{compileModuleSync(t){return new $b(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=ra(qr(t).declarations).reduce((o,a)=>{const c=Dt(a);return c&&o.push(new fp(c)),o},[]);return new W9(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dO=new me(""),My=new me("");let uT,aT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,uT||(function g6(n){uT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(le(Mt),le(cT),le(My))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),cT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return uT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ec=null;const hO=new me("AllowMultipleToken"),lT=new me("PlatformDestroyListeners"),dT=new me("appBootstrapListener");class pO{constructor(e,t){this.name=e,this.token=t}}function mO(n,e,t=[]){const r=`Platform: ${e}`,i=new me(r);return(s=[])=>{let o=hT();if(!o||o.injector.get(hO,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function y6(n){if(ec&&!ec.get(hO,!1))throw new P(400,!1);(function fO(){!function BI(n){Ol=n}(()=>{throw new P(600,!1)})})(),ec=n;const e=n.get(yO);(function gO(n){n.get(IM,null)?.forEach(t=>t())})(n)}(function _O(n=[],e){return Qr.create({name:e,providers:[{provide:Bw,useValue:"platform"},{provide:lT,useValue:new Set([()=>ec=null])},...n]})}(a,r))}return function E6(n){const e=hT();if(!e)throw new P(401,!1);return e}()}}function hT(){return ec?.get(yO)??null}let yO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function I6(n="zone.js",e){return"noop"===n?new Zq:"zone.js"===n?new Mt(e):n}(r?.ngZone,function vO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function RW(n,e,t){return new jb(n,e,t)}(t.moduleType,this.injector,function TO(n){return[{provide:Mt,useFactory:n},{provide:sp,multi:!0,useFactory:()=>{const e=Fe(b6,{optional:!0});return()=>e.initialize()}},{provide:bO,useFactory:w6},{provide:LM,useFactory:VM}]}(()=>i)),o=s.injector.get(Ws,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Py(this._modules,s),a.unsubscribe()})}),function EO(n,e,t){try{const r=t();return yp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(iT);return a.runInitializers(),a.donePromise.then(()=>(function Ux(n){Bi(n,"Expected localeId to be defined"),"string"==typeof n&&(Vx=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ao,Rd)||Rd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=IO({},r);return function m6(n,e,t){const r=new $b(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(_u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new P(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new P(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(lT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(le(Qr))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function IO(n,e){return Array.isArray(e)?e.reduce(IO,n):{...n,...e}}let _u=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(bO),this.zoneIsStable=Fe(LM),this.componentTypes=[],this.components=[],this.isStable=Fe(oO).hasPendingTasks.pipe(Be(t=>t?k(!1):this.zoneIsStable),nt(),ue()),this._injector=Fe(As)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof AM;if(!this._injector.get(iT).done)throw!i&&function fo(n){const e=Dt(n)||sr(n)||pr(n);return null!==e&&e.standalone}(t),new P(405,!1);let o;o=i?t:this._injector.get(oy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function _6(n){return n.isBoundToModule}(o)?void 0:this._injector.get(mu),u=o.create(Qr.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(dO,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Py(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Py(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(dT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Py(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Py(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const bO=new me("",{providedIn:"root",factory:()=>Fe(Ws).handleError.bind(void 0)});function w6(){const n=Fe(Mt),e=Fe(Ws);return t=>n.runOutsideAngular(()=>e.handleError(t))}let b6=(()=>{class n{constructor(){this.zone=Fe(Mt),this.applicationRef=Fe(_u)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let xy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=C6}return n})();function C6(n){return function A6(n,e,t){if(Va(n)&&!t){const r=Wr(n.index,e);return new hp(r,r)}return 47&n.type?new hp(e[Hn],e):null}(Tr(),ge(),16==(16&n))}class RO{constructor(){}supports(e){return py(e)}create(e){return new x6(e)}}const P6=(n,e)=>e;class x6{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||P6}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<PO(r,i,s)?t:r,a=PO(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,b=I+y;f<=b&&b<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!py(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function o4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new N6(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new MO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class N6{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class O6{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class MO{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new O6,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PO(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class xO{constructor(){}supports(e){return e instanceof Map||Ib(e)}create(){return new k6}}class k6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ib(e)))throw new P(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new F6(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class F6{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NO(){return new ky([new RO])}let ky=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:NO});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||NO()),deps:[[n,new Yf,new _r]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new P(901,!1)}}return n})();function OO(){return new Pp([new xO])}let Pp=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:OO});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||OO()),deps:[[n,new Yf,new _r]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new P(901,!1)}}return n})();const U6=mO(null,"core",[]);let B6=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(le(_u))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({})}return n})();function xd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let yT=null;function tc(){return yT}class e5{}const Kn=new me("DocumentToken");let vT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return Fe(n5)},providedIn:"platform"})}return n})();const t5=new me("Location Initialized");let n5=(()=>{class n extends vT{constructor(){super(),this._doc=Fe(Kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tc().getBaseHref(this._doc)}onPopState(t){const r=tc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=tc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function ET(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function HO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function oa(n){return n&&"?"!==n[0]?"?"+n:n}let vu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return Fe(qO)},providedIn:"root"})}return n})();const zO=new me("appBaseHref");let qO=(()=>{class n extends vu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(Kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ET(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+oa(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+oa(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+oa(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(vT),le(zO,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r5=(()=>{class n extends vu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ET(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+oa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+oa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(vT),le(zO,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),IT=(()=>{class n{constructor(t){this._subject=new Wn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function o5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(HO(GO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oa(r))}normalize(t){return n.stripTrailingSlash(function s5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,GO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oa(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oa(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=oa;static#t=this.joinWithSlash=ET;static#n=this.stripTrailingSlash=HO;static#r=this.\u0275fac=function(r){return new(r||n)(le(vu))};static#i=this.\u0275prov=ke({token:n,factory:function(){return function i5(){return new IT(le(vu))}()},providedIn:"root"})}return n})();function GO(n){return n.replace(/\/index.html$/,"")}const PT=/\s+/,t1=[];let n1=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=t1,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(PT):t1}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(PT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(PT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(ky),Ie(Pp),Ie(Gi),Ie(na))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class G5{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wy=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new G5(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),s1(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{s1(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(Qs),Ie(sa),Ie(ky))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function s1(n,e){n.context.$implicit=e.item}let xT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new W5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){o1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){o1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(Qs),Ie(sa))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class W5{constructor(){this.$implicit=null,this.ngIf=null}}function o1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ge(e)}'.`)}let u1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({})}return n})();const l1="browser";function Ky(n){return"server"===n}let w8=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new b8(le(Kn),window)})}return n})();class b8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function T8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class K8 extends e5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class UT extends K8{static makeCurrent(){!function J6(n){yT||(yT=n)}(new UT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Z8(){return kp=kp||document.querySelector("base"),kp?kp.getAttribute("href"):null}();return null==t?null:function Q8(n){Yy=Yy||document.createElement("a"),Yy.setAttribute("href",n);const e=Yy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function z5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Yy,kp=null,X8=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const BT=new me("EventManagerPlugins");let g1=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new P(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(le(BT),le(Mt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class m1{constructor(e){this._doc=e}}const jT="ng-app-id";let _1=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ky(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${jT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(jT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(jT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Kn),le(ey),le(zw,8),le(Ds))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const $T={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},HT=/%COMP%/g,nK=new me("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function v1(n,e){return e.map(t=>t.replace(HT,n))}let zT=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ky(a),this.defaultRenderer=new qT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gn.ShadowDom&&(r={...r,encapsulation:Gn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof I1?i.applyToHost(t):i instanceof GT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Gn.Emulated:s=new I1(c,u,r,this.appId,f,o,a,m);break;case Gn.ShadowDom:return new oK(c,u,t,r,o,a,this.nonce,m);default:s=new GT(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(le(g1),le(_1),le(ey),le(nK),le(Kn),le(Ds),le(Mt),le(zw))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class qT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($T[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(E1(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(E1(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=$T[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=$T[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qa.DashCase|Qa.Important)?e.style.setProperty(t,r,i&Qa.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=tc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function E1(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class oK extends qT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=v1(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class GT extends qT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?v1(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class I1 extends GT{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function rK(n){return"_ngcontent-%COMP%".replace(HT,n)}(u),this.hostAttr=function iK(n){return"_nghost-%COMP%".replace(HT,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let aK=(()=>{class n extends m1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(le(Kn))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const w1=["alt","control","meta","shift"],cK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let lK=(()=>{class n extends m1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),w1.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=cK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),w1.forEach(o=>{o!==i&&(0,uK[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(le(Kn))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const pK=mO(U6,"browser",[{provide:Ds,useValue:l1},{provide:IM,useValue:function dK(){UT.makeCurrent()},multi:!0},{provide:Kn,useFactory:function fK(){return function Uz(n){xw=n}(document),document},deps:[]}]),gK=new me(""),C1=[{provide:My,useClass:class Y8{addToWindow(e){Zt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new P(5103,!1);return s},Zt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zt.getAllAngularRootElements=()=>e.getAllRootElements(),Zt.frameworkStabilizers||(Zt.frameworkStabilizers=[]),Zt.frameworkStabilizers.push(r=>{const i=Zt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?tc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:dO,useClass:aT,deps:[Mt,cT,My]},{provide:aT,useClass:aT,deps:[Mt,cT,My]}],A1=[{provide:Bw,useValue:"root"},{provide:Ws,useFactory:function hK(){return new Ws},deps:[]},{provide:BT,useClass:aK,multi:!0,deps:[Kn,Mt,Ds]},{provide:BT,useClass:lK,multi:!0,deps:[Kn]},zT,_1,g1,{provide:cp,useExisting:zT},{provide:class C8{},useClass:X8,deps:[]},[]];let ZT,D1=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ey,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(gK,12))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({providers:[...A1,...C1],imports:[u1,B6]})}return n})(),S1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(le(Kn))};static#t=this.\u0275prov=ke({token:n,factory:function(r){let i=null;return i=r?new r:function _K(){return new S1(le(Kn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{ZT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ZT=!1}let Fp,N1=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function I8(n){return n===l1}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ZT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(le(Ds))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xy(n){return function wK(){if(null==Fp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fp=!0}))}finally{Fp=Fp||!1}return Fp}()?n:!!n.capture}function k1(n){return Array.isArray(n)?n:[n]}const{isArray:xK}=Array,{getPrototypeOf:NK,prototype:OK,keys:kK}=Object;function L1(n){if(1===n.length){const e=n[0];if(xK(e))return{args:e,keys:null};if(function FK(n){return n&&"object"==typeof n&&NK(n)===OK}(e)){const t=kK(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:LK}=Array;function V1(n){return xe(e=>function VK(n,e){return LK(e)?n(...e):n(e)}(n,e))}function U1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ev(...n){const e=jn(n),t=js(n),{args:r,keys:i}=L1(n);if(0===r.length)return T([],e);const s=new dt(function UK(n,e,t=wn){return r=>{B1(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)B1(e,()=>{const u=T(n[c],e);let f=!1;u.subscribe(Ce(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>U1(i,o):wn));return t?s.pipe(V1(t)):s}function B1(n,e,t){n?bn(t,n,e):e()}function tv(...n){return function BK(){return xr(1)}()(T(n,jn(n)))}function Iu(n){return n<=0?()=>Bn:se((e,t)=>{let r=0;e.subscribe(Ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function us(n,e){return se((t,r)=>{let i=0;t.subscribe(Ce(r,s=>n.call(e,s,i++)&&r.next(s)))})}class $K extends Ft{constructor(e,t){super()}schedule(e,t=0){return this}}const nv={setInterval(n,e,...t){const{delegate:r}=nv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=nv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class j1 extends $K{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return nv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&nv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,He(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const YT={now:()=>(YT.delegate||Date).now(),delegate:void 0};class Lp{constructor(e,t=Lp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Lp.now=YT.now;class $1 extends Lp{constructor(e,t=Lp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const XT=new $1(j1);function H1(n,e=XT){return se((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Ce(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Vp(...n){const e=jn(n);return se((t,r)=>{(e?tv(n,t,e):tv(n,t)).subscribe(r)})}function z1(n){return se((e,t)=>{Vt(n).subscribe(Ce(t,()=>t.complete(),ze)),!t.closed&&e.subscribe(t)})}const q1=new Set;let wu,HK=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):qK}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function zK(n,e){if(!q1.has(n))try{wu||(wu=document.createElement("style"),e&&(wu.nonce=e),wu.setAttribute("type","text/css"),document.head.appendChild(wu)),wu.sheet&&(wu.sheet.insertRule(`@media ${n} {body{ }}`,0),q1.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(N1),le(zw,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qK(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let GK=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return G1(k1(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=ev(G1(k1(t)).map(o=>this._registerQuery(o).observable));return s=tv(s.pipe(Iu(1)),s.pipe(function jK(n){return us((e,t)=>n<=t)}(1),H1(0))),s.pipe(xe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new dt(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Vp(r),xe(({matches:o})=>({query:t,matches:o})),z1(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(le(HK),le(Mt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G1(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Q1="cdk-high-contrast-black-on-white",Y1="cdk-high-contrast-white-on-black",JT="cdk-high-contrast-active";let rZ=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Fe(GK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(JT,Q1,Y1),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(JT,Q1):2===r&&t.add(JT,Y1)}}static#e=this.\u0275fac=function(r){return new(r||n)(le(N1),le(Kn))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({})}return n})();const aZ=new me("mat-sanity-checks",{providedIn:"root",factory:function oZ(){return!0}});let rc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function CK(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(le(rZ),le(aZ,8),le(Kn))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[X1,X1]})}return n})(),tk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[rc,rc]})}return n})();const nk=Xy({passive:!0,capture:!0});class lZ{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function TK(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nk)))}}class e0{static#e=this._eventManager=new lZ;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=F1(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...rk,...r.animation},o=r.radius||function hZ(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,b="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new uZ(this,f,r,b);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!b&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",H),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(b||!u)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...rk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=F1(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sk.forEach(r=>{e0._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ok.forEach(t=>{this._triggerElement.addEventListener(t,this,ik)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function eZ(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function tZ(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(sk.forEach(t=>e0._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&ok.forEach(t=>e.removeEventListener(t,this,ik)))}}let vZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[rc,u1,rc]})}return n})();function kd(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function Er(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ce(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):wn}function ic(n){return se((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ce(t,void 0,void 0,o=>{s=Vt(n(o,ic(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function rv(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Fd(n,e){return M(e)?on(n,e,1):on(n,1)}let XZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[rc,rc]})}return n})(),t7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[tk,rc,tk,rc]})}return n})();const uv=Te(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ak(n){return new dt(e=>{Vt(n()).subscribe(e)})}function u0(){return se((n,e)=>{let t=null;n._refCount++;const r=Ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Dk extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ft;const t=this.getSubject();e.add(this.source.subscribe(Ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ft.EMPTY)}return e}refCount(){return u0()(this)}}function lv(n){return se((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Sk(n=r7){return se((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function r7(){return new uv}function ac(n,e){const t=arguments.length>=2;return r=>r.pipe(n?us((i,s)=>n(i,s,r)):wn,Iu(1),t?lv(e):Sk(()=>new uv))}function dv(n,e){return se(function i7(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Ce(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function l0(n){return n<=0?()=>Bn:se((e,t)=>{let r=[];e.subscribe(Ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const gt="primary",Hp=Symbol("RouteTitle");class a7{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ld(n){return new a7(n)}function c7(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Do(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Rk(n[i],e[i]))return!1;return!0}function Rk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Mk(n){return n.length>0?n[n.length-1]:null}function cc(n){return function n7(n){return!!n&&(n instanceof dt||M(n.lift)&&M(n.subscribe))}(n)?n:yp(n)?T(Promise.resolve(n)):k(n)}const l7={exact:function Nk(n,e,t){if(!Au(n.segments,e.segments)||!hv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Nk(n.children[r],e.children[r],t))return!1;return!0},subset:Ok},Pk={exact:function d7(n,e){return Do(n,e)},subset:function h7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rk(n[t],e[t]))},ignored:()=>!0};function xk(n,e,t){return l7[t.paths](n.root,e.root,t.matrixParams)&&Pk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ok(n,e,t){return kk(n,e,e.segments,t)}function kk(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Au(i,t)||e.hasChildren()||!hv(i,t,r))}if(n.segments.length===t.length){if(!Au(n.segments,t)||!hv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ok(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Au(n.segments,i)&&hv(n.segments,i,r)&&n.children[gt])&&kk(n.children[gt],e,s,r)}}function hv(n,e,t){return e.every((r,i)=>Pk[t](n[i].parameters,r.parameters))}class Vd{constructor(e=new nn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return g7.serialize(this)}}class nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fv(this)}}class zp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ld(this.parameters)),this._parameterMap}toString(){return Vk(this)}}function Au(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let qp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new d0},providedIn:"root"})}return n})();class d0{parse(e){const t=new A7(e);return new Vd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gp(e.root,!0)}`,r=function y7(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${pv(t)}=${pv(i)}`).join("&"):`${pv(t)}=${pv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function m7(n){return encodeURI(n)}(e.fragment)}`:""}`}}const g7=new d0;function fv(n){return n.segments.map(e=>Vk(e)).join("/")}function Gp(n,e){if(!n.hasChildren())return fv(n);if(e){const t=n.children[gt]?Gp(n.children[gt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==gt&&r.push(`${i}:${Gp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function p7(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===gt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==gt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===gt?[Gp(n.children[gt],!1)]:[`${i}:${Gp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[gt]?`${fv(n)}/${t[0]}`:`${fv(n)}/(${t.join("//")})`}}function Fk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pv(n){return Fk(n).replace(/%3B/gi,";")}function h0(n){return Fk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gv(n){return decodeURIComponent(n)}function Lk(n){return gv(n.replace(/\+/g,"%20"))}function Vk(n){return`${h0(n.path)}${function _7(n){return Object.keys(n).map(e=>`;${h0(e)}=${h0(n[e])}`).join("")}(n.parameters)}`}const v7=/^[^\/()?;#]+/;function f0(n){const e=n.match(v7);return e?e[0]:""}const E7=/^[^\/()?;=#]+/,w7=/^[^=?&#]+/,T7=/^[^&#]+/;class A7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[gt]=new nn(e,t)),r}parseSegment(){const e=f0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new P(4009,!1);return this.capture(e),new zp(gv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function I7(n){const e=n.match(E7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=f0(this.remaining);i&&(r=i,this.capture(r))}e[gv(t)]=gv(r)}parseQueryParam(e){const t=function b7(n){const e=n.match(w7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function C7(n){const e=n.match(T7);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Lk(t),s=Lk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=f0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new P(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=gt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[gt]:new nn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new P(4011,!1)}}function Uk(n){return n.segments.length>0?new nn([],{[gt]:n}):n}function Bk(n){const e={};for(const r of Object.keys(n.children)){const s=Bk(n.children[r]);if(r===gt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function D7(n){if(1===n.numberOfChildren&&n.children[gt]){const e=n.children[gt];return new nn(n.segments.concat(e.segments),e.children)}return n}(new nn(n.segments,e))}function Du(n){return n instanceof Vd}function jk(n){let e;const i=Uk(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new nn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function $k(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return p0(i,i,i,t,r);const s=function R7(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new zk(t,e,r)}(e);if(s.toRoot())return p0(i,i,new nn([],{}),t,r);const o=function M7(n,e,t){if(n.isAbsolute)return new _v(e,!0,0);if(!t)return new _v(e,!1,NaN);if(null===t.parent)return new _v(t,!0,0);const r=mv(n.commands[0])?0:1;return function P7(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new _v(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Kp(o.segmentGroup,o.index,s.commands):qk(o.segmentGroup,o.index,s.commands);return p0(i,o.segmentGroup,a,t,r)}function mv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wp(n){return"object"==typeof n&&null!=n&&n.outlets}function p0(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:Hk(n,e,t);const a=Uk(Bk(o));return new Vd(a,s,i)}function Hk(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Hk(s,e,t)}),new nn(n.segments,r)}class zk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mv(r[0]))throw new P(4003,!1);const i=r.find(Wp);if(i&&i!==Mk(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _v{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qk(n,e,t){if(n||(n=new nn([],{})),0===n.segments.length&&n.hasChildren())return Kp(n,e,t);const r=function N7(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Wp(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!Wk(c,u,o))return s;r+=2}else{if(!Wk(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new nn(n.segments.slice(0,r.pathIndex),{});return s.children[gt]=new nn(n.segments.slice(r.pathIndex),n.children),Kp(s,0,i)}return r.match&&0===i.length?new nn(n.segments,{}):r.match&&!n.hasChildren()?g0(n,e,t):r.match?Kp(n,0,i):g0(n,e,t)}function Kp(n,e,t){if(0===t.length)return new nn(n.segments,{});{const r=function x7(n){return Wp(n[0])?n[0].outlets:{[gt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==gt)&&n.children[gt]&&1===n.numberOfChildren&&0===n.children[gt].segments.length){const s=Kp(n.children[gt],e,t);return new nn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=qk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new nn(n.segments,i)}}function g0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Wp(s)){const c=O7(s.outlets);return new nn(r,c)}if(0===i&&mv(t[0])){r.push(new zp(n.segments[e].path,Gk(t[0]))),i++;continue}const o=Wp(s)?s.outlets[gt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&mv(a)?(r.push(new zp(o,Gk(a))),i+=2):(r.push(new zp(o,{})),i++)}return new nn(r,{})}function O7(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=g0(new nn([],{}),0,r))}),e}function Gk(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Wk(n,e,t){return n==t.path&&Do(e,t.parameters)}const Zp="imperative";class So{constructor(e,t){this.id=e,this.url=t}}class yv extends So{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uc extends So{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qp extends So{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ud extends So{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class vv extends So{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kk extends So{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k7 extends So{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F7 extends So{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class L7 extends So{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V7 extends So{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U7{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class B7{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class j7{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class m0{}class _0{constructor(e){this.url=e}}class q7{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Yp,this.attachRef=null}}let Yp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new q7,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Qk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=y0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=y0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=v0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return v0(e,this._root).map(t=>t.value)}}function y0(n,e){if(n===e.value)return e;for(const t of e.children){const r=y0(n,t);if(r)return r}return null}function v0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=v0(n,t);if(r.length)return r.unshift(e),r}return[]}class la{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yk extends Qk{constructor(e,t){super(e),this.snapshot=t,E0(this,e)}toString(){return this.snapshot.toString()}}function Xk(n,e){const t=function G7(n,e){const o=new Ev([],{},{},"",{},gt,e,null,{});return new eF("",new la(o,[]))}(0,e),r=new w([new zp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new jd(r,i,o,a,s,gt,e,t.root);return c.snapshot=t.root,new Yk(new la(c,[]),t)}class jd{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(xe(u=>u[Hp]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(e=>Ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(e=>Ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function W7(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ev{get title(){return this.data?.[Hp]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eF extends Qk{constructor(e,t){super(t),this.url=e,E0(this,t)}toString(){return tF(this._root)}}function E0(n,e){e.value._routerState=n,e.children.forEach(t=>E0(n,t))}function tF(n){const e=n.children.length>0?` { ${n.children.map(tF).join(", ")} } `:"";return`${n.value}${e}`}function I0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Do(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Do(e.params,t.params)||n.paramsSubject.next(t.params),function u7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Do(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Do(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function w0(n,e){const t=Do(n.params,e.params)&&function f7(n,e){return Au(n,e)&&n.every((t,r)=>Do(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||w0(n.parent,e.parent))}let b0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new Wn,this.deactivateEvents=new Wn,this.attachEvents=new Wn,this.detachEvents=new Wn,this.parentContexts=Fe(Yp),this.location=Fe(Qs),this.changeDetector=Fe(xy),this.environmentInjector=Fe(As),this.inputBinder=Fe(Iv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new P(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new K7(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hi]})}return n})();class K7{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jd?this.route:e===Yp?this.childContexts:this.parent.get(e,t)}}const Iv=new me("");let nF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=ev([r.queryParams,r.params,r.data]).pipe(Be(([s,o,a],c)=>(a={...s,...o,...a},0===c?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function X6(n){const e=Dt(n);if(!e)return null;const t=new fp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function Xp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Q7(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xp(n,r,i);return Xp(n,r)})}(n,e,t);return new la(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Xp(n,a)),o}}const r=function Y7(n){return new jd(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Xp(n,s));return new la(r,i)}}const T0="ngNavigationCancelingError";function rF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function iF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[T0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function sF(n){return n&&n[T0]}let oF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["ng-component"]],standalone:!0,features:[hN],decls:1,vars:0,template:function(r,i){1&r&&Rs(0,"router-outlet")},dependencies:[b0],encapsulation:2})}return n})();function C0(n){const e=n.children&&n.children.map(C0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=oF),t}function Js(n){return n.outlet||gt}function Jp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class sQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),I0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Bd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Bd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new z7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $7(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(I0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),I0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Jp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class aF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wv{constructor(e,t){this.component=e,this.route=t}}function oQ(n,e,t){const r=n._root;return eg(r,e?e._root:null,t,[r.value])}function $d(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function PI(n){return null!==dl(n)}(n)?e.get(n):n:r}function eg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bd(e);return n.children.forEach(o=>{(function cQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function uQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Au(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Au(n.url,e.url)||!Do(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!w0(n,e)||!Do(n.queryParams,e.queryParams);default:return!w0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new aF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),eg(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wv(a.outlet.component,o))}else o&&tg(e,a,i),i.canActivateChecks.push(new aF(r)),eg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>tg(a,t.getContext(o),i)),i}function tg(n,e,t){const r=Bd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{tg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new wv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ng(n){return"function"==typeof n}function cF(n){return n instanceof uv||"EmptyError"===n?.name}const bv=Symbol("INITIAL_VALUE");function Hd(){return Be(n=>ev(n.map(e=>e.pipe(Iu(1),Vp(bv)))).pipe(xe(e=>{for(const t of e)if(!0!==t){if(t===bv)return bv;if(!1===t||t instanceof Vd)return t}return!0}),us(e=>e!==bv),Iu(1)))}function uF(n){return function yi(...n){return vi(n)}(Er(e=>{if(Du(e))throw rF(0,e)}),xe(e=>!0===e))}class Tv{constructor(e){this.segmentGroup=e||null}}class lF{constructor(e){this.urlTree=e}}function zd(n){return kd(new Tv(n))}function dF(n){return kd(new lF(n))}class RQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new P(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[gt])return kd(new P(4e3,!1));i=i.children[gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Vd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new nn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new P(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const A0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MQ(n,e,t,r,i){const s=D0(n,e,t);return s.matched?(r=function J7(n,e){return n.providers&&!n._injector&&(n._injector=Hb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function AQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=$d(o,n);return cc(function gQ(n){return n&&ng(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hd(),uF()):k(!0)}(r,e,t).pipe(xe(o=>!0===o?s:{...A0}))):k(s)}function D0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...A0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||c7)(t,n,e);if(!i)return{...A0};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function hF(n,e,t,r){return t.length>0&&function NQ(n,e,t){return t.some(r=>Cv(n,e,r)&&Js(r)!==gt)}(n,t,r)?{segmentGroup:new nn(e,xQ(r,new nn(t,n.children))),slicedSegments:[]}:0===t.length&&function OQ(n,e,t){return t.some(r=>Cv(n,e,r))}(n,t,r)?{segmentGroup:new nn(n.segments,PQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new nn(n.segments,n.children),slicedSegments:t}}function PQ(n,e,t,r,i){const s={};for(const o of r)if(Cv(n,t,o)&&!i[Js(o)]){const a=new nn([],{});s[Js(o)]=a}return{...i,...s}}function xQ(n,e){const t={};t[gt]=e;for(const r of n)if(""===r.path&&Js(r)!==gt){const i=new nn([],{});t[Js(r)]=i}return t}function Cv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class VQ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new RQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new P(4002,!1)}recognize(){const e=hF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,gt).pipe(ic(t=>{if(t instanceof lF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Tv?this.noMatchError(t):t}),xe(t=>{const r=new Ev([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,{}),i=new la(r,t),s=new eF("",i),o=function S7(n,e,t=null,r=null){return $k(jk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,gt).pipe(ic(r=>{throw r instanceof Tv?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Jk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return T(i).pipe(Fd(s=>{const o=r.children[s],a=function rQ(n,e){const t=n.filter(r=>Js(r)===e);return t.push(...n.filter(r=>Js(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),dv((s,o)=>(s.push(...o),s)),lv(null),function s7(n,e){const t=arguments.length>=2;return r=>r.pipe(n?us((i,s)=>n(i,s,r)):wn,l0(1),t?lv(e):Sk(()=>new uv))}(),on(s=>{if(null===s)return zd(r);const o=fF(s);return function UQ(n){n.sort((e,t)=>e.value.outlet===gt?-1:t.value.outlet===gt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return T(t).pipe(Fd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(ic(c=>{if(c instanceof Tv)return k(null);throw c}))),ac(a=>!!a),ic(a=>{if(cF(a))return function FQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):zd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function kQ(n,e,t,r){return!!(Js(n)===r||r!==gt&&Cv(e,t,n))&&("**"===n.path||D0(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):zd(i):zd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(on(o=>{const a=new nn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=D0(t,i,s);if(!a)return zd(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?dF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(on(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Mk(i).parameters:{};a=k({snapshot:new Ev(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pF(r),Js(r),r.component??r._loadedComponent??null,r,gF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=MQ(t,r,i,e).pipe(xe(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Ev(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pF(r),Js(r),r.component??r._loadedComponent??null,r,gF(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe(Be(c=>null===c?zd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Be(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:b,slicedSegments:R}=hF(t,y,I,u);if(0===R.length&&b.hasChildren())return this.processChildren(f,u,b).pipe(xe(H=>null===H?null:[new la(m,H)]));if(0===u.length&&0===R.length)return k([new la(m,[])]);const x=Js(r)===s;return this.processSegment(f,u,b,R,x?gt:s,!0).pipe(xe(H=>[new la(m,H)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function CQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=$d(o,n);return cc(function dQ(n){return n&&ng(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hd(),uF())}(e,t,r).pipe(on(i=>i?this.configLoader.loadChildren(e,t).pipe(Er(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function SQ(n){return kd(iF(!1,3))}())):k({routes:[],injector:e})}}function BQ(n){const e=n.value.routeConfig;return e&&""===e.path}function fF(n){const e=[],t=new Set;for(const r of n){if(!BQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=fF(r.children);e.push(new la(r.value,i))}return e.filter(r=>!t.has(r))}function pF(n){return n.data||{}}function gF(n){return n.resolve||{}}function mF(n){return"string"==typeof n.title||null===n.title}function S0(n){return Be(e=>{const t=n(e);return t?T(t).pipe(xe(()=>e)):k(e)})}const qd=new me("ROUTES");let R0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Fe(aO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=cc(t.loadComponent()).pipe(xe(_F),Er(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),rv(()=>{this.componentLoaders.delete(t)})),i=new Dk(r,()=>new oe).pipe(u0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function WQ(n,e,t,r){return cc(n.loadChildren()).pipe(xe(_F),on(i=>i instanceof lN||Array.isArray(i)?k(i):T(e.compileModuleAsync(i))),xe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(qd,[],{optional:!0,self:!0}).flat()),{routes:o.map(C0),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(rv(()=>{this.childrenLoaders.delete(r)})),o=new Dk(s,()=>new oe).pipe(u0());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _F(n){return function KQ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Av=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=Fe(R0),this.environmentInjector=Fe(As),this.urlSerializer=Fe(qp),this.rootContexts=Fe(Yp),this.inputBindingEnabled=null!==Fe(Iv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new B7(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new U7(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(s=>0!==s.id),xe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Be(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(Er(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Be(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Ud(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),Bn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(Be(y=>{const I=this.transitions?.getValue();return this.events.next(new yv(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?Bn:Promise.resolve(y)}),function jQ(n,e,t,r,i,s){return on(o=>function LQ(n,e,t,r,i,s,o="emptyOnly"){return new VQ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(xe(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Er(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new Kk(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:b,restoredState:R,extras:x}=c,H=new yv(y,this.urlSerializer.serialize(I),b,R);this.events.next(H);const V=Xk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:V,urlAfterRedirects:I,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const y="";return this.events.next(new Ud(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),Bn}}),Er(c=>{const u=new k7(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),xe(c=>(this.currentTransition=s={...c,guards:oQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function _Q(n,e){return on(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function yQ(n,e,t,r){return T(n).pipe(on(i=>function TQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const c=Jp(e)??i,u=$d(a,c);return cc(function pQ(n){return n&&ng(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(ac())})).pipe(Hd()):k(!0)}(i.component,i.route,t,e,r)),ac(i=>!0!==i,!0))}(o,r,i,n).pipe(on(a=>a&&function lQ(n){return"boolean"==typeof n}(a)?function vQ(n,e,t,r){return T(e).pipe(Fd(i=>tv(function IQ(n,e){return null!==n&&e&&e(new j7(n)),k(!0)}(i.route.parent,r),function EQ(n,e){return null!==n&&e&&e(new H7(n)),k(!0)}(i.route,r),function bQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function aQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Ak(()=>k(o.guards.map(c=>{const u=Jp(o.node)??t,f=$d(c,u);return cc(function fQ(n){return n&&ng(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(ac())})).pipe(Hd())));return k(s).pipe(Hd())}(n,i.path,t),function wQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>Ak(()=>{const o=Jp(e)??t,a=$d(s,o);return cc(function hQ(n){return n&&ng(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(ac())}));return k(i).pipe(Hd())}(n,i.route,t))),ac(i=>!0!==i,!0))}(r,s,n,e):k(a)),xe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Er(c=>{if(s.guardsResult=c.guardsResult,Du(c.guardsResult))throw rF(0,c.guardsResult);const u=new F7(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),us(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),S0(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Er(u=>{const f=new L7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Be(u=>{let f=!1;return k(u).pipe(function $Q(n,e){return on(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return T(i).pipe(Fd(o=>function HQ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!mF(i)&&(s[Hp]=i.title),function zQ(n,e,t,r){const i=function qQ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return T(i).pipe(on(o=>function GQ(n,e,t,r){const i=Jp(e)??r,s=$d(n,i);return cc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(ac(),Er(a=>{s[o]=a}))),l0(1),function o7(n){return xe(()=>n)}(s),ic(o=>cF(o)?Bn:kd(o)))}(s,n,e,r).pipe(xe(o=>(n._resolvedData=o,n.data=Jk(n,t).resolve,i&&mF(i)&&(n.data[Hp]=i.title),null)))}(o.route,r,n,e)),Er(()=>s++),l0(1),on(o=>s===i.length?k(t):Bn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Er({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),Er(u=>{const f=new V7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),S0(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Er(y=>{f.component=y}),xe(()=>{})));for(const y of f.children)m.push(...u(y));return m};return ev(u(c.targetSnapshot.root)).pipe(lv(),Iu(1))}),S0(()=>this.afterPreactivation()),xe(c=>{const u=function Z7(n,e,t){const r=Xp(n,e._root,t?t._root:void 0);return new Yk(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Er(()=>{this.events.next(new m0)}),((n,e,t,r)=>xe(i=>(new sQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Iu(1),Er({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new uc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),z1(this.transitionAbortSubject.pipe(Er(c=>{throw c}))),rv(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ic(c=>{if(a=!0,sF(c))this.events.next(new Qp(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function X7(n){return sF(n)&&Du(n.url)}(c)?this.events.next(new _0(c.url)):s.resolve(!1);else{this.events.next(new vv(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return Bn}))}))}cancelNavigationTransition(t,r,i){const s=new Qp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yF(n){return n!==Zp}let vF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===gt);return r}getResolvedTitleForRoute(t){return t.data[Hp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return Fe(ZQ)},providedIn:"root"})}return n})(),ZQ=(()=>{class n extends vF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(le(S1))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return Fe(XQ)},providedIn:"root"})}return n})();class YQ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let XQ=(()=>{class n extends YQ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=mr(n)))(i||n)}}();static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Dv=new me("",{providedIn:"root",factory:()=>({})});let JQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return Fe(eY)},providedIn:"root"})}return n})(),eY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rg||{});function EF(n,e){n.events.pipe(us(t=>t instanceof uc||t instanceof Qp||t instanceof vv||t instanceof Ud),xe(t=>t instanceof uc||t instanceof Ud?rg.COMPLETE:t instanceof Qp&&(0===t.code||1===t.code)?rg.REDIRECTING:rg.FAILED),us(t=>t!==rg.REDIRECTING),Iu(1)).subscribe(()=>{e()})}function tY(n){throw n}function nY(n,e,t){return e.parse("/")}const rY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Fe(sO),this.isNgZoneEnabled=!1,this._events=new oe,this.options=Fe(Dv,{optional:!0})||{},this.pendingTasks=Fe(oO),this.errorHandler=this.options.errorHandler||tY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||nY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Fe(JQ),this.routeReuseStrategy=Fe(QQ),this.titleStrategy=Fe(vF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Fe(qd,{optional:!0})?.flat()??[],this.navigationTransitions=Fe(Av),this.urlSerializer=Fe(qp),this.location=Fe(IT),this.componentInputBindingEnabled=!!Fe(Iv,{optional:!0}),this.eventsSubscription=new Ft,this.isNgZoneEnabled=Fe(Mt)instanceof Mt&&Mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(IF(r)&&this._events.next(r));if(r instanceof yv)yF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Ud)this.rawUrlTree=i.rawUrl;else if(r instanceof Kk){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof m0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Qp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof _0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yF(i.source)};this.scheduleNavigation(s,Zp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof vv&&this.restoreHistory(i,!0),r instanceof uc&&(this.navigated=!0),IF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Zp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(C0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=jk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return $k(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Du(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Zp,null,r)}navigate(t,r={skipLocationChange:!1}){return function sY(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new P(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...rY}:!1===r?{...iY}:r,Du(t))return xk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return xk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return EF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IF(n){return!(n instanceof m0||n instanceof _0)}let ig=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof uc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function hM(n,e,t){return function dq(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?dM:lu}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(xs),Ie(jd),function Ka(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(El(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Tr(),n)}("tabindex"),Ie(na),Ie(Gi),Ie(vu))};static#t=this.\u0275dir=qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&yr("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&bo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",xd],skipLocationChange:["skipLocationChange","skipLocationChange",xd],replaceUrl:["replaceUrl","replaceUrl",xd],routerLink:"routerLink"},standalone:!0,features:[CP,Hi]})}return n})();class wF{}let cY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(us(t=>t instanceof uc),Fd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Hb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return T(i).pipe(xr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(on(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?T([s,this.loader.loadComponent(r)]).pipe(xr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(le(xs),le(aO),le(As),le(wF),le(R0))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const M0=new me("");let bF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof uc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ud&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function XM(){throw new Error("invalid")}()};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function da(n,e){return{\u0275kind:n,\u0275providers:e}}function CF(){const n=Fe(Qr);return e=>{const t=n.get(_u);if(e!==t.components[0])return;const r=n.get(xs),i=n.get(AF);1===n.get(P0)&&r.initialNavigation(),n.get(DF,null,yt.Optional)?.setUpPreloading(),n.get(M0,null,yt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const AF=new me("",{factory:()=>new oe}),P0=new me("",{providedIn:"root",factory:()=>1}),DF=new me("");function hY(n){return da(0,[{provide:DF,useExisting:cY},{provide:wF,useExisting:n}])}const SF=new me("ROUTER_FORROOT_GUARD"),pY=[IT,{provide:qp,useClass:d0},xs,Yp,{provide:jd,useFactory:function TF(n){return n.routerState.root},deps:[xs]},R0,[]];function gY(){return new pO("Router",xs)}let RF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pY,[],{provide:qd,multi:!0,useValue:t},{provide:SF,useFactory:vY,deps:[[xs,new _r,new Yf]]},{provide:Dv,useValue:r||{}},r?.useHash?{provide:vu,useClass:r5}:{provide:vu,useClass:qO},{provide:M0,useFactory:()=>{const n=Fe(w8),e=Fe(Mt),t=Fe(Dv),r=Fe(Av),i=Fe(qp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new bF(i,r,n,e,t)}},r?.preloadingStrategy?hY(r.preloadingStrategy).\u0275providers:[],{provide:pO,multi:!0,useFactory:gY},r?.initialNavigation?EY(r):[],r?.bindToComponentInputs?da(8,[nF,{provide:Iv,useExisting:nF}]).\u0275providers:[],[{provide:MF,useFactory:CF},{provide:dT,multi:!0,useExisting:MF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:qd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(SF,8))};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({})}return n})();function vY(n){return"guarded"}function EY(n){return["disabled"===n.initialNavigation?da(3,[{provide:rT,multi:!0,useFactory:()=>{const e=Fe(xs);return()=>{e.setUpLocationChangeListener()}}},{provide:P0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?da(2,[{provide:P0,useValue:0},{provide:rT,multi:!0,deps:[Qr],useFactory:e=>{const t=e.get(t5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(xs),s=e.get(AF);EF(i,()=>{r(!0)}),e.get(Av).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const MF=new me("");let wY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-home"]],decls:35,vars:0,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"]],template:function(r,i){1&r&&(Me(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),Ue(4,"Bine ati venit in comunitatea "),Me(5,"a",3),Ue(6,"Romani in Seattle"),be()()()(),Rs(7,"p"),Me(8,"div",4)(9,"div",5)(10,"h2"),Ue(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),be(),Me(12,"p"),Ue(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),be()()(),Me(14,"div",4)(15,"div",6)(16,"h2"),Ue(17,"Evenimente"),be(),Me(18,"p"),Ue(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),be()(),Me(20,"div",6)(21,"h2"),Ue(22,"Servicii"),be(),Me(23,"p"),Ue(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),be()(),Me(25,"div",6)(26,"h2"),Ue(27,"Oportunit\u0103\u021bi"),be(),Me(28,"p"),Ue(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),be()(),Me(30,"div",6)(31,"h2"),Ue(32,"Resurse"),be(),Me(33,"p"),Ue(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),be()()()())},styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();var Qn=Xe(534);(0,Qn.registerVersion)("firebase","10.12.2","app");const DY=new class AY extends $1{}(class CY extends j1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),lc=new Ya("ANGULARFIRE2_VERSION");function x0(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Sv=(n,e)=>{const t=e?[e]:(0,Qn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class sg{constructor(){return Sv(SY)}}const SY="app-check";function Gd(){}class PF{zone;delegate;constructor(e,t=DY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class RY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gd,{},Gd,Gd)),t.pipe(Er({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new PF(Zone.current)),this.insideAngular=t.run(()=>new PF(Zone.current,XT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(le(Mt))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Su(n){return Kd().ngZone.run(()=>n())}function xF(n){return n.pipe(Tn(Kd().outsideAngular))}function Si(n){return function PY(n){return function(t){return(t=t.lift(new RY(n.ngZone))).pipe(Nr(n.outsideAngular),Tn(n.insideAngular))}}(Kd())(n)}const xY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Su(()=>n.apply(void 0,r))},N0=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Su(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gd,{},Gd,Gd))),r[s]=xY(r[s],t));const i=function MY(n){return Kd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof dt){const s=Kd();return i.pipe(Nr(s.outsideAngular),Tn(s.insideAngular))}return Su(()=>i)}return i instanceof dt?i.pipe(Si):i instanceof Promise?Su(()=>new Promise((s,o)=>i.then(a=>Su(()=>s(a)),a=>Su(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Su(()=>i)};var Ro=Xe(106);Ro.Z.registerVersion("firebase","10.12.2","app-compat");const kY=["ngOnDestroy"];class NF{constructor(e){return e}}const og=new me("angularfire2.app.options"),ag=new me("angularfire2.app.name");function Rv(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ro.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ro.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;VY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new NF(o)}const VY=(n,...e)=>{},UY={provide:NF,useFactory:Rv,deps:[og,Mt,[new _r,ag]]};let BY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:og,useValue:t},{provide:ag,useValue:r}]}}constructor(t){Ro.Z.registerVersion("angularfire",lc.full,"core"),Ro.Z.registerVersion("angularfire",lc.full,"app-compat"),Ro.Z.registerVersion("angular",tb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(Ds))};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[UY]})}return n})();function O0(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function jY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(OF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${$Y?" You may need to reload as Firebase is not HMR aware.":""}`),OF("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const $Y=typeof module<"u"&&!!module.hot,OF=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Xe(365);class HY extends oe{constructor(e=1/0,t=1/0,r=YT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function kF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ue({connector:()=>new HY(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function FF(n,e){return M(e)?Be(()=>n,e):Be(()=>n)}const LF=new me("angularfire2.auth.use-emulator"),VF=new me("angularfire2.auth.settings"),UF=new me("angularfire2.auth.tenant-id"),BF=new me("angularfire2.auth.langugage-code"),jF=new me("angularfire2.auth.use-device-language"),$F=new me("angularfire.auth.persistence"),HF=(n,e,t,r,i,s,o,a)=>O0(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let zF=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const b=new oe,R=k(void 0).pipe(Tn(o.outsideAngular),Be(()=>s.runOutsideAngular(()=>Promise.resolve().then(Xe.bind(Xe,365)))),xe(()=>Rv(t,s,r)),xe(x=>HF(x,s,a,u,f,m,c,y)),kF({bufferSize:1,refCount:!1}));if(Ky(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{R.pipe(ac()).subscribe();const x=R.pipe(Be(W=>W.getRedirectResult().then(te=>te,()=>null)),Si,kF({bufferSize:1,refCount:!1})),H=R.pipe(Be(W=>new dt(te=>({unsubscribe:s.runOutsideAngular(()=>W.onAuthStateChanged(we=>te.next(we),we=>te.error(we),()=>te.complete()))})))),V=R.pipe(Be(W=>new dt(te=>({unsubscribe:s.runOutsideAngular(()=>W.onIdTokenChanged(we=>te.next(we),we=>te.error(we),()=>te.complete()))}))));this.authState=x.pipe(FF(H),Nr(o.outsideAngular),Tn(o.insideAngular)),this.user=x.pipe(FF(V),Nr(o.outsideAngular),Tn(o.insideAngular)),this.idToken=this.user.pipe(Be(W=>W?T(W.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Be(W=>W?T(W.getIdTokenResult()):k(null))),this.credential=S(x,b,this.authState.pipe(us(W=>!W))).pipe(xe(W=>W?.user?W:null),Nr(o.outsideAngular),Tn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(kY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,R,s,{spy:{apply:(x,H,V)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&V.then(W=>b.next(W))}}})}static \u0275fac=function(r){return new(r||n)(le(og),le(ag,8),le(Ds),le(Mt),le(Wd),le(LF,8),le(VF,8),le(UF,8),le(BF,8),le(jF,8),le($F,8),le(sg,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function k0(){return se((n,e)=>{let t,r=!1;n.subscribe(Ce(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ru,WF,ae=Xe(861),Mv=Xe(537),Mo=Xe(879),pt=Xe(58),qF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},GF={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,N,L){L||(L=0);var z=Array(16);if("string"==typeof N)for(var q=0;16>q;++q)z[q]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(q=0;16>q;++q)z[q]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;var X=j.g[3],U=(N=j.g[0])+(X^(L=j.g[1])&((q=j.g[2])^X))+z[0]+3614090360&4294967295;U=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=L+(U<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[1]+3905402710&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[2]+606105819&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[3]+3250441966&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[4]+4118548399&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[5]+1200080426&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[6]+2821735955&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[7]+4249261313&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[8]+1770035416&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[9]+2336552879&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[10]+4294925233&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[11]+2304563134&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[12]+1804603682&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[13]+4254626195&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[14]+2792965006&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[15]+1236535329&4294967295)<<22&4294967295|U>>>10))+((U=N+(q^X&(L^q))+z[1]+4129170786&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[6]+3225465664&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[11]+643717713&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[0]+3921069994&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[5]+3593408605&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[10]+38016083&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[15]+3634488961&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[4]+3889429448&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[9]+568446438&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[14]+3275163606&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[3]+4107603335&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[8]+1163531501&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[13]+2850285829&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[2]+4243563512&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[7]+1735328473&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[12]+2368359562&4294967295)<<20&4294967295|U>>>12))+((U=N+(L^q^X)+z[5]+4294588738&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[8]+2272392833&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[11]+1839030562&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[14]+4259657740&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[1]+2763975236&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[4]+1272893353&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[7]+4139469664&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[10]+3200236656&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[13]+681279174&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[0]+3936430074&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[3]+3572445317&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[6]+76029189&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[9]+3654602809&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[12]+3873151461&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[15]+530742520&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[2]+3299628645&4294967295)<<23&4294967295|U>>>9))+((U=N+(q^(L|~X))+z[0]+4096336452&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[7]+1126891415&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[14]+2878612391&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[5]+4237533241&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[12]+1700485571&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[3]+2399980690&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[10]+4293915773&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[1]+2240044497&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[8]+1873313359&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[15]+4264355552&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[6]+2734768916&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[13]+1309151649&4294967295)<<21&4294967295|U>>>11))+((X=(N=L+((U=N+(q^(L|~X))+z[4]+4149444226&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[11]+3174756917&4294967295)<<10&4294967295|U>>>22))^((q=X+((U=q+(N^(X|~L))+z[2]+718787259&4294967295)<<15&4294967295|U>>>17))|~N))+z[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+X&4294967295}function o(j,N){this.h=N;for(var L=[],z=!0,q=j.length-1;0<=q;q--){var X=0|j[q];z&&X==N||(L[q]=X,z=!1)}this.g=L}(function e(j,N){function L(){}L.prototype=N.prototype,j.D=N.prototype,j.prototype=new L,j.prototype.constructor=j,j.C=function(z,q,X){for(var U=Array(arguments.length-2),ks=2;ks<arguments.length;ks++)U[ks-2]=arguments[ks];return N.prototype[q].apply(z,U)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,N){void 0===N&&(N=j.length);for(var L=N-this.blockSize,z=this.B,q=this.h,X=0;X<N;){if(0==q)for(;X<=L;)i(this,j,X),X+=this.blockSize;if("string"==typeof j){for(;X<N;)if(z[q++]=j.charCodeAt(X++),q==this.blockSize){i(this,z),q=0;break}}else for(;X<N;)if(z[q++]=j[X++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var L=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=255&L,L/=256;for(this.u(j),j=Array(16),N=L=0;4>N;++N)for(var z=0;32>z;z+=8)j[L++]=this.g[N]>>>z&255;return j};var a={};function c(j){return-128<=j&&128>j?function s(j,N){var L=a;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=N(j)}(j,function(N){return new o([0|N],0>N?-1:0)}):new o([0|j],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return x(u(-j));for(var N=[],L=1,z=0;j>=L;z++)N[z]=j/L|0,L*=4294967296;return new o(N,0)}var m=c(0),y=c(1),I=c(16777216);function b(j){if(0!=j.h)return!1;for(var N=0;N<j.g.length;N++)if(0!=j.g[N])return!1;return!0}function R(j){return-1==j.h}function x(j){for(var N=j.g.length,L=[],z=0;z<N;z++)L[z]=~j.g[z];return new o(L,~j.h).add(y)}function H(j,N){return j.add(x(N))}function V(j,N){for(;(65535&j[N])!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function W(j,N){this.g=j,this.h=N}function te(j,N){if(b(N))throw Error("division by zero");if(b(j))return new W(m,m);if(R(j))return N=te(x(j),N),new W(x(N.g),x(N.h));if(R(N))return N=te(j,x(N)),new W(x(N.g),N.h);if(30<j.g.length){if(R(j)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var L=y,z=N;0>=z.l(j);)L=we(L),z=we(z);var q=Ne(L,1),X=Ne(z,1);for(z=Ne(z,2),L=Ne(L,2);!b(z);){var U=X.add(z);0>=U.l(j)&&(q=q.add(L),X=U),z=Ne(z,1),L=Ne(L,1)}return N=H(j,q.j(N)),new W(q,N)}for(q=m;0<=j.l(N);){for(L=Math.max(1,Math.floor(j.m()/N.m())),z=48>=(z=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,z-48),U=(X=u(L)).j(N);R(U)||0<U.l(j);)U=(X=u(L-=z)).j(N);b(X)&&(X=y),q=q.add(X),j=H(j,U)}return new W(q,j)}function we(j){for(var N=j.g.length+1,L=[],z=0;z<N;z++)L[z]=j.i(z)<<1|j.i(z-1)>>>31;return new o(L,j.h)}function Ne(j,N){var L=N>>5;N%=32;for(var z=j.g.length-L,q=[],X=0;X<z;X++)q[X]=0<N?j.i(X+L)>>>N|j.i(X+L+1)<<32-N:j.i(X+L);return new o(q,j.h)}(n=o.prototype).m=function(){if(R(this))return-x(this).m();for(var j=0,N=1,L=0;L<this.g.length;L++){var z=this.i(L);j+=(0<=z?z:4294967296+z)*N,N*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(R(this))return"-"+x(this).toString(j);for(var N=u(Math.pow(j,6)),L=this,z="";;){var q=te(L,N).g,X=((0<(L=H(L,q.j(N))).g.length?L.g[0]:L.h)>>>0).toString(j);if(b(L=q))return X+z;for(;6>X.length;)X="0"+X;z=X+z}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return R(j=H(this,j))?-1:b(j)?0:1},n.abs=function(){return R(this)?x(this):this},n.add=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0,q=0;q<=N;q++){var X=z+(65535&this.i(q))+(65535&j.i(q)),U=(X>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);z=U>>>16,L[q]=(U&=65535)<<16|(X&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function(j){if(b(this)||b(j))return m;if(R(this))return R(j)?x(this).j(x(j)):x(x(this).j(j));if(R(j))return x(this.j(x(j)));if(0>this.l(I)&&0>j.l(I))return u(this.m()*j.m());for(var N=this.g.length+j.g.length,L=[],z=0;z<2*N;z++)L[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<j.g.length;q++){var X=this.i(z)>>>16,U=65535&this.i(z),ks=j.i(q)>>>16,kc=65535&j.i(q);L[2*z+2*q]+=U*kc,V(L,2*z+2*q),L[2*z+2*q+1]+=X*kc,V(L,2*z+2*q+1),L[2*z+2*q+1]+=U*ks,V(L,2*z+2*q+1),L[2*z+2*q+2]+=X*ks,V(L,2*z+2*q+2)}for(z=0;z<N;z++)L[z]=L[2*z+1]<<16|L[2*z];for(z=N;z<2*N;z++)L[z]=0;return new o(L,0)},n.A=function(j){return te(this,j).h},n.and=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)&j.i(z);return new o(L,this.h&j.h)},n.or=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)|j.i(z);return new o(L,this.h|j.h)},n.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)^j.i(z);return new o(L,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WF=GF.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(j,N){if(0==j.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==j.charAt(0))return x(f(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),z=m,q=0;q<j.length;q+=8){var X=Math.min(8,j.length-q),U=parseInt(j.substring(q,q+X),N);8>X?(X=u(Math.pow(N,X)),z=z.j(X).add(u(U))):z=(z=z.j(L)).add(u(U))}return z},Ru=GF.Integer=o}).apply(typeof qF<"u"?qF:typeof self<"u"?self:typeof window<"u"?window:{});var KF,ZF,cg,QF,xv,F0,YF,XF,JF,Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ha={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Pv&&Pv];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var K=h[D];if(!(K in E))break e;E=E[K]}(_=_(D=E[h=h[h.length-1]]))!=D&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,D=!1,K={next:function(){if(!D&&E<h.length){var ie=E++;return{value:_(ie,h[ie]),done:!1}}return D=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,D),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function b(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(D,K,ie){for(var De=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)De[hn-2]=arguments[hn];return _.prototype[K].apply(D,De)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let D=0;D<_;D++)E[D]=h[D];return E}return[]}function x(h,_){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const K=h.length||0,ie=D.length||0;h.length=K+ie;for(let De=0;De<ie;De++)h[K+De]=D[De]}else h.push(D)}}function V(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var we=!(-1==W().indexOf("Gecko")||-1!=W().toLowerCase().indexOf("webkit")&&-1==W().indexOf("Edge")||-1!=W().indexOf("Trident")||-1!=W().indexOf("MSIE")||-1!=W().indexOf("Edge"));function Ne(h,_,E){for(const D in h)_.call(E,h[D],D,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,D;for(let K=1;K<arguments.length;K++){for(E in D=arguments[K],D)h[E]=D[E];for(let ie=0;ie<L.length;ie++)E=L[ie],Object.prototype.hasOwnProperty.call(D,E)&&(h[E]=D[E])}}function q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function X(h){a.setTimeout(()=>{throw h},0)}function U(){var h=Pt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var kc=new class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new $e,h=>h.reset());class $e{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,Ye=!1,Pt=new class ks{constructor(){this.h=this.g=null}add(_,E){const D=kc.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}},ur=()=>{const h=a.Promise.resolve(void 0);Qe=()=>{h.then(Fs)}};var Fs=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(E){X(E)}var _=kc;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Ye=!1};function Xn(){this.s=this.s,this.C=this.C}function Rn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Xn.prototype.s=!1,Xn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Rn.prototype.h=function(){this.defaultPrevented=!0};var Mn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function Fc(h,_){if(Rn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(we){e:{try{te(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:_S[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Fc.aa.h.call(this)}}b(Fc,Rn);var _S={2:"touch",3:"pen",4:"mouse"};Fc.prototype.h=function(){Fc.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),Aa=0;function Ji(h,_,E,D,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=K,this.key=++Aa,this.da=this.fa=!1}function Da(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Lc(h){this.src=h,this.g={},this.h=0}function yS(h,_){var E=_.type;if(E in h.g){var ie,D=h.g[E],K=Array.prototype.indexOf.call(D,_,void 0);(ie=0<=K)&&Array.prototype.splice.call(D,K,1),ie&&(Da(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function vS(h,_,E,D){for(var K=0;K<h.length;++K){var ie=h[K];if(!ie.da&&ie.listener==_&&ie.capture==!!E&&ie.ha==D)return K}return-1}Lc.prototype.add=function(h,_,E,D,K){var ie=h.toString();(h=this.g[ie])||(h=this.g[ie]=[],this.h++);var De=vS(h,_,D,K);return-1<De?(_=h[De],E||(_.fa=!1)):((_=new Ji(_,this.src,ie,!!D,K)).fa=E,h.push(_)),_};var ES="closure_lm_"+(1e6*Math.random()|0),IS={};function D$(h,_,E,D,K){if(D&&D.once)return R$(h,_,E,D,K);if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)D$(h,_[ie],E,D,K);return null}return E=CS(E),h&&h[Jn]?h.K(_,E,u(D)?!!D.capture:!!D,K):S$(h,_,E,!1,D,K)}function S$(h,_,E,D,K,ie){if(!_)throw Error("Invalid event type");var De=u(K)?!!K.capture:!!K,hn=bS(h);if(hn||(h[ES]=hn=new Lc(h)),(E=hn.add(_,E,D,De,ie)).proxy)return E;if(D=function jae(){const _=$ae;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=D,D.src=h,D.listener=E,h.addEventListener)Mn||(K=De),void 0===K&&(K=!1),h.addEventListener(_.toString(),D,K);else if(h.attachEvent)h.attachEvent(P$(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return E}function R$(h,_,E,D,K){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)R$(h,_[ie],E,D,K);return null}return E=CS(E),h&&h[Jn]?h.L(_,E,u(D)?!!D.capture:!!D,K):S$(h,_,E,!0,D,K)}function M$(h,_,E,D,K){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)M$(h,_[ie],E,D,K);else D=u(D)?!!D.capture:!!D,E=CS(E),h&&h[Jn]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=vS(ie=h.g[_],E,D,K))&&(Da(ie[E]),Array.prototype.splice.call(ie,E,1),0==ie.length&&(delete h.g[_],h.h--))):h&&(h=bS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=vS(_,E,D,K)),(E=-1<h?_[h]:null)&&wS(E))}function wS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Jn])yS(_.i,h);else{var E=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(E,D,h.capture):_.detachEvent?_.detachEvent(P$(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=bS(_))?(yS(E,h),0==E.h&&(E.src=null,_[ES]=null)):Da(h)}}}function P$(h){return h in IS?IS[h]:IS[h]="on"+h}function $ae(h,_){if(h.da)h=!0;else{_=new Fc(_,this);var E=h.listener,D=h.ha||h.src;h.fa&&wS(h),h=E.call(D,_)}return h}function bS(h){return(h=h[ES])instanceof Lc?h:null}var TS="__closure_events_fn_"+(1e9*Math.random()>>>0);function CS(h){return"function"==typeof h?h:(h[TS]||(h[TS]=function(_){return h.handleEvent(_)}),h[TS])}function gi(){Xn.call(this),this.i=new Lc(this),this.M=this,this.F=null}function Oi(h,_){var E,D=h.F;if(D)for(E=[];D;D=D.F)E.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new Rn(_,h);else if(_ instanceof Rn)_.target=_.target||h;else{var K=_;z(_=new Rn(D,h),K)}if(K=!0,E)for(var ie=E.length-1;0<=ie;ie--){var De=_.g=E[ie];K=pI(De,D,!0,_)&&K}if(K=pI(De=_.g=h,D,!0,_)&&K,K=pI(De,D,!1,_)&&K,E)for(ie=0;ie<E.length;ie++)K=pI(De=_.g=E[ie],D,!1,_)&&K}function pI(h,_,E,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,ie=0;ie<_.length;++ie){var De=_[ie];if(De&&!De.da&&De.capture==E){var hn=De.listener,ei=De.ha||De.src;De.fa&&yS(h.i,De),K=!1!==hn.call(ei,D)&&K}}return K&&!D.defaultPrevented}function x$(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function N$(h){h.g=x$(()=>{h.g=null,h.i&&(h.i=!1,N$(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(gi,Xn),gi.prototype[Jn]=!0,gi.prototype.removeEventListener=function(h,_,E,D){M$(this,h,_,E,D)},gi.prototype.N=function(){if(gi.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],D=0;D<E.length;D++)Da(E[D]);delete h.g[_],h.h--}}this.F=null},gi.prototype.K=function(h,_,E,D){return this.i.add(String(h),_,!1,E,D)},gi.prototype.L=function(h,_,E,D){return this.i.add(String(h),_,!0,E,D)};class Hae extends Xn{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:N$(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hm(h){Xn.call(this),this.h=h,this.g={}}b(hm,Xn);var O$=[];function k$(h){Ne(h.g,function(_,E){this.g.hasOwnProperty(E)&&wS(_)},h),h.g={}}hm.prototype.N=function(){hm.aa.N.call(this),k$(this)},hm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var AS=a.JSON.stringify,zae=a.JSON.parse,qae=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function DS(){}function L$(){}DS.prototype.h=null;var fm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function SS(){Rn.call(this,"d")}function RS(){Rn.call(this,"c")}b(SS,Rn),b(RS,Rn);var il={},V$=null;function gI(){return V$=V$||new gi}function U$(h){Rn.call(this,il.La,h)}function pm(h){const _=gI();Oi(_,new U$(_))}function B$(h,_){Rn.call(this,il.STAT_EVENT,h),this.stat=_}function ki(h){const _=gI();Oi(_,new B$(_,h))}function j$(h,_){Rn.call(this,il.Ma,h),this.size=_}function gm(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function mm(){this.g=!0}function Bh(h,_,E,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Zae(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var D=E[h];if(!(2>D.length)){var K=D[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var De=1;De<K.length;De++)K[De]=""}}}return AS(E)}catch{return _}}(h,E)+(D?" "+D:"")})}il.La="serverreachability",b(U$,Rn),il.STAT_EVENT="statevent",b(B$,Rn),il.Ma="timingevent",b(j$,Rn),mm.prototype.xa=function(){this.g=!1},mm.prototype.info=function(){};var MS,mI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function _I(){}function Vc(h,_,E,D){this.j=h,this.i=_,this.l=E,this.R=D||1,this.U=new hm(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new H$}function H$(){this.i=null,this.g="",this.h=!1}b(_I,DS),_I.prototype.g=function(){return new XMLHttpRequest},_I.prototype.i=function(){return{}},MS=new _I;var z$={},PS={};function xS(h,_,E){h.L=1,h.v=II(Sa(_)),h.m=E,h.P=!0,q$(h,null)}function q$(h,_){h.F=Date.now(),yI(h),h.A=Sa(h.v);var E=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),sH(E.i,"t",D),h.C=0,E=h.j.J,h.h=new H$,h.g=bH(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Hae(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,D=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(O$[0]=K.toString()),K=O$);for(var ie=0;ie<K.length;ie++){var De=D$(E,K[ie],D||_.handleEvent,!1,_.h||_);if(!De)break;_.g[De.key]=De}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),pm(),function Gae(h,_,E,D,K,ie){h.info(function(){if(h.g)if(ie)for(var De="",hn=ie.split("&"),ei=0;ei<hn.length;ei++){var zt=hn[ei].split("=");if(1<zt.length){var mi=zt[0];zt=zt[1];var _i=mi.split("_");De=2<=_i.length&&"type"==_i[1]?De+(mi+"=")+zt+"&":De+(mi+"=redacted&")}}else De=null;else De=ie;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+_+"\n"+E+"\n"+De})}(h.i,h.u,h.A,h.l,h.R,h.m)}function G$(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Qae(h,_){var E=h.C,D=_.indexOf("\n",E);return-1==D?PS:(E=Number(_.substring(E,D)),isNaN(E)?z$:(D+=1)+E>_.length?PS:(_=_.slice(D,D+E),h.C=D+E,_))}function yI(h){h.S=Date.now()+h.I,W$(h,h.I)}function W$(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=gm(y(h.ba,h),_)}function NS(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function _m(h){0==h.j.G||h.J||vH(h.j,h)}function sl(h){NS(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,k$(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function OS(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||kS(E.h,h)))if(!h.K&&kS(E.h,h)&&3==E.G){try{var D=E.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var K=D;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;AI(E),TI(E)}US(E),ki(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=gm(y(E.Za,E),6e3));if(1>=Q$(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else al(E,11)}else if((h.K||E.g==h)&&AI(E),!V(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let zt=K[_];if(E.T=zt[0],zt=zt[1],2==E.G)if("c"==zt[0]){E.K=zt[1],E.ia=zt[2];const mi=zt[3];null!=mi&&(E.la=mi,E.j.info("VER="+E.la));const _i=zt[4];null!=_i&&(E.Aa=_i,E.j.info("SVER="+E.Aa));const Hh=zt[5];null!=Hh&&"number"==typeof Hh&&0<Hh&&(E.L=D=1.5*Hh,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const no=h.g;if(no){const SI=no.g?no.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(SI){var ie=D.h;ie.g||-1==SI.indexOf("spdy")&&-1==SI.indexOf("quic")&&-1==SI.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(FS(ie,ie.h),ie.h=null))}if(D.D){const jS=no.g?no.g.getResponseHeader("X-HTTP-Session-Id"):null;jS&&(D.ya=jS,Pn(D.I,D.D,jS))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var De=h;if((D=E).qa=wH(D,D.J?D.ia:null,D.W),De.K){Y$(D.h,De);var hn=De,ei=D.L;ei&&(hn.I=ei),hn.B&&(NS(hn),yI(hn)),D.g=De}else _H(D);0<E.i.length&&CI(E)}else"stop"!=zt[0]&&"close"!=zt[0]||al(E,7);else 3==E.G&&("stop"==zt[0]||"close"==zt[0]?"stop"==zt[0]?al(E,7):VS(E):"noop"!=zt[0]&&E.l&&E.l.ta(zt),E.v=0)}pm()}catch{}}function K$(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Z$(h){return!!h.h||!!h.g&&h.g.size>=h.j}function Q$(h){return h.h?1:h.g?h.g.size:0}function kS(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function FS(h,_){h.g?h.g.add(_):h.h=_}function Y$(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function X$(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function J$(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Jae(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const D in h)_[E++]=D;return _}}}(h),D=function Xae(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,D=0;D<E;D++)_.push(h[D]);return _}for(D in _=[],E=0,h)_[E++]=h[D];return _}(h),K=D.length,ie=0;ie<K;ie++)_.call(void 0,D[ie],E&&E[ie],h)}Vc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Ra(h)?_.j():this.Y(h)},Vc.prototype.Y=function(h){try{if(h==this.g)e:{const _i=Ra(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>_i)&&(3!=_i||this.g&&(this.h.h||this.g.oa()||hH(this.g)))){this.J||4!=_i||7==_||pm(),NS(this);var E=this.g.Z();this.X=E;t:if(G$(this)){var D=hH(this.g);h="";var K=D.length,ie=4==Ra(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sl(this),_m(this);var De="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ie&&_==K-1)});D.length=0,this.h.g+=h,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==E,function Wae(h,_,E,D,K,ie,De){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+ie+" "+De})}(this.i,this.u,this.A,this.l,this.R,_i,E),this.o){if(this.T&&!this.K){t:{if(this.g){var hn,ei=this.g;if((hn=ei.g?ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(hn)){var zt=hn;break t}}zt=null}if(!(E=zt)){this.o=!1,this.s=3,ki(12),sl(this),_m(this);break e}Bh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,OS(this,E)}if(this.P){let no;for(E=!0;!this.J&&this.C<De.length;){if(no=Qae(this,De),no==PS){4==_i&&(this.s=4,ki(14),E=!1),Bh(this.i,this.l,null,"[Incomplete Response]");break}if(no==z$){this.s=4,ki(15),Bh(this.i,this.l,De,"[Invalid Chunk]"),E=!1;break}Bh(this.i,this.l,no,null),OS(this,no)}if(G$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=_i||0!=De.length||this.h.h||(this.s=1,ki(16),E=!1),this.o=this.o&&E,E){if(0<De.length&&!this.W){this.W=!0;var mi=this.j;mi.g==this&&mi.ba&&!mi.M&&(mi.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),BS(mi),mi.M=!0,ki(11))}}else Bh(this.i,this.l,De,"[Invalid Chunked Response]"),sl(this),_m(this)}else Bh(this.i,this.l,De,null),OS(this,De);4==_i&&sl(this),this.o&&!this.J&&(4==_i?vH(this.j,this):(this.o=!1,yI(this)))}else(function fce(h){const _={};h=(h.g&&2<=Ra(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(V(h[D]))continue;var E=q(h[D]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ie=_[K]||[];_[K]=ie,ie.push(E)}!function j(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(D){return D.join(", ")})})(this.g),400==E&&0<De.indexOf("Unknown SID")?(this.s=3,ki(12)):(this.s=0,ki(13)),sl(this),_m(this)}}}catch{}},Vc.prototype.cancel=function(){this.J=!0,sl(this)},Vc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Kae(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(pm(),ki(17)),sl(this),this.s=2,_m(this)):W$(this,this.S-h)},K$.prototype.cancel=function(){if(this.i=X$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var eH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ol(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ol){this.h=h.h,vI(this,h.j),this.o=h.o,this.g=h.g,EI(this,h.s),this.l=h.l;var _=h.i,E=new Em;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),tH(this,E),this.m=h.m}else h&&(_=String(h).match(eH))?(this.h=!1,vI(this,_[1]||"",!0),this.o=ym(_[2]||""),this.g=ym(_[3]||"",!0),EI(this,_[4]),this.l=ym(_[5]||"",!0),tH(this,_[6]||"",!0),this.m=ym(_[7]||"")):(this.h=!1,this.i=new Em(null,this.h))}function Sa(h){return new ol(h)}function vI(h,_,E){h.j=E?ym(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function EI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function tH(h,_,E){_ instanceof Em?(h.i=_,function oce(h,_){_&&!h.j&&(Uc(h),h.i=null,h.g.forEach(function(E,D){var K=D.toLowerCase();D!=K&&(rH(this,D),sH(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=vm(_,ice)),h.i=new Em(_,h.h))}function Pn(h,_,E){h.i.set(_,E)}function II(h){return Pn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ym(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function vm(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,tce),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tce(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}ol.prototype.toString=function(){var h=[],_=this.j;_&&h.push(vm(_,nH,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(vm(_,nH,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(vm(E,"/"==E.charAt(0)?rce:nce,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",vm(E,sce)),h.join("")};var h,nH=/[#\/\?@]/g,nce=/[#\?:]/g,rce=/[#\?]/g,ice=/[#\?@]/g,sce=/#/g;function Em(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Uc(h){h.g||(h.g=new Map,h.h=0,h.i&&function ece(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var D=h[E].indexOf("="),K=null;if(0<=D){var ie=h[E].substring(0,D);K=h[E].substring(D+1)}else ie=h[E];_(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function rH(h,_){Uc(h),_=jh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function iH(h,_){return Uc(h),_=jh(h,_),h.g.has(_)}function sH(h,_,E){rH(h,_),0<E.length&&(h.i=null,h.g.set(jh(h,_),R(E)),h.h+=E.length)}function jh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Bc(h,_,E,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(E)}catch{}}function uce(){this.g=new qae}function lce(h,_,E){const D=E||"";try{J$(h,function(K,ie){let De=K;u(K)&&(De=AS(K)),_.push(D+ie+"="+encodeURIComponent(De))})}catch(K){throw _.push(D+"type="+encodeURIComponent("_badmap")),K}}function Im(h){this.l=h.Ub||null,this.j=h.eb||!1}function wI(h,_){gi.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function oH(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function wm(h){h.readyState=4,h.l=null,h.j=null,h.v=null,bm(h)}function bm(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function aH(h){let _="";return Ne(h,function(E,D){_+=D,_+=":",_+=E,_+="\r\n"}),_}function LS(h,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=aH(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Pn(h,_,E))}function er(h){gi.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Em.prototype).add=function(h,_){Uc(this),this.i=null,h=jh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Uc(this),this.g.forEach(function(E,D){E.forEach(function(K){h.call(_,K,D,this)},this)},this)},n.na=function(){Uc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let D=0;D<_.length;D++){const K=h[D];for(let ie=0;ie<K.length;ie++)E.push(_[D])}return E},n.V=function(h){Uc(this);let _=[];if("string"==typeof h)iH(this,h)&&(_=_.concat(this.g.get(jh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Uc(this),this.i=null,iH(this,h=jh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var D=_[E];const ie=encodeURIComponent(String(D)),De=this.V(D);for(D=0;D<De.length;D++){var K=ie;""!==De[D]&&(K+="="+encodeURIComponent(String(De[D]))),h.push(K)}}return this.i=h.join("&")},b(Im,DS),Im.prototype.g=function(){return new wI(this.l,this.j)},Im.prototype.i=(h={},function(){return h}),b(wI,gi),(n=wI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,bm(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wm(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,bm(this)),this.g&&(this.readyState=3,bm(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oH(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?wm(this):bm(this),3==this.readyState&&oH(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,wm(this))},n.Qa=function(h){this.g&&(this.response=h,wm(this))},n.ga=function(){this.g&&wm(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(wI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(er,gi);var dce=/^https?$/i,hce=["POST","PUT"];function cH(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,uH(h),bI(h)}function uH(h){h.A||(h.A=!0,Oi(h,"complete"),Oi(h,"error"))}function lH(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Ra(h)||2!=h.Z()))if(h.u&&4==Ra(h))x$(h.Ea,0,h);else if(Oi(h,"readystatechange"),4==Ra(h)){h.h=!1;try{const De=h.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=0===De){var K=String(h.D).match(eH)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!dce.test(K?K.toLowerCase():"")}E=D}if(E)Oi(h,"complete"),Oi(h,"success");else{h.m=6;try{var ie=2<Ra(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",uH(h)}}finally{bI(h)}}}function bI(h,_){if(h.g){dH(h);const E=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Oi(h,"ready");try{E.onreadystatechange=D}catch{}}}function dH(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Ra(h){return h.g?h.g.readyState:0}function hH(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Tm(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function fH(h){this.Aa=0,this.i=[],this.j=new mm,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tm("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tm("baseRetryDelayMs",5e3,h),this.cb=Tm("retryDelaySeedMs",1e4,h),this.Wa=Tm("forwardChannelMaxRetries",2,h),this.wa=Tm("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new K$(h&&h.concurrentRequestLimit),this.Da=new uce,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function VS(h){if(pH(h),3==h.G){var _=h.U++,E=Sa(h.I);if(Pn(E,"SID",h.K),Pn(E,"RID",_),Pn(E,"TYPE","terminate"),Cm(h,E),(_=new Vc(h,h.j,_)).L=2,_.v=II(Sa(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=bH(_.j,null),_.g.ea(_.v)),_.F=Date.now(),yI(_)}IH(h)}function TI(h){h.g&&(BS(h),h.g.cancel(),h.g=null)}function pH(h){TI(h),h.u&&(a.clearTimeout(h.u),h.u=null),AI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function CI(h){if(!Z$(h.h)&&!h.s){h.s=!0;var _=h.Ga;Qe||ur(),Ye||(Qe(),Ye=!0),Pt.add(_,h),h.B=0}}function gH(h,_){var E;E=_?_.l:h.U++;const D=Sa(h.I);Pn(D,"SID",h.K),Pn(D,"RID",E),Pn(D,"AID",h.T),Cm(h,D),h.m&&h.o&&LS(D,h.m,h.o),E=new Vc(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=mH(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),FS(h.h,E),xS(E,D,_)}function Cm(h,_){h.H&&Ne(h.H,function(E,D){Pn(_,D,E)}),h.l&&J$({},function(E,D){Pn(_,D,E)})}function mH(h,_,E){E=Math.min(h.i.length,E);var D=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let ie=-1;for(;;){const De=["count="+E];-1==ie?0<E?(ie=K[0].g,De.push("ofs="+ie)):ie=0:De.push("ofs="+ie);let hn=!0;for(let ei=0;ei<E;ei++){let zt=K[ei].g;const mi=K[ei].map;if(zt-=ie,0>zt)ie=Math.max(0,K[ei].g-100),hn=!1;else try{lce(mi,De,"req"+zt+"_")}catch{D&&D(mi)}}if(hn){D=De.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,D}function _H(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Qe||ur(),Ye||(Qe(),Ye=!0),Pt.add(_,h),h.v=0}}function US(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=gm(y(h.Fa,h),EH(h,h.v)),h.v++,0))}function BS(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function yH(h){h.g=new Vc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Sa(h.qa);Pn(_,"RID","rpc"),Pn(_,"SID",h.K),Pn(_,"AID",h.T),Pn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Pn(_,"TO",h.ja),Pn(_,"TYPE","xmlhttp"),Cm(h,_),h.m&&h.o&&LS(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=II(Sa(_)),E.m=null,E.P=!0,q$(E,h)}function AI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function vH(h,_){var E=null;if(h.g==_){AI(h),BS(h),h.g=null;var D=2}else{if(!kS(h.h,_))return;E=_.D,Y$(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;Oi(D=gI(),new j$(D,E)),CI(h)}else _H(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==D&&function pce(h,_){return!(Q$(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=gm(y(h.Ga,h,_),EH(h,h.B)),h.B++,0)))}(h,_)||2==D&&US(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:al(h,5);break;case 4:al(h,10);break;case 3:al(h,6);break;default:al(h,2)}}function EH(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function al(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),D=h.Xa;const K=!D;D=new ol(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||vI(D,"https"),II(D),K?function ace(h,_){const E=new mm;if(a.Image){const D=new Image;D.onload=I(Bc,E,"TestLoadImage: loaded",!0,_,D),D.onerror=I(Bc,E,"TestLoadImage: error",!1,_,D),D.onabort=I(Bc,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=I(Bc,E,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),E):function cce(h,_){new mm;const D=new AbortController,K=setTimeout(()=>{D.abort(),Bc(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(ie=>{clearTimeout(K),Bc(0,0,!!ie.ok,_)}).catch(()=>{clearTimeout(K),Bc(0,0,!1,_)})}(D.toString(),E)}else ki(2);h.G=0,h.l&&h.l.sa(_),IH(h),pH(h)}function IH(h){if(h.G=0,h.ka=[],h.l){const _=X$(h.h);(0!=_.length||0!=h.i.length)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function wH(h,_,E){var D=E instanceof ol?Sa(E):new ol(E);if(""!=D.g)_&&(D.g=_+"."+D.g),EI(D,D.s);else{var K=a.location;D=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ie=new ol(null);D&&vI(ie,D),_&&(ie.g=_),K&&EI(ie,K),E&&(ie.l=E),D=ie}return _=h.ya,(E=h.D)&&_&&Pn(D,E,_),Pn(D,"VER",h.la),Cm(h,D),D}function bH(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new er(h.Ca&&!h.pa?new Im({eb:E}):h.pa)).Ha(h.J),_}function TH(){}function DI(){}function gs(h,_){gi.call(this),this.g=new fH(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new $h(this)}function CH(h){SS.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function AH(){RS.call(this),this.status=1}function $h(h){this.g=h}(n=er.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():MS.g(),this.v=function F$(h){return h.h||(h.h=h.i())}(this.o?this.o:MS),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){return void cH(this,ie)}if(h=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)E.set(K,D[K]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ie of D.keys())E.set(ie,D.get(ie))}D=Array.from(E.keys()).find(ie=>"content-type"==ie.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hce,_,void 0))||D||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,De]of E)this.g.setRequestHeader(ie,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dH(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){cH(this,ie)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Oi(this,"complete"),Oi(this,"abort"),bI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bI(this,!0)),er.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lH(this):this.bb())},n.bb=function(){lH(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ra(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),zae(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=fH.prototype).la=8,n.G=1,n.connect=function(h,_,E,D){ki(0),this.W=h,this.H=_||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=wH(this,null,this.W),CI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new Vc(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=N(ie),z(ie,this.S)):ie=this.S),null!==this.m||this.O||(K.H=ie,ie=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=mH(this,K,_),Pn(E=Sa(this.I),"RID",h),Pn(E,"CVER",22),this.D&&Pn(E,"X-HTTP-Session-Id",this.D),Cm(this,E),ie&&(this.O?_="headers="+encodeURIComponent(String(aH(ie)))+"&"+_:this.m&&LS(E,this.m,ie)),FS(this.h,K),this.Ua&&Pn(E,"TYPE","init"),this.P?(Pn(E,"$req",_),Pn(E,"SID","null"),K.T=!0,xS(K,E,null)):xS(K,E,_),this.G=2}}else 3==this.G&&(h?gH(this,h):0==this.i.length||Z$(this.h)||gH(this))},n.Fa=function(){if(this.u=null,yH(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=gm(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ki(10),TI(this),yH(this))},n.Za=function(){null!=this.C&&(this.C=null,TI(this),US(this),ki(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ki(2)):(this.j.info("Failed to ping google.com"),ki(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=TH.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},DI.prototype.g=function(h,_){return new gs(h,_)},b(gs,gi),gs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gs.prototype.close=function(){VS(this.g)},gs.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=AS(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&CI(_)},gs.prototype.N=function(){this.g.l=null,delete this.j,VS(this.g),delete this.g,gs.aa.N.call(this)},b(CH,SS),b(AH,RS),b($h,TH),$h.prototype.ua=function(){Oi(this.g,"a")},$h.prototype.ta=function(h){Oi(this.g,new CH(h))},$h.prototype.sa=function(h){Oi(this.g,new AH)},$h.prototype.ra=function(){Oi(this.g,"b")},DI.prototype.createWebChannel=DI.prototype.g,gs.prototype.send=gs.prototype.o,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,JF=ha.createWebChannelTransport=function(){return new DI},XF=ha.getStatEventTarget=function(){return gI()},YF=ha.Event=il,F0=ha.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mI.NO_ERROR=0,mI.TIMEOUT=8,mI.HTTP_ERROR=6,xv=ha.ErrorCode=mI,$$.COMPLETE="complete",QF=ha.EventType=$$,L$.EventType=fm,fm.OPEN="a",fm.CLOSE="b",fm.ERROR="c",fm.MESSAGE="d",gi.prototype.listen=gi.prototype.K,cg=ha.WebChannel=L$,ZF=ha.FetchXmlHttpFactory=Im,er.prototype.listenOnce=er.prototype.L,er.prototype.getLastError=er.prototype.Ka,er.prototype.getLastErrorCode=er.prototype.Ba,er.prototype.getStatus=er.prototype.Z,er.prototype.getResponseJson=er.prototype.Oa,er.prototype.getResponseText=er.prototype.oa,er.prototype.send=er.prototype.ea,er.prototype.setWithCredentials=er.prototype.Ha,KF=ha.XhrIo=er}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});const eL="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Zd="10.12.1";const dc=new Mo.Yd("@firebase/firestore");function Qd(){return dc.logLevel}function ve(n,...e){if(dc.logLevel<=Mo.in.DEBUG){const t=e.map(L0);dc.debug(`Firestore (${Zd}): ${n}`,...t)}}function ar(n,...e){if(dc.logLevel<=Mo.in.ERROR){const t=e.map(L0);dc.error(`Firestore (${Zd}): ${n}`,...t)}}function Qi(n,...e){if(dc.logLevel<=Mo.in.WARN){const t=e.map(L0);dc.warn(`Firestore (${Zd}): ${n}`,...t)}}function L0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ve(n="Unexpected state"){const e=`FIRESTORE (${Zd}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function We(n,e){n||Ve()}function Ae(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class KY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZY{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ae.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We("string"==typeof r.accessToken),new tL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return We(null===e||"string"==typeof e),new Fr(e)}}class QY{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YY{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new QY(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XY{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We("string"==typeof t.token),this.R=t.token,new nL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function JY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=JY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function Yd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iL(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new kn(0,0))}static max(){return new Ze(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ug{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ve(),void 0===r?r=e.length-t:r>e.length-t&&Ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ug.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ug?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ot extends ug{construct(e,t,r){return new Ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ot(t)}static emptyPath(){return new Ot([])}}const eX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends ug{construct(e,t,r){return new An(e,t,r)}static isValidIdentifier(e){return eX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new _e(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new _e(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new _e(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _e(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ot.fromString(e))}static fromName(e){return new Pe(Ot.fromString(e).popFirst(5))}static empty(){return new Pe(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ot.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ot(e.slice()))}}class Xd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function V0(n){return n.fields.find(e=>2===e.kind)}function Mu(n){return n.fields.filter(e=>2!==e.kind)}Xd.UNKNOWN_ID=-1;class Pu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jd(0,ls.min())}}function sL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new ls(i,Pe.empty(),e)}function oL(n){return new ls(n.readTime,n.key,-1)}class ls{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ls(Ze.min(),Pe.empty(),-1)}static max(){return new ls(Ze.max(),Pe.empty(),-1)}}function U0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:ct(n.largestBatchId,e.largestBatchId))}const aL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hc(n){return B0.apply(this,arguments)}function B0(){return(B0=(0,ae.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==aL)throw n;ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Nv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new lg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=j0(r.target.error);this.V.reject(new lg(e,i))}}static open(e,t,r,i){try{return new Nv(t,e.transaction(i,r))}catch(s){throw new lg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iX(t)}}class Po{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Po.S((0,pt.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),xu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,pt.hl)())return!1;if(Po.C())return!0;const e=(0,pt.z$)(),t=Po.S(e),r=0<t&&t<10,i=uL(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new lg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new _e(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new lg(e,a))},s.onupgradeneeded=o=>{ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=Nv.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),Y.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(ve("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function uL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class rX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xu(this.B.delete())}}class lg extends _e{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fc(n){return"IndexedDbTransactionError"===n.name}class iX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xu(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),xu(this.store.add(e))}get(e){return xu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),xu(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),xu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=s=>{const o=j0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new rX(a),u=t(a.primaryKey,a.value,c);if(u instanceof Y){const f=u.catch(m=>(c.done(),Y.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xu(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=j0(r.target.error);t(i)}})}let lL=!1;function j0(n){const e=Po.S((0,pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lL||(lL=!0,setTimeout(()=>{throw r},0)),r}}return n}class sX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ve("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){fc(r)?ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield hc(r)}yield t.X(6e4)}))}}class oX{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Y.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ve("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ve("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=oL(s);U0(o,r)>0&&(r=o)}),new ls(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ds=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function dg(n){return null==n}function hg(n){return 0===n&&1/n==-1/0}function dL(n){return"number"==typeof n&&Number.isInteger(n)&&!hg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hL(e)),e=aX(n.get(t),e);return hL(e)}function aX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hL(n){return n+"\x01\x01"}function xo(n){const e=n.length;if(We(e>=2),2===e)return We("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ot.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ve(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ve()}s=o+2}return new Ot(r)}const fL=["userId","batchId"];function Ov(n,e){return[n,ui(e)]}function pL(n,e,t){return[n,ui(e),t]}const cX={},uX=["prefixPath","collectionGroup","readTime","documentId"],lX=["prefixPath","collectionGroup","documentId"],dX=["collectionGroup","readTime","prefixPath","documentId"],hX=["canonicalId","targetId"],fX=["targetId","path"],pX=["path","targetId"],gX=["collectionId","parent"],mX=["indexId","uid"],_X=["uid","sequenceNumber"],yX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vX=["indexId","uid","orderedDocumentKey"],EX=["userId","collectionPath","documentId"],IX=["userId","collectionPath","largestBatchId"],wX=["userId","collectionGroup","largestBatchId"],gL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bX=[...gL,"documentOverlays"],mL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_L=mL,yL=[..._L,"indexConfiguration","indexState","indexEntries"],TX=yL;class $0 extends cL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=Ae(n);return Po.F(t._e,e)}function vL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vn{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kv(this.root,e,this.comparator,!1)}getReverseIterator(){return new kv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kv(this.root,e,this.comparator,!0)}}class kv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wL(this.data.getIterator())}getIteratorFrom(e){return new wL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class wL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function eh(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new an(An.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bL("Invalid base64 string: "+s):s}}(e);return new Pr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const AX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(n){if(We(!!n),"string"==typeof n){let e=0;const t=AX.exec(n);if(We(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pa(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function Fv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lv(n){const e=n.mapValue.fields.__previous_value__;return Fv(e)?Lv(e):e}function fg(n){const e=fa(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}class DX{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class gc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}const mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vv={nullValue:"NULL_VALUE"};function _c(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fv(n)?4:DL(n)?9007199254740991:10:Ve()}function No(n,e){if(n===e)return!0;const t=_c(n);if(t!==_c(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fg(n).isEqual(fg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fa(i.timestampValue),a=fa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,pa(n.bytesValue).isEqual(pa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Yn(i.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(i.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Yn(i.integerValue)===Yn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Yn(i.doubleValue),a=Yn(s.doubleValue);return o===a?hg(o)===hg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Yd(n.arrayValue.values||[],e.arrayValue.values||[],No);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vL(o)!==vL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!No(o[c],a[c])))return!1;return!0}(n,e);default:return Ve()}var s}function pg(n,e){return void 0!==(n.values||[]).find(t=>No(t,e))}function yc(n,e){if(n===e)return 0;const t=_c(n),r=_c(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Yn(s.integerValue||s.doubleValue),c=Yn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return TL(n.timestampValue,e.timestampValue);case 4:return TL(fg(n),fg(e));case 5:return ct(n.stringValue,e.stringValue);case 6:return function(s,o){const a=pa(s),c=pa(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=ct(a[u],c[u]);if(0!==f)return f}return ct(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ct(Yn(s.latitude),Yn(o.latitude));return 0!==a?a:ct(Yn(s.longitude),Yn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=yc(a[u],c[u]);if(f)return f}return ct(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===mc.mapValue&&o===mc.mapValue)return 0;if(s===mc.mapValue)return 1;if(o===mc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=ct(c[m],f[m]);if(0!==y)return y;const I=yc(a[c[m]],u[f[m]]);if(0!==I)return I}return ct(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Ve()}}function TL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ct(n,e);const t=fa(n),r=fa(e),i=ct(t.seconds,r.seconds);return 0!==i?i:ct(t.nanos,r.nanos)}function th(n){return H0(n)}function H0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=fa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pa(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=H0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${H0(t.fields[o])}`;return i+"}"}(n.mapValue):Ve()}function Nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function z0(n){return!!n&&"integerValue"in n}function gg(n){return!!n&&"arrayValue"in n}function CL(n){return!!n&&"nullValue"in n}function AL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bv(n){return!!n&&"mapValue"in n}function mg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function SX(n){return"nullValue"in n?Vv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nu(gc.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ve()}function RX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nu(gc.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mc:Ve()}function SL(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RL(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mg(t)}setAll(e){let t=An.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=mg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Bv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return No(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xr(mg(this.value))}}function ML(n){const e=[];return pc(n.fields,(t,r)=>{const i=new An([t]);if(Bv(r)){const s=ML(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yi(e)}class Dn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dn(e,0,Ze.min(),Ze.min(),Ze.min(),Xr.empty(),0)}static newFoundDocument(e,t,r,i){return new Dn(e,1,t,Ze.min(),r,i,0)}static newNoDocument(e,t){return new Dn(e,2,t,Ze.min(),Ze.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,Ze.min(),Ze.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function PL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Pe.comparator(Pe.fromName(o.referenceValue),t.key):yc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function xL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!No(n.position[t],e.position[t]))return!1;return!0}class _g{constructor(e,t="asc"){this.field=e,this.dir=t}}function MX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NL{}class kt extends NL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new PX(e,t,r):"array-contains"===t?new OX(e,r):"in"===t?new UL(e,r):"not-in"===t?new kX(e,r):"array-contains-any"===t?new FX(e,r):new kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new xX(e,r):new NX(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yc(t,this.value)):null!==t&&_c(this.value)===_c(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends NL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rn(e,t)}matches(e){return nh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nh(n){return"and"===n.op}function q0(n){return"or"===n.op}function G0(n){return OL(n)&&nh(n)}function OL(n){for(const e of n.filters)if(e instanceof rn)return!1;return!0}function W0(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+th(n.value);if(G0(n))return n.filters.map(e=>W0(e)).join(",");{const e=n.filters.map(t=>W0(t)).join(",");return`${n.op}(${e})`}}function kL(n,e){return n instanceof kt?(r=n,(i=e)instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&No(r.value,i.value)):n instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&kL(o,i.filters[a]),!0)}(n,e):void Ve();var r,i}function FL(n,e){const t=n.filters.concat(e);return rn.create(t,n.op)}function LL(n){return n instanceof kt?`${(t=n).field.canonicalString()} ${t.op} ${th(t.value)}`:n instanceof rn?function(t){return t.op.toString()+" {"+t.getFilters().map(LL).join(" ,")+"}"}(n):"Filter";var t}class PX extends kt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class xX extends kt{constructor(e,t){super(e,"in",t),this.keys=VL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NX extends kt{constructor(e,t){super(e,"not-in",t),this.keys=VL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class OX extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gg(t)&&pg(t.arrayValue,this.value)}}class UL extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pg(this.value.arrayValue,t)}}class kX extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pg(this.value.arrayValue,t)}}class FX extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pg(this.value.arrayValue,r))}}class LX{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function K0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new LX(n,e,t,r,i,s,o)}function Ou(n){const e=Ae(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>W0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),dg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>th(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>th(r)).join(",")),e.ue=t}return e.ue}function yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xL(n.startAt,e.startAt)&&xL(n.endAt,e.endAt)}function jv(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $v(n,e){return n.filters.filter(t=>t instanceof kt&&t.field.isEqual(e))}function BL(n,e,t){let r=Vv,i=!0;for(const s of $v(n,e)){let o=Vv,a=!0;switch(s.op){case"<":case"<=":o=SX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Vv}SL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];SL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function jL(n,e,t){let r=mc,i=!0;for(const s of $v(n,e)){let o=mc,a=!0;switch(s.op){case">=":case">":o=RX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=mc}RL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];RL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ga{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function $L(n,e,t,r,i,s,o,a){return new ga(n,e,t,r,i,s,o,a)}function rh(n){return new ga(n)}function HL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Z0(n){return null!==n.collectionGroup}function ih(n){const e=Ae(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new an(An.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new _g(s,r))}),t.has(An.keyField().canonicalString())||e.ce.push(new _g(An.keyField(),r))}return e.ce}function li(n){const e=Ae(n);return e.le||(e.le=function qL(n,e){if("F"===n.limitType)return K0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new _g(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new vc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vc(n.startAt.position,n.startAt.inclusive):null;return K0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,ih(n))),e.le}function Q0(n,e){const t=n.filters.concat([e]);return new ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hv(n,e,t){return new ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vg(n,e){return yg(li(n),li(e))&&n.limitType===e.limitType}function GL(n){return`${Ou(li(n))}|lt:${n.limitType}`}function sh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LL(i)).join(", ")}]`),dg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>th(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>th(i)).join(",")),`Target(${r})`}(li(n))}; limitType=${n.limitType})`}function Eg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ih(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=PL(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ih(r),i)||r.endAt&&!function(o,a,c){const u=PL(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ih(r),i)));var r,i}function WL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KL(n){return(e,t)=>{let r=!1;for(const i of ih(n)){const s=VX(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function VX(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?yc(c,u):Ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}class ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IL(this.inner)}size(){return this.innerSize}}const UX=new vn(Pe.comparator);function Xi(){return UX}const ZL=new vn(Pe.comparator);function Ig(...n){let e=ZL;for(const t of n)e=e.insert(t.key,t);return e}function QL(n){let e=ZL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oo(){return wg()}function YL(){return wg()}function wg(){return new ma(n=>n.toString(),(n,e)=>n.isEqual(e))}const BX=new vn(Pe.comparator),jX=new an(Pe.comparator);function mt(...n){let e=jX;for(const t of n)e=e.add(t);return e}const $X=new an(ct);function Y0(){return $X}function XL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hg(e)?"-0":e}}function JL(n){return{integerValue:""+n}}function eV(n,e){return dL(e)?JL(e):XL(n,e)}class zv{constructor(){this._=void 0}}function HX(n,e,t){return n instanceof oh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fv(s)&&(s=Lv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ku?nV(n,e):n instanceof Fu?rV(n,e):function(i,s){const o=tV(i,s),a=iV(o)+iV(i.Pe);return z0(o)&&z0(i.Pe)?JL(a):XL(i.serializer,a)}(n,e)}function zX(n,e,t){return n instanceof ku?nV(n,e):n instanceof Fu?rV(n,e):t}function tV(n,e){return n instanceof ah?z0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class oh extends zv{}class ku extends zv{constructor(e){super(),this.elements=e}}function nV(n,e){const t=sV(e);for(const r of n.elements)t.some(i=>No(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fu extends zv{constructor(e){super(),this.elements=e}}function rV(n,e){let t=sV(e);for(const r of n.elements)t=t.filter(i=>!No(i,r));return{arrayValue:{values:t}}}class ah extends zv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function iV(n){return Yn(n.integerValue||n.doubleValue)}function sV(n){return gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bg{constructor(e,t){this.field=e,this.transform=t}}class GX{constructor(e,t){this.version=e,this.transformResults=t}}class Fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Gv{}function oV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uh(n.key,Fn.none()):new ch(n.key,n.data,Fn.none());{const t=n.data,r=Xr.empty();let i=new an(An.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new _a(n.key,r,new Yi(i.toArray()),Fn.none())}}function WX(n,e,t){n instanceof ch?function(i,s,o){const a=i.value.clone(),c=uV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof _a?function(i,s,o){if(!qv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(cV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Tg(n,e,t,r){return n instanceof ch?function(s,o,a,c){if(!qv(s.precondition,o))return a;const u=s.value.clone(),f=lV(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof _a?function(s,o,a,c){if(!qv(s.precondition,o))return a;const u=lV(s.fieldTransforms,c,o),f=o.data;return f.setAll(cV(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,qv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function KX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=tV(r.transform,i||null);null!=s&&(null===t&&(t=Xr.empty()),t.set(r.field,s))}return t||null}function aV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Yd(r,i,(s,o)=>function qX(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ku&&i instanceof ku||r instanceof Fu&&i instanceof Fu?Yd(r.elements,i.elements,No):r instanceof ah&&i instanceof ah?No(r.Pe,i.Pe):r instanceof oh&&i instanceof oh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class ch extends Gv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _a extends Gv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uV(n,e,t){const r=new Map;We(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zX(o,a,t[i]))}return r}function lV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,HX(s,o,e))}return r}class uh extends Gv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X0 extends Gv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=oV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Yd(this.mutations,e.mutations,(t,r)=>aV(t,r))&&Yd(this.baseMutations,e.baseMutations,(t,r)=>aV(t,r))}}class eC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){We(e.mutations.length===r.length);let i=BX;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new eC(e,t,r,i)}}class tC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ZX{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ir,Bt;function hV(n){switch(n){default:return Ve();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function fV(n){if(void 0===n)return ar("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Ir.OK:return ne.OK;case Ir.CANCELLED:return ne.CANCELLED;case Ir.UNKNOWN:return ne.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return ne.INTERNAL;case Ir.UNAVAILABLE:return ne.UNAVAILABLE;case Ir.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ir.NOT_FOUND:return ne.NOT_FOUND;case Ir.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ir.ABORTED:return ne.ABORTED;case Ir.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ir.DATA_LOSS:return ne.DATA_LOSS;default:return Ve()}}(Bt=Ir||(Ir={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";function pV(){return new TextEncoder}const QX=new Ru([4294967295,4294967295],0);function gV(n){const e=pV().encode(n),t=new WF;return t.update(e),new Uint8Array(t.digest())}function mV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ru([t,r],0),new Ru([i,s],0)]}class nC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cg(`Invalid padding: ${t}`);if(r<0)throw new Cg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Cg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Cg(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ru.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ru.fromNumber(r)));return 1===i.compare(QX)&&(i=new Ru([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gV(e),[r,i]=mV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new nC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=gV(e),[r,i]=mV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Cg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ag{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Dg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ag(Ze.min(),i,new vn(ct),Xi(),mt())}}class Dg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Dg(r,t,mt(),mt(),mt())}}class Kv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class _V{constructor(e,t){this.targetId=e,this.me=t}}class yV{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vV{constructor(){this.fe=0,this.ge=IV(),this.pe=Pr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=mt(),t=mt(),r=mt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ve()}}),new Dg(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=IV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class YX{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xi(),this.qe=EV(),this.Qe=new vn(ct)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(jv(s))if(0===r){const o=new Pe(s.path);this.Ue(t,o,Dn.newNoDocument(o,Ze.min()))}else We(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=pa(r).toUint8Array()}catch(c){if(c instanceof bL)return Qi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new nC(o,i,s)}catch(c){return Qi(c instanceof Cg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&jv(a.target)){const c=new Pe(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Dn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=mt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ag(e,t,this.Qe,this.ke,r);return this.ke=Xi(),this.qe=EV(),this.Qe=new vn(ct),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new an(ct),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function EV(){return new vn(Pe.comparator)}function IV(){return new vn(Pe.comparator)}const XX={asc:"ASCENDING",desc:"DESCENDING"},JX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eJ={and:"AND",or:"OR"};class tJ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rC(n,e){return n.useProto3Json||dg(e)?e:{value:e}}function lh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nJ(n,e){return lh(n,e.toTimestamp())}function cr(n){return We(!!n),Ze.fromTimestamp(function(t){const r=fa(t);return new kn(r.seconds,r.nanos)}(n))}function iC(n,e){return sC(n,e).canonicalString()}function sC(n,e){const t=(i=n,new Ot(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function bV(n){const e=Ot.fromString(n);return We(OV(e)),e}function Sg(n,e){return iC(n.databaseId,e.path)}function ko(n,e){const t=bV(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(AV(t))}function TV(n,e){return iC(n.databaseId,e)}function CV(n){const e=bV(n);return 4===e.length?Ot.emptyPath():AV(e)}function oC(n){return new Ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AV(n){return We(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DV(n,e,t){return{name:Sg(n,e),fields:t.value.mapValue.fields}}function SV(n,e,t){const r=ko(n,e.name),i=cr(e.updateTime),s=e.createTime?cr(e.createTime):Ze.min(),o=new Xr({mapValue:{fields:e.fields}}),a=Dn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Rg(n,e){let t;if(e instanceof ch)t={update:DV(n,e.key,e.value)};else if(e instanceof uh)t={delete:Sg(n,e.key)};else if(e instanceof _a)t={update:DV(n,e.key,e.data),updateMask:lJ(e.fieldMask)};else{if(!(e instanceof X0))return Ve();t={verify:Sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof oh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ah)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ve()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:nJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ve()),t;var s}function aC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Fn.updateTime(cr(s.updateTime)):void 0!==s.exists?Fn.exists(s.exists):Fn.none():Fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(We("REQUEST_TIME"===a.setToServerValue),c=new oh):"appendMissingElements"in a?c=new ku(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Fu(a.removeAllFromArray.values||[]):"increment"in a?c=new ah(o,a.increment):Ve();const u=An.fromServerFormat(a.fieldPath);return new bg(u,c)}(n,i)):[];var s;if(e.update){const i=ko(n,e.update.name),s=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Yi((e.updateMask.fieldPaths||[]).map(f=>An.fromServerFormat(f)));return new _a(i,s,o,t,r)}return new ch(i,s,t,r)}if(e.delete){const i=ko(n,e.delete);return new uh(i,t)}if(e.verify){const i=ko(n,e.verify);return new X0(i,t)}return Ve()}function RV(n,e){return{documents:[TV(n,e.path)]}}function Zv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TV(n,i);const s=function(u){if(0!==u.length)return NV(rn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:Ec((y=f).field),direction:aJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=rC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function PV(n){let e=CV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){We(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=xV(m);return y instanceof rn&&G0(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new _g(dh((b=y).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,dg(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new vc((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new vc(m.values||[],!m.before)}(t.endAt)),$L(e,i,o,s,a,"F",c,u)}function xV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=dh(t.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=dh(t.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=dh(t.unaryFilter.field);return kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dh(t.unaryFilter.field);return kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(n):void 0!==n.fieldFilter?kt.create(dh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return rn.create(t.compositeFilter.filters.map(r=>xV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve()}}(t.compositeFilter.op))}(n):Ve();var t}function aJ(n){return XX[n]}function cJ(n){return JX[n]}function uJ(n){return eJ[n]}function Ec(n){return{fieldPath:n.canonicalString()}}function dh(n){return An.fromServerFormat(n.fieldPath)}function NV(n){return n instanceof kt?function(t){if("=="===t.op){if(AL(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NAN"}};if(CL(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AL(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NAN"}};if(CL(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(t.field),op:cJ(t.op),value:t.value}}}(n):n instanceof rn?function(t){const r=t.getFilters().map(i=>NV(i));return 1===r.length?r[0]:{compositeFilter:{op:uJ(t.op),filters:r}}}(n):Ve()}function lJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ya{constructor(e,t,r,i,s=Ze.min(),o=Ze.min(),a=Pr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kV{constructor(e){this.ct=e}}function FV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sg(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:lh(s,o.version.toTimestamp()),createTime:lh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lu(e.version)};else{if(!e.isUnknownDocument())return Ve();r.unknownDocument={path:t.path.toArray(),version:Lu(e.version)}}var s,o;return r}function Qv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vu(n){const e=new kn(n.seconds,n.nanoseconds);return Ze.fromTimestamp(e)}function Uu(n,e){const t=(e.baseMutations||[]).map(s=>aC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>aC(n.ct,s)),i=kn.fromMillis(e.localWriteTimeMs);return new J0(e.batchId,i,t,r)}function Mg(n){const e=Vu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vu(n.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=void 0!==n.query.documents?(We(1===(s=n.query).documents.length),li(rh(CV(s.documents[0])))):function(s){return li(PV(s))}(n.query),new ya(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken));var s}function LV(n,e){const t=Lu(e.snapshotVersion),r=Lu(e.lastLimboFreeSnapshotVersion);let i;i=jv(e.target)?RV(n.ct,e.target):Zv(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ou(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cC(n){const e=PV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hv(e,e.limit,"L"):e}function uC(n,e){return new tC(e.largestBatchId,aC(n.ct,e.overlayMutation))}function VV(n,e){const t=e.path.lastSegment();return[n,ui(e.path.popLast()),t]}function UV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Lu(r.readTime),documentKey:ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class hJ{getBundleMetadata(e,t){return BV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Vu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return BV(e).put({bundleId:(i=t).id,createTime:Lu(cr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return jV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:cC(s.bundledQuery),readTime:Vu(s.readTime)};var s})}saveNamedQuery(e,t){return jV(e).put({name:(i=t).name,readTime:Lu(cr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function BV(n){return Lr(n,"bundles")}function jV(n){return Lr(n,"namedQueries")}class Yv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Yv(e,t.uid||"")}getOverlay(e,t){return Pg(e).get(VV(this.userId,t)).next(r=>r?uC(this.serializer,r):null)}getOverlays(e,t){const r=Oo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new tC(t,o);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ui(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Pg(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Oo(),s=ui(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pg(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=uC(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Oo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pg(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=uC(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Pg(e).put(function(i,s,o){const[a,c,u]=VV(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Pg(n){return Lr(n,"documentOverlays")}class Bu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),hg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=fa(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(pa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?DL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ve()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Pe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function fJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $V(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=fJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Bu.bt=new Bu;class pJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=$V(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=$V(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class gJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class mJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class xg{constructor(){this.Gt=new pJ,this.zt=new gJ(this.Gt),this.jt=new mJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class ju{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,r)}}function Ic(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=HV(n.arrayValue,e.arrayValue),0!==t?t:(t=HV(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function HV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zV{constructor(e){this.Yt=new an((t,r)=>An.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(We(e.collectionGroup===this.collectionId),this.en)return!1;const t=V0(e);if(void 0!==t&&!this.nn(t))return!1;const r=Mu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new an(An.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Pu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pu(r.field,"asc"===r.dir?0:1)));return new Xd(Xd.UNKNOWN_ID,this.collectionId,t,Jd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qV(n){var e,t;if(We(n instanceof kt||n instanceof rn),n instanceof kt){if(n instanceof UL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>kt.create(n.field,"==",s)))||[];return rn.create(i,"or")}return n}const r=n.filters.map(i=>qV(i));return rn.create(r,n.op)}function _J(n){if(0===n.getFilters().length)return[];const e=hC(qV(n));return We(GV(e)),lC(e)||dC(e)?[e]:e.getFilters()}function lC(n){return n instanceof kt}function dC(n){return n instanceof rn&&G0(n)}function GV(n){return lC(n)||dC(n)||function(t){if(t instanceof rn&&q0(t)){for(const r of t.getFilters())if(!lC(r)&&!dC(r))return!1;return!0}return!1}(n)}function hC(n){if(We(n instanceof kt||n instanceof rn),n instanceof kt)return n;if(1===n.filters.length)return hC(n.filters[0]);const e=n.filters.map(r=>hC(r));let t=rn.create(e,n.op);return t=Xv(t),GV(t)?t:(We(t instanceof rn),We(nh(t)),We(t.filters.length>1),t.filters.reduce((r,i)=>fC(r,i)))}function fC(n,e){let t;return We(n instanceof kt||n instanceof rn),We(e instanceof kt||e instanceof rn),t=n instanceof kt?e instanceof kt?rn.create([n,e],"and"):WV(n,e):e instanceof kt?WV(e,n):function(i,s){if(We(i.filters.length>0&&s.filters.length>0),nh(i)&&nh(s))return FL(i,s.getFilters());const o=q0(i)?i:s,a=q0(i)?s:i,c=o.filters.map(u=>fC(u,a));return rn.create(c,"or")}(n,e),Xv(t)}function WV(n,e){if(nh(e))return FL(e,n.getFilters());{const t=e.filters.map(r=>fC(n,r));return rn.create(t,"or")}}function Xv(n){if(We(n instanceof kt||n instanceof rn),n instanceof kt)return n;const e=n.getFilters();if(1===e.length)return Xv(e[0]);if(OL(n))return n;const t=e.map(i=>Xv(i)),r=[];return t.forEach(i=>{i instanceof kt?r.push(i):i instanceof rn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:rn.create(r,n.op)}class yJ{constructor(){this._n=new pC}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(ls.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class pC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new an(Ot.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new an(Ot.comparator)).toArray()}}const Jv=new Uint8Array(0);class vJ{constructor(e,t){this.databaseId=t,this.an=new pC,this.un=new ma(r=>Ou(r),(r,i)=>yg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ui(i)};return KV(e).put(s)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iL(t),""],!1,!0);return KV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(xo(o.parent))}return r})}addFieldIndex(e,t){const r=Ng(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=fh(e);return s.next(a=>{o.put(UV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Ng(e),i=fh(e),s=hh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ng(e),r=hh(e),i=fh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new zV(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=hh(e);let i=!0;const s=new Map;return Y.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=mt();const a=[];return Y.forEach(s,(c,u)=>{var W;ve("IndexedDbIndexManager",`Using index ${W=c,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${Ou(t)}`);const f=function(W,te){const we=V0(te);if(void 0===we)return null;for(const Ne of $v(W,we.fieldPath))switch(Ne.op){case"array-contains-any":return Ne.value.arrayValue.values||[];case"array-contains":return[Ne.value]}return null}(u,c),m=function(W,te){const we=new Map;for(const Ne of Mu(te))for(const j of $v(W,Ne.fieldPath))switch(j.op){case"==":case"in":we.set(Ne.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return we.set(Ne.fieldPath.canonicalString(),j.value),Array.from(we.values())}return null}(u,c),y=function(W,te){const we=[];let Ne=!0;for(const j of Mu(te)){const N=0===j.kind?BL(W,j.fieldPath,W.startAt):jL(W,j.fieldPath,W.startAt);we.push(N.value),Ne&&(Ne=N.inclusive)}return new vc(we,Ne)}(u,c),I=function(W,te){const we=[];let Ne=!0;for(const j of Mu(te)){const N=0===j.kind?jL(W,j.fieldPath,W.endAt):BL(W,j.fieldPath,W.endAt);we.push(N.value),Ne&&(Ne=N.inclusive)}return new vc(we,Ne)}(u,c),b=this.hn(c,u,y),R=this.hn(c,u,I),x=this.Pn(c,u,m),H=this.In(c.indexId,f,b,y.inclusive,R,I.inclusive,x);return Y.forEach(H,V=>r.G(V,t.limit).next(W=>{W.forEach(te=>{const we=Pe.fromSegments(te.documentKey);o.has(we)||(o=o.add(we),a.push(we))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:_J(rn.create(e.filters,"and")).map(r=>K0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):Jv,I=this.En(e,y,r[m%u],i),b=this.dn(e,y,s[m%u],o),R=a.map(x=>this.En(e,y,x,!0));f.push(...this.createRange(I,b,R))}return f}En(e,t,r,i){const s=new ju(e,Pe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new ju(e,Pe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new zV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new an(An.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new xg;for(const i of Mu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Bu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new xg;return Bu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new xg;return Bu.bt.Pt(Nu(this.databaseId,t),r.Ht(function(s){const o=Mu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new xg);let s=0;for(const o of Mu(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&gg(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);Bu.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new xg;c.seed(a.Wt()),Bu.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ng(e),i=fh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Y.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Jd(m.sequenceNumber,new ls(Vu(m.readTime),new Pe(xo(m.documentKey)),m.largestBatchId)):Jd.empty(),I=f.fields.map(([b,R])=>new Pu(An.fromServerFormat(b),R));return new Xd(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ct(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ng(e),s=fh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,c=>s.put(UV(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Y.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?Y.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return hh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return hh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=hh(e);let s=new an(Ic);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new ju(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new an(Ic);const i=this.An(t,e);if(null==i)return r;const s=V0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(gg(o))for(const a of o.arrayValue.values||[])r=r.add(new ju(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new ju(t.indexId,e.key,Jv,i));return r}wn(e,t,r,i,s){ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),b=u.getIterator();let R=eh(I),x=eh(b);for(;R||x;){let H=!1,V=!1;if(R&&x){const W=f(R,x);W<0?V=!0:W>0&&(H=!0)}else null!=R?V=!0:H=!0;H?(m(x),x=eh(b)):V?(y(R),R=eh(I)):(R=eh(I),x=eh(b))}}(i,s,Ic,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Y.waitFor(o)}gn(e){let t=1;return fh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ic(o,a)).filter((o,a,c)=>!a||0!==Ic(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Ic(o,e),c=Ic(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Jv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Jv,[]]))}return s}Dn(e,t){return Ic(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZV)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ve())).next(ZV)}}function KV(n){return Lr(n,"collectionParents")}function hh(n){return Lr(n,"indexEntries")}function Ng(n){return Lr(n,"indexConfiguration")}function fh(n){return Lr(n,"indexState")}function ZV(n){We(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;U0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ls(e.readTime,e.documentKey,t)}const QV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class di{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{We(1===a)}));const u=[];for(const f of t.mutations){const m=pL(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return Y.waitFor(s).next(()=>u)}function eE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ve();e=n.noDocument}return JSON.stringify(e).length}di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(41943040,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);class tE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){We(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new tE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ph(e),o=wc(e);return o.add({}).next(a=>{We("number"==typeof a);const c=new J0(a,t,r,i),u=function(I,b,R){const x=R.baseMutations.map(V=>Rg(I.ct,V)),H=R.mutations.map(V=>Rg(I.ct,V));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:H}}(this.serializer,this.userId,c),f=[];let m=new an((y,I)=>ct(y.canonicalString(),I.canonicalString()));for(const y of i){const I=pL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,cX))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),Y.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return wc(e).get(t).next(r=>r?(We(r.userId===this.userId),Uu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return wc(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(We(a.batchId>=r),s=Uu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).U("userMutationsIndex",t).next(r=>r.map(i=>Uu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ov(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ph(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=xo(f);if(u===this.userId&&t.path.isEqual(y))return wc(e).get(m).next(I=>{if(!I)throw Ve();We(I.userId===this.userId),s.push(Uu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(ct);const i=[];return t.forEach(s=>{const o=Ov(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=ph(e).J({range:a},(u,f,m)=>{const[y,I,b]=u,R=xo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(b):m.done()});i.push(c)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ov(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new an(ct);return ph(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,b=xo(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(wc(e).get(s).next(o=>{if(null===o)throw Ve();We(o.userId===this.userId),r.push(Uu(this.serializer,o))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return YV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ph(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=xo(s[1]);i.push(c)}else a.done()}).next(()=>{We(0===i.length)})})}containsKey(e,t){return XV(e,this.userId,t)}xn(e){return JV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XV(n,e,t){const r=Ov(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ph(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function wc(n){return Lr(n,"mutations")}function ph(n){return Lr(n,"documentMutations")}function JV(n){return Lr(n,"mutationQueues")}class $u{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new $u(0)}static Ln(){return new $u(-1)}}class EJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new $u(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ze.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(We(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return gh(e).J((o,a)=>{const c=Mg(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Y.waitFor(s)).next(()=>i)}forEachTarget(e,t){return gh(e).J((r,i)=>{const s=Mg(i);t(s)})}Bn(e){return e2(e).get("targetGlobalKey").next(t=>(We(null!==t),t))}kn(e,t){return e2(e).put("targetGlobalKey",t)}qn(e,t){return gh(e).put(LV(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ou(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return gh(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=Mg(a);yg(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=bc(e);return t.forEach(o=>{const a=ui(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=bc(e);return Y.forEach(t,s=>{const o=ui(s.path);return Y.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=bc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bc(e);let s=mt();return i.J({range:r,H:!0},(o,a,c)=>{const u=xo(o[1]),f=new Pe(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ui(t.path),i=IDBKeyRange.bound([r],[iL(r)],!1,!0);let s=0;return bc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return gh(e).get(t).next(r=>r?Mg(r):null)}}function gh(n){return Lr(n,"targets")}function e2(n){return Lr(n,"targetGlobal")}function bc(n){return Lr(n,"targetDocuments")}function t2([n,e],[t,r]){const i=ct(n,t);return 0===i?ct(e,r):i}class IJ{constructor(e){this.Kn=e,this.buffer=new an(t2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();t2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fc(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hc(r)}yield t.zn(3e5)}))}}class wJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(ds.oe);const r=new IJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(QV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QV):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Qd()<=Mo.in.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class bJ{constructor(e,t){this.db=e,this.garbageCollector=function r2(n,e){return new wJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return nE(e,r)}removeReference(e,t,r){return nE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nE(e,t)}er(e,t){return function(i,s){let o=!1;return JV(i).Y(a=>XV(i,a,s).next(c=>(c&&(o=!0),Y.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ze.min()),bc(e).delete([0,ui(o.path)])))});i.push(c)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nE(e,t)}Xn(e,t){const r=bc(e);let i,s=ds.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ds.oe&&t(new Pe(xo(i)),s),s=u,i=c):s=ds.oe}).next(()=>{s!==ds.oe&&t(new Pe(xo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nE(n,e){return bc(n).put((i=n.currentSequenceNumber,{targetId:0,path:ui(e.path),sequenceNumber:i}));var i}class i2{constructor(){this.changes=new ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hu(e).put(r)}removeEntry(e,t,r){return Hu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Qv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return Hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Og(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return Hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Og(t))},(i,s)=>{r={document:this.nr(t,s),size:eE(s)}}).next(()=>r)}getEntries(e,t){let r=Xi();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Xi(),i=new vn(Pe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,eE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new an(c2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Og(i.first()),Og(i.last())),o=i.getIterator();let a=o.getNext();return Hu(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Pe.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&c2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(Og(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Qv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=Xi();for(const m of u){const y=this.nr(Pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Eg(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Xi();const o=a2(t,r),a=a2(t,ls.max());return Hu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Pe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new CJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return o2(e).get("remoteDocumentGlobalKey").next(t=>(We(!!t),t))}tr(e,t){return o2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function dJ(n,e){let t;if(e.document)t=SV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=Vu(e.noDocument.readTime);t=Dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ve();{const r=Pe.fromSegments(e.unknownDocument.path),i=Vu(e.unknownDocument.version);t=Dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new kn(i[0],i[1]);return Ze.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ze.min()))return r}return Dn.newInvalidDocument(e)}}function s2(n){return new TJ(n)}class CJ extends i2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ma(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new an((s,o)=>ct(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=FV(this.ar.serializer,o);i=i.add(s.path.popLast());const u=eE(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=FV(this.ar.serializer,o.convertToNoDocument(Ze.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function o2(n){return Lr(n,"remoteDocumentGlobal")}function Hu(n){return Lr(n,"remoteDocumentsV14")}function Og(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function a2(n,e){const t=e.documentKey.path.toArray();return[n,Qv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function c2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ct(t[s],r[s]),i)return i;return i=ct(t.length,r.length),i||(i=ct(t[t.length-2],r[r.length-2]),i||ct(t[t.length-1],r[r.length-1]))}class AJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Tg(r.mutation,i,Yi.empty(),kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mt()){const i=Oo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ig();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Oo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Xi();const o=wg(),a=wg();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof _a)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),Tg(f.mutation,u,f.mutation.getFieldMask(),kn.now())):o.set(u.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new AJ(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=wg();let i=new vn((o,a)=>o-a),s=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||Yi.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||mt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=YL();f.forEach(y=>{if(!s.has(y)){const I=oV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Z0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(Oo());let a=-1,c=s;return o.next(u=>Y.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,mt())).next(f=>({batchId:a,changes:QL(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let i=Ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ig();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,c=>{const u=(m=t,y=c.child(s),new ga(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,Dn.newInvalidDocument(f)))});let a=Ig();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&Tg(f.mutation,u,Yi.empty(),kn.now()),Eg(t,u)&&(a=a.insert(c,u))}),a})}}class DJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:cr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:cC(i.bundledQuery),readTime:cr(i.readTime)}),Y.resolve();var i}}class SJ{constructor(){this.overlays=new vn(Pe.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=Oo(),s=t.length+1,o=new Pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new vn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=Oo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Oo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tC(t,r));let s=this.hr.get(t);void 0===s&&(s=mt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class gC{constructor(){this.Pr=new an(Vr.Ir),this.Tr=new an(Vr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Vr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Vr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Pe(new Ot([])),r=new Vr(t,e),i=new Vr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Pe(new Ot([])),r=new Vr(t,e),i=new Vr(t,e+1);let s=mt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Vr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Pe.comparator(e.key,t.key)||ct(e.pr,t.pr)}static Er(e,t){return ct(e.pr,t.pr)||Pe.comparator(e.key,t.key)}}class RJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new an(Vr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new J0(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Vr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vr(t,0),i=new Vr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(ct);return t.forEach(i=>{const s=new Vr(i,0),o=new Vr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const o=new Vr(new Pe(s),0);let a=new an(ct);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){We(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const s=new Vr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Vr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MJ{constructor(e){this.vr=e,this.docs=new vn(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Xi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Xi();const o=t.path,a=new Pe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||U0(oL(f),r)<=0||(i.has(f.key)||Eg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ve()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PJ(this)}getSize(e){return Y.resolve(this.size)}}class PJ extends i2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class xJ{constructor(e){this.persistence=e,this.Mr=new ma(t=>Ou(t),yg),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gC,this.targetCount=0,this.Lr=$u.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new $u(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class mC{constructor(e,t){this.Br={},this.overlays={},this.kr=new ds(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xJ(this),this.indexManager=new yJ,this.remoteDocumentCache=new MJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new kV(t),this.$r=new DJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new RJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new NJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class NJ extends cL{constructor(e){super(),this.currentSequenceNumber=e}}class rE{constructor(e){this.persistence=e,this.zr=new gC,this.jr=null}static Hr(e){return new rE(e)}get Jr(){if(this.jr)return this.jr;throw Ve()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Pe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class OJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Nv("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fL,{unique:!0}),c.createObjectStore("documentMutations"),l2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),l2(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fL,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return Y.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:EX});u.createIndex("collectionPathOverlayIndex",IX,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",wX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:uX});u.createIndex("documentKeyIndex",lX),u.createIndex("collectionGroupIndex",dX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:mX}).createIndex("sequenceNumberIndex",_X,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:yX}).createIndex("documentKeyIndex",vX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=eE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Y.forEach(a,c=>{We(c.userId===s.userId);const u=Uu(this.serializer,c);return YV(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new Ot(o),u=[0,ui(c)];s.push(t.get(u).next(f=>f?Y.resolve():t.put({targetId:0,path:ui(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:gX});const r=t.store("collectionParents"),i=new pC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:ui(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Ot(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=xo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Mg(i),o=LV(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Pe(Ot.fromString(m.document.name).popFirst(5)):m.noDocument?Pe.fromSegments(m.noDocument.path):m.unknownDocument?Pe.fromSegments(m.unknownDocument.path):Ve()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=s2(this.serializer),s=new mC(rE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:mt();Uu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),Y.forEach(a,(c,u)=>{const f=new Fr(u),m=Yv.lt(this.serializer,f),y=s.getIndexManager(f),I=tE.lt(f,this.serializer,y,s.referenceDelegate);return new u2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new $0(t,ds.oe),c).next()})})}}function l2(n){n.createObjectStore("targetDocuments",{keyPath:fX}).createIndex("documentTargetsIndex",pX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hX,{unique:!0}),n.createObjectStore("targetGlobal")}const _C="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yC{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!yC.D())throw new _e(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bJ(this,i),this.Ti=t+"main",this.serializer=new kV(c),this.Ei=new Po(this.Ti,this.ui,new OJ(this.serializer)),this.Qr=new EJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=s2(this.serializer),this.$r=new hJ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(ne.FAILED_PRECONDITION,_C);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ds(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fc(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return kg(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return sE(e).delete(this.clientId)}Di(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Lr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return Y.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):kg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new _e(ne.FAILED_PRECONDITION,_C);return!1}}return!(!this.networkEnabled||!this.inForeground)||sE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $0(t,ds.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>sE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return tE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?TX:15===c?yL:14===c?_L:13===c?mL:12===c?bX:11===c?gL:void Ve();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new $0(a,this.kr?this.kr.next():ds.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new _e(ne.FAILED_PRECONDITION,aL);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return kg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(ne.FAILED_PRECONDITION,_C)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put("owner",t)}static D(){return Po.D()}yi(e){const t=kg(e);return t.get("owner").next(r=>this.Si(r)?(ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,pt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(n){return Lr(n,"owner")}function sE(n){return Lr(n,"clientMetadata")}function vC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=mt(),i=mt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new EC(e,t.fromCache,r,i)}}class kJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class d2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,pt.G6)()?8:uL((0,pt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new kJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Qd()<=Mo.in.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",sh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Qd()<=Mo.in.DEBUG&&ve("QueryEngine","Query:",sh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Qd()<=Mo.in.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",sh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):Y.resolve())}ji(e,t){if(HL(t))return Y.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Hv(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=mt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,Hv(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return HL(t)||i.isEqual(Ze.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Y.resolve(null):(Qd()<=Mo.in.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sh(t)),this.es(e,o,t,sL(i,-1)).next(a=>a))})}Zi(e,t){let r=new an(KL(e));return t.forEach((i,s)=>{Eg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Qd()<=Mo.in.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",sh(t)),this.zi.getDocumentsMatchingQuery(e,t,ls.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class FJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new vn(ct),this.rs=new ma(s=>Ou(s),yg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function h2(n,e,t,r){return new FJ(n,e,t,r)}function f2(n,e){return IC.apply(this,arguments)}function IC(){return(IC=(0,ae.Z)(function*(n,e){const t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=mt();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function p2(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function g2(n,e,t){let r=mt(),i=mt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Xi();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ze.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function UJ(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mh(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new ya(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function _h(n,e,t){return wC.apply(this,arguments)}function wC(){return(wC=(0,ae.Z)(function*(n,e,t){const r=Ae(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fc(o))throw o;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function oE(n,e,t){const r=Ae(n);let i=Ze.min(),s=mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=Ae(c),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,li(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Ze.min(),t?s:mt())).next(a=>(y2(r,WL(e),a),{documents:a,hs:s})))}function m2(n,e){const t=Ae(n),r=Ae(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function _2(n,e){const t=Ae(n),r=t.ss.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,sL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(y2(t,e,i),i))}function y2(n,e,t){let r=n.ss.get(e)||Ze.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function bC(){return(bC=(0,ae.Z)(function*(n,e,t,r){const i=Ae(n);let s=mt(),o=Xi();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield mh(i,(f=r,li(rh(Ot.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>g2(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function jJ(n,e){return TC.apply(this,arguments)}function TC(){return(TC=(0,ae.Z)(function*(n,e,t=mt()){const r=yield mh(n,li(cC(e.bundledQuery))),i=Ae(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=cr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Pr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function v2(n,e){return`firestore_clients_${n}_${e}`}function E2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function CC(n,e){return`firestore_targets_${n}_${e}`}class aE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new _e(i.error.code,i.error.message))),o?new aE(e,t,i.state,s):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new _e(r.error.code,r.error.message))),s?new Fg(e,r.state,i):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Y0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new cE(e,s):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class AC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new AC(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DC{constructor(){this.activeTargetIds=Y0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SC{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new vn(ct),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=v2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new DC),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(v2(e.persistenceKey,i));if(s){const o=cE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(CC(this.persistenceKey,e));if(r){const i=Fg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve("SharedClientState","READ",e,t),t}setItem(e,t){ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=ds.oe;if(null!=o)try{const c=JSON.parse(o);We("number"==typeof c),a=c}catch(c){ar("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ds.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new aE(this.currentUser,e,t,r),s=E2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=E2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=CC(this.persistenceKey,e),s=new Fg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return cE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return aE.Es(new Fr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Fg.Es(i,t)}xs(e){return AC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Y0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class I2{constructor(){this.no=new DC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new DC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $J{io(e){}shutdown(){}}class w2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uE=null;function RC(){return null===uE?uE=268435456+Math.round(2147483648*Math.random()):uE++,"0x"+uE.toString(16)}const HJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const hi="WebChannelConnection";class qJ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=RC(),c=this.vo(t,r.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(ve("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Qi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Zd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${HJ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=RC();return new Promise((o,a)=>{const c=new KF;c.setWithCredentials(!0),c.listenOnce(QF.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xv.NO_ERROR:const f=c.getResponseJson();ve(hi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case xv.TIMEOUT:ve(hi,`RPC '${e}' ${s} timed out`),a(new _e(ne.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:const m=c.getStatus();if(ve(hi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const b=function(x){const H=x.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(H)>=0?H:ne.UNKNOWN}(I.status);a(new _e(b,I.message))}else a(new _e(ne.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new _e(ne.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{ve(hi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ve(hi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=RC(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JF(),a=XF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new ZF({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");ve(hi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const b=new zJ({lo:x=>{I?ve(hi,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(y||(ve(hi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ve(hi,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},ho:()=>m.close()}),R=(x,H,V)=>{x.listen(H,W=>{try{V(W)}catch(te){setTimeout(()=>{throw te},0)}})};return R(m,cg.EventType.OPEN,()=>{I||(ve(hi,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),R(m,cg.EventType.CLOSE,()=>{I||(I=!0,ve(hi,`RPC '${e}' stream ${i} transport closed`),b.po())}),R(m,cg.EventType.ERROR,x=>{I||(I=!0,Qi(hi,`RPC '${e}' stream ${i} transport errored:`,x),b.po(new _e(ne.UNAVAILABLE,"The operation could not be completed")))}),R(m,cg.EventType.MESSAGE,x=>{var H;if(!I){const V=x.data[0];We(!!V);const te=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(te){ve(hi,`RPC '${e}' stream ${i} received error:`,te);const we=te.status;let Ne=function(L){const z=Ir[L];if(void 0!==z)return fV(z)}(we),j=te.message;void 0===Ne&&(Ne=ne.INTERNAL,j="Unknown error status: "+we+" with message "+te.message),I=!0,b.po(new _e(Ne,j)),m.close()}else ve(hi,`RPC '${e}' stream ${i} received:`,V),b.yo(V)}}),R(a,YF.STAT_EVENT,x=>{x.stat===F0.PROXY?ve(hi,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===F0.NOPROXY&&ve(hi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}}function b2(){return typeof window<"u"?window:null}function lE(){return typeof document<"u"?document:null}function Lg(n){return new tJ(n,!0)}class MC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class T2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new MC(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ae.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ae.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new _e(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ae.Z)(function*(){e.state=0,e.start()}))}c_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GJ extends T2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function iJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ve(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(We(void 0===f||"string"==typeof f),Pr.fromBase64String(f||"")):(We(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Pr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?ne.UNKNOWN:fV(u.code);return new _e(f,u.message||"")}(o);t=new yV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ko(n,r.document.name),s=cr(r.document.updateTime),o=r.document.createTime?cr(r.document.createTime):Ze.min(),a=new Xr({mapValue:{fields:r.document.fields}}),c=Dn.newFoundDocument(i,s,o,a);t=new Kv(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ko(n,r.document),s=r.readTime?cr(r.readTime):Ze.min(),o=Dn.newNoDocument(i,s);t=new Kv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ko(n,r.document);t=new Kv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ve();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new ZX(i,s);t=new _V(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ze.min():o.readTime?cr(o.readTime):Ze.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=oC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=jv(c)?{documents:RV(s,c)}:{query:Zv(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wV(s,o.resumeToken);const u=rC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ze.min())>0){a.readTime=lh(s,o.snapshotVersion.toTimestamp());const u=rC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function oJ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=oC(this.serializer),t.removeTarget=e,this.i_(t)}}class WJ extends T2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function sJ(n,e){return n&&n.length>0?(We(void 0!==e),n.map(t=>function(i,s){let o=cr(i.updateTime?i.updateTime:s);return o.isEqual(Ze.min())&&(o=cr(s)),new GX(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.A_(r,t)}return We(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=oC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rg(this.serializer,r))};this.i_(t)}}class KJ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _e(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,sC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(ne.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,sC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ne.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ZJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ar(t),this.y_=!1):ve("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class QJ{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ae.Z)(function*(){var c;Tc(o)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ae.Z)(function*(f){const m=Ae(f);m.M_.add(4),yield yh(m),m.N_.set("Unknown"),m.M_.delete(4),yield Vg(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new ZJ(r,i)}}function Vg(n){return PC.apply(this,arguments)}function PC(){return(PC=(0,ae.Z)(function*(n){if(Tc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function yh(n){return xC.apply(this,arguments)}function xC(){return(xC=(0,ae.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function dE(n,e){const t=Ae(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),kC(t)?OC(t):Ih(t).Xo()&&NC(t,e))}function vh(n,e){const t=Ae(n),r=Ih(t);t.F_.delete(e),r.Xo()&&C2(t,e),0===t.F_.size&&(r.Xo()?r.n_():Tc(t)&&t.N_.set("Unknown"))}function NC(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ih(n).P_(e)}function C2(n,e){n.L_.xe(e),Ih(n).I_(e)}function OC(n){n.L_=new YX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ih(n).start(),n.N_.w_()}function kC(n){return Tc(n)&&!Ih(n).Zo()&&n.F_.size>0}function Tc(n){return 0===Ae(n).M_.size}function A2(n){n.L_=void 0}function YJ(n){return FC.apply(this,arguments)}function FC(){return(FC=(0,ae.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function XJ(n){return LC.apply(this,arguments)}function LC(){return(LC=(0,ae.Z)(function*(n){n.F_.forEach((e,t)=>{NC(n,e)})})).apply(this,arguments)}function JJ(n,e){return VC.apply(this,arguments)}function VC(){return(VC=(0,ae.Z)(function*(n,e){A2(n),kC(n)?(n.N_.D_(e),OC(n)):n.N_.set("Unknown")})).apply(this,arguments)}function eee(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,ae.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof yV&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hE(n,r)}else if(e instanceof Kv?n.L_.Ke(e):e instanceof _V?n.L_.He(e):n.L_.We(e),!t.isEqual(Ze.min()))try{const r=yield p2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(Pr.EMPTY_BYTE_STRING,f.snapshotVersion)),C2(s,c);const m=new ya(f.target,c,u,f.sequenceNumber);NC(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield hE(n,r)}var r}),UC.apply(this,arguments)}function hE(n,e,t){return BC.apply(this,arguments)}function BC(){return(BC=(0,ae.Z)(function*(n,e,t){if(!fc(e))throw e;n.M_.add(1),yield yh(n),n.N_.set("Offline"),t||(t=()=>p2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Vg(n)}))})).apply(this,arguments)}function D2(n,e){return e().catch(t=>hE(n,t,e))}function Eh(n){return jC.apply(this,arguments)}function jC(){return(jC=(0,ae.Z)(function*(n){const e=Ae(n),t=Cc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;tee(e);)try{const i=yield UJ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,nee(e,i)}catch(i){yield hE(e,i)}S2(e)&&R2(e)})).apply(this,arguments)}function tee(n){return Tc(n)&&n.v_.length<10}function nee(n,e){n.v_.push(e);const t=Cc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function S2(n){return Tc(n)&&!Cc(n).Zo()&&n.v_.length>0}function R2(n){Cc(n).start()}function ree(n){return $C.apply(this,arguments)}function $C(){return($C=(0,ae.Z)(function*(n){Cc(n).V_()})).apply(this,arguments)}function iee(n){return HC.apply(this,arguments)}function HC(){return(HC=(0,ae.Z)(function*(n){const e=Cc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function see(n,e,t){return zC.apply(this,arguments)}function zC(){return(zC=(0,ae.Z)(function*(n,e,t){const r=n.v_.shift(),i=eC.from(r,e,t);yield D2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Eh(n)})).apply(this,arguments)}function oee(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,ae.Z)(function*(n,e){var t;e&&Cc(n).E_&&(yield(t=(0,ae.Z)(function*(i,s){if(hV(a=s.code)&&a!==ne.ABORTED){const o=i.v_.shift();Cc(i).t_(),yield D2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Eh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),S2(n)&&R2(n)}),qC.apply(this,arguments)}function M2(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,ae.Z)(function*(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=Tc(t);t.M_.add(3),yield yh(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Vg(t)})).apply(this,arguments)}function WC(n,e){return KC.apply(this,arguments)}function KC(){return(KC=(0,ae.Z)(function*(n,e){const t=Ae(n);e?(t.M_.delete(2),yield Vg(t)):e||(t.M_.add(2),yield yh(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Ih(n){return n.B_||(n.B_=function(t,r,i){const s=Ae(t);return s.f_(),new GJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:YJ.bind(null,n),To:XJ.bind(null,n),Ao:JJ.bind(null,n),h_:eee.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.B_.t_(),kC(n)?OC(n):n.N_.set("Unknown")):(yield n.B_.stop(),A2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Cc(n){return n.k_||(n.k_=function(t,r,i){const s=Ae(t);return s.f_(),new WJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:ree.bind(null,n),Ao:oee.bind(null,n),R_:iee.bind(null,n),A_:see.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.k_.t_(),yield Eh(n)):(yield n.k_.stop(),n.v_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class ZC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new ZC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wh(n,e){if(ar("AsyncQueue",`${e}: ${n}`),fc(n))return new _e(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class bh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Ig(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class P2{constructor(){this.q_=new vn(Pe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ve():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Th{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Th(e,t,bh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class aee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class cee{constructor(){this.queries=new ma(e=>GL(e),vg),this.onlineState="Unknown",this.z_=new Set}}function QC(n,e){return YC.apply(this,arguments)}function YC(){return(YC=(0,ae.Z)(function*(n,e){const t=Ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new aee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=wh(o,`Initialization of query '${sh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&eA(t)})).apply(this,arguments)}function XC(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,ae.Z)(function*(n,e){const t=Ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function uee(n,e){const t=Ae(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&eA(t)}function lee(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function eA(n){n.z_.forEach(e=>{e.next()})}var tA,x2;(x2=tA||(tA={})).J_="default",x2.Cache="cache";class nA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Th(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==tA.Cache}}class dee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class N2{constructor(e){this.serializer=e}Ps(e){return ko(this.serializer,e)}Is(e){return e.metadata.exists?SV(this.serializer,e.document,!1):Dn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return cr(e)}}class hee{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=O2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Ot.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new N2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||mt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function BJ(n,e,t,r){return bC.apply(this,arguments)}(e.localStore,new N2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield jJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function O2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class k2{constructor(e){this.key=e}}class F2{constructor(e){this.key=e}}class L2{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=mt(),this.mutatedKeys=mt(),this.Ia=KL(e),this.Ta=new bh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new P2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Eg(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let x=!1;y&&I?y.data.isEqual(I.data)?b!==R&&(r.track({type:3,doc:I}),x=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),x=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),x=!0):y&&!I&&(r.track({type:1,doc:y}),x=!0,(c||u)&&(a=!0)),x&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,b){const R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return R(I)-R(b)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new Th(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new P2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=mt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new F2(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new k2(r))}),t}pa(e){this.la=e.hs,this.Pa=mt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Th.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class fee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pee{constructor(e){this.key=e,this.wa=!1}}class gee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ma(a=>GL(a),vg),this.Da=new Map,this.Ca=new Set,this.va=new vn(Pe.comparator),this.Fa=new Map,this.Ma=new gC,this.xa={},this.Oa=new Map,this.Na=$u.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function mee(n,e){return rA.apply(this,arguments)}function rA(){return(rA=(0,ae.Z)(function*(n,e,t=!0){const r=fE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield V2(r,e,t,!0),i})).apply(this,arguments)}function _ee(n,e){return iA.apply(this,arguments)}function iA(){return(iA=(0,ae.Z)(function*(n,e){const t=fE(n);yield V2(t,e,!0,!1)})).apply(this,arguments)}function V2(n,e,t,r){return sA.apply(this,arguments)}function sA(){return(sA=(0,ae.Z)(function*(n,e,t,r){const i=yield mh(n.localStore,li(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield oA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&dE(n.remoteStore,i),a})).apply(this,arguments)}function oA(n,e,t,r,i){return aA.apply(this,arguments)}function aA(){return aA=(0,ae.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(b=(0,ae.Z)(function*(x,H,V,W){let te=H.view.da(V);te.Xi&&(te=yield oE(x.localStore,H.query,!1).then(({documents:N})=>H.view.da(N,te)));const we=W&&W.targetChanges.get(H.targetId),Ne=W&&null!=W.targetMismatches.get(H.targetId),j=H.view.applyChanges(te,x.isPrimaryClient,we,Ne);return yA(x,H.targetId,j.fa),j.snapshot}),function R(x,H,V,W){return b.apply(this,arguments)})(n,m,y,I);var b};const s=yield oE(n.localStore,e,!0),o=new L2(e,s.hs),a=o.da(s.documents),c=Dg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);yA(n,t,u.fa);const f=new fee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),aA.apply(this,arguments)}function yee(n,e,t){return cA.apply(this,arguments)}function cA(){return(cA=(0,ae.Z)(function*(n,e,t){const r=Ae(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!vg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _h(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&vh(r.remoteStore,i.targetId),Ch(r,i.targetId)}).catch(hc))):(Ch(r,i.targetId),yield _h(r.localStore,i.targetId,!0))})).apply(this,arguments)}function vee(n,e){return uA.apply(this,arguments)}function uA(){return(uA=(0,ae.Z)(function*(n,e){const t=Ae(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vh(t.remoteStore,r.targetId))})).apply(this,arguments)}function lA(){return(lA=(0,ae.Z)(function*(n,e,t){const r=RA(n);try{const i=yield function(o,a){const c=Ae(o),u=kn.now(),f=a.reduce((I,b)=>I.add(b.key),mt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Xi(),R=mt();return c.os.getEntries(I,f).next(x=>{b=x,b.forEach((H,V)=>{V.isValidDocument()||(R=R.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(x=>{m=x;const H=[];for(const V of a){const W=KX(V,m.get(V.key).overlayedDocument);null!=W&&H.push(new _a(V.key,W,ML(W.value.mapValue),Fn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,H,a)}).next(x=>{y=x;const H=x.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,x.batchId,H)})}).then(()=>({batchId:y.batchId,changes:QL(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new vn(ct)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield va(r,i.changes),yield Eh(r.remoteStore)}catch(i){const s=wh(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function U2(n,e){return dA.apply(this,arguments)}function dA(){return(dA=(0,ae.Z)(function*(n,e){const t=Ae(n);try{const r=yield function VJ(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,x,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Pr.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),x=I,H=f,(0===(R=y).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=Xi(),u=mt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(g2(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(Ze.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?We(o.wa):i.removedDocuments.size>0&&(We(o.wa),o.wa=!1))}),yield va(t,r,e)}catch(r){yield hc(r)}})).apply(this,arguments)}function B2(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ae(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&eA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Iee(n,e,t){return hA.apply(this,arguments)}function hA(){return(hA=(0,ae.Z)(function*(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new vn(Pe.comparator);o=o.insert(s,Dn.newNoDocument(s,Ze.min()));const a=mt().add(s),c=new Ag(Ze.min(),new Map,new vn(ct),o,a);yield U2(r,c),r.va=r.va.remove(s),r.Fa.delete(e),vA(r)}else yield _h(r.localStore,e,!1).then(()=>Ch(r,e,t)).catch(hc)})).apply(this,arguments)}function wee(n,e){return fA.apply(this,arguments)}function fA(){return(fA=(0,ae.Z)(function*(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=yield function LJ(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=Y.resolve();return y.forEach(b=>{I=I.next(()=>f.getEntry(c,b)).next(R=>{const x=u.docVersions.get(b);We(null!==x),R.version.compareTo(x)<0&&(m.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=mt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);_A(t,r,null),mA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield va(t,i)}catch(i){yield hc(i)}})).apply(this,arguments)}function bee(n,e,t){return pA.apply(this,arguments)}function pA(){return(pA=(0,ae.Z)(function*(n,e,t){const r=Ae(n);try{const i=yield function(o,a){const c=Ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(We(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);_A(r,e,t),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield va(r,i)}catch(i){yield hc(i)}})).apply(this,arguments)}function gA(){return(gA=(0,ae.Z)(function*(n,e){const t=Ae(n);Tc(t.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=wh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function mA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function _A(n,e,t){const r=Ae(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ch(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||j2(n,r)})}function j2(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(vh(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),vA(n))}function yA(n,e,t){for(const r of t)r instanceof k2?(n.Ma.addReference(r.key,e),Cee(n,r)):r instanceof F2?(ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||j2(n,r.key)):Ve()}function Cee(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(ve("SyncEngine","New document in limbo: "+t),n.Ca.add(r),vA(n))}function vA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Pe(Ot.fromString(e)),r=n.Na.next();n.Fa.set(r,new pee(t)),n.va=n.va.insert(t,r),dE(n.remoteStore,new ya(li(rh(t.path)),r,"TargetPurposeLimboResolution",ds.oe))}}function va(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,ae.Z)(function*(n,e,t){const r=Ae(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=EC.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ae.Z)(function*(u,f){const m=Ae(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,I=>Y.forEach(I.qi,b=>m.persistence.referenceDelegate.addReference(y,I.targetId,b)).next(()=>Y.forEach(I.Qi,b=>m.persistence.referenceDelegate.removeReference(y,I.targetId,b)))))}catch(y){if(!fc(y))throw y;ve("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const b=m.ns.get(I),x=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.ns=m.ns.insert(I,x)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),EA.apply(this,arguments)}function Aee(n,e){return IA.apply(this,arguments)}function IA(){return(IA=(0,ae.Z)(function*(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield f2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new _e(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield va(t,r.us)}var s})).apply(this,arguments)}function Dee(n,e){const t=Ae(n),r=t.Fa.get(e);if(r&&r.wa)return mt().add(r.key);{let i=mt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function See(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,ae.Z)(function*(n,e){const t=Ae(n),r=yield oE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&yA(t,e.targetId,i.fa),i})).apply(this,arguments)}function Ree(n,e){return bA.apply(this,arguments)}function bA(){return(bA=(0,ae.Z)(function*(n,e){const t=Ae(n);return _2(t.localStore,e).then(r=>va(t,r))})).apply(this,arguments)}function Mee(n,e,t,r){return TA.apply(this,arguments)}function TA(){return(TA=(0,ae.Z)(function*(n,e,t,r){const i=Ae(n),s=yield function(a,c){const u=Ae(a),f=Ae(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield Eh(i.remoteStore):"acknowledged"===t||"rejected"===t?(_A(i,e,r||null),mA(i,e),c=e,Ae(Ae(i.localStore).mutationQueue).Mn(c)):Ve(),yield va(i,s)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function CA(){return(CA=(0,ae.Z)(function*(n,e){const t=Ae(n);if(fE(t),RA(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $2(t,r.toArray());t.La=!0,yield WC(t.remoteStore,!0);for(const s of i)dE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ch(t,o),_h(t.localStore,o,!0))),vh(t.remoteStore,o)}),yield i,yield $2(t,r),function(o){const a=Ae(o);a.Fa.forEach((c,u)=>{vh(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new vn(Pe.comparator)}(t),t.La=!1,yield WC(t.remoteStore,!1)}})).apply(this,arguments)}function $2(n,e,t){return AA.apply(this,arguments)}function AA(){return(AA=(0,ae.Z)(function*(n,e,t){const r=Ae(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield mh(r.localStore,li(c[0]));for(const u of c){const f=r.ba.get(u),m=yield See(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield m2(r.localStore,o);a=yield mh(r.localStore,u),yield oA(r,H2(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function H2(n){return $L(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function xee(n){return t=Ae(n).localStore,Ae(Ae(t).persistence).Bi();var t}function Nee(n,e,t,r){return DA.apply(this,arguments)}function DA(){return(DA=(0,ae.Z)(function*(n,e,t,r){const i=Ae(n);if(i.La)return void ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield _2(i.localStore,WL(s[0])),a=Ag.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Pr.EMPTY_BYTE_STRING);yield va(i,o,a);break}case"rejected":yield _h(i.localStore,e,!0),Ch(i,e,r);break;default:Ve()}})).apply(this,arguments)}function Oee(n,e,t){return SA.apply(this,arguments)}function SA(){return(SA=(0,ae.Z)(function*(n,e,t){const r=fE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ve("SyncEngine","Adding an already active target "+i);continue}const s=yield m2(r.localStore,i),o=yield mh(r.localStore,s);yield oA(r,H2(s),o.targetId,!1,o.resumeToken),dE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield _h(r.localStore,i,!1).then(()=>{vh(r.remoteStore,i),Ch(r,i)}).catch(hc))}})).apply(this,arguments)}function fE(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=U2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Iee.bind(null,e),e.Sa.h_=uee.bind(null,e.eventManager),e.Sa.ka=lee.bind(null,e.eventManager),e}function RA(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bee.bind(null,e),e}class Ug{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=Lg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return h2(this.persistence,new d2,e.initialUser,this.serializer)}createPersistence(e){return new mC(rE.Hr,this.serializer)}createSharedClientState(e){return new I2}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MA extends Ug{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield RA(r.Qa.syncEngine),yield Eh(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return h2(this.persistence,new d2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new n2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new oX(t,this.persistence);return new sX(e.asyncQueue,r)}createPersistence(e){const t=vC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new yC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,b2(),lE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new I2}}class z2 extends MA{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof SC&&(r.sharedClientState.syncEngine={Zs:Mee.bind(null,i),Xs:Nee.bind(null,i),eo:Oee.bind(null,i),Bi:xee.bind(null,i),Ys:Ree.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ae.Z)(function*(o){yield function Pee(n,e){return CA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=b2();if(!SC.D(t))throw new _e(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ah{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>B2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Aee.bind(null,r.syncEngine),yield WC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cee}createDatastore(e){const t=Lg(e.databaseInfo.databaseId),r=new qJ(e.databaseInfo);return new KJ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>B2(this.syncEngine,t,0),a=w2.D()?new w2:new $J,new QJ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new gee(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;yield(r=(0,ae.Z)(function*(s){const o=Ae(s);ve("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield yh(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function q2(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class pE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ae.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new dee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ae.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Vee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new _e(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.Z)(function*(o,a){const c=Ae(o),u={documents:a.map(I=>Sg(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,Ot.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const b=function rJ(n,e){return"found"in e?function(r,i){We(!!i.found);const s=ko(r,i.found.name),o=cr(i.found.updateTime),a=i.found.createTime?cr(i.found.createTime):Ze.min(),c=new Xr({mapValue:{fields:i.found.fields}});return Dn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){We(!!i.missing),We(!!i.readTime);const s=ko(r,i.missing),o=cr(i.readTime);return Dn.newNoDocument(s,o)}(n,e):Ve()}(c.serializer,I);m.set(b.key.toString(),b)});const y=[];return a.forEach(I=>{const b=m.get(I.toString());We(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pe.fromPath(i);e.mutations.push(new X0(s,e.precondition(s)))}),yield(r=(0,ae.Z)(function*(s,o){const a=Ae(s),c={writes:o.map(u=>Rg(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,Ot.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ve();t=Ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ze.min())?Fn.exists(!1):Fn.updateTime(t):Fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ze.min()))throw new _e(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(t)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uee{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new MC(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ae.Z)(function*(){const t=new Vee(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!dg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hV(t)}return!1}}class Bee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=rL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.Z)(function*(a){ve("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ve("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=wh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gE(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(s){r.isEqual(s)||(yield f2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),PA.apply(this,arguments)}function xA(n,e){return NA.apply(this,arguments)}function NA(){return(NA=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OA(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>M2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>M2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function G2(n){return"FirebaseError"===n.name?n.code===ne.FAILED_PRECONDITION||n.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function OA(n){return kA.apply(this,arguments)}function kA(){return(kA=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!G2(t))throw t;Qi("Error using user provided cache. Falling back to memory cache: "+t),yield gE(n,new Ug)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield gE(n,new Ug);return n._offlineComponents})).apply(this,arguments)}function mE(n){return FA.apply(this,arguments)}function FA(){return(FA=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield xA(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield xA(n,new Ah))),n._onlineComponents})).apply(this,arguments)}function W2(n){return OA(n).then(e=>e.persistence)}function Dh(n){return OA(n).then(e=>e.localStore)}function K2(n){return mE(n).then(e=>e.remoteStore)}function LA(n){return mE(n).then(e=>e.syncEngine)}function Sh(n){return VA.apply(this,arguments)}function VA(){return(VA=(0,ae.Z)(function*(n){const e=yield mE(n),t=e.eventManager;return t.onListen=mee.bind(null,e.syncEngine),t.onUnlisten=yee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_ee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vee.bind(null,e.syncEngine),t})).apply(this,arguments)}function Q2(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new pE({next:y=>{o.enqueueAndForget(()=>XC(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new _e(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new _e(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new nA(rh(a.path),f,{includeMetadataChanges:!0,ra:!0});return QC(s,m)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}function Y2(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new pE({next:y=>{o.enqueueAndForget(()=>XC(s,m)),y.fromCache&&"server"===c.source?u.reject(new _e(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new nA(a,f,{includeMetadataChanges:!0,ra:!0});return QC(s,m)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}function X2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const J2=new Map;function UA(n,e,t){if(!t)throw new _e(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eU(n,e,t,r){if(!0===e&&!0===r)throw new _e(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tU(n){if(!Pe.isDocumentKey(n))throw new _e(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nU(n){if(Pe.isDocumentKey(n))throw new _e(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _E(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ve()}function bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_E(n);throw new _e(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rU(n,e){if(e<=0)throw new _e(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class iU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=X2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new WY;switch(r.type){case"firstParty":return new YY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=J2.get(t);r&&(ve("ComponentProvider","Removing Datastore"),J2.delete(t),r.terminate())}(this),Promise.resolve()}}function sU(n,e,t,r={}){var i;const s=(n=bt(n,Bg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Fr.MOCK_USER;else{a=(0,pt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new _e(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Fr(u)}n._authCredentials=new KY(new tL(a,c))}}class Jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Fo extends Jr{constructor(e,t,r){super(e,t,rh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Pe(e))}withConverter(e){return new Fo(this.firestore,e,this._path)}}function oU(n,e,...t){if(n=(0,pt.m9)(n),UA("collection","path",e),n instanceof Bg){const r=Ot.fromString(e,...t);return nU(r),new Fo(n,null,r)}{if(!(n instanceof Sn||n instanceof Fo))throw new _e(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return nU(r),new Fo(n.firestore,null,r)}}function yE(n,e,...t){if(n=(0,pt.m9)(n),1===arguments.length&&(e=rL.newId()),UA("doc","path",e),n instanceof Bg){const r=Ot.fromString(e,...t);return tU(r),new Sn(n,null,new Pe(r))}{if(!(n instanceof Sn||n instanceof Fo))throw new _e(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return tU(r),new Sn(n.firestore,n instanceof Fo?n.converter:null,new Pe(r))}}function aU(n,e){return n=(0,pt.m9)(n),e=(0,pt.m9)(e),(n instanceof Sn||n instanceof Fo)&&(e instanceof Sn||e instanceof Fo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BA(n,e){return n=(0,pt.m9)(n),e=(0,pt.m9)(e),n instanceof Jr&&e instanceof Jr&&n.firestore===e.firestore&&vg(n._query,e._query)&&n.converter===e.converter}class Jee{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new MC(this,"async_queue_retry"),this.hu=()=>{const t=lE();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=lE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=lE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Mr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ae.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!fc(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,ar("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=ZC.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ve()}verifyOperationInProgress(){}du(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function jA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class ete{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cn extends Bg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jee,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cU(this),this._firestoreClient.terminate()}}function nte(n,e){const t="object"==typeof n?n:(0,Qn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Qn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,pt.P0)("firestore");s&&sU(i,...s)}return i}function Ln(n){return n._firestoreClient||cU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new DX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,X2(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new Bee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function uU(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield gE(n,t),yield xA(n,e),r.resolve()}catch(i){const s=i;if(!G2(s))throw s;Qi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function lU(n){if(n._initialized||n._terminated)throw new _e(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(Pr.fromBase64String(e))}catch(t){throw new _e(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lo(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ea{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _e(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._methodName=e}}class vE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}const hte=/^__.*__$/;class fte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new _a(e,this.data,this.fieldMask,t,this.fieldTransforms):new ch(e,this.data,t,this.fieldTransforms)}}class dU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class EE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new EE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return bE(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(hU(this.fu)&&hte.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class pte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lg(e)}Fu(e,t,r,i=!1){return new EE({fu:e,methodName:t,vu:r,path:An.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(n){const e=n._freezeSettings(),t=Lg(n._databaseId);return new pte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IE(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);KA("Data must be an object, but it was:",o,r);const a=gU(r,o);let c,u;if(s.merge)c=new Yi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Hg(e,m,t);if(!o.contains(y))throw new _e(ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_U(f,y)||f.push(y)}c=new Yi(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new fte(new Xr(a),c,u)}class $g extends zu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $g}}function fU(n,e,t){return new EE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $A extends zu{_toFieldTransform(e){return new bg(e.path,new oh)}isEqual(e){return e instanceof $A}}class HA extends zu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=fU(this,e,!0),r=this.Mu.map(s=>Gu(s,t)),i=new ku(r);return new bg(e.path,i)}isEqual(e){return e instanceof HA&&(0,pt.vZ)(this.Mu,e.Mu)}}class zA extends zu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=fU(this,e,!0),r=this.Mu.map(s=>Gu(s,t)),i=new Fu(r);return new bg(e.path,i)}isEqual(e){return e instanceof zA&&(0,pt.vZ)(this.Mu,e.Mu)}}class qA extends zu{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new ah(e.serializer,eV(e.serializer,this.xu));return new bg(e.path,t)}isEqual(e){return e instanceof qA&&this.xu===e.xu}}function GA(n,e,t,r){const i=n.Fu(1,e,t);KA("Data must be an object, but it was:",i,r);const s=[],o=Xr.empty();pc(r,(c,u)=>{const f=wE(e,c,t);u=(0,pt.m9)(u);const m=i.Su(f);if(u instanceof $g)s.push(f);else{const y=Gu(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Yi(s);return new dU(o,a,i.fieldTransforms)}function WA(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Hg(e,r,t)],c=[i];if(s.length%2!=0)throw new _e(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Hg(e,s[y])),c.push(s[y+1]);const u=[],f=Xr.empty();for(let y=a.length-1;y>=0;--y)if(!_U(u,a[y])){const I=a[y];let b=c[y];b=(0,pt.m9)(b);const R=o.Su(I);if(b instanceof $g)u.push(I);else{const x=Gu(b,R);null!=x&&(u.push(I),f.set(I,x))}}const m=new Yi(u);return new dU(f,m,o.fieldTransforms)}function pU(n,e,t,r=!1){return Gu(t,n.Fu(r?4:3,e))}function Gu(n,e){if(mU(n=(0,pt.m9)(n)))return KA("Unsupported field value:",e,n),gU(n,e);if(n instanceof zu)return function(r,i){if(!hU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Gu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,pt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return eV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=kn.fromDate(r);return{timestampValue:lh(i.serializer,s)}}if(r instanceof kn){const s=new kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lh(i.serializer,s)}}if(r instanceof vE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lo)return{bytesValue:wV(i.serializer,r._byteString)};if(r instanceof Sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${_E(r)}`)}(n,e)}function gU(n,e){const t={};return IL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pc(n,(r,i)=>{const s=Gu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function mU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof vE||n instanceof Lo||n instanceof Sn||n instanceof zu)}function KA(n,e,t){if(!mU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=_E(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Hg(n,e,t){if((e=(0,pt.m9)(e))instanceof Ea)return e._internalPath;if("string"==typeof e)return wE(n,e);throw bE("Field path arguments must be of type string or ",n,!1,void 0,t)}const gte=new RegExp("[~\\*/\\[\\]]");function wE(n,e,t){if(e.search(gte)>=0)throw bE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ea(...e.split("."))._internalPath}catch{throw bE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new _e(ne.INVALID_ARGUMENT,a+n+c)}function _U(n,e){return n.some(t=>t.isEqual(e))}class zg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mte extends zg{data(){return super.data()}}function TE(n,e){return"string"==typeof e?wE(n,e):e instanceof Ea?e._internalPath:e._delegate._internalPath}function yU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZA{}class qg extends ZA{}function Ac(n,e,...t){let r=[];e instanceof ZA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Rh).length,a=s.filter(c=>c instanceof Gg).length;if(o>1||o>0&&a>0)throw new _e(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Gg extends qg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gg(e,t,r)}_apply(e){const t=this._parse(e);return wU(e._query,t),new Jr(e.firestore,e.converter,Q0(e._query,t))}_parse(e){const t=qu(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new _e(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){IU(m,f);const I=[];for(const b of m)I.push(EU(c,s,b));y={arrayValue:{values:I}}}else y=EU(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||IU(m,f),y=pU(a,"where",m,"in"===f||"not-in"===f);return kt.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Rh extends ZA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:rn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)wU(o,c),o=Q0(o,c)}(e._query,t),new Jr(e.firestore,e.converter,Q0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QA extends qg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _g(s,o)}(e._query,this._field,this._direction);return new Jr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ga(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class CE extends qg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new CE(e,t,r)}_apply(e){return new Jr(e.firestore,e.converter,Hv(e._query,this._limit,this._limitType))}}class AE extends qg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new AE(e,t,r)}_apply(e){const t=vU(e,this.type,this._docOrFields,this._inclusive);return new Jr(e.firestore,e.converter,(s=t,new ga((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class DE extends qg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new DE(e,t,r)}_apply(e){const t=vU(e,this.type,this._docOrFields,this._inclusive);return new Jr(e.firestore,e.converter,(s=t,new ga((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function vU(n,e,t,r){if(t[0]=(0,pt.m9)(t[0]),t[0]instanceof zg)return function(s,o,a,c,u){if(!c)throw new _e(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of ih(s))if(m.field.isKeyField())f.push(Nu(o,c.key));else{const y=c.data.field(m.field);if(Fv(y))throw new _e(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new _e(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new vc(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=qu(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new _e(ne.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let b=0;b<f.length;b++){const R=f[b];if(y[b].field.isKeyField()){if("string"!=typeof R)throw new _e(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!Z0(o)&&-1!==R.indexOf("/"))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const x=o.path.child(Ot.fromString(R));if(!Pe.isDocumentKey(x))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const H=new Pe(x);I.push(Nu(a,H))}else{const x=pU(c,u,R);I.push(x)}}return new vc(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function EU(n,e,t){if("string"==typeof(t=(0,pt.m9)(t))){if(""===t)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z0(e)&&-1!==t.indexOf("/"))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ot.fromString(t));if(!Pe.isDocumentKey(r))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(n,new Pe(r))}if(t instanceof Sn)return Nu(n,t._key);throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_E(t)}.`)}function IU(n,e){if(!Array.isArray(n)||0===n.length)throw new _e(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new _e(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YA{convertValue(e,t="none"){switch(_c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new vE(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fg(e));default:return null}}convertTimestamp(e){const t=fa(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ot.fromString(e);We(OV(r));const i=new gc(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(t)||ar(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function SE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Cte extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ia extends zg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wg extends Ia{data(e={}){return super.data(e)}}class Dc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wg(this._firestore,this._userDataWriter,r.key,r,new Wu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Wg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Wg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Dte(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}function TU(n,e){return n instanceof Ia&&e instanceof Ia?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dc&&e instanceof Dc&&n._firestore===e._firestore&&BA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Sc extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function CU(n,e,t){n=bt(n,Sn);const r=bt(n.firestore,cn),i=SE(n.converter,e,t);return Mh(r,[IE(qu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Fn.none())])}function AU(n,e,t,...r){n=bt(n,Sn);const i=bt(n.firestore,cn),s=qu(i);let o;return o="string"==typeof(e=(0,pt.m9)(e))||e instanceof Ea?WA(s,"updateDoc",n._key,e,t,r):GA(s,"updateDoc",n._key,e),Mh(i,[o.toMutation(n._key,Fn.exists(!0))])}function DU(n,...e){var t,r,i;n=(0,pt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||jA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof Sn)u=bt(n.firestore,cn),f=rh(n._key.path),c={next:m=>{e[o]&&e[o](XA(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=bt(n,Jr);u=bt(m.firestore,cn),f=m._query;const y=new Sc(u);c={next:I=>{e[o]&&e[o](new Dc(u,y,m,I))},error:e[o+1],complete:e[o+2]},yU(n._query)}return function(y,I,b,R){const x=new pE(R),H=new nA(I,x,b);return y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return QC(yield Sh(y),H)})),()=>{x.$a(),y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return XC(yield Sh(y),H)}))}}(Ln(u),f,a,c)}function Mh(n,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function Eee(n,e,t){return lA.apply(this,arguments)}(yield LA(r),i,s)})),s.promise}(Ln(n),e)}function XA(n,e,t){const r=t.docs.get(e._key),i=new Sc(n);return new Ia(n,i,e._key,r,new Wu(t.hasPendingWrites,t.fromCache),e.converter)}const qte={maxAttempts:5};class SU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qu(e)}set(e,t,r){this._verifyNotCommitted();const i=Rc(e,this._firestore),s=SE(i.converter,t,r),o=IE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Fn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Rc(e,this._firestore);let o;return o="string"==typeof(t=(0,pt.m9)(t))||t instanceof Ea?WA(this._dataReader,"WriteBatch.update",s._key,t,r,i):GA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rc(e,this._firestore);return this._mutations=this._mutations.concat(new uh(t._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rc(n,e){if((n=(0,pt.m9)(n)).firestore!==e)throw new _e(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Gte extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=qu(t)}get(t){const r=Rc(t,this._firestore),i=new Cte(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ve();const o=s[0];if(o.isFoundDocument())return new zg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new zg(this._firestore,i,r._key,null,r.converter);throw Ve()})}set(t,r,i){const s=Rc(t,this._firestore),o=SE(s.converter,r,i),a=IE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Rc(t,this._firestore);let a;return a="string"==typeof(r=(0,pt.m9)(r))||r instanceof Ea?WA(this._dataReader,"Transaction.update",o._key,r,i,s):GA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Rc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rc(e,this._firestore),r=new Sc(this._firestore);return super.get(e).then(i=>new Ia(this._firestore,r,t._key,i._document,new Wu(!1,!1),t.converter))}}function eD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xU(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function NU(){if(!function CX(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Zd=Qn.SDK_VERSION,(0,Qn._registerComponent)(new Mv.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new cn(new ZY(r.getProvider("auth-internal")),new XY(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Qn.registerVersion)(eL,"4.6.3",e),(0,Qn.registerVersion)(eL,"4.6.3","esm2017")}();class Kg{constructor(e){this._delegate=e}static fromBase64String(e){return NU(),new Kg(Lo.fromBase64String(e))}static fromUint8Array(e){return xU(),new Kg(Lo.fromUint8Array(e))}toBase64(){return NU(),this._delegate.toBase64()}toUint8Array(){return xU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tD(n){return function nne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rne{enableIndexedDbPersistence(e,t){return function rte(n,e){lU(n=bt(n,cn));const t=Ln(n);if(t._uninitializedComponentsProvider)throw new _e(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Qi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Ah;return uU(t,i,new MA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ite(n){lU(n=bt(n,cn));const e=Ln(n);if(e._uninitializedComponentsProvider)throw new _e(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Qi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Ah;return uU(e,r,new z2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ste(n){if(n._initialized&&!n._terminated)throw new _e(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(i){if(!Po.D())return Promise.resolve();const s=i+"main";yield Po.delete(s)}),function r(i){return t.apply(this,arguments)})(vC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){sU(this._delegate,e,t,r)}enableNetwork(){return function ate(n){return function jee(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield W2(n),t=yield K2(n);return e.setNetworkEnabled(!0),function(i){const s=Ae(i);return s.M_.delete(0),Vg(s)}(t)}))}(Ln(n=bt(n,cn)))}(this._delegate)}disableNetwork(){return function cte(n){return function $ee(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield W2(n),t=yield K2(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(s){const o=Ae(s);o.M_.add(0),yield yh(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Ln(n=bt(n,cn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ote(n){return function(t){const r=new Mr;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function Tee(n,e){return gA.apply(this,arguments)}(yield LA(t),r)})),r.promise}(Ln(n=bt(n,cn)))}(this._delegate)}onSnapshotsInSync(e){return function Fte(n,e){return function Gee(n,e){const t=new pE(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Sh(n),s=t,Ae(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Sh(n),s=t,void Ae(i).z_.delete(s);var i,s}))}}(Ln(n=bt(n,cn)),jA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ph(this,oU(this._delegate,e))}catch(t){throw Ri(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ns(this,yE(this._delegate,e))}catch(t){throw Ri(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mi(this,function Xee(n,e){if(n=bt(n,Bg),UA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jr(n,null,(r=e,new ga(Ot.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ri(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Wte(n,e,t){n=bt(n,cn);const r=Object.assign(Object.assign({},qte),t);return function(s){if(s.maxAttempts<1)throw new _e(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Mr;return s.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const u=yield function Z2(n){return mE(n).then(e=>e.datastore)}(s);new Uee(s.asyncQueue,u,a,o,c).Xa()})),c.promise}(Ln(n),i=>e(new Gte(n,i)),r)}(this._delegate,t=>e(new kU(this,t)))}batch(){return Ln(this._delegate),new FU(new SU(this._delegate,e=>Mh(this._delegate,e)))}loadBundle(e){return function ute(n,e){const t=Ln(n=bt(n,cn)),r=new ete;return function Wee(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?pV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return q2(f,m);if(f instanceof ArrayBuffer)return q2(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Lee(f,a);var f}(t,Lg(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function kee(n,e,t){const r=Ae(n);var i;(i=(0,ae.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(b,R){const x=Ae(b),H=cr(R.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",V=>x.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(b=u).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);c._updateProgress(O2(u));const f=new hee(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield va(o,y.ca,void 0),yield function(b,R){const x=Ae(b);return x.persistence.runTransaction("Save bundle","readwrite",H=>x.$r.saveBundleMetadata(H,R))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return Qi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var b}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield LA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lte(n,e){return function Kee(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,i){const s=Ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Dh(n),e)}))}(Ln(n=bt(n,cn)),e).then(t=>t?new Jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Mi(this,t):null)}}class ME extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kg(new Lo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ns.forKey(t,this.firestore,null)}}class kU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}get(e){const t=Zu(e);return this._delegate.get(t).then(r=>new Zg(this._firestore,new Ia(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Zu(e);return r?(eD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Zu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Zu(e);return this._delegate.delete(t),this}}class FU{constructor(e){this._delegate=e}set(e,t,r){const i=Zu(e);return r?(eD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Zu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Zu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ku{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Wg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ku.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ku(e,new ME(e),t),i.set(t,s)),s}}Ku.INSTANCES=new WeakMap;class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}static forPath(e,t,r){if(e.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ns(t,new Sn(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new Ns(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ph(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ph(this.firestore,oU(this._delegate,e))}catch(t){throw Ri(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,pt.m9)(e))instanceof Sn&&aU(this._delegate,e)}set(e,t){t=eD("DocumentReference.set",t);try{return t?CU(this._delegate,e,t):CU(this._delegate,e)}catch(r){throw Ri(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?AU(this._delegate,e):AU(this._delegate,e,t,...r)}catch(i){throw Ri(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ote(n){return Mh(bt(n.firestore,cn),[new uh(n._key,Fn.none())])}(this._delegate)}onSnapshot(...e){const t=LU(e),r=VU(e,i=>new Zg(this.firestore,new Ia(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Rte(n){n=bt(n,Sn);const e=bt(n.firestore,cn),t=Ln(e),r=new Sc(e);return function Hee(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Ae(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new _e(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=wh(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Dh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ia(e,r,n._key,i,new Wu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Mte(n){n=bt(n,Sn);const e=bt(n.firestore,cn);return Q2(Ln(e),n._key,{source:"server"}).then(t=>XA(e,n,t))}(this._delegate):function Ste(n){n=bt(n,Sn);const e=bt(n.firestore,cn);return Q2(Ln(e),n._key).then(t=>XA(e,n,t))}(this._delegate),t.then(r=>new Zg(this.firestore,new Ia(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?Ku.getInstance(this.firestore,e):null))}}function Ri(n,e,t){return n.message=n.message.replace(e,t),n}function LU(n){for(const e of n)if("object"==typeof e&&!tD(e))return e;return{}}function VU(n,e){var t,r;let i;return i=tD(n[0])?n[0]:tD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Zg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ns(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TU(this._delegate,e._delegate)}}class Qg extends Zg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function GY(n,e){n||Ve()}(void 0!==t),t}}class Mi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}where(e,t,r){try{return new Mi(this.firestore,Ac(this._delegate,function _te(n,e,t){const r=e,i=TE("where",n);return Gg._create(i,r,t)}(e,t,r)))}catch(i){throw Ri(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mi(this.firestore,Ac(this._delegate,function yte(n,e="asc"){const t=e,r=TE("orderBy",n);return QA._create(r,t)}(e,t)))}catch(r){throw Ri(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mi(this.firestore,Ac(this._delegate,function vte(n){return rU("limit",n),CE._create("limit",n,"F")}(e)))}catch(t){throw Ri(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Mi(this.firestore,Ac(this._delegate,function Ete(n){return rU("limitToLast",n),CE._create("limitToLast",n,"L")}(e)))}catch(t){throw Ri(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mi(this.firestore,Ac(this._delegate,function Ite(...n){return AE._create("startAt",n,!0)}(...e)))}catch(t){throw Ri(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mi(this.firestore,Ac(this._delegate,function wte(...n){return AE._create("startAfter",n,!1)}(...e)))}catch(t){throw Ri(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mi(this.firestore,Ac(this._delegate,function bte(...n){return DE._create("endBefore",n,!1)}(...e)))}catch(t){throw Ri(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mi(this.firestore,Ac(this._delegate,function Tte(...n){return DE._create("endAt",n,!0)}(...e)))}catch(t){throw Ri(t,"endAt()","Query.endAt()")}}isEqual(e){return BA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xte(n){n=bt(n,Jr);const e=bt(n.firestore,cn),t=Ln(e),r=new Sc(e);return function zee(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield oE(s,o,!0),u=new L2(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=wh(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Dh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate):"server"===e?.source?function Nte(n){n=bt(n,Jr);const e=bt(n.firestore,cn),t=Ln(e),r=new Sc(e);return Y2(t,n._query,{source:"server"}).then(i=>new Dc(e,r,n,i))}(this._delegate):function Pte(n){n=bt(n,Jr);const e=bt(n.firestore,cn),t=Ln(e),r=new Sc(e);return yU(n._query),Y2(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate),t.then(r=>new nD(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=LU(e),r=VU(e,i=>new nD(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DU(this._delegate,t,r)}withConverter(e){return new Mi(this.firestore,this._delegate.withConverter(e?Ku.getInstance(this.firestore,e):null))}}class sne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sne(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qg(this._firestore,r))})}isEqual(e){return TU(this._delegate,e._delegate)}}class Ph extends Mi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ns(this.firestore,e):null}doc(e){try{return new Ns(this.firestore,void 0===e?yE(this._delegate):yE(this._delegate,e))}catch(t){throw Ri(t,"doc()","CollectionReference.doc()")}}add(e){return function kte(n,e){const t=bt(n.firestore,cn),r=yE(n),i=SE(n.converter,e);return Mh(t,[IE(qu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ns(this.firestore,t))}isEqual(e){return aU(this._delegate,e._delegate)}withConverter(e){return new Ph(this.firestore,this._delegate.withConverter(e?Ku.getInstance(this.firestore,e):null))}}function Zu(n){return bt(n,Sn)}class rD{constructor(...e){this._delegate=new Ea(...e)}static documentId(){return new rD(An.keyField().canonicalString())}isEqual(e){return(e=(0,pt.m9)(e))instanceof Ea&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Zte(){return new $A("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qu(e)}static delete(){const e=function Kte(){return new $g("deleteField")}();return e._methodName="FieldValue.delete",new Qu(e)}static arrayUnion(...e){const t=function Qte(...n){return new HA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qu(t)}static arrayRemove(...e){const t=function Yte(...n){return new zA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qu(t)}static increment(e){const t=function Xte(n){return new qA("increment",n)}(e);return t._methodName="FieldValue.increment",new Qu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const one={Firestore:OU,GeoPoint:vE,Timestamp:kn,Blob:Kg,Transaction:kU,WriteBatch:FU,DocumentReference:Ns,DocumentSnapshot:Zg,Query:Mi,QueryDocumentSnapshot:Qg,QuerySnapshot:nD,CollectionReference:Ph,FieldPath:rD,FieldValue:Qu,setLogLevel:function ine(n){!function qY(n){dc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function UU(n,e){return function une(n,e=XT){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function iD(n,e){return UU(n,e).pipe(xe(t=>({payload:t,type:"query"})))}!function cne(n){(function ane(n,e){n.INTERNAL.registerComponent(new Mv.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},one)))})(n,(e,t)=>new OU(e,t,new rne)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Ro.Z);class BU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=GU(r,t);return new HU(i,s,this.afs)}snapshotChanges(){return function lne(n,e){return UU(n,e).pipe(Vp(void 0),k0(),xe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return this.snapshotChanges().pipe(xe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return T(this.ref.get(e)).pipe(Si)}}function PE(n,e){return iD(n,e).pipe(Vp(void 0),k0(),xe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function jU(n,e,t){return PE(n,t).pipe(dv((r,i)=>function dne(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hne(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),nt(),xe(r=>r.map(i=>({type:i.type,payload:i}))))}function sD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $U(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(xe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Vp(void 0),k0(),us(([r,i])=>i.length>0||!r),xe(([,r])=>r),Si)}auditTrail(e){return this.stateChanges(e).pipe(dv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$U(e);return jU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return iD(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Si)}get(e){return T(this.query.get(e)).pipe(Si)}add(e){return this.ref.add(e)}doc(e){return new BU(this.ref.doc(e),this.afs)}}class fne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PE(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.filter(r=>e.indexOf(r.type)>-1)),us(t=>t.length>0),Si):PE(this.query,this.afs.schedulers.outsideAngular).pipe(Si)}auditTrail(e){return this.stateChanges(e).pipe(dv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$U(e);return jU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return iD(this.query,this.afs.schedulers.outsideAngular).pipe(xe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Si)}get(e){return T(this.query.get(e)).pipe(Si)}}const zU=new me("angularfire2.enableFirestorePersistence"),qU=new me("angularfire2.firestore.persistenceSettings"),pne=new me("angularfire2.firestore.settings"),gne=new me("angularfire2.firestore.use-emulator");function GU(n,e=(t=>t)){return{query:e(n),ref:n}}let oD=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,b,R,x,H,V){this.schedulers=c;const W=Rv(t,a,r),te=f;m&&HF(W,a,y,b,R,x,I,H),[this.firestore,this.persistenceEnabled$]=O0(`${W.name}.firestore`,"AngularFirestore",W.name,()=>{const we=a.runOutsideAngular(()=>W.firestore());if(s&&we.settings(s),te&&we.useEmulator(...te),i&&!Ky(o)){const Ne=()=>{try{return T(we.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),k(!1)}};return[we,a.runOutsideAngular(Ne)]}return[we,k(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=GU(i,r),a=this.schedulers.ngZone.run(()=>s);return new HU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new fne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new BU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(le(og),le(ag,8),le(zU,8),le(pne,8),le(Ds),le(Mt),le(Wd),le(qU,8),le(gne,8),le(zF,8),le(LF,8),le(VF,8),le(UF,8),le(BF,8),le(jF,8),le($F,8),le(sg,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),mne=(()=>{class n{constructor(){Ro.Z.registerVersion("angularfire",lc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zU,useValue:!0},{provide:qU,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[oD]})}return n})(),WU=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("Services").valueChanges().pipe(xe(t=>{const r=t.map(i=>i.Service_Type);return Array.from(new Set(r))}))}addService(t){const r=this.firestore.createId();return this.firestore.collection("Services").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(oD))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(na),Ie(Gi))};static#t=this.\u0275dir=qe({type:n})}return n})(),Yu=(()=>{class n extends KU{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=mr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,features:[tn]})}return n})();const Vo=new me("NgValueAccessor"),yne={provide:Vo,useExisting:qt(()=>xE),multi:!0},Ene=new me("CompositionEventMode");let xE=(()=>{class n extends KU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vne(){const n=tc()?tc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(na),Ie(Gi),Ie(Ene,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&yr("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[On([yne]),tn]})}return n})();function Mc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function QU(n){return null!=n&&"number"==typeof n.length}const fi=new me("NgValidators"),Pc=new me("NgAsyncValidators"),Ine=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xu{static min(e){return function YU(n){return e=>{if(Mc(e.value)||Mc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function XU(n){return e=>{if(Mc(e.value)||Mc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return JU(e)}static requiredTrue(e){return function eB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function tB(n){return Mc(n.value)||Ine.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function nB(n){return e=>Mc(e.value)||!QU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function rB(n){return e=>QU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function iB(n){if(!n)return NE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Mc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return lB(e)}static composeAsync(e){return dB(e)}}function JU(n){return Mc(n.value)?{required:!0}:null}function NE(n){return null}function sB(n){return null!=n}function oB(n){return yp(n)?T(n):n}function aB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function cB(n,e){return e.map(t=>t(n))}function uB(n){return n.map(e=>function wne(n){return!n.validate}(e)?e:t=>e.validate(t))}function lB(n){if(!n)return null;const e=n.filter(sB);return 0==e.length?null:function(t){return aB(cB(t,e))}}function aD(n){return null!=n?lB(uB(n)):null}function dB(n){if(!n)return null;const e=n.filter(sB);return 0==e.length?null:function(t){return function ak(...n){const e=js(n),{args:t,keys:r}=L1(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let f=0;f<o;f++){let m=!1;Vt(t[f]).subscribe(Ce(s,y=>{m||(m=!0,u--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(u||s.next(r?U1(r,a):a),s.complete())}))}});return e?i.pipe(V1(e)):i}(cB(t,e).map(oB)).pipe(xe(aB))}}function cD(n){return null!=n?dB(uB(n)):null}function hB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fB(n){return n._rawValidators}function pB(n){return n._rawAsyncValidators}function uD(n){return n?Array.isArray(n)?n:[n]:[]}function OE(n,e){return Array.isArray(n)?n.includes(e):n===e}function gB(n,e){const t=uD(e);return uD(n).forEach(i=>{OE(t,i)||t.push(i)}),t}function mB(n,e){return uD(e).filter(t=>!OE(n,t))}class _B{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pi extends _B{get formDirective(){return null}get path(){return null}}class xc extends _B{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vB=(()=>{class n extends yB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(xc,2))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Dd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[tn]})}return n})(),EB=(()=>{class n extends yB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(Pi,10))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Dd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[tn]})}return n})();const Yg="VALID",FE="INVALID",xh="PENDING",Xg="DISABLED";function hD(n){return(LE(n)?n.validators:n)||null}function fD(n,e){return(LE(e)?e.asyncValidators:n)||null}function LE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function wB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new P(1e3,"");if(!r[t])throw new P(1001,"")}function bB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new P(1002,"")})}class VE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yg}get invalid(){return this.status===FE}get pending(){return this.status==xh}get disabled(){return this.status===Xg}get enabled(){return this.status!==Xg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mB(e,this._rawAsyncValidators))}hasValidator(e){return OE(this._rawValidators,e)}hasAsyncValidator(e){return OE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yg||this.status===xh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xg:Yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xh,this._hasOwnPendingAsyncValidator=!0;const t=oB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Wn,this.statusChanges=new Wn}_calculateStatus(){return this._allControlsDisabled()?Xg:this.errors?FE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xh)?xh:this._anyControlsHaveStatus(FE)?FE:Yg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){LE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ane(n){return Array.isArray(n)?aD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Dne(n){return Array.isArray(n)?cD(n):n||null}(this._rawAsyncValidators)}}class Jg extends VE{constructor(e,t,r){super(hD(t),fD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bB(this,0,e),Object.keys(e).forEach(r=>{wB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class TB extends Jg{}const Nh=new me("CallSetDisabledState",{providedIn:"root",factory:()=>UE}),UE="always";function em(n,e,t=UE){pD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Rne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&CB(n,e)})}(n,e),function Pne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&CB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Sne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function jE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),HE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $E(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pD(n,e){const t=fB(n);null!==e.validator?n.setValidators(hB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=pB(n);null!==e.asyncValidator?n.setAsyncValidators(hB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$E(e._rawValidators,i),$E(e._rawAsyncValidators,i)}function HE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=fB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=pB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return $E(e._rawValidators,r),$E(e._rawAsyncValidators,r),t}function CB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function SB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function RB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nm=class extends VE{constructor(e=null,t,r){super(hD(t),fD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),LE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=RB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){RB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let OB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),FB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({})}return n})();const vD=new me("NgModelWithFormControlWarning"),qne={provide:Pi,useExisting:qt(()=>zE)};let zE=(()=>{class n extends Pi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Wn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(HE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return em(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jE(t.control||null,t,!1),function kne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function DB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(jE(r||null,t),(n=>n instanceof nm)(i)&&(em(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function AB(n,e){pD(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xne(n,e){return HE(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pD(this.form,this),this._oldForm&&HE(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(fi,10),Ie(Pc,10),Ie(Nh,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&yr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[On([qne]),tn,Hi]})}return n})();const Kne={provide:xc,useExisting:qt(()=>wD)};let wD=(()=>{class n extends xc{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Wn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _D(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===xE?t=s:function One(n){return Object.getPrototypeOf(n.constructor)===Yu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function mD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function BE(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(Ie(Pi,13),Ie(fi,10),Ie(Pc,10),Ie(Vo,10),Ie(vD,8))};static#n=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[On([Kne]),tn,Hi]})}return n})();const Zne={provide:Vo,useExisting:qt(()=>qE),multi:!0};function jB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let qE=(()=>{class n extends Yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=jB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Qne(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=mr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&yr("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[On([Zne]),tn]})}return n})(),bD=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(Gi),Ie(na),Ie(qE,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Yne={provide:Vo,useExisting:qt(()=>TD),multi:!0};function $B(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let TD=(()=>{class n extends Yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Xne(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=mr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&yr("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[On([Yne]),tn]})}return n})(),CD=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue($B(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($B(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(Gi),Ie(na),Ie(TD,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Ju=(()=>{class n{constructor(){this._validator=NE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):NE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=qe({type:n,features:[Hi]})}return n})();const tre={provide:fi,useExisting:qt(()=>GE),multi:!0};let GE=(()=>{class n extends Ju{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=xd,this.createValidator=t=>JU}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=mr(n)))(i||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&bo("required",i._enabled?"":null)},inputs:{required:"required"},features:[On([tre]),tn]})}return n})(),are=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[FB]})}return n})();class XB extends VE{constructor(e,t,r){super(hD(t),fD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){bB(this,0,e),e.forEach((r,i)=>{wB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function JB(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let cre=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return JB(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Jg(i,s)}record(t,r=null){const i=this._reduceControls(t);return new TB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(JB(r)?s=r:(s.validators=r,s.asyncValidators=i),new nm(t,{...s,nonNullable:!0})):new nm(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new XB(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof nm||t instanceof VE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ure=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Nh,useValue:t.callSetDisabledState??UE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[are]})}return n})();function lre(n,e){if(1&n&&(Me(0,"option",11),Ue(1),be()),2&n){const t=e.$implicit;Wi("value",t),Ht(1),kr(t)}}function dre(n,e){1&n&&(Me(0,"div",18)(1,"span",19),Ue(2,"Sponsor al Comunitatii"),be(),Me(3,"span",20),Ue(4,"\u2605"),be()())}function hre(n,e){if(1&n&&(Me(0,"div",12)(1,"div",13)(2,"div",14),Ue(3),be(),Me(4,"div",15),Ue(5),be(),Me(6,"div",15),Ue(7),be(),Me(8,"div",15)(9,"a",16),Ue(10),be()(),Me(11,"div",15)(12,"a",16),Ue(13),be()(),Me(14,"div",15),Ue(15),be()(),fu(16,dre,5,0,"div",17),be()),2&n){const t=e.$implicit;Ht(3),kr(t.Name),Ht(2),kr(t.Service_Type),Ht(2),kr(t.Phone_Number),Ht(2),Ep("href","mailto:",t.Email,"",lu),Ht(1),kr(t.Email),Ht(2),vp("href",t.Website,lu),Ht(1),kr(t.Website),Ht(2),kr(t.Description),Ht(1),Wi("ngIf",t.Community_Sponsor)}}let fre=(()=>{class n{constructor(t){this.servicesService=t,this.services=[],this.serviceTypes=[],this.selectedServiceType=""}handleChange(t){console.log(t);const{target:r}=t;return r&&console.log(r.value),r.value}ngOnInit(){this.fetchServiceTypes(),this.fetchServices()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{console.log("Serviciu: "+r)})})}fetchServices(){this.servicesService.getServices().subscribe(t=>{this.services=t})}onFilterChange(t){this.selectedServiceType=t,console.log(this.selectedServiceType),t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r}):this.fetchServices()}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(WU))};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-services"]],decls:18,vars:2,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-filter"],["for","service-type"],["id","service-type",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["href","#","routerLink","/add-service"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[3,"value"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(Me(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Lista de Servicii"),be()(),Me(4,"div",2)(5,"h2"),Ue(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),be()()(),Me(7,"div",3)(8,"label",4),Ue(9,"Filtra\u021bi dup\u0103 tipul serviciului: "),be(),Me(10,"select",5),yr("change",function(o){return i.onFilterChange(i.handleChange(o))}),Me(11,"option",6),Ue(12,"All"),be(),fu(13,lre,2,2,"option",7),be(),Me(14,"a",8),Ue(15,"Adaugati un Serviciu"),be()(),Me(16,"div",9),fu(17,hre,17,9,"div",10),be()),2&r&&(Ht(13),Wi("ngForOf",i.serviceTypes),Ht(4),Wi("ngForOf",i.services))},dependencies:[Wy,xT,ig,bD,CD],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})(),pre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-rules"]],decls:23,vars:0,template:function(r,i){1&r&&(Me(0,"h2"),Ue(1,"Regulile \u0219i Reglement\u0103rile"),be(),Me(2,"ul")(3,"li"),Ue(4,"Nu este permis\u0103 nicio form\u0103 de publicitate."),be(),Me(5,"li"),Ue(6,"Respecta\u021bi to\u021bi membrii."),be(),Me(7,"li"),Ue(8,"F\u0103r\u0103 spam."),be(),Me(9,"li"),Ue(10,"F\u0103r\u0103 limbaj ofensator."),be(),Me(11,"li"),Ue(12,"R\u0103m\xe2ne\u021bi la subiect."),be(),Me(13,"li"),Ue(14,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),be(),Me(15,"li"),Ue(16,"Folosi\u021bi un limbaj adecvat."),be(),Me(17,"li"),Ue(18,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),be(),Me(19,"li"),Ue(20,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),be()(),Me(21,"p"),Ue(22,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),be())}})}return n})(),gre=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(le(oD))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mre(n,e){1&n&&(Me(0,"div",13)(1,"span",14),Ue(2,"Sponsor al Comunitatii"),be(),Me(3,"span",15),Ue(4,"\u2605"),be()())}function _re(n,e){if(1&n&&(Me(0,"div",5)(1,"div",6)(2,"div",7),Ue(3),be(),Me(4,"div",8),Rs(5,"img",9),be(),Me(6,"div",10),Ue(7),be(),Me(8,"div",10),Ue(9),be(),Me(10,"div",10),Ue(11),be(),Me(12,"div",10),Ue(13),be(),Me(14,"div",10)(15,"a",11),Ue(16),be()(),Me(17,"div",10)(18,"a",11),Ue(19),be()(),Me(20,"div",10),Ue(21),be()(),fu(22,mre,5,0,"div",12),be()),2&n){const t=e.$implicit;Ht(3),kr(t.Name),Ht(2),vp("src",t.Poster_Image,lu),Ht(2),kr(t.Location),Ht(2),kr(t.Event_date),Ht(2),kr(t.Price),Ht(2),kr(t.Phone_Number),Ht(2),Ep("href","mailto:",t.Contact,"",lu),Ht(1),kr(t.Contact),Ht(2),vp("href",t.Website,lu),Ht(1),kr(t.Website),Ht(2),kr(t.Description),Ht(1),Wi("ngIf",t.Community_Sponsor)}}function Ere(n,e){if(1&n&&(Me(0,"option",20),Ue(1),be()),2&n){const t=e.$implicit;Wi("value",t),Ht(1),kr(t)}}const Ire=[{path:"",component:wY},{path:"services",component:fre},{path:"rules",component:pre},{path:"events",component:(()=>{class n{constructor(t){this.eventService=t,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(gre))};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-events"]],decls:9,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(Me(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Lista de Evenimente"),be()(),Me(4,"div",2)(5,"h2"),Ue(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),be()()(),Me(7,"div",3),fu(8,_re,23,12,"div",4),be()),2&r&&(Ht(8),Wi("ngForOf",i.events))},dependencies:[Wy,xT],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:20px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"jobs",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-jobs"]],decls:2,vars:0,template:function(r,i){1&r&&(Me(0,"p"),Ue(1,"jobs works!"),be())}})}return n})()},{path:"add-service",component:(()=>{class n{constructor(t,r){this.fb=t,this.servicesService=r,this.serviceTypes=[],this.serviceForm=this.fb.group({businessName:["",Xu.required],email:["",[Xu.required,Xu.email]],phone:["",Xu.required],website:["",Xu.required],description:["",Xu.required],serviceType:["",Xu.required]})}ngOnInit(){this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.servicesService.addService({Name:this.serviceForm.value.businessName,Phone_Number:this.serviceForm.value.phone,Service_Type:this.serviceForm.value.serviceType,Community_Sponsor:!1,Email:this.serviceForm.value.email,Website:this.serviceForm.value.website,Description:this.serviceForm.value.description}).then(()=>{console.log("Service added successfully"),this.serviceForm.reset()}).catch(r=>{console.error("Error adding service: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(Ie(cre),Ie(WU))};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-add-service"]],decls:36,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName"],["id","businessName","formControlName","businessName","required",""],["for","email"],["id","email","type","email","formControlName","email"],["for","phone"],["id","phone","formControlName","phone"],["for","website"],["id","website","formControlName","website"],["for","description"],["id","description","formControlName","description"],["for","serviceType"],["id","serviceType","formControlName","serviceType","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(Me(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Lista de Servicii"),be()(),Me(4,"div",2)(5,"h2"),Ue(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),be()()(),Me(7,"div",3)(8,"form",4),yr("ngSubmit",function(){return i.onSubmit()}),Me(9,"div",5)(10,"label",6),Ue(11,"Nume:"),be(),Rs(12,"input",7),be(),Me(13,"div",5)(14,"label",8),Ue(15,"Adresa Email:"),be(),Rs(16,"input",9),be(),Me(17,"div",5)(18,"label",10),Ue(19,"Numar de telefon:"),be(),Rs(20,"input",11),be(),Me(21,"div",5)(22,"label",12),Ue(23,"Pagina Web:"),be(),Rs(24,"input",13),be(),Me(25,"div",5)(26,"label",14),Ue(27,"Descriere a serviciile oferite:"),be(),Rs(28,"textarea",15),be(),Me(29,"div",5)(30,"label",16),Ue(31,"Service Type:"),be(),Me(32,"select",17),fu(33,Ere,2,2,"option",18),be()(),Me(34,"button",19),Ue(35,"Add Service"),be()()()),2&r&&(Ht(8),Wi("formGroup",i.serviceForm),Ht(25),Wi("ngForOf",i.serviceTypes),Ht(1),Wi("disabled",i.serviceForm.invalid))},dependencies:[Wy,OB,bD,CD,xE,qE,vB,EB,GE,zE,wD],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}"]})}return n})()}];let wre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({imports:[RF.forRoot(Ire),RF]})}return n})();const bre=function(n,e){return{"fa-bars":n,"fa-times":e}},Tre=function(n){return{active:n}};let Cre=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/jobs",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(Me(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Ue(4,"Romani in Seattle"),be()(),Me(5,"div",4),yr("click",function(){return i.toggleMenu()}),Rs(6,"i",5),be(),Me(7,"ul",6)(8,"li",7)(9,"a",8),yr("click",function(){return i.closeMenu()}),Ue(10,"Home"),be()(),Me(11,"li",7)(12,"a",9),yr("click",function(){return i.closeMenu()}),Ue(13,"Servicii"),be()(),Me(14,"li",7)(15,"a",10),yr("click",function(){return i.closeMenu()}),Ue(16,"Evenimente"),be()(),Me(17,"li",7)(18,"a",11),yr("click",function(){return i.closeMenu()}),Ue(19,"Locuri de Munca"),be()(),Me(20,"li",7)(21,"a",12),yr("click",function(){return i.closeMenu()}),Ue(22,"Regulament"),be()()()()()),2&r&&(Ht(6),Wi("ngClass",EN(2,bre,!i.menuOpen,i.menuOpen)),Ht(1),Wi("ngClass",vN(5,Tre,i.menuOpen)))},dependencies:[n1,ig],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{text-decoration:none;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to right,blue,yellow,red) 1}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),Are=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(Me(0,"footer",0)(1,"div",1),Ue(2," \xa9 2024 Romani in Seattle. All rights reserved. "),be()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),Dre=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=zr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(Me(0,"div",0),Rs(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),be())},dependencies:[b0,Cre,Are],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class ej{}class Sre{}const wa="*";function tj(n,e=null){return{type:2,steps:n,options:e}}function nj(n){return{type:6,styles:n,offset:null}}class rm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class rj{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function ij(n){return new P(3e3,!1)}function Nc(n){switch(n.length){case 0:return new rm;case 1:return n[0];default:return new rj(n)}}function sj(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let b=I,R=y;if("offset"!==I)switch(b=n.normalizePropertyName(b,i),R){case"!":R=t.get(I);break;case wa:R=r.get(I);break;default:R=n.normalizeStyleValue(I,b,R,i)}m.set(b,R)}),f||s.push(m),a=m,o=u}),i.length)throw function Yre(n){return new P(3502,!1)}();return s}function DD(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&SD(t,"start",n)));break;case"done":n.onDone(()=>r(t&&SD(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&SD(t,"destroy",n)))}}function SD(n,e,t){const s=RD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function RD(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function hs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function oj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const uie=(()=>typeof document>"u"?null:document.documentElement)();function MD(n){const e=n.parentNode||n.host||null;return e===uie?null:e}let el=null,aj=!1;function cj(n,e){for(;e;){if(e===n)return!0;e=MD(e)}return!1}function uj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let lj=(()=>{class n{validateStyleProperty(t){return function die(n){el||(el=function hie(){return typeof document<"u"?document.body:null}()||{},aj=!!el.style&&"WebkitAppearance"in el.style);let e=!0;return el.style&&!function lie(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in el.style,!e&&aj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in el.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return cj(t,r)}getParentElement(t){return MD(t)}query(t,r,i){return uj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new rm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),PD=(()=>{class n{static#e=this.NOOP=new lj}return n})();const fie=1e3,xD="ng-enter",WE="ng-leave",KE="ng-trigger",ZE=".ng-trigger",hj="ng-animating",ND=".ng-animating";function ba(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OD(parseFloat(e[1]),e[2])}function OD(n,e){return"s"===e?n*fie:n}function QE(n,e,t){return n.hasOwnProperty("duration")?n:function gie(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(ij()),{duration:0,delay:0,easing:""};i=OD(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=OD(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Rre(){return new P(3100,!1)}()),a=!0),s<0&&(e.push(function Mre(){return new P(3101,!1)}()),a=!0),a&&e.splice(c,0,ij())}return{duration:i,delay:s,easing:o}}(n,e,t)}function im(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function fj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Oc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Uo(n,e,t){e.forEach((r,i)=>{const s=FD(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function tl(n,e){e.forEach((t,r)=>{const i=FD(r);n.style[i]=""})}function sm(n){return Array.isArray(n)?1==n.length?n[0]:tj(n):n}const kD=new RegExp("{{\\s*(.+?)\\s*}}","g");function gj(n){let e=[];if("string"==typeof n){let t;for(;t=kD.exec(n);)e.push(t[1]);kD.lastIndex=0}return e}function om(n,e,t){const r=n.toString(),i=r.replace(kD,(s,o)=>{let a=e[o];return null==a&&(t.push(function xre(n){return new P(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function YE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const yie=/-+([a-z0-9])/g;function FD(n){return n.replace(yie,(...e)=>e[1].toUpperCase())}function fs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Nre(n){return new P(3004,!1)}()}}function mj(n,e){return window.getComputedStyle(n)[e]}const XE="*";function Iie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function wie(n,e,t){if(":"==n[0]){const c=function bie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Wre(n){return new P(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Gre(n){return new P(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(_j(i,o));"<"==s[0]&&!(i==XE&&o==XE)&&e.push(_j(o,i))}(r,t,e)):t.push(n),t}const JE=new Set(["true","1"]),eI=new Set(["false","0"]);function _j(n,e){const t=JE.has(n)||eI.has(n),r=JE.has(e)||eI.has(e);return(i,s)=>{let o=n==XE||n==i,a=e==XE||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?JE.has(n):eI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?JE.has(e):eI.has(e)),o&&a}}const Tie=new RegExp("s*:selfs*,?","g");function LD(n,e,t,r){return new Cie(n).build(e,t,r)}class Cie{constructor(e){this._driver=e}build(e,t,r){const i=new Sie(t);return this._resetContextStyleTimingState(i),fs(this,sm(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function kre(){return new P(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function Fre(){return new P(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{gj(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(YE(s.values()),t.errors.push(function Lre(n,e){return new P(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=fs(this,sm(e.animation),t);return{type:1,matchers:Iie(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:nl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>fs(this,r,t)),options:nl(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=fs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:nl(e.options)}}visitAnimate(e,t){const r=function Mie(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return VD(QE(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=VD(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=QE(t,e);return VD(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:nj({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=nj(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===wa?r.push(a):t.errors.push(new P(3002,!1)):r.push(fj(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function Ure(n,e,t,r,i){return new P(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function _ie(n,e,t){const r=e.params||{},i=gj(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Pre(n){return new P(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Bre(){return new P(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(H=>{const V=this._makeStyleAst(H,t);let W=null!=V.offset?V.offset:function Rie(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),te=0;return null!=W&&(s++,te=V.offset=W),c=c||te<0||te>1,a=a||te<u,u=te,o.push(te),V});c&&t.errors.push(function jre(){return new P(3012,!1)}()),a&&t.errors.push(function $re(){return new P(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Hre(){return new P(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,b=t.currentTime,R=t.currentAnimateTimings,x=R.duration;return f.forEach((H,V)=>{const W=y>0?V==I?1:y*V:o[V],te=W*x;t.currentTime=b+R.delay+te,R.duration=te,this._validateStyleAst(H,t),H.offset=W,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:fs(this,sm(e.animation),t),options:nl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:nl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:nl(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Aie(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Tie,"")),n=n.replace(/@\*/g,ZE).replace(/@\w+/g,t=>ZE+"-"+t.slice(1)).replace(/:animating/g,ND),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,hs(t.collectedStyles,t.currentQuerySelector,new Map);const a=fs(this,sm(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:nl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function zre(){return new P(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:QE(e.timings,t.errors,!0);return{type:12,animation:fs(this,sm(e.animation),t),timings:r,options:null}}}class Sie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function nl(n){return n?(n=im(n)).params&&(n.params=function Die(n){return n?im(n):null}(n.params)):n={},n}function VD(n,e,t){return{duration:n,delay:e,easing:t}}function UD(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class tI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Nie=new RegExp(":enter","g"),kie=new RegExp(":leave","g");function BD(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new Fie).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class Fie{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new tI;const m=new jD(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?ba(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),fs(this,r,m);const I=m.timelines.filter(b=>b.containsAnimation());if(I.length&&a.size){let b;for(let R=I.length-1;R>=0;R--){const x=I[R];if(x.element===t){b=x;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,m.errors,c)}return I.length?I.map(b=>b.buildKeyframes()):[UD(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ba(om(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ba(r.duration):null,a=null!=r.delay?ba(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),fs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=nI);const o=ba(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>fs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ba(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),fs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return QE(t.params?om(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ba(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=nI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),fs(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;fs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const nI={};class jD{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new rI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ba(r.duration)),null!=r.delay&&(i.delay=ba(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=om(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new jD(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=nI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Lie(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Nie,"."+this._enterClassName)).replace(kie,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function qre(n){return new P(3014,!1)}()),a}}class rI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new rI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||wa),this._currentKeyframe.set(t,wa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Vie(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,wa)}else Oc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=om(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??wa),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=Oc(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===wa&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?YE(e.values()):[],o=t.size?YE(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return UD(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Lie extends rI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Oc(e[0]);c.set("offset",0),s.push(c);const u=Oc(e[0]);u.set("offset",Ej(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=Oc(e[m]);const I=y.get("offset");y.set("offset",Ej((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return UD(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Ej(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $D{}const Uie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Bie extends $D{normalizePropertyName(e,t){return FD(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Uie.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Ore(n,e){return new P(3005,!1)}())}return o+s}}function Ij(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const HD={};class wj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function jie(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||HD,b=this.buildStyles(r,a&&a.params||HD,m),R=c&&c.params||HD,x=this.buildStyles(i,R,m),H=new Set,V=new Map,W=new Map,te="void"===i,we={params:$ie(R,y),delay:this.ast.options?.delay},Ne=f?[]:BD(e,t,this.ast.animation,s,o,b,x,we,u,m);let j=0;if(Ne.forEach(L=>{j=Math.max(L.duration+L.delay,j)}),m.length)return Ij(t,this._triggerName,r,i,te,b,x,[],[],V,W,j,m);Ne.forEach(L=>{const z=L.element,q=hs(V,z,new Set);L.preStyleProps.forEach(U=>q.add(U));const X=hs(W,z,new Set);L.postStyleProps.forEach(U=>X.add(U)),z!==t&&H.add(z)});const N=YE(H.values());return Ij(t,this._triggerName,r,i,te,b,x,Ne,N,V,W,j)}}function $ie(n,e){const t=im(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Hie{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=im(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=om(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class qie{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Hie(i.style,i.options&&i.options.params||{},r))}),bj(this.states,"true","1"),bj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new wj(e,i,this.states))}),this.fallbackTransition=function Gie(n,e,t){return new wj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function bj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Wie=new tI;class Kie{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=LD(this._driver,t,r,[]);if(r.length)throw function Xre(n){return new P(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=sj(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=BD(this._driver,t,s,xD,WE,new Map,new Map,r,Wie,i),o.forEach(f=>{const m=hs(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Jre(){return new P(3300,!1)}()),o=[]),i.length)throw function eie(n){return new P(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,wa))})});const u=Nc(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function tie(n){return new P(3301,!1)}();return t}listen(e,t,r,i){const s=RD(t,"","","");return DD(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Tj="ng-animate-queued",zD="ng-animate-disabled",Jie=[],Cj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ese={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},eo="__ng_removed";class qD{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function ise(n){return n??null}(r?e.value:e),r){const s=im(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const am="void",GD=new qD(am);class tse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Os(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function nie(n,e){return new P(3302,!1)}();if(null==r||0==r.length)throw function rie(n){return new P(3303,!1)}();if(!function sse(n){return"start"==n||"done"==n}(r))throw function iie(n,e){return new P(3400,!1)}();const s=hs(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=hs(this._engine.statesByElement,e,new Map);return a.has(t)||(Os(e,KE),Os(e,KE+"-"+t),a.set(t,GD)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function sie(n){return new P(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new WD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Os(e,KE),Os(e,KE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new qD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=GD),u.value!==am&&c.value===u.value){if(!function cse(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const R=[],x=s.matchStyles(c.value,c.params,R),H=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{tl(e,x),Uo(e,H)})}return}const y=hs(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),b=!1;if(!I){if(!i)return;I=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:b}),b||(Os(e,Tj),o.onStart(()=>{Oh(e,Tj)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const x=this._engine.playersByElement.get(e);if(x){let H=x.indexOf(o);H>=0&&x.splice(H,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ZE,!0);r.forEach(i=>{if(i[eo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,am,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Nc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||GD,f=new qD(am),m=new WD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[eo];(!s||s===Cj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Os(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=RD(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,DD(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class nse{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new tse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(iI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!iI(t))return;const s=t[eo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Os(e,zD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Oh(e,zD))}removeNode(e,t,r){if(iI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[eo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return iI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,ZE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ND,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[eo];if(t&&t.setForRemoval){if(e[eo]=Cj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(zD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Os(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Nc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function oie(n){return new P(3402,!1)}()}_flushAnimations(e,t){const r=new tI,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach($e=>{f.add($e);const Qe=this.driver.query($e,".ng-animate-queued",!0);for(let Ye=0;Ye<Qe.length;Ye++)f.add(Qe[Ye])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=Sj(y,this.collectedEnterElements),b=new Map;let R=0;I.forEach(($e,Qe)=>{const Ye=xD+R++;b.set(Qe,Ye),$e.forEach(Pt=>Os(Pt,Ye))});const x=[],H=new Set,V=new Set;for(let $e=0;$e<this.collectedLeaveElements.length;$e++){const Qe=this.collectedLeaveElements[$e],Ye=Qe[eo];Ye&&Ye.setForRemoval&&(x.push(Qe),H.add(Qe),Ye.hasAnimation?this.driver.query(Qe,".ng-star-inserted",!0).forEach(Pt=>H.add(Pt)):V.add(Qe))}const W=new Map,te=Sj(y,Array.from(H));te.forEach(($e,Qe)=>{const Ye=WE+R++;W.set(Qe,Ye),$e.forEach(Pt=>Os(Pt,Ye))}),e.push(()=>{I.forEach(($e,Qe)=>{const Ye=b.get(Qe);$e.forEach(Pt=>Oh(Pt,Ye))}),te.forEach(($e,Qe)=>{const Ye=W.get(Qe);$e.forEach(Pt=>Oh(Pt,Ye))}),x.forEach($e=>{this.processLeaveNode($e)})});const we=[],Ne=[];for(let $e=this._namespaceList.length-1;$e>=0;$e--)this._namespaceList[$e].drainQueuedTransitions(t).forEach(Ye=>{const Pt=Ye.player,ur=Ye.element;if(we.push(Pt),this.collectedEnterElements.length){const Jn=ur[eo];if(Jn&&Jn.setForMove){if(Jn.previousTriggersValues&&Jn.previousTriggersValues.has(Ye.triggerName)){const Aa=Jn.previousTriggersValues.get(Ye.triggerName),Ji=this.statesByElement.get(Ye.element);if(Ji&&Ji.has(Ye.triggerName)){const Da=Ji.get(Ye.triggerName);Da.value=Aa,Ji.set(Ye.triggerName,Da)}}return void Pt.destroy()}}const Fs=!m||!this.driver.containsElement(m,ur),Xn=W.get(ur),Rn=b.get(ur),Mn=this._buildInstruction(Ye,r,Rn,Xn,Fs);if(Mn.errors&&Mn.errors.length)return void Ne.push(Mn);if(Fs)return Pt.onStart(()=>tl(ur,Mn.fromStyles)),Pt.onDestroy(()=>Uo(ur,Mn.toStyles)),void i.push(Pt);if(Ye.isFallbackTransition)return Pt.onStart(()=>tl(ur,Mn.fromStyles)),Pt.onDestroy(()=>Uo(ur,Mn.toStyles)),void i.push(Pt);const Fc=[];Mn.timelines.forEach(Jn=>{Jn.stretchStartingKeyframe=!0,this.disabledNodes.has(Jn.element)||Fc.push(Jn)}),Mn.timelines=Fc,r.append(ur,Mn.timelines),o.push({instruction:Mn,player:Pt,element:ur}),Mn.queriedElements.forEach(Jn=>hs(a,Jn,[]).push(Pt)),Mn.preStyleProps.forEach((Jn,Aa)=>{if(Jn.size){let Ji=c.get(Aa);Ji||c.set(Aa,Ji=new Set),Jn.forEach((Da,Lc)=>Ji.add(Lc))}}),Mn.postStyleProps.forEach((Jn,Aa)=>{let Ji=u.get(Aa);Ji||u.set(Aa,Ji=new Set),Jn.forEach((Da,Lc)=>Ji.add(Lc))})});if(Ne.length){const $e=[];Ne.forEach(Qe=>{$e.push(function aie(n,e){return new P(3505,!1)}())}),we.forEach(Qe=>Qe.destroy()),this.reportError($e)}const j=new Map,N=new Map;o.forEach($e=>{const Qe=$e.element;r.has(Qe)&&(N.set(Qe,Qe),this._beforeAnimationBuild($e.player.namespaceId,$e.instruction,j))}),i.forEach($e=>{const Qe=$e.element;this._getPreviousPlayers(Qe,!1,$e.namespaceId,$e.triggerName,null).forEach(Pt=>{hs(j,Qe,[]).push(Pt),Pt.destroy()})});const L=x.filter($e=>Mj($e,c,u)),z=new Map;Dj(z,this.driver,V,u,wa).forEach($e=>{Mj($e,c,u)&&L.push($e)});const X=new Map;I.forEach(($e,Qe)=>{Dj(X,this.driver,new Set($e),c,"!")}),L.forEach($e=>{const Qe=z.get($e),Ye=X.get($e);z.set($e,new Map([...Qe?.entries()??[],...Ye?.entries()??[]]))});const U=[],ks=[],kc={};o.forEach($e=>{const{element:Qe,player:Ye,instruction:Pt}=$e;if(r.has(Qe)){if(f.has(Qe))return Ye.onDestroy(()=>Uo(Qe,Pt.toStyles)),Ye.disabled=!0,Ye.overrideTotalTime(Pt.totalTime),void i.push(Ye);let ur=kc;if(N.size>1){let Xn=Qe;const Rn=[];for(;Xn=Xn.parentNode;){const Mn=N.get(Xn);if(Mn){ur=Mn;break}Rn.push(Xn)}Rn.forEach(Mn=>N.set(Mn,ur))}const Fs=this._buildAnimation(Ye.namespaceId,Pt,j,s,X,z);if(Ye.setRealPlayer(Fs),ur===kc)U.push(Ye);else{const Xn=this.playersByElement.get(ur);Xn&&Xn.length&&(Ye.parentPlayer=Nc(Xn)),i.push(Ye)}}else tl(Qe,Pt.fromStyles),Ye.onDestroy(()=>Uo(Qe,Pt.toStyles)),ks.push(Ye),f.has(Qe)&&i.push(Ye)}),ks.forEach($e=>{const Qe=s.get($e.element);if(Qe&&Qe.length){const Ye=Nc(Qe);$e.setRealPlayer(Ye)}}),i.forEach($e=>{$e.parentPlayer?$e.syncPlayerEvents($e.parentPlayer):$e.destroy()});for(let $e=0;$e<x.length;$e++){const Qe=x[$e],Ye=Qe[eo];if(Oh(Qe,WE),Ye&&Ye.hasAnimation)continue;let Pt=[];if(a.size){let Fs=a.get(Qe);Fs&&Fs.length&&Pt.push(...Fs);let Xn=this.driver.query(Qe,ND,!0);for(let Rn=0;Rn<Xn.length;Rn++){let Mn=a.get(Xn[Rn]);Mn&&Mn.length&&Pt.push(...Mn)}}const ur=Pt.filter(Fs=>!Fs.destroyed);ur.length?ose(this,Qe,ur):this.processLeaveNode(Qe)}return x.length=0,U.forEach($e=>{this.players.push($e),$e.onDone(()=>{$e.destroy();const Qe=this.players.indexOf($e);this.players.splice(Qe,1)}),$e.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==am;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=hs(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const b=I.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),I.destroy(),m.push(I)})}tl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(b=>{const R=b.element;f.add(R);const x=R[eo];if(x&&x.removedBeforeQueried)return new rm(b.duration,b.delay);const H=R!==c,V=function ase(n){const e=[];return Rj(n,e),e}((r.get(R)||Jie).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===R),W=s.get(R),te=o.get(R),we=sj(this._normalizer,b.keyframes,W,te),Ne=this._buildPlayer(b,we,V);if(b.subTimeline&&i&&m.add(R),H){const j=new WD(e,a,R);j.setRealPlayer(Ne),u.push(j)}return Ne});u.forEach(b=>{hs(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function rse(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),f.forEach(b=>Os(b,hj));const I=Nc(y);return I.onDestroy(()=>{f.forEach(b=>Oh(b,hj)),Uo(c,t.toStyles)}),m.forEach(b=>{hs(i,b,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new rm(e.duration,e.delay)}}class WD{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new rm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>DD(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){hs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function iI(n){return n&&1===n.nodeType}function Aj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Dj(n,e,t,r,i){const s=[];t.forEach(c=>s.push(Aj(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[eo]=ese,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>Aj(c,s[a++])),o}function Sj(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function Os(n,e){n.classList?.add(e)}function Oh(n,e){n.classList?.remove(e)}function ose(n,e,t){Nc(t).onDone(()=>n.processLeaveNode(e))}function Rj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof rj?Rj(r.players,e):e.push(r)}}function Mj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class sI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new nse(e,t,r),this._timelineEngine=new Kie(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=LD(this._driver,s,c,[]);if(c.length)throw function Qre(n,e){return new P(3404,!1)}();a=function zie(n,e,t){return new qie(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=oj(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=oj(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let lse=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Uo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Uo(this._element,this._initialStyles),this._endStyles&&(Uo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(tl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tl(this._element,this._endStyles),this._endStyles=null),Uo(this._element,this._initialStyles),this._state=3)}}return n})();function KD(n){let e=null;return n.forEach((t,r)=>{(function dse(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Pj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:mj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hse{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return cj(e,t)}getParentElement(e){return MD(e)}query(e,t,r){return uj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof Pj);(function vie(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((b,R)=>u.set(R,b))});let m=function mie(n){return n.length?n[0]instanceof Map?n:n.map(e=>fj(e)):[]}(t).map(I=>Oc(I));m=function Eie(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,mj(n,a)))}}return e}(e,m,u);const y=function use(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=KD(e[0]),e.length>1&&(r=KD(e[e.length-1]))):e instanceof Map&&(t=KD(e)),t||r?new lse(n,t,r):null}(e,m);return new Pj(e,m,c,y)}}let fse=(()=>{class n extends ej{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Gn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?tj(t):t;return xj(this._renderer,null,r,"register",[i]),new pse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(le(cp),le(Kn))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class pse extends Sre{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new gse(this._id,e,t||{},this._renderer)}}class gse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return xj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Nj="@.disabled";let mse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new Oj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new _se(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(le(cp),le(sI),le(Mt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class Oj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Nj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _se extends Oj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Nj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function yse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function vse(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const kj=[{provide:ej,useClass:fse},{provide:$D,useFactory:function Ise(){return new Bie}},{provide:sI,useClass:(()=>{class n extends sI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(le(Kn),le(PD),le($D),le(_u))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})()},{provide:cp,useFactory:function wse(n,e,t){return new mse(n,e,t)},deps:[zT,sI,Mt]}],ZD=[{provide:PD,useFactory:()=>new hse},{provide:wM,useValue:"BrowserAnimations"},...kj],Fj=[{provide:PD,useClass:lj},{provide:wM,useValue:"NoopAnimations"},...kj];let bse=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Fj:ZD}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n});static#n=this.\u0275inj=en({providers:ZD,imports:[D1]})}return n})();const Lj_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class kh{constructor(e){return e}}class QD{constructor(){return(0,Qn.getApps)()}}const YD=new me("angularfire2._apps"),Cse={provide:kh,useFactory:function Tse(n){return n&&1===n.length?n[0]:new kh((0,Qn.getApp)())},deps:[[new _r,YD]]},Ase={provide:QD,deps:[[new _r,YD]]};function Dse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kh(r)}}let Sse=(()=>{class n{constructor(t){(0,Qn.registerVersion)("angularfire",lc.full,"core"),(0,Qn.registerVersion)("angularfire",lc.full,"app"),(0,Qn.registerVersion)("angular",tb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(Ds))};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[Cse,Ase]})}return n})();function Rse(n,...e){return{ngModule:Sse,providers:[{provide:YD,useFactory:Dse(n),multi:!0,deps:[Mt,Qr,Wd,...e]}]}}const Mse=N0(Qn.initializeApp,!0);Xe(35);class JD{constructor(){return Sv("auth")}}class tS{constructor(e){return e}}const Uj="firestore",nS=new me("angularfire2.firestore-instances");function Fse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new tS(r)}}const Lse={provide:class Ose{constructor(){return Sv(Uj)}},deps:[[new _r,nS]]},Vse={provide:tS,useFactory:function kse(n,e){const t=x0(Uj,n,e);return t&&new tS(t)},deps:[[new _r,nS],kh]};let Use=(()=>{class n{constructor(){(0,Qn.registerVersion)("angularfire",lc.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[Vse,Lse]})}return n})();function Bse(n,...e){return{ngModule:Use,providers:[{provide:nS,useFactory:Fse(n),multi:!0,deps:[Mt,Qr,Wd,QD,[new _r,JD],[new _r,sg],...e]}]}}const jse=N0(nte,!0),Bj="firebasestorage.googleapis.com",jj="storageBucket";class qn extends pt.ZR{constructor(e,t,r=0){super(rS(e),`Firebase Storage: ${t} (${rS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Vn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Vn||{});function rS(n){return"storage/"+n}function iS(){return new qn(Vn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $j(){return new qn(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hj(){return new qn(Vn.CANCELED,"User canceled the upload/download.")}function zj(){return new qn(Vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fh(n){return new qn(Vn.INVALID_ARGUMENT,n)}function qj(){return new qn(Vn.APP_DELETED,"The Firebase app was deleted.")}function Gj(n){return new qn(Vn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cm(n,e){return new qn(Vn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function um(n){throw new qn(Vn.INTERNAL_ERROR,"Internal error: "+n)}class pi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=pi.makeFromUrl(e,t)}catch{return new pi(e,"")}if(""===r.path)return r;throw function Yse(n){return new qn(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(te){te.path_=decodeURIComponent(te.path)}const m=t.replace(/[.]/g,"\\."),W=[{regex:a,indices:{bucket:1,path:3},postModify:function s(te){"/"===te.path.charAt(te.path.length-1)&&(te.path_=te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===Bj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let te=0;te<W.length;te++){const we=W[te],Ne=we.regex.exec(e);if(Ne){let N=Ne[we.indices.path];N||(N=""),r=new pi(Ne[we.indices.bucket],N),we.postModify(r);break}}if(null==r)throw function Qse(n){return new qn(Vn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class noe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function aI(n){return"string"==typeof n||n instanceof String}function Wj(n){return sS()&&n instanceof Blob}function sS(){return typeof Blob<"u"}function oS(n,e,t,r){if(r<e)throw Fh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Fh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ta(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Kj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Lh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Lh||{});function Zj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class coe{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,b)=>{this.resolve_=I,this.reject_=b,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function soe(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=iS();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?qj():Hj():$j())};this.canceled_?t(0,new cI(!1,null,!0)):this.backoffId_=function roe(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...x){u||(u=!0,e.apply(null,x))}function m(x){i=setTimeout(()=>{i=null,n(I,c())},x)}function y(){s&&clearTimeout(s)}function I(x,...H){if(u)return void y();if(x)return y(),void f.call(null,x,...H);if(c()||o)return y(),void f.call(null,x,...H);let W;r<64&&(r*=2),1===a?(a=2,W=0):W=1e3*(r+Math.random()),m(W)}let b=!1;function R(x){b||(b=!0,y(),!u&&(null!==i?(x||(a=2),clearTimeout(i),m(0)):x||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new cI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Lh.NO_ERROR,c=s.getStatus();if(!a||Zj(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Lh.ABORT;return void r(!1,new cI(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new cI(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ioe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class cI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function goe(...n){const e=function poe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(sS())return new Blob(n);throw new qn(Vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ps={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aS{constructor(e,t){this.data=e,this.contentType=t||null}}function cS(n,e){switch(n){case ps.RAW:return new aS(Qj(e));case ps.BASE64:case ps.BASE64URL:return new aS(Yj(n,e));case ps.DATA_URL:return new aS(function voe(n){const e=new Xj(n);return e.base64?Yj(ps.BASE64,e.rest):function yoe(n){let e;try{e=decodeURIComponent(n)}catch{throw cm(ps.DATA_URL,"Malformed data URL.")}return Qj(e)}(e.rest)}(e),function Eoe(n){return new Xj(n).contentType}(e))}throw iS()}function Qj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Yj(n,e){switch(n){case ps.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw cm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ps.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw cm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function _oe(n){if(typeof atob>"u")throw function toe(n){return new qn(Vn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:cm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Xj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw cm(ps.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ioe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Bo{constructor(e,t){let r=0,i="";Wj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wj(this.data_)){const i=function moe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Bo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Bo(r,!0)}}static getBlob(...e){if(sS()){const t=e.map(r=>r instanceof Bo?r.data_:r);return new Bo(goe.apply(null,t))}{const t=e.map(o=>aI(o)?cS(ps.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Bo(i,!0)}}uploadData(){return this.data_}}function uS(n){let e;try{e=JSON.parse(n)}catch{return null}return function aoe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Jj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Toe(n,e){return e}class xi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Toe}}let uI=null;function lm(){if(uI)return uI;const n=[];n.push(new xi("bucket")),n.push(new xi("generation")),n.push(new xi("metageneration")),n.push(new xi("name","fullPath",!0));const t=new xi("name");t.xform=function e(s,o){return function Coe(n){return!aI(n)||n.length<2?n:Jj(n)}(o)},n.push(t);const i=new xi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new xi("timeCreated")),n.push(new xi("updated")),n.push(new xi("md5Hash",null,!0)),n.push(new xi("cacheControl",null,!0)),n.push(new xi("contentDisposition",null,!0)),n.push(new xi("contentEncoding",null,!0)),n.push(new xi("contentLanguage",null,!0)),n.push(new xi("contentType",null,!0)),n.push(new xi("metadata","customMetadata",!0)),uI=n,uI}function e$(n,e,t){const r=uS(e);return null===r?null:function Doe(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Aoe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new pi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function lS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const t$="prefixes",n$="items";class jo{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $o(n){if(!n)throw iS()}function lI(n,e){return function t(r,i){const s=e$(n,i,e);return $o(null!==s),s}}function Vh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Kse(){return new qn(Vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Wse(){return new qn(Vn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Gse(n){return new qn(Vn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Zse(n){return new qn(Vn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function dm(n){const e=Vh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function qse(n){return new qn(Vn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function r$(n,e,t){const i=Ta(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new jo(i,"GET",lI(n,t),o);return a.errorHandler=dm(e),a}function Noe(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Ta(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new jo(a,"GET",function Poe(n,e){return function t(r,i){const s=function Moe(n,e,t){const r=uS(t);return null===r?null:function Roe(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[t$])for(const i of t[t$]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new pi(e,s));r.prefixes.push(o)}if(t[n$])for(const i of t[n$]){const s=n._makeStorageReference(new pi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return $o(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=Vh(e),f}function s$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Loe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class dI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function dS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{$o(!1)}return $o(!!t&&-1!==(e||["active"]).indexOf(t)),t}const joe={STATE_CHANGED:"state_changed"},Ni={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hS(n){switch(n){case"running":case"pausing":case"canceling":return Ni.RUNNING;case"paused":return Ni.PAUSED;case"success":return Ni.SUCCESS;case"canceled":return Ni.CANCELED;default:return Ni.ERROR}}class $oe{constructor(e,t,r){if(function ooe(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Uh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let c$=null;class Hoe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw um("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw um("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw um("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw um("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw um("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class zoe extends Hoe{initXhr(){this.xhr_.responseType="text"}}function to(){return c$?c$():new zoe}class u${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Vn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Zj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=$j()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Vn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Voe(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=s$(e,r,i),a={name:o.fullPath},c=Ta(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=lS(o,t),b=new jo(c,"POST",function I(R){let x;dS(R);try{x=R.getResponseHeader("X-Goog-Upload-URL")}catch{$o(!1)}return $o(aI(x)),x},n.maxUploadRetryTime);return b.urlParams=a,b.headers=f,b.body=m,b.errorHandler=Vh(e),b}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Uoe(n,e,t,r){const c=new jo(t,"POST",function s(u){const f=dS(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$o(!1)}m||$o(!1);const y=Number(m);return $o(!isNaN(y)),new dI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Vh(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,to,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new dI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Boe(n,e,t,r,i,s,o,a){const c=new dI(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function Jse(){return new qn(Vn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const b={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(m,m+f);if(null===R)throw zj();const W=new jo(t,"POST",function x(te,we){const Ne=dS(te,["active","final"]),j=c.current+f,N=r.size();let L;return L="final"===Ne?lI(e,s)(te,we):null,new dI(j,N,"final"===Ne,L)},e.maxUploadRetryTime);return W.headers=b,W.body=R.uploadData(),W.progressCallback=a||null,W.errorHandler=Vh(n),W}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,to,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=r$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function o$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let W="";for(let te=0;te<2;te++)W+=Math.random().toString().slice(2);return W}();o["Content-Type"]="multipart/related; boundary="+c;const u=s$(e,r,i),f=lS(u,t),I=Bo.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw zj();const b={name:u.fullPath},R=Ta(s,n.host,n._protocol),H=n.maxUploadRetryTime,V=new jo(R,"POST",lI(n,t),H);return V.urlParams=b,V.headers=o,V.body=I.uploadData(),V.errorHandler=Vh(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new $oe(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hS(this._state)){case Ni.SUCCESS:Uh(this._resolve.bind(null,this.snapshot))();break;case Ni.CANCELED:case Ni.ERROR:Uh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hS(this._state)){case Ni.RUNNING:case Ni.PAUSED:e.next&&Uh(e.next.bind(e,this.snapshot))();break;case Ni.SUCCESS:e.complete&&Uh(e.complete.bind(e))();break;default:e.error&&Uh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rl{constructor(e,t){this._service=e,this._location=t instanceof pi?t:pi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rl(e,t)}get root(){const e=new pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jj(this._location.path)}get storage(){return this._service}get parent(){const e=function woe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new pi(this._location.bucket,e);return new rl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Gj(e)}}function d$(n,e,t){return fS.apply(this,arguments)}function fS(){return(fS=(0,ae.Z)(function*(n,e,t){const i=yield h$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield d$(n,e,i.nextPageToken))})).apply(this,arguments)}function h$(n,e){null!=e&&"number"==typeof e.maxResults&&oS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Noe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,to)}function nae(n){n._throwIfRoot("getDownloadURL");const e=function Ooe(n,e,t){const i=Ta(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new jo(i,"GET",function xoe(n,e){return function t(r,i){const s=e$(n,i,e);return $o(null!==s),function Soe(n,e,t,r){const i=uS(e);if(null===i||!aI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return Ta("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+Kj({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=dm(e),a}(n.storage,n._location,lm());return n.storage.makeRequestWithTokens(e,to).then(t=>{if(null===t)throw function eoe(){return new qn(Vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function f$(n,e){const t=function boe(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new pi(n._location.bucket,t);return new rl(n.storage,r)}function p$(n,e){if(n instanceof pS){const t=n;if(null==t._bucket)throw function Xse(){return new qn(Vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jj+"' property when initializing the app?")}();const r=new rl(t,t._bucket);return null!=e?p$(r,e):r}return void 0!==e?f$(n,e):n}function oae(n,e){if(e&&function iae(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pS)return function sae(n,e){return new rl(n,e)}(n,e);throw Fh("To use ref(service, url), the first argument must be a Storage instance.")}return p$(n,e)}function g$(n,e){const t=e?.[jj];return null==t?null:pi.makeFromBucketSpec(t,n)}class pS{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Bj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?pi.makeFromBucketSpec(i,this._host):g$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?pi.makeFromBucketSpec(this._url,e):g$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rl(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new noe(qj());{const o=function foe(n,e,t,r,i,s,o=!0){const a=Kj(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function doe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function uoe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function loe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function hoe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new coe(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const m$="@firebase/storage",y$="storage";function v$(n,e){return oae(n=(0,pt.m9)(n),e)}function mae(n=(0,Qn.getApp)(),e){n=(0,pt.m9)(n);const r=(0,Qn._getProvider)(n,y$).getImmediate({identifier:e}),i=(0,pt.P0)("storage");return i&&E$(r,...i),r}function E$(n,e,t,r={}){!function aae(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,pt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function _ae(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pS(t,r,i,e,Qn.SDK_VERSION)}!function yae(){(0,Qn._registerComponent)(new Mv.wA(y$,_ae,"PUBLIC").setMultipleInstances(!0)),(0,Qn.registerVersion)(m$,"0.12.5",""),(0,Qn.registerVersion)(m$,"0.12.5","esm2017")}();class hI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class I${constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new hI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new hI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new hI(o,this,this._ref)):{next:t.next?o=>t.next(new hI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class w${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ca(e,this._service))}get items(){return this._delegate.items.map(e=>new Ca(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ca{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function gae(n,e){return f$(n,e)}(this._delegate,e);return new Ca(t,this.storage)}get root(){return new Ca(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ca(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new I$(function cae(n,e,t){return function Yoe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new u$(n,new Bo(e),t)}(n=(0,pt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ps.RAW,r){this._throwIfRoot("putString");const i=cS(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new I$(new u$(this._delegate,new Bo(i.data,!0),s),this)}listAll(){return function hae(n){return function Joe(n){const e={prefixes:[],items:[]};return d$(n,e).then(()=>e)}(n=(0,pt.m9)(n))}(this._delegate).then(e=>new w$(e,this.storage))}list(e){return function dae(n,e){return h$(n=(0,pt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new w$(t,this.storage))}getMetadata(){return function uae(n){return function eae(n){n._throwIfRoot("getMetadata");const e=r$(n.storage,n._location,lm());return n.storage.makeRequestWithTokens(e,to)}(n=(0,pt.m9)(n))}(this._delegate)}updateMetadata(e){return function lae(n,e){return function tae(n,e){n._throwIfRoot("updateMetadata");const t=function koe(n,e,t,r){const s=Ta(e.fullServerUrl(),n.host,n._protocol),a=lS(t,r),u=n.maxOperationRetryTime,f=new jo(s,"PATCH",lI(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=dm(e),f}(n.storage,n._location,e,lm());return n.storage.makeRequestWithTokens(t,to)}(n=(0,pt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function fae(n){return nae(n=(0,pt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function pae(n){return function rae(n){n._throwIfRoot("deleteObject");const e=function Foe(n,e){const r=Ta(e.fullServerUrl(),n.host,n._protocol),a=new jo(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=dm(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,to)}(n=(0,pt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Gj(e)}}class b${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(T$(e))throw Fh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ca(v$(this._delegate,e),this)}refFromURL(e){if(!T$(e))throw Fh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pi.makeFromUrl(e,this._delegate.host)}catch{throw Fh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ca(v$(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){E$(this._delegate,e,t,r)}}function T$(n){return/^[A-Za-z]+:\/\//.test(n)}function wae(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new b$(t,r)}function C$(n){const e=function Tae(n){return new dt(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(H1(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(xe(t=>t.bytesTransferred/t.totalBytes*100))}}function fI(n){return{getDownloadURL:()=>k(void 0).pipe(xF,Be(()=>n.getDownloadURL()),Si),getMetadata:()=>k(void 0).pipe(xF,Be(()=>n.getMetadata()),Si),delete:()=>T(n.delete()),child:e=>fI(n.child(e)),updateMetadata:e=>T(n.updateMetadata(e)),put:(e,t)=>C$(n.put(e,t)),putString:(e,t,r)=>C$(n.putString(e,t,r)),list:e=>T(n.list(e)),listAll:()=>T(n.listAll())}}!function bae(n){const e={TaskState:Ni,TaskEvent:joe,StringFormat:ps,Storage:b$,Reference:Ca};n.INTERNAL.registerComponent(new Mv.wA("storage-compat",wae,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Ro.Z);const Cae=new me("angularfire2.storageBucket"),Aae=new me("angularfire2.storage.maxUploadRetryTime"),Dae=new me("angularfire2.storage.maxOperationRetryTime"),Sae=new me("angularfire2.storage.use-emulator");let Rae=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=Rv(t,o,r);this.storage=O0(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),b=f;return b&&I.useEmulator(...b),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return fI(this.storage.ref(t))}refFromURL(t){return fI(this.storage.refFromURL(t))}upload(t,r,i){return fI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(le(og),le(ag,8),le(Cae,8),le(Ds),le(Mt),le(Wd),le(Aae,8),le(Dae,8),le(Sae,8),le(sg,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Mae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=en({})}return n})(),Pae=(()=>{class n{constructor(){Ro.Z.registerVersion("angularfire",lc.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[Rae],imports:[Mae]})}return n})();class gS{constructor(e){return e}}const A$="storage",mS=new me("angularfire2.storage-instances");function Oae(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gS(r)}}const kae={provide:class xae{constructor(){return Sv(A$)}},deps:[[new _r,mS]]},Fae={provide:gS,useFactory:function Nae(n,e){const t=x0(A$,n,e);return t&&new gS(t)},deps:[[new _r,mS],kh]};let Lae=(()=>{class n{constructor(){(0,Qn.registerVersion)("angularfire",lc.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pn({type:n});static \u0275inj=en({providers:[Fae,kae]})}return n})();function Vae(n,...e){return{ngModule:Lae,providers:[{provide:mS,useFactory:Oae(n),multi:!0,deps:[Mt,Qr,Wd,QD,[new _r,JD],[new _r,sg],...e]}]}}const Uae=N0(mae,!0);let Bae=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=pn({type:n,bootstrap:[Dre]});static#n=this.\u0275inj=en({imports:[D1,wre,bse,vZ,XZ,t7,mne,Pae,BY.initializeApp(Lj_firebase),Rse(()=>Mse(Lj_firebase)),Bse(()=>jse()),Vae(()=>Uae()),ure]})}return n})();pK().bootstrapModule(Bae).catch(n=>console.error(n))},106:(ms,tr,Xe)=>{Xe.d(tr,{Z:()=>nr});var M=Xe(58),Te=Xe(537),O=Xe(534),He=Xe(879);class Ft{constructor(rt,it){this._delegate=rt,this.firebase=it,(0,O._addComponent)(rt,new Te.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(rt,it=O._DEFAULT_ENTRY_NAME){var lr;this._delegate.checkDestroyed();const In=this._delegate.container.getProvider(rt);return!In.isInitialized()&&"EXPLICIT"===(null===(lr=In.getComponent())||void 0===lr?void 0:lr.instantiationMode)&&In.initialize(),In.getImmediate({identifier:it})}_removeServiceInstance(rt,it=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(it)}_addComponent(rt){(0,O._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,O._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Un=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function xt(){const Tt=function sn(Tt){const rt={},it={__esModule:!0,initializeApp:function vt(lt,xn={}){const fe=O.initializeApp(lt,xn);if((0,M.r3)(rt,fe.name))return rt[fe.name];const un=new Tt(fe,it);return rt[fe.name]=un,un},app:In,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ti(lt){const xn=lt.name,fe=xn.replace("-compat","");if(O._registerComponent(lt)&&"PUBLIC"===lt.type){const un=(Yt=In())=>{if("function"!=typeof Yt[fe])throw Un.create("invalid-app-argument",{appName:xn});return Yt[fe]()};void 0!==lt.serviceProps&&(0,M.ZB)(un,lt.serviceProps),it[fe]=un,Tt.prototype[fe]=function(...Yt){return this._getService.bind(this,xn).apply(this,lt.multipleInstances?Yt:[])}}return"PUBLIC"===lt.type?it[fe]:null},removeApp:function lr(lt){delete rt[lt]},useAsService:function Ut(lt,xn){return"serverAuth"===xn?null:xn},modularAPIs:O}};function In(lt){if(!(0,M.r3)(rt,lt=lt||O._DEFAULT_ENTRY_NAME))throw Un.create("no-app",{appName:lt});return rt[lt]}return it.default=it,Object.defineProperty(it,"apps",{get:function jt(){return Object.keys(rt).map(lt=>rt[lt])}}),In.App=Tt,it}(Ft);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:xt,extendNamespace:function rt(it){(0,M.ZB)(Tt,it)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),Tt}(),Ee=new He.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nr=de;!function Lt(Tt){(0,O.registerVersion)("@firebase/app-compat","0.2.35",Tt)}()},534:(ms,tr,Xe)=>{Xe.r(tr),Xe.d(tr,{FirebaseError:()=>He.ZR,SDK_VERSION:()=>Nr,_DEFAULT_ENTRY_NAME:()=>Ei,_addComponent:()=>$r,_addOrOverwriteComponent:()=>on,_apps:()=>Br,_clearComponents:()=>Vi,_components:()=>bn,_getProvider:()=>Bn,_isFirebaseApp:()=>Bs,_isFirebaseServerApp:()=>Jt,_registerComponent:()=>xr,_removeServiceInstance:()=>io,_serverApps:()=>jr,deleteApp:()=>Hs,getApp:()=>oo,getApps:()=>ao,initializeApp:()=>$s,initializeServerApp:()=>so,onLog:()=>T,registerVersion:()=>F,setLogLevel:()=>S});var M=Xe(861),Te=Xe(537),O=Xe(879),He=Xe(58);const Ft=(P,G)=>G.some(Q=>P instanceof Q);let En,Un;const de=new WeakMap,Ee=new WeakMap,ze=new WeakMap,ut=new WeakMap,Lt=new WeakMap;let rt={get(P,G,Q){if(P instanceof IDBTransaction){if("done"===G)return Ee.get(P);if("objectStoreNames"===G)return P.objectStoreNames||ze.get(P);if("store"===G)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return vt(P[G])},set:(P,G,Q)=>(P[G]=Q,!0),has:(P,G)=>P instanceof IDBTransaction&&("done"===G||"store"===G)||G in P};function In(P){return"function"==typeof P?function lr(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xt(){return Un||(Un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...G){return P.apply(jt(this),G),vt(de.get(this))}:function(...G){return vt(P.apply(jt(this),G))}:function(G,...Q){const ye=P.call(jt(this),G,...Q);return ze.set(ye,G.sort?G.sort():[G]),vt(ye)}}(P):(P instanceof IDBTransaction&&function Tt(P){if(Ee.has(P))return;const G=new Promise((Q,ye)=>{const st=()=>{P.removeEventListener("complete",ht),P.removeEventListener("error",_t),P.removeEventListener("abort",_t)},ht=()=>{Q(),st()},_t=()=>{ye(P.error||new DOMException("AbortError","AbortError")),st()};P.addEventListener("complete",ht),P.addEventListener("error",_t),P.addEventListener("abort",_t)});Ee.set(P,G)}(P),Ft(P,function sn(){return En||(En=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,rt):P)}function vt(P){if(P instanceof IDBRequest)return function nr(P){const G=new Promise((Q,ye)=>{const st=()=>{P.removeEventListener("success",ht),P.removeEventListener("error",_t)},ht=()=>{Q(vt(P.result)),st()},_t=()=>{ye(P.error),st()};P.addEventListener("success",ht),P.addEventListener("error",_t)});return G.then(Q=>{Q instanceof IDBCursor&&de.set(Q,P)}).catch(()=>{}),Lt.set(G,P),G}(P);if(ut.has(P))return ut.get(P);const G=In(P);return G!==P&&(ut.set(P,G),Lt.set(G,P)),G}const jt=P=>Lt.get(P),lt=["get","getKey","getAll","getAllKeys","count"],xn=["put","add","delete","clear"],fe=new Map;function un(P,G){if(!(P instanceof IDBDatabase)||G in P||"string"!=typeof G)return;if(fe.get(G))return fe.get(G);const Q=G.replace(/FromIndex$/,""),ye=G!==Q,st=xn.includes(Q);if(!(Q in(ye?IDBIndex:IDBObjectStore).prototype)||!st&&!lt.includes(Q))return;const ht=function(){var _t=(0,M.Z)(function*(Kt,...Ct){const Ui=this.transaction(Kt,st?"readwrite":"readonly");let qo=Ui.store;return ye&&(qo=qo.index(Ct.shift())),(yield Promise.all([qo[Q](...Ct),st&&Ui.done]))[0]});return function(Ct){return _t.apply(this,arguments)}}();return fe.set(G,ht),ht}!function it(P){rt=P(rt)}(P=>({...P,get:(G,Q,ye)=>un(G,Q)||P.get(G,Q,ye),has:(G,Q)=>!!un(G,Q)||P.has(G,Q)}));class Yt{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function wn(P){const G=P.getComponent();return"VERSION"===G?.type}(Q)){const ye=Q.getImmediate();return`${ye.library}/${ye.version}`}return null}).filter(Q=>Q).join(" ")}}const yi="@firebase/app",vi="0.10.5",dt=new O.Yd("@firebase/app"),Ei="[DEFAULT]",ts={[yi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Br=new Map,jr=new Map,bn=new Map;function $r(P,G){try{P.container.addComponent(G)}catch(Q){dt.debug(`Component ${G.name} failed to register with FirebaseApp ${P.name}`,Q)}}function on(P,G){P.container.addOrOverwriteComponent(G)}function xr(P){const G=P.name;if(bn.has(G))return dt.debug(`There were multiple attempts to register component ${G}.`),!1;bn.set(G,P);for(const Q of Br.values())$r(Q,P);for(const Q of jr.values())$r(Q,P);return!0}function Bn(P,G){const Q=P.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),P.container.getProvider(G)}function io(P,G,Q=Ei){Bn(P,G).clearInstance(Q)}function Bs(P){return void 0!==P.options}function Jt(P){return void 0!==P.settings}function Vi(){bn.clear()}const jn=new He.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class dr{constructor(G,Q,ye){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=ye,this.container.addComponent(new Te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}class Tn extends dr{constructor(G,Q,ye,st){const ht=void 0!==Q.automaticDataCollectionEnabled&&Q.automaticDataCollectionEnabled,_t={name:ye,automaticDataCollectionEnabled:ht};super(void 0!==G.apiKey?G:G.options,_t,st),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ht},Q),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Q.releaseOnDeref=void 0,F(yi,vi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(G){this.isDeleted||(this._refCount++,void 0!==G&&this._finalizationRegistry.register(G,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw jn.create("server-app-deleted")}}const Nr="10.12.2";function $s(P,G={}){let Q=P;"object"!=typeof G&&(G={name:G});const ye=Object.assign({name:Ei,automaticDataCollectionEnabled:!1},G),st=ye.name;if("string"!=typeof st||!st)throw jn.create("bad-app-name",{appName:String(st)});if(Q||(Q=(0,He.aH)()),!Q)throw jn.create("no-options");const ht=Br.get(st);if(ht){if((0,He.vZ)(Q,ht.options)&&(0,He.vZ)(ye,ht.config))return ht;throw jn.create("duplicate-app",{appName:st})}const _t=new Te.H0(st);for(const Ct of bn.values())_t.addComponent(Ct);const Kt=new dr(Q,ye,_t);return Br.set(st,Kt),Kt}function so(P,G){if((0,He.jU)())throw jn.create("invalid-server-app-environment");let Q;void 0===G.automaticDataCollectionEnabled&&(G.automaticDataCollectionEnabled=!1),Q=Bs(P)?P.options:P;const ye=Object.assign(Object.assign({},G),Q);if(void 0!==ye.releaseOnDeref&&delete ye.releaseOnDeref,void 0!==G.releaseOnDeref&&typeof FinalizationRegistry>"u")throw jn.create("finalization-registry-not-supported",{});const ht=""+(Ui=JSON.stringify(ye),[...Ui].reduce((qo,fn)=>Math.imul(31,qo)+fn.charCodeAt(0)|0,0)),_t=jr.get(ht);var Ui;if(_t)return _t.incRefCount(G.releaseOnDeref),_t;const Kt=new Te.H0(ht);for(const Ui of bn.values())Kt.addComponent(Ui);const Ct=new Tn(Q,G,ht,Kt);return jr.set(ht,Ct),Ct}function oo(P=Ei){const G=Br.get(P);if(!G&&P===Ei&&(0,He.aH)())return $s();if(!G)throw jn.create("no-app",{appName:P});return G}function ao(){return Array.from(Br.values())}function Hs(P){return B.apply(this,arguments)}function B(){return(B=(0,M.Z)(function*(P){let G=!1;const Q=P.name;Br.has(Q)?(G=!0,Br.delete(Q)):jr.has(Q)&&P.decRefCount()<=0&&(jr.delete(Q),G=!0),G&&(yield Promise.all(P.container.getProviders().map(ye=>ye.delete())),P.isDeleted=!0)})).apply(this,arguments)}function F(P,G,Q){var ye;let st=null!==(ye=ts[P])&&void 0!==ye?ye:P;Q&&(st+=`-${Q}`);const ht=st.match(/\s|\//),_t=G.match(/\s|\//);if(ht||_t){const Kt=[`Unable to register library "${st}" with version "${G}":`];return ht&&Kt.push(`library name "${st}" contains illegal characters (whitespace or "/")`),ht&&_t&&Kt.push("and"),_t&&Kt.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void dt.warn(Kt.join(" "))}xr(new Te.wA(`${st}-version`,()=>({library:st,version:G}),"VERSION"))}function T(P,G){if(null!==P&&"function"!=typeof P)throw jn.create("invalid-log-argument");(0,O.Am)(P,G)}function S(P){(0,O.Ub)(P)}const w="firebase-heartbeat-database",k=1,ue="firebase-heartbeat-store";let Se=null;function Be(){return Se||(Se=function ti(P,G,{blocked:Q,upgrade:ye,blocking:st,terminated:ht}={}){const _t=indexedDB.open(P,G),Kt=vt(_t);return ye&&_t.addEventListener("upgradeneeded",Ct=>{ye(vt(_t.result),Ct.oldVersion,Ct.newVersion,vt(_t.transaction),Ct)}),Q&&_t.addEventListener("blocked",Ct=>Q(Ct.oldVersion,Ct.newVersion,Ct)),Kt.then(Ct=>{ht&&Ct.addEventListener("close",()=>ht()),st&&Ct.addEventListener("versionchange",Ui=>st(Ui.oldVersion,Ui.newVersion,Ui))}).catch(()=>{}),Kt}(w,k,{upgrade:(P,G)=>{if(0===G)try{P.createObjectStore(ue)}catch(Q){console.warn(Q)}}}).catch(P=>{throw jn.create("idb-open",{originalErrorMessage:P.message})})),Se}function Rt(){return(Rt=(0,M.Z)(function*(P){try{const Q=(yield Be()).transaction(ue),ye=yield Q.objectStore(ue).get(Ge(P));return yield Q.done,ye}catch(G){if(G instanceof He.ZR)dt.warn(G.message);else{const Q=jn.create("idb-get",{originalErrorMessage:G?.message});dt.warn(Q.message)}}})).apply(this,arguments)}function Re(P,G){return $t.apply(this,arguments)}function $t(){return($t=(0,M.Z)(function*(P,G){try{const ye=(yield Be()).transaction(ue,"readwrite");yield ye.objectStore(ue).put(G,Ge(P)),yield ye.done}catch(Q){if(Q instanceof He.ZR)dt.warn(Q.message);else{const ye=jn.create("idb-set",{originalErrorMessage:Q?.message});dt.warn(ye.message)}}})).apply(this,arguments)}function Ge(P){return`${P.name}!${P.options.appId}`}class qt{constructor(G){this.container=G,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Pa(Q),this._heartbeatsCachePromise=this._storage.read().then(ye=>(this._heartbeatsCache=ye,ye))}triggerHeartbeat(){var G=this;return(0,M.Z)(function*(){var Q,ye;const ht=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Je();if((null!=(null===(Q=G._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||(G._heartbeatsCache=yield G._heartbeatsCachePromise,null!=(null===(ye=G._heartbeatsCache)||void 0===ye?void 0:ye.heartbeats)))&&G._heartbeatsCache.lastSentHeartbeatDate!==_t&&!G._heartbeatsCache.heartbeats.some(Kt=>Kt.date===_t))return G._heartbeatsCache.heartbeats.push({date:_t,agent:ht}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(Kt=>{const Ct=new Date(Kt.date).valueOf();return Date.now()-Ct<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,M.Z)(function*(){var Q;if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null==(null===(Q=G._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||0===G._heartbeatsCache.heartbeats.length)return"";const ye=Je(),{heartbeatsToSend:st,unsentEntries:ht}=function Ma(P,G=1024){const Q=[];let ye=P.slice();for(const st of P){const ht=Q.find(_t=>_t.agent===st.agent);if(ht){if(ht.dates.push(st.date),zo(Q)>G){ht.dates.pop();break}}else if(Q.push({agent:st.agent,dates:[st.date]}),zo(Q)>G){Q.pop();break}ye=ye.slice(1)}return{heartbeatsToSend:Q,unsentEntries:ye}}(G._heartbeatsCache.heartbeats),_t=(0,He.L)(JSON.stringify({version:2,heartbeats:st}));return G._heartbeatsCache.lastSentHeartbeatDate=ye,ht.length>0?(G._heartbeatsCache.heartbeats=ht,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),_t})()}}function Je(){return(new Date).toISOString().substring(0,10)}class Pa{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,He.hl)()&&(0,He.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,M.Z)(function*(){if(yield G._canUseIndexedDBPromise){const ye=yield function nt(P){return Rt.apply(this,arguments)}(G.app);return ye?.heartbeats?ye:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(G){var Q=this;return(0,M.Z)(function*(){var ye;if(yield Q._canUseIndexedDBPromise){const ht=yield Q.read();return Re(Q.app,{lastSentHeartbeatDate:null!==(ye=G.lastSentHeartbeatDate)&&void 0!==ye?ye:ht.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var Q=this;return(0,M.Z)(function*(){var ye;if(yield Q._canUseIndexedDBPromise){const ht=yield Q.read();return Re(Q.app,{lastSentHeartbeatDate:null!==(ye=G.lastSentHeartbeatDate)&&void 0!==ye?ye:ht.lastSentHeartbeatDate,heartbeats:[...ht.heartbeats,...G.heartbeats]})}})()}}function zo(P){return(0,He.L)(JSON.stringify({version:2,heartbeats:P})).length}!function cl(P){xr(new Te.wA("platform-logger",G=>new Yt(G),"PRIVATE")),xr(new Te.wA("heartbeat",G=>new qt(G),"PRIVATE")),F(yi,vi,P),F(yi,vi,"esm2017"),F("fire-js","")}("")},537:(ms,tr,Xe)=>{Xe.d(tr,{H0:()=>sn,wA:()=>O});var M=Xe(861),Te=Xe(58);class O{constructor(de,Ee,ze){this.name=de,this.instanceFactory=Ee,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const He="[DEFAULT]";class Ft{constructor(de,Ee){this.name=de,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const Ee=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(Ee)){const ze=new Te.BH;if(this.instancesDeferred.set(Ee,ze),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:Ee});ut&&ze.resolve(ut)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(de){var Ee;const ze=this.normalizeInstanceIdentifier(de?.identifier),ut=null!==(Ee=de?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(Lt){if(ut)return null;throw Lt}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function Un(xt){return"EAGER"===xt.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:He})}catch{}for(const[Ee,ze]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(Ee);try{const Lt=this.getOrInitializeService({instanceIdentifier:ut});ze.resolve(Lt)}catch{}}}}clearInstance(de=He){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,M.Z)(function*(){const Ee=Array.from(de.instances.values());yield Promise.all([...Ee.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),...Ee.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=He){return this.instances.has(de)}getOptions(de=He){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:Ee={}}=de,ze=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:ze,options:Ee});for(const[Lt,nr]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(Lt)&&nr.resolve(ut);return ut}onInit(de,Ee){var ze;const ut=this.normalizeInstanceIdentifier(Ee),Lt=null!==(ze=this.onInitCallbacks.get(ut))&&void 0!==ze?ze:new Set;Lt.add(de),this.onInitCallbacks.set(ut,Lt);const nr=this.instances.get(ut);return nr&&de(nr,ut),()=>{Lt.delete(de)}}invokeOnInitCallbacks(de,Ee){const ze=this.onInitCallbacks.get(Ee);if(ze)for(const ut of ze)try{ut(de,Ee)}catch{}}getOrInitializeService({instanceIdentifier:de,options:Ee={}}){let ze=this.instances.get(de);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(xt=de,xt===He?void 0:xt),options:Ee}),this.instances.set(de,ze),this.instancesOptions.set(de,Ee),this.invokeOnInitCallbacks(ze,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,ze)}catch{}var xt;return ze||null}normalizeInstanceIdentifier(de=He){return this.component?this.component.multipleInstances?de:He:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class sn{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const Ee=this.getProvider(de.name);if(Ee.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);Ee.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const Ee=new Ft(de,this);return this.providers.set(de,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},879:(ms,tr,Xe)=>{Xe.d(tr,{Am:()=>xt,Ub:()=>sn,Yd:()=>Un,in:()=>Te});const M=[];var Te=function(de){return de[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",de}(Te||{});const O={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},He=Te.INFO,Ft={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},En=(de,Ee,...ze)=>{if(Ee<de.logLevel)return;const ut=(new Date).toISOString(),Lt=Ft[Ee];if(!Lt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[Lt](`[${ut}]  ${de.name}:`,...ze)};class Un{constructor(Ee){this.name=Ee,this._logLevel=He,this._logHandler=En,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in Te))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?O[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...Ee),this._logHandler(this,Te.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...Ee),this._logHandler(this,Te.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...Ee),this._logHandler(this,Te.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...Ee),this._logHandler(this,Te.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...Ee),this._logHandler(this,Te.ERROR,...Ee)}}function sn(de){M.forEach(Ee=>{Ee.setLogLevel(de)})}function xt(de,Ee){for(const ze of M){let ut=null;Ee&&Ee.level&&(ut=O[Ee.level]),ze.userLogHandler=null===de?null:(Lt,nr,...Tt)=>{const rt=Tt.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");nr>=(ut??Lt.logLevel)&&de({level:Te[nr].toLowerCase(),message:rt,args:Tt,type:Lt.name})}}}},365:(ms,tr,Xe)=>{Xe.r(tr);var M=Xe(861),Te=Xe(106),O=Xe(35),He=Xe(58),Un=(Xe(534),Xe(879),Xe(537));function sn(){return window}function Ee(){return Ee=(0,M.Z)(function*(T,S,w){var k;const{BuildInfo:ue}=sn();(0,O.au)(S.sessionId,"AuthEvent did not contain a session ID");const Se=yield function it(T){return lr.apply(this,arguments)}(S.sessionId),Be={};return(0,O.av)()?Be.ibi=ue.packageName:(0,O.aw)()?Be.apn=ue.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),ue.displayName&&(Be.appDisplayName=ue.displayName),Be.sessionId=Se,(0,O.ay)(T,w,S.type,void 0,null!==(k=S.eventId)&&void 0!==k?k:void 0,Be)}),Ee.apply(this,arguments)}function ut(){return(ut=(0,M.Z)(function*(T){const{BuildInfo:S}=sn(),w={};(0,O.av)()?w.iosBundleId=S.packageName:(0,O.aw)()?w.androidPackageName=S.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),yield(0,O.az)(T,w)})).apply(this,arguments)}function Tt(){return(Tt=(0,M.Z)(function*(T,S,w){const{cordova:k}=sn();let ue=()=>{};try{yield new Promise((Se,Be)=>{let nt=null;function Rt(){var Ge;Se();const hr=null===(Ge=k.plugins.browsertab)||void 0===Ge?void 0:Ge.close;"function"==typeof hr&&hr(),"function"==typeof w?.close&&w.close()}function Re(){nt||(nt=window.setTimeout(()=>{Be((0,O.aB)(T,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===document?.visibilityState&&Re()}S.addPassiveListener(Rt),document.addEventListener("resume",Re,!1),(0,O.aw)()&&document.addEventListener("visibilitychange",$t,!1),ue=()=>{S.removePassiveListener(Rt),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",$t,!1),nt&&window.clearTimeout(nt)}})}finally{ue()}})).apply(this,arguments)}function lr(){return(lr=(0,M.Z)(function*(T){const S=function In(T){if((0,O.au)(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const S=new ArrayBuffer(T.length),w=new Uint8Array(S);for(let k=0;k<T.length;k++)w[k]=T.charCodeAt(k);return w}(T),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class jt extends O.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function lt(T){return xn.apply(this,arguments)}function xn(){return(xn=(0,M.Z)(function*(T){const S=yield Yt()._get(wn(T));return S&&(yield Yt()._remove(wn(T))),S})).apply(this,arguments)}function un(){const T=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());T.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return T.join("")}function Yt(){return(0,O.aE)(O.b)}function wn(T){return(0,O.aF)("authEvent",T.config.apiKey,T.name)}function dt(T){if(!T?.includes("?"))return{};const[S,...w]=T.split("?");return(0,He.zd)(w.join("?"))}const ee=class Fi{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const k=S._key();let ue=w.eventManagers.get(k);return ue||(ue=new jt(S),w.eventManagers.set(k,ue),w.attachCallbackListeners(S,ue)),ue})()}_openPopup(S){(0,O.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,k,ue){var Se=this;return(0,M.Z)(function*(){!function rt(T){var S,w,k,ue,Se,Be,nt,Rt,Re,$t;const Ge=sn();(0,O.aC)("function"==typeof(null===(S=Ge?.universalLinks)||void 0===S?void 0:S.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aC)(typeof(null===(w=Ge?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aC)("function"==typeof(null===(Se=null===(ue=null===(k=Ge?.cordova)||void 0===k?void 0:k.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Se?void 0:Se.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(Rt=null===(nt=null===(Be=Ge?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===Rt?void 0:Rt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===($t=null===(Re=Ge?.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===$t?void 0:$t.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Be=yield Se._initialize(S);yield Be.initialized(),Be.resetRedirect(),(0,O.aI)(),yield Se._originValidation(S);const nt=function ti(T,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:un(),postBody:null,tenantId:T.tenantId,error:(0,O.aB)(T,"no-auth-event")}}(S,k,ue);yield function Ut(T,S){return Yt()._set(wn(T),S)}(S,nt);const Rt=yield function de(T,S,w){return Ee.apply(this,arguments)}(S,nt,w),Re=yield function Lt(T){const{cordova:S}=sn();return new Promise(w=>{S.plugins.browsertab.isAvailable(k=>{let ue=null;k?S.plugins.browsertab.openUrl(T):ue=S.InAppBrowser.open(T,(0,O.aA)()?"_blank":"_system","location=yes"),w(ue)})})}(Rt);return function nr(T,S,w){return Tt.apply(this,arguments)}(S,Be,Re)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function ze(T){return ut.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:k,handleOpenURL:ue,BuildInfo:Se}=sn(),Be=setTimeout((0,M.Z)(function*(){yield lt(S),w.onEvent(re())}),500),nt=function(){var $t=(0,M.Z)(function*(Ge){clearTimeout(Be);const hr=yield lt(S);let Ho=null;hr&&Ge?.url&&(Ho=function fe(T,S){var w,k;const ue=function vi(T){const S=dt(T),w=S.link?decodeURIComponent(S.link):void 0,k=dt(w).link,ue=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return dt(ue).link||ue||k||w||T}(S);if(ue.includes("/__/auth/callback")){const Se=dt(ue),Be=Se.firebaseError?function yi(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(Se.firebaseError)):null,nt=null===(k=null===(w=Be?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],Rt=nt?(0,O.aB)(nt):null;return Rt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:ue,postBody:null}}return null}(hr,Ge.url)),w.onEvent(Ho||re())});return function(hr){return $t.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,nt);const Rt=ue,Re=`${Se.packageName.toLowerCase()}://`;sn().handleOpenURL=function(){var $t=(0,M.Z)(function*(Ge){if(Ge.toLowerCase().startsWith(Re)&&nt({url:Ge}),"function"==typeof Rt)try{Rt(Ge)}catch(hr){console.error(hr)}});return function(Ge){return $t.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aB)("no-auth-event")}}function Ce(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function xe(T=(0,He.z$)()){return!("file:"!==Ce()&&"ionic:"!==Ce()&&"capacitor:"!==Ce()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function rr(){try{const T=self.localStorage,S=O.aN();if(T)return T.setItem(S,"1"),T.removeItem(S),!function Xt(T=(0,He.z$)()){return function St(){return(0,He.w1)()&&11===document?.documentMode}()||function ln(T=(0,He.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,He.hl)()}catch{return Nn()&&(0,He.hl)()}return!1}function Nn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ir(){return(function Et(){return"http:"===Ce()||"https:"===Ce()}()||(0,He.ru)()||xe())&&!function je(){return(0,He.b$)()||(0,He.UG)()}()&&rr()&&!Nn()}function wr(){return xe()&&typeof document<"u"}function Vs(){return(Vs=(0,M.Z)(function*(){return!!wr()&&new Promise(T=>{const S=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),T(!0)})})})).apply(this,arguments)}const Vt={LOCAL:"local",NONE:"none",SESSION:"session"},Li=O.aC,ro="persistence";function Ei(T){return ts.apply(this,arguments)}function ts(){return(ts=(0,M.Z)(function*(T){yield T._initializationPromise;const S=jr(),w=O.aF(ro,T.config.apiKey,T.name);S&&S.setItem(w,T._getPersistence())})).apply(this,arguments)}function jr(){var T;try{return(null===(T=function es(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const bn=O.aC;class $r{constructor(){this.browserResolver=O.aE(O.k),this.cordovaResolver=O.aE(ee),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,k,ue){var Se=this;return(0,M.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openPopup(S,w,k,ue)})()}_openRedirect(S,w,k,ue){var Se=this;return(0,M.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openRedirect(S,w,k,ue)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return wr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function Ur(){return Vs.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function on(T){return T.unwrap()}function Bn(T){return Bs(T)}function Bs(T){const{_tokenResponse:S}=T instanceof He.ZR?T.customData:T;if(!S)return null;if(!(T instanceof He.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return O.P.credentialFromResult(T);const w=S.providerId;if(!w||w===O.p.PASSWORD)return null;let k;switch(w){case O.p.GOOGLE:k=O.X;break;case O.p.FACEBOOK:k=O.W;break;case O.p.GITHUB:k=O.Y;break;case O.p.TWITTER:k=O.$;break;default:const{oauthIdToken:ue,oauthAccessToken:Se,oauthTokenSecret:Be,pendingToken:nt,nonce:Rt}=S;return Se||Be||ue||nt?nt?w.startsWith("saml.")?O.aQ._create(w,nt):O.N._fromParams({providerId:w,signInMethod:w,pendingToken:nt,idToken:ue,accessToken:Se}):new O.Z(w).credential({idToken:ue,accessToken:Se,rawNonce:Rt}):null}return T instanceof He.ZR?k.credentialFromError(T):k.credentialFromResult(T)}function Jt(T,S){return S.catch(w=>{throw w instanceof He.ZR&&function io(T,S){var w;const k=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new jn(T,O.as(T,S));else if(k){const ue=Bs(S),Se=S;ue&&(Se.credential=ue,Se.tenantId=k.tenantId||void 0,Se.email=k.email||void 0,Se.phoneNumber=k.phoneNumber||void 0)}}(T,w),w}).then(w=>{const ue=w.user;return{operationType:w.operationType,credential:Bn(w),additionalUserInfo:O.aq(w),user:dr.getOrCreate(ue)}})}function Vi(T,S){return js.apply(this,arguments)}function js(){return(js=(0,M.Z)(function*(T,S){const w=yield S;return{verificationId:w.verificationId,confirm:k=>Jt(T,w.confirm(k))}})).apply(this,arguments)}class jn{constructor(S,w){this.resolver=w,this.auth=function xr(T){return T.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Jt(on(this.auth),this.resolver.resolveSignIn(S))}}class dr{constructor(S){this._delegate=S,this.multiFactor=O.at(S)}static getOrCreate(S){return dr.USER_MAP.has(S)||dr.USER_MAP.set(S,new dr(S)),dr.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return Jt(w.auth,O.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var k=this;return(0,M.Z)(function*(){return Vi(k.auth,O.l(k._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return Jt(w.auth,O.d(w._delegate,S,$r))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ei(O.aJ(w.auth)),O.g(w._delegate,S,$r)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return Jt(w.auth,O.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return Vi(this.auth,O.r(this._delegate,S,w))}reauthenticateWithPopup(S){return Jt(this.auth,O.e(this._delegate,S,$r))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ei(O.aJ(w.auth)),O.h(w._delegate,S,$r)})()}sendEmailVerification(S){return O.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield O.ap(w._delegate,S),w})()}updateEmail(S){return O.al(this._delegate,S)}updatePassword(S){return O.am(this._delegate,S)}updatePhoneNumber(S){return O.u(this._delegate,S)}updateProfile(S){return O.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return O.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}dr.USER_MAP=new WeakMap;const Tn=O.aC;let Nr=(()=>{class T{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=w.options;Tn(ue,"invalid-api-key",{appName:w.name}),Tn(ue,"invalid-api-key",{appName:w.name});const Se=typeof window<"u"?$r:void 0;this._delegate=k.initialize({options:{persistence:so(ue,w.name),popupRedirectResolver:Se}}),this._delegate._updateErrorMap(O.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){O.K(this._delegate,w,k)}applyActionCode(w){return O.a7(this._delegate,w)}checkActionCode(w){return O.a8(this._delegate,w)}confirmPasswordReset(w,k){return O.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var ue=this;return(0,M.Z)(function*(){return Jt(ue._delegate,O.aa(ue._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return O.af(this._delegate,w)}isSignInWithEmailLink(w){return O.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){Tn(ir(),w._delegate,"operation-not-supported-in-this-environment");const k=yield O.j(w._delegate,$r);return k?Jt(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function oe(T,S){(0,O.aJ)(T)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,k,ue){const{next:Se,error:Be,complete:nt}=$s(w,k,ue);return this._delegate.onAuthStateChanged(Se,Be,nt)}onIdTokenChanged(w,k,ue){const{next:Se,error:Be,complete:nt}=$s(w,k,ue);return this._delegate.onIdTokenChanged(Se,Be,nt)}sendSignInLinkToEmail(w,k){return O.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return O.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,M.Z)(function*(){let ue;switch(function Us(T,S){Li(Object.values(Vt).includes(S),T,"invalid-persistence-type"),(0,He.b$)()?Li(S!==Vt.SESSION,T,"unsupported-persistence-type"):(0,He.UG)()?Li(S===Vt.NONE,T,"unsupported-persistence-type"):Nn()?Li(S===Vt.NONE||S===Vt.LOCAL&&(0,He.hl)(),T,"unsupported-persistence-type"):Li(S===Vt.NONE||rr(),T,"unsupported-persistence-type")}(k._delegate,w),w){case Vt.SESSION:ue=O.a;break;case Vt.LOCAL:ue=(yield O.aE(O.i)._isAvailable())?O.i:O.b;break;case Vt.NONE:ue=O.U;break;default:return O.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Jt(this._delegate,O.a0(this._delegate))}signInWithCredential(w){return Jt(this._delegate,O.a1(this._delegate,w))}signInWithCustomToken(w){return Jt(this._delegate,O.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return Jt(this._delegate,O.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return Jt(this._delegate,O.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return Vi(this._delegate,O.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,M.Z)(function*(){return Tn(ir(),k._delegate,"operation-not-supported-in-this-environment"),Jt(k._delegate,O.c(k._delegate,w,$r))})()}signInWithRedirect(w){var k=this;return(0,M.Z)(function*(){return Tn(ir(),k._delegate,"operation-not-supported-in-this-environment"),yield Ei(k._delegate),O.f(k._delegate,w,$r)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return O.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Vt,T})();function $s(T,S,w){let k=T;"function"!=typeof T&&({next:k,error:S,complete:w}=T);const ue=k;return{next:Be=>ue(Be&&dr.getOrCreate(Be)),error:S,complete:w}}function so(T,S){const w=function Br(T,S){const w=jr();if(!w)return[];const k=O.aF(ro,T,S);switch(w.getItem(k)){case Vt.NONE:return[O.U];case Vt.LOCAL:return[O.i,O.a];case Vt.SESSION:return[O.a];default:return[]}}(T,S);if(typeof self<"u"&&!w.includes(O.i)&&w.push(O.i),typeof window<"u")for(const k of[O.b,O.a])w.includes(k)||w.push(k);return w.includes(O.U)||w.push(O.U),w}class oo{constructor(){this.providerId="phone",this._delegate=new O.P(on(Te.Z.auth()))}static credential(S,w){return O.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}oo.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,oo.PROVIDER_ID=O.P.PROVIDER_ID;const ao=O.aC;class Hs{constructor(S,w,k=Te.Z.app()){var ue;ao(null===(ue=k.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new O.R(k.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(T){T.INTERNAL.registerComponent(new Un.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),k=S.getProvider("auth");return new Nr(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.V,FacebookAuthProvider:O.W,GithubAuthProvider:O.Y,GoogleAuthProvider:O.X,OAuthProvider:O.Z,SAMLAuthProvider:O._,PhoneAuthProvider:oo,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Hs,TwitterAuthProvider:O.$,Auth:Nr,AuthCredential:O.L,Error:He.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.5.9")}(Te.Z)},861:(ms,tr,Xe)=>{function M(O,He,Ft,En,Un,sn,xt){try{var de=O[sn](xt),Ee=de.value}catch(ze){return void Ft(ze)}de.done?He(Ee):Promise.resolve(Ee).then(En,Un)}function Te(O){return function(){var He=this,Ft=arguments;return new Promise(function(En,Un){var sn=O.apply(He,Ft);function xt(Ee){M(sn,En,Un,xt,de,"next",Ee)}function de(Ee){M(sn,En,Un,xt,de,"throw",Ee)}xt(void 0)})}}Xe.d(tr,{Z:()=>Te})},582:(ms,tr,Xe)=>{function He(ee,re){var oe={};for(var ce in ee)Object.prototype.hasOwnProperty.call(ee,ce)&&re.indexOf(ce)<0&&(oe[ce]=ee[ce]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ce=Object.getOwnPropertySymbols(ee);he<ce.length;he++)re.indexOf(ce[he])<0&&Object.prototype.propertyIsEnumerable.call(ee,ce[he])&&(oe[ce[he]]=ee[ce[he]])}return oe}function ze(ee,re,oe,ce){return new(oe||(oe=Promise))(function(se,Ce){function Et(St){try{je(ce.next(St))}catch(ln){Ce(ln)}}function xe(St){try{je(ce.throw(St))}catch(ln){Ce(ln)}}function je(St){St.done?se(St.value):function he(se){return se instanceof oe?se:new oe(function(Ce){Ce(se)})}(St.value).then(Et,xe)}je((ce=ce.apply(ee,re||[])).next())})}function vt(ee){return this instanceof vt?(this.v=ee,this):new vt(ee)}function jt(ee,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ce=oe.apply(ee,re||[]),se=[];return he={},Ce("next"),Ce("throw"),Ce("return"),he[Symbol.asyncIterator]=function(){return this},he;function Ce(Xt){ce[Xt]&&(he[Xt]=function(rr){return new Promise(function(Nn,ir){se.push([Xt,rr,Nn,ir])>1||Et(Xt,rr)})})}function Et(Xt,rr){try{!function xe(Xt){Xt.value instanceof vt?Promise.resolve(Xt.value.v).then(je,St):ln(se[0][2],Xt)}(ce[Xt](rr))}catch(Nn){ln(se[0][3],Nn)}}function je(Xt){Et("next",Xt)}function St(Xt){Et("throw",Xt)}function ln(Xt,rr){Xt(rr),se.shift(),se.length&&Et(se[0][0],se[0][1])}}function Ut(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function Tt(ee){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&ee[re],ce=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ce>=ee.length&&(ee=void 0),{value:ee&&ee[ce++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},ce("next"),ce("throw"),ce("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ce(se){oe[se]=ee[se]&&function(Ce){return new Promise(function(Et,xe){!function he(se,Ce,Et,xe){Promise.resolve(xe).then(function(je){se({value:je,done:Et})},Ce)}(Et,xe,(Ce=ee[se](Ce)).done,Ce.value)})}}}Xe.d(tr,{FC:()=>jt,KL:()=>Ut,_T:()=>He,mG:()=>ze,qq:()=>vt}),"function"==typeof SuppressedError&&SuppressedError}},ms=>{ms(ms.s=114)}]);
"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(Is,or,et)=>{et.d(or,{$:()=>Wm,A:()=>Te,G:()=>Bt,K:()=>tf,L:()=>Qo,N:()=>os,P:()=>I_,R:()=>y_,U:()=>st,V:()=>La,W:()=>Al,X:()=>ff,Y:()=>pf,Z:()=>Rt,_:()=>Jc,a:()=>za,a0:()=>Km,a1:()=>Nl,a2:()=>yr,a3:()=>Ym,a4:()=>Xm,a5:()=>Jm,a6:()=>kl,a7:()=>WI,a8:()=>Fe,a9:()=>En,aA:()=>ml,aB:()=>qt,aC:()=>_e,aD:()=>Ss,aE:()=>xe,aF:()=>xt,aG:()=>Zl,aH:()=>A_,aI:()=>dw,aJ:()=>yn,aN:()=>qa,aQ:()=>ci,aa:()=>eu,ab:()=>Ua,ac:()=>Wn,ad:()=>Ba,ae:()=>lt,af:()=>Kn,ag:()=>ja,ah:()=>tu,ak:()=>nu,al:()=>Tt,am:()=>oR,ap:()=>GI,aq:()=>Qr,as:()=>dR,at:()=>s_,au:()=>tn,av:()=>Ko,aw:()=>tt,ax:()=>wt,ay:()=>td,az:()=>x_,b:()=>QI,c:()=>w_,d:()=>it,e:()=>b_,f:()=>Ft,g:()=>As,h:()=>Rr,i:()=>XI,j:()=>hw,k:()=>U_,l:()=>Ts,m:()=>IR,p:()=>cn,r:()=>E_,s:()=>Lf,u:()=>li});var M=et(861),De=et(534),O=et(58),ze=et(879),Ut=et(582),Tn=et(537);const cn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Bt=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ar=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dt=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),at=new ze.Yd("@firebase/auth");function Cn(p,...l){at.logLevel<=ze.in.ERROR&&at.error(`Auth (${De.SDK_VERSION}): ${p}`,...l)}function wt(p,...l){throw Ln(p,...l)}function qt(p,...l){return Ln(p,...l)}function oi(p,l,d){const g=Object.assign(Object.assign({},ar()),{[l]:d});return new O.LL("auth","Firebase",g).create(l,{appName:p.name})}function $t(p){return oi(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ft(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&wt(p,"argument-error"),oi(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ln(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Dt.create(p,...l)}function _e(p,l,...d){if(!p)throw Ln(l,...d)}function fn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw Cn(l),new Error(l)}function tn(p,l){p||fn(l)}function An(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function bi(){return"http:"===Ti()||"https:"===Ti()}function Ti(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class ji{constructor(l,d){this.shortDelay=l,this.longDelay=d,tn(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bi()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function re(p,l){tn(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class oe{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},de=new ji(3e4,6e4);function me(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function ce(p,l,d,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,M.Z)(function*(p,l,d,g,v={}){return bt(p,v,(0,M.Z)(function*(){let C={},H={};g&&("GET"===l?H=g:C={body:JSON.stringify(g)});const ne=(0,O.xO)(Object.assign({key:p.config.apiKey},H)).slice(1),ye=yield p._getAdditionalHeaders();return ye["Content-Type"]="application/json",p.languageCode&&(ye["X-Firebase-Locale"]=p.languageCode),oe.fetch()(pn(p,p.config.apiHost,d,ne),Object.assign({method:l,headers:ye,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function bt(p,l,d){return Re.apply(this,arguments)}function Re(){return(Re=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ue),l);try{const v=new cr(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const H=yield C.json();if("needConfirmation"in H)throw Vn(p,"account-exists-with-different-credential",H);if(C.ok&&!("errorMessage"in H))return H;{const ne=C.ok?H.errorMessage:H.error.message,[ye,Ue]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ye)throw Vn(p,"credential-already-in-use",H);if("EMAIL_EXISTS"===ye)throw Vn(p,"email-already-in-use",H);if("USER_DISABLED"===ye)throw Vn(p,"user-disabled",H);const Ze=g[ye]||ye.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw oi(p,Ze,Ue);wt(p,Ze)}}catch(v){if(v instanceof O.ZR)throw v;wt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function $e(p,l,d,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,M.Z)(function*(p,l,d,g,v={}){const C=yield ce(p,l,d,g,v);return"mfaPendingCredential"in C&&wt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function pn(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?re(p.config,v):`${p.config.apiScheme}://${v}`}function nn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cr{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(qt(this.auth,"network-request-failed")),de.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=qt(p,l,g);return v.customData._tokenResponse=d,v}function ur(p){return void 0!==p&&void 0!==p.getResponse}function Dr(p){return void 0!==p&&void 0!==p.enterprise}class zr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return nn(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function is(){return(is=(0,M.Z)(function*(p){return(yield ce(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jt(p,l){return $i.apply(this,arguments)}function $i(){return($i=(0,M.Z)(function*(p,l){return ce(p,"GET","/v2/recaptchaConfig",me(p,l))})).apply(this,arguments)}function $s(){return($s=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function ss(){return(ss=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function qr(p,l){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function Dn(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Vr(){return(Vr=(0,M.Z)(function*(p,l=!1){const d=(0,O.m9)(p),g=yield d.getIdToken(l),v=co(g);_e(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,H=C?.sign_in_provider;return{claims:v,token:g,authTime:Dn(qn(v.auth_time)),issuedAtTime:Dn(qn(v.iat)),expirationTime:Dn(qn(v.exp)),signInProvider:H||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function qn(p){return 1e3*Number(p)}function co(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return Cn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,O.tV)(d);return v?JSON.parse(v):(Cn("Failed to decode base64 JWT payload"),null)}catch(v){return Cn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Hs(p){const l=co(p);return _e(l,"internal-error"),_e(typeof l.exp<"u","internal-error"),_e(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function rn(p,l){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof O.ZR&&function zs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Gn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class mr{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield rn(p,qr(d,{idToken:g}));_e(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const H=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?ho(C.providerUserInfo):[],ne=function lo(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,H),Ze=!!p.isAnonymous&&!(p.email&&C.passwordHash||ne?.length),Ct={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:ne,metadata:new mr(C.createdAt,C.lastLoginAt),isAnonymous:Ze};Object.assign(p,Ct)})).apply(this,arguments)}function uo(){return(uo=(0,M.Z)(function*(p){const l=(0,O.m9)(p);yield Sn(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function ho(p){return p.map(l=>{var{providerId:d}=l,g=(0,Ut._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function j(){return(j=(0,M.Z)(function*(p,l){const d=yield bt(p,{},(0,M.Z)(function*(){const g=(0,O.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,H=pn(p,v,"/v1/token",`key=${C}`),ne=yield p._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",oe.fetch()(H,{method:"POST",headers:ne,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,M.Z)(function*(p,l){return ce(p,"POST","/v2/accounts:revokeToken",me(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){_e(l.idToken,"internal-error"),_e(typeof l.idToken<"u","internal-error"),_e(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Hs(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){_e(0!==l.length,"internal-error");const d=Hs(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(_e(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:H}=yield function Gs(p,l){return j.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number(H))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,H=new S;return g&&(_e("string"==typeof g,"internal-error",{appName:l}),H.refreshToken=g),v&&(_e("string"==typeof v,"internal-error",{appName:l}),H.accessToken=v),C&&(_e("number"==typeof C,"internal-error",{appName:l}),H.expirationTime=C),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return fn("not implemented")}}function w(p,l){_e("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class k{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,Ut._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new mr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield rn(d,d.stsTokenManager.getToken(d.auth,l));return _e(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function un(p){return Vr.apply(this,arguments)}(this,l)}reload(){return function qs(p){return uo.apply(this,arguments)}(this)}_assign(l){this!==l&&(_e(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new k(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield Sn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,De._isFirebaseServerApp)(l.auth.app))return Promise.reject($t(l.auth));const d=yield l.getIdToken();return yield rn(l,function ao(p,l){return $s.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,H,ne,ye,Ue,Ze;const Ct=null!==(g=d.displayName)&&void 0!==g?g:void 0,Pr=null!==(v=d.email)&&void 0!==v?v:void 0,di=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,sd=null!==(H=d.photoURL)&&void 0!==H?H:void 0,ip=null!==(ne=d.tenantId)&&void 0!==ne?ne:void 0,od=null!==(ye=d._redirectEventId)&&void 0!==ye?ye:void 0,Ya=null!==(Ue=d.createdAt)&&void 0!==Ue?Ue:void 0,j_=null!==(Ze=d.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:xr,emailVerified:$_,isAnonymous:wr,providerData:hu,stsTokenManager:H_}=d;_e(xr&&H_,l,"internal-error");const z_=S.fromJSON(this.name,H_);_e("string"==typeof xr,l,"internal-error"),w(Ct,l.name),w(Pr,l.name),_e("boolean"==typeof $_,l,"internal-error"),_e("boolean"==typeof wr,l,"internal-error"),w(di,l.name),w(sd,l.name),w(ip,l.name),w(od,l.name),w(Ya,l.name),w(j_,l.name);const Xa=new k({uid:xr,auth:l,email:Pr,emailVerified:$_,displayName:Ct,isAnonymous:wr,photoURL:sd,phoneNumber:di,tenantId:ip,stsTokenManager:z_,createdAt:Ya,lastLoginAt:j_});return hu&&Array.isArray(hu)&&(Xa.providerData=hu.map(Ja=>Object.assign({},Ja))),od&&(Xa._redirectEventId=od),Xa}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const C=new k({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield Sn(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];_e(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?ho(v.providerUserInfo):[],H=!(v.email&&v.passwordHash||C?.length),ne=new S;ne.updateFromIdToken(g);const ye=new k({uid:v.localId,auth:l,stsTokenManager:ne,isAnonymous:H}),Ue={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new mr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(ye,Ue),ye})()}}const he=new Map;function xe(p){tn(p instanceof Function,"Expected a class definition");let l=he.get(p);return l?(tn(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,he.set(p,l),l)}const st=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function xt(p,l,d){return`firebase:${p}:${l}:${d}`}class Ne{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=xt(this.userKey,v.apiKey,C),this.fullPersistenceKey=xt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?k._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new Ne(xe(st),l,g);const v=(yield Promise.all(d.map(function(){var Ue=(0,M.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let C=v[0]||xe(st);const H=xt(g,l.config.apiKey,l.name);let ne=null;for(const Ue of d)try{const Ze=yield Ue._get(H);if(Ze){const Ct=k._fromJSON(l,Ze);Ue!==C&&(ne=Ct),C=Ue;break}}catch{}const ye=v.filter(Ue=>Ue._shouldAllowMigration);return C._shouldAllowMigration&&ye.length?(C=ye[0],ne&&(yield C._set(H,ne.toJSON())),yield Promise.all(d.map(function(){var Ue=(0,M.Z)(function*(Ze){if(Ze!==C)try{yield Ze._remove(H)}catch{}});return function(Ze){return Ue.apply(this,arguments)}}())),new Ne(C,l,g)):new Ne(C,l,g)})()}}function Gt(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(Kt(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(We(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Oa(l))return"Blackberry";if(ka(l))return"Webos";if(_r(l))return"Safari";if((l.includes("chrome/")||Wo(l))&&!l.includes("edge/"))return"Chrome";if(tt(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function We(p=(0,O.z$)()){return/firefox\//i.test(p)}function _r(p=(0,O.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Wo(p=(0,O.z$)()){return/crios\//i.test(p)}function Kt(p=(0,O.z$)()){return/iemobile/i.test(p)}function tt(p=(0,O.z$)()){return/android/i.test(p)}function Oa(p=(0,O.z$)()){return/blackberry/i.test(p)}function ka(p=(0,O.z$)()){return/webos/i.test(p)}function Ko(p=(0,O.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function ml(p=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function X(p=(0,O.z$)()){return Ko(p)||tt(p)||ka(p)||Oa(p)||/windows phone/i.test(p)||Kt(p)}function ct(p,l=[]){let d;switch(p){case"Browser":d=Gt((0,O.z$)());break;case"Worker":d=`${Gt((0,O.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${De.SDK_VERSION}/${g}`}class gt{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise((H,ne)=>{try{H(l(C))}catch(ye){ne(ye)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Yt(){return(Yt=(0,M.Z)(function*(p,l={}){return ce(p,"GET","/v2/passwordPolicy",me(p,l))})).apply(this,arguments)}class zi{constructor(l){var d,g,v,C;const H=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=H.minPasswordLength)&&void 0!==d?d:6,H.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=H.maxPasswordLength),void 0!==H.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=H.containsLowercaseCharacter),void 0!==H.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=H.containsUppercaseCharacter),void 0!==H.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=H.containsNumericCharacter),void 0!==H.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=H.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,H,ne;const ye={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,ye),this.validatePasswordCharacterOptions(l,ye),ye.isValid&&(ye.isValid=null===(d=ye.meetsMinPasswordLength)||void 0===d||d),ye.isValid&&(ye.isValid=null===(g=ye.meetsMaxPasswordLength)||void 0===g||g),ye.isValid&&(ye.isValid=null===(v=ye.containsLowercaseLetter)||void 0===v||v),ye.isValid&&(ye.isValid=null===(C=ye.containsUppercaseLetter)||void 0===C||C),ye.isValid&&(ye.isValid=null===(H=ye.containsNumericCharacter)||void 0===H||H),ye.isValid&&(ye.isValid=null===(ne=ye.containsNonAlphanumericCharacter)||void 0===ne||ne),ye}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class Zo{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=xe(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Ne.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield qr(d,{idToken:l}),v=yield k._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,De._isFirebaseServerApp)(d.app)){const ne=d.app.settings.authIdToken;return ne?new Promise(ye=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(ne).then(ye,ye))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,H=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const ne=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,ye=C?._redirectEventId,Ue=yield d.tryRedirectSignIn(l);(!ne||ne===ye)&&Ue?.user&&(C=Ue.user,H=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(H)try{yield d.beforeStateQueue.runMiddleware(C)}catch(ne){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(ne))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return _e(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield Sn(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Bs(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,De._isFirebaseServerApp)(d.app))return Promise.reject($t(d));const g=l?(0,O.m9)(l):null;return g&&_e(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&_e(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,De._isFirebaseServerApp)(l.app)?Promise.reject($t(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,De._isFirebaseServerApp)(this.app)?Promise.reject($t(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(xe(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function Et(p){return Yt.apply(this,arguments)}(l),g=new zi(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new O.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,l){return T.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&xe(l)||d._popupRedirectResolver;_e(g,d,"argument-error"),d.redirectPersistenceManager=yield Ne.create(d,[xe(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let H=!1;const ne=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(ne,this,"internal-error"),ne.then(()=>{H||C(this.currentUser)}),"function"==typeof d){const ye=l.addObserver(d,g,v);return()=>{H=!0,ye()}}{const ye=l.addObserver(d);return()=>{H=!0,ye()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=ct(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function gr(p,...l){at.logLevel<=ze.in.WARN&&at.warn(`Auth (${De.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function yn(p){return(0,O.m9)(p)}class fo{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,O.ne)(d=>this.observer=d)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _l={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lm(p){return _l.loadJS(p)}function Vm(p){return`__${p}${Math.floor(1e6*Math.random())}`}class rt{constructor(l){this.type="recaptcha-enterprise",this.auth=yn(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function C(){return C=(0,M.Z)(function*(ne){if(!d){if(null==ne.tenantId&&null!=ne._agentRecaptchaConfig)return ne._agentRecaptchaConfig.siteKey;if(null!=ne.tenantId&&void 0!==ne._tenantRecaptchaConfigs[ne.tenantId])return ne._tenantRecaptchaConfigs[ne.tenantId].siteKey}return new Promise(function(){var ye=(0,M.Z)(function*(Ue,Ze){jt(ne,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ct=>{if(void 0!==Ct.recaptchaKey){const Pr=new zr(Ct);return null==ne.tenantId?ne._agentRecaptchaConfig=Pr:ne._tenantRecaptchaConfigs[ne.tenantId]=Pr,Ue(Pr.siteKey)}Ze(new Error("recaptcha Enterprise site key undefined"))}).catch(Ct=>{Ze(Ct)})});return function(Ue,Ze){return ye.apply(this,arguments)}}())}),C.apply(this,arguments)}function H(ne,ye,Ue){const Ze=window.grecaptcha;Dr(Ze)?Ze.enterprise.ready(()=>{Ze.enterprise.execute(ne,{action:l}).then(Ct=>{ye(Ct)}).catch(()=>{ye("NO_RECAPTCHA")})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ne,ye)=>{(function v(ne){return C.apply(this,arguments)})(g.auth).then(Ue=>{if(!d&&Dr(window.grecaptcha))H(Ue,ne,ye);else{if(typeof window>"u")return void ye(new Error("RecaptchaVerifier is only supported in browser"));let Ze=function BI(){return _l.recaptchaEnterpriseScript}();0!==Ze.length&&(Ze+=Ue),Lm(Ze).then(()=>{H(Ue,ne,ye)}).catch(Ct=>{ye(Ct)})}}).catch(Ue=>{ye(Ue)})})})()}}function jI(p,l,d){return Um.apply(this,arguments)}function Um(){return(Um=(0,M.Z)(function*(p,l,d,g=!1){const v=new rt(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const H=Object.assign({},l);return Object.assign(H,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}function yl(p,l,d,g){return Le.apply(this,arguments)}function Le(){return Le=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield jI(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,M.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ne=yield jI(p,l,d,"getOobCode"===d);return g(p,ne)}return Promise.reject(H)});return function(H){return C.apply(this,arguments)}}())}),Le.apply(this,arguments)}function tf(p,l,d){const g=yn(p);_e(g._canInitEmulator,g,"emulator-config-failed"),_e(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=Bm(l),{host:H,port:ne}=function El(p){const l=Bm(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:Gc(g.substr(C.length+1))}}{const[C,H]=g.split(":");return{host:C,port:Gc(H)}}}(l);g.config.emulator={url:`${C}//${H}${null===ne?"":`:${ne}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:H,port:ne,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function nf(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Bm(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function Gc(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Qo{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return fn("not implemented")}_getIdTokenResponse(l){return fn("not implemented")}_linkToIdToken(l,d){return fn("not implemented")}_getReauthenticationResolver(l){return fn("not implemented")}}function jm(p,l){return It.apply(this,arguments)}function It(){return(It=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:resetPassword",me(p,l))})).apply(this,arguments)}function Il(){return(Il=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ai(p,l){return wl.apply(this,arguments)}function wl(){return(wl=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Jt(){return(Jt=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:update",me(p,l))})).apply(this,arguments)}function rR(p,l){return $m.apply(this,arguments)}function $m(){return($m=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithPassword",me(p,l))})).apply(this,arguments)}function Ee(p,l){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:sendOobCode",me(p,l))})).apply(this,arguments)}function bl(){return(bl=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function af(p,l){return cf.apply(this,arguments)}function cf(){return(cf=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function uf(p,l){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function zm(){return(zm=(0,M.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function qm(){return(qm=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithEmailLink",me(p,l))})).apply(this,arguments)}function Zc(){return(Zc=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithEmailLink",me(p,l))})).apply(this,arguments)}class po extends Qo{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new po(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new po(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return yl(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rR);case"emailLink":return function sR(p,l){return qm.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:wt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return yl(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ai);case"emailLink":return function Kc(p,l){return Zc.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:wt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Ws(p,l){return lf.apply(this,arguments)}function lf(){return(lf=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithIdp",me(p,l))})).apply(this,arguments)}class os extends Qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new os(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):wt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,Ut._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const H=new os(g,v);return H.idToken=C.idToken||void 0,H.accessToken=C.accessToken||void 0,H.secret=C.secret,H.nonce=C.nonce,H.pendingToken=C.pendingToken||null,H}_getIdTokenResponse(l){return Ws(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ws(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ws(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,O.xO)(d)}return l}}function df(){return(df=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:sendVerificationCode",me(p,l))})).apply(this,arguments)}function hf(){return(hf=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithPhoneNumber",me(p,l))})).apply(this,arguments)}function Tl(){return(Tl=(0,M.Z)(function*(p,l){const d=yield $e(p,"POST","/v1/accounts:signInWithPhoneNumber",me(p,l));if(d.temporaryProof)throw Vn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ve={USER_NOT_FOUND:"user-not-found"};function Qc(){return(Qc=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithPhoneNumber",me(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Ve)})).apply(this,arguments)}class as extends Qo{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new as({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new as({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function go(p,l){return hf.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function fe(p,l){return Tl.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Cl(p,l){return Qc.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new as({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class Yc{constructor(l){var d,g,v,C,H,ne;const ye=(0,O.zd)((0,O.pd)(l)),Ue=null!==(d=ye.apiKey)&&void 0!==d?d:null,Ze=null!==(g=ye.oobCode)&&void 0!==g?g:null,Ct=function zI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ye.mode)&&void 0!==v?v:null);_e(Ue&&Ze&&Ct,"argument-error"),this.apiKey=Ue,this.operation=Ct,this.code=Ze,this.continueUrl=null!==(C=ye.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(H=ye.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ne=ye.tenantId)&&void 0!==ne?ne:null}static parseLink(l){const d=function qI(p){const l=(0,O.zd)((0,O.pd)(p)).link,d=l?(0,O.zd)((0,O.pd)(l)).deep_link_id:null,g=(0,O.zd)((0,O.pd)(p)).deep_link_id;return(g?(0,O.zd)((0,O.pd)(g)).link:null)||g||d||l||p}(l);try{return new Yc(d)}catch{return null}}}let La=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return po._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Yc.parseLink(g);return _e(v,"argument-error"),po._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Yn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Kr extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Rt extends Kr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return _e("providerId"in d&&"signInMethod"in d,"argument-error"),os._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return _e(l.idToken||l.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Rt.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Rt.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:H,providerId:ne}=l;if(!g&&!v&&!d&&!C||!ne)return null;try{return new Rt(ne)._credential({idToken:d,accessToken:g,nonce:H,pendingToken:C})}catch{return null}}}let Al=(()=>{class p extends Kr{constructor(){super("facebook.com")}static credential(d){return os._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ff=(()=>{class p extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return os._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),pf=(()=>{class p extends Kr{constructor(){super("github.com")}static credential(d){return os._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class ci extends Qo{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return Ws(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ws(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ws(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new ci(g,C):null}static _create(l,d){return new ci(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jc extends Yn{constructor(l){_e(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Jc.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Jc.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=ci.fromJSON(l);return _e(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return ci._create(g,d)}catch{return null}}}let Wm=(()=>{class p extends Kr{constructor(){super("twitter.com")}static credential(d,g){return os._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Dl(p,l){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signUp",me(p,l))})).apply(this,arguments)}class Ai{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const C=yield k._fromIdTokenResponse(l,g,v),H=Va(g);return new Ai({user:C,providerId:H,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=Va(g);return new Ai({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function Va(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Km(p){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,M.Z)(function*(p){var l;if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const d=yn(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new Ai({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Dl(d,{returnSecureToken:!0}),v=yield Ai._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Ml extends O.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Ml.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new Ml(l,d,g,v)}}function gf(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?Ml._fromErrorAndOperation(p,C,l,g):C})}function Zm(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function GI(p,l){return Di.apply(this,arguments)}function Di(){return Di=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);yield xl(!0,d,l);const{providerUserInfo:g}=yield function Ci(p,l){return ss.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=Zm(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Di.apply(this,arguments)}function mf(p,l){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,M.Z)(function*(p,l,d=!1){const g=yield rn(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return Ai._forOperation(p,"link",g)})).apply(this,arguments)}function xl(p,l,d){return _f.apply(this,arguments)}function _f(){return(_f=(0,M.Z)(function*(p,l,d){yield Sn(l);const v=!1===p?"provider-already-linked":"no-such-provider";_e(Zm(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function Qm(p,l){return yf.apply(this,arguments)}function yf(){return(yf=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,De._isFirebaseServerApp)(g.app))return Promise.reject($t(g));const v="reauthenticate";try{const C=yield rn(p,gf(g,v,l,p),d);_e(C.idToken,g,"internal-error");const H=co(C.idToken);_e(H,g,"internal-error");const{sub:ne}=H;return _e(p.uid===ne,g,"user-mismatch"),Ai._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&wt(g,"user-mismatch"),C}})).apply(this,arguments)}function vf(p,l){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,M.Z)(function*(p,l,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g="signIn",v=yield gf(p,g,l),C=yield Ai._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Nl(p,l){return If.apply(this,arguments)}function If(){return(If=(0,M.Z)(function*(p,l){return vf(yn(p),l)})).apply(this,arguments)}function yr(p,l){return wf.apply(this,arguments)}function wf(){return(wf=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);return yield xl(!1,d,l.providerId),mf(d,l)})).apply(this,arguments)}function Ym(p,l){return bf.apply(this,arguments)}function bf(){return(bf=(0,M.Z)(function*(p,l){return Qm((0,O.m9)(p),l)})).apply(this,arguments)}function Tf(){return(Tf=(0,M.Z)(function*(p,l){return $e(p,"POST","/v1/accounts:signInWithCustomToken",me(p,l))})).apply(this,arguments)}function Xm(p,l){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,M.Z)(function*(p,l){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const d=yn(p),g=yield function gn(p,l){return Tf.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield Ai._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Ge.apply(this,arguments)}class vr{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Mt._fromServerResponse(l,d):"totpInfo"in d?lr._fromServerResponse(l,d):wt(l,"internal-error")}}class Mt extends vr{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Mt(d)}}class lr extends vr{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new lr(d)}}function Er(p,l,d){var g;_e((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),_e(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(_e(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(_e(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function _o(p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,M.Z)(function*(p){const l=yn(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Jm(p,l,d){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,M.Z)(function*(p,l,d){const g=yn(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Er(g,v,d),yield yl(g,v,"getOobCode",af)})).apply(this,arguments)}function kl(p,l,d){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,M.Z)(function*(p,l,d){yield jm((0,O.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&_o(p),v});return function(v){return g.apply(this,arguments)}}())}),Cf.apply(this,arguments)}function WI(p,l){return vn.apply(this,arguments)}function vn(){return vn=(0,M.Z)(function*(p,l){yield function nR(p,l){return Jt.apply(this,arguments)}((0,O.m9)(p),{oobCode:l})}),vn.apply(this,arguments)}function Fe(p,l){return ut.apply(this,arguments)}function ut(){return(ut=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),g=yield jm(d,{oobCode:l}),v=g.requestType;switch(_e(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(g.mfaInfo,d,"internal-error");default:_e(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=vr._fromServerResponse(yn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function En(p,l){return Si.apply(this,arguments)}function Si(){return(Si=(0,M.Z)(function*(p,l){const{data:d}=yield Fe((0,O.m9)(p),l);return d.email})).apply(this,arguments)}function eu(p,l,d){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,M.Z)(function*(p,l,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g=yn(p),H=yield yl(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dl).catch(ye=>{throw"auth/password-does-not-meet-requirements"===ye.code&&_o(p),ye}),ne=yield Ai._fromIdTokenResponse(g,"signIn",H);return yield g._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function Ua(p,l,d){return(0,De._isFirebaseServerApp)(p.app)?Promise.reject($t(p)):Nl((0,O.m9)(p),La.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&_o(p),v});return function(v){return g.apply(this,arguments)}}())}function Wn(p,l,d){return ws.apply(this,arguments)}function ws(){return(ws=(0,M.Z)(function*(p,l,d){const g=yn(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C(H,ne){_e(ne.handleCodeInApp,g,"argument-error"),ne&&Er(g,H,ne)})(v,d),yield yl(g,v,"getOobCode",uf)})).apply(this,arguments)}function Ba(p,l){const d=Yc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function lt(p,l,d){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,M.Z)(function*(p,l,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g=(0,O.m9)(p),v=La.credentialWithLink(l,d||An());return _e(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Nl(g,v)})).apply(this,arguments)}function yo(){return(yo=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:createAuthUri",me(p,l))})).apply(this,arguments)}function Kn(p,l){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:bi()?An():"http://localhost"},{signinMethods:v}=yield function e_(p,l){return yo.apply(this,arguments)}((0,O.m9)(p),g);return v||[]}),Xo.apply(this,arguments)}function ja(p,l){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&Er(d.auth,v,l);const{email:C}=yield function sf(p,l){return bl.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),Gi.apply(this,arguments)}function tu(p,l,d){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&Er(g.auth,C,d);const{email:H}=yield function iR(p,l){return zm.apply(this,arguments)}(g.auth,C);H!==p.email&&(yield p.reload())}),Fl.apply(this,arguments)}function cs(){return(cs=(0,M.Z)(function*(p,l){return ce(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function nu(p,l){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,O.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},H=yield rn(g,function vo(p,l){return cs.apply(this,arguments)}(g.auth,C));g.displayName=H.displayName||null,g.photoURL=H.photoUrl||null;const ne=g.providerData.find(({providerId:ye})=>"password"===ye);ne&&(ne.displayName=g.displayName,ne.photoURL=g.photoURL),yield g._updateTokensIfNecessary(H)}),Jo.apply(this,arguments)}function Tt(p,l){const d=(0,O.m9)(p);return(0,De._isFirebaseServerApp)(d.auth.app)?Promise.reject($t(d.auth)):Ll(d,l,null)}function oR(p,l){return Ll((0,O.m9)(p),null,l)}function Ll(p,l,d){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,M.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const H=yield rn(p,function rf(p,l){return Il.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(H,!0)}),Vl.apply(this,arguments)}class Ks{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class ea extends Ks{constructor(l,d,g,v){super(l,d,g),this.username=v}}class ru extends Ks{constructor(l,d){super(l,"facebook.com",d)}}class Sr extends ea{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class aR extends Ks{constructor(l,d){super(l,"google.com",d)}}class ui extends ea{constructor(l,d,g){super(l,"twitter.com",d,g)}}function Qr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function bs(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const H=null===(d=null===(l=co(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(H)return new Ks(C,"anonymous"!==H&&"custom"!==H?H:null)}if(!g)return null;switch(g){case"facebook.com":return new ru(C,v);case"github.com":return new Sr(C,v);case"google.com":return new aR(C,v);case"twitter.com":return new ui(C,v,p.screenName||null);case"custom":case"anonymous":return new Ks(C,null);default:return new Ks(C,g,v)}}(d)}class Ha{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new Ha("enroll",l,d)}static _fromMfaPendingCredential(l){return new Ha("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ha._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return Ha._fromIdtoken(l.multiFactorSession.idToken)}return null}}class r_{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=yn(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(ne=>vr._fromServerResponse(g,ne));_e(v.mfaPendingCredential,g,"internal-error");const H=Ha._fromMfaPendingCredential(v.mfaPendingCredential);return new r_(H,C,function(){var ne=(0,M.Z)(function*(ye){const Ue=yield ye._process(g,H);delete v.mfaInfo,delete v.mfaPendingCredential;const Ze=Object.assign(Object.assign({},v),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(d.operationType){case"signIn":const Ct=yield Ai._fromIdTokenResponse(g,d.operationType,Ze);return yield g._updateCurrentUser(Ct.user),Ct;case"reauthenticate":return _e(d.user,g,"internal-error"),Ai._forOperation(d.user,d.operationType,Ze);default:wt(g,"internal-error")}});return function(ye){return ne.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function dR(p,l){var d;const g=(0,O.m9)(p),v=l;return _e(l.customData.operationType,g,"argument-error"),_e(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),r_._fromError(g,v)}class i_{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>vr._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new i_(l)}getSession(){var l=this;return(0,M.Z)(function*(){return Ha._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,C=yield g.getSession(),H=yield rn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(H),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield rn(d.user,function gR(p,l){return ce(p,"POST","/v2/accounts/mfaEnrollment:withdraw",me(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:H})=>H!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Ul=new WeakMap;function s_(p){const l=(0,O.m9)(p);return Ul.has(l)||Ul.set(l,i_._fromUser(l)),Ul.get(l)}const Sf="__sak";class ZI{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const QI=(()=>{class p extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function mR(){const p=(0,O.z$)();return _r(p)||Ko(p)}()&&function we(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=X(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((ne,ye,Ue)=>{this.notifyListeners(ne,Ue)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(v);if(d.newValue!==ne)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const ne=this.storage.getItem(v);!g&&this.localCache[v]===ne||this.notifyListeners(v,ne)},H=this.storage.getItem(v);!function K(){return(0,O.w1)()&&10===document.documentMode}()||H===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,M.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),za=(()=>{class p extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let o_=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:C,eventType:H,data:ne}=v.data,ye=g.handlersMap[H];if(!ye?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:H});const Ue=Array.from(ye).map(function(){var Ct=(0,M.Z)(function*(Pr){return Pr(v.origin,ne)});return function(Pr){return Ct.apply(this,arguments)}}()),Ze=yield function Wi(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Ue);v.ports[0].postMessage({status:"done",eventId:C,eventType:H,response:Ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function qa(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class a_{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let H,ne;return new Promise((ye,Ue)=>{const Ze=qa("",20);C.port1.start();const Ct=setTimeout(()=>{Ue(new Error("unsupported_event"))},g);ne={messageChannel:C,onMessage(Pr){const di=Pr;if(di.data.eventId===Ze)switch(di.data.status){case"ack":clearTimeout(Ct),H=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),ye(di.data.response);break;default:clearTimeout(Ct),clearTimeout(H),Ue(new Error("invalid_response"))}}},v.handlers.add(ne),C.port1.addEventListener("message",ne.onMessage),v.target.postMessage({eventType:l,eventId:Ze,data:d},[C.port2])}).finally(()=>{ne&&v.removeMessageHandler(ne)})})()}}function Zn(){return window}function Bl(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function iu(){return(iu=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Pf="firebaseLocalStorageDb",Io="firebaseLocalStorage",na="fbase_key";class Ga{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function xf(p,l){return p.transaction([Io],l?"readwrite":"readonly").objectStore(Io)}function l_(){const p=indexedDB.open(Pf,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Io,{keyPath:na})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(Io)?l(g):(g.close(),yield function _R(){const p=indexedDB.deleteDatabase(Pf);return new Ga(p).toPromise()}(),l(yield l_()))}))})}function d_(p,l,d){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,M.Z)(function*(p,l,d){const g=xf(p,!0).put({[na]:l,value:d});return new Ga(g).toPromise()})).apply(this,arguments)}function $l(){return($l=(0,M.Z)(function*(p,l){const d=xf(p,!1).get(l),g=yield new Ga(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Hl(p,l){const d=xf(p,!0).delete(l);return new Ga(d).toPromise()}const XI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield l_()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return Bl()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=o_._getInstance(function u_(){return Bl()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Mf(){return iu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new a_(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function c_(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield l_();return yield d_(d,Sf,"1"),yield Hl(d,Sf),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(C=>d_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(C=>function yR(p,l){return $l.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>Hl(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries(H=>{const ne=xf(H,!1).getAll();return new Ga(ne).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:H,value:ne}of g)C.add(H),JSON.stringify(d.localCache[H])!==JSON.stringify(ne)&&(d.notifyListeners(H,ne),v.push(H));for(const H of Object.keys(d.localCache))d.localCache[H]&&!C.has(H)&&(d.notifyListeners(H,null),v.push(H));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),zl=1e12;class p_{constructor(l){this.auth=l,this.counter=zl,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new nw(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||zl;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||zl))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||zl))||void 0===g||g.execute(),""})()}}class nw{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;_e(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function g_(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kf=Vm("rcb"),vR=new ji(3e4,6e4);class rw{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Zn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return _e(function Ki(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&ur(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((g,v)=>{const C=Zn().setTimeout(()=>{v(qt(l,"network-request-failed"))},vR.get());Zn()[kf]=()=>{Zn().clearTimeout(C),delete Zn()[kf];const ne=Zn().grecaptcha;if(!ne||!ur(ne))return void v(qt(l,"internal-error"));const ye=ne.render;ne.render=(Ue,Ze)=>{const Ct=ye(Ue,Ze);return this.counter++,Ct},this.hostLanguage=d,g(ne)},Lm(`${function XS(){return _l.recaptchaV2Script}()}?${(0,O.xO)({onload:kf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(qt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Zn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class m_{load(l){return(0,M.Z)(function*(){return new p_(l)})()}clearedOneInstance(){}}const __="recaptcha",iw={theme:"light",type:"image"};class y_{constructor(l,d,g=Object.assign({},iw)){this.parameters=g,this.type=__,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(l),this.isInvisible="invisible"===this.parameters.size,_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;_e(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new m_:new rw,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const H=ne=>{ne&&(l.tokenChangeListeners.delete(H),C(ne))};l.tokenChangeListeners.add(H),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Zn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){_e(bi()&&!Bl(),l.auth,"internal-error"),yield function v_(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function js(p){return is.apply(this,arguments)}(l.auth);_e(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ff{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=as._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Lf(p,l,d){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,M.Z)(function*(p,l,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g=yn(p),v=yield Wa(g,l,(0,O.m9)(d));return new Ff(v,C=>Nl(g,C))})).apply(this,arguments)}function Ts(p,l,d){return ql.apply(this,arguments)}function ql(){return(ql=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);yield xl(!1,g,"phone");const v=yield Wa(g.auth,l,(0,O.m9)(d));return new Ff(v,C=>yr(g,C))})).apply(this,arguments)}function E_(p,l,d){return en.apply(this,arguments)}function en(){return(en=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject($t(g.auth));const v=yield Wa(g.auth,l,(0,O.m9)(d));return new Ff(v,C=>Ym(g,C))})).apply(this,arguments)}function Wa(p,l,d){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(_e("string"==typeof v,p,"argument-error"),_e(d.type===__,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const H=C.session;if("phoneNumber"in C)return _e("enroll"===H.type,p,"internal-error"),(yield function hR(p,l){return ce(p,"POST","/v2/accounts/mfaEnrollment:start",me(p,l))}(p,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{_e("signin"===H.type,p,"internal-error");const ne=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return _e(ne,p,"missing-multi-factor-info"),(yield function JI(p,l){return ce(p,"POST","/v2/accounts/mfaSignIn:start",me(p,l))}(p,{mfaPendingCredential:H.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Fa(p,l){return df.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return H}}finally{d._reset()}}),Ka.apply(this,arguments)}function li(p,l){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);if((0,De._isFirebaseServerApp)(d.auth.app))return Promise.reject($t(d.auth));yield mf(d,l)})).apply(this,arguments)}let I_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=yn(d)}verifyPhoneNumber(d,g){return Wa(this.auth,d,(0,O.m9)(g))}static credential(d,g){return as._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?as._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Zi(p,l){return l?xe(l):(_e(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Yr extends Qo{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Ws(l,this._buildIdpRequest())}_linkToIdToken(l,d){return Ws(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return Ws(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function sw(p){return vf(p.auth,new Yr(p),p.bypassAuthState)}function ow(p){const{auth:l,user:d}=p;return _e(d,l,"internal-error"),Qm(d,new Yr(p),p.bypassAuthState)}function aw(p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return _e(d,l,"internal-error"),mf(d,new Yr(p),p.bypassAuthState)})).apply(this,arguments)}class Bf{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:H,error:ne,type:ye}=l;if(ne)return void d.reject(ne);const Ue={auth:d.auth,requestUri:g,sessionId:v,tenantId:H||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ye)(Ue))}catch(Ze){d.reject(Ze)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return sw;case"linkViaPopup":case"linkViaRedirect":return aw;case"reauthViaPopup":case"reauthViaRedirect":return ow;default:wt(this.auth,"internal-error")}}resolve(l){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cw=new ji(2e3,1e4);function w_(p,l,d){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,M.Z)(function*(p,l,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(qt(p,"operation-not-supported-in-this-environment"));const g=yn(p);ft(p,l,Yn);const v=Zi(g,d);return new T_(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function b_(p,l,d){return jf.apply(this,arguments)}function jf(){return(jf=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(qt(g.auth,"operation-not-supported-in-this-environment"));ft(g.auth,l,Yn);const v=Zi(g.auth,d);return new T_(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function it(p,l,d){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ft(g.auth,l,Yn);const v=Zi(g.auth,d);return new T_(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let T_=(()=>{class p extends Bf{constructor(d,g,v,C,H){super(d,g,C,H),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return _e(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){tn(1===d.filter.length,"Popup operations only handle one event");const g=qa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(qt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,cw.get())};d()}}return p.currentPopupAction=null,p})();const uw="pendingRedirect",su=new Map;class lw extends Bf{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=su.get(d.auth._key());if(!g){try{const C=(yield function C_(p,l){return wo.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}su.set(d.auth._key(),g)}return d.bypassAuthState||su.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function wo(){return(wo=(0,M.Z)(function*(p,l){const d=ve(l),g=D_(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function $f(p,l){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,M.Z)(function*(p,l){return D_(p)._set(ve(l),"true")})).apply(this,arguments)}function dw(){su.clear()}function A_(p,l){su.set(p._key(),l)}function D_(p){return xe(p._redirectPersistence)}function ve(p){return xt(uw,p.config.apiKey,p.name)}function Ft(p,l,d){return function S_(p,l,d){return Kl.apply(this,arguments)}(p,l,d)}function Kl(){return(Kl=(0,M.Z)(function*(p,l,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g=yn(p);ft(p,l,Yn),yield g._initializationPromise;const v=Zi(g,d);return yield $f(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function Rr(p,l,d){return function R_(p,l,d){return ra.apply(this,arguments)}(p,l,d)}function ra(){return(ra=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if(ft(g.auth,l,Yn),(0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject($t(g.auth));yield g.auth._initializationPromise;const v=Zi(g.auth,d);yield $f(v,g.auth);const C=yield Ds(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function As(p,l,d){return function zf(p,l,d){return ou.apply(this,arguments)}(p,l,d)}function ou(){return(ou=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ft(g.auth,l,Yn),yield g.auth._initializationPromise;const v=Zi(g.auth,d);yield xl(!1,g,l.providerId),yield $f(v,g.auth);const C=yield Ds(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function hw(p,l){return M_.apply(this,arguments)}function M_(){return(M_=(0,M.Z)(function*(p,l){return yield yn(p)._initializationPromise,Zl(p,l,!1)})).apply(this,arguments)}function Zl(p,l){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,M.Z)(function*(p,l,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject($t(p));const g=yn(p),v=Zi(g,l),H=yield new lw(g,v,d).execute();return H&&!d&&(delete H.user._redirectEventId,yield g._persistUserIfCurrent(H.user),yield g._setRedirectUser(null,l)),H})).apply(this,arguments)}function Ds(p){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,M.Z)(function*(p){const l=qa(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class Ss{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function fw(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!qf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(qt(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(l))}saveEventToCache(l){this.cachedEventUids.add(P_(l)),this.lastProcessedEventTime=Date.now()}}function P_(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function qf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function x_(p){return au.apply(this,arguments)}function au(){return(au=(0,M.Z)(function*(p,l={}){return ce(p,"GET","/v1/projects",l)})).apply(this,arguments)}const Gf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N_=/^https?/;function Kf(){return(Kf=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield x_(p);for(const d of l)try{if(O_(d))return}catch{}wt(p,"unauthorized-domain")})).apply(this,arguments)}function O_(p){const l=An(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const H=new URL(p);return""===H.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&H.hostname===g}if(!N_.test(d))return!1;if(Gf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Zf=new ji(3e4,6e4);function Qf(){const p=Zn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let cu=null;const Yf=new ji(5e3,15e3),pw="__/auth/iframe",gw="emulator/auth/iframe",Xr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ia=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rn(p){const l=p.config;_e(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?re(l,gw):`https://${p.config.authDomain}/${pw}`,g={apiKey:l.apiKey,appName:p.name,v:De.SDK_VERSION},v=ia.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,O.xO)(g).slice(1)}`}function Xf(){return Xf=(0,M.Z)(function*(p){const l=yield function F_(p){return cu=cu||function k_(p){return new Promise((l,d)=>{var g,v,C;function H(){Qf(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Qf(),d(qt(p,"network-request-failed"))},timeout:Zf.get()})}if(null!==(v=null===(g=Zn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=Zn().gapi)||void 0===C||!C.load){const ne=Vm("iframefcb");return Zn()[ne]=()=>{gapi.load?H():d(qt(p,"network-request-failed"))},Lm(`${function JS(){return _l.gapiScript}()}?onload=${ne}`).catch(ye=>d(ye))}H()}}).catch(l=>{throw cu=null,l})}(p),cu}(p),d=Zn().gapi;return _e(d,p,"internal-error"),l.open({where:document.body,url:Rn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xr,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(C,H){yield g.restyle({setHideOnLeave:!1});const ne=qt(p,"network-request-failed"),ye=Zn().setTimeout(()=>{H(ne)},Yf.get());function Ue(){Zn().clearTimeout(ye),C(g)}g.ping(Ue).then(Ue,()=>{H(ne)})});return function(C,H){return v.apply(this,arguments)}}()))}),Xf.apply(this,arguments)}const _w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zs{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Jl="__/auth/handler",ed="emulator/auth/handler",Jf=encodeURIComponent("fac");function td(p,l,d,g,v,C){return nd.apply(this,arguments)}function nd(){return(nd=(0,M.Z)(function*(p,l,d,g,v,C){_e(p.config.authDomain,p,"auth-domain-config-required"),_e(p.config.apiKey,p,"invalid-api-key");const H={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:De.SDK_VERSION,eventId:v};if(l instanceof Yn){l.setDefaultLanguage(p.languageCode),H.providerId=l.providerId||"",(0,O.xb)(l.getCustomParameters())||(H.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ze,Ct]of Object.entries(C||{}))H[Ze]=Ct}if(l instanceof Kr){const Ze=l.getScopes().filter(Ct=>""!==Ct);Ze.length>0&&(H.scopes=Ze.join(","))}p.tenantId&&(H.tid=p.tenantId);const ne=H;for(const Ze of Object.keys(ne))void 0===ne[Ze]&&delete ne[Ze];const ye=yield p._getAppCheckToken(),Ue=ye?`#${Jf}=${encodeURIComponent(ye)}`:"";return`${function Ew({config:p}){return p.emulator?re(p,ed):`https://${p.authDomain}/${Jl}`}(p)}?${(0,O.xO)(ne).slice(1)}${Ue}`})).apply(this,arguments)}const bo="webStorageSupport",U_=class uu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=za,this._completeRedirectFn=Zl,this._overrideRedirectResult=A_}_openPopup(l,d,g,v){var C=this;return(0,M.Z)(function*(){var H;tn(null===(H=C.eventManagers[l._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ne=yield td(l,d,g,An(),v);return function vw(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),H=Math.max((window.screen.availWidth-g)/2,0).toString();let ne="";const ye=Object.assign(Object.assign({},_w),{width:g.toString(),height:v.toString(),top:C,left:H}),Ue=(0,O.z$)().toLowerCase();d&&(ne=Wo(Ue)?"_blank":d),We(Ue)&&(l=l||"http://localhost",ye.scrollbars="yes");const Ze=Object.entries(ye).reduce((Pr,[di,sd])=>`${Pr}${di}=${sd},`,"");if(function P(p=(0,O.z$)()){var l;return Ko(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Ue)&&"_self"!==ne)return function Xl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",ne),new Zs(null);const Ct=window.open(l||"",ne,Ze);_e(Ct,p,"popup-blocked");try{Ct.focus()}catch{}return new Zs(Ct)}(l,ne,qa())})()}_openRedirect(l,d,g,v){var C=this;return(0,M.Z)(function*(){return yield C._originValidation(l),function Rf(p){Zn().location.href=p}(yield td(l,d,g,An(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(tn(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function mw(p){return Xf.apply(this,arguments)}(l),v=new Ss(l);return g.register("authEvent",C=>(_e(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(bo,{type:bo},v=>{var C;const H=null===(C=v?.[0])||void 0===C?void 0:C[bo];void 0!==H&&d(!!H),wt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Wf(p){return Kf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return X()||_r()||Ko()}};class ER{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return fn("unexpected MultiFactorSessionType")}}}class lu extends ER{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new lu(l)}_finalizeEnroll(l,d,g){return function fR(p,l){return ce(p,"POST","/v2/accounts/mfaEnrollment:finalize",me(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function h_(p,l){return ce(p,"POST","/v2/accounts/mfaSignIn:finalize",me(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let IR=(()=>{class p{constructor(){}static assertion(d){return lu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var rd="@firebase/auth";class ww{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function YS(p){_l=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=qt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function Rs(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function np(p){(0,De._registerComponent)(new Tn.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:H,authDomain:ne}=g.options;_e(H&&!H.includes(":"),"invalid-api-key",{appName:g.name});const ye={apiKey:H,authDomain:ne,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ct(p)},Ue=new Zo(g,v,C,ye);return function $I(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(xe);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Ue,d),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new Tn.wA("auth-internal",l=>{const d=yn(l.getProvider("auth").getImmediate());return new ww(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(rd,"1.7.4",function du(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,De.registerVersion)(rd,"1.7.4","esm2017")}("Browser")},58:(Is,or,et)=>{et.d(or,{BH:()=>oi,G6:()=>ji,L:()=>kt,LL:()=>ce,P0:()=>Cn,Pz:()=>qt,Sg:()=>$t,UG:()=>_e,ZB:()=>qe,ZR:()=>me,aH:()=>wt,b$:()=>An,eu:()=>oe,hl:()=>re,jU:()=>fn,m9:()=>Gs,ne:()=>qr,pd:()=>Ci,r3:()=>ur,ru:()=>tn,tV:()=>ge,uI:()=>Ln,vZ:()=>is,w1:()=>Ti,xO:()=>ao,xb:()=>zr,z$:()=>ft,zd:()=>$s});const ze=function(j){const F=[];let T=0;for(let S=0;S<j.length;S++){let w=j.charCodeAt(S);w<128?F[T++]=w:w<2048?(F[T++]=w>>6|192,F[T++]=63&w|128):55296==(64512&w)&&S+1<j.length&&56320==(64512&j.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&j.charCodeAt(++S)),F[T++]=w>>18|240,F[T++]=w>>12&63|128,F[T++]=w>>6&63|128,F[T++]=63&w|128):(F[T++]=w>>12|224,F[T++]=w>>6&63|128,F[T++]=63&w|128)}return F},Tn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,F){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<j.length;w+=3){const k=j[w],he=w+1<j.length,xe=he?j[w+1]:0,je=w+2<j.length,st=je?j[w+2]:0;let Gt=(15&xe)<<2|st>>6,We=63&st;je||(We=64,he||(Gt=64)),S.push(T[k>>2],T[(3&k)<<4|xe>>4],T[Gt],T[We])}return S.join("")},encodeString(j,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(j):this.encodeByteArray(ze(j),F)},decodeString(j,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(j):function(j){const F=[];let T=0,S=0;for(;T<j.length;){const w=j[T++];if(w<128)F[S++]=String.fromCharCode(w);else if(w>191&&w<224){const k=j[T++];F[S++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const je=((7&w)<<18|(63&j[T++])<<12|(63&j[T++])<<6|63&j[T++])-65536;F[S++]=String.fromCharCode(55296+(je>>10)),F[S++]=String.fromCharCode(56320+(1023&je))}else{const k=j[T++],he=j[T++];F[S++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&he)}}return F.join("")}(this.decodeStringToByteArray(j,F))},decodeStringToByteArray(j,F){this.init_();const T=F?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<j.length;){const k=T[j.charAt(w++)],xe=w<j.length?T[j.charAt(w)]:0;++w;const st=w<j.length?T[j.charAt(w)]:64;++w;const Ne=w<j.length?T[j.charAt(w)]:64;if(++w,null==k||null==xe||null==st||null==Ne)throw new zn;S.push(k<<2|xe>>4),64!==st&&(S.push(xe<<4&240|st>>2),64!==Ne&&S.push(st<<6&192|Ne))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class zn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kt=function(j){return function(j){const F=ze(j);return Tn.encodeByteArray(F,!0)}(j).replace(/\./g,"")},ge=function(j){try{return Tn.decodeString(j,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function qe(j,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return F}for(const T in F)!F.hasOwnProperty(T)||!ht(T)||(j[T]=qe(j[T],F[T]));return j}function ht(j){return"__proto__"!==j}const at=()=>{try{return function Bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=j&&ge(j[1]);return F&&JSON.parse(F)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Cn=j=>{const F=(j=>{var F,T;return null===(T=null===(F=at())||void 0===F?void 0:F.emulatorHosts)||void 0===T?void 0:T[j]})(j);if(!F)return;const T=F.lastIndexOf(":");if(T<=0||T+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const S=parseInt(F.substring(T+1),10);return"["===F[0]?[F.substring(1,T-1),S]:[F.substring(0,T),S]},wt=()=>{var j;return null===(j=at())||void 0===j?void 0:j.config},qt=j=>{var F;return null===(F=at())||void 0===F?void 0:F[`_${j}`]};class oi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,T)=>{this.resolve=F,this.reject=T})}wrapCallback(F){return(T,S)=>{T?this.reject(T):this.resolve(S),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(T):F(T,S))}}}function $t(j,F){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=F||"demo-project",w=j.iat||0,k=j.sub||j.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const he=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},j);return[kt(JSON.stringify({alg:"none",type:"JWT"})),kt(JSON.stringify(he)),""].join(".")}function ft(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ln(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function _e(){var j;const F=null===(j=at())||void 0===j?void 0:j.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fn(){return"object"==typeof self&&self.self===self}function tn(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function An(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ti(){const j=ft();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function ji(){return!_e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function re(){try{return"object"==typeof indexedDB}catch{return!1}}function oe(){return new Promise((j,F)=>{try{let T=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),T||self.indexedDB.deleteDatabase(S),j(!0)},w.onupgradeneeded=()=>{T=!1},w.onerror=()=>{var k;F((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(T){F(T)}})}class me extends Error{constructor(F,T,S){super(T),this.code=F,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(F,T,S){this.service=F,this.serviceName=T,this.errors=S}create(F,...T){const S=T[0]||{},w=`${this.service}/${F}`,k=this.errors[F],he=k?function Se(j,F){return j.replace(bt,(T,S)=>{const w=F[S];return null!=w?String(w):`<${S}?>`})}(k,S):"Error";return new me(w,`${this.serviceName}: ${he} (${w}).`,S)}}const bt=/\{\$([^}]+)}/g;function ur(j,F){return Object.prototype.hasOwnProperty.call(j,F)}function zr(j){for(const F in j)if(Object.prototype.hasOwnProperty.call(j,F))return!1;return!0}function is(j,F){if(j===F)return!0;const T=Object.keys(j),S=Object.keys(F);for(const w of T){if(!S.includes(w))return!1;const k=j[w],he=F[w];if(jt(k)&&jt(he)){if(!is(k,he))return!1}else if(k!==he)return!1}for(const w of S)if(!T.includes(w))return!1;return!0}function jt(j){return null!==j&&"object"==typeof j}function ao(j){const F=[];for(const[T,S]of Object.entries(j))Array.isArray(S)?S.forEach(w=>{F.push(encodeURIComponent(T)+"="+encodeURIComponent(w))}):F.push(encodeURIComponent(T)+"="+encodeURIComponent(S));return F.length?"&"+F.join("&"):""}function $s(j){const F={};return j.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,k]=S.split("=");F[decodeURIComponent(w)]=decodeURIComponent(k)}}),F}function Ci(j){const F=j.indexOf("?");if(!F)return"";const T=j.indexOf("#",F);return j.substring(F,T>0?T:void 0)}function qr(j,F){const T=new Gr(j,F);return T.subscribe.bind(T)}class Gr{constructor(F,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then(()=>{F(this)}).catch(S=>{this.error(S)})}next(F){this.forEachObserver(T=>{T.next(F)})}error(F){this.forEachObserver(T=>{T.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,T,S){let w;if(void 0===F&&void 0===T&&void 0===S)throw new Error("Missing Observer.");w=function Wr(j,F){if("object"!=typeof j||null===j)return!1;for(const T of F)if(T in j&&"function"==typeof j[T])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:T,complete:S},void 0===w.next&&(w.next=un),void 0===w.error&&(w.error=un),void 0===w.complete&&(w.complete=un);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,F)}sendOne(F,T){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{T(this.observers[F])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function un(){}function Gs(j){return j&&j._delegate?j._delegate:j}},440:(Is,or,et)=>{function M(n){return"function"==typeof n}function De(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=De(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ze(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ut{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{cn(s)}catch(o){e=e??[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cn(e);else{if(e instanceof Ut){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ze(t,e)}remove(e){const{_finalizers:t}=this;t&&ze(t,e),e instanceof Ut&&e._removeParent(this)}}Ut.EMPTY=(()=>{const n=new Ut;return n.closed=!0,n})();const Tn=Ut.EMPTY;function zn(n){return n instanceof Ut||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function cn(n){M(n)?n():n.unsubscribe()}const kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ge={setTimeout(n,e,...t){const{delegate:r}=ge;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ge;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Te(n){ge.setTimeout(()=>{const{onUnhandledError:e}=kt;if(!e)throw n;e(n)})}function qe(){}const ht=Dt("C",void 0,void 0);function Dt(n,e,t){return{kind:n,value:e,error:t}}let ot=null;function at(n){if(kt.useDeprecatedSynchronousErrorHandling){const e=!ot;if(e&&(ot={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ot;if(ot=null,t)throw r}}else n()}class Cn extends Ut{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zn(e)&&e.add(this)):this.destination=fn}static create(e,t,r){return new $t(e,t,r)}next(e){this.isStopped?_e(function ar(n){return Dt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?_e(function Bt(n){return Dt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_e(ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wt=Function.prototype.bind;function qt(n,e){return wt.call(n,e)}class oi{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ft(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ft(r)}else ft(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ft(t)}}}class $t extends Cn{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&kt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qt(e.next,s),error:e.error&&qt(e.error,s),complete:e.complete&&qt(e.complete,s)}):i=e}this.destination=new oi(i)}}function ft(n){kt.useDeprecatedSynchronousErrorHandling?function gr(n){kt.useDeprecatedSynchronousErrorHandling&&ot&&(ot.errorThrown=!0,ot.error=n)}(n):Te(n)}function _e(n,e){const{onStoppedNotification:t}=kt;t&&ge.setTimeout(()=>t(n,e))}const fn={closed:!0,next:qe,error:function Ln(n){throw n},complete:qe},tn="function"==typeof Symbol&&Symbol.observable||"@@observable";function An(n){return n}function Ti(n){return 0===n.length?An:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let pt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function re(n){return n&&n instanceof Cn||function ji(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&zn(n)}(t)?t:new $t(t,r,i);return at(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Bs(r))((i,s)=>{const o=new $t({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[tn](){return this}pipe(...t){return Ti(t)(this)}toPromise(t){return new(t=Bs(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Bs(n){var e;return null!==(e=n??kt.Promise)&&void 0!==e?e:Promise}const oe=De(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ue=(()=>{class n extends pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new de(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oe}next(t){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Tn:(this.currentObservers=null,s.push(t),new Ut(()=>{this.currentObservers=null,ze(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new pt;return t.source=this,t}}return n.create=(e,t)=>new de(e,t),n})();class de extends ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Tn}}function me(n){return M(n?.lift)}function ce(n){return e=>{if(me(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,e,t,r,i){return new bt(n,e,t,r,i)}class bt extends Cn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Re(n,e){return ce((t,r)=>{let i=0;t.subscribe(Se(r,s=>{r.next(n.call(e,s,i++))}))})}var $e=et(582);const Pt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function pn(n){return M(n?.then)}function nn(n){return M(n[tn])}function cr(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Vn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Dr=function ur(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zr(n){return M(n?.[Dr])}function js(n){return(0,$e.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,$e.qq)(t.read());if(i)return yield(0,$e.qq)(void 0);yield yield(0,$e.qq)(r)}}finally{t.releaseLock()}})}function is(n){return M(n?.getReader)}function jt(n){if(n instanceof pt)return n;if(null!=n){if(nn(n))return function $i(n){return new pt(e=>{const t=n[tn]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Pt(n))return function ao(n){return new pt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(pn(n))return function $s(n){return new pt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Te)})}(n);if(cr(n))return ss(n);if(zr(n))return function Ci(n){return new pt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(is(n))return function qr(n){return ss(js(n))}(n)}throw Vn(n)}function ss(n){return new pt(e=>{(function Gr(n,e){var t,r,i,s;return(0,$e.mG)(this,void 0,void 0,function*(){try{for(t=(0,$e.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Dn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function un(n,e,t=1/0){return M(e)?un((r,i)=>Re((s,o)=>e(r,s,i,o))(jt(n(r,i))),t):("number"==typeof e&&(t=e),ce((r,i)=>function Wr(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=R=>u<r?b(R):c.push(R),b=R=>{s&&e.next(R),u++;let x=!1;jt(t(R,f++)).subscribe(Se(e,z=>{i?.(z),s?I(z):e.next(z)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){const z=c.shift();o?Dn(e,o,()=>b(z)):b(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(Se(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Vr(n=1/0){return un(An,n)}const qn=new pt(n=>n.complete());function Hi(n){return n[n.length-1]}function zs(n){return M(Hi(n))?n.pop():void 0}function Gn(n){return function rn(n){return n&&M(n.schedule)}(Hi(n))?n.pop():void 0}function Sn(n,e=0){return ce((t,r)=>{t.subscribe(Se(r,i=>Dn(r,n,()=>r.next(i),e),()=>Dn(r,n,()=>r.complete(),e),i=>Dn(r,n,()=>r.error(i),e)))})}function Ur(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Gs(n,e){if(!n)throw new Error("Iterable cannot be null");return new pt(t=>{Dn(t,e,()=>{const r=n[Symbol.asyncIterator]();Dn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T(n,e){return e?function F(n,e){if(null!=n){if(nn(n))return function qs(n,e){return jt(n).pipe(Ur(e),Sn(e))}(n,e);if(Pt(n))return function lo(n,e){return new pt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(pn(n))return function uo(n,e){return jt(n).pipe(Ur(e),Sn(e))}(n,e);if(cr(n))return Gs(n,e);if(zr(n))return function ho(n,e){return new pt(t=>{let r;return Dn(t,e,()=>{r=n[Dr](),Dn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if(is(n))return function j(n,e){return Gs(js(n),e)}(n,e)}throw Vn(n)}(n,e):jt(n)}function S(...n){const e=Gn(n),t=function mr(n,e){return"number"==typeof Hi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?jt(r[0]):Vr(t)(T(r,e)):qn}class w extends ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return T(n,Gn(n))}function he(n={}){const{connector:e=(()=>new ue),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},b=()=>{const R=o;I(),R?.unsubscribe()};return ce((R,x)=>{u++,!m&&!f&&y();const z=c=c??e();x.add(()=>{u--,0===u&&!m&&!f&&(a=xe(b,i))}),z.subscribe(x),!o&&u>0&&(o=new $t({next:V=>z.next(V),error:V=>{m=!0,y(),a=xe(I,t,V),z.error(V)},complete:()=>{f=!0,y(),a=xe(I,r),z.complete()}}),jt(R).subscribe(o))})(s)}}function xe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new $t({next:()=>{r.unsubscribe(),n()}});return jt(e(...t)).subscribe(r)}function je(n,e){return ce((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Se(r,c=>{i?.unsubscribe();let u=0;const f=s++;jt(n(c,f)).subscribe(i=Se(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function st(n,e=An){return n=n??xt,ce((t,r)=>{let i,s=!0;t.subscribe(Se(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function xt(n,e){return n===e}function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function Gt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function We(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(We).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function _r(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Wo=Ne({__forward_ref__:Ne});function Kt(n){return n.__forward_ref__=Kt,n.toString=function(){return We(this())},n}function tt(n){return Oa(n)?n():n}function Oa(n){return"function"==typeof n&&n.hasOwnProperty(Wo)&&n.__forward_ref__===Kt}function ka(n){return n&&!!n.\u0275providers}const ml="https://g.co/ng/security#xss";class P extends Error{constructor(e,t){super(function K(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function X(n){return"string"==typeof n?n:null==n?"":String(n)}function Yt(n,e){throw new P(-201,!1)}function qi(n,e){null==n&&function rt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xt(n){return{providers:n.providers||[],imports:n.imports||[]}}function vl(n){return tf(n,Gc)||tf(n,Qo)}function tf(n,e){return n.hasOwnProperty(e)?n[e]:null}function El(n){return n&&(n.hasOwnProperty(nf)||n.hasOwnProperty(jm))?n[nf]:null}const Gc=Ne({\u0275prov:Ne}),nf=Ne({\u0275inj:Ne}),Qo=Ne({ngInjectableDef:Ne}),jm=Ne({ngInjectorDef:Ne});var It=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(It||{});let rf;function ai(n){const e=rf;return rf=n,e}function wl(n,e,t){const r=vl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&It.Optional?null:void 0!==e?e:void Yt(We(n))}const Jt=globalThis;class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Kc={},Zc="__NG_DI_FLAG__",po="ngTempTokenPath",lf=/\n/gm,os="__source";let Fa;function go(n){const e=Fa;return Fa=n,e}function hf(n,e=It.Default){if(void 0===Fa)throw new P(-203,!1);return null===Fa?wl(n,void 0,e):Fa.get(n,e&It.Optional?null:void 0,e)}function fe(n,e=It.Default){return(function Il(){return rf}()||hf)(tt(n),e)}function Ve(n,e=It.Default){return fe(n,Cl(e))}function Cl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qc(n){const e=[];for(let t=0;t<n.length;t++){const r=tt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new P(900,!1);let i,s=It.Default;for(let o=0;o<r.length;o++){const a=r[o],c=zI(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(fe(i,s))}else e.push(fe(r))}return e}function as(n,e){return n[Zc]=e,n.prototype[Zc]=e,n}function zI(n){return n[Zc]}function mo(n){return{toString:n}.toString()}var La=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(La||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{});const Kr={},Rt=[],Al=Ne({\u0275cmp:Ne}),ff=Ne({\u0275dir:Ne}),pf=Ne({\u0275pipe:Ne}),Gm=Ne({\u0275mod:Ne}),ci=Ne({\u0275fac:Ne}),Xc=Ne({__NG_ELEMENT_ID__:Ne}),Jc=Ne({__NG_ENV_ID__:Ne});function Wm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Dl(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ai(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Sl(n){return 3===n||4===n||6===n}function Ai(n){return 64===n.charCodeAt(0)}function Va(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Km(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Km(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Rl="ng-template";function Ml(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Wm(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function gf(n){return 4===n.type&&n.value!==Rl}function Zm(n,e,t){return e===(4!==n.type||t?n.value:Rl)}function GI(n,e,t){let r=4;const i=n.attrs||[],s=function _f(n){for(let e=0;e<n.length;e++)if(Sl(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Zm(n,c,t)||""===c&&1===e.length){if(Di(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!Ml(n.attrs,u,t)){if(Di(r))return!1;o=!0}continue}const m=mf(8&r?"class":c,i,gf(n),t);if(-1===m){if(Di(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==Wm(I,u,0)||2&r&&u!==y){if(Di(r))return!1;o=!0}}}}else{if(!o&&!Di(r)&&!Di(c))return!1;if(o&&Di(c))continue;o=!1,r=c|1&r}}return Di(r)||o}function Di(n){return 0==(1&n)}function mf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Qm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Pl(n,e,t=!1){for(let r=0;r<e.length;r++)if(GI(n,e[r],t))return!0;return!1}function vf(n,e){return n?":not("+e.trim()+")":e}function Ef(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Di(o)&&(e+=vf(s,i),i=""),r=o,s=s||!Di(r);t++}return""!==i&&(e+=vf(s,i)),e}function yr(n){return mo(()=>{const e=Jm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===La.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||Rt,_:null,schemas:n.schemas||null,tView:null,id:""};Ol(t);const r=n.dependencies;return t.directiveDefs=kl(r,!1),t.pipeDefs=kl(r,!0),t.id=function WI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Ym(n){return Mt(n)||lr(n)}function bf(n){return null!==n}function gn(n){return mo(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Xm(n,e){if(null==n)return Kr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ge(n){return mo(()=>{const e=Jm(n);return Ol(e),e})}function Mt(n){return n[Al]||null}function lr(n){return n[ff]||null}function Er(n){return n[pf]||null}function Zr(n,e){const t=n[Gm]||null;if(!t&&!0===e)throw new Error(`Type ${We(n)} does not have '\u0275mod' property.`);return t}function Jm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Kr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xm(n.inputs,e),outputs:Xm(n.outputs)}}function Ol(n){n.features?.forEach(e=>e(n))}function kl(n,e){if(!n)return null;const t=e?Er:Ym;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(bf)}const vn=0,Fe=1,ut=2,En=3,Si=4,eu=5,Ir=6,Ua=7,Wn=8,ws=9,Ba=10,lt=11,Yo=12,e_=13,yo=14,Kn=15,Xo=16,ja=17,Gi=18,tu=19,Fl=20,vo=21,cs=22,nu=23,Jo=24,Tt=25,Ll=1,Vl=2,bs=7,ea=9,Sr=11;function ui(n){return Array.isArray(n)&&"object"==typeof n[Ll]}function Qr(n){return Array.isArray(n)&&!0===n[Ll]}function t_(n){return 0!=(4&n.flags)}function $a(n){return n.componentOffset>-1}function Af(n){return 1==(1&n.flags)}function Ri(n){return!!n.template}function Df(n){return 0!=(512&n[ut])}function ta(n,e){return n.hasOwnProperty(ci)?n[ci]:null}let Br=null,za=!1;function Wi(n){const e=Br;return Br=n,e}const o_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function a_(n){if(!Io(n)||n.dirty){if(!n.producerMustRecompute(n)&&!c_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Bl(n){n.dirty=!0,function Zn(n){if(void 0===n.liveConsumerNode)return;const e=za;za=!0;try{for(const t of n.liveConsumerNode)t.dirty||Bl(t)}finally{za=e}}(n),n.consumerMarkedDirty?.(n)}function Mf(n){return n&&(n.nextProducerIndex=0),Wi(n)}function iu(n,e){if(Wi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Io(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function c_(n){na(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(a_(t),r!==t.version))return!0}return!1}function u_(n){if(na(n),Io(n))for(let e=0;e<n.producerNode.length;e++)jl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jl(n,e){if(function Ga(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),na(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)jl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];na(i),i.producerIndexOfThis[r]=e}}function Io(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function na(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let $l=null;const g_=()=>{},kf=(()=>({...o_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:g_}))();class rw{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ki(){return m_}function m_(n){return n.type.prototype.ngOnChanges&&(n.setInput=iw),__}function __(){const n=v_(this),e=n?.current;if(e){const t=n.previous;if(t===Kr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function iw(n,e,t,r){const i=this.declaredInputs[t],s=v_(n)||function Ff(n,e){return n[y_]=e}(n,{previous:Kr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new rw(c&&c.currentValue,e,a===Kr),n[r]=e}Ki.ngInherit=!0;const y_="__ngSimpleChanges__";function v_(n){return n[y_]||null}const Ts=function(n,e,t){};function en(n){for(;Array.isArray(n);)n=n[vn];return n}function Ka(n,e){return en(e[n])}function li(n,e){return en(e[n.index])}function I_(n,e){return n.data[e]}function Yr(n,e){const t=e[n];return ui(t)?t:t[vn]}function Cs(n,e){return null==e?null:n[e]}function Bf(n){n[ja]=0}function cw(n){1024&n[ut]||(n[ut]|=1024,Gl(n,1))}function w_(n){1024&n[ut]&&(n[ut]&=-1025,Gl(n,-1))}function Gl(n,e){let t=n[En];if(null===t)return;t[eu]+=e;let r=t;for(t=t[En];null!==t&&(1===e&&1===r[eu]||-1===e&&0===r[eu]);)t[eu]+=e,r=t,t=t[En]}const it={lFrame:k_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function C_(){return it.bindingsEnabled}function ve(){return it.lFrame.lView}function Ft(){return it.lFrame.tView}function Rr(){let n=R_();for(;null!==n&&64===n.type;)n=n.parent;return n}function R_(){return it.lFrame.currentTNode}function As(n,e){const t=it.lFrame;t.currentTNode=n,t.isParent=e}function zf(){return it.lFrame.isParent}function Mr(){const n=it.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Za(){return it.lFrame.bindingIndex++}function fw(n,e){const t=it.lFrame;t.bindingIndex=t.bindingRootIndex=n,au(e)}function au(n){it.lFrame.currentDirectiveIndex=n}function Wf(n){it.lFrame.currentQueryIndex=n}function Kf(n){const e=n[Fe];return 2===e.type?e.declTNode:1===e.type?n[Ir]:null}function O_(n,e,t){if(t&It.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&It.Host||(i=Kf(s),null===i||(s=s[yo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=it.lFrame=Qf();return r.currentTNode=e,r.lView=n,!0}function Zf(n){const e=Qf(),t=n[Fe];it.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qf(){const n=it.lFrame,e=null===n?null:n.child;return null===e?k_(n):e}function k_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function cu(){const n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const F_=cu;function Yf(){const n=cu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xr(){return it.lFrame.selectedIndex}function ia(n){it.lFrame.selectedIndex=n}function Rn(){const n=it.lFrame;return I_(n.tView,n.selectedIndex)}let V_=!0;function Yl(){return V_}function Zs(n){V_=n}function Xl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Jl(n,e,t){td(n,e,3,t)}function ed(n,e,t,r){(3&n[ut])===t&&td(n,e,t,r)}function Jf(n,e){let t=n[ut];(3&t)===e&&(t&=8191,t+=1,n[ut]=t)}function td(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[ja]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[ja]+=65536),(a<s||-1==s)&&(Ew(n,t,e,c),n[ja]=(4294901760&n[ja])+c+2),c++}function nd(n,e){Ts(4,n,e);const t=Wi(null);try{e.call(n)}finally{Wi(t),Ts(5,n,e)}}function Ew(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ut]>>13<n[ja]>>16&&(3&n[ut])===e&&(n[ut]+=8192,nd(a,s)):nd(a,s)}const bo=-1;class uu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function rd(n){return n!==bo}function Qa(n){return 32767&n}function du(n,e){let t=function ww(n){return n>>16}(n),r=e;for(;t>0;)r=r[yo],t--;return r}let np=!0;function id(n){const e=np;return np=n,e}const rp=255,B_=5;let TR=0;const Rs={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Fe];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(rd(i)){const o=Qa(i),a=du(i,e),c=a[Fe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=z_(i),null===r)return bo;if(t++,i=i[yo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return bo}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xc)&&(r=t[Xc]),null==r&&(r=t[Xc]=TR++);const i=r&rp;e.data[n+(i>>B_)]|=1<<i}(n,e,t)}function ne(n,e,t){if(t&It.Optional||void 0!==n)return n;Yt()}function ye(n,e,t,r){if(t&It.Optional&&void 0===r&&(r=null),!(t&(It.Self|It.Host))){const i=n[ws],s=ai(void 0);try{return i?i.get(e,r,t&It.Optional):wl(e,r,t&It.Optional)}finally{ai(s)}}return ne(r,0,t)}function Ue(n,e,t,r=It.Default,i){if(null!==n){if(2048&e[ut]&&!(r&It.Self)){const o=function H_(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ut]&&!(512&o[ut]);){const a=Ze(s,o,t,r|It.Self,Rs);if(a!==Rs)return a;let c=s.parent;if(!c){const u=o[Fl];if(u){const f=u.get(t,Rs,r);if(f!==Rs)return f}c=z_(o),o=o[yo]}s=c}return i}(n,e,t,r,Rs);if(o!==Rs)return o}const s=Ze(n,e,t,r,Rs);if(s!==Rs)return s}return ye(e,t,r,i)}function Ze(n,e,t,r,i){const s=function sd(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xc)?n[Xc]:void 0;return"number"==typeof e?e>=0?e&rp:$_:e}(t);if("function"==typeof s){if(!O_(e,n,r))return r&It.Host?ne(i,0,r):ye(e,t,r,i);try{let o;if(o=s(r),null!=o||r&It.Optional)return o;Yt()}finally{F_()}}else if("number"==typeof s){let o=null,a=g(n,e),c=bo,u=r&It.Host?e[Kn][Ir]:null;for((-1===a||r&It.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==bo&&od(r,!1)?(o=e[Fe],a=Qa(c),e=du(c,e)):a=-1);-1!==a;){const f=e[Fe];if(ip(s,a,f.data)){const m=Ct(a,e,t,o,r,u);if(m!==Rs)return m}c=e[a+8],c!==bo&&od(r,e[Fe].data[a+8]===u)&&ip(s,a,e)?(o=f,a=Qa(c),e=du(c,e)):a=-1}}return i}function Ct(n,e,t,r,i,s){const o=e[Fe],a=o.data[n+8],f=function Pr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const b=o[I];if(I<c&&t===b||I>=c&&b.type===t)return I}if(i){const I=o[c];if(I&&Ri(I)&&I.type===t)return c}return null}(a,o,t,null==r?$a(a)&&np:r!=o&&0!=(3&a.type),i&It.Host&&s===a);return null!==f?di(e,o,f,a):Rs}function di(n,e,t,r){let i=n[t];const s=e.data;if(function U_(n){return n instanceof uu}(i)){const o=i;o.resolving&&function ct(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new P(-200,`Circular dependency in DI detected for ${n}${t}`)}(function we(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():X(n)}(s[t]));const a=id(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ai(o.injectImpl):null;O_(n,r,It.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function vw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=m_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&ai(u),id(a),o.resolving=!1,F_()}}return i}function ip(n,e,t){return!!(t[e+(n>>B_)]&1<<n)}function od(n,e){return!(n&It.Self||n&It.Host&&e)}class xr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ue(this._tNode,this._lView,e,Cl(r),t)}}function $_(){return new xr(Rr(),ve())}function wr(n){return mo(()=>{const e=n.prototype.constructor,t=e[ci]||hu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ci]||hu(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hu(n){return Oa(n)?()=>{const e=hu(tt(n));return e&&e()}:ta(n)}function z_(n){const e=n[Fe],t=e.type;return 2===t?e.declTNode:1===t?n[Ir]:null}const ad="__parameters__";function ud(n,e,t){return mo(()=>{const r=function bw(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(ad)?c[ad]:Object.defineProperty(c,ad,{value:[]})[ad];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function dd(n,e){n.forEach(t=>Array.isArray(t)?dd(t,e):e(t))}function AR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function q_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function us(n,e,t){let r=hd(n,e);return r>=0?n[1|r]=t:(r=~r,function qH(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Tw(n,e){const t=hd(n,e);if(t>=0)return n[1|t]}function hd(n,e){return function DR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const br=as(ud("Optional"),8),ap=as(ud("SkipSelf"),4);function Y_(n){return 128==(128&n.flags)}var ec=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ec||{});const Rw=new Map;let gz=0;const Pw="__ngContext__";function hi(n,e){ui(e)?(n[Pw]=e[tu],function _z(n){Rw.set(n[tu],n)}(e)):n[Pw]=e}let xw;function Nw(n,e){return xw(n,e)}function lp(n){const e=n[En];return Qr(e)?e[En]:e}function WR(n){return ZR(n[Yo])}function KR(n){return ZR(n[Si])}function ZR(n){for(;null!==n&&!Qr(n);)n=n[Si];return n}function gd(n,e,t,r,i){if(null!=r){let s,o=!1;Qr(r)?s=r:ui(r)&&(o=!0,r=r[vn]);const a=en(r);0===n&&null!==t?null==i?JR(e,t,a):fu(e,t,a,i||null,!0):1===n&&null!==t?fu(e,t,a,i||null,!0):2===n?function iy(n,e,t){const r=ny(n,e);r&&function Fz(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Uz(n,e,t,r,i){const s=t[bs];s!==en(t)&&gd(e,n,r,s,i);for(let a=Sr;a<t.length;a++){const c=t[a];hp(c[Fe],c,n,e,r,s)}}(e,n,s,t,i)}}function ey(n,e,t){return n.createElement(e,t)}function YR(n,e){const t=n[ea],r=t.indexOf(e);w_(e),t.splice(r,1)}function ty(n,e){if(n.length<=Sr)return;const t=Sr+e,r=n[t];if(r){const i=r[Xo];null!==i&&i!==n&&YR(i,r),e>0&&(n[t-1][Si]=r[Si]);const s=q_(n,Sr+e);!function Sz(n,e){hp(n,e,e[lt],2,null,null),e[vn]=null,e[Ir]=null}(r[Fe],r);const o=s[Gi];null!==o&&o.detachView(s[Fe]),r[En]=null,r[Si]=null,r[ut]&=-129}return r}function kw(n,e){if(!(256&e[ut])){const t=e[lt];e[nu]&&u_(e[nu]),e[Jo]&&u_(e[Jo]),t.destroyNode&&hp(n,e,t,3,null,null),function Pz(n){let e=n[Yo];if(!e)return Fw(n[Fe],n);for(;e;){let t=null;if(ui(e))t=e[Yo];else{const r=e[Sr];r&&(t=r)}if(!t){for(;e&&!e[Si]&&e!==n;)ui(e)&&Fw(e[Fe],e),e=e[En];null===e&&(e=n),ui(e)&&Fw(e[Fe],e),t=e&&e[Si]}e=t}}(e)}}function Fw(n,e){if(!(256&e[ut])){e[ut]&=-129,e[ut]|=256,function kz(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof uu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Ts(4,a,c);try{c.call(a)}finally{Ts(5,a,c)}}else{Ts(4,i,s);try{s.call(i)}finally{Ts(5,i,s)}}}}}(n,e),function Oz(n,e){const t=n.cleanup,r=e[Ua];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ua]=null);const i=e[vo];if(null!==i){e[vo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Fe].type&&e[lt].destroy();const t=e[Xo];if(null!==t&&Qr(e[En])){t!==e[En]&&YR(t,e);const r=e[Gi];null!==r&&r.detachView(n)}!function yz(n){Rw.delete(n[tu])}(e)}}function Lw(n,e,t){return function XR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[vn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Yn.None||s===Yn.Emulated)return null}return li(r,t)}}(n,e.parent,t)}function fu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JR(n,e,t){n.appendChild(e,t)}function eM(n,e,t,r,i){null!==r?fu(n,e,t,r,i):JR(n,e,t)}function ny(n,e){return n.parentNode(e)}let Vw,$w,oy,rM=function nM(n,e,t){return 40&n.type?li(n,t):null};function ry(n,e,t,r){const i=Lw(n,r,e),s=e[lt],a=function tM(n,e,t){return rM(n,e,t)}(r.parent||e[Ir],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)eM(s,i,t[c],a,!1);else eM(s,i,t,a,!1);void 0!==Vw&&Vw(s,r,e,t,i)}function dp(n,e){if(null!==e){const t=e.type;if(3&t)return li(e,n);if(4&t)return Uw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return dp(n,r);{const i=n[e.index];return Qr(i)?Uw(-1,i):en(i)}}if(32&t)return Nw(e,n)()||en(n[e.index]);{const r=sM(n,e);return null!==r?Array.isArray(r)?r[0]:dp(lp(n[Kn]),r):dp(n,e.next)}}return null}function sM(n,e){return null!==e?n[Kn][Ir].projection[e.projection]:null}function Uw(n,e){const t=Sr+n+1;if(t<e.length){const r=e[t],i=r[Fe].firstChild;if(null!==i)return dp(r,i)}return e[bs]}function Bw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&hi(en(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)Bw(n,e,t.child,r,i,s,!1),gd(e,n,i,a,s);else if(32&c){const u=Nw(t,r);let f;for(;f=u();)gd(e,n,i,f,s);gd(e,n,i,a,s)}else 16&c?aM(n,e,r,t,i,s):gd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function hp(n,e,t,r,i,s){Bw(t,r,n.firstChild,e,i,s,!1)}function aM(n,e,t,r,i,s){const o=t[Kn],c=o[Ir].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)gd(e,n,i,c[u],s);else{let u=c;const f=o[En];Y_(r)&&(u.flags|=128),Bw(n,e,u,f,i,s,!0)}}function cM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function uM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Dl(n,e,r),null!==i&&cM(n,e,i),null!==s&&function jz(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function hM(n){return function Hw(){if(void 0===oy&&(oy=null,Jt.trustedTypes))try{oy=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return oy}()?.createScriptURL(n)||n}class pu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ml})`}}function ls(n){return n instanceof pu?n.changingThisBreaksApplicationSecurity:n}function To(n,e){const t=function Yz(n){return n instanceof pu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ml})`)}return t===e}const a3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Jr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Jr||{});function ds(n){const e=pp();return e?e.sanitize(Jr.URL,n)||"":To(n,"URL")?ls(n):function ay(n){return(n=String(n)).match(a3)?n:"unsafe:"+n}(X(n))}function EM(n){const e=pp();if(e)return hM(e.sanitize(Jr.RESOURCE_URL,n)||"");if(To(n,"ResourceURL"))return hM(ls(n));throw new P(904,!1)}function pp(){const n=ve();return n&&n[Ba].sanitizer}const gp=new Ee("ENVIRONMENT_INITIALIZER"),wM=new Ee("INJECTOR",-1),bM=new Ee("INJECTOR_DEF_TYPES");class Ww{get(e,t=Kc){if(t===Kc){const r=new Error(`NullInjectorError: No provider for ${We(e)}!`);throw r.name="NullInjectorError",r}return t}}function v3(...n){return{\u0275providers:CM(0,n),\u0275fromNgModule:!0}}function CM(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return dd(e,o=>{const a=o;uy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&AM(i,s),t}function AM(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Kw(i,s=>{e(s,r)})}}function uy(n,e,t,r){if(!(n=tt(n)))return!1;let i=null,s=El(n);const o=!s&&Mt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=El(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)uy(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{dd(s.imports,f=>{uy(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&AM(u,e)}if(!a){const u=ta(i)||(()=>new i);e({provide:i,useFactory:u,deps:Rt},i),e({provide:bM,useValue:i,multi:!0},i),e({provide:gp,useValue:()=>fe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;Kw(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function Kw(n,e){for(let t of n)ka(t)&&(t=t.\u0275providers),Array.isArray(t)?Kw(t,e):e(t)}const E3=Ne({provide:String,useValue:Ne});function Zw(n){return null!==n&&"object"==typeof n&&E3 in n}function gu(n){return"function"==typeof n}const Qw=new Ee("Set Injector scope."),ly={},w3={};let Yw;function dy(){return void 0===Yw&&(Yw=new Ww),Yw}class Ps{}class yd extends Ps{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jw(e,o=>this.processProvider(o)),this.records.set(wM,vd(void 0,this)),i.has("environment")&&this.records.set(Ps,vd(void 0,this));const s=this.records.get(Qw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bM.multi,Rt,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=go(this),r=ai(void 0);try{return e()}finally{go(t),ai(r)}}get(e,t=Kc,r=It.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jc))return e[Jc](this);r=Cl(r);const s=go(this),o=ai(void 0);try{if(!(r&It.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function D3(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&vl(e);c=u&&this.injectableDefInScope(u)?vd(Xw(e),ly):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&It.Self?dy():this.parent).get(e,t=r&It.Optional&&t===Kc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[po]=a[po]||[]).unshift(We(e)),s)throw a;return function qI(n,e,t,r){const i=n[po];throw e[os]&&i.unshift(e[os]),n.message=function Yc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=We(e);if(Array.isArray(e))i=e.map(We).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):We(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(lf,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[po]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ai(o),go(s)}}resolveInjectorInitializers(){const e=go(this),t=ai(void 0);try{const i=this.get(gp.multi,Rt,It.Self);for(const s of i)s()}finally{go(e),ai(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(We(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let t=gu(e=tt(e))?e:tt(e&&e.provide);const r=function T3(n){return Zw(n)?vd(void 0,n.useValue):vd(RM(n),ly)}(e);if(gu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=vd(void 0,ly,!0),i.factory=()=>Qc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ly&&(t.value=w3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function A3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=tt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Xw(n){const e=vl(n),t=null!==e?e.factory:ta(n);if(null!==t)return t;if(n instanceof Ee)throw new P(204,!1);if(n instanceof Function)return function b3(n){const e=n.length;if(e>0)throw function op(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new P(204,!1);const t=function Bm(n){return n&&(n[Gc]||n[Qo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new P(204,!1)}function RM(n,e,t){let r;if(gu(n)){const i=tt(n);return ta(i)||Xw(i)}if(Zw(n))r=()=>tt(n.useValue);else if(function SM(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Qc(n.deps||[]));else if(function DM(n){return!(!n||!n.useExisting)}(n))r=()=>fe(tt(n.useExisting));else{const i=tt(n&&(n.useClass||n.provide));if(!function C3(n){return!!n.deps}(n))return ta(i)||Xw(i);r=()=>new i(...Qc(n.deps))}return r}function vd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Jw(n,e){for(const t of n)Array.isArray(t)?Jw(t,e):t&&ka(t)?Jw(t.\u0275providers,e):e(t)}const hy=new Ee("AppId",{providedIn:"root",factory:()=>S3}),S3="ng",MM=new Ee("Platform Initializer"),xs=new Ee("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PM=new Ee("AnimationModuleType"),eb=new Ee("CSP nonce",{providedIn:"root",factory:()=>function _d(){if(void 0!==$w)return $w;if(typeof document<"u")return document;throw new P(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xM=(n,e,t)=>null;function cb(n,e,t=!1){return xM(n,e,t)}class V3{}class kM{}class B3{resolveComponentFactory(e){throw function U3(n){const e=Error(`No component factory found for ${We(n)}.`);return e.ngComponent=n,e}(e)}}let yy=(()=>{class n{static#e=this.NULL=new B3}return n})();function j3(){return wd(Rr(),ve())}function wd(n,e){return new Yi(li(n,e))}let Yi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=j3}return n})();class yp{}let oa=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function H3(){const n=ve(),t=Yr(Rr().index,n);return(ui(t)?t:n)[lt]}()}return n})(),z3=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}return n})();class tc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const db=new tc("16.2.12"),hb={};function BM(n,e=null,t=null,r){const i=jM(n,e,t,r);return i.resolveInjectorInitializers(),i}function jM(n,e=null,t=null,r,i=new Set){const s=[t||Rt,v3(n)];return r=r||("object"==typeof n?void 0:We(n)),new yd(s,e||dy(),r||null,i)}let ei=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Kc;static#t=this.NULL=new Ww;static create(t,r){if(Array.isArray(t))return BM({name:""},r,t,"");{const i=t.name??"";return BM({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>fe(wM)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function pb(n){return n.ngOriginalError}class Qs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pb(e);for(;t&&pb(t);)t=pb(t);return t||null}}function mb(n){return e=>{setTimeout(n,void 0,e)}}const Xn=class Y3 extends ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=mb(s),i&&(i=mb(i)),o&&(o=mb(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ut&&e.add(a),a}};function HM(...n){}class Nt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xn(!1),this.onMicrotaskEmpty=new Xn(!1),this.onStable=new Xn(!1),this.onError=new Xn(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function X3(){const n="function"==typeof Jt.requestAnimationFrame;let e=Jt[n?"requestAnimationFrame":"setTimeout"],t=Jt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function t4(n){const e=()=>{!function e4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,yb(n),n.isCheckStableRunning=!0,_b(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),yb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function r4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return zM(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),qM(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return zM(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),qM(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,yb(n),_b(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nt.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(Nt.isInAngularZone())throw new P(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,J3,HM,HM);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const J3={};function _b(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function zM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qM(n){n._nesting--,_b(n)}class n4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xn,this.onMicrotaskEmpty=new Xn,this.onStable=new Xn,this.onError=new Xn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const GM=new Ee("",{providedIn:"root",factory:WM});function WM(){const n=Ve(Nt);let e=!0;return S(new pt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new pt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Nt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(he()))}function aa(n){return n instanceof Function?n():n}let vb=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function vp(n){for(;n;){n[ut]|=64;const e=lp(n);if(Df(n)&&!e)return n;n=e}return null}const XM=new Ee("",{providedIn:"root",factory:()=>!1});let Ey=null;function nP(n,e){return n[e]??sP()}function rP(n,e){const t=sP();t.producerNode?.length&&(n[e]=Ey,t.lView=n,Ey=iP())}const f4={...o_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{vp(n.lView)},lView:null};function iP(){return Object.create(f4)}function sP(){return Ey??=iP(),Ey}const mt={};function Ae(n){oP(Ft(),ve(),Xr()+n,!1)}function oP(n,e,t,r){if(!r)if(3==(3&e[ut])){const s=n.preOrderCheckHooks;null!==s&&Jl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ed(e,s,0,t)}ia(t)}function pe(n,e=It.Default){const t=ve();return null===t?fe(n,e):Ue(Rr(),t,tt(n),e)}function Iy(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[vn]=i,m[ut]=140|r,(null!==u||n&&2048&n[ut])&&(m[ut]|=2048),Bf(m),m[En]=m[yo]=n,m[Wn]=t,m[Ba]=o||n&&n[Ba],m[lt]=a||n&&n[lt],m[ws]=c||n&&n[ws]||null,m[Ir]=s,m[tu]=function mz(){return gz++}(),m[cs]=f,m[Fl]=u,m[Kn]=2==e.type?n[Kn]:m,m}function Cd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Eb(n,e,t,r,i){const s=R_(),o=zf(),c=n.data[e]=function I4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function wo(){return null!==it.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function P_(){return it.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function ra(){const n=it.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return As(s,!0),s}function Ep(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cP(n,e,t,r,i){const s=nP(e,nu),o=Xr(),a=2&r;try{ia(-1),a&&e.length>Tt&&oP(n,e,Tt,!1),Ts(a?2:0,i);const u=a?s:null,f=Mf(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{iu(u,f)}}finally{a&&null===e[nu]&&rP(e,nu),ia(o),Ts(a?3:1,i)}}function Ib(n,e,t){if(t_(e)){const r=Wi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Wi(r)}}}function wb(n,e,t){C_()&&(function S4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;$a(t)&&function k4(n,e,t){const r=li(e,n),i=uP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=wy(n,Iy(n,i,null,o,r,e,null,n[Ba].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),hi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=di(e,n,a,t);hi(u,e),null!==o&&F4(0,a-i,u,c,0,o),Ri(c)&&(Yr(t.index,e)[Wn]=di(e,n,a,t))}}(n,e,t,li(t,e)),64==(64&t.flags)&&pP(n,e,t))}function bb(n,e,t=li){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function uP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Tb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Tb(n,e,t,r,i,s,o,a,c,u,f){const m=Tt+r,y=m+i,I=function g4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:mt);return t}(m,y),b="function"==typeof u?u():u;return I[Fe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}let lP=n=>null;function dP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?hP(t,e,i,s):r.hasOwnProperty(i)&&hP(t,e,r[i],s)}return t}function hP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function hs(n,e,t,r,i,s,o,a){const c=li(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(Rb(n,t,f,r,i),$a(e)&&function T4(n,e){const t=Yr(e,n);16&t[ut]||(t[ut]|=64)}(t,e.index)):3&e.type&&(r=function b4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Cb(n,e,t,r){if(C_()){const i=null===r?null:{"":-1},s=function M4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Pl(e,o.selectors,!1))if(r||(r=[]),Ri(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Ab(n,e,a.length)}else r.unshift(o),Ab(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&fP(n,e,t,o,i,a),i&&function P4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new P(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Va(t.mergedAttrs,t.attrs)}function fP(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function N4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=Ep(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=Va(t.mergedAttrs,f.hostAttrs),O4(n,t,e,c,f),x4(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function w4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,b=y?y.outputs:null;c=dP(m.inputs,f,c,y?y.inputs:null),u=dP(m.outputs,f,u,b);const R=null===c||null===o||gf(e)?null:L4(c,f,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function pP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function x_(){return it.lFrame.currentDirectiveIndex}();try{ia(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];au(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&R4(c,u)}}finally{ia(-1),au(o)}}function R4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ab(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function x4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ri(e)&&(t[""]=n)}}function O4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ta(i.type)),o=new uu(s,Ri(i),pe);n.blueprint[r]=o,t[r]=o,function A4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function D4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Ep(n,t,i.hostVars,mt),i)}function Co(n,e,t,r,i,s){const o=li(n,e);!function Db(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?X(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[lt],o,s,n.value,t,r,i)}function F4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)gP(r,t,o[a++],o[a++],o[a++])}function gP(n,e,t,r,i){const s=Wi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Wi(s)}}function L4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function mP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function _P(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Wf(t[r]),o.contentQueries(2,e[s],s)}}}function wy(n,e){return n[Yo]?n[e_][Si]=e:n[Yo]=e,n[e_]=e,e}function Sb(n,e,t){Wf(0);const r=Wi(null);try{e(n,t)}finally{Wi(r)}}function IP(n,e){const t=n[ws],r=t?t.get(Qs,null):null;r&&r.handleError(e)}function Rb(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];gP(n.data[o],e[o],r,a,i)}}function V4(n,e){const t=Yr(e,n),r=t[Fe];!function U4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[vn];null!==i&&null===t[cs]&&(t[cs]=cb(i,t[ws])),Mb(r,t,t[Wn])}function Mb(n,e,t){Zf(e);try{const r=n.viewQuery;null!==r&&Sb(1,r,t);const i=n.template;null!==i&&cP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&_P(n,e),n.staticViewQueries&&Sb(2,n.viewQuery,t);const s=n.components;null!==s&&function B4(n,e){for(let t=0;t<e.length;t++)V4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ut]&=-5,Yf()}}let wP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function nw(n,e,t){const r=Object.create(kf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Bl(r),run:()=>{if(r.dirty=!1,r.hasRun&&!c_(r))return;r.hasRun=!0;const o=Mf(r);try{r.cleanupFn(),r.cleanupFn=g_,r.fn(i)}finally{iu(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function by(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=_r(i,a):2==s&&(r=_r(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ip(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(en(s)),Qr(s)&&bP(s,r);const o=t.type;if(8&o)Ip(n,e,t.child,r);else if(32&o){const a=Nw(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=sM(e,t);if(Array.isArray(a))r.push(...a);else{const c=lp(e[Kn]);Ip(c[Fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bP(n,e){for(let t=Sr;t<n.length;t++){const r=n[t],i=r[Fe].firstChild;null!==i&&Ip(r[Fe],r,i,e)}n[bs]!==n[vn]&&e.push(n[bs])}function Ty(n,e,t,r=!0){const i=e[Ba],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{TP(n,e,n.template,t)}catch(c){throw r&&IP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function TP(n,e,t,r){const i=e[ut];if(256!=(256&i)){e[Ba].effectManager?.flush(),Zf(e);try{Bf(e),function Ql(n){return it.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&cP(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&Jl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ed(e,u,0,null),Jf(e,0)}if(function H4(n){for(let e=WR(n);null!==e;e=KR(e)){if(!e[Vl])continue;const t=e[ea];for(let r=0;r<t.length;r++){cw(t[r])}}}(e),CP(e,2),null!==n.contentQueries&&_P(n,e),o){const u=n.contentCheckHooks;null!==u&&Jl(e,u)}else{const u=n.contentHooks;null!==u&&ed(e,u,1),Jf(e,1)}!function p4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=nP(e,Jo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)ia(~s);else{const o=s,a=t[++i],c=t[++i];fw(a,o),r.dirty=!1;const u=Mf(r);try{c(2,e[o])}finally{iu(r,u)}}}}finally{null===e[Jo]&&rP(e,Jo),ia(-1)}}(n,e);const a=n.components;null!==a&&DP(e,a,0);const c=n.viewQuery;if(null!==c&&Sb(2,c,r),o){const u=n.viewCheckHooks;null!==u&&Jl(e,u)}else{const u=n.viewHooks;null!==u&&ed(e,u,2),Jf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ut]&=-73,w_(e)}finally{Yf()}}}function CP(n,e){for(let t=WR(n);null!==t;t=KR(t))for(let r=Sr;r<t.length;r++)AP(t[r],e)}function z4(n,e,t){AP(Yr(e,n),t)}function AP(n,e){if(!function ow(n){return 128==(128&n[ut])}(n))return;const t=n[Fe],r=n[ut];if(80&r&&0===e||1024&r||2===e)TP(t,n,t.template,n[Wn]);else if(n[eu]>0){CP(n,1);const i=t.components;null!==i&&DP(n,i,1)}}function DP(n,e,t){for(let r=0;r<e.length;r++)z4(n,e[r],t)}class wp{get rootNodes(){const e=this._lView,t=e[Fe];return Ip(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return 256==(256&this._lView[ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[En];if(Qr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ty(e,r),q_(t,r))}this._attachedToViewContainer=!1}kw(this._lView[Fe],this._lView)}onDestroy(e){!function b_(n,e){if(256==(256&n[ut]))throw new P(911,!1);null===n[vo]&&(n[vo]=[]),n[vo].push(e)}(this._lView,e)}markForCheck(){vp(this._cdRefInjectingView||this._lView)}detach(){this._lView[ut]&=-129}reattach(){this._lView[ut]|=128}detectChanges(){Ty(this._lView[Fe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mz(n,e){hp(n,e,e[lt],2,null,null)}(this._lView[Fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e}}class q4 extends wp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Ty(e[Fe],e,e[Wn],!1)}checkNoChanges(){}get context(){return null}}class SP extends yy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Mt(e);return new bp(t,this.ngModule)}}function RP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class W4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Cl(r);const i=this.injector.get(e,hb,r);return i!==hb||t===hb?i:this.parentInjector.get(e,t,r)}}class bp extends kM{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=RP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return RP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Nl(n){return n.map(Ef).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ps?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new W4(e,s):e,a=o.get(yp,null);if(null===a)throw new P(407,!1);const m={rendererFactory:a,sanitizer:o.get(z3,null),effectManager:o.get(wP,null),afterRenderEventManager:o.get(vb,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",b=r?function m4(n,e,t,r){const s=r.get(XM,!1)||t===Yn.ShadowDom,o=n.selectRootElement(e,s);return function _4(n){lP(n)}(o),o}(y,r,this.componentDef.encapsulation,o):ey(y,I,function G4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),z=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==b&&(V=cb(b,o,!0));const Q=Tb(0,null,null,1,0,null,null,null,null,null,null),ie=Iy(null,Q,null,z,null,null,m,y,o,null,V);let Ce,ke;Zf(ie);try{const $=this.componentDef;let N,L=null;$.findHostDirectiveDefs?(N=[],L=new Map,$.findHostDirectiveDefs($,N,L),N.push($)):N=[$];const q=function Z4(n,e){const t=n[Fe],r=Tt;return n[r]=e,Cd(t,r,2,"#host",null)}(ie,b),W=function Q4(n,e,t,r,i,s,o){const a=i[Fe];!function Y4(n,e,t,r){for(const i of n)e.mergedAttrs=Va(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(by(e,e.mergedAttrs,!0),null!==t&&uM(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=cb(e,i[ws]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=Iy(i,uP(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&Ab(a,n,r.length-1),wy(i,m),i[n.index]=m}(q,b,$,N,ie,m,y);ke=I_(Q,Tt),b&&function J4(n,e,t,r){if(r)Dl(n,t,["ng-version",db.full]);else{const{attrs:i,classes:s}=function If(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Di(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Dl(n,t,i),s&&s.length>0&&cM(n,t,s.join(" "))}}(y,$,b,r),void 0!==t&&function eq(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ke,this.ngContentSelectors,t),Ce=function X4(n,e,t,r,i,s){const o=Rr(),a=i[Fe],c=li(o,i);fP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)hi(di(i,a,o.directiveStart+f,o),i);pP(a,i,o),c&&hi(c,i);const u=di(i,a,o.directiveStart+o.componentOffset,o);if(n[Wn]=i[Wn]=u,null!==s)for(const f of s)f(u,e);return Ib(a,o,n),u}(W,$,N,L,ie,[tq]),Mb(Q,ie,null)}finally{Yf()}return new K4(this.componentType,Ce,wd(ke,ie),ie,ke)}}class K4 extends V3{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new q4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Rb(s[Fe],s,i,e,t),this.previousInputValues.set(e,t),vp(Yr(this._tNode.index,s))}}get injector(){return new xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function tq(){const n=Rr();Xl(ve()[Fe],n)}function sn(n){let e=function MP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ri(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new P(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Cy(n.inputs),o.inputTransforms=Cy(n.inputTransforms),o.declaredInputs=Cy(n.declaredInputs),o.outputs=Cy(n.outputs);const a=i.hostBindings;a&&sq(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&rq(n,c),u&&iq(n,u),Gt(n.inputs,i.inputs),Gt(n.declaredInputs,i.declaredInputs),Gt(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Gt(o.inputTransforms,i.inputTransforms)),Ri(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===sn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function nq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Va(i.hostAttrs,t=Va(t,i.hostAttrs))}}(r)}function Cy(n){return n===Kr?{}:n===Rt?[]:n}function rq(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function iq(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function sq(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function OP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Ay(n){return!!Pb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Pb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ao(n,e,t){return n[e]=t}function fi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Do(n,e,t,r){const i=ve();return fi(i,Za(),e)&&(Ft(),Co(Rn(),i,n,e,t,r)),Do}function Dd(n,e,t,r){return fi(n,Za(),t)?e+X(t)+r:mt}function Or(n,e,t,r,i,s,o,a){const c=ve(),u=Ft(),f=n+Tt,m=u.firstCreatePass?function Mq(n,e,t,r,i,s,o,a,c){const u=e.consts,f=Cd(e,n,4,o||null,Cs(u,a));Cb(e,t,f,Cs(u,c)),Xl(e,f);const m=f.tView=Tb(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];As(m,!1);const y=WP(u,c,m,n);Yl()&&ry(u,c,y,m),hi(y,c),wy(c,c[f]=mP(y,c,y,m)),Af(m)&&wb(u,c,m),null!=o&&bb(c,m,a)}let WP=function KP(n,e,t,r){return Zs(!0),e[lt].createComment("")};function Ht(n,e,t){const r=ve();return fi(r,Za(),e)&&hs(Ft(),Rn(),r,n,e,r[lt],t,!1),Ht}function Lb(n,e,t,r,i){const o=i?"class":"style";Rb(n,t,e.inputs[o],o,r)}function G(n,e,t,r){const i=ve(),s=Ft(),o=Tt+n,a=i[lt],c=s.firstCreatePass?function kq(n,e,t,r,i,s){const o=e.consts,c=Cd(e,n,2,r,Cs(o,i));return Cb(e,t,c,Cs(o,s)),null!==c.attrs&&by(c,c.attrs,!1),null!==c.mergedAttrs&&by(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=ZP(s,i,c,a,e,n);i[o]=u;const f=Af(c);return As(c,!0),uM(a,u,c),32!=(32&c.flags)&&Yl()&&ry(s,i,u,c),0===function uw(){return it.lFrame.elementDepthCount}()&&hi(u,i),function su(){it.lFrame.elementDepthCount++}(),f&&(wb(s,i,c),Ib(s,c,i)),null!==r&&bb(i,c),G}function U(){let n=Rr();zf()?function ou(){it.lFrame.isParent=!1}():(n=n.parent,As(n,!1));const e=n;(function $f(n){return it.skipHydrationRootTNode===n})(e)&&function D_(){it.skipHydrationRootTNode=null}(),function lw(){it.lFrame.elementDepthCount--}();const t=Ft();return t.firstCreatePass&&(Xl(t,n),t_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function wR(n){return 0!=(8&n.flags)}(e)&&Lb(t,e,ve(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ep(n){return 0!=(16&n.flags)}(e)&&Lb(t,e,ve(),e.stylesWithoutHost,!1),U}function Qe(n,e,t,r){return G(n,e,t,r),U(),Qe}let ZP=(n,e,t,r,i,s)=>(Zs(!0),ey(r,i,function L_(){return it.lFrame.currentNamespace}()));function Sp(n){return!!n&&"function"==typeof n.then}function JP(n){return!!n&&"function"==typeof n.subscribe}function ln(n,e,t,r){const i=ve(),s=Ft(),o=Rr();return function tx(n,e,t,r,i,s,o){const a=Af(r),u=n.firstCreatePass&&function vP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Wn],m=function yP(n){return n[Ua]||(n[Ua]=[])}(e);let y=!0;if(3&r.type||o){const R=li(r,e),x=o?o(R):R,z=m.length,V=o?ie=>o(en(ie[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function jq(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ua],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,y=!1;else{s=rx(r,e,f,s,!1);const ie=t.listen(x,i,s);m.push(s,ie),u&&u.push(i,V,z,z+1)}}else s=rx(r,e,f,s,!1);const I=r.outputs;let b;if(y&&null!==I&&(b=I[i])){const R=b.length;if(R)for(let x=0;x<R;x+=2){const Ce=e[b[x]][b[x+1]].subscribe(s),ke=m.length;m.push(s,Ce),u&&u.push(i,r.index,ke,-(ke+1))}}}(s,i,i[lt],o,n,e,r),ln}function nx(n,e,t,r){try{return Ts(6,e,t),!1!==t(r)}catch(i){return IP(n,i),!1}finally{Ts(7,e,t)}}function rx(n,e,t,r,i){return function s(o){if(o===Function)return r;vp(n.componentOffset>-1?Yr(n.index,e):e);let c=nx(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=nx(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function kd(n=1){return function pw(n){return(it.lFrame.contextLView=function gw(n,e){for(;n>0;)e=e[yo],n--;return e}(n,it.lFrame.contextLView))[Wn]}(n)}function Ys(n,e,t){return _u(n,"",e,"",t),Ys}function _u(n,e,t,r,i){const s=ve(),o=Dd(s,e,t,r);return o!==mt&&hs(Ft(),Rn(),s,n,o,s[lt],i,!1),_u}function xy(n,e){return n<<17|e<<2}function rc(n){return n>>17&32767}function Bb(n){return 2|n}function yu(n){return(131068&n)>>2}function jb(n,e){return-131069&n|e<<2}function $b(n){return 1|n}function hx(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?rc(s):yu(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];Kq(n[a],e)&&(c=!0,n[a+1]=r?$b(f):Bb(f)),a=r?rc(f):yu(f)}c&&(n[t+1]=r?Bb(s):$b(s))}function Kq(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&hd(n,e)>=0}function Ld(n,e){return function Xs(n,e,t,r){const i=ve(),s=Ft(),o=function Ss(n){const e=it.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Ix(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Xr()],o=function Ex(n,e){return e>=n.expandoStartIndex}(n,t);(function Cx(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function rG(n,e,t,r){const i=function Gf(n){const e=it.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Rp(t=Hb(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Hb(i,n,e,t,r),null===s){let c=function iG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==yu(r))return n[rc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Hb(null,n,e,c[1],r),c=Rp(c,e.attrs,r),function sG(n,e,t,r){n[rc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function oG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Rp(r,n[s].hostAttrs,t);return Rp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Gq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=rc(o),c=yu(o);n[r]=t;let f,u=!1;if(Array.isArray(t)?(f=t[1],(null===f||hd(t,f)>0)&&(u=!0)):f=t,i)if(0!==c){const y=rc(n[a+1]);n[r+1]=xy(y,a),0!==y&&(n[y+1]=jb(n[y+1],r)),n[a+1]=function zq(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=xy(a,0),0!==a&&(n[a+1]=jb(n[a+1],r)),a=r;else n[r+1]=xy(c,0),0===a?a=r:n[c+1]=jb(n[c+1],r),c=r;u&&(n[r+1]=Bb(n[r+1])),hx(n,f,r,!0),hx(n,f,r,!1),function Wq(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&hd(s,e)>=0&&(t[r+1]=$b(t[r+1]))}(e,f,n,r,s),o=xy(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==mt&&fi(i,o,e)&&function bx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],f=function qq(n){return 1==(1&n)}(u)?Tx(c,e,t,i,yu(u),o):void 0;Ny(f)||(Ny(s)||function Hq(n){return 2==(2&n)}(u)&&(s=Tx(c,null,t,i,a,o)),function Bz(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ec.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ec.Important),n.setStyle(t,r,i,s))}}(r,o,Ka(Xr(),t),i,s))}(s,s.data[Xr()],i,i[lt],n,i[o+1]=function lG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=We(ls(n)))),n}(e,t),r,o)}(n,e,null,!0),Ld}function Hb(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Rp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Rp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),us(n,o,!!t||e[++s]))}return void 0===n?null:n}function Tx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=null===f;let y=t[i+1];y===mt&&(y=m?Rt:void 0);let I=m?Tw(y,r):f===r?y:void 0;if(u&&!Ny(I)&&(I=Tw(c,r)),Ny(I)&&(a=I,o))return a;const b=n[i+1];i=o?rc(b):yu(b)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Tw(c,r))}return a}function Ny(n){return void 0!==n}function te(n,e=""){const t=ve(),r=Ft(),i=n+Tt,s=r.firstCreatePass?Cd(r,i,1,e,null):r.data[i],o=Ax(r,t,s,e,n);t[i]=o,Yl()&&ry(r,t,o,s),As(s,!1)}let Ax=(n,e,t,r,i)=>(Zs(!0),function J_(n,e){return n.createText(e)}(e[lt],r));function nt(n){return zb("",n,""),nt}function zb(n,e,t){const r=ve(),i=Dd(r,n,e,t);return i!==mt&&function ca(n,e,t){const r=Ka(e,n);!function QR(n,e,t){n.setValue(e,t)}(n[lt],r,t)}(r,Xr(),i),zb}const Ud="en-US";let Kx=Ud;function Wb(n,e,t,r,i){if(n=tt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Wb(n[s],e,t,r,i);else{const s=Ft(),o=ve(),a=Rr();let c=gu(n)?n:tt(n.provide);const u=RM(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(gu(n)||!n.multi){const I=new uu(u,i,pe),b=Zb(c,e,i?f:f+y,m);-1===b?(C(l(a,o),s,c),Kb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[b]=I,o[b]=I)}else{const I=Zb(c,e,f+y,m),b=Zb(c,e,f,f+y),x=b>=0&&t[b];if(i&&!x||!i&&!(I>=0&&t[I])){C(l(a,o),s,c);const z=function P6(n,e,t,r,i){const s=new uu(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,vN(s,i,r&&!t),s}(i?M6:R6,t.length,i,r,u);!i&&x&&(t[b].providerFactory=z),Kb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else Kb(s,n,I>-1?I:b,vN(t[i?b:I],u,!i&&r));!i&&r&&x&&t[b].componentProviders++}}}function Kb(n,e,t,r){const i=gu(e),s=function I3(n){return!!n.useClass}(e);if(i||s){const c=(s?tt(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function vN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Zb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function R6(n,e,t,r){return Qb(this.multi,[])}function M6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=di(t,t[Fe],this.providerFactory.index,r);s=a.slice(0,o),Qb(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Qb(i,s);return s}function Qb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Un(n,e=[]){return t=>{t.providersResolver=(r,i)=>function S6(n,e,t){const r=Ft();if(r.firstCreatePass){const i=Ri(n);Wb(t,r.data,r.blueprint,i,!0),Wb(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Eu{}class EN{}class Yb extends Eu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new SP(this);const i=Zr(e);this._bootstrapComponents=aa(i.bootstrap),this._r3Injector=jM(e,t,[{provide:Eu,useValue:this},{provide:yy,useValue:this.componentFactoryResolver},...r],We(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xb extends EN{constructor(e){super(),this.moduleType=e}create(e){return new Yb(this.moduleType,e,[])}}class IN extends Eu{constructor(e){super(),this.componentFactoryResolver=new SP(this),this.instance=null;const t=new yd([...e.providers,{provide:Eu,useValue:this},{provide:yy,useValue:this.componentFactoryResolver}],e.parent||dy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Jb(n,e,t=null){return new IN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let O6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=CM(0,t.type),i=r.length>0?Jb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(fe(Ps))})}return n})();function wN(n){n.getStandaloneInjector=e=>e.get(O6).getOrCreateStandaloneInjector(n)}function RN(n,e,t,r){return function PN(n,e,t,r,i,s){const o=e+t;return fi(n,o,i)?Ao(n,o+1,s?r.call(s,i):r(i)):kp(n,o+1)}(ve(),Mr(),n,e,t,r)}function MN(n,e,t,r,i){return function xN(n,e,t,r,i,s,o){const a=e+t;return function mu(n,e,t,r){const i=fi(n,e,t);return fi(n,e+1,r)||i}(n,a,i,s)?Ao(n,a+2,o?r.call(o,i,s):r(i,s)):kp(n,a+2)}(ve(),Mr(),n,e,t,r,i)}function kp(n,e){const t=n[e];return t===mt?void 0:t}function oW(n,e,t,r=!0){const i=e[Fe];if(function xz(n,e,t,r){const i=Sr+r,s=t.length;r>0&&(t[i-1][Si]=e),r<s-Sr?(e[Si]=t[i],AR(t,Sr+r,e)):(t.push(e),e[Si]=null),e[En]=t;const o=e[Xo];null!==o&&t!==o&&function Nz(n,e){const t=n[ea];e[Kn]!==e[En][En][Kn]&&(n[Vl]=!0),null===t?n[ea]=[e]:t.push(e)}(o,e);const a=e[Gi];null!==a&&a.insertView(n),e[ut]|=128}(i,e,n,t),r){const s=Uw(t,n),o=e[lt],a=ny(o,n[bs]);null!==a&&function Rz(n,e,t,r,i,s){r[vn]=i,r[Ir]=e,hp(n,r,t,1,i,s)}(i,n[Ir],o,e,a,s)}}Symbol;let ua=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=uW}return n})();const aW=ua,cW=class extends aW{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function sW(n,e,t,r){const i=e.tView,a=Iy(n,i,t,4096&n[ut]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Xo]=n[e.index];const u=n[Gi];return null!==u&&(a[Gi]=u.createEmbeddedView(i)),Mb(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new wp(i)}};function uW(){return function Vy(n,e){return 4&n.type?new cW(e,n,wd(n,e)):null}(Rr(),ve())}let eo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=gW}return n})();function gW(){return function $N(n,e){let t;const r=e[n.index];return Qr(r)?t=r:(t=mP(r,e,null,n),e[n.index]=t,wy(e,t)),HN(t,e,n,r),new BN(t,n,e)}(Rr(),ve())}const mW=eo,BN=class extends mW{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return wd(this._hostTNode,this._hostLView)}get injector(){return new xr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(rd(e)){const t=du(e,this._hostLView),r=Qa(e);return new xr(t[Fe].data[r+8],t)}return new xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=jN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function sp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new bp(Mt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const x=(o?u:this.parentInjector).get(Ps,null);x&&(s=x)}Mt(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function aw(n){return Qr(n[En])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[En],f=new BN(u,u[Ir],u[En]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return oW(a,i,o,!r),e.attachToViewContainerRef(),AR(n0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=jN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);r&&(q_(n0(this._lContainer),t),kw(r[Fe],r))}detach(e){const t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);return r&&null!=q_(n0(this._lContainer),t)?new wp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function jN(n){return n[8]}function n0(n){return n[8]||(n[8]=[])}let HN=function zN(n,e,t,r){if(n[bs])return;let i;i=8&t.type?en(r):function _W(n,e){const t=n[lt],r=t.createComment(""),i=li(e,n);return fu(t,ny(t,i),r,function Lz(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[bs]=i};const p0=new Ee("Application Initializer");let g0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ve(p0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Sp(s))t.push(s);else if(JP(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Mo=new Ee("LocaleId",{providedIn:"root",factory:()=>Ve(Mo,It.Optional|It.SkipSelf)||function KW(){return typeof $localize<"u"&&$localize.locale||Ud}()});let _1=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class YW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let y1=(()=>{class n{compileModuleSync(t){return new Xb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=aa(Zr(t).declarations).reduce((o,a)=>{const c=Mt(a);return c&&o.push(new bp(c)),o},[]);return new YW(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const w1=new Ee(""),$y=new Ee("");let E0,y0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,E0||(function v9(n){E0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Nt),fe(v0),fe($y))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),v0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return E0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ic=null;const b1=new Ee("AllowMultipleToken"),I0=new Ee("PlatformDestroyListeners"),w0=new Ee("appBootstrapListener");class C1{constructor(e,t){this.name=e,this.token=t}}function D1(n,e,t=[]){const r=`Platform: ${e}`,i=new Ee(r);return(s=[])=>{let o=b0();if(!o||o.injector.get(b1,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function w9(n){if(ic&&!ic.get(b1,!1))throw new P(400,!1);(function T1(){!function YI(n){$l=n}(()=>{throw new P(600,!1)})})(),ic=n;const e=n.get(R1);(function A1(n){n.get(MM,null)?.forEach(t=>t())})(n)}(function S1(n=[],e){return ei.create({name:e,providers:[{provide:Qw,useValue:"platform"},{provide:I0,useValue:new Set([()=>ic=null])},...n]})}(a,r))}return function T9(n){const e=b0();if(!e)throw new P(401,!1);return e}()}}function b0(){return ic?.get(R1)??null}let R1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function C9(n="zone.js",e){return"noop"===n?new n4:"zone.js"===n?new Nt(e):n}(r?.ngZone,function M1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function N6(n,e,t){return new Yb(n,e,t)}(t.moduleType,this.injector,function k1(n){return[{provide:Nt,useFactory:n},{provide:gp,multi:!0,useFactory:()=>{const e=Ve(D9,{optional:!0});return()=>e.initialize()}},{provide:O1,useFactory:A9},{provide:GM,useFactory:WM}]}(()=>i)),o=s.injector.get(Qs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Hy(this._modules,s),a.unsubscribe()})}),function P1(n,e,t){try{const r=t();return Sp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(g0);return a.runInitializers(),a.donePromise.then(()=>(function Zx(n){qi(n,"Expected localeId to be defined"),"string"==typeof n&&(Kx=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Mo,Ud)||Ud),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=x1({},r);return function E9(n,e,t){const r=new Xb(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Iu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new P(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new P(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(I0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ei))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function x1(n,e){return Array.isArray(e)?e.reduce(x1,n):{...n,...e}}let Iu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ve(O1),this.zoneIsStable=Ve(GM),this.componentTypes=[],this.components=[],this.isStable=Ve(_1).hasPendingTasks.pipe(je(t=>t?k(!1):this.zoneIsStable),st(),he()),this._injector=Ve(Ps)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof kM;if(!this._injector.get(g0).done)throw!i&&function _o(n){const e=Mt(n)||lr(n)||Er(n);return null!==e&&e.standalone}(t),new P(405,!1);let o;o=i?t:this._injector.get(yy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function I9(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Eu),u=o.create(ei.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(w1,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Hy(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Hy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(w0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const O1=new Ee("",{providedIn:"root",factory:()=>Ve(Qs).handleError.bind(void 0)});function A9(){const n=Ve(Nt),e=Ve(Qs);return t=>n.runOutsideAngular(()=>e.handleError(t))}let D9=(()=>{class n{constructor(){this.zone=Ve(Nt),this.applicationRef=Ve(Iu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let zy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=R9}return n})();function R9(n){return function M9(n,e,t){if($a(n)&&!t){const r=Yr(n.index,e);return new wp(r,r)}return 47&n.type?new wp(e[Kn],e):null}(Rr(),ve(),16==(16&n))}class B1{constructor(){}supports(e){return Ay(e)}create(e){return new F9(e)}}const k9=(n,e)=>e;class F9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||k9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<$1(r,i,s)?t:r,a=$1(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,b=I+y;f<=b&&b<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ay(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function hq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new L9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new j1),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new j1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class L9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class j1{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new V9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $1(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class H1{constructor(){}supports(e){return e instanceof Map||Pb(e)}create(){return new U9}}class U9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Pb(e)))throw new P(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new B9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class B9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function z1(){return new Wy([new B1])}let Wy=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:z1});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||z1()),deps:[[n,new ap,new br]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new P(901,!1)}}return n})();function q1(){return new Up([new H1])}let Up=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:q1});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||q1()),deps:[[n,new ap,new br]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new P(901,!1)}}return n})();const H9=D1(null,"core",[]);let z9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Iu))};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({})}return n})();function $d(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let R0=null;function sc(){return R0}class i5{}const Jn=new Ee("DocumentToken");let M0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(o5)},providedIn:"platform"})}return n})();const s5=new Ee("Location Initialized");let o5=(()=>{class n extends M0{constructor(){super(),this._doc=Ve(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sc().getBaseHref(this._doc)}onPopState(t){const r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function P0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function eO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function la(n){return n&&"?"!==n[0]?"?"+n:n}let bu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(nO)},providedIn:"root"})}return n})();const tO=new Ee("appBaseHref");let nO=(()=>{class n extends bu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ve(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return P0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+la(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+la(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+la(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(M0),fe(tO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a5=(()=>{class n extends bu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=P0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+la(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+la(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(M0),fe(tO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),x0=(()=>{class n{constructor(t){this._subject=new Xn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function l5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(eO(rO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+la(r))}normalize(t){return n.stripTrailingSlash(function u5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,rO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+la(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+la(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=la;static#t=this.joinWithSlash=P0;static#n=this.stripTrailingSlash=eO;static#r=this.\u0275fac=function(r){return new(r||n)(fe(bu))};static#i=this.\u0275prov=Le({token:n,factory:function(){return function c5(){return new x0(fe(bu))}()},providedIn:"root"})}return n})();function rO(n){return n.replace(/\/index.html$/,"")}const $0=/\s+/,hO=[];let fO=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=hO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split($0):hO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split($0):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split($0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Wy),pe(Up),pe(Yi),pe(oa))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Q5{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tu=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Q5(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),gO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{gO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(eo),pe(ua),pe(Wy))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function gO(n,e){n.context.$implicit=e.item}let $p=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Y5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(pe(eo),pe(ua))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Y5{constructor(){this.$implicit=null,this.ngIf=null}}function mO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${We(e)}'.`)}let vO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({})}return n})();const EO="browser";function sv(n){return"server"===n}let A8=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new D8(fe(Jn),window)})}return n})();class D8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function S8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class X8 extends i5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Z0 extends X8{static makeCurrent(){!function r5(n){R0||(R0=n)}(new Z0)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function J8(){return zp=zp||document.querySelector("base"),zp?zp.getAttribute("href"):null}();return null==t?null:function e7(n){cv=cv||document.createElement("a"),cv.setAttribute("href",n);const e=cv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function K5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let cv,zp=null,n7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const Q0=new Ee("EventManagerPlugins");let CO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new P(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Q0),fe(Nt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class AO{constructor(e){this._doc=e}}const Y0="ng-app-id";let DO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Y0}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Y0),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Y0,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jn),fe(hy),fe(eb,8),fe(xs))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const X0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},J0=/%COMP%/g,o7=new Ee("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function RO(n,e){return e.map(t=>t.replace(J0,n))}let eT=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=sv(a),this.defaultRenderer=new tT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r={...r,encapsulation:Yn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof PO?i.applyToHost(t):i instanceof nT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:s=new PO(c,u,r,this.appId,f,o,a,m);break;case Yn.ShadowDom:return new l7(c,u,t,r,o,a,this.nonce,m);default:s=new nT(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(CO),fe(DO),fe(hy),fe(o7),fe(Jn),fe(xs),fe(Nt),fe(eb))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class tT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(X0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(MO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(MO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=X0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=X0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ec.DashCase|ec.Important)?e.style.setProperty(t,r,i&ec.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ec.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=sc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function MO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class l7 extends tT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=RO(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class nT extends tT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?RO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class PO extends nT{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function a7(n){return"_ngcontent-%COMP%".replace(J0,n)}(u),this.hostAttr=function c7(n){return"_nghost-%COMP%".replace(J0,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let d7=(()=>{class n extends AO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jn))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const xO=["alt","control","meta","shift"],h7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let p7=(()=>{class n extends AO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xO.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=h7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xO.forEach(o=>{o!==i&&(0,f7[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jn))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const y7=D1(H9,"browser",[{provide:xs,useValue:EO},{provide:MM,useValue:function g7(){Z0.makeCurrent()},multi:!0},{provide:Jn,useFactory:function _7(){return function qz(n){$w=n}(document),document},deps:[]}]),v7=new Ee(""),kO=[{provide:$y,useClass:class t7{addToWindow(e){Jt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new P(5103,!1);return s},Jt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Jt.getAllAngularRootElements=()=>e.getAllRootElements(),Jt.frameworkStabilizers||(Jt.frameworkStabilizers=[]),Jt.frameworkStabilizers.push(r=>{const i=Jt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?sc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:w1,useClass:y0,deps:[Nt,v0,$y]},{provide:y0,useClass:y0,deps:[Nt,v0,$y]}],FO=[{provide:Qw,useValue:"root"},{provide:Qs,useFactory:function m7(){return new Qs},deps:[]},{provide:Q0,useClass:d7,multi:!0,deps:[Jn,Nt,xs]},{provide:Q0,useClass:p7,multi:!0,deps:[Jn]},eT,DO,CO,{provide:yp,useExisting:eT},{provide:class R8{},useClass:n7,deps:[]},[]];let sT,LO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:hy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(v7,12))};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({providers:[...FO,...kO],imports:[vO,z9]})}return n})(),VO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jn))};static#t=this.\u0275prov=Le({token:n,factory:function(r){let i=null;return i=r?new r:function I7(){return new VO(fe(Jn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{sT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{sT=!1}let qp,HO=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function C8(n){return n===EO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!sT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(fe(xs))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uv(n){return function A7(){if(null==qp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qp=!0}))}finally{qp=qp||!1}return qp}()?n:!!n.capture}function qO(n){return Array.isArray(n)?n:[n]}const{isArray:F7}=Array,{getPrototypeOf:L7,prototype:V7,keys:U7}=Object;function WO(n){if(1===n.length){const e=n[0];if(F7(e))return{args:e,keys:null};if(function B7(n){return n&&"object"==typeof n&&L7(n)===V7}(e)){const t=U7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:j7}=Array;function KO(n){return Re(e=>function $7(n,e){return j7(e)?n(...e):n(e)}(n,e))}function ZO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function dv(...n){const e=Gn(n),t=zs(n),{args:r,keys:i}=WO(n);if(0===r.length)return T([],e);const s=new pt(function H7(n,e,t=An){return r=>{QO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)QO(e,()=>{const u=T(n[c],e);let f=!1;u.subscribe(Se(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ZO(i,o):An));return t?s.pipe(KO(t)):s}function QO(n,e,t){n?Dn(t,n,e):e()}function hv(...n){return function z7(){return Vr(1)}()(T(n,Gn(n)))}function Au(n){return n<=0?()=>qn:ce((e,t)=>{let r=0;e.subscribe(Se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ps(n,e){return ce((t,r)=>{let i=0;t.subscribe(Se(r,s=>n.call(e,s,i++)&&r.next(s)))})}class G7 extends Ut{constructor(e,t){super()}schedule(e,t=0){return this}}const fv={setInterval(n,e,...t){const{delegate:r}=fv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=fv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class YO extends G7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return fv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&fv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ze(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const aT={now:()=>(aT.delegate||Date).now(),delegate:void 0};class Gp{constructor(e,t=Gp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Gp.now=aT.now;class XO extends Gp{constructor(e,t=Gp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const cT=new XO(YO);function JO(n,e=cT){return ce((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Se(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Wp(...n){const e=Gn(n);return ce((t,r)=>{(e?hv(n,t,e):hv(n,t)).subscribe(r)})}function ek(n){return ce((e,t)=>{jt(n).subscribe(Se(t,()=>t.complete(),qe)),!t.closed&&e.subscribe(t)})}const tk=new Set;let Du,W7=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Z7}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function K7(n,e){if(!tk.has(n))try{Du||(Du=document.createElement("style"),e&&(Du.nonce=e),Du.setAttribute("type","text/css"),document.head.appendChild(Du)),Du.sheet&&(Du.sheet.insertRule(`@media ${n} {body{ }}`,0),tk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(HO),fe(eb,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z7(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Q7=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return nk(qO(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=dv(nk(qO(t)).map(o=>this._registerQuery(o).observable));return s=hv(s.pipe(Au(1)),s.pipe(function q7(n){return ps((e,t)=>n<=t)}(1),JO(0))),s.pipe(Re(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new pt(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Wp(r),Re(({matches:o})=>({query:t,matches:o})),ek(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(fe(W7),fe(Nt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const ok="cdk-high-contrast-black-on-white",ak="cdk-high-contrast-white-on-black",uT="cdk-high-contrast-active";let aK=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ve(Q7).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(uT,ok,ak),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(uT,ok):2===r&&t.add(uT,ak)}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(HO),fe(Jn))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ck=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({})}return n})();const dK=new Ee("mat-sanity-checks",{providedIn:"root",factory:function lK(){return!0}});let ac=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function R7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(fe(aK),fe(dK,8),fe(Jn))};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[ck,ck]})}return n})(),dk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[ac,ac]})}return n})();const hk=uv({passive:!0,capture:!0});class pK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function S7(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,hk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,hk)))}}class lT{static#e=this._eventManager=new pK;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=GO(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...fk,...r.animation},o=r.radius||function mK(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,b="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new fK(this,f,r,b);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!b&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const z=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",z),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(b||!u)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...fk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=GO(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,gk.forEach(r=>{lT._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{mk.forEach(t=>{this._triggerElement.addEventListener(t,this,pk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function iK(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function sK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(gk.forEach(t=>lT._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&mk.forEach(t=>e.removeEventListener(t,this,pk)))}}let bK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[ac,vO,ac]})}return n})();function qd(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new pt(e?i=>e.schedule(r,0,i):r)}function Cr(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Se(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):An}function cc(n){return ce((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Se(t,void 0,void 0,o=>{s=jt(n(o,cc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function pv(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gd(n,e){return M(e)?un(n,e,1):un(n,1)}let nZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[ac,ac]})}return n})(),sZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[dk,ac,dk,ac]})}return n})();const Ev=De(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Fk(n){return new pt(e=>{jt(n()).subscribe(e)})}function yT(){return ce((n,e)=>{let t=null;n._refCount++;const r=Se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lk extends pt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,me(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ut;const t=this.getSubject();e.add(this.source.subscribe(Se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ut.EMPTY)}return e}refCount(){return yT()(this)}}function Iv(n){return ce((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vk(n=aZ){return ce((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function aZ(){return new Ev}function dc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((i,s)=>n(i,s,r)):An,Au(1),t?Iv(e):Vk(()=>new Ev))}function wv(n,e){return ce(function cZ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Se(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function vT(n){return n<=0?()=>qn:ce((e,t)=>{let r=[];e.subscribe(Se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const yt="primary",Xp=Symbol("RouteTitle");class dZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wd(n){return new dZ(n)}function hZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Po(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Uk(n[i],e[i]))return!1;return!0}function Uk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Bk(n){return n.length>0?n[n.length-1]:null}function hc(n){return function oZ(n){return!!n&&(n instanceof pt||M(n.lift)&&M(n.subscribe))}(n)?n:Sp(n)?T(Promise.resolve(n)):k(n)}const pZ={exact:function Hk(n,e,t){if(!Pu(n.segments,e.segments)||!bv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hk(n.children[r],e.children[r],t))return!1;return!0},subset:zk},jk={exact:function gZ(n,e){return Po(n,e)},subset:function mZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Uk(n[t],e[t]))},ignored:()=>!0};function $k(n,e,t){return pZ[t.paths](n.root,e.root,t.matrixParams)&&jk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zk(n,e,t){return qk(n,e,e.segments,t)}function qk(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pu(i,t)||e.hasChildren()||!bv(i,t,r))}if(n.segments.length===t.length){if(!Pu(n.segments,t)||!bv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!zk(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Pu(n.segments,i)&&bv(n.segments,i,r)&&n.children[yt])&&qk(n.children[yt],e,s,r)}}function bv(n,e,t){return e.every((r,i)=>jk[t](n[i].parameters,r.parameters))}class Kd{constructor(e=new on([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wd(this.queryParams)),this._queryParamMap}toString(){return vZ.serialize(this)}}class on{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tv(this)}}class Jp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wd(this.parameters)),this._parameterMap}toString(){return Kk(this)}}function Pu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let eg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new ET},providedIn:"root"})}return n})();class ET{parse(e){const t=new MZ(e);return new Kd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${tg(e.root,!0)}`,r=function wZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Cv(t)}=${Cv(i)}`).join("&"):`${Cv(t)}=${Cv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function EZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vZ=new ET;function Tv(n){return n.segments.map(e=>Kk(e)).join("/")}function tg(n,e){if(!n.hasChildren())return Tv(n);if(e){const t=n.children[yt]?tg(n.children[yt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==yt&&r.push(`${i}:${tg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===yt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==yt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===yt?[tg(n.children[yt],!1)]:[`${i}:${tg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[yt]?`${Tv(n)}/${t[0]}`:`${Tv(n)}/(${t.join("//")})`}}function Gk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cv(n){return Gk(n).replace(/%3B/gi,";")}function IT(n){return Gk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Av(n){return decodeURIComponent(n)}function Wk(n){return Av(n.replace(/\+/g,"%20"))}function Kk(n){return`${IT(n.path)}${function IZ(n){return Object.keys(n).map(e=>`;${IT(e)}=${IT(n[e])}`).join("")}(n.parameters)}`}const bZ=/^[^\/()?;#]+/;function wT(n){const e=n.match(bZ);return e?e[0]:""}const TZ=/^[^\/()?;=#]+/,AZ=/^[^=?&#]+/,SZ=/^[^&#]+/;class MZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[yt]=new on(e,t)),r}parseSegment(){const e=wT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new P(4009,!1);return this.capture(e),new Jp(Av(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function CZ(n){const e=n.match(TZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=wT(this.remaining);i&&(r=i,this.capture(r))}e[Av(t)]=Av(r)}parseQueryParam(e){const t=function DZ(n){const e=n.match(AZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function RZ(n){const e=n.match(SZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Wk(t),s=Wk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new P(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=yt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[yt]:new on([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new P(4011,!1)}}function Zk(n){return n.segments.length>0?new on([],{[yt]:n}):n}function Qk(n){const e={};for(const r of Object.keys(n.children)){const s=Qk(n.children[r]);if(r===yt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function PZ(n){if(1===n.numberOfChildren&&n.children[yt]){const e=n.children[yt];return new on(n.segments.concat(e.segments),e.children)}return n}(new on(n.segments,e))}function xu(n){return n instanceof Kd}function Yk(n){let e;const i=Zk(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new on(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Xk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return bT(i,i,i,t,r);const s=function NZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new eF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new eF(t,e,r)}(e);if(s.toRoot())return bT(i,i,new on([],{}),t,r);const o=function OZ(n,e,t){if(n.isAbsolute)return new Sv(e,!0,0);if(!t)return new Sv(e,!1,NaN);if(null===t.parent)return new Sv(t,!0,0);const r=Dv(n.commands[0])?0:1;return function kZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new Sv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?rg(o.segmentGroup,o.index,s.commands):tF(o.segmentGroup,o.index,s.commands);return bT(i,o.segmentGroup,a,t,r)}function Dv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ng(n){return"object"==typeof n&&null!=n&&n.outlets}function bT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:Jk(n,e,t);const a=Zk(Qk(o));return new Kd(a,s,i)}function Jk(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Jk(s,e,t)}),new on(n.segments,r)}class eF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dv(r[0]))throw new P(4003,!1);const i=r.find(ng);if(i&&i!==Bk(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function tF(n,e,t){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return rg(n,e,t);const r=function LZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(ng(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!rF(c,u,o))return s;r+=2}else{if(!rF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new on(n.segments.slice(0,r.pathIndex),{});return s.children[yt]=new on(n.segments.slice(r.pathIndex),n.children),rg(s,0,i)}return r.match&&0===i.length?new on(n.segments,{}):r.match&&!n.hasChildren()?TT(n,e,t):r.match?rg(n,0,i):TT(n,e,t)}function rg(n,e,t){if(0===t.length)return new on(n.segments,{});{const r=function FZ(n){return ng(n[0])?n[0].outlets:{[yt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==yt)&&n.children[yt]&&1===n.numberOfChildren&&0===n.children[yt].segments.length){const s=rg(n.children[yt],e,t);return new on(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=tF(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new on(n.segments,i)}}function TT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(ng(s)){const c=VZ(s.outlets);return new on(r,c)}if(0===i&&Dv(t[0])){r.push(new Jp(n.segments[e].path,nF(t[0]))),i++;continue}const o=ng(s)?s.outlets[yt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Dv(a)?(r.push(new Jp(o,nF(a))),i+=2):(r.push(new Jp(o,{})),i++)}return new on(r,{})}function VZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=TT(new on([],{}),0,r))}),e}function nF(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rF(n,e,t){return n==t.path&&Po(e,t.parameters)}const ig="imperative";class xo{constructor(e,t){this.id=e,this.url=t}}class Rv extends xo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fc extends xo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sg extends xo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zd extends xo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Mv extends xo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UZ extends xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BZ extends xo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jZ extends xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $Z extends xo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class CT{}class AT{constructor(e){this.url=e}}class ZZ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new og,this.attachRef=null}}let og=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ZZ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class oF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=DT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ST(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ST(e,this._root).map(t=>t.value)}}function DT(n,e){if(n===e.value)return e;for(const t of e.children){const r=DT(n,t);if(r)return r}return null}function ST(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ST(n,t);if(r.length)return r.unshift(e),r}return[]}class pa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class aF extends oF{constructor(e,t){super(e),this.snapshot=t,RT(this,e)}toString(){return this.snapshot.toString()}}function cF(n,e){const t=function QZ(n,e){const o=new Pv([],{},{},"",{},yt,e,null,{});return new lF("",new pa(o,[]))}(0,e),r=new w([new Jp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new pc(r,i,o,a,s,yt,e,t.root);return c.snapshot=t.root,new aF(new pa(c,[]),t)}class pc{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Re(u=>u[Xp]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Re(e=>Wd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Re(e=>Wd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function YZ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Pv{get title(){return this.data?.[Xp]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lF extends oF{constructor(e,t){super(t),this.url=e,RT(this,t)}toString(){return dF(this._root)}}function RT(n,e){e.value._routerState=n,e.children.forEach(t=>RT(n,t))}function dF(n){const e=n.children.length>0?` { ${n.children.map(dF).join(", ")} } `:"";return`${n.value}${e}`}function MT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Po(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Po(e.params,t.params)||n.paramsSubject.next(t.params),function fZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Po(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Po(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function PT(n,e){const t=Po(n.params,e.params)&&function _Z(n,e){return Pu(n,e)&&n.every((t,r)=>Po(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||PT(n.parent,e.parent))}let xT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=yt,this.activateEvents=new Xn,this.deactivateEvents=new Xn,this.attachEvents=new Xn,this.detachEvents=new Xn,this.parentContexts=Ve(og),this.location=Ve(eo),this.changeDetector=Ve(zy),this.environmentInjector=Ve(Ps),this.inputBinder=Ve(xv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new P(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new XZ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ki]})}return n})();class XZ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pc?this.route:e===og?this.childContexts:this.parent.get(e,t)}}const xv=new Ee("");let hF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=dv([r.queryParams,r.params,r.data]).pipe(je(([s,o,a],c)=>(a={...s,...o,...a},0===c?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function n5(n){const e=Mt(n);if(!e)return null;const t=new bp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function ag(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function eQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ag(n,r,i);return ag(n,r)})}(n,e,t);return new pa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ag(n,a)),o}}const r=function tQ(n){return new pc(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ag(n,s));return new pa(r,i)}}const NT="ngNavigationCancelingError";function fF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=xu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function pF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[NT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function gF(n){return n&&n[NT]}let mF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["ng-component"]],standalone:!0,features:[wN],decls:1,vars:0,template:function(r,i){1&r&&Qe(0,"router-outlet")},dependencies:[xT],encapsulation:2})}return n})();function OT(n){const e=n.children&&n.children.map(OT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==yt&&(t.component=mF),t}function ro(n){return n.outlet||yt}function cg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class uQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),MT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Qd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Qd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new KZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new GZ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(MT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),MT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=cg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class _F{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Nv{constructor(e,t){this.component=e,this.route=t}}function lQ(n,e,t){const r=n._root;return ug(r,e?e._root:null,t,[r.value])}function Yd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function $I(n){return null!==vl(n)}(n)?e.get(n):n:r}function ug(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Qd(e);return n.children.forEach(o=>{(function hQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function fQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pu(n.url,e.url)||!Po(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PT(n,e)||!Po(n.queryParams,e.queryParams);default:return!PT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new _F(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ug(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Nv(a.outlet.component,o))}else o&&lg(e,a,i),i.canActivateChecks.push(new _F(r)),ug(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>lg(a,t.getContext(o),i)),i}function lg(n,e,t){const r=Qd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{lg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Nv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function dg(n){return"function"==typeof n}function yF(n){return n instanceof Ev||"EmptyError"===n?.name}const Ov=Symbol("INITIAL_VALUE");function Xd(){return je(n=>dv(n.map(e=>e.pipe(Au(1),Wp(Ov)))).pipe(Re(e=>{for(const t of e)if(!0!==t){if(t===Ov)return Ov;if(!1===t||t instanceof Kd)return t}return!0}),ps(e=>e!==Ov),Au(1)))}function vF(n){return function bi(...n){return Ti(n)}(Cr(e=>{if(xu(e))throw fF(0,e)}),Re(e=>!0===e))}class kv{constructor(e){this.segmentGroup=e||null}}class EF{constructor(e){this.urlTree=e}}function Jd(n){return qd(new kv(n))}function IF(n){return qd(new EF(n))}class NQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new P(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[yt])return qd(new P(4e3,!1));i=i.children[yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Kd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new on(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new P(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const kT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OQ(n,e,t,r,i){const s=FT(n,e,t);return s.matched?(r=function rQ(n,e){return n.providers&&!n._injector&&(n._injector=Jb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function MQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Yd(o,n);return hc(function vQ(n){return n&&dg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Xd(),vF()):k(!0)}(r,e,t).pipe(Re(o=>!0===o?s:{...kT}))):k(s)}function FT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hZ)(t,n,e);if(!i)return{...kT};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function wF(n,e,t,r){return t.length>0&&function LQ(n,e,t){return t.some(r=>Fv(n,e,r)&&ro(r)!==yt)}(n,t,r)?{segmentGroup:new on(e,FQ(r,new on(t,n.children))),slicedSegments:[]}:0===t.length&&function VQ(n,e,t){return t.some(r=>Fv(n,e,r))}(n,t,r)?{segmentGroup:new on(n.segments,kQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new on(n.segments,n.children),slicedSegments:t}}function kQ(n,e,t,r,i){const s={};for(const o of r)if(Fv(n,t,o)&&!i[ro(o)]){const a=new on([],{});s[ro(o)]=a}return{...i,...s}}function FQ(n,e){const t={};t[yt]=e;for(const r of n)if(""===r.path&&ro(r)!==yt){const i=new on([],{});t[ro(r)]=i}return t}function Fv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class $Q{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new NQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new P(4002,!1)}recognize(){const e=wF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,yt).pipe(cc(t=>{if(t instanceof EF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof kv?this.noMatchError(t):t}),Re(t=>{const r=new Pv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yt,this.rootComponentType,null,{}),i=new pa(r,t),s=new lF("",i),o=function xZ(n,e,t=null,r=null){return Xk(Yk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,yt).pipe(cc(r=>{throw r instanceof kv?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=uF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return T(i).pipe(Gd(s=>{const o=r.children[s],a=function aQ(n,e){const t=n.filter(r=>ro(r)===e);return t.push(...n.filter(r=>ro(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),wv((s,o)=>(s.push(...o),s)),Iv(null),function uZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((i,s)=>n(i,s,r)):An,vT(1),t?Iv(e):Vk(()=>new Ev))}(),un(s=>{if(null===s)return Jd(r);const o=bF(s);return function HQ(n){n.sort((e,t)=>e.value.outlet===yt?-1:t.value.outlet===yt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return T(t).pipe(Gd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(cc(c=>{if(c instanceof kv)return k(null);throw c}))),dc(a=>!!a),cc(a=>{if(yF(a))return function BQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):Jd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function UQ(n,e,t,r){return!!(ro(n)===r||r!==yt&&Fv(e,t,n))&&("**"===n.path||FT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Jd(i):Jd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?IF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(un(o=>{const a=new on(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=FT(t,i,s);if(!a)return Jd(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?IF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(un(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Bk(i).parameters:{};a=k({snapshot:new Pv(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TF(r),ro(r),r.component??r._loadedComponent??null,r,CF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=OQ(t,r,i,e).pipe(Re(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Pv(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TF(r),ro(r),r.component??r._loadedComponent??null,r,CF(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe(je(c=>null===c?Jd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(je(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:b,slicedSegments:R}=wF(t,y,I,u);if(0===R.length&&b.hasChildren())return this.processChildren(f,u,b).pipe(Re(z=>null===z?null:[new pa(m,z)]));if(0===u.length&&0===R.length)return k([new pa(m,[])]);const x=ro(r)===s;return this.processSegment(f,u,b,R,x?yt:s,!0).pipe(Re(z=>[new pa(m,z)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function RQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Yd(o,n);return hc(function gQ(n){return n&&dg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Xd(),vF())}(e,t,r).pipe(un(i=>i?this.configLoader.loadChildren(e,t).pipe(Cr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function xQ(n){return qd(pF(!1,3))}())):k({routes:[],injector:e})}}function zQ(n){const e=n.value.routeConfig;return e&&""===e.path}function bF(n){const e=[],t=new Set;for(const r of n){if(!zQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=bF(r.children);e.push(new pa(r.value,i))}return e.filter(r=>!t.has(r))}function TF(n){return n.data||{}}function CF(n){return n.resolve||{}}function AF(n){return"string"==typeof n.title||null===n.title}function LT(n){return je(e=>{const t=n(e);return t?T(t).pipe(Re(()=>e)):k(e)})}const eh=new Ee("ROUTES");let VT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ve(y1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=hc(t.loadComponent()).pipe(Re(DF),Cr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pv(()=>{this.componentLoaders.delete(t)})),i=new Lk(r,()=>new ue).pipe(yT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function YQ(n,e,t,r){return hc(n.loadChildren()).pipe(Re(DF),un(i=>i instanceof EN||Array.isArray(i)?k(i):T(e.compileModuleAsync(i))),Re(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(eh,[],{optional:!0,self:!0}).flat()),{routes:o.map(OT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(pv(()=>{this.childrenLoaders.delete(r)})),o=new Lk(s,()=>new ue).pipe(yT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DF(n){return function XQ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Lv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ue,this.transitionAbortSubject=new ue,this.configLoader=Ve(VT),this.environmentInjector=Ve(Ps),this.urlSerializer=Ve(eg),this.rootContexts=Ve(og),this.inputBindingEnabled=null!==Ve(xv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new zZ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new HZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ig,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ps(s=>0!==s.id),Re(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),je(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(Cr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),je(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Zd(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),qn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(je(y=>{const I=this.transitions?.getValue();return this.events.next(new Rv(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?qn:Promise.resolve(y)}),function qQ(n,e,t,r,i,s){return un(o=>function jQ(n,e,t,r,i,s,o="emptyOnly"){return new $Q(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Re(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Cr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new iF(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:b,restoredState:R,extras:x}=c,z=new Rv(y,this.urlSerializer.serialize(I),b,R);this.events.next(z);const V=cF(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:V,urlAfterRedirects:I,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const y="";return this.events.next(new Zd(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),qn}}),Cr(c=>{const u=new UZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Re(c=>(this.currentTransition=s={...c,guards:lQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function IQ(n,e){return un(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function wQ(n,e,t,r){return T(n).pipe(un(i=>function SQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const c=cg(e)??i,u=Yd(a,c);return hc(function yQ(n){return n&&dg(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(dc())})).pipe(Xd()):k(!0)}(i.component,i.route,t,e,r)),dc(i=>!0!==i,!0))}(o,r,i,n).pipe(un(a=>a&&function pQ(n){return"boolean"==typeof n}(a)?function bQ(n,e,t,r){return T(e).pipe(Gd(i=>hv(function CQ(n,e){return null!==n&&e&&e(new qZ(n)),k(!0)}(i.route.parent,r),function TQ(n,e){return null!==n&&e&&e(new WZ(n)),k(!0)}(i.route,r),function DQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function dQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Fk(()=>k(o.guards.map(c=>{const u=cg(o.node)??t,f=Yd(c,u);return hc(function _Q(n){return n&&dg(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(dc())})).pipe(Xd())));return k(s).pipe(Xd())}(n,i.path,t),function AQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>Fk(()=>{const o=cg(e)??t,a=Yd(s,o);return hc(function mQ(n){return n&&dg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(dc())}));return k(i).pipe(Xd())}(n,i.route,t))),dc(i=>!0!==i,!0))}(r,s,n,e):k(a)),Re(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Cr(c=>{if(s.guardsResult=c.guardsResult,xu(c.guardsResult))throw fF(0,c.guardsResult);const u=new BZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ps(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),LT(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Cr(u=>{const f=new jZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),je(u=>{let f=!1;return k(u).pipe(function GQ(n,e){return un(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return T(i).pipe(Gd(o=>function WQ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!AF(i)&&(s[Xp]=i.title),function KQ(n,e,t,r){const i=function ZQ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return T(i).pipe(un(o=>function QQ(n,e,t,r){const i=cg(e)??r,s=Yd(n,i);return hc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(dc(),Cr(a=>{s[o]=a}))),vT(1),function lZ(n){return Re(()=>n)}(s),cc(o=>yF(o)?qn:qd(o)))}(s,n,e,r).pipe(Re(o=>(n._resolvedData=o,n.data=uF(n,t).resolve,i&&AF(i)&&(n.data[Xp]=i.title),null)))}(o.route,r,n,e)),Cr(()=>s++),vT(1),un(o=>s===i.length?k(t):qn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Cr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),Cr(u=>{const f=new $Z(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),LT(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Cr(y=>{f.component=y}),Re(()=>{})));for(const y of f.children)m.push(...u(y));return m};return dv(u(c.targetSnapshot.root)).pipe(Iv(),Au(1))}),LT(()=>this.afterPreactivation()),Re(c=>{const u=function JZ(n,e,t){const r=ag(n,e._root,t?t._root:void 0);return new aF(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Cr(()=>{this.events.next(new CT)}),((n,e,t,r)=>Re(i=>(new uQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Au(1),Cr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ek(this.transitionAbortSubject.pipe(Cr(c=>{throw c}))),pv(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),cc(c=>{if(a=!0,gF(c))this.events.next(new sg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function nQ(n){return gF(n)&&xu(n.url)}(c)?this.events.next(new AT(c.url)):s.resolve(!1);else{this.events.next(new Mv(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return qn}))}))}cancelNavigationTransition(t,r,i){const s=new sg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SF(n){return n!==ig}let RF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===yt);return r}getResolvedTitleForRoute(t){return t.data[Xp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(JQ)},providedIn:"root"})}return n})(),JQ=(()=>{class n extends RF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(VO))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(nY)},providedIn:"root"})}return n})();class tY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let nY=(()=>{class n extends tY{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vv=new Ee("",{providedIn:"root",factory:()=>({})});let rY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(iY)},providedIn:"root"})}return n})(),iY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(hg||{});function MF(n,e){n.events.pipe(ps(t=>t instanceof fc||t instanceof sg||t instanceof Mv||t instanceof Zd),Re(t=>t instanceof fc||t instanceof Zd?hg.COMPLETE:t instanceof sg&&(0===t.code||1===t.code)?hg.REDIRECTING:hg.FAILED),ps(t=>t!==hg.REDIRECTING),Au(1)).subscribe(()=>{e()})}function sY(n){throw n}function oY(n,e,t){return e.parse("/")}const aY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ti=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ve(m1),this.isNgZoneEnabled=!1,this._events=new ue,this.options=Ve(Vv,{optional:!0})||{},this.pendingTasks=Ve(_1),this.errorHandler=this.options.errorHandler||sY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ve(rY),this.routeReuseStrategy=Ve(eY),this.titleStrategy=Ve(RF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ve(eh,{optional:!0})?.flat()??[],this.navigationTransitions=Ve(Lv),this.urlSerializer=Ve(eg),this.location=Ve(x0),this.componentInputBindingEnabled=!!Ve(xv,{optional:!0}),this.eventsSubscription=new Ut,this.isNgZoneEnabled=Ve(Nt)instanceof Nt&&Nt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=cF(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(PF(r)&&this._events.next(r));if(r instanceof Rv)SF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Zd)this.rawUrlTree=i.rawUrl;else if(r instanceof iF){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof CT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof sg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof AT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||SF(i.source)};this.scheduleNavigation(s,ig,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Mv&&this.restoreHistory(i,!0),r instanceof fc&&(this.navigated=!0),PF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ig,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(OT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=Yk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return Xk(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ig,null,r)}navigate(t,r={skipLocationChange:!1}){return function uY(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new P(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...aY}:!1===r?{...cY}:r,xu(t))return $k(this.currentUrlTree,t,i);const s=this.parseUrl(t);return $k(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return MF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PF(n){return!(n instanceof CT||n instanceof AT)}let Uv=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof fc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function IM(n,e,t){return function y3(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?EM:ds}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ti),pe(pc),function Xa(n){return function H(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Sl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Rr(),n)}("tabindex"),pe(oa),pe(Yi),pe(bu))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ln("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Do("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",$d],skipLocationChange:["skipLocationChange","skipLocationChange",$d],replaceUrl:["replaceUrl","replaceUrl",$d],routerLink:"routerLink"},standalone:!0,features:[OP,Ki]})}return n})();class xF{}let hY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ps(t=>t instanceof fc),Gd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Jb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return T(i).pipe(Vr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(un(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?T([s,this.loader.loadComponent(r)]).pipe(Vr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ti),fe(y1),fe(Ps),fe(xF),fe(VT))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UT=new Ee("");let NF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Zd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function aP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function ga(n,e){return{\u0275kind:n,\u0275providers:e}}function kF(){const n=Ve(ei);return e=>{const t=n.get(Iu);if(e!==t.components[0])return;const r=n.get(ti),i=n.get(FF);1===n.get(BT)&&r.initialNavigation(),n.get(LF,null,It.Optional)?.setUpPreloading(),n.get(UT,null,It.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const FF=new Ee("",{factory:()=>new ue}),BT=new Ee("",{providedIn:"root",factory:()=>1}),LF=new Ee("");function mY(n){return ga(0,[{provide:LF,useExisting:hY},{provide:xF,useExisting:n}])}const VF=new Ee("ROUTER_FORROOT_GUARD"),yY=[x0,{provide:eg,useClass:ET},ti,og,{provide:pc,useFactory:function OF(n){return n.routerState.root},deps:[ti]},VT,[]];function vY(){return new C1("Router",ti)}let UF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yY,[],{provide:eh,multi:!0,useValue:t},{provide:VF,useFactory:bY,deps:[[ti,new br,new ap]]},{provide:Vv,useValue:r||{}},r?.useHash?{provide:bu,useClass:a5}:{provide:bu,useClass:nO},{provide:UT,useFactory:()=>{const n=Ve(A8),e=Ve(Nt),t=Ve(Vv),r=Ve(Lv),i=Ve(eg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new NF(i,r,n,e,t)}},r?.preloadingStrategy?mY(r.preloadingStrategy).\u0275providers:[],{provide:C1,multi:!0,useFactory:vY},r?.initialNavigation?TY(r):[],r?.bindToComponentInputs?ga(8,[hF,{provide:xv,useExisting:hF}]).\u0275providers:[],[{provide:BF,useFactory:kF},{provide:w0,multi:!0,useExisting:BF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:eh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(VF,8))};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({})}return n})();function bY(n){return"guarded"}function TY(n){return["disabled"===n.initialNavigation?ga(3,[{provide:p0,multi:!0,useFactory:()=>{const e=Ve(ti);return()=>{e.setUpLocationChangeListener()}}},{provide:BT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ga(2,[{provide:BT,useValue:0},{provide:p0,multi:!0,deps:[ei],useFactory:e=>{const t=e.get(s5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ti),s=e.get(FF);MF(i,()=>{r(!0)}),e.get(Lv).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const BF=new Ee("");var tr=et(534);(0,tr.registerVersion)("firebase","10.12.2","app");const MY=new class RY extends XO{}(class SY extends YO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),gc=new tc("ANGULARFIRE2_VERSION");function jT(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Bv=(n,e)=>{const t=e?[e]:(0,tr.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class fg{constructor(){return Bv(PY)}}const PY="app-check";function th(){}class jF{zone;delegate;constructor(e,t=MY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class xY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",th,{},th,th)),t.pipe(Cr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jF(Zone.current)),this.insideAngular=t.run(()=>new jF(Zone.current,cT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(fe(Nt))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Nu(n){return rh().ngZone.run(()=>n())}function $F(n){return n.pipe(Sn(rh().outsideAngular))}function Ni(n){return function OY(n){return function(t){return(t=t.lift(new xY(n.ngZone))).pipe(Ur(n.outsideAngular),Sn(n.insideAngular))}}(rh())(n)}const kY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Nu(()=>n.apply(void 0,r))},$T=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Nu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",th,{},th,th))),r[s]=kY(r[s],t));const i=function NY(n){return rh().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof pt){const s=rh();return i.pipe(Ur(s.outsideAngular),Sn(s.insideAngular))}return Nu(()=>i)}return i instanceof pt?i.pipe(Ni):i instanceof Promise?Nu(()=>new Promise((s,o)=>i.then(a=>Nu(()=>s(a)),a=>Nu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Nu(()=>i)};var No=et(106);No.Z.registerVersion("firebase","10.12.2","app-compat");const VY=["ngOnDestroy"];class HF{constructor(e){return e}}const pg=new Ee("angularfire2.app.options"),gg=new Ee("angularfire2.app.name");function jv(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=No.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>No.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;jY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new HF(o)}const jY=(n,...e)=>{},$Y={provide:HF,useFactory:jv,deps:[pg,Nt,[new br,gg]]};let HY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:pg,useValue:t},{provide:gg,useValue:r}]}}constructor(t){No.Z.registerVersion("angularfire",gc.full,"core"),No.Z.registerVersion("angularfire",gc.full,"app-compat"),No.Z.registerVersion("angular",db.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(xs))};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[$Y]})}return n})();function HT(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function zY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(zF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${qY?" You may need to reload as Firebase is not HMR aware.":""}`),zF("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const qY=typeof module<"u"&&!!module.hot,zF=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],et(365);class GY extends ue{constructor(e=1/0,t=1/0,r=aT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function qF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,he({connector:()=>new GY(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function GF(n,e){return M(e)?je(()=>n,e):je(()=>n)}const WF=new Ee("angularfire2.auth.use-emulator"),KF=new Ee("angularfire2.auth.settings"),ZF=new Ee("angularfire2.auth.tenant-id"),QF=new Ee("angularfire2.auth.langugage-code"),YF=new Ee("angularfire2.auth.use-device-language"),XF=new Ee("angularfire.auth.persistence"),JF=(n,e,t,r,i,s,o,a)=>HT(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let eL=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const b=new ue,R=k(void 0).pipe(Sn(o.outsideAngular),je(()=>s.runOutsideAngular(()=>Promise.resolve().then(et.bind(et,365)))),Re(()=>jv(t,s,r)),Re(x=>JF(x,s,a,u,f,m,c,y)),qF({bufferSize:1,refCount:!1}));if(sv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{R.pipe(dc()).subscribe();const x=R.pipe(je(Q=>Q.getRedirectResult().then(ie=>ie,()=>null)),Ni,qF({bufferSize:1,refCount:!1})),z=R.pipe(je(Q=>new pt(ie=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(Ce=>ie.next(Ce),Ce=>ie.error(Ce),()=>ie.complete()))})))),V=R.pipe(je(Q=>new pt(ie=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(Ce=>ie.next(Ce),Ce=>ie.error(Ce),()=>ie.complete()))}))));this.authState=x.pipe(GF(z),Ur(o.outsideAngular),Sn(o.insideAngular)),this.user=x.pipe(GF(V),Ur(o.outsideAngular),Sn(o.insideAngular)),this.idToken=this.user.pipe(je(Q=>Q?T(Q.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(je(Q=>Q?T(Q.getIdTokenResult()):k(null))),this.credential=S(x,b,this.authState.pipe(ps(Q=>!Q))).pipe(Re(Q=>Q?.user?Q:null),Ur(o.outsideAngular),Sn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(VY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,R,s,{spy:{apply:(x,z,V)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&V.then(Q=>b.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(fe(pg),fe(gg,8),fe(xs),fe(Nt),fe(nh),fe(WF,8),fe(KF,8),fe(ZF,8),fe(QF,8),fe(YF,8),fe(XF,8),fe(fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function zT(){return ce((n,e)=>{let t,r=!1;n.subscribe(Se(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ou,rL,le=et(861),$v=et(537),Oo=et(879),_t=et(58),tL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nL={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i($,N,L){L||(L=0);var q=Array(16);if("string"==typeof N)for(var W=0;16>W;++W)q[W]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(W=0;16>W;++W)q[W]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;var ee=$.g[3],B=(N=$.g[0])+(ee^(L=$.g[1])&((W=$.g[2])^ee))+q[0]+3614090360&4294967295;B=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=(L=(W=(ee=(N=L+(B<<7&4294967295|B>>>25))+((B=ee+(W^N&(L^W))+q[1]+3905402710&4294967295)<<12&4294967295|B>>>20))+((B=W+(L^ee&(N^L))+q[2]+606105819&4294967295)<<17&4294967295|B>>>15))+((B=L+(N^W&(ee^N))+q[3]+3250441966&4294967295)<<22&4294967295|B>>>10))+((B=N+(ee^L&(W^ee))+q[4]+4118548399&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^N&(L^W))+q[5]+1200080426&4294967295)<<12&4294967295|B>>>20))+((B=W+(L^ee&(N^L))+q[6]+2821735955&4294967295)<<17&4294967295|B>>>15))+((B=L+(N^W&(ee^N))+q[7]+4249261313&4294967295)<<22&4294967295|B>>>10))+((B=N+(ee^L&(W^ee))+q[8]+1770035416&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^N&(L^W))+q[9]+2336552879&4294967295)<<12&4294967295|B>>>20))+((B=W+(L^ee&(N^L))+q[10]+4294925233&4294967295)<<17&4294967295|B>>>15))+((B=L+(N^W&(ee^N))+q[11]+2304563134&4294967295)<<22&4294967295|B>>>10))+((B=N+(ee^L&(W^ee))+q[12]+1804603682&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^N&(L^W))+q[13]+4254626195&4294967295)<<12&4294967295|B>>>20))+((B=W+(L^ee&(N^L))+q[14]+2792965006&4294967295)<<17&4294967295|B>>>15))+((B=L+(N^W&(ee^N))+q[15]+1236535329&4294967295)<<22&4294967295|B>>>10))+((B=N+(W^ee&(L^W))+q[1]+4129170786&4294967295)<<5&4294967295|B>>>27))+((B=ee+(L^W&(N^L))+q[6]+3225465664&4294967295)<<9&4294967295|B>>>23))+((B=W+(N^L&(ee^N))+q[11]+643717713&4294967295)<<14&4294967295|B>>>18))+((B=L+(ee^N&(W^ee))+q[0]+3921069994&4294967295)<<20&4294967295|B>>>12))+((B=N+(W^ee&(L^W))+q[5]+3593408605&4294967295)<<5&4294967295|B>>>27))+((B=ee+(L^W&(N^L))+q[10]+38016083&4294967295)<<9&4294967295|B>>>23))+((B=W+(N^L&(ee^N))+q[15]+3634488961&4294967295)<<14&4294967295|B>>>18))+((B=L+(ee^N&(W^ee))+q[4]+3889429448&4294967295)<<20&4294967295|B>>>12))+((B=N+(W^ee&(L^W))+q[9]+568446438&4294967295)<<5&4294967295|B>>>27))+((B=ee+(L^W&(N^L))+q[14]+3275163606&4294967295)<<9&4294967295|B>>>23))+((B=W+(N^L&(ee^N))+q[3]+4107603335&4294967295)<<14&4294967295|B>>>18))+((B=L+(ee^N&(W^ee))+q[8]+1163531501&4294967295)<<20&4294967295|B>>>12))+((B=N+(W^ee&(L^W))+q[13]+2850285829&4294967295)<<5&4294967295|B>>>27))+((B=ee+(L^W&(N^L))+q[2]+4243563512&4294967295)<<9&4294967295|B>>>23))+((B=W+(N^L&(ee^N))+q[7]+1735328473&4294967295)<<14&4294967295|B>>>18))+((B=L+(ee^N&(W^ee))+q[12]+2368359562&4294967295)<<20&4294967295|B>>>12))+((B=N+(L^W^ee)+q[5]+4294588738&4294967295)<<4&4294967295|B>>>28))+((B=ee+(N^L^W)+q[8]+2272392833&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^N^L)+q[11]+1839030562&4294967295)<<16&4294967295|B>>>16))+((B=L+(W^ee^N)+q[14]+4259657740&4294967295)<<23&4294967295|B>>>9))+((B=N+(L^W^ee)+q[1]+2763975236&4294967295)<<4&4294967295|B>>>28))+((B=ee+(N^L^W)+q[4]+1272893353&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^N^L)+q[7]+4139469664&4294967295)<<16&4294967295|B>>>16))+((B=L+(W^ee^N)+q[10]+3200236656&4294967295)<<23&4294967295|B>>>9))+((B=N+(L^W^ee)+q[13]+681279174&4294967295)<<4&4294967295|B>>>28))+((B=ee+(N^L^W)+q[0]+3936430074&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^N^L)+q[3]+3572445317&4294967295)<<16&4294967295|B>>>16))+((B=L+(W^ee^N)+q[6]+76029189&4294967295)<<23&4294967295|B>>>9))+((B=N+(L^W^ee)+q[9]+3654602809&4294967295)<<4&4294967295|B>>>28))+((B=ee+(N^L^W)+q[12]+3873151461&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^N^L)+q[15]+530742520&4294967295)<<16&4294967295|B>>>16))+((B=L+(W^ee^N)+q[2]+3299628645&4294967295)<<23&4294967295|B>>>9))+((B=N+(W^(L|~ee))+q[0]+4096336452&4294967295)<<6&4294967295|B>>>26))+((B=ee+(L^(N|~W))+q[7]+1126891415&4294967295)<<10&4294967295|B>>>22))+((B=W+(N^(ee|~L))+q[14]+2878612391&4294967295)<<15&4294967295|B>>>17))+((B=L+(ee^(W|~N))+q[5]+4237533241&4294967295)<<21&4294967295|B>>>11))+((B=N+(W^(L|~ee))+q[12]+1700485571&4294967295)<<6&4294967295|B>>>26))+((B=ee+(L^(N|~W))+q[3]+2399980690&4294967295)<<10&4294967295|B>>>22))+((B=W+(N^(ee|~L))+q[10]+4293915773&4294967295)<<15&4294967295|B>>>17))+((B=L+(ee^(W|~N))+q[1]+2240044497&4294967295)<<21&4294967295|B>>>11))+((B=N+(W^(L|~ee))+q[8]+1873313359&4294967295)<<6&4294967295|B>>>26))+((B=ee+(L^(N|~W))+q[15]+4264355552&4294967295)<<10&4294967295|B>>>22))+((B=W+(N^(ee|~L))+q[6]+2734768916&4294967295)<<15&4294967295|B>>>17))+((B=L+(ee^(W|~N))+q[13]+1309151649&4294967295)<<21&4294967295|B>>>11))+((ee=(N=L+((B=N+(W^(L|~ee))+q[4]+4149444226&4294967295)<<6&4294967295|B>>>26))+((B=ee+(L^(N|~W))+q[11]+3174756917&4294967295)<<10&4294967295|B>>>22))^((W=ee+((B=W+(N^(ee|~L))+q[2]+718787259&4294967295)<<15&4294967295|B>>>17))|~N))+q[9]+3951481745&4294967295,$.g[0]=$.g[0]+N&4294967295,$.g[1]=$.g[1]+(W+(B<<21&4294967295|B>>>11))&4294967295,$.g[2]=$.g[2]+W&4294967295,$.g[3]=$.g[3]+ee&4294967295}function o($,N){this.h=N;for(var L=[],q=!0,W=$.length-1;0<=W;W--){var ee=0|$[W];q&&ee==N||(L[W]=ee,q=!1)}this.g=L}(function e($,N){function L(){}L.prototype=N.prototype,$.D=N.prototype,$.prototype=new L,$.prototype.constructor=$,$.C=function(q,W,ee){for(var B=Array(arguments.length-2),Vs=2;Vs<arguments.length;Vs++)B[Vs-2]=arguments[Vs];return N.prototype[W].apply(q,B)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function($,N){void 0===N&&(N=$.length);for(var L=N-this.blockSize,q=this.B,W=this.h,ee=0;ee<N;){if(0==W)for(;ee<=L;)i(this,$,ee),ee+=this.blockSize;if("string"==typeof $){for(;ee<N;)if(q[W++]=$.charCodeAt(ee++),W==this.blockSize){i(this,q),W=0;break}}else for(;ee<N;)if(q[W++]=$[ee++],W==this.blockSize){i(this,q),W=0;break}}this.h=W,this.o+=N},r.prototype.v=function(){var $=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);$[0]=128;for(var N=1;N<$.length-8;++N)$[N]=0;var L=8*this.o;for(N=$.length-8;N<$.length;++N)$[N]=255&L,L/=256;for(this.u($),$=Array(16),N=L=0;4>N;++N)for(var q=0;32>q;q+=8)$[L++]=this.g[N]>>>q&255;return $};var a={};function c($){return-128<=$&&128>$?function s($,N){var L=a;return Object.prototype.hasOwnProperty.call(L,$)?L[$]:L[$]=N($)}($,function(N){return new o([0|N],0>N?-1:0)}):new o([0|$],0>$?-1:0)}function u($){if(isNaN($)||!isFinite($))return m;if(0>$)return x(u(-$));for(var N=[],L=1,q=0;$>=L;q++)N[q]=$/L|0,L*=4294967296;return new o(N,0)}var m=c(0),y=c(1),I=c(16777216);function b($){if(0!=$.h)return!1;for(var N=0;N<$.g.length;N++)if(0!=$.g[N])return!1;return!0}function R($){return-1==$.h}function x($){for(var N=$.g.length,L=[],q=0;q<N;q++)L[q]=~$.g[q];return new o(L,~$.h).add(y)}function z($,N){return $.add(x(N))}function V($,N){for(;(65535&$[N])!=$[N];)$[N+1]+=$[N]>>>16,$[N]&=65535,N++}function Q($,N){this.g=$,this.h=N}function ie($,N){if(b(N))throw Error("division by zero");if(b($))return new Q(m,m);if(R($))return N=ie(x($),N),new Q(x(N.g),x(N.h));if(R(N))return N=ie($,x(N)),new Q(x(N.g),N.h);if(30<$.g.length){if(R($)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var L=y,q=N;0>=q.l($);)L=Ce(L),q=Ce(q);var W=ke(L,1),ee=ke(q,1);for(q=ke(q,2),L=ke(L,2);!b(q);){var B=ee.add(q);0>=B.l($)&&(W=W.add(L),ee=B),q=ke(q,1),L=ke(L,1)}return N=z($,W.j(N)),new Q(W,N)}for(W=m;0<=$.l(N);){for(L=Math.max(1,Math.floor($.m()/N.m())),q=48>=(q=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,q-48),B=(ee=u(L)).j(N);R(B)||0<B.l($);)B=(ee=u(L-=q)).j(N);b(ee)&&(ee=y),W=W.add(ee),$=z($,B)}return new Q(W,$)}function Ce($){for(var N=$.g.length+1,L=[],q=0;q<N;q++)L[q]=$.i(q)<<1|$.i(q-1)>>>31;return new o(L,$.h)}function ke($,N){var L=N>>5;N%=32;for(var q=$.g.length-L,W=[],ee=0;ee<q;ee++)W[ee]=0<N?$.i(ee+L)>>>N|$.i(ee+L+1)<<32-N:$.i(ee+L);return new o(W,$.h)}(n=o.prototype).m=function(){if(R(this))return-x(this).m();for(var $=0,N=1,L=0;L<this.g.length;L++){var q=this.i(L);$+=(0<=q?q:4294967296+q)*N,N*=4294967296}return $},n.toString=function($){if(2>($=$||10)||36<$)throw Error("radix out of range: "+$);if(b(this))return"0";if(R(this))return"-"+x(this).toString($);for(var N=u(Math.pow($,6)),L=this,q="";;){var W=ie(L,N).g,ee=((0<(L=z(L,W.j(N))).g.length?L.g[0]:L.h)>>>0).toString($);if(b(L=W))return ee+q;for(;6>ee.length;)ee="0"+ee;q=ee+q}},n.i=function($){return 0>$?0:$<this.g.length?this.g[$]:this.h},n.l=function($){return R($=z(this,$))?-1:b($)?0:1},n.abs=function(){return R(this)?x(this):this},n.add=function($){for(var N=Math.max(this.g.length,$.g.length),L=[],q=0,W=0;W<=N;W++){var ee=q+(65535&this.i(W))+(65535&$.i(W)),B=(ee>>>16)+(this.i(W)>>>16)+($.i(W)>>>16);q=B>>>16,L[W]=(B&=65535)<<16|(ee&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function($){if(b(this)||b($))return m;if(R(this))return R($)?x(this).j(x($)):x(x(this).j($));if(R($))return x(this.j(x($)));if(0>this.l(I)&&0>$.l(I))return u(this.m()*$.m());for(var N=this.g.length+$.g.length,L=[],q=0;q<2*N;q++)L[q]=0;for(q=0;q<this.g.length;q++)for(var W=0;W<$.g.length;W++){var ee=this.i(q)>>>16,B=65535&this.i(q),Vs=$.i(W)>>>16,Bc=65535&$.i(W);L[2*q+2*W]+=B*Bc,V(L,2*q+2*W),L[2*q+2*W+1]+=ee*Bc,V(L,2*q+2*W+1),L[2*q+2*W+1]+=B*Vs,V(L,2*q+2*W+1),L[2*q+2*W+2]+=ee*Vs,V(L,2*q+2*W+2)}for(q=0;q<N;q++)L[q]=L[2*q+1]<<16|L[2*q];for(q=N;q<2*N;q++)L[q]=0;return new o(L,0)},n.A=function($){return ie(this,$).h},n.and=function($){for(var N=Math.max(this.g.length,$.g.length),L=[],q=0;q<N;q++)L[q]=this.i(q)&$.i(q);return new o(L,this.h&$.h)},n.or=function($){for(var N=Math.max(this.g.length,$.g.length),L=[],q=0;q<N;q++)L[q]=this.i(q)|$.i(q);return new o(L,this.h|$.h)},n.xor=function($){for(var N=Math.max(this.g.length,$.g.length),L=[],q=0;q<N;q++)L[q]=this.i(q)^$.i(q);return new o(L,this.h^$.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rL=nL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f($,N){if(0==$.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==$.charAt(0))return x(f($.substring(1),N));if(0<=$.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),q=m,W=0;W<$.length;W+=8){var ee=Math.min(8,$.length-W),B=parseInt($.substring(W,W+ee),N);8>ee?(ee=u(Math.pow(N,ee)),q=q.j(ee).add(u(B))):q=(q=q.j(L)).add(u(B))}return q},Ou=nL.Integer=o}).apply(typeof tL<"u"?tL:typeof self<"u"?self:typeof window<"u"?window:{});var iL,sL,mg,oL,zv,qT,aL,cL,uL,Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ma={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Hv&&Hv];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var Y=h[D];if(!(Y in E))break e;E=E[Y]}(_=_(D=E[h=h[h.length-1]]))!=D&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,D=!1,Y={next:function(){if(!D&&E<h.length){var ae=E++;return{value:_(ae,h[ae]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,D),h.apply(_,Y)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function b(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(D,Y,ae){for(var Pe=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)Pe[_n-2]=arguments[_n];return _.prototype[Y].apply(D,Pe)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let D=0;D<_;D++)E[D]=h[D];return E}return[]}function x(h,_){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const Y=h.length||0,ae=D.length||0;h.length=Y+ae;for(let Pe=0;Pe<ae;Pe++)h[Y+Pe]=D[Pe]}else h.push(D)}}function V(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var Ce=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function ke(h,_,E){for(const D in h)_.call(E,h[D],D,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,_){let E,D;for(let Y=1;Y<arguments.length;Y++){for(E in D=arguments[Y],D)h[E]=D[E];for(let ae=0;ae<L.length;ae++)E=L[ae],Object.prototype.hasOwnProperty.call(D,E)&&(h[E]=D[E])}}function W(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ee(h){a.setTimeout(()=>{throw h},0)}function B(){var h=Ot;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Bc=new class z{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new He,h=>h.reset());class He{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,Je=!1,Ot=new class Vs{constructor(){this.h=this.g=null}add(_,E){const D=Bc.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}},pr=()=>{const h=a.Promise.resolve(void 0);Xe=()=>{h.then(Us)}};var Us=()=>{for(var h;h=B();){try{h.h.call(h.g)}catch(E){ee(E)}var _=Bc;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Je=!1};function rr(){this.s=this.s,this.C=this.C}function On(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rr.prototype.s=!1,rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},On.prototype.h=function(){this.defaultPrevented=!0};var kn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function jc(h,_){if(On.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ce){e:{try{ie(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:AS[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&jc.aa.h.call(this)}}b(jc,On);var AS={2:"touch",3:"pen",4:"mouse"};jc.prototype.h=function(){jc.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Ma=0;function rs(h,_,E,D,Y){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=Y,this.key=++Ma,this.da=this.fa=!1}function Pa(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function $c(h){this.src=h,this.g={},this.h=0}function DS(h,_){var E=_.type;if(E in h.g){var ae,D=h.g[E],Y=Array.prototype.indexOf.call(D,_,void 0);(ae=0<=Y)&&Array.prototype.splice.call(D,Y,1),ae&&(Pa(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function SS(h,_,E,D){for(var Y=0;Y<h.length;++Y){var ae=h[Y];if(!ae.da&&ae.listener==_&&ae.capture==!!E&&ae.ha==D)return Y}return-1}$c.prototype.add=function(h,_,E,D,Y){var ae=h.toString();(h=this.g[ae])||(h=this.g[ae]=[],this.h++);var Pe=SS(h,_,D,Y);return-1<Pe?(_=h[Pe],E||(_.fa=!1)):((_=new rs(_,this.src,ae,!!D,Y)).fa=E,h.push(_)),_};var RS="closure_lm_"+(1e6*Math.random()|0),MS={};function N$(h,_,E,D,Y){if(D&&D.once)return k$(h,_,E,D,Y);if(Array.isArray(_)){for(var ae=0;ae<_.length;ae++)N$(h,_[ae],E,D,Y);return null}return E=OS(E),h&&h[ir]?h.K(_,E,u(D)?!!D.capture:!!D,Y):O$(h,_,E,!1,D,Y)}function O$(h,_,E,D,Y,ae){if(!_)throw Error("Invalid event type");var Pe=u(Y)?!!Y.capture:!!Y,_n=xS(h);if(_n||(h[RS]=_n=new $c(h)),(E=_n.add(_,E,D,Pe,ae)).proxy)return E;if(D=function ice(){const _=sce;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=D,D.src=h,D.listener=E,h.addEventListener)kn||(Y=Pe),void 0===Y&&(Y=!1),h.addEventListener(_.toString(),D,Y);else if(h.attachEvent)h.attachEvent(L$(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return E}function k$(h,_,E,D,Y){if(Array.isArray(_)){for(var ae=0;ae<_.length;ae++)k$(h,_[ae],E,D,Y);return null}return E=OS(E),h&&h[ir]?h.L(_,E,u(D)?!!D.capture:!!D,Y):O$(h,_,E,!0,D,Y)}function F$(h,_,E,D,Y){if(Array.isArray(_))for(var ae=0;ae<_.length;ae++)F$(h,_[ae],E,D,Y);else D=u(D)?!!D.capture:!!D,E=OS(E),h&&h[ir]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=SS(ae=h.g[_],E,D,Y))&&(Pa(ae[E]),Array.prototype.splice.call(ae,E,1),0==ae.length&&(delete h.g[_],h.h--))):h&&(h=xS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=SS(_,E,D,Y)),(E=-1<h?_[h]:null)&&PS(E))}function PS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[ir])DS(_.i,h);else{var E=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(E,D,h.capture):_.detachEvent?_.detachEvent(L$(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=xS(_))?(DS(E,h),0==E.h&&(E.src=null,_[RS]=null)):Pa(h)}}}function L$(h){return h in MS?MS[h]:MS[h]="on"+h}function sce(h,_){if(h.da)h=!0;else{_=new jc(_,this);var E=h.listener,D=h.ha||h.src;h.fa&&PS(h),h=E.call(D,_)}return h}function xS(h){return(h=h[RS])instanceof $c?h:null}var NS="__closure_events_fn_"+(1e9*Math.random()>>>0);function OS(h){return"function"==typeof h?h:(h[NS]||(h[NS]=function(_){return h.handleEvent(_)}),h[NS])}function Ei(){rr.call(this),this.i=new $c(this),this.M=this,this.F=null}function Ui(h,_){var E,D=h.F;if(D)for(E=[];D;D=D.F)E.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new On(_,h);else if(_ instanceof On)_.target=_.target||h;else{var Y=_;q(_=new On(D,h),Y)}if(Y=!0,E)for(var ae=E.length-1;0<=ae;ae--){var Pe=_.g=E[ae];Y=CI(Pe,D,!0,_)&&Y}if(Y=CI(Pe=_.g=h,D,!0,_)&&Y,Y=CI(Pe,D,!1,_)&&Y,E)for(ae=0;ae<E.length;ae++)Y=CI(Pe=_.g=E[ae],D,!1,_)&&Y}function CI(h,_,E,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var Y=!0,ae=0;ae<_.length;++ae){var Pe=_[ae];if(Pe&&!Pe.da&&Pe.capture==E){var _n=Pe.listener,si=Pe.ha||Pe.src;Pe.fa&&DS(h.i,Pe),Y=!1!==_n.call(si,D)&&Y}}return Y&&!D.defaultPrevented}function V$(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function U$(h){h.g=V$(()=>{h.g=null,h.i&&(h.i=!1,U$(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(Ei,rr),Ei.prototype[ir]=!0,Ei.prototype.removeEventListener=function(h,_,E,D){F$(this,h,_,E,D)},Ei.prototype.N=function(){if(Ei.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],D=0;D<E.length;D++)Pa(E[D]);delete h.g[_],h.h--}}this.F=null},Ei.prototype.K=function(h,_,E,D){return this.i.add(String(h),_,!1,E,D)},Ei.prototype.L=function(h,_,E,D){return this.i.add(String(h),_,!0,E,D)};class oce extends rr{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:U$(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bm(h){rr.call(this),this.h=h,this.g={}}b(bm,rr);var B$=[];function j$(h){ke(h.g,function(_,E){this.g.hasOwnProperty(E)&&PS(_)},h),h.g={}}bm.prototype.N=function(){bm.aa.N.call(this),j$(this)},bm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kS=a.JSON.stringify,ace=a.JSON.parse,cce=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function FS(){}function H$(){}FS.prototype.h=null;var Tm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function LS(){On.call(this,"d")}function VS(){On.call(this,"c")}b(LS,On),b(VS,On);var hl={},z$=null;function AI(){return z$=z$||new Ei}function q$(h){On.call(this,hl.La,h)}function Cm(h){const _=AI();Ui(_,new q$(_))}function G$(h,_){On.call(this,hl.STAT_EVENT,h),this.stat=_}function Bi(h){const _=AI();Ui(_,new G$(_,h))}function W$(h,_){On.call(this,hl.Ma,h),this.size=_}function Am(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Dm(){this.g=!0}function Yh(h,_,E,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function hce(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var D=E[h];if(!(2>D.length)){var Y=D[1];if(Array.isArray(Y)&&!(1>Y.length)){var ae=Y[0];if("noop"!=ae&&"stop"!=ae&&"close"!=ae)for(var Pe=1;Pe<Y.length;Pe++)Y[Pe]=""}}}return kS(E)}catch{return _}}(h,E)+(D?" "+D:"")})}hl.La="serverreachability",b(q$,On),hl.STAT_EVENT="statevent",b(G$,On),hl.Ma="timingevent",b(W$,On),Dm.prototype.xa=function(){this.g=!1},Dm.prototype.info=function(){};var US,DI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function SI(){}function Hc(h,_,E,D){this.j=h,this.i=_,this.l=E,this.R=D||1,this.U=new bm(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Z$}function Z$(){this.i=null,this.g="",this.h=!1}b(SI,FS),SI.prototype.g=function(){return new XMLHttpRequest},SI.prototype.i=function(){return{}},US=new SI;var Q$={},BS={};function jS(h,_,E){h.L=1,h.v=xI(xa(_)),h.m=E,h.P=!0,Y$(h,null)}function Y$(h,_){h.F=Date.now(),RI(h),h.A=xa(h.v);var E=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),dH(E.i,"t",D),h.C=0,E=h.j.J,h.h=new Z$,h.g=RH(h.j,E?_:null,!h.m),0<h.O&&(h.M=new oce(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,D=h.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(B$[0]=Y.toString()),Y=B$);for(var ae=0;ae<Y.length;ae++){var Pe=N$(E,Y[ae],D||_.handleEvent,!1,_.h||_);if(!Pe)break;_.g[Pe.key]=Pe}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Cm(),function uce(h,_,E,D,Y,ae){h.info(function(){if(h.g)if(ae)for(var Pe="",_n=ae.split("&"),si=0;si<_n.length;si++){var Wt=_n[si].split("=");if(1<Wt.length){var Ii=Wt[0];Wt=Wt[1];var wi=Ii.split("_");Pe=2<=wi.length&&"type"==wi[1]?Pe+(Ii+"=")+Wt+"&":Pe+(Ii+"=redacted&")}}else Pe=null;else Pe=ae;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+_+"\n"+E+"\n"+Pe})}(h.i,h.u,h.A,h.l,h.R,h.m)}function X$(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function fce(h,_){var E=h.C,D=_.indexOf("\n",E);return-1==D?BS:(E=Number(_.substring(E,D)),isNaN(E)?Q$:(D+=1)+E>_.length?BS:(_=_.slice(D,D+E),h.C=D+E,_))}function RI(h){h.S=Date.now()+h.I,J$(h,h.I)}function J$(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Am(y(h.ba,h),_)}function $S(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Sm(h){0==h.j.G||h.J||CH(h.j,h)}function fl(h){$S(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,j$(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function HS(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||zS(E.h,h)))if(!h.K&&zS(E.h,h)&&3==E.G){try{var D=E.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var Y=D;if(0==Y[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;LI(E),kI(E)}KS(E),Bi(18)}}else E.za=Y[1],0<E.za-E.T&&37500>Y[2]&&E.F&&0==E.v&&!E.C&&(E.C=Am(y(E.Za,E),6e3));if(1>=nH(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else gl(E,11)}else if((h.K||E.g==h)&&LI(E),!V(_))for(Y=E.Da.g.parse(_),_=0;_<Y.length;_++){let Wt=Y[_];if(E.T=Wt[0],Wt=Wt[1],2==E.G)if("c"==Wt[0]){E.K=Wt[1],E.ia=Wt[2];const Ii=Wt[3];null!=Ii&&(E.la=Ii,E.j.info("VER="+E.la));const wi=Wt[4];null!=wi&&(E.Aa=wi,E.j.info("SVER="+E.Aa));const ef=Wt[5];null!=ef&&"number"==typeof ef&&0<ef&&(E.L=D=1.5*ef,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const oo=h.g;if(oo){const UI=oo.g?oo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(UI){var ae=D.h;ae.g||-1==UI.indexOf("spdy")&&-1==UI.indexOf("quic")&&-1==UI.indexOf("h2")||(ae.j=ae.l,ae.g=new Set,ae.h&&(qS(ae,ae.h),ae.h=null))}if(D.D){const QS=oo.g?oo.g.getResponseHeader("X-HTTP-Session-Id"):null;QS&&(D.ya=QS,Fn(D.I,D.D,QS))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Pe=h;if((D=E).qa=SH(D,D.J?D.ia:null,D.W),Pe.K){rH(D.h,Pe);var _n=Pe,si=D.L;si&&(_n.I=si),_n.B&&($S(_n),RI(_n)),D.g=Pe}else bH(D);0<E.i.length&&FI(E)}else"stop"!=Wt[0]&&"close"!=Wt[0]||gl(E,7);else 3==E.G&&("stop"==Wt[0]||"close"==Wt[0]?"stop"==Wt[0]?gl(E,7):WS(E):"noop"!=Wt[0]&&E.l&&E.l.ta(Wt),E.v=0)}Cm()}catch{}}function eH(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tH(h){return!!h.h||!!h.g&&h.g.size>=h.j}function nH(h){return h.h?1:h.g?h.g.size:0}function zS(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function qS(h,_){h.g?h.g.add(_):h.h=_}function rH(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function iH(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function sH(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function mce(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const D in h)_[E++]=D;return _}}}(h),D=function gce(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,D=0;D<E;D++)_.push(h[D]);return _}for(D in _=[],E=0,h)_[E++]=h[D];return _}(h),Y=D.length,ae=0;ae<Y;ae++)_.call(void 0,D[ae],E&&E[ae],h)}Hc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Na(h)?_.j():this.Y(h)},Hc.prototype.Y=function(h){try{if(h==this.g)e:{const wi=Na(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>wi)&&(3!=wi||this.g&&(this.h.h||this.g.oa()||yH(this.g)))){this.J||4!=wi||7==_||Cm(),$S(this);var E=this.g.Z();this.X=E;t:if(X$(this)){var D=yH(this.g);h="";var Y=D.length,ae=4==Na(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){fl(this),Sm(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ae&&_==Y-1)});D.length=0,this.h.g+=h,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=200==E,function lce(h,_,E,D,Y,ae,Pe){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+_+"\n"+E+"\n"+ae+" "+Pe})}(this.i,this.u,this.A,this.l,this.R,wi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var _n,si=this.g;if((_n=si.g?si.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(_n)){var Wt=_n;break t}}Wt=null}if(!(E=Wt)){this.o=!1,this.s=3,Bi(12),fl(this),Sm(this);break e}Yh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,HS(this,E)}if(this.P){let oo;for(E=!0;!this.J&&this.C<Pe.length;){if(oo=fce(this,Pe),oo==BS){4==wi&&(this.s=4,Bi(14),E=!1),Yh(this.i,this.l,null,"[Incomplete Response]");break}if(oo==Q$){this.s=4,Bi(15),Yh(this.i,this.l,Pe,"[Invalid Chunk]"),E=!1;break}Yh(this.i,this.l,oo,null),HS(this,oo)}if(X$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=wi||0!=Pe.length||this.h.h||(this.s=1,Bi(16),E=!1),this.o=this.o&&E,E){if(0<Pe.length&&!this.W){this.W=!0;var Ii=this.j;Ii.g==this&&Ii.ba&&!Ii.M&&(Ii.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),ZS(Ii),Ii.M=!0,Bi(11))}}else Yh(this.i,this.l,Pe,"[Invalid Chunked Response]"),fl(this),Sm(this)}else Yh(this.i,this.l,Pe,null),HS(this,Pe);4==wi&&fl(this),this.o&&!this.J&&(4==wi?CH(this.j,this):(this.o=!1,RI(this)))}else(function Mce(h){const _={};h=(h.g&&2<=Na(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(V(h[D]))continue;var E=W(h[D]);const Y=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ae=_[Y]||[];_[Y]=ae,ae.push(E)}!function $(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(D){return D.join(", ")})})(this.g),400==E&&0<Pe.indexOf("Unknown SID")?(this.s=3,Bi(12)):(this.s=0,Bi(13)),fl(this),Sm(this)}}}catch{}},Hc.prototype.cancel=function(){this.J=!0,fl(this)},Hc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function dce(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Cm(),Bi(17)),fl(this),this.s=2,Sm(this)):J$(this,this.S-h)},eH.prototype.cancel=function(){if(this.i=iH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var oH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof pl){this.h=h.h,MI(this,h.j),this.o=h.o,this.g=h.g,PI(this,h.s),this.l=h.l;var _=h.i,E=new Pm;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),aH(this,E),this.m=h.m}else h&&(_=String(h).match(oH))?(this.h=!1,MI(this,_[1]||"",!0),this.o=Rm(_[2]||""),this.g=Rm(_[3]||"",!0),PI(this,_[4]),this.l=Rm(_[5]||"",!0),aH(this,_[6]||"",!0),this.m=Rm(_[7]||"")):(this.h=!1,this.i=new Pm(null,this.h))}function xa(h){return new pl(h)}function MI(h,_,E){h.j=E?Rm(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function PI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function aH(h,_,E){_ instanceof Pm?(h.i=_,function bce(h,_){_&&!h.j&&(zc(h),h.i=null,h.g.forEach(function(E,D){var Y=D.toLowerCase();D!=Y&&(uH(this,D),dH(this,Y,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Mm(_,Ice)),h.i=new Pm(_,h.h))}function Fn(h,_,E){h.i.set(_,E)}function xI(h){return Fn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Rm(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mm(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,yce),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yce(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}pl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Mm(_,cH,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Mm(_,cH,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Mm(E,"/"==E.charAt(0)?Ece:vce,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Mm(E,wce)),h.join("")};var h,cH=/[#\/\?@]/g,vce=/[#\?:]/g,Ece=/[#\?]/g,Ice=/[#\?@]/g,wce=/#/g;function Pm(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function zc(h){h.g||(h.g=new Map,h.h=0,h.i&&function _ce(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var D=h[E].indexOf("="),Y=null;if(0<=D){var ae=h[E].substring(0,D);Y=h[E].substring(D+1)}else ae=h[E];_(ae,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function uH(h,_){zc(h),_=Xh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function lH(h,_){return zc(h),_=Xh(h,_),h.g.has(_)}function dH(h,_,E){uH(h,_),0<E.length&&(h.i=null,h.g.set(Xh(h,_),R(E)),h.h+=E.length)}function Xh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function qc(h,_,E,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(E)}catch{}}function Ace(){this.g=new cce}function Dce(h,_,E){const D=E||"";try{sH(h,function(Y,ae){let Pe=Y;u(Y)&&(Pe=kS(Y)),_.push(D+ae+"="+encodeURIComponent(Pe))})}catch(Y){throw _.push(D+"type="+encodeURIComponent("_badmap")),Y}}function xm(h){this.l=h.Ub||null,this.j=h.eb||!1}function NI(h,_){Ei.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function hH(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Nm(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Om(h)}function Om(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function fH(h){let _="";return ke(h,function(E,D){_+=D,_+=":",_+=E,_+="\r\n"}),_}function GS(h,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=fH(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Fn(h,_,E))}function sr(h){Ei.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Pm.prototype).add=function(h,_){zc(this),this.i=null,h=Xh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){zc(this),this.g.forEach(function(E,D){E.forEach(function(Y){h.call(_,Y,D,this)},this)},this)},n.na=function(){zc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let D=0;D<_.length;D++){const Y=h[D];for(let ae=0;ae<Y.length;ae++)E.push(_[D])}return E},n.V=function(h){zc(this);let _=[];if("string"==typeof h)lH(this,h)&&(_=_.concat(this.g.get(Xh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return zc(this),this.i=null,lH(this,h=Xh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var D=_[E];const ae=encodeURIComponent(String(D)),Pe=this.V(D);for(D=0;D<Pe.length;D++){var Y=ae;""!==Pe[D]&&(Y+="="+encodeURIComponent(String(Pe[D]))),h.push(Y)}}return this.i=h.join("&")},b(xm,FS),xm.prototype.g=function(){return new NI(this.l,this.j)},xm.prototype.i=(h={},function(){return h}),b(NI,Ei),(n=NI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Om(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nm(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Om(this)),this.g&&(this.readyState=3,Om(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hH(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Nm(this):Om(this),3==this.readyState&&hH(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Nm(this))},n.Qa=function(h){this.g&&(this.response=h,Nm(this))},n.ga=function(){this.g&&Nm(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(NI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(sr,Ei);var Sce=/^https?$/i,Rce=["POST","PUT"];function pH(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,gH(h),OI(h)}function gH(h){h.A||(h.A=!0,Ui(h,"complete"),Ui(h,"error"))}function mH(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Na(h)||2!=h.Z()))if(h.u&&4==Na(h))V$(h.Ea,0,h);else if(Ui(h,"readystatechange"),4==Na(h)){h.h=!1;try{const Pe=h.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=0===Pe){var Y=String(h.D).match(oH)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),D=!Sce.test(Y?Y.toLowerCase():"")}E=D}if(E)Ui(h,"complete"),Ui(h,"success");else{h.m=6;try{var ae=2<Na(h)?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.Z()+"]",gH(h)}}finally{OI(h)}}}function OI(h,_){if(h.g){_H(h);const E=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ui(h,"ready");try{E.onreadystatechange=D}catch{}}}function _H(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Na(h){return h.g?h.g.readyState:0}function yH(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function km(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function vH(h){this.Aa=0,this.i=[],this.j=new Dm,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=km("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=km("baseRetryDelayMs",5e3,h),this.cb=km("retryDelaySeedMs",1e4,h),this.Wa=km("forwardChannelMaxRetries",2,h),this.wa=km("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new eH(h&&h.concurrentRequestLimit),this.Da=new Ace,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function WS(h){if(EH(h),3==h.G){var _=h.U++,E=xa(h.I);if(Fn(E,"SID",h.K),Fn(E,"RID",_),Fn(E,"TYPE","terminate"),Fm(h,E),(_=new Hc(h,h.j,_)).L=2,_.v=xI(xa(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=RH(_.j,null),_.g.ea(_.v)),_.F=Date.now(),RI(_)}DH(h)}function kI(h){h.g&&(ZS(h),h.g.cancel(),h.g=null)}function EH(h){kI(h),h.u&&(a.clearTimeout(h.u),h.u=null),LI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function FI(h){if(!tH(h.h)&&!h.s){h.s=!0;var _=h.Ga;Xe||pr(),Je||(Xe(),Je=!0),Ot.add(_,h),h.B=0}}function IH(h,_){var E;E=_?_.l:h.U++;const D=xa(h.I);Fn(D,"SID",h.K),Fn(D,"RID",E),Fn(D,"AID",h.T),Fm(h,D),h.m&&h.o&&GS(D,h.m,h.o),E=new Hc(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=wH(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),qS(h.h,E),jS(E,D,_)}function Fm(h,_){h.H&&ke(h.H,function(E,D){Fn(_,D,E)}),h.l&&sH({},function(E,D){Fn(_,D,E)})}function wH(h,_,E){E=Math.min(h.i.length,E);var D=h.l?y(h.l.Na,h.l,h):null;e:{var Y=h.i;let ae=-1;for(;;){const Pe=["count="+E];-1==ae?0<E?(ae=Y[0].g,Pe.push("ofs="+ae)):ae=0:Pe.push("ofs="+ae);let _n=!0;for(let si=0;si<E;si++){let Wt=Y[si].g;const Ii=Y[si].map;if(Wt-=ae,0>Wt)ae=Math.max(0,Y[si].g-100),_n=!1;else try{Dce(Ii,Pe,"req"+Wt+"_")}catch{D&&D(Ii)}}if(_n){D=Pe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,D}function bH(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Xe||pr(),Je||(Xe(),Je=!0),Ot.add(_,h),h.v=0}}function KS(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Am(y(h.Fa,h),AH(h,h.v)),h.v++,0))}function ZS(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function TH(h){h.g=new Hc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=xa(h.qa);Fn(_,"RID","rpc"),Fn(_,"SID",h.K),Fn(_,"AID",h.T),Fn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Fn(_,"TO",h.ja),Fn(_,"TYPE","xmlhttp"),Fm(h,_),h.m&&h.o&&GS(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=xI(xa(_)),E.m=null,E.P=!0,Y$(E,h)}function LI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function CH(h,_){var E=null;if(h.g==_){LI(h),ZS(h),h.g=null;var D=2}else{if(!zS(h.h,_))return;E=_.D,rH(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){E=_.m?_.m.length:0,_=Date.now()-_.F;var Y=h.B;Ui(D=AI(),new W$(D,E)),FI(h)}else bH(h);else if(3==(Y=_.s)||0==Y&&0<_.X||!(1==D&&function Pce(h,_){return!(nH(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Am(y(h.Ga,h,_),AH(h,h.B)),h.B++,0)))}(h,_)||2==D&&KS(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),Y){case 1:gl(h,5);break;case 4:gl(h,10);break;case 3:gl(h,6);break;default:gl(h,2)}}function AH(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function gl(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),D=h.Xa;const Y=!D;D=new pl(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||MI(D,"https"),xI(D),Y?function Tce(h,_){const E=new Dm;if(a.Image){const D=new Image;D.onload=I(qc,E,"TestLoadImage: loaded",!0,_,D),D.onerror=I(qc,E,"TestLoadImage: error",!1,_,D),D.onabort=I(qc,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=I(qc,E,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),E):function Cce(h,_){new Dm;const D=new AbortController,Y=setTimeout(()=>{D.abort(),qc(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(ae=>{clearTimeout(Y),qc(0,0,!!ae.ok,_)}).catch(()=>{clearTimeout(Y),qc(0,0,!1,_)})}(D.toString(),E)}else Bi(2);h.G=0,h.l&&h.l.sa(_),DH(h),EH(h)}function DH(h){if(h.G=0,h.ka=[],h.l){const _=iH(h.h);(0!=_.length||0!=h.i.length)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function SH(h,_,E){var D=E instanceof pl?xa(E):new pl(E);if(""!=D.g)_&&(D.g=_+"."+D.g),PI(D,D.s);else{var Y=a.location;D=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var ae=new pl(null);D&&MI(ae,D),_&&(ae.g=_),Y&&PI(ae,Y),E&&(ae.l=E),D=ae}return _=h.ya,(E=h.D)&&_&&Fn(D,E,_),Fn(D,"VER",h.la),Fm(h,D),D}function RH(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new sr(h.Ca&&!h.pa?new xm({eb:E}):h.pa)).Ha(h.J),_}function MH(){}function VI(){}function Es(h,_){Ei.call(this),this.g=new vH(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Jh(this)}function PH(h){LS.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function xH(){VS.call(this),this.status=1}function Jh(h){this.g=h}(n=sr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():US.g(),this.v=function $$(h){return h.h||(h.h=h.i())}(this.o?this.o:US),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ae){return void pH(this,ae)}if(h=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)E.set(Y,D[Y]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ae of D.keys())E.set(ae,D.get(ae))}D=Array.from(E.keys()).find(ae=>"content-type"==ae.toLowerCase()),Y=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Rce,_,void 0))||D||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Pe]of E)this.g.setRequestHeader(ae,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_H(this),this.u=!0,this.g.send(h),this.u=!1}catch(ae){pH(this,ae)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ui(this,"complete"),Ui(this,"abort"),OI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),OI(this,!0)),sr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mH(this):this.bb())},n.bb=function(){mH(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Na(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),ace(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=vH.prototype).la=8,n.G=1,n.connect=function(h,_,E,D){Bi(0),this.W=h,this.H=_||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=SH(this,null,this.W),FI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Y=new Hc(this,this.j,h);let ae=this.o;if(this.S&&(ae?(ae=N(ae),q(ae,this.S)):ae=this.S),null!==this.m||this.O||(Y.H=ae,ae=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=wH(this,Y,_),Fn(E=xa(this.I),"RID",h),Fn(E,"CVER",22),this.D&&Fn(E,"X-HTTP-Session-Id",this.D),Fm(this,E),ae&&(this.O?_="headers="+encodeURIComponent(String(fH(ae)))+"&"+_:this.m&&GS(E,this.m,ae)),qS(this.h,Y),this.Ua&&Fn(E,"TYPE","init"),this.P?(Fn(E,"$req",_),Fn(E,"SID","null"),Y.T=!0,jS(Y,E,null)):jS(Y,E,_),this.G=2}}else 3==this.G&&(h?IH(this,h):0==this.i.length||tH(this.h)||IH(this))},n.Fa=function(){if(this.u=null,TH(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Am(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bi(10),kI(this),TH(this))},n.Za=function(){null!=this.C&&(this.C=null,kI(this),KS(this),Bi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Bi(2)):(this.j.info("Failed to ping google.com"),Bi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=MH.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},VI.prototype.g=function(h,_){return new Es(h,_)},b(Es,Ei),Es.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Es.prototype.close=function(){WS(this.g)},Es.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=kS(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&FI(_)},Es.prototype.N=function(){this.g.l=null,delete this.j,WS(this.g),delete this.g,Es.aa.N.call(this)},b(PH,LS),b(xH,VS),b(Jh,MH),Jh.prototype.ua=function(){Ui(this.g,"a")},Jh.prototype.ta=function(h){Ui(this.g,new PH(h))},Jh.prototype.sa=function(h){Ui(this.g,new xH)},Jh.prototype.ra=function(){Ui(this.g,"b")},VI.prototype.createWebChannel=VI.prototype.g,Es.prototype.send=Es.prototype.o,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,uL=ma.createWebChannelTransport=function(){return new VI},cL=ma.getStatEventTarget=function(){return AI()},aL=ma.Event=hl,qT=ma.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},DI.NO_ERROR=0,DI.TIMEOUT=8,DI.HTTP_ERROR=6,zv=ma.ErrorCode=DI,K$.COMPLETE="complete",oL=ma.EventType=K$,H$.EventType=Tm,Tm.OPEN="a",Tm.CLOSE="b",Tm.ERROR="c",Tm.MESSAGE="d",Ei.prototype.listen=Ei.prototype.K,mg=ma.WebChannel=H$,sL=ma.FetchXmlHttpFactory=xm,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,iL=ma.XhrIo=sr}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});const lL="@firebase/firestore";class jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jr.UNAUTHENTICATED=new jr(null),jr.GOOGLE_CREDENTIALS=new jr("google-credentials-uid"),jr.FIRST_PARTY=new jr("first-party-uid"),jr.MOCK_USER=new jr("mock-user");let ih="10.12.1";const mc=new Oo.Yd("@firebase/firestore");function sh(){return mc.logLevel}function be(n,...e){if(mc.logLevel<=Oo.in.DEBUG){const t=e.map(GT);mc.debug(`Firestore (${ih}): ${n}`,...t)}}function hr(n,...e){if(mc.logLevel<=Oo.in.ERROR){const t=e.map(GT);mc.error(`Firestore (${ih}): ${n}`,...t)}}function es(n,...e){if(mc.logLevel<=Oo.in.WARN){const t=e.map(GT);mc.warn(`Firestore (${ih}): ${n}`,...t)}}function GT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Be(n="Unexpected state"){const e=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function Ke(n,e){n||Be()}function Me(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends _t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jr.UNAUTHENTICATED))}shutdown(){}}class YY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XY{constructor(e){this.t=e,this.currentUser=jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,le.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke("string"==typeof r.accessToken),new dL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(null===e||"string"==typeof e),new jr(e)}}class JY{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=jr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eX{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new JY(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke("string"==typeof t.token),this.R=t.token,new hL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nX(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=nX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function dt(n,e){return n<e?-1:n>e?1:0}function oh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pL(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Bn(0,0))}static max(){return new Ye(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _g{constructor(e,t,r){void 0===t?t=0:t>e.length&&Be(),void 0===r?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_g.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _g?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Lt extends _g{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const rX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends _g{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return rX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ie(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ie(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Ie(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ie(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Lt.fromString(e))}static fromName(e){return new Oe(Lt.fromString(e).popFirst(5))}static empty(){return new Oe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Lt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Lt(e.slice()))}}class ah{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function WT(n){return n.fields.find(e=>2===e.kind)}function ku(n){return n.fields.filter(e=>2!==e.kind)}ah.UNKNOWN_ID=-1;class Fu{constructor(e,t){this.fieldPath=e,this.kind=t}}class ch{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ch(0,gs.min())}}function gL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new gs(i,Oe.empty(),e)}function mL(n){return new gs(n.readTime,n.key,-1)}class gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gs(Ye.min(),Oe.empty(),-1)}static max(){return new gs(Ye.max(),Oe.empty(),-1)}}function KT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Oe.comparator(n.documentKey,e.documentKey),0!==t?t:dt(n.largestBatchId,e.largestBatchId))}const _L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _c(n){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,le.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==_L)throw n;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class qv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Fr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=QT(r.target.error);this.V.reject(new yg(e,i))}}static open(e,t,r,i){try{return new qv(t,e.transaction(i,r))}catch(s){throw new yg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aX(t)}}class ko{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ko.S((0,_t.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return be("SimpleDb","Removing database:",e),Lu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_t.hl)())return!1;if(ko.C())return!0;const e=(0,_t.z$)(),t=ko.S(e),r=0<t&&t<10,i=vL(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,le.Z)(function*(){return t.db||(be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new yg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ie(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new yg(e,a))},s.onupgradeneeded=o=>{be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,le.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=qv.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),J.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(be("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function vL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class oX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Lu(this.B.delete())}}class yg extends Ie{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yc(n){return"IndexedDbTransactionError"===n.name}class aX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lu(r)}add(e){return be("SimpleDb","ADD",this.store.name,e,e),Lu(this.store.add(e))}get(e){return Lu(this.store.get(e)).next(t=>(void 0===t&&(t=null),be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return be("SimpleDb","DELETE",this.store.name,e),Lu(this.store.delete(e))}count(){return be("SimpleDb","COUNT",this.store.name),Lu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new J((r,i)=>{t.onerror=s=>{const o=QT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new oX(a),u=t(a.primaryKey,a.value,c);if(u instanceof J){const f=u.catch(m=>(c.done(),J.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lu(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=QT(r.target.error);t(i)}})}let EL=!1;function QT(n){const e=ko.S((0,_t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EL||(EL=!0,setTimeout(()=>{throw r},0)),r}}return n}class cX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;be("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{be("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){yc(r)?be("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield _c(r)}yield t.X(6e4)}))}}class uX{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return J.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return be("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(be("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=mL(s);KT(o,r)>0&&(r=o)}),new gs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function vg(n){return null==n}function Eg(n){return 0===n&&1/n==-1/0}function IL(n){return"number"==typeof n&&Number.isInteger(n)&&!Eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wL(e)),e=lX(n.get(t),e);return wL(e)}function lX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function wL(n){return n+"\x01\x01"}function Fo(n){const e=n.length;if(Ke(e>=2),2===e)return Ke("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Lt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Be(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Be()}s=o+2}return new Lt(r)}const bL=["userId","batchId"];function Gv(n,e){return[n,pi(e)]}function TL(n,e,t){return[n,pi(e),t]}const dX={},hX=["prefixPath","collectionGroup","readTime","documentId"],fX=["prefixPath","collectionGroup","documentId"],pX=["collectionGroup","readTime","prefixPath","documentId"],gX=["canonicalId","targetId"],mX=["targetId","path"],_X=["path","targetId"],yX=["collectionId","parent"],vX=["indexId","uid"],EX=["uid","sequenceNumber"],IX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wX=["indexId","uid","orderedDocumentKey"],bX=["userId","collectionPath","documentId"],TX=["userId","collectionPath","largestBatchId"],CX=["userId","collectionGroup","largestBatchId"],CL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AX=[...CL,"documentOverlays"],AL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DL=AL,SL=[...DL,"indexConfiguration","indexState","indexEntries"],DX=SL;class YT extends yL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function $r(n,e){const t=Me(n);return ko.F(t._e,e)}function RL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wv(this.root,e,this.comparator,!0)}}class Wv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=s??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ni(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ni(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xL(this.data.getIterator())}getIteratorFrom(e){return new xL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class xL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uh(n){return n.hasNext()?n.getNext():void 0}class ts{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new ts([])}unionWith(e){let t=new dn(Mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class NL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NL("Invalid base64 string: "+s):s}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const RX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(n){if(Ke(!!n),"string"==typeof n){let e=0;const t=RX.exec(n);if(Ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ya(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function Kv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zv(n){const e=n.mapValue.fields.__previous_value__;return Kv(e)?Zv(e):e}function Ig(n){const e=_a(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class MX{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ec("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}const Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qv={nullValue:"NULL_VALUE"};function wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kv(n)?4:LL(n)?9007199254740991:10:Be()}function Lo(n,e){if(n===e)return!0;const t=wc(n);if(t!==wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ig(n).isEqual(Ig(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_a(i.timestampValue),a=_a(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ya(n.bytesValue).isEqual(ya(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nr(i.geoPointValue.latitude)===nr(s.geoPointValue.latitude)&&nr(i.geoPointValue.longitude)===nr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nr(i.integerValue)===nr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nr(i.doubleValue),a=nr(s.doubleValue);return o===a?Eg(o)===Eg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return oh(n.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RL(o)!==RL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Lo(o[c],a[c])))return!1;return!0}(n,e);default:return Be()}var s}function wg(n,e){return void 0!==(n.values||[]).find(t=>Lo(t,e))}function bc(n,e){if(n===e)return 0;const t=wc(n),r=wc(e);if(t!==r)return dt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nr(s.integerValue||s.doubleValue),c=nr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return OL(n.timestampValue,e.timestampValue);case 4:return OL(Ig(n),Ig(e));case 5:return dt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ya(s),c=ya(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=dt(a[u],c[u]);if(0!==f)return f}return dt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=dt(nr(s.latitude),nr(o.latitude));return 0!==a?a:dt(nr(s.longitude),nr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=bc(a[u],c[u]);if(f)return f}return dt(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ic.mapValue&&o===Ic.mapValue)return 0;if(s===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=dt(c[m],f[m]);if(0!==y)return y;const I=bc(a[c[m]],u[f[m]]);if(0!==I)return I}return dt(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Be()}}function OL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return dt(n,e);const t=_a(n),r=_a(e),i=dt(t.seconds,r.seconds);return 0!==i?i:dt(t.nanos,r.nanos)}function lh(n){return XT(n)}function XT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=_a(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ya(n.bytesValue).toBase64():"referenceValue"in n?Oe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=XT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${XT(t.fields[o])}`;return i+"}"}(n.mapValue):Be()}function Vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function JT(n){return!!n&&"integerValue"in n}function bg(n){return!!n&&"arrayValue"in n}function kL(n){return!!n&&"nullValue"in n}function FL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xv(n){return!!n&&"mapValue"in n}function Tg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PX(n){return"nullValue"in n?Qv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vu(Ec.empty(),Oe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Be()}function xX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vu(Ec.empty(),Oe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ic:Be()}function VL(n,e){const t=bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function UL(n,e){const t=bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tg(t)}setAll(e){let t=Mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Tg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Xv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ri(Tg(this.value))}}function BL(n){const e=[];return vc(n.fields,(t,r)=>{const i=new Mn([t]);if(Xv(r)){const s=BL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ts(e)}class Pn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,Ye.min(),Ye.min(),Ye.min(),ri.empty(),0)}static newFoundDocument(e,t,r,i){return new Pn(e,1,t,Ye.min(),r,i,0)}static newNoDocument(e,t){return new Pn(e,2,t,Ye.min(),Ye.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,Ye.min(),Ye.min(),ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tc{constructor(e,t){this.position=e,this.inclusive=t}}function jL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Oe.comparator(Oe.fromName(o.referenceValue),t.key):bc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $L(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lo(n.position[t],e.position[t]))return!1;return!0}class Cg{constructor(e,t="asc"){this.field=e,this.dir=t}}function NX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class HL{}class Vt extends HL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new OX(e,t,r):"array-contains"===t?new LX(e,r):"in"===t?new ZL(e,r):"not-in"===t?new VX(e,r):"array-contains-any"===t?new UX(e,r):new Vt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kX(e,r):new FX(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bc(t,this.value)):null!==t&&wc(this.value)===wc(t)&&this.matchesComparison(bc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends HL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new an(e,t)}matches(e){return dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dh(n){return"and"===n.op}function eC(n){return"or"===n.op}function tC(n){return zL(n)&&dh(n)}function zL(n){for(const e of n.filters)if(e instanceof an)return!1;return!0}function nC(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+lh(n.value);if(tC(n))return n.filters.map(e=>nC(e)).join(",");{const e=n.filters.map(t=>nC(t)).join(",");return`${n.op}(${e})`}}function qL(n,e){return n instanceof Vt?(r=n,(i=e)instanceof Vt&&r.op===i.op&&r.field.isEqual(i.field)&&Lo(r.value,i.value)):n instanceof an?function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&qL(o,i.filters[a]),!0)}(n,e):void Be();var r,i}function GL(n,e){const t=n.filters.concat(e);return an.create(t,n.op)}function WL(n){return n instanceof Vt?`${(t=n).field.canonicalString()} ${t.op} ${lh(t.value)}`:n instanceof an?function(t){return t.op.toString()+" {"+t.getFilters().map(WL).join(" ,")+"}"}(n):"Filter";var t}class OX extends Vt{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class kX extends Vt{constructor(e,t){super(e,"in",t),this.keys=KL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FX extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=KL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function KL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class LX extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&wg(t.arrayValue,this.value)}}class ZL extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wg(this.value.arrayValue,t)}}class VX extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wg(this.value.arrayValue,t)}}class UX extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wg(this.value.arrayValue,r))}}class BX{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function rC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new BX(n,e,t,r,i,s,o)}function Uu(n){const e=Me(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),vg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.ue=t}return e.ue}function Ag(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$L(n.startAt,e.startAt)&&$L(n.endAt,e.endAt)}function Jv(n){return Oe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function eE(n,e){return n.filters.filter(t=>t instanceof Vt&&t.field.isEqual(e))}function QL(n,e,t){let r=Qv,i=!0;for(const s of eE(n,e)){let o=Qv,a=!0;switch(s.op){case"<":case"<=":o=PX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qv}VL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];VL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function YL(n,e,t){let r=Ic,i=!0;for(const s of eE(n,e)){let o=Ic,a=!0;switch(s.op){case">=":case">":o=xX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ic}UL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];UL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class va{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function XL(n,e,t,r,i,s,o,a){return new va(n,e,t,r,i,s,o,a)}function hh(n){return new va(n)}function JL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iC(n){return null!==n.collectionGroup}function fh(n){const e=Me(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dn(Mn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Cg(s,r))}),t.has(Mn.keyField().canonicalString())||e.ce.push(new Cg(Mn.keyField(),r))}return e.ce}function gi(n){const e=Me(n);return e.le||(e.le=function tV(n,e){if("F"===n.limitType)return rC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Cg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Tc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Tc(n.startAt.position,n.startAt.inclusive):null;return rC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,fh(n))),e.le}function sC(n,e){const t=n.filters.concat([e]);return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tE(n,e,t){return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dg(n,e){return Ag(gi(n),gi(e))&&n.limitType===e.limitType}function nV(n){return`${Uu(gi(n))}|lt:${n.limitType}`}function ph(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WL(i)).join(", ")}]`),vg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>lh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>lh(i)).join(",")),`Target(${r})`}(gi(n))}; limitType=${n.limitType})`}function Sg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of fh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=jL(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,fh(r),i)||r.endAt&&!function(o,a,c){const u=jL(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,fh(r),i)));var r,i}function rV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iV(n){return(e,t)=>{let r=!1;for(const i of fh(n)){const s=jX(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function jX(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?bc(c,u):Be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PL(this.inner)}size(){return this.innerSize}}const $X=new bn(Oe.comparator);function ns(){return $X}const sV=new bn(Oe.comparator);function Rg(...n){let e=sV;for(const t of n)e=e.insert(t.key,t);return e}function oV(n){let e=sV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vo(){return Mg()}function aV(){return Mg()}function Mg(){return new Ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const HX=new bn(Oe.comparator),zX=new dn(Oe.comparator);function vt(...n){let e=zX;for(const t of n)e=e.add(t);return e}const qX=new dn(dt);function oC(){return qX}function cV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function uV(n){return{integerValue:""+n}}function lV(n,e){return IL(e)?uV(e):cV(n,e)}class nE{constructor(){this._=void 0}}function GX(n,e,t){return n instanceof gh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Kv(s)&&(s=Zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Bu?hV(n,e):n instanceof ju?fV(n,e):function(i,s){const o=dV(i,s),a=pV(o)+pV(i.Pe);return JT(o)&&JT(i.Pe)?uV(a):cV(i.serializer,a)}(n,e)}function WX(n,e,t){return n instanceof Bu?hV(n,e):n instanceof ju?fV(n,e):t}function dV(n,e){return n instanceof mh?JT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class gh extends nE{}class Bu extends nE{constructor(e){super(),this.elements=e}}function hV(n,e){const t=gV(e);for(const r of n.elements)t.some(i=>Lo(i,r))||t.push(r);return{arrayValue:{values:t}}}class ju extends nE{constructor(e){super(),this.elements=e}}function fV(n,e){let t=gV(e);for(const r of n.elements)t=t.filter(i=>!Lo(i,r));return{arrayValue:{values:t}}}class mh extends nE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function pV(n){return nr(n.integerValue||n.doubleValue)}function gV(n){return bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pg{constructor(e,t){this.field=e,this.transform=t}}class ZX{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iE{}function mV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yh(n.key,jn.none()):new _h(n.key,n.data,jn.none());{const t=n.data,r=ri.empty();let i=new dn(Mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ia(n.key,r,new ts(i.toArray()),jn.none())}}function QX(n,e,t){n instanceof _h?function(i,s,o){const a=i.value.clone(),c=vV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ia?function(i,s,o){if(!rE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(yV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xg(n,e,t,r){return n instanceof _h?function(s,o,a,c){if(!rE(s.precondition,o))return a;const u=s.value.clone(),f=EV(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ia?function(s,o,a,c){if(!rE(s.precondition,o))return a;const u=EV(s.fieldTransforms,c,o),f=o.data;return f.setAll(yV(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,rE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function YX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=dV(r.transform,i||null);null!=s&&(null===t&&(t=ri.empty()),t.set(r.field,s))}return t||null}function _V(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&oh(r,i,(s,o)=>function KX(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Bu&&i instanceof Bu||r instanceof ju&&i instanceof ju?oh(r.elements,i.elements,Lo):r instanceof mh&&i instanceof mh?Lo(r.Pe,i.Pe):r instanceof gh&&i instanceof gh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class _h extends iE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ia extends iE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vV(n,e,t){const r=new Map;Ke(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,WX(o,a,t[i]))}return r}function EV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,GX(s,o,e))}return r}class yh extends iE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends iE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=mV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vt())}isEqual(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(t,r)=>_V(t,r))&&oh(this.baseMutations,e.baseMutations,(t,r)=>_V(t,r))}}class uC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ke(e.mutations.length===r.length);let i=HX;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uC(e,t,r,i)}}class lC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class XX{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ar,zt;function wV(n){switch(n){default:return Be();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function bV(n){if(void 0===n)return hr("GRPC error has no .code"),se.UNKNOWN;switch(n){case Ar.OK:return se.OK;case Ar.CANCELLED:return se.CANCELLED;case Ar.UNKNOWN:return se.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return se.INTERNAL;case Ar.UNAVAILABLE:return se.UNAVAILABLE;case Ar.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ar.NOT_FOUND:return se.NOT_FOUND;case Ar.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ar.ABORTED:return se.ABORTED;case Ar.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ar.DATA_LOSS:return se.DATA_LOSS;default:return Be()}}(zt=Ar||(Ar={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function TV(){return new TextEncoder}const JX=new Ou([4294967295,4294967295],0);function CV(n){const e=TV().encode(n),t=new rL;return t.update(e),new Uint8Array(t.digest())}function AV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ou([t,r],0),new Ou([i,s],0)]}class dC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ng(`Invalid padding: ${t}`);if(r<0)throw new Ng(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ng(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ng(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ou.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ou.fromNumber(r)));return 1===i.compare(JX)&&(i=new Ou([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=CV(e),[r,i]=AV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=CV(e),[r,i]=AV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ng extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Og{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Og(Ye.min(),i,new bn(dt),ns(),vt())}}class kg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kg(r,t,vt(),vt(),vt())}}class oE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class DV{constructor(e,t){this.targetId=e,this.me=t}}class SV{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RV{constructor(){this.fe=0,this.ge=PV(),this.pe=Lr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=vt(),t=vt(),r=vt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new kg(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=PV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=ns(),this.qe=MV(),this.Qe=new bn(dt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Jv(s))if(0===r){const o=new Oe(s.path);this.Ue(t,o,Pn.newNoDocument(o,Ye.min()))}else Ke(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ya(r).toUint8Array()}catch(c){if(c instanceof NL)return es("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new dC(o,i,s)}catch(c){return es(c instanceof Ng?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Jv(a.target)){const c=new Oe(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Pn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=vt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Og(e,t,this.Qe,this.ke,r);return this.ke=ns(),this.qe=MV(),this.Qe=new bn(dt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new RV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dn(dt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||be("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new RV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function MV(){return new bn(Oe.comparator)}function PV(){return new bn(Oe.comparator)}const tJ={asc:"ASCENDING",desc:"DESCENDING"},nJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rJ={and:"AND",or:"OR"};class iJ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hC(n,e){return n.useProto3Json||vg(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sJ(n,e){return vh(n,e.toTimestamp())}function fr(n){return Ke(!!n),Ye.fromTimestamp(function(t){const r=_a(t);return new Bn(r.seconds,r.nanos)}(n))}function fC(n,e){return pC(n,e).canonicalString()}function pC(n,e){const t=(i=n,new Lt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function NV(n){const e=Lt.fromString(n);return Ke(zV(e)),e}function Fg(n,e){return fC(n.databaseId,e.path)}function Uo(n,e){const t=NV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(FV(t))}function OV(n,e){return fC(n.databaseId,e)}function kV(n){const e=NV(n);return 4===e.length?Lt.emptyPath():FV(e)}function gC(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FV(n){return Ke(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function LV(n,e,t){return{name:Fg(n,e),fields:t.value.mapValue.fields}}function VV(n,e,t){const r=Uo(n,e.name),i=fr(e.updateTime),s=e.createTime?fr(e.createTime):Ye.min(),o=new ri({mapValue:{fields:e.fields}}),a=Pn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Lg(n,e){let t;if(e instanceof _h)t={update:LV(n,e.key,e.value)};else if(e instanceof yh)t={delete:Fg(n,e.key)};else if(e instanceof Ia)t={update:LV(n,e.key,e.data),updateMask:fJ(e.fieldMask)};else{if(!(e instanceof aC))return Be();t={verify:Fg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof gh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ju)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Be()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:sJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Be()),t;var s}function mC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?jn.updateTime(fr(s.updateTime)):void 0!==s.exists?jn.exists(s.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(Ke("REQUEST_TIME"===a.setToServerValue),c=new gh):"appendMissingElements"in a?c=new Bu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new ju(a.removeAllFromArray.values||[]):"increment"in a?c=new mh(o,a.increment):Be();const u=Mn.fromServerFormat(a.fieldPath);return new Pg(u,c)}(n,i)):[];var s;if(e.update){const i=Uo(n,e.update.name),s=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ts((e.updateMask.fieldPaths||[]).map(f=>Mn.fromServerFormat(f)));return new Ia(i,s,o,t,r)}return new _h(i,s,t,r)}if(e.delete){const i=Uo(n,e.delete);return new yh(i,t)}if(e.verify){const i=Uo(n,e.verify);return new aC(i,t)}return Be()}function UV(n,e){return{documents:[OV(n,e.path)]}}function aE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OV(n,i);const s=function(u){if(0!==u.length)return HV(an.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:Cc((y=f).field),direction:lJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=hC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function jV(n){let e=kV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ke(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=$V(m);return y instanceof an&&tC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Cg(Eh((b=y).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,vg(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new Tc((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new Tc(m.values||[],!m.before)}(t.endAt)),XL(e,i,o,s,a,"F",c,u)}function $V(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eh(t.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Eh(t.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eh(t.unaryFilter.field);return Vt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eh(t.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(n):void 0!==n.fieldFilter?Vt.create(Eh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return an.create(t.compositeFilter.filters.map(r=>$V(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(t.compositeFilter.op))}(n):Be();var t}function lJ(n){return tJ[n]}function dJ(n){return nJ[n]}function hJ(n){return rJ[n]}function Cc(n){return{fieldPath:n.canonicalString()}}function Eh(n){return Mn.fromServerFormat(n.fieldPath)}function HV(n){return n instanceof Vt?function(t){if("=="===t.op){if(FL(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NAN"}};if(kL(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(FL(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NAN"}};if(kL(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(t.field),op:dJ(t.op),value:t.value}}}(n):n instanceof an?function(t){const r=t.getFilters().map(i=>HV(i));return 1===r.length?r[0]:{compositeFilter:{op:hJ(t.op),filters:r}}}(n):Be()}function fJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class wa{constructor(e,t,r,i,s=Ye.min(),o=Ye.min(),a=Lr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qV{constructor(e){this.ct=e}}function GV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Fg(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:vh(s,o.version.toTimestamp()),createTime:vh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$u(e.version)};else{if(!e.isUnknownDocument())return Be();r.unknownDocument={path:t.path.toArray(),version:$u(e.version)}}var s,o;return r}function cE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $u(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hu(n){const e=new Bn(n.seconds,n.nanoseconds);return Ye.fromTimestamp(e)}function zu(n,e){const t=(e.baseMutations||[]).map(s=>mC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>mC(n.ct,s)),i=Bn.fromMillis(e.localWriteTimeMs);return new cC(e.batchId,i,t,r)}function Vg(n){const e=Hu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hu(n.lastLimboFreeSnapshotVersion):Ye.min();let r;return r=void 0!==n.query.documents?(Ke(1===(s=n.query).documents.length),gi(hh(kV(s.documents[0])))):function(s){return gi(jV(s))}(n.query),new wa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken));var s}function WV(n,e){const t=$u(e.snapshotVersion),r=$u(e.lastLimboFreeSnapshotVersion);let i;i=Jv(e.target)?UV(n.ct,e.target):aE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _C(n){const e=jV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tE(e,e.limit,"L"):e}function yC(n,e){return new lC(e.largestBatchId,mC(n.ct,e.overlayMutation))}function KV(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}function ZV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$u(r.readTime),documentKey:pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class gJ{getBundleMetadata(e,t){return QV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Hu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return QV(e).put({bundleId:(i=t).id,createTime:$u(fr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return YV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:_C(s.bundledQuery),readTime:Hu(s.readTime)};var s})}saveNamedQuery(e,t){return YV(e).put({name:(i=t).name,readTime:$u(fr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function QV(n){return $r(n,"bundles")}function YV(n){return $r(n,"namedQueries")}class uE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new uE(e,t.uid||"")}getOverlay(e,t){return Ug(e).get(KV(this.userId,t)).next(r=>r?yC(this.serializer,r):null)}getOverlays(e,t){const r=Vo();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new lC(t,o);i.push(this.ht(e,a))}),J.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(pi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ug(e).j("collectionPathOverlayIndex",a))}),J.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Vo(),s=pi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ug(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=yC(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Vo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ug(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=yC(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Ug(e).put(function(i,s,o){const[a,c,u]=KV(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Lg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Ug(n){return $r(n,"documentOverlays")}class qu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Eg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=_a(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ya(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?LL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Be()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Oe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function mJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function XV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=mJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}qu.bt=new qu;class _J{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=XV(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=XV(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class vJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Bg{constructor(){this.Gt=new _J,this.zt=new yJ(this.Gt),this.jt=new vJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Gu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gu(this.indexId,this.documentKey,this.arrayValue,r)}}function Ac(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=JV(n.arrayValue,e.arrayValue),0!==t?t:(t=JV(n.directionalValue,e.directionalValue),0!==t?t:Oe.comparator(n.documentKey,e.documentKey)))}function JV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class e2{constructor(e){this.Yt=new dn((t,r)=>Mn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ke(e.collectionGroup===this.collectionId),this.en)return!1;const t=WT(e);if(void 0!==t&&!this.nn(t))return!1;const r=ku(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new dn(Mn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Fu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Fu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Fu(r.field,"asc"===r.dir?0:1)));return new ah(ah.UNKNOWN_ID,this.collectionId,t,ch.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function t2(n){var e,t;if(Ke(n instanceof Vt||n instanceof an),n instanceof Vt){if(n instanceof ZL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Vt.create(n.field,"==",s)))||[];return an.create(i,"or")}return n}const r=n.filters.map(i=>t2(i));return an.create(r,n.op)}function EJ(n){if(0===n.getFilters().length)return[];const e=IC(t2(n));return Ke(n2(e)),vC(e)||EC(e)?[e]:e.getFilters()}function vC(n){return n instanceof Vt}function EC(n){return n instanceof an&&tC(n)}function n2(n){return vC(n)||EC(n)||function(t){if(t instanceof an&&eC(t)){for(const r of t.getFilters())if(!vC(r)&&!EC(r))return!1;return!0}return!1}(n)}function IC(n){if(Ke(n instanceof Vt||n instanceof an),n instanceof Vt)return n;if(1===n.filters.length)return IC(n.filters[0]);const e=n.filters.map(r=>IC(r));let t=an.create(e,n.op);return t=lE(t),n2(t)?t:(Ke(t instanceof an),Ke(dh(t)),Ke(t.filters.length>1),t.filters.reduce((r,i)=>wC(r,i)))}function wC(n,e){let t;return Ke(n instanceof Vt||n instanceof an),Ke(e instanceof Vt||e instanceof an),t=n instanceof Vt?e instanceof Vt?an.create([n,e],"and"):r2(n,e):e instanceof Vt?r2(e,n):function(i,s){if(Ke(i.filters.length>0&&s.filters.length>0),dh(i)&&dh(s))return GL(i,s.getFilters());const o=eC(i)?i:s,a=eC(i)?s:i,c=o.filters.map(u=>wC(u,a));return an.create(c,"or")}(n,e),lE(t)}function r2(n,e){if(dh(e))return GL(e,n.getFilters());{const t=e.filters.map(r=>wC(n,r));return an.create(t,"or")}}function lE(n){if(Ke(n instanceof Vt||n instanceof an),n instanceof Vt)return n;const e=n.getFilters();if(1===e.length)return lE(e[0]);if(zL(n))return n;const t=e.map(i=>lE(i)),r=[];return t.forEach(i=>{i instanceof Vt?r.push(i):i instanceof an&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:an.create(r,n.op)}class IJ{constructor(){this._n=new bC}addToCollectionParentIndex(e,t){return this._n.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(gs.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class bC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dn(Lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dn(Lt.comparator)).toArray()}}const dE=new Uint8Array(0);class wJ{constructor(e,t){this.databaseId=t,this.an=new bC,this.un=new Ea(r=>Uu(r),(r,i)=>Ag(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:pi(i)};return i2(e).put(s)}return J.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pL(t),""],!1,!0);return i2(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Fo(o.parent))}return r})}addFieldIndex(e,t){const r=jg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=wh(e);return s.next(a=>{o.put(ZV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=jg(e),i=wh(e),s=Ih(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=jg(e),r=Ih(e),i=wh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return J.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new e2(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ih(e);let i=!0;const s=new Map;return J.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=vt();const a=[];return J.forEach(s,(c,u)=>{var Q;be("IndexedDbIndexManager",`Using index ${Q=c,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(ie=>`${ie.fieldPath}:${ie.kind}`).join(",")}`} to execute ${Uu(t)}`);const f=function(Q,ie){const Ce=WT(ie);if(void 0===Ce)return null;for(const ke of eE(Q,Ce.fieldPath))switch(ke.op){case"array-contains-any":return ke.value.arrayValue.values||[];case"array-contains":return[ke.value]}return null}(u,c),m=function(Q,ie){const Ce=new Map;for(const ke of ku(ie))for(const $ of eE(Q,ke.fieldPath))switch($.op){case"==":case"in":Ce.set(ke.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return Ce.set(ke.fieldPath.canonicalString(),$.value),Array.from(Ce.values())}return null}(u,c),y=function(Q,ie){const Ce=[];let ke=!0;for(const $ of ku(ie)){const N=0===$.kind?QL(Q,$.fieldPath,Q.startAt):YL(Q,$.fieldPath,Q.startAt);Ce.push(N.value),ke&&(ke=N.inclusive)}return new Tc(Ce,ke)}(u,c),I=function(Q,ie){const Ce=[];let ke=!0;for(const $ of ku(ie)){const N=0===$.kind?YL(Q,$.fieldPath,Q.endAt):QL(Q,$.fieldPath,Q.endAt);Ce.push(N.value),ke&&(ke=N.inclusive)}return new Tc(Ce,ke)}(u,c),b=this.hn(c,u,y),R=this.hn(c,u,I),x=this.Pn(c,u,m),z=this.In(c.indexId,f,b,y.inclusive,R,I.inclusive,x);return J.forEach(z,V=>r.G(V,t.limit).next(Q=>{Q.forEach(ie=>{const Ce=Oe.fromSegments(ie.documentKey);o.has(Ce)||(o=o.add(Ce),a.push(Ce))})}))}).next(()=>a)}return J.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:EJ(an.create(e.filters,"and")).map(r=>rC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):dE,I=this.En(e,y,r[m%u],i),b=this.dn(e,y,s[m%u],o),R=a.map(x=>this.En(e,y,x,!0));f.push(...this.createRange(I,b,R))}return f}En(e,t,r,i){const s=new Gu(e,Oe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Gu(e,Oe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new e2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return J.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new dn(Mn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Bg;for(const i of ku(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);qu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Bg;return qu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Bg;return qu.bt.Pt(Vu(this.databaseId,t),r.Ht(function(s){const o=ku(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Bg);let s=0;for(const o of ku(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&bg(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);qu.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new Bg;c.seed(a.Wt()),qu.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Vt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jg(e),i=wh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return J.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new ch(m.sequenceNumber,new gs(Hu(m.readTime),new Oe(Fo(m.documentKey)),m.largestBatchId)):ch.empty(),I=f.fields.map(([b,R])=>new Fu(Mn.fromServerFormat(b),R));return new ah(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:dt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=jg(e),s=wh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>J.forEach(a,c=>s.put(ZV(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?J.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),J.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?J.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return Ih(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Ih(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Ih(e);let s=new dn(Ac);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Gu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new dn(Ac);const i=this.An(t,e);if(null==i)return r;const s=WT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(bg(o))for(const a of o.arrayValue.values||[])r=r.add(new Gu(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Gu(t.indexId,e.key,dE,i));return r}wn(e,t,r,i,s){be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),b=u.getIterator();let R=uh(I),x=uh(b);for(;R||x;){let z=!1,V=!1;if(R&&x){const Q=f(R,x);Q<0?V=!0:Q>0&&(z=!0)}else null!=R?V=!0:z=!0;z?(m(x),x=uh(b)):V?(y(R),R=uh(I)):(R=uh(I),x=uh(b))}}(i,s,Ac,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),J.waitFor(o)}gn(e){let t=1;return wh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ac(o,a)).filter((o,a,c)=>!a||0!==Ac(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Ac(o,e),c=Ac(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,dE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,dE,[]]))}return s}Dn(e,t){return Ac(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(s2)}getMinOffset(e,t){return J.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Be())).next(s2)}}function i2(n){return $r(n,"collectionParents")}function Ih(n){return $r(n,"indexEntries")}function jg(n){return $r(n,"indexConfiguration")}function wh(n){return $r(n,"indexState")}function s2(n){Ke(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new gs(e.readTime,e.documentKey,t)}const o2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function a2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{Ke(1===a)}));const u=[];for(const f of t.mutations){const m=TL(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return J.waitFor(s).next(()=>u)}function hE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Be();e=n.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class fE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Ke(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new fE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=bh(e),o=Dc(e);return o.add({}).next(a=>{Ke("number"==typeof a);const c=new cC(a,t,r,i),u=function(I,b,R){const x=R.baseMutations.map(V=>Lg(I.ct,V)),z=R.mutations.map(V=>Lg(I.ct,V));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:z}}(this.serializer,this.userId,c),f=[];let m=new dn((y,I)=>dt(y.canonicalString(),I.canonicalString()));for(const y of i){const I=TL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,dX))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),J.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return Dc(e).get(t).next(r=>r?(Ke(r.userId===this.userId),zu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?J.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Dc(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(Ke(a.batchId>=r),s=zu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).U("userMutationsIndex",t).next(r=>r.map(i=>zu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return bh(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=Fo(f);if(u===this.userId&&t.path.isEqual(y))return Dc(e).get(m).next(I=>{if(!I)throw Be();Ke(I.userId===this.userId),s.push(zu(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(dt);const i=[];return t.forEach(s=>{const o=Gv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=bh(e).J({range:a},(u,f,m)=>{const[y,I,b]=u,R=Fo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(b):m.done()});i.push(c)}),J.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Gv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new dn(dt);return bh(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,b=Fo(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Dc(e).get(s).next(o=>{if(null===o)throw Be();Ke(o.userId===this.userId),r.push(zu(this.serializer,o))}))}),J.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return a2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),J.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return bh(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Fo(s[1]);i.push(c)}else a.done()}).next(()=>{Ke(0===i.length)})})}containsKey(e,t){return c2(e,this.userId,t)}xn(e){return u2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function c2(n,e,t){const r=Gv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return bh(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function Dc(n){return $r(n,"mutations")}function bh(n){return $r(n,"documentMutations")}function u2(n){return $r(n,"mutationQueues")}class Wu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Wu(0)}static Ln(){return new Wu(-1)}}class bJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Wu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ye.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Th(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Ke(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Th(e).J((o,a)=>{const c=Vg(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>J.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Th(e).J((r,i)=>{const s=Vg(i);t(s)})}Bn(e){return l2(e).get("targetGlobalKey").next(t=>(Ke(null!==t),t))}kn(e,t){return l2(e).put("targetGlobalKey",t)}qn(e,t){return Th(e).put(WV(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Uu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Th(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=Vg(a);Ag(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Sc(e);return t.forEach(o=>{const a=pi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),J.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sc(e);return J.forEach(t,s=>{const o=pi(s.path);return J.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Sc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sc(e);let s=vt();return i.J({range:r,H:!0},(o,a,c)=>{const u=Fo(o[1]),f=new Oe(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=pi(t.path),i=IDBKeyRange.bound([r],[pL(r)],!1,!0);let s=0;return Sc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Th(e).get(t).next(r=>r?Vg(r):null)}}function Th(n){return $r(n,"targets")}function l2(n){return $r(n,"targetGlobal")}function Sc(n){return $r(n,"targetDocuments")}function d2([n,e],[t,r]){const i=dt(n,t);return 0===i?dt(e,r):i}class TJ{constructor(e){this.Kn=e,this.buffer=new dn(d2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();d2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class h2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){yc(r)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield _c(r)}yield t.zn(3e5)}))}}class CJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(ms.oe);const r=new TJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(o2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),sh()<=Oo.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class AJ{constructor(e,t){this.db=e,this.garbageCollector=function f2(n,e){return new CJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return pE(e,r)}removeReference(e,t,r){return pE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pE(e,t)}er(e,t){return function(i,s){let o=!1;return u2(i).Y(a=>c2(i,a,s).next(c=>(c&&(o=!0),J.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ye.min()),Sc(e).delete([0,pi(o.path)])))});i.push(c)}}).next(()=>J.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pE(e,t)}Xn(e,t){const r=Sc(e);let i,s=ms.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ms.oe&&t(new Oe(Fo(i)),s),s=u,i=c):s=ms.oe}).next(()=>{s!==ms.oe&&t(new Oe(Fo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pE(n,e){return Sc(n).put((i=n.currentSequenceNumber,{targetId:0,path:pi(e.path),sequenceNumber:i}));var i}class p2{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ku(e).put(r)}removeEntry(e,t,r){return Ku(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],cE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Ku(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($g(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Ku(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($g(t))},(i,s)=>{r={document:this.nr(t,s),size:hE(s)}}).next(()=>r)}getEntries(e,t){let r=ns();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=ns(),i=new bn(Oe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,hE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return J.resolve();let i=new dn(y2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound($g(i.first()),$g(i.last())),o=i.getIterator();let a=o.getNext();return Ku(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Oe.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&y2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$($g(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),cE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ku(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=ns();for(const m of u){const y=this.nr(Oe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Sg(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=ns();const o=_2(t,r),a=_2(t,gs.max());return Ku(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Oe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new SJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return m2(e).get("remoteDocumentGlobalKey").next(t=>(Ke(!!t),t))}tr(e,t){return m2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function pJ(n,e){let t;if(e.document)t=VV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Oe.fromSegments(e.noDocument.path),i=Hu(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be();{const r=Oe.fromSegments(e.unknownDocument.path),i=Hu(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Bn(i[0],i[1]);return Ye.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ye.min()))return r}return Pn.newInvalidDocument(e)}}function g2(n){return new DJ(n)}class SJ extends p2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ea(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new dn((s,o)=>dt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=GV(this.ar.serializer,o);i=i.add(s.path.popLast());const u=hE(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=GV(this.ar.serializer,o.convertToNoDocument(Ye.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function m2(n){return $r(n,"remoteDocumentGlobal")}function Ku(n){return $r(n,"remoteDocumentsV14")}function $g(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _2(n,e){const t=e.documentKey.path.toArray();return[n,cE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function y2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=dt(t[s],r[s]),i)return i;return i=dt(t.length,r.length),i||(i=dt(t[t.length-2],r[r.length-2]),i||dt(t[t.length-1],r[r.length-1]))}class RJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class v2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xg(r.mutation,i,ts.empty(),Bn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=vt()){const i=Vo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Rg();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Vo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ns();const o=Mg(),a=Mg();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof Ia)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),xg(f.mutation,u,f.mutation.getFieldMask(),Bn.now())):o.set(u.key,ts.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new RJ(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Mg();let i=new bn((o,a)=>o-a),s=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||ts.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||vt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=aV();f.forEach(y=>{if(!s.has(y)){const I=mV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Oe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(Vo());let a=-1,c=s;return o.next(u=>J.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?J.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,vt())).next(f=>({batchId:a,changes:oV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let i=Rg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Rg();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,c=>{const u=(m=t,y=c.child(s),new va(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,Pn.newInvalidDocument(f)))});let a=Rg();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&xg(f.mutation,u,ts.empty(),Bn.now()),Sg(t,u)&&(a=a.insert(c,u))}),a})}}class MJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return J.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:fr(i.createTime)}),J.resolve();var i}getNamedQuery(e,t){return J.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:_C(i.bundledQuery),readTime:fr(i.readTime)}),J.resolve();var i}}class PJ{constructor(){this.overlays=new bn(Oe.comparator),this.hr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vo();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=Vo(),s=t.length+1,o=new Oe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new bn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=Vo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Vo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return J.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lC(t,r));let s=this.hr.get(t);void 0===s&&(s=vt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class TC{constructor(){this.Pr=new dn(Hr.Ir),this.Tr=new dn(Hr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Hr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Oe(new Lt([])),r=new Hr(t,e),i=new Hr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Oe(new Lt([])),r=new Hr(t,e),i=new Hr(t,e+1);let s=vt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Hr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Oe.comparator(e.key,t.key)||dt(e.pr,t.pr)}static Er(e,t){return dt(e.pr,t.pr)||Oe.comparator(e.key,t.key)}}class xJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new dn(Hr.Ir)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new cC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),i=new Hr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(dt);return t.forEach(i=>{const s=new Hr(i,0),o=new Hr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),J.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Oe.isDocumentKey(s)||(s=s.child(""));const o=new Hr(new Oe(s),0);let a=new dn(dt);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),J.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ke(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return J.forEach(t.mutations,i=>{const s=new Hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Hr(t,0),i=this.wr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return J.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NJ{constructor(e){this.vr=e,this.docs=new bn(Oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=ns();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ns();const o=t.path,a=new Oe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||KT(mL(f),r)<=0||(i.has(f.key)||Sg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Be()}Fr(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new OJ(this)}getSize(e){return J.resolve(this.size)}}class OJ extends p2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class kJ{constructor(e){this.persistence=e,this.Mr=new Ea(t=>Uu(t),Ag),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Or=0,this.Nr=new TC,this.targetCount=0,this.Lr=Wu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),J.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Wu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.qn(t),J.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Nr.containsKey(t))}}class CC{constructor(e,t){this.Br={},this.overlays={},this.kr=new ms(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new kJ(this),this.indexManager=new IJ,this.remoteDocumentCache=new NJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new qV(t),this.$r=new MJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new xJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new FJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return J.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class FJ extends yL{constructor(e){super(),this.currentSequenceNumber=e}}class gE{constructor(e){this.persistence=e,this.zr=new TC,this.jr=null}static Hr(e){return new gE(e)}get Jr(){if(this.jr)return this.jr;throw Be()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),J.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Jr,r=>{const i=Oe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Ye.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return J.or([()=>J.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class LJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new qv("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bL,{unique:!0}),c.createObjectStore("documentMutations"),E2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=J.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),E2(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bL,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return J.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:bX});u.createIndex("collectionPathOverlayIndex",TX,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",CX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:hX});u.createIndex("documentKeyIndex",fX),u.createIndex("collectionGroupIndex",pX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:vX}).createIndex("sequenceNumberIndex",EX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:IX}).createIndex("documentKeyIndex",wX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=hE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>J.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>J.forEach(a,c=>{Ke(c.userId===s.userId);const u=zu(this.serializer,c);return a2(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new Lt(o),u=[0,pi(c)];s.push(t.get(u).next(f=>f?J.resolve():t.put({targetId:0,path:pi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>J.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:yX});const r=t.store("collectionParents"),i=new bC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:pi(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Lt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=Fo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Vg(i),o=WV(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Oe(Lt.fromString(m.document.name).popFirst(5)):m.noDocument?Oe.fromSegments(m.noDocument.path):m.unknownDocument?Oe.fromSegments(m.unknownDocument.path):Be()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>J.waitFor(i))}si(e,t){const r=t.store("mutations"),i=g2(this.serializer),s=new CC(gE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:vt();zu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),J.forEach(a,(c,u)=>{const f=new jr(u),m=uE.lt(this.serializer,f),y=s.getIndexManager(f),I=fE.lt(f,this.serializer,y,s.referenceDelegate);return new v2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new YT(t,ms.oe),c).next()})})}}function E2(n){n.createObjectStore("targetDocuments",{keyPath:mX}).createIndex("documentTargetsIndex",_X,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gX,{unique:!0}),n.createObjectStore("targetGlobal")}const AC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DC{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!DC.D())throw new Ie(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AJ(this,i),this.Ti=t+"main",this.serializer=new qV(c),this.Ei=new ko(this.Ti,this.ui,new LJ(this.serializer)),this.Qr=new bJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=g2(this.serializer),this.$r=new gJ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(se.FAILED_PRECONDITION,AC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ms(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,le.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_E(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yc(e))return be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Hg(e).get("owner").next(t=>J.resolve(this.Si(t)))}bi(e){return _E(e).delete(this.clientId)}Di(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$r(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return J.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?J.resolve(!0):Hg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ie(se.FAILED_PRECONDITION,AC);return!1}}return!(!this.networkEnabled||!this.inForeground)||_E(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new YT(t,ms.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>_E(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return fE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return uE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?DX:15===c?SL:14===c?DL:13===c?AL:12===c?AX:11===c?CL:void Be();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new YT(a,this.kr?this.kr.next():ms.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ie(se.FAILED_PRECONDITION,_L);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Hg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(se.FAILED_PRECONDITION,AC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hg(e).put("owner",t)}static D(){return ko.D()}yi(e){const t=Hg(e);return t.get("owner").next(r=>this.Si(r)?(be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,_t.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hg(n){return $r(n,"owner")}function _E(n){return $r(n,"clientMetadata")}function SC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=vt(),i=vt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new RC(e,t.fromCache,r,i)}}class VJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class I2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,_t.G6)()?8:vL((0,_t.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(sh()<=Oo.in.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ph(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),J.resolve()):(sh()<=Oo.in.DEBUG&&be("QueryEngine","Query:",ph(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(sh()<=Oo.in.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ph(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(t))):J.resolve())}ji(e,t){if(JL(t))return J.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tE(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=vt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,tE(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return JL(t)||i.isEqual(Ye.min())?J.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?J.resolve(null):(sh()<=Oo.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ph(t)),this.es(e,o,t,gL(i,-1)).next(a=>a))})}Zi(e,t){let r=new dn(iV(e));return t.forEach((i,s)=>{Sg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return sh()<=Oo.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ph(t)),this.zi.getDocumentsMatchingQuery(e,t,gs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class UJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new bn(dt),this.rs=new Ea(s=>Uu(s),Ag),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function w2(n,e,t,r){return new UJ(n,e,t,r)}function b2(n,e){return MC.apply(this,arguments)}function MC(){return(MC=(0,le.Z)(function*(n,e){const t=Me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=vt();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function T2(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function C2(n,e,t){let r=vt(),i=vt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ns();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ye.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):be("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function $J(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ch(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new wa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Ah(n,e,t){return PC.apply(this,arguments)}function PC(){return(PC=(0,le.Z)(function*(n,e,t){const r=Me(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yc(o))throw o;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function yE(n,e,t){const r=Me(n);let i=Ye.min(),s=vt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=Me(c),y=m.rs.get(f);return void 0!==y?J.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,gi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Ye.min(),t?s:vt())).next(a=>(S2(r,rV(e),a),{documents:a,hs:s})))}function A2(n,e){const t=Me(n),r=Me(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function D2(n,e){const t=Me(n),r=t.ss.get(e)||Ye.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,gL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(S2(t,e,i),i))}function S2(n,e,t){let r=n.ss.get(e)||Ye.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function xC(){return(xC=(0,le.Z)(function*(n,e,t,r){const i=Me(n);let s=vt(),o=ns();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Ch(i,(f=r,gi(hh(Lt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>C2(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function zJ(n,e){return NC.apply(this,arguments)}function NC(){return(NC=(0,le.Z)(function*(n,e,t=vt()){const r=yield Ch(n,gi(_C(e.bundledQuery))),i=Me(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=fr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Lr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function R2(n,e){return`firestore_clients_${n}_${e}`}function M2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function OC(n,e){return`firestore_targets_${n}_${e}`}class vE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ie(i.error.code,i.error.message))),o?new vE(e,t,i.state,s):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ie(r.error.code,r.error.message))),s?new zg(e,r.state,i):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class EE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=oC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=IL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new EE(e,s):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kC(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class FC{constructor(){this.activeTargetIds=oC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LC{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new bn(dt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=R2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new FC),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(R2(e.persistenceKey,i));if(s){const o=EE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(OC(this.persistenceKey,e));if(r){const i=zg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(OC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return be("SharedClientState","READ",e,t),t}setItem(e,t){be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=ms.oe;if(null!=o)try{const c=JSON.parse(o);Ke("number"==typeof c),a=c}catch(c){hr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ms.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new vE(this.currentUser,e,t,r),s=M2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=M2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=OC(this.persistenceKey,e),s=new zg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return EE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return vE.Es(new jr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return zg.Es(i,t)}xs(e){return kC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=oC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class P2{constructor(){this.no=new FC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new FC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qJ{io(e){}shutdown(){}}class x2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let IE=null;function VC(){return null===IE?IE=268435456+Math.round(2147483648*Math.random()):IE++,"0x"+IE.toString(16)}const GJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const _i="WebChannelConnection";class KJ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=VC(),c=this.vo(t,r.toUriEncodedString());be("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(be("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw es("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+ih,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${GJ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=VC();return new Promise((o,a)=>{const c=new iL;c.setWithCredentials(!0),c.listenOnce(oL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zv.NO_ERROR:const f=c.getResponseJson();be(_i,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case zv.TIMEOUT:be(_i,`RPC '${e}' ${s} timed out`),a(new Ie(se.DEADLINE_EXCEEDED,"Request time out"));break;case zv.HTTP_ERROR:const m=c.getStatus();if(be(_i,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const b=function(x){const z=x.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(z)>=0?z:se.UNKNOWN}(I.status);a(new Ie(b,I.message))}else a(new Ie(se.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ie(se.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{be(_i,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);be(_i,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=VC(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uL(),a=cL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new sL({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");be(_i,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const b=new WJ({lo:x=>{I?be(_i,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(y||(be(_i,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),be(_i,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},ho:()=>m.close()}),R=(x,z,V)=>{x.listen(z,Q=>{try{V(Q)}catch(ie){setTimeout(()=>{throw ie},0)}})};return R(m,mg.EventType.OPEN,()=>{I||(be(_i,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),R(m,mg.EventType.CLOSE,()=>{I||(I=!0,be(_i,`RPC '${e}' stream ${i} transport closed`),b.po())}),R(m,mg.EventType.ERROR,x=>{I||(I=!0,es(_i,`RPC '${e}' stream ${i} transport errored:`,x),b.po(new Ie(se.UNAVAILABLE,"The operation could not be completed")))}),R(m,mg.EventType.MESSAGE,x=>{var z;if(!I){const V=x.data[0];Ke(!!V);const ie=V.error||(null===(z=V[0])||void 0===z?void 0:z.error);if(ie){be(_i,`RPC '${e}' stream ${i} received error:`,ie);const Ce=ie.status;let ke=function(L){const q=Ar[L];if(void 0!==q)return bV(q)}(Ce),$=ie.message;void 0===ke&&(ke=se.INTERNAL,$="Unknown error status: "+Ce+" with message "+ie.message),I=!0,b.po(new Ie(ke,$)),m.close()}else be(_i,`RPC '${e}' stream ${i} received:`,V),b.yo(V)}}),R(a,aL.STAT_EVENT,x=>{x.stat===qT.PROXY?be(_i,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===qT.NOPROXY&&be(_i,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}}function N2(){return typeof window<"u"?window:null}function wE(){return typeof document<"u"?document:null}function qg(n){return new iJ(n,!0)}class UC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class O2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new UC(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,le.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,le.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Ie(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,le.Z)(function*(){e.state=0,e.start()}))}c_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZJ extends O2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function aJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Be(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Ke(void 0===f||"string"==typeof f),Lr.fromBase64String(f||"")):(Ke(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Lr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?se.UNKNOWN:bV(u.code);return new Ie(f,u.message||"")}(o);t=new SV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Uo(n,r.document.name),s=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):Ye.min(),a=new ri({mapValue:{fields:r.document.fields}}),c=Pn.newFoundDocument(i,s,o,a);t=new oE(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Uo(n,r.document),s=r.readTime?fr(r.readTime):Ye.min(),o=Pn.newNoDocument(i,s);t=new oE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Uo(n,r.document);t=new oE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Be();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new XX(i,s);t=new DV(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ye.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ye.min():o.readTime?fr(o.readTime):Ye.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=gC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=Jv(c)?{documents:UV(s,c)}:{query:aE(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xV(s,o.resumeToken);const u=hC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ye.min())>0){a.readTime=vh(s,o.snapshotVersion.toTimestamp());const u=hC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function uJ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=gC(this.serializer),t.removeTarget=e,this.i_(t)}}class QJ extends O2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function cJ(n,e){return n&&n.length>0?(Ke(void 0!==e),n.map(t=>function(i,s){let o=fr(i.updateTime?i.updateTime:s);return o.isEqual(Ye.min())&&(o=fr(s)),new ZX(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.A_(r,t)}return Ke(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=gC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Lg(this.serializer,r))};this.i_(t)}}class YJ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,pC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(se.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,pC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(se.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class XJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(hr(t),this.y_=!1):be("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class JJ{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,le.Z)(function*(){var c;Rc(o)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,le.Z)(function*(f){const m=Me(f);m.M_.add(4),yield Dh(m),m.N_.set("Unknown"),m.M_.delete(4),yield Gg(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new XJ(r,i)}}function Gg(n){return BC.apply(this,arguments)}function BC(){return(BC=(0,le.Z)(function*(n){if(Rc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Dh(n){return jC.apply(this,arguments)}function jC(){return(jC=(0,le.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function bE(n,e){const t=Me(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),zC(t)?HC(t):Mh(t).Xo()&&$C(t,e))}function Sh(n,e){const t=Me(n),r=Mh(t);t.F_.delete(e),r.Xo()&&k2(t,e),0===t.F_.size&&(r.Xo()?r.n_():Rc(t)&&t.N_.set("Unknown"))}function $C(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mh(n).P_(e)}function k2(n,e){n.L_.xe(e),Mh(n).I_(e)}function HC(n){n.L_=new eJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Mh(n).start(),n.N_.w_()}function zC(n){return Rc(n)&&!Mh(n).Zo()&&n.F_.size>0}function Rc(n){return 0===Me(n).M_.size}function F2(n){n.L_=void 0}function eee(n){return qC.apply(this,arguments)}function qC(){return(qC=(0,le.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function tee(n){return GC.apply(this,arguments)}function GC(){return(GC=(0,le.Z)(function*(n){n.F_.forEach((e,t)=>{$C(n,e)})})).apply(this,arguments)}function nee(n,e){return WC.apply(this,arguments)}function WC(){return(WC=(0,le.Z)(function*(n,e){F2(n),zC(n)?(n.N_.D_(e),HC(n)):n.N_.set("Unknown")})).apply(this,arguments)}function ree(n,e,t){return KC.apply(this,arguments)}function KC(){return KC=(0,le.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof SV&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield TE(n,r)}else if(e instanceof oE?n.L_.Ke(e):e instanceof DV?n.L_.He(e):n.L_.We(e),!t.isEqual(Ye.min()))try{const r=yield T2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(Lr.EMPTY_BYTE_STRING,f.snapshotVersion)),k2(s,c);const m=new wa(f.target,c,u,f.sequenceNumber);$C(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){be("RemoteStore","Failed to raise snapshot:",r),yield TE(n,r)}var r}),KC.apply(this,arguments)}function TE(n,e,t){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,le.Z)(function*(n,e,t){if(!yc(e))throw e;n.M_.add(1),yield Dh(n),n.N_.set("Offline"),t||(t=()=>T2(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Gg(n)}))})).apply(this,arguments)}function L2(n,e){return e().catch(t=>TE(n,t,e))}function Rh(n){return QC.apply(this,arguments)}function QC(){return(QC=(0,le.Z)(function*(n){const e=Me(n),t=Mc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;iee(e);)try{const i=yield $J(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,see(e,i)}catch(i){yield TE(e,i)}V2(e)&&U2(e)})).apply(this,arguments)}function iee(n){return Rc(n)&&n.v_.length<10}function see(n,e){n.v_.push(e);const t=Mc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function V2(n){return Rc(n)&&!Mc(n).Zo()&&n.v_.length>0}function U2(n){Mc(n).start()}function oee(n){return YC.apply(this,arguments)}function YC(){return(YC=(0,le.Z)(function*(n){Mc(n).V_()})).apply(this,arguments)}function aee(n){return XC.apply(this,arguments)}function XC(){return(XC=(0,le.Z)(function*(n){const e=Mc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function cee(n,e,t){return JC.apply(this,arguments)}function JC(){return(JC=(0,le.Z)(function*(n,e,t){const r=n.v_.shift(),i=uC.from(r,e,t);yield L2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rh(n)})).apply(this,arguments)}function uee(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,le.Z)(function*(n,e){var t;e&&Mc(n).E_&&(yield(t=(0,le.Z)(function*(i,s){if(wV(a=s.code)&&a!==se.ABORTED){const o=i.v_.shift();Mc(i).t_(),yield L2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Rh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),V2(n)&&U2(n)}),eA.apply(this,arguments)}function B2(n,e){return tA.apply(this,arguments)}function tA(){return(tA=(0,le.Z)(function*(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const r=Rc(t);t.M_.add(3),yield Dh(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Gg(t)})).apply(this,arguments)}function nA(n,e){return rA.apply(this,arguments)}function rA(){return(rA=(0,le.Z)(function*(n,e){const t=Me(n);e?(t.M_.delete(2),yield Gg(t)):e||(t.M_.add(2),yield Dh(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Mh(n){return n.B_||(n.B_=function(t,r,i){const s=Me(t);return s.f_(),new ZJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:eee.bind(null,n),To:tee.bind(null,n),Ao:nee.bind(null,n),h_:ree.bind(null,n)}),n.x_.push(function(){var e=(0,le.Z)(function*(t){t?(n.B_.t_(),zC(n)?HC(n):n.N_.set("Unknown")):(yield n.B_.stop(),F2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Mc(n){return n.k_||(n.k_=function(t,r,i){const s=Me(t);return s.f_(),new QJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:oee.bind(null,n),Ao:uee.bind(null,n),R_:aee.bind(null,n),A_:cee.bind(null,n)}),n.x_.push(function(){var e=(0,le.Z)(function*(t){t?(n.k_.t_(),yield Rh(n)):(yield n.k_.stop(),n.v_.length>0&&(be("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class iA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new iA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ph(n,e){if(hr("AsyncQueue",`${e}: ${n}`),yc(n))return new Ie(se.UNAVAILABLE,`${e}: ${n}`);throw n}class xh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=Rg(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new xh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class j2{constructor(){this.q_=new bn(Oe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Be():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nh{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Nh(e,t,xh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class lee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class dee{constructor(){this.queries=new Ea(e=>nV(e),Dg),this.onlineState="Unknown",this.z_=new Set}}function sA(n,e){return oA.apply(this,arguments)}function oA(){return(oA=(0,le.Z)(function*(n,e){const t=Me(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new lee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ph(o,`Initialization of query '${ph(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&uA(t)})).apply(this,arguments)}function aA(n,e){return cA.apply(this,arguments)}function cA(){return(cA=(0,le.Z)(function*(n,e){const t=Me(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function hee(n,e){const t=Me(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&uA(t)}function fee(n,e,t){const r=Me(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function uA(n){n.z_.forEach(e=>{e.next()})}var lA,$2;($2=lA||(lA={})).J_="default",$2.Cache="cache";class dA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==lA.Cache}}class pee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class H2{constructor(e){this.serializer=e}Ps(e){return Uo(this.serializer,e)}Is(e){return e.metadata.exists?VV(this.serializer,e.document,!1):Pn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return fr(e)}}class gee{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=z2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Lt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new H2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||vt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function HJ(n,e,t,r){return xC.apply(this,arguments)}(e.localStore,new H2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield zJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function z2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class q2{constructor(e){this.key=e}}class G2{constructor(e){this.key=e}}class W2{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=vt(),this.mutatedKeys=vt(),this.Ia=iV(e),this.Ta=new xh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new j2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Sg(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let x=!1;y&&I?y.data.isEqual(I.data)?b!==R&&(r.track({type:3,doc:I}),x=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),x=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),x=!0):y&&!I&&(r.track({type:1,doc:y}),x=!0,(c||u)&&(a=!0)),x&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,b){const R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return R(I)-R(b)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new Nh(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new j2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=vt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new G2(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new q2(r))}),t}pa(e){this.la=e.hs,this.Pa=vt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Nh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class mee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _ee{constructor(e){this.key=e,this.wa=!1}}class yee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ea(a=>nV(a),Dg),this.Da=new Map,this.Ca=new Set,this.va=new bn(Oe.comparator),this.Fa=new Map,this.Ma=new TC,this.xa={},this.Oa=new Map,this.Na=Wu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function vee(n,e){return hA.apply(this,arguments)}function hA(){return(hA=(0,le.Z)(function*(n,e,t=!0){const r=CE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield K2(r,e,t,!0),i})).apply(this,arguments)}function Eee(n,e){return fA.apply(this,arguments)}function fA(){return(fA=(0,le.Z)(function*(n,e){const t=CE(n);yield K2(t,e,!0,!1)})).apply(this,arguments)}function K2(n,e,t,r){return pA.apply(this,arguments)}function pA(){return(pA=(0,le.Z)(function*(n,e,t,r){const i=yield Ch(n.localStore,gi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield gA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&bE(n.remoteStore,i),a})).apply(this,arguments)}function gA(n,e,t,r,i){return mA.apply(this,arguments)}function mA(){return mA=(0,le.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(b=(0,le.Z)(function*(x,z,V,Q){let ie=z.view.da(V);ie.Xi&&(ie=yield yE(x.localStore,z.query,!1).then(({documents:N})=>z.view.da(N,ie)));const Ce=Q&&Q.targetChanges.get(z.targetId),ke=Q&&null!=Q.targetMismatches.get(z.targetId),$=z.view.applyChanges(ie,x.isPrimaryClient,Ce,ke);return DA(x,z.targetId,$.fa),$.snapshot}),function R(x,z,V,Q){return b.apply(this,arguments)})(n,m,y,I);var b};const s=yield yE(n.localStore,e,!0),o=new W2(e,s.hs),a=o.da(s.documents),c=kg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);DA(n,t,u.fa);const f=new mee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),mA.apply(this,arguments)}function Iee(n,e,t){return _A.apply(this,arguments)}function _A(){return(_A=(0,le.Z)(function*(n,e,t){const r=Me(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Dg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sh(r.remoteStore,i.targetId),Oh(r,i.targetId)}).catch(_c))):(Oh(r,i.targetId),yield Ah(r.localStore,i.targetId,!0))})).apply(this,arguments)}function wee(n,e){return yA.apply(this,arguments)}function yA(){return(yA=(0,le.Z)(function*(n,e){const t=Me(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sh(t.remoteStore,r.targetId))})).apply(this,arguments)}function vA(){return(vA=(0,le.Z)(function*(n,e,t){const r=VA(n);try{const i=yield function(o,a){const c=Me(o),u=Bn.now(),f=a.reduce((I,b)=>I.add(b.key),vt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=ns(),R=vt();return c.os.getEntries(I,f).next(x=>{b=x,b.forEach((z,V)=>{V.isValidDocument()||(R=R.add(z))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(x=>{m=x;const z=[];for(const V of a){const Q=YX(V,m.get(V.key).overlayedDocument);null!=Q&&z.push(new Ia(V.key,Q,BL(Q.value.mapValue),jn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,z,a)}).next(x=>{y=x;const z=x.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,x.batchId,z)})}).then(()=>({batchId:y.batchId,changes:oV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new bn(dt)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield ba(r,i.changes),yield Rh(r.remoteStore)}catch(i){const s=Ph(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Z2(n,e){return EA.apply(this,arguments)}function EA(){return(EA=(0,le.Z)(function*(n,e){const t=Me(n);try{const r=yield function jJ(n,e){const t=Me(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,x,z;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Lr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),x=I,z=f,(0===(R=y).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=ns(),u=vt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(C2(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(Ye.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Ke(o.wa):i.removedDocuments.size>0&&(Ke(o.wa),o.wa=!1))}),yield ba(t,r,e)}catch(r){yield _c(r)}})).apply(this,arguments)}function Q2(n,e,t){const r=Me(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Me(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&uA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Tee(n,e,t){return IA.apply(this,arguments)}function IA(){return(IA=(0,le.Z)(function*(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new bn(Oe.comparator);o=o.insert(s,Pn.newNoDocument(s,Ye.min()));const a=vt().add(s),c=new Og(Ye.min(),new Map,new bn(dt),o,a);yield Z2(r,c),r.va=r.va.remove(s),r.Fa.delete(e),SA(r)}else yield Ah(r.localStore,e,!1).then(()=>Oh(r,e,t)).catch(_c)})).apply(this,arguments)}function Cee(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,le.Z)(function*(n,e){const t=Me(n),r=e.batch.batchId;try{const i=yield function BJ(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=J.resolve();return y.forEach(b=>{I=I.next(()=>f.getEntry(c,b)).next(R=>{const x=u.docVersions.get(b);Ke(null!==x),R.version.compareTo(x)<0&&(m.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);AA(t,r,null),CA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ba(t,i)}catch(i){yield _c(i)}})).apply(this,arguments)}function Aee(n,e,t){return bA.apply(this,arguments)}function bA(){return(bA=(0,le.Z)(function*(n,e,t){const r=Me(n);try{const i=yield function(o,a){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(Ke(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);AA(r,e,t),CA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ba(r,i)}catch(i){yield _c(i)}})).apply(this,arguments)}function TA(){return(TA=(0,le.Z)(function*(n,e){const t=Me(n);Rc(t.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Me(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Ph(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function CA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function AA(n,e,t){const r=Me(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Oh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||Y2(n,r)})}function Y2(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Sh(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),SA(n))}function DA(n,e,t){for(const r of t)r instanceof q2?(n.Ma.addReference(r.key,e),See(n,r)):r instanceof G2?(be("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||Y2(n,r.key)):Be()}function See(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(be("SyncEngine","New document in limbo: "+t),n.Ca.add(r),SA(n))}function SA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Oe(Lt.fromString(e)),r=n.Na.next();n.Fa.set(r,new _ee(t)),n.va=n.va.insert(t,r),bE(n.remoteStore,new wa(gi(hh(t.path)),r,"TargetPurposeLimboResolution",ms.oe))}}function ba(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,le.Z)(function*(n,e,t){const r=Me(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=RC.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,le.Z)(function*(u,f){const m=Me(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>J.forEach(f,I=>J.forEach(I.qi,b=>m.persistence.referenceDelegate.addReference(y,I.targetId,b)).next(()=>J.forEach(I.Qi,b=>m.persistence.referenceDelegate.removeReference(y,I.targetId,b)))))}catch(y){if(!yc(y))throw y;be("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const b=m.ns.get(I),x=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.ns=m.ns.insert(I,x)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),RA.apply(this,arguments)}function Ree(n,e){return MA.apply(this,arguments)}function MA(){return(MA=(0,le.Z)(function*(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const r=yield b2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new Ie(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ba(t,r.us)}var s})).apply(this,arguments)}function Mee(n,e){const t=Me(n),r=t.Fa.get(e);if(r&&r.wa)return vt().add(r.key);{let i=vt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Pee(n,e){return PA.apply(this,arguments)}function PA(){return(PA=(0,le.Z)(function*(n,e){const t=Me(n),r=yield yE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&DA(t,e.targetId,i.fa),i})).apply(this,arguments)}function xee(n,e){return xA.apply(this,arguments)}function xA(){return(xA=(0,le.Z)(function*(n,e){const t=Me(n);return D2(t.localStore,e).then(r=>ba(t,r))})).apply(this,arguments)}function Nee(n,e,t,r){return NA.apply(this,arguments)}function NA(){return(NA=(0,le.Z)(function*(n,e,t,r){const i=Me(n),s=yield function(a,c){const u=Me(a),f=Me(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):J.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield Rh(i.remoteStore):"acknowledged"===t||"rejected"===t?(AA(i,e,r||null),CA(i,e),c=e,Me(Me(i.localStore).mutationQueue).Mn(c)):Be(),yield ba(i,s)):be("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function OA(){return(OA=(0,le.Z)(function*(n,e){const t=Me(n);if(CE(t),VA(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield X2(t,r.toArray());t.La=!0,yield nA(t.remoteStore,!0);for(const s of i)bE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Oh(t,o),Ah(t.localStore,o,!0))),Sh(t.remoteStore,o)}),yield i,yield X2(t,r),function(o){const a=Me(o);a.Fa.forEach((c,u)=>{Sh(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new bn(Oe.comparator)}(t),t.La=!1,yield nA(t.remoteStore,!1)}})).apply(this,arguments)}function X2(n,e,t){return kA.apply(this,arguments)}function kA(){return(kA=(0,le.Z)(function*(n,e,t){const r=Me(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield Ch(r.localStore,gi(c[0]));for(const u of c){const f=r.ba.get(u),m=yield Pee(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield A2(r.localStore,o);a=yield Ch(r.localStore,u),yield gA(r,J2(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function J2(n){return XL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kee(n){return t=Me(n).localStore,Me(Me(t).persistence).Bi();var t}function Fee(n,e,t,r){return FA.apply(this,arguments)}function FA(){return(FA=(0,le.Z)(function*(n,e,t,r){const i=Me(n);if(i.La)return void be("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield D2(i.localStore,rV(s[0])),a=Og.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield ba(i,o,a);break}case"rejected":yield Ah(i.localStore,e,!0),Oh(i,e,r);break;default:Be()}})).apply(this,arguments)}function Lee(n,e,t){return LA.apply(this,arguments)}function LA(){return(LA=(0,le.Z)(function*(n,e,t){const r=CE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){be("SyncEngine","Adding an already active target "+i);continue}const s=yield A2(r.localStore,i),o=yield Ch(r.localStore,s);yield gA(r,J2(s),o.targetId,!1,o.resumeToken),bE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Ah(r.localStore,i,!1).then(()=>{Sh(r.remoteStore,i),Oh(r,i)}).catch(_c))}})).apply(this,arguments)}function CE(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tee.bind(null,e),e.Sa.h_=hee.bind(null,e.eventManager),e.Sa.ka=fee.bind(null,e.eventManager),e}function VA(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Aee.bind(null,e),e}class Wg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.serializer=qg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return w2(this.persistence,new I2,e.initialUser,this.serializer)}createPersistence(e){return new CC(gE.Hr,this.serializer)}createSharedClientState(e){return new P2}terminate(){var e=this;return(0,le.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class UA extends Wg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield VA(r.Qa.syncEngine),yield Rh(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return w2(this.persistence,new I2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new h2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new uX(t,this.persistence);return new cX(e.asyncQueue,r)}createPersistence(e){const t=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new DC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,N2(),wE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new P2}}class eU extends UA{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof LC&&(r.sharedClientState.syncEngine={Zs:Nee.bind(null,i),Xs:Fee.bind(null,i),eo:Lee.bind(null,i),Bi:kee.bind(null,i),Ys:xee.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,le.Z)(function*(o){yield function Oee(n,e){return OA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=N2();if(!LC.D(t))throw new Ie(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new LC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kh{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Q2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ree.bind(null,r.syncEngine),yield nA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dee}createDatastore(e){const t=qg(e.databaseInfo.databaseId),r=new KJ(e.databaseInfo);return new YJ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>Q2(this.syncEngine,t,0),a=x2.D()?new x2:new qJ,new JJ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new yee(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,le.Z)(function*(){var t,r;yield(r=(0,le.Z)(function*(s){const o=Me(s);be("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Dh(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function tU(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class AE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,le.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new pee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,le.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,le.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class jee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ie(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,le.Z)(function*(o,a){const c=Me(o),u={documents:a.map(I=>Fg(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,Lt.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const b=function oJ(n,e){return"found"in e?function(r,i){Ke(!!i.found);const s=Uo(r,i.found.name),o=fr(i.found.updateTime),a=i.found.createTime?fr(i.found.createTime):Ye.min(),c=new ri({mapValue:{fields:i.found.fields}});return Pn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){Ke(!!i.missing),Ke(!!i.readTime);const s=Uo(r,i.missing),o=fr(i.readTime);return Pn.newNoDocument(s,o)}(n,e):Be()}(c.serializer,I);m.set(b.key.toString(),b)});const y=[];return a.forEach(I=>{const b=m.get(I.toString());Ke(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Oe.fromPath(i);e.mutations.push(new aC(s,e.precondition(s)))}),yield(r=(0,le.Z)(function*(s,o){const a=Me(s),c={writes:o.map(u=>Lg(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,Lt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Be();t=Ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ye.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ye.min()))throw new Ie(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $ee{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new UC(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,le.Z)(function*(){const t=new jee(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!vg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wV(t)}return!1}}class Hee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jr.UNAUTHENTICATED,this.clientId=fL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,le.Z)(function*(a){be("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(be("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ph(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function DE(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,le.Z)(function*(s){r.isEqual(s)||(yield b2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),BA.apply(this,arguments)}function jA(n,e){return $A.apply(this,arguments)}function $A(){return($A=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HA(n);be("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>B2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>B2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function nU(n){return"FirebaseError"===n.name?n.code===se.FAILED_PRECONDITION||n.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function HA(n){return zA.apply(this,arguments)}function zA(){return(zA=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield DE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!nU(t))throw t;es("Error using user provided cache. Falling back to memory cache: "+t),yield DE(n,new Wg)}}else be("FirestoreClient","Using default OfflineComponentProvider"),yield DE(n,new Wg);return n._offlineComponents})).apply(this,arguments)}function SE(n){return qA.apply(this,arguments)}function qA(){return(qA=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),yield jA(n,n._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),yield jA(n,new kh))),n._onlineComponents})).apply(this,arguments)}function rU(n){return HA(n).then(e=>e.persistence)}function Fh(n){return HA(n).then(e=>e.localStore)}function iU(n){return SE(n).then(e=>e.remoteStore)}function GA(n){return SE(n).then(e=>e.syncEngine)}function Lh(n){return WA.apply(this,arguments)}function WA(){return(WA=(0,le.Z)(function*(n){const e=yield SE(n),t=e.eventManager;return t.onListen=vee.bind(null,e.syncEngine),t.onUnlisten=Iee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Eee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wee.bind(null,e.syncEngine),t})).apply(this,arguments)}function oU(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(s,o,a,c,u){const f=new AE({next:y=>{o.enqueueAndForget(()=>aA(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new Ie(se.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new Ie(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new dA(hh(a.path),f,{includeMetadataChanges:!0,ra:!0});return sA(s,m)}(yield Lh(n),n.asyncQueue,e,t,r)})),r.promise}function aU(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(s,o,a,c,u){const f=new AE({next:y=>{o.enqueueAndForget(()=>aA(s,m)),y.fromCache&&"server"===c.source?u.reject(new Ie(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new dA(a,f,{includeMetadataChanges:!0,ra:!0});return sA(s,m)}(yield Lh(n),n.asyncQueue,e,t,r)})),r.promise}function cU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const uU=new Map;function KA(n,e,t){if(!t)throw new Ie(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lU(n,e,t,r){if(!0===e&&!0===r)throw new Ie(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dU(n){if(!Oe.isDocumentKey(n))throw new Ie(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hU(n){if(Oe.isDocumentKey(n))throw new Ie(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Be()}function At(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RE(n);throw new Ie(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fU(n,e){if(e<=0)throw new Ie(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class pU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=cU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new QY;switch(r.type){case"firstParty":return new eX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uU.get(t);r&&(be("ComponentProvider","Removing Datastore"),uU.delete(t),r.terminate())}(this),Promise.resolve()}}function gU(n,e,t,r={}){var i;const s=(n=At(n,Kg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=jr.MOCK_USER;else{a=(0,_t.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ie(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new jr(u)}n._authCredentials=new YY(new dL(a,c))}}class ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Bo extends ii{constructor(e,t,r){super(e,t,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Oe(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function mU(n,e,...t){if(n=(0,_t.m9)(n),KA("collection","path",e),n instanceof Kg){const r=Lt.fromString(e,...t);return hU(r),new Bo(n,null,r)}{if(!(n instanceof xn||n instanceof Bo))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return hU(r),new Bo(n.firestore,null,r)}}function ME(n,e,...t){if(n=(0,_t.m9)(n),1===arguments.length&&(e=fL.newId()),KA("doc","path",e),n instanceof Kg){const r=Lt.fromString(e,...t);return dU(r),new xn(n,null,new Oe(r))}{if(!(n instanceof xn||n instanceof Bo))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return dU(r),new xn(n.firestore,n instanceof Bo?n.converter:null,new Oe(r))}}function _U(n,e){return n=(0,_t.m9)(n),e=(0,_t.m9)(e),(n instanceof xn||n instanceof Bo)&&(e instanceof xn||e instanceof Bo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZA(n,e){return n=(0,_t.m9)(n),e=(0,_t.m9)(e),n instanceof ii&&e instanceof ii&&n.firestore===e.firestore&&Dg(n._query,e._query)&&n.converter===e.converter}class nte{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new UC(this,"async_queue_retry"),this.hu=()=>{const t=wE();t&&be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=wE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=wE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Fr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,le.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!yc(t))throw t;be("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,hr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=iA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Be()}verifyOperationInProgress(){}du(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function QA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class rte{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hn extends Kg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nte,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yU(this),this._firestoreClient.terminate()}}function ste(n,e){const t="object"==typeof n?n:(0,tr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,tr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,_t.P0)("firestore");s&&gU(i,...s)}return i}function $n(n){return n._firestoreClient||yU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new MX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,cU(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new Hee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function vU(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield DE(n,t),yield jA(n,e),r.resolve()}catch(i){const s=i;if(!nU(s))throw s;es("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function EU(n){if(n._initialized||n._terminated)throw new Ie(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jo(Lr.fromBase64String(e))}catch(t){throw new Ie(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jo(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ta{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zu{constructor(e){this._methodName=e}}class PE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}}const gte=/^__.*__$/;class mte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms):new _h(e,this.data,t,this.fieldTransforms)}}class IU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class xE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new xE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kE(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(wU(this.fu)&&gte.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class _te{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qg(e)}Fu(e,t,r,i=!1){return new xE({fu:e,methodName:t,vu:r,path:Mn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(n){const e=n._freezeSettings(),t=qg(n._databaseId);return new _te(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NE(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);rD("Data must be an object, but it was:",o,r);const a=CU(r,o);let c,u;if(s.merge)c=new ts(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Yg(e,m,t);if(!o.contains(y))throw new Ie(se.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);DU(f,y)||f.push(y)}c=new ts(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new mte(new ri(a),c,u)}class Qg extends Zu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qg}}function bU(n,e,t){return new xE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class YA extends Zu{_toFieldTransform(e){return new Pg(e.path,new gh)}isEqual(e){return e instanceof YA}}class XA extends Zu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=bU(this,e,!0),r=this.Mu.map(s=>Yu(s,t)),i=new Bu(r);return new Pg(e.path,i)}isEqual(e){return e instanceof XA&&(0,_t.vZ)(this.Mu,e.Mu)}}class JA extends Zu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=bU(this,e,!0),r=this.Mu.map(s=>Yu(s,t)),i=new ju(r);return new Pg(e.path,i)}isEqual(e){return e instanceof JA&&(0,_t.vZ)(this.Mu,e.Mu)}}class eD extends Zu{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new mh(e.serializer,lV(e.serializer,this.xu));return new Pg(e.path,t)}isEqual(e){return e instanceof eD&&this.xu===e.xu}}function tD(n,e,t,r){const i=n.Fu(1,e,t);rD("Data must be an object, but it was:",i,r);const s=[],o=ri.empty();vc(r,(c,u)=>{const f=OE(e,c,t);u=(0,_t.m9)(u);const m=i.Su(f);if(u instanceof Qg)s.push(f);else{const y=Yu(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new ts(s);return new IU(o,a,i.fieldTransforms)}function nD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Yg(e,r,t)],c=[i];if(s.length%2!=0)throw new Ie(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Yg(e,s[y])),c.push(s[y+1]);const u=[],f=ri.empty();for(let y=a.length-1;y>=0;--y)if(!DU(u,a[y])){const I=a[y];let b=c[y];b=(0,_t.m9)(b);const R=o.Su(I);if(b instanceof Qg)u.push(I);else{const x=Yu(b,R);null!=x&&(u.push(I),f.set(I,x))}}const m=new ts(u);return new IU(f,m,o.fieldTransforms)}function TU(n,e,t,r=!1){return Yu(t,n.Fu(r?4:3,e))}function Yu(n,e){if(AU(n=(0,_t.m9)(n)))return rD("Unsupported field value:",e,n),CU(n,e);if(n instanceof Zu)return function(r,i){if(!wU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Yu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,_t.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return lV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Bn.fromDate(r);return{timestampValue:vh(i.serializer,s)}}if(r instanceof Bn){const s=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(i.serializer,s)}}if(r instanceof PE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jo)return{bytesValue:xV(i.serializer,r._byteString)};if(r instanceof xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${RE(r)}`)}(n,e)}function CU(n,e){const t={};return PL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vc(n,(r,i)=>{const s=Yu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function AU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof PE||n instanceof jo||n instanceof xn||n instanceof Zu)}function rD(n,e,t){if(!AU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=RE(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Yg(n,e,t){if((e=(0,_t.m9)(e))instanceof Ta)return e._internalPath;if("string"==typeof e)return OE(n,e);throw kE("Field path arguments must be of type string or ",n,!1,void 0,t)}const yte=new RegExp("[~\\*/\\[\\]]");function OE(n,e,t){if(e.search(yte)>=0)throw kE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ta(...e.split("."))._internalPath}catch{throw kE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ie(se.INVALID_ARGUMENT,a+n+c)}function DU(n,e){return n.some(t=>t.isEqual(e))}class Xg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vte extends Xg{data(){return super.data()}}function FE(n,e){return"string"==typeof e?OE(n,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}function SU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iD{}class Jg extends iD{}function Pc(n,e,...t){let r=[];e instanceof iD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Vh).length,a=s.filter(c=>c instanceof em).length;if(o>1||o>0&&a>0)throw new Ie(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class em extends Jg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new em(e,t,r)}_apply(e){const t=this._parse(e);return xU(e._query,t),new ii(e.firestore,e.converter,sC(e._query,t))}_parse(e){const t=Qu(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){PU(m,f);const I=[];for(const b of m)I.push(MU(c,s,b));y={arrayValue:{values:I}}}else y=MU(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||PU(m,f),y=TU(a,"where",m,"in"===f||"not-in"===f);return Vt.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vh extends iD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:an.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)xU(o,c),o=sC(o,c)}(e._query,t),new ii(e.firestore,e.converter,sC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sD extends Jg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cg(s,o)}(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new va(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class LE extends Jg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new LE(e,t,r)}_apply(e){return new ii(e.firestore,e.converter,tE(e._query,this._limit,this._limitType))}}class VE extends Jg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new VE(e,t,r)}_apply(e){const t=RU(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(s=t,new va((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class UE extends Jg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new UE(e,t,r)}_apply(e){const t=RU(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(s=t,new va((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function RU(n,e,t,r){if(t[0]=(0,_t.m9)(t[0]),t[0]instanceof Xg)return function(s,o,a,c,u){if(!c)throw new Ie(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of fh(s))if(m.field.isKeyField())f.push(Vu(o,c.key));else{const y=c.data.field(m.field);if(Kv(y))throw new Ie(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new Ie(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new Tc(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qu(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new Ie(se.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let b=0;b<f.length;b++){const R=f[b];if(y[b].field.isKeyField()){if("string"!=typeof R)throw new Ie(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!iC(o)&&-1!==R.indexOf("/"))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const x=o.path.child(Lt.fromString(R));if(!Oe.isDocumentKey(x))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const z=new Oe(x);I.push(Vu(a,z))}else{const x=TU(c,u,R);I.push(x)}}return new Tc(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function MU(n,e,t){if("string"==typeof(t=(0,_t.m9)(t))){if(""===t)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iC(e)&&-1!==t.indexOf("/"))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!Oe.isDocumentKey(r))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(n,new Oe(r))}if(t instanceof xn)return Vu(n,t._key);throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RE(t)}.`)}function PU(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oD{convertValue(e,t="none"){switch(wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new PE(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ig(e));default:return null}}convertTimestamp(e){const t=_a(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);Ke(zV(r));const i=new Ec(r.get(1),r.get(3)),s=new Oe(r.popFirst(5));return i.isEqual(t)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function BE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ste extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends Xg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tm extends Ca{data(e={}){return super.data(e)}}class xc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tm(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new tm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new tm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Mte(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Mte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}function OU(n,e){return n instanceof Ca&&e instanceof Ca?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xc&&e instanceof xc&&n._firestore===e._firestore&&ZA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nc extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function kU(n,e,t){n=At(n,xn);const r=At(n.firestore,hn),i=BE(n.converter,e,t);return Uh(r,[NE(Qu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jn.none())])}function FU(n,e,t,...r){n=At(n,xn);const i=At(n.firestore,hn),s=Qu(i);let o;return o="string"==typeof(e=(0,_t.m9)(e))||e instanceof Ta?nD(s,"updateDoc",n._key,e,t,r):tD(s,"updateDoc",n._key,e),Uh(i,[o.toMutation(n._key,jn.exists(!0))])}function LU(n,...e){var t,r,i;n=(0,_t.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||QA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(QA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof xn)u=At(n.firestore,hn),f=hh(n._key.path),c={next:m=>{e[o]&&e[o](aD(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=At(n,ii);u=At(m.firestore,hn),f=m._query;const y=new Nc(u);c={next:I=>{e[o]&&e[o](new xc(u,y,m,I))},error:e[o+1],complete:e[o+2]},SU(n._query)}return function(y,I,b,R){const x=new AE(R),z=new dA(I,x,b);return y.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return sA(yield Lh(y),z)})),()=>{x.$a(),y.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return aA(yield Lh(y),z)}))}}($n(u),f,a,c)}function Uh(n,e){return function(r,i){const s=new Fr;return r.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function bee(n,e,t){return vA.apply(this,arguments)}(yield GA(r),i,s)})),s.promise}($n(n),e)}function aD(n,e,t){const r=t.docs.get(e._key),i=new Nc(n);return new Ca(n,i,e._key,r,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}const Kte={maxAttempts:5};class VU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qu(e)}set(e,t,r){this._verifyNotCommitted();const i=Oc(e,this._firestore),s=BE(i.converter,t,r),o=NE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Oc(e,this._firestore);let o;return o="string"==typeof(t=(0,_t.m9)(t))||t instanceof Ta?nD(this._dataReader,"WriteBatch.update",s._key,t,r,i):tD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oc(e,this._firestore);return this._mutations=this._mutations.concat(new yh(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oc(n,e){if((n=(0,_t.m9)(n)).firestore!==e)throw new Ie(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Zte extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qu(t)}get(t){const r=Oc(t,this._firestore),i=new Ste(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Be();const o=s[0];if(o.isFoundDocument())return new Xg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Xg(this._firestore,i,r._key,null,r.converter);throw Be()})}set(t,r,i){const s=Oc(t,this._firestore),o=BE(s.converter,r,i),a=NE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Oc(t,this._firestore);let a;return a="string"==typeof(r=(0,_t.m9)(r))||r instanceof Ta?nD(this._dataReader,"Transaction.update",o._key,r,i,s):tD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Oc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Oc(e,this._firestore),r=new Nc(this._firestore);return super.get(e).then(i=>new Ca(this._firestore,r,t._key,i._document,new Xu(!1,!1),t.converter))}}function uD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $U(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function HU(){if(!function SX(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){ih=tr.SDK_VERSION,(0,tr._registerComponent)(new $v.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new hn(new XY(r.getProvider("auth-internal")),new tX(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ie(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(lL,"4.6.3",e),(0,tr.registerVersion)(lL,"4.6.3","esm2017")}();class nm{constructor(e){this._delegate=e}static fromBase64String(e){return HU(),new nm(jo.fromBase64String(e))}static fromUint8Array(e){return $U(),new nm(jo.fromUint8Array(e))}toBase64(){return HU(),this._delegate.toBase64()}toUint8Array(){return $U(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lD(n){return function sne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class one{enableIndexedDbPersistence(e,t){return function ote(n,e){EU(n=At(n,hn));const t=$n(n);if(t._uninitializedComponentsProvider)throw new Ie(se.FAILED_PRECONDITION,"SDK cache is already specified.");es("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new kh;return vU(t,i,new UA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ate(n){EU(n=At(n,hn));const e=$n(n);if(e._uninitializedComponentsProvider)throw new Ie(se.FAILED_PRECONDITION,"SDK cache is already specified.");es("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new kh;return vU(e,r,new eU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cte(n){if(n._initialized&&!n._terminated)throw new Ie(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(i){if(!ko.D())return Promise.resolve();const s=i+"main";yield ko.delete(s)}),function r(i){return t.apply(this,arguments)})(SC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ec||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&es("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){gU(this._delegate,e,t,r)}enableNetwork(){return function lte(n){return function zee(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield rU(n),t=yield iU(n);return e.setNetworkEnabled(!0),function(i){const s=Me(i);return s.M_.delete(0),Gg(s)}(t)}))}($n(n=At(n,hn)))}(this._delegate)}disableNetwork(){return function dte(n){return function qee(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield rU(n),t=yield iU(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(s){const o=Me(s);o.M_.add(0),yield Dh(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}($n(n=At(n,hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ute(n){return function(t){const r=new Fr;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Dee(n,e){return TA.apply(this,arguments)}(yield GA(t),r)})),r.promise}($n(n=At(n,hn)))}(this._delegate)}onSnapshotsInSync(e){return function Ute(n,e){return function Zee(n,e){const t=new AE(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return i=yield Lh(n),s=t,Me(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return i=yield Lh(n),s=t,void Me(i).z_.delete(s);var i,s}))}}($n(n=At(n,hn)),QA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bh(this,mU(this._delegate,e))}catch(t){throw Oi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fs(this,ME(this._delegate,e))}catch(t){throw Oi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ki(this,function tte(n,e){if(n=At(n,Kg),KA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(n,null,(r=e,new va(Lt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Oi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Qte(n,e,t){n=At(n,hn);const r=Object.assign(Object.assign({},Kte),t);return function(s){if(s.maxAttempts<1)throw new Ie(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Fr;return s.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const u=yield function sU(n){return SE(n).then(e=>e.datastore)}(s);new $ee(s.asyncQueue,u,a,o,c).Xa()})),c.promise}($n(n),i=>e(new Zte(n,i)),r)}(this._delegate,t=>e(new qU(this,t)))}batch(){return $n(this._delegate),new GU(new VU(this._delegate,e=>Uh(this._delegate,e)))}loadBundle(e){return function hte(n,e){const t=$n(n=At(n,hn)),r=new rte;return function Qee(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?TV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return tU(f,m);if(f instanceof ArrayBuffer)return tU(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Bee(f,a);var f}(t,qg(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function Vee(n,e,t){const r=Me(n);var i;(i=(0,le.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(b,R){const x=Me(b),z=fr(R.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",V=>x.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(z)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(b=u).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);c._updateProgress(z2(u));const f=new gee(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield ba(o,y.ca,void 0),yield function(b,R){const x=Me(b);return x.persistence.runTransaction("Save bundle","readwrite",z=>x.$r.saveBundleMetadata(z,R))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return es("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var b}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield GA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fte(n,e){return function Yee(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(r,i){const s=Me(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Fh(n),e)}))}($n(n=At(n,hn)),e).then(t=>t?new ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ki(this,t):null)}}class $E extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new nm(new jo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fs.forKey(t,this.firestore,null)}}class qU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}get(e){const t=el(e);return this._delegate.get(t).then(r=>new rm(this._firestore,new Ca(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=el(e);return r?(uD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=el(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=el(e);return this._delegate.delete(t),this}}class GU{constructor(e){this._delegate=e}set(e,t,r){const i=el(e);return r?(uD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=el(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=el(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ju{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new tm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new im(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ju.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ju(e,new $E(e),t),i.set(t,s)),s}}Ju.INSTANCES=new WeakMap;class Fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fs(t,new xn(t._delegate,r,new Oe(e)))}static forKey(e,t,r){return new Fs(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bh(this.firestore,mU(this._delegate,e))}catch(t){throw Oi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.m9)(e))instanceof xn&&_U(this._delegate,e)}set(e,t){t=uD("DocumentReference.set",t);try{return t?kU(this._delegate,e,t):kU(this._delegate,e)}catch(r){throw Oi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?FU(this._delegate,e):FU(this._delegate,e,t,...r)}catch(i){throw Oi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Lte(n){return Uh(At(n.firestore,hn),[new yh(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=WU(e),r=KU(e,i=>new rm(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function xte(n){n=At(n,xn);const e=At(n.firestore,hn),t=$n(e),r=new Nc(e);return function Gee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Me(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Ie(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=Ph(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Fh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ca(e,r,n._key,i,new Xu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Nte(n){n=At(n,xn);const e=At(n.firestore,hn);return oU($n(e),n._key,{source:"server"}).then(t=>aD(e,n,t))}(this._delegate):function Pte(n){n=At(n,xn);const e=At(n.firestore,hn);return oU($n(e),n._key).then(t=>aD(e,n,t))}(this._delegate),t.then(r=>new rm(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?Ju.getInstance(this.firestore,e):null))}}function Oi(n,e,t){return n.message=n.message.replace(e,t),n}function WU(n){for(const e of n)if("object"==typeof e&&!lD(e))return e;return{}}function KU(n,e){var t,r;let i;return i=lD(n[0])?n[0]:lD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class rm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OU(this._delegate,e._delegate)}}class im extends rm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function ZY(n,e){n||Be()}(void 0!==t),t}}class ki{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}where(e,t,r){try{return new ki(this.firestore,Pc(this._delegate,function Ete(n,e,t){const r=e,i=FE("where",n);return em._create(i,r,t)}(e,t,r)))}catch(i){throw Oi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ki(this.firestore,Pc(this._delegate,function Ite(n,e="asc"){const t=e,r=FE("orderBy",n);return sD._create(r,t)}(e,t)))}catch(r){throw Oi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ki(this.firestore,Pc(this._delegate,function wte(n){return fU("limit",n),LE._create("limit",n,"F")}(e)))}catch(t){throw Oi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ki(this.firestore,Pc(this._delegate,function bte(n){return fU("limitToLast",n),LE._create("limitToLast",n,"L")}(e)))}catch(t){throw Oi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ki(this.firestore,Pc(this._delegate,function Tte(...n){return VE._create("startAt",n,!0)}(...e)))}catch(t){throw Oi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ki(this.firestore,Pc(this._delegate,function Cte(...n){return VE._create("startAfter",n,!1)}(...e)))}catch(t){throw Oi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ki(this.firestore,Pc(this._delegate,function Ate(...n){return UE._create("endBefore",n,!1)}(...e)))}catch(t){throw Oi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ki(this.firestore,Pc(this._delegate,function Dte(...n){return UE._create("endAt",n,!0)}(...e)))}catch(t){throw Oi(t,"endAt()","Query.endAt()")}}isEqual(e){return ZA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function kte(n){n=At(n,ii);const e=At(n.firestore,hn),t=$n(e),r=new Nc(e);return function Wee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(s,o,a){try{const c=yield yE(s,o,!0),u=new W2(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=Ph(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Fh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xc(e,r,n,i))}(this._delegate):"server"===e?.source?function Fte(n){n=At(n,ii);const e=At(n.firestore,hn),t=$n(e),r=new Nc(e);return aU(t,n._query,{source:"server"}).then(i=>new xc(e,r,n,i))}(this._delegate):function Ote(n){n=At(n,ii);const e=At(n.firestore,hn),t=$n(e),r=new Nc(e);return SU(n._query),aU(t,n._query).then(i=>new xc(e,r,n,i))}(this._delegate),t.then(r=>new dD(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WU(e),r=KU(e,i=>new dD(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LU(this._delegate,t,r)}withConverter(e){return new ki(this.firestore,this._delegate.withConverter(e?Ju.getInstance(this.firestore,e):null))}}class cne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new im(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new im(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cne(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new im(this._firestore,r))})}isEqual(e){return OU(this._delegate,e._delegate)}}class Bh extends ki{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fs(this.firestore,e):null}doc(e){try{return new Fs(this.firestore,void 0===e?ME(this._delegate):ME(this._delegate,e))}catch(t){throw Oi(t,"doc()","CollectionReference.doc()")}}add(e){return function Vte(n,e){const t=At(n.firestore,hn),r=ME(n),i=BE(n.converter,e);return Uh(t,[NE(Qu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fs(this.firestore,t))}isEqual(e){return _U(this._delegate,e._delegate)}withConverter(e){return new Bh(this.firestore,this._delegate.withConverter(e?Ju.getInstance(this.firestore,e):null))}}function el(n){return At(n,xn)}class hD{constructor(...e){this._delegate=new Ta(...e)}static documentId(){return new hD(Mn.keyField().canonicalString())}isEqual(e){return(e=(0,_t.m9)(e))instanceof Ta&&this._delegate._internalPath.isEqual(e._internalPath)}}class tl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Xte(){return new YA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tl(e)}static delete(){const e=function Yte(){return new Qg("deleteField")}();return e._methodName="FieldValue.delete",new tl(e)}static arrayUnion(...e){const t=function Jte(...n){return new XA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tl(t)}static arrayRemove(...e){const t=function ene(...n){return new JA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tl(t)}static increment(e){const t=function tne(n){return new eD("increment",n)}(e);return t._methodName="FieldValue.increment",new tl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const une={Firestore:zU,GeoPoint:PE,Timestamp:Bn,Blob:nm,Transaction:qU,WriteBatch:GU,DocumentReference:Fs,DocumentSnapshot:rm,Query:ki,QueryDocumentSnapshot:im,QuerySnapshot:dD,CollectionReference:Bh,FieldPath:hD,FieldValue:tl,setLogLevel:function ane(n){!function KY(n){mc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ZU(n,e){return function hne(n,e=cT){return new pt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function fD(n,e){return ZU(n,e).pipe(Re(t=>({payload:t,type:"query"})))}!function dne(n){(function lne(n,e){n.INTERNAL.registerComponent(new $v.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},une)))})(n,(e,t)=>new zU(e,t,new one)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(No.Z);class QU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=nB(r,t);return new JU(i,s,this.afs)}snapshotChanges(){return function fne(n,e){return ZU(n,e).pipe(Wp(void 0),zT(),Re(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return this.snapshotChanges().pipe(Re(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return T(this.ref.get(e)).pipe(Ni)}}function HE(n,e){return fD(n,e).pipe(Wp(void 0),zT(),Re(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function YU(n,e,t){return HE(n,t).pipe(wv((r,i)=>function pne(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gne(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),st(),Re(r=>r.map(i=>({type:i.type,payload:i}))))}function pD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function XU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class JU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=HE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wp(void 0),zT(),ps(([r,i])=>i.length>0||!r),Re(([,r])=>r),Ni)}auditTrail(e){return this.stateChanges(e).pipe(wv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XU(e);return YU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return fD(this.query,this.afs.schedulers.outsideAngular).pipe(Re(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ni)}get(e){return T(this.query.get(e)).pipe(Ni)}add(e){return this.ref.add(e)}doc(e){return new QU(this.ref.doc(e),this.afs)}}class mne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HE(this.query,this.afs.schedulers.outsideAngular).pipe(Re(t=>t.filter(r=>e.indexOf(r.type)>-1)),ps(t=>t.length>0),Ni):HE(this.query,this.afs.schedulers.outsideAngular).pipe(Ni)}auditTrail(e){return this.stateChanges(e).pipe(wv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XU(e);return YU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return fD(this.query,this.afs.schedulers.outsideAngular).pipe(Re(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ni)}get(e){return T(this.query.get(e)).pipe(Ni)}}const eB=new Ee("angularfire2.enableFirestorePersistence"),tB=new Ee("angularfire2.firestore.persistenceSettings"),_ne=new Ee("angularfire2.firestore.settings"),yne=new Ee("angularfire2.firestore.use-emulator");function nB(n,e=(t=>t)){return{query:e(n),ref:n}}let zE=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,b,R,x,z,V){this.schedulers=c;const Q=jv(t,a,r),ie=f;m&&JF(Q,a,y,b,R,x,I,z),[this.firestore,this.persistenceEnabled$]=HT(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const Ce=a.runOutsideAngular(()=>Q.firestore());if(s&&Ce.settings(s),ie&&Ce.useEmulator(...ie),i&&!sv(o)){const ke=()=>{try{return T(Ce.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch($){return typeof console<"u"&&console.warn($),k(!1)}};return[Ce,a.runOutsideAngular(ke)]}return[Ce,k(!1)]},[s,ie,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=nB(i,r),a=this.schedulers.ngZone.run(()=>s);return new JU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new mne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new QU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(fe(pg),fe(gg,8),fe(eB,8),fe(_ne,8),fe(xs),fe(Nt),fe(nh),fe(tB,8),fe(yne,8),fe(eL,8),fe(WF,8),fe(KF,8),fe(ZF,8),fe(QF,8),fe(YF,8),fe(XF,8),fe(fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),vne=(()=>{class n{constructor(){No.Z.registerVersion("angularfire",gc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eB,useValue:!0},{provide:tB,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[zE]})}return n})(),gD=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}addEvent(t){const r=this.firestore.createId();return this.firestore.collection("Events").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(zE))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mD=(()=>{class n{constructor(t){this.firestore=t}getOffers(){return this.firestore.collection("Offers").snapshotChanges().pipe(Re(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}addOffer(t){const r=this.firestore.createId(),i=(new Date).toISOString().split("T")[0];return t.Date_Created=i,this.firestore.collection("Offers").doc(r).set(t)}getOffer(t){return this.firestore.collection("Offers").doc(t).valueChanges()}updateOffer(t,r){return this.firestore.collection("Offers").doc(t).update(r)}getAllOfferTypes(){return this.firestore.collection("OfferTypes").valueChanges().pipe(Re(t=>{const r=t.map(i=>i.OfferType);return Array.from(new Set(r))}))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(zE))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ene(n,e){1&n&&(G(0,"div",23)(1,"span",24),te(2,"Sponsor al Comunitatii"),U(),G(3,"span",25),te(4,"\u2605"),U()())}function Ine(n,e){if(1&n&&(G(0,"div",15)(1,"div",16)(2,"div",17),te(3),U(),G(4,"div",18),Qe(5,"img",19),U(),G(6,"div",20),te(7),U(),G(8,"div",20),te(9),U(),G(10,"div",20),te(11),U(),G(12,"div",20),te(13),U(),G(14,"div",20)(15,"a",21),te(16),U()(),G(17,"div",20)(18,"a",21),te(19),U()(),G(20,"div",20),te(21),U()(),Or(22,Ene,5,0,"div",22),U()),2&n){const t=e.$implicit;Ae(3),nt(t.Name),Ae(2),Ys("src",t.Poster_Image,ds),Ae(2),nt(t.Location),Ae(2),nt(t.Event_date),Ae(2),nt(t.Price),Ae(2),nt(t.Phone_Number),Ae(2),_u("href","mailto:",t.Contact,"",ds),Ae(1),nt(t.Contact),Ae(2),Ys("href",t.Website,ds),Ae(1),nt(t.Website),Ae(2),nt(t.Description),Ae(1),Ht("ngIf",t.Community_Sponsor)}}function wne(n,e){1&n&&(G(0,"div",31)(1,"span",32),te(2,"Expired"),U()())}function bne(n,e){if(1&n&&(G(0,"div",26)(1,"div",27),Qe(2,"img",28),U(),G(3,"div",29)(4,"h3"),te(5),U(),G(6,"h4"),te(7),U(),G(8,"p"),te(9),U(),Qe(10,"hr"),G(11,"p"),te(12),U(),G(13,"p"),te(14),U(),G(15,"p"),te(16),U(),G(17,"p"),te(18),U(),G(19,"p"),te(20),U(),G(21,"p"),te(22),U(),G(23,"p"),te(24),U(),G(25,"p"),te(26),U(),G(27,"p"),te(28),U(),G(29,"p"),te(30),U(),Or(31,wne,3,0,"div",30),U()()),2&n){const t=e.$implicit;Ae(2),Ys("alt",t.Title),Ae(3),nt(t.Title),Ae(2),nt(t.Company_Name),Ae(2),nt(t.Contact_Name),Ae(3),nt(t.Location),Ae(2),nt(t.Phone_Number),Ae(2),nt(t.Email),Ae(2),nt(t.Website),Ae(2),nt(t.Description),Ae(2),nt(t.Image1),Ae(2),nt(t.Image2),Ae(2),nt(t.Image3),Ae(2),nt(t.Image4),Ae(2),nt(t.Image5),Ae(1),Ht("ngIf",t.Filled)}}function Tne(n,e){if(1&n&&(G(0,"li",33)(1,"a",34),te(2),U()()),2&n){const t=e.$implicit;Ae(1),Ys("href",t.url,ds),Ae(1),nt(t.name)}}let Cne=(()=>{class n{constructor(t,r,i){this.eventService=t,this.offersService=r,this.router=i,this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"},{name:"Biserica Sfintii Trei Ierarhi",url:"http://www.ortodox.org/"}],this.events=[],this.offers=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t}),this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(gD),pe(mD),pe(ti))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-home"]],decls:49,vars:3,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"offers"],["class","offers-card",4,"ngFor","ngForOf"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"],[1,"offers-card"],[1,"offers-card-image"],["src","http://source.unsplash.com/800x600/?Caregiver",3,"alt"],[1,"offers-card-content"],["class","offers-footer",4,"ngIf"],[1,"offers-footer"],[1,"featured"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),te(4,"Bine ati venit in comunitatea "),G(5,"a",3),te(6,"Romani in Seattle"),U()()()(),Qe(7,"p"),G(8,"div",4)(9,"div",5)(10,"h2"),te(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),U(),G(12,"p"),te(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),U()()(),G(14,"div",4)(15,"div",6)(16,"h2"),te(17,"Evenimente"),U(),G(18,"p"),te(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),U()(),G(20,"div",6)(21,"h2"),te(22,"Servicii"),U(),G(23,"p"),te(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),U()(),G(25,"div",6)(26,"h2"),te(27,"Oportunit\u0103\u021bi"),U(),G(28,"p"),te(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),U()(),G(30,"div",6)(31,"h2"),te(32,"Resurse"),U(),G(33,"p"),te(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),U()()(),G(35,"h1"),te(36,"Evenimente"),U(),G(37,"div",7),Or(38,Ine,23,12,"div",8),U(),G(39,"h1"),te(40,"Oferte"),U(),G(41,"div",9)(42,"div",7),Or(43,bne,32,15,"div",10),U()(),G(44,"section",11)(45,"h2",12),te(46,"Resurse utile pentru comunitate"),U(),G(47,"ul",13),Or(48,Tne,3,2,"li",14),U()()()),2&r&&(Ae(38),Ht("ngForOf",i.events),Ae(5),Ht("ngForOf",i.offers),Ae(5),Ht("ngForOf",i.resourceLinks))},dependencies:[Tu,$p],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offers-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offer-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}"]})}return n})(),_D=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Re(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getService(t){return this.firestore.collection("Services").doc(t).valueChanges()}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe(Re(t=>{const r=t.map(i=>i.Name);return Array.from(new Set(r))}))}addService(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Services").doc(t.id).set(t)}updateService(t,r){return console.log("Update Service: "+t),console.log(r),this.firestore.collection("Services").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(zE))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rB=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(oa),pe(Yi))};static#t=this.\u0275dir=Ge({type:n})}return n})(),nl=(()=>{class n extends rB{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=Ge({type:n,features:[sn]})}return n})();const $o=new Ee("NgValueAccessor"),Dne={provide:$o,useExisting:Kt(()=>rl),multi:!0},Rne=new Ee("CompositionEventMode");let rl=(()=>{class n extends rB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Sne(){const n=sc()?sc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(oa),pe(Yi),pe(Rne,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ln("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Un([Dne]),sn]})}return n})();function kc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function sB(n){return null!=n&&"number"==typeof n.length}const yi=new Ee("NgValidators"),Fc=new Ee("NgAsyncValidators"),Mne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nn{static min(e){return function oB(n){return e=>{if(kc(e.value)||kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function aB(n){return e=>{if(kc(e.value)||kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return cB(e)}static requiredTrue(e){return function uB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lB(n){return kc(n.value)||Mne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dB(n){return e=>kc(e.value)||!sB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hB(n){return e=>sB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fB(n){if(!n)return qE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(kc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vB(e)}static composeAsync(e){return EB(e)}}function cB(n){return kc(n.value)?{required:!0}:null}function qE(n){return null}function pB(n){return null!=n}function gB(n){return Sp(n)?T(n):n}function mB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _B(n,e){return e.map(t=>t(n))}function yB(n){return n.map(e=>function Pne(n){return!n.validate}(e)?e:t=>e.validate(t))}function vB(n){if(!n)return null;const e=n.filter(pB);return 0==e.length?null:function(t){return mB(_B(t,e))}}function yD(n){return null!=n?vB(yB(n)):null}function EB(n){if(!n)return null;const e=n.filter(pB);return 0==e.length?null:function(t){return function _k(...n){const e=zs(n),{args:t,keys:r}=WO(n),i=new pt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let f=0;f<o;f++){let m=!1;jt(t[f]).subscribe(Se(s,y=>{m||(m=!0,u--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(u||s.next(r?ZO(r,a):a),s.complete())}))}});return e?i.pipe(KO(e)):i}(_B(t,e).map(gB)).pipe(Re(mB))}}function vD(n){return null!=n?EB(yB(n)):null}function IB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wB(n){return n._rawValidators}function bB(n){return n._rawAsyncValidators}function ED(n){return n?Array.isArray(n)?n:[n]:[]}function GE(n,e){return Array.isArray(n)?n.includes(e):n===e}function TB(n,e){const t=ED(e);return ED(n).forEach(i=>{GE(t,i)||t.push(i)}),t}function CB(n,e){return ED(e).filter(t=>!GE(n,t))}class AB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fi extends AB{get formDirective(){return null}get path(){return null}}class Lc extends AB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let jh=(()=>{class n extends DB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Lc,2))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[sn]})}return n})(),sm=(()=>{class n extends DB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Fi,10))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[sn]})}return n})();const om="VALID",KE="INVALID",$h="PENDING",am="DISABLED";function bD(n){return(ZE(n)?n.validators:n)||null}function TD(n,e){return(ZE(e)?e.asyncValidators:n)||null}function ZE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function RB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new P(1e3,"");if(!r[t])throw new P(1001,"")}function MB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new P(1002,"")})}class QE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===om}get invalid(){return this.status===KE}get pending(){return this.status==$h}get disabled(){return this.status===am}get enabled(){return this.status!==am}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CB(e,this._rawAsyncValidators))}hasValidator(e){return GE(this._rawValidators,e)}hasAsyncValidator(e){return GE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$h,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=am,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=om,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===om||this.status===$h)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?am:om}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$h,this._hasOwnPendingAsyncValidator=!0;const t=gB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xn,this.statusChanges=new Xn}_calculateStatus(){return this._allControlsDisabled()?am:this.errors?KE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($h)?$h:this._anyControlsHaveStatus(KE)?KE:om}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ZE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kne(n){return Array.isArray(n)?yD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Fne(n){return Array.isArray(n)?vD(n):n||null}(this._rawAsyncValidators)}}class cm extends QE{constructor(e,t,r){super(bD(t),TD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){MB(this,0,e),Object.keys(e).forEach(r=>{RB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class PB extends cm{}const il=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>um}),um="always";function YE(n,e){return[...e.path,n]}function lm(n,e,t=um){CD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Vne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xB(n,e)})}(n,e),function Bne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Une(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Lne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function XE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),eI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function JE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CD(n,e){const t=wB(n);null!==e.validator?n.setValidators(IB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=bB(n);null!==e.asyncValidator?n.setAsyncValidators(IB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();JE(e._rawValidators,i),JE(e._rawAsyncValidators,i)}function eI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=wB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=bB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return JE(e._rawValidators,r),JE(e._rawAsyncValidators,r),t}function xB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function SD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===rl?t=s:function Hne(n){return Object.getPrototypeOf(n.constructor)===nl}(s)?r=s:i=s}),i||r||t||null}function kB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const hm=class extends QE{constructor(e=null,t,r){super(bD(t),TD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ZE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Kne={provide:Lc,useExisting:Kt(()=>MD)},UB=(()=>Promise.resolve())();let MD=(()=>{class n extends Lc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new hm,this._registered=!1,this.name="",this.update=new Xn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),DD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){UB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&$d(r);UB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YE(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Fi,9),pe(yi,10),pe(Fc,10),pe($o,10),pe(zy,8),pe(il,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Un([Kne]),sn,Ki]})}return n})(),fm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),jB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({})}return n})();const PD=new Ee("NgModelWithFormControlWarning"),ere={provide:Fi,useExisting:Kt(()=>sl)};let sl=(()=>{class n extends Fi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Xn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return lm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){XE(t.control||null,t,!1),function zne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function OB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(XE(r||null,t),(n=>n instanceof hm)(i)&&(lm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function NB(n,e){CD(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function jne(n,e){return eI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CD(this.form,this),this._oldForm&&eI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(pe(yi,10),pe(Fc,10),pe(il,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ln("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([ere]),sn,Ki]})}return n})();const rre={provide:Lc,useExisting:Kt(()=>Hh)};let Hh=(()=>{class n extends Lc{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Xn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SD(0,s)}ngOnChanges(t){this._added||this._setUpControl(),DD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return YE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(pe(Fi,13),pe(yi,10),pe(Fc,10),pe($o,10),pe(PD,8))};static#n=this.\u0275dir=Ge({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Un([rre]),sn,Ki]})}return n})();const ire={provide:$o,useExisting:Kt(()=>zh),multi:!0};function GB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let zh=(()=>{class n extends nl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=GB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function sre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=Ge({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&ln("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([ire]),sn]})}return n})(),tI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(GB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Yi),pe(oa),pe(zh,9))};static#t=this.\u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const ore={provide:$o,useExisting:Kt(()=>OD),multi:!0};function WB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let OD=(()=>{class n extends nl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function are(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=Ge({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&ln("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([ore]),sn]})}return n})(),nI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(WB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(WB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Yi),pe(oa),pe(OD,9))};static#t=this.\u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),ol=(()=>{class n{constructor(){this._validator=qE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ge({type:n,features:[Ki]})}return n})();const lre={provide:yi,useExisting:Kt(()=>al),multi:!0};let al=(()=>{class n extends ol{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=$d,this.createValidator=t=>cB}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=wr(n)))(i||n)}}();static#t=this.\u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Do("required",i._enabled?"":null)},inputs:{required:"required"},features:[Un([lre]),sn]})}return n})(),rj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[jB]})}return n})();class ij extends QE{constructor(e,t,r){super(bD(t),TD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){MB(this,0,e),e.forEach((r,i)=>{RB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function sj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let rI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return sj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new cm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new PB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(sj(r)?s=r:(s.validators=r,s.asyncValidators=i),new hm(t,{...s,nonNullable:!0})):new hm(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new ij(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof hm||t instanceof QE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:il,useValue:t.callSetDisabledState??um}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[rj]})}return n})(),_re=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:PD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:il,useValue:t.callSetDisabledState??um}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[rj]})}return n})();function yre(n,e){if(1&n&&(G(0,"option",14),te(1),U()),2&n){const t=e.$implicit;Ht("value",t),Ae(1),nt(t)}}function vre(n,e){1&n&&(G(0,"span",29),te(1,"\u2605"),U())}function Ere(n,e){if(1&n&&(G(0,"div")(1,"a",30),Qe(2,"img",31),U(),Qe(3,"br"),te(4," Facebook"),U()),2&n){const t=kd().$implicit;Ae(1),Ys("href",t.Facebook,ds)}}function Ire(n,e){if(1&n&&(G(0,"div")(1,"a",30),Qe(2,"img",32),U(),Qe(3,"br"),te(4," Instagram"),U()),2&n){const t=kd().$implicit;Ae(1),_u("href","https://www.instagram.com/",t.Instagram,"",ds)}}function wre(n,e){if(1&n&&(G(0,"div")(1,"a",33),Qe(2,"img",34),U(),Qe(3,"br"),te(4," Email"),U()),2&n){const t=kd().$implicit;Ae(1),_u("href","mailto:",t.Email,"",ds)}}function bre(n,e){if(1&n&&(G(0,"div")(1,"a",30),Qe(2,"img",35),U(),Qe(3,"br"),te(4," Website"),U()),2&n){const t=kd().$implicit;Ae(1),Ys("href",t.Website,ds)}}function Tre(n,e){if(1&n){const t=function XP(){return ve()}();G(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"div",19)(5,"div",20),te(6),Or(7,vre,2,0,"span",21),U(),G(8,"div",22),te(9),U(),G(10,"div",23),te(11),U(),G(12,"div",24),te(13),U(),G(14,"div")(15,"button",25),ln("click",function(){const s=function S_(n){return it.lFrame.contextLView=n,n[Wn]}(t).$implicit;return function Kl(n){return it.lFrame.contextLView=null,n}(kd().navigateToEditService(s.id))}),te(16,"Edit"),U()()(),G(17,"div",26)(18,"div",27),Or(19,Ere,5,1,"div",28),Or(20,Ire,5,1,"div",28),Or(21,wre,5,1,"div",28),Or(22,bre,5,1,"div",28),U()()()()()()}if(2&n){const t=e.$implicit;Ae(6),nt(t.Name),Ae(1),Ht("ngIf",t.Community_Sponsor),Ae(2),nt(t.Service_Type),Ae(2),nt(t.Phone_Number),Ae(2),nt(t.Description),Ae(6),Ht("ngIf",t.Facebook),Ae(1),Ht("ngIf",t.Instagram),Ae(1),Ht("ngIf",t.Email),Ae(1),Ht("ngIf",t.Website)}}function Dre(n,e){1&n&&(G(0,"div",15)(1,"span",16),te(2,"Sponsor al Comunitatii"),U(),G(3,"span",17),te(4,"\u2605"),U()())}function Sre(n,e){if(1&n&&(G(0,"div",7)(1,"div",8)(2,"div",9),te(3),U(),G(4,"div",10),Qe(5,"img",11),U(),G(6,"div",12),te(7),U(),G(8,"div",12),te(9),U(),G(10,"div",12),te(11),U(),G(12,"div",12),te(13),U(),G(14,"div",12)(15,"a",13),te(16),U()(),G(17,"div",12)(18,"a",13),te(19),U()(),G(20,"div",12),te(21),U()(),Or(22,Dre,5,0,"div",14),U()),2&n){const t=e.$implicit;Ae(3),nt(t.Name),Ae(2),Ys("src",t.Poster_Image,ds),Ae(2),nt(t.Location),Ae(2),nt(t.Event_date),Ae(2),nt(t.Price),Ae(2),nt(t.Phone_Number),Ae(2),_u("href","mailto:",t.Contact,"",ds),Ae(1),nt(t.Contact),Ae(2),Ys("href",t.Website,ds),Ae(1),nt(t.Website),Ae(2),nt(t.Description),Ae(1),Ht("ngIf",t.Community_Sponsor)}}function Mre(n,e){1&n&&(G(0,"div",13)(1,"span",14),te(2,"Expired"),U()())}function Pre(n,e){if(1&n&&(G(0,"div",8)(1,"div",9),Qe(2,"img",10),U(),G(3,"div",11)(4,"h3"),te(5),U(),G(6,"h4"),te(7),U(),G(8,"p"),te(9),U(),Qe(10,"hr"),G(11,"p"),te(12),U(),G(13,"p"),te(14),U(),G(15,"p"),te(16),U(),G(17,"p"),te(18),U(),G(19,"p"),te(20),U(),G(21,"p"),te(22),U(),G(23,"p"),te(24),U(),G(25,"p"),te(26),U(),G(27,"p"),te(28),U(),G(29,"p"),te(30),U(),Or(31,Mre,3,0,"div",12),U()()),2&n){const t=e.$implicit;Ae(2),Ys("alt",t.Title),Ae(3),nt(t.Title),Ae(2),nt(t.Company_Name),Ae(2),nt(t.Contact_Name),Ae(3),nt(t.Location),Ae(2),nt(t.Phone_Number),Ae(2),nt(t.Email),Ae(2),nt(t.Website),Ae(2),nt(t.Description),Ae(2),nt(t.Image1),Ae(2),nt(t.Image2),Ae(2),nt(t.Image3),Ae(2),nt(t.Image4),Ae(2),nt(t.Image5),Ae(1),Ht("ngIf",t.Filled)}}function Nre(n,e){if(1&n&&(G(0,"option",24),te(1),U()),2&n){const t=e.$implicit;Ht("value",t),Ae(1),nt(t)}}function Lre(n,e){if(1&n&&(G(0,"option",26),te(1),U()),2&n){const t=e.$implicit;Ht("value",t),Ae(1),nt(t)}}const Vre=[{path:"",component:Cne},{path:"services",component:(()=>{class n{constructor(t,r,i){this.servicesService=t,this.route=r,this.router=i,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedServiceType=t.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}navigateToEditService(t){this.router.navigate(["/edit-service",t])}handleChange(t){const{target:r}=t;return r&&console.log(r.value),r.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(t){console.log("Filter changed:",t),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:t},queryParamsHandling:"merge"}),this.filterServices(t)}filterServices(t){console.log("Filter Serices: "+t),this.fetchServiceTypes(),t&&""!==t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(t=>t.Service_Type))]}shareLink(){const r=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(r?"?"+r:"")).then(()=>{alert("Link copied to clipboard!")},s=>{console.error("Could not copy text: ",s)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(_D),pe(pc),pe(ti))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[3,"value"],[1,"service-card"],[1,"service-card-inner"],[1,"service-card-front"],[1,"service-card-content"],[1,"card-header"],[1,"card-title"],["class","sponsor-icon",4,"ngIf"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-description"],[1,"editButton",3,"click"],[1,"card-footer"],[1,"social-icons"],[4,"ngIf"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Lista de Servicii"),U()(),G(4,"div",2)(5,"h2"),te(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),U()()(),G(7,"div",3)(8,"div",4)(9,"label",5),te(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),U()(),G(11,"div",4)(12,"select",6),ln("change",function(o){return i.onFilterChange(i.handleChange(o))})("ngModelChange",function(o){return i.selectedServiceType=o}),G(13,"option",7),te(14,"Toate serviciile"),U(),Or(15,yre,2,2,"option",8),U()(),G(16,"div",4)(17,"button",9),ln("click",function(){return i.navigateToAddService()}),te(18,"Adaugati un Serviciu"),U()(),G(19,"button",10),ln("click",function(){return i.shareLink()}),Qe(20,"i",11),te(21," Share "),U()(),G(22,"div",12),Or(23,Tre,23,9,"div",13),U()),2&r&&(Ae(12),Ht("ngModel",i.selectedServiceType),Ae(3),Ht("ngForOf",i.serviceTypes),Ae(8),Ht("ngForOf",i.filteredServices))},dependencies:[Tu,$p,tI,nI,zh,jh,MD],styles:[".editButton[_ngcontent-%COMP%]{visibility:hidden}.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold;font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:1rem;color:#666;margin-top:4px}.card-description[_ngcontent-%COMP%]{text-align:left;font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;color:#666;margin-top:4px}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.service-card[_ngcontent-%COMP%]{background-color:transparent;width:400px;min-height:450px;perspective:1000px}.service-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}.service-card-front[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;box-shadow:0 4px 8px #00000080;margin:10px;padding:40px;box-sizing:border-box;position:relative;position:absolute;width:100%;height:100%;backface-visibility:hidden;-webkit-backface-visibility:hidden}.service-card-front[_ngcontent-%COMP%]{background-color:#fff;color:#000}.service-card-content[_ngcontent-%COMP%]{padding:0}.service-date[_ngcontent-%COMP%]{font-size:12px;color:#f1c40f}.service-footer[_ngcontent-%COMP%]{margin-top:10px}.featured[_ngcontent-%COMP%]{font-weight:700;color:#f39c12}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}#browser-icon[_ngcontent-%COMP%]{fill:red;stroke:#000}"]})}return n})()},{path:"rules",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-rules"]],decls:32,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","#",1,"cta-button"]],template:function(r,i){1&r&&(G(0,"div",0),Qe(1,"div",1),G(2,"div",2)(3,"h1"),te(4,"Regulile \u0219i Reglement\u0103rile"),U(),G(5,"p"),te(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),U(),G(7,"a",3),te(8,"Get Started"),U()()(),G(9,"h2"),te(10,"Regulile \u0219i Reglement\u0103rile"),U(),G(11,"ul")(12,"li"),te(13,"Nu este permis\u0103 nicio form\u0103 de publicitate."),U(),G(14,"li"),te(15,"Respecta\u021bi to\u021bi membrii."),U(),G(16,"li"),te(17,"F\u0103r\u0103 spam."),U(),G(18,"li"),te(19,"F\u0103r\u0103 limbaj ofensator."),U(),G(20,"li"),te(21,"R\u0103m\xe2ne\u021bi la subiect."),U(),G(22,"li"),te(23,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),U(),G(24,"li"),te(25,"Folosi\u021bi un limbaj adecvat."),U(),G(26,"li"),te(27,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),U(),G(28,"li"),te(29,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),U()(),G(30,"p"),te(31,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),U())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(http://source.unsplash.com/800x600/?Seattle) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:#f60;border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}"]})}return n})()},{path:"events",component:(()=>{class n{constructor(t,r){this.eventService=t,this.router=r,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(gD),pe(ti))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Lista de Evenimente"),U()(),G(4,"div",2)(5,"h2"),te(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),U()()(),G(7,"div",3)(8,"button",4),ln("click",function(){return i.navigateToAddEvent()}),te(9,"Adaugati un Eveniment"),U()(),G(10,"div",5),Or(11,Sre,23,12,"div",6),U()),2&r&&(Ae(11),Ht("ngForOf",i.events))},dependencies:[Tu,$p],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"offers",component:(()=>{class n{constructor(t,r){this.offersService=t,this.router=r,this.offers=[]}ngOnInit(){this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddOffer(){this.router.navigate(["/add-offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(pe(mD),pe(ti))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-offers"]],decls:15,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-job-container"],[3,"click"],[1,"offers"],[1,"offers-list"],["class","offers-card",4,"ngFor","ngForOf"],[1,"offers-card"],[1,"offers-card-image"],["src","http://source.unsplash.com/800x600/?Caregiver",3,"alt"],[1,"offers-card-content"],["class","offers-footer",4,"ngIf"],[1,"offers-footer"],[1,"featured"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Locuri de munca"),U()(),G(4,"div",2)(5,"h2"),te(6,"Descoperi\u021bi oferte de membrii comunit\u0103\u021bii"),U()()(),G(7,"div",3)(8,"button",4),ln("click",function(){return i.navigateToAddOffer()}),te(9,"Adaugati oferte"),U()(),G(10,"div",5)(11,"h2"),te(12,"Offers"),U(),G(13,"div",6),Or(14,Pre,32,15,"div",7),U()()),2&r&&(Ae(14),Ht("ngForOf",i.offers))},dependencies:[Tu,$p],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-offer-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offer-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offers-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.offer-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.offer-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"add-service",component:(()=>{class n{constructor(t,r){this.fb=t,this.servicesService=r,this.serviceTypes=[],this.serviceForm=this.fb.group({businessName:["",Nn.required],email:["",[Nn.required,Nn.email]],phone:["",Nn.required],website:["",Nn.required],description:["",Nn.required],serviceType:["",Nn.required]})}ngOnInit(){this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.servicesService.addService({id:this.serviceForm.value.ID,Name:this.serviceForm.value.businessName,Phone_Number:this.serviceForm.value.phone,Service_Type:this.serviceForm.value.serviceType,Community_Sponsor:!1,Email:this.serviceForm.value.email,Website:this.serviceForm.value.website,Facebook:this.serviceForm.value.facebook,Instagram:this.serviceForm.value.instagram,Description:this.serviceForm.value.description,Date_Created:this.serviceForm.value.Date_Created,Image:this.serviceForm.value.image}).then(()=>{console.log("Service added successfully"),this.serviceForm.reset()}).catch(r=>{console.error("Error adding service: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rI),pe(_D))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-service"]],decls:44,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required",""],["for","email"],["id","email","type","email","formControlName","email"],["for","phone"],["id","phone","formControlName","phone"],["for","website"],["id","website","formControlName","website"],["for","facebook"],["id","facebook","formControlName","facebook"],["for","instagram"],["id","instagram","formControlName","instagram"],["for","description"],["id","description","formControlName","description"],["for","serviceType",1,"required"],["id","serviceType","formControlName","serviceType","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Lista de Servicii"),U()(),G(4,"div",2)(5,"h2"),te(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),U()()(),G(7,"div",3)(8,"form",4),ln("ngSubmit",function(){return i.onSubmit()}),G(9,"div",5)(10,"label",6),te(11,"Nume:"),U(),Qe(12,"input",7),U(),G(13,"div",5)(14,"label",8),te(15,"Adresa Email:"),U(),Qe(16,"input",9),U(),G(17,"div",5)(18,"label",10),te(19,"Numar de telefon:"),U(),Qe(20,"input",11),U(),G(21,"div",5)(22,"label",12),te(23,"Pagina Web:"),U(),Qe(24,"input",13),U(),G(25,"div",5)(26,"label",14),te(27,"Pagina Facebook:"),U(),Qe(28,"input",15),U(),G(29,"div",5)(30,"label",16),te(31,"Instagram:"),U(),Qe(32,"input",17),U(),G(33,"div",5)(34,"label",18),te(35,"Descriere a serviciile oferite:"),U(),Qe(36,"textarea",19),U(),G(37,"div",5)(38,"label",20),te(39,"Categoria de serviciului:"),U(),G(40,"select",21),Or(41,Nre,2,2,"option",22),U()(),G(42,"button",23),te(43,"Add Service"),U()()()),2&r&&(Ae(8),Ht("formGroup",i.serviceForm),Ae(33),Ht("ngForOf",i.serviceTypes),Ae(1),Ht("disabled",i.serviceForm.invalid))},dependencies:[Tu,fm,tI,nI,rl,zh,jh,sm,al,sl,Hh],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})()},{path:"add-event",component:(()=>{class n{constructor(t,r){this.fb=t,this.eventsService=r,this.eventForm=this.fb.group({Approved:[""],Community_Sponsor:[""],Contact:[""],Description:["",Nn.required],Event_date:["",Nn.required],Location:["",Nn.required],Name:["",Nn.required],Phone_Number:[""],Poster_Image:["",Nn.required],Price:["",Nn.required],Website:[""]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(r=>{console.error("Error adding event: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rI),pe(gD))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-event"]],decls:40,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Contact"],["id","Contact","formControlName","Contact","required",""],["for","Poster_Image",1,"required"],["id","Poster_Image","formControlName","Poster_Image","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Event_date",1,"required"],["id","Event_date","type","date","formControlName","Event_date","required",""],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Price",1,"required"],["id","Price","formControlName","Price","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"form",1),ln("ngSubmit",function(){return i.onSubmit()}),G(2,"div",2)(3,"label",3),te(4,"Event Name:"),U(),Qe(5,"input",4),U(),G(6,"div",2)(7,"label",5),te(8,"Contatct Name:"),U(),Qe(9,"input",6),U(),G(10,"div",2)(11,"label",7),te(12,"Poster Image:"),U(),Qe(13,"input",8),U(),G(14,"div",2)(15,"label",9),te(16,"Phone Number:"),U(),Qe(17,"input",10),U(),G(18,"div",2)(19,"label",11),te(20,"Date:"),U(),Qe(21,"input",12),U(),G(22,"div",2)(23,"label",13),te(24,"Location:"),U(),Qe(25,"input",14),U(),G(26,"div",2)(27,"label",15),te(28,"Description:"),U(),Qe(29,"textarea",16),U(),G(30,"div",2)(31,"label",17),te(32,"Price:"),U(),Qe(33,"input",18),U(),G(34,"div",2)(35,"label",19),te(36,"Website:"),U(),Qe(37,"input",20),U(),G(38,"button",21),te(39,"Add Event"),U()()()),2&r&&(Ae(1),Ht("formGroup",i.eventForm),Ae(37),Ht("disabled",i.eventForm.invalid))},dependencies:[fm,rl,jh,sm,al,sl,Hh],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})()},{path:"add-offers",component:(()=>{class n{constructor(t,r){this.fb=t,this.offersService=r,this.offerForm=this.fb.group({Title:["",Nn.required],Company_Name:[""],Contact_Name:["",Nn.required],Phone_Number:["",Nn.required],Email:["",[Nn.email]],Location:["",Nn.required],Website:[""],Description:["",Nn.required],Image1:[""],Image2:[""],Image3:[""],Image4:[""],Image5:[""]})}ngOnInit(){}onSubmit(){this.offerForm.valid&&this.offersService.addOffer(this.offerForm.value).then(()=>{console.log("Offer added successfully"),this.offerForm.reset()}).catch(r=>{console.error("Error adding Offer: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rI),pe(mD))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-add-offers"]],decls:56,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Title",1,"required"],["id","Title","formControlName","Title","required",""],["for","Company_Name"],["id","Company_Name","formControlName","Company_Name"],["for","Contact_Name",1,"required"],["id","Contact_Name","formControlName","Contact_Name","required",""],["for","Phone_Number",1,"required"],["id","Phone_Number","formControlName","Phone_Number","required",""],["for","Email"],["id","Email","type","email","formControlName","Email"],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Image1"],["id","Image1","formControlName","Image1"],["for","Image2"],["id","Image2","formControlName","Image2"],["for","Image3"],["id","Image3","formControlName","Image3"],["for","Image4"],["id","Image4","formControlName","Image4"],["for","Image5"],["id","Image5","formControlName","Image5"],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"form",1),ln("ngSubmit",function(){return i.onSubmit()}),G(2,"div",2)(3,"label",3),te(4,"Offer Title:"),U(),Qe(5,"input",4),U(),G(6,"div",2)(7,"label",5),te(8,"Company Name:"),U(),Qe(9,"input",6),U(),G(10,"div",2)(11,"label",7),te(12,"Contact Name:"),U(),Qe(13,"input",8),U(),G(14,"div",2)(15,"label",9),te(16,"Phone Number:"),U(),Qe(17,"input",10),U(),G(18,"div",2)(19,"label",11),te(20,"Contact Email:"),U(),Qe(21,"input",12),U(),G(22,"div",2)(23,"label",13),te(24,"Description:"),U(),Qe(25,"textarea",14),U(),G(26,"div",2)(27,"label",15),te(28,"Image1:"),U(),Qe(29,"textarea",16),U(),G(30,"div",2)(31,"label",17),te(32,"Image2:"),U(),Qe(33,"textarea",18),U(),G(34,"div",2)(35,"label",19),te(36,"Image3:"),U(),Qe(37,"textarea",20),U(),G(38,"div",2)(39,"label",21),te(40,"Image4:"),U(),Qe(41,"textarea",22),U(),G(42,"div",2)(43,"label",23),te(44,"Image5:"),U(),Qe(45,"textarea",24),U(),G(46,"div",2)(47,"label",25),te(48,"Location:"),U(),Qe(49,"input",26),U(),G(50,"div",2)(51,"label",27),te(52,"Website:"),U(),Qe(53,"input",28),U(),G(54,"button",29),te(55,"Adauga Oferta"),U()()()),2&r&&(Ae(1),Ht("formGroup",i.offerForm),Ae(53),Ht("disabled",i.offerForm.invalid))},dependencies:[fm,rl,jh,sm,al,sl,Hh],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})()},{path:"edit-service/:id",component:(()=>{class n{constructor(t,r,i,s){this.fb=t,this.route=r,this.router=i,this.servicesService=s,this.serviceId=null,this.serviceTypes=[],this.serviceForm=this.fb.group({Name:["",Nn.required],Email:["",Nn.email],Phone_Number:["",Nn.required],Website:["",Nn.required],Facebook:[""],Instagram:[""],Description:["",Nn.required],Service_Type:["",Nn.required],Image:[""]})}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{this.serviceForm.patchValue({Name:t?.Name,Email:t?.Email?"":t?.Email,Phone_Number:t?.Phone_Number,Service_Type:t?.Service_Type,Website:t?.Website,Facebook:t?.Facebook,Instagram:t?.Instagram,Description:t?.Description,Image:t?.Image})}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.serviceId&&(console.log(this.serviceForm),this.serviceForm.value.Facebook=this.serviceForm.value.Facebook||"",this.serviceForm.value.Instagram=this.serviceForm.value.Instagram||"",this.serviceForm.value.Image=this.serviceForm.value.Image||"",this.serviceForm.value.Email=this.serviceForm.value.Email||"",this.servicesService.updateService(this.serviceId,this.serviceForm.value).then(()=>{console.log("Service updated successfully"),this.router.navigate(["/services"])}).catch(t=>{console.error("Error updating service: ",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(rI),pe(pc),pe(ti),pe(_D))};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-edit-services"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Image"],["id","Image","formControlName","Image"],["for","Service_Type"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(G(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Lista de Servicii"),U()(),G(4,"div",2)(5,"h2"),te(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),U()()(),G(7,"div",3)(8,"form",4),ln("ngSubmit",function(){return i.onSubmit()}),G(9,"div",5)(10,"label",6),te(11,"Nume:"),U(),Qe(12,"input",7),U(),G(13,"div",5)(14,"label",8),te(15,"Adresa Email:"),U(),Qe(16,"input",9),U(),G(17,"div",5)(18,"label",10),te(19,"Numar de telefon:"),U(),Qe(20,"input",11),U(),G(21,"div",5)(22,"label",12),te(23,"Pagina Web:"),U(),Qe(24,"input",13),U(),G(25,"div",5)(26,"label",14),te(27,"Pagina Facebook:"),U(),Qe(28,"input",15),U(),G(29,"div",5)(30,"label",16),te(31,"Instagram:"),U(),Qe(32,"input",17),U(),G(33,"div",5)(34,"label",18),te(35,"Descriere a serviciile oferite:"),U(),Qe(36,"textarea",19),U(),G(37,"div",5)(38,"label",20),te(39,"Imagine:"),U(),Qe(40,"input",21),U(),G(41,"div",5)(42,"label",22),te(43,"Categoria de serviciului:"),U(),G(44,"select",23),Or(45,Lre,2,2,"option",24),U()(),G(46,"button",25),te(47,"Salvati Serviciu"),U()()()),2&r&&(Ae(8),Ht("formGroup",i.serviceForm),Ae(37),Ht("ngForOf",i.serviceTypes),Ae(1),Ht("disabled",i.serviceForm.invalid))},dependencies:[Tu,fm,tI,nI,rl,zh,jh,sm,al,sl,Hh],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}"]})}return n})()}];let Ure=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({imports:[UF.forRoot(Vre),UF]})}return n})();const Bre=function(n,e){return{"fa-bars":n,"fa-times":e}},jre=function(n){return{active:n}};let $re=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/offers",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(G(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),te(4,"Romani in Seattle"),U()(),G(5,"div",4),ln("click",function(){return i.toggleMenu()}),Qe(6,"i",5),U(),G(7,"ul",6)(8,"li",7)(9,"a",8),ln("click",function(){return i.closeMenu()}),te(10,"Home"),U()(),G(11,"li",7)(12,"a",9),ln("click",function(){return i.closeMenu()}),te(13,"Servicii"),U()(),G(14,"li",7)(15,"a",10),ln("click",function(){return i.closeMenu()}),te(16,"Evenimente"),U()(),G(17,"li",7)(18,"a",11),ln("click",function(){return i.closeMenu()}),te(19,"Oferte"),U()(),G(20,"li",7)(21,"a",12),ln("click",function(){return i.closeMenu()}),te(22,"Regulament"),U()()()()()),2&r&&(Ae(6),Ht("ngClass",MN(2,Bre,!i.menuOpen,i.menuOpen)),Ae(1),Ht("ngClass",RN(5,jre,i.menuOpen)))},dependencies:[fO,Uv],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{color:#333;text-decoration:none;text-transform:uppercase;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to left,blue 0,blue 33.3%,yellow 33.3%,yellow 66.6%,red 66.6%,red)}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),Hre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(G(0,"footer",0)(1,"div",1),te(2," \xa9 2024 Romani in Seattle. All rights reserved. "),U()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),zre=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=yr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(G(0,"div",0),Qe(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),U())},dependencies:[xT,$re,Hre],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class oj{}class qre{}const Aa="*";function aj(n,e=null){return{type:2,steps:n,options:e}}function cj(n){return{type:6,styles:n,offset:null}}class pm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uj{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function lj(n){return new P(3e3,!1)}function Vc(n){switch(n.length){case 0:return new pm;case 1:return n[0];default:return new uj(n)}}function dj(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let b=I,R=y;if("offset"!==I)switch(b=n.normalizePropertyName(b,i),R){case"!":R=t.get(I);break;case Aa:R=r.get(I);break;default:R=n.normalizeStyleValue(I,b,R,i)}m.set(b,R)}),f||s.push(m),a=m,o=u}),i.length)throw function pie(n){return new P(3502,!1)}();return s}function FD(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&LD(t,"start",n)));break;case"done":n.onDone(()=>r(t&&LD(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&LD(t,"destroy",n)))}}function LD(n,e,t){const s=VD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function VD(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function _s(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Aie=(()=>typeof document>"u"?null:document.documentElement)();function UD(n){const e=n.parentNode||n.host||null;return e===Aie?null:e}let cl=null,fj=!1;function pj(n,e){for(;e;){if(e===n)return!0;e=UD(e)}return!1}function gj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let mj=(()=>{class n{validateStyleProperty(t){return function Sie(n){cl||(cl=function Rie(){return typeof document<"u"?document.body:null}()||{},fj=!!cl.style&&"WebkitAppearance"in cl.style);let e=!0;return cl.style&&!function Die(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in cl.style,!e&&fj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cl.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return pj(t,r)}getParentElement(t){return UD(t)}query(t,r,i){return gj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new pm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),BD=(()=>{class n{static#e=this.NOOP=new mj}return n})();const Mie=1e3,jD="ng-enter",iI="ng-leave",sI="ng-trigger",oI=".ng-trigger",yj="ng-animating",$D=".ng-animating";function Da(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:HD(parseFloat(e[1]),e[2])}function HD(n,e){return"s"===e?n*Mie:n}function aI(n,e,t){return n.hasOwnProperty("duration")?n:function xie(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(lj()),{duration:0,delay:0,easing:""};i=HD(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=HD(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Gre(){return new P(3100,!1)}()),a=!0),s<0&&(e.push(function Wre(){return new P(3101,!1)}()),a=!0),a&&e.splice(c,0,lj())}return{duration:i,delay:s,easing:o}}(n,e,t)}function gm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Uc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ho(n,e,t){e.forEach((r,i)=>{const s=qD(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ul(n,e){e.forEach((t,r)=>{const i=qD(r);n.style[i]=""})}function mm(n){return Array.isArray(n)?1==n.length?n[0]:aj(n):n}const zD=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ij(n){let e=[];if("string"==typeof n){let t;for(;t=zD.exec(n);)e.push(t[1]);zD.lastIndex=0}return e}function _m(n,e,t){const r=n.toString(),i=r.replace(zD,(s,o)=>{let a=e[o];return null==a&&(t.push(function Zre(n){return new P(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function cI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kie=/-+([a-z0-9])/g;function qD(n){return n.replace(kie,(...e)=>e[1].toUpperCase())}function ys(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Qre(n){return new P(3004,!1)}()}}function wj(n,e){return window.getComputedStyle(n)[e]}const uI="*";function Vie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Uie(n,e,t){if(":"==n[0]){const c=function Bie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lie(n){return new P(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function uie(n){return new P(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(bj(i,o));"<"==s[0]&&!(i==uI&&o==uI)&&e.push(bj(o,i))}(r,t,e)):t.push(n),t}const lI=new Set(["true","1"]),dI=new Set(["false","0"]);function bj(n,e){const t=lI.has(n)||dI.has(n),r=lI.has(e)||dI.has(e);return(i,s)=>{let o=n==uI||n==i,a=e==uI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?lI.has(n):dI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?lI.has(e):dI.has(e)),o&&a}}const jie=new RegExp("s*:selfs*,?","g");function GD(n,e,t,r){return new $ie(n).build(e,t,r)}class $ie{constructor(e){this._driver=e}build(e,t,r){const i=new qie(t);return this._resetContextStyleTimingState(i),ys(this,mm(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Xre(){return new P(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function Jre(){return new P(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ij(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(cI(s.values()),t.errors.push(function eie(n,e){return new P(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ys(this,mm(e.animation),t);return{type:1,matchers:Vie(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ll(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ys(this,r,t)),options:ll(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ys(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:ll(e.options)}}visitAnimate(e,t){const r=function Wie(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return WD(aI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=WD(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=aI(t,e);return WD(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:cj({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=cj(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Aa?r.push(a):t.errors.push(new P(3002,!1)):r.push(vj(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function nie(n,e,t,r,i){return new P(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function Oie(n,e,t){const r=e.params||{},i=Ij(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Kre(n){return new P(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function rie(){return new P(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(z=>{const V=this._makeStyleAst(z,t);let Q=null!=V.offset?V.offset:function Gie(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),ie=0;return null!=Q&&(s++,ie=V.offset=Q),c=c||ie<0||ie>1,a=a||ie<u,u=ie,o.push(ie),V});c&&t.errors.push(function iie(){return new P(3012,!1)}()),a&&t.errors.push(function sie(){return new P(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function oie(){return new P(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,b=t.currentTime,R=t.currentAnimateTimings,x=R.duration;return f.forEach((z,V)=>{const Q=y>0?V==I?1:y*V:o[V],ie=Q*x;t.currentTime=b+R.delay+ie,R.duration=ie,this._validateStyleAst(z,t),z.offset=Q,r.styles.push(z)}),r}visitReference(e,t){return{type:8,animation:ys(this,mm(e.animation),t),options:ll(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ll(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ll(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Hie(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jie,"")),n=n.replace(/@\*/g,oI).replace(/@\w+/g,t=>oI+"-"+t.slice(1)).replace(/:animating/g,$D),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,_s(t.collectedStyles,t.currentQuerySelector,new Map);const a=ys(this,mm(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ll(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function aie(){return new P(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:aI(e.timings,t.errors,!0);return{type:12,animation:ys(this,mm(e.animation),t),timings:r,options:null}}}class qie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ll(n){return n?(n=gm(n)).params&&(n.params=function zie(n){return n?gm(n):null}(n.params)):n={},n}function WD(n,e,t){return{duration:n,delay:e,easing:t}}function KD(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class hI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Qie=new RegExp(":enter","g"),Xie=new RegExp(":leave","g");function ZD(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new Jie).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class Jie{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new hI;const m=new QD(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?Da(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),ys(this,r,m);const I=m.timelines.filter(b=>b.containsAnimation());if(I.length&&a.size){let b;for(let R=I.length-1;R>=0;R--){const x=I[R];if(x.element===t){b=x;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,m.errors,c)}return I.length?I.map(b=>b.buildKeyframes()):[KD(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Da(_m(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Da(r.duration):null,a=null!=r.delay?Da(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ys(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=fI);const o=Da(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ys(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Da(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ys(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return aI(t.params?_m(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Da(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),ys(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;ys(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const fI={};class QD{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new pI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Da(r.duration)),null!=r.delay&&(i.delay=Da(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=_m(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new QD(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=fI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new ese(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Qie,"."+this._enterClassName)).replace(Xie,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function cie(n){return new P(3014,!1)}()),a}}class pI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new pI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Aa),this._currentKeyframe.set(t,Aa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function tse(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Aa)}else Uc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=_m(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Aa),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=Uc(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===Aa&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?cI(e.values()):[],o=t.size?cI(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return KD(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class ese extends pI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Uc(e[0]);c.set("offset",0),s.push(c);const u=Uc(e[0]);u.set("offset",Aj(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=Uc(e[m]);const I=y.get("offset");y.set("offset",Aj((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return KD(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Aj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class YD{}const nse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class rse extends YD{normalizePropertyName(e,t){return qD(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(nse.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Yre(n,e){return new P(3005,!1)}())}return o+s}}function Dj(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const XD={};class Sj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function ise(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||XD,b=this.buildStyles(r,a&&a.params||XD,m),R=c&&c.params||XD,x=this.buildStyles(i,R,m),z=new Set,V=new Map,Q=new Map,ie="void"===i,Ce={params:sse(R,y),delay:this.ast.options?.delay},ke=f?[]:ZD(e,t,this.ast.animation,s,o,b,x,Ce,u,m);let $=0;if(ke.forEach(L=>{$=Math.max(L.duration+L.delay,$)}),m.length)return Dj(t,this._triggerName,r,i,ie,b,x,[],[],V,Q,$,m);ke.forEach(L=>{const q=L.element,W=_s(V,q,new Set);L.preStyleProps.forEach(B=>W.add(B));const ee=_s(Q,q,new Set);L.postStyleProps.forEach(B=>ee.add(B)),q!==t&&z.add(q)});const N=cI(z.values());return Dj(t,this._triggerName,r,i,ie,b,x,ke,N,V,Q,$)}}function sse(n,e){const t=gm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class ose{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=gm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=_m(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class cse{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new ose(i.style,i.options&&i.options.params||{},r))}),Rj(this.states,"true","1"),Rj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Sj(e,i,this.states))}),this.fallbackTransition=function use(n,e,t){return new Sj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Rj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const lse=new hI;class dse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=GD(this._driver,t,r,[]);if(r.length)throw function gie(n){return new P(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=dj(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=ZD(this._driver,t,s,jD,iI,new Map,new Map,r,lse,i),o.forEach(f=>{const m=_s(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function mie(){return new P(3300,!1)}()),o=[]),i.length)throw function _ie(n){return new P(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,Aa))})});const u=Vc(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function yie(n){return new P(3301,!1)}();return t}listen(e,t,r,i){const s=VD(t,"","","");return FD(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Mj="ng-animate-queued",JD="ng-animate-disabled",mse=[],Pj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_se={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},io="__ng_removed";class eS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Ise(n){return n??null}(r?e.value:e),r){const s=gm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ym="void",tS=new eS(ym);class yse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ls(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function vie(n,e){return new P(3302,!1)}();if(null==r||0==r.length)throw function Eie(n){return new P(3303,!1)}();if(!function wse(n){return"start"==n||"done"==n}(r))throw function Iie(n,e){return new P(3400,!1)}();const s=_s(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=_s(this._engine.statesByElement,e,new Map);return a.has(t)||(Ls(e,sI),Ls(e,sI+"-"+t),a.set(t,tS)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function wie(n){return new P(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new nS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ls(e,sI),Ls(e,sI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new eS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=tS),u.value!==ym&&c.value===u.value){if(!function Cse(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const R=[],x=s.matchStyles(c.value,c.params,R),z=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{ul(e,x),Ho(e,z)})}return}const y=_s(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),b=!1;if(!I){if(!i)return;I=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:b}),b||(Ls(e,Mj),o.onStart(()=>{qh(e,Mj)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const x=this._engine.playersByElement.get(e);if(x){let z=x.indexOf(o);z>=0&&x.splice(z,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,oI,!0);r.forEach(i=>{if(i[io])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,ym,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Vc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||tS,f=new eS(ym),m=new nS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[io];(!s||s===Pj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ls(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=VD(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,FD(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class vse{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new yse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(gI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!gI(t))return;const s=t[io];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ls(e,JD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qh(e,JD))}removeNode(e,t,r){if(gI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[io]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return gI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,oI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$D,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[io];if(t&&t.setForRemoval){if(e[io]=Pj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(JD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ls(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Vc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function bie(n){return new P(3402,!1)}()}_flushAnimations(e,t){const r=new hI,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(He=>{f.add(He);const Xe=this.driver.query(He,".ng-animate-queued",!0);for(let Je=0;Je<Xe.length;Je++)f.add(Xe[Je])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=Oj(y,this.collectedEnterElements),b=new Map;let R=0;I.forEach((He,Xe)=>{const Je=jD+R++;b.set(Xe,Je),He.forEach(Ot=>Ls(Ot,Je))});const x=[],z=new Set,V=new Set;for(let He=0;He<this.collectedLeaveElements.length;He++){const Xe=this.collectedLeaveElements[He],Je=Xe[io];Je&&Je.setForRemoval&&(x.push(Xe),z.add(Xe),Je.hasAnimation?this.driver.query(Xe,".ng-star-inserted",!0).forEach(Ot=>z.add(Ot)):V.add(Xe))}const Q=new Map,ie=Oj(y,Array.from(z));ie.forEach((He,Xe)=>{const Je=iI+R++;Q.set(Xe,Je),He.forEach(Ot=>Ls(Ot,Je))}),e.push(()=>{I.forEach((He,Xe)=>{const Je=b.get(Xe);He.forEach(Ot=>qh(Ot,Je))}),ie.forEach((He,Xe)=>{const Je=Q.get(Xe);He.forEach(Ot=>qh(Ot,Je))}),x.forEach(He=>{this.processLeaveNode(He)})});const Ce=[],ke=[];for(let He=this._namespaceList.length-1;He>=0;He--)this._namespaceList[He].drainQueuedTransitions(t).forEach(Je=>{const Ot=Je.player,pr=Je.element;if(Ce.push(Ot),this.collectedEnterElements.length){const ir=pr[io];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has(Je.triggerName)){const Ma=ir.previousTriggersValues.get(Je.triggerName),rs=this.statesByElement.get(Je.element);if(rs&&rs.has(Je.triggerName)){const Pa=rs.get(Je.triggerName);Pa.value=Ma,rs.set(Je.triggerName,Pa)}}return void Ot.destroy()}}const Us=!m||!this.driver.containsElement(m,pr),rr=Q.get(pr),On=b.get(pr),kn=this._buildInstruction(Je,r,On,rr,Us);if(kn.errors&&kn.errors.length)return void ke.push(kn);if(Us)return Ot.onStart(()=>ul(pr,kn.fromStyles)),Ot.onDestroy(()=>Ho(pr,kn.toStyles)),void i.push(Ot);if(Je.isFallbackTransition)return Ot.onStart(()=>ul(pr,kn.fromStyles)),Ot.onDestroy(()=>Ho(pr,kn.toStyles)),void i.push(Ot);const jc=[];kn.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||jc.push(ir)}),kn.timelines=jc,r.append(pr,kn.timelines),o.push({instruction:kn,player:Ot,element:pr}),kn.queriedElements.forEach(ir=>_s(a,ir,[]).push(Ot)),kn.preStyleProps.forEach((ir,Ma)=>{if(ir.size){let rs=c.get(Ma);rs||c.set(Ma,rs=new Set),ir.forEach((Pa,$c)=>rs.add($c))}}),kn.postStyleProps.forEach((ir,Ma)=>{let rs=u.get(Ma);rs||u.set(Ma,rs=new Set),ir.forEach((Pa,$c)=>rs.add($c))})});if(ke.length){const He=[];ke.forEach(Xe=>{He.push(function Tie(n,e){return new P(3505,!1)}())}),Ce.forEach(Xe=>Xe.destroy()),this.reportError(He)}const $=new Map,N=new Map;o.forEach(He=>{const Xe=He.element;r.has(Xe)&&(N.set(Xe,Xe),this._beforeAnimationBuild(He.player.namespaceId,He.instruction,$))}),i.forEach(He=>{const Xe=He.element;this._getPreviousPlayers(Xe,!1,He.namespaceId,He.triggerName,null).forEach(Ot=>{_s($,Xe,[]).push(Ot),Ot.destroy()})});const L=x.filter(He=>Fj(He,c,u)),q=new Map;Nj(q,this.driver,V,u,Aa).forEach(He=>{Fj(He,c,u)&&L.push(He)});const ee=new Map;I.forEach((He,Xe)=>{Nj(ee,this.driver,new Set(He),c,"!")}),L.forEach(He=>{const Xe=q.get(He),Je=ee.get(He);q.set(He,new Map([...Xe?.entries()??[],...Je?.entries()??[]]))});const B=[],Vs=[],Bc={};o.forEach(He=>{const{element:Xe,player:Je,instruction:Ot}=He;if(r.has(Xe)){if(f.has(Xe))return Je.onDestroy(()=>Ho(Xe,Ot.toStyles)),Je.disabled=!0,Je.overrideTotalTime(Ot.totalTime),void i.push(Je);let pr=Bc;if(N.size>1){let rr=Xe;const On=[];for(;rr=rr.parentNode;){const kn=N.get(rr);if(kn){pr=kn;break}On.push(rr)}On.forEach(kn=>N.set(kn,pr))}const Us=this._buildAnimation(Je.namespaceId,Ot,$,s,ee,q);if(Je.setRealPlayer(Us),pr===Bc)B.push(Je);else{const rr=this.playersByElement.get(pr);rr&&rr.length&&(Je.parentPlayer=Vc(rr)),i.push(Je)}}else ul(Xe,Ot.fromStyles),Je.onDestroy(()=>Ho(Xe,Ot.toStyles)),Vs.push(Je),f.has(Xe)&&i.push(Je)}),Vs.forEach(He=>{const Xe=s.get(He.element);if(Xe&&Xe.length){const Je=Vc(Xe);He.setRealPlayer(Je)}}),i.forEach(He=>{He.parentPlayer?He.syncPlayerEvents(He.parentPlayer):He.destroy()});for(let He=0;He<x.length;He++){const Xe=x[He],Je=Xe[io];if(qh(Xe,iI),Je&&Je.hasAnimation)continue;let Ot=[];if(a.size){let Us=a.get(Xe);Us&&Us.length&&Ot.push(...Us);let rr=this.driver.query(Xe,$D,!0);for(let On=0;On<rr.length;On++){let kn=a.get(rr[On]);kn&&kn.length&&Ot.push(...kn)}}const pr=Ot.filter(Us=>!Us.destroyed);pr.length?bse(this,Xe,pr):this.processLeaveNode(Xe)}return x.length=0,B.forEach(He=>{this.players.push(He),He.onDone(()=>{He.destroy();const Xe=this.players.indexOf(He);this.players.splice(Xe,1)}),He.play()}),B}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==ym;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=_s(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const b=I.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),I.destroy(),m.push(I)})}ul(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(b=>{const R=b.element;f.add(R);const x=R[io];if(x&&x.removedBeforeQueried)return new pm(b.duration,b.delay);const z=R!==c,V=function Tse(n){const e=[];return kj(n,e),e}((r.get(R)||mse).map($=>$.getRealPlayer())).filter($=>!!$.element&&$.element===R),Q=s.get(R),ie=o.get(R),Ce=dj(this._normalizer,b.keyframes,Q,ie),ke=this._buildPlayer(b,Ce,V);if(b.subTimeline&&i&&m.add(R),z){const $=new nS(e,a,R);$.setRealPlayer(ke),u.push($)}return ke});u.forEach(b=>{_s(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function Ese(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),f.forEach(b=>Ls(b,yj));const I=Vc(y);return I.onDestroy(()=>{f.forEach(b=>qh(b,yj)),Ho(c,t.toStyles)}),m.forEach(b=>{_s(i,b,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new pm(e.duration,e.delay)}}class nS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new pm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>FD(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_s(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function gI(n){return n&&1===n.nodeType}function xj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Nj(n,e,t,r,i){const s=[];t.forEach(c=>s.push(xj(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[io]=_se,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>xj(c,s[a++])),o}function Oj(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function Ls(n,e){n.classList?.add(e)}function qh(n,e){n.classList?.remove(e)}function bse(n,e,t){Vc(t).onDone(()=>n.processLeaveNode(e))}function kj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof uj?kj(r.players,e):e.push(r)}}function Fj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class mI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new vse(e,t,r),this._timelineEngine=new dse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=GD(this._driver,s,c,[]);if(c.length)throw function fie(n,e){return new P(3404,!1)}();a=function ase(n,e,t){return new cse(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=hj(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=hj(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Dse=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ho(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ho(this._element,this._initialStyles),this._endStyles&&(Ho(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ul(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ul(this._element,this._endStyles),this._endStyles=null),Ho(this._element,this._initialStyles),this._state=3)}}return n})();function rS(n){let e=null;return n.forEach((t,r)=>{(function Sse(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Lj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:wj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Rse{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return pj(e,t)}getParentElement(e){return UD(e)}query(e,t,r){return gj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof Lj);(function Fie(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((b,R)=>u.set(R,b))});let m=function Nie(n){return n.length?n[0]instanceof Map?n:n.map(e=>vj(e)):[]}(t).map(I=>Uc(I));m=function Lie(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,wj(n,a)))}}return e}(e,m,u);const y=function Ase(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=rS(e[0]),e.length>1&&(r=rS(e[e.length-1]))):e instanceof Map&&(t=rS(e)),t||r?new Dse(n,t,r):null}(e,m);return new Lj(e,m,c,y)}}let Mse=(()=>{class n extends oj{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Yn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?aj(t):t;return Vj(this._renderer,null,r,"register",[i]),new Pse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(yp),fe(Jn))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class Pse extends qre{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new xse(this._id,e,t||{},this._renderer)}}class xse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Vj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Vj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Uj="@.disabled";let Nse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new Bj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new Ose(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(yp),fe(mI),fe(Nt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class Bj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Uj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ose extends Bj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Uj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function kse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Fse(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const jj=[{provide:oj,useClass:Mse},{provide:YD,useFactory:function Vse(){return new rse}},{provide:mI,useClass:(()=>{class n extends mI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Jn),fe(BD),fe(YD),fe(Iu))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})()},{provide:yp,useFactory:function Use(n,e,t){return new Nse(n,e,t)},deps:[eT,mI,Nt]}],iS=[{provide:BD,useFactory:()=>new Rse},{provide:PM,useValue:"BrowserAnimations"},...jj],$j=[{provide:BD,useClass:mj},{provide:PM,useValue:"NoopAnimations"},...jj];let Bse=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?$j:iS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n});static#n=this.\u0275inj=Xt({providers:iS,imports:[LO]})}return n})();const Hj_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class Gh{constructor(e){return e}}class sS{constructor(){return(0,tr.getApps)()}}const oS=new Ee("angularfire2._apps"),$se={provide:Gh,useFactory:function jse(n){return n&&1===n.length?n[0]:new Gh((0,tr.getApp)())},deps:[[new br,oS]]},Hse={provide:sS,deps:[[new br,oS]]};function zse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Gh(r)}}let qse=(()=>{class n{constructor(t){(0,tr.registerVersion)("angularfire",gc.full,"core"),(0,tr.registerVersion)("angularfire",gc.full,"app"),(0,tr.registerVersion)("angular",db.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(xs))};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[$se,Hse]})}return n})();function Gse(n,...e){return{ngModule:qse,providers:[{provide:oS,useFactory:zse(n),multi:!0,deps:[Nt,ei,nh,...e]}]}}const Wse=$T(tr.initializeApp,!0);et(35);class cS{constructor(){return Bv("auth")}}class lS{constructor(e){return e}}const qj="firestore",dS=new Ee("angularfire2.firestore-instances");function Jse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lS(r)}}const eoe={provide:class Yse{constructor(){return Bv(qj)}},deps:[[new br,dS]]},toe={provide:lS,useFactory:function Xse(n,e){const t=jT(qj,n,e);return t&&new lS(t)},deps:[[new br,dS],Gh]};let noe=(()=>{class n{constructor(){(0,tr.registerVersion)("angularfire",gc.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[toe,eoe]})}return n})();function roe(n,...e){return{ngModule:noe,providers:[{provide:dS,useFactory:Jse(n),multi:!0,deps:[Nt,ei,nh,sS,[new br,cS],[new br,fg],...e]}]}}const ioe=$T(ste,!0),Gj="firebasestorage.googleapis.com",Wj="storageBucket";class Qn extends _t.ZR{constructor(e,t,r=0){super(hS(e),`Firebase Storage: ${t} (${hS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hn||{});function hS(n){return"storage/"+n}function fS(){return new Qn(Hn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Kj(){return new Qn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zj(){return new Qn(Hn.CANCELED,"User canceled the upload/download.")}function Qj(){return new Qn(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wh(n){return new Qn(Hn.INVALID_ARGUMENT,n)}function Yj(){return new Qn(Hn.APP_DELETED,"The Firebase app was deleted.")}function Xj(n){return new Qn(Hn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vm(n,e){return new Qn(Hn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Em(n){throw new Qn(Hn.INTERNAL_ERROR,"Internal error: "+n)}class vi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vi.makeFromUrl(e,t)}catch{return new vi(e,"")}if(""===r.path)return r;throw function poe(n){return new Qn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(ie){ie.path_=decodeURIComponent(ie.path)}const m=t.replace(/[.]/g,"\\."),Q=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ie){"/"===ie.path.charAt(ie.path.length-1)&&(ie.path_=ie.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===Gj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let ie=0;ie<Q.length;ie++){const Ce=Q[ie],ke=Ce.regex.exec(e);if(ke){let N=ke[Ce.indices.path];N||(N=""),r=new vi(ke[Ce.indices.bucket],N),Ce.postModify(r);break}}if(null==r)throw function foe(n){return new Qn(Hn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class voe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function yI(n){return"string"==typeof n||n instanceof String}function Jj(n){return pS()&&n instanceof Blob}function pS(){return typeof Blob<"u"}function gS(n,e,t,r){if(r<e)throw Wh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Wh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Sa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function e$(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Kh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Kh||{});function t$(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Coe{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,b)=>{this.resolve_=I,this.reject_=b,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function woe(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=fS();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?Yj():Zj():Kj())};this.canceled_?t(0,new vI(!1,null,!0)):this.backoffId_=function Eoe(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...x){u||(u=!0,e.apply(null,x))}function m(x){i=setTimeout(()=>{i=null,n(I,c())},x)}function y(){s&&clearTimeout(s)}function I(x,...z){if(u)return void y();if(x)return y(),void f.call(null,x,...z);if(c()||o)return y(),void f.call(null,x,...z);let Q;r<64&&(r*=2),1===a?(a=2,Q=0):Q=1e3*(r+Math.random()),m(Q)}let b=!1;function R(x){b||(b=!0,y(),!u&&(null!==i?(x||(a=2),clearTimeout(i),m(0)):x||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new vI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Kh.NO_ERROR,c=s.getStatus();if(!a||t$(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Kh.ABORT;return void r(!1,new vI(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new vI(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Ioe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class vI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function xoe(...n){const e=function Poe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(pS())return new Blob(n);throw new Qn(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mS{constructor(e,t){this.data=e,this.contentType=t||null}}function _S(n,e){switch(n){case vs.RAW:return new mS(n$(e));case vs.BASE64:case vs.BASE64URL:return new mS(r$(n,e));case vs.DATA_URL:return new mS(function Foe(n){const e=new i$(n);return e.base64?r$(vs.BASE64,e.rest):function koe(n){let e;try{e=decodeURIComponent(n)}catch{throw vm(vs.DATA_URL,"Malformed data URL.")}return n$(e)}(e.rest)}(e),function Loe(n){return new i$(n).contentType}(e))}throw fS()}function n$(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function r$(n,e){switch(n){case vs.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw vm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vs.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw vm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Ooe(n){if(typeof atob>"u")throw function yoe(n){return new Qn(Hn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:vm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class i${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vm(vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Voe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class zo{constructor(e,t){let r=0,i="";Jj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jj(this.data_)){const i=function Noe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new zo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zo(r,!0)}}static getBlob(...e){if(pS()){const t=e.map(r=>r instanceof zo?r.data_:r);return new zo(xoe.apply(null,t))}{const t=e.map(o=>yI(o)?_S(vs.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new zo(i,!0)}}uploadData(){return this.data_}}function yS(n){let e;try{e=JSON.parse(n)}catch{return null}return function Toe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function s$(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function joe(n,e){return e}class Li{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||joe}}let EI=null;function Im(){if(EI)return EI;const n=[];n.push(new Li("bucket")),n.push(new Li("generation")),n.push(new Li("metageneration")),n.push(new Li("name","fullPath",!0));const t=new Li("name");t.xform=function e(s,o){return function $oe(n){return!yI(n)||n.length<2?n:s$(n)}(o)},n.push(t);const i=new Li("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Li("timeCreated")),n.push(new Li("updated")),n.push(new Li("md5Hash",null,!0)),n.push(new Li("cacheControl",null,!0)),n.push(new Li("contentDisposition",null,!0)),n.push(new Li("contentEncoding",null,!0)),n.push(new Li("contentLanguage",null,!0)),n.push(new Li("contentType",null,!0)),n.push(new Li("metadata","customMetadata",!0)),EI=n,EI}function o$(n,e,t){const r=yS(e);return null===r?null:function zoe(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Hoe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new vi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function vS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const a$="prefixes",c$="items";class qo{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Go(n){if(!n)throw fS()}function II(n,e){return function t(r,i){const s=o$(n,i,e);return Go(null!==s),s}}function Zh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function doe(){return new Qn(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function loe(){return new Qn(Hn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function uoe(n){return new Qn(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hoe(n){return new Qn(Hn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function wm(n){const e=Zh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function coe(n){return new Qn(Hn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function u$(n,e,t){const i=Sa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new qo(i,"GET",II(n,t),o);return a.errorHandler=wm(e),a}function Qoe(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Sa(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new qo(a,"GET",function Koe(n,e){return function t(r,i){const s=function Woe(n,e,t){const r=yS(t);return null===r?null:function Goe(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[a$])for(const i of t[a$]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new vi(e,s));r.prefixes.push(o)}if(t[c$])for(const i of t[c$]){const s=n._makeStorageReference(new vi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Go(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=Zh(e),f}function d$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function eae(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class wI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ES(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Go(!1)}return Go(!!t&&-1!==(e||["active"]).indexOf(t)),t}const iae={STATE_CHANGED:"state_changed"},Vi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function IS(n){switch(n){case"running":case"pausing":case"canceling":return Vi.RUNNING;case"paused":return Vi.PAUSED;case"success":return Vi.SUCCESS;case"canceled":return Vi.CANCELED;default:return Vi.ERROR}}class sae{constructor(e,t,r){if(function boe(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Qh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let p$=null;class oae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Em("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Em("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Em("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Em("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Em("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class aae extends oae{initXhr(){this.xhr_.responseType="text"}}function so(){return p$?p$():new aae}class g${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Im(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(t$(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Kj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Hn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tae(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=d$(e,r,i),a={name:o.fullPath},c=Sa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=vS(o,t),b=new qo(c,"POST",function I(R){let x;ES(R);try{x=R.getResponseHeader("X-Goog-Upload-URL")}catch{Go(!1)}return Go(yI(x)),x},n.maxUploadRetryTime);return b.urlParams=a,b.headers=f,b.body=m,b.errorHandler=Zh(e),b}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,so,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function nae(n,e,t,r){const c=new qo(t,"POST",function s(u){const f=ES(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Go(!1)}m||Go(!1);const y=Number(m);return Go(!isNaN(y)),new wI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Zh(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,so,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new wI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function rae(n,e,t,r,i,s,o,a){const c=new wI(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function moe(){return new Qn(Hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const b={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(m,m+f);if(null===R)throw Qj();const Q=new qo(t,"POST",function x(ie,Ce){const ke=ES(ie,["active","final"]),$=c.current+f,N=r.size();let L;return L="final"===ke?II(e,s)(ie,Ce):null,new wI($,N,"final"===ke,L)},e.maxUploadRetryTime);return Q.headers=b,Q.body=R.uploadData(),Q.progressCallback=a||null,Q.errorHandler=Zh(n),Q}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,so,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=u$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,so,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function h$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let Q="";for(let ie=0;ie<2;ie++)Q+=Math.random().toString().slice(2);return Q}();o["Content-Type"]="multipart/related; boundary="+c;const u=d$(e,r,i),f=vS(u,t),I=zo.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw Qj();const b={name:u.fullPath},R=Sa(s,n.host,n._protocol),z=n.maxUploadRetryTime,V=new qo(R,"POST",II(n,t),z);return V.urlParams=b,V.headers=o,V.body=I.uploadData(),V.errorHandler=Zh(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,so,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Zj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=IS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new sae(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(IS(this._state)){case Vi.SUCCESS:Qh(this._resolve.bind(null,this.snapshot))();break;case Vi.CANCELED:case Vi.ERROR:Qh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(IS(this._state)){case Vi.RUNNING:case Vi.PAUSED:e.next&&Qh(e.next.bind(e,this.snapshot))();break;case Vi.SUCCESS:e.complete&&Qh(e.complete.bind(e))();break;default:e.error&&Qh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dl{constructor(e,t){this._service=e,this._location=t instanceof vi?t:vi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dl(e,t)}get root(){const e=new vi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s$(this._location.path)}get storage(){return this._service}get parent(){const e=function Uoe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vi(this._location.bucket,e);return new dl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Xj(e)}}function _$(n,e,t){return wS.apply(this,arguments)}function wS(){return(wS=(0,le.Z)(function*(n,e,t){const i=yield y$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield _$(n,e,i.nextPageToken))})).apply(this,arguments)}function y$(n,e){null!=e&&"number"==typeof e.maxResults&&gS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Qoe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,so)}function vae(n){n._throwIfRoot("getDownloadURL");const e=function Yoe(n,e,t){const i=Sa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new qo(i,"GET",function Zoe(n,e){return function t(r,i){const s=o$(n,i,e);return Go(null!==s),function qoe(n,e,t,r){const i=yS(e);if(null===i||!yI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return Sa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+e$({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=wm(e),a}(n.storage,n._location,Im());return n.storage.makeRequestWithTokens(e,so).then(t=>{if(null===t)throw function _oe(){return new Qn(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function v$(n,e){const t=function Boe(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new vi(n._location.bucket,t);return new dl(n.storage,r)}function E$(n,e){if(n instanceof bS){const t=n;if(null==t._bucket)throw function goe(){return new Qn(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wj+"' property when initializing the app?")}();const r=new dl(t,t._bucket);return null!=e?E$(r,e):r}return void 0!==e?v$(n,e):n}function bae(n,e){if(e&&function Iae(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof bS)return function wae(n,e){return new dl(n,e)}(n,e);throw Wh("To use ref(service, url), the first argument must be a Storage instance.")}return E$(n,e)}function I$(n,e){const t=e?.[Wj];return null==t?null:vi.makeFromBucketSpec(t,n)}class bS{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vi.makeFromBucketSpec(i,this._host):I$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vi.makeFromBucketSpec(this._url,e):I$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,le.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,le.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dl(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new voe(Yj());{const o=function Moe(n,e,t,r,i,s,o=!0){const a=e$(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function Soe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function Aoe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function Doe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function Roe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new Coe(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,le.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const w$="@firebase/storage",T$="storage";function C$(n,e){return bae(n=(0,_t.m9)(n),e)}function Nae(n=(0,tr.getApp)(),e){n=(0,_t.m9)(n);const r=(0,tr._getProvider)(n,T$).getImmediate({identifier:e}),i=(0,_t.P0)("storage");return i&&A$(r,...i),r}function A$(n,e,t,r={}){!function Tae(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,_t.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Oae(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new bS(t,r,i,e,tr.SDK_VERSION)}!function kae(){(0,tr._registerComponent)(new $v.wA(T$,Oae,"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(w$,"0.12.5",""),(0,tr.registerVersion)(w$,"0.12.5","esm2017")}();class bI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class D${constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new bI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new bI(o,this,this._ref)):{next:t.next?o=>t.next(new bI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class S${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ra(e,this._service))}get items(){return this._delegate.items.map(e=>new Ra(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ra{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function xae(n,e){return v$(n,e)}(this._delegate,e);return new Ra(t,this.storage)}get root(){return new Ra(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ra(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new D$(function Cae(n,e,t){return function pae(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new g$(n,new zo(e),t)}(n=(0,_t.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=vs.RAW,r){this._throwIfRoot("putString");const i=_S(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new D$(new g$(this._delegate,new zo(i.data,!0),s),this)}listAll(){return function Rae(n){return function mae(n){const e={prefixes:[],items:[]};return _$(n,e).then(()=>e)}(n=(0,_t.m9)(n))}(this._delegate).then(e=>new S$(e,this.storage))}list(e){return function Sae(n,e){return y$(n=(0,_t.m9)(n),e)}(this._delegate,e||void 0).then(t=>new S$(t,this.storage))}getMetadata(){return function Aae(n){return function _ae(n){n._throwIfRoot("getMetadata");const e=u$(n.storage,n._location,Im());return n.storage.makeRequestWithTokens(e,so)}(n=(0,_t.m9)(n))}(this._delegate)}updateMetadata(e){return function Dae(n,e){return function yae(n,e){n._throwIfRoot("updateMetadata");const t=function Xoe(n,e,t,r){const s=Sa(e.fullServerUrl(),n.host,n._protocol),a=vS(t,r),u=n.maxOperationRetryTime,f=new qo(s,"PATCH",II(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=wm(e),f}(n.storage,n._location,e,Im());return n.storage.makeRequestWithTokens(t,so)}(n=(0,_t.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Mae(n){return vae(n=(0,_t.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Pae(n){return function Eae(n){n._throwIfRoot("deleteObject");const e=function Joe(n,e){const r=Sa(e.fullServerUrl(),n.host,n._protocol),a=new qo(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=wm(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,so)}(n=(0,_t.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Xj(e)}}class R${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(M$(e))throw Wh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ra(C$(this._delegate,e),this)}refFromURL(e){if(!M$(e))throw Wh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vi.makeFromUrl(e,this._delegate.host)}catch{throw Wh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ra(C$(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){A$(this._delegate,e,t,r)}}function M$(n){return/^[A-Za-z]+:\/\//.test(n)}function Uae(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new R$(t,r)}function P$(n){const e=function jae(n){return new pt(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(JO(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Re(t=>t.bytesTransferred/t.totalBytes*100))}}function TI(n){return{getDownloadURL:()=>k(void 0).pipe($F,je(()=>n.getDownloadURL()),Ni),getMetadata:()=>k(void 0).pipe($F,je(()=>n.getMetadata()),Ni),delete:()=>T(n.delete()),child:e=>TI(n.child(e)),updateMetadata:e=>T(n.updateMetadata(e)),put:(e,t)=>P$(n.put(e,t)),putString:(e,t,r)=>P$(n.putString(e,t,r)),list:e=>T(n.list(e)),listAll:()=>T(n.listAll())}}!function Bae(n){const e={TaskState:Vi,TaskEvent:iae,StringFormat:vs,Storage:R$,Reference:Ra};n.INTERNAL.registerComponent(new $v.wA("storage-compat",Uae,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(No.Z);const $ae=new Ee("angularfire2.storageBucket"),Hae=new Ee("angularfire2.storage.maxUploadRetryTime"),zae=new Ee("angularfire2.storage.maxOperationRetryTime"),qae=new Ee("angularfire2.storage.use-emulator");let Gae=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=jv(t,o,r);this.storage=HT(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),b=f;return b&&I.useEmulator(...b),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return TI(this.storage.ref(t))}refFromURL(t){return TI(this.storage.refFromURL(t))}upload(t,r,i){return TI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(fe(pg),fe(gg,8),fe($ae,8),fe(xs),fe(Nt),fe(nh),fe(Hae,8),fe(zae,8),fe(qae,8),fe(fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Wae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gn({type:n});static \u0275inj=Xt({})}return n})(),Kae=(()=>{class n{constructor(){No.Z.registerVersion("angularfire",gc.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[Gae],imports:[Wae]})}return n})();class TS{constructor(e){return e}}const x$="storage",CS=new Ee("angularfire2.storage-instances");function Yae(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new TS(r)}}const Xae={provide:class Zae{constructor(){return Bv(x$)}},deps:[[new br,CS]]},Jae={provide:TS,useFactory:function Qae(n,e){const t=jT(x$,n,e);return t&&new TS(t)},deps:[[new br,CS],Gh]};let ece=(()=>{class n{constructor(){(0,tr.registerVersion)("angularfire",gc.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gn({type:n});static \u0275inj=Xt({providers:[Jae,Xae]})}return n})();function tce(n,...e){return{ngModule:ece,providers:[{provide:CS,useFactory:Yae(n),multi:!0,deps:[Nt,ei,nh,sS,[new br,cS],[new br,fg],...e]}]}}const nce=$T(Nae,!0);let rce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=gn({type:n,bootstrap:[zre]});static#n=this.\u0275inj=Xt({imports:[LO,Ure,Bse,bK,nZ,sZ,vne,Kae,HY.initializeApp(Hj_firebase),Gse(()=>Wse(Hj_firebase)),roe(()=>ioe()),tce(()=>nce()),_re,mre]})}return n})();y7().bootstrapModule(rce).catch(n=>console.error(n))},106:(Is,or,et)=>{et.d(or,{Z:()=>ar});var M=et(58),De=et(537),O=et(534),ze=et(879);class Ut{constructor(ot,at){this._delegate=ot,this.firebase=at,(0,O._addComponent)(ot,new De.wA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ot,at=O._DEFAULT_ENTRY_NAME){var gr;this._delegate.checkDestroyed();const Cn=this._delegate.container.getProvider(ot);return!Cn.isInitialized()&&"EXPLICIT"===(null===(gr=Cn.getComponent())||void 0===gr?void 0:gr.instantiationMode)&&Cn.initialize(),Cn.getImmediate({identifier:at})}_removeServiceInstance(ot,at=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(at)}_addComponent(ot){(0,O._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,O._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const zn=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function kt(){const Dt=function cn(Dt){const ot={},at={__esModule:!0,initializeApp:function wt(ft,Ln={}){const _e=O.initializeApp(ft,Ln);if((0,M.r3)(ot,_e.name))return ot[_e.name];const fn=new Dt(_e,at);return ot[_e.name]=fn,fn},app:Cn,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function oi(ft){const Ln=ft.name,_e=Ln.replace("-compat","");if(O._registerComponent(ft)&&"PUBLIC"===ft.type){const fn=(tn=Cn())=>{if("function"!=typeof tn[_e])throw zn.create("invalid-app-argument",{appName:Ln});return tn[_e]()};void 0!==ft.serviceProps&&(0,M.ZB)(fn,ft.serviceProps),at[_e]=fn,Dt.prototype[_e]=function(...tn){return this._getService.bind(this,Ln).apply(this,ft.multipleInstances?tn:[])}}return"PUBLIC"===ft.type?at[_e]:null},removeApp:function gr(ft){delete ot[ft]},useAsService:function $t(ft,Ln){return"serverAuth"===Ln?null:Ln},modularAPIs:O}};function Cn(ft){if(!(0,M.r3)(ot,ft=ft||O._DEFAULT_ENTRY_NAME))throw zn.create("no-app",{appName:ft});return ot[ft]}return at.default=at,Object.defineProperty(at,"apps",{get:function qt(){return Object.keys(ot).map(ft=>ot[ft])}}),Cn.App=Dt,at}(Ut);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:kt,extendNamespace:function ot(at){(0,M.ZB)(Dt,at)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),Dt}(),Te=new ze.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){Te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&Te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ar=ge;!function Bt(Dt){(0,O.registerVersion)("@firebase/app-compat","0.2.35",Dt)}()},534:(Is,or,et)=>{et.r(or),et.d(or,{FirebaseError:()=>ze.ZR,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>Ci,_addComponent:()=>Wr,_addOrOverwriteComponent:()=>un,_apps:()=>qr,_clearComponents:()=>Hi,_components:()=>Dn,_getProvider:()=>qn,_isFirebaseApp:()=>Hs,_isFirebaseServerApp:()=>rn,_registerComponent:()=>Vr,_removeServiceInstance:()=>co,_serverApps:()=>Gr,deleteApp:()=>Gs,getApp:()=>lo,getApps:()=>ho,initializeApp:()=>qs,initializeServerApp:()=>uo,onLog:()=>T,registerVersion:()=>F,setLogLevel:()=>S});var M=et(861),De=et(537),O=et(879),ze=et(58);const Ut=(P,K)=>K.some(X=>P instanceof X);let Tn,zn;const ge=new WeakMap,Te=new WeakMap,qe=new WeakMap,ht=new WeakMap,Bt=new WeakMap;let ot={get(P,K,X){if(P instanceof IDBTransaction){if("done"===K)return Te.get(P);if("objectStoreNames"===K)return P.objectStoreNames||qe.get(P);if("store"===K)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return wt(P[K])},set:(P,K,X)=>(P[K]=X,!0),has:(P,K)=>P instanceof IDBTransaction&&("done"===K||"store"===K)||K in P};function Cn(P){return"function"==typeof P?function gr(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function kt(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...K){return P.apply(qt(this),K),wt(ge.get(this))}:function(...K){return wt(P.apply(qt(this),K))}:function(K,...X){const we=P.call(qt(this),K,...X);return qe.set(we,K.sort?K.sort():[K]),wt(we)}}(P):(P instanceof IDBTransaction&&function Dt(P){if(Te.has(P))return;const K=new Promise((X,we)=>{const ct=()=>{P.removeEventListener("complete",gt),P.removeEventListener("error",Et),P.removeEventListener("abort",Et)},gt=()=>{X(),ct()},Et=()=>{we(P.error||new DOMException("AbortError","AbortError")),ct()};P.addEventListener("complete",gt),P.addEventListener("error",Et),P.addEventListener("abort",Et)});Te.set(P,K)}(P),Ut(P,function cn(){return Tn||(Tn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,ot):P)}function wt(P){if(P instanceof IDBRequest)return function ar(P){const K=new Promise((X,we)=>{const ct=()=>{P.removeEventListener("success",gt),P.removeEventListener("error",Et)},gt=()=>{X(wt(P.result)),ct()},Et=()=>{we(P.error),ct()};P.addEventListener("success",gt),P.addEventListener("error",Et)});return K.then(X=>{X instanceof IDBCursor&&ge.set(X,P)}).catch(()=>{}),Bt.set(K,P),K}(P);if(ht.has(P))return ht.get(P);const K=Cn(P);return K!==P&&(ht.set(P,K),Bt.set(K,P)),K}const qt=P=>Bt.get(P),ft=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],_e=new Map;function fn(P,K){if(!(P instanceof IDBDatabase)||K in P||"string"!=typeof K)return;if(_e.get(K))return _e.get(K);const X=K.replace(/FromIndex$/,""),we=K!==X,ct=Ln.includes(X);if(!(X in(we?IDBIndex:IDBObjectStore).prototype)||!ct&&!ft.includes(X))return;const gt=function(){var Et=(0,M.Z)(function*(Yt,...St){const zi=this.transaction(Yt,ct?"readwrite":"readonly");let Zo=zi.store;return we&&(Zo=Zo.index(St.shift())),(yield Promise.all([Zo[X](...St),ct&&zi.done]))[0]});return function(St){return Et.apply(this,arguments)}}();return _e.set(K,gt),gt}!function at(P){ot=P(ot)}(P=>({...P,get:(K,X,we)=>fn(K,X)||P.get(K,X,we),has:(K,X)=>!!fn(K,X)||P.has(K,X)}));class tn{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function An(P){const K=P.getComponent();return"VERSION"===K?.type}(X)){const we=X.getImmediate();return`${we.library}/${we.version}`}return null}).filter(X=>X).join(" ")}}const bi="@firebase/app",Ti="0.10.5",pt=new O.Yd("@firebase/app"),Ci="[DEFAULT]",ss={[bi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},qr=new Map,Gr=new Map,Dn=new Map;function Wr(P,K){try{P.container.addComponent(K)}catch(X){pt.debug(`Component ${K.name} failed to register with FirebaseApp ${P.name}`,X)}}function un(P,K){P.container.addOrOverwriteComponent(K)}function Vr(P){const K=P.name;if(Dn.has(K))return pt.debug(`There were multiple attempts to register component ${K}.`),!1;Dn.set(K,P);for(const X of qr.values())Wr(X,P);for(const X of Gr.values())Wr(X,P);return!0}function qn(P,K){const X=P.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),P.container.getProvider(K)}function co(P,K,X=Ci){qn(P,K).clearInstance(X)}function Hs(P){return void 0!==P.options}function rn(P){return void 0!==P.settings}function Hi(){Dn.clear()}const Gn=new ze.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mr{constructor(K,X,we){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=we,this.container.addComponent(new De.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}class Sn extends mr{constructor(K,X,we,ct){const gt=void 0!==X.automaticDataCollectionEnabled&&X.automaticDataCollectionEnabled,Et={name:we,automaticDataCollectionEnabled:gt};super(void 0!==K.apiKey?K:K.options,Et,ct),this._serverConfig=Object.assign({automaticDataCollectionEnabled:gt},X),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,X.releaseOnDeref=void 0,F(bi,Ti,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(K){this.isDeleted||(this._refCount++,void 0!==K&&this._finalizationRegistry.register(K,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Gs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Gn.create("server-app-deleted")}}const Ur="10.12.2";function qs(P,K={}){let X=P;"object"!=typeof K&&(K={name:K});const we=Object.assign({name:Ci,automaticDataCollectionEnabled:!1},K),ct=we.name;if("string"!=typeof ct||!ct)throw Gn.create("bad-app-name",{appName:String(ct)});if(X||(X=(0,ze.aH)()),!X)throw Gn.create("no-options");const gt=qr.get(ct);if(gt){if((0,ze.vZ)(X,gt.options)&&(0,ze.vZ)(we,gt.config))return gt;throw Gn.create("duplicate-app",{appName:ct})}const Et=new De.H0(ct);for(const St of Dn.values())Et.addComponent(St);const Yt=new mr(X,we,Et);return qr.set(ct,Yt),Yt}function uo(P,K){if((0,ze.jU)())throw Gn.create("invalid-server-app-environment");let X;void 0===K.automaticDataCollectionEnabled&&(K.automaticDataCollectionEnabled=!1),X=Hs(P)?P.options:P;const we=Object.assign(Object.assign({},K),X);if(void 0!==we.releaseOnDeref&&delete we.releaseOnDeref,void 0!==K.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Gn.create("finalization-registry-not-supported",{});const gt=""+(zi=JSON.stringify(we),[...zi].reduce((Zo,yn)=>Math.imul(31,Zo)+yn.charCodeAt(0)|0,0)),Et=Gr.get(gt);var zi;if(Et)return Et.incRefCount(K.releaseOnDeref),Et;const Yt=new De.H0(gt);for(const zi of Dn.values())Yt.addComponent(zi);const St=new Sn(X,K,gt,Yt);return Gr.set(gt,St),St}function lo(P=Ci){const K=qr.get(P);if(!K&&P===Ci&&(0,ze.aH)())return qs();if(!K)throw Gn.create("no-app",{appName:P});return K}function ho(){return Array.from(qr.values())}function Gs(P){return j.apply(this,arguments)}function j(){return(j=(0,M.Z)(function*(P){let K=!1;const X=P.name;qr.has(X)?(K=!0,qr.delete(X)):Gr.has(X)&&P.decRefCount()<=0&&(Gr.delete(X),K=!0),K&&(yield Promise.all(P.container.getProviders().map(we=>we.delete())),P.isDeleted=!0)})).apply(this,arguments)}function F(P,K,X){var we;let ct=null!==(we=ss[P])&&void 0!==we?we:P;X&&(ct+=`-${X}`);const gt=ct.match(/\s|\//),Et=K.match(/\s|\//);if(gt||Et){const Yt=[`Unable to register library "${ct}" with version "${K}":`];return gt&&Yt.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),gt&&Et&&Yt.push("and"),Et&&Yt.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void pt.warn(Yt.join(" "))}Vr(new De.wA(`${ct}-version`,()=>({library:ct,version:K}),"VERSION"))}function T(P,K){if(null!==P&&"function"!=typeof P)throw Gn.create("invalid-log-argument");(0,O.Am)(P,K)}function S(P){(0,O.Ub)(P)}const w="firebase-heartbeat-database",k=1,he="firebase-heartbeat-store";let xe=null;function je(){return xe||(xe=function oi(P,K,{blocked:X,upgrade:we,blocking:ct,terminated:gt}={}){const Et=indexedDB.open(P,K),Yt=wt(Et);return we&&Et.addEventListener("upgradeneeded",St=>{we(wt(Et.result),St.oldVersion,St.newVersion,wt(Et.transaction),St)}),X&&Et.addEventListener("blocked",St=>X(St.oldVersion,St.newVersion,St)),Yt.then(St=>{gt&&St.addEventListener("close",()=>gt()),ct&&St.addEventListener("versionchange",zi=>ct(zi.oldVersion,zi.newVersion,zi))}).catch(()=>{}),Yt}(w,k,{upgrade:(P,K)=>{if(0===K)try{P.createObjectStore(he)}catch(X){console.warn(X)}}}).catch(P=>{throw Gn.create("idb-open",{originalErrorMessage:P.message})})),xe}function xt(){return(xt=(0,M.Z)(function*(P){try{const X=(yield je()).transaction(he),we=yield X.objectStore(he).get(We(P));return yield X.done,we}catch(K){if(K instanceof ze.ZR)pt.warn(K.message);else{const X=Gn.create("idb-get",{originalErrorMessage:K?.message});pt.warn(X.message)}}})).apply(this,arguments)}function Ne(P,K){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,M.Z)(function*(P,K){try{const we=(yield je()).transaction(he,"readwrite");yield we.objectStore(he).put(K,We(P)),yield we.done}catch(X){if(X instanceof ze.ZR)pt.warn(X.message);else{const we=Gn.create("idb-set",{originalErrorMessage:X?.message});pt.warn(we.message)}}})).apply(this,arguments)}function We(P){return`${P.name}!${P.options.appId}`}class Kt{constructor(K){this.container=K,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new ka(X),this._heartbeatsCachePromise=this._storage.read().then(we=>(this._heartbeatsCache=we,we))}triggerHeartbeat(){var K=this;return(0,M.Z)(function*(){var X,we;const gt=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=tt();if((null!=(null===(X=K._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||(K._heartbeatsCache=yield K._heartbeatsCachePromise,null!=(null===(we=K._heartbeatsCache)||void 0===we?void 0:we.heartbeats)))&&K._heartbeatsCache.lastSentHeartbeatDate!==Et&&!K._heartbeatsCache.heartbeats.some(Yt=>Yt.date===Et))return K._heartbeatsCache.heartbeats.push({date:Et,agent:gt}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Yt=>{const St=new Date(Yt.date).valueOf();return Date.now()-St<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,M.Z)(function*(){var X;if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null==(null===(X=K._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||0===K._heartbeatsCache.heartbeats.length)return"";const we=tt(),{heartbeatsToSend:ct,unsentEntries:gt}=function Oa(P,K=1024){const X=[];let we=P.slice();for(const ct of P){const gt=X.find(Et=>Et.agent===ct.agent);if(gt){if(gt.dates.push(ct.date),Ko(X)>K){gt.dates.pop();break}}else if(X.push({agent:ct.agent,dates:[ct.date]}),Ko(X)>K){X.pop();break}we=we.slice(1)}return{heartbeatsToSend:X,unsentEntries:we}}(K._heartbeatsCache.heartbeats),Et=(0,ze.L)(JSON.stringify({version:2,heartbeats:ct}));return K._heartbeatsCache.lastSentHeartbeatDate=we,gt.length>0?(K._heartbeatsCache.heartbeats=gt,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Et})()}}function tt(){return(new Date).toISOString().substring(0,10)}class ka{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,ze.hl)()&&(0,ze.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,M.Z)(function*(){if(yield K._canUseIndexedDBPromise){const we=yield function st(P){return xt.apply(this,arguments)}(K.app);return we?.heartbeats?we:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(K){var X=this;return(0,M.Z)(function*(){var we;if(yield X._canUseIndexedDBPromise){const gt=yield X.read();return Ne(X.app,{lastSentHeartbeatDate:null!==(we=K.lastSentHeartbeatDate)&&void 0!==we?we:gt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var X=this;return(0,M.Z)(function*(){var we;if(yield X._canUseIndexedDBPromise){const gt=yield X.read();return Ne(X.app,{lastSentHeartbeatDate:null!==(we=K.lastSentHeartbeatDate)&&void 0!==we?we:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...K.heartbeats]})}})()}}function Ko(P){return(0,ze.L)(JSON.stringify({version:2,heartbeats:P})).length}!function ml(P){Vr(new De.wA("platform-logger",K=>new tn(K),"PRIVATE")),Vr(new De.wA("heartbeat",K=>new Kt(K),"PRIVATE")),F(bi,Ti,P),F(bi,Ti,"esm2017"),F("fire-js","")}("")},537:(Is,or,et)=>{et.d(or,{H0:()=>cn,wA:()=>O});var M=et(861),De=et(58);class O{constructor(ge,Te,qe){this.name=ge,this.instanceFactory=Te,this.type=qe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const ze="[DEFAULT]";class Ut{constructor(ge,Te){this.name=ge,this.container=Te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const Te=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(Te)){const qe=new De.BH;if(this.instancesDeferred.set(Te,qe),this.isInitialized(Te)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:Te});ht&&qe.resolve(ht)}catch{}}return this.instancesDeferred.get(Te).promise}getImmediate(ge){var Te;const qe=this.normalizeInstanceIdentifier(ge?.identifier),ht=null!==(Te=ge?.optional)&&void 0!==Te&&Te;if(!this.isInitialized(qe)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:qe})}catch(Bt){if(ht)return null;throw Bt}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function zn(kt){return"EAGER"===kt.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:ze})}catch{}for(const[Te,qe]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(Te);try{const Bt=this.getOrInitializeService({instanceIdentifier:ht});qe.resolve(Bt)}catch{}}}}clearInstance(ge=ze){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,M.Z)(function*(){const Te=Array.from(ge.instances.values());yield Promise.all([...Te.filter(qe=>"INTERNAL"in qe).map(qe=>qe.INTERNAL.delete()),...Te.filter(qe=>"_delete"in qe).map(qe=>qe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=ze){return this.instances.has(ge)}getOptions(ge=ze){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:Te={}}=ge,qe=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(qe))throw Error(`${this.name}(${qe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:qe,options:Te});for(const[Bt,ar]of this.instancesDeferred.entries())qe===this.normalizeInstanceIdentifier(Bt)&&ar.resolve(ht);return ht}onInit(ge,Te){var qe;const ht=this.normalizeInstanceIdentifier(Te),Bt=null!==(qe=this.onInitCallbacks.get(ht))&&void 0!==qe?qe:new Set;Bt.add(ge),this.onInitCallbacks.set(ht,Bt);const ar=this.instances.get(ht);return ar&&ge(ar,ht),()=>{Bt.delete(ge)}}invokeOnInitCallbacks(ge,Te){const qe=this.onInitCallbacks.get(Te);if(qe)for(const ht of qe)try{ht(ge,Te)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:Te={}}){let qe=this.instances.get(ge);if(!qe&&this.component&&(qe=this.component.instanceFactory(this.container,{instanceIdentifier:(kt=ge,kt===ze?void 0:kt),options:Te}),this.instances.set(ge,qe),this.instancesOptions.set(ge,Te),this.invokeOnInitCallbacks(qe,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,qe)}catch{}var kt;return qe||null}normalizeInstanceIdentifier(ge=ze){return this.component?this.component.multipleInstances?ge:ze:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class cn{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const Te=this.getProvider(ge.name);if(Te.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);Te.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const Te=new Ut(ge,this);return this.providers.set(ge,Te),Te}getProviders(){return Array.from(this.providers.values())}}},879:(Is,or,et)=>{et.d(or,{Am:()=>kt,Ub:()=>cn,Yd:()=>zn,in:()=>De});const M=[];var De=function(ge){return ge[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",ge}(De||{});const O={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},ze=De.INFO,Ut={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Tn=(ge,Te,...qe)=>{if(Te<ge.logLevel)return;const ht=(new Date).toISOString(),Bt=Ut[Te];if(!Bt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Te})`);console[Bt](`[${ht}]  ${ge.name}:`,...qe)};class zn{constructor(Te){this.name=Te,this._logLevel=ze,this._logHandler=Tn,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(Te){if(!(Te in De))throw new TypeError(`Invalid value "${Te}" assigned to \`logLevel\``);this._logLevel=Te}setLogLevel(Te){this._logLevel="string"==typeof Te?O[Te]:Te}get logHandler(){return this._logHandler}set logHandler(Te){if("function"!=typeof Te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Te}get userLogHandler(){return this._userLogHandler}set userLogHandler(Te){this._userLogHandler=Te}debug(...Te){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...Te),this._logHandler(this,De.DEBUG,...Te)}log(...Te){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...Te),this._logHandler(this,De.VERBOSE,...Te)}info(...Te){this._userLogHandler&&this._userLogHandler(this,De.INFO,...Te),this._logHandler(this,De.INFO,...Te)}warn(...Te){this._userLogHandler&&this._userLogHandler(this,De.WARN,...Te),this._logHandler(this,De.WARN,...Te)}error(...Te){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...Te),this._logHandler(this,De.ERROR,...Te)}}function cn(ge){M.forEach(Te=>{Te.setLogLevel(ge)})}function kt(ge,Te){for(const qe of M){let ht=null;Te&&Te.level&&(ht=O[Te.level]),qe.userLogHandler=null===ge?null:(Bt,ar,...Dt)=>{const ot=Dt.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch{return null}}).filter(at=>at).join(" ");ar>=(ht??Bt.logLevel)&&ge({level:De[ar].toLowerCase(),message:ot,args:Dt,type:Bt.name})}}}},365:(Is,or,et)=>{et.r(or);var M=et(861),De=et(106),O=et(35),ze=et(58),zn=(et(534),et(879),et(537));function cn(){return window}function Te(){return Te=(0,M.Z)(function*(T,S,w){var k;const{BuildInfo:he}=cn();(0,O.au)(S.sessionId,"AuthEvent did not contain a session ID");const xe=yield function at(T){return gr.apply(this,arguments)}(S.sessionId),je={};return(0,O.av)()?je.ibi=he.packageName:(0,O.aw)()?je.apn=he.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),he.displayName&&(je.appDisplayName=he.displayName),je.sessionId=xe,(0,O.ay)(T,w,S.type,void 0,null!==(k=S.eventId)&&void 0!==k?k:void 0,je)}),Te.apply(this,arguments)}function ht(){return(ht=(0,M.Z)(function*(T){const{BuildInfo:S}=cn(),w={};(0,O.av)()?w.iosBundleId=S.packageName:(0,O.aw)()?w.androidPackageName=S.packageName:(0,O.ax)(T,"operation-not-supported-in-this-environment"),yield(0,O.az)(T,w)})).apply(this,arguments)}function Dt(){return(Dt=(0,M.Z)(function*(T,S,w){const{cordova:k}=cn();let he=()=>{};try{yield new Promise((xe,je)=>{let st=null;function xt(){var We;xe();const _r=null===(We=k.plugins.browsertab)||void 0===We?void 0:We.close;"function"==typeof _r&&_r(),"function"==typeof w?.close&&w.close()}function Ne(){st||(st=window.setTimeout(()=>{je((0,O.aB)(T,"redirect-cancelled-by-user"))},2e3))}function Gt(){"visible"===document?.visibilityState&&Ne()}S.addPassiveListener(xt),document.addEventListener("resume",Ne,!1),(0,O.aw)()&&document.addEventListener("visibilitychange",Gt,!1),he=()=>{S.removePassiveListener(xt),document.removeEventListener("resume",Ne,!1),document.removeEventListener("visibilitychange",Gt,!1),st&&window.clearTimeout(st)}})}finally{he()}})).apply(this,arguments)}function gr(){return(gr=(0,M.Z)(function*(T){const S=function Cn(T){if((0,O.au)(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const S=new ArrayBuffer(T.length),w=new Uint8Array(S);for(let k=0;k<T.length;k++)w[k]=T.charCodeAt(k);return w}(T),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(he=>he.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class qt extends O.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function ft(T){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,M.Z)(function*(T){const S=yield tn()._get(An(T));return S&&(yield tn()._remove(An(T))),S})).apply(this,arguments)}function fn(){const T=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());T.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return T.join("")}function tn(){return(0,O.aE)(O.b)}function An(T){return(0,O.aF)("authEvent",T.config.apiKey,T.name)}function pt(T){if(!T?.includes("?"))return{};const[S,...w]=T.split("?");return(0,ze.zd)(w.join("?"))}const re=class ji{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const k=S._key();let he=w.eventManagers.get(k);return he||(he=new qt(S),w.eventManagers.set(k,he),w.attachCallbackListeners(S,he)),he})()}_openPopup(S){(0,O.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,k,he){var xe=this;return(0,M.Z)(function*(){!function ot(T){var S,w,k,he,xe,je,st,xt,Ne,Gt;const We=cn();(0,O.aC)("function"==typeof(null===(S=We?.universalLinks)||void 0===S?void 0:S.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aC)(typeof(null===(w=We?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aC)("function"==typeof(null===(xe=null===(he=null===(k=We?.cordova)||void 0===k?void 0:k.plugins)||void 0===he?void 0:he.browsertab)||void 0===xe?void 0:xe.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(xt=null===(st=null===(je=We?.cordova)||void 0===je?void 0:je.plugins)||void 0===st?void 0:st.browsertab)||void 0===xt?void 0:xt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(Gt=null===(Ne=We?.cordova)||void 0===Ne?void 0:Ne.InAppBrowser)||void 0===Gt?void 0:Gt.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const je=yield xe._initialize(S);yield je.initialized(),je.resetRedirect(),(0,O.aI)(),yield xe._originValidation(S);const st=function oi(T,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:fn(),postBody:null,tenantId:T.tenantId,error:(0,O.aB)(T,"no-auth-event")}}(S,k,he);yield function $t(T,S){return tn()._set(An(T),S)}(S,st);const xt=yield function ge(T,S,w){return Te.apply(this,arguments)}(S,st,w),Ne=yield function Bt(T){const{cordova:S}=cn();return new Promise(w=>{S.plugins.browsertab.isAvailable(k=>{let he=null;k?S.plugins.browsertab.openUrl(T):he=S.InAppBrowser.open(T,(0,O.aA)()?"_blank":"_system","location=yes"),w(he)})})}(xt);return function ar(T,S,w){return Dt.apply(this,arguments)}(S,je,Ne)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function qe(T){return ht.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:k,handleOpenURL:he,BuildInfo:xe}=cn(),je=setTimeout((0,M.Z)(function*(){yield ft(S),w.onEvent(oe())}),500),st=function(){var Gt=(0,M.Z)(function*(We){clearTimeout(je);const _r=yield ft(S);let Wo=null;_r&&We?.url&&(Wo=function _e(T,S){var w,k;const he=function Ti(T){const S=pt(T),w=S.link?decodeURIComponent(S.link):void 0,k=pt(w).link,he=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return pt(he).link||he||k||w||T}(S);if(he.includes("/__/auth/callback")){const xe=pt(he),je=xe.firebaseError?function bi(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(xe.firebaseError)):null,st=null===(k=null===(w=je?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],xt=st?(0,O.aB)(st):null;return xt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:he,postBody:null}}return null}(_r,We.url)),w.onEvent(Wo||oe())});return function(_r){return Gt.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,st);const xt=he,Ne=`${xe.packageName.toLowerCase()}://`;cn().handleOpenURL=function(){var Gt=(0,M.Z)(function*(We){if(We.toLowerCase().startsWith(Ne)&&st({url:We}),"function"==typeof xt)try{xt(We)}catch(_r){console.error(_r)}});return function(We){return Gt.apply(this,arguments)}}()}};function oe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aB)("no-auth-event")}}function Se(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function Re(T=(0,ze.z$)()){return!("file:"!==Se()&&"ionic:"!==Se()&&"capacitor:"!==Se()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){try{const T=self.localStorage,S=O.aN();if(T)return T.setItem(S,"1"),T.removeItem(S),!function nn(T=(0,ze.z$)()){return function Pt(){return(0,ze.w1)()&&11===document?.documentMode}()||function pn(T=(0,ze.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,ze.hl)()}catch{return Vn()&&(0,ze.hl)()}return!1}function Vn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ur(){return(function bt(){return"http:"===Se()||"https:"===Se()}()||(0,ze.ru)()||Re())&&!function $e(){return(0,ze.b$)()||(0,ze.UG)()}()&&cr()&&!Vn()}function Dr(){return Re()&&typeof document<"u"}function js(){return(js=(0,M.Z)(function*(){return!!Dr()&&new Promise(T=>{const S=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),T(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},$i=O.aC,ao="persistence";function Ci(T){return ss.apply(this,arguments)}function ss(){return(ss=(0,M.Z)(function*(T){yield T._initializationPromise;const S=Gr(),w=O.aF(ao,T.config.apiKey,T.name);S&&S.setItem(w,T._getPersistence())})).apply(this,arguments)}function Gr(){var T;try{return(null===(T=function is(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const Dn=O.aC;class Wr{constructor(){this.browserResolver=O.aE(O.k),this.cordovaResolver=O.aE(re),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,k,he){var xe=this;return(0,M.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openPopup(S,w,k,he)})()}_openRedirect(S,w,k,he){var xe=this;return(0,M.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openRedirect(S,w,k,he)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return Dr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function zr(){return js.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function un(T){return T.unwrap()}function qn(T){return Hs(T)}function Hs(T){const{_tokenResponse:S}=T instanceof ze.ZR?T.customData:T;if(!S)return null;if(!(T instanceof ze.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return O.P.credentialFromResult(T);const w=S.providerId;if(!w||w===O.p.PASSWORD)return null;let k;switch(w){case O.p.GOOGLE:k=O.X;break;case O.p.FACEBOOK:k=O.W;break;case O.p.GITHUB:k=O.Y;break;case O.p.TWITTER:k=O.$;break;default:const{oauthIdToken:he,oauthAccessToken:xe,oauthTokenSecret:je,pendingToken:st,nonce:xt}=S;return xe||je||he||st?st?w.startsWith("saml.")?O.aQ._create(w,st):O.N._fromParams({providerId:w,signInMethod:w,pendingToken:st,idToken:he,accessToken:xe}):new O.Z(w).credential({idToken:he,accessToken:xe,rawNonce:xt}):null}return T instanceof ze.ZR?k.credentialFromError(T):k.credentialFromResult(T)}function rn(T,S){return S.catch(w=>{throw w instanceof ze.ZR&&function co(T,S){var w;const k=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Gn(T,O.as(T,S));else if(k){const he=Hs(S),xe=S;he&&(xe.credential=he,xe.tenantId=k.tenantId||void 0,xe.email=k.email||void 0,xe.phoneNumber=k.phoneNumber||void 0)}}(T,w),w}).then(w=>{const he=w.user;return{operationType:w.operationType,credential:qn(w),additionalUserInfo:O.aq(w),user:mr.getOrCreate(he)}})}function Hi(T,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,M.Z)(function*(T,S){const w=yield S;return{verificationId:w.verificationId,confirm:k=>rn(T,w.confirm(k))}})).apply(this,arguments)}class Gn{constructor(S,w){this.resolver=w,this.auth=function Vr(T){return T.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return rn(un(this.auth),this.resolver.resolveSignIn(S))}}class mr{constructor(S){this._delegate=S,this.multiFactor=O.at(S)}static getOrCreate(S){return mr.USER_MAP.has(S)||mr.USER_MAP.set(S,new mr(S)),mr.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return rn(w.auth,O.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var k=this;return(0,M.Z)(function*(){return Hi(k.auth,O.l(k._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return rn(w.auth,O.d(w._delegate,S,Wr))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ci(O.aJ(w.auth)),O.g(w._delegate,S,Wr)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return rn(w.auth,O.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return Hi(this.auth,O.r(this._delegate,S,w))}reauthenticateWithPopup(S){return rn(this.auth,O.e(this._delegate,S,Wr))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield Ci(O.aJ(w.auth)),O.h(w._delegate,S,Wr)})()}sendEmailVerification(S){return O.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield O.ap(w._delegate,S),w})()}updateEmail(S){return O.al(this._delegate,S)}updatePassword(S){return O.am(this._delegate,S)}updatePhoneNumber(S){return O.u(this._delegate,S)}updateProfile(S){return O.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return O.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mr.USER_MAP=new WeakMap;const Sn=O.aC;let Ur=(()=>{class T{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:he}=w.options;Sn(he,"invalid-api-key",{appName:w.name}),Sn(he,"invalid-api-key",{appName:w.name});const xe=typeof window<"u"?Wr:void 0;this._delegate=k.initialize({options:{persistence:uo(he,w.name),popupRedirectResolver:xe}}),this._delegate._updateErrorMap(O.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){O.K(this._delegate,w,k)}applyActionCode(w){return O.a7(this._delegate,w)}checkActionCode(w){return O.a8(this._delegate,w)}confirmPasswordReset(w,k){return O.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var he=this;return(0,M.Z)(function*(){return rn(he._delegate,O.aa(he._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return O.af(this._delegate,w)}isSignInWithEmailLink(w){return O.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){Sn(ur(),w._delegate,"operation-not-supported-in-this-environment");const k=yield O.j(w._delegate,Wr);return k?rn(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function ue(T,S){(0,O.aJ)(T)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,k,he){const{next:xe,error:je,complete:st}=qs(w,k,he);return this._delegate.onAuthStateChanged(xe,je,st)}onIdTokenChanged(w,k,he){const{next:xe,error:je,complete:st}=qs(w,k,he);return this._delegate.onIdTokenChanged(xe,je,st)}sendSignInLinkToEmail(w,k){return O.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return O.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,M.Z)(function*(){let he;switch(function $s(T,S){$i(Object.values(jt).includes(S),T,"invalid-persistence-type"),(0,ze.b$)()?$i(S!==jt.SESSION,T,"unsupported-persistence-type"):(0,ze.UG)()?$i(S===jt.NONE,T,"unsupported-persistence-type"):Vn()?$i(S===jt.NONE||S===jt.LOCAL&&(0,ze.hl)(),T,"unsupported-persistence-type"):$i(S===jt.NONE||cr(),T,"unsupported-persistence-type")}(k._delegate,w),w){case jt.SESSION:he=O.a;break;case jt.LOCAL:he=(yield O.aE(O.i)._isAvailable())?O.i:O.b;break;case jt.NONE:he=O.U;break;default:return O.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(he)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return rn(this._delegate,O.a0(this._delegate))}signInWithCredential(w){return rn(this._delegate,O.a1(this._delegate,w))}signInWithCustomToken(w){return rn(this._delegate,O.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return rn(this._delegate,O.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return rn(this._delegate,O.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return Hi(this._delegate,O.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,M.Z)(function*(){return Sn(ur(),k._delegate,"operation-not-supported-in-this-environment"),rn(k._delegate,O.c(k._delegate,w,Wr))})()}signInWithRedirect(w){var k=this;return(0,M.Z)(function*(){return Sn(ur(),k._delegate,"operation-not-supported-in-this-environment"),yield Ci(k._delegate),O.f(k._delegate,w,Wr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return O.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=jt,T})();function qs(T,S,w){let k=T;"function"!=typeof T&&({next:k,error:S,complete:w}=T);const he=k;return{next:je=>he(je&&mr.getOrCreate(je)),error:S,complete:w}}function uo(T,S){const w=function qr(T,S){const w=Gr();if(!w)return[];const k=O.aF(ao,T,S);switch(w.getItem(k)){case jt.NONE:return[O.U];case jt.LOCAL:return[O.i,O.a];case jt.SESSION:return[O.a];default:return[]}}(T,S);if(typeof self<"u"&&!w.includes(O.i)&&w.push(O.i),typeof window<"u")for(const k of[O.b,O.a])w.includes(k)||w.push(k);return w.includes(O.U)||w.push(O.U),w}class lo{constructor(){this.providerId="phone",this._delegate=new O.P(un(De.Z.auth()))}static credential(S,w){return O.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}lo.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,lo.PROVIDER_ID=O.P.PROVIDER_ID;const ho=O.aC;class Gs{constructor(S,w,k=De.Z.app()){var he;ho(null===(he=k.options)||void 0===he?void 0:he.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new O.R(k.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(T){T.INTERNAL.registerComponent(new zn.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),k=S.getProvider("auth");return new Ur(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.V,FacebookAuthProvider:O.W,GithubAuthProvider:O.Y,GoogleAuthProvider:O.X,OAuthProvider:O.Z,SAMLAuthProvider:O._,PhoneAuthProvider:lo,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Gs,TwitterAuthProvider:O.$,Auth:Ur,AuthCredential:O.L,Error:ze.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.5.9")}(De.Z)},861:(Is,or,et)=>{function M(O,ze,Ut,Tn,zn,cn,kt){try{var ge=O[cn](kt),Te=ge.value}catch(qe){return void Ut(qe)}ge.done?ze(Te):Promise.resolve(Te).then(Tn,zn)}function De(O){return function(){var ze=this,Ut=arguments;return new Promise(function(Tn,zn){var cn=O.apply(ze,Ut);function kt(Te){M(cn,Tn,zn,kt,ge,"next",Te)}function ge(Te){M(cn,Tn,zn,kt,ge,"throw",Te)}kt(void 0)})}}et.d(or,{Z:()=>De})},582:(Is,or,et)=>{function ze(re,oe){var ue={};for(var de in re)Object.prototype.hasOwnProperty.call(re,de)&&oe.indexOf(de)<0&&(ue[de]=re[de]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(de=Object.getOwnPropertySymbols(re);me<de.length;me++)oe.indexOf(de[me])<0&&Object.prototype.propertyIsEnumerable.call(re,de[me])&&(ue[de[me]]=re[de[me]])}return ue}function qe(re,oe,ue,de){return new(ue||(ue=Promise))(function(ce,Se){function bt(Pt){try{$e(de.next(Pt))}catch(pn){Se(pn)}}function Re(Pt){try{$e(de.throw(Pt))}catch(pn){Se(pn)}}function $e(Pt){Pt.done?ce(Pt.value):function me(ce){return ce instanceof ue?ce:new ue(function(Se){Se(ce)})}(Pt.value).then(bt,Re)}$e((de=de.apply(re,oe||[])).next())})}function wt(re){return this instanceof wt?(this.v=re,this):new wt(re)}function qt(re,oe,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,de=ue.apply(re,oe||[]),ce=[];return me={},Se("next"),Se("throw"),Se("return"),me[Symbol.asyncIterator]=function(){return this},me;function Se(nn){de[nn]&&(me[nn]=function(cr){return new Promise(function(Vn,ur){ce.push([nn,cr,Vn,ur])>1||bt(nn,cr)})})}function bt(nn,cr){try{!function Re(nn){nn.value instanceof wt?Promise.resolve(nn.value.v).then($e,Pt):pn(ce[0][2],nn)}(de[nn](cr))}catch(Vn){pn(ce[0][3],Vn)}}function $e(nn){bt("next",nn)}function Pt(nn){bt("throw",nn)}function pn(nn,cr){nn(cr),ce.shift(),ce.length&&bt(ce[0][0],ce[0][1])}}function $t(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,oe=re[Symbol.asyncIterator];return oe?oe.call(re):(re=function Dt(re){var oe="function"==typeof Symbol&&Symbol.iterator,ue=oe&&re[oe],de=0;if(ue)return ue.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&de>=re.length&&(re=void 0),{value:re&&re[de++],done:!re}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ue={},de("next"),de("throw"),de("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function de(ce){ue[ce]=re[ce]&&function(Se){return new Promise(function(bt,Re){!function me(ce,Se,bt,Re){Promise.resolve(Re).then(function($e){ce({value:$e,done:bt})},Se)}(bt,Re,(Se=re[ce](Se)).done,Se.value)})}}}et.d(or,{FC:()=>qt,KL:()=>$t,_T:()=>ze,mG:()=>qe,qq:()=>wt}),"function"==typeof SuppressedError&&SuppressedError}},Is=>{Is(Is.s=440)}]);
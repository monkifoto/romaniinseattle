"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(os,Yn,Ge)=>{Ge.d(Yn,{$:()=>dm,A:()=>Ee,G:()=>Ft,K:()=>Ch,L:()=>No,N:()=>Wi,P:()=>Um,R:()=>Fm,U:()=>et,V:()=>Ta,W:()=>nl,X:()=>kh,Y:()=>Fh,Z:()=>Ct,_:()=>Oc,a:()=>Ma,a0:()=>hm,a1:()=>ul,a2:()=>Zr,a3:()=>gm,a4:()=>mm,a5:()=>_m,a6:()=>dl,a7:()=>XE,a8:()=>Pe,a9:()=>hn,aA:()=>Wu,aB:()=>Bt,aC:()=>fe,aD:()=>fs,aE:()=>Ae,aF:()=>St,aG:()=>bl,aH:()=>zm,aI:()=>mI,aJ:()=>un,aN:()=>Pa,aQ:()=>Kr,aa:()=>kc,ab:()=>Ca,ac:()=>Un,ad:()=>Aa,ae:()=>st,af:()=>Bn,ag:()=>Da,ah:()=>Fc,ak:()=>Lc,al:()=>Et,am:()=>XD,ap:()=>YE,aq:()=>Vr,as:()=>rS,at:()=>Tm,au:()=>Zt,av:()=>Po,aw:()=>Ke,ax:()=>yt,ay:()=>Ml,az:()=>Zm,b:()=>tI,c:()=>Bm,d:()=>Je,e:()=>jm,f:()=>xt,g:()=>ds,h:()=>yr,i:()=>rI,j:()=>yI,k:()=>n_,l:()=>us,m:()=>fS,p:()=>en,r:()=>Vm,s:()=>af,u:()=>Yr});var M=Ge(861),we=Ge(534),O=Ge(58),Ue=Ge(879),kt=Ge(582),_n=Ge(537);const en={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ft=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Xn=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new Ue.Yd("@firebase/auth");function yn(p,...l){nt.logLevel<=Ue.in.ERROR&&nt.error(`Auth (${we.SDK_VERSION}): ${p}`,...l)}function yt(p,...l){throw Rn(p,...l)}function Bt(p,...l){return Rn(p,...l)}function Wr(p,l,d){const g=Object.assign(Object.assign({},Xn()),{[l]:d});return new O.LL("auth","Firebase",g).create(l,{appName:p.name})}function Vt(p){return Wr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ct(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&yt(p,"argument-error"),Wr(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rn(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Tt.create(p,...l)}function fe(p,l,...d){if(!p)throw Rn(l,...d)}function sn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw yn(l),new Error(l)}function Zt(p,l){p||sn(l)}function vn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function di(){return"http:"===hi()||"https:"===hi()}function hi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ri{constructor(l,d){this.shortDelay=l,this.longDelay=d,Zt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(di()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(p,l){Zt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class re{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Ri(3e4,6e4);function he(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function se(p,l,d,g){return Te.apply(this,arguments)}function Te(){return(Te=(0,M.Z)(function*(p,l,d,g,v={}){return vt(p,v,(0,M.Z)(function*(){let C={},$={};g&&("GET"===l?$=g:C={body:JSON.stringify(g)});const J=(0,O.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),pe=yield p._getAdditionalHeaders();return pe["Content-Type"]="application/json",p.languageCode&&(pe["X-Firebase-Locale"]=p.languageCode),re.fetch()(on(p,p.config.apiHost,d,J),Object.assign({method:l,headers:pe,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function vt(p,l,d){return Me.apply(this,arguments)}function Me(){return(Me=(0,M.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},oe),l);try{const v=new Jn(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield C.json();if("needConfirmation"in $)throw Mn(p,"account-exists-with-different-credential",$);if(C.ok&&!("errorMessage"in $))return $;{const J=C.ok?$.errorMessage:$.error.message,[pe,Ne]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pe)throw Mn(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===pe)throw Mn(p,"email-already-in-use",$);if("USER_DISABLED"===pe)throw Mn(p,"user-disabled",$);const He=g[pe]||pe.toLowerCase().replace(/[_\s]+/g,"-");if(Ne)throw Wr(p,He,Ne);yt(p,He)}}catch(v){if(v instanceof O.ZR)throw v;yt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Le(p,l,d,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,M.Z)(function*(p,l,d,g,v={}){const C=yield se(p,l,d,g,v);return"mfaPendingCredential"in C&&yt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function on(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ee(p.config,v):`${p.config.apiScheme}://${v}`}function Qt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Bt(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Bt(p,l,g);return v.customData._tokenResponse=d,v}function er(p){return void 0!==p&&void 0!==p.getResponse}function mr(p){return void 0!==p&&void 0!==p.enterprise}class xr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return Qt(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function zi(){return(zi=(0,M.Z)(function*(p){return(yield se(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(p,l){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,M.Z)(function*(p,l){return se(p,"GET","/v2/recaptchaConfig",he(p,l))})).apply(this,arguments)}function Ss(){return(Ss=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function qi(){return(qi=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Nr(p,l){return Or.apply(this,arguments)}function Or(){return(Or=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function En(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ar(){return(Ar=(0,M.Z)(function*(p,l=!1){const d=(0,O.m9)(p),g=yield d.getIdToken(l),v=Gs(g);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,$=C?.sign_in_provider;return{claims:v,token:g,authTime:En(Fn(v.auth_time)),issuedAtTime:En(Fn(v.iat)),expirationTime:En(Fn(v.exp)),signInProvider:$||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Fn(p){return 1e3*Number(p)}function Gs(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return yn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,O.tV)(d);return v?JSON.parse(v):(yn("Failed to decode base64 JWT payload"),null)}catch(v){return yn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Rs(p){const l=Gs(p);return fe(l,"internal-error"),fe(typeof l.exp<"u","internal-error"),fe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Yt(p,l){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,M.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof O.ZR&&function Ms({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Ln{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,M.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,M.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class ar{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function In(p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,M.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield Yt(p,Nr(d,{idToken:g}));fe(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const $=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?Qs(C.providerUserInfo):[],J=function Zs(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,$),He=!!p.isAnonymous&&!(p.email&&C.passwordHash||J?.length),It={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:J,metadata:new ar(C.createdAt,C.lastLoginAt),isAnonymous:He};Object.assign(p,It)})).apply(this,arguments)}function Ks(){return(Ks=(0,M.Z)(function*(p){const l=(0,O.m9)(p);yield In(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Qs(p){return p.map(l=>{var{providerId:d}=l,g=(0,kt._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function B(){return(B=(0,M.Z)(function*(p,l){const d=yield vt(p,{},(0,M.Z)(function*(){const g=(0,O.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,$=on(p,v,"/v1/token",`key=${C}`),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",re.fetch()($,{method:"POST",headers:J,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,M.Z)(function*(p,l){return se(p,"POST","/v2/accounts:revokeToken",he(p,l))})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){fe(l.idToken,"internal-error"),fe(typeof l.idToken<"u","internal-error"),fe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Rs(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){fe(0!==l.length,"internal-error");const d=Rs(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,M.Z)(function*(){return d||!g.accessToken||g.isExpired?(fe(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,M.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:$}=yield function xs(p,l){return B.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number($))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,$=new S;return g&&(fe("string"==typeof g,"internal-error",{appName:l}),$.refreshToken=g),v&&(fe("string"==typeof v,"internal-error",{appName:l}),$.accessToken=v),C&&(fe("number"==typeof C,"internal-error",{appName:l}),$.expirationTime=C),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return sn("not implemented")}}function w(p,l){fe("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class k{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,kt._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new ar(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,M.Z)(function*(){const g=yield Yt(d,d.stsTokenManager.getToken(d.auth,l));return fe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function tn(p){return Ar.apply(this,arguments)}(this,l)}reload(){return function Ps(p){return Ks.apply(this,arguments)}(this)}_assign(l){this!==l&&(fe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new k(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,M.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield In(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(l.auth.app))return Promise.reject(Vt(l.auth));const d=yield l.getIdToken();return yield Yt(l,function Ws(p,l){return Ss.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,$,J,pe,Ne,He;const It=null!==(g=d.displayName)&&void 0!==g?g:void 0,Er=null!==(v=d.email)&&void 0!==v?v:void 0,Xr=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,Ol=null!==($=d.photoURL)&&void 0!==$?$:void 0,Rf=null!==(J=d.tenantId)&&void 0!==J?J:void 0,kl=null!==(pe=d._redirectEventId)&&void 0!==pe?pe:void 0,La=null!==(Ne=d.createdAt)&&void 0!==Ne?Ne:void 0,i_=null!==(He=d.lastLoginAt)&&void 0!==He?He:void 0,{uid:Ir,emailVerified:s_,isAnonymous:Mf,providerData:Gc,stsTokenManager:o_}=d;fe(Ir&&o_,l,"internal-error");const a_=S.fromJSON(this.name,o_);fe("string"==typeof Ir,l,"internal-error"),w(It,l.name),w(Er,l.name),fe("boolean"==typeof s_,l,"internal-error"),fe("boolean"==typeof Mf,l,"internal-error"),w(Xr,l.name),w(Ol,l.name),w(Rf,l.name),w(kl,l.name),w(La,l.name),w(i_,l.name);const Va=new k({uid:Ir,auth:l,email:Er,emailVerified:s_,displayName:It,isAnonymous:Mf,photoURL:Ol,phoneNumber:Xr,tenantId:Rf,stsTokenManager:a_,createdAt:La,lastLoginAt:i_});return Gc&&Array.isArray(Gc)&&(Va.providerData=Gc.map(Ua=>Object.assign({},Ua))),kl&&(Va._redirectEventId=kl),Va}static _fromIdTokenResponse(l,d,g=!1){return(0,M.Z)(function*(){const v=new S;v.updateFromServerResponse(d);const C=new k({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield In(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,M.Z)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?Qs(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||C?.length),J=new S;J.updateFromIdToken(g);const pe=new k({uid:v.localId,auth:l,stsTokenManager:J,isAnonymous:$}),Ne={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new ar(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(pe,Ne),pe})()}}const ue=new Map;function Ae(p){Zt(p instanceof Function,"Expected a class definition");let l=ue.get(p);return l?(Zt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,ue.set(p,l),l)}const et=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,M.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,M.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function St(p,l,d){return`firebase:${p}:${l}:${d}`}class De{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=St(this.userKey,v.apiKey,C),this.fullPersistenceKey=St("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,M.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?k._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,M.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,M.Z)(function*(){if(!d.length)return new De(Ae(et),l,g);const v=(yield Promise.all(d.map(function(){var Ne=(0,M.Z)(function*(He){if(yield He._isAvailable())return He});return function(He){return Ne.apply(this,arguments)}}()))).filter(Ne=>Ne);let C=v[0]||Ae(et);const $=St(g,l.config.apiKey,l.name);let J=null;for(const Ne of d)try{const He=yield Ne._get($);if(He){const It=k._fromJSON(l,He);Ne!==C&&(J=It),C=Ne;break}}catch{}const pe=v.filter(Ne=>Ne._shouldAllowMigration);return C._shouldAllowMigration&&pe.length?(C=pe[0],J&&(yield C._set($,J.toJSON())),yield Promise.all(d.map(function(){var Ne=(0,M.Z)(function*(He){if(He!==C)try{yield He._remove($)}catch{}});return function(He){return Ne.apply(this,arguments)}}())),new De(C,l,g)):new De(C,l,g)})()}}function jt(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(va(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(je(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Ea(l))return"Blackberry";if(Ia(l))return"Webos";if(cr(l))return"Safari";if((l.includes("chrome/")||Mo(l))&&!l.includes("edge/"))return"Chrome";if(Ke(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function je(p=(0,O.z$)()){return/firefox\//i.test(p)}function cr(p=(0,O.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Mo(p=(0,O.z$)()){return/crios\//i.test(p)}function va(p=(0,O.z$)()){return/iemobile/i.test(p)}function Ke(p=(0,O.z$)()){return/android/i.test(p)}function Ea(p=(0,O.z$)()){return/blackberry/i.test(p)}function Ia(p=(0,O.z$)()){return/webos/i.test(p)}function Po(p=(0,O.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Wu(p=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Q(p=(0,O.z$)()){return Po(p)||Ke(p)||Ia(p)||Ea(p)||/windows phone/i.test(p)||va(p)}function rt(p,l=[]){let d;switch(p){case"Browser":d=jt((0,O.z$)());break;case"Worker":d=`${jt((0,O.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${we.SDK_VERSION}/${g}`}class lt{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise(($,J)=>{try{$(l(C))}catch(pe){J(pe)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,M.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function qt(){return(qt=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v2/passwordPolicy",he(p,l))})).apply(this,arguments)}class xi{constructor(l){var d,g,v,C;const $=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,$,J;const pe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,pe),this.validatePasswordCharacterOptions(l,pe),pe.isValid&&(pe.isValid=null===(d=pe.meetsMinPasswordLength)||void 0===d||d),pe.isValid&&(pe.isValid=null===(g=pe.meetsMaxPasswordLength)||void 0===g||g),pe.isValid&&(pe.isValid=null===(v=pe.containsLowercaseLetter)||void 0===v||v),pe.isValid&&(pe.isValid=null===(C=pe.containsUppercaseLetter)||void 0===C||C),pe.isValid&&(pe.isValid=null===($=pe.containsNumericCharacter)||void 0===$||$),pe.isValid&&(pe.isValid=null===(J=pe.containsNonAlphanumericCharacter)||void 0===J||J),pe}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class xo{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ys(this),this.idTokenSubscription=new Ys(this),this.beforeStateQueue=new lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Ae(d)),this._initializationPromise=this.queue((0,M.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield De.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,M.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,M.Z)(function*(){try{const g=yield Nr(d,{idToken:l}),v=yield k._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,M.Z)(function*(){var g;if((0,we._isFirebaseServerApp)(d.app)){const J=d.app.settings.authIdToken;return J?new Promise(pe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(J).then(pe,pe))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,$=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const J=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,pe=C?._redirectEventId,Ne=yield d.tryRedirectSignIn(l);(!J||J===pe)&&Ne?.user&&(C=Ne.user,$=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(C)}catch(J){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(J))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,M.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,M.Z)(function*(){try{yield In(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function As(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,M.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,M.Z)(function*(){if((0,we._isFirebaseServerApp)(d.app))return Promise.reject(Vt(d));const g=l?(0,O.m9)(l):null;return g&&fe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,M.Z)(function*(){if(!g._deleted)return l&&fe(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,M.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,M.Z)(function*(){return(0,we._isFirebaseServerApp)(l.app)?Promise.reject(Vt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,we._isFirebaseServerApp)(this.app)?Promise.reject(Vt(this)):this.queue((0,M.Z)(function*(){yield d.assertedPersistence.setPersistence(Ae(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,M.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,M.Z)(function*(){const d=yield function mt(p){return qt.apply(this,arguments)}(l),g=new xi(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new O.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,M.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,l){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,M.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,M.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Ae(l)||d._popupRedirectResolver;fe(g,d,"argument-error"),d.redirectPersistenceManager=yield De.create(d,[Ae(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,M.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,M.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,M.Z)(function*(){if(l===d.currentUser)return d.queue((0,M.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let $=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(J,this,"internal-error"),J.then(()=>{$||C(this.currentUser)}),"function"==typeof d){const pe=l.addObserver(d,g,v);return()=>{$=!0,pe()}}{const pe=l.addObserver(d);return()=>{$=!0,pe()}}}directlySetCurrentUser(l){var d=this;return(0,M.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,M.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,M.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function or(p,...l){nt.logLevel<=Ue.in.WARN&&nt.warn(`Auth (${we.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function un(p){return(0,O.m9)(p)}class Ys{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,O.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gu={loadJS:()=>(0,M.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tm(p){return Gu.loadJS(p)}function nm(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Xe{constructor(l){this.type="recaptcha-enterprise",this.auth=un(l)}verify(l="verify",d=!1){var g=this;return(0,M.Z)(function*(){function C(){return C=(0,M.Z)(function*(J){if(!d){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var pe=(0,M.Z)(function*(Ne,He){Lt(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const Er=new xr(It);return null==J.tenantId?J._agentRecaptchaConfig=Er:J._tenantRecaptchaConfigs[J.tenantId]=Er,Ne(Er.siteKey)}He(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{He(It)})});return function(Ne,He){return pe.apply(this,arguments)}}())}),C.apply(this,arguments)}function $(J,pe,Ne){const He=window.grecaptcha;mr(He)?He.enterprise.ready(()=>{He.enterprise.execute(J,{action:l}).then(It=>{pe(It)}).catch(()=>{pe("NO_RECAPTCHA")})}):Ne(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,pe)=>{(function v(J){return C.apply(this,arguments)})(g.auth).then(Ne=>{if(!d&&mr(window.grecaptcha))$(Ne,J,pe);else{if(typeof window>"u")return void pe(new Error("RecaptchaVerifier is only supported in browser"));let He=function qE(){return Gu.recaptchaEnterpriseScript}();0!==He.length&&(He+=Ne),tm(He).then(()=>{$(Ne,J,pe)}).catch(It=>{pe(It)})}}).catch(Ne=>{pe(Ne)})})})()}}function WE(p,l,d){return rm.apply(this,arguments)}function rm(){return(rm=(0,M.Z)(function*(p,l,d,g=!1){const v=new Xe(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const $=Object.assign({},l);return Object.assign($,g?{captchaResp:C}:{captchaResponse:C}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function Ku(p,l,d,g){return xe.apply(this,arguments)}function xe(){return xe=(0,M.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield WE(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,M.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield WE(p,l,d,"getOobCode"===d);return g(p,J)}return Promise.reject($)});return function($){return C.apply(this,arguments)}}())}),xe.apply(this,arguments)}function Ch(p,l,d){const g=un(p);fe(g._canInitEmulator,g,"emulator-config-failed"),fe(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=im(l),{host:$,port:J}=function Qu(p){const l=im(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:Dc(g.substr(C.length+1))}}{const[C,$]=g.split(":");return{host:C,port:Dc($)}}}(l);g.config.emulator={url:`${C}//${$}${null===J?"":`:${J}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:J,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Ah(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function im(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function Dc(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class No{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return sn("not implemented")}_getIdTokenResponse(l){return sn("not implemented")}_linkToIdToken(l,d){return sn("not implemented")}_getReauthenticationResolver(l){return sn("not implemented")}}function sm(p,l){return _t.apply(this,arguments)}function _t(){return(_t=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:resetPassword",he(p,l))})).apply(this,arguments)}function Yu(){return(Yu=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Gr(p,l){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Wt(){return(Wt=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",he(p,l))})).apply(this,arguments)}function ZD(p,l){return om.apply(this,arguments)}function om(){return(om=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPassword",he(p,l))})).apply(this,arguments)}function ye(p,l){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendOobCode",he(p,l))})).apply(this,arguments)}function Ju(){return(Ju=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function Rh(p,l){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function Ph(p,l){return am.apply(this,arguments)}function am(){return(am=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function cm(){return(cm=(0,M.Z)(function*(p,l){return ye(p,l)})).apply(this,arguments)}function um(){return(um=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}function Mc(){return(Mc=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithEmailLink",he(p,l))})).apply(this,arguments)}class Xs extends No{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new Xs(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new Xs(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,M.Z)(function*(){switch(d.signInMethod){case"password":return Ku(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ZD);case"emailLink":return function YD(p,l){return um.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:yt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,M.Z)(function*(){switch(g.signInMethod){case"password":return Ku(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gr);case"emailLink":return function Rc(p,l){return Mc.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:yt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Ns(p,l){return xh.apply(this,arguments)}function xh(){return(xh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithIdp",he(p,l))})).apply(this,arguments)}class Wi extends No{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new Wi(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):yt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,kt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new Wi(g,v);return $.idToken=C.idToken||void 0,$.accessToken=C.accessToken||void 0,$.secret=C.secret,$.nonce=C.nonce,$.pendingToken=C.pendingToken||null,$}_getIdTokenResponse(l){return Ns(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ns(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ns(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,O.xO)(d)}return l}}function Nh(){return(Nh=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:sendVerificationCode",he(p,l))})).apply(this,arguments)}function Oh(){return(Oh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l))})).apply(this,arguments)}function el(){return(el=(0,M.Z)(function*(p,l){const d=yield Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,l));if(d.temporaryProof)throw Mn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Oe={USER_NOT_FOUND:"user-not-found"};function Pc(){return(Pc=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Oe)})).apply(this,arguments)}class Gi extends No{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new Gi({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new Gi({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function Js(p,l){return Oh.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function le(p,l){return el.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function tl(p,l){return Pc.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new Gi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class xc{constructor(l){var d,g,v,C,$,J;const pe=(0,O.zd)((0,O.pd)(l)),Ne=null!==(d=pe.apiKey)&&void 0!==d?d:null,He=null!==(g=pe.oobCode)&&void 0!==g?g:null,It=function ZE(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=pe.mode)&&void 0!==v?v:null);fe(Ne&&He&&It,"argument-error"),this.apiKey=Ne,this.operation=It,this.code=He,this.continueUrl=null!==(C=pe.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==($=pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=pe.tenantId)&&void 0!==J?J:null}static parseLink(l){const d=function QE(p){const l=(0,O.zd)((0,O.pd)(p)).link,d=l?(0,O.zd)((0,O.pd)(l)).deep_link_id:null,g=(0,O.zd)((0,O.pd)(p)).deep_link_id;return(g?(0,O.zd)((0,O.pd)(g)).link:null)||g||d||l||p}(l);try{return new xc(d)}catch{return null}}}let Ta=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Xs._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=xc.parseLink(g);return fe(v,"argument-error"),Xs._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Hn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Fr extends Hn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Ct extends Fr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),Wi._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return fe(l.idToken||l.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Ct.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Ct.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:$,providerId:J}=l;if(!g&&!v&&!d&&!C||!J)return null;try{return new Ct(J)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:C})}catch{return null}}}let nl=(()=>{class p extends Fr{constructor(){super("facebook.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),kh=(()=>{class p extends Fr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Fh=(()=>{class p extends Fr{constructor(){super("github.com")}static credential(d){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Kr extends No{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return Ns(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Ns(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Ns(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Kr(g,C):null}static _create(l,d){return new Kr(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oc extends Hn{constructor(l){fe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Oc.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Oc.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Kr.fromJSON(l);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return Kr._create(g,d)}catch{return null}}}let dm=(()=>{class p extends Fr{constructor(){super("twitter.com")}static credential(d,g){return Wi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function rl(p,l){return il.apply(this,arguments)}function il(){return(il=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signUp",he(p,l))})).apply(this,arguments)}class pi{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,M.Z)(function*(){const C=yield k._fromIdTokenResponse(l,g,v),$=ba(g);return new pi({user:C,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,M.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=ba(g);return new pi({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function ba(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function hm(p){return sl.apply(this,arguments)}function sl(){return(sl=(0,M.Z)(function*(p){var l;if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const d=un(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new pi({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield rl(d,{returnSecureToken:!0}),v=yield pi._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class ol extends O.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,ol.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new ol(l,d,g,v)}}function Lh(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?ol._fromErrorAndOperation(p,C,l,g):C})}function fm(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function YE(p,l){return gi.apply(this,arguments)}function gi(){return gi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);yield cl(!0,d,l);const{providerUserInfo:g}=yield function fi(p,l){return qi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=fm(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),gi.apply(this,arguments)}function Vh(p,l){return al.apply(this,arguments)}function al(){return(al=(0,M.Z)(function*(p,l,d=!1){const g=yield Yt(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return pi._forOperation(p,"link",g)})).apply(this,arguments)}function cl(p,l,d){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,M.Z)(function*(p,l,d){yield In(l);const v=!1===p?"provider-already-linked":"no-such-provider";fe(fm(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function pm(p,l){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,M.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,we._isFirebaseServerApp)(g.app))return Promise.reject(Vt(g));const v="reauthenticate";try{const C=yield Yt(p,Lh(g,v,l,p),d);fe(C.idToken,g,"internal-error");const $=Gs(C.idToken);fe($,g,"internal-error");const{sub:J}=$;return fe(p.uid===J,g,"user-mismatch"),pi._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&yt(g,"user-mismatch"),C}})).apply(this,arguments)}function jh(p,l){return $h.apply(this,arguments)}function $h(){return($h=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g="signIn",v=yield Lh(p,g,l),C=yield pi._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ul(p,l){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,M.Z)(function*(p,l){return jh(un(p),l)})).apply(this,arguments)}function Zr(p,l){return zh.apply(this,arguments)}function zh(){return(zh=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);return yield cl(!1,d,l.providerId),Vh(d,l)})).apply(this,arguments)}function gm(p,l){return qh.apply(this,arguments)}function qh(){return(qh=(0,M.Z)(function*(p,l){return pm((0,O.m9)(p),l)})).apply(this,arguments)}function Wh(){return(Wh=(0,M.Z)(function*(p,l){return Le(p,"POST","/v1/accounts:signInWithCustomToken",he(p,l))})).apply(this,arguments)}function mm(p,l){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,M.Z)(function*(p,l){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const d=un(p),g=yield function Vn(p,l){return Wh.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield pi._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Gt.apply(this,arguments)}class ur{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?At._fromServerResponse(l,d):"totpInfo"in d?tr._fromServerResponse(l,d):yt(l,"internal-error")}}class At extends ur{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new At(d)}}class tr extends ur{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new tr(d)}}function lr(p,l,d){var g;fe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function to(p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,M.Z)(function*(p){const l=un(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function _m(p,l,d){return ll.apply(this,arguments)}function ll(){return(ll=(0,M.Z)(function*(p,l,d){const g=un(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&lr(g,v,d),yield Ku(g,v,"getOobCode",Rh)})).apply(this,arguments)}function dl(p,l,d){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,M.Z)(function*(p,l,d){yield sm((0,O.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&to(p),v});return function(v){return g.apply(this,arguments)}}())}),Gh.apply(this,arguments)}function XE(p,l){return dn.apply(this,arguments)}function dn(){return dn=(0,M.Z)(function*(p,l){yield function KD(p,l){return Wt.apply(this,arguments)}((0,O.m9)(p),{oobCode:l})}),dn.apply(this,arguments)}function Pe(p,l){return it.apply(this,arguments)}function it(){return(it=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),g=yield sm(d,{oobCode:l}),v=g.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(g.mfaInfo,d,"internal-error");default:fe(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=ur._fromServerResponse(un(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function hn(p,l){return mi.apply(this,arguments)}function mi(){return(mi=(0,M.Z)(function*(p,l){const{data:d}=yield Pe((0,O.m9)(p),l);return d.email})).apply(this,arguments)}function kc(p,l,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g=un(p),$=yield Ku(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rl).catch(pe=>{throw"auth/password-does-not-meet-requirements"===pe.code&&to(p),pe}),J=yield pi._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(J.user),J})).apply(this,arguments)}function Ca(p,l,d){return(0,we._isFirebaseServerApp)(p.app)?Promise.reject(Vt(p)):ul((0,O.m9)(p),Ta.credential(l,d)).catch(function(){var g=(0,M.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&to(p),v});return function(v){return g.apply(this,arguments)}}())}function Un(p,l,d){return as.apply(this,arguments)}function as(){return(as=(0,M.Z)(function*(p,l,d){const g=un(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C($,J){fe(J.handleCodeInApp,g,"argument-error"),J&&lr(g,$,J)})(v,d),yield Ku(g,v,"getOobCode",Ph)})).apply(this,arguments)}function Aa(p,l){const d=xc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function st(p,l,d){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g=(0,O.m9)(p),v=Ta.credentialWithLink(l,d||vn());return fe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ul(g,v)})).apply(this,arguments)}function no(){return(no=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:createAuthUri",he(p,l))})).apply(this,arguments)}function Bn(p,l){return ko.apply(this,arguments)}function ko(){return ko=(0,M.Z)(function*(p,l){const g={identifier:l,continueUri:di()?vn():"http://localhost"},{signinMethods:v}=yield function ym(p,l){return no.apply(this,arguments)}((0,O.m9)(p),g);return v||[]}),ko.apply(this,arguments)}function Da(p,l){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&lr(d.auth,v,l);const{email:C}=yield function Sh(p,l){return Ju.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),Oi.apply(this,arguments)}function Fc(p,l,d){return hl.apply(this,arguments)}function hl(){return hl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&lr(g.auth,C,d);const{email:$}=yield function QD(p,l){return cm.apply(this,arguments)}(g.auth,C);$!==p.email&&(yield p.reload())}),hl.apply(this,arguments)}function Ki(){return(Ki=(0,M.Z)(function*(p,l){return se(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Lc(p,l){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,M.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,O.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},$=yield Yt(g,function ro(p,l){return Ki.apply(this,arguments)}(g.auth,C));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const J=g.providerData.find(({providerId:pe})=>"password"===pe);J&&(J.displayName=g.displayName,J.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),Fo.apply(this,arguments)}function Et(p,l){const d=(0,O.m9)(p);return(0,we._isFirebaseServerApp)(d.auth.app)?Promise.reject(Vt(d.auth)):fl(d,l,null)}function XD(p,l){return fl((0,O.m9)(p),null,l)}function fl(p,l,d){return pl.apply(this,arguments)}function pl(){return pl=(0,M.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const $=yield Yt(p,function Dh(p,l){return Yu.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary($,!0)}),pl.apply(this,arguments)}class Os{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Lo extends Os{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Vc extends Os{constructor(l,d){super(l,"facebook.com",d)}}class _r extends Lo{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class JD extends Os{constructor(l,d){super(l,"google.com",d)}}class Qr extends Lo{constructor(l,d,g){super(l,"twitter.com",d,g)}}function Vr(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function cs(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(l=Gs(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new Os(C,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new Vc(C,v);case"github.com":return new _r(C,v);case"google.com":return new JD(C,v);case"twitter.com":return new Qr(C,v,p.screenName||null);case"custom":case"anonymous":return new Os(C,null);default:return new Os(C,g,v)}}(d)}class Ra{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new Ra("enroll",l,d)}static _fromMfaPendingCredential(l){return new Ra("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ra._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return Ra._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Im{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=un(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(J=>ur._fromServerResponse(g,J));fe(v.mfaPendingCredential,g,"internal-error");const $=Ra._fromMfaPendingCredential(v.mfaPendingCredential);return new Im($,C,function(){var J=(0,M.Z)(function*(pe){const Ne=yield pe._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const He=Object.assign(Object.assign({},v),{idToken:Ne.idToken,refreshToken:Ne.refreshToken});switch(d.operationType){case"signIn":const It=yield pi._fromIdTokenResponse(g,d.operationType,He);return yield g._updateCurrentUser(It.user),It;case"reauthenticate":return fe(d.user,g,"internal-error"),pi._forOperation(d.user,d.operationType,He);default:yt(g,"internal-error")}});return function(pe){return J.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,M.Z)(function*(){return d.signInResolver(l)})()}}function rS(p,l){var d;const g=(0,O.m9)(p),v=l;return fe(l.customData.operationType,g,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Im._fromError(g,v)}class wm{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ur._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new wm(l)}getSession(){var l=this;return(0,M.Z)(function*(){return Ra._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,M.Z)(function*(){const v=l,C=yield g.getSession(),$=yield Yt(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(l){var d=this;return(0,M.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield Yt(d.user,function aS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const gl=new WeakMap;function Tm(p){const l=(0,O.m9)(p);return gl.has(l)||gl.set(l,wm._fromUser(l)),gl.get(l)}const Qh="__sak";class eI{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const tI=(()=>{class p extends eI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cS(){const p=(0,O.z$)();return cr(p)||Po(p)}()&&function _e(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Q(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((J,pe,Ne)=>{this.notifyListeners(J,Ne)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(v);if(d.newValue!==J)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const J=this.storage.getItem(v);!g&&this.localCache[v]===J||this.notifyListeners(v,J)},$=this.storage.getItem(v);!function W(){return(0,O.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,M.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,M.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,M.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Ma=(()=>{class p extends eI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let bm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,M.Z)(function*(){const v=d,{eventId:C,eventType:$,data:J}=v.data,pe=g.handlersMap[$];if(!pe?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:$});const Ne=Array.from(pe).map(function(){var It=(0,M.Z)(function*(Er){return Er(v.origin,J)});return function(Er){return It.apply(this,arguments)}}()),He=yield function ki(p){return Promise.all(p.map(function(){var l=(0,M.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Ne);v.ports[0].postMessage({status:"done",eventId:C,eventType:$,response:He})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Pa(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class Cm{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,M.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let $,J;return new Promise((pe,Ne)=>{const He=Pa("",20);C.port1.start();const It=setTimeout(()=>{Ne(new Error("unsupported_event"))},g);J={messageChannel:C,onMessage(Er){const Xr=Er;if(Xr.data.eventId===He)switch(Xr.data.status){case"ack":clearTimeout(It),$=setTimeout(()=>{Ne(new Error("timeout"))},3e3);break;case"done":clearTimeout($),pe(Xr.data.response);break;default:clearTimeout(It),clearTimeout($),Ne(new Error("invalid_response"))}}},v.handlers.add(J),C.port1.addEventListener("message",J.onMessage),v.target.postMessage({eventType:l,eventId:He,data:d},[C.port2])}).finally(()=>{J&&v.removeMessageHandler(J)})})()}}function jn(){return window}function ml(){return typeof jn().WorkerGlobalScope<"u"&&"function"==typeof jn().importScripts}function Uc(){return(Uc=(0,M.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Jh="firebaseLocalStorageDb",so="firebaseLocalStorage",Uo="fbase_key";class xa{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function ef(p,l){return p.transaction([so],l?"readwrite":"readonly").objectStore(so)}function Sm(){const p=indexedDB.open(Jh,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(so,{keyPath:Uo})}catch(v){d(v)}}),p.addEventListener("success",(0,M.Z)(function*(){const g=p.result;g.objectStoreNames.contains(so)?l(g):(g.close(),yield function uS(){const p=indexedDB.deleteDatabase(Jh);return new xa(p).toPromise()}(),l(yield Sm()))}))})}function Rm(p,l,d){return tf.apply(this,arguments)}function tf(){return(tf=(0,M.Z)(function*(p,l,d){const g=ef(p,!0).put({[Uo]:l,value:d});return new xa(g).toPromise()})).apply(this,arguments)}function yl(){return(yl=(0,M.Z)(function*(p,l){const d=ef(p,!1).get(l),g=yield new xa(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function vl(p,l){const d=ef(p,!0).delete(l);return new xa(d).toPromise()}const rI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,M.Z)(function*(){return d.db||(d.db=yield Sm()),d.db})()}_withRetries(d){var g=this;return(0,M.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,M.Z)(function*(){return ml()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,M.Z)(function*(){d.receiver=bm._getInstance(function Dm(){return ml()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,M.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,M.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,M.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Xh(){return Uc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Cm(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,M.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Am(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Sm();return yield Rm(d,Qh,"1"),yield vl(d,Qh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,M.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,M.Z)(function*(){return v._withPendingWrite((0,M.Z)(function*(){return yield v._withRetries(C=>Rm(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,M.Z)(function*(){const v=yield g._withRetries(C=>function lS(p,l){return yl.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,M.Z)(function*(){return g._withPendingWrite((0,M.Z)(function*(){return yield g._withRetries(v=>vl(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,M.Z)(function*(){const g=yield d._withRetries($=>{const J=ef($,!1).getAll();return new xa(J).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:$,value:J}of g)C.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(J)&&(d.notifyListeners($,J),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!C.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),El=1e12;class xm{constructor(l){this.auth=l,this.counter=El,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new aI(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||El;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||El))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,M.Z)(function*(){var g;return null===(g=d._widgets.get(l||El))||void 0===g||g.execute(),""})()}}class aI{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nm(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rf=nm("rcb"),dS=new Ri(3e4,6e4);class cI{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=jn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return fe(function Bo(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&er(jn().grecaptcha)?Promise.resolve(jn().grecaptcha):new Promise((g,v)=>{const C=jn().setTimeout(()=>{v(Bt(l,"network-request-failed"))},dS.get());jn()[rf]=()=>{jn().clearTimeout(C),delete jn()[rf];const J=jn().grecaptcha;if(!J||!er(J))return void v(Bt(l,"internal-error"));const pe=J.render;J.render=(Ne,He)=>{const It=pe(Ne,He);return this.counter++,It},this.hostLanguage=d,g(J)},tm(`${function zD(){return Gu.recaptchaV2Script}()}?${(0,O.xO)({onload:rf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Bt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=jn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Om{load(l){return(0,M.Z)(function*(){return new xm(l)})()}clearedOneInstance(){}}const km="recaptcha",uI={theme:"light",type:"image"};class Fm{constructor(l,d,g=Object.assign({},uI)){this.parameters=g,this.type=km,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(l),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Om:new cI,this.validateStartingState()}verify(){var l=this;return(0,M.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const $=J=>{J&&(l.tokenChangeListeners.delete($),C(J))};l.tokenChangeListeners.add($),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=jn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,M.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,M.Z)(function*(){fe(di()&&!ml(),l.auth,"internal-error"),yield function Lm(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Ds(p){return zi.apply(this,arguments)}(l.auth);fe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sf{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=Gi._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function af(p,l,d){return cf.apply(this,arguments)}function cf(){return(cf=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g=un(p),v=yield Na(g,l,(0,O.m9)(d));return new sf(v,C=>ul(g,C))})).apply(this,arguments)}function us(p,l,d){return Il.apply(this,arguments)}function Il(){return(Il=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);yield cl(!1,g,"phone");const v=yield Na(g.auth,l,(0,O.m9)(d));return new sf(v,C=>Zr(g,C))})).apply(this,arguments)}function Vm(p,l,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Vt(g.auth));const v=yield Na(g.auth,l,(0,O.m9)(d));return new sf(v,C=>gm(g,C))})).apply(this,arguments)}function Na(p,l,d){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,M.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===km,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const $=C.session;if("phoneNumber"in C)return fe("enroll"===$.type,p,"internal-error"),(yield function iS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,l))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===$.type,p,"internal-error");const J=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return fe(J,p,"missing-multi-factor-info"),(yield function iI(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:start",he(p,l))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function wa(p,l){return Nh.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),Oa.apply(this,arguments)}function Yr(p,l){return uf.apply(this,arguments)}function uf(){return(uf=(0,M.Z)(function*(p,l){const d=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(d.auth.app))return Promise.reject(Vt(d.auth));yield Vh(d,l)})).apply(this,arguments)}let Um=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=un(d)}verifyPhoneNumber(d,g){return Na(this.auth,d,(0,O.m9)(g))}static credential(d,g){return Gi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Gi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Fi(p,l){return l?Ae(l):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Ur extends No{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Ns(l,this._buildIdpRequest())}_linkToIdToken(l,d){return Ns(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return Ns(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function lI(p){return jh(p.auth,new Ur(p),p.bypassAuthState)}function dI(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),pm(d,new Ur(p),p.bypassAuthState)}function hI(p){return ls.apply(this,arguments)}function ls(){return(ls=(0,M.Z)(function*(p){const{auth:l,user:d}=p;return fe(d,l,"internal-error"),Vh(d,new Ur(p),p.bypassAuthState)})).apply(this,arguments)}class lf{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,M.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,M.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:$,error:J,type:pe}=l;if(J)return void d.reject(J);const Ne={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(pe)(Ne))}catch(He){d.reject(He)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return lI;case"linkViaPopup":case"linkViaRedirect":return hI;case"reauthViaPopup":case"reauthViaRedirect":return dI;default:yt(this.auth,"internal-error")}}resolve(l){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fI=new Ri(2e3,1e4);function Bm(p,l,d){return wl.apply(this,arguments)}function wl(){return(wl=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p,"operation-not-supported-in-this-environment"));const g=un(p);ct(p,l,Hn);const v=Fi(g,d);return new $m(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function jm(p,l,d){return df.apply(this,arguments)}function df(){return(df=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if((0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Bt(g.auth,"operation-not-supported-in-this-environment"));ct(g.auth,l,Hn);const v=Fi(g.auth,d);return new $m(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function Je(p,l,d){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ct(g.auth,l,Hn);const v=Fi(g.auth,d);return new $m(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let $m=(()=>{class p extends lf{constructor(d,g,v,C,$){super(d,g,C,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,M.Z)(function*(){const g=yield d.execute();return fe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,M.Z)(function*(){Zt(1===d.filter.length,"Popup operations only handle one event");const g=Pa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Bt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,fI.get())};d()}}return p.currentPopupAction=null,p})();const pI="pendingRedirect",Bc=new Map;class gI extends lf{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,M.Z)(function*(){let g=Bc.get(d.auth._key());if(!g){try{const C=(yield function Hm(p,l){return oo.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Bc.set(d.auth._key(),g)}return d.bypassAuthState||Bc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,M.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function oo(){return(oo=(0,M.Z)(function*(p,l){const d=ge(l),g=qm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function hf(p,l){return ff.apply(this,arguments)}function ff(){return(ff=(0,M.Z)(function*(p,l){return qm(p)._set(ge(l),"true")})).apply(this,arguments)}function mI(){Bc.clear()}function zm(p,l){Bc.set(p._key(),l)}function qm(p){return Ae(p._redirectPersistence)}function ge(p){return St(pI,p.config.apiKey,p.name)}function xt(p,l,d){return function _I(p,l,d){return pf.apply(this,arguments)}(p,l,d)}function pf(){return(pf=(0,M.Z)(function*(p,l,d){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g=un(p);ct(p,l,Hn),yield g._initializationPromise;const v=Fi(g,d);return yield hf(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function yr(p,l,d){return function Wm(p,l,d){return jo.apply(this,arguments)}(p,l,d)}function jo(){return(jo=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);if(ct(g.auth,l,Hn),(0,we._isFirebaseServerApp)(g.auth.app))return Promise.reject(Vt(g.auth));yield g.auth._initializationPromise;const v=Fi(g.auth,d);yield hf(v,g.auth);const C=yield hs(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function ds(p,l,d){return function gf(p,l,d){return jc.apply(this,arguments)}(p,l,d)}function jc(){return(jc=(0,M.Z)(function*(p,l,d){const g=(0,O.m9)(p);ct(g.auth,l,Hn),yield g.auth._initializationPromise;const v=Fi(g.auth,d);yield cl(!1,g,l.providerId),yield hf(v,g.auth);const C=yield hs(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function yI(p,l){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,M.Z)(function*(p,l){return yield un(p)._initializationPromise,bl(p,l,!1)})).apply(this,arguments)}function bl(p,l){return vr.apply(this,arguments)}function vr(){return(vr=(0,M.Z)(function*(p,l,d=!1){if((0,we._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const g=un(p),v=Fi(g,l),$=yield new gI(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,l)),$})).apply(this,arguments)}function hs(p){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,M.Z)(function*(p){const l=Pa(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class fs{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function vI(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mf(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!mf(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Bt(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Km(l))}saveEventToCache(l){this.cachedEventUids.add(Km(l)),this.lastProcessedEventTime=Date.now()}}function Km(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function mf({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function Zm(p){return $c.apply(this,arguments)}function $c(){return($c=(0,M.Z)(function*(p,l={}){return se(p,"GET","/v1/projects",l)})).apply(this,arguments)}const _f=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qm=/^https?/;function vf(){return(vf=(0,M.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield Zm(p);for(const d of l)try{if(Ym(d))return}catch{}yt(p,"unauthorized-domain")})).apply(this,arguments)}function Ym(p){const l=vn(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!Qm.test(d))return!1;if(_f.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Ef=new Ri(3e4,6e4);function If(){const p=jn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Hc=null;const wf=new Ri(5e3,15e3),EI="__/auth/iframe",II="emulator/auth/iframe",Br={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$o=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wn(p){const l=p.config;fe(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ee(l,II):`https://${p.config.authDomain}/${EI}`,g={apiKey:l.apiKey,appName:p.name,v:we.SDK_VERSION},v=$o.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,O.xO)(g).slice(1)}`}function Tf(){return Tf=(0,M.Z)(function*(p){const l=yield function Jm(p){return Hc=Hc||function Xm(p){return new Promise((l,d)=>{var g,v,C;function $(){If(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{If(),d(Bt(p,"network-request-failed"))},timeout:Ef.get()})}if(null!==(v=null===(g=jn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=jn().gapi)||void 0===C||!C.load){const J=nm("iframefcb");return jn()[J]=()=>{gapi.load?$():d(Bt(p,"network-request-failed"))},tm(`${function qD(){return Gu.gapiScript}()}?onload=${J}`).catch(pe=>d(pe))}$()}}).catch(l=>{throw Hc=null,l})}(p),Hc}(p),d=jn().gapi;return fe(d,p,"internal-error"),l.open({where:document.body,url:wn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Br,dontclear:!0},g=>new Promise(function(){var v=(0,M.Z)(function*(C,$){yield g.restyle({setHideOnLeave:!1});const J=Bt(p,"network-request-failed"),pe=jn().setTimeout(()=>{$(J)},wf.get());function Ne(){jn().clearTimeout(pe),C(g)}g.ping(Ne).then(Ne,()=>{$(J)})});return function(C,$){return v.apply(this,arguments)}}()))}),Tf.apply(this,arguments)}const TI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ks{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Sl="__/auth/handler",Rl="emulator/auth/handler",bf=encodeURIComponent("fac");function Ml(p,l,d,g,v,C){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,M.Z)(function*(p,l,d,g,v,C){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:we.SDK_VERSION,eventId:v};if(l instanceof Hn){l.setDefaultLanguage(p.languageCode),$.providerId=l.providerId||"",(0,O.xb)(l.getCustomParameters())||($.customParameters=JSON.stringify(l.getCustomParameters()));for(const[He,It]of Object.entries(C||{}))$[He]=It}if(l instanceof Fr){const He=l.getScopes().filter(It=>""!==It);He.length>0&&($.scopes=He.join(","))}p.tenantId&&($.tid=p.tenantId);const J=$;for(const He of Object.keys(J))void 0===J[He]&&delete J[He];const pe=yield p._getAppCheckToken(),Ne=pe?`#${bf}=${encodeURIComponent(pe)}`:"";return`${function AI({config:p}){return p.emulator?ee(p,Rl):`https://${p.authDomain}/${Sl}`}(p)}?${(0,O.xO)(J).slice(1)}${Ne}`})).apply(this,arguments)}const ao="webStorageSupport",n_=class zc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ma,this._completeRedirectFn=bl,this._overrideRedirectResult=zm}_openPopup(l,d,g,v){var C=this;return(0,M.Z)(function*(){var $;Zt(null===($=C.eventManagers[l._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield Ml(l,d,g,vn(),v);return function CI(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let J="";const pe=Object.assign(Object.assign({},TI),{width:g.toString(),height:v.toString(),top:C,left:$}),Ne=(0,O.z$)().toLowerCase();d&&(J=Mo(Ne)?"_blank":d),je(Ne)&&(l=l||"http://localhost",pe.scrollbars="yes");const He=Object.entries(pe).reduce((Er,[Xr,Ol])=>`${Er}${Xr}=${Ol},`,"");if(function x(p=(0,O.z$)()){var l;return Po(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Ne)&&"_self"!==J)return function Dl(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",J),new ks(null);const It=window.open(l||"",J,He);fe(It,p,"popup-blocked");try{It.focus()}catch{}return new ks(It)}(l,J,Pa())})()}_openRedirect(l,d,g,v){var C=this;return(0,M.Z)(function*(){return yield C._originValidation(l),function Yh(p){jn().location.href=p}(yield Ml(l,d,g,vn(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(Zt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,M.Z)(function*(){const g=yield function wI(p){return Tf.apply(this,arguments)}(l),v=new fs(l);return g.register("authEvent",C=>(fe(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(ao,{type:ao},v=>{var C;const $=null===(C=v?.[0])||void 0===C?void 0:C[ao];void 0!==$&&d(!!$),yt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function yf(p){return vf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Q()||cr()||Po()}};class hS{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return sn("unexpected MultiFactorSessionType")}}}class qc extends hS{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new qc(l)}_finalizeEnroll(l,d,g){return function sS(p,l){return se(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function Mm(p,l){return se(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fS=(()=>{class p{constructor(){}static assertion(d){return qc._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var xl="@firebase/auth";class SI{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,M.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function HD(p){Gu=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=Bt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function ps(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Df(p){(0,we._registerComponent)(new _n.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=g.options;fe($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const pe={apiKey:$,authDomain:J,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(p)},Ne=new xo(g,v,C,pe);return function GE(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Ae);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Ne,d),Ne},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,we._registerComponent)(new _n.wA("auth-internal",l=>{const d=un(l.getProvider("auth").getImmediate());return new SI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,we.registerVersion)(xl,"1.7.4",function Wc(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,we.registerVersion)(xl,"1.7.4","esm2017")}("Browser")},58:(os,Yn,Ge)=>{Ge.d(Yn,{BH:()=>Wr,G6:()=>Ri,L:()=>Pt,LL:()=>se,P0:()=>yn,Pz:()=>Bt,Sg:()=>Vt,UG:()=>fe,ZB:()=>Be,ZR:()=>he,aH:()=>yt,b$:()=>vn,eu:()=>re,hl:()=>ee,jU:()=>sn,m9:()=>xs,ne:()=>Nr,pd:()=>fi,r3:()=>er,ru:()=>Zt,tV:()=>de,uI:()=>Rn,vZ:()=>zi,w1:()=>hi,xO:()=>Ws,xb:()=>xr,z$:()=>ct,zd:()=>Ss});const Ue=function(B){const F=[];let b=0;for(let S=0;S<B.length;S++){let w=B.charCodeAt(S);w<128?F[b++]=w:w<2048?(F[b++]=w>>6|192,F[b++]=63&w|128):55296==(64512&w)&&S+1<B.length&&56320==(64512&B.charCodeAt(S+1))?(w=65536+((1023&w)<<10)+(1023&B.charCodeAt(++S)),F[b++]=w>>18|240,F[b++]=w>>12&63|128,F[b++]=w>>6&63|128,F[b++]=63&w|128):(F[b++]=w>>12|224,F[b++]=w>>6&63|128,F[b++]=63&w|128)}return F},_n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let w=0;w<B.length;w+=3){const k=B[w],ue=w+1<B.length,Ae=ue?B[w+1]:0,Fe=w+2<B.length,et=Fe?B[w+2]:0;let jt=(15&Ae)<<2|et>>6,je=63&et;Fe||(je=64,ue||(jt=64)),S.push(b[k>>2],b[(3&k)<<4|Ae>>4],b[jt],b[je])}return S.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(Ue(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let b=0,S=0;for(;b<B.length;){const w=B[b++];if(w<128)F[S++]=String.fromCharCode(w);else if(w>191&&w<224){const k=B[b++];F[S++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const Fe=((7&w)<<18|(63&B[b++])<<12|(63&B[b++])<<6|63&B[b++])-65536;F[S++]=String.fromCharCode(55296+(Fe>>10)),F[S++]=String.fromCharCode(56320+(1023&Fe))}else{const k=B[b++],ue=B[b++];F[S++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&ue)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const b=F?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let w=0;w<B.length;){const k=b[B.charAt(w++)],Ae=w<B.length?b[B.charAt(w)]:0;++w;const et=w<B.length?b[B.charAt(w)]:64;++w;const De=w<B.length?b[B.charAt(w)]:64;if(++w,null==k||null==Ae||null==et||null==De)throw new kn;S.push(k<<2|Ae>>4),64!==et&&(S.push(Ae<<4&240|et>>2),64!==De&&S.push(et<<6&192|De))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class kn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pt=function(B){return function(B){const F=Ue(B);return _n.encodeByteArray(F,!0)}(B).replace(/\./g,"")},de=function(B){try{return _n.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function Be(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const b in F)!F.hasOwnProperty(b)||!at(b)||(B[b]=Be(B[b],F[b]));return B}function at(B){return"__proto__"!==B}const nt=()=>{try{return function Ft(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&de(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},yn=B=>{const F=(B=>{var F,b;return null===(b=null===(F=nt())||void 0===F?void 0:F.emulatorHosts)||void 0===b?void 0:b[B]})(B);if(!F)return;const b=F.lastIndexOf(":");if(b<=0||b+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const S=parseInt(F.substring(b+1),10);return"["===F[0]?[F.substring(1,b-1),S]:[F.substring(0,b),S]},yt=()=>{var B;return null===(B=nt())||void 0===B?void 0:B.config},Bt=B=>{var F;return null===(F=nt())||void 0===F?void 0:F[`_${B}`]};class Wr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,b)=>{this.resolve=F,this.reject=b})}wrapCallback(F){return(b,S)=>{b?this.reject(b):this.resolve(S),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(b):F(b,S))}}}function Vt(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=F||"demo-project",w=B.iat||0,k=B.sub||B.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Pt(JSON.stringify({alg:"none",type:"JWT"})),Pt(JSON.stringify(ue)),""].join(".")}function ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Rn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function fe(){var B;const F=null===(B=nt())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function sn(){return"object"==typeof self&&self.self===self}function Zt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function vn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hi(){const B=ct();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ri(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((B,F)=>{try{let b=!0;const S="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(S);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(S),B(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var k;F((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(b){F(b)}})}class he extends Error{constructor(F,b,S){super(b),this.code=F,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(F,b,S){this.service=F,this.serviceName=b,this.errors=S}create(F,...b){const S=b[0]||{},w=`${this.service}/${F}`,k=this.errors[F],ue=k?function Te(B,F){return B.replace(vt,(b,S)=>{const w=F[S];return null!=w?String(w):`<${S}?>`})}(k,S):"Error";return new he(w,`${this.serviceName}: ${ue} (${w}).`,S)}}const vt=/\{\$([^}]+)}/g;function er(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function xr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function zi(B,F){if(B===F)return!0;const b=Object.keys(B),S=Object.keys(F);for(const w of b){if(!S.includes(w))return!1;const k=B[w],ue=F[w];if(Lt(k)&&Lt(ue)){if(!zi(k,ue))return!1}else if(k!==ue)return!1}for(const w of S)if(!b.includes(w))return!1;return!0}function Lt(B){return null!==B&&"object"==typeof B}function Ws(B){const F=[];for(const[b,S]of Object.entries(B))Array.isArray(S)?S.forEach(w=>{F.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):F.push(encodeURIComponent(b)+"="+encodeURIComponent(S));return F.length?"&"+F.join("&"):""}function Ss(B){const F={};return B.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[w,k]=S.split("=");F[decodeURIComponent(w)]=decodeURIComponent(k)}}),F}function fi(B){const F=B.indexOf("?");if(!F)return"";const b=B.indexOf("#",F);return B.substring(F,b>0?b:void 0)}function Nr(B,F){const b=new Or(B,F);return b.subscribe.bind(b)}class Or{constructor(F,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{F(this)}).catch(S=>{this.error(S)})}next(F){this.forEachObserver(b=>{b.next(F)})}error(F){this.forEachObserver(b=>{b.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,b,S){let w;if(void 0===F&&void 0===b&&void 0===S)throw new Error("Missing Observer.");w=function kr(B,F){if("object"!=typeof B||null===B)return!1;for(const b of F)if(b in B&&"function"==typeof B[b])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:b,complete:S},void 0===w.next&&(w.next=tn),void 0===w.error&&(w.error=tn),void 0===w.complete&&(w.complete=tn);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,F)}sendOne(F,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{b(this.observers[F])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function xs(B){return B&&B._delegate?B._delegate:B}},871:(os,Yn,Ge)=>{function M(n){return"function"==typeof n}function we(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=we(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{en(s)}catch(o){e=e??[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)en(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const _n=kt.EMPTY;function kn(n){return n instanceof kt||n&&"closed"in n&&M(n.remove)&&M(n.add)&&M(n.unsubscribe)}function en(n){M(n)?n():n.unsubscribe()}const Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},de={setTimeout(n,e,...t){const{delegate:r}=de;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=de;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ee(n){de.setTimeout(()=>{const{onUnhandledError:e}=Pt;if(!e)throw n;e(n)})}function Be(){}const at=Tt("C",void 0,void 0);function Tt(n,e,t){return{kind:n,value:e,error:t}}let tt=null;function nt(n){if(Pt.useDeprecatedSynchronousErrorHandling){const e=!tt;if(e&&(tt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=tt;if(tt=null,t)throw r}}else n()}class yn extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kn(e)&&e.add(this)):this.destination=sn}static create(e,t,r){return new Vt(e,t,r)}next(e){this.isStopped?fe(function Xn(n){return Tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fe(function Ft(n){return Tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fe(at,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function Bt(n,e){return yt.call(n,e)}class Wr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ct(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ct(r)}else ct(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ct(t)}}}class Vt extends yn{constructor(e,t,r){let i;if(super(),M(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Pt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bt(e.next,s),error:e.error&&Bt(e.error,s),complete:e.complete&&Bt(e.complete,s)}):i=e}this.destination=new Wr(i)}}function ct(n){Pt.useDeprecatedSynchronousErrorHandling?function or(n){Pt.useDeprecatedSynchronousErrorHandling&&tt&&(tt.errorThrown=!0,tt.error=n)}(n):Ee(n)}function fe(n,e){const{onStoppedNotification:t}=Pt;t&&de.setTimeout(()=>t(n,e))}const sn={closed:!0,next:Be,error:function Rn(n){throw n},complete:Be},Zt="function"==typeof Symbol&&Symbol.observable||"@@observable";function vn(n){return n}function hi(n){return 0===n.length?vn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ee(n){return n&&n instanceof yn||function Ri(n){return n&&M(n.next)&&M(n.error)&&M(n.complete)}(n)&&kn(n)}(t)?t:new Vt(t,r,i);return nt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=As(r))((i,s)=>{const o=new Vt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zt](){return this}pipe(...t){return hi(t)(this)}toPromise(t){return new(t=As(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function As(n){var e;return null!==(e=n??Pt.Promise)&&void 0!==e?e:Promise}const re=we(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let oe=(()=>{class n extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ce(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?_n:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ut;return t.source=this,t}}return n.create=(e,t)=>new ce(e,t),n})();class ce extends oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:_n}}function he(n){return M(n?.lift)}function se(n){return e=>{if(he(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new vt(n,e,t,r,i)}class vt extends yn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Me(n,e){return se((t,r)=>{let i=0;t.subscribe(Te(r,s=>{r.next(n.call(e,s,i++))}))})}var Le=Ge(582);const Dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function on(n){return M(n?.then)}function Qt(n){return M(n[Zt])}function Jn(n){return Symbol.asyncIterator&&M(n?.[Symbol.asyncIterator])}function Mn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const mr=function er(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xr(n){return M(n?.[mr])}function Ds(n){return(0,Le.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Le.qq)(t.read());if(i)return yield(0,Le.qq)(void 0);yield yield(0,Le.qq)(r)}}finally{t.releaseLock()}})}function zi(n){return M(n?.getReader)}function Lt(n){if(n instanceof ut)return n;if(null!=n){if(Qt(n))return function Mi(n){return new ut(e=>{const t=n[Zt]();if(M(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Dt(n))return function Ws(n){return new ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(on(n))return function Ss(n){return new ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ee)})}(n);if(Jn(n))return qi(n);if(xr(n))return function fi(n){return new ut(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(zi(n))return function Nr(n){return qi(Ds(n))}(n)}throw Mn(n)}function qi(n){return new ut(e=>{(function Or(n,e){var t,r,i,s;return(0,Le.mG)(this,void 0,void 0,function*(){try{for(t=(0,Le.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function En(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function tn(n,e,t=1/0){return M(e)?tn((r,i)=>Me((s,o)=>e(r,s,i,o))(Lt(n(r,i))),t):("number"==typeof e&&(t=e),se((r,i)=>function kr(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=R=>u<r?T(R):c.push(R),T=R=>{s&&e.next(R),u++;let P=!1;Lt(t(R,f++)).subscribe(Te(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){const H=c.shift();o?En(e,o,()=>T(H)):T(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(Te(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Ar(n=1/0){return tn(vn,n)}const Fn=new ut(n=>n.complete());function Pi(n){return n[n.length-1]}function Ln(n){return function Yt(n){return n&&M(n.schedule)}(Pi(n))?n.pop():void 0}function In(n,e=0){return se((t,r)=>{t.subscribe(Te(r,i=>En(r,n,()=>r.next(i),e),()=>En(r,n,()=>r.complete(),e),i=>En(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xs(n,e){if(!n)throw new Error("Iterable cannot be null");return new ut(t=>{En(t,e,()=>{const r=n[Symbol.asyncIterator]();En(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function F(n,e){if(null!=n){if(Qt(n))return function Ps(n,e){return Lt(n).pipe(Dr(e),In(e))}(n,e);if(Dt(n))return function Zs(n,e){return new ut(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(on(n))return function Ks(n,e){return Lt(n).pipe(Dr(e),In(e))}(n,e);if(Jn(n))return xs(n,e);if(xr(n))return function Qs(n,e){return new ut(t=>{let r;return En(t,e,()=>{r=n[mr](),En(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}(n,e);if(zi(n))return function B(n,e){return xs(Ds(n),e)}(n,e)}throw Mn(n)}(n,e):Lt(n)}function S(...n){const e=Ln(n),t=function ar(n,e){return"number"==typeof Pi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Lt(r[0]):Ar(t)(b(r,e)):Fn}class w extends oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return b(n,Ln(n))}function ue(n={}){const{connector:e=(()=>new oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},T=()=>{const R=o;I(),R?.unsubscribe()};return se((R,P)=>{u++,!m&&!f&&y();const H=c=c??e();P.add(()=>{u--,0===u&&!m&&!f&&(a=Ae(T,i))}),H.subscribe(P),!o&&u>0&&(o=new Vt({next:V=>H.next(V),error:V=>{m=!0,y(),a=Ae(I,t,V),H.error(V)},complete:()=>{f=!0,y(),a=Ae(I,r),H.complete()}}),Lt(R).subscribe(o))})(s)}}function Ae(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Vt({next:()=>{r.unsubscribe(),n()}});return Lt(e(...t)).subscribe(r)}function Fe(n,e){return se((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Te(r,c=>{i?.unsubscribe();let u=0;const f=s++;Lt(n(c,f)).subscribe(i=Te(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function et(n,e=vn){return n=n??St,se((t,r)=>{let i,s=!0;t.subscribe(Te(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function St(n,e){return n===e}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function je(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(je).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Mo=De({__forward_ref__:De});function va(n){return n.__forward_ref__=va,n.toString=function(){return je(this())},n}function Ke(n){return Ea(n)?n():n}function Ea(n){return"function"==typeof n&&n.hasOwnProperty(Mo)&&n.__forward_ref__===va}function Ia(n){return n&&!!n.\u0275providers}const Wu="https://g.co/ng/security#xss";class x extends Error{constructor(e,t){super(function W(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Q(n){return"string"==typeof n?n:null==n?"":String(n)}function qt(n,e){throw new x(-201,!1)}function Ni(n,e){null==n&&function Xe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zu(n){return Ch(n,Dc)||Ch(n,No)}function Ch(n,e){return n.hasOwnProperty(e)?n[e]:null}function Qu(n){return n&&(n.hasOwnProperty(Ah)||n.hasOwnProperty(sm))?n[Ah]:null}const Dc=De({\u0275prov:De}),Ah=De({\u0275inj:De}),No=De({ngInjectableDef:De}),sm=De({ngInjectorDef:De});var _t=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_t||{});let Dh;function Gr(n){const e=Dh;return Dh=n,e}function Xu(n,e,t){const r=Zu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&_t.Optional?null:void 0!==e?e:void qt(je(n))}const Wt=globalThis;class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Rc={},Mc="__NG_DI_FLAG__",Xs="ngTempTokenPath",xh=/\n/gm,Wi="__source";let wa;function Js(n){const e=wa;return wa=n,e}function Oh(n,e=_t.Default){if(void 0===wa)throw new x(-203,!1);return null===wa?Xu(n,void 0,e):wa.get(n,e&_t.Optional?null:void 0,e)}function le(n,e=_t.Default){return(function Yu(){return Dh}()||Oh)(Ke(n),e)}function Oe(n,e=_t.Default){return le(n,tl(e))}function tl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pc(n){const e=[];for(let t=0;t<n.length;t++){const r=Ke(n[t]);if(Array.isArray(r)){if(0===r.length)throw new x(900,!1);let i,s=_t.Default;for(let o=0;o<r.length;o++){const a=r[o],c=ZE(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(le(i,s))}else e.push(le(r))}return e}function Gi(n,e){return n[Mc]=e,n.prototype[Mc]=e,n}function ZE(n){return n[Mc]}function eo(n){return{toString:n}.toString()}var Ta=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ta||{}),Hn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Hn||{});const Fr={},Ct=[],nl=De({\u0275cmp:De}),kh=De({\u0275dir:De}),Fh=De({\u0275pipe:De}),lm=De({\u0275mod:De}),Kr=De({\u0275fac:De}),Nc=De({__NG_ELEMENT_ID__:De}),Oc=De({__NG_ENV_ID__:De});function dm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function rl(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];pi(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function il(n){return 3===n||4===n||6===n}function pi(n){return 64===n.charCodeAt(0)}function ba(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||hm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function hm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const sl="ng-template";function ol(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==dm(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Lh(n){return 4===n.type&&n.value!==sl}function fm(n,e,t){return e===(4!==n.type||t?n.value:sl)}function YE(n,e,t){let r=4;const i=n.attrs||[],s=function Uh(n){for(let e=0;e<n.length;e++)if(il(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!fm(n,c,t)||""===c&&1===e.length){if(gi(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!ol(n.attrs,u,t)){if(gi(r))return!1;o=!0}continue}const m=Vh(8&r?"class":c,i,Lh(n),t);if(-1===m){if(gi(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==dm(I,u,0)||2&r&&u!==y){if(gi(r))return!1;o=!0}}}}else{if(!o&&!gi(r)&&!gi(c))return!1;if(o&&gi(c))continue;o=!1,r=c|1&r}}return gi(r)||o}function gi(n){return 0==(1&n)}function Vh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function pm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function al(n,e,t=!1){for(let r=0;r<e.length;r++)if(YE(n,e[r],t))return!0;return!1}function jh(n,e){return n?":not("+e.trim()+")":e}function $h(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gi(o)&&(e+=jh(s,i),i=""),r=o,s=s||!gi(r);t++}return""!==i&&(e+=jh(s,i)),e}function Zr(n){return eo(()=>{const e=_m(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ta.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Hn.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""};ll(t);const r=n.dependencies;return t.directiveDefs=dl(r,!1),t.pipeDefs=dl(r,!0),t.id=function XE(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function gm(n){return At(n)||tr(n)}function qh(n){return null!==n}function Vn(n){return eo(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mm(n,e){if(null==n)return Fr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Gt(n){return eo(()=>{const e=_m(n);return ll(e),e})}function At(n){return n[nl]||null}function tr(n){return n[kh]||null}function lr(n){return n[Fh]||null}function Lr(n,e){const t=n[lm]||null;if(!t&&!0===e)throw new Error(`Type ${je(n)} does not have '\u0275mod' property.`);return t}function _m(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mm(n.inputs,e),outputs:mm(n.outputs)}}function ll(n){n.features?.forEach(e=>e(n))}function dl(n,e){if(!n)return null;const t=e?lr:gm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(qh)}const dn=0,Pe=1,it=2,hn=3,mi=4,kc=5,dr=6,Ca=7,Un=8,as=9,Aa=10,st=11,Oo=12,ym=13,no=14,Bn=15,ko=16,Da=17,Oi=18,Fc=19,hl=20,ro=21,Ki=22,Lc=23,Fo=24,Et=25,fl=1,pl=2,cs=7,Lo=9,_r=11;function Qr(n){return Array.isArray(n)&&"object"==typeof n[fl]}function Vr(n){return Array.isArray(n)&&!0===n[fl]}function vm(n){return 0!=(4&n.flags)}function Sa(n){return n.componentOffset>-1}function Kh(n){return 1==(1&n.flags)}function _i(n){return!!n.template}function Zh(n){return 0!=(512&n[it])}function Vo(n,e){return n.hasOwnProperty(Kr)?n[Kr]:null}let Sr=null,Ma=!1;function ki(n){const e=Sr;return Sr=n,e}const bm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Cm(n){if(!so(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Am(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ml(n){n.dirty=!0,function jn(n){if(void 0===n.liveConsumerNode)return;const e=Ma;Ma=!0;try{for(const t of n.liveConsumerNode)t.dirty||ml(t)}finally{Ma=e}}(n),n.consumerMarkedDirty?.(n)}function Xh(n){return n&&(n.nextProducerIndex=0),ki(n)}function Uc(n,e){if(ki(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(so(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)_l(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Am(n){Uo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Cm(t),r!==t.version))return!0}return!1}function Dm(n){if(Uo(n),so(n))for(let e=0;e<n.producerNode.length;e++)_l(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function _l(n,e){if(function xa(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Uo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)_l(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Uo(i),i.producerIndexOfThis[r]=e}}function so(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Uo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let yl=null;const Nm=()=>{},rf=(()=>({...bm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Nm}))();class cI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Bo(){return Om}function Om(n){return n.type.prototype.ngOnChanges&&(n.setInput=uI),km}function km(){const n=Lm(this),e=n?.current;if(e){const t=n.previous;if(t===Fr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uI(n,e,t,r){const i=this.declaredInputs[t],s=Lm(n)||function sf(n,e){return n[Fm]=e}(n,{previous:Fr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new cI(c&&c.currentValue,e,a===Fr),n[r]=e}Bo.ngInherit=!0;const Fm="__ngSimpleChanges__";function Lm(n){return n[Fm]||null}const us=function(n,e,t){};function Kt(n){for(;Array.isArray(n);)n=n[dn];return n}function Yr(n,e){return Kt(e[n.index])}function Um(n,e){return n.data[e]}function Ur(n,e){const t=e[n];return Qr(t)?t:t[dn]}function ls(n,e){return null==e?null:n[e]}function lf(n){n[Da]=0}function fI(n){1024&n[it]||(n[it]|=1024,wl(n,1))}function Bm(n){1024&n[it]&&(n[it]&=-1025,wl(n,-1))}function wl(n,e){let t=n[hn];if(null===t)return;t[kc]+=e;let r=t;for(t=t[hn];null!==t&&(1===e&&1===r[kc]||-1===e&&0===r[kc]);)t[kc]+=e,r=t,t=t[hn]}const Je={lFrame:Xm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hm(){return Je.bindingsEnabled}function ge(){return Je.lFrame.lView}function xt(){return Je.lFrame.tView}function yr(){let n=Wm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Wm(){return Je.lFrame.currentTNode}function ds(n,e){const t=Je.lFrame;t.currentTNode=n,t.isParent=e}function gf(){return Je.lFrame.isParent}function vr(){const n=Je.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ka(){return Je.lFrame.bindingIndex++}function vI(n,e){const t=Je.lFrame;t.bindingIndex=t.bindingRootIndex=n,$c(e)}function $c(n){Je.lFrame.currentDirectiveIndex=n}function yf(n){Je.lFrame.currentQueryIndex=n}function vf(n){const e=n[Pe];return 2===e.type?e.declTNode:1===e.type?n[dr]:null}function Ym(n,e,t){if(t&_t.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&_t.Host||(i=vf(s),null===i||(s=s[no],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Je.lFrame=If();return r.currentTNode=e,r.lView=n,!0}function Ef(n){const e=If(),t=n[Pe];Je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function If(){const n=Je.lFrame,e=null===n?null:n.child;return null===e?Xm(n):e}function Xm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Hc(){const n=Je.lFrame;return Je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Jm=Hc;function wf(){const n=Hc();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Br(){return Je.lFrame.selectedIndex}function $o(n){Je.lFrame.selectedIndex=n}function wn(){const n=Je.lFrame;return Um(n.tView,n.selectedIndex)}let t_=!0;function Al(){return t_}function ks(n){t_=n}function Dl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Sl(n,e,t){Ml(n,e,3,t)}function Rl(n,e,t,r){(3&n[it])===t&&Ml(n,e,t,r)}function bf(n,e){let t=n[it];(3&t)===e&&(t&=8191,t+=1,n[it]=t)}function Ml(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Da]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Da]+=65536),(a<s||-1==s)&&(AI(n,t,e,c),n[Da]=(4294901760&n[Da])+c+2),c++}function Pl(n,e){us(4,n,e);const t=ki(null);try{e.call(n)}finally{ki(t),us(5,n,e)}}function AI(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[it]>>13<n[Da]>>16&&(3&n[it])===e&&(n[it]+=8192,Pl(a,s)):Pl(a,s)}const ao=-1;class zc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function xl(n){return n!==ao}function Fa(n){return 32767&n}function Wc(n,e){let t=function SI(n){return n>>16}(n),r=e;for(;t>0;)r=r[no],t--;return r}let Df=!0;function Nl(n){const e=Df;return Df=n,e}const Sf=255,r_=5;let mS=0;const ps={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Pe];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(xl(i)){const o=Fa(i),a=Wc(i,e),c=a[Pe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=a_(i),null===r)return ao;if(t++,i=i[no],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ao}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Nc)&&(r=t[Nc]),null==r&&(r=t[Nc]=mS++);const i=r&Sf;e.data[n+(i>>r_)]|=1<<i}(n,e,t)}function J(n,e,t){if(t&_t.Optional||void 0!==n)return n;qt()}function pe(n,e,t,r){if(t&_t.Optional&&void 0===r&&(r=null),!(t&(_t.Self|_t.Host))){const i=n[as],s=Gr(void 0);try{return i?i.get(e,r,t&_t.Optional):Xu(e,r,t&_t.Optional)}finally{Gr(s)}}return J(r,0,t)}function Ne(n,e,t,r=_t.Default,i){if(null!==n){if(2048&e[it]&&!(r&_t.Self)){const o=function o_(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[it]&&!(512&o[it]);){const a=He(s,o,t,r|_t.Self,ps);if(a!==ps)return a;let c=s.parent;if(!c){const u=o[hl];if(u){const f=u.get(t,ps,r);if(f!==ps)return f}c=a_(o),o=o[no]}s=c}return i}(n,e,t,r,ps);if(o!==ps)return o}const s=He(n,e,t,r,ps);if(s!==ps)return s}return pe(e,t,r,i)}function He(n,e,t,r,i){const s=function Ol(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Nc)?n[Nc]:void 0;return"number"==typeof e?e>=0?e&Sf:s_:e}(t);if("function"==typeof s){if(!Ym(e,n,r))return r&_t.Host?J(i,0,r):pe(e,t,r,i);try{let o;if(o=s(r),null!=o||r&_t.Optional)return o;qt()}finally{Jm()}}else if("number"==typeof s){let o=null,a=g(n,e),c=ao,u=r&_t.Host?e[Bn][dr]:null;for((-1===a||r&_t.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==ao&&kl(r,!1)?(o=e[Pe],a=Fa(c),e=Wc(c,e)):a=-1);-1!==a;){const f=e[Pe];if(Rf(s,a,f.data)){const m=It(a,e,t,o,r,u);if(m!==ps)return m}c=e[a+8],c!==ao&&kl(r,e[Pe].data[a+8]===u)&&Rf(s,a,e)?(o=f,a=Fa(c),e=Wc(c,e)):a=-1}}return i}function It(n,e,t,r,i,s){const o=e[Pe],a=o.data[n+8],f=function Er(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<c&&t===T||I>=c&&T.type===t)return I}if(i){const I=o[c];if(I&&_i(I)&&I.type===t)return c}return null}(a,o,t,null==r?Sa(a)&&Df:r!=o&&0!=(3&a.type),i&_t.Host&&s===a);return null!==f?Xr(e,o,f,a):ps}function Xr(n,e,t,r){let i=n[t];const s=e.data;if(function n_(n){return n instanceof zc}(i)){const o=i;o.resolving&&function rt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Q(n)}(s[t]));const a=Nl(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Gr(o.injectImpl):null;Ym(n,r,_t.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function CI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Om(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Gr(u),Nl(a),o.resolving=!1,Jm()}}return i}function Rf(n,e,t){return!!(t[e+(n>>r_)]&1<<n)}function kl(n,e){return!(n&_t.Self||n&_t.Host&&e)}class Ir{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ne(this._tNode,this._lView,e,tl(r),t)}}function s_(){return new Ir(yr(),ge())}function Gc(n){return Ea(n)?()=>{const e=Gc(Ke(n));return e&&e()}:Vo(n)}function a_(n){const e=n[Pe],t=e.type;return 2===t?e.declTNode:1===t?n[dr]:null}const Fl="__parameters__";function Vl(n,e,t){return eo(()=>{const r=function RI(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(Fl)?c[Fl]:Object.defineProperty(c,Fl,{value:[]})[Fl];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Bl(n,e){n.forEach(t=>Array.isArray(t)?Bl(t,e):e(t))}function yS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function c_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const hr=Gi(Vl("Optional"),8),Nf=Gi(Vl("SkipSelf"),4);function p_(n){return 128==(128&n.flags)}var Ba=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ba||{});const kI=new Map;let r$=0;const LI="__ngContext__";function Jr(n,e){Qr(e)?(n[LI]=e[Fc],function s$(n){kI.set(n[Fc],n)}(e)):n[LI]=e}let VI;function UI(n,e){return VI(n,e)}function Ff(n){const e=n[hn];return Vr(e)?e[hn]:e}function US(n){return jS(n[Oo])}function BS(n){return jS(n[mi])}function jS(n){for(;null!==n&&!Vr(n);)n=n[mi];return n}function zl(n,e,t,r,i){if(null!=r){let s,o=!1;Vr(r)?s=r:Qr(r)&&(o=!0,r=r[dn]);const a=Kt(r);0===n&&null!==t?null==i?qS(e,t,a):Kc(e,t,a,i||null,!0):1===n&&null!==t?Kc(e,t,a,i||null,!0):2===n?function I_(n,e,t){const r=v_(n,e);r&&function b$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function D$(n,e,t,r,i){const s=t[cs];s!==Kt(t)&&zl(e,n,r,s,i);for(let a=_r;a<t.length;a++){const c=t[a];Vf(c[Pe],c,n,e,r,s)}}(e,n,s,t,i)}}function __(n,e,t){return n.createElement(e,t)}function HS(n,e){const t=n[Lo],r=t.indexOf(e);Bm(e),t.splice(r,1)}function y_(n,e){if(n.length<=_r)return;const t=_r+e,r=n[t];if(r){const i=r[ko];null!==i&&i!==n&&HS(i,r),e>0&&(n[t-1][mi]=r[mi]);const s=c_(n,_r+e);!function m$(n,e){Vf(n,e,e[st],2,null,null),e[dn]=null,e[dr]=null}(r[Pe],r);const o=s[Oi];null!==o&&o.detachView(s[Pe]),r[hn]=null,r[mi]=null,r[it]&=-129}return r}function jI(n,e){if(!(256&e[it])){const t=e[st];e[Lc]&&Dm(e[Lc]),e[Fo]&&Dm(e[Fo]),t.destroyNode&&Vf(n,e,t,3,null,null),function v$(n){let e=n[Oo];if(!e)return $I(n[Pe],n);for(;e;){let t=null;if(Qr(e))t=e[Oo];else{const r=e[_r];r&&(t=r)}if(!t){for(;e&&!e[mi]&&e!==n;)Qr(e)&&$I(e[Pe],e),e=e[hn];null===e&&(e=n),Qr(e)&&$I(e[Pe],e),t=e&&e[mi]}e=t}}(e)}}function $I(n,e){if(!(256&e[it])){e[it]&=-129,e[it]|=256,function T$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof zc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];us(4,a,c);try{c.call(a)}finally{us(5,a,c)}}else{us(4,i,s);try{s.call(i)}finally{us(5,i,s)}}}}}(n,e),function w$(n,e){const t=n.cleanup,r=e[Ca];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ca]=null);const i=e[ro];if(null!==i){e[ro]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Pe].type&&e[st].destroy();const t=e[ko];if(null!==t&&Vr(e[hn])){t!==e[hn]&&HS(t,e);const r=e[Oi];null!==r&&r.detachView(n)}!function o$(n){kI.delete(n[Fc])}(e)}}function HI(n,e,t){return function zS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[dn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Hn.None||s===Hn.Emulated)return null}return Yr(r,t)}}(n,e.parent,t)}function Kc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function qS(n,e,t){n.appendChild(e,t)}function WS(n,e,t,r,i){null!==r?Kc(n,e,t,r,i):qS(n,e,t)}function v_(n,e){return n.parentNode(e)}let zI,KI,T_,ZS=function KS(n,e,t){return 40&n.type?Yr(n,t):null};function E_(n,e,t,r){const i=HI(n,r,e),s=e[st],a=function GS(n,e,t){return ZS(n,e,t)}(r.parent||e[dr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)WS(s,i,t[c],a,!1);else WS(s,i,t,a,!1);void 0!==zI&&zI(s,r,e,t,i)}function Lf(n,e){if(null!==e){const t=e.type;if(3&t)return Yr(e,n);if(4&t)return qI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Lf(n,r);{const i=n[e.index];return Vr(i)?qI(-1,i):Kt(i)}}if(32&t)return UI(e,n)()||Kt(n[e.index]);{const r=YS(n,e);return null!==r?Array.isArray(r)?r[0]:Lf(Ff(n[Bn]),r):Lf(n,e.next)}}return null}function YS(n,e){return null!==e?n[Bn][dr].projection[e.projection]:null}function qI(n,e){const t=_r+n+1;if(t<e.length){const r=e[t],i=r[Pe].firstChild;if(null!==i)return Lf(r,i)}return e[cs]}function WI(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Jr(Kt(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)WI(n,e,t.child,r,i,s,!1),zl(e,n,i,a,s);else if(32&c){const u=UI(t,r);let f;for(;f=u();)zl(e,n,i,f,s);zl(e,n,i,a,s)}else 16&c?JS(n,e,r,t,i,s):zl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Vf(n,e,t,r,i,s){WI(t,r,n.firstChild,e,i,s,!1)}function JS(n,e,t,r,i,s){const o=t[Bn],c=o[dr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)zl(e,n,i,c[u],s);else{let u=c;const f=o[hn];p_(r)&&(u.flags|=128),WI(n,e,u,f,i,s,!0)}}function eR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function tR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&rl(n,e,r),null!==i&&eR(n,e,i),null!==s&&function R$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function iR(n){return function ZI(){if(void 0===T_&&(T_=null,Wt.trustedTypes))try{T_=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return T_}()?.createScriptURL(n)||n}class Zc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wu})`}}function Qi(n){return n instanceof Zc?n.changingThisBreaksApplicationSecurity:n}function co(n,e){const t=function U$(n){return n instanceof Zc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Wu})`)}return t===e}const K$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var jr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(jr||{});function Qc(n){const e=Bf();return e?e.sanitize(jr.URL,n)||"":co(n,"URL")?Qi(n):function b_(n){return(n=String(n)).match(K$)?n:"unsafe:"+n}(Q(n))}function hR(n){const e=Bf();if(e)return iR(e.sanitize(jr.RESOURCE_URL,n)||"");if(co(n,"ResourceURL"))return iR(Qi(n));throw new x(904,!1)}function Bf(){const n=ge();return n&&n[Aa].sanitizer}const jf=new ye("ENVIRONMENT_INITIALIZER"),pR=new ye("INJECTOR",-1),gR=new ye("INJECTOR_DEF_TYPES");class JI{get(e,t=Rc){if(t===Rc){const r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return t}}function oH(...n){return{\u0275providers:_R(0,n),\u0275fromNgModule:!0}}function _R(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Bl(e,o=>{const a=o;A_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&yR(i,s),t}function yR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];ew(i,s=>{e(s,r)})}}function A_(n,e,t,r){if(!(n=Ke(n)))return!1;let i=null,s=Qu(n);const o=!s&&At(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Qu(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)A_(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Bl(s.imports,f=>{A_(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&yR(u,e)}if(!a){const u=Vo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Ct},i),e({provide:gR,useValue:i,multi:!0},i),e({provide:jf,useValue:()=>le(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;ew(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function ew(n,e){for(let t of n)Ia(t)&&(t=t.\u0275providers),Array.isArray(t)?ew(t,e):e(t)}const aH=De({provide:String,useValue:De});function tw(n){return null!==n&&"object"==typeof n&&aH in n}function Yc(n){return"function"==typeof n}const nw=new ye("Set Injector scope."),D_={},uH={};let rw;function S_(){return void 0===rw&&(rw=new JI),rw}class ms{}class Gl extends ms{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sw(e,o=>this.processProvider(o)),this.records.set(pR,Kl(void 0,this)),i.has("environment")&&this.records.set(ms,Kl(void 0,this));const s=this.records.get(nw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(gR.multi,Ct,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Js(this),r=Gr(void 0);try{return e()}finally{Js(t),Gr(r)}}get(e,t=Rc,r=_t.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Oc))return e[Oc](this);r=tl(r);const s=Js(this),o=Gr(void 0);try{if(!(r&_t.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function pH(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&Zu(e);c=u&&this.injectableDefInScope(u)?Kl(iw(e),D_):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&_t.Self?S_():this.parent).get(e,t=r&_t.Optional&&t===Rc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Xs]=a[Xs]||[]).unshift(je(e)),s)throw a;return function QE(n,e,t,r){const i=n[Xs];throw e[Wi]&&i.unshift(e[Wi]),n.message=function xc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):je(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Xs]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Gr(o),Js(s)}}resolveInjectorInitializers(){const e=Js(this),t=Gr(void 0);try{const i=this.get(jf.multi,Ct,_t.Self);for(const s of i)s()}finally{Js(e),Gr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){let t=Yc(e=Ke(e))?e:Ke(e&&e.provide);const r=function dH(n){return tw(n)?Kl(void 0,n.useValue):Kl(function IR(n,e,t){let r;if(Yc(n)){const i=Ke(n);return Vo(i)||iw(i)}if(tw(n))r=()=>Ke(n.useValue);else if(function ER(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Pc(n.deps||[]));else if(function vR(n){return!(!n||!n.useExisting)}(n))r=()=>le(Ke(n.useExisting));else{const i=Ke(n&&(n.useClass||n.provide));if(!function hH(n){return!!n.deps}(n))return Vo(i)||iw(i);r=()=>new i(...Pc(n.deps))}return r}(n),D_)}(e);if(Yc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Kl(void 0,D_,!0),i.factory=()=>Pc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===D_&&(t.value=uH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function fH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ke(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function iw(n){const e=Zu(n),t=null!==e?e.factory:Vo(n);if(null!==t)return t;if(n instanceof ye)throw new x(204,!1);if(n instanceof Function)return function lH(n){const e=n.length;if(e>0)throw function xf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new x(204,!1);const t=function im(n){return n&&(n[Dc]||n[No])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new x(204,!1)}function Kl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function sw(n,e){for(const t of n)Array.isArray(t)?sw(t,e):t&&Ia(t)?sw(t.\u0275providers,e):e(t)}const R_=new ye("AppId",{providedIn:"root",factory:()=>gH}),gH="ng",wR=new ye("Platform Initializer"),_s=new ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TR=new ye("AnimationModuleType"),ow=new ye("CSP nonce",{providedIn:"root",factory:()=>function Wl(){if(void 0!==KI)return KI;if(typeof document<"u")return document;throw new x(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bR=(n,e,t)=>null;function pw(n,e,t=!1){return bR(n,e,t)}class CH{}class DR{}class DH{resolveComponentFactory(e){throw function AH(n){const e=Error(`No component factory found for ${je(n)}.`);return e.ngComponent=n,e}(e)}}let k_=(()=>{class n{static#e=this.NULL=new DH}return n})();function SH(){return Yl(yr(),ge())}function Yl(n,e){return new zo(Yr(n,e))}let zo=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=SH}return n})();class zf{}let F_=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function MH(){const n=ge(),t=Ur(yr().index,n);return(Qr(t)?t:n)[st]}()}return n})(),PH=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null})}return n})();class Xc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _w=new Xc("16.2.12"),yw={};function xR(n,e=null,t=null,r){const i=NR(n,e,t,r);return i.resolveInjectorInitializers(),i}function NR(n,e=null,t=null,r,i=new Set){const s=[t||Ct,oH(n)];return r=r||("object"==typeof n?void 0:je(n)),new Gl(s,e||S_(),r||null,i)}let ei=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Rc;static#t=this.NULL=new JI;static create(t,r){if(Array.isArray(t))return xR({name:""},r,t,"");{const i=t.name??"";return xR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=xe({token:n,providedIn:"any",factory:()=>le(pR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function Ew(n){return n.ngOriginalError}class Fs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ew(e);for(;t&&Ew(t);)t=Ew(t);return t||null}}function ww(n){return e=>{setTimeout(n,void 0,e)}}const yi=class VH extends oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=ww(s),i&&(i=ww(i)),o&&(o=ww(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}};function kR(...n){}class Rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yi(!1),this.onMicrotaskEmpty=new yi(!1),this.onStable=new yi(!1),this.onError=new yi(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function UH(){const n="function"==typeof Wt.requestAnimationFrame;let e=Wt[n?"requestAnimationFrame":"setTimeout"],t=Wt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function $H(n){const e=()=>{!function jH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bw(n),n.isCheckStableRunning=!0,Tw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function zH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return FR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),LR(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return FR(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),LR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,bw(n),Tw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,BH,kR,kR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const BH={};function Tw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function FR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LR(n){n._nesting--,Tw(n)}class HH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yi,this.onMicrotaskEmpty=new yi,this.onStable=new yi,this.onError=new yi}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const VR=new ye("",{providedIn:"root",factory:UR});function UR(){const n=Oe(Rt);let e=!0;return S(new ut(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ut(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ue()))}function qo(n){return n instanceof Function?n():n}let Cw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})();function qf(n){for(;n;){n[it]|=64;const e=Ff(n);if(Zh(n)&&!e)return n;n=e}return null}const zR=new ye("",{providedIn:"root",factory:()=>!1});let V_=null;function KR(n,e){return n[e]??YR()}function ZR(n,e){const t=YR();t.producerNode?.length&&(n[e]=V_,t.lView=n,V_=QR())}const ez={...bm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{qf(n.lView)},lView:null};function QR(){return Object.create(ez)}function YR(){return V_??=QR(),V_}const dt={};function fn(n){XR(xt(),ge(),Br()+n,!1)}function XR(n,e,t,r){if(!r)if(3==(3&e[it])){const s=n.preOrderCheckHooks;null!==s&&Sl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Rl(e,s,0,t)}$o(t)}function Ye(n,e=_t.Default){const t=ge();return null===t?le(n,e):Ne(yr(),t,Ke(n),e)}function U_(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[dn]=i,m[it]=140|r,(null!==u||n&&2048&n[it])&&(m[it]|=2048),lf(m),m[hn]=m[no]=n,m[Un]=t,m[Aa]=o||n&&n[Aa],m[st]=a||n&&n[st],m[as]=c||n&&n[as]||null,m[dr]=s,m[Fc]=function i$(){return r$++}(),m[Ki]=f,m[hl]=u,m[Bn]=2==e.type?n[Bn]:m,m}function ed(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Aw(n,e,t,r,i){const s=Wm(),o=gf(),c=n.data[e]=function cz(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function oo(){return null!==Je.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function Km(){return Je.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function jo(){const n=Je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ds(s,!0),s}function Wf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function eM(n,e,t,r,i){const s=KR(e,Lc),o=Br(),a=2&r;try{$o(-1),a&&e.length>Et&&XR(n,e,Et,!1),us(a?2:0,i);const u=a?s:null,f=Xh(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{Uc(u,f)}}finally{a&&null===e[Lc]&&ZR(e,Lc),$o(o),us(a?3:1,i)}}function Dw(n,e,t){if(vm(e)){const r=ki(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ki(r)}}}function Sw(n,e,t){Hm()&&(function gz(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Sa(t)&&function wz(n,e,t){const r=Yr(e,n),i=tM(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=B_(n,U_(n,i,null,o,r,e,null,n[Aa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),Jr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=Xr(e,n,a,t);Jr(u,e),null!==o&&Tz(0,a-i,u,c,0,o),_i(c)&&(Ur(t.index,e)[Un]=Xr(e,n,a,t))}}(n,e,t,Yr(t,e)),64==(64&t.flags)&&oM(n,e,t))}function Rw(n,e,t=Yr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function tM(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mw(n,e,t,r,i,s,o,a,c,u,f){const m=Et+r,y=m+i,I=function nz(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:dt);return t}(m,y),T="function"==typeof u?u():u;return I[Pe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let nM=n=>null;function rM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?iM(t,e,i,s):r.hasOwnProperty(i)&&iM(t,e,r[i],s)}return t}function iM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Yi(n,e,t,r,i,s,o,a){const c=Yr(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(kw(n,t,f,r,i),Sa(e)&&function dz(n,e){const t=Ur(e,n);16&t[it]||(t[it]|=64)}(t,e.index)):3&e.type&&(r=function lz(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Pw(n,e,t,r){if(Hm()){const i=null===r?null:{"":-1},s=function _z(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(al(e,o.selectors,!1))if(r||(r=[]),_i(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),xw(n,e,a.length)}else r.unshift(o),xw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&sM(n,e,t,o,i,a),i&&function yz(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new x(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ba(t.mergedAttrs,t.attrs)}function sM(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function Ez(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=Wf(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=ba(t.mergedAttrs,f.hostAttrs),Iz(n,t,e,c,f),vz(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function uz(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;c=rM(m.inputs,f,c,y?y.inputs:null),u=rM(m.outputs,f,u,T);const R=null===c||null===o||Lh(e)?null:bz(c,f,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function oM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Zm(){return Je.lFrame.currentDirectiveIndex}();try{$o(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];$c(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&mz(c,u)}}finally{$o(-1),$c(o)}}function mz(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function xw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function vz(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function Iz(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Vo(i.type)),o=new zc(s,_i(i),Ye);n.blueprint[r]=o,t[r]=o,function fz(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function pz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Wf(n,t,i.hostVars,dt),i)}function uo(n,e,t,r,i,s){const o=Yr(n,e);!function Nw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Q(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[st],o,s,n.value,t,r,i)}function Tz(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)aM(r,t,o[a++],o[a++],o[a++])}function aM(n,e,t,r,i){const s=ki(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ki(s)}}function bz(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function cM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function uM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];yf(t[r]),o.contentQueries(2,e[s],s)}}}function B_(n,e){return n[Oo]?n[ym][mi]=e:n[Oo]=e,n[ym]=e,e}function Ow(n,e,t){yf(0);const r=ki(null);try{e(n,t)}finally{ki(r)}}function fM(n,e){const t=n[as],r=t?t.get(Fs,null):null;r&&r.handleError(e)}function kw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];aM(n.data[o],e[o],r,a,i)}}function Wo(n,e,t){const r=function Oa(n,e){return Kt(e[n])}(e,n);!function $S(n,e,t){n.setValue(e,t)}(n[st],r,t)}function Cz(n,e){const t=Ur(e,n),r=t[Pe];!function Az(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[dn];null!==i&&null===t[Ki]&&(t[Ki]=pw(i,t[as])),Fw(r,t,t[Un])}function Fw(n,e,t){Ef(e);try{const r=n.viewQuery;null!==r&&Ow(1,r,t);const i=n.template;null!==i&&eM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&uM(n,e),n.staticViewQueries&&Ow(2,n.viewQuery,t);const s=n.components;null!==s&&function Dz(n,e){for(let t=0;t<e.length;t++)Cz(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[it]&=-5,wf()}}let pM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function aI(n,e,t){const r=Object.create(rf);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>ml(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Am(r))return;r.hasRun=!0;const o=Xh(r);try{r.cleanupFn(),r.cleanupFn=Nm,r.fn(i)}finally{Uc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})();function j_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=cr(i,a):2==s&&(r=cr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Gf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Kt(s)),Vr(s)&&gM(s,r);const o=t.type;if(8&o)Gf(n,e,t.child,r);else if(32&o){const a=UI(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=YS(e,t);if(Array.isArray(a))r.push(...a);else{const c=Ff(e[Bn]);Gf(c[Pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gM(n,e){for(let t=_r;t<n.length;t++){const r=n[t],i=r[Pe].firstChild;null!==i&&Gf(r[Pe],r,i,e)}n[cs]!==n[dn]&&e.push(n[cs])}function $_(n,e,t,r=!0){const i=e[Aa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{mM(n,e,n.template,t)}catch(c){throw r&&fM(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function mM(n,e,t,r){const i=e[it];if(256!=(256&i)){e[Aa].effectManager?.flush(),Ef(e);try{lf(e),function Cl(n){return Je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&eM(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&Sl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Rl(e,u,0,null),bf(e,0)}if(function Mz(n){for(let e=US(n);null!==e;e=BS(e)){if(!e[pl])continue;const t=e[Lo];for(let r=0;r<t.length;r++){fI(t[r])}}}(e),_M(e,2),null!==n.contentQueries&&uM(n,e),o){const u=n.contentCheckHooks;null!==u&&Sl(e,u)}else{const u=n.contentHooks;null!==u&&Rl(e,u,1),bf(e,1)}!function tz(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=KR(e,Fo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)$o(~s);else{const o=s,a=t[++i],c=t[++i];vI(a,o),r.dirty=!1;const u=Xh(r);try{c(2,e[o])}finally{Uc(r,u)}}}}finally{null===e[Fo]&&ZR(e,Fo),$o(-1)}}(n,e);const a=n.components;null!==a&&vM(e,a,0);const c=n.viewQuery;if(null!==c&&Ow(2,c,r),o){const u=n.viewCheckHooks;null!==u&&Sl(e,u)}else{const u=n.viewHooks;null!==u&&Rl(e,u,2),bf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[it]&=-73,Bm(e)}finally{wf()}}}function _M(n,e){for(let t=US(n);null!==t;t=BS(t))for(let r=_r;r<t.length;r++)yM(t[r],e)}function Pz(n,e,t){yM(Ur(e,n),t)}function yM(n,e){if(!function dI(n){return 128==(128&n[it])}(n))return;const t=n[Pe],r=n[it];if(80&r&&0===e||1024&r||2===e)mM(t,n,t.template,n[Un]);else if(n[kc]>0){_M(n,1);const i=t.components;null!==i&&vM(n,i,1)}}function vM(n,e,t){for(let r=0;r<e.length;r++)Pz(n,e[r],t)}class Kf{get rootNodes(){const e=this._lView,t=e[Pe];return Gf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(e){this._lView[Un]=e}get destroyed(){return 256==(256&this._lView[it])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[hn];if(Vr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(y_(e,r),c_(t,r))}this._attachedToViewContainer=!1}jI(this._lView[Pe],this._lView)}onDestroy(e){!function jm(n,e){if(256==(256&n[it]))throw new x(911,!1);null===n[ro]&&(n[ro]=[]),n[ro].push(e)}(this._lView,e)}markForCheck(){qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[it]&=-129}reattach(){this._lView[it]|=128}detectChanges(){$_(this._lView[Pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y$(n,e){Vf(n,e,e[st],2,null,null)}(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}}class xz extends Kf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;$_(e[Pe],e,e[Un],!1)}checkNoChanges(){}get context(){return null}}class EM extends k_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=At(e);return new Zf(t,this.ngModule)}}function IM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Oz{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=tl(r);const i=this.injector.get(e,yw,r);return i!==yw||t===yw?i:this.parentInjector.get(e,t,r)}}class Zf extends DR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=IM(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return IM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ul(n){return n.map($h).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof ms?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Oz(e,s):e,a=o.get(zf,null);if(null===a)throw new x(407,!1);const m={rendererFactory:a,sanitizer:o.get(PH,null),effectManager:o.get(pM,null),afterRenderEventManager:o.get(Cw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function rz(n,e,t,r){const s=r.get(zR,!1)||t===Hn.ShadowDom,o=n.selectRootElement(e,s);return function iz(n){nM(n)}(o),o}(y,r,this.componentDef.encapsulation,o):__(y,I,function Nz(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==T&&(V=pw(T,o,!0));const G=Mw(0,null,null,1,0,null,null,null,null,null,null),te=U_(null,G,null,H,null,null,m,y,o,null,V);let Ie,Re;Ef(te);try{const j=this.componentDef;let N,L=null;j.findHostDirectiveDefs?(N=[],L=new Map,j.findHostDirectiveDefs(j,N,L),N.push(j)):N=[j];const z=function Fz(n,e){const t=n[Pe],r=Et;return n[r]=e,ed(t,r,2,"#host",null)}(te,T),q=function Lz(n,e,t,r,i,s,o){const a=i[Pe];!function Vz(n,e,t,r){for(const i of n)e.mergedAttrs=ba(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(j_(e,e.mergedAttrs,!0),null!==t&&tR(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=pw(e,i[as]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=U_(i,tM(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&xw(a,n,r.length-1),B_(i,m),i[n.index]=m}(z,T,j,N,te,m,y);Re=Um(G,Et),T&&function Bz(n,e,t,r){if(r)rl(n,t,["ng-version",_w.full]);else{const{attrs:i,classes:s}=function Hh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!gi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&rl(n,t,i),s&&s.length>0&&eR(n,t,s.join(" "))}}(y,j,T,r),void 0!==t&&function jz(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Re,this.ngContentSelectors,t),Ie=function Uz(n,e,t,r,i,s){const o=yr(),a=i[Pe],c=Yr(o,i);sM(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Jr(Xr(i,a,o.directiveStart+f,o),i);oM(a,i,o),c&&Jr(c,i);const u=Xr(i,a,o.directiveStart+o.componentOffset,o);if(n[Un]=i[Un]=u,null!==s)for(const f of s)f(u,e);return Dw(a,o,n),u}(q,j,N,L,te,[$z]),Fw(G,te,null)}finally{wf()}return new kz(this.componentType,Ie,Yl(Re,te),te,Re)}}class kz extends CH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xz(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;kw(s[Pe],s,i,e,t),this.previousInputValues.set(e,t),qf(Ur(this._tNode.index,s))}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function $z(){const n=yr();Dl(ge()[Pe],n)}function DM(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function z_(n){return!!Lw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Lw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function lo(n,e,t){return n[e]=t}function ti(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Vw(n,e,t,r){const i=ge();return ti(i,ka(),e)&&(xt(),uo(wn(),i,n,e,t,r)),Vw}function nd(n,e,t,r){return ti(n,ka(),t)?e+Q(t)+r:dt}function ep(n,e,t,r,i,s,o,a){const c=ge(),u=xt(),f=n+Et,m=u.firstCreatePass?function _q(n,e,t,r,i,s,o,a,c){const u=e.consts,f=ed(e,n,4,o||null,ls(u,a));Pw(e,t,f,ls(u,c)),Dl(e,f);const m=f.tView=Mw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];ds(m,!1);const y=BM(u,c,m,n);Al()&&E_(u,c,y,m),Jr(y,c),B_(c,c[f]=cM(y,c,y,m)),Kh(m)&&Sw(u,c,m),null!=o&&Rw(c,m,a)}let BM=function jM(n,e,t,r){return ks(!0),e[st].createComment("")};function ja(n,e,t){const r=ge();return ti(r,ka(),e)&&Yi(xt(),wn(),r,n,e,r[st],t,!1),ja}function zw(n,e,t,r,i){const o=i?"class":"style";kw(n,t,e.inputs[o],o,r)}function Qe(n,e,t,r){const i=ge(),s=xt(),o=Et+n,a=i[st],c=s.firstCreatePass?function wq(n,e,t,r,i,s){const o=e.consts,c=ed(e,n,2,r,ls(o,i));return Pw(e,t,c,ls(o,s)),null!==c.attrs&&j_(c,c.attrs,!1),null!==c.mergedAttrs&&j_(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=$M(s,i,c,a,e,n);i[o]=u;const f=Kh(c);return ds(c,!0),tR(a,u,c),32!=(32&c.flags)&&Al()&&E_(s,i,u,c),0===function pI(){return Je.lFrame.elementDepthCount}()&&Jr(u,i),function Bc(){Je.lFrame.elementDepthCount++}(),f&&(Sw(s,i,c),Dw(s,c,i)),null!==r&&Rw(i,c),Qe}function Ze(){let n=yr();gf()?function jc(){Je.lFrame.isParent=!1}():(n=n.parent,ds(n,!1));const e=n;(function hf(n){return Je.skipHydrationRootTNode===n})(e)&&function qm(){Je.skipHydrationRootTNode=null}(),function gI(){Je.lFrame.elementDepthCount--}();const t=xt();return t.firstCreatePass&&(Dl(t,n),vm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pS(n){return 0!=(8&n.flags)}(e)&&zw(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Cf(n){return 0!=(16&n.flags)}(e)&&zw(t,e,ge(),e.stylesWithoutHost,!1),Ze}function eu(n,e,t,r){return Qe(n,e,t,r),Ze(),eu}let $M=(n,e,t,r,i,s)=>(ks(!0),__(r,i,function e_(){return Je.lFrame.currentNamespace}()));function Z_(n){return!!n&&"function"==typeof n.then}function qM(n){return!!n&&"function"==typeof n.subscribe}function Go(n,e,t,r){const i=ge(),s=xt(),o=yr();return function GM(n,e,t,r,i,s,o){const a=Kh(r),u=n.firstCreatePass&&function dM(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Un],m=function lM(n){return n[Ca]||(n[Ca]=[])}(e);let y=!0;if(3&r.type||o){const R=Yr(r,e),P=o?o(R):R,H=m.length,V=o?te=>o(Kt(te[r.index])):r.index;let G=null;if(!o&&a&&(G=function Rq(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ca],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,y=!1;else{s=ZM(r,e,f,s,!1);const te=t.listen(P,i,s);m.push(s,te),u&&u.push(i,V,H,H+1)}}else s=ZM(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const R=T.length;if(R)for(let P=0;P<R;P+=2){const Ie=e[T[P]][T[P+1]].subscribe(s),Re=m.length;m.push(s,Ie),u&&u.push(i,r.index,Re,-(Re+1))}}}(s,i,i[st],o,n,e,r),Go}function KM(n,e,t,r){try{return us(6,e,t),!1!==t(r)}catch(i){return fM(n,i),!1}finally{us(7,e,t)}}function ZM(n,e,t,r,i){return function s(o){if(o===Function)return r;qf(n.componentOffset>-1?Ur(n.index,e):e);let c=KM(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=KM(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function tp(n,e,t){return np(n,"",e,"",t),tp}function np(n,e,t,r,i){const s=ge(),o=nd(s,e,t,r);return o!==dt&&Yi(xt(),wn(),s,n,o,s[st],i,!1),np}function ht(n,e=""){const t=ge(),r=xt(),i=n+Et,s=r.firstCreatePass?ed(r,i,1,e,null):r.data[i],o=yP(r,t,s,e,n);t[i]=o,Al()&&E_(r,t,o,s),ds(s,!1)}let yP=(n,e,t,r,i)=>(ks(!0),function m_(n,e){return n.createText(e)}(e[st],r));function ni(n){return Yw("",n,""),ni}function Yw(n,e,t){const r=ge(),i=nd(r,n,e,t);return i!==dt&&Wo(r,Br(),i),Yw}const hd="en-US";let BP=hd;class ru{}class hx{}class iT extends ru{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new EM(this);const i=Lr(e);this._bootstrapComponents=qo(i.bootstrap),this._r3Injector=NR(e,t,[{provide:ru,useValue:this},{provide:k_,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sT extends hx{constructor(e){super(),this.moduleType=e}create(e){return new iT(this.moduleType,e,[])}}class fx extends ru{constructor(e){super(),this.componentFactoryResolver=new EM(this),this.instance=null;const t=new Gl([...e.providers,{provide:ru,useValue:this},{provide:k_,useValue:this.componentFactoryResolver}],e.parent||S_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function oT(n,e,t=null){return new fx({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let C3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=_R(0,t.type),i=r.length>0?oT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(le(ms))})}return n})();function px(n){n.getStandaloneInjector=e=>e.get(C3).getOrCreateStandaloneInjector(n)}function Ix(n,e,t,r){return function Tx(n,e,t,r,i,s){const o=e+t;return ti(n,o,i)?lo(n,o+1,s?r.call(s,i):r(i)):up(n,o+1)}(ge(),vr(),n,e,t,r)}function wx(n,e,t,r,i){return function bx(n,e,t,r,i,s,o){const a=e+t;return function Jc(n,e,t,r){const i=ti(n,e,t);return ti(n,e+1,r)||i}(n,a,i,s)?lo(n,a+2,o?r.call(o,i,s):r(i,s)):up(n,a+2)}(ge(),vr(),n,e,t,r,i)}function up(n,e){const t=n[e];return t===dt?void 0:t}function Y3(n,e,t,r=!0){const i=e[Pe];if(function E$(n,e,t,r){const i=_r+r,s=t.length;r>0&&(t[i-1][mi]=e),r<s-_r?(e[mi]=t[i],yS(t,_r+r,e)):(t.push(e),e[mi]=null),e[hn]=t;const o=e[ko];null!==o&&t!==o&&function I$(n,e){const t=n[Lo];e[Bn]!==e[hn][hn][Bn]&&(n[pl]=!0),null===t?n[Lo]=[e]:t.push(e)}(o,e);const a=e[Oi];null!==a&&a.insertView(n),e[it]|=128}(i,e,n,t),r){const s=qI(t,n),o=e[st],a=v_(o,n[cs]);null!==a&&function _$(n,e,t,r,i,s){r[dn]=i,r[dr]=e,Vf(n,r,t,1,i,s)}(i,n[dr],o,e,a,s)}}Symbol;let Ko=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eW}return n})();const X3=Ko,J3=class extends X3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Q3(n,e,t,r){const i=e.tView,a=U_(n,i,t,4096&n[it]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ko]=n[e.index];const u=n[Oi];return null!==u&&(a[Oi]=u.createEmbeddedView(i)),Fw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Kf(i)}};function eW(){return function iy(n,e){return 4&n.type?new J3(e,n,Yl(n,e)):null}(yr(),ge())}let Us=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=oW}return n})();function oW(){return function Ox(n,e){let t;const r=e[n.index];return Vr(r)?t=r:(t=cM(r,e,null,n),e[n.index]=t,B_(e,t)),kx(t,e,n,r),new xx(t,n,e)}(yr(),ge())}const aW=Us,xx=class extends aW{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yl(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(xl(e)){const t=Wc(e,this._hostLView),r=Fa(e);return new Ir(t[Pe].data[r+8],t)}return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Nx(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Pf(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new Zf(At(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const P=(o?u:this.parentInjector).get(ms,null);P&&(s=P)}At(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function hI(n){return Vr(n[hn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[hn],f=new xx(u,u[dr],u[hn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Y3(a,i,o,!r),e.attachToViewContainerRef(),yS(uT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Nx(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=y_(this._lContainer,t);r&&(c_(uT(this._lContainer),t),jI(r[Pe],r))}detach(e){const t=this._adjustIndex(e,-1),r=y_(this._lContainer,t);return r&&null!=c_(uT(this._lContainer),t)?new Kf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Nx(n){return n[8]}function uT(n){return n[8]||(n[8]=[])}let kx=function Fx(n,e,t,r){if(n[cs])return;let i;i=8&t.type?Kt(r):function cW(n,e){const t=n[st],r=t.createComment(""),i=Yr(e,n);return Kc(t,v_(t,i),r,function C$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[cs]=i};const ET=new ye("Application Initializer");let IT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Oe(ET,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Z_(s))t.push(s);else if(qM(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const po=new ye("LocaleId",{providedIn:"root",factory:()=>Oe(po,_t.Optional|_t.SkipSelf)||function UW(){return typeof $localize<"u"&&$localize.locale||hd}()});let cN=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $W{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let uN=(()=>{class n{compileModuleSync(t){return new sT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=qo(Lr(t).declarations).reduce((o,a)=>{const c=At(a);return c&&o.push(new Zf(c)),o},[]);return new $W(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fN=new ye(""),cy=new ye("");let AT,bT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,AT||(function lG(n){AT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(le(Rt),le(CT),le(cy))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),CT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return AT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),za=null;const pN=new ye("AllowMultipleToken"),DT=new ye("PlatformDestroyListeners"),ST=new ye("appBootstrapListener");class mN{constructor(e,t){this.name=e,this.token=t}}function yN(n,e,t=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=RT();if(!o||o.injector.get(pN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function fG(n){if(za&&!za.get(pN,!1))throw new x(400,!1);(function gN(){!function nI(n){yl=n}(()=>{throw new x(600,!1)})})(),za=n;const e=n.get(EN);(function _N(n){n.get(wR,null)?.forEach(t=>t())})(n)}(function vN(n=[],e){return ei.create({name:e,providers:[{provide:nw,useValue:"platform"},{provide:DT,useValue:new Set([()=>za=null])},...n]})}(a,r))}return function gG(n){const e=RT();if(!e)throw new x(401,!1);return e}()}}function RT(){return za?.get(EN)??null}let EN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function mG(n="zone.js",e){return"noop"===n?new HH:"zone.js"===n?new Rt(e):n}(r?.ngZone,function IN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function b3(n,e,t){return new iT(n,e,t)}(t.moduleType,this.injector,function AN(n){return[{provide:Rt,useFactory:n},{provide:jf,multi:!0,useFactory:()=>{const e=Oe(yG,{optional:!0});return()=>e.initialize()}},{provide:CN,useFactory:_G},{provide:VR,useFactory:UR}]}(()=>i)),o=s.injector.get(Fs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{uy(this._modules,s),a.unsubscribe()})}),function wN(n,e,t){try{const r=t();return Z_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(IT);return a.runInitializers(),a.donePromise.then(()=>(function jP(n){Ni(n,"Expected localeId to be defined"),"string"==typeof n&&(BP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(po,hd)||hd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=TN({},r);return function dG(n,e,t){const r=new sT(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(iu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new x(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(DT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(le(ei))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function TN(n,e){return Array.isArray(e)?e.reduce(TN,n):{...n,...e}}let iu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Oe(CN),this.zoneIsStable=Oe(VR),this.componentTypes=[],this.components=[],this.isStable=Oe(cN).hasPendingTasks.pipe(Fe(t=>t?k(!1):this.zoneIsStable),et(),ue()),this._injector=Oe(ms)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof DR;if(!this._injector.get(IT).done)throw!i&&function to(n){const e=At(n)||tr(n)||lr(n);return null!==e&&e.standalone}(t),new x(405,!1);let o;o=i?t:this._injector.get(k_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function hG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ru),u=o.create(ei.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(fN,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),uy(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;uy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(ST,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const CN=new ye("",{providedIn:"root",factory:()=>Oe(Fs).handleError.bind(void 0)});function _G(){const n=Oe(Rt),e=Oe(Fs);return t=>n.runOutsideAngular(()=>e.handleError(t))}let yG=(()=>{class n{constructor(){this.zone=Oe(Rt),this.applicationRef=Oe(iu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let MT=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=EG}return n})();function EG(n){return function IG(n,e,t){if(Sa(n)&&!t){const r=Ur(n.index,e);return new Kf(r,r)}return 47&n.type?new Kf(e[Bn],e):null}(yr(),ge(),16==(16&n))}class PN{constructor(){}supports(e){return z_(e)}create(e){return new DG(e)}}const AG=(n,e)=>e;class DG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||AG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<NN(r,i,s)?t:r,a=NN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!z_(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Jz(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new SG(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new xN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class SG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class xN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new RG,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class ON{constructor(){}supports(e){return e instanceof Map||Lw(e)}create(){return new MG}}class MG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Lw(e)))throw new x(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new PG(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class PG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kN(){return new hy([new PN])}let hy=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:kN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kN()),deps:[[n,new Nf,new hr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new x(901,!1)}}return n})();function FN(){return new fp([new ON])}let fp=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:FN});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||FN()),deps:[[n,new Nf,new hr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new x(901,!1)}}return n})();const OG=yN(null,"core",[]);let kG=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(le(iu))};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({})}return n})();function FT(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let LT=null;function gd(){return LT}class ZG{}const zn=new ye("DocumentToken");let VT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return Oe(YG)},providedIn:"platform"})}return n})();const QG=new ye("Location Initialized");let YG=(()=>{class n extends VT{constructor(){super(),this._doc=Oe(zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gd().getBaseHref(this._doc)}onPopState(t){const r=gd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=gd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function UT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qN(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Zo(n){return n&&"?"!==n[0]?"?"+n:n}let ou=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return Oe(GN)},providedIn:"root"})}return n})();const WN=new ye("appBaseHref");let GN=(()=>{class n extends ou{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Oe(zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return UT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Zo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Zo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Zo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(VT),le(WN,8))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XG=(()=>{class n extends ou{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=UT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Zo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Zo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(VT),le(WN,8))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),BT=(()=>{class n{constructor(t){this._subject=new yi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function t9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qN(KN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zo(r))}normalize(t){return n.stripTrailingSlash(function e9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,KN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Zo;static#t=this.joinWithSlash=UT;static#n=this.stripTrailingSlash=qN;static#r=this.\u0275fac=function(r){return new(r||n)(le(ou))};static#i=this.\u0275prov=xe({token:n,factory:function(){return function JG(){return new BT(le(ou))}()},providedIn:"root"})}return n})();function KN(n){return n.replace(/\/index.html$/,"")}const QT=/\s+/,rO=[];let iO=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=rO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(QT):rO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(QT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(QT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(hy),Ye(fp),Ye(zo),Ye(F_))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class j9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let YT=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new j9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),oO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{oO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(Us),Ye(Ko),Ye(hy))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function oO(n,e){n.context.$implicit=e.item}let XT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(Us),Ye(Ko))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class $9{constructor(){this.$implicit=null,this.ngIf=null}}function aO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${je(e)}'.`)}let lO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({})}return n})();const dO="browser";function by(n){return"server"===n}let _6=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new y6(le(zn),window)})}return n})();class y6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function v6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class H6 extends ZG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sb extends H6{static makeCurrent(){!function KG(n){LT||(LT=n)}(new sb)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function z6(){return _p=_p||document.querySelector("base"),_p?_p.getAttribute("href"):null}();return null==t?null:function q6(n){Dy=Dy||document.createElement("a"),Dy.setAttribute("href",n);const e=Dy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_p=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function U9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Dy,_p=null,G6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const ob=new ye("EventManagerPlugins");let mO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(le(ob),le(Rt))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class _O{constructor(e){this._doc=e}}const ab="ng-app-id";let yO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=by(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ab}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(ab),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(ab,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(le(zn),le(R_),le(ow,8),le(_s))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const cb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ub=/%COMP%/g,Y6=new ye("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function EO(n,e){return e.map(t=>t.replace(ub,n))}let lb=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=by(a),this.defaultRenderer=new db(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hn.ShadowDom&&(r={...r,encapsulation:Hn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof wO?i.applyToHost(t):i instanceof hb&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Hn.Emulated:s=new wO(c,u,r,this.appId,f,o,a,m);break;case Hn.ShadowDom:return new t5(c,u,t,r,o,a,this.nonce,m);default:s=new hb(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(le(mO),le(yO),le(R_),le(Y6),le(zn),le(_s),le(Rt),le(ow))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class db{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=cb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=cb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ba.DashCase|Ba.Important)?e.style.setProperty(t,r,i&Ba.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ba.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=gd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function IO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class t5 extends db{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=EO(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hb extends db{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?EO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class wO extends hb{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function X6(n){return"_ngcontent-%COMP%".replace(ub,n)}(u),this.hostAttr=function J6(n){return"_nghost-%COMP%".replace(ub,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let n5=(()=>{class n extends _O{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(le(zn))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const TO=["alt","control","meta","shift"],r5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s5=(()=>{class n extends _O{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TO.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=r5[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),TO.forEach(o=>{o!==i&&(0,i5[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(le(zn))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const u5=yN(OG,"browser",[{provide:_s,useValue:dO},{provide:wR,useValue:function o5(){sb.makeCurrent()},multi:!0},{provide:zn,useFactory:function c5(){return function N$(n){KI=n}(document),document},deps:[]}]),l5=new ye(""),AO=[{provide:cy,useClass:class W6{addToWindow(e){Wt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new x(5103,!1);return s},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements(),Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(r=>{const i=Wt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?gd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:fN,useClass:bT,deps:[Rt,CT,cy]},{provide:bT,useClass:bT,deps:[Rt,CT,cy]}],DO=[{provide:nw,useValue:"root"},{provide:Fs,useFactory:function a5(){return new Fs},deps:[]},{provide:ob,useClass:n5,multi:!0,deps:[zn,Rt,_s]},{provide:ob,useClass:s5,multi:!0,deps:[zn]},lb,yO,mO,{provide:zf,useExisting:lb},{provide:class E6{},useClass:G6,deps:[]},[]];let gb,SO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:R_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(l5,12))};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({providers:[...DO,...AO],imports:[lO,kG]})}return n})(),RO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(le(zn))};static#t=this.\u0275prov=xe({token:n,factory:function(r){let i=null;return i=r?new r:function h5(){return new RO(le(zn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{gb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gb=!1}let yp,OO=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function m6(n){return n===dO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(le(_s))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sy(n){return function _5(){if(null==yp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yp=!0}))}finally{yp=yp||!1}return yp}()?n:!!n.capture}function FO(n){return Array.isArray(n)?n:[n]}const{isArray:D5}=Array,{getPrototypeOf:S5,prototype:R5,keys:M5}=Object;const{isArray:x5}=Array;function My(...n){const e=Ln(n),t=function Ms(n){return M(Pi(n))?n.pop():void 0}(n),{args:r,keys:i}=function VO(n){if(1===n.length){const e=n[0];if(D5(e))return{args:e,keys:null};if(function P5(n){return n&&"object"==typeof n&&S5(n)===R5}(e)){const t=M5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return b([],e);const s=new ut(function O5(n,e,t=vn){return r=>{jO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)jO(e,()=>{const u=b(n[c],e);let f=!1;u.subscribe(Te(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function BO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):vn));return t?s.pipe(function UO(n){return Me(e=>function N5(n,e){return x5(e)?n(...e):n(e)}(n,e))}(t)):s}function jO(n,e,t){n?En(t,n,e):e()}function Py(...n){return function k5(){return Ar(1)}()(b(n,Ln(n)))}function cu(n){return n<=0?()=>Fn:se((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ji(n,e){return se((t,r)=>{let i=0;t.subscribe(Te(r,s=>n.call(e,s,i++)&&r.next(s)))})}class L5 extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const xy={setInterval(n,e,...t){const{delegate:r}=xy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=xy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class $O extends L5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return xy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&xy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const _b={now:()=>(_b.delegate||Date).now(),delegate:void 0};class vp{constructor(e,t=vp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}vp.now=_b.now;class HO extends vp{constructor(e,t=vp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const yb=new HO($O);function zO(n,e=yb){return se((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Te(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Ep(...n){const e=Ln(n);return se((t,r)=>{(e?Py(n,t,e):Py(n,t)).subscribe(r)})}function qO(n){return se((e,t)=>{Lt(n).subscribe(Te(t,()=>t.complete(),Be)),!t.closed&&e.subscribe(t)})}const WO=new Set;let uu,V5=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):B5}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function U5(n,e){if(!WO.has(n))try{uu||(uu=document.createElement("style"),e&&(uu.nonce=e),uu.setAttribute("type","text/css"),document.head.appendChild(uu)),uu.sheet&&(uu.sheet.insertRule(`@media ${n} {body{ }}`,0),WO.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(le(OO),le(ow,8))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function B5(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let j5=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return GO(FO(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=My(GO(FO(t)).map(o=>this._registerQuery(o).observable));return s=Py(s.pipe(cu(1)),s.pipe(function F5(n){return Ji((e,t)=>n<=t)}(1),zO(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new ut(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ep(r),Me(({matches:o})=>({query:t,matches:o})),qO(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(le(V5),le(Rt))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GO(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const YO="cdk-high-contrast-black-on-white",XO="cdk-high-contrast-white-on-black",vb="cdk-high-contrast-active";let X5=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Oe(j5).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(vb,YO,XO),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(vb,YO):2===r&&t.add(vb,XO)}}static#e=this.\u0275fac=function(r){return new(r||n)(le(OO),le(zn))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({})}return n})();const n8=new ye("mat-sanity-checks",{providedIn:"root",factory:function t8(){return!0}});let Wa=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function E5(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(le(X5),le(n8,8),le(zn))};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[JO,JO]})}return n})(),nk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[Wa,Wa]})}return n})();const rk=Sy({passive:!0,capture:!0});class s8{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function v5(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,rk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,rk)))}}class Eb{static#e=this._eventManager=new s8;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=LO(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...ik,...r.animation},o=r.radius||function a8(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,R=new i8(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",R.state=0,r.persistent||(this._mostRecentTransientRipple=R);return!T&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(R),V=()=>this._destroyRipple(R);f.addEventListener("transitionend",H),f.addEventListener("transitioncancel",V)}),this._activeRipples.set(R,null),(T||!u)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...ik,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=LO(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,ok.forEach(r=>{Eb._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ak.forEach(t=>{this._triggerElement.addEventListener(t,this,sk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Z5(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Q5(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(ok.forEach(t=>Eb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&ak.forEach(t=>e.removeEventListener(t,this,sk)))}}let p8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[Wa,lO,Wa]})}return n})();function yd(n,e){const t=M(n)?n:()=>n,r=i=>i.error(t());return new ut(e?i=>e.schedule(r,0,i):r)}function pr(n,e,t){const r=M(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Te(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):vn}function Ga(n){return se((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Te(t,void 0,void 0,o=>{s=Lt(n(o,Ga(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Ny(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vd(n,e){return M(e)?tn(n,e,1):tn(n,1)}let K8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[Wa,Wa]})}return n})(),Y8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[nk,Wa,nk,Wa]})}return n})();const Uy=we(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ak(n){return new ut(e=>{Lt(n()).subscribe(e)})}function Sb(){return se((n,e)=>{let t=null;n._refCount++;const r=Te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Dk extends ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(Te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return Sb()(this)}}function By(n){return se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Sk(n=J8){return se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J8(){return new Uy}function Qa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ji((i,s)=>n(i,s,r)):vn,cu(1),t?By(e):Sk(()=>new Uy))}function jy(n,e){return se(function eK(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Te(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Rb(n){return n<=0?()=>Fn:se((e,t)=>{let r=[];e.subscribe(Te(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const pt="primary",Cp=Symbol("RouteTitle");class rK{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ed(n){return new rK(n)}function iK(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function go(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Rk(n[i],e[i]))return!1;return!0}function Rk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Mk(n){return n.length>0?n[n.length-1]:null}function Ya(n){return function X8(n){return!!n&&(n instanceof ut||M(n.lift)&&M(n.subscribe))}(n)?n:Z_(n)?b(Promise.resolve(n)):k(n)}const oK={exact:function Nk(n,e,t){if(!fu(n.segments,e.segments)||!$y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Nk(n.children[r],e.children[r],t))return!1;return!0},subset:Ok},Pk={exact:function aK(n,e){return go(n,e)},subset:function cK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rk(n[t],e[t]))},ignored:()=>!0};function xk(n,e,t){return oK[t.paths](n.root,e.root,t.matrixParams)&&Pk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ok(n,e,t){return kk(n,e,e.segments,t)}function kk(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!fu(i,t)||e.hasChildren()||!$y(i,t,r))}if(n.segments.length===t.length){if(!fu(n.segments,t)||!$y(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ok(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(fu(n.segments,i)&&$y(n.segments,i,r)&&n.children[pt])&&kk(n.children[pt],e,s,r)}}function $y(n,e,t){return e.every((r,i)=>Pk[t](n[i].parameters,r.parameters))}class Id{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return dK.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hy(this)}}class Ap{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ed(this.parameters)),this._parameterMap}toString(){return Vk(this)}}function fu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Dp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return new Mb},providedIn:"root"})}return n})();class Mb{parse(e){const t=new wK(e);return new Id(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sp(e.root,!0)}`,r=function pK(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${zy(t)}=${zy(i)}`).join("&"):`${zy(t)}=${zy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hK(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dK=new Mb;function Hy(n){return n.segments.map(e=>Vk(e)).join("/")}function Sp(n,e){if(!n.hasChildren())return Hy(n);if(e){const t=n.children[pt]?Sp(n.children[pt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==pt&&r.push(`${i}:${Sp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===pt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===pt?[Sp(n.children[pt],!1)]:[`${i}:${Sp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pt]?`${Hy(n)}/${t[0]}`:`${Hy(n)}/(${t.join("//")})`}}function Fk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zy(n){return Fk(n).replace(/%3B/gi,";")}function Pb(n){return Fk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qy(n){return decodeURIComponent(n)}function Lk(n){return qy(n.replace(/\+/g,"%20"))}function Vk(n){return`${Pb(n.path)}${function fK(n){return Object.keys(n).map(e=>`;${Pb(e)}=${Pb(n[e])}`).join("")}(n.parameters)}`}const gK=/^[^\/()?;#]+/;function xb(n){const e=n.match(gK);return e?e[0]:""}const mK=/^[^\/()?;=#]+/,yK=/^[^=?&#]+/,EK=/^[^&#]+/;class wK{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pt]=new Xt(e,t)),r}parseSegment(){const e=xb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new Ap(qy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function _K(n){const e=n.match(mK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=xb(this.remaining);i&&(r=i,this.capture(r))}e[qy(t)]=qy(r)}parseQueryParam(e){const t=function vK(n){const e=n.match(yK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function IK(n){const e=n.match(EK);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Lk(t),s=Lk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new x(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[pt]:new Xt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}}function Uk(n){return n.segments.length>0?new Xt([],{[pt]:n}):n}function Bk(n){const e={};for(const r of Object.keys(n.children)){const s=Bk(n.children[r]);if(r===pt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function TK(n){if(1===n.numberOfChildren&&n.children[pt]){const e=n.children[pt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function pu(n){return n instanceof Id}function jk(n){let e;const i=Uk(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new Xt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function $k(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Nb(i,i,i,t,r);const s=function CK(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new zk(t,e,r)}(e);if(s.toRoot())return Nb(i,i,new Xt([],{}),t,r);const o=function AK(n,e,t){if(n.isAbsolute)return new Gy(e,!0,0);if(!t)return new Gy(e,!1,NaN);if(null===t.parent)return new Gy(t,!0,0);const r=Wy(n.commands[0])?0:1;return function DK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new Gy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Mp(o.segmentGroup,o.index,s.commands):qk(o.segmentGroup,o.index,s.commands);return Nb(i,o.segmentGroup,a,t,r)}function Wy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rp(n){return"object"==typeof n&&null!=n&&n.outlets}function Nb(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:Hk(n,e,t);const a=Uk(Bk(o));return new Id(a,s,i)}function Hk(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Hk(s,e,t)}),new Xt(n.segments,r)}class zk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wy(r[0]))throw new x(4003,!1);const i=r.find(Rp);if(i&&i!==Mk(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qk(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Mp(n,e,t);const r=function RK(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Rp(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!Gk(c,u,o))return s;r+=2}else{if(!Gk(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Xt(n.segments.slice(0,r.pathIndex),{});return s.children[pt]=new Xt(n.segments.slice(r.pathIndex),n.children),Mp(s,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Ob(n,e,t):r.match?Mp(n,0,i):Ob(n,e,t)}function Mp(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function SK(n){return Rp(n[0])?n[0].outlets:{[pt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==pt)&&n.children[pt]&&1===n.numberOfChildren&&0===n.children[pt].segments.length){const s=Mp(n.children[pt],e,t);return new Xt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=qk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Xt(n.segments,i)}}function Ob(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Rp(s)){const c=MK(s.outlets);return new Xt(r,c)}if(0===i&&Wy(t[0])){r.push(new Ap(n.segments[e].path,Wk(t[0]))),i++;continue}const o=Rp(s)?s.outlets[pt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Wy(a)?(r.push(new Ap(o,Wk(a))),i+=2):(r.push(new Ap(o,{})),i++)}return new Xt(r,{})}function MK(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Ob(new Xt([],{}),0,r))}),e}function Wk(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Gk(n,e,t){return n==t.path&&go(e,t.parameters)}const Pp="imperative";class mo{constructor(e,t){this.id=e,this.url=t}}class Ky extends mo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xa extends mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xp extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wd extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Zy extends mo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kk extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PK extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xK extends mo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NK extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OK extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kK{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BK{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kb{}class Fb{constructor(e){this.url=e}}class jK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Np,this.attachRef=null}}let Np=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jK,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Qk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Lb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Lb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vb(e,this._root).map(t=>t.value)}}function Lb(n,e){if(n===e.value)return e;for(const t of e.children){const r=Lb(n,t);if(r)return r}return null}function Vb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vb(n,t);if(r.length)return r.unshift(e),r}return[]}class Jo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Td(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yk extends Qk{constructor(e,t){super(e),this.snapshot=t,Ub(this,e)}toString(){return this.snapshot.toString()}}function Xk(n,e){const t=function $K(n,e){const o=new Qy([],{},{},"",{},pt,e,null,{});return new e1("",new Jo(o,[]))}(0,e),r=new w([new Ap("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new bd(r,i,o,a,s,pt,e,t.root);return c.snapshot=t.root,new Yk(new Jo(c,[]),t)}class bd{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(u=>u[Cp]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(e=>Ed(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(e=>Ed(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function HK(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qy{get title(){return this.data?.[Cp]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ed(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class e1 extends Qk{constructor(e,t){super(t),this.url=e,Ub(this,t)}toString(){return t1(this._root)}}function Ub(n,e){e.value._routerState=n,e.children.forEach(t=>Ub(n,t))}function t1(n){const e=n.children.length>0?` { ${n.children.map(t1).join(", ")} } `:"";return`${n.value}${e}`}function Bb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,go(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),go(e.params,t.params)||n.paramsSubject.next(t.params),function sK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!go(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),go(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jb(n,e){const t=go(n.params,e.params)&&function uK(n,e){return fu(n,e)&&n.every((t,r)=>go(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jb(n.parent,e.parent))}let $b=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new yi,this.deactivateEvents=new yi,this.attachEvents=new yi,this.detachEvents=new yi,this.parentContexts=Oe(Np),this.location=Oe(Us),this.changeDetector=Oe(MT),this.environmentInjector=Oe(ms),this.inputBinder=Oe(Yy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new zK(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bo]})}return n})();class zK{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bd?this.route:e===Np?this.childContexts:this.parent.get(e,t)}}const Yy=new ye("");let n1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=My([r.queryParams,r.params,r.data]).pipe(Fe(([s,o,a],c)=>(a={...s,...o,...a},0===c?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function GG(n){const e=At(n);if(!e)return null;const t=new Zf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function Op(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function WK(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Op(n,r,i);return Op(n,r)})}(n,e,t);return new Jo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Op(n,a)),o}}const r=function GK(n){return new bd(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Op(n,s));return new Jo(r,i)}}const Hb="ngNavigationCancelingError";function r1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=s1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function s1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Hb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function o1(n){return n&&n[Hb]}let a1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["ng-component"]],standalone:!0,features:[px],decls:1,vars:0,template:function(r,i){1&r&&eu(0,"router-outlet")},dependencies:[$b],encapsulation:2})}return n})();function zb(n){const e=n.children&&n.children.map(zb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pt&&(t.component=a1),t}function $s(n){return n.outlet||pt}function kp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tZ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Td(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Td(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Td(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Td(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new BK(s.value.snapshot))}),e.children.length&&this.forwardEvent(new VK(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Bb(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Bb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=kp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class c1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xy{constructor(e,t){this.component=e,this.route=t}}function nZ(n,e,t){const r=n._root;return Fp(r,e?e._root:null,t,[r.value])}function Cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function GE(n){return null!==Zu(n)}(n)?e.get(n):n:r}function Fp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Td(e);return n.children.forEach(o=>{(function iZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function sZ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fu(n.url,e.url)||!go(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jb(n,e)||!go(n.queryParams,e.queryParams);default:return!jb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new c1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Fp(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xy(a.outlet.component,o))}else o&&Lp(e,a,i),i.canActivateChecks.push(new c1(r)),Fp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lp(a,t.getContext(o),i)),i}function Lp(n,e,t){const r=Td(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Lp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Xy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vp(n){return"function"==typeof n}function u1(n){return n instanceof Uy||"EmptyError"===n?.name}const Jy=Symbol("INITIAL_VALUE");function Ad(){return Fe(n=>My(n.map(e=>e.pipe(cu(1),Ep(Jy)))).pipe(Me(e=>{for(const t of e)if(!0!==t){if(t===Jy)return Jy;if(!1===t||t instanceof Id)return t}return!0}),Ji(e=>e!==Jy),cu(1)))}function l1(n){return function di(...n){return hi(n)}(pr(e=>{if(pu(e))throw r1(0,e)}),Me(e=>!0===e))}class ev{constructor(e){this.segmentGroup=e||null}}class d1{constructor(e){this.urlTree=e}}function Dd(n){return yd(new ev(n))}function h1(n){return yd(new d1(n))}class CZ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new x(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[pt])return yd(new x(4e3,!1));i=i.children[pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Id(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const qb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AZ(n,e,t,r,i){const s=Wb(n,e,t);return s.matched?(r=function ZK(n,e){return n.providers&&!n._injector&&(n._injector=oT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function wZ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Cd(o,n);return Ya(function dZ(n){return n&&Vp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Ad(),l1()):k(!0)}(r,e,t).pipe(Me(o=>!0===o?s:{...qb}))):k(s)}function Wb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||iK)(t,n,e);if(!i)return{...qb};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function f1(n,e,t,r){return t.length>0&&function RZ(n,e,t){return t.some(r=>tv(n,e,r)&&$s(r)!==pt)}(n,t,r)?{segmentGroup:new Xt(e,SZ(r,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function MZ(n,e,t){return t.some(r=>tv(n,e,r))}(n,t,r)?{segmentGroup:new Xt(n.segments,DZ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function DZ(n,e,t,r,i){const s={};for(const o of r)if(tv(n,t,o)&&!i[$s(o)]){const a=new Xt([],{});s[$s(o)]=a}return{...i,...s}}function SZ(n,e){const t={};t[pt]=e;for(const r of n)if(""===r.path&&$s(r)!==pt){const i=new Xt([],{});t[$s(r)]=i}return t}function tv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class OZ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new CZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,!1)}recognize(){const e=f1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pt).pipe(Ga(t=>{if(t instanceof d1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ev?this.noMatchError(t):t}),Me(t=>{const r=new Qy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,{}),i=new Jo(r,t),s=new e1("",i),o=function bK(n,e,t=null,r=null){return $k(jk(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,pt).pipe(Ga(r=>{throw r instanceof ev?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Jk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(vd(s=>{const o=r.children[s],a=function JK(n,e){const t=n.filter(r=>$s(r)===e);return t.push(...n.filter(r=>$s(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),jy((s,o)=>(s.push(...o),s)),By(null),function tK(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ji((i,s)=>n(i,s,r)):vn,Rb(1),t?By(e):Sk(()=>new Uy))}(),tn(s=>{if(null===s)return Dd(r);const o=p1(s);return function kZ(n){n.sort((e,t)=>e.value.outlet===pt?-1:t.value.outlet===pt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(vd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Ga(c=>{if(c instanceof ev)return k(null);throw c}))),Qa(a=>!!a),Ga(a=>{if(u1(a))return function xZ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):Dd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function PZ(n,e,t,r){return!!($s(n)===r||r!==pt&&tv(e,t,n))&&("**"===n.path||Wb(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Dd(i):Dd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?h1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(tn(o=>{const a=new Xt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=Wb(t,i,s);if(!a)return Dd(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?h1(m):this.applyRedirects.lineralizeSegments(i,m).pipe(tn(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Mk(i).parameters:{};a=k({snapshot:new Qy(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g1(r),$s(r),r.component??r._loadedComponent??null,r,m1(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=AZ(t,r,i,e).pipe(Me(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Qy(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g1(r),$s(r),r.component??r._loadedComponent??null,r,m1(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe(Fe(c=>null===c?Dd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Fe(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:T,slicedSegments:R}=f1(t,y,I,u);if(0===R.length&&T.hasChildren())return this.processChildren(f,u,T).pipe(Me(H=>null===H?null:[new Jo(m,H)]));if(0===u.length&&0===R.length)return k([new Jo(m,[])]);const P=$s(r)===s;return this.processSegment(f,u,T,R,P?pt:s,!0).pipe(Me(H=>[new Jo(m,H)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function IZ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Cd(o,n);return Ya(function aZ(n){return n&&Vp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Ad(),l1())}(e,t,r).pipe(tn(i=>i?this.configLoader.loadChildren(e,t).pipe(pr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function bZ(n){return yd(s1(!1,3))}())):k({routes:[],injector:e})}}function FZ(n){const e=n.value.routeConfig;return e&&""===e.path}function p1(n){const e=[],t=new Set;for(const r of n){if(!FZ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=p1(r.children);e.push(new Jo(r.value,i))}return e.filter(r=>!t.has(r))}function g1(n){return n.data||{}}function m1(n){return n.resolve||{}}function _1(n){return"string"==typeof n.title||null===n.title}function Gb(n){return Fe(e=>{const t=n(e);return t?b(t).pipe(Me(()=>e)):k(e)})}const Sd=new ye("ROUTES");let Kb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Oe(uN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ya(t.loadComponent()).pipe(Me(y1),pr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ny(()=>{this.componentLoaders.delete(t)})),i=new Dk(r,()=>new oe).pipe(Sb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function HZ(n,e,t,r){return Ya(n.loadChildren()).pipe(Me(y1),tn(i=>i instanceof hx||Array.isArray(i)?k(i):b(e.compileModuleAsync(i))),Me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Sd,[],{optional:!0,self:!0}).flat()),{routes:o.map(zb),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ny(()=>{this.childrenLoaders.delete(r)})),o=new Dk(s,()=>new oe).pipe(Sb());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y1(n){return function zZ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let nv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=Oe(Kb),this.environmentInjector=Oe(ms),this.urlSerializer=Oe(Dp),this.rootContexts=Oe(Np),this.inputBindingEnabled=null!==Oe(Yy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new FK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kK(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ji(s=>0!==s.id),Me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Fe(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(pr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fe(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new wd(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),Fn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(Fe(y=>{const I=this.transitions?.getValue();return this.events.next(new Ky(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?Fn:Promise.resolve(y)}),function LZ(n,e,t,r,i,s){return tn(o=>function NZ(n,e,t,r,i,s,o="emptyOnly"){return new OZ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Me(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),pr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new Kk(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:R,extras:P}=c,H=new Ky(y,this.urlSerializer.serialize(I),T,R);this.events.next(H);const V=Xk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:V,urlAfterRedirects:I,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const y="";return this.events.next(new wd(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),Fn}}),pr(c=>{const u=new PK(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Me(c=>(this.currentTransition=s={...c,guards:nZ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function fZ(n,e){return tn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function pZ(n,e,t,r){return b(n).pipe(tn(i=>function EZ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const c=kp(e)??i,u=Cd(a,c);return Ya(function lZ(n){return n&&Vp(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Qa())})).pipe(Ad()):k(!0)}(i.component,i.route,t,e,r)),Qa(i=>!0!==i,!0))}(o,r,i,n).pipe(tn(a=>a&&function oZ(n){return"boolean"==typeof n}(a)?function gZ(n,e,t,r){return b(e).pipe(vd(i=>Py(function _Z(n,e){return null!==n&&e&&e(new LK(n)),k(!0)}(i.route.parent,r),function mZ(n,e){return null!==n&&e&&e(new UK(n)),k(!0)}(i.route,r),function vZ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function rZ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Ak(()=>k(o.guards.map(c=>{const u=kp(o.node)??t,f=Cd(c,u);return Ya(function uZ(n){return n&&Vp(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(Qa())})).pipe(Ad())));return k(s).pipe(Ad())}(n,i.path,t),function yZ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>Ak(()=>{const o=kp(e)??t,a=Cd(s,o);return Ya(function cZ(n){return n&&Vp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Qa())}));return k(i).pipe(Ad())}(n,i.route,t))),Qa(i=>!0!==i,!0))}(r,s,n,e):k(a)),Me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),pr(c=>{if(s.guardsResult=c.guardsResult,pu(c.guardsResult))throw r1(0,c.guardsResult);const u=new xK(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ji(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Gb(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(pr(u=>{const f=new NK(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Fe(u=>{let f=!1;return k(u).pipe(function VZ(n,e){return tn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return b(i).pipe(vd(o=>function UZ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!_1(i)&&(s[Cp]=i.title),function BZ(n,e,t,r){const i=function jZ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return b(i).pipe(tn(o=>function $Z(n,e,t,r){const i=kp(e)??r,s=Cd(n,i);return Ya(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Qa(),pr(a=>{s[o]=a}))),Rb(1),function nK(n){return Me(()=>n)}(s),Ga(o=>u1(o)?Fn:yd(o)))}(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=Jk(n,t).resolve,i&&_1(i)&&(n.data[Cp]=i.title),null)))}(o.route,r,n,e)),pr(()=>s++),Rb(1),tn(o=>s===i.length?k(t):Fn))})}(t.paramsInheritanceStrategy,this.environmentInjector),pr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),pr(u=>{const f=new OK(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),Gb(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(pr(y=>{f.component=y}),Me(()=>{})));for(const y of f.children)m.push(...u(y));return m};return My(u(c.targetSnapshot.root)).pipe(By(),cu(1))}),Gb(()=>this.afterPreactivation()),Me(c=>{const u=function qK(n,e,t){const r=Op(n,e._root,t?t._root:void 0);return new Yk(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),pr(()=>{this.events.next(new kb)}),((n,e,t,r)=>Me(i=>(new tZ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),cu(1),pr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),qO(this.transitionAbortSubject.pipe(pr(c=>{throw c}))),Ny(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ga(c=>{if(a=!0,o1(c))this.events.next(new xp(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function KK(n){return o1(n)&&pu(n.url)}(c)?this.events.next(new Fb(c.url)):s.resolve(!1);else{this.events.next(new Zy(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return Fn}))}))}cancelNavigationTransition(t,r,i){const s=new xp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function v1(n){return n!==Pp}let E1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===pt);return r}getResolvedTitleForRoute(t){return t.data[Cp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return Oe(qZ)},providedIn:"root"})}return n})(),qZ=(()=>{class n extends E1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(le(RO))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return Oe(KZ)},providedIn:"root"})}return n})();class GZ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let KZ=(()=>{class n extends GZ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=function Mf(n){return eo(()=>{const e=n.prototype.constructor,t=e[Kr]||Gc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Kr]||Gc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}();static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rv=new ye("",{providedIn:"root",factory:()=>({})});let ZZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:function(){return Oe(QZ)},providedIn:"root"})}return n})(),QZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Up=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Up||{});function I1(n,e){n.events.pipe(Ji(t=>t instanceof Xa||t instanceof xp||t instanceof Zy||t instanceof wd),Me(t=>t instanceof Xa||t instanceof wd?Up.COMPLETE:t instanceof xp&&(0===t.code||1===t.code)?Up.REDIRECTING:Up.FAILED),Ji(t=>t!==Up.REDIRECTING),cu(1)).subscribe(()=>{e()})}function YZ(n){throw n}function XZ(n,e,t){return e.parse("/")}const JZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},e7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Is=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Oe(aN),this.isNgZoneEnabled=!1,this._events=new oe,this.options=Oe(rv,{optional:!0})||{},this.pendingTasks=Oe(cN),this.errorHandler=this.options.errorHandler||YZ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||XZ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Oe(ZZ),this.routeReuseStrategy=Oe(WZ),this.titleStrategy=Oe(E1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Oe(Sd,{optional:!0})?.flat()??[],this.navigationTransitions=Oe(nv),this.urlSerializer=Oe(Dp),this.location=Oe(BT),this.componentInputBindingEnabled=!!Oe(Yy,{optional:!0}),this.eventsSubscription=new kt,this.isNgZoneEnabled=Oe(Rt)instanceof Rt&&Rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Id,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(w1(r)&&this._events.next(r));if(r instanceof Ky)v1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof wd)this.rawUrlTree=i.rawUrl;else if(r instanceof Kk){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof kb)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof xp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Fb){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||v1(i.source)};this.scheduleNavigation(s,Pp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Zy&&this.restoreHistory(i,!0),r instanceof Xa&&(this.navigated=!0),w1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=jk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return $k(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=pu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pp,null,r)}navigate(t,r={skipLocationChange:!1}){return function t7(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new x(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...JZ}:!1===r?{...e7}:r,pu(t))return xk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return xk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return I1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function w1(n){return!(n instanceof kb||n instanceof Fb)}let iv=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Xa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function fR(n,e,t){return function sH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?hR:Qc}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(Is),Ye(bd),function Va(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(il(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(yr(),n)}("tabindex"),Ye(F_),Ye(zo),Ye(ou))};static#t=this.\u0275dir=Gt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Go("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Vw("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",FT],skipLocationChange:["skipLocationChange","skipLocationChange",FT],replaceUrl:["replaceUrl","replaceUrl",FT],routerLink:"routerLink"},standalone:!0,features:[DM,Bo]})}return n})();class T1{}let i7=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ji(t=>t instanceof Xa),vd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=oT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(Ar())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(tn(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(Ar()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(le(Is),le(uN),le(ms),le(T1),le(Kb))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Zb=new ye("");let b1=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ky?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function JR(){throw new Error("invalid")}()};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function ea(n,e){return{\u0275kind:n,\u0275providers:e}}function A1(){const n=Oe(ei);return e=>{const t=n.get(iu);if(e!==t.components[0])return;const r=n.get(Is),i=n.get(D1);1===n.get(Qb)&&r.initialNavigation(),n.get(S1,null,_t.Optional)?.setUpPreloading(),n.get(Zb,null,_t.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const D1=new ye("",{factory:()=>new oe}),Qb=new ye("",{providedIn:"root",factory:()=>1}),S1=new ye("");function c7(n){return ea(0,[{provide:S1,useExisting:i7},{provide:T1,useExisting:n}])}const R1=new ye("ROUTER_FORROOT_GUARD"),l7=[BT,{provide:Dp,useClass:Mb},Is,Np,{provide:bd,useFactory:function C1(n){return n.routerState.root},deps:[Is]},Kb,[]];function d7(){return new mN("Router",Is)}let M1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[l7,[],{provide:Sd,multi:!0,useValue:t},{provide:R1,useFactory:g7,deps:[[Is,new hr,new Nf]]},{provide:rv,useValue:r||{}},r?.useHash?{provide:ou,useClass:XG}:{provide:ou,useClass:GN},{provide:Zb,useFactory:()=>{const n=Oe(_6),e=Oe(Rt),t=Oe(rv),r=Oe(nv),i=Oe(Dp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new b1(i,r,n,e,t)}},r?.preloadingStrategy?c7(r.preloadingStrategy).\u0275providers:[],{provide:mN,multi:!0,useFactory:d7},r?.initialNavigation?m7(r):[],r?.bindToComponentInputs?ea(8,[n1,{provide:Yy,useExisting:n1}]).\u0275providers:[],[{provide:P1,useFactory:A1},{provide:ST,multi:!0,useExisting:P1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(le(R1,8))};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({})}return n})();function g7(n){return"guarded"}function m7(n){return["disabled"===n.initialNavigation?ea(3,[{provide:ET,multi:!0,useFactory:()=>{const e=Oe(Is);return()=>{e.setUpLocationChangeListener()}}},{provide:Qb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ea(2,[{provide:Qb,useValue:0},{provide:ET,multi:!0,deps:[ei],useFactory:e=>{const t=e.get(QG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Is),s=e.get(D1);I1(i,()=>{r(!0)}),e.get(nv).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const P1=new ye("");let y7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-home"]],decls:35,vars:0,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),ht(4,"Bine ati venit in comunitatea "),Qe(5,"a",3),ht(6,"Romani in Seattle"),Ze()()()(),eu(7,"p"),Qe(8,"div",4)(9,"div",5)(10,"h2"),ht(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),Ze(),Qe(12,"p"),ht(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),Ze()()(),Qe(14,"div",4)(15,"div",6)(16,"h2"),ht(17,"Evenimente"),Ze(),Qe(18,"p"),ht(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),Ze()(),Qe(20,"div",6)(21,"h2"),ht(22,"Servicii"),Ze(),Qe(23,"p"),ht(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),Ze()(),Qe(25,"div",6)(26,"h2"),ht(27,"Oportunit\u0103\u021bi"),Ze(),Qe(28,"p"),ht(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),Ze()(),Qe(30,"div",6)(31,"h2"),ht(32,"Resurse"),Ze(),Qe(33,"p"),ht(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),Ze()()()())},styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();var Wn=Ge(534);(0,Wn.registerVersion)("firebase","10.12.2","app");const T7=new class w7 extends HO{}(class I7 extends $O{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Ja=new Xc("ANGULARFIRE2_VERSION");function Yb(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const sv=(n,e)=>{const t=e?[e]:(0,Wn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Bp{constructor(){return sv(b7)}}const b7="app-check";function Rd(){}class x1{zone;delegate;constructor(e,t=T7){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class C7{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rd,{},Rd,Rd)),t.pipe(pr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Md=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new x1(Zone.current)),this.insideAngular=t.run(()=>new x1(Zone.current,yb)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(le(Rt))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function gu(n){return Pd().ngZone.run(()=>n())}function N1(n){return n.pipe(In(Pd().outsideAngular))}function wi(n){return function D7(n){return function(t){return(t=t.lift(new C7(n.ngZone))).pipe(Dr(n.outsideAngular),In(n.insideAngular))}}(Pd())(n)}const S7=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),gu(()=>n.apply(void 0,r))},Xb=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=gu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rd,{},Rd,Rd))),r[s]=S7(r[s],t));const i=function A7(n){return Pd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ut){const s=Pd();return i.pipe(Dr(s.outsideAngular),In(s.insideAngular))}return gu(()=>i)}return i instanceof ut?i.pipe(wi):i instanceof Promise?gu(()=>new Promise((s,o)=>i.then(a=>gu(()=>s(a)),a=>gu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:gu(()=>i)};var _o=Ge(106);_o.Z.registerVersion("firebase","10.12.2","app-compat");const P7=["ngOnDestroy"];class O1{constructor(e){return e}}const jp=new ye("angularfire2.app.options"),$p=new ye("angularfire2.app.name");function ov(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=_o.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>_o.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;O7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new O1(o)}const O7=(n,...e)=>{},k7={provide:O1,useFactory:ov,deps:[jp,Rt,[new hr,$p]]};let F7=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:jp,useValue:t},{provide:$p,useValue:r}]}}constructor(t){_o.Z.registerVersion("angularfire",Ja.full,"core"),_o.Z.registerVersion("angularfire",Ja.full,"app-compat"),_o.Z.registerVersion("angular",_w.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(_s))};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[k7]})}return n})();function Jb(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function L7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(k1("error",`${e} was already initialized on the ${t} Firebase App with different settings.${V7?" You may need to reload as Firebase is not HMR aware.":""}`),k1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const V7=typeof module<"u"&&!!module.hot,k1=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ge(365);class U7 extends oe{constructor(e=1/0,t=1/0,r=_b){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function F1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ue({connector:()=>new U7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function L1(n,e){return M(e)?Fe(()=>n,e):Fe(()=>n)}const V1=new ye("angularfire2.auth.use-emulator"),U1=new ye("angularfire2.auth.settings"),B1=new ye("angularfire2.auth.tenant-id"),j1=new ye("angularfire2.auth.langugage-code"),$1=new ye("angularfire2.auth.use-device-language"),H1=new ye("angularfire.auth.persistence"),z1=(n,e,t,r,i,s,o,a)=>Jb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let q1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const T=new oe,R=k(void 0).pipe(In(o.outsideAngular),Fe(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ge.bind(Ge,365)))),Me(()=>ov(t,s,r)),Me(P=>z1(P,s,a,u,f,m,c,y)),F1({bufferSize:1,refCount:!1}));if(by(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{R.pipe(Qa()).subscribe();const P=R.pipe(Fe(G=>G.getRedirectResult().then(te=>te,()=>null)),wi,F1({bufferSize:1,refCount:!1})),H=R.pipe(Fe(G=>new ut(te=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(Ie=>te.next(Ie),Ie=>te.error(Ie),()=>te.complete()))})))),V=R.pipe(Fe(G=>new ut(te=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(Ie=>te.next(Ie),Ie=>te.error(Ie),()=>te.complete()))}))));this.authState=P.pipe(L1(H),Dr(o.outsideAngular),In(o.insideAngular)),this.user=P.pipe(L1(V),Dr(o.outsideAngular),In(o.insideAngular)),this.idToken=this.user.pipe(Fe(G=>G?b(G.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Fe(G=>G?b(G.getIdTokenResult()):k(null))),this.credential=S(P,T,this.authState.pipe(Ji(G=>!G))).pipe(Me(G=>G?.user?G:null),Dr(o.outsideAngular),In(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(P7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,R,s,{spy:{apply:(P,H,V)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&V.then(G=>T.next(G))}}})}static \u0275fac=function(r){return new(r||n)(le(jp),le($p,8),le(_s),le(Rt),le(Md),le(V1,8),le(U1,8),le(B1,8),le(j1,8),le($1,8),le(H1,8),le(Bp,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function e0(){return se((n,e)=>{let t,r=!1;n.subscribe(Te(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var mu,K1,ae=Ge(861),av=Ge(537),yo=Ge(879),ft=Ge(58),W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,N,L){L||(L=0);var z=Array(16);if("string"==typeof N)for(var q=0;16>q;++q)z[q]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(q=0;16>q;++q)z[q]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;var X=j.g[3],U=(N=j.g[0])+(X^(L=j.g[1])&((q=j.g[2])^X))+z[0]+3614090360&4294967295;U=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=(L=(q=(X=(N=L+(U<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[1]+3905402710&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[2]+606105819&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[3]+3250441966&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[4]+4118548399&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[5]+1200080426&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[6]+2821735955&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[7]+4249261313&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[8]+1770035416&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[9]+2336552879&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[10]+4294925233&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[11]+2304563134&4294967295)<<22&4294967295|U>>>10))+((U=N+(X^L&(q^X))+z[12]+1804603682&4294967295)<<7&4294967295|U>>>25))+((U=X+(q^N&(L^q))+z[13]+4254626195&4294967295)<<12&4294967295|U>>>20))+((U=q+(L^X&(N^L))+z[14]+2792965006&4294967295)<<17&4294967295|U>>>15))+((U=L+(N^q&(X^N))+z[15]+1236535329&4294967295)<<22&4294967295|U>>>10))+((U=N+(q^X&(L^q))+z[1]+4129170786&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[6]+3225465664&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[11]+643717713&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[0]+3921069994&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[5]+3593408605&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[10]+38016083&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[15]+3634488961&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[4]+3889429448&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[9]+568446438&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[14]+3275163606&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[3]+4107603335&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[8]+1163531501&4294967295)<<20&4294967295|U>>>12))+((U=N+(q^X&(L^q))+z[13]+2850285829&4294967295)<<5&4294967295|U>>>27))+((U=X+(L^q&(N^L))+z[2]+4243563512&4294967295)<<9&4294967295|U>>>23))+((U=q+(N^L&(X^N))+z[7]+1735328473&4294967295)<<14&4294967295|U>>>18))+((U=L+(X^N&(q^X))+z[12]+2368359562&4294967295)<<20&4294967295|U>>>12))+((U=N+(L^q^X)+z[5]+4294588738&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[8]+2272392833&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[11]+1839030562&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[14]+4259657740&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[1]+2763975236&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[4]+1272893353&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[7]+4139469664&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[10]+3200236656&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[13]+681279174&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[0]+3936430074&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[3]+3572445317&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[6]+76029189&4294967295)<<23&4294967295|U>>>9))+((U=N+(L^q^X)+z[9]+3654602809&4294967295)<<4&4294967295|U>>>28))+((U=X+(N^L^q)+z[12]+3873151461&4294967295)<<11&4294967295|U>>>21))+((U=q+(X^N^L)+z[15]+530742520&4294967295)<<16&4294967295|U>>>16))+((U=L+(q^X^N)+z[2]+3299628645&4294967295)<<23&4294967295|U>>>9))+((U=N+(q^(L|~X))+z[0]+4096336452&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[7]+1126891415&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[14]+2878612391&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[5]+4237533241&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[12]+1700485571&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[3]+2399980690&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[10]+4293915773&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[1]+2240044497&4294967295)<<21&4294967295|U>>>11))+((U=N+(q^(L|~X))+z[8]+1873313359&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[15]+4264355552&4294967295)<<10&4294967295|U>>>22))+((U=q+(N^(X|~L))+z[6]+2734768916&4294967295)<<15&4294967295|U>>>17))+((U=L+(X^(q|~N))+z[13]+1309151649&4294967295)<<21&4294967295|U>>>11))+((X=(N=L+((U=N+(q^(L|~X))+z[4]+4149444226&4294967295)<<6&4294967295|U>>>26))+((U=X+(L^(N|~q))+z[11]+3174756917&4294967295)<<10&4294967295|U>>>22))^((q=X+((U=q+(N^(X|~L))+z[2]+718787259&4294967295)<<15&4294967295|U>>>17))|~N))+z[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+X&4294967295}function o(j,N){this.h=N;for(var L=[],z=!0,q=j.length-1;0<=q;q--){var X=0|j[q];z&&X==N||(L[q]=X,z=!1)}this.g=L}(function e(j,N){function L(){}L.prototype=N.prototype,j.D=N.prototype,j.prototype=new L,j.prototype.constructor=j,j.C=function(z,q,X){for(var U=Array(arguments.length-2),bs=2;bs<arguments.length;bs++)U[bs-2]=arguments[bs];return N.prototype[q].apply(z,U)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,N){void 0===N&&(N=j.length);for(var L=N-this.blockSize,z=this.B,q=this.h,X=0;X<N;){if(0==q)for(;X<=L;)i(this,j,X),X+=this.blockSize;if("string"==typeof j){for(;X<N;)if(z[q++]=j.charCodeAt(X++),q==this.blockSize){i(this,z),q=0;break}}else for(;X<N;)if(z[q++]=j[X++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var L=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=255&L,L/=256;for(this.u(j),j=Array(16),N=L=0;4>N;++N)for(var z=0;32>z;z+=8)j[L++]=this.g[N]>>>z&255;return j};var a={};function c(j){return-128<=j&&128>j?function s(j,N){var L=a;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=N(j)}(j,function(N){return new o([0|N],0>N?-1:0)}):new o([0|j],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return P(u(-j));for(var N=[],L=1,z=0;j>=L;z++)N[z]=j/L|0,L*=4294967296;return new o(N,0)}var m=c(0),y=c(1),I=c(16777216);function T(j){if(0!=j.h)return!1;for(var N=0;N<j.g.length;N++)if(0!=j.g[N])return!1;return!0}function R(j){return-1==j.h}function P(j){for(var N=j.g.length,L=[],z=0;z<N;z++)L[z]=~j.g[z];return new o(L,~j.h).add(y)}function H(j,N){return j.add(P(N))}function V(j,N){for(;(65535&j[N])!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function G(j,N){this.g=j,this.h=N}function te(j,N){if(T(N))throw Error("division by zero");if(T(j))return new G(m,m);if(R(j))return N=te(P(j),N),new G(P(N.g),P(N.h));if(R(N))return N=te(j,P(N)),new G(P(N.g),N.h);if(30<j.g.length){if(R(j)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var L=y,z=N;0>=z.l(j);)L=Ie(L),z=Ie(z);var q=Re(L,1),X=Re(z,1);for(z=Re(z,2),L=Re(L,2);!T(z);){var U=X.add(z);0>=U.l(j)&&(q=q.add(L),X=U),z=Re(z,1),L=Re(L,1)}return N=H(j,q.j(N)),new G(q,N)}for(q=m;0<=j.l(N);){for(L=Math.max(1,Math.floor(j.m()/N.m())),z=48>=(z=Math.ceil(Math.log(L)/Math.LN2))?1:Math.pow(2,z-48),U=(X=u(L)).j(N);R(U)||0<U.l(j);)U=(X=u(L-=z)).j(N);T(X)&&(X=y),q=q.add(X),j=H(j,U)}return new G(q,j)}function Ie(j){for(var N=j.g.length+1,L=[],z=0;z<N;z++)L[z]=j.i(z)<<1|j.i(z-1)>>>31;return new o(L,j.h)}function Re(j,N){var L=N>>5;N%=32;for(var z=j.g.length-L,q=[],X=0;X<z;X++)q[X]=0<N?j.i(X+L)>>>N|j.i(X+L+1)<<32-N:j.i(X+L);return new o(q,j.h)}(n=o.prototype).m=function(){if(R(this))return-P(this).m();for(var j=0,N=1,L=0;L<this.g.length;L++){var z=this.i(L);j+=(0<=z?z:4294967296+z)*N,N*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(T(this))return"0";if(R(this))return"-"+P(this).toString(j);for(var N=u(Math.pow(j,6)),L=this,z="";;){var q=te(L,N).g,X=((0<(L=H(L,q.j(N))).g.length?L.g[0]:L.h)>>>0).toString(j);if(T(L=q))return X+z;for(;6>X.length;)X="0"+X;z=X+z}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return R(j=H(this,j))?-1:T(j)?0:1},n.abs=function(){return R(this)?P(this):this},n.add=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0,q=0;q<=N;q++){var X=z+(65535&this.i(q))+(65535&j.i(q)),U=(X>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);z=U>>>16,L[q]=(U&=65535)<<16|(X&=65535)}return new o(L,-2147483648&L[L.length-1]?-1:0)},n.j=function(j){if(T(this)||T(j))return m;if(R(this))return R(j)?P(this).j(P(j)):P(P(this).j(j));if(R(j))return P(this.j(P(j)));if(0>this.l(I)&&0>j.l(I))return u(this.m()*j.m());for(var N=this.g.length+j.g.length,L=[],z=0;z<2*N;z++)L[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<j.g.length;q++){var X=this.i(z)>>>16,U=65535&this.i(z),bs=j.i(q)>>>16,Ic=65535&j.i(q);L[2*z+2*q]+=U*Ic,V(L,2*z+2*q),L[2*z+2*q+1]+=X*Ic,V(L,2*z+2*q+1),L[2*z+2*q+1]+=U*bs,V(L,2*z+2*q+1),L[2*z+2*q+2]+=X*bs,V(L,2*z+2*q+2)}for(z=0;z<N;z++)L[z]=L[2*z+1]<<16|L[2*z];for(z=N;z<2*N;z++)L[z]=0;return new o(L,0)},n.A=function(j){return te(this,j).h},n.and=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)&j.i(z);return new o(L,this.h&j.h)},n.or=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)|j.i(z);return new o(L,this.h|j.h)},n.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),L=[],z=0;z<N;z++)L[z]=this.i(z)^j.i(z);return new o(L,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K1=G1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(j,N){if(0==j.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==j.charAt(0))return P(f(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),z=m,q=0;q<j.length;q+=8){var X=Math.min(8,j.length-q),U=parseInt(j.substring(q,q+X),N);8>X?(X=u(Math.pow(N,X)),z=z.j(X).add(u(U))):z=(z=z.j(L)).add(u(U))}return z},mu=G1.Integer=o}).apply(typeof W1<"u"?W1:typeof self<"u"?self:typeof window<"u"?window:{});var Z1,Q1,Hp,Y1,uv,t0,X1,J1,eF,cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ta={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof cv&&cv];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var K=h[D];if(!(K in E))break e;E=E[K]}(_=_(D=E[h=h[h.length-1]]))!=D&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,D=!1,K={next:function(){if(!D&&E<h.length){var ie=E++;return{value:_(ie,h[ie]),done:!1}}return D=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,D),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(D,K,ie){for(var Ce=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)Ce[cn-2]=arguments[cn];return _.prototype[K].apply(D,Ce)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let D=0;D<_;D++)E[D]=h[D];return E}return[]}function P(h,_){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const K=h.length||0,ie=D.length||0;h.length=K+ie;for(let Ce=0;Ce<ie;Ce++)h[K+Ce]=D[Ce]}else h.push(D)}}function V(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var Ie=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function Re(h,_,E){for(const D in h)_.call(E,h[D],D,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,D;for(let K=1;K<arguments.length;K++){for(E in D=arguments[K],D)h[E]=D[E];for(let ie=0;ie<L.length;ie++)E=L[ie],Object.prototype.hasOwnProperty.call(D,E)&&(h[E]=D[E])}}function q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function X(h){a.setTimeout(()=>{throw h},0)}function U(){var h=Mt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Ic=new class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Ve,h=>h.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,We=!1,Mt=new class bs{constructor(){this.h=this.g=null}add(_,E){const D=Ic.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}},sr=()=>{const h=a.Promise.resolve(void 0);qe=()=>{h.then(Cs)}};var Cs=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(E){X(E)}var _=Ic;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}We=!1};function Kn(){this.s=this.s,this.C=this.C}function An(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Kn.prototype.s=!1,Kn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},An.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function wc(h,_){if(An.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ie){e:{try{te(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:yD[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&wc.aa.h.call(this)}}T(wc,An);var yD={2:"touch",3:"pen",4:"mouse"};wc.prototype.h=function(){wc.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Zn="closure_listenable_"+(1e6*Math.random()|0),ga=0;function Hi(h,_,E,D,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=K,this.key=++ga,this.da=this.fa=!1}function ma(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Tc(h){this.src=h,this.g={},this.h=0}function vD(h,_){var E=_.type;if(E in h.g){var ie,D=h.g[E],K=Array.prototype.indexOf.call(D,_,void 0);(ie=0<=K)&&Array.prototype.splice.call(D,K,1),ie&&(ma(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function ED(h,_,E,D){for(var K=0;K<h.length;++K){var ie=h[K];if(!ie.da&&ie.listener==_&&ie.capture==!!E&&ie.ha==D)return K}return-1}Tc.prototype.add=function(h,_,E,D,K){var ie=h.toString();(h=this.g[ie])||(h=this.g[ie]=[],this.h++);var Ce=ED(h,_,D,K);return-1<Ce?(_=h[Ce],E||(_.fa=!1)):((_=new Hi(_,this.src,ie,!!D,K)).fa=E,h.push(_)),_};var ID="closure_lm_"+(1e6*Math.random()|0),wD={};function IB(h,_,E,D,K){if(D&&D.once)return TB(h,_,E,D,K);if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)IB(h,_[ie],E,D,K);return null}return E=AD(E),h&&h[Zn]?h.K(_,E,u(D)?!!D.capture:!!D,K):wB(h,_,E,!1,D,K)}function wB(h,_,E,D,K,ie){if(!_)throw Error("Invalid event type");var Ce=u(K)?!!K.capture:!!K,cn=bD(h);if(cn||(h[ID]=cn=new Tc(h)),(E=cn.add(_,E,D,Ce,ie)).proxy)return E;if(D=function jie(){const _=$ie;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=D,D.src=h,D.listener=E,h.addEventListener)Dn||(K=Ce),void 0===K&&(K=!1),h.addEventListener(_.toString(),D,K);else if(h.attachEvent)h.attachEvent(CB(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return E}function TB(h,_,E,D,K){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)TB(h,_[ie],E,D,K);return null}return E=AD(E),h&&h[Zn]?h.L(_,E,u(D)?!!D.capture:!!D,K):wB(h,_,E,!0,D,K)}function bB(h,_,E,D,K){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)bB(h,_[ie],E,D,K);else D=u(D)?!!D.capture:!!D,E=AD(E),h&&h[Zn]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=ED(ie=h.g[_],E,D,K))&&(ma(ie[E]),Array.prototype.splice.call(ie,E,1),0==ie.length&&(delete h.g[_],h.h--))):h&&(h=bD(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ED(_,E,D,K)),(E=-1<h?_[h]:null)&&TD(E))}function TD(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Zn])vD(_.i,h);else{var E=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(E,D,h.capture):_.detachEvent?_.detachEvent(CB(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=bD(_))?(vD(E,h),0==E.h&&(E.src=null,_[ID]=null)):ma(h)}}}function CB(h){return h in wD?wD[h]:wD[h]="on"+h}function $ie(h,_){if(h.da)h=!0;else{_=new wc(_,this);var E=h.listener,D=h.ha||h.src;h.fa&&TD(h),h=E.call(D,_)}return h}function bD(h){return(h=h[ID])instanceof Tc?h:null}var CD="__closure_events_fn_"+(1e9*Math.random()>>>0);function AD(h){return"function"==typeof h?h:(h[CD]||(h[CD]=function(_){return h.handleEvent(_)}),h[CD])}function ci(){Kn.call(this),this.i=new Tc(this),this.M=this,this.F=null}function Di(h,_){var E,D=h.F;if(D)for(E=[];D;D=D.F)E.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new An(_,h);else if(_ instanceof An)_.target=_.target||h;else{var K=_;z(_=new An(D,h),K)}if(K=!0,E)for(var ie=E.length-1;0<=ie;ie--){var Ce=_.g=E[ie];K=ME(Ce,D,!0,_)&&K}if(K=ME(Ce=_.g=h,D,!0,_)&&K,K=ME(Ce,D,!1,_)&&K,E)for(ie=0;ie<E.length;ie++)K=ME(Ce=_.g=E[ie],D,!1,_)&&K}function ME(h,_,E,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,ie=0;ie<_.length;++ie){var Ce=_[ie];if(Ce&&!Ce.da&&Ce.capture==E){var cn=Ce.listener,qr=Ce.ha||Ce.src;Ce.fa&&vD(h.i,Ce),K=!1!==cn.call(qr,D)&&K}}return K&&!D.defaultPrevented}function AB(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function DB(h){h.g=AB(()=>{h.g=null,h.i&&(h.i=!1,DB(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(ci,Kn),ci.prototype[Zn]=!0,ci.prototype.removeEventListener=function(h,_,E,D){bB(this,h,_,E,D)},ci.prototype.N=function(){if(ci.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],D=0;D<E.length;D++)ma(E[D]);delete h.g[_],h.h--}}this.F=null},ci.prototype.K=function(h,_,E,D){return this.i.add(String(h),_,!1,E,D)},ci.prototype.L=function(h,_,E,D){return this.i.add(String(h),_,!0,E,D)};class Hie extends Kn{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:DB(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jg(h){Kn.call(this),this.h=h,this.g={}}T(jg,Kn);var SB=[];function RB(h){Re(h.g,function(_,E){this.g.hasOwnProperty(E)&&TD(_)},h),h.g={}}jg.prototype.N=function(){jg.aa.N.call(this),RB(this)},jg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var DD=a.JSON.stringify,zie=a.JSON.parse,qie=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function SD(){}function PB(){}SD.prototype.h=null;var $g={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function RD(){An.call(this,"d")}function MD(){An.call(this,"c")}T(RD,An),T(MD,An);var $u={},xB=null;function PE(){return xB=xB||new ci}function NB(h){An.call(this,$u.La,h)}function Hg(h){const _=PE();Di(_,new NB(_))}function OB(h,_){An.call(this,$u.STAT_EVENT,h),this.stat=_}function Si(h){const _=PE();Di(_,new OB(_,h))}function kB(h,_){An.call(this,$u.Ma,h),this.size=_}function zg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function qg(){this.g=!0}function Ih(h,_,E,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Zie(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var D=E[h];if(!(2>D.length)){var K=D[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var Ce=1;Ce<K.length;Ce++)K[Ce]=""}}}return DD(E)}catch{return _}}(h,E)+(D?" "+D:"")})}$u.La="serverreachability",T(NB,An),$u.STAT_EVENT="statevent",T(OB,An),$u.Ma="timingevent",T(kB,An),qg.prototype.xa=function(){this.g=!1},qg.prototype.info=function(){};var PD,xE={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function NE(){}function bc(h,_,E,D){this.j=h,this.i=_,this.l=E,this.R=D||1,this.U=new jg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new LB}function LB(){this.i=null,this.g="",this.h=!1}T(NE,SD),NE.prototype.g=function(){return new XMLHttpRequest},NE.prototype.i=function(){return{}},PD=new NE;var VB={},xD={};function ND(h,_,E){h.L=1,h.v=LE(_a(_)),h.m=E,h.P=!0,UB(h,null)}function UB(h,_){h.F=Date.now(),OE(h),h.A=_a(h.v);var E=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),JB(E.i,"t",D),h.C=0,E=h.j.J,h.h=new LB,h.g=_j(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Hie(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,D=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(SB[0]=K.toString()),K=SB);for(var ie=0;ie<K.length;ie++){var Ce=IB(E,K[ie],D||_.handleEvent,!1,_.h||_);if(!Ce)break;_.g[Ce.key]=Ce}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Hg(),function Wie(h,_,E,D,K,ie){h.info(function(){if(h.g)if(ie)for(var Ce="",cn=ie.split("&"),qr=0;qr<cn.length;qr++){var $t=cn[qr].split("=");if(1<$t.length){var ui=$t[0];$t=$t[1];var li=ui.split("_");Ce=2<=li.length&&"type"==li[1]?Ce+(ui+"=")+$t+"&":Ce+(ui+"=redacted&")}}else Ce=null;else Ce=ie;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+_+"\n"+E+"\n"+Ce})}(h.i,h.u,h.A,h.l,h.R,h.m)}function BB(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Qie(h,_){var E=h.C,D=_.indexOf("\n",E);return-1==D?xD:(E=Number(_.substring(E,D)),isNaN(E)?VB:(D+=1)+E>_.length?xD:(_=_.slice(D,D+E),h.C=D+E,_))}function OE(h){h.S=Date.now()+h.I,jB(h,h.I)}function jB(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=zg(y(h.ba,h),_)}function OD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Wg(h){0==h.j.G||h.J||fj(h.j,h)}function Hu(h){OD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,RB(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function kD(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||FD(E.h,h)))if(!h.K&&FD(E.h,h)&&3==E.G){try{var D=E.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var K=D;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;$E(E),BE(E)}BD(E),Si(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=zg(y(E.Za,E),6e3));if(1>=zB(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else qu(E,11)}else if((h.K||E.g==h)&&$E(E),!V(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let $t=K[_];if(E.T=$t[0],$t=$t[1],2==E.G)if("c"==$t[0]){E.K=$t[1],E.ia=$t[2];const ui=$t[3];null!=ui&&(E.la=ui,E.j.info("VER="+E.la));const li=$t[4];null!=li&&(E.Aa=li,E.j.info("SVER="+E.Aa));const bh=$t[5];null!=bh&&"number"==typeof bh&&0<bh&&(E.L=D=1.5*bh,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const qs=h.g;if(qs){const zE=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zE){var ie=D.h;ie.g||-1==zE.indexOf("spdy")&&-1==zE.indexOf("quic")&&-1==zE.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(LD(ie,ie.h),ie.h=null))}if(D.D){const $D=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;$D&&(D.ya=$D,Sn(D.I,D.D,$D))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ce=h;if((D=E).qa=mj(D,D.J?D.ia:null,D.W),Ce.K){qB(D.h,Ce);var cn=Ce,qr=D.L;qr&&(cn.I=qr),cn.B&&(OD(cn),OE(cn)),D.g=Ce}else dj(D);0<E.i.length&&jE(E)}else"stop"!=$t[0]&&"close"!=$t[0]||qu(E,7);else 3==E.G&&("stop"==$t[0]||"close"==$t[0]?"stop"==$t[0]?qu(E,7):UD(E):"noop"!=$t[0]&&E.l&&E.l.ta($t),E.v=0)}Hg()}catch{}}function $B(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function HB(h){return!!h.h||!!h.g&&h.g.size>=h.j}function zB(h){return h.h?1:h.g?h.g.size:0}function FD(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function LD(h,_){h.g?h.g.add(_):h.h=_}function qB(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function WB(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function GB(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Jie(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const D in h)_[E++]=D;return _}}}(h),D=function Xie(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,D=0;D<E;D++)_.push(h[D]);return _}for(D in _=[],E=0,h)_[E++]=h[D];return _}(h),K=D.length,ie=0;ie<K;ie++)_.call(void 0,D[ie],E&&E[ie],h)}bc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==ya(h)?_.j():this.Y(h)},bc.prototype.Y=function(h){try{if(h==this.g)e:{const li=ya(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>li)&&(3!=li||this.g&&(this.h.h||this.g.oa()||oj(this.g)))){this.J||4!=li||7==_||Hg(),OD(this);var E=this.g.Z();this.X=E;t:if(BB(this)){var D=oj(this.g);h="";var K=D.length,ie=4==ya(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hu(this),Wg(this);var Ce="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ie&&_==K-1)});D.length=0,this.h.g+=h,this.C=0,Ce=this.h.g}else Ce=this.g.oa();if(this.o=200==E,function Gie(h,_,E,D,K,ie,Ce){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+ie+" "+Ce})}(this.i,this.u,this.A,this.l,this.R,li,E),this.o){if(this.T&&!this.K){t:{if(this.g){var cn,qr=this.g;if((cn=qr.g?qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(cn)){var $t=cn;break t}}$t=null}if(!(E=$t)){this.o=!1,this.s=3,Si(12),Hu(this),Wg(this);break e}Ih(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kD(this,E)}if(this.P){let qs;for(E=!0;!this.J&&this.C<Ce.length;){if(qs=Qie(this,Ce),qs==xD){4==li&&(this.s=4,Si(14),E=!1),Ih(this.i,this.l,null,"[Incomplete Response]");break}if(qs==VB){this.s=4,Si(15),Ih(this.i,this.l,Ce,"[Invalid Chunk]"),E=!1;break}Ih(this.i,this.l,qs,null),kD(this,qs)}if(BB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=li||0!=Ce.length||this.h.h||(this.s=1,Si(16),E=!1),this.o=this.o&&E,E){if(0<Ce.length&&!this.W){this.W=!0;var ui=this.j;ui.g==this&&ui.ba&&!ui.M&&(ui.j.info("Great, no buffering proxy detected. Bytes received: "+Ce.length),jD(ui),ui.M=!0,Si(11))}}else Ih(this.i,this.l,Ce,"[Invalid Chunked Response]"),Hu(this),Wg(this)}else Ih(this.i,this.l,Ce,null),kD(this,Ce);4==li&&Hu(this),this.o&&!this.J&&(4==li?fj(this.j,this):(this.o=!1,OE(this)))}else(function fse(h){const _={};h=(h.g&&2<=ya(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(V(h[D]))continue;var E=q(h[D]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ie=_[K]||[];_[K]=ie,ie.push(E)}!function j(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(D){return D.join(", ")})})(this.g),400==E&&0<Ce.indexOf("Unknown SID")?(this.s=3,Si(12)):(this.s=0,Si(13)),Hu(this),Wg(this)}}}catch{}},bc.prototype.cancel=function(){this.J=!0,Hu(this)},bc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Kie(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Hg(),Si(17)),Hu(this),this.s=2,Wg(this)):jB(this,this.S-h)},$B.prototype.cancel=function(){if(this.i=WB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var KB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zu(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zu){this.h=h.h,kE(this,h.j),this.o=h.o,this.g=h.g,FE(this,h.s),this.l=h.l;var _=h.i,E=new Zg;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ZB(this,E),this.m=h.m}else h&&(_=String(h).match(KB))?(this.h=!1,kE(this,_[1]||"",!0),this.o=Gg(_[2]||""),this.g=Gg(_[3]||"",!0),FE(this,_[4]),this.l=Gg(_[5]||"",!0),ZB(this,_[6]||"",!0),this.m=Gg(_[7]||"")):(this.h=!1,this.i=new Zg(null,this.h))}function _a(h){return new zu(h)}function kE(h,_,E){h.j=E?Gg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function FE(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ZB(h,_,E){_ instanceof Zg?(h.i=_,function ose(h,_){_&&!h.j&&(Cc(h),h.i=null,h.g.forEach(function(E,D){var K=D.toLowerCase();D!=K&&(YB(this,D),JB(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Kg(_,ise)),h.i=new Zg(_,h.h))}function Sn(h,_,E){h.i.set(_,E)}function LE(h){return Sn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Gg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Kg(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,tse),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tse(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}zu.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Kg(_,QB,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Kg(_,QB,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Kg(E,"/"==E.charAt(0)?rse:nse,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Kg(E,sse)),h.join("")};var h,QB=/[#\/\?@]/g,nse=/[#\?:]/g,rse=/[#\?]/g,ise=/[#\?@]/g,sse=/#/g;function Zg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Cc(h){h.g||(h.g=new Map,h.h=0,h.i&&function ese(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var D=h[E].indexOf("="),K=null;if(0<=D){var ie=h[E].substring(0,D);K=h[E].substring(D+1)}else ie=h[E];_(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function YB(h,_){Cc(h),_=wh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function XB(h,_){return Cc(h),_=wh(h,_),h.g.has(_)}function JB(h,_,E){YB(h,_),0<E.length&&(h.i=null,h.g.set(wh(h,_),R(E)),h.h+=E.length)}function wh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ac(h,_,E,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(E)}catch{}}function use(){this.g=new qie}function lse(h,_,E){const D=E||"";try{GB(h,function(K,ie){let Ce=K;u(K)&&(Ce=DD(K)),_.push(D+ie+"="+encodeURIComponent(Ce))})}catch(K){throw _.push(D+"type="+encodeURIComponent("_badmap")),K}}function Qg(h){this.l=h.Ub||null,this.j=h.eb||!1}function VE(h,_){ci.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ej(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Yg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xg(h)}function Xg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function tj(h){let _="";return Re(h,function(E,D){_+=D,_+=":",_+=E,_+="\r\n"}),_}function VD(h,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=tj(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Sn(h,_,E))}function Qn(h){ci.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Zg.prototype).add=function(h,_){Cc(this),this.i=null,h=wh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Cc(this),this.g.forEach(function(E,D){E.forEach(function(K){h.call(_,K,D,this)},this)},this)},n.na=function(){Cc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let D=0;D<_.length;D++){const K=h[D];for(let ie=0;ie<K.length;ie++)E.push(_[D])}return E},n.V=function(h){Cc(this);let _=[];if("string"==typeof h)XB(this,h)&&(_=_.concat(this.g.get(wh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Cc(this),this.i=null,XB(this,h=wh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var D=_[E];const ie=encodeURIComponent(String(D)),Ce=this.V(D);for(D=0;D<Ce.length;D++){var K=ie;""!==Ce[D]&&(K+="="+encodeURIComponent(String(Ce[D]))),h.push(K)}}return this.i=h.join("&")},T(Qg,SD),Qg.prototype.g=function(){return new VE(this.l,this.j)},Qg.prototype.i=(h={},function(){return h}),T(VE,ci),(n=VE.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Xg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xg(this)),this.g&&(this.readyState=3,Xg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ej(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Yg(this):Xg(this),3==this.readyState&&ej(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Yg(this))},n.Qa=function(h){this.g&&(this.response=h,Yg(this))},n.ga=function(){this.g&&Yg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(VE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Qn,ci);var dse=/^https?$/i,hse=["POST","PUT"];function nj(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,rj(h),UE(h)}function rj(h){h.A||(h.A=!0,Di(h,"complete"),Di(h,"error"))}function ij(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=ya(h)||2!=h.Z()))if(h.u&&4==ya(h))AB(h.Ea,0,h);else if(Di(h,"readystatechange"),4==ya(h)){h.h=!1;try{const Ce=h.Z();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=0===Ce){var K=String(h.D).match(KB)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!dse.test(K?K.toLowerCase():"")}E=D}if(E)Di(h,"complete"),Di(h,"success");else{h.m=6;try{var ie=2<ya(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",rj(h)}}finally{UE(h)}}}function UE(h,_){if(h.g){sj(h);const E=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Di(h,"ready");try{E.onreadystatechange=D}catch{}}}function sj(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function ya(h){return h.g?h.g.readyState:0}function oj(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jg(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function aj(h){this.Aa=0,this.i=[],this.j=new qg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jg("baseRetryDelayMs",5e3,h),this.cb=Jg("retryDelaySeedMs",1e4,h),this.Wa=Jg("forwardChannelMaxRetries",2,h),this.wa=Jg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $B(h&&h.concurrentRequestLimit),this.Da=new use,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function UD(h){if(cj(h),3==h.G){var _=h.U++,E=_a(h.I);if(Sn(E,"SID",h.K),Sn(E,"RID",_),Sn(E,"TYPE","terminate"),em(h,E),(_=new bc(h,h.j,_)).L=2,_.v=LE(_a(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=_j(_.j,null),_.g.ea(_.v)),_.F=Date.now(),OE(_)}gj(h)}function BE(h){h.g&&(jD(h),h.g.cancel(),h.g=null)}function cj(h){BE(h),h.u&&(a.clearTimeout(h.u),h.u=null),$E(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function jE(h){if(!HB(h.h)&&!h.s){h.s=!0;var _=h.Ga;qe||sr(),We||(qe(),We=!0),Mt.add(_,h),h.B=0}}function uj(h,_){var E;E=_?_.l:h.U++;const D=_a(h.I);Sn(D,"SID",h.K),Sn(D,"RID",E),Sn(D,"AID",h.T),em(h,D),h.m&&h.o&&VD(D,h.m,h.o),E=new bc(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=lj(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),LD(h.h,E),ND(E,D,_)}function em(h,_){h.H&&Re(h.H,function(E,D){Sn(_,D,E)}),h.l&&GB({},function(E,D){Sn(_,D,E)})}function lj(h,_,E){E=Math.min(h.i.length,E);var D=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let ie=-1;for(;;){const Ce=["count="+E];-1==ie?0<E?(ie=K[0].g,Ce.push("ofs="+ie)):ie=0:Ce.push("ofs="+ie);let cn=!0;for(let qr=0;qr<E;qr++){let $t=K[qr].g;const ui=K[qr].map;if($t-=ie,0>$t)ie=Math.max(0,K[qr].g-100),cn=!1;else try{lse(ui,Ce,"req"+$t+"_")}catch{D&&D(ui)}}if(cn){D=Ce.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,D}function dj(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;qe||sr(),We||(qe(),We=!0),Mt.add(_,h),h.v=0}}function BD(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=zg(y(h.Fa,h),pj(h,h.v)),h.v++,0))}function jD(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function hj(h){h.g=new bc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=_a(h.qa);Sn(_,"RID","rpc"),Sn(_,"SID",h.K),Sn(_,"AID",h.T),Sn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Sn(_,"TO",h.ja),Sn(_,"TYPE","xmlhttp"),em(h,_),h.m&&h.o&&VD(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=LE(_a(_)),E.m=null,E.P=!0,UB(E,h)}function $E(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function fj(h,_){var E=null;if(h.g==_){$E(h),jD(h),h.g=null;var D=2}else{if(!FD(h.h,_))return;E=_.D,qB(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;Di(D=PE(),new kB(D,E)),jE(h)}else dj(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==D&&function pse(h,_){return!(zB(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=zg(y(h.Ga,h,_),pj(h,h.B)),h.B++,0)))}(h,_)||2==D&&BD(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:qu(h,5);break;case 4:qu(h,10);break;case 3:qu(h,6);break;default:qu(h,2)}}function pj(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function qu(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),D=h.Xa;const K=!D;D=new zu(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||kE(D,"https"),LE(D),K?function ase(h,_){const E=new qg;if(a.Image){const D=new Image;D.onload=I(Ac,E,"TestLoadImage: loaded",!0,_,D),D.onerror=I(Ac,E,"TestLoadImage: error",!1,_,D),D.onabort=I(Ac,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=I(Ac,E,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),E):function cse(h,_){new qg;const D=new AbortController,K=setTimeout(()=>{D.abort(),Ac(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(ie=>{clearTimeout(K),Ac(0,0,!!ie.ok,_)}).catch(()=>{clearTimeout(K),Ac(0,0,!1,_)})}(D.toString(),E)}else Si(2);h.G=0,h.l&&h.l.sa(_),gj(h),cj(h)}function gj(h){if(h.G=0,h.ka=[],h.l){const _=WB(h.h);(0!=_.length||0!=h.i.length)&&(P(h.ka,_),P(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function mj(h,_,E){var D=E instanceof zu?_a(E):new zu(E);if(""!=D.g)_&&(D.g=_+"."+D.g),FE(D,D.s);else{var K=a.location;D=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ie=new zu(null);D&&kE(ie,D),_&&(ie.g=_),K&&FE(ie,K),E&&(ie.l=E),D=ie}return _=h.ya,(E=h.D)&&_&&Sn(D,E,_),Sn(D,"VER",h.la),em(h,D),D}function _j(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Qn(h.Ca&&!h.pa?new Qg({eb:E}):h.pa)).Ha(h.J),_}function yj(){}function HE(){}function ss(h,_){ci.call(this),this.g=new aj(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!V(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Th(this)}function vj(h){RD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function Ej(){MD.call(this),this.status=1}function Th(h){this.g=h}(n=Qn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():PD.g(),this.v=function MB(h){return h.h||(h.h=h.i())}(this.o?this.o:PD),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){return void nj(this,ie)}if(h=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)E.set(K,D[K]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ie of D.keys())E.set(ie,D.get(ie))}D=Array.from(E.keys()).find(ie=>"content-type"==ie.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hse,_,void 0))||D||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ce]of E)this.g.setRequestHeader(ie,Ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sj(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){nj(this,ie)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Di(this,"complete"),Di(this,"abort"),UE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),UE(this,!0)),Qn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ij(this):this.bb())},n.bb=function(){ij(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ya(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),zie(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=aj.prototype).la=8,n.G=1,n.connect=function(h,_,E,D){Si(0),this.W=h,this.H=_||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=mj(this,null,this.W),jE(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new bc(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=N(ie),z(ie,this.S)):ie=this.S),null!==this.m||this.O||(K.H=ie,ie=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=lj(this,K,_),Sn(E=_a(this.I),"RID",h),Sn(E,"CVER",22),this.D&&Sn(E,"X-HTTP-Session-Id",this.D),em(this,E),ie&&(this.O?_="headers="+encodeURIComponent(String(tj(ie)))+"&"+_:this.m&&VD(E,this.m,ie)),LD(this.h,K),this.Ua&&Sn(E,"TYPE","init"),this.P?(Sn(E,"$req",_),Sn(E,"SID","null"),K.T=!0,ND(K,E,null)):ND(K,E,_),this.G=2}}else 3==this.G&&(h?uj(this,h):0==this.i.length||HB(this.h)||uj(this))},n.Fa=function(){if(this.u=null,hj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=zg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Si(10),BE(this),hj(this))},n.Za=function(){null!=this.C&&(this.C=null,BE(this),BD(this),Si(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Si(2)):(this.j.info("Failed to ping google.com"),Si(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=yj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},HE.prototype.g=function(h,_){return new ss(h,_)},T(ss,ci),ss.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ss.prototype.close=function(){UD(this.g)},ss.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=DD(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&jE(_)},ss.prototype.N=function(){this.g.l=null,delete this.j,UD(this.g),delete this.g,ss.aa.N.call(this)},T(vj,RD),T(Ej,MD),T(Th,yj),Th.prototype.ua=function(){Di(this.g,"a")},Th.prototype.ta=function(h){Di(this.g,new vj(h))},Th.prototype.sa=function(h){Di(this.g,new Ej)},Th.prototype.ra=function(){Di(this.g,"b")},HE.prototype.createWebChannel=HE.prototype.g,ss.prototype.send=ss.prototype.o,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,eF=ta.createWebChannelTransport=function(){return new HE},J1=ta.getStatEventTarget=function(){return PE()},X1=ta.Event=$u,t0=ta.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xE.NO_ERROR=0,xE.TIMEOUT=8,xE.HTTP_ERROR=6,uv=ta.ErrorCode=xE,FB.COMPLETE="complete",Y1=ta.EventType=FB,PB.EventType=$g,$g.OPEN="a",$g.CLOSE="b",$g.ERROR="c",$g.MESSAGE="d",ci.prototype.listen=ci.prototype.K,Hp=ta.WebChannel=PB,Q1=ta.FetchXmlHttpFactory=Qg,Qn.prototype.listenOnce=Qn.prototype.L,Qn.prototype.getLastError=Qn.prototype.Ka,Qn.prototype.getLastErrorCode=Qn.prototype.Ba,Qn.prototype.getStatus=Qn.prototype.Z,Qn.prototype.getResponseJson=Qn.prototype.Oa,Qn.prototype.getResponseText=Qn.prototype.oa,Qn.prototype.send=Qn.prototype.ea,Qn.prototype.setWithCredentials=Qn.prototype.Ha,Z1=ta.XhrIo=Qn}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});const tF="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let xd="10.12.1";const ec=new yo.Yd("@firebase/firestore");function Nd(){return ec.logLevel}function ve(n,...e){if(ec.logLevel<=yo.in.DEBUG){const t=e.map(n0);ec.debug(`Firestore (${xd}): ${n}`,...t)}}function rr(n,...e){if(ec.logLevel<=yo.in.ERROR){const t=e.map(n0);ec.error(`Firestore (${xd}): ${n}`,...t)}}function Bi(n,...e){if(ec.logLevel<=yo.in.WARN){const t=e.map(n0);ec.warn(`Firestore (${xd}): ${n}`,...t)}}function n0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ke(n="Unexpected state"){const e=`FIRESTORE (${xd}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function $e(n,e){n||ke()}function be(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends ft.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class z7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q7{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new br,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ae.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new br)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e("string"==typeof r.accessToken),new nF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(null===e||"string"==typeof e),new Rr(e)}}class W7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class G7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new W7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e("string"==typeof t.token),this.R=t.token,new rF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Z7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class iF{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Z7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ot(n,e){return n<e?-1:n>e?1:0}function Od(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sF(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Pn(0,0))}static max(){return new ze(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zp{constructor(e,t,r){void 0===t?t=0:t>e.length&&ke(),void 0===r?r=e.length-t:r>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nt extends zp{construct(e,t,r){return new Nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const Q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends zp{construct(e,t,r){return new Tn(e,t,r)}static isValidIdentifier(e){return Q7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Nt.fromString(e))}static fromName(e){return new Se(Nt.fromString(e).popFirst(5))}static empty(){return new Se(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Nt(e.slice()))}}class kd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function r0(n){return n.fields.find(e=>2===e.kind)}function _u(n){return n.fields.filter(e=>2!==e.kind)}kd.UNKNOWN_ID=-1;class yu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fd(0,es.min())}}function oF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new es(i,Se.empty(),e)}function aF(n){return new es(n.readTime,n.key,-1)}class es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new es(ze.min(),Se.empty(),-1)}static max(){return new es(ze.max(),Se.empty(),-1)}}function s0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:ot(n.largestBatchId,e.largestBatchId))}const cF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tc(n){return o0.apply(this,arguments)}function o0(){return(o0=(0,ae.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==cF)throw n;ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class lv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new br,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new qp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=a0(r.target.error);this.V.reject(new qp(e,i))}}static open(e,t,r,i){try{return new lv(t,e.transaction(i,r))}catch(s){throw new qp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eQ(t)}}class vo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===vo.S((0,ft.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),vu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ft.hl)())return!1;if(vo.C())return!0;const e=(0,ft.z$)(),t=vo.S(e),r=0<t&&t<10,i=lF(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new qp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new me(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new me(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new qp(e,a))},s.onupgradeneeded=o=>{ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=lv.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),Y.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(ve("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function lF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class J7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vu(this.B.delete())}}class qp extends me{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nc(n){return"IndexedDbTransactionError"===n.name}class eQ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vu(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),vu(this.store.add(e))}get(e){return vu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),vu(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),vu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=s=>{const o=a0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new J7(a),u=t(a.primaryKey,a.value,c);if(u instanceof Y){const f=u.catch(m=>(c.done(),Y.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vu(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=a0(r.target.error);t(i)}})}let dF=!1;function a0(n){const e=vo.S((0,ft.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dF||(dF=!0,setTimeout(()=>{throw r},0)),r}}return n}class tQ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ve("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){nc(r)?ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield tc(r)}yield t.X(6e4)}))}}class nQ{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Y.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ve("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ve("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=aF(s);s0(o,r)>0&&(r=o)}),new es(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ts=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Wp(n){return null==n}function Gp(n){return 0===n&&1/n==-1/0}function hF(n){return"number"==typeof n&&Number.isInteger(n)&&!Gp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fF(e)),e=rQ(n.get(t),e);return fF(e)}function rQ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function fF(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if($e(e>=2),2===e)return $e("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Nt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ke(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ke()}s=o+2}return new Nt(r)}const pF=["userId","batchId"];function dv(n,e){return[n,ri(e)]}function gF(n,e,t){return[n,ri(e),t]}const iQ={},sQ=["prefixPath","collectionGroup","readTime","documentId"],oQ=["prefixPath","collectionGroup","documentId"],aQ=["collectionGroup","readTime","prefixPath","documentId"],cQ=["canonicalId","targetId"],uQ=["targetId","path"],lQ=["path","targetId"],dQ=["collectionId","parent"],hQ=["indexId","uid"],fQ=["uid","sequenceNumber"],pQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gQ=["indexId","uid","orderedDocumentKey"],mQ=["userId","collectionPath","documentId"],_Q=["userId","collectionPath","largestBatchId"],yQ=["userId","collectionGroup","largestBatchId"],mF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vQ=[...mF,"documentOverlays"],_F=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yF=_F,vF=[...yF,"indexConfiguration","indexState","indexEntries"],EQ=vF;class c0 extends uF{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Mr(n,e){const t=be(n);return vo.F(t._e,e)}function EF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hv(this.root,e,this.comparator,!1)}getReverseIterator(){return new hv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hv(this.root,e,this.comparator,!0)}}class hv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??$r.RED,this.left=i??$r.EMPTY,this.right=s??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new $r(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TF(this.data.getIterator())}getIteratorFrom(e){return new TF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class TF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ld(n){return n.hasNext()?n.getNext():void 0}class ji{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new ji([])}unionWith(e){let t=new nn(Tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Od(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bF("Invalid base64 string: "+s):s}}(e);return new Cr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const wQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if($e(!!n),"string"==typeof n){let e=0;const t=wQ.exec(n);if($e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ra(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function fv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pv(n){const e=n.mapValue.fields.__previous_value__;return fv(e)?pv(e):e}function Kp(n){const e=na(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class TQ{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class ic{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ic("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}const sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gv={nullValue:"NULL_VALUE"};function oc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fv(n)?4:SF(n)?9007199254740991:10:ke()}function Io(n,e){if(n===e)return!0;const t=oc(n);if(t!==oc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kp(n).isEqual(Kp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=na(i.timestampValue),a=na(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ra(n.bytesValue).isEqual(ra(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Gn(i.geoPointValue.latitude)===Gn(s.geoPointValue.latitude)&&Gn(i.geoPointValue.longitude)===Gn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Gn(i.integerValue)===Gn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Gn(i.doubleValue),a=Gn(s.doubleValue);return o===a?Gp(o)===Gp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Od(n.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EF(o)!==EF(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Io(o[c],a[c])))return!1;return!0}(n,e);default:return ke()}var s}function Zp(n,e){return void 0!==(n.values||[]).find(t=>Io(t,e))}function ac(n,e){if(n===e)return 0;const t=oc(n),r=oc(e);if(t!==r)return ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Gn(s.integerValue||s.doubleValue),c=Gn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return CF(n.timestampValue,e.timestampValue);case 4:return CF(Kp(n),Kp(e));case 5:return ot(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ra(s),c=ra(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=ot(a[u],c[u]);if(0!==f)return f}return ot(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(Gn(s.latitude),Gn(o.latitude));return 0!==a?a:ot(Gn(s.longitude),Gn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=ac(a[u],c[u]);if(f)return f}return ot(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===sc.mapValue&&o===sc.mapValue)return 0;if(s===sc.mapValue)return 1;if(o===sc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=ot(c[m],f[m]);if(0!==y)return y;const I=ac(a[c[m]],u[f[m]]);if(0!==I)return I}return ot(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ke()}}function CF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ot(n,e);const t=na(n),r=na(e),i=ot(t.seconds,r.seconds);return 0!==i?i:ot(t.nanos,r.nanos)}function Vd(n){return u0(n)}function u0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=na(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ra(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=u0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${u0(t.fields[o])}`;return i+"}"}(n.mapValue):ke()}function Eu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l0(n){return!!n&&"integerValue"in n}function Qp(n){return!!n&&"arrayValue"in n}function AF(n){return!!n&&"nullValue"in n}function DF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _v(n){return!!n&&"mapValue"in n}function Yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bQ(n){return"nullValue"in n?gv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Eu(ic.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ke()}function CQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Eu(ic.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sc:ke()}function RF(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MF(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_v(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Yp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());_v(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_v(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){rc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hr(Yp(this.value))}}function PF(n){const e=[];return rc(n.fields,(t,r)=>{const i=new Tn([t]);if(_v(r)){const s=PF(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ji(e)}class bn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bn(e,0,ze.min(),ze.min(),ze.min(),Hr.empty(),0)}static newFoundDocument(e,t,r,i){return new bn(e,1,t,ze.min(),r,i,0)}static newNoDocument(e,t){return new bn(e,2,t,ze.min(),ze.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,ze.min(),ze.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cc{constructor(e,t){this.position=e,this.inclusive=t}}function xF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Se.comparator(Se.fromName(o.referenceValue),t.key):ac(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function NF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Io(n.position[t],e.position[t]))return!1;return!0}class Xp{constructor(e,t="asc"){this.field=e,this.dir=t}}function AQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class OF{}class Ot extends OF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new DQ(e,t,r):"array-contains"===t?new MQ(e,r):"in"===t?new BF(e,r):"not-in"===t?new PQ(e,r):"array-contains-any"===t?new xQ(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new SQ(e,r):new RQ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ac(t,this.value)):null!==t&&oc(this.value)===oc(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends OF{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jt(e,t)}matches(e){return Ud(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ud(n){return"and"===n.op}function d0(n){return"or"===n.op}function h0(n){return kF(n)&&Ud(n)}function kF(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function f0(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Vd(n.value);if(h0(n))return n.filters.map(e=>f0(e)).join(",");{const e=n.filters.map(t=>f0(t)).join(",");return`${n.op}(${e})`}}function FF(n,e){return n instanceof Ot?(r=n,(i=e)instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&Io(r.value,i.value)):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&FF(o,i.filters[a]),!0)}(n,e):void ke();var r,i}function LF(n,e){const t=n.filters.concat(e);return Jt.create(t,n.op)}function VF(n){return n instanceof Ot?`${(t=n).field.canonicalString()} ${t.op} ${Vd(t.value)}`:n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(VF).join(" ,")+"}"}(n):"Filter";var t}class DQ extends Ot{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class SQ extends Ot{constructor(e,t){super(e,"in",t),this.keys=UF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RQ extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=UF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class MQ extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qp(t)&&Zp(t.arrayValue,this.value)}}class BF extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zp(this.value.arrayValue,t)}}class PQ extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zp(this.value.arrayValue,t)}}class xQ extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zp(this.value.arrayValue,r))}}class NQ{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function p0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new NQ(n,e,t,r,i,s,o)}function Iu(n){const e=be(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>f0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Wp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vd(r)).join(",")),e.ue=t}return e.ue}function Jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NF(n.startAt,e.startAt)&&NF(n.endAt,e.endAt)}function yv(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vv(n,e){return n.filters.filter(t=>t instanceof Ot&&t.field.isEqual(e))}function jF(n,e,t){let r=gv,i=!0;for(const s of vv(n,e)){let o=gv,a=!0;switch(s.op){case"<":case"<=":o=bQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=gv}RF({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];RF({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function $F(n,e,t){let r=sc,i=!0;for(const s of vv(n,e)){let o=sc,a=!0;switch(s.op){case">=":case">":o=CQ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=sc}MF({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];MF({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ia{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function HF(n,e,t,r,i,s,o,a){return new ia(n,e,t,r,i,s,o,a)}function Bd(n){return new ia(n)}function zF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function g0(n){return null!==n.collectionGroup}function jd(n){const e=be(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nn(Tn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xp(s,r))}),t.has(Tn.keyField().canonicalString())||e.ce.push(new Xp(Tn.keyField(),r))}return e.ce}function ii(n){const e=be(n);return e.le||(e.le=function WF(n,e){if("F"===n.limitType)return p0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Xp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new cc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cc(n.startAt.position,n.startAt.inclusive):null;return p0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,jd(n))),e.le}function m0(n,e){const t=n.filters.concat([e]);return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ev(n,e,t){return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eg(n,e){return Jp(ii(n),ii(e))&&n.limitType===e.limitType}function GF(n){return`${Iu(ii(n))}|lt:${n.limitType}`}function $d(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VF(i)).join(", ")}]`),Wp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vd(i)).join(",")),`Target(${r})`}(ii(n))}; limitType=${n.limitType})`}function tg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of jd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=xF(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,jd(r),i)||r.endAt&&!function(o,a,c){const u=xF(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,jd(r),i)));var r,i}function KF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZF(n){return(e,t)=>{let r=!1;for(const i of jd(n)){const s=OQ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function OQ(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?ac(c,u):ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}class sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wF(this.inner)}size(){return this.innerSize}}const kQ=new mn(Se.comparator);function $i(){return kQ}const QF=new mn(Se.comparator);function ng(...n){let e=QF;for(const t of n)e=e.insert(t.key,t);return e}function YF(n){let e=QF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return rg()}function XF(){return rg()}function rg(){return new sa(n=>n.toString(),(n,e)=>n.isEqual(e))}const FQ=new mn(Se.comparator),LQ=new nn(Se.comparator);function gt(...n){let e=LQ;for(const t of n)e=e.add(t);return e}const VQ=new nn(ot);function _0(){return VQ}function JF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gp(e)?"-0":e}}function eL(n){return{integerValue:""+n}}function tL(n,e){return hF(e)?eL(e):JF(n,e)}class Iv{constructor(){this._=void 0}}function UQ(n,e,t){return n instanceof Hd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fv(s)&&(s=pv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof wu?rL(n,e):n instanceof Tu?iL(n,e):function(i,s){const o=nL(i,s),a=sL(o)+sL(i.Pe);return l0(o)&&l0(i.Pe)?eL(a):JF(i.serializer,a)}(n,e)}function BQ(n,e,t){return n instanceof wu?rL(n,e):n instanceof Tu?iL(n,e):t}function nL(n,e){return n instanceof zd?l0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Hd extends Iv{}class wu extends Iv{constructor(e){super(),this.elements=e}}function rL(n,e){const t=oL(e);for(const r of n.elements)t.some(i=>Io(i,r))||t.push(r);return{arrayValue:{values:t}}}class Tu extends Iv{constructor(e){super(),this.elements=e}}function iL(n,e){let t=oL(e);for(const r of n.elements)t=t.filter(i=>!Io(i,r));return{arrayValue:{values:t}}}class zd extends Iv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sL(n){return Gn(n.integerValue||n.doubleValue)}function oL(n){return Qp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ig{constructor(e,t){this.field=e,this.transform=t}}class $Q{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tv{}function aL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wd(n.key,xn.none()):new qd(n.key,n.data,xn.none());{const t=n.data,r=Hr.empty();let i=new nn(Tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new oa(n.key,r,new ji(i.toArray()),xn.none())}}function HQ(n,e,t){n instanceof qd?function(i,s,o){const a=i.value.clone(),c=lL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof oa?function(i,s,o){if(!wv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=lL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(uL(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sg(n,e,t,r){return n instanceof qd?function(s,o,a,c){if(!wv(s.precondition,o))return a;const u=s.value.clone(),f=dL(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof oa?function(s,o,a,c){if(!wv(s.precondition,o))return a;const u=dL(s.fieldTransforms,c,o),f=o.data;return f.setAll(uL(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,wv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function zQ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=nL(r.transform,i||null);null!=s&&(null===t&&(t=Hr.empty()),t.set(r.field,s))}return t||null}function cL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Od(r,i,(s,o)=>function jQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof wu&&i instanceof wu||r instanceof Tu&&i instanceof Tu?Od(r.elements,i.elements,Io):r instanceof zd&&i instanceof zd?Io(r.Pe,i.Pe):r instanceof Hd&&i instanceof Hd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class qd extends Tv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oa extends Tv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function uL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lL(n,e,t){const r=new Map;$e(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,BQ(o,a,t[i]))}return r}function dL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,UQ(s,o,e))}return r}class Wd extends Tv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends Tv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class v0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HQ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=aL(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gt())}isEqual(e){return this.batchId===e.batchId&&Od(this.mutations,e.mutations,(t,r)=>cL(t,r))&&Od(this.baseMutations,e.baseMutations,(t,r)=>cL(t,r))}}class E0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length);let i=FQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new E0(e,t,r,i)}}class I0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var gr,Ut;function fL(n){switch(n){default:return ke();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function pL(n){if(void 0===n)return rr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case gr.OK:return ne.OK;case gr.CANCELLED:return ne.CANCELLED;case gr.UNKNOWN:return ne.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ne.INTERNAL;case gr.UNAVAILABLE:return ne.UNAVAILABLE;case gr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case gr.NOT_FOUND:return ne.NOT_FOUND;case gr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case gr.ABORTED:return ne.ABORTED;case gr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case gr.DATA_LOSS:return ne.DATA_LOSS;default:return ke()}}(Ut=gr||(gr={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";function gL(){return new TextEncoder}const WQ=new mu([4294967295,4294967295],0);function mL(n){const e=gL().encode(n),t=new K1;return t.update(e),new Uint8Array(t.digest())}function _L(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new mu([t,r],0),new mu([i,s],0)]}class w0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new og(`Invalid padding: ${t}`);if(r<0)throw new og(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new og(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new og(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=mu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(mu.fromNumber(r)));return 1===i.compare(WQ)&&(i=new mu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=mL(e),[r,i]=_L(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new w0(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=mL(e),[r,i]=_L(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class og extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ag{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ag(ze.min(),i,new mn(ot),$i(),gt())}}class cg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cg(r,t,gt(),gt(),gt())}}class Cv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class yL{constructor(e,t){this.targetId=e,this.me=t}}class vL{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class EL{constructor(){this.fe=0,this.ge=wL(),this.pe=Cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=gt(),t=gt(),r=gt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new cg(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=wL()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=IL(),this.Qe=new mn(ot)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(yv(s))if(0===r){const o=new Se(s.path);this.Ue(t,o,bn.newNoDocument(o,ze.min()))}else $e(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ra(r).toUint8Array()}catch(c){if(c instanceof bF)return Bi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new w0(o,i,s)}catch(c){return Bi(c instanceof og?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&yv(a.target)){const c=new Se(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,bn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=gt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ag(e,t,this.Qe,this.ke,r);return this.ke=$i(),this.qe=IL(),this.Qe=new mn(ot),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new EL,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nn(ot),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new EL),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function IL(){return new mn(Se.comparator)}function wL(){return new mn(Se.comparator)}const KQ={asc:"ASCENDING",desc:"DESCENDING"},ZQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QQ={and:"AND",or:"OR"};class YQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function T0(n,e){return n.useProto3Json||Wp(e)?e:{value:e}}function Gd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XQ(n,e){return Gd(n,e.toTimestamp())}function ir(n){return $e(!!n),ze.fromTimestamp(function(t){const r=na(t);return new Pn(r.seconds,r.nanos)}(n))}function b0(n,e){return C0(n,e).canonicalString()}function C0(n,e){const t=(i=n,new Nt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function bL(n){const e=Nt.fromString(n);return $e(kL(e)),e}function ug(n,e){return b0(n.databaseId,e.path)}function To(n,e){const t=bL(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(DL(t))}function CL(n,e){return b0(n.databaseId,e)}function AL(n){const e=bL(n);return 4===e.length?Nt.emptyPath():DL(e)}function A0(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DL(n){return $e(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function SL(n,e,t){return{name:ug(n,e),fields:t.value.mapValue.fields}}function RL(n,e,t){const r=To(n,e.name),i=ir(e.updateTime),s=e.createTime?ir(e.createTime):ze.min(),o=new Hr({mapValue:{fields:e.fields}}),a=bn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function lg(n,e){let t;if(e instanceof qd)t={update:SL(n,e.key,e.value)};else if(e instanceof Wd)t={delete:ug(n,e.key)};else if(e instanceof oa)t={update:SL(n,e.key,e.data),updateMask:oY(e.fieldMask)};else{if(!(e instanceof y0))return ke();t={verify:ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Tu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:XQ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ke()),t;var s}function D0(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?xn.updateTime(ir(s.updateTime)):void 0!==s.exists?xn.exists(s.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?($e("REQUEST_TIME"===a.setToServerValue),c=new Hd):"appendMissingElements"in a?c=new wu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Tu(a.removeAllFromArray.values||[]):"increment"in a?c=new zd(o,a.increment):ke();const u=Tn.fromServerFormat(a.fieldPath);return new ig(u,c)}(n,i)):[];var s;if(e.update){const i=To(n,e.update.name),s=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ji((e.updateMask.fieldPaths||[]).map(f=>Tn.fromServerFormat(f)));return new oa(i,s,o,t,r)}return new qd(i,s,t,r)}if(e.delete){const i=To(n,e.delete);return new Wd(i,t)}if(e.verify){const i=To(n,e.verify);return new y0(i,t)}return ke()}function ML(n,e){return{documents:[CL(n,e.path)]}}function Av(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CL(n,i);const s=function(u){if(0!==u.length)return OL(Jt.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:uc((y=f).field),direction:rY(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=T0(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function xL(n){let e=AL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$e(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=NL(m);return y instanceof Jt&&h0(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Xp(Kd((T=y).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Wp(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new cc((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new cc(m.values||[],!m.before)}(t.endAt)),HF(e,i,o,s,a,"F",c,u)}function NL(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Kd(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kd(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kd(t.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kd(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(n):void 0!==n.fieldFilter?Ot.create(Kd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jt.create(t.compositeFilter.filters.map(r=>NL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(n):ke();var t}function rY(n){return KQ[n]}function iY(n){return ZQ[n]}function sY(n){return QQ[n]}function uc(n){return{fieldPath:n.canonicalString()}}function Kd(n){return Tn.fromServerFormat(n.fieldPath)}function OL(n){return n instanceof Ot?function(t){if("=="===t.op){if(DF(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NAN"}};if(AF(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(DF(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NAN"}};if(AF(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(t.field),op:iY(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>OL(i));return 1===r.length?r[0]:{compositeFilter:{op:sY(t.op),filters:r}}}(n):ke()}function oY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class aa{constructor(e,t,r,i,s=ze.min(),o=ze.min(),a=Cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FL{constructor(e){this.ct=e}}function LL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ug(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Gd(s,o.version.toTimestamp()),createTime:Gd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bu(e.version)};else{if(!e.isUnknownDocument())return ke();r.unknownDocument={path:t.path.toArray(),version:bu(e.version)}}var s,o;return r}function Dv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cu(n){const e=new Pn(n.seconds,n.nanoseconds);return ze.fromTimestamp(e)}function Au(n,e){const t=(e.baseMutations||[]).map(s=>D0(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>D0(n.ct,s)),i=Pn.fromMillis(e.localWriteTimeMs);return new v0(e.batchId,i,t,r)}function dg(n){const e=Cu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cu(n.lastLimboFreeSnapshotVersion):ze.min();let r;return r=void 0!==n.query.documents?($e(1===(s=n.query).documents.length),ii(Bd(AL(s.documents[0])))):function(s){return ii(xL(s))}(n.query),new aa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken));var s}function VL(n,e){const t=bu(e.snapshotVersion),r=bu(e.lastLimboFreeSnapshotVersion);let i;i=yv(e.target)?ML(n.ct,e.target):Av(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Iu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function S0(n){const e=xL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ev(e,e.limit,"L"):e}function R0(n,e){return new I0(e.largestBatchId,D0(n.ct,e.overlayMutation))}function UL(n,e){const t=e.path.lastSegment();return[n,ri(e.path.popLast()),t]}function BL(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:bu(r.readTime),documentKey:ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class cY{getBundleMetadata(e,t){return jL(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Cu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return jL(e).put({bundleId:(i=t).id,createTime:bu(ir(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return $L(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:S0(s.bundledQuery),readTime:Cu(s.readTime)};var s})}saveNamedQuery(e,t){return $L(e).put({name:(i=t).name,readTime:bu(ir(i.readTime)),bundledQuery:i.bundledQuery});var i}}function jL(n){return Mr(n,"bundles")}function $L(n){return Mr(n,"namedQueries")}class Sv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Sv(e,t.uid||"")}getOverlay(e,t){return hg(e).get(UL(this.userId,t)).next(r=>r?R0(this.serializer,r):null)}getOverlays(e,t){const r=wo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new I0(t,o);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ri(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(hg(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(s)}getOverlaysForCollection(e,t,r){const i=wo(),s=ri(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return hg(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=R0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=wo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hg(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=R0(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return hg(e).put(function(i,s,o){const[a,c,u]=UL(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function hg(n){return Mr(n,"documentOverlays")}class Du{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Gp(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=na(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ra(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?SF(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ke()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Se.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function uY(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function HL(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=uY(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Du.bt=new Du;class lY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=HL(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=HL(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class hY{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class fg{constructor(){this.Gt=new lY,this.zt=new dY(this.Gt),this.jt=new hY(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Su{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Su(this.indexId,this.documentKey,this.arrayValue,r)}}function lc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zL(n.arrayValue,e.arrayValue),0!==t?t:(t=zL(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function zL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qL{constructor(e){this.Yt=new nn((t,r)=>Tn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if($e(e.collectionGroup===this.collectionId),this.en)return!1;const t=r0(e);if(void 0!==t&&!this.nn(t))return!1;const r=_u(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new nn(Tn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new yu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yu(r.field,"asc"===r.dir?0:1)));return new kd(kd.UNKNOWN_ID,this.collectionId,t,Fd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function WL(n){var e,t;if($e(n instanceof Ot||n instanceof Jt),n instanceof Ot){if(n instanceof BF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Ot.create(n.field,"==",s)))||[];return Jt.create(i,"or")}return n}const r=n.filters.map(i=>WL(i));return Jt.create(r,n.op)}function fY(n){if(0===n.getFilters().length)return[];const e=x0(WL(n));return $e(GL(e)),M0(e)||P0(e)?[e]:e.getFilters()}function M0(n){return n instanceof Ot}function P0(n){return n instanceof Jt&&h0(n)}function GL(n){return M0(n)||P0(n)||function(t){if(t instanceof Jt&&d0(t)){for(const r of t.getFilters())if(!M0(r)&&!P0(r))return!1;return!0}return!1}(n)}function x0(n){if($e(n instanceof Ot||n instanceof Jt),n instanceof Ot)return n;if(1===n.filters.length)return x0(n.filters[0]);const e=n.filters.map(r=>x0(r));let t=Jt.create(e,n.op);return t=Rv(t),GL(t)?t:($e(t instanceof Jt),$e(Ud(t)),$e(t.filters.length>1),t.filters.reduce((r,i)=>N0(r,i)))}function N0(n,e){let t;return $e(n instanceof Ot||n instanceof Jt),$e(e instanceof Ot||e instanceof Jt),t=n instanceof Ot?e instanceof Ot?Jt.create([n,e],"and"):KL(n,e):e instanceof Ot?KL(e,n):function(i,s){if($e(i.filters.length>0&&s.filters.length>0),Ud(i)&&Ud(s))return LF(i,s.getFilters());const o=d0(i)?i:s,a=d0(i)?s:i,c=o.filters.map(u=>N0(u,a));return Jt.create(c,"or")}(n,e),Rv(t)}function KL(n,e){if(Ud(e))return LF(e,n.getFilters());{const t=e.filters.map(r=>N0(n,r));return Jt.create(t,"or")}}function Rv(n){if($e(n instanceof Ot||n instanceof Jt),n instanceof Ot)return n;const e=n.getFilters();if(1===e.length)return Rv(e[0]);if(kF(n))return n;const t=e.map(i=>Rv(i)),r=[];return t.forEach(i=>{i instanceof Ot?r.push(i):i instanceof Jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jt.create(r,n.op)}class pY{constructor(){this._n=new O0}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(es.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class O0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nn(Nt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nn(Nt.comparator)).toArray()}}const Mv=new Uint8Array(0);class gY{constructor(e,t){this.databaseId=t,this.an=new O0,this.un=new sa(r=>Iu(r),(r,i)=>Jp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ri(i)};return ZL(e).put(s)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sF(t),""],!1,!0);return ZL(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Eo(o.parent))}return r})}addFieldIndex(e,t){const r=pg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Qd(e);return s.next(a=>{o.put(BL(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=pg(e),i=Qd(e),s=Zd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=pg(e),r=Zd(e),i=Qd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new qL(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Zd(e);let i=!0;const s=new Map;return Y.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=gt();const a=[];return Y.forEach(s,(c,u)=>{var G;ve("IndexedDbIndexManager",`Using index ${G=c,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${Iu(t)}`);const f=function(G,te){const Ie=r0(te);if(void 0===Ie)return null;for(const Re of vv(G,Ie.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(u,c),m=function(G,te){const Ie=new Map;for(const Re of _u(te))for(const j of vv(G,Re.fieldPath))switch(j.op){case"==":case"in":Ie.set(Re.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return Ie.set(Re.fieldPath.canonicalString(),j.value),Array.from(Ie.values())}return null}(u,c),y=function(G,te){const Ie=[];let Re=!0;for(const j of _u(te)){const N=0===j.kind?jF(G,j.fieldPath,G.startAt):$F(G,j.fieldPath,G.startAt);Ie.push(N.value),Re&&(Re=N.inclusive)}return new cc(Ie,Re)}(u,c),I=function(G,te){const Ie=[];let Re=!0;for(const j of _u(te)){const N=0===j.kind?$F(G,j.fieldPath,G.endAt):jF(G,j.fieldPath,G.endAt);Ie.push(N.value),Re&&(Re=N.inclusive)}return new cc(Ie,Re)}(u,c),T=this.hn(c,u,y),R=this.hn(c,u,I),P=this.Pn(c,u,m),H=this.In(c.indexId,f,T,y.inclusive,R,I.inclusive,P);return Y.forEach(H,V=>r.G(V,t.limit).next(G=>{G.forEach(te=>{const Ie=Se.fromSegments(te.documentKey);o.has(Ie)||(o=o.add(Ie),a.push(Ie))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:fY(Jt.create(e.filters,"and")).map(r=>p0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):Mv,I=this.En(e,y,r[m%u],i),T=this.dn(e,y,s[m%u],o),R=a.map(P=>this.En(e,y,P,!0));f.push(...this.createRange(I,T,R))}return f}En(e,t,r,i){const s=new Su(e,Se.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Su(e,Se.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new qL(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new nn(Tn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new fg;for(const i of _u(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Du.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new fg;return Du.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new fg;return Du.bt.Pt(Eu(this.databaseId,t),r.Ht(function(s){const o=_u(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new fg);let s=0;for(const o of _u(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Qp(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);Du.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new fg;c.seed(a.Wt()),Du.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Ot&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pg(e),i=Qd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Y.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Fd(m.sequenceNumber,new es(Cu(m.readTime),new Se(Eo(m.documentKey)),m.largestBatchId)):Fd.empty(),I=f.fields.map(([T,R])=>new yu(Tn.fromServerFormat(T),R));return new kd(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ot(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=pg(e),s=Qd(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,c=>s.put(BL(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Y.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?Y.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return Zd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Zd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Zd(e);let s=new nn(lc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Su(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new nn(lc);const i=this.An(t,e);if(null==i)return r;const s=r0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Qp(o))for(const a of o.arrayValue.values||[])r=r.add(new Su(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Su(t.indexId,e.key,Mv,i));return r}wn(e,t,r,i,s){ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),T=u.getIterator();let R=Ld(I),P=Ld(T);for(;R||P;){let H=!1,V=!1;if(R&&P){const G=f(R,P);G<0?V=!0:G>0&&(H=!0)}else null!=R?V=!0:H=!0;H?(m(P),P=Ld(T)):V?(y(R),R=Ld(I)):(R=Ld(I),P=Ld(T))}}(i,s,lc,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Y.waitFor(o)}gn(e){let t=1;return Qd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>lc(o,a)).filter((o,a,c)=>!a||0!==lc(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=lc(o,e),c=lc(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Mv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Mv,[]]))}return s}Dn(e,t){return lc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(QL)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||ke())).next(QL)}}function ZL(n){return Mr(n,"collectionParents")}function Zd(n){return Mr(n,"indexEntries")}function pg(n){return Mr(n,"indexConfiguration")}function Qd(n){return Mr(n,"indexState")}function QL(n){$e(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;s0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const YL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new si(e,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{$e(1===a)}));const u=[];for(const f of t.mutations){const m=gF(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return Y.waitFor(s).next(()=>u)}function Pv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ke();e=n.noDocument}return JSON.stringify(e).length}si.DEFAULT_COLLECTION_PERCENTILE=10,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,si.DEFAULT=new si(41943040,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),si.DISABLED=new si(-1,0,0);class xv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){$e(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new xv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Yd(e),o=dc(e);return o.add({}).next(a=>{$e("number"==typeof a);const c=new v0(a,t,r,i),u=function(I,T,R){const P=R.baseMutations.map(V=>lg(I.ct,V)),H=R.mutations.map(V=>lg(I.ct,V));return{userId:T,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:H}}(this.serializer,this.userId,c),f=[];let m=new nn((y,I)=>ot(y.canonicalString(),I.canonicalString()));for(const y of i){const I=gF(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,iQ))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),Y.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return dc(e).get(t).next(r=>r?($e(r.userId===this.userId),Au(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return dc(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&($e(a.batchId>=r),s=Au(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).U("userMutationsIndex",t).next(r=>r.map(i=>Au(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Yd(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=Eo(f);if(u===this.userId&&t.path.isEqual(y))return dc(e).get(m).next(I=>{if(!I)throw ke();$e(I.userId===this.userId),s.push(Au(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(ot);const i=[];return t.forEach(s=>{const o=dv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Yd(e).J({range:a},(u,f,m)=>{const[y,I,T]=u,R=Eo(I);y===this.userId&&s.path.isEqual(R)?r=r.add(T):m.done()});i.push(c)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=dv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new nn(ot);return Yd(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,T=Eo(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(dc(e).get(s).next(o=>{if(null===o)throw ke();$e(o.userId===this.userId),r.push(Au(this.serializer,o))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return XL(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Yd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Eo(s[1]);i.push(c)}else a.done()}).next(()=>{$e(0===i.length)})})}containsKey(e,t){return JL(e,this.userId,t)}xn(e){return eV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JL(n,e,t){const r=dv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Yd(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function dc(n){return Mr(n,"mutations")}function Yd(n){return Mr(n,"documentMutations")}function eV(n){return Mr(n,"mutationQueues")}class Ru{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ru(0)}static Ln(){return new Ru(-1)}}class mY{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Ru(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ze.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>($e(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Xd(e).J((o,a)=>{const c=dg(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Y.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Xd(e).J((r,i)=>{const s=dg(i);t(s)})}Bn(e){return tV(e).get("targetGlobalKey").next(t=>($e(null!==t),t))}kn(e,t){return tV(e).put("targetGlobalKey",t)}qn(e,t){return Xd(e).put(VL(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Iu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Xd(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=dg(a);Jp(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=hc(e);return t.forEach(o=>{const a=ri(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=hc(e);return Y.forEach(t,s=>{const o=ri(s.path);return Y.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=hc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hc(e);let s=gt();return i.J({range:r,H:!0},(o,a,c)=>{const u=Eo(o[1]),f=new Se(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=ri(t.path),i=IDBKeyRange.bound([r],[sF(r)],!1,!0);let s=0;return hc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Xd(e).get(t).next(r=>r?dg(r):null)}}function Xd(n){return Mr(n,"targets")}function tV(n){return Mr(n,"targetGlobal")}function hc(n){return Mr(n,"targetDocuments")}function nV([n,e],[t,r]){const i=ot(n,t);return 0===i?ot(e,r):i}class _Y{constructor(e){this.Kn=e,this.buffer=new nn(nV),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nc(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tc(r)}yield t.zn(3e5)}))}}class yY{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(ts.oe);const r=new _Y(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(YL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YL):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Nd()<=yo.in.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class vY{constructor(e,t){this.db=e,this.garbageCollector=function iV(n,e){return new yY(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Nv(e,r)}removeReference(e,t,r){return Nv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nv(e,t)}er(e,t){return function(i,s){let o=!1;return eV(i).Y(a=>JL(i,a,s).next(c=>(c&&(o=!0),Y.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ze.min()),hc(e).delete([0,ri(o.path)])))});i.push(c)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nv(e,t)}Xn(e,t){const r=hc(e);let i,s=ts.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ts.oe&&t(new Se(Eo(i)),s),s=u,i=c):s=ts.oe}).next(()=>{s!==ts.oe&&t(new Se(Eo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nv(n,e){return hc(n).put((i=n.currentSequenceNumber,{targetId:0,path:ri(e.path),sequenceNumber:i}));var i}class sV{constructor(){this.changes=new sa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mu(e).put(r)}removeEntry(e,t,r){return Mu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=bn.newInvalidDocument(t);return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:bn.newInvalidDocument(t)};return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gg(t))},(i,s)=>{r={document:this.nr(t,s),size:Pv(s)}}).next(()=>r)}getEntries(e,t){let r=$i();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=$i(),i=new mn(Se.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Pv(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new nn(uV);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(gg(i.first()),gg(i.last())),o=i.getIterator();let a=o.getNext();return Mu(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Se.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&uV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(gg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Dv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mu(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=$i();for(const m of u){const y=this.nr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(tg(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=$i();const o=cV(t,r),a=cV(t,es.max());return Mu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Se.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new IY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aV(e).get("remoteDocumentGlobalKey").next(t=>($e(!!t),t))}tr(e,t){return aV(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function aY(n,e){let t;if(e.document)t=RL(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=Cu(e.noDocument.readTime);t=bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ke();{const r=Se.fromSegments(e.unknownDocument.path),i=Cu(e.unknownDocument.version);t=bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Pn(i[0],i[1]);return ze.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ze.min()))return r}return bn.newInvalidDocument(e)}}function oV(n){return new EY(n)}class IY extends sV{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new sa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nn((s,o)=>ot(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=LL(this.ar.serializer,o);i=i.add(s.path.popLast());const u=Pv(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=LL(this.ar.serializer,o.convertToNoDocument(ze.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function aV(n){return Mr(n,"remoteDocumentGlobal")}function Mu(n){return Mr(n,"remoteDocumentsV14")}function gg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cV(n,e){const t=e.documentKey.path.toArray();return[n,Dv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ot(t[s],r[s]),i)return i;return i=ot(t.length,r.length),i||(i=ot(t[t.length-2],r[r.length-2]),i||ot(t[t.length-1],r[r.length-1]))}class wY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&sg(r.mutation,i,ji.empty(),Pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=gt()){const i=wo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ng();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=$i();const o=rg(),a=rg();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof oa)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),sg(f.mutation,u,f.mutation.getFieldMask(),Pn.now())):o.set(u.key,ji.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new wY(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=rg();let i=new mn((o,a)=>o-a),s=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||ji.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||gt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=XF();f.forEach(y=>{if(!s.has(y)){const I=aL(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Se.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):g0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(wo());let a=-1,c=s;return o.next(u=>Y.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,gt())).next(f=>({batchId:a,changes:YF(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=ng();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=ng();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,c=>{const u=(m=t,y=c.child(s),new ia(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,bn.newInvalidDocument(f)))});let a=ng();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&sg(f.mutation,u,ji.empty(),Pn.now()),tg(t,u)&&(a=a.insert(c,u))}),a})}}class TY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:ir(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:S0(i.bundledQuery),readTime:ir(i.readTime)}),Y.resolve();var i}}class bY{constructor(){this.overlays=new mn(Se.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wo();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=wo(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new mn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=wo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=wo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I0(t,r));let s=this.hr.get(t);void 0===s&&(s=gt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class k0{constructor(){this.Pr=new nn(Pr.Ir),this.Tr=new nn(Pr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Pr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Se(new Nt([])),r=new Pr(t,e),i=new Pr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Se(new Nt([])),r=new Pr(t,e),i=new Pr(t,e+1);let s=gt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Pr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Se.comparator(e.key,t.key)||ot(e.pr,t.pr)}static Er(e,t){return ot(e.pr,t.pr)||Se.comparator(e.key,t.key)}}class CY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new nn(Pr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new v0(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Pr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),i=new Pr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(ot);return t.forEach(i=>{const s=new Pr(i,0),o=new Pr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new Pr(new Se(s),0);let a=new nn(ot);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$e(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const s=new Pr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Pr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AY{constructor(e){this.vr=e,this.docs=new mn(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=$i();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=$i();const o=t.path,a=new Se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||s0(aF(f),r)<=0||(i.has(f.key)||tg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ke()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DY(this)}getSize(e){return Y.resolve(this.size)}}class DY extends sV{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class SY{constructor(e){this.persistence=e,this.Mr=new sa(t=>Iu(t),Jp),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new k0,this.targetCount=0,this.Lr=Ru.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class F0{constructor(e,t){this.Br={},this.overlays={},this.kr=new ts(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new SY(this),this.indexManager=new pY,this.remoteDocumentCache=new AY(r=>this.referenceDelegate.Kr(r)),this.serializer=new FL(t),this.$r=new TY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new CY(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new RY(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class RY extends uF{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.zr=new k0,this.jr=null}static Hr(e){return new Ov(e)}get Jr(){if(this.jr)return this.jr;throw ke()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Se.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class MY{constructor(e){this.serializer=e}O(e,t,r,i){const s=new lv("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pF,{unique:!0}),c.createObjectStore("documentMutations"),dV(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),dV(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ze.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pF,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return Y.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:mQ});u.createIndex("collectionPathOverlayIndex",_Q,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",yQ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:sQ});u.createIndex("documentKeyIndex",oQ),u.createIndex("collectionGroupIndex",aQ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:hQ}).createIndex("sequenceNumberIndex",fQ,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:pQ}).createIndex("documentKeyIndex",gQ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Pv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Y.forEach(a,c=>{$e(c.userId===s.userId);const u=Au(this.serializer,c);return XL(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new Nt(o),u=[0,ri(c)];s.push(t.get(u).next(f=>f?Y.resolve():t.put({targetId:0,path:ri(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:dQ});const r=t.store("collectionParents"),i=new O0,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:ri(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Nt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=Eo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=dg(i),o=VL(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Se(Nt.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):ke()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=oV(this.serializer),s=new F0(Ov.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:gt();Au(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),Y.forEach(a,(c,u)=>{const f=new Rr(u),m=Sv.lt(this.serializer,f),y=s.getIndexManager(f),I=xv.lt(f,this.serializer,y,s.referenceDelegate);return new lV(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new c0(t,ts.oe),c).next()})})}}function dV(n){n.createObjectStore("targetDocuments",{keyPath:uQ}).createIndex("documentTargetsIndex",lQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cQ,{unique:!0}),n.createObjectStore("targetGlobal")}const L0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class V0{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!V0.D())throw new me(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vY(this,i),this.Ti=t+"main",this.serializer=new FL(c),this.Ei=new vo(this.Ti,this.ui,new MY(this.serializer)),this.Qr=new mY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oV(this.serializer),this.$r=new cY,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,L0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ts(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(nc(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return mg(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return Fv(e).delete(this.clientId)}Di(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Mr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return Y.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):mg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,L0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fv(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new c0(t,ts.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Fv(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return xv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?EQ:15===c?vF:14===c?yF:13===c?_F:12===c?vQ:11===c?mF:void ke();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new c0(a,this.kr?this.kr.next():ts.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new me(ne.FAILED_PRECONDITION,cF);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return mg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ne.FAILED_PRECONDITION,L0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mg(e).put("owner",t)}static D(){return vo.D()}yi(e){const t=mg(e);return t.get("owner").next(r=>this.Si(r)?(ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ft.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mg(n){return Mr(n,"owner")}function Fv(n){return Mr(n,"clientMetadata")}function U0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class B0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=gt(),i=gt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new B0(e,t.fromCache,r,i)}}class PY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hV{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ft.G6)()?8:lF((0,ft.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PY;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Nd()<=yo.in.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",$d(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Nd()<=yo.in.DEBUG&&ve("QueryEngine","Query:",$d(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Nd()<=yo.in.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",$d(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(t))):Y.resolve())}ji(e,t){if(zF(t))return Y.resolve(null);let r=ii(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ev(t,null,"F"),r=ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=gt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,Ev(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return zF(t)||i.isEqual(ze.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Y.resolve(null):(Nd()<=yo.in.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$d(t)),this.es(e,o,t,oF(i,-1)).next(a=>a))})}Zi(e,t){let r=new nn(ZF(e));return t.forEach((i,s)=>{tg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Nd()<=yo.in.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",$d(t)),this.zi.getDocumentsMatchingQuery(e,t,es.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class xY{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new mn(ot),this.rs=new sa(s=>Iu(s),Jp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lV(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function fV(n,e,t,r){return new xY(n,e,t,r)}function pV(n,e){return j0.apply(this,arguments)}function j0(){return(j0=(0,ae.Z)(function*(n,e){const t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=gt();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function gV(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function mV(n,e,t){let r=gt(),i=gt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=$i();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ze.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function kY(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jd(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new aa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function eh(n,e,t){return $0.apply(this,arguments)}function $0(){return($0=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!nc(o))throw o;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function Lv(n,e,t){const r=be(n);let i=ze.min(),s=gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=be(c),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,ii(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ze.min(),t?s:gt())).next(a=>(vV(r,KF(e),a),{documents:a,hs:s})))}function _V(n,e){const t=be(n),r=be(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function yV(n,e){const t=be(n),r=t.ss.get(e)||ze.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,oF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vV(t,e,i),i))}function vV(n,e,t){let r=n.ss.get(e)||ze.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function H0(){return(H0=(0,ae.Z)(function*(n,e,t,r){const i=be(n);let s=gt(),o=$i();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Jd(i,(f=r,ii(Bd(Nt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>mV(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function LY(n,e){return z0.apply(this,arguments)}function z0(){return(z0=(0,ae.Z)(function*(n,e,t=gt()){const r=yield Jd(n,ii(S0(e.bundledQuery))),i=be(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ir(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Cr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function EV(n,e){return`firestore_clients_${n}_${e}`}function IV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function q0(n,e){return`firestore_targets_${n}_${e}`}class Vv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new me(i.error.code,i.error.message))),o?new Vv(e,t,i.state,s):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new me(r.error.code,r.error.message))),s?new _g(e,r.state,i):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=_0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=hF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Uv(e,s):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class W0{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new W0(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class G0{constructor(){this.activeTargetIds=_0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K0{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new mn(ot),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=EV(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new G0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(EV(e.persistenceKey,i));if(s){const o=Uv.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(q0(this.persistenceKey,e));if(r){const i=_g.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(q0(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve("SharedClientState","READ",e,t),t}setItem(e,t){ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=ts.oe;if(null!=o)try{const c=JSON.parse(o);$e("number"==typeof c),a=c}catch(c){rr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ts.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Vv(this.currentUser,e,t,r),s=IV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=IV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=q0(this.persistenceKey,e),s=new _g(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Uv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Vv.Es(new Rr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return _g.Es(i,t)}xs(e){return W0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=_0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class wV{constructor(){this.no=new G0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new G0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VY{io(e){}shutdown(){}}class TV{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bv=null;function Z0(){return null===Bv?Bv=268435456+Math.round(2147483648*Math.random()):Bv++,"0x"+Bv.toString(16)}const UY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BY{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const oi="WebChannelConnection";class jY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=Z0(),c=this.vo(t,r.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(ve("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Bi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${UY[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=Z0();return new Promise((o,a)=>{const c=new Z1;c.setWithCredentials(!0),c.listenOnce(Y1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uv.NO_ERROR:const f=c.getResponseJson();ve(oi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case uv.TIMEOUT:ve(oi,`RPC '${e}' ${s} timed out`),a(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case uv.HTTP_ERROR:const m=c.getStatus();if(ve(oi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(H)>=0?H:ne.UNKNOWN}(I.status);a(new me(T,I.message))}else a(new me(ne.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new me(ne.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ve(oi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ve(oi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=Z0(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=eF(),a=J1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Q1({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");ve(oi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const T=new BY({lo:P=>{I?ve(oi,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(ve(oi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ve(oi,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},ho:()=>m.close()}),R=(P,H,V)=>{P.listen(H,G=>{try{V(G)}catch(te){setTimeout(()=>{throw te},0)}})};return R(m,Hp.EventType.OPEN,()=>{I||(ve(oi,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),R(m,Hp.EventType.CLOSE,()=>{I||(I=!0,ve(oi,`RPC '${e}' stream ${i} transport closed`),T.po())}),R(m,Hp.EventType.ERROR,P=>{I||(I=!0,Bi(oi,`RPC '${e}' stream ${i} transport errored:`,P),T.po(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),R(m,Hp.EventType.MESSAGE,P=>{var H;if(!I){const V=P.data[0];$e(!!V);const te=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(te){ve(oi,`RPC '${e}' stream ${i} received error:`,te);const Ie=te.status;let Re=function(L){const z=gr[L];if(void 0!==z)return pL(z)}(Ie),j=te.message;void 0===Re&&(Re=ne.INTERNAL,j="Unknown error status: "+Ie+" with message "+te.message),I=!0,T.po(new me(Re,j)),m.close()}else ve(oi,`RPC '${e}' stream ${i} received:`,V),T.yo(V)}}),R(a,X1.STAT_EVENT,P=>{P.stat===t0.PROXY?ve(oi,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===t0.NOPROXY&&ve(oi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function bV(){return typeof window<"u"?window:null}function jv(){return typeof document<"u"?document:null}function yg(n){return new YQ(n,!0)}class Q0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class CV{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Q0(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ae.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ae.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ae.Z)(function*(){e.state=0,e.start()}))}c_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $Y extends CV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function eY(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:ke(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?($e(void 0===f||"string"==typeof f),Cr.fromBase64String(f||"")):($e(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Cr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?ne.UNKNOWN:pL(u.code);return new me(f,u.message||"")}(o);t=new vL(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=To(n,r.document.name),s=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):ze.min(),a=new Hr({mapValue:{fields:r.document.fields}}),c=bn.newFoundDocument(i,s,o,a);t=new Cv(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=To(n,r.document),s=r.readTime?ir(r.readTime):ze.min(),o=bn.newNoDocument(i,s);t=new Cv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=To(n,r.document);t=new Cv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new qQ(i,s);t=new yL(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?ir(o.readTime):ze.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=A0(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=yv(c)?{documents:ML(s,c)}:{query:Av(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TL(s,o.resumeToken);const u=T0(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ze.min())>0){a.readTime=Gd(s,o.snapshotVersion.toTimestamp());const u=T0(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function nY(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=A0(this.serializer),t.removeTarget=e,this.i_(t)}}class HY extends CV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function tY(n,e){return n&&n.length>0?($e(void 0!==e),n.map(t=>function(i,s){let o=ir(i.updateTime?i.updateTime:s);return o.isEqual(ze.min())&&(o=ir(s)),new $Q(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.A_(r,t)}return $e(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=A0(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lg(this.serializer,r))};this.i_(t)}}class zY extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,C0(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(ne.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,C0(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ne.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class qY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(rr(t),this.y_=!1):ve("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class WY{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ae.Z)(function*(){var c;fc(o)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ae.Z)(function*(f){const m=be(f);m.M_.add(4),yield th(m),m.N_.set("Unknown"),m.M_.delete(4),yield vg(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new qY(r,i)}}function vg(n){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,ae.Z)(function*(n){if(fc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function th(n){return X0.apply(this,arguments)}function X0(){return(X0=(0,ae.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function $v(n,e){const t=be(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),tC(t)?eC(t):ih(t).Xo()&&J0(t,e))}function nh(n,e){const t=be(n),r=ih(t);t.F_.delete(e),r.Xo()&&AV(t,e),0===t.F_.size&&(r.Xo()?r.n_():fc(t)&&t.N_.set("Unknown"))}function J0(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ih(n).P_(e)}function AV(n,e){n.L_.xe(e),ih(n).I_(e)}function eC(n){n.L_=new GQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ih(n).start(),n.N_.w_()}function tC(n){return fc(n)&&!ih(n).Zo()&&n.F_.size>0}function fc(n){return 0===be(n).M_.size}function DV(n){n.L_=void 0}function GY(n){return nC.apply(this,arguments)}function nC(){return(nC=(0,ae.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function KY(n){return rC.apply(this,arguments)}function rC(){return(rC=(0,ae.Z)(function*(n){n.F_.forEach((e,t)=>{J0(n,e)})})).apply(this,arguments)}function ZY(n,e){return iC.apply(this,arguments)}function iC(){return(iC=(0,ae.Z)(function*(n,e){DV(n),tC(n)?(n.N_.D_(e),eC(n)):n.N_.set("Unknown")})).apply(this,arguments)}function QY(n,e,t){return sC.apply(this,arguments)}function sC(){return sC=(0,ae.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof vL&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hv(n,r)}else if(e instanceof Cv?n.L_.Ke(e):e instanceof yL?n.L_.He(e):n.L_.We(e),!t.isEqual(ze.min()))try{const r=yield gV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(Cr.EMPTY_BYTE_STRING,f.snapshotVersion)),AV(s,c);const m=new aa(f.target,c,u,f.sequenceNumber);J0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield Hv(n,r)}var r}),sC.apply(this,arguments)}function Hv(n,e,t){return oC.apply(this,arguments)}function oC(){return(oC=(0,ae.Z)(function*(n,e,t){if(!nc(e))throw e;n.M_.add(1),yield th(n),n.N_.set("Offline"),t||(t=()=>gV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield vg(n)}))})).apply(this,arguments)}function SV(n,e){return e().catch(t=>Hv(n,t,e))}function rh(n){return aC.apply(this,arguments)}function aC(){return(aC=(0,ae.Z)(function*(n){const e=be(n),t=pc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;YY(e);)try{const i=yield kY(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,XY(e,i)}catch(i){yield Hv(e,i)}RV(e)&&MV(e)})).apply(this,arguments)}function YY(n){return fc(n)&&n.v_.length<10}function XY(n,e){n.v_.push(e);const t=pc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function RV(n){return fc(n)&&!pc(n).Zo()&&n.v_.length>0}function MV(n){pc(n).start()}function JY(n){return cC.apply(this,arguments)}function cC(){return(cC=(0,ae.Z)(function*(n){pc(n).V_()})).apply(this,arguments)}function eX(n){return uC.apply(this,arguments)}function uC(){return(uC=(0,ae.Z)(function*(n){const e=pc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function tX(n,e,t){return lC.apply(this,arguments)}function lC(){return(lC=(0,ae.Z)(function*(n,e,t){const r=n.v_.shift(),i=E0.from(r,e,t);yield SV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield rh(n)})).apply(this,arguments)}function nX(n,e){return dC.apply(this,arguments)}function dC(){return dC=(0,ae.Z)(function*(n,e){var t;e&&pc(n).E_&&(yield(t=(0,ae.Z)(function*(i,s){if(fL(a=s.code)&&a!==ne.ABORTED){const o=i.v_.shift();pc(i).t_(),yield SV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield rh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),RV(n)&&MV(n)}),dC.apply(this,arguments)}function PV(n,e){return hC.apply(this,arguments)}function hC(){return(hC=(0,ae.Z)(function*(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=fc(t);t.M_.add(3),yield th(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield vg(t)})).apply(this,arguments)}function fC(n,e){return pC.apply(this,arguments)}function pC(){return(pC=(0,ae.Z)(function*(n,e){const t=be(n);e?(t.M_.delete(2),yield vg(t)):e||(t.M_.add(2),yield th(t),t.N_.set("Unknown"))})).apply(this,arguments)}function ih(n){return n.B_||(n.B_=function(t,r,i){const s=be(t);return s.f_(),new $Y(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:GY.bind(null,n),To:KY.bind(null,n),Ao:ZY.bind(null,n),h_:QY.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.B_.t_(),tC(n)?eC(n):n.N_.set("Unknown")):(yield n.B_.stop(),DV(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function pc(n){return n.k_||(n.k_=function(t,r,i){const s=be(t);return s.f_(),new HY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:JY.bind(null,n),Ao:nX.bind(null,n),R_:eX.bind(null,n),A_:tX.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.k_.t_(),yield rh(n)):(yield n.k_.stop(),n.v_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class gC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new gC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sh(n,e){if(rr("AsyncQueue",`${e}: ${n}`),nc(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class oh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=ng(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new oh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new oh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xV{constructor(){this.q_=new mn(Se.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ke():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ah{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ah(e,t,oh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rX{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class iX{constructor(){this.queries=new sa(e=>GF(e),eg),this.onlineState="Unknown",this.z_=new Set}}function mC(n,e){return _C.apply(this,arguments)}function _C(){return(_C=(0,ae.Z)(function*(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new rX,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=sh(o,`Initialization of query '${$d(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&EC(t)})).apply(this,arguments)}function yC(n,e){return vC.apply(this,arguments)}function vC(){return(vC=(0,ae.Z)(function*(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function sX(n,e){const t=be(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&EC(t)}function oX(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function EC(n){n.z_.forEach(e=>{e.next()})}var IC,NV;(NV=IC||(IC={})).J_="default",NV.Cache="cache";class wC{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ah(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==IC.Cache}}class aX{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class OV{constructor(e){this.serializer=e}Ps(e){return To(this.serializer,e)}Is(e){return e.metadata.exists?RL(this.serializer,e.document,!1):bn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ir(e)}}class cX{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Nt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new OV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||gt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function FY(n,e,t,r){return H0.apply(this,arguments)}(e.localStore,new OV(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield LY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function kV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class FV{constructor(e){this.key=e}}class LV{constructor(e){this.key=e}}class VV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=gt(),this.mutatedKeys=gt(),this.Ia=ZF(e),this.Ta=new oh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new xV,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=tg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;y&&I?y.data.isEqual(I.data)?T!==R&&(r.track({type:3,doc:I}),P=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),P=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),P=!0):y&&!I&&(r.track({type:1,doc:y}),P=!0,(c||u)&&(a=!0)),P&&(I?(o=o.add(I),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return R(I)-R(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new ah(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new xV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=gt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new LV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new FV(r))}),t}pa(e){this.la=e.hs,this.Pa=gt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ah.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class uX{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lX{constructor(e){this.key=e,this.wa=!1}}class dX{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new sa(a=>GF(a),eg),this.Da=new Map,this.Ca=new Set,this.va=new mn(Se.comparator),this.Fa=new Map,this.Ma=new k0,this.xa={},this.Oa=new Map,this.Na=Ru.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function hX(n,e){return TC.apply(this,arguments)}function TC(){return(TC=(0,ae.Z)(function*(n,e,t=!0){const r=zv(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield UV(r,e,t,!0),i})).apply(this,arguments)}function fX(n,e){return bC.apply(this,arguments)}function bC(){return(bC=(0,ae.Z)(function*(n,e){const t=zv(n);yield UV(t,e,!0,!1)})).apply(this,arguments)}function UV(n,e,t,r){return CC.apply(this,arguments)}function CC(){return(CC=(0,ae.Z)(function*(n,e,t,r){const i=yield Jd(n.localStore,ii(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield AC(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&$v(n.remoteStore,i),a})).apply(this,arguments)}function AC(n,e,t,r,i){return DC.apply(this,arguments)}function DC(){return DC=(0,ae.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,ae.Z)(function*(P,H,V,G){let te=H.view.da(V);te.Xi&&(te=yield Lv(P.localStore,H.query,!1).then(({documents:N})=>H.view.da(N,te)));const Ie=G&&G.targetChanges.get(H.targetId),Re=G&&null!=G.targetMismatches.get(H.targetId),j=H.view.applyChanges(te,P.isPrimaryClient,Ie,Re);return VC(P,H.targetId,j.fa),j.snapshot}),function R(P,H,V,G){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield Lv(n.localStore,e,!0),o=new VV(e,s.hs),a=o.da(s.documents),c=cg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);VC(n,t,u.fa);const f=new uX(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),DC.apply(this,arguments)}function pX(n,e,t){return SC.apply(this,arguments)}function SC(){return(SC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!eg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield eh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nh(r.remoteStore,i.targetId),ch(r,i.targetId)}).catch(tc))):(ch(r,i.targetId),yield eh(r.localStore,i.targetId,!0))})).apply(this,arguments)}function gX(n,e){return RC.apply(this,arguments)}function RC(){return(RC=(0,ae.Z)(function*(n,e){const t=be(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nh(t.remoteStore,r.targetId))})).apply(this,arguments)}function MC(){return(MC=(0,ae.Z)(function*(n,e,t){const r=ZC(n);try{const i=yield function(o,a){const c=be(o),u=Pn.now(),f=a.reduce((I,T)=>I.add(T.key),gt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=$i(),R=gt();return c.os.getEntries(I,f).next(P=>{T=P,T.forEach((H,V)=>{V.isValidDocument()||(R=R.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(P=>{m=P;const H=[];for(const V of a){const G=zQ(V,m.get(V.key).overlayedDocument);null!=G&&H.push(new oa(V.key,G,PF(G.value.mapValue),xn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,H,a)}).next(P=>{y=P;const H=P.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,P.batchId,H)})}).then(()=>({batchId:y.batchId,changes:YF(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new mn(ot)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield ca(r,i.changes),yield rh(r.remoteStore)}catch(i){const s=sh(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function BV(n,e){return PC.apply(this,arguments)}function PC(){return(PC=(0,ae.Z)(function*(n,e){const t=be(n);try{const r=yield function OY(n,e){const t=be(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var R,P,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Cr.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),P=I,H=f,(0===(R=y).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=$i(),u=gt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(mV(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(ze.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?$e(o.wa):i.removedDocuments.size>0&&($e(o.wa),o.wa=!1))}),yield ca(t,r,e)}catch(r){yield tc(r)}})).apply(this,arguments)}function jV(n,e,t){const r=be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=be(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&EC(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _X(n,e,t){return xC.apply(this,arguments)}function xC(){return(xC=(0,ae.Z)(function*(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new mn(Se.comparator);o=o.insert(s,bn.newNoDocument(s,ze.min()));const a=gt().add(s),c=new ag(ze.min(),new Map,new mn(ot),o,a);yield BV(r,c),r.va=r.va.remove(s),r.Fa.delete(e),UC(r)}else yield eh(r.localStore,e,!1).then(()=>ch(r,e,t)).catch(tc)})).apply(this,arguments)}function yX(n,e){return NC.apply(this,arguments)}function NC(){return(NC=(0,ae.Z)(function*(n,e){const t=be(n),r=e.batch.batchId;try{const i=yield function NY(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=Y.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(c,T)).next(R=>{const P=u.docVersions.get(T);$e(null!==P),R.version.compareTo(P)<0&&(m.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),f.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=gt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);LC(t,r,null),FC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ca(t,i)}catch(i){yield tc(i)}})).apply(this,arguments)}function vX(n,e,t){return OC.apply(this,arguments)}function OC(){return(OC=(0,ae.Z)(function*(n,e,t){const r=be(n);try{const i=yield function(o,a){const c=be(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>($e(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);LC(r,e,t),FC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ca(r,i)}catch(i){yield tc(i)}})).apply(this,arguments)}function kC(){return(kC=(0,ae.Z)(function*(n,e){const t=be(n);fc(t.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=be(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=sh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function FC(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function LC(n,e,t){const r=be(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function ch(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||$V(n,r)})}function $V(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(nh(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),UC(n))}function VC(n,e,t){for(const r of t)r instanceof FV?(n.Ma.addReference(r.key,e),IX(n,r)):r instanceof LV?(ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||$V(n,r.key)):ke()}function IX(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(ve("SyncEngine","New document in limbo: "+t),n.Ca.add(r),UC(n))}function UC(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Se(Nt.fromString(e)),r=n.Na.next();n.Fa.set(r,new lX(t)),n.va=n.va.insert(t,r),$v(n.remoteStore,new aa(ii(Bd(t.path)),r,"TargetPurposeLimboResolution",ts.oe))}}function ca(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=B0.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ae.Z)(function*(u,f){const m=be(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,I=>Y.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>Y.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!nc(y))throw y;ve("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),P=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,P)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),BC.apply(this,arguments)}function wX(n,e){return jC.apply(this,arguments)}function jC(){return(jC=(0,ae.Z)(function*(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield pV(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new me(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ca(t,r.us)}var s})).apply(this,arguments)}function TX(n,e){const t=be(n),r=t.Fa.get(e);if(r&&r.wa)return gt().add(r.key);{let i=gt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function bX(n,e){return $C.apply(this,arguments)}function $C(){return($C=(0,ae.Z)(function*(n,e){const t=be(n),r=yield Lv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&VC(t,e.targetId,i.fa),i})).apply(this,arguments)}function CX(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,ae.Z)(function*(n,e){const t=be(n);return yV(t.localStore,e).then(r=>ca(t,r))})).apply(this,arguments)}function AX(n,e,t,r){return zC.apply(this,arguments)}function zC(){return(zC=(0,ae.Z)(function*(n,e,t,r){const i=be(n),s=yield function(a,c){const u=be(a),f=be(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield rh(i.remoteStore):"acknowledged"===t||"rejected"===t?(LC(i,e,r||null),FC(i,e),c=e,be(be(i.localStore).mutationQueue).Mn(c)):ke(),yield ca(i,s)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function qC(){return(qC=(0,ae.Z)(function*(n,e){const t=be(n);if(zv(t),ZC(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield HV(t,r.toArray());t.La=!0,yield fC(t.remoteStore,!0);for(const s of i)$v(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ch(t,o),eh(t.localStore,o,!0))),nh(t.remoteStore,o)}),yield i,yield HV(t,r),function(o){const a=be(o);a.Fa.forEach((c,u)=>{nh(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new mn(Se.comparator)}(t),t.La=!1,yield fC(t.remoteStore,!1)}})).apply(this,arguments)}function HV(n,e,t){return WC.apply(this,arguments)}function WC(){return(WC=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield Jd(r.localStore,ii(c[0]));for(const u of c){const f=r.ba.get(u),m=yield bX(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield _V(r.localStore,o);a=yield Jd(r.localStore,u),yield AC(r,zV(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function zV(n){return HF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SX(n){return t=be(n).localStore,be(be(t).persistence).Bi();var t}function RX(n,e,t,r){return GC.apply(this,arguments)}function GC(){return(GC=(0,ae.Z)(function*(n,e,t,r){const i=be(n);if(i.La)return void ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield yV(i.localStore,KF(s[0])),a=ag.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cr.EMPTY_BYTE_STRING);yield ca(i,o,a);break}case"rejected":yield eh(i.localStore,e,!0),ch(i,e,r);break;default:ke()}})).apply(this,arguments)}function MX(n,e,t){return KC.apply(this,arguments)}function KC(){return(KC=(0,ae.Z)(function*(n,e,t){const r=zv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ve("SyncEngine","Adding an already active target "+i);continue}const s=yield _V(r.localStore,i),o=yield Jd(r.localStore,s);yield AC(r,zV(s),o.targetId,!1,o.resumeToken),$v(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield eh(r.localStore,i,!1).then(()=>{nh(r.remoteStore,i),ch(r,i)}).catch(tc))}})).apply(this,arguments)}function zv(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_X.bind(null,e),e.Sa.h_=sX.bind(null,e.eventManager),e.Sa.ka=oX.bind(null,e.eventManager),e}function ZC(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vX.bind(null,e),e}class Eg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=yg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}createPersistence(e){return new F0(Ov.Hr,this.serializer)}createSharedClientState(e){return new wV}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QC extends Eg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield ZC(r.Qa.syncEngine),yield rh(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new rV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new nQ(t,this.persistence);return new tQ(e.asyncQueue,r)}createPersistence(e){const t=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?si.withCacheSize(this.cacheSizeBytes):si.DEFAULT;return new V0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bV(),jv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wV}}class qV extends QC{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof K0&&(r.sharedClientState.syncEngine={Zs:AX.bind(null,i),Xs:RX.bind(null,i),eo:MX.bind(null,i),Bi:SX.bind(null,i),Ys:CX.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ae.Z)(function*(o){yield function DX(n,e){return qC.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bV();if(!K0.D(t))throw new me(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new K0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uh{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>jV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wX.bind(null,r.syncEngine),yield fC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iX}createDatastore(e){const t=yg(e.databaseInfo.databaseId),r=new jY(e.databaseInfo);return new zY(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>jV(this.syncEngine,t,0),a=TV.D()?new TV:new VY,new WY(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new dX(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;yield(r=(0,ae.Z)(function*(s){const o=be(s);ve("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield th(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function WV(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NX{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new br,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ae.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new aX(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ae.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class OX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.Z)(function*(o,a){const c=be(o),u={documents:a.map(I=>ug(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,Nt.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const T=function JQ(n,e){return"found"in e?function(r,i){$e(!!i.found);const s=To(r,i.found.name),o=ir(i.found.updateTime),a=i.found.createTime?ir(i.found.createTime):ze.min(),c=new Hr({mapValue:{fields:i.found.fields}});return bn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){$e(!!i.missing),$e(!!i.readTime);const s=To(r,i.missing),o=ir(i.readTime);return bn.newNoDocument(s,o)}(n,e):ke()}(c.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());$e(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Se.fromPath(i);e.mutations.push(new y0(s,e.precondition(s)))}),yield(r=(0,ae.Z)(function*(s,o){const a=be(s),c={writes:o.map(u=>lg(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,Nt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke();t=ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ze.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ze.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kX{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Q0(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ae.Z)(function*(){const t=new OX(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Wp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fL(t)}return!1}}class FX{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Rr.UNAUTHENTICATED,this.clientId=iF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.Z)(function*(a){ve("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ve("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=sh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Wv(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(s){r.isEqual(s)||(yield pV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YC.apply(this,arguments)}function XC(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eA(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function GV(n){return"FirebaseError"===n.name?n.code===ne.FAILED_PRECONDITION||n.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function eA(n){return tA.apply(this,arguments)}function tA(){return(tA=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!GV(t))throw t;Bi("Error using user provided cache. Falling back to memory cache: "+t),yield Wv(n,new Eg)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield Wv(n,new Eg);return n._offlineComponents})).apply(this,arguments)}function Gv(n){return nA.apply(this,arguments)}function nA(){return(nA=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield XC(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield XC(n,new uh))),n._onlineComponents})).apply(this,arguments)}function KV(n){return eA(n).then(e=>e.persistence)}function lh(n){return eA(n).then(e=>e.localStore)}function ZV(n){return Gv(n).then(e=>e.remoteStore)}function rA(n){return Gv(n).then(e=>e.syncEngine)}function dh(n){return iA.apply(this,arguments)}function iA(){return(iA=(0,ae.Z)(function*(n){const e=yield Gv(n),t=e.eventManager;return t.onListen=hX.bind(null,e.syncEngine),t.onUnlisten=pX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gX.bind(null,e.syncEngine),t})).apply(this,arguments)}function YV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new qv({next:y=>{o.enqueueAndForget(()=>yC(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new wC(Bd(a.path),f,{includeMetadataChanges:!0,ra:!0});return mC(s,m)}(yield dh(n),n.asyncQueue,e,t,r)})),r.promise}function XV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,c,u){const f=new qv({next:y=>{o.enqueueAndForget(()=>yC(s,m)),y.fromCache&&"server"===c.source?u.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new wC(a,f,{includeMetadataChanges:!0,ra:!0});return mC(s,m)}(yield dh(n),n.asyncQueue,e,t,r)})),r.promise}function JV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const e2=new Map;function sA(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function t2(n,e,t,r){if(!0===e&&!0===r)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n2(n){if(!Se.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function r2(n){if(Se.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ke()}function wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kv(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function i2(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class s2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=JV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new H7;switch(r.type){case"firstParty":return new G7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=e2.get(t);r&&(ve("ComponentProvider","Removing Datastore"),e2.delete(t),r.terminate())}(this),Promise.resolve()}}function o2(n,e,t,r={}){var i;const s=(n=wt(n,Ig))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Rr.MOCK_USER;else{a=(0,ft.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Rr(u)}n._authCredentials=new z7(new nF(a,c))}}class zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class bo extends zr{constructor(e,t,r){super(e,t,Bd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Se(e))}withConverter(e){return new bo(this.firestore,e,this._path)}}function a2(n,e,...t){if(n=(0,ft.m9)(n),sA("collection","path",e),n instanceof Ig){const r=Nt.fromString(e,...t);return r2(r),new bo(n,null,r)}{if(!(n instanceof Cn||n instanceof bo))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return r2(r),new bo(n.firestore,null,r)}}function Zv(n,e,...t){if(n=(0,ft.m9)(n),1===arguments.length&&(e=iF.newId()),sA("doc","path",e),n instanceof Ig){const r=Nt.fromString(e,...t);return n2(r),new Cn(n,null,new Se(r))}{if(!(n instanceof Cn||n instanceof bo))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return n2(r),new Cn(n.firestore,n instanceof bo?n.converter:null,new Se(r))}}function c2(n,e){return n=(0,ft.m9)(n),e=(0,ft.m9)(e),(n instanceof Cn||n instanceof bo)&&(e instanceof Cn||e instanceof bo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oA(n,e){return n=(0,ft.m9)(n),e=(0,ft.m9)(e),n instanceof zr&&e instanceof zr&&n.firestore===e.firestore&&eg(n._query,e._query)&&n.converter===e.converter}class ZX{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Q0(this,"async_queue_retry"),this.hu=()=>{const t=jv();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=jv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=jv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new br;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ae.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!nc(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,rr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=gC.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ke()}verifyOperationInProgress(){}du(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function aA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class QX{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rn extends Ig{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ZX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||u2(this),this._firestoreClient.terminate()}}function XX(n,e){const t="object"==typeof n?n:(0,Wn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Wn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,ft.P0)("firestore");s&&o2(i,...s)}return i}function Nn(n){return n._firestoreClient||u2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function u2(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TQ(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,JV(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new FX(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function l2(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Wv(n,t),yield XC(n,e),r.resolve()}catch(i){const s=i;if(!GV(s))throw s;Bi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function d2(n){if(n._initialized||n._terminated)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Cr.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ua{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pu{constructor(e){this._methodName=e}}class Qv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}const cJ=/^__.*__$/;class uJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new qd(e,this.data,t,this.fieldTransforms)}}class h2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class Yv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return eE(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(f2(this.fu)&&cJ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class lJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yg(e)}Fu(e,t,r,i=!1){return new Yv({fu:e,methodName:t,vu:r,path:Tn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(n){const e=n._freezeSettings(),t=yg(n._databaseId);return new lJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xv(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);pA("Data must be an object, but it was:",o,r);const a=m2(r,o);let c,u;if(s.merge)c=new ji(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=bg(e,m,t);if(!o.contains(y))throw new me(ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);y2(f,y)||f.push(y)}c=new ji(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new uJ(new Hr(a),c,u)}class Tg extends Pu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tg}}function p2(n,e,t){return new Yv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cA extends Pu{_toFieldTransform(e){return new ig(e.path,new Hd)}isEqual(e){return e instanceof cA}}class uA extends Pu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=p2(this,e,!0),r=this.Mu.map(s=>Nu(s,t)),i=new wu(r);return new ig(e.path,i)}isEqual(e){return e instanceof uA&&(0,ft.vZ)(this.Mu,e.Mu)}}class lA extends Pu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=p2(this,e,!0),r=this.Mu.map(s=>Nu(s,t)),i=new Tu(r);return new ig(e.path,i)}isEqual(e){return e instanceof lA&&(0,ft.vZ)(this.Mu,e.Mu)}}class dA extends Pu{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new zd(e.serializer,tL(e.serializer,this.xu));return new ig(e.path,t)}isEqual(e){return e instanceof dA&&this.xu===e.xu}}function hA(n,e,t,r){const i=n.Fu(1,e,t);pA("Data must be an object, but it was:",i,r);const s=[],o=Hr.empty();rc(r,(c,u)=>{const f=Jv(e,c,t);u=(0,ft.m9)(u);const m=i.Su(f);if(u instanceof Tg)s.push(f);else{const y=Nu(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new ji(s);return new h2(o,a,i.fieldTransforms)}function fA(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[bg(e,r,t)],c=[i];if(s.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(bg(e,s[y])),c.push(s[y+1]);const u=[],f=Hr.empty();for(let y=a.length-1;y>=0;--y)if(!y2(u,a[y])){const I=a[y];let T=c[y];T=(0,ft.m9)(T);const R=o.Su(I);if(T instanceof Tg)u.push(I);else{const P=Nu(T,R);null!=P&&(u.push(I),f.set(I,P))}}const m=new ji(u);return new h2(f,m,o.fieldTransforms)}function g2(n,e,t,r=!1){return Nu(t,n.Fu(r?4:3,e))}function Nu(n,e){if(_2(n=(0,ft.m9)(n)))return pA("Unsupported field value:",e,n),m2(n,e);if(n instanceof Pu)return function(r,i){if(!f2(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Nu(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,ft.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return tL(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Pn.fromDate(r);return{timestampValue:Gd(i.serializer,s)}}if(r instanceof Pn){const s=new Pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,s)}}if(r instanceof Qv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:TL(i.serializer,r._byteString)};if(r instanceof Cn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:b0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Kv(r)}`)}(n,e)}function m2(n,e){const t={};return wF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(n,(r,i)=>{const s=Nu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function _2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof Qv||n instanceof Co||n instanceof Cn||n instanceof Pu)}function pA(n,e,t){if(!_2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Kv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function bg(n,e,t){if((e=(0,ft.m9)(e))instanceof ua)return e._internalPath;if("string"==typeof e)return Jv(n,e);throw eE("Field path arguments must be of type string or ",n,!1,void 0,t)}const dJ=new RegExp("[~\\*/\\[\\]]");function Jv(n,e,t){if(e.search(dJ)>=0)throw eE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ua(...e.split("."))._internalPath}catch{throw eE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new me(ne.INVALID_ARGUMENT,a+n+c)}function y2(n,e){return n.some(t=>t.isEqual(e))}class Cg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hJ extends Cg{data(){return super.data()}}function tE(n,e){return"string"==typeof e?Jv(n,e):e instanceof ua?e._internalPath:e._delegate._internalPath}function v2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gA{}class Ag extends gA{}function gc(n,e,...t){let r=[];e instanceof gA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof hh).length,a=s.filter(c=>c instanceof Dg).length;if(o>1||o>0&&a>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Dg extends Ag{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Dg(e,t,r)}_apply(e){const t=this._parse(e);return T2(e._query,t),new zr(e.firestore,e.converter,m0(e._query,t))}_parse(e){const t=xu(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){w2(m,f);const I=[];for(const T of m)I.push(I2(c,s,T));y={arrayValue:{values:I}}}else y=I2(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||w2(m,f),y=g2(a,"where",m,"in"===f||"not-in"===f);return Ot.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class hh extends gA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)T2(o,c),o=m0(o,c)}(e._query,t),new zr(e.firestore,e.converter,m0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mA extends Ag{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xp(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ia(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class nE extends Ag{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new nE(e,t,r)}_apply(e){return new zr(e.firestore,e.converter,Ev(e._query,this._limit,this._limitType))}}class rE extends Ag{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rE(e,t,r)}_apply(e){const t=E2(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new ia((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class iE extends Ag{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new iE(e,t,r)}_apply(e){const t=E2(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new ia((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function E2(n,e,t,r){if(t[0]=(0,ft.m9)(t[0]),t[0]instanceof Cg)return function(s,o,a,c,u){if(!c)throw new me(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of jd(s))if(m.field.isKeyField())f.push(Eu(o,c.key));else{const y=c.data.field(m.field);if(fv(y))throw new me(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new me(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new cc(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=xu(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new me(ne.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const R=f[T];if(y[T].field.isKeyField()){if("string"!=typeof R)throw new me(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!g0(o)&&-1!==R.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const P=o.path.child(Nt.fromString(R));if(!Se.isDocumentKey(P))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const H=new Se(P);I.push(Eu(a,H))}else{const P=g2(c,u,R);I.push(P)}}return new cc(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function I2(n,e,t){if("string"==typeof(t=(0,ft.m9)(t))){if(""===t)throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g0(e)&&-1!==t.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Nt.fromString(t));if(!Se.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eu(n,new Se(r))}if(t instanceof Cn)return Eu(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kv(t)}.`)}function w2(n,e){if(!Array.isArray(n)||0===n.length)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T2(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new me(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _A{convertValue(e,t="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return rc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Qv(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kp(e));default:return null}}convertTimestamp(e){const t=na(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Nt.fromString(e);$e(kL(r));const i=new ic(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function sE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IJ extends _A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class la extends Cg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sg extends la{data(e={}){return super.data(e)}}class mc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ou(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sg(this._firestore,this._userDataWriter,r.key,r,new Ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Sg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Sg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:TJ(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function C2(n,e){return n instanceof la&&e instanceof la?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mc&&e instanceof mc&&n._firestore===e._firestore&&oA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _c extends _A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function A2(n,e,t){n=wt(n,Cn);const r=wt(n.firestore,rn),i=sE(n.converter,e,t);return fh(r,[Xv(xu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xn.none())])}function D2(n,e,t,...r){n=wt(n,Cn);const i=wt(n.firestore,rn),s=xu(i);let o;return o="string"==typeof(e=(0,ft.m9)(e))||e instanceof ua?fA(s,"updateDoc",n._key,e,t,r):hA(s,"updateDoc",n._key,e),fh(i,[o.toMutation(n._key,xn.exists(!0))])}function S2(n,...e){var t,r,i;n=(0,ft.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||aA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(aA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof Cn)u=wt(n.firestore,rn),f=Bd(n._key.path),c={next:m=>{e[o]&&e[o](yA(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=wt(n,zr);u=wt(m.firestore,rn),f=m._query;const y=new _c(u);c={next:I=>{e[o]&&e[o](new mc(u,y,m,I))},error:e[o+1],complete:e[o+2]},v2(n._query)}return function(y,I,T,R){const P=new qv(R),H=new wC(I,P,T);return y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return mC(yield dh(y),H)})),()=>{P.$a(),y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return yC(yield dh(y),H)}))}}(Nn(u),f,a,c)}function fh(n,e){return function(r,i){const s=new br;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function mX(n,e,t){return MC.apply(this,arguments)}(yield rA(r),i,s)})),s.promise}(Nn(n),e)}function yA(n,e,t){const r=t.docs.get(e._key),i=new _c(n);return new la(n,i,e._key,r,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}const jJ={maxAttempts:5};class R2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xu(e)}set(e,t,r){this._verifyNotCommitted();const i=yc(e,this._firestore),s=sE(i.converter,t,r),o=Xv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=yc(e,this._firestore);let o;return o="string"==typeof(t=(0,ft.m9)(t))||t instanceof ua?fA(this._dataReader,"WriteBatch.update",s._key,t,r,i):hA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yc(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yc(n,e){if((n=(0,ft.m9)(n)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $J extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=xu(t)}get(t){const r=yc(t,this._firestore),i=new IJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ke();const o=s[0];if(o.isFoundDocument())return new Cg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Cg(this._firestore,i,r._key,null,r.converter);throw ke()})}set(t,r,i){const s=yc(t,this._firestore),o=sE(s.converter,r,i),a=Xv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=yc(t,this._firestore);let a;return a="string"==typeof(r=(0,ft.m9)(r))||r instanceof ua?fA(this._dataReader,"Transaction.update",o._key,r,i,s):hA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=yc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),r=new _c(this._firestore);return super.get(e).then(i=>new la(this._firestore,r,t._key,i._document,new Ou(!1,!1),t.converter))}}function EA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function N2(){if(typeof Uint8Array>"u")throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function O2(){if(!function IQ(){return typeof atob<"u"}())throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){xd=Wn.SDK_VERSION,(0,Wn._registerComponent)(new av.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rn(new q7(r.getProvider("auth-internal")),new K7(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Wn.registerVersion)(tF,"4.6.3",e),(0,Wn.registerVersion)(tF,"4.6.3","esm2017")}();class Rg{constructor(e){this._delegate=e}static fromBase64String(e){return O2(),new Rg(Co.fromBase64String(e))}static fromUint8Array(e){return N2(),new Rg(Co.fromUint8Array(e))}toBase64(){return O2(),this._delegate.toBase64()}toUint8Array(){return N2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IA(n){return function XJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class JJ{enableIndexedDbPersistence(e,t){return function JX(n,e){d2(n=wt(n,rn));const t=Nn(n);if(t._uninitializedComponentsProvider)throw new me(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new uh;return l2(t,i,new QC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eJ(n){d2(n=wt(n,rn));const e=Nn(n);if(e._uninitializedComponentsProvider)throw new me(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new uh;return l2(e,r,new qV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tJ(n){if(n._initialized&&!n._terminated)throw new me(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(i){if(!vo.D())return Promise.resolve();const s=i+"main";yield vo.delete(s)}),function r(i){return t.apply(this,arguments)})(U0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class k2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ic||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){o2(this._delegate,e,t,r)}enableNetwork(){return function rJ(n){return function LX(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield KV(n),t=yield ZV(n);return e.setNetworkEnabled(!0),function(i){const s=be(i);return s.M_.delete(0),vg(s)}(t)}))}(Nn(n=wt(n,rn)))}(this._delegate)}disableNetwork(){return function iJ(n){return function VX(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield KV(n),t=yield ZV(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(s){const o=be(s);o.M_.add(0),yield th(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Nn(n=wt(n,rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,t2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nJ(n){return function(t){const r=new br;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function EX(n,e){return kC.apply(this,arguments)}(yield rA(t),r)})),r.promise}(Nn(n=wt(n,rn)))}(this._delegate)}onSnapshotsInSync(e){return function xJ(n,e){return function $X(n,e){const t=new qv(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield dh(n),s=t,be(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield dh(n),s=t,void be(i).z_.delete(s);var i,s}))}}(Nn(n=wt(n,rn)),aA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ph(this,a2(this._delegate,e))}catch(t){throw Ti(t,"collection()","Firestore.collection()")}}doc(e){try{return new ws(this,Zv(this._delegate,e))}catch(t){throw Ti(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bi(this,function KX(n,e){if(n=wt(n,Ig),sA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(n,null,(r=e,new ia(Nt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ti(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HJ(n,e,t){n=wt(n,rn);const r=Object.assign(Object.assign({},jJ),t);return function(s){if(s.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new br;return s.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const u=yield function QV(n){return Gv(n).then(e=>e.datastore)}(s);new kX(s.asyncQueue,u,a,o,c).Xa()})),c.promise}(Nn(n),i=>e(new $J(n,i)),r)}(this._delegate,t=>e(new F2(this,t)))}batch(){return Nn(this._delegate),new L2(new R2(this._delegate,e=>fh(this._delegate,e)))}loadBundle(e){return function sJ(n,e){const t=Nn(n=wt(n,rn)),r=new QX;return function HX(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?gL().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return WV(f,m);if(f instanceof ArrayBuffer)return WV(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new NX(f,a);var f}(t,yg(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function PX(n,e,t){const r=be(n);var i;(i=(0,ae.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(T,R){const P=be(T),H=ir(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.$r.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=u).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(kV(u));const f=new cX(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield ca(o,y.ca,void 0),yield function(T,R){const P=be(T);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.$r.saveBundleMetadata(H,R))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return Bi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oJ(n,e){return function zX(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,i){const s=be(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield lh(n),e)}))}(Nn(n=wt(n,rn)),e).then(t=>t?new zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new bi(this,t):null)}}class aE extends _A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rg(new Co(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ws.forKey(t,this.firestore,null)}}class F2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aE(e)}get(e){const t=Fu(e);return this._delegate.get(t).then(r=>new Mg(this._firestore,new la(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fu(e);return r?(EA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}}class L2{constructor(e){this._delegate=e}set(e,t,r){const i=Fu(e);return r?(EA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ku{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ku.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ku(e,new aE(e),t),i.set(t,s)),s}}ku.INSTANCES=new WeakMap;class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ws(t,new Cn(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new ws(t,new Cn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ph(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ph(this.firestore,a2(this._delegate,e))}catch(t){throw Ti(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ft.m9)(e))instanceof Cn&&c2(this._delegate,e)}set(e,t){t=EA("DocumentReference.set",t);try{return t?A2(this._delegate,e,t):A2(this._delegate,e)}catch(r){throw Ti(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?D2(this._delegate,e):D2(this._delegate,e,t,...r)}catch(i){throw Ti(i,"updateDoc()","DocumentReference.update()")}}delete(){return function MJ(n){return fh(wt(n.firestore,rn),[new Wd(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=V2(e),r=U2(e,i=>new Mg(this.firestore,new la(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return S2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function CJ(n){n=wt(n,Cn);const e=wt(n.firestore,rn),t=Nn(e),r=new _c(e);return function UX(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=be(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new me(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=sh(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield lh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new la(e,r,n._key,i,new Ou(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function AJ(n){n=wt(n,Cn);const e=wt(n.firestore,rn);return YV(Nn(e),n._key,{source:"server"}).then(t=>yA(e,n,t))}(this._delegate):function bJ(n){n=wt(n,Cn);const e=wt(n.firestore,rn);return YV(Nn(e),n._key).then(t=>yA(e,n,t))}(this._delegate),t.then(r=>new Mg(this.firestore,new la(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?ku.getInstance(this.firestore,e):null))}}function Ti(n,e,t){return n.message=n.message.replace(e,t),n}function V2(n){for(const e of n)if("object"==typeof e&&!IA(e))return e;return{}}function U2(n,e){var t,r;let i;return i=IA(n[0])?n[0]:IA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Mg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ws(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return C2(this._delegate,e._delegate)}}class Pg extends Mg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function $7(n,e){n||ke()}(void 0!==t),t}}class bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aE(e)}where(e,t,r){try{return new bi(this.firestore,gc(this._delegate,function fJ(n,e,t){const r=e,i=tE("where",n);return Dg._create(i,r,t)}(e,t,r)))}catch(i){throw Ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bi(this.firestore,gc(this._delegate,function pJ(n,e="asc"){const t=e,r=tE("orderBy",n);return mA._create(r,t)}(e,t)))}catch(r){throw Ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bi(this.firestore,gc(this._delegate,function gJ(n){return i2("limit",n),nE._create("limit",n,"F")}(e)))}catch(t){throw Ti(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bi(this.firestore,gc(this._delegate,function mJ(n){return i2("limitToLast",n),nE._create("limitToLast",n,"L")}(e)))}catch(t){throw Ti(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bi(this.firestore,gc(this._delegate,function _J(...n){return rE._create("startAt",n,!0)}(...e)))}catch(t){throw Ti(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bi(this.firestore,gc(this._delegate,function yJ(...n){return rE._create("startAfter",n,!1)}(...e)))}catch(t){throw Ti(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bi(this.firestore,gc(this._delegate,function vJ(...n){return iE._create("endBefore",n,!1)}(...e)))}catch(t){throw Ti(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bi(this.firestore,gc(this._delegate,function EJ(...n){return iE._create("endAt",n,!0)}(...e)))}catch(t){throw Ti(t,"endAt()","Query.endAt()")}}isEqual(e){return oA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SJ(n){n=wt(n,zr);const e=wt(n.firestore,rn),t=Nn(e),r=new _c(e);return function BX(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const c=yield Lv(s,o,!0),u=new VV(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=sh(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield lh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mc(e,r,n,i))}(this._delegate):"server"===e?.source?function RJ(n){n=wt(n,zr);const e=wt(n.firestore,rn),t=Nn(e),r=new _c(e);return XV(t,n._query,{source:"server"}).then(i=>new mc(e,r,n,i))}(this._delegate):function DJ(n){n=wt(n,zr);const e=wt(n.firestore,rn),t=Nn(e),r=new _c(e);return v2(n._query),XV(t,n._query).then(i=>new mc(e,r,n,i))}(this._delegate),t.then(r=>new wA(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=V2(e),r=U2(e,i=>new wA(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return S2(this._delegate,t,r)}withConverter(e){return new bi(this.firestore,this._delegate.withConverter(e?ku.getInstance(this.firestore,e):null))}}class tee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tee(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pg(this._firestore,r))})}isEqual(e){return C2(this._delegate,e._delegate)}}class ph extends bi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ws(this.firestore,e):null}doc(e){try{return new ws(this.firestore,void 0===e?Zv(this._delegate):Zv(this._delegate,e))}catch(t){throw Ti(t,"doc()","CollectionReference.doc()")}}add(e){return function PJ(n,e){const t=wt(n.firestore,rn),r=Zv(n),i=sE(n.converter,e);return fh(t,[Xv(xu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ws(this.firestore,t))}isEqual(e){return c2(this._delegate,e._delegate)}withConverter(e){return new ph(this.firestore,this._delegate.withConverter(e?ku.getInstance(this.firestore,e):null))}}function Fu(n){return wt(n,Cn)}class TA{constructor(...e){this._delegate=new ua(...e)}static documentId(){return new TA(Tn.keyField().canonicalString())}isEqual(e){return(e=(0,ft.m9)(e))instanceof ua&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qJ(){return new cA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lu(e)}static delete(){const e=function zJ(){return new Tg("deleteField")}();return e._methodName="FieldValue.delete",new Lu(e)}static arrayUnion(...e){const t=function WJ(...n){return new uA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lu(t)}static arrayRemove(...e){const t=function GJ(...n){return new lA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lu(t)}static increment(e){const t=function KJ(n){return new dA("increment",n)}(e);return t._methodName="FieldValue.increment",new Lu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nee={Firestore:k2,GeoPoint:Qv,Timestamp:Pn,Blob:Rg,Transaction:F2,WriteBatch:L2,DocumentReference:ws,DocumentSnapshot:Mg,Query:bi,QueryDocumentSnapshot:Pg,QuerySnapshot:wA,CollectionReference:ph,FieldPath:TA,FieldValue:Lu,setLogLevel:function eee(n){!function j7(n){ec.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function B2(n,e){return function see(n,e=yb){return new ut(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bA(n,e){return B2(n,e).pipe(Me(t=>({payload:t,type:"query"})))}!function iee(n){(function ree(n,e){n.INTERNAL.registerComponent(new av.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nee)))})(n,(e,t)=>new k2(e,t,new JJ)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(_o.Z);class j2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=G2(r,t);return new z2(i,s,this.afs)}snapshotChanges(){return function oee(n,e){return B2(n,e).pipe(Ep(void 0),e0(),Me(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return this.snapshotChanges().pipe(Me(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(wi)}}function cE(n,e){return bA(n,e).pipe(Ep(void 0),e0(),Me(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function $2(n,e,t){return cE(n,t).pipe(jy((r,i)=>function aee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),et(),Me(r=>r.map(i=>({type:i.type,payload:i}))))}function CA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function H2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class z2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ep(void 0),e0(),Ji(([r,i])=>i.length>0||!r),Me(([,r])=>r),wi)}auditTrail(e){return this.stateChanges(e).pipe(jy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=H2(e);return $2(this.query,t,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return bA(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),wi)}get(e){return b(this.query.get(e)).pipe(wi)}add(e){return this.ref.add(e)}doc(e){return new j2(this.ref.doc(e),this.afs)}}class uee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cE(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ji(t=>t.length>0),wi):cE(this.query,this.afs.schedulers.outsideAngular).pipe(wi)}auditTrail(e){return this.stateChanges(e).pipe(jy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=H2(e);return $2(this.query,t,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return bA(this.query,this.afs.schedulers.outsideAngular).pipe(Me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),wi)}get(e){return b(this.query.get(e)).pipe(wi)}}const q2=new ye("angularfire2.enableFirestorePersistence"),W2=new ye("angularfire2.firestore.persistenceSettings"),lee=new ye("angularfire2.firestore.settings"),dee=new ye("angularfire2.firestore.use-emulator");function G2(n,e=(t=>t)){return{query:e(n),ref:n}}let AA=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,T,R,P,H,V){this.schedulers=c;const G=ov(t,a,r),te=f;m&&z1(G,a,y,T,R,P,I,H),[this.firestore,this.persistenceEnabled$]=Jb(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const Ie=a.runOutsideAngular(()=>G.firestore());if(s&&Ie.settings(s),te&&Ie.useEmulator(...te),i&&!by(o)){const Re=()=>{try{return b(Ie.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),k(!1)}};return[Ie,a.runOutsideAngular(Re)]}return[Ie,k(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=G2(i,r),a=this.schedulers.ngZone.run(()=>s);return new z2(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new uee(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new j2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(le(jp),le($p,8),le(q2,8),le(lee,8),le(_s),le(Rt),le(Md),le(W2,8),le(dee,8),le(q1,8),le(V1,8),le(U1,8),le(B1,8),le(j1,8),le($1,8),le(H1,8),le(Bp,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),hee=(()=>{class n{constructor(){_o.Z.registerVersion("angularfire",Ja.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:q2,useValue:!0},{provide:W2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[AA]})}return n})(),fee=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(le(AA))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pee(n,e){1&n&&(Qe(0,"div",11)(1,"span",12),ht(2,"Sponsor al Comunitatii"),Ze(),Qe(3,"span",13),ht(4,"\u2605"),Ze()())}function gee(n,e){if(1&n&&(Qe(0,"div",5)(1,"div",6)(2,"div",7),ht(3),Ze(),Qe(4,"div",8),ht(5),Ze(),Qe(6,"div",8),ht(7),Ze(),Qe(8,"div",8)(9,"a",9),ht(10),Ze()(),Qe(11,"div",8)(12,"a",9),ht(13),Ze()(),Qe(14,"div",8),ht(15),Ze()(),ep(16,pee,5,0,"div",10),Ze()),2&n){const t=e.$implicit;fn(3),ni(t.Name),fn(2),ni(t.Service_Type),fn(2),ni(t.Phone_Number),fn(2),np("href","mailto:",t.Email,"",Qc),fn(1),ni(t.Email),fn(2),tp("href",t.Website,Qc),fn(1),ni(t.Website),fn(2),ni(t.Description),fn(1),ja("ngIf",t.Community_Sponsor)}}let mee=(()=>{class n{constructor(t){this.servicesService=t,this.services=[]}ngOnInit(){this.servicesService.getServices().subscribe(t=>{this.services=t})}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(fee))};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-services"]],decls:9,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"h1"),ht(3,"Lista de Servicii"),Ze()(),Qe(4,"div",2)(5,"h2"),ht(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),Ze()()(),Qe(7,"div",3),ep(8,gee,17,9,"div",4),Ze()),2&r&&(fn(8),ja("ngForOf",i.services))},dependencies:[YT,XT],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})(),_ee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-rules"]],decls:2,vars:0,template:function(r,i){1&r&&(Qe(0,"p"),ht(1,"rules works!"),Ze())}})}return n})(),yee=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(le(AA))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vee(n,e){1&n&&(Qe(0,"div",13)(1,"span",14),ht(2,"Sponsor al Comunitatii"),Ze(),Qe(3,"span",15),ht(4,"\u2605"),Ze()())}function Eee(n,e){if(1&n&&(Qe(0,"div",5)(1,"div",6)(2,"div",7),ht(3),Ze(),Qe(4,"div",8),eu(5,"img",9),Ze(),Qe(6,"div",10),ht(7),Ze(),Qe(8,"div",10),ht(9),Ze(),Qe(10,"div",10),ht(11),Ze(),Qe(12,"div",10),ht(13),Ze(),Qe(14,"div",10)(15,"a",11),ht(16),Ze()(),Qe(17,"div",10)(18,"a",11),ht(19),Ze()(),Qe(20,"div",10),ht(21),Ze()(),ep(22,vee,5,0,"div",12),Ze()),2&n){const t=e.$implicit;fn(3),ni(t.Name),fn(2),tp("src",t.Poster_Image,Qc),fn(2),ni(t.Location),fn(2),ni(t.Event_date),fn(2),ni(t.Price),fn(2),ni(t.Phone_Number),fn(2),np("href","mailto:",t.Contact,"",Qc),fn(1),ni(t.Contact),fn(2),tp("href",t.Website,Qc),fn(1),ni(t.Website),fn(2),ni(t.Description),fn(1),ja("ngIf",t.Community_Sponsor)}}const Iee=[{path:"",component:y7},{path:"services",component:mee},{path:"rules",component:_ee},{path:"events",component:(()=>{class n{constructor(t){this.eventService=t,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}static#e=this.\u0275fac=function(r){return new(r||n)(Ye(yee))};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-events"]],decls:9,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"h1"),ht(3,"Lista de Evenimente"),Ze()(),Qe(4,"div",2)(5,"h2"),ht(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),Ze()()(),Qe(7,"div",3),ep(8,Eee,23,12,"div",4),Ze()),2&r&&(fn(8),ja("ngForOf",i.events))},dependencies:[YT,XT],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:20px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})()},{path:"jobs",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-jobs"]],decls:2,vars:0,template:function(r,i){1&r&&(Qe(0,"p"),ht(1,"jobs works!"),Ze())}})}return n})()}];let wee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({imports:[M1.forRoot(Iee),M1]})}return n})();const Tee=function(n,e){return{"fa-bars":n,"fa-times":e}},bee=function(n){return{active:n}};let Cee=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/jobs",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(Qe(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),ht(4,"Romani in Seattle"),Ze()(),Qe(5,"div",4),Go("click",function(){return i.toggleMenu()}),eu(6,"i",5),Ze(),Qe(7,"ul",6)(8,"li",7)(9,"a",8),Go("click",function(){return i.closeMenu()}),ht(10,"Home"),Ze()(),Qe(11,"li",7)(12,"a",9),Go("click",function(){return i.closeMenu()}),ht(13,"Services"),Ze()(),Qe(14,"li",7)(15,"a",10),Go("click",function(){return i.closeMenu()}),ht(16,"Evenimente"),Ze()(),Qe(17,"li",7)(18,"a",11),Go("click",function(){return i.closeMenu()}),ht(19,"Locuri de Munca"),Ze()(),Qe(20,"li",7)(21,"a",12),Go("click",function(){return i.closeMenu()}),ht(22,"Rules"),Ze()()()()()),2&r&&(fn(6),ja("ngClass",wx(2,Tee,!i.menuOpen,i.menuOpen)),fn(1),ja("ngClass",Ix(5,bee,i.menuOpen)))},dependencies:[iO,iv],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{text-decoration:none;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to right,blue,yellow,red) 1}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),Aee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(Qe(0,"footer",0)(1,"div",1),ht(2," \xa9 2024 Romani in Seattle. All rights reserved. "),Ze()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),Dee=(()=>{class n{constructor(){this.title="romani-in-seattle"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(Qe(0,"div",0),eu(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),Ze())},dependencies:[$b,Cee,Aee],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class K2{}class See{}const da="*";function Z2(n,e=null){return{type:2,steps:n,options:e}}function Q2(n){return{type:6,styles:n,offset:null}}class xg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Y2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function X2(n){return new x(3e3,!1)}function vc(n){switch(n.length){case 0:return new xg;case 1:return n[0];default:return new Y2(n)}}function J2(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let T=I,R=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),R){case"!":R=t.get(I);break;case da:R=r.get(I);break;default:R=n.normalizeStyleValue(I,T,R,i)}m.set(T,R)}),f||s.push(m),a=m,o=u}),i.length)throw function Yee(n){return new x(3502,!1)}();return s}function SA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&RA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&RA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&RA(t,"destroy",n)))}}function RA(n,e,t){const s=MA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function MA(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ns(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function eU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const ute=(()=>typeof document>"u"?null:document.documentElement)();function PA(n){const e=n.parentNode||n.host||null;return e===ute?null:e}let Vu=null,tU=!1;function nU(n,e){for(;e;){if(e===n)return!0;e=PA(e)}return!1}function rU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let iU=(()=>{class n{validateStyleProperty(t){return function dte(n){Vu||(Vu=function hte(){return typeof document<"u"?document.body:null}()||{},tU=!!Vu.style&&"WebkitAppearance"in Vu.style);let e=!0;return Vu.style&&!function lte(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Vu.style,!e&&tU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Vu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return nU(t,r)}getParentElement(t){return PA(t)}query(t,r,i){return rU(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new xg(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),xA=(()=>{class n{static#e=this.NOOP=new iU}return n})();const fte=1e3,NA="ng-enter",uE="ng-leave",lE="ng-trigger",dE=".ng-trigger",oU="ng-animating",OA=".ng-animating";function ha(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kA(parseFloat(e[1]),e[2])}function kA(n,e){return"s"===e?n*fte:n}function hE(n,e,t){return n.hasOwnProperty("duration")?n:function gte(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(X2()),{duration:0,delay:0,easing:""};i=kA(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=kA(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Ree(){return new x(3100,!1)}()),a=!0),s<0&&(e.push(function Mee(){return new x(3101,!1)}()),a=!0),a&&e.splice(c,0,X2())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Ng(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function aU(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ec(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ao(n,e,t){e.forEach((r,i)=>{const s=LA(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Uu(n,e){e.forEach((t,r)=>{const i=LA(r);n.style[i]=""})}function Og(n){return Array.isArray(n)?1==n.length?n[0]:Z2(n):n}const FA=new RegExp("{{\\s*(.+?)\\s*}}","g");function uU(n){let e=[];if("string"==typeof n){let t;for(;t=FA.exec(n);)e.push(t[1]);FA.lastIndex=0}return e}function kg(n,e,t){const r=n.toString(),i=r.replace(FA,(s,o)=>{let a=e[o];return null==a&&(t.push(function xee(n){return new x(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function fE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const yte=/-+([a-z0-9])/g;function LA(n){return n.replace(yte,(...e)=>e[1].toUpperCase())}function rs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Nee(n){return new x(3004,!1)}()}}function lU(n,e){return window.getComputedStyle(n)[e]}const pE="*";function Ite(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function wte(n,e,t){if(":"==n[0]){const c=function Tte(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Gee(n){return new x(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Wee(n){return new x(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(dU(i,o));"<"==s[0]&&!(i==pE&&o==pE)&&e.push(dU(o,i))}(r,t,e)):t.push(n),t}const gE=new Set(["true","1"]),mE=new Set(["false","0"]);function dU(n,e){const t=gE.has(n)||mE.has(n),r=gE.has(e)||mE.has(e);return(i,s)=>{let o=n==pE||n==i,a=e==pE||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?gE.has(n):mE.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?gE.has(e):mE.has(e)),o&&a}}const bte=new RegExp("s*:selfs*,?","g");function VA(n,e,t,r){return new Cte(n).build(e,t,r)}class Cte{constructor(e){this._driver=e}build(e,t,r){const i=new Ste(t);return this._resetContextStyleTimingState(i),rs(this,Og(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function kee(){return new x(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function Fee(){return new x(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{uU(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(fE(s.values()),t.errors.push(function Lee(n,e){return new x(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=rs(this,Og(e.animation),t);return{type:1,matchers:Ite(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Bu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>rs(this,r,t)),options:Bu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=rs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Bu(e.options)}}visitAnimate(e,t){const r=function Mte(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return UA(hE(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=UA(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=hE(t,e);return UA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Q2({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=Q2(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===da?r.push(a):t.errors.push(new x(3002,!1)):r.push(aU(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function Uee(n,e,t,r,i){return new x(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function _te(n,e,t){const r=e.params||{},i=uU(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Pee(n){return new x(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Bee(){return new x(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(H=>{const V=this._makeStyleAst(H,t);let G=null!=V.offset?V.offset:function Rte(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(V.styles),te=0;return null!=G&&(s++,te=V.offset=G),c=c||te<0||te>1,a=a||te<u,u=te,o.push(te),V});c&&t.errors.push(function jee(){return new x(3012,!1)}()),a&&t.errors.push(function $ee(){return new x(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function Hee(){return new x(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,R=t.currentAnimateTimings,P=R.duration;return f.forEach((H,V)=>{const G=y>0?V==I?1:y*V:o[V],te=G*P;t.currentTime=T+R.delay+te,R.duration=te,this._validateStyleAst(H,t),H.offset=G,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:rs(this,Og(e.animation),t),options:Bu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Ate(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(bte,"")),n=n.replace(/@\*/g,dE).replace(/@\w+/g,t=>dE+"-"+t.slice(1)).replace(/:animating/g,OA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ns(t.collectedStyles,t.currentQuerySelector,new Map);const a=rs(this,Og(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Bu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function zee(){return new x(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:hE(e.timings,t.errors,!0);return{type:12,animation:rs(this,Og(e.animation),t),timings:r,options:null}}}class Ste{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bu(n){return n?(n=Ng(n)).params&&(n.params=function Dte(n){return n?Ng(n):null}(n.params)):n={},n}function UA(n,e,t){return{duration:n,delay:e,easing:t}}function BA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class _E{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Nte=new RegExp(":enter","g"),kte=new RegExp(":leave","g");function jA(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new Fte).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class Fte{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new _E;const m=new $A(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?ha(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),rs(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let R=I.length-1;R>=0;R--){const P=I[R];if(P.element===t){T=P;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,c)}return I.length?I.map(T=>T.buildKeyframes()):[BA(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ha(kg(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ha(r.duration):null,a=null!=r.delay?ha(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),rs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=yE);const o=ha(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>rs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ha(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),rs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return hE(t.params?kg(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ha(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=yE);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),rs(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;rs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const yE={};class $A{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new vE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ha(r.duration)),null!=r.delay&&(i.delay=ha(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=kg(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new $A(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=yE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Lte(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Nte,"."+this._enterClassName)).replace(kte,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function qee(n){return new x(3014,!1)}()),a}}class vE{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new vE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||da),this._currentKeyframe.set(t,da);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Vte(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,da)}else Ec(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=kg(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??da),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=Ec(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===da&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?fE(e.values()):[],o=t.size?fE(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return BA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Lte extends vE{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Ec(e[0]);c.set("offset",0),s.push(c);const u=Ec(e[0]);u.set("offset",pU(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=Ec(e[m]);const I=y.get("offset");y.set("offset",pU((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return BA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function pU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class HA{}const Ute=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Bte extends HA{normalizePropertyName(e,t){return LA(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Ute.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Oee(n,e){return new x(3005,!1)}())}return o+s}}function gU(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const zA={};class mU{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function jte(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||zA,T=this.buildStyles(r,a&&a.params||zA,m),R=c&&c.params||zA,P=this.buildStyles(i,R,m),H=new Set,V=new Map,G=new Map,te="void"===i,Ie={params:$te(R,y),delay:this.ast.options?.delay},Re=f?[]:jA(e,t,this.ast.animation,s,o,T,P,Ie,u,m);let j=0;if(Re.forEach(L=>{j=Math.max(L.duration+L.delay,j)}),m.length)return gU(t,this._triggerName,r,i,te,T,P,[],[],V,G,j,m);Re.forEach(L=>{const z=L.element,q=ns(V,z,new Set);L.preStyleProps.forEach(U=>q.add(U));const X=ns(G,z,new Set);L.postStyleProps.forEach(U=>X.add(U)),z!==t&&H.add(z)});const N=fE(H.values());return gU(t,this._triggerName,r,i,te,T,P,Re,N,V,G,j)}}function $te(n,e){const t=Ng(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Hte{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Ng(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=kg(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class qte{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Hte(i.style,i.options&&i.options.params||{},r))}),_U(this.states,"true","1"),_U(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new mU(e,i,this.states))}),this.fallbackTransition=function Wte(n,e,t){return new mU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function _U(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Gte=new _E;class Kte{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=VA(this._driver,t,r,[]);if(r.length)throw function Xee(n){return new x(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=J2(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=jA(this._driver,t,s,NA,uE,new Map,new Map,r,Gte,i),o.forEach(f=>{const m=ns(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Jee(){return new x(3300,!1)}()),o=[]),i.length)throw function ete(n){return new x(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,da))})});const u=vc(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function tte(n){return new x(3301,!1)}();return t}listen(e,t,r,i){const s=MA(t,"","","");return SA(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const yU="ng-animate-queued",qA="ng-animate-disabled",Jte=[],vU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ene={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Hs="__ng_removed";class WA{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function ine(n){return n??null}(r?e.value:e),r){const s=Ng(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Fg="void",GA=new WA(Fg);class tne{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ts(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function nte(n,e){return new x(3302,!1)}();if(null==r||0==r.length)throw function rte(n){return new x(3303,!1)}();if(!function sne(n){return"start"==n||"done"==n}(r))throw function ite(n,e){return new x(3400,!1)}();const s=ns(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=ns(this._engine.statesByElement,e,new Map);return a.has(t)||(Ts(e,lE),Ts(e,lE+"-"+t),a.set(t,GA)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ste(n){return new x(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new KA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ts(e,lE),Ts(e,lE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new WA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=GA),u.value!==Fg&&c.value===u.value){if(!function cne(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const R=[],P=s.matchStyles(c.value,c.params,R),H=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Uu(e,P),Ao(e,H)})}return}const y=ns(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:T}),T||(Ts(e,yU),o.onStart(()=>{gh(e,yU)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const P=this._engine.playersByElement.get(e);if(P){let H=P.indexOf(o);H>=0&&P.splice(H,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,dE,!0);r.forEach(i=>{if(i[Hs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,Fg,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&vc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||GA,f=new WA(Fg),m=new KA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Hs];(!s||s===vU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ts(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=MA(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,SA(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class nne{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new tne(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(EE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!EE(t))return;const s=t[Hs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ts(e,qA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gh(e,qA))}removeNode(e,t,r){if(EE(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Hs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return EE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,dE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Hs];if(t&&t.setForRemoval){if(e[Hs]=vU,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ts(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?vc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function ote(n){return new x(3402,!1)}()}_flushAnimations(e,t){const r=new _E,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(Ve=>{f.add(Ve);const qe=this.driver.query(Ve,".ng-animate-queued",!0);for(let We=0;We<qe.length;We++)f.add(qe[We])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=wU(y,this.collectedEnterElements),T=new Map;let R=0;I.forEach((Ve,qe)=>{const We=NA+R++;T.set(qe,We),Ve.forEach(Mt=>Ts(Mt,We))});const P=[],H=new Set,V=new Set;for(let Ve=0;Ve<this.collectedLeaveElements.length;Ve++){const qe=this.collectedLeaveElements[Ve],We=qe[Hs];We&&We.setForRemoval&&(P.push(qe),H.add(qe),We.hasAnimation?this.driver.query(qe,".ng-star-inserted",!0).forEach(Mt=>H.add(Mt)):V.add(qe))}const G=new Map,te=wU(y,Array.from(H));te.forEach((Ve,qe)=>{const We=uE+R++;G.set(qe,We),Ve.forEach(Mt=>Ts(Mt,We))}),e.push(()=>{I.forEach((Ve,qe)=>{const We=T.get(qe);Ve.forEach(Mt=>gh(Mt,We))}),te.forEach((Ve,qe)=>{const We=G.get(qe);Ve.forEach(Mt=>gh(Mt,We))}),P.forEach(Ve=>{this.processLeaveNode(Ve)})});const Ie=[],Re=[];for(let Ve=this._namespaceList.length-1;Ve>=0;Ve--)this._namespaceList[Ve].drainQueuedTransitions(t).forEach(We=>{const Mt=We.player,sr=We.element;if(Ie.push(Mt),this.collectedEnterElements.length){const Zn=sr[Hs];if(Zn&&Zn.setForMove){if(Zn.previousTriggersValues&&Zn.previousTriggersValues.has(We.triggerName)){const ga=Zn.previousTriggersValues.get(We.triggerName),Hi=this.statesByElement.get(We.element);if(Hi&&Hi.has(We.triggerName)){const ma=Hi.get(We.triggerName);ma.value=ga,Hi.set(We.triggerName,ma)}}return void Mt.destroy()}}const Cs=!m||!this.driver.containsElement(m,sr),Kn=G.get(sr),An=T.get(sr),Dn=this._buildInstruction(We,r,An,Kn,Cs);if(Dn.errors&&Dn.errors.length)return void Re.push(Dn);if(Cs)return Mt.onStart(()=>Uu(sr,Dn.fromStyles)),Mt.onDestroy(()=>Ao(sr,Dn.toStyles)),void i.push(Mt);if(We.isFallbackTransition)return Mt.onStart(()=>Uu(sr,Dn.fromStyles)),Mt.onDestroy(()=>Ao(sr,Dn.toStyles)),void i.push(Mt);const wc=[];Dn.timelines.forEach(Zn=>{Zn.stretchStartingKeyframe=!0,this.disabledNodes.has(Zn.element)||wc.push(Zn)}),Dn.timelines=wc,r.append(sr,Dn.timelines),o.push({instruction:Dn,player:Mt,element:sr}),Dn.queriedElements.forEach(Zn=>ns(a,Zn,[]).push(Mt)),Dn.preStyleProps.forEach((Zn,ga)=>{if(Zn.size){let Hi=c.get(ga);Hi||c.set(ga,Hi=new Set),Zn.forEach((ma,Tc)=>Hi.add(Tc))}}),Dn.postStyleProps.forEach((Zn,ga)=>{let Hi=u.get(ga);Hi||u.set(ga,Hi=new Set),Zn.forEach((ma,Tc)=>Hi.add(Tc))})});if(Re.length){const Ve=[];Re.forEach(qe=>{Ve.push(function ate(n,e){return new x(3505,!1)}())}),Ie.forEach(qe=>qe.destroy()),this.reportError(Ve)}const j=new Map,N=new Map;o.forEach(Ve=>{const qe=Ve.element;r.has(qe)&&(N.set(qe,qe),this._beforeAnimationBuild(Ve.player.namespaceId,Ve.instruction,j))}),i.forEach(Ve=>{const qe=Ve.element;this._getPreviousPlayers(qe,!1,Ve.namespaceId,Ve.triggerName,null).forEach(Mt=>{ns(j,qe,[]).push(Mt),Mt.destroy()})});const L=P.filter(Ve=>bU(Ve,c,u)),z=new Map;IU(z,this.driver,V,u,da).forEach(Ve=>{bU(Ve,c,u)&&L.push(Ve)});const X=new Map;I.forEach((Ve,qe)=>{IU(X,this.driver,new Set(Ve),c,"!")}),L.forEach(Ve=>{const qe=z.get(Ve),We=X.get(Ve);z.set(Ve,new Map([...qe?.entries()??[],...We?.entries()??[]]))});const U=[],bs=[],Ic={};o.forEach(Ve=>{const{element:qe,player:We,instruction:Mt}=Ve;if(r.has(qe)){if(f.has(qe))return We.onDestroy(()=>Ao(qe,Mt.toStyles)),We.disabled=!0,We.overrideTotalTime(Mt.totalTime),void i.push(We);let sr=Ic;if(N.size>1){let Kn=qe;const An=[];for(;Kn=Kn.parentNode;){const Dn=N.get(Kn);if(Dn){sr=Dn;break}An.push(Kn)}An.forEach(Dn=>N.set(Dn,sr))}const Cs=this._buildAnimation(We.namespaceId,Mt,j,s,X,z);if(We.setRealPlayer(Cs),sr===Ic)U.push(We);else{const Kn=this.playersByElement.get(sr);Kn&&Kn.length&&(We.parentPlayer=vc(Kn)),i.push(We)}}else Uu(qe,Mt.fromStyles),We.onDestroy(()=>Ao(qe,Mt.toStyles)),bs.push(We),f.has(qe)&&i.push(We)}),bs.forEach(Ve=>{const qe=s.get(Ve.element);if(qe&&qe.length){const We=vc(qe);Ve.setRealPlayer(We)}}),i.forEach(Ve=>{Ve.parentPlayer?Ve.syncPlayerEvents(Ve.parentPlayer):Ve.destroy()});for(let Ve=0;Ve<P.length;Ve++){const qe=P[Ve],We=qe[Hs];if(gh(qe,uE),We&&We.hasAnimation)continue;let Mt=[];if(a.size){let Cs=a.get(qe);Cs&&Cs.length&&Mt.push(...Cs);let Kn=this.driver.query(qe,OA,!0);for(let An=0;An<Kn.length;An++){let Dn=a.get(Kn[An]);Dn&&Dn.length&&Mt.push(...Dn)}}const sr=Mt.filter(Cs=>!Cs.destroyed);sr.length?one(this,qe,sr):this.processLeaveNode(qe)}return P.length=0,U.forEach(Ve=>{this.players.push(Ve),Ve.onDone(()=>{Ve.destroy();const qe=this.players.indexOf(Ve);this.players.splice(qe,1)}),Ve.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Fg;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=ns(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}Uu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const R=T.element;f.add(R);const P=R[Hs];if(P&&P.removedBeforeQueried)return new xg(T.duration,T.delay);const H=R!==c,V=function ane(n){const e=[];return TU(n,e),e}((r.get(R)||Jte).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===R),G=s.get(R),te=o.get(R),Ie=J2(this._normalizer,T.keyframes,G,te),Re=this._buildPlayer(T,Ie,V);if(T.subTimeline&&i&&m.add(R),H){const j=new KA(e,a,R);j.setRealPlayer(Re),u.push(j)}return Re});u.forEach(T=>{ns(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function rne(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>Ts(T,oU));const I=vc(y);return I.onDestroy(()=>{f.forEach(T=>gh(T,oU)),Ao(c,t.toStyles)}),m.forEach(T=>{ns(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new xg(e.duration,e.delay)}}class KA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new xg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>SA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ns(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function EE(n){return n&&1===n.nodeType}function EU(n,e){const t=n.style.display;return n.style.display=e??"none",t}function IU(n,e,t,r,i){const s=[];t.forEach(c=>s.push(EU(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[Hs]=ene,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>EU(c,s[a++])),o}function wU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function Ts(n,e){n.classList?.add(e)}function gh(n,e){n.classList?.remove(e)}function one(n,e,t){vc(t).onDone(()=>n.processLeaveNode(e))}function TU(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Y2?TU(r.players,e):e.push(r)}}function bU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class IE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new nne(e,t,r),this._timelineEngine=new Kte(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=VA(this._driver,s,c,[]);if(c.length)throw function Qee(n,e){return new x(3404,!1)}();a=function zte(n,e,t){return new qte(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=eU(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=eU(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let lne=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ao(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ao(this._element,this._initialStyles),this._endStyles&&(Ao(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Uu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Uu(this._element,this._endStyles),this._endStyles=null),Ao(this._element,this._initialStyles),this._state=3)}}return n})();function ZA(n){let e=null;return n.forEach((t,r)=>{(function dne(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class CU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:lU(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hne{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return nU(e,t)}getParentElement(e){return PA(e)}query(e,t,r){return rU(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof CU);(function vte(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,R)=>u.set(R,T))});let m=function mte(n){return n.length?n[0]instanceof Map?n:n.map(e=>aU(e)):[]}(t).map(I=>Ec(I));m=function Ete(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,lU(n,a)))}}return e}(e,m,u);const y=function une(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZA(e[0]),e.length>1&&(r=ZA(e[e.length-1]))):e instanceof Map&&(t=ZA(e)),t||r?new lne(n,t,r):null}(e,m);return new CU(e,m,c,y)}}let fne=(()=>{class n extends K2{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Hn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Z2(t):t;return AU(this._renderer,null,r,"register",[i]),new pne(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(le(zf),le(zn))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class pne extends See{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new gne(this._id,e,t||{},this._renderer)}}class gne{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return AU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AU(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const DU="@.disabled";let mne=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new SU("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new _ne(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(le(zf),le(IE),le(Rt))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class SU{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==DU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _ne extends SU{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==DU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function yne(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function vne(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const RU=[{provide:K2,useClass:fne},{provide:HA,useFactory:function Ine(){return new Bte}},{provide:IE,useClass:(()=>{class n extends IE{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(le(zn),le(xA),le(HA),le(iu))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})()},{provide:zf,useFactory:function wne(n,e,t){return new mne(n,e,t)},deps:[lb,IE,Rt]}],QA=[{provide:xA,useFactory:()=>new hne},{provide:TR,useValue:"BrowserAnimations"},...RU],MU=[{provide:xA,useClass:iU},{provide:TR,useValue:"NoopAnimations"},...RU];let Tne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?MU:QA}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n});static#n=this.\u0275inj=ln({providers:QA,imports:[SO]})}return n})();const PU_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class mh{constructor(e){return e}}class YA{constructor(){return(0,Wn.getApps)()}}const XA=new ye("angularfire2._apps"),Cne={provide:mh,useFactory:function bne(n){return n&&1===n.length?n[0]:new mh((0,Wn.getApp)())},deps:[[new hr,XA]]},Ane={provide:YA,deps:[[new hr,XA]]};function Dne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mh(r)}}let Sne=(()=>{class n{constructor(t){(0,Wn.registerVersion)("angularfire",Ja.full,"core"),(0,Wn.registerVersion)("angularfire",Ja.full,"app"),(0,Wn.registerVersion)("angular",_w.full,t.toString())}static \u0275fac=function(r){return new(r||n)(le(_s))};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[Cne,Ane]})}return n})();function Rne(n,...e){return{ngModule:Sne,providers:[{provide:XA,useFactory:Dne(n),multi:!0,deps:[Rt,ei,Md,...e]}]}}const Mne=Xb(Wn.initializeApp,!0);Ge(35);class eD{constructor(){return sv("auth")}}class nD{constructor(e){return e}}const NU="firestore",rD=new ye("angularfire2.firestore-instances");function Fne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nD(r)}}const Lne={provide:class One{constructor(){return sv(NU)}},deps:[[new hr,rD]]},Vne={provide:nD,useFactory:function kne(n,e){const t=Yb(NU,n,e);return t&&new nD(t)},deps:[[new hr,rD],mh]};let Une=(()=>{class n{constructor(){(0,Wn.registerVersion)("angularfire",Ja.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[Vne,Lne]})}return n})();function Bne(n,...e){return{ngModule:Une,providers:[{provide:rD,useFactory:Fne(n),multi:!0,deps:[Rt,ei,Md,YA,[new hr,eD],[new hr,Bp],...e]}]}}const jne=Xb(XX,!0),OU="firebasestorage.googleapis.com",kU="storageBucket";class $n extends ft.ZR{constructor(e,t,r=0){super(iD(e),`Firebase Storage: ${t} (${iD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var On=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(On||{});function iD(n){return"storage/"+n}function sD(){return new $n(On.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function FU(){return new $n(On.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LU(){return new $n(On.CANCELED,"User canceled the upload/download.")}function VU(){return new $n(On.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _h(n){return new $n(On.INVALID_ARGUMENT,n)}function UU(){return new $n(On.APP_DELETED,"The Firebase app was deleted.")}function BU(n){return new $n(On.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lg(n,e){return new $n(On.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Vg(n){throw new $n(On.INTERNAL_ERROR,"Internal error: "+n)}class ai{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ai.makeFromUrl(e,t)}catch{return new ai(e,"")}if(""===r.path)return r;throw function Yne(n){return new $n(On.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(te){te.path_=decodeURIComponent(te.path)}const m=t.replace(/[.]/g,"\\."),G=[{regex:a,indices:{bucket:1,path:3},postModify:function s(te){"/"===te.path.charAt(te.path.length-1)&&(te.path_=te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===OU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let te=0;te<G.length;te++){const Ie=G[te],Re=Ie.regex.exec(e);if(Re){let N=Re[Ie.indices.path];N||(N=""),r=new ai(Re[Ie.indices.bucket],N),Ie.postModify(r);break}}if(null==r)throw function Qne(n){return new $n(On.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class nre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TE(n){return"string"==typeof n||n instanceof String}function jU(n){return oD()&&n instanceof Blob}function oD(){return typeof Blob<"u"}function aD(n,e,t,r){if(r<e)throw _h(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _h(`Invalid value for '${n}'. Expected ${t} or less.`)}function fa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $U(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var yh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(yh||{});function HU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class cre{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function sre(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=sD();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?UU():LU():FU())};this.canceled_?t(0,new bE(!1,null,!0)):this.backoffId_=function rre(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...P){u||(u=!0,e.apply(null,P))}function m(P){i=setTimeout(()=>{i=null,n(I,c())},P)}function y(){s&&clearTimeout(s)}function I(P,...H){if(u)return void y();if(P)return y(),void f.call(null,P,...H);if(c()||o)return y(),void f.call(null,P,...H);let G;r<64&&(r*=2),1===a?(a=2,G=0):G=1e3*(r+Math.random()),m(G)}let T=!1;function R(P){T||(T=!0,y(),!u&&(null!==i?(P||(a=2),clearTimeout(i),m(0)):P||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new bE(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===yh.NO_ERROR,c=s.getStatus();if(!a||HU(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===yh.ABORT;return void r(!1,new bE(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new bE(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ire(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bE{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function gre(...n){const e=function pre(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(oD())return new Blob(n);throw new $n(On.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const is={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cD{constructor(e,t){this.data=e,this.contentType=t||null}}function uD(n,e){switch(n){case is.RAW:return new cD(zU(e));case is.BASE64:case is.BASE64URL:return new cD(qU(n,e));case is.DATA_URL:return new cD(function vre(n){const e=new WU(n);return e.base64?qU(is.BASE64,e.rest):function yre(n){let e;try{e=decodeURIComponent(n)}catch{throw Lg(is.DATA_URL,"Malformed data URL.")}return zU(e)}(e.rest)}(e),function Ere(n){return new WU(n).contentType}(e))}throw sD()}function zU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function qU(n,e){switch(n){case is.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Lg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case is.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Lg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function _re(n){if(typeof atob>"u")throw function tre(n){return new $n(On.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Lg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class WU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Lg(is.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ire(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Do{constructor(e,t){let r=0,i="";jU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(jU(this.data_)){const i=function mre(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Do(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Do(r,!0)}}static getBlob(...e){if(oD()){const t=e.map(r=>r instanceof Do?r.data_:r);return new Do(gre.apply(null,t))}{const t=e.map(o=>TE(o)?uD(is.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Do(i,!0)}}uploadData(){return this.data_}}function lD(n){let e;try{e=JSON.parse(n)}catch{return null}return function are(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function GU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function bre(n,e){return e}class Ci{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||bre}}let CE=null;function Ug(){if(CE)return CE;const n=[];n.push(new Ci("bucket")),n.push(new Ci("generation")),n.push(new Ci("metageneration")),n.push(new Ci("name","fullPath",!0));const t=new Ci("name");t.xform=function e(s,o){return function Cre(n){return!TE(n)||n.length<2?n:GU(n)}(o)},n.push(t);const i=new Ci("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Ci("timeCreated")),n.push(new Ci("updated")),n.push(new Ci("md5Hash",null,!0)),n.push(new Ci("cacheControl",null,!0)),n.push(new Ci("contentDisposition",null,!0)),n.push(new Ci("contentEncoding",null,!0)),n.push(new Ci("contentLanguage",null,!0)),n.push(new Ci("contentType",null,!0)),n.push(new Ci("metadata","customMetadata",!0)),CE=n,CE}function KU(n,e,t){const r=lD(e);return null===r?null:function Dre(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Are(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ai(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function dD(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const ZU="prefixes",QU="items";class So{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ro(n){if(!n)throw sD()}function AE(n,e){return function t(r,i){const s=KU(n,i,e);return Ro(null!==s),s}}function vh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Kne(){return new $n(On.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Gne(){return new $n(On.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Wne(n){return new $n(On.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Zne(n){return new $n(On.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Bg(n){const e=vh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function qne(n){return new $n(On.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function YU(n,e,t){const i=fa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new So(i,"GET",AE(n,t),o);return a.errorHandler=Bg(e),a}function Nre(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=fa(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new So(a,"GET",function Pre(n,e){return function t(r,i){const s=function Mre(n,e,t){const r=lD(t);return null===r?null:function Rre(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ZU])for(const i of t[ZU]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new ai(e,s));r.prefixes.push(o)}if(t[QU])for(const i of t[QU]){const s=n._makeStorageReference(new ai(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Ro(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=vh(e),f}function JU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Lre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class DE{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function hD(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ro(!1)}return Ro(!!t&&-1!==(e||["active"]).indexOf(t)),t}const jre={STATE_CHANGED:"state_changed"},Ai={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fD(n){switch(n){case"running":case"pausing":case"canceling":return Ai.RUNNING;case"paused":return Ai.PAUSED;case"success":return Ai.SUCCESS;case"canceled":return Ai.CANCELED;default:return Ai.ERROR}}class $re{constructor(e,t,r){if(function ore(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Eh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let nB=null;class Hre{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Vg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class zre extends Hre{initXhr(){this.xhr_.responseType="text"}}function zs(){return nB?nB():new zre}class rB{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Ug(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(On.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(HU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=FU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(On.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Vre(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=JU(e,r,i),a={name:o.fullPath},c=fa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=dD(o,t),T=new So(c,"POST",function I(R){let P;hD(R);try{P=R.getResponseHeader("X-Goog-Upload-URL")}catch{Ro(!1)}return Ro(TE(P)),P},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=vh(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Ure(n,e,t,r){const c=new So(t,"POST",function s(u){const f=hD(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ro(!1)}m||Ro(!1);const y=Number(m);return Ro(!isNaN(y)),new DE(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=vh(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,zs,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new DE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Bre(n,e,t,r,i,s,o,a){const c=new DE(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function Jne(){return new $n(On.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(m,m+f);if(null===R)throw VU();const G=new So(t,"POST",function P(te,Ie){const Re=hD(te,["active","final"]),j=c.current+f,N=r.size();let L;return L="final"===Re?AE(e,s)(te,Ie):null,new DE(j,N,"final"===Re,L)},e.maxUploadRetryTime);return G.headers=T,G.body=R.uploadData(),G.progressCallback=a||null,G.errorHandler=vh(n),G}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,zs,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=YU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,zs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function eB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let G="";for(let te=0;te<2;te++)G+=Math.random().toString().slice(2);return G}();o["Content-Type"]="multipart/related; boundary="+c;const u=JU(e,r,i),f=dD(u,t),I=Do.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw VU();const T={name:u.fullPath},R=fa(s,n.host,n._protocol),H=n.maxUploadRetryTime,V=new So(R,"POST",AE(n,t),H);return V.urlParams=T,V.headers=o,V.body=I.uploadData(),V.errorHandler=vh(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zs,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=LU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=fD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new $re(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(fD(this._state)){case Ai.SUCCESS:Eh(this._resolve.bind(null,this.snapshot))();break;case Ai.CANCELED:case Ai.ERROR:Eh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fD(this._state)){case Ai.RUNNING:case Ai.PAUSED:e.next&&Eh(e.next.bind(e,this.snapshot))();break;case Ai.SUCCESS:e.complete&&Eh(e.complete.bind(e))();break;default:e.error&&Eh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ju{constructor(e,t){this._service=e,this._location=t instanceof ai?t:ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ju(e,t)}get root(){const e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GU(this._location.path)}get storage(){return this._service}get parent(){const e=function wre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ai(this._location.bucket,e);return new ju(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw BU(e)}}function sB(n,e,t){return pD.apply(this,arguments)}function pD(){return(pD=(0,ae.Z)(function*(n,e,t){const i=yield oB(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield sB(n,e,i.nextPageToken))})).apply(this,arguments)}function oB(n,e){null!=e&&"number"==typeof e.maxResults&&aD("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Nre(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,zs)}function nie(n){n._throwIfRoot("getDownloadURL");const e=function Ore(n,e,t){const i=fa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new So(i,"GET",function xre(n,e){return function t(r,i){const s=KU(n,i,e);return Ro(null!==s),function Sre(n,e,t,r){const i=lD(e);if(null===i||!TE(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return fa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+$U({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Bg(e),a}(n.storage,n._location,Ug());return n.storage.makeRequestWithTokens(e,zs).then(t=>{if(null===t)throw function ere(){return new $n(On.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function aB(n,e){const t=function Tre(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ai(n._location.bucket,t);return new ju(n.storage,r)}function cB(n,e){if(n instanceof gD){const t=n;if(null==t._bucket)throw function Xne(){return new $n(On.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kU+"' property when initializing the app?")}();const r=new ju(t,t._bucket);return null!=e?cB(r,e):r}return void 0!==e?aB(n,e):n}function oie(n,e){if(e&&function iie(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gD)return function sie(n,e){return new ju(n,e)}(n,e);throw _h("To use ref(service, url), the first argument must be a Storage instance.")}return cB(n,e)}function uB(n,e){const t=e?.[kU];return null==t?null:ai.makeFromBucketSpec(t,n)}class gD{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=OU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ai.makeFromBucketSpec(i,this._host):uB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ai.makeFromBucketSpec(this._url,e):uB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ju(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new nre(UU());{const o=function fre(n,e,t,r,i,s,o=!0){const a=$U(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function dre(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function ure(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function lre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function hre(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new cre(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const lB="@firebase/storage",hB="storage";function fB(n,e){return oie(n=(0,ft.m9)(n),e)}function mie(n=(0,Wn.getApp)(),e){n=(0,ft.m9)(n);const r=(0,Wn._getProvider)(n,hB).getImmediate({identifier:e}),i=(0,ft.P0)("storage");return i&&pB(r,...i),r}function pB(n,e,t,r={}){!function aie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,ft.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function _ie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gD(t,r,i,e,Wn.SDK_VERSION)}!function yie(){(0,Wn._registerComponent)(new av.wA(hB,_ie,"PUBLIC").setMultipleInstances(!0)),(0,Wn.registerVersion)(lB,"0.12.5",""),(0,Wn.registerVersion)(lB,"0.12.5","esm2017")}();class SE{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class gB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SE(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new SE(o,this,this._ref)):{next:t.next?o=>t.next(new SE(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class mB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pa(e,this._service))}get items(){return this._delegate.items.map(e=>new pa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function gie(n,e){return aB(n,e)}(this._delegate,e);return new pa(t,this.storage)}get root(){return new pa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new gB(function cie(n,e,t){return function Yre(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rB(n,new Do(e),t)}(n=(0,ft.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=is.RAW,r){this._throwIfRoot("putString");const i=uD(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new gB(new rB(this._delegate,new Do(i.data,!0),s),this)}listAll(){return function hie(n){return function Jre(n){const e={prefixes:[],items:[]};return sB(n,e).then(()=>e)}(n=(0,ft.m9)(n))}(this._delegate).then(e=>new mB(e,this.storage))}list(e){return function die(n,e){return oB(n=(0,ft.m9)(n),e)}(this._delegate,e||void 0).then(t=>new mB(t,this.storage))}getMetadata(){return function uie(n){return function eie(n){n._throwIfRoot("getMetadata");const e=YU(n.storage,n._location,Ug());return n.storage.makeRequestWithTokens(e,zs)}(n=(0,ft.m9)(n))}(this._delegate)}updateMetadata(e){return function lie(n,e){return function tie(n,e){n._throwIfRoot("updateMetadata");const t=function kre(n,e,t,r){const s=fa(e.fullServerUrl(),n.host,n._protocol),a=dD(t,r),u=n.maxOperationRetryTime,f=new So(s,"PATCH",AE(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Bg(e),f}(n.storage,n._location,e,Ug());return n.storage.makeRequestWithTokens(t,zs)}(n=(0,ft.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function fie(n){return nie(n=(0,ft.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function pie(n){return function rie(n){n._throwIfRoot("deleteObject");const e=function Fre(n,e){const r=fa(e.fullServerUrl(),n.host,n._protocol),a=new So(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Bg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zs)}(n=(0,ft.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw BU(e)}}class _B{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yB(e))throw _h("ref() expected a child path but got a URL, use refFromURL instead.");return new pa(fB(this._delegate,e),this)}refFromURL(e){if(!yB(e))throw _h("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ai.makeFromUrl(e,this._delegate.host)}catch{throw _h("refFromUrl() expected a valid full URL but got an invalid one.")}return new pa(fB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){pB(this._delegate,e,t,r)}}function yB(n){return/^[A-Za-z]+:\/\//.test(n)}function wie(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new _B(t,r)}function vB(n){const e=function bie(n){return new ut(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(zO(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Me(t=>t.bytesTransferred/t.totalBytes*100))}}function RE(n){return{getDownloadURL:()=>k(void 0).pipe(N1,Fe(()=>n.getDownloadURL()),wi),getMetadata:()=>k(void 0).pipe(N1,Fe(()=>n.getMetadata()),wi),delete:()=>b(n.delete()),child:e=>RE(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>vB(n.put(e,t)),putString:(e,t,r)=>vB(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function Tie(n){const e={TaskState:Ai,TaskEvent:jre,StringFormat:is,Storage:_B,Reference:pa};n.INTERNAL.registerComponent(new av.wA("storage-compat",wie,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(_o.Z);const Cie=new ye("angularfire2.storageBucket"),Aie=new ye("angularfire2.storage.maxUploadRetryTime"),Die=new ye("angularfire2.storage.maxOperationRetryTime"),Sie=new ye("angularfire2.storage.use-emulator");let Rie=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=ov(t,o,r);this.storage=Jb(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return RE(this.storage.ref(t))}refFromURL(t){return RE(this.storage.refFromURL(t))}upload(t,r,i){return RE(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(le(jp),le($p,8),le(Cie,8),le(_s),le(Rt),le(Md),le(Aie,8),le(Die,8),le(Sie,8),le(Bp,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Mie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vn({type:n});static \u0275inj=ln({})}return n})(),Pie=(()=>{class n{constructor(){_o.Z.registerVersion("angularfire",Ja.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[Rie],imports:[Mie]})}return n})();class mD{constructor(e){return e}}const EB="storage",_D=new ye("angularfire2.storage-instances");function Oie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mD(r)}}const kie={provide:class xie{constructor(){return sv(EB)}},deps:[[new hr,_D]]},Fie={provide:mD,useFactory:function Nie(n,e){const t=Yb(EB,n,e);return t&&new mD(t)},deps:[[new hr,_D],mh]};let Lie=(()=>{class n{constructor(){(0,Wn.registerVersion)("angularfire",Ja.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vn({type:n});static \u0275inj=ln({providers:[Fie,kie]})}return n})();function Vie(n,...e){return{ngModule:Lie,providers:[{provide:_D,useFactory:Oie(n),multi:!0,deps:[Rt,ei,Md,YA,[new hr,eD],[new hr,Bp],...e]}]}}const Uie=Xb(mie,!0);let Bie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Vn({type:n,bootstrap:[Dee]});static#n=this.\u0275inj=ln({imports:[SO,wee,Tne,p8,K8,Y8,hee,Pie,F7.initializeApp(PU_firebase),Rne(()=>Mne(PU_firebase)),Bne(()=>jne()),Vie(()=>Uie())]})}return n})();u5().bootstrapModule(Bie).catch(n=>console.error(n))},106:(os,Yn,Ge)=>{Ge.d(Yn,{Z:()=>Xn});var M=Ge(58),we=Ge(537),O=Ge(534),Ue=Ge(879);class kt{constructor(tt,nt){this._delegate=tt,this.firebase=nt,(0,O._addComponent)(tt,new we.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(tt,nt=O._DEFAULT_ENTRY_NAME){var or;this._delegate.checkDestroyed();const yn=this._delegate.container.getProvider(tt);return!yn.isInitialized()&&"EXPLICIT"===(null===(or=yn.getComponent())||void 0===or?void 0:or.instantiationMode)&&yn.initialize(),yn.getImmediate({identifier:nt})}_removeServiceInstance(tt,nt=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(nt)}_addComponent(tt){(0,O._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,O._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const kn=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function Pt(){const Tt=function en(Tt){const tt={},nt={__esModule:!0,initializeApp:function yt(ct,Rn={}){const fe=O.initializeApp(ct,Rn);if((0,M.r3)(tt,fe.name))return tt[fe.name];const sn=new Tt(fe,nt);return tt[fe.name]=sn,sn},app:yn,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Wr(ct){const Rn=ct.name,fe=Rn.replace("-compat","");if(O._registerComponent(ct)&&"PUBLIC"===ct.type){const sn=(Zt=yn())=>{if("function"!=typeof Zt[fe])throw kn.create("invalid-app-argument",{appName:Rn});return Zt[fe]()};void 0!==ct.serviceProps&&(0,M.ZB)(sn,ct.serviceProps),nt[fe]=sn,Tt.prototype[fe]=function(...Zt){return this._getService.bind(this,Rn).apply(this,ct.multipleInstances?Zt:[])}}return"PUBLIC"===ct.type?nt[fe]:null},removeApp:function or(ct){delete tt[ct]},useAsService:function Vt(ct,Rn){return"serverAuth"===Rn?null:Rn},modularAPIs:O}};function yn(ct){if(!(0,M.r3)(tt,ct=ct||O._DEFAULT_ENTRY_NAME))throw kn.create("no-app",{appName:ct});return tt[ct]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Bt(){return Object.keys(tt).map(ct=>tt[ct])}}),yn.App=Tt,nt}(kt);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:Pt,extendNamespace:function tt(nt){(0,M.ZB)(Tt,nt)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),Tt}(),Ee=new Ue.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xn=de;!function Ft(Tt){(0,O.registerVersion)("@firebase/app-compat","0.2.35",Tt)}()},534:(os,Yn,Ge)=>{Ge.r(Yn),Ge.d(Yn,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>kr,_addOrOverwriteComponent:()=>tn,_apps:()=>Nr,_clearComponents:()=>Pi,_components:()=>En,_getProvider:()=>Fn,_isFirebaseApp:()=>Rs,_isFirebaseServerApp:()=>Yt,_registerComponent:()=>Ar,_removeServiceInstance:()=>Gs,_serverApps:()=>Or,deleteApp:()=>xs,getApp:()=>Zs,getApps:()=>Qs,initializeApp:()=>Ps,initializeServerApp:()=>Ks,onLog:()=>b,registerVersion:()=>F,setLogLevel:()=>S});var M=Ge(861),we=Ge(537),O=Ge(879),Ue=Ge(58);const kt=(x,W)=>W.some(Q=>x instanceof Q);let _n,kn;const de=new WeakMap,Ee=new WeakMap,Be=new WeakMap,at=new WeakMap,Ft=new WeakMap;let tt={get(x,W,Q){if(x instanceof IDBTransaction){if("done"===W)return Ee.get(x);if("objectStoreNames"===W)return x.objectStoreNames||Be.get(x);if("store"===W)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return yt(x[W])},set:(x,W,Q)=>(x[W]=Q,!0),has:(x,W)=>x instanceof IDBTransaction&&("done"===W||"store"===W)||W in x};function yn(x){return"function"==typeof x?function or(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pt(){return kn||(kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...W){return x.apply(Bt(this),W),yt(de.get(this))}:function(...W){return yt(x.apply(Bt(this),W))}:function(W,...Q){const _e=x.call(Bt(this),W,...Q);return Be.set(_e,W.sort?W.sort():[W]),yt(_e)}}(x):(x instanceof IDBTransaction&&function Tt(x){if(Ee.has(x))return;const W=new Promise((Q,_e)=>{const rt=()=>{x.removeEventListener("complete",lt),x.removeEventListener("error",mt),x.removeEventListener("abort",mt)},lt=()=>{Q(),rt()},mt=()=>{_e(x.error||new DOMException("AbortError","AbortError")),rt()};x.addEventListener("complete",lt),x.addEventListener("error",mt),x.addEventListener("abort",mt)});Ee.set(x,W)}(x),kt(x,function en(){return _n||(_n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,tt):x)}function yt(x){if(x instanceof IDBRequest)return function Xn(x){const W=new Promise((Q,_e)=>{const rt=()=>{x.removeEventListener("success",lt),x.removeEventListener("error",mt)},lt=()=>{Q(yt(x.result)),rt()},mt=()=>{_e(x.error),rt()};x.addEventListener("success",lt),x.addEventListener("error",mt)});return W.then(Q=>{Q instanceof IDBCursor&&de.set(Q,x)}).catch(()=>{}),Ft.set(W,x),W}(x);if(at.has(x))return at.get(x);const W=yn(x);return W!==x&&(at.set(x,W),Ft.set(W,x)),W}const Bt=x=>Ft.get(x),ct=["get","getKey","getAll","getAllKeys","count"],Rn=["put","add","delete","clear"],fe=new Map;function sn(x,W){if(!(x instanceof IDBDatabase)||W in x||"string"!=typeof W)return;if(fe.get(W))return fe.get(W);const Q=W.replace(/FromIndex$/,""),_e=W!==Q,rt=Rn.includes(Q);if(!(Q in(_e?IDBIndex:IDBObjectStore).prototype)||!rt&&!ct.includes(Q))return;const lt=function(){var mt=(0,M.Z)(function*(qt,...bt){const xi=this.transaction(qt,rt?"readwrite":"readonly");let xo=xi.store;return _e&&(xo=xo.index(bt.shift())),(yield Promise.all([xo[Q](...bt),rt&&xi.done]))[0]});return function(bt){return mt.apply(this,arguments)}}();return fe.set(W,lt),lt}!function nt(x){tt=x(tt)}(x=>({...x,get:(W,Q,_e)=>sn(W,Q)||x.get(W,Q,_e),has:(W,Q)=>!!sn(W,Q)||x.has(W,Q)}));class Zt{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function vn(x){const W=x.getComponent();return"VERSION"===W?.type}(Q)){const _e=Q.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(Q=>Q).join(" ")}}const di="@firebase/app",hi="0.10.5",ut=new O.Yd("@firebase/app"),fi="[DEFAULT]",qi={[di]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Nr=new Map,Or=new Map,En=new Map;function kr(x,W){try{x.container.addComponent(W)}catch(Q){ut.debug(`Component ${W.name} failed to register with FirebaseApp ${x.name}`,Q)}}function tn(x,W){x.container.addOrOverwriteComponent(W)}function Ar(x){const W=x.name;if(En.has(W))return ut.debug(`There were multiple attempts to register component ${W}.`),!1;En.set(W,x);for(const Q of Nr.values())kr(Q,x);for(const Q of Or.values())kr(Q,x);return!0}function Fn(x,W){const Q=x.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),x.container.getProvider(W)}function Gs(x,W,Q=fi){Fn(x,W).clearInstance(Q)}function Rs(x){return void 0!==x.options}function Yt(x){return void 0!==x.settings}function Pi(){En.clear()}const Ln=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ar{constructor(W,Q,_e){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new we.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}class In extends ar{constructor(W,Q,_e,rt){const lt=void 0!==Q.automaticDataCollectionEnabled&&Q.automaticDataCollectionEnabled,mt={name:_e,automaticDataCollectionEnabled:lt};super(void 0!==W.apiKey?W:W.options,mt,rt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:lt},Q),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Q.releaseOnDeref=void 0,F(di,hi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(W){this.isDeleted||(this._refCount++,void 0!==W&&this._finalizationRegistry.register(W,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ln.create("server-app-deleted")}}const Dr="10.12.2";function Ps(x,W={}){let Q=x;"object"!=typeof W&&(W={name:W});const _e=Object.assign({name:fi,automaticDataCollectionEnabled:!1},W),rt=_e.name;if("string"!=typeof rt||!rt)throw Ln.create("bad-app-name",{appName:String(rt)});if(Q||(Q=(0,Ue.aH)()),!Q)throw Ln.create("no-options");const lt=Nr.get(rt);if(lt){if((0,Ue.vZ)(Q,lt.options)&&(0,Ue.vZ)(_e,lt.config))return lt;throw Ln.create("duplicate-app",{appName:rt})}const mt=new we.H0(rt);for(const bt of En.values())mt.addComponent(bt);const qt=new ar(Q,_e,mt);return Nr.set(rt,qt),qt}function Ks(x,W){if((0,Ue.jU)())throw Ln.create("invalid-server-app-environment");let Q;void 0===W.automaticDataCollectionEnabled&&(W.automaticDataCollectionEnabled=!1),Q=Rs(x)?x.options:x;const _e=Object.assign(Object.assign({},W),Q);if(void 0!==_e.releaseOnDeref&&delete _e.releaseOnDeref,void 0!==W.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ln.create("finalization-registry-not-supported",{});const lt=""+(xi=JSON.stringify(_e),[...xi].reduce((xo,un)=>Math.imul(31,xo)+un.charCodeAt(0)|0,0)),mt=Or.get(lt);var xi;if(mt)return mt.incRefCount(W.releaseOnDeref),mt;const qt=new we.H0(lt);for(const xi of En.values())qt.addComponent(xi);const bt=new In(Q,W,lt,qt);return Or.set(lt,bt),bt}function Zs(x=fi){const W=Nr.get(x);if(!W&&x===fi&&(0,Ue.aH)())return Ps();if(!W)throw Ln.create("no-app",{appName:x});return W}function Qs(){return Array.from(Nr.values())}function xs(x){return B.apply(this,arguments)}function B(){return(B=(0,M.Z)(function*(x){let W=!1;const Q=x.name;Nr.has(Q)?(W=!0,Nr.delete(Q)):Or.has(Q)&&x.decRefCount()<=0&&(Or.delete(Q),W=!0),W&&(yield Promise.all(x.container.getProviders().map(_e=>_e.delete())),x.isDeleted=!0)})).apply(this,arguments)}function F(x,W,Q){var _e;let rt=null!==(_e=qi[x])&&void 0!==_e?_e:x;Q&&(rt+=`-${Q}`);const lt=rt.match(/\s|\//),mt=W.match(/\s|\//);if(lt||mt){const qt=[`Unable to register library "${rt}" with version "${W}":`];return lt&&qt.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),lt&&mt&&qt.push("and"),mt&&qt.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void ut.warn(qt.join(" "))}Ar(new we.wA(`${rt}-version`,()=>({library:rt,version:W}),"VERSION"))}function b(x,W){if(null!==x&&"function"!=typeof x)throw Ln.create("invalid-log-argument");(0,O.Am)(x,W)}function S(x){(0,O.Ub)(x)}const w="firebase-heartbeat-database",k=1,ue="firebase-heartbeat-store";let Ae=null;function Fe(){return Ae||(Ae=function Wr(x,W,{blocked:Q,upgrade:_e,blocking:rt,terminated:lt}={}){const mt=indexedDB.open(x,W),qt=yt(mt);return _e&&mt.addEventListener("upgradeneeded",bt=>{_e(yt(mt.result),bt.oldVersion,bt.newVersion,yt(mt.transaction),bt)}),Q&&mt.addEventListener("blocked",bt=>Q(bt.oldVersion,bt.newVersion,bt)),qt.then(bt=>{lt&&bt.addEventListener("close",()=>lt()),rt&&bt.addEventListener("versionchange",xi=>rt(xi.oldVersion,xi.newVersion,xi))}).catch(()=>{}),qt}(w,k,{upgrade:(x,W)=>{if(0===W)try{x.createObjectStore(ue)}catch(Q){console.warn(Q)}}}).catch(x=>{throw Ln.create("idb-open",{originalErrorMessage:x.message})})),Ae}function St(){return(St=(0,M.Z)(function*(x){try{const Q=(yield Fe()).transaction(ue),_e=yield Q.objectStore(ue).get(je(x));return yield Q.done,_e}catch(W){if(W instanceof Ue.ZR)ut.warn(W.message);else{const Q=Ln.create("idb-get",{originalErrorMessage:W?.message});ut.warn(Q.message)}}})).apply(this,arguments)}function De(x,W){return jt.apply(this,arguments)}function jt(){return(jt=(0,M.Z)(function*(x,W){try{const _e=(yield Fe()).transaction(ue,"readwrite");yield _e.objectStore(ue).put(W,je(x)),yield _e.done}catch(Q){if(Q instanceof Ue.ZR)ut.warn(Q.message);else{const _e=Ln.create("idb-set",{originalErrorMessage:Q?.message});ut.warn(_e.message)}}})).apply(this,arguments)}function je(x){return`${x.name}!${x.options.appId}`}class va{constructor(W){this.container=W,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Ia(Q),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var W=this;return(0,M.Z)(function*(){var Q,_e;const lt=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Ke();if((null!=(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||(W._heartbeatsCache=yield W._heartbeatsCachePromise,null!=(null===(_e=W._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&W._heartbeatsCache.lastSentHeartbeatDate!==mt&&!W._heartbeatsCache.heartbeats.some(qt=>qt.date===mt))return W._heartbeatsCache.heartbeats.push({date:mt,agent:lt}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(qt=>{const bt=new Date(qt.date).valueOf();return Date.now()-bt<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,M.Z)(function*(){var Q;if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null==(null===(Q=W._heartbeatsCache)||void 0===Q?void 0:Q.heartbeats)||0===W._heartbeatsCache.heartbeats.length)return"";const _e=Ke(),{heartbeatsToSend:rt,unsentEntries:lt}=function Ea(x,W=1024){const Q=[];let _e=x.slice();for(const rt of x){const lt=Q.find(mt=>mt.agent===rt.agent);if(lt){if(lt.dates.push(rt.date),Po(Q)>W){lt.dates.pop();break}}else if(Q.push({agent:rt.agent,dates:[rt.date]}),Po(Q)>W){Q.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:Q,unsentEntries:_e}}(W._heartbeatsCache.heartbeats),mt=(0,Ue.L)(JSON.stringify({version:2,heartbeats:rt}));return W._heartbeatsCache.lastSentHeartbeatDate=_e,lt.length>0?(W._heartbeatsCache.heartbeats=lt,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),mt})()}}function Ke(){return(new Date).toISOString().substring(0,10)}class Ia{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,M.Z)(function*(){if(yield W._canUseIndexedDBPromise){const _e=yield function et(x){return St.apply(this,arguments)}(W.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const lt=yield Q.read();return De(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:lt.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var Q=this;return(0,M.Z)(function*(){var _e;if(yield Q._canUseIndexedDBPromise){const lt=yield Q.read();return De(Q.app,{lastSentHeartbeatDate:null!==(_e=W.lastSentHeartbeatDate)&&void 0!==_e?_e:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...W.heartbeats]})}})()}}function Po(x){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:x})).length}!function Wu(x){Ar(new we.wA("platform-logger",W=>new Zt(W),"PRIVATE")),Ar(new we.wA("heartbeat",W=>new va(W),"PRIVATE")),F(di,hi,x),F(di,hi,"esm2017"),F("fire-js","")}("")},537:(os,Yn,Ge)=>{Ge.d(Yn,{H0:()=>en,wA:()=>O});var M=Ge(861),we=Ge(58);class O{constructor(de,Ee,Be){this.name=de,this.instanceFactory=Ee,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const Ue="[DEFAULT]";class kt{constructor(de,Ee){this.name=de,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const Ee=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(Ee)){const Be=new we.BH;if(this.instancesDeferred.set(Ee,Be),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:Ee});at&&Be.resolve(at)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(de){var Ee;const Be=this.normalizeInstanceIdentifier(de?.identifier),at=null!==(Ee=de?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Ft){if(at)return null;throw Ft}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function kn(Pt){return"EAGER"===Pt.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[Ee,Be]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(Ee);try{const Ft=this.getOrInitializeService({instanceIdentifier:at});Be.resolve(Ft)}catch{}}}}clearInstance(de=Ue){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,M.Z)(function*(){const Ee=Array.from(de.instances.values());yield Promise.all([...Ee.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...Ee.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=Ue){return this.instances.has(de)}getOptions(de=Ue){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:Ee={}}=de,Be=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Be,options:Ee});for(const[Ft,Xn]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Ft)&&Xn.resolve(at);return at}onInit(de,Ee){var Be;const at=this.normalizeInstanceIdentifier(Ee),Ft=null!==(Be=this.onInitCallbacks.get(at))&&void 0!==Be?Be:new Set;Ft.add(de),this.onInitCallbacks.set(at,Ft);const Xn=this.instances.get(at);return Xn&&de(Xn,at),()=>{Ft.delete(de)}}invokeOnInitCallbacks(de,Ee){const Be=this.onInitCallbacks.get(Ee);if(Be)for(const at of Be)try{at(de,Ee)}catch{}}getOrInitializeService({instanceIdentifier:de,options:Ee={}}){let Be=this.instances.get(de);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(Pt=de,Pt===Ue?void 0:Pt),options:Ee}),this.instances.set(de,Be),this.instancesOptions.set(de,Ee),this.invokeOnInitCallbacks(Be,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,Be)}catch{}var Pt;return Be||null}normalizeInstanceIdentifier(de=Ue){return this.component?this.component.multipleInstances?de:Ue:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const Ee=this.getProvider(de.name);if(Ee.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);Ee.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const Ee=new kt(de,this);return this.providers.set(de,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},879:(os,Yn,Ge)=>{Ge.d(Yn,{Am:()=>Pt,Ub:()=>en,Yd:()=>kn,in:()=>we});const M=[];var we=function(de){return de[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",de}(we||{});const O={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Ue=we.INFO,kt={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},_n=(de,Ee,...Be)=>{if(Ee<de.logLevel)return;const at=(new Date).toISOString(),Ft=kt[Ee];if(!Ft)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[Ft](`[${at}]  ${de.name}:`,...Be)};class kn{constructor(Ee){this.name=Ee,this._logLevel=Ue,this._logHandler=_n,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in we))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?O[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...Ee),this._logHandler(this,we.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...Ee),this._logHandler(this,we.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,we.INFO,...Ee),this._logHandler(this,we.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,we.WARN,...Ee),this._logHandler(this,we.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...Ee),this._logHandler(this,we.ERROR,...Ee)}}function en(de){M.forEach(Ee=>{Ee.setLogLevel(de)})}function Pt(de,Ee){for(const Be of M){let at=null;Ee&&Ee.level&&(at=O[Ee.level]),Be.userLogHandler=null===de?null:(Ft,Xn,...Tt)=>{const tt=Tt.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Xn>=(at??Ft.logLevel)&&de({level:we[Xn].toLowerCase(),message:tt,args:Tt,type:Ft.name})}}}},365:(os,Yn,Ge)=>{Ge.r(Yn);var M=Ge(861),we=Ge(106),O=Ge(35),Ue=Ge(58),kn=(Ge(534),Ge(879),Ge(537));function en(){return window}function Ee(){return Ee=(0,M.Z)(function*(b,S,w){var k;const{BuildInfo:ue}=en();(0,O.au)(S.sessionId,"AuthEvent did not contain a session ID");const Ae=yield function nt(b){return or.apply(this,arguments)}(S.sessionId),Fe={};return(0,O.av)()?Fe.ibi=ue.packageName:(0,O.aw)()?Fe.apn=ue.packageName:(0,O.ax)(b,"operation-not-supported-in-this-environment"),ue.displayName&&(Fe.appDisplayName=ue.displayName),Fe.sessionId=Ae,(0,O.ay)(b,w,S.type,void 0,null!==(k=S.eventId)&&void 0!==k?k:void 0,Fe)}),Ee.apply(this,arguments)}function at(){return(at=(0,M.Z)(function*(b){const{BuildInfo:S}=en(),w={};(0,O.av)()?w.iosBundleId=S.packageName:(0,O.aw)()?w.androidPackageName=S.packageName:(0,O.ax)(b,"operation-not-supported-in-this-environment"),yield(0,O.az)(b,w)})).apply(this,arguments)}function Tt(){return(Tt=(0,M.Z)(function*(b,S,w){const{cordova:k}=en();let ue=()=>{};try{yield new Promise((Ae,Fe)=>{let et=null;function St(){var je;Ae();const cr=null===(je=k.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof cr&&cr(),"function"==typeof w?.close&&w.close()}function De(){et||(et=window.setTimeout(()=>{Fe((0,O.aB)(b,"redirect-cancelled-by-user"))},2e3))}function jt(){"visible"===document?.visibilityState&&De()}S.addPassiveListener(St),document.addEventListener("resume",De,!1),(0,O.aw)()&&document.addEventListener("visibilitychange",jt,!1),ue=()=>{S.removePassiveListener(St),document.removeEventListener("resume",De,!1),document.removeEventListener("visibilitychange",jt,!1),et&&window.clearTimeout(et)}})}finally{ue()}})).apply(this,arguments)}function or(){return(or=(0,M.Z)(function*(b){const S=function yn(b){if((0,O.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const S=new ArrayBuffer(b.length),w=new Uint8Array(S);for(let k=0;k<b.length;k++)w[k]=b.charCodeAt(k);return w}(b),w=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Bt extends O.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(S)),super.onEvent(S)}initialized(){var S=this;return(0,M.Z)(function*(){yield S.initPromise})()}}function ct(b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,M.Z)(function*(b){const S=yield Zt()._get(vn(b));return S&&(yield Zt()._remove(vn(b))),S})).apply(this,arguments)}function sn(){const b=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return b.join("")}function Zt(){return(0,O.aE)(O.b)}function vn(b){return(0,O.aF)("authEvent",b.config.apiKey,b.name)}function ut(b){if(!b?.includes("?"))return{};const[S,...w]=b.split("?");return(0,Ue.zd)(w.join("?"))}const ee=class Ri{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){const k=S._key();let ue=w.eventManagers.get(k);return ue||(ue=new Bt(S),w.eventManagers.set(k,ue),w.attachCallbackListeners(S,ue)),ue})()}_openPopup(S){(0,O.ax)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,w,k,ue){var Ae=this;return(0,M.Z)(function*(){!function tt(b){var S,w,k,ue,Ae,Fe,et,St,De,jt;const je=en();(0,O.aC)("function"==typeof(null===(S=je?.universalLinks)||void 0===S?void 0:S.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aC)(typeof(null===(w=je?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aC)("function"==typeof(null===(Ae=null===(ue=null===(k=je?.cordova)||void 0===k?void 0:k.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ae?void 0:Ae.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(St=null===(et=null===(Fe=je?.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===et?void 0:et.browsertab)||void 0===St?void 0:St.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aC)("function"==typeof(null===(jt=null===(De=je?.cordova)||void 0===De?void 0:De.InAppBrowser)||void 0===jt?void 0:jt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Fe=yield Ae._initialize(S);yield Fe.initialized(),Fe.resetRedirect(),(0,O.aI)(),yield Ae._originValidation(S);const et=function Wr(b,S,w=null){return{type:S,eventId:w,urlResponse:null,sessionId:sn(),postBody:null,tenantId:b.tenantId,error:(0,O.aB)(b,"no-auth-event")}}(S,k,ue);yield function Vt(b,S){return Zt()._set(vn(b),S)}(S,et);const St=yield function de(b,S,w){return Ee.apply(this,arguments)}(S,et,w),De=yield function Ft(b){const{cordova:S}=en();return new Promise(w=>{S.plugins.browsertab.isAvailable(k=>{let ue=null;k?S.plugins.browsertab.openUrl(b):ue=S.InAppBrowser.open(b,(0,O.aA)()?"_blank":"_system","location=yes"),w(ue)})})}(St);return function Xn(b,S,w){return Tt.apply(this,arguments)}(S,Fe,De)})()}_isIframeWebStorageSupported(S,w){throw new Error("Method not implemented.")}_originValidation(S){const w=S._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Be(b){return at.apply(this,arguments)}(S)),this.originValidationPromises[w]}attachCallbackListeners(S,w){const{universalLinks:k,handleOpenURL:ue,BuildInfo:Ae}=en(),Fe=setTimeout((0,M.Z)(function*(){yield ct(S),w.onEvent(re())}),500),et=function(){var jt=(0,M.Z)(function*(je){clearTimeout(Fe);const cr=yield ct(S);let Mo=null;cr&&je?.url&&(Mo=function fe(b,S){var w,k;const ue=function hi(b){const S=ut(b),w=S.link?decodeURIComponent(S.link):void 0,k=ut(w).link,ue=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return ut(ue).link||ue||k||w||b}(S);if(ue.includes("/__/auth/callback")){const Ae=ut(ue),Fe=Ae.firebaseError?function di(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Ae.firebaseError)):null,et=null===(k=null===(w=Fe?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],St=et?(0,O.aB)(et):null;return St?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:ue,postBody:null}}return null}(cr,je.url)),w.onEvent(Mo||re())});return function(cr){return jt.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,et);const St=ue,De=`${Ae.packageName.toLowerCase()}://`;en().handleOpenURL=function(){var jt=(0,M.Z)(function*(je){if(je.toLowerCase().startsWith(De)&&et({url:je}),"function"==typeof St)try{St(je)}catch(cr){console.error(cr)}});return function(je){return jt.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aB)("no-auth-event")}}function Te(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Me(b=(0,Ue.z$)()){return!("file:"!==Te()&&"ionic:"!==Te()&&"capacitor:"!==Te()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){try{const b=self.localStorage,S=O.aN();if(b)return b.setItem(S,"1"),b.removeItem(S),!function Qt(b=(0,Ue.z$)()){return function Dt(){return(0,Ue.w1)()&&11===document?.documentMode}()||function on(b=(0,Ue.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Ue.hl)()}catch{return Mn()&&(0,Ue.hl)()}return!1}function Mn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function er(){return(function vt(){return"http:"===Te()||"https:"===Te()}()||(0,Ue.ru)()||Me())&&!function Le(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&Jn()&&!Mn()}function mr(){return Me()&&typeof document<"u"}function Ds(){return(Ds=(0,M.Z)(function*(){return!!mr()&&new Promise(b=>{const S=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),b(!0)})})})).apply(this,arguments)}const Lt={LOCAL:"local",NONE:"none",SESSION:"session"},Mi=O.aC,Ws="persistence";function fi(b){return qi.apply(this,arguments)}function qi(){return(qi=(0,M.Z)(function*(b){yield b._initializationPromise;const S=Or(),w=O.aF(Ws,b.config.apiKey,b.name);S&&S.setItem(w,b._getPersistence())})).apply(this,arguments)}function Or(){var b;try{return(null===(b=function zi(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const En=O.aC;class kr{constructor(){this.browserResolver=O.aE(O.k),this.cordovaResolver=O.aE(ee),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aG,this._overrideRedirectResult=O.aH}_initialize(S){var w=this;return(0,M.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,w,k,ue){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openPopup(S,w,k,ue)})()}_openRedirect(S,w,k,ue){var Ae=this;return(0,M.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openRedirect(S,w,k,ue)})()}_isIframeWebStorageSupported(S,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,w)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return mr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return En(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,M.Z)(function*(){if(S.underlyingResolver)return;const w=yield function xr(){return Ds.apply(this,arguments)}();S.underlyingResolver=w?S.cordovaResolver:S.browserResolver})()}}function tn(b){return b.unwrap()}function Fn(b){return Rs(b)}function Rs(b){const{_tokenResponse:S}=b instanceof Ue.ZR?b.customData:b;if(!S)return null;if(!(b instanceof Ue.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return O.P.credentialFromResult(b);const w=S.providerId;if(!w||w===O.p.PASSWORD)return null;let k;switch(w){case O.p.GOOGLE:k=O.X;break;case O.p.FACEBOOK:k=O.W;break;case O.p.GITHUB:k=O.Y;break;case O.p.TWITTER:k=O.$;break;default:const{oauthIdToken:ue,oauthAccessToken:Ae,oauthTokenSecret:Fe,pendingToken:et,nonce:St}=S;return Ae||Fe||ue||et?et?w.startsWith("saml.")?O.aQ._create(w,et):O.N._fromParams({providerId:w,signInMethod:w,pendingToken:et,idToken:ue,accessToken:Ae}):new O.Z(w).credential({idToken:ue,accessToken:Ae,rawNonce:St}):null}return b instanceof Ue.ZR?k.credentialFromError(b):k.credentialFromResult(b)}function Yt(b,S){return S.catch(w=>{throw w instanceof Ue.ZR&&function Gs(b,S){var w;const k=null===(w=S.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Ln(b,O.as(b,S));else if(k){const ue=Rs(S),Ae=S;ue&&(Ae.credential=ue,Ae.tenantId=k.tenantId||void 0,Ae.email=k.email||void 0,Ae.phoneNumber=k.phoneNumber||void 0)}}(b,w),w}).then(w=>{const ue=w.user;return{operationType:w.operationType,credential:Fn(w),additionalUserInfo:O.aq(w),user:ar.getOrCreate(ue)}})}function Pi(b,S){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,M.Z)(function*(b,S){const w=yield S;return{verificationId:w.verificationId,confirm:k=>Yt(b,w.confirm(k))}})).apply(this,arguments)}class Ln{constructor(S,w){this.resolver=w,this.auth=function Ar(b){return b.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Yt(tn(this.auth),this.resolver.resolveSignIn(S))}}class ar{constructor(S){this._delegate=S,this.multiFactor=O.at(S)}static getOrCreate(S){return ar.USER_MAP.has(S)||ar.USER_MAP.set(S,new ar(S)),ar.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,O.a2(w._delegate,S))})()}linkWithPhoneNumber(S,w){var k=this;return(0,M.Z)(function*(){return Pi(k.auth,O.l(k._delegate,S,w))})()}linkWithPopup(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,O.d(w._delegate,S,kr))})()}linkWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield fi(O.aJ(w.auth)),O.g(w._delegate,S,kr)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var w=this;return(0,M.Z)(function*(){return Yt(w.auth,O.a3(w._delegate,S))})()}reauthenticateWithPhoneNumber(S,w){return Pi(this.auth,O.r(this._delegate,S,w))}reauthenticateWithPopup(S){return Yt(this.auth,O.e(this._delegate,S,kr))}reauthenticateWithRedirect(S){var w=this;return(0,M.Z)(function*(){return yield fi(O.aJ(w.auth)),O.h(w._delegate,S,kr)})()}sendEmailVerification(S){return O.ag(this._delegate,S)}unlink(S){var w=this;return(0,M.Z)(function*(){return yield O.ap(w._delegate,S),w})()}updateEmail(S){return O.al(this._delegate,S)}updatePassword(S){return O.am(this._delegate,S)}updatePhoneNumber(S){return O.u(this._delegate,S)}updateProfile(S){return O.ak(this._delegate,S)}verifyBeforeUpdateEmail(S,w){return O.ah(this._delegate,S,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const In=O.aC;let Dr=(()=>{class b{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=w.options;In(ue,"invalid-api-key",{appName:w.name}),In(ue,"invalid-api-key",{appName:w.name});const Ae=typeof window<"u"?kr:void 0;this._delegate=k.initialize({options:{persistence:Ks(ue,w.name),popupRedirectResolver:Ae}}),this._delegate._updateErrorMap(O.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){O.K(this._delegate,w,k)}applyActionCode(w){return O.a7(this._delegate,w)}checkActionCode(w){return O.a8(this._delegate,w)}confirmPasswordReset(w,k){return O.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var ue=this;return(0,M.Z)(function*(){return Yt(ue._delegate,O.aa(ue._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return O.af(this._delegate,w)}isSignInWithEmailLink(w){return O.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,M.Z)(function*(){In(er(),w._delegate,"operation-not-supported-in-this-environment");const k=yield O.j(w._delegate,kr);return k?Yt(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function oe(b,S){(0,O.aJ)(b)._logFramework(S)}(this._delegate,w)}onAuthStateChanged(w,k,ue){const{next:Ae,error:Fe,complete:et}=Ps(w,k,ue);return this._delegate.onAuthStateChanged(Ae,Fe,et)}onIdTokenChanged(w,k,ue){const{next:Ae,error:Fe,complete:et}=Ps(w,k,ue);return this._delegate.onIdTokenChanged(Ae,Fe,et)}sendSignInLinkToEmail(w,k){return O.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return O.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,M.Z)(function*(){let ue;switch(function Ss(b,S){Mi(Object.values(Lt).includes(S),b,"invalid-persistence-type"),(0,Ue.b$)()?Mi(S!==Lt.SESSION,b,"unsupported-persistence-type"):(0,Ue.UG)()?Mi(S===Lt.NONE,b,"unsupported-persistence-type"):Mn()?Mi(S===Lt.NONE||S===Lt.LOCAL&&(0,Ue.hl)(),b,"unsupported-persistence-type"):Mi(S===Lt.NONE||Jn(),b,"unsupported-persistence-type")}(k._delegate,w),w){case Lt.SESSION:ue=O.a;break;case Lt.LOCAL:ue=(yield O.aE(O.i)._isAvailable())?O.i:O.b;break;case Lt.NONE:ue=O.U;break;default:return O.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Yt(this._delegate,O.a0(this._delegate))}signInWithCredential(w){return Yt(this._delegate,O.a1(this._delegate,w))}signInWithCustomToken(w){return Yt(this._delegate,O.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return Yt(this._delegate,O.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return Yt(this._delegate,O.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return Pi(this._delegate,O.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,M.Z)(function*(){return In(er(),k._delegate,"operation-not-supported-in-this-environment"),Yt(k._delegate,O.c(k._delegate,w,kr))})()}signInWithRedirect(w){var k=this;return(0,M.Z)(function*(){return In(er(),k._delegate,"operation-not-supported-in-this-environment"),yield fi(k._delegate),O.f(k._delegate,w,kr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return O.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Lt,b})();function Ps(b,S,w){let k=b;"function"!=typeof b&&({next:k,error:S,complete:w}=b);const ue=k;return{next:Fe=>ue(Fe&&ar.getOrCreate(Fe)),error:S,complete:w}}function Ks(b,S){const w=function Nr(b,S){const w=Or();if(!w)return[];const k=O.aF(Ws,b,S);switch(w.getItem(k)){case Lt.NONE:return[O.U];case Lt.LOCAL:return[O.i,O.a];case Lt.SESSION:return[O.a];default:return[]}}(b,S);if(typeof self<"u"&&!w.includes(O.i)&&w.push(O.i),typeof window<"u")for(const k of[O.b,O.a])w.includes(k)||w.push(k);return w.includes(O.U)||w.push(O.U),w}class Zs{constructor(){this.providerId="phone",this._delegate=new O.P(tn(we.Z.auth()))}static credential(S,w){return O.P.credential(S,w)}verifyPhoneNumber(S,w){return this._delegate.verifyPhoneNumber(S,w)}unwrap(){return this._delegate}}Zs.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Zs.PROVIDER_ID=O.P.PROVIDER_ID;const Qs=O.aC;class xs{constructor(S,w,k=we.Z.app()){var ue;Qs(null===(ue=k.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new O.R(k.auth(),S,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(b){b.INTERNAL.registerComponent(new kn.wA("auth-compat",S=>{const w=S.getProvider("app-compat").getImmediate(),k=S.getProvider("auth");return new Dr(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.V,FacebookAuthProvider:O.W,GithubAuthProvider:O.Y,GoogleAuthProvider:O.X,OAuthProvider:O.Z,SAMLAuthProvider:O._,PhoneAuthProvider:Zs,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:xs,TwitterAuthProvider:O.$,Auth:Dr,AuthCredential:O.L,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.9")}(we.Z)},861:(os,Yn,Ge)=>{function M(O,Ue,kt,_n,kn,en,Pt){try{var de=O[en](Pt),Ee=de.value}catch(Be){return void kt(Be)}de.done?Ue(Ee):Promise.resolve(Ee).then(_n,kn)}function we(O){return function(){var Ue=this,kt=arguments;return new Promise(function(_n,kn){var en=O.apply(Ue,kt);function Pt(Ee){M(en,_n,kn,Pt,de,"next",Ee)}function de(Ee){M(en,_n,kn,Pt,de,"throw",Ee)}Pt(void 0)})}}Ge.d(Yn,{Z:()=>we})},582:(os,Yn,Ge)=>{function Ue(ee,re){var oe={};for(var ce in ee)Object.prototype.hasOwnProperty.call(ee,ce)&&re.indexOf(ce)<0&&(oe[ce]=ee[ce]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ce=Object.getOwnPropertySymbols(ee);he<ce.length;he++)re.indexOf(ce[he])<0&&Object.prototype.propertyIsEnumerable.call(ee,ce[he])&&(oe[ce[he]]=ee[ce[he]])}return oe}function Be(ee,re,oe,ce){return new(oe||(oe=Promise))(function(se,Te){function vt(Dt){try{Le(ce.next(Dt))}catch(on){Te(on)}}function Me(Dt){try{Le(ce.throw(Dt))}catch(on){Te(on)}}function Le(Dt){Dt.done?se(Dt.value):function he(se){return se instanceof oe?se:new oe(function(Te){Te(se)})}(Dt.value).then(vt,Me)}Le((ce=ce.apply(ee,re||[])).next())})}function yt(ee){return this instanceof yt?(this.v=ee,this):new yt(ee)}function Bt(ee,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ce=oe.apply(ee,re||[]),se=[];return he={},Te("next"),Te("throw"),Te("return"),he[Symbol.asyncIterator]=function(){return this},he;function Te(Qt){ce[Qt]&&(he[Qt]=function(Jn){return new Promise(function(Mn,er){se.push([Qt,Jn,Mn,er])>1||vt(Qt,Jn)})})}function vt(Qt,Jn){try{!function Me(Qt){Qt.value instanceof yt?Promise.resolve(Qt.value.v).then(Le,Dt):on(se[0][2],Qt)}(ce[Qt](Jn))}catch(Mn){on(se[0][3],Mn)}}function Le(Qt){vt("next",Qt)}function Dt(Qt){vt("throw",Qt)}function on(Qt,Jn){Qt(Jn),se.shift(),se.length&&vt(se[0][0],se[0][1])}}function Vt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function Tt(ee){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&ee[re],ce=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ce>=ee.length&&(ee=void 0),{value:ee&&ee[ce++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},ce("next"),ce("throw"),ce("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ce(se){oe[se]=ee[se]&&function(Te){return new Promise(function(vt,Me){!function he(se,Te,vt,Me){Promise.resolve(Me).then(function(Le){se({value:Le,done:vt})},Te)}(vt,Me,(Te=ee[se](Te)).done,Te.value)})}}}Ge.d(Yn,{FC:()=>Bt,KL:()=>Vt,_T:()=>Ue,mG:()=>Be,qq:()=>yt}),"function"==typeof SuppressedError&&SuppressedError}},os=>{os(os.s=871)}]);
"use strict";(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(cs,$n,We)=>{We.d($n,{$:()=>jt,A:()=>Te,G:()=>Bt,K:()=>Cu,L:()=>Ss,N:()=>Gi,P:()=>$_,R:()=>U_,U:()=>pt,V:()=>po,W:()=>K,X:()=>ye,Y:()=>Me,Z:()=>F,_:()=>_t,a:()=>Tc,a0:()=>g_,a1:()=>ld,a2:()=>fr,a3:()=>y_,a4:()=>v_,a5:()=>E_,a6:()=>hd,a7:()=>ab,a8:()=>He,a9:()=>Vn,aA:()=>da,aB:()=>Kt,aC:()=>ee,aD:()=>eo,aE:()=>Oe,aF:()=>Yt,aG:()=>Cd,aH:()=>W_,aI:()=>Cb,aJ:()=>Fn,aN:()=>Cc,aQ:()=>Ke,aa:()=>Nu,ab:()=>vc,ac:()=>cr,ad:()=>Ec,ae:()=>wt,af:()=>ur,ag:()=>Ic,ah:()=>Ou,ak:()=>ku,al:()=>$t,am:()=>hR,ap:()=>ob,aq:()=>gi,as:()=>_R,at:()=>A_,au:()=>vt,av:()=>cc,aw:()=>lt,ax:()=>Wt,ay:()=>Pd,az:()=>X_,b:()=>lb,c:()=>z_,d:()=>yt,e:()=>H_,f:()=>Xt,g:()=>Xs,h:()=>Zr,i:()=>hb,j:()=>Ab,k:()=>sy,l:()=>Qs,m:()=>DR,p:()=>Ut,r:()=>j_,s:()=>ip,u:()=>Mi});var P=We(861),Re=We(303),V=We(58),xe=We(879),Rt=We(582),Cn=We(537);const Ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Bt=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},zn=function It(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new xe.Yd("@firebase/auth");function gn(p,...l){nt.logLevel<=xe.in.ERROR&&nt.error(`Auth (${Re.SDK_VERSION}): ${p}`,...l)}function Wt(p,...l){throw De(p,...l)}function Kt(p,...l){return De(p,...l)}function wr(p,l,d){const g=Object.assign(Object.assign({},zn()),{[l]:d});return new V.LL("auth","Firebase",g).create(l,{appName:p.name})}function Pt(p){return wr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ht(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&Wt(p,"argument-error"),wr(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function De(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Mt.create(p,...l)}function ee(p,l,...d){if(!p)throw De(l,...d)}function Je(p){const l="INTERNAL ASSERTION FAILED: "+p;throw gn(l),new Error(l)}function vt(p,l){p||Je(l)}function xt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Pn(){return"http:"===dn()||"https:"===dn()}function dn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class sr{constructor(l,d){this.shortDelay=l,this.longDelay=d,vt(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Et(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(p,l){vt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class se{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pe=new sr(3e4,6e4);function ve(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function ae(p,l,d,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,P.Z)(function*(p,l,d,g,v={}){return Ft(p,v,(0,P.Z)(function*(){let C={},H={};g&&("GET"===l?H=g:C={body:JSON.stringify(g)});const re=(0,V.xO)(Object.assign({key:p.config.apiKey},H)).slice(1),Ie=yield p._getAdditionalHeaders();return Ie["Content-Type"]="application/json",p.languageCode&&(Ie["X-Firebase-Locale"]=p.languageCode),se.fetch()(_n(p,p.config.apiHost,d,re),Object.assign({method:l,headers:Ie,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function Ft(p,l,d){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,P.Z)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ue),l);try{const v=new vn(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const H=yield C.json();if("needConfirmation"in H)throw Sn(p,"account-exists-with-different-credential",H);if(C.ok&&!("errorMessage"in H))return H;{const re=C.ok?H.errorMessage:H.error.message,[Ie,Ge]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ie)throw Sn(p,"credential-already-in-use",H);if("EMAIL_EXISTS"===Ie)throw Sn(p,"email-already-in-use",H);if("USER_DISABLED"===Ie)throw Sn(p,"user-disabled",H);const rt=g[Ie]||Ie.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw wr(p,rt,Ge);Wt(p,rt)}}catch(v){if(v instanceof V.ZR)throw v;Wt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Qe(p,l,d,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(p,l,d,g,v={}){const C=yield ae(p,l,d,g,v);return"mfaPendingCredential"in C&&Wt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function _n(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ie(p.config,v):`${p.config.apiScheme}://${v}`}function hn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Kt(this.auth,"network-request-failed")),pe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Kt(p,l,g);return v.customData._tokenResponse=d,v}function Qt(p){return void 0!==p&&void 0!==p.getResponse}function Hn(p){return void 0!==p&&void 0!==p.enterprise}class Tr{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return hn(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function ri(){return(ri=(0,P.Z)(function*(p){return(yield ae(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(p,l){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*(p,l){return ae(p,"GET","/v2/recaptchaConfig",ve(p,l))})).apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function Gr(){return(Gr=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function zs(p,l){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function hr(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Nr(){return(Nr=(0,P.Z)(function*(p,l=!1){const d=(0,V.m9)(p),g=yield d.getIdToken(l),v=Hs(g);ee(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,H=C?.sign_in_provider;return{claims:v,token:g,authTime:hr(kn(v.auth_time)),issuedAtTime:hr(kn(v.iat)),expirationTime:hr(kn(v.exp)),signInProvider:H||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function kn(p){return 1e3*Number(p)}function Hs(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,V.tV)(d);return v?JSON.parse(v):(gn("Failed to decode base64 JWT payload"),null)}catch(v){return gn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Ai(p){const l=Hs(p);return ee(l,"internal-error"),ee(typeof l.exp<"u","internal-error"),ee(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function cn(p,l){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.Z)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof V.ZR&&function Di({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ls{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,P.Z)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,P.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class or{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function En(p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,P.Z)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield cn(p,zs(d,{idToken:g}));ee(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const H=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?qs(C.providerUserInfo):[],re=function Ds(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,H),rt=!!p.isAnonymous&&!(p.email&&C.passwordHash||re?.length),zt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:re,metadata:new or(C.createdAt,C.lastLoginAt),isAnonymous:rt};Object.assign(p,zt)})).apply(this,arguments)}function hs(){return(hs=(0,P.Z)(function*(p){const l=(0,V.m9)(p);yield En(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function qs(p){return p.map(l=>{var{providerId:d}=l,g=(0,Rt._T)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function R(){return(R=(0,P.Z)(function*(p,l){const d=yield Ft(p,{},(0,P.Z)(function*(){const g=(0,V.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,H=_n(p,v,"/v1/token",`key=${C}`),re=yield p._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(H,{method:"POST",headers:re,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,P.Z)(function*(p,l){return ae(p,"POST","/v2/accounts:revokeToken",ve(p,l))})).apply(this,arguments)}class D{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){ee(l.idToken,"internal-error"),ee(typeof l.idToken<"u","internal-error"),ee(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Ai(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){ee(0!==l.length,"internal-error");const d=Ai(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,P.Z)(function*(){return d||!g.accessToken||g.isExpired?(ee(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,P.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:H}=yield function ke(p,l){return R.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number(H))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,H=new D;return g&&(ee("string"==typeof g,"internal-error",{appName:l}),H.refreshToken=g),v&&(ee("string"==typeof v,"internal-error",{appName:l}),H.accessToken=v),C&&(ee("number"==typeof C,"internal-error",{appName:l}),H.expirationTime=C),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new D,this.toJSON())}_performRefresh(){return Je("not implemented")}}function w(p,l){ee("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class k{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,Rt._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ls(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new or(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,P.Z)(function*(){const g=yield cn(d,d.stsTokenManager.getToken(d.auth,l));return ee(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function tn(p){return Nr.apply(this,arguments)}(this,l)}reload(){return function ds(p){return hs.apply(this,arguments)}(this)}_assign(l){this!==l&&(ee(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new k(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,P.Z)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield En(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,P.Z)(function*(){if((0,Re._isFirebaseServerApp)(l.auth.app))return Promise.reject(Pt(l.auth));const d=yield l.getIdToken();return yield cn(l,function us(p,l){return Ti.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,H,re,Ie,Ge,rt;const zt=null!==(g=d.displayName)&&void 0!==g?g:void 0,Yr=null!==(v=d.email)&&void 0!==v?v:void 0,Pi=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,kd=null!==(H=d.photoURL)&&void 0!==H?H:void 0,Ap=null!==(re=d.tenantId)&&void 0!==re?re:void 0,Fd=null!==(Ie=d._redirectEventId)&&void 0!==Ie?Ie:void 0,Pc=null!==(Ge=d.createdAt)&&void 0!==Ge?Ge:void 0,ay=null!==(rt=d.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:Xr,emailVerified:cy,isAnonymous:jr,providerData:Gu,stsTokenManager:uy}=d;ee(Xr&&uy,l,"internal-error");const ly=D.fromJSON(this.name,uy);ee("string"==typeof Xr,l,"internal-error"),w(zt,l.name),w(Yr,l.name),ee("boolean"==typeof cy,l,"internal-error"),ee("boolean"==typeof jr,l,"internal-error"),w(Pi,l.name),w(kd,l.name),w(Ap,l.name),w(Fd,l.name),w(Pc,l.name),w(ay,l.name);const xc=new k({uid:Xr,auth:l,email:Yr,emailVerified:cy,displayName:zt,isAnonymous:jr,photoURL:kd,phoneNumber:Pi,tenantId:Ap,stsTokenManager:ly,createdAt:Pc,lastLoginAt:ay});return Gu&&Array.isArray(Gu)&&(xc.providerData=Gu.map(Nc=>Object.assign({},Nc))),Fd&&(xc._redirectEventId=Fd),xc}static _fromIdTokenResponse(l,d,g=!1){return(0,P.Z)(function*(){const v=new D;v.updateFromServerResponse(d);const C=new k({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield En(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,P.Z)(function*(){const v=d.users[0];ee(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?qs(v.providerUserInfo):[],H=!(v.email&&v.passwordHash||C?.length),re=new D;re.updateFromIdToken(g);const Ie=new k({uid:v.localId,auth:l,stsTokenManager:re,isAnonymous:H}),Ge={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new or(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(Ie,Ge),Ie})()}}const de=new Map;function Oe(p){vt(p instanceof Function,"Expected a class definition");let l=de.get(p);return l?(vt(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,de.set(p,l),l)}const pt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,P.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,P.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,P.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Yt(p,l,d){return`firebase:${p}:${l}:${d}`}class Fe{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Yt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Yt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,P.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?k._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,P.Z)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,P.Z)(function*(){if(!d.length)return new Fe(Oe(pt),l,g);const v=(yield Promise.all(d.map(function(){var Ge=(0,P.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let C=v[0]||Oe(pt);const H=Yt(g,l.config.apiKey,l.name);let re=null;for(const Ge of d)try{const rt=yield Ge._get(H);if(rt){const zt=k._fromJSON(l,rt);Ge!==C&&(re=zt),C=Ge;break}}catch{}const Ie=v.filter(Ge=>Ge._shouldAllowMigration);return C._shouldAllowMigration&&Ie.length?(C=Ie[0],re&&(yield C._set(H,re.toJSON())),yield Promise.all(d.map(function(){var Ge=(0,P.Z)(function*(rt){if(rt!==C)try{yield rt._remove(H)}catch{}});return function(rt){return Ge.apply(this,arguments)}}())),new Fe(C,l,g)):new Fe(C,l,g)})()}}function In(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(un(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(it(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(oc(l))return"Blackberry";if(ac(l))return"Webos";if(kr(l))return"Safari";if((l.includes("chrome/")||ho(l))&&!l.includes("edge/"))return"Chrome";if(lt(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function it(p=(0,V.z$)()){return/firefox\//i.test(p)}function kr(p=(0,V.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function ho(p=(0,V.z$)()){return/crios\//i.test(p)}function un(p=(0,V.z$)()){return/iemobile/i.test(p)}function lt(p=(0,V.z$)()){return/android/i.test(p)}function oc(p=(0,V.z$)()){return/blackberry/i.test(p)}function ac(p=(0,V.z$)()){return/webos/i.test(p)}function cc(p=(0,V.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function da(p=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function gt(p=(0,V.z$)()){return cc(p)||lt(p)||ac(p)||oc(p)||/windows phone/i.test(p)||un(p)}function lc(p,l=[]){let d;switch(p){case"Browser":d=In((0,V.z$)());break;case"Worker":d=`${In((0,V.z$)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Re.SDK_VERSION}/${g}`}class Ar{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise((H,re)=>{try{H(l(C))}catch(Ie){re(Ie)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,P.Z)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function ar(){return(ar=(0,P.Z)(function*(p,l={}){return ae(p,"GET","/v2/passwordPolicy",ve(p,l))})).apply(this,arguments)}class Pf{constructor(l){var d,g,v,C;const H=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=H.minPasswordLength)&&void 0!==d?d:6,H.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=H.maxPasswordLength),void 0!==H.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=H.containsLowercaseCharacter),void 0!==H.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=H.containsUppercaseCharacter),void 0!==H.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=H.containsNumericCharacter),void 0!==H.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=H.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,H,re;const Ie={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Ie),this.validatePasswordCharacterOptions(l,Ie),Ie.isValid&&(Ie.isValid=null===(d=Ie.meetsMinPasswordLength)||void 0===d||d),Ie.isValid&&(Ie.isValid=null===(g=Ie.meetsMaxPasswordLength)||void 0===g||g),Ie.isValid&&(Ie.isValid=null===(v=Ie.containsLowercaseLetter)||void 0===v||v),Ie.isValid&&(Ie.isValid=null===(C=Ie.containsUppercaseLetter)||void 0===C||C),Ie.isValid&&(Ie.isValid=null===(H=Ie.containsNumericCharacter)||void 0===H||H),Ie.isValid&&(Ie.isValid=null===(re=Ie.containsNonAlphanumericCharacter)||void 0===re||re),Ie}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class xf{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new Ar(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Oe(d)),this._initializationPromise=this.queue((0,P.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Fe.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,P.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,P.Z)(function*(){try{const g=yield zs(d,{idToken:l}),v=yield k._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,P.Z)(function*(){var g;if((0,Re._isFirebaseServerApp)(d.app)){const re=d.app.settings.authIdToken;return re?new Promise(Ie=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(re).then(Ie,Ie))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,H=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const re=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,Ie=C?._redirectEventId,Ge=yield d.tryRedirectSignIn(l);(!re||re===Ie)&&Ge?.user&&(C=Ge.user,H=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(H)try{yield d.beforeStateQueue.runMiddleware(C)}catch(re){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(re))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return ee(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,P.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,P.Z)(function*(){try{yield En(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function mn(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,P.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,P.Z)(function*(){if((0,Re._isFirebaseServerApp)(d.app))return Promise.reject(Pt(d));const g=l?(0,V.m9)(l):null;return g&&ee(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,P.Z)(function*(){if(!g._deleted)return l&&ee(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,P.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,P.Z)(function*(){return(0,Re._isFirebaseServerApp)(l.app)?Promise.reject(Pt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Re._isFirebaseServerApp)(this.app)?Promise.reject(Pt(this)):this.queue((0,P.Z)(function*(){yield d.assertedPersistence.setPersistence(Oe(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,P.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,P.Z)(function*(){const d=yield function Mf(p){return ar.apply(this,arguments)}(l),g=new Pf(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new V.LL("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,P.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function x(p,l){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,P.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,P.Z)(function*(){if(!d.redirectPersistenceManager){const g=l&&Oe(l)||d._popupRedirectResolver;ee(g,d,"argument-error"),d.redirectPersistenceManager=yield Fe.create(d,[Oe(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,P.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,P.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,P.Z)(function*(){if(l===d.currentUser)return d.queue((0,P.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let H=!1;const re=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(re,this,"internal-error"),re.then(()=>{H||C(this.currentUser)}),"function"==typeof d){const Ie=l.addObserver(d,g,v);return()=>{H=!0,Ie()}}{const Ie=l.addObserver(d);return()=>{H=!0,Ie()}}}directlySetCurrentUser(l){var d=this;return(0,P.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=lc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,P.Z)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,P.Z)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Dn(p,...l){nt.logLevel<=xe.in.WARN&&nt.warn(`Auth (${Re.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Fn(p){return(0,V.m9)(p)}class Gs{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,V.ne)(d=>this.observer=d)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dc={loadJS:()=>(0,P.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yl(p){return dc.loadJS(p)}function Jl(p){return`__${p}${Math.floor(1e6*Math.random())}`}class dt{constructor(l){this.type="recaptcha-enterprise",this.auth=Fn(l)}verify(l="verify",d=!1){var g=this;return(0,P.Z)(function*(){function C(){return C=(0,P.Z)(function*(re){if(!d){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var Ie=(0,P.Z)(function*(Ge,rt){Lt(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zt=>{if(void 0!==zt.recaptchaKey){const Yr=new Tr(zt);return null==re.tenantId?re._agentRecaptchaConfig=Yr:re._tenantRecaptchaConfigs[re.tenantId]=Yr,Ge(Yr.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(zt=>{rt(zt)})});return function(Ge,rt){return Ie.apply(this,arguments)}}())}),C.apply(this,arguments)}function H(re,Ie,Ge){const rt=window.grecaptcha;Hn(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(re,{action:l}).then(zt=>{Ie(zt)}).catch(()=>{Ie("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,Ie)=>{(function v(re){return C.apply(this,arguments)})(g.auth).then(Ge=>{if(!d&&Hn(window.grecaptcha))H(Ge,re,Ie);else{if(typeof window>"u")return void Ie(new Error("RecaptchaVerifier is only supported in browser"));let rt=function Nf(){return dc.recaptchaEnterpriseScript}();0!==rt.length&&(rt+=Ge),Yl(rt).then(()=>{H(Ge,re,Ie)}).catch(zt=>{Ie(zt)})}}).catch(Ge=>{Ie(Ge)})})})()}}function ed(p,l,d){return td.apply(this,arguments)}function td(){return(td=(0,P.Z)(function*(p,l,d,g=!1){const v=new dt(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const H=Object.assign({},l);return Object.assign(H,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}function hc(p,l,d,g){return Le.apply(this,arguments)}function Le(){return Le=(0,P.Z)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield ed(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,P.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const re=yield ed(p,l,d,"getOobCode"===d);return g(p,re)}return Promise.reject(H)});return function(H){return C.apply(this,arguments)}}())}),Le.apply(this,arguments)}function Cu(p,l,d){const g=Fn(p);ee(g._canInitEmulator,g,"emulator-config-failed"),ee(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=nd(l),{host:H,port:re}=function fc(p){const l=nd(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:fo(g.substr(C.length+1))}}{const[C,H]=g.split(":");return{host:C,port:fo(H)}}}(l);g.config.emulator={url:`${C}//${H}${null===re?"":`:${re}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:H,port:re,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Au(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function nd(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function fo(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Ss{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return Je("not implemented")}_getIdTokenResponse(l){return Je("not implemented")}_linkToIdToken(l,d){return Je("not implemented")}_getReauthenticationResolver(l){return Je("not implemented")}}function rd(p,l){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:resetPassword",ve(p,l))})).apply(this,arguments)}function So(){return(So=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function si(p,l){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function sn(){return(sn=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:update",ve(p,l))})).apply(this,arguments)}function f_(p,l){return pc.apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithPassword",ve(p,l))})).apply(this,arguments)}function Ee(p,l){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:sendOobCode",ve(p,l))})).apply(this,arguments)}function mc(){return(mc=(0,P.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function fa(p,l){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function pa(p,l){return id.apply(this,arguments)}function id(){return(id=(0,P.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function Ru(){return(Ru=(0,P.Z)(function*(p,l){return Ee(p,l)})).apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithEmailLink",ve(p,l))})).apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithEmailLink",ve(p,l))})).apply(this,arguments)}class Dr extends Ss{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new Dr(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new Dr(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,P.Z)(function*(){switch(d.signInMethod){case"password":return hc(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",f_);case"emailLink":return function Of(p,l){return ga.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:Wt(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,P.Z)(function*(){switch(g.signInMethod){case"password":return hc(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",si);case"emailLink":return function Po(p,l){return xo.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:Wt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function qi(p,l){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithIdp",ve(p,l))})).apply(this,arguments)}class Gi extends Ss{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new Gi(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):Wt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,Rt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const H=new Gi(g,v);return H.idToken=C.idToken||void 0,H.accessToken=C.accessToken||void 0,H.secret=C.secret,H.nonce=C.nonce,H.pendingToken=C.pendingToken||null,H}_getIdTokenResponse(l){return qi(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,qi(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,qi(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,V.xO)(d)}return l}}function Pu(){return(Pu=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:sendVerificationCode",ve(p,l))})).apply(this,arguments)}function _a(){return(_a=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",ve(p,l))})).apply(this,arguments)}function xu(){return(xu=(0,P.Z)(function*(p,l){const d=yield Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",ve(p,l));if(d.temporaryProof)throw Sn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const qe={USER_NOT_FOUND:"user-not-found"};function ya(){return(ya=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithPhoneNumber",ve(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),qe)})).apply(this,arguments)}class Wi extends Ss{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new Wi({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new Wi({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function Ws(p,l){return _a.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function fe(p,l){return xu.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function _c(p,l){return ya.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new Wi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class yc{constructor(l){var d,g,v,C,H,re;const Ie=(0,V.zd)((0,V.pd)(l)),Ge=null!==(d=Ie.apiKey)&&void 0!==d?d:null,rt=null!==(g=Ie.oobCode)&&void 0!==g?g:null,zt=function p_(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=Ie.mode)&&void 0!==v?v:null);ee(Ge&&rt&&zt,"argument-error"),this.apiKey=Ge,this.operation=zt,this.code=rt,this.continueUrl=null!==(C=Ie.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(H=Ie.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(re=Ie.tenantId)&&void 0!==re?re:null}static parseLink(l){const d=function sd(p){const l=(0,V.zd)((0,V.pd)(p)).link,d=l?(0,V.zd)((0,V.pd)(l)).deep_link_id:null,g=(0,V.zd)((0,V.pd)(p)).deep_link_id;return(g?(0,V.zd)((0,V.pd)(g)).link:null)||g||d||l||p}(l);try{return new yc(d)}catch{return null}}}let po=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Dr._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=yc.parseLink(g);return ee(v,"argument-error"),Dr._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Jn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class S extends Jn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class F extends S{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return ee("providerId"in d&&"signInMethod"in d,"argument-error"),Gi._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return ee(l.idToken||l.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return F.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return F.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:H,providerId:re}=l;if(!g&&!v&&!d&&!C||!re)return null;try{return new F(re)._credential({idToken:d,accessToken:g,nonce:H,pendingToken:C})}catch{return null}}}let K=(()=>{class p extends S{constructor(){super("facebook.com")}static credential(d){return Gi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ye=(()=>{class p extends S{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Gi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Me=(()=>{class p extends S{constructor(){super("github.com")}static credential(d){return Gi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Ke extends Ss{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return qi(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,qi(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,qi(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Ke(g,C):null}static _create(l,d){return new Ke(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _t extends Jn{constructor(l){ee(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return _t.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return _t.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Ke.fromJSON(l);return ee(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return Ke._create(g,d)}catch{return null}}}let jt=(()=>{class p extends S{constructor(){super("twitter.com")}static credential(d,g){return Gi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Fr(p,l){return fs.apply(this,arguments)}function fs(){return(fs=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signUp",ve(p,l))})).apply(this,arguments)}class Lr{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,P.Z)(function*(){const C=yield k._fromIdTokenResponse(l,g,v),H=fi(g);return new Lr({user:C,providerId:H,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,P.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=fi(g);return new Lr({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function fi(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function g_(p){return od.apply(this,arguments)}function od(){return(od=(0,P.Z)(function*(p){var l;if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const d=Fn(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new Lr({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Fr(d,{returnSecureToken:!0}),v=yield Lr._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class ad extends V.ZR{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,ad.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new ad(l,d,g,v)}}function Ff(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?ad._fromErrorAndOperation(p,C,l,g):C})}function m_(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function ob(p,l){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,P.Z)(function*(p,l){const d=(0,V.m9)(p);yield ud(!0,d,l);const{providerUserInfo:g}=yield function Hi(p,l){return Gr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=m_(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Ki.apply(this,arguments)}function Lf(p,l){return cd.apply(this,arguments)}function cd(){return(cd=(0,P.Z)(function*(p,l,d=!1){const g=yield cn(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return Lr._forOperation(p,"link",g)})).apply(this,arguments)}function ud(p,l,d){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,P.Z)(function*(p,l,d){yield En(l);const v=!1===p?"provider-already-linked":"no-such-provider";ee(m_(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function __(p,l){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,P.Z)(function*(p,l,d=!1){const{auth:g}=p;if((0,Re._isFirebaseServerApp)(g.app))return Promise.reject(Pt(g));const v="reauthenticate";try{const C=yield cn(p,Ff(g,v,l,p),d);ee(C.idToken,g,"internal-error");const H=Hs(C.idToken);ee(H,g,"internal-error");const{sub:re}=H;return ee(p.uid===re,g,"user-mismatch"),Lr._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&Wt(g,"user-mismatch"),C}})).apply(this,arguments)}function Bf(p,l){return jf.apply(this,arguments)}function jf(){return(jf=(0,P.Z)(function*(p,l,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g="signIn",v=yield Ff(p,g,l),C=yield Lr._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ld(p,l){return $f.apply(this,arguments)}function $f(){return($f=(0,P.Z)(function*(p,l){return Bf(Fn(p),l)})).apply(this,arguments)}function fr(p,l){return zf.apply(this,arguments)}function zf(){return(zf=(0,P.Z)(function*(p,l){const d=(0,V.m9)(p);return yield ud(!1,d,l.providerId),Lf(d,l)})).apply(this,arguments)}function y_(p,l){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,P.Z)(function*(p,l){return __((0,V.m9)(p),l)})).apply(this,arguments)}function qf(){return(qf=(0,P.Z)(function*(p,l){return Qe(p,"POST","/v1/accounts:signInWithCustomToken",ve(p,l))})).apply(this,arguments)}function v_(p,l){return et.apply(this,arguments)}function et(){return et=(0,P.Z)(function*(p,l){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const d=Fn(p),g=yield function xn(p,l){return qf.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield Lr._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),et.apply(this,arguments)}class Vr{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?qt._fromServerResponse(l,d):"totpInfo"in d?Sr._fromServerResponse(l,d):Wt(l,"internal-error")}}class qt extends Vr{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new qt(d)}}class Sr extends Vr{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new Sr(d)}}function Ur(p,l,d){var g;ee((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),ee(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ee(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(ee(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function No(p){return pi.apply(this,arguments)}function pi(){return(pi=(0,P.Z)(function*(p){const l=Fn(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function E_(p,l,d){return dd.apply(this,arguments)}function dd(){return(dd=(0,P.Z)(function*(p,l,d){const g=Fn(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Ur(g,v,d),yield hc(g,v,"getOobCode",fa)})).apply(this,arguments)}function hd(p,l,d){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,P.Z)(function*(p,l,d){yield rd((0,V.m9)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,P.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&No(p),v});return function(v){return g.apply(this,arguments)}}())}),Gf.apply(this,arguments)}function ab(p,l){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,P.Z)(function*(p,l){yield function h_(p,l){return sn.apply(this,arguments)}((0,V.m9)(p),{oobCode:l})}),Ln.apply(this,arguments)}function He(p,l){return bt.apply(this,arguments)}function bt(){return(bt=(0,P.Z)(function*(p,l){const d=(0,V.m9)(p),g=yield rd(d,{oobCode:l}),v=g.requestType;switch(ee(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(g.mfaInfo,d,"internal-error");default:ee(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=Vr._fromServerResponse(Fn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function Vn(p,l){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.Z)(function*(p,l){const{data:d}=yield He((0,V.m9)(p),l);return d.email})).apply(this,arguments)}function Nu(p,l,d){return Br.apply(this,arguments)}function Br(){return(Br=(0,P.Z)(function*(p,l,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g=Fn(p),H=yield hc(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fr).catch(Ie=>{throw"auth/password-does-not-meet-requirements"===Ie.code&&No(p),Ie}),re=yield Lr._fromIdTokenResponse(g,"signIn",H);return yield g._updateCurrentUser(re.user),re})).apply(this,arguments)}function vc(p,l,d){return(0,Re._isFirebaseServerApp)(p.app)?Promise.reject(Pt(p)):ld((0,V.m9)(p),po.credential(l,d)).catch(function(){var g=(0,P.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&No(p),v});return function(v){return g.apply(this,arguments)}}())}function cr(p,l,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*(p,l,d){const g=Fn(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C(H,re){ee(re.handleCodeInApp,g,"argument-error"),re&&Ur(g,H,re)})(v,d),yield hc(g,v,"getOobCode",pa)})).apply(this,arguments)}function Ec(p,l){const d=yc.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}function wt(p,l,d){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(p,l,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g=(0,V.m9)(p),v=po.credentialWithLink(l,d||xt());return ee(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ld(g,v)})).apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:createAuthUri",ve(p,l))})).apply(this,arguments)}function ur(p,l){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,P.Z)(function*(p,l){const g={identifier:l,continueUri:Pn()?xt():"http://localhost"},{signinMethods:v}=yield function I_(p,l){return Oo.apply(this,arguments)}((0,V.m9)(p),g);return v||[]}),Ea.apply(this,arguments)}function Ic(p,l){return ps.apply(this,arguments)}function ps(){return ps=(0,P.Z)(function*(p,l){const d=(0,V.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&Ur(d.auth,v,l);const{email:C}=yield function gc(p,l){return mc.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),ps.apply(this,arguments)}function Ou(p,l,d){return fd.apply(this,arguments)}function fd(){return fd=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&Ur(g.auth,C,d);const{email:H}=yield function Rs(p,l){return Ru.apply(this,arguments)}(g.auth,C);H!==p.email&&(yield p.reload())}),fd.apply(this,arguments)}function Ps(){return(Ps=(0,P.Z)(function*(p,l){return ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ku(p,l){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,P.Z)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,V.m9)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},H=yield cn(g,function ko(p,l){return Ps.apply(this,arguments)}(g.auth,C));g.displayName=H.displayName||null,g.photoURL=H.photoUrl||null;const re=g.providerData.find(({providerId:Ie})=>"password"===Ie);re&&(re.displayName=g.displayName,re.photoURL=g.photoURL),yield g._updateTokensIfNecessary(H)}),Ia.apply(this,arguments)}function $t(p,l){const d=(0,V.m9)(p);return(0,Re._isFirebaseServerApp)(d.auth.app)?Promise.reject(Pt(d.auth)):pd(d,l,null)}function hR(p,l){return pd((0,V.m9)(p),null,l)}function pd(p,l,d){return gd.apply(this,arguments)}function gd(){return gd=(0,P.Z)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const H=yield cn(p,function Du(p,l){return So.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(H,!0)}),gd.apply(this,arguments)}class go{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class ba extends go{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Fu extends go{constructor(l,d){super(l,"facebook.com",d)}}class Kr extends ba{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class fR extends go{constructor(l,d){super(l,"google.com",d)}}class Ri extends ba{constructor(l,d,g){super(l,"twitter.com",d,g)}}function gi(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Zs(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const H=null===(d=null===(l=Hs(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(H)return new go(C,"anonymous"!==H&&"custom"!==H?H:null)}if(!g)return null;switch(g){case"facebook.com":return new Fu(C,v);case"github.com":return new Kr(C,v);case"google.com":return new fR(C,v);case"twitter.com":return new Ri(C,v,p.screenName||null);case"custom":case"anonymous":return new go(C,null);default:return new go(C,g,v)}}(d)}class wc{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new wc("enroll",l,d)}static _fromMfaPendingCredential(l){return new wc("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return wc._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return wc._fromIdtoken(l.multiFactorSession.idToken)}return null}}class T_{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=Fn(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(re=>Vr._fromServerResponse(g,re));ee(v.mfaPendingCredential,g,"internal-error");const H=wc._fromMfaPendingCredential(v.mfaPendingCredential);return new T_(H,C,function(){var re=(0,P.Z)(function*(Ie){const Ge=yield Ie._process(g,H);delete v.mfaInfo,delete v.mfaPendingCredential;const rt=Object.assign(Object.assign({},v),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(d.operationType){case"signIn":const zt=yield Lr._fromIdTokenResponse(g,d.operationType,rt);return yield g._updateCurrentUser(zt.user),zt;case"reauthenticate":return ee(d.user,g,"internal-error"),Lr._forOperation(d.user,d.operationType,rt);default:Wt(g,"internal-error")}});return function(Ie){return re.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,P.Z)(function*(){return d.signInResolver(l)})()}}function _R(p,l){var d;const g=(0,V.m9)(p),v=l;return ee(l.customData.operationType,g,"argument-error"),ee(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),T_._fromError(g,v)}class C_{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>Vr._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new C_(l)}getSession(){var l=this;return(0,P.Z)(function*(){return wc._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,P.Z)(function*(){const v=l,C=yield g.getSession(),H=yield cn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(H),g.user.reload()})()}unenroll(l){var d=this;return(0,P.Z)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield cn(d.user,function IR(p,l){return ae(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ve(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:H})=>H!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const md=new WeakMap;function A_(p){const l=(0,V.m9)(p);return md.has(l)||md.set(l,C_._fromUser(l)),md.get(l)}const Zf="__sak";class ub{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Zf,"1"),this.storage.removeItem(Zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const lb=(()=>{class p extends ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bR(){const p=(0,V.z$)();return kr(p)||cc(p)}()&&function nn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((re,Ie,Ge)=>{this.notifyListeners(re,Ge)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(v);if(d.newValue!==re)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const re=this.storage.getItem(v);!g&&this.localCache[v]===re||this.notifyListeners(v,re)},H=this.storage.getItem(v);!function uc(){return(0,V.w1)()&&10===document.documentMode}()||H===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,P.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,P.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,P.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Tc=(()=>{class p extends ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let D_=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,P.Z)(function*(){const v=d,{eventId:C,eventType:H,data:re}=v.data,Ie=g.handlersMap[H];if(!Ie?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:H});const Ge=Array.from(Ie).map(function(){var zt=(0,P.Z)(function*(Yr){return Yr(v.origin,re)});return function(Yr){return zt.apply(this,arguments)}}()),rt=yield function gs(p){return Promise.all(p.map(function(){var l=(0,P.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Ge);v.ports[0].postMessage({status:"done",eventId:C,eventType:H,response:rt})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Cc(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class S_{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,P.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let H,re;return new Promise((Ie,Ge)=>{const rt=Cc("",20);C.port1.start();const zt=setTimeout(()=>{Ge(new Error("unsupported_event"))},g);re={messageChannel:C,onMessage(Yr){const Pi=Yr;if(Pi.data.eventId===rt)switch(Pi.data.status){case"ack":clearTimeout(zt),H=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Ie(Pi.data.response);break;default:clearTimeout(zt),clearTimeout(H),Ge(new Error("invalid_response"))}}},v.handlers.add(re),C.port1.addEventListener("message",re.onMessage),v.target.postMessage({eventType:l,eventId:rt,data:d},[C.port2])}).finally(()=>{re&&v.removeMessageHandler(re)})})()}}function lr(){return window}function _d(){return typeof lr().WorkerGlobalScope<"u"&&"function"==typeof lr().importScripts}function Lu(){return(Lu=(0,P.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xf="firebaseLocalStorageDb",Lo="firebaseLocalStorage",Ta="fbase_key";class Ac{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Jf(p,l){return p.transaction([Lo],l?"readwrite":"readonly").objectStore(Lo)}function P_(){const p=indexedDB.open(Xf,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Lo,{keyPath:Ta})}catch(v){d(v)}}),p.addEventListener("success",(0,P.Z)(function*(){const g=p.result;g.objectStoreNames.contains(Lo)?l(g):(g.close(),yield function wR(){const p=indexedDB.deleteDatabase(Xf);return new Ac(p).toPromise()}(),l(yield P_()))}))})}function x_(p,l,d){return ep.apply(this,arguments)}function ep(){return(ep=(0,P.Z)(function*(p,l,d){const g=Jf(p,!0).put({[Ta]:l,value:d});return new Ac(g).toPromise()})).apply(this,arguments)}function vd(){return(vd=(0,P.Z)(function*(p,l){const d=Jf(p,!1).get(l),g=yield new Ac(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Ed(p,l){const d=Jf(p,!0).delete(l);return new Ac(d).toPromise()}const hb=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,P.Z)(function*(){return d.db||(d.db=yield P_()),d.db})()}_withRetries(d){var g=this;return(0,P.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,P.Z)(function*(){return _d()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,P.Z)(function*(){d.receiver=D_._getInstance(function M_(){return _d()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,P.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,P.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,P.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Yf(){return Lu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new S_(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,P.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function R_(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.Z)(function*(){try{if(!indexedDB)return!1;const d=yield P_();return yield x_(d,Zf,"1"),yield Ed(d,Zf),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,P.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,P.Z)(function*(){return v._withPendingWrite((0,P.Z)(function*(){return yield v._withRetries(C=>x_(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,P.Z)(function*(){const v=yield g._withRetries(C=>function TR(p,l){return vd.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,P.Z)(function*(){return g._withPendingWrite((0,P.Z)(function*(){return yield g._withRetries(v=>Ed(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,P.Z)(function*(){const g=yield d._withRetries(H=>{const re=Jf(H,!1).getAll();return new Ac(re).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:H,value:re}of g)C.add(H),JSON.stringify(d.localCache[H])!==JSON.stringify(re)&&(d.notifyListeners(H,re),v.push(H));for(const H of Object.keys(d.localCache))d.localCache[H]&&!C.has(H)&&(d.notifyListeners(H,null),v.push(H));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,P.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Id=1e12;class k_{constructor(l){this.auth=l,this.counter=Id,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new mb(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||Id;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||Id))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,P.Z)(function*(){var g;return null===(g=d._widgets.get(l||Id))||void 0===g||g.execute(),""})()}}class mb{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;ee(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function F_(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const np=Jl("rcb"),CR=new sr(3e4,6e4);class _b{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=lr().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return ee(function ms(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Qt(lr().grecaptcha)?Promise.resolve(lr().grecaptcha):new Promise((g,v)=>{const C=lr().setTimeout(()=>{v(Kt(l,"network-request-failed"))},CR.get());lr()[np]=()=>{lr().clearTimeout(C),delete lr()[np];const re=lr().grecaptcha;if(!re||!Qt(re))return void v(Kt(l,"internal-error"));const Ie=re.render;re.render=(Ge,rt)=>{const zt=Ie(Ge,rt);return this.counter++,zt},this.hostLanguage=d,g(re)},Yl(`${function Xl(){return dc.recaptchaV2Script}()}?${(0,V.xO)({onload:np,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Kt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=lr().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class L_{load(l){return(0,P.Z)(function*(){return new k_(l)})()}clearedOneInstance(){}}const V_="recaptcha",yb={theme:"light",type:"image"};class U_{constructor(l,d,g=Object.assign({},yb)){this.parameters=g,this.type=V_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(l),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;ee(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new L_:new _b,this.validateStartingState()}verify(){var l=this;return(0,P.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const H=re=>{re&&(l.tokenChangeListeners.delete(H),C(re))};l.tokenChangeListeners.add(H),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=lr()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,P.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,P.Z)(function*(){ee(Pn()&&!_d(),l.auth,"internal-error"),yield function B_(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function zi(p){return ri.apply(this,arguments)}(l.auth);ee(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rp{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=Wi._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function ip(p,l,d){return sp.apply(this,arguments)}function sp(){return(sp=(0,P.Z)(function*(p,l,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g=Fn(p),v=yield Dc(g,l,(0,V.m9)(d));return new rp(v,C=>ld(g,C))})).apply(this,arguments)}function Qs(p,l,d){return bd.apply(this,arguments)}function bd(){return(bd=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);yield ud(!1,g,"phone");const v=yield Dc(g.auth,l,(0,V.m9)(d));return new rp(v,C=>fr(g,C))})).apply(this,arguments)}function j_(p,l,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Pt(g.auth));const v=yield Dc(g.auth,l,(0,V.m9)(d));return new rp(v,C=>y_(g,C))})).apply(this,arguments)}function Dc(p,l,d){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,P.Z)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(ee("string"==typeof v,p,"argument-error"),ee(d.type===V_,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const H=C.session;if("phoneNumber"in C)return ee("enroll"===H.type,p,"internal-error"),(yield function yR(p,l){return ae(p,"POST","/v2/accounts/mfaEnrollment:start",ve(p,l))}(p,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{ee("signin"===H.type,p,"internal-error");const re=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return ee(re,p,"missing-multi-factor-info"),(yield function fb(p,l){return ae(p,"POST","/v2/accounts/mfaSignIn:start",ve(p,l))}(p,{mfaPendingCredential:H.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function ma(p,l){return Pu.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return H}}finally{d._reset()}}),Sc.apply(this,arguments)}function Mi(p,l){return op.apply(this,arguments)}function op(){return(op=(0,P.Z)(function*(p,l){const d=(0,V.m9)(p);if((0,Re._isFirebaseServerApp)(d.auth.app))return Promise.reject(Pt(d.auth));yield Lf(d,l)})).apply(this,arguments)}let $_=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Fn(d)}verifyPhoneNumber(d,g){return Dc(this.auth,d,(0,V.m9)(g))}static credential(d,g){return Wi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Wi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function _s(p,l){return l?Oe(l):(ee(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class mi extends Ss{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return qi(l,this._buildIdpRequest())}_linkToIdToken(l,d){return qi(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return qi(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function vb(p){return Bf(p.auth,new mi(p),p.bypassAuthState)}function Eb(p){const{auth:l,user:d}=p;return ee(d,l,"internal-error"),__(d,new mi(p),p.bypassAuthState)}function Ib(p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(p){const{auth:l,user:d}=p;return ee(d,l,"internal-error"),Lf(d,new mi(p),p.bypassAuthState)})).apply(this,arguments)}class ap{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,P.Z)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,P.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:H,error:re,type:Ie}=l;if(re)return void d.reject(re);const Ge={auth:d.auth,requestUri:g,sessionId:v,tenantId:H||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Ie)(Ge))}catch(rt){d.reject(rt)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return vb;case"linkViaPopup":case"linkViaRedirect":return Ib;case"reauthViaPopup":case"reauthViaRedirect":return Eb;default:Wt(this.auth,"internal-error")}}resolve(l){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bb=new sr(2e3,1e4);function z_(p,l,d){return wd.apply(this,arguments)}function wd(){return(wd=(0,P.Z)(function*(p,l,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Kt(p,"operation-not-supported-in-this-environment"));const g=Fn(p);ht(p,l,Jn);const v=_s(g,d);return new q_(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function H_(p,l,d){return cp.apply(this,arguments)}function cp(){return(cp=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);if((0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Kt(g.auth,"operation-not-supported-in-this-environment"));ht(g.auth,l,Jn);const v=_s(g.auth,d);return new q_(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function yt(p,l,d){return Td.apply(this,arguments)}function Td(){return(Td=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);ht(g.auth,l,Jn);const v=_s(g.auth,d);return new q_(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let q_=(()=>{class p extends ap{constructor(d,g,v,C,H){super(d,g,C,H),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,P.Z)(function*(){const g=yield d.execute();return ee(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,P.Z)(function*(){vt(1===d.filter.length,"Popup operations only handle one event");const g=Cc();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Kt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,bb.get())};d()}}return p.currentPopupAction=null,p})();const wb="pendingRedirect",Vu=new Map;class Tb extends ap{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,P.Z)(function*(){let g=Vu.get(d.auth._key());if(!g){try{const C=(yield function G_(p,l){return Vo.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Vu.set(d.auth._key(),g)}return d.bypassAuthState||Vu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,P.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,P.Z)(function*(){})()}cleanUp(){}}function Vo(){return(Vo=(0,P.Z)(function*(p,l){const d=be(l),g=K_(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function up(p,l){return lp.apply(this,arguments)}function lp(){return(lp=(0,P.Z)(function*(p,l){return K_(p)._set(be(l),"true")})).apply(this,arguments)}function Cb(){Vu.clear()}function W_(p,l){Vu.set(p._key(),l)}function K_(p){return Oe(p._redirectPersistence)}function be(p){return Yt(wb,p.config.apiKey,p.name)}function Xt(p,l,d){return function dp(p,l,d){return Uu.apply(this,arguments)}(p,l,d)}function Uu(){return(Uu=(0,P.Z)(function*(p,l,d){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g=Fn(p);ht(p,l,Jn),yield g._initializationPromise;const v=_s(g,d);return yield up(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function Zr(p,l,d){return function Z_(p,l,d){return Ca.apply(this,arguments)}(p,l,d)}function Ca(){return(Ca=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);if(ht(g.auth,l,Jn),(0,Re._isFirebaseServerApp)(g.auth.app))return Promise.reject(Pt(g.auth));yield g.auth._initializationPromise;const v=_s(g.auth,d);yield up(v,g.auth);const C=yield Js(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function Xs(p,l,d){return function hp(p,l,d){return Bu.apply(this,arguments)}(p,l,d)}function Bu(){return(Bu=(0,P.Z)(function*(p,l,d){const g=(0,V.m9)(p);ht(g.auth,l,Jn),yield g.auth._initializationPromise;const v=_s(g.auth,d);yield ud(!1,g,l.providerId),yield up(v,g.auth);const C=yield Js(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function Ab(p,l){return Q_.apply(this,arguments)}function Q_(){return(Q_=(0,P.Z)(function*(p,l){return yield Fn(p)._initializationPromise,Cd(p,l,!1)})).apply(this,arguments)}function Cd(p,l){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(p,l,d=!1){if((0,Re._isFirebaseServerApp)(p.app))return Promise.reject(Pt(p));const g=Fn(p),v=_s(g,l),H=yield new Tb(g,v,d).execute();return H&&!d&&(delete H.user._redirectEventId,yield g._persistUserIfCurrent(H.user),yield g._setRedirectUser(null,l)),H})).apply(this,arguments)}function Js(p){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,P.Z)(function*(p){const l=Cc(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class eo{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Db(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fp(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!fp(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Kt(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y_(l))}saveEventToCache(l){this.cachedEventUids.add(Y_(l)),this.lastProcessedEventTime=Date.now()}}function Y_(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function fp({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function X_(p){return ju.apply(this,arguments)}function ju(){return(ju=(0,P.Z)(function*(p,l={}){return ae(p,"GET","/v1/projects",l)})).apply(this,arguments)}const pp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J_=/^https?/;function mp(){return(mp=(0,P.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield X_(p);for(const d of l)try{if(ey(d))return}catch{}Wt(p,"unauthorized-domain")})).apply(this,arguments)}function ey(p){const l=xt(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const H=new URL(p);return""===H.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&H.hostname===g}if(!J_.test(d))return!1;if(pp.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const _p=new sr(3e4,6e4);function yp(){const p=lr().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let $u=null;const vp=new sr(5e3,15e3),Sb="__/auth/iframe",Rb="emulator/auth/iframe",_i={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Aa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qn(p){const l=p.config;ee(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ie(l,Rb):`https://${p.config.authDomain}/${Sb}`,g={apiKey:l.apiKey,appName:p.name,v:Re.SDK_VERSION},v=Aa.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,V.xO)(g).slice(1)}`}function Ep(){return Ep=(0,P.Z)(function*(p){const l=yield function ny(p){return $u=$u||function ty(p){return new Promise((l,d)=>{var g,v,C;function H(){yp(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{yp(),d(Kt(p,"network-request-failed"))},timeout:_p.get()})}if(null!==(v=null===(g=lr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=lr().gapi)||void 0===C||!C.load){const re=Jl("iframefcb");return lr()[re]=()=>{gapi.load?H():d(Kt(p,"network-request-failed"))},Yl(`${function u_(){return dc.gapiScript}()}?onload=${re}`).catch(Ie=>d(Ie))}H()}}).catch(l=>{throw $u=null,l})}(p),$u}(p),d=lr().gapi;return ee(d,p,"internal-error"),l.open({where:document.body,url:qn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_i,dontclear:!0},g=>new Promise(function(){var v=(0,P.Z)(function*(C,H){yield g.restyle({setHideOnLeave:!1});const re=Kt(p,"network-request-failed"),Ie=lr().setTimeout(()=>{H(re)},vp.get());function Ge(){lr().clearTimeout(Ie),C(g)}g.ping(Ge).then(Ge,()=>{H(re)})});return function(C,H){return v.apply(this,arguments)}}()))}),Ep.apply(this,arguments)}const Pb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mo{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rd="__/auth/handler",Md="emulator/auth/handler",Ip=encodeURIComponent("fac");function Pd(p,l,d,g,v,C){return xd.apply(this,arguments)}function xd(){return(xd=(0,P.Z)(function*(p,l,d,g,v,C){ee(p.config.authDomain,p,"auth-domain-config-required"),ee(p.config.apiKey,p,"invalid-api-key");const H={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Re.SDK_VERSION,eventId:v};if(l instanceof Jn){l.setDefaultLanguage(p.languageCode),H.providerId=l.providerId||"",(0,V.xb)(l.getCustomParameters())||(H.customParameters=JSON.stringify(l.getCustomParameters()));for(const[rt,zt]of Object.entries(C||{}))H[rt]=zt}if(l instanceof S){const rt=l.getScopes().filter(zt=>""!==zt);rt.length>0&&(H.scopes=rt.join(","))}p.tenantId&&(H.tid=p.tenantId);const re=H;for(const rt of Object.keys(re))void 0===re[rt]&&delete re[rt];const Ie=yield p._getAppCheckToken(),Ge=Ie?`#${Ip}=${encodeURIComponent(Ie)}`:"";return`${function Ob({config:p}){return p.emulator?ie(p,Md):`https://${p.authDomain}/${Rd}`}(p)}?${(0,V.xO)(re).slice(1)}${Ge}`})).apply(this,arguments)}const Uo="webStorageSupport",sy=class zu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tc,this._completeRedirectFn=Cd,this._overrideRedirectResult=W_}_openPopup(l,d,g,v){var C=this;return(0,P.Z)(function*(){var H;vt(null===(H=C.eventManagers[l._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const re=yield Pd(l,d,g,xt(),v);return function Nb(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),H=Math.max((window.screen.availWidth-g)/2,0).toString();let re="";const Ie=Object.assign(Object.assign({},Pb),{width:g.toString(),height:v.toString(),top:C,left:H}),Ge=(0,V.z$)().toLowerCase();d&&(re=ho(Ge)?"_blank":d),it(Ge)&&(l=l||"http://localhost",Ie.scrollbars="yes");const rt=Object.entries(Ie).reduce((Yr,[Pi,kd])=>`${Yr}${Pi}=${kd},`,"");if(function le(p=(0,V.z$)()){var l;return cc(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Ge)&&"_self"!==re)return function Sd(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",re),new mo(null);const zt=window.open(l||"",re,rt);ee(zt,p,"popup-blocked");try{zt.focus()}catch{}return new mo(zt)}(l,re,Cc())})()}_openRedirect(l,d,g,v){var C=this;return(0,P.Z)(function*(){return yield C._originValidation(l),function Qf(p){lr().location.href=p}(yield Pd(l,d,g,xt(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(vt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,P.Z)(function*(){const g=yield function Mb(p){return Ep.apply(this,arguments)}(l),v=new eo(l);return g.register("authEvent",C=>(ee(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(Uo,{type:Uo},v=>{var C;const H=null===(C=v?.[0])||void 0===C?void 0:C[Uo];void 0!==H&&d(!!H),Wt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function gp(p){return mp.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return gt()||kr()||cc()}};class AR{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return Je("unexpected MultiFactorSessionType")}}}class Hu extends AR{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new Hu(l)}_finalizeEnroll(l,d,g){return function vR(p,l){return ae(p,"POST","/v2/accounts/mfaEnrollment:finalize",ve(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function N_(p,l){return ae(p,"POST","/v2/accounts/mfaSignIn:finalize",ve(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let DR=(()=>{class p{constructor(){}static assertion(d){return Hu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Nd="@firebase/auth";class Fb{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,P.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,V.Pz)("authIdTokenMaxAge"),function Ql(p){dc=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=Kt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function to(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Tp(p){(0,Re._registerComponent)(new Cn.wA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:H,authDomain:re}=g.options;ee(H&&!H.includes(":"),"invalid-api-key",{appName:g.name});const Ie={apiKey:H,authDomain:re,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lc(p)},Ge=new xf(g,v,C,Ie);return function Tu(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Oe);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Ge,d),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Cn.wA("auth-internal",l=>{const d=Fn(l.getProvider("auth").getImmediate());return new Fb(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(Nd,"1.7.4",function qu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Re.registerVersion)(Nd,"1.7.4","esm2017")}("Browser")},58:(cs,$n,We)=>{We.d($n,{$s:()=>hs,BH:()=>wr,G6:()=>sr,L:()=>At,LL:()=>ae,P0:()=>gn,Pz:()=>Kt,Sg:()=>Pt,UG:()=>ee,ZB:()=>Ye,ZR:()=>ve,aH:()=>Wt,b$:()=>xt,eu:()=>se,hl:()=>ie,jU:()=>Je,m9:()=>ke,ne:()=>zs,pd:()=>Hi,r3:()=>Qt,ru:()=>vt,tV:()=>ge,uI:()=>De,vZ:()=>ri,w1:()=>dn,xO:()=>us,xb:()=>Tr,z$:()=>ht,zI:()=>ue,zd:()=>Ti});const xe=function(R){const x=[];let b=0;for(let D=0;D<R.length;D++){let w=R.charCodeAt(D);w<128?x[b++]=w:w<2048?(x[b++]=w>>6|192,x[b++]=63&w|128):55296==(64512&w)&&D+1<R.length&&56320==(64512&R.charCodeAt(D+1))?(w=65536+((1023&w)<<10)+(1023&R.charCodeAt(++D)),x[b++]=w>>18|240,x[b++]=w>>12&63|128,x[b++]=w>>6&63|128,x[b++]=63&w|128):(x[b++]=w>>12|224,x[b++]=w>>6&63|128,x[b++]=63&w|128)}return x},Cn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,x){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,D=[];for(let w=0;w<R.length;w+=3){const k=R[w],de=w+1<R.length,Oe=de?R[w+1]:0,$e=w+2<R.length,pt=$e?R[w+2]:0;let In=(15&Oe)<<2|pt>>6,it=63&pt;$e||(it=64,de||(In=64)),D.push(b[k>>2],b[(3&k)<<4|Oe>>4],b[In],b[it])}return D.join("")},encodeString(R,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(R):this.encodeByteArray(xe(R),x)},decodeString(R,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(R):function(R){const x=[];let b=0,D=0;for(;b<R.length;){const w=R[b++];if(w<128)x[D++]=String.fromCharCode(w);else if(w>191&&w<224){const k=R[b++];x[D++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const $e=((7&w)<<18|(63&R[b++])<<12|(63&R[b++])<<6|63&R[b++])-65536;x[D++]=String.fromCharCode(55296+($e>>10)),x[D++]=String.fromCharCode(56320+(1023&$e))}else{const k=R[b++],de=R[b++];x[D++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&de)}}return x.join("")}(this.decodeStringToByteArray(R,x))},decodeStringToByteArray(R,x){this.init_();const b=x?this.charToByteMapWebSafe_:this.charToByteMap_,D=[];for(let w=0;w<R.length;){const k=b[R.charAt(w++)],Oe=w<R.length?b[R.charAt(w)]:0;++w;const pt=w<R.length?b[R.charAt(w)]:64;++w;const Fe=w<R.length?b[R.charAt(w)]:64;if(++w,null==k||null==Oe||null==pt||null==Fe)throw new An;D.push(k<<2|Oe>>4),64!==pt&&(D.push(Oe<<4&240|pt>>2),64!==Fe&&D.push(pt<<6&192|Fe))}return D},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class An extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const At=function(R){return function(R){const x=xe(R);return Cn.encodeByteArray(x,!0)}(R).replace(/\./g,"")},ge=function(R){try{return Cn.decodeString(R,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function Ye(R,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return x}for(const b in x)!x.hasOwnProperty(b)||!It(b)||(R[b]=Ye(R[b],x[b]));return R}function It(R){return"__proto__"!==R}const nt=()=>{try{return function Bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const x=R&&ge(R[1]);return x&&JSON.parse(x)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},gn=R=>{const x=(R=>{var x,b;return null===(b=null===(x=nt())||void 0===x?void 0:x.emulatorHosts)||void 0===b?void 0:b[R]})(R);if(!x)return;const b=x.lastIndexOf(":");if(b<=0||b+1===x.length)throw new Error(`Invalid host ${x} with no separate hostname and port!`);const D=parseInt(x.substring(b+1),10);return"["===x[0]?[x.substring(1,b-1),D]:[x.substring(0,b),D]},Wt=()=>{var R;return null===(R=nt())||void 0===R?void 0:R.config},Kt=R=>{var x;return null===(x=nt())||void 0===x?void 0:x[`_${R}`]};class wr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,b)=>{this.resolve=x,this.reject=b})}wrapCallback(x){return(b,D)=>{b?this.reject(b):this.resolve(D),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x(b):x(b,D))}}}function Pt(R,x){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const D=x||"demo-project",w=R.iat||0,k=R.sub||R.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${D}`,aud:D,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},R);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(de)),""].join(".")}function ht(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function De(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function ee(){var R;const x=null===(R=nt())||void 0===R?void 0:R.forceEnvironment;if("node"===x)return!0;if("browser"===x)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function vt(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dn(){const R=ht();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function sr(){return!ee()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((R,x)=>{try{let b=!0;const D="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(D);w.onsuccess=()=>{w.result.close(),b||self.indexedDB.deleteDatabase(D),R(!0)},w.onupgradeneeded=()=>{b=!1},w.onerror=()=>{var k;x((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(b){x(b)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(x,b,D){super(b),this.code=x,this.customData=D,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(x,b,D){this.service=x,this.serviceName=b,this.errors=D}create(x,...b){const D=b[0]||{},w=`${this.service}/${x}`,k=this.errors[x],de=k?function Ne(R,x){return R.replace(Ft,(b,D)=>{const w=x[D];return null!=w?String(w):`<${D}?>`})}(k,D):"Error";return new ve(w,`${this.serviceName}: ${de} (${w}).`,D)}}const Ft=/\{\$([^}]+)}/g;function Qt(R,x){return Object.prototype.hasOwnProperty.call(R,x)}function Tr(R){for(const x in R)if(Object.prototype.hasOwnProperty.call(R,x))return!1;return!0}function ri(R,x){if(R===x)return!0;const b=Object.keys(R),D=Object.keys(x);for(const w of b){if(!D.includes(w))return!1;const k=R[w],de=x[w];if(Lt(k)&&Lt(de)){if(!ri(k,de))return!1}else if(k!==de)return!1}for(const w of D)if(!b.includes(w))return!1;return!0}function Lt(R){return null!==R&&"object"==typeof R}function us(R){const x=[];for(const[b,D]of Object.entries(R))Array.isArray(D)?D.forEach(w=>{x.push(encodeURIComponent(b)+"="+encodeURIComponent(w))}):x.push(encodeURIComponent(b)+"="+encodeURIComponent(D));return x.length?"&"+x.join("&"):""}function Ti(R){const x={};return R.replace(/^\?/,"").split("&").forEach(D=>{if(D){const[w,k]=D.split("=");x[decodeURIComponent(w)]=decodeURIComponent(k)}}),x}function Hi(R){const x=R.indexOf("?");if(!x)return"";const b=R.indexOf("#",x);return R.substring(x,b>0?b:void 0)}function zs(R,x){const b=new Ci(R,x);return b.subscribe.bind(b)}class Ci{constructor(x,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{x(this)}).catch(D=>{this.error(D)})}next(x){this.forEachObserver(b=>{b.next(x)})}error(x){this.forEachObserver(b=>{b.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,b,D){let w;if(void 0===x&&void 0===b&&void 0===D)throw new Error("Missing Observer.");w=function Wr(R,x){if("object"!=typeof R||null===R)return!1;for(const b of x)if(b in R&&"function"==typeof R[b])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:b,complete:D},void 0===w.next&&(w.next=tn),void 0===w.error&&(w.error=tn),void 0===w.complete&&(w.complete=tn);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,x)}sendOne(x,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{b(this.observers[x])}catch(D){typeof console<"u"&&console.error&&console.error(D)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}const or=1e3,En=2,Cr=144e5,ds=.5;function hs(R,x=or,b=En){const D=x*Math.pow(b,R),w=Math.round(ds*D*(Math.random()-.5)*2);return Math.min(Cr,D+w)}function ke(R){return R&&R._delegate?R._delegate:R}},944:(cs,$n,We)=>{function P(n){return"function"==typeof n}function Re(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const V=Re(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function xe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Rt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(P(r))try{r()}catch(s){e=s instanceof V?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ut(s)}catch(o){e=e??[],o instanceof V?e=[...e,...o.errors]:e.push(o)}}if(e)throw new V(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ut(e);else{if(e instanceof Rt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xe(t,e)}remove(e){const{_finalizers:t}=this;t&&xe(t,e),e instanceof Rt&&e._removeParent(this)}}Rt.EMPTY=(()=>{const n=new Rt;return n.closed=!0,n})();const Cn=Rt.EMPTY;function An(n){return n instanceof Rt||n&&"closed"in n&&P(n.remove)&&P(n.add)&&P(n.unsubscribe)}function Ut(n){P(n)?n():n.unsubscribe()}const At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ge={setTimeout(n,e,...t){const{delegate:r}=ge;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ge;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Te(n){ge.setTimeout(()=>{const{onUnhandledError:e}=At;if(!e)throw n;e(n)})}function Ye(){}const It=Mt("C",void 0,void 0);function Mt(n,e,t){return{kind:n,value:e,error:t}}let at=null;function nt(n){if(At.useDeprecatedSynchronousErrorHandling){const e=!at;if(e&&(at={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=at;if(at=null,t)throw r}}else n()}class gn extends Rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,An(e)&&e.add(this)):this.destination=Je}static create(e,t,r){return new Pt(e,t,r)}next(e){this.isStopped?ee(function zn(n){return Mt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ee(function Bt(n){return Mt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ee(It,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Wt=Function.prototype.bind;function Kt(n,e){return Wt.call(n,e)}class wr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ht(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ht(r)}else ht(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ht(t)}}}class Pt extends gn{constructor(e,t,r){let i;if(super(),P(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kt(e.next,s),error:e.error&&Kt(e.error,s),complete:e.complete&&Kt(e.complete,s)}):i=e}this.destination=new wr(i)}}function ht(n){At.useDeprecatedSynchronousErrorHandling?function Dn(n){At.useDeprecatedSynchronousErrorHandling&&at&&(at.errorThrown=!0,at.error=n)}(n):Te(n)}function ee(n,e){const{onStoppedNotification:t}=At;t&&ge.setTimeout(()=>t(n,e))}const Je={closed:!0,next:Ye,error:function De(n){throw n},complete:Ye},vt="function"==typeof Symbol&&Symbol.observable||"@@observable";function xt(n){return n}function dn(n){return 0===n.length?xt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Et=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ie(n){return n&&n instanceof gn||function sr(n){return n&&P(n.next)&&P(n.error)&&P(n.complete)}(n)&&An(n)}(t)?t:new Pt(t,r,i);return nt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=mn(r))((i,s)=>{const o=new Pt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[vt](){return this}pipe(...t){return dn(t)(this)}toPromise(t){return new(t=mn(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mn(n){var e;return null!==(e=n??At.Promise)&&void 0!==e?e:Promise}const se=Re(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ue=(()=>{class n extends Et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new pe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new se}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Cn:(this.currentObservers=null,s.push(t),new Rt(()=>{this.currentObservers=null,xe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Et;return t.source=this,t}}return n.create=(e,t)=>new pe(e,t),n})();class pe extends ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Cn}}function ve(n){return P(n?.lift)}function ae(n){return e=>{if(ve(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new Ft(n,e,t,r,i)}class Ft extends gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Pe(n,e){return ae((t,r)=>{let i=0;t.subscribe(Ne(r,s=>{r.next(n.call(e,s,i++))}))})}var Qe=We(582);const Vt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function _n(n){return P(n?.then)}function hn(n){return P(n[vt])}function vn(n){return Symbol.asyncIterator&&P(n?.[Symbol.asyncIterator])}function Sn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Hn=function Qt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Tr(n){return P(n?.[Hn])}function zi(n){return(0,Qe.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Qe.qq)(t.read());if(i)return yield(0,Qe.qq)(void 0);yield yield(0,Qe.qq)(r)}}finally{t.releaseLock()}})}function ri(n){return P(n?.getReader)}function Lt(n){if(n instanceof Et)return n;if(null!=n){if(hn(n))return function ii(n){return new Et(e=>{const t=n[vt]();if(P(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Vt(n))return function us(n){return new Et(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(_n(n))return function Ti(n){return new Et(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Te)})}(n);if(vn(n))return Gr(n);if(Tr(n))return function Hi(n){return new Et(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ri(n))return function zs(n){return Gr(zi(n))}(n)}throw Sn(n)}function Gr(n){return new Et(e=>{(function Ci(n,e){var t,r,i,s;return(0,Qe.mG)(this,void 0,void 0,function*(){try{for(t=(0,Qe.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function hr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function tn(n,e,t=1/0){return P(e)?tn((r,i)=>Pe((s,o)=>e(r,s,i,o))(Lt(n(r,i))),t):("number"==typeof e&&(t=e),ae((r,i)=>function Wr(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const y=()=>{m&&!c.length&&!u&&e.complete()},I=N=>u<r?T(N):c.push(N),T=N=>{s&&e.next(N),u++;let O=!1;Lt(t(N,f++)).subscribe(Ne(e,q=>{i?.(q),s?I(q):e.next(q)},()=>{O=!0},void 0,()=>{if(O)try{for(u--;c.length&&u<r;){const q=c.shift();o?hr(e,o,()=>T(q)):T(q)}y()}catch(q){e.error(q)}}))};return n.subscribe(Ne(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Nr(n=1/0){return tn(xt,n)}const kn=new Et(n=>n.complete());function Or(n){return n[n.length-1]}function Di(n){return P(Or(n))?n.pop():void 0}function ls(n){return function cn(n){return n&&P(n.schedule)}(Or(n))?n.pop():void 0}function En(n,e=0){return ae((t,r)=>{t.subscribe(Ne(r,i=>hr(r,n,()=>r.next(i),e),()=>hr(r,n,()=>r.complete(),e),i=>hr(r,n,()=>r.error(i),e)))})}function Cr(n,e=0){return ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ke(n,e){if(!n)throw new Error("Iterable cannot be null");return new Et(t=>{hr(t,e,()=>{const r=n[Symbol.asyncIterator]();hr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function b(n,e){return e?function x(n,e){if(null!=n){if(hn(n))return function ds(n,e){return Lt(n).pipe(Cr(e),En(e))}(n,e);if(Vt(n))return function Ds(n,e){return new Et(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(_n(n))return function hs(n,e){return Lt(n).pipe(Cr(e),En(e))}(n,e);if(vn(n))return ke(n,e);if(Tr(n))return function qs(n,e){return new Et(t=>{let r;return hr(t,e,()=>{r=n[Hn](),hr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>P(r?.return)&&r.return()})}(n,e);if(ri(n))return function R(n,e){return ke(zi(n),e)}(n,e)}throw Sn(n)}(n,e):Lt(n)}function D(...n){const e=ls(n),t=function or(n,e){return"number"==typeof Or(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Lt(r[0]):Nr(t)(b(r,e)):kn}class w extends ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return b(n,ls(n))}function de(n={}){const{connector:e=(()=>new ue),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),o=c=void 0,f=m=!1},T=()=>{const N=o;I(),N?.unsubscribe()};return ae((N,O)=>{u++,!m&&!f&&y();const q=c=c??e();O.add(()=>{u--,0===u&&!m&&!f&&(a=Oe(T,i))}),q.subscribe(O),!o&&u>0&&(o=new Pt({next:j=>q.next(j),error:j=>{m=!0,y(),a=Oe(I,t,j),q.error(j)},complete:()=>{f=!0,y(),a=Oe(I,r),q.complete()}}),Lt(N).subscribe(o))})(s)}}function Oe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Pt({next:()=>{r.unsubscribe(),n()}});return Lt(e(...t)).subscribe(r)}function $e(n,e){return ae((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ne(r,c=>{i?.unsubscribe();let u=0;const f=s++;Lt(n(c,f)).subscribe(i=Ne(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pt(n,e=xt){return n=n??Yt,ae((t,r)=>{let i,s=!0;t.subscribe(Ne(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Yt(n,e){return n===e}function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function In(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function it(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(it).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function kr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ho=Fe({__forward_ref__:Fe});function un(n){return n.__forward_ref__=un,n.toString=function(){return it(this())},n}function lt(n){return oc(n)?n():n}function oc(n){return"function"==typeof n&&n.hasOwnProperty(ho)&&n.__forward_ref__===un}function ac(n){return n&&!!n.\u0275providers}const da="https://g.co/ng/security#xss";class le extends Error{constructor(e,t){super(function uc(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function gt(n){return"string"==typeof n?n:null==n?"":String(n)}function ar(n,e){throw new le(-201,!1)}function Si(n,e){null==n&&function dt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ha(n){return Cu(n,fo)||Cu(n,Ss)}function Cu(n,e){return n.hasOwnProperty(e)?n[e]:null}function fc(n){return n&&(n.hasOwnProperty(Au)||n.hasOwnProperty(rd))?n[Au]:null}const fo=Fe({\u0275prov:Fe}),Au=Fe({\u0275inj:Fe}),Ss=Fe({ngInjectableDef:Fe}),rd=Fe({ngInjectorDef:Fe});var Ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ct||{});let Du;function si(n){const e=Du;return Du=n,e}function Ro(n,e,t){const r=ha(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ct.Optional?null:void 0!==e?e:void ar(it(n))}const sn=globalThis;class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Po={},xo="__NG_DI_FLAG__",Dr="ngTempTokenPath",Mu=/\n/gm,Gi="__source";let ma;function Ws(n){const e=ma;return ma=n,e}function _a(n,e=Ct.Default){if(void 0===ma)throw new le(-203,!1);return null===ma?Ro(n,void 0,e):ma.get(n,e&Ct.Optional?null:void 0,e)}function fe(n,e=Ct.Default){return(function So(){return Du}()||_a)(lt(n),e)}function qe(n,e=Ct.Default){return fe(n,_c(e))}function _c(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ya(n){const e=[];for(let t=0;t<n.length;t++){const r=lt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new le(900,!1);let i,s=Ct.Default;for(let o=0;o<r.length;o++){const a=r[o],c=p_(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(fe(i,s))}else e.push(fe(r))}return e}function Wi(n,e){return n[xo]=e,n.prototype[xo]=e,n}function p_(n){return n[xo]}function Ms(n){return{toString:n}.toString()}var po=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(po||{}),Jn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Jn||{});const S={},F=[],K=Fe({\u0275cmp:Fe}),ye=Fe({\u0275dir:Fe}),Me=Fe({\u0275pipe:Fe}),ze=Fe({\u0275mod:Fe}),Ke=Fe({\u0275fac:Fe}),mt=Fe({__NG_ELEMENT_ID__:Fe}),_t=Fe({__NG_ENV_ID__:Fe});function jt(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Fr(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Lr(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function fs(n){return 3===n||4===n||6===n}function Lr(n){return 64===n.charCodeAt(0)}function fi(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||g_(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function g_(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const od="ng-template";function ad(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==jt(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ff(n){return 4===n.type&&n.value!==od}function m_(n,e,t){return e===(4!==n.type||t?n.value:od)}function ob(n,e,t){let r=4;const i=n.attrs||[],s=function Vf(n){for(let e=0;e<n.length;e++)if(fs(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!m_(n,c,t)||""===c&&1===e.length){if(Ki(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!ad(n.attrs,u,t)){if(Ki(r))return!1;o=!0}continue}const m=Lf(8&r?"class":c,i,Ff(n),t);if(-1===m){if(Ki(r))return!1;o=!0;continue}if(""!==u){let y;y=m>s?"":i[m+1].toLowerCase();const I=8&r?y:null;if(I&&-1!==jt(I,u,0)||2&r&&u!==y){if(Ki(r))return!1;o=!0}}}}else{if(!o&&!Ki(r)&&!Ki(c))return!1;if(o&&Ki(c))continue;o=!1,r=c|1&r}}return Ki(r)||o}function Ki(n){return 0==(1&n)}function Lf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function __(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function cd(n,e,t=!1){for(let r=0;r<e.length;r++)if(ob(n,e[r],t))return!0;return!1}function Bf(n,e){return n?":not("+e.trim()+")":e}function jf(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ki(o)&&(e+=Bf(s,i),i=""),r=o,s=s||!Ki(r);t++}return""!==i&&(e+=Bf(s,i)),e}function fr(n){return Ms(()=>{const e=E_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===po.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Jn.Emulated,styles:n.styles||F,_:null,schemas:n.schemas||null,tView:null,id:""};dd(t);const r=n.dependencies;return t.directiveDefs=hd(r,!1),t.pipeDefs=hd(r,!0),t.id=function ab(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function y_(n){return qt(n)||Sr(n)}function Hf(n){return null!==n}function xn(n){return Ms(()=>({type:n.type,bootstrap:n.bootstrap||F,declarations:n.declarations||F,imports:n.imports||F,exports:n.exports||F,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function v_(n,e){if(null==n)return S;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function et(n){return Ms(()=>{const e=E_(n);return dd(e),e})}function Vr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function qt(n){return n[K]||null}function Sr(n){return n[ye]||null}function Ur(n){return n[Me]||null}function pi(n,e){const t=n[ze]||null;if(!t&&!0===e)throw new Error(`Type ${it(n)} does not have '\u0275mod' property.`);return t}function E_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||S,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||F,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:v_(n.inputs,e),outputs:v_(n.outputs)}}function dd(n){n.features?.forEach(e=>e(n))}function hd(n,e){if(!n)return null;const t=e?Ur:y_;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Hf)}const Ln=0,He=1,bt=2,Vn=3,Zi=4,Nu=5,Br=6,vc=7,cr=8,Ks=9,Ec=10,wt=11,va=12,I_=13,Oo=14,ur=15,Ea=16,Ic=17,ps=18,Ou=19,fd=20,ko=21,Ps=22,ku=23,Ia=24,$t=25,pd=1,gd=2,Zs=7,ba=9,Kr=11;function Ri(n){return Array.isArray(n)&&"object"==typeof n[pd]}function gi(n){return Array.isArray(n)&&!0===n[pd]}function b_(n){return 0!=(4&n.flags)}function bc(n){return n.componentOffset>-1}function Wf(n){return 1==(1&n.flags)}function Qi(n){return!!n.template}function Kf(n){return 0!=(512&n[bt])}function wa(n,e){return n.hasOwnProperty(Ke)?n[Ke]:null}let oi=null,Tc=!1;function gs(n){const e=oi;return oi=n,e}const D_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function S_(n){if(!Lo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!R_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function _d(n){n.dirty=!0,function lr(n){if(void 0===n.liveConsumerNode)return;const e=Tc;Tc=!0;try{for(const t of n.liveConsumerNode)t.dirty||_d(t)}finally{Tc=e}}(n),n.consumerMarkedDirty?.(n)}function Yf(n){return n&&(n.nextProducerIndex=0),gs(n)}function Lu(n,e){if(gs(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Lo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function R_(n){Ta(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(S_(t),r!==t.version))return!0}return!1}function M_(n){if(Ta(n),Lo(n))for(let e=0;e<n.producerNode.length;e++)yd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yd(n,e){if(function Ac(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ta(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)yd(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ta(i),i.producerIndexOfThis[r]=e}}function Lo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ta(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let vd=null;const F_=()=>{},np=(()=>({...D_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:F_}))();class _b{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ms(){return L_}function L_(n){return n.type.prototype.ngOnChanges&&(n.setInput=yb),V_}function V_(){const n=B_(this),e=n?.current;if(e){const t=n.previous;if(t===S)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function yb(n,e,t,r){const i=this.declaredInputs[t],s=B_(n)||function rp(n,e){return n[U_]=e}(n,{previous:S,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new _b(c&&c.currentValue,e,a===S),n[r]=e}ms.ngInherit=!0;const U_="__ngSimpleChanges__";function B_(n){return n[U_]||null}const Qs=function(n,e,t){};function yn(n){for(;Array.isArray(n);)n=n[Ln];return n}function Sc(n,e){return yn(e[n])}function Mi(n,e){return yn(e[n.index])}function $_(n,e){return n.data[e]}function _s(n,e){return n[e]}function mi(n,e){const t=e[n];return Ri(t)?t:t[Ln]}function Ys(n,e){return null==e?null:n[e]}function ap(n){n[Ic]=0}function bb(n){1024&n[bt]||(n[bt]|=1024,wd(n,1))}function z_(n){1024&n[bt]&&(n[bt]&=-1025,wd(n,-1))}function wd(n,e){let t=n[Vn];if(null===t)return;t[Nu]+=e;let r=t;for(t=t[Vn];null!==t&&(1===e&&1===r[Nu]||-1===e&&0===r[Nu]);)t[Nu]+=e,r=t,t=t[Vn]}const yt={lFrame:ty(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function G_(){return yt.bindingsEnabled}function be(){return yt.lFrame.lView}function Xt(){return yt.lFrame.tView}function dp(n){return yt.lFrame.contextLView=n,n[cr]}function Uu(n){return yt.lFrame.contextLView=null,n}function Zr(){let n=Z_();for(;null!==n&&64===n.type;)n=n.parent;return n}function Z_(){return yt.lFrame.currentTNode}function Xs(n,e){const t=yt.lFrame;t.currentTNode=n,t.isParent=e}function hp(){return yt.lFrame.isParent}function Qr(){const n=yt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Rc(){return yt.lFrame.bindingIndex++}function Db(n,e){const t=yt.lFrame;t.bindingIndex=t.bindingRootIndex=n,ju(e)}function ju(n){yt.lFrame.currentDirectiveIndex=n}function gp(n){yt.lFrame.currentQueryIndex=n}function mp(n){const e=n[He];return 2===e.type?e.declTNode:1===e.type?n[Br]:null}function ey(n,e,t){if(t&Ct.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ct.Host||(i=mp(s),null===i||(s=s[Oo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=yt.lFrame=yp();return r.currentTNode=e,r.lView=n,!0}function _p(n){const e=yp(),t=n[He];yt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yp(){const n=yt.lFrame,e=null===n?null:n.child;return null===e?ty(n):e}function ty(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function $u(){const n=yt.lFrame;return yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ny=$u;function vp(){const n=$u();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _i(){return yt.lFrame.selectedIndex}function Aa(n){yt.lFrame.selectedIndex=n}function qn(){const n=yt.lFrame;return $_(n.tView,n.selectedIndex)}let iy=!0;function Dd(){return iy}function mo(n){iy=n}function Sd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Rd(n,e,t){Pd(n,e,3,t)}function Md(n,e,t,r){(3&n[bt])===t&&Pd(n,e,t,r)}function Ip(n,e){let t=n[bt];(3&t)===e&&(t&=8191,t+=1,n[bt]=t)}function Pd(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Ic]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Ic]+=65536),(a<s||-1==s)&&(Ob(n,t,e,c),n[Ic]=(4294901760&n[Ic])+c+2),c++}function xd(n,e){Qs(4,n,e);const t=gs(null);try{e.call(n)}finally{gs(t),Qs(5,n,e)}}function Ob(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[bt]>>13<n[Ic]>>16&&(3&n[bt])===e&&(n[bt]+=8192,xd(a,s)):xd(a,s)}const Uo=-1;class zu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Nd(n){return n!==Uo}function Mc(n){return 32767&n}function qu(n,e){let t=function Fb(n){return n>>16}(n),r=e;for(;t>0;)r=r[Oo],t--;return r}let Tp=!0;function Od(n){const e=Tp;return Tp=n,e}const Cp=255,oy=5;let MR=0;const to={};function l(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[He];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(Nd(i)){const o=Mc(i),a=qu(i,e),c=a[He].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=ly(i),null===r)return Uo;if(t++,i=i[Oo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Uo}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(mt)&&(r=t[mt]),null==r&&(r=t[mt]=MR++);const i=r&Cp;e.data[n+(i>>oy)]|=1<<i}(n,e,t)}function re(n,e,t){if(t&Ct.Optional||void 0!==n)return n;ar()}function Ie(n,e,t,r){if(t&Ct.Optional&&void 0===r&&(r=null),!(t&(Ct.Self|Ct.Host))){const i=n[Ks],s=si(void 0);try{return i?i.get(e,r,t&Ct.Optional):Ro(e,r,t&Ct.Optional)}finally{si(s)}}return re(r,0,t)}function Ge(n,e,t,r=Ct.Default,i){if(null!==n){if(2048&e[bt]&&!(r&Ct.Self)){const o=function uy(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[bt]&&!(512&o[bt]);){const a=rt(s,o,t,r|Ct.Self,to);if(a!==to)return a;let c=s.parent;if(!c){const u=o[fd];if(u){const f=u.get(t,to,r);if(f!==to)return f}c=ly(o),o=o[Oo]}s=c}return i}(n,e,t,r,to);if(o!==to)return o}const s=rt(n,e,t,r,to);if(s!==to)return s}return Ie(e,t,r,i)}function rt(n,e,t,r,i){const s=function kd(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mt)?n[mt]:void 0;return"number"==typeof e?e>=0?e&Cp:cy:e}(t);if("function"==typeof s){if(!ey(e,n,r))return r&Ct.Host?re(i,0,r):Ie(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ct.Optional)return o;ar()}finally{ny()}}else if("number"==typeof s){let o=null,a=g(n,e),c=Uo,u=r&Ct.Host?e[ur][Br]:null;for((-1===a||r&Ct.SkipSelf)&&(c=-1===a?v(n,e):e[a+8],c!==Uo&&Fd(r,!1)?(o=e[He],a=Mc(c),e=qu(c,e)):a=-1);-1!==a;){const f=e[He];if(Ap(s,a,f.data)){const m=zt(a,e,t,o,r,u);if(m!==to)return m}c=e[a+8],c!==Uo&&Fd(r,e[He].data[a+8]===u)&&Ap(s,a,e)?(o=f,a=Mc(c),e=qu(c,e)):a=-1}}return i}function zt(n,e,t,r,i,s){const o=e[He],a=o.data[n+8],f=function Yr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const T=o[I];if(I<c&&t===T||I>=c&&T.type===t)return I}if(i){const I=o[c];if(I&&Qi(I)&&I.type===t)return c}return null}(a,o,t,null==r?bc(a)&&Tp:r!=o&&0!=(3&a.type),i&Ct.Host&&s===a);return null!==f?Pi(e,o,f,a):to}function Pi(n,e,t,r){let i=n[t];const s=e.data;if(function sy(n){return n instanceof zu}(i)){const o=i;o.resolving&&function lc(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new le(-200,`Circular dependency in DI detected for ${n}${t}`)}(function nn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():gt(n)}(s[t]));const a=Od(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?si(o.injectImpl):null;ey(n,r,Ct.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Nb(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=L_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&si(u),Od(a),o.resolving=!1,ny()}}return i}function Ap(n,e,t){return!!(t[e+(n>>oy)]&1<<n)}function Fd(n,e){return!(n&Ct.Self||n&Ct.Host&&e)}class Xr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ge(this._tNode,this._lView,e,_c(r),t)}}function cy(){return new Xr(Zr(),be())}function jr(n){return Ms(()=>{const e=n.prototype.constructor,t=e[Ke]||Gu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ke]||Gu(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gu(n){return oc(n)?()=>{const e=Gu(lt(n));return e&&e()}:wa(n)}function ly(n){const e=n[He],t=e.type;return 2===t?e.declTNode:1===t?n[Br]:null}const Ld="__parameters__";function Ud(n,e,t){return Ms(()=>{const r=function Lb(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(Ld)?c[Ld]:Object.defineProperty(c,Ld,{value:[]})[Ld];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function jd(n,e){n.forEach(t=>Array.isArray(t)?jd(t,e):e(t))}function xR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dy(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xs(n,e,t){let r=$d(n,e);return r>=0?n[1|r]=t:(r=~r,function oH(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Vb(n,e){const t=$d(n,e);if(t>=0)return n[1|t]}function $d(n,e){return function NR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const $r=Wi(Ud("Optional"),8),Rp=Wi(Ud("SkipSelf"),4);function _y(n){return 128==(128&n.flags)}var Oc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Oc||{});const zb=new Map;let MH=0;const qb="__ngContext__";function xi(n,e){Ri(e)?(n[qb]=e[Ou],function xH(n){zb.set(n[Ou],n)}(e)):n[qb]=e}let Gb;function Wb(n,e){return Gb(n,e)}function xp(n){const e=n[Vn];return gi(e)?e[Vn]:e}function JR(n){return tM(n[va])}function eM(n){return tM(n[Zi])}function tM(n){for(;null!==n&&!gi(n);)n=n[Zi];return n}function qd(n,e,t,r,i){if(null!=r){let s,o=!1;gi(r)?s=r:Ri(r)&&(o=!0,r=r[Ln]);const a=yn(r);0===n&&null!==t?null==i?sM(e,t,a):Wu(e,t,a,i||null,!0):1===n&&null!==t?Wu(e,t,a,i||null,!0):2===n?function Ty(n,e,t){const r=by(n,e);r&&function YH(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function e3(n,e,t,r,i){const s=t[Zs];s!==yn(t)&&qd(e,n,r,s,i);for(let a=Kr;a<t.length;a++){const c=t[a];Op(c[He],c,n,e,r,s)}}(e,n,s,t,i)}}function Ey(n,e,t){return n.createElement(e,t)}function rM(n,e){const t=n[ba],r=t.indexOf(e);z_(e),t.splice(r,1)}function Iy(n,e){if(n.length<=Kr)return;const t=Kr+e,r=n[t];if(r){const i=r[Ea];null!==i&&i!==n&&rM(i,r),e>0&&(n[t-1][Zi]=r[Zi]);const s=dy(n,Kr+e);!function zH(n,e){Op(n,e,e[wt],2,null,null),e[Ln]=null,e[Br]=null}(r[He],r);const o=s[ps];null!==o&&o.detachView(s[He]),r[Vn]=null,r[Zi]=null,r[bt]&=-129}return r}function Zb(n,e){if(!(256&e[bt])){const t=e[wt];e[ku]&&M_(e[ku]),e[Ia]&&M_(e[Ia]),t.destroyNode&&Op(n,e,t,3,null,null),function GH(n){let e=n[va];if(!e)return Qb(n[He],n);for(;e;){let t=null;if(Ri(e))t=e[va];else{const r=e[Kr];r&&(t=r)}if(!t){for(;e&&!e[Zi]&&e!==n;)Ri(e)&&Qb(e[He],e),e=e[Vn];null===e&&(e=n),Ri(e)&&Qb(e[He],e),t=e&&e[Zi]}e=t}}(e)}}function Qb(n,e){if(!(256&e[bt])){e[bt]&=-129,e[bt]|=256,function QH(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof zu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Qs(4,a,c);try{c.call(a)}finally{Qs(5,a,c)}}else{Qs(4,i,s);try{s.call(i)}finally{Qs(5,i,s)}}}}}(n,e),function ZH(n,e){const t=n.cleanup,r=e[vc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[vc]=null);const i=e[ko];if(null!==i){e[ko]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[He].type&&e[wt].destroy();const t=e[Ea];if(null!==t&&gi(e[Vn])){t!==e[Vn]&&rM(t,e);const r=e[ps];null!==r&&r.detachView(n)}!function NH(n){zb.delete(n[Ou])}(e)}}function Yb(n,e,t){return function iM(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Ln];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Jn.None||s===Jn.Emulated)return null}return Mi(r,t)}}(n,e.parent,t)}function Wu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function sM(n,e,t){n.appendChild(e,t)}function oM(n,e,t,r,i){null!==r?Wu(n,e,t,r,i):sM(n,e,t)}function by(n,e){return n.parentNode(e)}let Xb,nw,Ay,uM=function cM(n,e,t){return 40&n.type?Mi(n,t):null};function wy(n,e,t,r){const i=Yb(n,r,e),s=e[wt],a=function aM(n,e,t){return uM(n,e,t)}(r.parent||e[Br],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)oM(s,i,t[c],a,!1);else oM(s,i,t,a,!1);void 0!==Xb&&Xb(s,r,e,t,i)}function Np(n,e){if(null!==e){const t=e.type;if(3&t)return Mi(e,n);if(4&t)return Jb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Np(n,r);{const i=n[e.index];return gi(i)?Jb(-1,i):yn(i)}}if(32&t)return Wb(e,n)()||yn(n[e.index]);{const r=dM(n,e);return null!==r?Array.isArray(r)?r[0]:Np(xp(n[ur]),r):Np(n,e.next)}}return null}function dM(n,e){return null!==e?n[ur][Br].projection[e.projection]:null}function Jb(n,e){const t=Kr+n+1;if(t<e.length){const r=e[t],i=r[He].firstChild;if(null!==i)return Np(r,i)}return e[Zs]}function ew(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&xi(yn(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)ew(n,e,t.child,r,i,s,!1),qd(e,n,i,a,s);else if(32&c){const u=Wb(t,r);let f;for(;f=u();)qd(e,n,i,f,s);qd(e,n,i,a,s)}else 16&c?fM(n,e,r,t,i,s):qd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Op(n,e,t,r,i,s){ew(t,r,n.firstChild,e,i,s,!1)}function fM(n,e,t,r,i,s){const o=t[ur],c=o[Br].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)qd(e,n,i,c[u],s);else{let u=c;const f=o[Vn];_y(r)&&(u.flags|=128),ew(n,e,u,f,i,s,!0)}}function pM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Fr(n,e,r),null!==i&&pM(n,e,i),null!==s&&function n3(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function yM(n){return function rw(){if(void 0===Ay&&(Ay=null,sn.trustedTypes))try{Ay=sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ay}()?.createScriptURL(n)||n}class Ku{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${da})`}}function Ns(n){return n instanceof Ku?n.changingThisBreaksApplicationSecurity:n}function Bo(n,e){const t=function f3(n){return n instanceof Ku&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${da})`)}return t===e}const b3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var yi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yi||{});function ai(n){const e=Fp();return e?e.sanitize(yi.URL,n)||"":Bo(n,"URL")?Ns(n):function Dy(n){return(n=String(n)).match(b3)?n:"unsafe:"+n}(gt(n))}function AM(n){const e=Fp();if(e)return yM(e.sanitize(yi.RESOURCE_URL,n)||"");if(Bo(n,"ResourceURL"))return yM(Ns(n));throw new le(904,!1)}function Fp(){const n=be();return n&&n[Ec].sanitizer}const Lp=new Ee("ENVIRONMENT_INITIALIZER"),SM=new Ee("INJECTOR",-1),RM=new Ee("INJECTOR_DEF_TYPES");class aw{get(e,t=Po){if(t===Po){const r=new Error(`NullInjectorError: No provider for ${it(e)}!`);throw r.name="NullInjectorError",r}return t}}function O3(...n){return{\u0275providers:PM(0,n),\u0275fromNgModule:!0}}function PM(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return jd(e,o=>{const a=o;Ry(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&xM(i,s),t}function xM(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];cw(i,s=>{e(s,r)})}}function Ry(n,e,t,r){if(!(n=lt(n)))return!1;let i=null,s=fc(n);const o=!s&&qt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=fc(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Ry(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{jd(s.imports,f=>{Ry(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&xM(u,e)}if(!a){const u=wa(i)||(()=>new i);e({provide:i,useFactory:u,deps:F},i),e({provide:RM,useValue:i,multi:!0},i),e({provide:Lp,useValue:()=>fe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;cw(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function cw(n,e){for(let t of n)ac(t)&&(t=t.\u0275providers),Array.isArray(t)?cw(t,e):e(t)}const k3=Fe({provide:String,useValue:Fe});function uw(n){return null!==n&&"object"==typeof n&&k3 in n}function Zu(n){return"function"==typeof n}const lw=new Ee("Set Injector scope."),My={},L3={};let dw;function Py(){return void 0===dw&&(dw=new aw),dw}class ro{}class Kd extends ro{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fw(e,o=>this.processProvider(o)),this.records.set(SM,Zd(void 0,this)),i.has("environment")&&this.records.set(ro,Zd(void 0,this));const s=this.records.get(lw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(RM.multi,F,Ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ws(this),r=si(void 0);try{return e()}finally{Ws(t),si(r)}}get(e,t=Po,r=Ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_t))return e[_t](this);r=_c(r);const s=Ws(this),o=si(void 0);try{if(!(r&Ct.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function $3(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&ha(e);c=u&&this.injectableDefInScope(u)?Zd(hw(e),My):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ct.Self?Py():this.parent).get(e,t=r&Ct.Optional&&t===Po?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Dr]=a[Dr]||[]).unshift(it(e)),s)throw a;return function sd(n,e,t,r){const i=n[Dr];throw e[Gi]&&i.unshift(e[Gi]),n.message=function yc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=it(e);if(Array.isArray(e))i=e.map(it).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):it(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Mu,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Dr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{si(o),Ws(s)}}resolveInjectorInitializers(){const e=Ws(this),t=si(void 0);try{const i=this.get(Lp.multi,F,Ct.Self);for(const s of i)s()}finally{Ws(e),si(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(it(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){let t=Zu(e=lt(e))?e:lt(e&&e.provide);const r=function U3(n){return uw(n)?Zd(void 0,n.useValue):Zd(kM(n),My)}(e);if(Zu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Zd(void 0,My,!0),i.factory=()=>ya(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===My&&(t.value=L3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function j3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=lt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function hw(n){const e=ha(n),t=null!==e?e.factory:wa(n);if(null!==t)return t;if(n instanceof Ee)throw new le(204,!1);if(n instanceof Function)return function V3(n){const e=n.length;if(e>0)throw function Sp(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new le(204,!1);const t=function nd(n){return n&&(n[fo]||n[Ss])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new le(204,!1)}function kM(n,e,t){let r;if(Zu(n)){const i=lt(n);return wa(i)||hw(i)}if(uw(n))r=()=>lt(n.useValue);else if(function OM(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ya(n.deps||[]));else if(function NM(n){return!(!n||!n.useExisting)}(n))r=()=>fe(lt(n.useExisting));else{const i=lt(n&&(n.useClass||n.provide));if(!function B3(n){return!!n.deps}(n))return wa(i)||hw(i);r=()=>new i(...ya(n.deps))}return r}function Zd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function fw(n,e){for(const t of n)Array.isArray(t)?fw(t,e):t&&ac(t)?fw(t.\u0275providers,e):e(t)}const xy=new Ee("AppId",{providedIn:"root",factory:()=>z3}),z3="ng",FM=new Ee("Platform Initializer"),Os=new Ee("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LM=new Ee("AnimationModuleType"),pw=new Ee("CSP nonce",{providedIn:"root",factory:()=>function Wd(){if(void 0!==nw)return nw;if(typeof document<"u")return document;throw new le(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let VM=(n,e,t)=>null;function bw(n,e,t=!1){return VM(n,e,t)}class J3{}class jM{}class t4{resolveComponentFactory(e){throw function e4(n){const e=Error(`No component factory found for ${it(n)}.`);return e.ngComponent=n,e}(e)}}let Vy=(()=>{class n{static#e=this.NULL=new t4}return n})();function n4(){return Xd(Zr(),be())}function Xd(n,e){return new vs(Mi(n,e))}let vs=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=n4}return n})();class Bp{}let Sa=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function i4(){const n=be(),t=mi(Zr().index,n);return(Ri(t)?t:n)[wt]}()}return n})(),s4=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}return n})();class kc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Cw=new kc("16.2.12"),Aw={};function GM(n,e=null,t=null,r){const i=WM(n,e,t,r);return i.resolveInjectorInitializers(),i}function WM(n,e=null,t=null,r,i=new Set){const s=[t||F,O3(n)];return r=r||("object"==typeof n?void 0:it(n)),new Kd(s,e||Py(),r||null,i)}let vi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Po;static#t=this.NULL=new aw;static create(t,r){if(Array.isArray(t))return GM({name:""},r,t,"");{const i=t.name??"";return GM({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>fe(SM)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function Sw(n){return n.ngOriginalError}class _o{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Sw(e);for(;t&&Sw(t);)t=Sw(t);return t||null}}function Mw(n){return e=>{setTimeout(n,void 0,e)}}const pr=class h4 extends ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Mw(s),i&&(i=Mw(i)),o&&(o=Mw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Rt&&e.add(a),a}};function ZM(...n){}class Gt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pr(!1),this.onMicrotaskEmpty=new pr(!1),this.onStable=new pr(!1),this.onError=new pr(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function f4(){const n="function"==typeof sn.requestAnimationFrame;let e=sn[n?"requestAnimationFrame":"setTimeout"],t=sn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function m4(n){const e=()=>{!function g4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xw(n),n.isCheckStableRunning=!0,Pw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function y4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return QM(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),YM(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return QM(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),YM(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,xw(n),Pw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gt.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Gt.isInAngularZone())throw new le(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,p4,ZM,ZM);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const p4={};function Pw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function QM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YM(n){n._nesting--,Pw(n)}class _4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pr,this.onMicrotaskEmpty=new pr,this.onStable=new pr,this.onError=new pr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const XM=new Ee("",{providedIn:"root",factory:JM});function JM(){const n=qe(Gt);let e=!0;return D(new Et(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Et(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Gt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Gt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(de()))}function Ra(n){return n instanceof Function?n():n}let Nw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function jp(n){for(;n;){n[bt]|=64;const e=xp(n);if(Kf(n)&&!e)return n;n=e}return null}const iP=new Ee("",{providedIn:"root",factory:()=>!1});let By=null;function cP(n,e){return n[e]??dP()}function uP(n,e){const t=dP();t.producerNode?.length&&(n[e]=By,t.lView=n,By=lP())}const S4={...D_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jp(n.lView)},lView:null};function lP(){return Object.create(S4)}function dP(){return By??=lP(),By}const Dt={};function Se(n){hP(Xt(),be(),_i()+n,!1)}function hP(n,e,t,r){if(!r)if(3==(3&e[bt])){const s=n.preOrderCheckHooks;null!==s&&Rd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Md(e,s,0,t)}Aa(t)}function _e(n,e=Ct.Default){const t=be();return null===t?fe(n,e):Ge(Zr(),t,lt(n),e)}function jy(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[Ln]=i,m[bt]=140|r,(null!==u||n&&2048&n[bt])&&(m[bt]|=2048),ap(m),m[Vn]=m[Oo]=n,m[cr]=t,m[Ec]=o||n&&n[Ec],m[wt]=a||n&&n[wt],m[Ks]=c||n&&n[Ks]||null,m[Br]=s,m[Ou]=function PH(){return MH++}(),m[Ps]=f,m[fd]=u,m[ur]=2==e.type?n[ur]:m,m}function th(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Ow(n,e,t,r,i){const s=Z_(),o=hp(),c=n.data[e]=function F4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Vo(){return null!==yt.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function Y_(){return yt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ca(){const n=yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Xs(s,!0),s}function $p(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function pP(n,e,t,r,i){const s=cP(e,ku),o=_i(),a=2&r;try{Aa(-1),a&&e.length>$t&&hP(n,e,$t,!1),Qs(a?2:0,i);const u=a?s:null,f=Yf(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{Lu(u,f)}}finally{a&&null===e[ku]&&uP(e,ku),Aa(o),Qs(a?3:1,i)}}function kw(n,e,t){if(b_(e)){const r=gs(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{gs(r)}}}function Fw(n,e,t){G_()&&(function z4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;bc(t)&&function Q4(n,e,t){const r=Mi(e,n),i=gP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=$y(n,jy(n,i,null,o,r,e,null,n[Ec].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||l(t,e),xi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=Pi(e,n,a,t);xi(u,e),null!==o&&Y4(0,a-i,u,c,0,o),Qi(c)&&(mi(t.index,e)[cr]=Pi(e,n,a,t))}}(n,e,t,Mi(t,e)),64==(64&t.flags)&&EP(n,e,t))}function Lw(n,e,t=Mi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function gP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Vw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vw(n,e,t,r,i,s,o,a,c,u,f){const m=$t+r,y=m+i,I=function M4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dt);return t}(m,y),T="function"==typeof u?u():u;return I[He]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:f}}let mP=n=>null;function _P(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?yP(t,e,i,s):r.hasOwnProperty(i)&&yP(t,e,r[i],s)}return t}function yP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function ks(n,e,t,r,i,s,o,a){const c=Mi(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(zw(n,t,f,r,i),bc(e)&&function U4(n,e){const t=mi(e,n);16&t[bt]||(t[bt]|=64)}(t,e.index)):3&e.type&&(r=function V4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function Uw(n,e,t,r){if(G_()){const i=null===r?null:{"":-1},s=function q4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(cd(e,o.selectors,!1))if(r||(r=[]),Qi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Bw(n,e,a.length)}else r.unshift(o),Bw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&vP(n,e,t,o,i,a),i&&function G4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new le(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=fi(t.mergedAttrs,t.attrs)}function vP(n,e,t,r,i,s){for(let u=0;u<r.length;u++)C(l(t,e),n,r[u].type);!function K4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=$p(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=fi(t.mergedAttrs,f.hostAttrs),Z4(n,t,e,c,f),W4(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function L4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,T=y?y.outputs:null;c=_P(m.inputs,f,c,y?y.inputs:null),u=_P(m.outputs,f,u,T);const N=null===c||null===o||Ff(e)?null:X4(c,f,o);a.push(N)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function EP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function X_(){return yt.lFrame.currentDirectiveIndex}();try{Aa(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];ju(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&H4(c,u)}}finally{Aa(-1),ju(o)}}function H4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Bw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function W4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qi(e)&&(t[""]=n)}}function Z4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=wa(i.type)),o=new zu(s,Qi(i),_e);n.blueprint[r]=o,t[r]=o,function j4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function $4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,$p(n,t,i.hostVars,Dt),i)}function jo(n,e,t,r,i,s){const o=Mi(n,e);!function jw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?gt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[wt],o,s,n.value,t,r,i)}function Y4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)IP(r,t,o[a++],o[a++],o[a++])}function IP(n,e,t,r,i){const s=gs(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{gs(s)}}function X4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function bP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function wP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];gp(t[r]),o.contentQueries(2,e[s],s)}}}function $y(n,e){return n[va]?n[I_][Zi]=e:n[va]=e,n[I_]=e,e}function $w(n,e,t){gp(0);const r=gs(null);try{e(n,t)}finally{gs(r)}}function DP(n,e){const t=n[Ks],r=t?t.get(_o,null):null;r&&r.handleError(e)}function zw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];IP(n.data[o],e[o],r,a,i)}}function J4(n,e){const t=mi(e,n),r=t[He];!function eq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Ln];null!==i&&null===t[Ps]&&(t[Ps]=bw(i,t[Ks])),Hw(r,t,t[cr])}function Hw(n,e,t){_p(e);try{const r=n.viewQuery;null!==r&&$w(1,r,t);const i=n.template;null!==i&&pP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wP(n,e),n.staticViewQueries&&$w(2,n.viewQuery,t);const s=n.components;null!==s&&function tq(n,e){for(let t=0;t<e.length;t++)J4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[bt]&=-5,vp()}}let SP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function mb(n,e,t){const r=Object.create(np);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>_d(r),run:()=>{if(r.dirty=!1,r.hasRun&&!R_(r))return;r.hasRun=!0;const o=Yf(r);try{r.cleanupFn(),r.cleanupFn=F_,r.fn(i)}finally{Lu(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function zy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=kr(i,a):2==s&&(r=kr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function zp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(yn(s)),gi(s)&&RP(s,r);const o=t.type;if(8&o)zp(n,e,t.child,r);else if(32&o){const a=Wb(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=dM(e,t);if(Array.isArray(a))r.push(...a);else{const c=xp(e[ur]);zp(c[He],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RP(n,e){for(let t=Kr;t<n.length;t++){const r=n[t],i=r[He].firstChild;null!==i&&zp(r[He],r,i,e)}n[Zs]!==n[Ln]&&e.push(n[Zs])}function Hy(n,e,t,r=!0){const i=e[Ec],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{MP(n,e,n.template,t)}catch(c){throw r&&DP(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function MP(n,e,t,r){const i=e[bt];if(256!=(256&i)){e[Ec].effectManager?.flush(),_p(e);try{ap(e),function Ad(n){return yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&pP(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&Rd(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Md(e,u,0,null),Ip(e,0)}if(function iq(n){for(let e=JR(n);null!==e;e=eM(e)){if(!e[gd])continue;const t=e[ba];for(let r=0;r<t.length;r++){bb(t[r])}}}(e),PP(e,2),null!==n.contentQueries&&wP(n,e),o){const u=n.contentCheckHooks;null!==u&&Rd(e,u)}else{const u=n.contentHooks;null!==u&&Md(e,u,1),Ip(e,1)}!function R4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=cP(e,Ia);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Aa(~s);else{const o=s,a=t[++i],c=t[++i];Db(a,o),r.dirty=!1;const u=Yf(r);try{c(2,e[o])}finally{Lu(r,u)}}}}finally{null===e[Ia]&&uP(e,Ia),Aa(-1)}}(n,e);const a=n.components;null!==a&&NP(e,a,0);const c=n.viewQuery;if(null!==c&&$w(2,c,r),o){const u=n.viewCheckHooks;null!==u&&Rd(e,u)}else{const u=n.viewHooks;null!==u&&Md(e,u,2),Ip(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[bt]&=-73,z_(e)}finally{vp()}}}function PP(n,e){for(let t=JR(n);null!==t;t=eM(t))for(let r=Kr;r<t.length;r++)xP(t[r],e)}function sq(n,e,t){xP(mi(e,n),t)}function xP(n,e){if(!function Eb(n){return 128==(128&n[bt])}(n))return;const t=n[He],r=n[bt];if(80&r&&0===e||1024&r||2===e)MP(t,n,t.template,n[cr]);else if(n[Nu]>0){PP(n,1);const i=t.components;null!==i&&NP(n,i,1)}}function NP(n,e,t){for(let r=0;r<e.length;r++)sq(n,e[r],t)}class Hp{get rootNodes(){const e=this._lView,t=e[He];return zp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cr]}set context(e){this._lView[cr]=e}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Vn];if(gi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Iy(e,r),dy(t,r))}this._attachedToViewContainer=!1}Zb(this._lView[He],this._lView)}onDestroy(e){!function H_(n,e){if(256==(256&n[bt]))throw new le(911,!1);null===n[ko]&&(n[ko]=[]),n[ko].push(e)}(this._lView,e)}markForCheck(){jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){Hy(this._lView[He],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qH(n,e){Op(n,e,e[wt],2,null,null)}(this._lView[He],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e}}class oq extends Hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Hy(e[He],e,e[cr],!1)}checkNoChanges(){}get context(){return null}}class OP extends Vy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=qt(e);return new qp(t,this.ngModule)}}function kP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class cq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_c(r);const i=this.injector.get(e,Aw,r);return i!==Aw||t===Aw?i:this.parentInjector.get(e,t,r)}}class qp extends jM{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=kP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return kP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ld(n){return n.map(jf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof ro?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new cq(e,s):e,a=o.get(Bp,null);if(null===a)throw new le(407,!1);const m={rendererFactory:a,sanitizer:o.get(s4,null),effectManager:o.get(SP,null),afterRenderEventManager:o.get(Nw,null)},y=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function P4(n,e,t,r){const s=r.get(iP,!1)||t===Jn.ShadowDom,o=n.selectRootElement(e,s);return function x4(n){mP(n)}(o),o}(y,r,this.componentDef.encapsulation,o):Ey(y,I,function aq(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let j=null;null!==T&&(j=bw(T,o,!0));const Y=Vw(0,null,null,1,0,null,null,null,null,null,null),oe=jy(null,Y,null,q,null,null,m,y,o,null,j);let Ae,je;_p(oe);try{const z=this.componentDef;let L,B=null;z.findHostDirectiveDefs?(L=[],B=new Map,z.findHostDirectiveDefs(z,L,B),L.push(z)):L=[z];const G=function lq(n,e){const t=n[He],r=$t;return n[r]=e,th(t,r,2,"#host",null)}(oe,T),Q=function dq(n,e,t,r,i,s,o){const a=i[He];!function hq(n,e,t,r){for(const i of n)e.mergedAttrs=fi(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(zy(e,e.mergedAttrs,!0),null!==t&&gM(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=bw(e,i[Ks]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=jy(i,gP(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&Bw(a,n,r.length-1),$y(i,m),i[n.index]=m}(G,T,z,L,oe,m,y);je=$_(Y,$t),T&&function pq(n,e,t,r){if(r)Fr(n,t,["ng-version",Cw.full]);else{const{attrs:i,classes:s}=function $f(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ki(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Fr(n,t,i),s&&s.length>0&&pM(n,t,s.join(" "))}}(y,z,T,r),void 0!==t&&function gq(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(je,this.ngContentSelectors,t),Ae=function fq(n,e,t,r,i,s){const o=Zr(),a=i[He],c=Mi(o,i);vP(a,i,o,t,null,r);for(let f=0;f<t.length;f++)xi(Pi(i,a,o.directiveStart+f,o),i);EP(a,i,o),c&&xi(c,i);const u=Pi(i,a,o.directiveStart+o.componentOffset,o);if(n[cr]=i[cr]=u,null!==s)for(const f of s)f(u,e);return kw(a,o,n),u}(Q,z,L,B,oe,[mq]),Hw(Y,oe,null)}finally{vp()}return new uq(this.componentType,Ae,Xd(je,oe),oe,je)}}class uq extends J3{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new oq(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;zw(s[He],s,i,e,t),this.previousInputValues.set(e,t),jp(mi(this._tNode.index,s))}}get injector(){return new Xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function mq(){const n=Zr();Sd(be()[He],n)}function bn(n){let e=function FP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Qi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=qy(n.inputs),o.inputTransforms=qy(n.inputTransforms),o.declaredInputs=qy(n.declaredInputs),o.outputs=qy(n.outputs);const a=i.hostBindings;a&&Eq(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&yq(n,c),u&&vq(n,u),In(n.inputs,i.inputs),In(n.declaredInputs,i.declaredInputs),In(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),In(o.inputTransforms,i.inputTransforms)),Qi(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function _q(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fi(i.hostAttrs,t=fi(t,i.hostAttrs))}}(r)}function qy(n){return n===S?{}:n===F?[]:n}function yq(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function vq(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Eq(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function BP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Gy(n){return!!qw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function qw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function $o(n,e,t){return n[e]=t}function Ni(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function zo(n,e,t,r){const i=be();return Ni(i,Rc(),e)&&(Xt(),jo(qn(),i,n,e,t,r)),zo}function rh(n,e,t,r){return Ni(n,Rc(),t)?e+gt(t)+r:Dt}function Gn(n,e,t,r,i,s,o,a){const c=be(),u=Xt(),f=n+$t,m=u.firstCreatePass?function qq(n,e,t,r,i,s,o,a,c){const u=e.consts,f=th(e,n,4,o||null,Ys(u,a));Uw(e,t,f,Ys(u,c)),Sd(e,f);const m=f.tView=Vw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,r,i,s,o):u.data[f];Xs(m,!1);const y=JP(u,c,m,n);Dd()&&wy(u,c,y,m),xi(y,c),$y(c,c[f]=bP(y,c,y,m)),Wf(m)&&Fw(u,c,m),null!=o&&Lw(c,m,a)}let JP=function ex(n,e,t,r){return mo(!0),e[wt].createComment("")};function ft(n,e,t){const r=be();return Ni(r,Rc(),e)&&ks(Xt(),qn(),r,n,e,r[wt],t,!1),ft}function Yw(n,e,t,r,i){const o=i?"class":"style";zw(n,t,e.inputs[o],o,r)}function W(n,e,t,r){const i=be(),s=Xt(),o=$t+n,a=i[wt],c=s.firstCreatePass?function Zq(n,e,t,r,i,s){const o=e.consts,c=th(e,n,2,r,Ys(o,i));return Uw(e,t,c,Ys(o,s)),null!==c.attrs&&zy(c,c.attrs,!1),null!==c.mergedAttrs&&zy(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=nx(s,i,c,a,e,n);i[o]=u;const f=Wf(c);return Xs(c,!0),gM(a,u,c),32!=(32&c.flags)&&Dd()&&wy(s,i,u,c),0===function wb(){return yt.lFrame.elementDepthCount}()&&xi(u,i),function Vu(){yt.lFrame.elementDepthCount++}(),f&&(Fw(s,i,c),kw(s,c,i)),null!==r&&Lw(i,c),W}function U(){let n=Zr();hp()?function Bu(){yt.lFrame.isParent=!1}():(n=n.parent,Xs(n,!1));const e=n;(function up(n){return yt.skipHydrationRootTNode===n})(e)&&function K_(){yt.skipHydrationRootTNode=null}(),function Tb(){yt.lFrame.elementDepthCount--}();const t=Xt();return t.firstCreatePass&&(Sd(t,n),b_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function SR(n){return 0!=(8&n.flags)}(e)&&Yw(t,e,be(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bp(n){return 0!=(16&n.flags)}(e)&&Yw(t,e,be(),e.stylesWithoutHost,!1),U}function ut(n,e,t,r){return W(n,e,t,r),U(),ut}let nx=(n,e,t,r,i,s)=>(mo(!0),Ey(r,i,function ry(){return yt.lFrame.currentNamespace}()));function e0(){return be()}function Qp(n){return!!n&&"function"==typeof n.then}function sx(n){return!!n&&"function"==typeof n.subscribe}function Nt(n,e,t,r){const i=be(),s=Xt(),o=Zr();return function ax(n,e,t,r,i,s,o){const a=Wf(r),u=n.firstCreatePass&&function CP(n){return n.cleanup||(n.cleanup=[])}(n),f=e[cr],m=function TP(n){return n[vc]||(n[vc]=[])}(e);let y=!0;if(3&r.type||o){const N=Mi(r,e),O=o?o(N):N,q=m.length,j=o?oe=>o(yn(oe[r.index])):r.index;let Y=null;if(!o&&a&&(Y=function tG(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[vc],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Y)(Y.__ngLastListenerFn__||Y).__ngNextListenerFn__=s,Y.__ngLastListenerFn__=s,y=!1;else{s=ux(r,e,f,s,!1);const oe=t.listen(O,i,s);m.push(s,oe),u&&u.push(i,j,q,q+1)}}else s=ux(r,e,f,s,!1);const I=r.outputs;let T;if(y&&null!==I&&(T=I[i])){const N=T.length;if(N)for(let O=0;O<N;O+=2){const Ae=e[T[O]][T[O+1]].subscribe(s),je=m.length;m.push(s,Ae),u&&u.push(i,r.index,je,-(je+1))}}}(s,i,i[wt],o,n,e,r),Nt}function cx(n,e,t,r){try{return Qs(6,e,t),!1!==t(r)}catch(i){return DP(n,i),!1}finally{Qs(7,e,t)}}function ux(n,e,t,r,i){return function s(o){if(o===Function)return r;jp(n.componentOffset>-1?mi(n.index,e):e);let c=cx(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=cx(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function Ho(n=1){return function Sb(n){return(yt.lFrame.contextLView=function Rb(n,e){for(;n>0;)e=e[Oo],n--;return e}(n,yt.lFrame.contextLView))[cr]}(n)}function yo(n,e,t){return qo(n,"",e,"",t),yo}function qo(n,e,t,r,i){const s=be(),o=rh(s,e,t,r);return o!==Dt&&ks(Xt(),qn(),s,n,o,s[wt],i,!1),qo}function Xy(n,e){return n<<17|e<<2}function Lc(n){return n>>17&32767}function t0(n){return 2|n}function Yu(n){return(131068&n)>>2}function n0(n,e){return-131069&n|e<<2}function r0(n){return 1|n}function yx(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Lc(s):Yu(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];cG(n[a],e)&&(c=!0,n[a+1]=r?r0(f):t0(f)),a=r?Lc(f):Yu(f)}c&&(n[t+1]=r?t0(s):r0(s))}function cG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&$d(n,e)>=0}function hh(n,e){return function vo(n,e,t,r){const i=be(),s=Xt(),o=function eo(n){const e=yt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Dx(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[_i()],o=function Ax(n,e){return e>=n.expandoStartIndex}(n,t);(function Px(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function _G(n,e,t,r){const i=function pp(n){const e=yt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Yp(t=s0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=s0(i,n,e,t,r),null===s){let c=function yG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Yu(r))return n[Lc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=s0(null,n,e,c[1],r),c=Yp(c,e.attrs,r),function vG(n,e,t,r){n[Lc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function EG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Yp(r,n[s].hostAttrs,t);return Yp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function oG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lc(o),c=Yu(o);n[r]=t;let f,u=!1;if(Array.isArray(t)?(f=t[1],(null===f||$d(t,f)>0)&&(u=!0)):f=t,i)if(0!==c){const y=Lc(n[a+1]);n[r+1]=Xy(y,a),0!==y&&(n[y+1]=n0(n[y+1],r)),n[a+1]=function iG(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Xy(a,0),0!==a&&(n[a+1]=n0(n[a+1],r)),a=r;else n[r+1]=Xy(c,0),0===a?a=r:n[c+1]=n0(n[c+1],r),c=r;u&&(n[r+1]=t0(n[r+1])),yx(n,f,r,!0),yx(n,f,r,!1),function aG(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&$d(s,e)>=0&&(t[r+1]=r0(t[r+1]))}(e,f,n,r,s),o=Xy(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Dt&&Ni(i,o,e)&&function Rx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],f=function sG(n){return 1==(1&n)}(u)?Mx(c,e,t,i,Yu(u),o):void 0;Jy(f)||(Jy(s)||function rG(n){return 2==(2&n)}(u)&&(s=Mx(c,null,t,i,a,o)),function t3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Oc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Oc.Important),n.setStyle(t,r,i,s))}}(r,o,Sc(_i(),t),i,s))}(s,s.data[_i()],i,i[wt],n,i[o+1]=function TG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=it(Ns(n)))),n}(e,t),r,o)}(n,e,null,!0),hh}function s0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Yp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Yp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xs(n,o,!!t||e[++s]))}return void 0===n?null:n}function Mx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=null===f;let y=t[i+1];y===Dt&&(y=m?F:void 0);let I=m?Vb(y,r):f===r?y:void 0;if(u&&!Jy(I)&&(I=Vb(c,r)),Jy(I)&&(a=I,o))return a;const T=n[i+1];i=o?Lc(T):Yu(T)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Vb(c,r))}return a}function Jy(n){return void 0!==n}function ne(n,e=""){const t=be(),r=Xt(),i=n+$t,s=r.firstCreatePass?th(r,i,1,e,null):r.data[i],o=xx(r,t,s,e,n);t[i]=o,Dd()&&wy(r,t,o,s),Xs(s,!1)}let xx=(n,e,t,r,i)=>(mo(!0),function vy(n,e){return n.createText(e)}(e[wt],r));function an(n){return Pa("",n,""),an}function Pa(n,e,t){const r=be(),i=rh(r,n,e,t);return i!==Dt&&function Ma(n,e,t){const r=Sc(e,n);!function nM(n,e,t){n.setValue(e,t)}(n[wt],r,t)}(r,_i(),i),Pa}const Xu=void 0;var GG=["en",[["a","p"],["AM","PM"],Xu],[["AM","PM"],Xu,Xu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xu,"{1} 'at' {0}",Xu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qG(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let fh={};function Yi(n){const e=function WG(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=Jx(e);if(t)return t;const r=e.split("-")[0];if(t=Jx(r),t)return t;if("en"===r)return GG;throw new le(701,!1)}function Jx(n){return n in fh||(fh[n]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[n]),fh[n]}var Un=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Un||{});const ph="en-US";let e1=ph;function c0(n,e,t,r,i){if(n=lt(n),Array.isArray(n))for(let s=0;s<n.length;s++)c0(n[s],e,t,r,i);else{const s=Xt(),o=be(),a=Zr();let c=Zu(n)?n:lt(n.provide);const u=kM(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Zu(n)||!n.multi){const I=new zu(u,i,_e),T=l0(c,e,i?f:f+y,m);-1===T?(C(l(a,o),s,c),u0(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[T]=I,o[T]=I)}else{const I=l0(c,e,f+y,m),T=l0(c,e,f,f+y),O=T>=0&&t[T];if(i&&!O||!i&&!(I>=0&&t[I])){C(l(a,o),s,c);const q=function q6(n,e,t,r,i){const s=new zu(n,t,_e);return s.multi=[],s.index=e,s.componentProviders=0,A1(s,i,r&&!t),s}(i?H6:z6,t.length,i,r,u);!i&&O&&(t[T].providerFactory=q),u0(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),o.push(q)}else u0(s,n,I>-1?I:T,A1(t[i?T:I],u,!i&&r));!i&&r&&O&&t[T].componentProviders++}}}function u0(n,e,t,r){const i=Zu(e),s=function F3(n){return!!n.useClass}(e);if(i||s){const c=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function A1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function l0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function z6(n,e,t,r){return d0(this.multi,[])}function H6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Pi(t,t[He],this.providerFactory.index,r);s=a.slice(0,o),d0(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],d0(i,s);return s}function d0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function er(n,e=[]){return t=>{t.providersResolver=(r,i)=>function $6(n,e,t){const r=Xt();if(r.firstCreatePass){const i=Qi(n);c0(t,r.data,r.blueprint,i,!0),c0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ju{}class D1{}class h0 extends Ju{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new OP(this);const i=pi(e);this._bootstrapComponents=Ra(i.bootstrap),this._r3Injector=WM(e,t,[{provide:Ju,useValue:this},{provide:Vy,useValue:this.componentFactoryResolver},...r],it(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class f0 extends D1{constructor(e){super(),this.moduleType=e}create(e){return new h0(this.moduleType,e,[])}}class S1 extends Ju{constructor(e){super(),this.componentFactoryResolver=new OP(this),this.instance=null;const t=new Kd([...e.providers,{provide:Ju,useValue:this},{provide:Vy,useValue:this.componentFactoryResolver}],e.parent||Py(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function p0(n,e,t=null){return new S1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let K6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=PM(0,t.type),i=r.length>0?p0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(fe(ro))})}return n})();function R1(n){n.getStandaloneInjector=e=>e.get(K6).getOrCreateStandaloneInjector(n)}function rg(n,e){const t=n[e];return t===Dt?void 0:t}function V1(n,e,t,r,i,s){const o=e+t;return Ni(n,o,i)?$o(n,o+1,s?r.call(s,i):r(i)):rg(n,o+1)}function U1(n,e,t,r,i,s,o){const a=e+t;return function Qu(n,e,t,r){const i=Ni(n,e,t);return Ni(n,e+1,r)||i}(n,a,i,s)?$o(n,a+2,o?r.call(o,i,s):r(i,s)):rg(n,a+2)}function m0(n,e){const t=Xt();let r;const i=n+$t;t.firstCreatePass?(r=function dW(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=wa(r.type)),a=si(_e);try{const c=Od(!1),u=s();return Od(c),function Kq(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,be(),i,u),u}finally{si(a)}}function ig(n,e){return n[He].data[e].pure}function _W(n,e,t,r=!0){const i=e[He];if(function WH(n,e,t,r){const i=Kr+r,s=t.length;r>0&&(t[i-1][Zi]=e),r<s-Kr?(e[Zi]=t[i],xR(t,Kr+r,e)):(t.push(e),e[Zi]=null),e[Vn]=t;const o=e[Ea];null!==o&&t!==o&&function KH(n,e){const t=n[ba];e[ur]!==e[Vn][Vn][ur]&&(n[gd]=!0),null===t?n[ba]=[e]:t.push(e)}(o,e);const a=e[ps];null!==a&&a.insertView(n),e[bt]|=128}(i,e,n,t),r){const s=Jb(t,n),o=e[wt],a=by(o,n[Zs]);null!==a&&function HH(n,e,t,r,i,s){r[Ln]=i,r[Br]=e,Op(n,r,t,1,i,s)}(i,n[Br],o,e,a,s)}}Symbol;let xa=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=EW}return n})();const yW=xa,vW=class extends yW{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function mW(n,e,t,r){const i=e.tView,a=jy(n,i,t,4096&n[bt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ea]=n[e.index];const u=n[ps];return null!==u&&(a[ps]=u.createEmbeddedView(i)),Hw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Hp(i)}};function EW(){return function iv(n,e){return 4&n.type?new vW(e,n,Xd(n,e)):null}(Zr(),be())}let Io=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=AW}return n})();function AW(){return function Y1(n,e){let t;const r=e[n.index];return gi(r)?t=r:(t=bP(r,e,null,n),e[n.index]=t,$y(e,t)),X1(t,e,n,r),new Z1(t,n,e)}(Zr(),be())}const DW=Io,Z1=class extends DW{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Xr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(Nd(e)){const t=qu(e,this._hostLView),r=Mc(e);return new Xr(t[He].data[r+8],t)}return new Xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Q1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Kr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Dp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}const c=o?e:new qp(qt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const O=(o?u:this.parentInjector).get(ro,null);O&&(s=O)}qt(c.componentType??{});const I=c.create(u,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Ib(n){return gi(n[Vn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[Vn],f=new Z1(u,u[Br],u[Vn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return _W(a,i,o,!r),e.attachToViewContainerRef(),xR(y0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Q1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Iy(this._lContainer,t);r&&(dy(y0(this._lContainer),t),Zb(r[He],r))}detach(e){const t=this._adjustIndex(e,-1),r=Iy(this._lContainer,t);return r&&null!=dy(y0(this._lContainer),t)?new Hp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Q1(n){return n[8]}function y0(n){return n[8]||(n[8]=[])}let X1=function J1(n,e,t,r){if(n[Zs])return;let i;i=8&t.type?yn(r):function SW(n,e){const t=n[wt],r=t.createComment(""),i=Mi(e,n);return Wu(t,by(t,i),r,function XH(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Zs]=i};const R0=new Ee("Application Initializer");let M0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=qe(R0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Qp(s))t.push(s);else if(sx(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ko=new Ee("LocaleId",{providedIn:"root",factory:()=>qe(Ko,Ct.Optional|Ct.SkipSelf)||function s9(){return typeof $localize<"u"&&$localize.locale||ph}()});let CN=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class c9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let AN=(()=>{class n{compileModuleSync(t){return new f0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ra(pi(t).declarations).reduce((o,a)=>{const c=qt(a);return c&&o.push(new qp(c)),o},[]);return new c9(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const MN=new Ee(""),cv=new Ee("");let k0,N0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k0||(function M9(n){k0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Gt),fe(O0),fe(cv))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),O0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return k0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Vc=null;const PN=new Ee("AllowMultipleToken"),F0=new Ee("PlatformDestroyListeners"),L0=new Ee("appBootstrapListener");class NN{constructor(e,t){this.name=e,this.token=t}}function kN(n,e,t=[]){const r=`Platform: ${e}`,i=new Ee(r);return(s=[])=>{let o=V0();if(!o||o.injector.get(PN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function N9(n){if(Vc&&!Vc.get(PN,!1))throw new le(400,!1);(function xN(){!function db(n){vd=n}(()=>{throw new le(600,!1)})})(),Vc=n;const e=n.get(LN);(function ON(n){n.get(FM,null)?.forEach(t=>t())})(n)}(function FN(n=[],e){return vi.create({name:e,providers:[{provide:lw,useValue:"platform"},{provide:F0,useValue:new Set([()=>Vc=null])},...n]})}(a,r))}return function k9(n){const e=V0();if(!e)throw new le(401,!1);return e}()}}function V0(){return Vc?.get(LN)??null}let LN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function F9(n="zone.js",e){return"noop"===n?new _4:"zone.js"===n?new Gt(e):n}(r?.ngZone,function VN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function W6(n,e,t){return new h0(n,e,t)}(t.moduleType,this.injector,function zN(n){return[{provide:Gt,useFactory:n},{provide:Lp,multi:!0,useFactory:()=>{const e=qe(V9,{optional:!0});return()=>e.initialize()}},{provide:$N,useFactory:L9},{provide:XM,useFactory:JM}]}(()=>i)),o=s.injector.get(_o,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{uv(this._modules,s),a.unsubscribe()})}),function UN(n,e,t){try{const r=t();return Qp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(M0);return a.runInitializers(),a.donePromise.then(()=>(function t1(n){Si(n,"Expected localeId to be defined"),"string"==typeof n&&(e1=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ko,ph)||ph),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=BN({},r);return function P9(n,e,t){const r=new f0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(el);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new le(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(F0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(fe(vi))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function BN(n,e){return Array.isArray(e)?e.reduce(BN,n):{...n,...e}}let el=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe($N),this.zoneIsStable=qe(XM),this.componentTypes=[],this.components=[],this.isStable=qe(CN).hasPendingTasks.pipe($e(t=>t?k(!1):this.zoneIsStable),pt(),de()),this._injector=qe(ro)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof jM;if(!this._injector.get(M0).done)throw!i&&function No(n){const e=qt(n)||Sr(n)||Ur(n);return null!==e&&e.standalone}(t),new le(405,!1);let o;o=i?t:this._injector.get(Vy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function x9(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ju),u=o.create(vi.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(MN,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),uv(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;uv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(L0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $N=new Ee("",{providedIn:"root",factory:()=>qe(_o).handleError.bind(void 0)});function L9(){const n=qe(Gt),e=qe(_o);return t=>n.runOutsideAngular(()=>e.handleError(t))}let V9=(()=>{class n{constructor(){this.zone=qe(Gt),this.applicationRef=qe(el)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let lv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=B9}return n})();function B9(n){return function j9(n,e,t){if(bc(n)&&!t){const r=mi(n.index,e);return new Hp(r,r)}return 47&n.type?new Hp(e[ur],e):null}(Zr(),be(),16==(16&n))}class KN{constructor(){}supports(e){return Gy(e)}create(e){return new W9(e)}}const G9=(n,e)=>e;class W9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||G9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<QN(r,i,s)?t:r,a=QN(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,f=c-i;if(u!=f){for(let y=0;y<u;y++){const I=y<s.length?s[y]:s[y]=0,T=I+y;f<=T&&T<u&&(s[y]=I+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Gy(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Dq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new K9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ZN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class K9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Z9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class ZN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Z9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class YN{constructor(){}supports(e){return e instanceof Map||qw(e)}create(){return new Q9}}class Q9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||qw(e)))throw new le(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Y9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Y9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XN(){return new fv([new KN])}let fv=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:XN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XN()),deps:[[n,new Rp,new $r]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new le(901,!1)}}return n})();function JN(){return new ag([new YN])}let ag=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:JN});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JN()),deps:[[n,new Rp,new $r]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new le(901,!1)}}return n})();const e5=kN(null,"core",[]);let t5=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(fe(el))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({})}return n})();function _h(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let H0=null;function Uc(){return H0}class g5{}const gr=new Ee("DocumentToken");let q0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(_5)},providedIn:"platform"})}return n})();const m5=new Ee("Location Initialized");let _5=(()=>{class n extends q0{constructor(){super(),this._doc=qe(gr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Uc().getBaseHref(this._doc)}onPopState(t){const r=Uc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Uc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function G0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function cO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Na(n){return n&&"?"!==n[0]?"?"+n:n}let nl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(lO)},providedIn:"root"})}return n})();const uO=new Ee("appBaseHref");let lO=(()=>{class n extends nl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??qe(gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Na(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Na(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Na(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(q0),fe(uO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y5=(()=>{class n extends nl{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Na(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Na(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(q0),fe(uO,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),W0=(()=>{class n{constructor(t){this._subject=new pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function I5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(cO(dO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Na(r))}normalize(t){return n.stripTrailingSlash(function E5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,dO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Na(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Na(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Na;static#t=this.joinWithSlash=G0;static#n=this.stripTrailingSlash=cO;static#r=this.\u0275fac=function(r){return new(r||n)(fe(nl))};static#i=this.\u0275prov=Le({token:n,factory:function(){return function v5(){return new W0(fe(nl))}()},providedIn:"root"})}return n})();function dO(n){return n.replace(/\/index.html$/,"")}var Ji=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ji||{}),Nn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Nn||{}),Fs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Fs||{}),Rr=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Rr||{});function mv(n,e){return oo(Yi(n)[Un.DateFormat],e)}function _v(n,e){return oo(Yi(n)[Un.TimeFormat],e)}function yv(n,e){return oo(Yi(n)[Un.DateTimeFormat],e)}function so(n,e){const t=Yi(n),r=t[Un.NumberSymbols][e];if(typeof r>"u"){if(e===Rr.CurrencyDecimal)return t[Un.NumberSymbols][Rr.Decimal];if(e===Rr.CurrencyGroup)return t[Un.NumberSymbols][Rr.Group]}return r}function fO(n){if(!n[Un.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Un.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function oo(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Z0(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const k5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,cg={},F5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Oa=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Oa||{}),fn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(fn||{}),pn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(pn||{});function L5(n,e,t,r){let i=function G5(n){if(mO(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return vv(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(k5))return function W5(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,u),e}(r)}const e=new Date(n);if(!mO(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ka(t,e)||e;let a,o=[];for(;e;){if(a=F5.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let c=i.getTimezoneOffset();r&&(c=gO(r,c),i=function q5(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function H5(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(gO(e,i)-i))}(i,r,!0));let u="";return o.forEach(f=>{const m=function z5(n){if(Y0[n])return Y0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bn(pn.Eras,Nn.Abbreviated);break;case"GGGG":e=Bn(pn.Eras,Nn.Wide);break;case"GGGGG":e=Bn(pn.Eras,Nn.Narrow);break;case"y":e=zr(fn.FullYear,1,0,!1,!0);break;case"yy":e=zr(fn.FullYear,2,0,!0,!0);break;case"yyy":e=zr(fn.FullYear,3,0,!1,!0);break;case"yyyy":e=zr(fn.FullYear,4,0,!1,!0);break;case"Y":e=wv(1);break;case"YY":e=wv(2,!0);break;case"YYY":e=wv(3);break;case"YYYY":e=wv(4);break;case"M":case"L":e=zr(fn.Month,1,1);break;case"MM":case"LL":e=zr(fn.Month,2,1);break;case"MMM":e=Bn(pn.Months,Nn.Abbreviated);break;case"MMMM":e=Bn(pn.Months,Nn.Wide);break;case"MMMMM":e=Bn(pn.Months,Nn.Narrow);break;case"LLL":e=Bn(pn.Months,Nn.Abbreviated,Ji.Standalone);break;case"LLLL":e=Bn(pn.Months,Nn.Wide,Ji.Standalone);break;case"LLLLL":e=Bn(pn.Months,Nn.Narrow,Ji.Standalone);break;case"w":e=Q0(1);break;case"ww":e=Q0(2);break;case"W":e=Q0(1,!0);break;case"d":e=zr(fn.Date,1);break;case"dd":e=zr(fn.Date,2);break;case"c":case"cc":e=zr(fn.Day,1);break;case"ccc":e=Bn(pn.Days,Nn.Abbreviated,Ji.Standalone);break;case"cccc":e=Bn(pn.Days,Nn.Wide,Ji.Standalone);break;case"ccccc":e=Bn(pn.Days,Nn.Narrow,Ji.Standalone);break;case"cccccc":e=Bn(pn.Days,Nn.Short,Ji.Standalone);break;case"E":case"EE":case"EEE":e=Bn(pn.Days,Nn.Abbreviated);break;case"EEEE":e=Bn(pn.Days,Nn.Wide);break;case"EEEEE":e=Bn(pn.Days,Nn.Narrow);break;case"EEEEEE":e=Bn(pn.Days,Nn.Short);break;case"a":case"aa":case"aaa":e=Bn(pn.DayPeriods,Nn.Abbreviated);break;case"aaaa":e=Bn(pn.DayPeriods,Nn.Wide);break;case"aaaaa":e=Bn(pn.DayPeriods,Nn.Narrow);break;case"b":case"bb":case"bbb":e=Bn(pn.DayPeriods,Nn.Abbreviated,Ji.Standalone,!0);break;case"bbbb":e=Bn(pn.DayPeriods,Nn.Wide,Ji.Standalone,!0);break;case"bbbbb":e=Bn(pn.DayPeriods,Nn.Narrow,Ji.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bn(pn.DayPeriods,Nn.Abbreviated,Ji.Format,!0);break;case"BBBB":e=Bn(pn.DayPeriods,Nn.Wide,Ji.Format,!0);break;case"BBBBB":e=Bn(pn.DayPeriods,Nn.Narrow,Ji.Format,!0);break;case"h":e=zr(fn.Hours,1,-12);break;case"hh":e=zr(fn.Hours,2,-12);break;case"H":e=zr(fn.Hours,1);break;case"HH":e=zr(fn.Hours,2);break;case"m":e=zr(fn.Minutes,1);break;case"mm":e=zr(fn.Minutes,2);break;case"s":e=zr(fn.Seconds,1);break;case"ss":e=zr(fn.Seconds,2);break;case"S":e=zr(fn.FractionalSeconds,1);break;case"SS":e=zr(fn.FractionalSeconds,2);break;case"SSS":e=zr(fn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Iv(Oa.Short);break;case"ZZZZZ":e=Iv(Oa.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Iv(Oa.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Iv(Oa.Long);break;default:return null}return Y0[n]=e,e}(f);u+=m?m(i,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function vv(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ka(n,e){const t=function w5(n){return Yi(n)[Un.LocaleId]}(n);if(cg[t]=cg[t]||{},cg[t][e])return cg[t][e];let r="";switch(e){case"shortDate":r=mv(n,Fs.Short);break;case"mediumDate":r=mv(n,Fs.Medium);break;case"longDate":r=mv(n,Fs.Long);break;case"fullDate":r=mv(n,Fs.Full);break;case"shortTime":r=_v(n,Fs.Short);break;case"mediumTime":r=_v(n,Fs.Medium);break;case"longTime":r=_v(n,Fs.Long);break;case"fullTime":r=_v(n,Fs.Full);break;case"short":const i=ka(n,"shortTime"),s=ka(n,"shortDate");r=Ev(yv(n,Fs.Short),[i,s]);break;case"medium":const o=ka(n,"mediumTime"),a=ka(n,"mediumDate");r=Ev(yv(n,Fs.Medium),[o,a]);break;case"long":const c=ka(n,"longTime"),u=ka(n,"longDate");r=Ev(yv(n,Fs.Long),[c,u]);break;case"full":const f=ka(n,"fullTime"),m=ka(n,"fullDate");r=Ev(yv(n,Fs.Full),[f,m])}return r&&(cg[t][e]=r),r}function Ev(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function bo(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function zr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function U5(n,e){switch(n){case fn.FullYear:return e.getFullYear();case fn.Month:return e.getMonth();case fn.Date:return e.getDate();case fn.Hours:return e.getHours();case fn.Minutes:return e.getMinutes();case fn.Seconds:return e.getSeconds();case fn.FractionalSeconds:return e.getMilliseconds();case fn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===fn.Hours)0===a&&-12===t&&(a=12);else if(n===fn.FractionalSeconds)return function V5(n,e){return bo(n,3).substring(0,e)}(a,e);const c=so(o,Rr.MinusSign);return bo(a,e,c,r,i)}}function Bn(n,e,t=Ji.Format,r=!1){return function(i,s){return function B5(n,e,t,r,i,s){switch(t){case pn.Months:return function A5(n,e,t){const r=Yi(n),s=oo([r[Un.MonthsFormat],r[Un.MonthsStandalone]],e);return oo(s,t)}(e,i,r)[n.getMonth()];case pn.Days:return function C5(n,e,t){const r=Yi(n),s=oo([r[Un.DaysFormat],r[Un.DaysStandalone]],e);return oo(s,t)}(e,i,r)[n.getDay()];case pn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const u=function M5(n){const e=Yi(n);return fO(e),(e[Un.ExtraData][2]||[]).map(r=>"string"==typeof r?Z0(r):[Z0(r[0]),Z0(r[1])])}(e),f=function P5(n,e,t){const r=Yi(n);fO(r);const s=oo([r[Un.ExtraData][0],r[Un.ExtraData][1]],e)||[];return oo(s,t)||[]}(e,i,r),m=u.findIndex(y=>{if(Array.isArray(y)){const[I,T]=y,N=o>=I.hours&&a>=I.minutes,O=o<T.hours||o===T.hours&&a<T.minutes;if(I.hours<T.hours){if(N&&O)return!0}else if(N||O)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(-1!==m)return f[m]}return function T5(n,e,t){const r=Yi(n),s=oo([r[Un.DayPeriodsFormat],r[Un.DayPeriodsStandalone]],e);return oo(s,t)}(e,i,r)[o<12?0:1];case pn.Eras:return function D5(n,e){return oo(Yi(n)[Un.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Iv(n){return function(e,t,r){const i=-1*r,s=so(t,Rr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Oa.Short:return(i>=0?"+":"")+bo(o,2,s)+bo(Math.abs(i%60),2,s);case Oa.ShortGMT:return"GMT"+(i>=0?"+":"")+bo(o,1,s);case Oa.Long:return"GMT"+(i>=0?"+":"")+bo(o,2,s)+":"+bo(Math.abs(i%60),2,s);case Oa.Extended:return 0===r?"Z":(i>=0?"+":"")+bo(o,2,s)+":"+bo(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const j5=0,bv=4;function pO(n){return vv(n.getFullYear(),n.getMonth(),n.getDate()+(bv-n.getDay()))}function Q0(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=pO(t),o=function $5(n){const e=vv(n,j5,1).getDay();return vv(n,0,1+(e<=bv?bv:bv+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return bo(i,n,so(r,Rr.MinusSign))}}function wv(n,e=!1){return function(t,r){return bo(pO(t).getFullYear(),n,so(r,Rr.MinusSign),e)}}const Y0={};function gO(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function mO(n){return n instanceof Date&&!isNaN(n.valueOf())}const rT=/\s+/,EO=[];let IO=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=EO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(rT):EO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(rT):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(rT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(fv),_e(ag),_e(vs),_e(Sa))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class a8{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new a8(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),wO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{wO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Io),_e(xa),_e(fv))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function wO(n,e){n.context.$implicit=e.item}let lg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new c8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){TO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){TO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Io),_e(xa))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class c8{constructor(){this.$implicit=null,this.ngIf=null}}function TO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${it(e)}'.`)}const I8=new Ee("DATE_PIPE_DEFAULT_TIMEZONE"),b8=new Ee("DATE_PIPE_DEFAULT_OPTIONS");let AO=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return L5(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function wo(n,e){return new le(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Ko,16),_e(I8,24),_e(b8,24))};static#t=this.\u0275pipe=Vr({name:"date",type:n,pure:!0,standalone:!0})}return n})(),DO=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Vr({name:"json",type:n,pure:!1,standalone:!0})}return n})(),RO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({})}return n})();const MO="browser";function PO(n){return n===MO}function Cv(n){return"server"===n}let O8=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new k8(fe(gr),window)})}return n})();class k8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function F8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class o7 extends g5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class lT extends o7{static makeCurrent(){!function p5(n){H0||(H0=n)}(new lT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function a7(){return hg=hg||document.querySelector("base"),hg?hg.getAttribute("href"):null}();return null==t?null:function c7(n){Sv=Sv||document.createElement("a"),Sv.setAttribute("href",n);const e=Sv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function s8(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Sv,hg=null,l7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const dT=new Ee("EventManagerPlugins");let FO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new le(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(fe(dT),fe(Gt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class LO{constructor(e){this._doc=e}}const hT="ng-app-id";let VO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${hT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(hT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(hT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gr),fe(xy),fe(pw,8),fe(Os))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const fT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pT=/%COMP%/g,p7=new Ee("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function BO(n,e){return e.map(t=>t.replace(pT,n))}let gT=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Cv(a),this.defaultRenderer=new mT(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jn.ShadowDom&&(r={...r,encapsulation:Jn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof $O?i.applyToHost(t):i instanceof _T&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Jn.Emulated:s=new $O(c,u,r,this.appId,f,o,a,m);break;case Jn.ShadowDom:return new y7(c,u,t,r,o,a,this.nonce,m);default:s=new _T(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(FO),fe(VO),fe(xy),fe(p7),fe(gr),fe(Os),fe(Gt),fe(pw))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class mT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(fT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(jO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new le(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=fT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=fT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Oc.DashCase|Oc.Important)?e.style.setProperty(t,r,i&Oc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Oc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Uc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function jO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class y7 extends mT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=BO(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _T extends mT{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?BO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $O extends _T{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function g7(n){return"_ngcontent-%COMP%".replace(pT,n)}(u),this.hostAttr=function m7(n){return"_nghost-%COMP%".replace(pT,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let v7=(()=>{class n extends LO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gr))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const zO=["alt","control","meta","shift"],E7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},I7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let b7=(()=>{class n extends LO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Uc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),zO.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=E7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zO.forEach(o=>{o!==i&&(0,I7[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gr))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const A7=kN(e5,"browser",[{provide:Os,useValue:MO},{provide:FM,useValue:function w7(){lT.makeCurrent()},multi:!0},{provide:gr,useFactory:function C7(){return function a3(n){nw=n}(document),document},deps:[]}]),D7=new Ee(""),GO=[{provide:cv,useClass:class u7{addToWindow(e){sn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new le(5103,!1);return s},sn.getAllAngularTestabilities=()=>e.getAllTestabilities(),sn.getAllAngularRootElements=()=>e.getAllRootElements(),sn.frameworkStabilizers||(sn.frameworkStabilizers=[]),sn.frameworkStabilizers.push(r=>{const i=sn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Uc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:MN,useClass:N0,deps:[Gt,O0,cv]},{provide:N0,useClass:N0,deps:[Gt,O0,cv]}],WO=[{provide:lw,useValue:"root"},{provide:_o,useFactory:function T7(){return new _o},deps:[]},{provide:dT,useClass:v7,multi:!0,deps:[gr,Gt,Os]},{provide:dT,useClass:b7,multi:!0,deps:[gr]},gT,VO,FO,{provide:Bp,useExisting:gT},{provide:class L8{},useClass:l7,deps:[]},[]];let ET,KO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(D7,12))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({providers:[...WO,...GO],imports:[RO,t5]})}return n})(),ZO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gr))};static#t=this.\u0275prov=Le({token:n,factory:function(r){let i=null;return i=r?new r:function R7(){return new ZO(fe(gr))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;try{ET=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ET=!1}let fg,ek=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?PO(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ET)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Os))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rv(n){return function O7(){if(null==fg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fg=!0}))}finally{fg=fg||!1}return fg}()?n:!!n.capture}function nk(n){return Array.isArray(n)?n:[n]}const{isArray:H7}=Array,{getPrototypeOf:q7,prototype:G7,keys:W7}=Object;function ik(n){if(1===n.length){const e=n[0];if(H7(e))return{args:e,keys:null};if(function K7(n){return n&&"object"==typeof n&&q7(n)===G7}(e)){const t=W7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Z7}=Array;function sk(n){return Pe(e=>function Q7(n,e){return Z7(e)?n(...e):n(e)}(n,e))}function ok(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pv(...n){const e=ls(n),t=Di(n),{args:r,keys:i}=ik(n);if(0===r.length)return b([],e);const s=new Et(function Y7(n,e,t=xt){return r=>{ak(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)ak(e,()=>{const u=b(n[c],e);let f=!1;u.subscribe(Ne(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ok(i,o):xt));return t?s.pipe(sk(t)):s}function ak(n,e,t){n?hr(t,n,e):e()}function xv(...n){return function X7(){return Nr(1)}()(b(n,ls(n)))}function il(n){return n<=0?()=>kn:ae((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bs(n,e){return ae((t,r)=>{let i=0;t.subscribe(Ne(r,s=>n.call(e,s,i++)&&r.next(s)))})}class eK extends Rt{constructor(e,t){super()}schedule(e,t=0){return this}}const Nv={setInterval(n,e,...t){const{delegate:r}=Nv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Nv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class ck extends eK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Nv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Nv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const bT={now:()=>(bT.delegate||Date).now(),delegate:void 0};class pg{constructor(e,t=pg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}pg.now=bT.now;class uk extends pg{constructor(e,t=pg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const wT=new uk(ck);function lk(n,e=wT){return ae((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Ne(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function gg(...n){const e=ls(n);return ae((t,r)=>{(e?xv(n,t,e):xv(n,t)).subscribe(r)})}function dk(n){return ae((e,t)=>{Lt(n).subscribe(Ne(t,()=>t.complete(),Ye)),!t.closed&&e.subscribe(t)})}const hk=new Set;let sl,tK=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rK}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function nK(n,e){if(!hk.has(n))try{sl||(sl=document.createElement("style"),e&&(sl.nonce=e),sl.setAttribute("type","text/css"),document.head.appendChild(sl)),sl.sheet&&(sl.sheet.insertRule(`@media ${n} {body{ }}`,0),hk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ek),fe(pw,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rK(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let iK=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return fk(nk(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Pv(fk(nk(t)).map(o=>this._registerQuery(o).observable));return s=xv(s.pipe(il(1)),s.pipe(function J7(n){return bs((e,t)=>n<=t)}(1),lk(0))),s.pipe(Pe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Et(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(gg(r),Pe(({matches:o})=>({query:t,matches:o})),dk(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(fe(tK),fe(Gt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const _k="cdk-high-contrast-black-on-white",yk="cdk-high-contrast-white-on-black",TT="cdk-high-contrast-active";let gK=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=qe(iK).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(TT,_k,yk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(TT,_k):2===r&&t.add(TT,yk)}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ek),fe(gr))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({})}return n})();const vK=new Ee("mat-sanity-checks",{providedIn:"root",factory:function yK(){return!0}});let jc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function L7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gK),fe(vK,8),fe(gr))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[vk,vk]})}return n})(),bk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[jc,jc]})}return n})();const wk=Rv({passive:!0,capture:!0});class bK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function F7(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,wk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,wk)))}}class CT{static#e=this._eventManager=new bK;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rk(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Tk,...r.animation},o=r.radius||function TK(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=r.color&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);const m=window.getComputedStyle(f),I=m.transitionDuration,T="none"===m.transitionProperty||"0s"===I||"0s, 0s"===I||0===i.width&&0===i.height,N=new IK(this,f,r,T);f.style.transform="scale3d(1, 1, 1)",N.state=0,r.persistent||(this._mostRecentTransientRipple=N);return!T&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const q=()=>this._finishRippleTransition(N),j=()=>this._destroyRipple(N);f.addEventListener("transitionend",q),f.addEventListener("transitioncancel",j)}),this._activeRipples.set(N,null),(T||!u)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...Tk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=rk(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Ak.forEach(r=>{CT._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Dk.forEach(t=>{this._triggerElement.addEventListener(t,this,Ck)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function hK(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function fK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Ak.forEach(t=>CT._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Dk.forEach(t=>e.removeEventListener(t,this,Ck)))}}let PK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[jc,RO,jc]})}return n})();function Eh(n,e){const t=P(n)?n:()=>n,r=i=>i.error(t());return new Et(e?i=>e.schedule(r,0,i):r)}function AT(...n){const e=Di(n),{args:t,keys:r}=ik(n),i=new Et(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let f=0;f<o;f++){let m=!1;Lt(t[f]).subscribe(Ne(s,y=>{m||(m=!0,u--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(u||s.next(r?ok(r,a):a),s.complete())}))}});return e?i.pipe(sk(e)):i}function Hr(n,e,t){const r=P(n)||e||t?{next:n,error:e,complete:t}:n;return r?ae((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ne(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):xt}function $c(n){return ae((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ne(t,void 0,void 0,o=>{s=Lt(n(o,$c(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _g(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ih(n,e){return P(e)?tn(n,e,1):tn(n,1)}let lZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[jc,jc]})}return n})(),fZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[bk,jc,bk,jc]})}return n})();const Uv=Re(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Gk(n){return new Et(e=>{Lt(n()).subscribe(e)})}function OT(){return ae((n,e)=>{let t=null;n._refCount++;const r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Wk extends Et{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ve(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rt;const t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rt.EMPTY)}return e}refCount(){return OT()(this)}}function Bv(n){return ae((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Kk(n=gZ){return ae((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gZ(){return new Uv}function qc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?bs((i,s)=>n(i,s,r)):xt,il(1),t?Bv(e):Kk(()=>new Uv))}function jv(n,e){return ae(function mZ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Ne(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function kT(n){return n<=0?()=>kn:ae((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const Ot="primary",Ig=Symbol("RouteTitle");class vZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bh(n){return new vZ(n)}function EZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Zk(n[i],e[i]))return!1;return!0}function Zk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Qk(n){return n.length>0?n[n.length-1]:null}function Gc(n){return function pZ(n){return!!n&&(n instanceof Et||P(n.lift)&&P(n.subscribe))}(n)?n:Qp(n)?b(Promise.resolve(n)):k(n)}const bZ={exact:function Jk(n,e,t){if(!ul(n.segments,e.segments)||!$v(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Jk(n.children[r],e.children[r],t))return!1;return!0},subset:eF},Yk={exact:function wZ(n,e){return Zo(n,e)},subset:function TZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Zk(n[t],e[t]))},ignored:()=>!0};function Xk(n,e,t){return bZ[t.paths](n.root,e.root,t.matrixParams)&&Yk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eF(n,e,t){return tF(n,e,e.segments,t)}function tF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ul(i,t)||e.hasChildren()||!$v(i,t,r))}if(n.segments.length===t.length){if(!ul(n.segments,t)||!$v(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!eF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ul(n.segments,i)&&$v(n.segments,i,r)&&n.children[Ot])&&tF(n.children[Ot],e,s,r)}}function $v(n,e,t){return e.every((r,i)=>Yk[t](n[i].parameters,r.parameters))}class wh{constructor(e=new wn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}toString(){return DZ.serialize(this)}}class wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zv(this)}}class bg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bh(this.parameters)),this._parameterMap}toString(){return iF(this)}}function ul(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let wg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new FT},providedIn:"root"})}return n})();class FT{parse(e){const t=new VZ(e);return new wh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tg(e.root,!0)}`,r=function MZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Hv(t)}=${Hv(i)}`).join("&"):`${Hv(t)}=${Hv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function SZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const DZ=new FT;function zv(n){return n.segments.map(e=>iF(e)).join("/")}function Tg(n,e){if(!n.hasChildren())return zv(n);if(e){const t=n.children[Ot]?Tg(n.children[Ot],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ot&&r.push(`${i}:${Tg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function AZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ot&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ot&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ot?[Tg(n.children[Ot],!1)]:[`${i}:${Tg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${zv(n)}/${t[0]}`:`${zv(n)}/(${t.join("//")})`}}function nF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hv(n){return nF(n).replace(/%3B/gi,";")}function LT(n){return nF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qv(n){return decodeURIComponent(n)}function rF(n){return qv(n.replace(/\+/g,"%20"))}function iF(n){return`${LT(n.path)}${function RZ(n){return Object.keys(n).map(e=>`;${LT(e)}=${LT(n[e])}`).join("")}(n.parameters)}`}const PZ=/^[^\/()?;#]+/;function VT(n){const e=n.match(PZ);return e?e[0]:""}const xZ=/^[^\/()?;=#]+/,OZ=/^[^=?&#]+/,FZ=/^[^&#]+/;class VZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new wn(e,t)),r}parseSegment(){const e=VT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new bg(qv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function NZ(n){const e=n.match(xZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=VT(this.remaining);i&&(r=i,this.capture(r))}e[qv(t)]=qv(r)}parseQueryParam(e){const t=function kZ(n){const e=n.match(OZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function LZ(n){const e=n.match(FZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=rF(t),s=rF(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=VT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new le(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ot);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ot]:new wn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}}function sF(n){return n.segments.length>0?new wn([],{[Ot]:n}):n}function oF(n){const e={};for(const r of Object.keys(n.children)){const s=oF(n.children[r]);if(r===Ot&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UZ(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new wn(n.segments.concat(e.segments),e.children)}return n}(new wn(n.segments,e))}function ll(n){return n instanceof wh}function aF(n){let e;const i=sF(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new wn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function cF(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return UT(i,i,i,t,r);const s=function jZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new lF(t,e,r)}(e);if(s.toRoot())return UT(i,i,new wn([],{}),t,r);const o=function $Z(n,e,t){if(n.isAbsolute)return new Wv(e,!0,0);if(!t)return new Wv(e,!1,NaN);if(null===t.parent)return new Wv(t,!0,0);const r=Gv(n.commands[0])?0:1;return function zZ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new le(4005,!1);i=r.segments.length}return new Wv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ag(o.segmentGroup,o.index,s.commands):dF(o.segmentGroup,o.index,s.commands);return UT(i,o.segmentGroup,a,t,r)}function Gv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cg(n){return"object"==typeof n&&null!=n&&n.outlets}function UT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:uF(n,e,t);const a=sF(oF(o));return new wh(a,s,i)}function uF(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:uF(s,e,t)}),new wn(n.segments,r)}class lF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gv(r[0]))throw new le(4003,!1);const i=r.find(Cg);if(i&&i!==Qk(r))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dF(n,e,t){if(n||(n=new wn([],{})),0===n.segments.length&&n.hasChildren())return Ag(n,e,t);const r=function qZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Cg(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!fF(c,u,o))return s;r+=2}else{if(!fF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new wn(n.segments.slice(0,r.pathIndex),{});return s.children[Ot]=new wn(n.segments.slice(r.pathIndex),n.children),Ag(s,0,i)}return r.match&&0===i.length?new wn(n.segments,{}):r.match&&!n.hasChildren()?BT(n,e,t):r.match?Ag(n,0,i):BT(n,e,t)}function Ag(n,e,t){if(0===t.length)return new wn(n.segments,{});{const r=function HZ(n){return Cg(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Ot)&&n.children[Ot]&&1===n.numberOfChildren&&0===n.children[Ot].segments.length){const s=Ag(n.children[Ot],e,t);return new wn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=dF(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new wn(n.segments,i)}}function BT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Cg(s)){const c=GZ(s.outlets);return new wn(r,c)}if(0===i&&Gv(t[0])){r.push(new bg(n.segments[e].path,hF(t[0]))),i++;continue}const o=Cg(s)?s.outlets[Ot]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Gv(a)?(r.push(new bg(o,hF(a))),i+=2):(r.push(new bg(o,{})),i++)}return new wn(r,{})}function GZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=BT(new wn([],{}),0,r))}),e}function hF(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fF(n,e,t){return n==t.path&&Zo(e,t.parameters)}const Dg="imperative";class Qo{constructor(e,t){this.id=e,this.url=t}}class Kv extends Qo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends Qo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sg extends Qo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Th extends Qo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Zv extends Qo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pF extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WZ extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KZ extends Qo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ZZ extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QZ extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class XZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class JZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class jT{}class $T{constructor(e){this.url=e}}class rQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rg,this.attachRef=null}}let Rg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rQ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=HT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return HT(e,this._root).map(t=>t.value)}}function zT(n,e){if(n===e.value)return e;for(const t of e.children){const r=zT(n,t);if(r)return r}return null}function HT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=HT(n,t);if(r.length)return r.unshift(e),r}return[]}class Ua{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ch(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _F extends mF{constructor(e,t){super(e),this.snapshot=t,qT(this,e)}toString(){return this.snapshot.toString()}}function yF(n,e){const t=function iQ(n,e){const o=new Qv([],{},{},"",{},Ot,e,null,{});return new EF("",new Ua(o,[]))}(0,e),r=new w([new bg("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),c=new Ba(r,i,o,a,s,Ot,e,t.root);return c.snapshot=t.root,new _F(new Ua(c,[]),t)}class Ba{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Pe(u=>u[Ig]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pe(e=>bh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pe(e=>bh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function sQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qv{get title(){return this.data?.[Ig]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EF extends mF{constructor(e,t){super(t),this.url=e,qT(this,t)}toString(){return IF(this._root)}}function qT(n,e){e.value._routerState=n,e.children.forEach(t=>qT(n,t))}function IF(n){const e=n.children.length>0?` { ${n.children.map(IF).join(", ")} } `:"";return`${n.value}${e}`}function GT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zo(e.params,t.params)||n.paramsSubject.next(t.params),function IZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Zo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function WT(n,e){const t=Zo(n.params,e.params)&&function CZ(n,e){return ul(n,e)&&n.every((t,r)=>Zo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||WT(n.parent,e.parent))}let KT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new pr,this.deactivateEvents=new pr,this.attachEvents=new pr,this.detachEvents=new pr,this.parentContexts=qe(Rg),this.location=qe(Io),this.changeDetector=qe(lv),this.environmentInjector=qe(ro),this.inputBinder=qe(Yv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new oQ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ms]})}return n})();class oQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ba?this.route:e===Rg?this.childContexts:this.parent.get(e,t)}}const Yv=new Ee("");let bF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Pv([r.queryParams,r.params,r.data]).pipe($e(([s,o,a],c)=>(a={...s,...o,...a},0===c?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function f5(n){const e=qt(n);if(!e)return null;const t=new qp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function Mg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mg(n,r,i);return Mg(n,r)})}(n,e,t);return new Ua(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Mg(n,a)),o}}const r=function uQ(n){return new Ba(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Mg(n,s));return new Ua(r,i)}}const ZT="ngNavigationCancelingError";function wF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ll(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function TF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ZT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function CF(n){return n&&n[ZT]}let AF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["ng-component"]],standalone:!0,features:[R1],decls:1,vars:0,template:function(r,i){1&r&&ut(0,"router-outlet")},dependencies:[KT],encapsulation:2})}return n})();function QT(n){const e=n.children&&n.children.map(QT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=AF),t}function To(n){return n.outlet||Ot}function Pg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _Q{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),GT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ch(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ch(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ch(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ch(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new nQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new eQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(GT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),GT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Pg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class DF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xv{constructor(e,t){this.component=e,this.route=t}}function yQ(n,e,t){const r=n._root;return xg(r,e?e._root:null,t,[r.value])}function Ah(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Tu(n){return null!==ha(n)}(n)?e.get(n):n:r}function xg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ch(e);return n.children.forEach(o=>{(function EQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function IQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ul(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ul(n.url,e.url)||!Zo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WT(n,e)||!Zo(n.queryParams,e.queryParams);default:return!WT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new DF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),xg(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xv(a.outlet.component,o))}else o&&Ng(e,a,i),i.canActivateChecks.push(new DF(r)),xg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ng(a,t.getContext(o),i)),i}function Ng(n,e,t){const r=Ch(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Ng(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Xv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Og(n){return"function"==typeof n}function SF(n){return n instanceof Uv||"EmptyError"===n?.name}const Jv=Symbol("INITIAL_VALUE");function Dh(){return $e(n=>Pv(n.map(e=>e.pipe(il(1),gg(Jv)))).pipe(Pe(e=>{for(const t of e)if(!0!==t){if(t===Jv)return Jv;if(!1===t||t instanceof wh)return t}return!0}),bs(e=>e!==Jv),il(1)))}function RF(n){return function Pn(...n){return dn(n)}(Hr(e=>{if(ll(e))throw wF(0,e)}),Pe(e=>!0===e))}class eE{constructor(e){this.segmentGroup=e||null}}class MF{constructor(e){this.urlTree=e}}function Sh(n){return Eh(new eE(n))}function PF(n){return Eh(new MF(n))}class jQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new le(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[Ot])return Eh(new le(4e3,!1));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new wh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new wn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new le(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const YT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $Q(n,e,t,r,i){const s=XT(n,e,t);return s.matched?(r=function dQ(n,e){return n.providers&&!n._injector&&(n._injector=p0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function VQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Ah(o,n);return Gc(function DQ(n){return n&&Og(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Dh(),RF()):k(!0)}(r,e,t).pipe(Pe(o=>!0===o?s:{...YT}))):k(s)}function XT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...YT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||EZ)(t,n,e);if(!i)return{...YT};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xF(n,e,t,r){return t.length>0&&function qQ(n,e,t){return t.some(r=>tE(n,e,r)&&To(r)!==Ot)}(n,t,r)?{segmentGroup:new wn(e,HQ(r,new wn(t,n.children))),slicedSegments:[]}:0===t.length&&function GQ(n,e,t){return t.some(r=>tE(n,e,r))}(n,t,r)?{segmentGroup:new wn(n.segments,zQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new wn(n.segments,n.children),slicedSegments:t}}function zQ(n,e,t,r,i){const s={};for(const o of r)if(tE(n,t,o)&&!i[To(o)]){const a=new wn([],{});s[To(o)]=a}return{...i,...s}}function HQ(n,e){const t={};t[Ot]=e;for(const r of n)if(""===r.path&&To(r)!==Ot){const i=new wn([],{});t[To(r)]=i}return t}function tE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class QQ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new jQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new le(4002,!1)}recognize(){const e=xF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe($c(t=>{if(t instanceof MF)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof eE?this.noMatchError(t):t}),Pe(t=>{const r=new Qv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,{}),i=new Ua(r,t),s=new EF("",i),o=function BZ(n,e,t=null,r=null){return cF(aF(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ot).pipe($c(r=>{throw r instanceof eE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=vF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return b(i).pipe(Ih(s=>{const o=r.children[s],a=function gQ(n,e){const t=n.filter(r=>To(r)===e);return t.push(...n.filter(r=>To(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),jv((s,o)=>(s.push(...o),s)),Bv(null),function _Z(n,e){const t=arguments.length>=2;return r=>r.pipe(n?bs((i,s)=>n(i,s,r)):xt,kT(1),t?Bv(e):Kk(()=>new Uv))}(),tn(s=>{if(null===s)return Sh(r);const o=NF(s);return function YQ(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return b(t).pipe(Ih(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe($c(c=>{if(c instanceof eE)return k(null);throw c}))),qc(a=>!!a),$c(a=>{if(SF(a))return function KQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):Sh(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function WQ(n,e,t,r){return!!(To(n)===r||r!==Ot&&tE(e,t,n))&&("**"===n.path||XT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Sh(i):Sh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(tn(o=>{const a=new wn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=XT(t,i,s);if(!a)return Sh(t);const m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?PF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(tn(y=>this.processSegment(e,r,t,y.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Qk(i).parameters:{};a=k({snapshot:new Qv(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OF(r),To(r),r.component??r._loadedComponent??null,r,kF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$Q(t,r,i,e).pipe(Pe(({matched:c,consumedSegments:u,remainingSegments:f,parameters:m})=>c?{snapshot:new Qv(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OF(r),To(r),r.component??r._loadedComponent??null,r,kF(r)),consumedSegments:u,remainingSegments:f}:null));return a.pipe($e(c=>null===c?Sh(t):this.getChildConfig(e=r._injector??e,r,i).pipe($e(({routes:u})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:I}=c,{segmentGroup:T,slicedSegments:N}=xF(t,y,I,u);if(0===N.length&&T.hasChildren())return this.processChildren(f,u,T).pipe(Pe(q=>null===q?null:[new Ua(m,q)]));if(0===u.length&&0===N.length)return k([new Ua(m,[])]);const O=To(r)===s;return this.processSegment(f,u,T,N,O?Ot:s,!0).pipe(Pe(q=>[new Ua(m,q)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function LQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Ah(o,n);return Gc(function wQ(n){return n&&Og(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Dh(),RF())}(e,t,r).pipe(tn(i=>i?this.configLoader.loadChildren(e,t).pipe(Hr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function BQ(n){return Eh(TF(!1,3))}())):k({routes:[],injector:e})}}function XQ(n){const e=n.value.routeConfig;return e&&""===e.path}function NF(n){const e=[],t=new Set;for(const r of n){if(!XQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=NF(r.children);e.push(new Ua(r.value,i))}return e.filter(r=>!t.has(r))}function OF(n){return n.data||{}}function kF(n){return n.resolve||{}}function FF(n){return"string"==typeof n.title||null===n.title}function JT(n){return $e(e=>{const t=n(e);return t?b(t).pipe(Pe(()=>e)):k(e)})}const Rh=new Ee("ROUTES");let eC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=qe(AN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gc(t.loadComponent()).pipe(Pe(LF),Hr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),_g(()=>{this.componentLoaders.delete(t)})),i=new Wk(r,()=>new ue).pipe(OT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function sY(n,e,t,r){return Gc(n.loadChildren()).pipe(Pe(LF),tn(i=>i instanceof D1||Array.isArray(i)?k(i):b(e.compileModuleAsync(i))),Pe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Rh,[],{optional:!0,self:!0}).flat()),{routes:o.map(QT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(_g(()=>{this.childrenLoaders.delete(r)})),o=new Wk(s,()=>new ue).pipe(OT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LF(n){return function oY(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let nE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ue,this.transitionAbortSubject=new ue,this.configLoader=qe(eC),this.environmentInjector=qe(ro),this.urlSerializer=qe(wg),this.rootContexts=qe(Rg),this.inputBindingEnabled=null!==qe(Yv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new XZ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new YZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bs(s=>0!==s.id),Pe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),$e(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(Hr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$e(c=>{const u=c.currentBrowserUrl.toString(),f=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new Th(c.id,this.urlSerializer.serialize(c.rawUrl),y,0)),c.resolve(null),kn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe($e(y=>{const I=this.transitions?.getValue();return this.events.next(new Kv(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?kn:Promise.resolve(y)}),function JQ(n,e,t,r,i,s){return tn(o=>function ZQ(n,e,t,r,i,s,o="emptyOnly"){return new QQ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Pe(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Hr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const I=new pF(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:y,extractedUrl:I,source:T,restoredState:N,extras:O}=c,q=new Kv(y,this.urlSerializer.serialize(I),T,N);this.events.next(q);const j=yF(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:j,urlAfterRedirects:I,extras:{...O,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const y="";return this.events.next(new Th(c.id,this.urlSerializer.serialize(c.extractedUrl),y,1)),c.resolve(null),kn}}),Hr(c=>{const u=new WZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Pe(c=>(this.currentTransition=s={...c,guards:yQ(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function RQ(n,e){return tn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function MQ(n,e,t,r){return b(n).pipe(tn(i=>function FQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const c=Pg(e)??i,u=Ah(a,c);return Gc(function AQ(n){return n&&Og(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(qc())})).pipe(Dh()):k(!0)}(i.component,i.route,t,e,r)),qc(i=>!0!==i,!0))}(o,r,i,n).pipe(tn(a=>a&&function bQ(n){return"boolean"==typeof n}(a)?function PQ(n,e,t,r){return b(e).pipe(Ih(i=>xv(function NQ(n,e){return null!==n&&e&&e(new JZ(n)),k(!0)}(i.route.parent,r),function xQ(n,e){return null!==n&&e&&e(new tQ(n)),k(!0)}(i.route,r),function kQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function vQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Gk(()=>k(o.guards.map(c=>{const u=Pg(o.node)??t,f=Ah(c,u);return Gc(function CQ(n){return n&&Og(n.canActivateChild)}(f)?f.canActivateChild(r,n):u.runInContext(()=>f(r,n))).pipe(qc())})).pipe(Dh())));return k(s).pipe(Dh())}(n,i.path,t),function OQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>Gk(()=>{const o=Pg(e)??t,a=Ah(s,o);return Gc(function TQ(n){return n&&Og(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(qc())}));return k(i).pipe(Dh())}(n,i.route,t))),qc(i=>!0!==i,!0))}(r,s,n,e):k(a)),Pe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Hr(c=>{if(s.guardsResult=c.guardsResult,ll(c.guardsResult))throw wF(0,c.guardsResult);const u=new KZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),bs(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),JT(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Hr(u=>{const f=new ZZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),$e(u=>{let f=!1;return k(u).pipe(function eY(n,e){return tn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return b(i).pipe(Ih(o=>function tY(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!FF(i)&&(s[Ig]=i.title),function nY(n,e,t,r){const i=function rY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return b(i).pipe(tn(o=>function iY(n,e,t,r){const i=Pg(e)??r,s=Ah(n,i);return Gc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(qc(),Hr(a=>{s[o]=a}))),kT(1),function yZ(n){return Pe(()=>n)}(s),$c(o=>SF(o)?kn:Eh(o)))}(s,n,e,r).pipe(Pe(o=>(n._resolvedData=o,n.data=vF(n,t).resolve,i&&FF(i)&&(n.data[Ig]=i.title),null)))}(o.route,r,n,e)),Hr(()=>s++),kT(1),tn(o=>s===i.length?k(t):kn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Hr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),Hr(u=>{const f=new QZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),JT(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Hr(y=>{f.component=y}),Pe(()=>{})));for(const y of f.children)m.push(...u(y));return m};return Pv(u(c.targetSnapshot.root)).pipe(Bv(),il(1))}),JT(()=>this.afterPreactivation()),Pe(c=>{const u=function aQ(n,e,t){const r=Mg(n,e._root,t?t._root:void 0);return new _F(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Hr(()=>{this.events.next(new jT)}),((n,e,t,r)=>Pe(i=>(new _Q(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),il(1),Hr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Va(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),dk(this.transitionAbortSubject.pipe(Hr(c=>{throw c}))),_g(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),$c(c=>{if(a=!0,CF(c))this.events.next(new Sg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function lQ(n){return CF(n)&&ll(n.url)}(c)?this.events.next(new $T(c.url)):s.resolve(!1);else{this.events.next(new Zv(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return kn}))}))}cancelNavigationTransition(t,r,i){const s=new Sg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VF(n){return n!==Dg}let UF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[Ig]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(aY)},providedIn:"root"})}return n})(),aY=(()=>{class n extends UF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ZO))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(lY)},providedIn:"root"})}return n})();class uY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lY=(()=>{class n extends uY{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=jr(n)))(i||n)}}();static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rE=new Ee("",{providedIn:"root",factory:()=>({})});let dY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return qe(hY)},providedIn:"root"})}return n})(),hY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(kg||{});function BF(n,e){n.events.pipe(bs(t=>t instanceof Va||t instanceof Sg||t instanceof Zv||t instanceof Th),Pe(t=>t instanceof Va||t instanceof Th?kg.COMPLETE:t instanceof Sg&&(0===t.code||1===t.code)?kg.REDIRECTING:kg.FAILED),bs(t=>t!==kg.REDIRECTING),il(1)).subscribe(()=>{e()})}function fY(n){throw n}function pY(n,e,t){return e.parse("/")}const gY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=qe(TN),this.isNgZoneEnabled=!1,this._events=new ue,this.options=qe(rE,{optional:!0})||{},this.pendingTasks=qe(CN),this.errorHandler=this.options.errorHandler||fY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||pY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=qe(dY),this.routeReuseStrategy=qe(cY),this.titleStrategy=qe(UF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qe(Rh,{optional:!0})?.flat()??[],this.navigationTransitions=qe(nE),this.urlSerializer=qe(wg),this.location=qe(W0),this.componentInputBindingEnabled=!!qe(Yv,{optional:!0}),this.eventsSubscription=new Rt,this.isNgZoneEnabled=qe(Gt)instanceof Gt&&Gt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=yF(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(jF(r)&&this._events.next(r));if(r instanceof Kv)VF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Th)this.rawUrlTree=i.rawUrl;else if(r instanceof pF){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof jT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Sg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof $T){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VF(i.source)};this.scheduleNavigation(s,Dg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Zv&&this.restoreHistory(i,!0),r instanceof Va&&(this.navigated=!0),jF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Dg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(QT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=aF(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return cF(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ll(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Dg,null,r)}navigate(t,r={skipLocationChange:!1}){return function _Y(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new le(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...gY}:!1===r?{...mY}:r,ll(t))return Xk(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Xk(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return BF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jF(n){return!(n instanceof jT||n instanceof $T)}let iE=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Va&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function DM(n,e,t){return function N3(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?AM:ai}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(ci),_e(Ba),function xc(n){return function H(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(fs(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Zr(),n)}("tabindex"),_e(Sa),_e(vs),_e(nl))};static#t=this.\u0275dir=et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Nt("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&zo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",_h],skipLocationChange:["skipLocationChange","skipLocationChange",_h],replaceUrl:["replaceUrl","replaceUrl",_h],routerLink:"routerLink"},standalone:!0,features:[BP,ms]})}return n})();class $F{}let EY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bs(t=>t instanceof Va),Ih(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=p0(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return b(i).pipe(Nr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(tn(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?b([s,this.loader.loadComponent(r)]).pipe(Nr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(ci),fe(AN),fe(ro),fe($F),fe(eC))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tC=new Ee("");let zF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Va?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Th&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function fP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function ja(n,e){return{\u0275kind:n,\u0275providers:e}}function qF(){const n=qe(vi);return e=>{const t=n.get(el);if(e!==t.components[0])return;const r=n.get(ci),i=n.get(GF);1===n.get(nC)&&r.initialNavigation(),n.get(WF,null,Ct.Optional)?.setUpPreloading(),n.get(tC,null,Ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const GF=new Ee("",{factory:()=>new ue}),nC=new Ee("",{providedIn:"root",factory:()=>1}),WF=new Ee("");function TY(n){return ja(0,[{provide:WF,useExisting:EY},{provide:$F,useExisting:n}])}const KF=new Ee("ROUTER_FORROOT_GUARD"),AY=[W0,{provide:wg,useClass:FT},ci,Rg,{provide:Ba,useFactory:function HF(n){return n.routerState.root},deps:[ci]},eC,[]];function DY(){return new NN("Router",ci)}let ZF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[AY,[],{provide:Rh,multi:!0,useValue:t},{provide:KF,useFactory:PY,deps:[[ci,new $r,new Rp]]},{provide:rE,useValue:r||{}},r?.useHash?{provide:nl,useClass:y5}:{provide:nl,useClass:lO},{provide:tC,useFactory:()=>{const n=qe(O8),e=qe(Gt),t=qe(rE),r=qe(nE),i=qe(wg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zF(i,r,n,e,t)}},r?.preloadingStrategy?TY(r.preloadingStrategy).\u0275providers:[],{provide:NN,multi:!0,useFactory:DY},r?.initialNavigation?xY(r):[],r?.bindToComponentInputs?ja(8,[bF,{provide:Yv,useExisting:bF}]).\u0275providers:[],[{provide:QF,useFactory:qF},{provide:L0,multi:!0,useExisting:QF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Rh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(KF,8))};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({})}return n})();function PY(n){return"guarded"}function xY(n){return["disabled"===n.initialNavigation?ja(3,[{provide:R0,multi:!0,useFactory:()=>{const e=qe(ci);return()=>{e.setUpLocationChangeListener()}}},{provide:nC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ja(2,[{provide:nC,useValue:0},{provide:R0,multi:!0,deps:[vi],useFactory:e=>{const t=e.get(m5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ci),s=e.get(GF);BF(i,()=>{r(!0)}),e.get(nE).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const QF=new Ee("");var _r=We(303);(0,_r.registerVersion)("firebase","10.12.2","app");const VY=new class LY extends uk{}(class FY extends ck{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Wc=new kc("ANGULARFIRE2_VERSION");function rC(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const sE=(n,e)=>{const t=e?[e]:(0,_r.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Fg{constructor(){return sE(UY)}}const UY="app-check";function Mh(){}class YF{zone;delegate;constructor(e,t=VY){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class BY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mh,{},Mh,Mh)),t.pipe(Hr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new YF(Zone.current)),this.insideAngular=t.run(()=>new YF(Zone.current,wT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(fe(Gt))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ph(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function hl(n){return Ph().ngZone.run(()=>n())}function XF(n){return n.pipe(En(Ph().outsideAngular))}function es(n){return function $Y(n){return function(t){return(t=t.lift(new BY(n.ngZone))).pipe(Cr(n.outsideAngular),En(n.insideAngular))}}(Ph())(n)}const zY=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),hl(()=>n.apply(void 0,r))},iC=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=hl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mh,{},Mh,Mh))),r[s]=zY(r[s],t));const i=function jY(n){return Ph().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Et){const s=Ph();return i.pipe(Cr(s.outsideAngular),En(s.insideAngular))}return hl(()=>i)}return i instanceof Et?i.pipe(es):i instanceof Promise?hl(()=>new Promise((s,o)=>i.then(a=>hl(()=>s(a)),a=>hl(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:hl(()=>i)};var Yo=We(106);Yo.Z.registerVersion("firebase","10.12.2","app-compat");const GY=["ngOnDestroy"],JF=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(GY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})});class sC{constructor(e){return e}}const Lg=new Ee("angularfire2.app.options"),Vg=new Ee("angularfire2.app.name");function oE(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Yo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Yo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;WY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sC(o)}const WY=(n,...e)=>{},KY={provide:sC,useFactory:oE,deps:[Lg,Gt,[new $r,Vg]]};let ZY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Lg,useValue:t},{provide:Vg,useValue:r}]}}constructor(t){Yo.Z.registerVersion("angularfire",Wc.full,"core"),Yo.Z.registerVersion("angularfire",Wc.full,"app-compat"),Yo.Z.registerVersion("angular",Cw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(Os))};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[KY]})}return n})();function aE(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function QY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(tL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${YY?" You may need to reload as Firebase is not HMR aware.":""}`),tL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const YY=typeof module<"u"&&!!module.hot,tL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],We(365);class XY extends ue{constructor(e=1/0,t=1/0,r=bT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function oC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,de({connector:()=>new XY(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nL(n,e){return P(e)?$e(()=>n,e):$e(()=>n)}const rL=new Ee("angularfire2.auth.use-emulator"),iL=new Ee("angularfire2.auth.settings"),sL=new Ee("angularfire2.auth.tenant-id"),oL=new Ee("angularfire2.auth.langugage-code"),aL=new Ee("angularfire2.auth.use-device-language"),cL=new Ee("angularfire.auth.persistence"),uL=(n,e,t,r,i,s,o,a)=>aE(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let lL=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,y,I){const T=new ue,N=k(void 0).pipe(En(o.outsideAngular),$e(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,365)))),Pe(()=>oE(t,s,r)),Pe(O=>uL(O,s,a,u,f,m,c,y)),oC({bufferSize:1,refCount:!1}));if(Cv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{N.pipe(qc()).subscribe();const O=N.pipe($e(Y=>Y.getRedirectResult().then(oe=>oe,()=>null)),es,oC({bufferSize:1,refCount:!1})),q=N.pipe($e(Y=>new Et(oe=>({unsubscribe:s.runOutsideAngular(()=>Y.onAuthStateChanged(Ae=>oe.next(Ae),Ae=>oe.error(Ae),()=>oe.complete()))})))),j=N.pipe($e(Y=>new Et(oe=>({unsubscribe:s.runOutsideAngular(()=>Y.onIdTokenChanged(Ae=>oe.next(Ae),Ae=>oe.error(Ae),()=>oe.complete()))}))));this.authState=O.pipe(nL(q),Cr(o.outsideAngular),En(o.insideAngular)),this.user=O.pipe(nL(j),Cr(o.outsideAngular),En(o.insideAngular)),this.idToken=this.user.pipe($e(Y=>Y?b(Y.getIdToken()):k(null))),this.idTokenResult=this.user.pipe($e(Y=>Y?b(Y.getIdTokenResult()):k(null))),this.credential=D(O,T,this.authState.pipe(bs(Y=>!Y))).pipe(Pe(Y=>Y?.user?Y:null),Cr(o.outsideAngular),En(o.insideAngular))}return JF(this,N,s,{spy:{apply:(O,q,j)=>{(O.startsWith("signIn")||O.startsWith("createUser"))&&j.then(Y=>T.next(Y))}}})}static \u0275fac=function(r){return new(r||n)(fe(Lg),fe(Vg,8),fe(Os),fe(Gt),fe(dl),fe(rL,8),fe(iL,8),fe(sL,8),fe(oL,8),fe(aL,8),fe(cL,8),fe(Fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function aC(){return ae((n,e)=>{let t,r=!1;n.subscribe(Ne(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var fl,fL,me=We(861),cE=We(537),Xo=We(879),St=We(58),dL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hL={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(z,L,B){B||(B=0);var G=Array(16);if("string"==typeof L)for(var Q=0;16>Q;++Q)G[Q]=L.charCodeAt(B++)|L.charCodeAt(B++)<<8|L.charCodeAt(B++)<<16|L.charCodeAt(B++)<<24;else for(Q=0;16>Q;++Q)G[Q]=L[B++]|L[B++]<<8|L[B++]<<16|L[B++]<<24;var te=z.g[3],$=(L=z.g[0])+(te^(B=z.g[1])&((Q=z.g[2])^te))+G[0]+3614090360&4294967295;$=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=(B=(Q=(te=(L=B+($<<7&4294967295|$>>>25))+(($=te+(Q^L&(B^Q))+G[1]+3905402710&4294967295)<<12&4294967295|$>>>20))+(($=Q+(B^te&(L^B))+G[2]+606105819&4294967295)<<17&4294967295|$>>>15))+(($=B+(L^Q&(te^L))+G[3]+3250441966&4294967295)<<22&4294967295|$>>>10))+(($=L+(te^B&(Q^te))+G[4]+4118548399&4294967295)<<7&4294967295|$>>>25))+(($=te+(Q^L&(B^Q))+G[5]+1200080426&4294967295)<<12&4294967295|$>>>20))+(($=Q+(B^te&(L^B))+G[6]+2821735955&4294967295)<<17&4294967295|$>>>15))+(($=B+(L^Q&(te^L))+G[7]+4249261313&4294967295)<<22&4294967295|$>>>10))+(($=L+(te^B&(Q^te))+G[8]+1770035416&4294967295)<<7&4294967295|$>>>25))+(($=te+(Q^L&(B^Q))+G[9]+2336552879&4294967295)<<12&4294967295|$>>>20))+(($=Q+(B^te&(L^B))+G[10]+4294925233&4294967295)<<17&4294967295|$>>>15))+(($=B+(L^Q&(te^L))+G[11]+2304563134&4294967295)<<22&4294967295|$>>>10))+(($=L+(te^B&(Q^te))+G[12]+1804603682&4294967295)<<7&4294967295|$>>>25))+(($=te+(Q^L&(B^Q))+G[13]+4254626195&4294967295)<<12&4294967295|$>>>20))+(($=Q+(B^te&(L^B))+G[14]+2792965006&4294967295)<<17&4294967295|$>>>15))+(($=B+(L^Q&(te^L))+G[15]+1236535329&4294967295)<<22&4294967295|$>>>10))+(($=L+(Q^te&(B^Q))+G[1]+4129170786&4294967295)<<5&4294967295|$>>>27))+(($=te+(B^Q&(L^B))+G[6]+3225465664&4294967295)<<9&4294967295|$>>>23))+(($=Q+(L^B&(te^L))+G[11]+643717713&4294967295)<<14&4294967295|$>>>18))+(($=B+(te^L&(Q^te))+G[0]+3921069994&4294967295)<<20&4294967295|$>>>12))+(($=L+(Q^te&(B^Q))+G[5]+3593408605&4294967295)<<5&4294967295|$>>>27))+(($=te+(B^Q&(L^B))+G[10]+38016083&4294967295)<<9&4294967295|$>>>23))+(($=Q+(L^B&(te^L))+G[15]+3634488961&4294967295)<<14&4294967295|$>>>18))+(($=B+(te^L&(Q^te))+G[4]+3889429448&4294967295)<<20&4294967295|$>>>12))+(($=L+(Q^te&(B^Q))+G[9]+568446438&4294967295)<<5&4294967295|$>>>27))+(($=te+(B^Q&(L^B))+G[14]+3275163606&4294967295)<<9&4294967295|$>>>23))+(($=Q+(L^B&(te^L))+G[3]+4107603335&4294967295)<<14&4294967295|$>>>18))+(($=B+(te^L&(Q^te))+G[8]+1163531501&4294967295)<<20&4294967295|$>>>12))+(($=L+(Q^te&(B^Q))+G[13]+2850285829&4294967295)<<5&4294967295|$>>>27))+(($=te+(B^Q&(L^B))+G[2]+4243563512&4294967295)<<9&4294967295|$>>>23))+(($=Q+(L^B&(te^L))+G[7]+1735328473&4294967295)<<14&4294967295|$>>>18))+(($=B+(te^L&(Q^te))+G[12]+2368359562&4294967295)<<20&4294967295|$>>>12))+(($=L+(B^Q^te)+G[5]+4294588738&4294967295)<<4&4294967295|$>>>28))+(($=te+(L^B^Q)+G[8]+2272392833&4294967295)<<11&4294967295|$>>>21))+(($=Q+(te^L^B)+G[11]+1839030562&4294967295)<<16&4294967295|$>>>16))+(($=B+(Q^te^L)+G[14]+4259657740&4294967295)<<23&4294967295|$>>>9))+(($=L+(B^Q^te)+G[1]+2763975236&4294967295)<<4&4294967295|$>>>28))+(($=te+(L^B^Q)+G[4]+1272893353&4294967295)<<11&4294967295|$>>>21))+(($=Q+(te^L^B)+G[7]+4139469664&4294967295)<<16&4294967295|$>>>16))+(($=B+(Q^te^L)+G[10]+3200236656&4294967295)<<23&4294967295|$>>>9))+(($=L+(B^Q^te)+G[13]+681279174&4294967295)<<4&4294967295|$>>>28))+(($=te+(L^B^Q)+G[0]+3936430074&4294967295)<<11&4294967295|$>>>21))+(($=Q+(te^L^B)+G[3]+3572445317&4294967295)<<16&4294967295|$>>>16))+(($=B+(Q^te^L)+G[6]+76029189&4294967295)<<23&4294967295|$>>>9))+(($=L+(B^Q^te)+G[9]+3654602809&4294967295)<<4&4294967295|$>>>28))+(($=te+(L^B^Q)+G[12]+3873151461&4294967295)<<11&4294967295|$>>>21))+(($=Q+(te^L^B)+G[15]+530742520&4294967295)<<16&4294967295|$>>>16))+(($=B+(Q^te^L)+G[2]+3299628645&4294967295)<<23&4294967295|$>>>9))+(($=L+(Q^(B|~te))+G[0]+4096336452&4294967295)<<6&4294967295|$>>>26))+(($=te+(B^(L|~Q))+G[7]+1126891415&4294967295)<<10&4294967295|$>>>22))+(($=Q+(L^(te|~B))+G[14]+2878612391&4294967295)<<15&4294967295|$>>>17))+(($=B+(te^(Q|~L))+G[5]+4237533241&4294967295)<<21&4294967295|$>>>11))+(($=L+(Q^(B|~te))+G[12]+1700485571&4294967295)<<6&4294967295|$>>>26))+(($=te+(B^(L|~Q))+G[3]+2399980690&4294967295)<<10&4294967295|$>>>22))+(($=Q+(L^(te|~B))+G[10]+4293915773&4294967295)<<15&4294967295|$>>>17))+(($=B+(te^(Q|~L))+G[1]+2240044497&4294967295)<<21&4294967295|$>>>11))+(($=L+(Q^(B|~te))+G[8]+1873313359&4294967295)<<6&4294967295|$>>>26))+(($=te+(B^(L|~Q))+G[15]+4264355552&4294967295)<<10&4294967295|$>>>22))+(($=Q+(L^(te|~B))+G[6]+2734768916&4294967295)<<15&4294967295|$>>>17))+(($=B+(te^(Q|~L))+G[13]+1309151649&4294967295)<<21&4294967295|$>>>11))+((te=(L=B+(($=L+(Q^(B|~te))+G[4]+4149444226&4294967295)<<6&4294967295|$>>>26))+(($=te+(B^(L|~Q))+G[11]+3174756917&4294967295)<<10&4294967295|$>>>22))^((Q=te+(($=Q+(L^(te|~B))+G[2]+718787259&4294967295)<<15&4294967295|$>>>17))|~L))+G[9]+3951481745&4294967295,z.g[0]=z.g[0]+L&4294967295,z.g[1]=z.g[1]+(Q+($<<21&4294967295|$>>>11))&4294967295,z.g[2]=z.g[2]+Q&4294967295,z.g[3]=z.g[3]+te&4294967295}function o(z,L){this.h=L;for(var B=[],G=!0,Q=z.length-1;0<=Q;Q--){var te=0|z[Q];G&&te==L||(B[Q]=te,G=!1)}this.g=B}(function e(z,L){function B(){}B.prototype=L.prototype,z.D=L.prototype,z.prototype=new B,z.prototype.constructor=z,z.C=function(G,Q,te){for(var $=Array(arguments.length-2),uo=2;uo<arguments.length;uo++)$[uo-2]=arguments[uo];return L.prototype[Q].apply(G,$)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(z,L){void 0===L&&(L=z.length);for(var B=L-this.blockSize,G=this.B,Q=this.h,te=0;te<L;){if(0==Q)for(;te<=B;)i(this,z,te),te+=this.blockSize;if("string"==typeof z){for(;te<L;)if(G[Q++]=z.charCodeAt(te++),Q==this.blockSize){i(this,G),Q=0;break}}else for(;te<L;)if(G[Q++]=z[te++],Q==this.blockSize){i(this,G),Q=0;break}}this.h=Q,this.o+=L},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var L=1;L<z.length-8;++L)z[L]=0;var B=8*this.o;for(L=z.length-8;L<z.length;++L)z[L]=255&B,B/=256;for(this.u(z),z=Array(16),L=B=0;4>L;++L)for(var G=0;32>G;G+=8)z[B++]=this.g[L]>>>G&255;return z};var a={};function c(z){return-128<=z&&128>z?function s(z,L){var B=a;return Object.prototype.hasOwnProperty.call(B,z)?B[z]:B[z]=L(z)}(z,function(L){return new o([0|L],0>L?-1:0)}):new o([0|z],0>z?-1:0)}function u(z){if(isNaN(z)||!isFinite(z))return m;if(0>z)return O(u(-z));for(var L=[],B=1,G=0;z>=B;G++)L[G]=z/B|0,B*=4294967296;return new o(L,0)}var m=c(0),y=c(1),I=c(16777216);function T(z){if(0!=z.h)return!1;for(var L=0;L<z.g.length;L++)if(0!=z.g[L])return!1;return!0}function N(z){return-1==z.h}function O(z){for(var L=z.g.length,B=[],G=0;G<L;G++)B[G]=~z.g[G];return new o(B,~z.h).add(y)}function q(z,L){return z.add(O(L))}function j(z,L){for(;(65535&z[L])!=z[L];)z[L+1]+=z[L]>>>16,z[L]&=65535,L++}function Y(z,L){this.g=z,this.h=L}function oe(z,L){if(T(L))throw Error("division by zero");if(T(z))return new Y(m,m);if(N(z))return L=oe(O(z),L),new Y(O(L.g),O(L.h));if(N(L))return L=oe(z,O(L)),new Y(O(L.g),L.h);if(30<z.g.length){if(N(z)||N(L))throw Error("slowDivide_ only works with positive integers.");for(var B=y,G=L;0>=G.l(z);)B=Ae(B),G=Ae(G);var Q=je(B,1),te=je(G,1);for(G=je(G,2),B=je(B,2);!T(G);){var $=te.add(G);0>=$.l(z)&&(Q=Q.add(B),te=$),G=je(G,1),B=je(B,1)}return L=q(z,Q.j(L)),new Y(Q,L)}for(Q=m;0<=z.l(L);){for(B=Math.max(1,Math.floor(z.m()/L.m())),G=48>=(G=Math.ceil(Math.log(B)/Math.LN2))?1:Math.pow(2,G-48),$=(te=u(B)).j(L);N($)||0<$.l(z);)$=(te=u(B-=G)).j(L);T(te)&&(te=y),Q=Q.add(te),z=q(z,$)}return new Y(Q,z)}function Ae(z){for(var L=z.g.length+1,B=[],G=0;G<L;G++)B[G]=z.i(G)<<1|z.i(G-1)>>>31;return new o(B,z.h)}function je(z,L){var B=L>>5;L%=32;for(var G=z.g.length-B,Q=[],te=0;te<G;te++)Q[te]=0<L?z.i(te+B)>>>L|z.i(te+B+1)<<32-L:z.i(te+B);return new o(Q,z.h)}(n=o.prototype).m=function(){if(N(this))return-O(this).m();for(var z=0,L=1,B=0;B<this.g.length;B++){var G=this.i(B);z+=(0<=G?G:4294967296+G)*L,L*=4294967296}return z},n.toString=function(z){if(2>(z=z||10)||36<z)throw Error("radix out of range: "+z);if(T(this))return"0";if(N(this))return"-"+O(this).toString(z);for(var L=u(Math.pow(z,6)),B=this,G="";;){var Q=oe(B,L).g,te=((0<(B=q(B,Q.j(L))).g.length?B.g[0]:B.h)>>>0).toString(z);if(T(B=Q))return te+G;for(;6>te.length;)te="0"+te;G=te+G}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h},n.l=function(z){return N(z=q(this,z))?-1:T(z)?0:1},n.abs=function(){return N(this)?O(this):this},n.add=function(z){for(var L=Math.max(this.g.length,z.g.length),B=[],G=0,Q=0;Q<=L;Q++){var te=G+(65535&this.i(Q))+(65535&z.i(Q)),$=(te>>>16)+(this.i(Q)>>>16)+(z.i(Q)>>>16);G=$>>>16,B[Q]=($&=65535)<<16|(te&=65535)}return new o(B,-2147483648&B[B.length-1]?-1:0)},n.j=function(z){if(T(this)||T(z))return m;if(N(this))return N(z)?O(this).j(O(z)):O(O(this).j(z));if(N(z))return O(this.j(O(z)));if(0>this.l(I)&&0>z.l(I))return u(this.m()*z.m());for(var L=this.g.length+z.g.length,B=[],G=0;G<2*L;G++)B[G]=0;for(G=0;G<this.g.length;G++)for(var Q=0;Q<z.g.length;Q++){var te=this.i(G)>>>16,$=65535&this.i(G),uo=z.i(Q)>>>16,yu=65535&z.i(Q);B[2*G+2*Q]+=$*yu,j(B,2*G+2*Q),B[2*G+2*Q+1]+=te*yu,j(B,2*G+2*Q+1),B[2*G+2*Q+1]+=$*uo,j(B,2*G+2*Q+1),B[2*G+2*Q+2]+=te*uo,j(B,2*G+2*Q+2)}for(G=0;G<L;G++)B[G]=B[2*G+1]<<16|B[2*G];for(G=L;G<2*L;G++)B[G]=0;return new o(B,0)},n.A=function(z){return oe(this,z).h},n.and=function(z){for(var L=Math.max(this.g.length,z.g.length),B=[],G=0;G<L;G++)B[G]=this.i(G)&z.i(G);return new o(B,this.h&z.h)},n.or=function(z){for(var L=Math.max(this.g.length,z.g.length),B=[],G=0;G<L;G++)B[G]=this.i(G)|z.i(G);return new o(B,this.h|z.h)},n.xor=function(z){for(var L=Math.max(this.g.length,z.g.length),B=[],G=0;G<L;G++)B[G]=this.i(G)^z.i(G);return new o(B,this.h^z.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fL=hL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(z,L){if(0==z.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==z.charAt(0))return O(f(z.substring(1),L));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(L,8)),G=m,Q=0;Q<z.length;Q+=8){var te=Math.min(8,z.length-Q),$=parseInt(z.substring(Q,Q+te),L);8>te?(te=u(Math.pow(L,te)),G=G.j(te).add(u($))):G=(G=G.j(B)).add(u($))}return G},fl=hL.Integer=o}).apply(typeof dL<"u"?dL:typeof self<"u"?self:typeof window<"u"?window:{});var pL,gL,Ug,mL,lE,cC,_L,yL,vL,uE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$a={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof uE&&uE];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var M=0;M<h.length-1;M++){var X=h[M];if(!(X in E))break e;E=E[X]}(_=_(M=E[h=h[h.length-1]]))!=M&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,M=!1,X={next:function(){if(!M&&E<h.length){var he=E++;return{value:_(he,h[he]),done:!1}}return M=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}(this,function(_,E){return E})}});var o=o||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function u(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,M),h.apply(_,X)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var M=E.slice();return M.push.apply(M,arguments),h.apply(this,M)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(M,X,he){for(var Ue=Array(arguments.length-2),On=2;On<arguments.length;On++)Ue[On-2]=arguments[On];return _.prototype[X].apply(M,Ue)}}function N(h){const _=h.length;if(0<_){const E=Array(_);for(let M=0;M<_;M++)E[M]=h[M];return E}return[]}function O(h,_){for(let E=1;E<arguments.length;E++){const M=arguments[E];if(c(M)){const X=h.length||0,he=M.length||0;h.length=X+he;for(let Ue=0;Ue<he;Ue++)h[X+Ue]=M[Ue]}else h.push(M)}}function j(h){return/^[\s\xa0]*$/.test(h)}function Y(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var Ae=!(-1==Y().indexOf("Gecko")||-1!=Y().toLowerCase().indexOf("webkit")&&-1==Y().indexOf("Edge")||-1!=Y().indexOf("Trident")||-1!=Y().indexOf("MSIE")||-1!=Y().indexOf("Edge"));function je(h,_,E){for(const M in h)_.call(E,h[M],M,h)}function L(h){const _={};for(const E in h)_[E]=h[E];return _}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(h,_){let E,M;for(let X=1;X<arguments.length;X++){for(E in M=arguments[X],M)h[E]=M[E];for(let he=0;he<B.length;he++)E=B[he],Object.prototype.hasOwnProperty.call(M,E)&&(h[E]=M[E])}}function Q(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function te(h){a.setTimeout(()=>{throw h},0)}function $(){var h=Zt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var yu=new class q{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Xe,h=>h.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,ct=!1,Zt=new class uo{constructor(){this.h=this.g=null}add(_,E){const M=yu.get();M.set(_,E),this.h?this.h.next=M:this.g=M,this.h=M}},xr=()=>{const h=a.Promise.resolve(void 0);ot=()=>{h.then(lo)}};var lo=()=>{for(var h;h=$();){try{h.h.call(h.g)}catch(E){te(E)}var _=yu;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ct=!1};function Er(){this.s=this.s,this.C=this.C}function Qn(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Er.prototype.s=!1,Er.prototype.ma=function(){this.s||(this.s=!0,this.N())},Er.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Qn.prototype.h=function(){this.defaultPrevented=!0};var Yn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function vu(h,_){if(Qn.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,M=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ae){e:{try{oe(_.nodeName);var X=!0;break e}catch{}X=!1}X||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,M?(this.clientX=void 0!==M.clientX?M.clientX:M.pageX,this.clientY=void 0!==M.clientY?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:jS[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&vu.aa.h.call(this)}}T(vu,Qn);var jS={2:"touch",3:"pen",4:"mouse"};vu.prototype.h=function(){vu.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ir="closure_listenable_"+(1e6*Math.random()|0),nc=0;function As(h,_,E,M,X){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!M,this.ha=X,this.key=++nc,this.da=this.fa=!1}function rc(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Eu(h){this.src=h,this.g={},this.h=0}function $S(h,_){var E=_.type;if(E in h.g){var he,M=h.g[E],X=Array.prototype.indexOf.call(M,_,void 0);(he=0<=X)&&Array.prototype.splice.call(M,X,1),he&&(rc(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function zS(h,_,E,M){for(var X=0;X<h.length;++X){var he=h[X];if(!he.da&&he.listener==_&&he.capture==!!E&&he.ha==M)return X}return-1}Eu.prototype.add=function(h,_,E,M,X){var he=h.toString();(h=this.g[he])||(h=this.g[he]=[],this.h++);var Ue=zS(h,_,M,X);return-1<Ue?(_=h[Ue],E||(_.fa=!1)):((_=new As(_,this.src,he,!!M,X)).fa=E,h.push(_)),_};var HS="closure_lm_"+(1e6*Math.random()|0),qS={};function K$(h,_,E,M,X){if(M&&M.once)return Q$(h,_,E,M,X);if(Array.isArray(_)){for(var he=0;he<_.length;he++)K$(h,_[he],E,M,X);return null}return E=ZS(E),h&&h[Ir]?h.K(_,E,u(M)?!!M.capture:!!M,X):Z$(h,_,E,!1,M,X)}function Z$(h,_,E,M,X,he){if(!_)throw Error("Invalid event type");var Ue=u(X)?!!X.capture:!!X,On=WS(h);if(On||(h[HS]=On=new Eu(h)),(E=On.add(_,E,M,Ue,he)).proxy)return E;if(M=function Pce(){const _=xce;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=M,M.src=h,M.listener=E,h.addEventListener)Yn||(X=Ue),void 0===X&&(X=!1),h.addEventListener(_.toString(),M,X);else if(h.attachEvent)h.attachEvent(X$(_.toString()),M);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(M)}return E}function Q$(h,_,E,M,X){if(Array.isArray(_)){for(var he=0;he<_.length;he++)Q$(h,_[he],E,M,X);return null}return E=ZS(E),h&&h[Ir]?h.L(_,E,u(M)?!!M.capture:!!M,X):Z$(h,_,E,!0,M,X)}function Y$(h,_,E,M,X){if(Array.isArray(_))for(var he=0;he<_.length;he++)Y$(h,_[he],E,M,X);else M=u(M)?!!M.capture:!!M,E=ZS(E),h&&h[Ir]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=zS(he=h.g[_],E,M,X))&&(rc(he[E]),Array.prototype.splice.call(he,E,1),0==he.length&&(delete h.g[_],h.h--))):h&&(h=WS(h))&&(_=h.g[_.toString()],h=-1,_&&(h=zS(_,E,M,X)),(E=-1<h?_[h]:null)&&GS(E))}function GS(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Ir])$S(_.i,h);else{var E=h.type,M=h.proxy;_.removeEventListener?_.removeEventListener(E,M,h.capture):_.detachEvent?_.detachEvent(X$(E),M):_.addListener&&_.removeListener&&_.removeListener(M),(E=WS(_))?($S(E,h),0==E.h&&(E.src=null,_[HS]=null)):rc(h)}}}function X$(h){return h in qS?qS[h]:qS[h]="on"+h}function xce(h,_){if(h.da)h=!0;else{_=new vu(_,this);var E=h.listener,M=h.ha||h.src;h.fa&&GS(h),h=E.call(M,_)}return h}function WS(h){return(h=h[HS])instanceof Eu?h:null}var KS="__closure_events_fn_"+(1e9*Math.random()>>>0);function ZS(h){return"function"==typeof h?h:(h[KS]||(h[KS]=function(_){return h.handleEvent(_)}),h[KS])}function Bi(){Er.call(this),this.i=new Eu(this),this.M=this,this.F=null}function os(h,_){var E,M=h.F;if(M)for(E=[];M;M=M.F)E.push(M);if(h=h.M,M=_.type||_,"string"==typeof _)_=new Qn(_,h);else if(_ instanceof Qn)_.target=_.target||h;else{var X=_;G(_=new Qn(M,h),X)}if(X=!0,E)for(var he=E.length-1;0<=he;he--){var Ue=_.g=E[he];X=qI(Ue,M,!0,_)&&X}if(X=qI(Ue=_.g=h,M,!0,_)&&X,X=qI(Ue,M,!1,_)&&X,E)for(he=0;he<E.length;he++)X=qI(Ue=_.g=E[he],M,!1,_)&&X}function qI(h,_,E,M){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var X=!0,he=0;he<_.length;++he){var Ue=_[he];if(Ue&&!Ue.da&&Ue.capture==E){var On=Ue.listener,wi=Ue.ha||Ue.src;Ue.fa&&$S(h.i,Ue),X=!1!==On.call(wi,M)&&X}}return X&&!M.defaultPrevented}function J$(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function ez(h){h.g=J$(()=>{h.g=null,h.i&&(h.i=!1,ez(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(Bi,Er),Bi.prototype[Ir]=!0,Bi.prototype.removeEventListener=function(h,_,E,M){Y$(this,h,_,E,M)},Bi.prototype.N=function(){if(Bi.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],M=0;M<E.length;M++)rc(E[M]);delete h.g[_],h.h--}}this.F=null},Bi.prototype.K=function(h,_,E,M){return this.i.add(String(h),_,!1,E,M)},Bi.prototype.L=function(h,_,E,M){return this.i.add(String(h),_,!0,E,M)};class Nce extends Er{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ez(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zm(h){Er.call(this),this.h=h,this.g={}}T(Zm,Er);var tz=[];function nz(h){je(h.g,function(_,E){this.g.hasOwnProperty(E)&&GS(_)},h),h.g={}}Zm.prototype.N=function(){Zm.aa.N.call(this),nz(this)},Zm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var QS=a.JSON.stringify,Oce=a.JSON.parse,kce=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function YS(){}function iz(){}YS.prototype.h=null;var Qm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function XS(){Qn.call(this,"d")}function JS(){Qn.call(this,"c")}T(XS,Qn),T(JS,Qn);var Gl={},sz=null;function GI(){return sz=sz||new Bi}function oz(h){Qn.call(this,Gl.La,h)}function Ym(h){const _=GI();os(_,new oz(_))}function az(h,_){Qn.call(this,Gl.STAT_EVENT,h),this.stat=_}function as(h){const _=GI();os(_,new az(_,h))}function cz(h,_){Qn.call(this,Gl.Ma,h),this.size=_}function Xm(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Jm(){this.g=!0}function Af(h,_,E,M){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Uce(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var M=E[h];if(!(2>M.length)){var X=M[1];if(Array.isArray(X)&&!(1>X.length)){var he=X[0];if("noop"!=he&&"stop"!=he&&"close"!=he)for(var Ue=1;Ue<X.length;Ue++)X[Ue]=""}}}return QS(E)}catch{return _}}(h,E)+(M?" "+M:"")})}Gl.La="serverreachability",T(oz,Qn),Gl.STAT_EVENT="statevent",T(az,Qn),Gl.Ma="timingevent",T(cz,Qn),Jm.prototype.xa=function(){this.g=!1},Jm.prototype.info=function(){};var eR,WI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function KI(){}function Iu(h,_,E,M){this.j=h,this.i=_,this.l=E,this.R=M||1,this.U=new Zm(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lz}function lz(){this.i=null,this.g="",this.h=!1}T(KI,YS),KI.prototype.g=function(){return new XMLHttpRequest},KI.prototype.i=function(){return{}},eR=new KI;var dz={},tR={};function nR(h,_,E){h.L=1,h.v=XI(ic(_)),h.m=E,h.P=!0,hz(h,null)}function hz(h,_){h.F=Date.now(),ZI(h),h.A=ic(h.v);var E=h.A,M=h.R;Array.isArray(M)||(M=[String(M)]),Az(E.i,"t",M),h.C=0,E=h.j.J,h.h=new lz,h.g=Hz(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Nce(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,M=h.ca;var X="readystatechange";Array.isArray(X)||(X&&(tz[0]=X.toString()),X=tz);for(var he=0;he<X.length;he++){var Ue=K$(E,X[he],M||_.handleEvent,!1,_.h||_);if(!Ue)break;_.g[Ue.key]=Ue}_=h.H?L(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Ym(),function Fce(h,_,E,M,X,he){h.info(function(){if(h.g)if(he)for(var Ue="",On=he.split("&"),wi=0;wi<On.length;wi++){var ln=On[wi].split("=");if(1<ln.length){var ji=ln[0];ln=ln[1];var $i=ji.split("_");Ue=2<=$i.length&&"type"==$i[1]?Ue+(ji+"=")+ln+"&":Ue+(ji+"=redacted&")}}else Ue=null;else Ue=he;return"XMLHTTP REQ ("+M+") [attempt "+X+"]: "+_+"\n"+E+"\n"+Ue})}(h.i,h.u,h.A,h.l,h.R,h.m)}function fz(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Bce(h,_){var E=h.C,M=_.indexOf("\n",E);return-1==M?tR:(E=Number(_.substring(E,M)),isNaN(E)?dz:(M+=1)+E>_.length?tR:(_=_.slice(M,M+E),h.C=M+E,_))}function ZI(h){h.S=Date.now()+h.I,pz(h,h.I)}function pz(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Xm(y(h.ba,h),_)}function rR(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function e_(h){0==h.j.G||h.J||Bz(h.j,h)}function Wl(h){rR(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,nz(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function iR(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||sR(E.h,h)))if(!h.K&&sR(E.h,h)&&3==E.G){try{var M=E.Da.g.parse(_)}catch{M=null}if(Array.isArray(M)&&3==M.length){var X=M;if(0==X[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;rb(E),tb(E)}uR(E),as(18)}}else E.za=X[1],0<E.za-E.T&&37500>X[2]&&E.F&&0==E.v&&!E.C&&(E.C=Xm(y(E.Za,E),6e3));if(1>=_z(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Zl(E,11)}else if((h.K||E.g==h)&&rb(E),!j(_))for(X=E.Da.g.parse(_),_=0;_<X.length;_++){let ln=X[_];if(E.T=ln[0],ln=ln[1],2==E.G)if("c"==ln[0]){E.K=ln[1],E.ia=ln[2];const ji=ln[3];null!=ji&&(E.la=ji,E.j.info("VER="+E.la));const $i=ln[4];null!=$i&&(E.Aa=$i,E.j.info("SVER="+E.Aa));const Rf=ln[5];null!=Rf&&"number"==typeof Rf&&0<Rf&&(E.L=M=1.5*Rf,E.j.info("backChannelRequestTimeoutMs_="+M)),M=E;const Do=h.g;if(Do){const sb=Do.g?Do.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sb){var he=M.h;he.g||-1==sb.indexOf("spdy")&&-1==sb.indexOf("quic")&&-1==sb.indexOf("h2")||(he.j=he.l,he.g=new Set,he.h&&(oR(he,he.h),he.h=null))}if(M.D){const dR=Do.g?Do.g.getResponseHeader("X-HTTP-Session-Id"):null;dR&&(M.ya=dR,Xn(M.I,M.D,dR))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ue=h;if((M=E).qa=zz(M,M.J?M.ia:null,M.W),Ue.K){yz(M.h,Ue);var On=Ue,wi=M.L;wi&&(On.I=wi),On.B&&(rR(On),ZI(On)),M.g=Ue}else Vz(M);0<E.i.length&&nb(E)}else"stop"!=ln[0]&&"close"!=ln[0]||Zl(E,7);else 3==E.G&&("stop"==ln[0]||"close"==ln[0]?"stop"==ln[0]?Zl(E,7):cR(E):"noop"!=ln[0]&&E.l&&E.l.ta(ln),E.v=0)}Ym()}catch{}}function gz(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mz(h){return!!h.h||!!h.g&&h.g.size>=h.j}function _z(h){return h.h?1:h.g?h.g.size:0}function sR(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function oR(h,_){h.g?h.g.add(_):h.h=_}function yz(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function vz(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return N(h.i)}function Ez(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function zce(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const M in h)_[E++]=M;return _}}}(h),M=function $ce(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,M=0;M<E;M++)_.push(h[M]);return _}for(M in _=[],E=0,h)_[E++]=h[M];return _}(h),X=M.length,he=0;he<X;he++)_.call(void 0,M[he],E&&E[he],h)}Iu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==sc(h)?_.j():this.Y(h)},Iu.prototype.Y=function(h){try{if(h==this.g)e:{const $i=sc(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>$i)&&(3!=$i||this.g&&(this.h.h||this.g.oa()||Nz(this.g)))){this.J||4!=$i||7==_||Ym(),rR(this);var E=this.g.Z();this.X=E;t:if(fz(this)){var M=Nz(this.g);h="";var X=M.length,he=4==sc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wl(this),e_(this);var Ue="";break t}this.h.i=new a.TextDecoder}for(_=0;_<X;_++)this.h.h=!0,h+=this.h.i.decode(M[_],{stream:!(he&&_==X-1)});M.length=0,this.h.g+=h,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=200==E,function Lce(h,_,E,M,X,he,Ue){h.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+X+"]: "+_+"\n"+E+"\n"+he+" "+Ue})}(this.i,this.u,this.A,this.l,this.R,$i,E),this.o){if(this.T&&!this.K){t:{if(this.g){var On,wi=this.g;if((On=wi.g?wi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(On)){var ln=On;break t}}ln=null}if(!(E=ln)){this.o=!1,this.s=3,as(12),Wl(this),e_(this);break e}Af(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iR(this,E)}if(this.P){let Do;for(E=!0;!this.J&&this.C<Ue.length;){if(Do=Bce(this,Ue),Do==tR){4==$i&&(this.s=4,as(14),E=!1),Af(this.i,this.l,null,"[Incomplete Response]");break}if(Do==dz){this.s=4,as(15),Af(this.i,this.l,Ue,"[Invalid Chunk]"),E=!1;break}Af(this.i,this.l,Do,null),iR(this,Do)}if(fz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$i||0!=Ue.length||this.h.h||(this.s=1,as(16),E=!1),this.o=this.o&&E,E){if(0<Ue.length&&!this.W){this.W=!0;var ji=this.j;ji.g==this&&ji.ba&&!ji.M&&(ji.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),lR(ji),ji.M=!0,as(11))}}else Af(this.i,this.l,Ue,"[Invalid Chunked Response]"),Wl(this),e_(this)}else Af(this.i,this.l,Ue,null),iR(this,Ue);4==$i&&Wl(this),this.o&&!this.J&&(4==$i?Bz(this.j,this):(this.o=!1,ZI(this)))}else(function rue(h){const _={};h=(h.g&&2<=sc(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let M=0;M<h.length;M++){if(j(h[M]))continue;var E=Q(h[M]);const X=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const he=_[X]||[];_[X]=he,he.push(E)}!function z(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(M){return M.join(", ")})})(this.g),400==E&&0<Ue.indexOf("Unknown SID")?(this.s=3,as(12)):(this.s=0,as(13)),Wl(this),e_(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Wl(this)},Iu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Vce(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Ym(),as(17)),Wl(this),this.s=2,e_(this)):pz(this,this.S-h)},gz.prototype.cancel=function(){if(this.i=vz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var Iz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Kl){this.h=h.h,QI(this,h.j),this.o=h.o,this.g=h.g,YI(this,h.s),this.l=h.l;var _=h.i,E=new r_;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),bz(this,E),this.m=h.m}else h&&(_=String(h).match(Iz))?(this.h=!1,QI(this,_[1]||"",!0),this.o=t_(_[2]||""),this.g=t_(_[3]||"",!0),YI(this,_[4]),this.l=t_(_[5]||"",!0),bz(this,_[6]||"",!0),this.m=t_(_[7]||"")):(this.h=!1,this.i=new r_(null,this.h))}function ic(h){return new Kl(h)}function QI(h,_,E){h.j=E?t_(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function YI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function bz(h,_,E){_ instanceof r_?(h.i=_,function Qce(h,_){_&&!h.j&&(bu(h),h.i=null,h.g.forEach(function(E,M){var X=M.toLowerCase();M!=X&&(Tz(this,M),Az(this,X,E))},h)),h.j=_}(h.i,h.h)):(E||(_=n_(_,Kce)),h.i=new r_(_,h.h))}function Xn(h,_,E){h.i.set(_,E)}function XI(h){return Xn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function t_(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function n_(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,qce),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qce(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Kl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(n_(_,wz,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(n_(_,wz,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(n_(E,"/"==E.charAt(0)?Wce:Gce,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",n_(E,Zce)),h.join("")};var h,wz=/[#\/\?@]/g,Gce=/[#\?:]/g,Wce=/[#\?]/g,Kce=/[#\?@]/g,Zce=/#/g;function r_(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function bu(h){h.g||(h.g=new Map,h.h=0,h.i&&function Hce(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var M=h[E].indexOf("="),X=null;if(0<=M){var he=h[E].substring(0,M);X=h[E].substring(M+1)}else he=h[E];_(he,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function Tz(h,_){bu(h),_=Df(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Cz(h,_){return bu(h),_=Df(h,_),h.g.has(_)}function Az(h,_,E){Tz(h,_),0<E.length&&(h.i=null,h.g.set(Df(h,_),N(E)),h.h+=E.length)}function Df(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function wu(h,_,E,M,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),M(E)}catch{}}function Jce(){this.g=new kce}function eue(h,_,E){const M=E||"";try{Ez(h,function(X,he){let Ue=X;u(X)&&(Ue=QS(X)),_.push(M+he+"="+encodeURIComponent(Ue))})}catch(X){throw _.push(M+"type="+encodeURIComponent("_badmap")),X}}function i_(h){this.l=h.Ub||null,this.j=h.eb||!1}function JI(h,_){Bi.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dz(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function s_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,o_(h)}function o_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function Sz(h){let _="";return je(h,function(E,M){_+=M,_+=":",_+=E,_+="\r\n"}),_}function aR(h,_,E){e:{for(M in E){var M=!1;break e}M=!0}M||(E=Sz(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Xn(h,_,E))}function br(h){Bi.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=r_.prototype).add=function(h,_){bu(this),this.i=null,h=Df(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){bu(this),this.g.forEach(function(E,M){E.forEach(function(X){h.call(_,X,M,this)},this)},this)},n.na=function(){bu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let M=0;M<_.length;M++){const X=h[M];for(let he=0;he<X.length;he++)E.push(_[M])}return E},n.V=function(h){bu(this);let _=[];if("string"==typeof h)Cz(this,h)&&(_=_.concat(this.g.get(Df(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return bu(this),this.i=null,Cz(this,h=Df(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var M=_[E];const he=encodeURIComponent(String(M)),Ue=this.V(M);for(M=0;M<Ue.length;M++){var X=he;""!==Ue[M]&&(X+="="+encodeURIComponent(String(Ue[M]))),h.push(X)}}return this.i=h.join("&")},T(i_,YS),i_.prototype.g=function(){return new JI(this.l,this.j)},i_.prototype.i=(h={},function(){return h}),T(JI,Bi),(n=JI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,o_(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,s_(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,o_(this)),this.g&&(this.readyState=3,o_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dz(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?s_(this):o_(this),3==this.readyState&&Dz(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,s_(this))},n.Qa=function(h){this.g&&(this.response=h,s_(this))},n.ga=function(){this.g&&s_(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(JI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(br,Bi);var tue=/^https?$/i,nue=["POST","PUT"];function Rz(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Mz(h),eb(h)}function Mz(h){h.A||(h.A=!0,os(h,"complete"),os(h,"error"))}function Pz(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=sc(h)||2!=h.Z()))if(h.u&&4==sc(h))J$(h.Ea,0,h);else if(os(h,"readystatechange"),4==sc(h)){h.h=!1;try{const Ue=h.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var M;if(M=0===Ue){var X=String(h.D).match(Iz)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),M=!tue.test(X?X.toLowerCase():"")}E=M}if(E)os(h,"complete"),os(h,"success");else{h.m=6;try{var he=2<sc(h)?h.g.statusText:""}catch{he=""}h.l=he+" ["+h.Z()+"]",Mz(h)}}finally{eb(h)}}}function eb(h,_){if(h.g){xz(h);const E=h.g,M=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||os(h,"ready");try{E.onreadystatechange=M}catch{}}}function xz(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function sc(h){return h.g?h.g.readyState:0}function Nz(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function a_(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Oz(h){this.Aa=0,this.i=[],this.j=new Jm,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=a_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=a_("baseRetryDelayMs",5e3,h),this.cb=a_("retryDelaySeedMs",1e4,h),this.Wa=a_("forwardChannelMaxRetries",2,h),this.wa=a_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new gz(h&&h.concurrentRequestLimit),this.Da=new Jce,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function cR(h){if(kz(h),3==h.G){var _=h.U++,E=ic(h.I);if(Xn(E,"SID",h.K),Xn(E,"RID",_),Xn(E,"TYPE","terminate"),c_(h,E),(_=new Iu(h,h.j,_)).L=2,_.v=XI(ic(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=Hz(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ZI(_)}$z(h)}function tb(h){h.g&&(lR(h),h.g.cancel(),h.g=null)}function kz(h){tb(h),h.u&&(a.clearTimeout(h.u),h.u=null),rb(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function nb(h){if(!mz(h.h)&&!h.s){h.s=!0;var _=h.Ga;ot||xr(),ct||(ot(),ct=!0),Zt.add(_,h),h.B=0}}function Fz(h,_){var E;E=_?_.l:h.U++;const M=ic(h.I);Xn(M,"SID",h.K),Xn(M,"RID",E),Xn(M,"AID",h.T),c_(h,M),h.m&&h.o&&aR(M,h.m,h.o),E=new Iu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Lz(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),oR(h.h,E),nR(E,M,_)}function c_(h,_){h.H&&je(h.H,function(E,M){Xn(_,M,E)}),h.l&&Ez({},function(E,M){Xn(_,M,E)})}function Lz(h,_,E){E=Math.min(h.i.length,E);var M=h.l?y(h.l.Na,h.l,h):null;e:{var X=h.i;let he=-1;for(;;){const Ue=["count="+E];-1==he?0<E?(he=X[0].g,Ue.push("ofs="+he)):he=0:Ue.push("ofs="+he);let On=!0;for(let wi=0;wi<E;wi++){let ln=X[wi].g;const ji=X[wi].map;if(ln-=he,0>ln)he=Math.max(0,X[wi].g-100),On=!1;else try{eue(ji,Ue,"req"+ln+"_")}catch{M&&M(ji)}}if(On){M=Ue.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,M}function Vz(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ot||xr(),ct||(ot(),ct=!0),Zt.add(_,h),h.v=0}}function uR(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Xm(y(h.Fa,h),jz(h,h.v)),h.v++,0))}function lR(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function Uz(h){h.g=new Iu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ic(h.qa);Xn(_,"RID","rpc"),Xn(_,"SID",h.K),Xn(_,"AID",h.T),Xn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xn(_,"TO",h.ja),Xn(_,"TYPE","xmlhttp"),c_(h,_),h.m&&h.o&&aR(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=XI(ic(_)),E.m=null,E.P=!0,hz(E,h)}function rb(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function Bz(h,_){var E=null;if(h.g==_){rb(h),lR(h),h.g=null;var M=2}else{if(!sR(h.h,_))return;E=_.D,yz(h.h,_),M=1}if(0!=h.G)if(_.o)if(1==M){E=_.m?_.m.length:0,_=Date.now()-_.F;var X=h.B;os(M=GI(),new cz(M,E)),nb(h)}else Vz(h);else if(3==(X=_.s)||0==X&&0<_.X||!(1==M&&function iue(h,_){return!(_z(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Xm(y(h.Ga,h,_),jz(h,h.B)),h.B++,0)))}(h,_)||2==M&&uR(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),X){case 1:Zl(h,5);break;case 4:Zl(h,10);break;case 3:Zl(h,6);break;default:Zl(h,2)}}function jz(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Zl(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),M=h.Xa;const X=!M;M=new Kl(M||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||QI(M,"https"),XI(M),X?function Yce(h,_){const E=new Jm;if(a.Image){const M=new Image;M.onload=I(wu,E,"TestLoadImage: loaded",!0,_,M),M.onerror=I(wu,E,"TestLoadImage: error",!1,_,M),M.onabort=I(wu,E,"TestLoadImage: abort",!1,_,M),M.ontimeout=I(wu,E,"TestLoadImage: timeout",!1,_,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=h}else _(!1)}(M.toString(),E):function Xce(h,_){new Jm;const M=new AbortController,X=setTimeout(()=>{M.abort(),wu(0,0,!1,_)},1e4);fetch(h,{signal:M.signal}).then(he=>{clearTimeout(X),wu(0,0,!!he.ok,_)}).catch(()=>{clearTimeout(X),wu(0,0,!1,_)})}(M.toString(),E)}else as(2);h.G=0,h.l&&h.l.sa(_),$z(h),kz(h)}function $z(h){if(h.G=0,h.ka=[],h.l){const _=vz(h.h);(0!=_.length||0!=h.i.length)&&(O(h.ka,_),O(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function zz(h,_,E){var M=E instanceof Kl?ic(E):new Kl(E);if(""!=M.g)_&&(M.g=_+"."+M.g),YI(M,M.s);else{var X=a.location;M=X.protocol,_=_?_+"."+X.hostname:X.hostname,X=+X.port;var he=new Kl(null);M&&QI(he,M),_&&(he.g=_),X&&YI(he,X),E&&(he.l=E),M=he}return _=h.ya,(E=h.D)&&_&&Xn(M,E,_),Xn(M,"VER",h.la),c_(h,M),M}function Hz(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new br(h.Ca&&!h.pa?new i_({eb:E}):h.pa)).Ha(h.J),_}function qz(){}function ib(){}function $s(h,_){Bi.call(this),this.g=new Oz(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!j(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Sf(this)}function Gz(h){XS.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function Wz(){JS.call(this),this.status=1}function Sf(h){this.g=h}(n=br.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eR.g(),this.v=function rz(h){return h.h||(h.h=h.i())}(this.o?this.o:eR),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(he){return void Rz(this,he)}if(h=E||"",E=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var X in M)E.set(X,M[X]);else{if("function"!=typeof M.keys||"function"!=typeof M.get)throw Error("Unknown input type for opt_headers: "+String(M));for(const he of M.keys())E.set(he,M.get(he))}M=Array.from(E.keys()).find(he=>"content-type"==he.toLowerCase()),X=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nue,_,void 0))||M||X||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ue]of E)this.g.setRequestHeader(he,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xz(this),this.u=!0,this.g.send(h),this.u=!1}catch(he){Rz(this,he)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,os(this,"complete"),os(this,"abort"),eb(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eb(this,!0)),br.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pz(this):this.bb())},n.bb=function(){Pz(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<sc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Oce(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Oz.prototype).la=8,n.G=1,n.connect=function(h,_,E,M){as(0),this.W=h,this.H=_||{},E&&void 0!==M&&(this.H.OSID=E,this.H.OAID=M),this.F=this.X,this.I=zz(this,null,this.W),nb(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const X=new Iu(this,this.j,h);let he=this.o;if(this.S&&(he?(he=L(he),G(he,this.S)):he=this.S),null!==this.m||this.O||(X.H=he,he=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var M=this.i[E];if(void 0===(M="__data__"in M.map&&"string"==typeof(M=M.map.__data__)?M.length:void 0))break;if(4096<(_+=M)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Lz(this,X,_),Xn(E=ic(this.I),"RID",h),Xn(E,"CVER",22),this.D&&Xn(E,"X-HTTP-Session-Id",this.D),c_(this,E),he&&(this.O?_="headers="+encodeURIComponent(String(Sz(he)))+"&"+_:this.m&&aR(E,this.m,he)),oR(this.h,X),this.Ua&&Xn(E,"TYPE","init"),this.P?(Xn(E,"$req",_),Xn(E,"SID","null"),X.T=!0,nR(X,E,null)):nR(X,E,_),this.G=2}}else 3==this.G&&(h?Fz(this,h):0==this.i.length||mz(this.h)||Fz(this))},n.Fa=function(){if(this.u=null,Uz(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Xm(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,as(10),tb(this),Uz(this))},n.Za=function(){null!=this.C&&(this.C=null,tb(this),uR(this),as(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),as(2)):(this.j.info("Failed to ping google.com"),as(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=qz.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},ib.prototype.g=function(h,_){return new $s(h,_)},T($s,Bi),$s.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$s.prototype.close=function(){cR(this.g)},$s.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=QS(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&nb(_)},$s.prototype.N=function(){this.g.l=null,delete this.j,cR(this.g),delete this.g,$s.aa.N.call(this)},T(Gz,XS),T(Wz,JS),T(Sf,qz),Sf.prototype.ua=function(){os(this.g,"a")},Sf.prototype.ta=function(h){os(this.g,new Gz(h))},Sf.prototype.sa=function(h){os(this.g,new Wz)},Sf.prototype.ra=function(){os(this.g,"b")},ib.prototype.createWebChannel=ib.prototype.g,$s.prototype.send=$s.prototype.o,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,vL=$a.createWebChannelTransport=function(){return new ib},yL=$a.getStatEventTarget=function(){return GI()},_L=$a.Event=Gl,cC=$a.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},WI.NO_ERROR=0,WI.TIMEOUT=8,WI.HTTP_ERROR=6,lE=$a.ErrorCode=WI,uz.COMPLETE="complete",mL=$a.EventType=uz,iz.EventType=Qm,Qm.OPEN="a",Qm.CLOSE="b",Qm.ERROR="c",Qm.MESSAGE="d",Bi.prototype.listen=Bi.prototype.K,Ug=$a.WebChannel=iz,gL=$a.FetchXmlHttpFactory=i_,br.prototype.listenOnce=br.prototype.L,br.prototype.getLastError=br.prototype.Ka,br.prototype.getLastErrorCode=br.prototype.Ba,br.prototype.getStatus=br.prototype.Z,br.prototype.getResponseJson=br.prototype.Oa,br.prototype.getResponseText=br.prototype.oa,br.prototype.send=br.prototype.ea,br.prototype.setWithCredentials=br.prototype.Ha,pL=$a.XhrIo=br}).apply(typeof uE<"u"?uE:typeof self<"u"?self:typeof window<"u"?window:{});const EL="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let xh="10.12.1";const Kc=new Xo.Yd("@firebase/firestore");function Nh(){return Kc.logLevel}function Ce(n,...e){if(Kc.logLevel<=Xo.in.DEBUG){const t=e.map(uC);Kc.debug(`Firestore (${xh}): ${n}`,...t)}}function Mr(n,...e){if(Kc.logLevel<=Xo.in.ERROR){const t=e.map(uC);Kc.error(`Firestore (${xh}): ${n}`,...t)}}function ws(n,...e){if(Kc.logLevel<=Xo.in.WARN){const t=e.map(uC);Kc.warn(`Firestore (${xh}): ${n}`,...t)}}function uC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ze(n="Unexpected state"){const e=`FIRESTORE (${xh}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function tt(n,e){n||Ze()}function Ve(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class IL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class rX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iX{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ti,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,me.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ti)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt("string"==typeof r.accessToken),new IL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tt(null===e||"string"==typeof e),new ui(e)}}class sX{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oX{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new sX(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt("string"==typeof t.token),this.R=t.token,new bL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cX(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=cX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function Oh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TL(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class st{constructor(e){this.timestamp=e}static fromTimestamp(e){return new st(e)}static min(){return new st(new tr(0,0))}static max(){return new st(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bg{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ze(),void 0===r?r=e.length-t:r>e.length-t&&Ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Bg{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const uX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends Bg{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return uX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Jt.fromString(e))}static fromName(e){return new Be(Jt.fromString(e).popFirst(5))}static empty(){return new Be(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Jt(e.slice()))}}class kh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function lC(n){return n.fields.find(e=>2===e.kind)}function pl(n){return n.fields.filter(e=>2!==e.kind)}kh.UNKNOWN_ID=-1;class gl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fh(0,Ls.min())}}function CL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=st.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Ls(i,Be.empty(),e)}function AL(n){return new Ls(n.readTime,n.key,-1)}class Ls{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ls(st.min(),Be.empty(),-1)}static max(){return new Ls(st.max(),Be.empty(),-1)}}function dC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const DL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Zc(n){return hC.apply(this,arguments)}function hC(){return(hC=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==DL)throw n;Ce("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class dE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ti,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new jg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=fC(r.target.error);this.V.reject(new jg(e,i))}}static open(e,t,r,i){try{return new dE(t,e.transaction(i,r))}catch(s){throw new jg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fX(t)}}class Jo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Jo.S((0,St.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ce("SimpleDb","Removing database:",e),ml(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,St.hl)())return!1;if(Jo.C())return!0;const e=(0,St.z$)(),t=Jo.S(e),r=0<t&&t<10,i=RL(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,me.Z)(function*(){return t.db||(Ce("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new jg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new we(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new we(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new jg(e,a))},s.onupgradeneeded=o=>{Ce("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ce("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,me.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=dE.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),J.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(Ce("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function RL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class hX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ml(this.B.delete())}}class jg extends we{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qc(n){return"IndexedDbTransactionError"===n.name}class fX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ml(r)}add(e){return Ce("SimpleDb","ADD",this.store.name,e,e),ml(this.store.add(e))}get(e){return ml(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ce("SimpleDb","DELETE",this.store.name,e),ml(this.store.delete(e))}count(){return Ce("SimpleDb","COUNT",this.store.name),ml(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new J((r,i)=>{t.onerror=s=>{const o=fC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new hX(a),u=t(a.primaryKey,a.value,c);if(u instanceof J){const f=u.catch(m=>(c.done(),J.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ml(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=fC(r.target.error);t(i)}})}let ML=!1;function fC(n){const e=Jo.S((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new we("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ML||(ML=!0,setTimeout(()=>{throw r},0)),r}}return n}class pX{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Ce("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Qc(r)?Ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Zc(r)}yield t.X(6e4)}))}}class gX{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return J.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ce("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ce("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=AL(s);dC(o,r)>0&&(r=o)}),new Ls(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Vs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function $g(n){return null==n}function zg(n){return 0===n&&1/n==-1/0}function PL(n){return"number"==typeof n&&Number.isInteger(n)&&!zg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Oi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xL(e)),e=mX(n.get(t),e);return xL(e)}function mX(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function xL(n){return n+"\x01\x01"}function ea(n){const e=n.length;if(tt(e>=2),2===e)return tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ze(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ze()}s=o+2}return new Jt(r)}const NL=["userId","batchId"];function hE(n,e){return[n,Oi(e)]}function OL(n,e,t){return[n,Oi(e),t]}const _X={},yX=["prefixPath","collectionGroup","readTime","documentId"],vX=["prefixPath","collectionGroup","documentId"],EX=["collectionGroup","readTime","prefixPath","documentId"],IX=["canonicalId","targetId"],bX=["targetId","path"],wX=["path","targetId"],TX=["collectionId","parent"],CX=["indexId","uid"],AX=["uid","sequenceNumber"],DX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SX=["indexId","uid","orderedDocumentKey"],RX=["userId","collectionPath","documentId"],MX=["userId","collectionPath","largestBatchId"],PX=["userId","collectionGroup","largestBatchId"],kL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xX=[...kL,"documentOverlays"],FL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LL=FL,VL=[...LL,"indexConfiguration","indexState","indexEntries"],NX=VL;class pC extends SL{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function li(n,e){const t=Ve(n);return Jo.F(t._e,e)}function UL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fE(this.root,e,this.comparator,!1)}getReverseIterator(){return new fE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fE(this.root,e,this.comparator,!0)}}class fE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ei.RED,this.left=i??Ei.EMPTY,this.right=s??Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ei(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const e=this.left.check();if(e!==this.right.check())throw Ze();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $L(this.data.getIterator())}getIteratorFrom(e){return new $L(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class $L{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lh(n){return n.hasNext()?n.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new Rn(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zL("Invalid base64 string: "+s):s}}(e);return new ni(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const kX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(n){if(tt(!!n),"string"==typeof n){let e=0;const t=kX.exec(n);if(tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yr(n.seconds),nanos:yr(n.nanos)}}function yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ha(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function pE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gE(n){const e=n.mapValue.fields.__previous_value__;return pE(e)?gE(e):e}function Hg(n){const e=za(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class FX{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}const Jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mE={nullValue:"NULL_VALUE"};function eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pE(n)?4:WL(n)?9007199254740991:10:Ze()}function ta(n,e){if(n===e)return!0;const t=eu(n);if(t!==eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hg(n).isEqual(Hg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=za(i.timestampValue),a=za(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ha(n.bytesValue).isEqual(Ha(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return yr(i.geoPointValue.latitude)===yr(s.geoPointValue.latitude)&&yr(i.geoPointValue.longitude)===yr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return yr(i.integerValue)===yr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=yr(i.doubleValue),a=yr(s.doubleValue);return o===a?zg(o)===zg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Oh(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UL(o)!==UL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!ta(o[c],a[c])))return!1;return!0}(n,e);default:return Ze()}var s}function qg(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function tu(n,e){if(n===e)return 0;const t=eu(n),r=eu(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=yr(s.integerValue||s.doubleValue),c=yr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return HL(n.timestampValue,e.timestampValue);case 4:return HL(Hg(n),Hg(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ha(s),c=Ha(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=Tt(a[u],c[u]);if(0!==f)return f}return Tt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(yr(s.latitude),yr(o.latitude));return 0!==a?a:Tt(yr(s.longitude),yr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const f=tu(a[u],c[u]);if(f)return f}return Tt(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Jc.mapValue&&o===Jc.mapValue)return 0;if(s===Jc.mapValue)return 1;if(o===Jc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=Tt(c[m],f[m]);if(0!==y)return y;const I=tu(a[c[m]],u[f[m]]);if(0!==I)return I}return Tt(c.length,f.length)}(n.mapValue,e.mapValue);default:throw Ze()}}function HL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=za(n),r=za(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function Vh(n){return gC(n)}function gC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=za(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ha(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=gC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gC(t.fields[o])}`;return i+"}"}(n.mapValue):Ze()}function _l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mC(n){return!!n&&"integerValue"in n}function Gg(n){return!!n&&"arrayValue"in n}function qL(n){return!!n&&"nullValue"in n}function GL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yE(n){return!!n&&"mapValue"in n}function Wg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function LX(n){return"nullValue"in n?mE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_l(Xc.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ze()}function VX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_l(Xc.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jc:Ze()}function KL(n,e){const t=tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZL(n,e){const t=tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wg(t)}setAll(e){let t=Wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Wg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());yE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ii(Wg(this.value))}}function QL(n){const e=[];return Yc(n.fields,(t,r)=>{const i=new Wn([t]);if(yE(r)){const s=QL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ts(e)}class Kn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Kn(e,0,st.min(),st.min(),st.min(),Ii.empty(),0)}static newFoundDocument(e,t,r,i){return new Kn(e,1,t,st.min(),r,i,0)}static newNoDocument(e,t){return new Kn(e,2,t,st.min(),st.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,st.min(),st.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(st.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nu{constructor(e,t){this.position=e,this.inclusive=t}}function YL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),t.key):tu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function XL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class Kg{constructor(e,t="asc"){this.field=e,this.dir=t}}function UX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JL{}class en extends JL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new BX(e,t,r):"array-contains"===t?new zX(e,r):"in"===t?new sV(e,r):"not-in"===t?new HX(e,r):"array-contains-any"===t?new qX(e,r):new en(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new jX(e,r):new $X(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tu(t,this.value)):null!==t&&eu(this.value)===eu(t)&&this.matchesComparison(tu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends JL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Tn(e,t)}matches(e){return Uh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Uh(n){return"and"===n.op}function _C(n){return"or"===n.op}function yC(n){return eV(n)&&Uh(n)}function eV(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function vC(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+Vh(n.value);if(yC(n))return n.filters.map(e=>vC(e)).join(",");{const e=n.filters.map(t=>vC(t)).join(",");return`${n.op}(${e})`}}function tV(n,e){return n instanceof en?(r=n,(i=e)instanceof en&&r.op===i.op&&r.field.isEqual(i.field)&&ta(r.value,i.value)):n instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&tV(o,i.filters[a]),!0)}(n,e):void Ze();var r,i}function nV(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function rV(n){return n instanceof en?`${(t=n).field.canonicalString()} ${t.op} ${Vh(t.value)}`:n instanceof Tn?function(t){return t.op.toString()+" {"+t.getFilters().map(rV).join(" ,")+"}"}(n):"Filter";var t}class BX extends en{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class jX extends en{constructor(e,t){super(e,"in",t),this.keys=iV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $X extends en{constructor(e,t){super(e,"not-in",t),this.keys=iV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class zX extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gg(t)&&qg(t.arrayValue,this.value)}}class sV extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qg(this.value.arrayValue,t)}}class HX extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(qg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qg(this.value.arrayValue,t)}}class qX extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qg(this.value.arrayValue,r))}}class GX{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function EC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new GX(n,e,t,r,i,s,o)}function yl(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),$g(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),e.ue=t}return e.ue}function Zg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XL(n.startAt,e.startAt)&&XL(n.endAt,e.endAt)}function vE(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function EE(n,e){return n.filters.filter(t=>t instanceof en&&t.field.isEqual(e))}function oV(n,e,t){let r=mE,i=!0;for(const s of EE(n,e)){let o=mE,a=!0;switch(s.op){case"<":case"<=":o=LX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=mE}KL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];KL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function aV(n,e,t){let r=Jc,i=!0;for(const s of EE(n,e)){let o=Jc,a=!0;switch(s.op){case">=":case">":o=VX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jc}ZL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ZL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class qa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function cV(n,e,t,r,i,s,o,a){return new qa(n,e,t,r,i,s,o,a)}function Bh(n){return new qa(n)}function uV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function IC(n){return null!==n.collectionGroup}function jh(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rn(Wn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Kg(s,r))}),t.has(Wn.keyField().canonicalString())||e.ce.push(new Kg(Wn.keyField(),r))}return e.ce}function ki(n){const e=Ve(n);return e.le||(e.le=function dV(n,e){if("F"===n.limitType)return EC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Kg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new nu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nu(n.startAt.position,n.startAt.inclusive):null;return EC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,jh(n))),e.le}function bC(n,e){const t=n.filters.concat([e]);return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IE(n,e,t){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qg(n,e){return Zg(ki(n),ki(e))&&n.limitType===e.limitType}function hV(n){return`${yl(ki(n))}|lt:${n.limitType}`}function $h(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rV(i)).join(", ")}]`),$g(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vh(i)).join(",")),`Target(${r})`}(ki(n))}; limitType=${n.limitType})`}function Yg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of jh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=YL(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,jh(r),i)||r.endAt&&!function(o,a,c){const u=YL(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,jh(r),i)));var r,i}function fV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pV(n){return(e,t)=>{let r=!1;for(const i of jh(n)){const s=WX(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function WX(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?tu(c,u):Ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ze()}}class Ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jL(this.inner)}size(){return this.innerSize}}const KX=new jn(Be.comparator);function Cs(){return KX}const gV=new jn(Be.comparator);function Xg(...n){let e=gV;for(const t of n)e=e.insert(t.key,t);return e}function mV(n){let e=gV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function na(){return Jg()}function _V(){return Jg()}function Jg(){return new Ga(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZX=new jn(Be.comparator),QX=new Rn(Be.comparator);function kt(...n){let e=QX;for(const t of n)e=e.add(t);return e}const YX=new Rn(Tt);function wC(){return YX}function yV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zg(e)?"-0":e}}function vV(n){return{integerValue:""+n}}function EV(n,e){return PL(e)?vV(e):yV(n,e)}class bE{constructor(){this._=void 0}}function XX(n,e,t){return n instanceof zh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pE(s)&&(s=gE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof vl?bV(n,e):n instanceof El?wV(n,e):function(i,s){const o=IV(i,s),a=TV(o)+TV(i.Pe);return mC(o)&&mC(i.Pe)?vV(a):yV(i.serializer,a)}(n,e)}function JX(n,e,t){return n instanceof vl?bV(n,e):n instanceof El?wV(n,e):t}function IV(n,e){return n instanceof Hh?mC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class zh extends bE{}class vl extends bE{constructor(e){super(),this.elements=e}}function bV(n,e){const t=CV(e);for(const r of n.elements)t.some(i=>ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class El extends bE{constructor(e){super(),this.elements=e}}function wV(n,e){let t=CV(e);for(const r of n.elements)t=t.filter(i=>!ta(i,r));return{arrayValue:{values:t}}}class Hh extends bE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function TV(n){return yr(n.integerValue||n.doubleValue)}function CV(n){return Gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class em{constructor(e,t){this.field=e,this.transform=t}}class tJ{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class TE{}function AV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gh(n.key,nr.none()):new qh(n.key,n.data,nr.none());{const t=n.data,r=Ii.empty();let i=new Rn(Wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Wa(n.key,r,new Ts(i.toArray()),nr.none())}}function nJ(n,e,t){n instanceof qh?function(i,s,o){const a=i.value.clone(),c=RV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Wa?function(i,s,o){if(!wE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=RV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(SV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tm(n,e,t,r){return n instanceof qh?function(s,o,a,c){if(!wE(s.precondition,o))return a;const u=s.value.clone(),f=MV(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wa?function(s,o,a,c){if(!wE(s.precondition,o))return a;const u=MV(s.fieldTransforms,c,o),f=o.data;return f.setAll(SV(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,wE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function rJ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=IV(r.transform,i||null);null!=s&&(null===t&&(t=Ii.empty()),t.set(r.field,s))}return t||null}function DV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Oh(r,i,(s,o)=>function eJ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof vl&&i instanceof vl||r instanceof El&&i instanceof El?Oh(r.elements,i.elements,ta):r instanceof Hh&&i instanceof Hh?ta(r.Pe,i.Pe):r instanceof zh&&i instanceof zh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class qh extends TE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wa extends TE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function RV(n,e,t){const r=new Map;tt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,JX(o,a,t[i]))}return r}function MV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,XX(s,o,e))}return r}class Gh extends TE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TC extends TE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nJ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=tm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=tm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_V();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=AV(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&Oh(this.mutations,e.mutations,(t,r)=>DV(t,r))&&Oh(this.baseMutations,e.baseMutations,(t,r)=>DV(t,r))}}class AC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tt(e.mutations.length===r.length);let i=ZX;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AC(e,t,r,i)}}class DC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class iJ{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,on;function xV(n){switch(n){default:return Ze();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function NV(n){if(void 0===n)return Mr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case qr.OK:return ce.OK;case qr.CANCELLED:return ce.CANCELLED;case qr.UNKNOWN:return ce.UNKNOWN;case qr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case qr.INTERNAL:return ce.INTERNAL;case qr.UNAVAILABLE:return ce.UNAVAILABLE;case qr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case qr.NOT_FOUND:return ce.NOT_FOUND;case qr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case qr.ABORTED:return ce.ABORTED;case qr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case qr.DATA_LOSS:return ce.DATA_LOSS;default:return Ze()}}(on=qr||(qr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";function OV(){return new TextEncoder}const sJ=new fl([4294967295,4294967295],0);function kV(n){const e=OV().encode(n),t=new fL;return t.update(e),new Uint8Array(t.digest())}function FV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fl([t,r],0),new fl([i,s],0)]}class SC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nm(`Invalid padding: ${t}`);if(r<0)throw new nm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new nm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new nm(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fl.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(fl.fromNumber(r)));return 1===i.compare(sJ)&&(i=new fl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=kV(e),[r,i]=FV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new SC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=kV(e),[r,i]=FV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,im.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rm(st.min(),i,new jn(Tt),Cs(),kt())}}class im{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new im(r,t,kt(),kt(),kt())}}class AE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class LV{constructor(e,t){this.targetId=e,this.me=t}}class VV{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UV{constructor(){this.fe=0,this.ge=jV(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=kt(),t=kt(),r=kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ze()}}),new im(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=jV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cs(),this.qe=BV(),this.Qe=new jn(Tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(vE(s))if(0===r){const o=new Be(s.path);this.Ue(t,o,Kn.newNoDocument(o,st.min()))}else tt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Ha(r).toUint8Array()}catch(c){if(c instanceof zL)return ws("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new SC(o,i,s)}catch(c){return ws(c instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vE(a.target)){const c=new Be(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Kn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=kt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rm(e,t,this.Qe,this.ke,r);return this.ke=Cs(),this.qe=BV(),this.Qe=new jn(Tt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new UV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rn(Tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function BV(){return new jn(Be.comparator)}function jV(){return new jn(Be.comparator)}const aJ={asc:"ASCENDING",desc:"DESCENDING"},cJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uJ={and:"AND",or:"OR"};class lJ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RC(n,e){return n.useProto3Json||$g(e)?e:{value:e}}function Wh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $V(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dJ(n,e){return Wh(n,e.toTimestamp())}function Pr(n){return tt(!!n),st.fromTimestamp(function(t){const r=za(t);return new tr(r.seconds,r.nanos)}(n))}function MC(n,e){return PC(n,e).canonicalString()}function PC(n,e){const t=(i=n,new Jt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function zV(n){const e=Jt.fromString(n);return tt(e2(e)),e}function sm(n,e){return MC(n.databaseId,e.path)}function ra(n,e){const t=zV(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(GV(t))}function HV(n,e){return MC(n.databaseId,e)}function qV(n){const e=zV(n);return 4===e.length?Jt.emptyPath():GV(e)}function xC(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GV(n){return tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function WV(n,e,t){return{name:sm(n,e),fields:t.value.mapValue.fields}}function KV(n,e,t){const r=ra(n,e.name),i=Pr(e.updateTime),s=e.createTime?Pr(e.createTime):st.min(),o=new Ii({mapValue:{fields:e.fields}}),a=Kn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function om(n,e){let t;if(e instanceof qh)t={update:WV(n,e.key,e.value)};else if(e instanceof Gh)t={delete:sm(n,e.key)};else if(e instanceof Wa)t={update:WV(n,e.key,e.data),updateMask:vJ(e.fieldMask)};else{if(!(e instanceof TC))return Ze();t={verify:sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof zh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof El)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ze()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:dJ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ze()),t;var s}function NC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?nr.updateTime(Pr(s.updateTime)):void 0!==s.exists?nr.exists(s.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(tt("REQUEST_TIME"===a.setToServerValue),c=new zh):"appendMissingElements"in a?c=new vl(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new El(a.removeAllFromArray.values||[]):"increment"in a?c=new Hh(o,a.increment):Ze();const u=Wn.fromServerFormat(a.fieldPath);return new em(u,c)}(n,i)):[];var s;if(e.update){const i=ra(n,e.update.name),s=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ts((e.updateMask.fieldPaths||[]).map(f=>Wn.fromServerFormat(f)));return new Wa(i,s,o,t,r)}return new qh(i,s,t,r)}if(e.delete){const i=ra(n,e.delete);return new Gh(i,t)}if(e.verify){const i=ra(n,e.verify);return new TC(i,t)}return Ze()}function ZV(n,e){return{documents:[HV(n,e.path)]}}function DE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HV(n,i);const s=function(u){if(0!==u.length)return JV(Tn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:ru((y=f).field),direction:mJ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=RC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function YV(n){let e=qV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tt(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=XV(m);return y instanceof Tn&&yC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Kg(Kh((T=y).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,$g(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new nu((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new nu(m.values||[],!m.before)}(t.endAt)),cV(e,i,o,s,a,"F",c,u)}function XV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Kh(t.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kh(t.unaryFilter.field);return en.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kh(t.unaryFilter.field);return en.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kh(t.unaryFilter.field);return en.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ze()}}(n):void 0!==n.fieldFilter?en.create(Kh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ze()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Tn.create(t.compositeFilter.filters.map(r=>XV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ze()}}(t.compositeFilter.op))}(n):Ze();var t}function mJ(n){return aJ[n]}function _J(n){return cJ[n]}function yJ(n){return uJ[n]}function ru(n){return{fieldPath:n.canonicalString()}}function Kh(n){return Wn.fromServerFormat(n.fieldPath)}function JV(n){return n instanceof en?function(t){if("=="===t.op){if(GL(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NAN"}};if(qL(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(GL(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NAN"}};if(qL(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(t.field),op:_J(t.op),value:t.value}}}(n):n instanceof Tn?function(t){const r=t.getFilters().map(i=>JV(i));return 1===r.length?r[0]:{compositeFilter:{op:yJ(t.op),filters:r}}}(n):Ze()}function vJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ka{constructor(e,t,r,i,s=st.min(),o=st.min(),a=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t2{constructor(e){this.ct=e}}function n2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:SE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sm(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Wh(s,o.version.toTimestamp()),createTime:Wh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Il(e.version)};else{if(!e.isUnknownDocument())return Ze();r.unknownDocument={path:t.path.toArray(),version:Il(e.version)}}var s,o;return r}function SE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bl(n){const e=new tr(n.seconds,n.nanoseconds);return st.fromTimestamp(e)}function wl(n,e){const t=(e.baseMutations||[]).map(s=>NC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>NC(n.ct,s)),i=tr.fromMillis(e.localWriteTimeMs);return new CC(e.batchId,i,t,r)}function am(n){const e=bl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bl(n.lastLimboFreeSnapshotVersion):st.min();let r;return r=void 0!==n.query.documents?(tt(1===(s=n.query).documents.length),ki(Bh(qV(s.documents[0])))):function(s){return ki(YV(s))}(n.query),new Ka(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken));var s}function r2(n,e){const t=Il(e.snapshotVersion),r=Il(e.lastLimboFreeSnapshotVersion);let i;i=vE(e.target)?ZV(n.ct,e.target):DE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OC(n){const e=YV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?IE(e,e.limit,"L"):e}function kC(n,e){return new DC(e.largestBatchId,NC(n.ct,e.overlayMutation))}function i2(n,e){const t=e.path.lastSegment();return[n,Oi(e.path.popLast()),t]}function s2(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Il(r.readTime),documentKey:Oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class IJ{getBundleMetadata(e,t){return o2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:bl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return o2(e).put({bundleId:(i=t).id,createTime:Il(Pr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return a2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:OC(s.bundledQuery),readTime:bl(s.readTime)};var s})}saveNamedQuery(e,t){return a2(e).put({name:(i=t).name,readTime:Il(Pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function o2(n){return li(n,"bundles")}function a2(n){return li(n,"namedQueries")}class RE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new RE(e,t.uid||"")}getOverlay(e,t){return cm(e).get(i2(this.userId,t)).next(r=>r?kC(this.serializer,r):null)}getOverlays(e,t){const r=na();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new DC(t,o);i.push(this.ht(e,a))}),J.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Oi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(cm(e).j("collectionPathOverlayIndex",a))}),J.waitFor(s)}getOverlaysForCollection(e,t,r){const i=na(),s=Oi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cm(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=kC(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=na();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cm(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=kC(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return cm(e).put(function(i,s,o){const[a,c,u]=i2(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:om(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function cm(n){return li(n,"documentOverlays")}class Tl{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(yr(e.integerValue));else if("doubleValue"in e){const r=yr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),zg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=za(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ha(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?WL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ze()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function bJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function c2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=bJ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Tl.bt=new Tl;class wJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=c2(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=c2(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class TJ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class CJ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class um{constructor(){this.Gt=new wJ,this.zt=new TJ(this.Gt),this.jt=new CJ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Cl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cl(this.indexId,this.documentKey,this.arrayValue,r)}}function iu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=u2(n.arrayValue,e.arrayValue),0!==t?t:(t=u2(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function u2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class l2{constructor(e){this.Yt=new Rn((t,r)=>Wn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(tt(e.collectionGroup===this.collectionId),this.en)return!1;const t=lC(e);if(void 0!==t&&!this.nn(t))return!1;const r=pl(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Rn(Wn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new gl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gl(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gl(r.field,"asc"===r.dir?0:1)));return new kh(kh.UNKNOWN_ID,this.collectionId,t,Fh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function d2(n){var e,t;if(tt(n instanceof en||n instanceof Tn),n instanceof en){if(n instanceof sV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>en.create(n.field,"==",s)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>d2(i));return Tn.create(r,n.op)}function AJ(n){if(0===n.getFilters().length)return[];const e=VC(d2(n));return tt(h2(e)),FC(e)||LC(e)?[e]:e.getFilters()}function FC(n){return n instanceof en}function LC(n){return n instanceof Tn&&yC(n)}function h2(n){return FC(n)||LC(n)||function(t){if(t instanceof Tn&&_C(t)){for(const r of t.getFilters())if(!FC(r)&&!LC(r))return!1;return!0}return!1}(n)}function VC(n){if(tt(n instanceof en||n instanceof Tn),n instanceof en)return n;if(1===n.filters.length)return VC(n.filters[0]);const e=n.filters.map(r=>VC(r));let t=Tn.create(e,n.op);return t=ME(t),h2(t)?t:(tt(t instanceof Tn),tt(Uh(t)),tt(t.filters.length>1),t.filters.reduce((r,i)=>UC(r,i)))}function UC(n,e){let t;return tt(n instanceof en||n instanceof Tn),tt(e instanceof en||e instanceof Tn),t=n instanceof en?e instanceof en?Tn.create([n,e],"and"):f2(n,e):e instanceof en?f2(e,n):function(i,s){if(tt(i.filters.length>0&&s.filters.length>0),Uh(i)&&Uh(s))return nV(i,s.getFilters());const o=_C(i)?i:s,a=_C(i)?s:i,c=o.filters.map(u=>UC(u,a));return Tn.create(c,"or")}(n,e),ME(t)}function f2(n,e){if(Uh(e))return nV(e,n.getFilters());{const t=e.filters.map(r=>UC(n,r));return Tn.create(t,"or")}}function ME(n){if(tt(n instanceof en||n instanceof Tn),n instanceof en)return n;const e=n.getFilters();if(1===e.length)return ME(e[0]);if(eV(n))return n;const t=e.map(i=>ME(i)),r=[];return t.forEach(i=>{i instanceof en?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class DJ{constructor(){this._n=new BC}addToCollectionParentIndex(e,t){return this._n.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Ls.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class BC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(Jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(Jt.comparator)).toArray()}}const PE=new Uint8Array(0);class SJ{constructor(e,t){this.databaseId=t,this.an=new BC,this.un=new Ga(r=>yl(r),(r,i)=>Zg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Oi(i)};return p2(e).put(s)}return J.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[TL(t),""],!1,!0);return p2(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ea(o.parent))}return r})}addFieldIndex(e,t){const r=lm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Qh(e);return s.next(a=>{o.put(s2(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=lm(e),i=Qh(e),s=Zh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=lm(e),r=Zh(e),i=Qh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return J.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new l2(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Zh(e);let i=!0;const s=new Map;return J.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=kt();const a=[];return J.forEach(s,(c,u)=>{var Y;Ce("IndexedDbIndexManager",`Using index ${Y=c,`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${yl(t)}`);const f=function(Y,oe){const Ae=lC(oe);if(void 0===Ae)return null;for(const je of EE(Y,Ae.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(u,c),m=function(Y,oe){const Ae=new Map;for(const je of pl(oe))for(const z of EE(Y,je.fieldPath))switch(z.op){case"==":case"in":Ae.set(je.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return Ae.set(je.fieldPath.canonicalString(),z.value),Array.from(Ae.values())}return null}(u,c),y=function(Y,oe){const Ae=[];let je=!0;for(const z of pl(oe)){const L=0===z.kind?oV(Y,z.fieldPath,Y.startAt):aV(Y,z.fieldPath,Y.startAt);Ae.push(L.value),je&&(je=L.inclusive)}return new nu(Ae,je)}(u,c),I=function(Y,oe){const Ae=[];let je=!0;for(const z of pl(oe)){const L=0===z.kind?aV(Y,z.fieldPath,Y.endAt):oV(Y,z.fieldPath,Y.endAt);Ae.push(L.value),je&&(je=L.inclusive)}return new nu(Ae,je)}(u,c),T=this.hn(c,u,y),N=this.hn(c,u,I),O=this.Pn(c,u,m),q=this.In(c.indexId,f,T,y.inclusive,N,I.inclusive,O);return J.forEach(q,j=>r.G(j,t.limit).next(Y=>{Y.forEach(oe=>{const Ae=Be.fromSegments(oe.documentKey);o.has(Ae)||(o=o.add(Ae),a.push(Ae))})}))}).next(()=>a)}return J.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:AJ(Tn.create(e.filters,"and")).map(r=>EC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.Tn(t[m/u]):PE,I=this.En(e,y,r[m%u],i),T=this.dn(e,y,s[m%u],o),N=a.map(O=>this.En(e,y,O,!0));f.push(...this.createRange(I,T,N))}return f}En(e,t,r,i){const s=new Cl(e,Be.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Cl(e,Be.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new l2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return J.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new Rn(Wn.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:u=u.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new um;for(const i of pl(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Tl.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new um;return Tl.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new um;return Tl.bt.Pt(_l(this.databaseId,t),r.Ht(function(s){const o=pl(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new um);let s=0;for(const o of pl(e)){const a=r[s++];for(const c of i)if(this.Vn(t,o.fieldPath)&&Gg(a))i=this.mn(i,o,a);else{const u=c.Ht(o.kind);Tl.bt.Pt(a,u)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new um;c.seed(a.Wt()),Tl.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof en&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lm(e),i=Qh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return J.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const y=m?new Fh(m.sequenceNumber,new Ls(bl(m.readTime),new Be(ea(m.documentKey)),m.largestBatchId)):Fh.empty(),I=f.fields.map(([T,N])=>new gl(Wn.fromServerFormat(T),N));return new kh(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lm(e),s=Qh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>J.forEach(a,c=>s.put(s2(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?J.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),J.forEach(a,c=>this.pn(e,i,c).next(u=>{const f=this.yn(s,c);return u.isEqual(f)?J.resolve():this.wn(e,s,c,u,f)}))))})}Sn(e,t,r,i){return Zh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Zh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Zh(e);let s=new Rn(iu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Cl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Rn(iu);const i=this.An(t,e);if(null==i)return r;const s=lC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Gg(o))for(const a of o.arrayValue.values||[])r=r.add(new Cl(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Cl(t.indexId,e.key,PE,i));return r}wn(e,t,r,i,s){Ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,y){const I=c.getIterator(),T=u.getIterator();let N=Lh(I),O=Lh(T);for(;N||O;){let q=!1,j=!1;if(N&&O){const Y=f(N,O);Y<0?j=!0:Y>0&&(q=!0)}else null!=N?j=!0:q=!0;q?(m(O),O=Lh(T)):j?(y(N),N=Lh(I)):(N=Lh(I),O=Lh(T))}}(i,s,iu,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),J.waitFor(o)}gn(e){let t=1;return Qh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>iu(o,a)).filter((o,a,c)=>!a||0!==iu(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=iu(o,e),c=iu(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,PE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,PE,[]]))}return s}Dn(e,t){return iu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(g2)}getMinOffset(e,t){return J.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ze())).next(g2)}}function p2(n){return li(n,"collectionParents")}function Zh(n){return li(n,"indexEntries")}function lm(n){return li(n,"indexConfiguration")}function Qh(n){return li(n,"indexState")}function g2(n){tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;dC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ls(e.readTime,e.documentKey,t)}const m2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(c.next(()=>{tt(1===a)}));const u=[];for(const f of t.mutations){const m=OL(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return J.waitFor(s).next(()=>u)}function xE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ze();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class NE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){tt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new NE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return su(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Yh(e),o=su(e);return o.add({}).next(a=>{tt("number"==typeof a);const c=new CC(a,t,r,i),u=function(I,T,N){const O=N.baseMutations.map(j=>om(I.ct,j)),q=N.mutations.map(j=>om(I.ct,j));return{userId:T,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:q}}(this.serializer,this.userId,c),f=[];let m=new Rn((y,I)=>Tt(y.canonicalString(),I.canonicalString()));for(const y of i){const I=OL(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(u)),f.push(s.put(I,_X))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),J.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return su(e).get(t).next(r=>r?(tt(r.userId===this.userId),wl(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?J.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return su(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(tt(a.batchId>=r),s=wl(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return su(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return su(e).U("userMutationsIndex",t).next(r=>r.map(i=>wl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=hE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Yh(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,y=ea(f);if(u===this.userId&&t.path.isEqual(y))return su(e).get(m).next(I=>{if(!I)throw Ze();tt(I.userId===this.userId),s.push(wl(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Tt);const i=[];return t.forEach(s=>{const o=hE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Yh(e).J({range:a},(u,f,m)=>{const[y,I,T]=u,N=ea(I);y===this.userId&&s.path.isEqual(N)?r=r.add(T):m.done()});i.push(c)}),J.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=hE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Rn(Tt);return Yh(e).J({range:o},(c,u,f)=>{const[m,y,I]=c,T=ea(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(I)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(su(e).get(s).next(o=>{if(null===o)throw Ze();tt(o.userId===this.userId),r.push(wl(this.serializer,o))}))}),J.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),J.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Yh(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=ea(s[1]);i.push(c)}else a.done()}).next(()=>{tt(0===i.length)})})}containsKey(e,t){return y2(e,this.userId,t)}xn(e){return v2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function y2(n,e,t){const r=hE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Yh(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function su(n){return li(n,"mutations")}function Yh(n){return li(n,"documentMutations")}function v2(n){return li(n,"mutationQueues")}class Al{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Al(0)}static Ln(){return new Al(-1)}}class RJ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Al(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>st.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(tt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Xh(e).J((o,a)=>{const c=am(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>J.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Xh(e).J((r,i)=>{const s=am(i);t(s)})}Bn(e){return E2(e).get("targetGlobalKey").next(t=>(tt(null!==t),t))}kn(e,t){return E2(e).put("targetGlobalKey",t)}qn(e,t){return Xh(e).put(r2(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Xh(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=am(a);Zg(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ou(e);return t.forEach(o=>{const a=Oi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),J.waitFor(i)}removeMatchingKeys(e,t,r){const i=ou(e);return J.forEach(t,s=>{const o=Oi(s.path);return J.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ou(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ou(e);let s=kt();return i.J({range:r,H:!0},(o,a,c)=>{const u=ea(o[1]),f=new Be(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=Oi(t.path),i=IDBKeyRange.bound([r],[TL(r)],!1,!0);let s=0;return ou(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Xh(e).get(t).next(r=>r?am(r):null)}}function Xh(n){return li(n,"targets")}function E2(n){return li(n,"targetGlobal")}function ou(n){return li(n,"targetDocuments")}function I2([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class MJ{constructor(e){this.Kn=e,this.buffer=new Rn(I2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();I2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Qc(r)?Ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Zc(r)}yield t.zn(3e5)}))}}class PJ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(Vs.oe);const r=new MJ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(m2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Nh()<=Xo.in.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class xJ{constructor(e,t){this.db=e,this.garbageCollector=function w2(n,e){return new PJ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return OE(e,r)}removeReference(e,t,r){return OE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return OE(e,t)}er(e,t){return function(i,s){let o=!1;return v2(i).Y(a=>y2(i,a,s).next(c=>(c&&(o=!0),J.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,st.min()),ou(e).delete([0,Oi(o.path)])))});i.push(c)}}).next(()=>J.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return OE(e,t)}Xn(e,t){const r=ou(e);let i,s=Vs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==Vs.oe&&t(new Be(ea(i)),s),s=u,i=c):s=Vs.oe}).next(()=>{s!==Vs.oe&&t(new Be(ea(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function OE(n,e){return ou(n).put((i=n.currentSequenceNumber,{targetId:0,path:Oi(e.path),sequenceNumber:i}));var i}class T2{constructor(){this.changes=new Ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Dl(e).put(r)}removeEntry(e,t,r){return Dl(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],SE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return Dl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return Dl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(i,s)=>{r={document:this.nr(t,s),size:xE(s)}}).next(()=>r)}getEntries(e,t){let r=Cs();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Cs(),i=new jn(Be.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,xE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return J.resolve();let i=new Rn(S2);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(dm(i.first()),dm(i.last())),o=i.getIterator();let a=o.getNext();return Dl(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Be.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&S2(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(dm(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),SE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dl(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=Cs();for(const m of u){const y=this.nr(Be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Yg(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Cs();const o=D2(t,r),a=D2(t,Ls.max());return Dl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.nr(Be.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new OJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return A2(e).get("remoteDocumentGlobalKey").next(t=>(tt(!!t),t))}tr(e,t){return A2(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function EJ(n,e){let t;if(e.document)t=KV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=bl(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ze();{const r=Be.fromSegments(e.unknownDocument.path),i=bl(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new tr(i[0],i[1]);return st.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(st.min()))return r}return Kn.newInvalidDocument(e)}}function C2(n){return new NJ(n)}class OJ extends T2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ga(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Rn((s,o)=>Tt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=n2(this.ar.serializer,o);i=i.add(s.path.popLast());const u=xE(c);r+=u-a.size,t.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=n2(this.ar.serializer,o.convertToNoDocument(st.min()));t.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function A2(n){return li(n,"remoteDocumentGlobal")}function Dl(n){return li(n,"remoteDocumentsV14")}function dm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D2(n,e){const t=e.documentKey.path.toArray();return[n,SE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function S2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Tt(t[s],r[s]),i)return i;return i=Tt(t.length,r.length),i||(i=Tt(t[t.length-2],r[r.length-2]),i||Tt(t[t.length-1],r[r.length-1]))}class kJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class R2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&tm(r.mutation,i,Ts.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Xg();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Cs();const o=Jg(),a=Jg();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof Wa)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),tm(f.mutation,u,f.mutation.getFieldMask(),tr.now())):o.set(u.key,Ts.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new kJ(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Jg();let i=new jn((o,a)=>o-a),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||Ts.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||kt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=_V();f.forEach(y=>{if(!s.has(y)){const I=AV(t.get(y),r.get(y));null!==I&&m.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):IC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(na());let a=-1,c=s;return o.next(u=>J.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?J.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,kt())).next(f=>({batchId:a,changes:mV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=Xg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Xg();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,c=>{const u=(m=t,y=c.child(s),new qa(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,Kn.newInvalidDocument(f)))});let a=Xg();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&tm(f.mutation,u,Ts.empty(),tr.now()),Yg(t,u)&&(a=a.insert(c,u))}),a})}}class FJ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return J.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Pr(i.createTime)}),J.resolve();var i}getNamedQuery(e,t){return J.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:OC(i.bundledQuery),readTime:Pr(i.readTime)}),J.resolve();var i}}class LJ{constructor(){this.overlays=new jn(Be.comparator),this.hr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=na();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=na(),s=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new jn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=na(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=na(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return J.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DC(t,r));let s=this.hr.get(t);void 0===s&&(s=kt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class jC{constructor(){this.Pr=new Rn(di.Ir),this.Tr=new Rn(di.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new di(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new di(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Be(new Jt([])),r=new di(t,e),i=new di(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Be(new Jt([])),r=new di(t,e),i=new di(t,e+1);let s=kt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new di(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Be.comparator(e.key,t.key)||Tt(e.pr,t.pr)}static Er(e,t){return Tt(e.pr,t.pr)||Be.comparator(e.key,t.key)}}class VJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Rn(di.Ir)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new CC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new di(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Tt);return t.forEach(i=>{const s=new di(i,0),o=new di(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),J.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new di(new Be(s),0);let a=new Rn(Tt);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),J.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){tt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return J.forEach(t.mutations,i=>{const s=new di(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new di(t,0),i=this.wr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return J.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UJ{constructor(e){this.vr=e,this.docs=new jn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=Cs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Kn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Cs();const o=t.path,a=new Be(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||dC(AL(f),r)<=0||(i.has(f.key)||Yg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ze()}Fr(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BJ(this)}getSize(e){return J.resolve(this.size)}}class BJ extends T2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class jJ{constructor(e){this.persistence=e,this.Mr=new Ga(t=>yl(t),Zg),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Or=0,this.Nr=new jC,this.targetCount=0,this.Lr=Al.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),J.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.qn(t),J.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Nr.containsKey(t))}}class $C{constructor(e,t){this.Br={},this.overlays={},this.kr=new Vs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new jJ(this),this.indexManager=new DJ,this.remoteDocumentCache=new UJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new t2(t),this.$r=new FJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new VJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ce("MemoryPersistence","Starting transaction:",e);const i=new $J(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return J.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class $J extends SL{constructor(e){super(),this.currentSequenceNumber=e}}class kE{constructor(e){this.persistence=e,this.zr=new jC,this.jr=null}static Hr(e){return new kE(e)}get Jr(){if(this.jr)return this.jr;throw Ze()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),J.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Jr,r=>{const i=Be.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,st.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return J.or([()=>J.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class zJ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new dE("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NL,{unique:!0}),c.createObjectStore("documentMutations"),M2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=J.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),M2(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NL,{unique:!0});const m=u.store("mutations"),y=f.map(I=>m.put(I));return J.waitFor(y)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:RX});u.createIndex("collectionPathOverlayIndex",MX,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",PX,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:yX});u.createIndex("documentKeyIndex",vX),u.createIndex("collectionGroupIndex",EX)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:CX}).createIndex("sequenceNumberIndex",AX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:DX}).createIndex("documentKeyIndex",SX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=xE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>J.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>J.forEach(a,c=>{tt(c.userId===s.userId);const u=wl(this.serializer,c);return _2(e,s.userId,u).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new Jt(o),u=[0,Oi(c)];s.push(t.get(u).next(f=>f?J.resolve():t.put({targetId:0,path:Oi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>J.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:TX});const r=t.store("collectionParents"),i=new BC,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Oi(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Jt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=ea(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=am(i),o=r2(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Be(Jt.fromString(m.document.name).popFirst(5)):m.noDocument?Be.fromSegments(m.noDocument.path):m.unknownDocument?Be.fromSegments(m.unknownDocument.path):Ze()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>J.waitFor(i))}si(e,t){const r=t.store("mutations"),i=C2(this.serializer),s=new $C(kE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:kt();wl(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),J.forEach(a,(c,u)=>{const f=new ui(u),m=RE.lt(this.serializer,f),y=s.getIndexManager(f),I=NE.lt(f,this.serializer,y,s.referenceDelegate);return new R2(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new pC(t,Vs.oe),c).next()})})}}function M2(n){n.createObjectStore("targetDocuments",{keyPath:bX}).createIndex("documentTargetsIndex",wX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IX,{unique:!0}),n.createObjectStore("targetGlobal")}const zC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HC{constructor(e,t,r,i,s,o,a,c,u,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!HC.D())throw new we(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xJ(this,i),this.Ti=t+"main",this.serializer=new t2(c),this.Ei=new Jo(this.Ti,this.ui,new zJ(this.serializer)),this.Qr=new RJ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=C2(this.serializer),this.$r=new IJ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new we(ce.FAILED_PRECONDITION,zC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Vs(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>LE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Qc(e))return Ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return hm(e).get("owner").next(t=>J.resolve(this.Si(t)))}bi(e){return LE(e).delete(this.clientId)}Di(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return J.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?J.resolve(!0):hm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new we(ce.FAILED_PRECONDITION,zC);return!1}}return!(!this.networkEnabled||!this.inForeground)||LE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pC(t,Vs.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>LE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return NE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return RE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ce("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(c=this.ui)?NX:15===c?VL:14===c?LL:13===c?FL:12===c?xX:11===c?kL:void Ze();var c;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new pC(a,this.kr?this.kr.next():Vs.oe),"readwrite-primary"===t?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new we(ce.FAILED_PRECONDITION,DL);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return hm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new we(ce.FAILED_PRECONDITION,zC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hm(e).put("owner",t)}static D(){return Jo.D()}yi(e){const t=hm(e);return t.get("owner").next(r=>this.Si(r)?(Ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,St.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hm(n){return li(n,"owner")}function LE(n){return li(n,"clientMetadata")}function qC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=kt(),i=kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new GC(e,t.fromCache,r,i)}}class HJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class P2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,St.G6)()?8:RL((0,St.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new HJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Nh()<=Xo.in.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",$h(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),J.resolve()):(Nh()<=Xo.in.DEBUG&&Ce("QueryEngine","Query:",$h(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Nh()<=Xo.in.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",$h(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):J.resolve())}ji(e,t){if(uV(t))return J.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=IE(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=kt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,IE(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,i){return uV(t)||i.isEqual(st.min())?J.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?J.resolve(null):(Nh()<=Xo.in.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$h(t)),this.es(e,o,t,CL(i,-1)).next(a=>a))})}Zi(e,t){let r=new Rn(pV(e));return t.forEach((i,s)=>{Yg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Nh()<=Xo.in.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",$h(t)),this.zi.getDocumentsMatchingQuery(e,t,Ls.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class qJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new jn(Tt),this.rs=new Ga(s=>yl(s),Zg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function x2(n,e,t,r){return new qJ(n,e,t,r)}function N2(n,e){return WC.apply(this,arguments)}function WC(){return(WC=(0,me.Z)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=kt();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function O2(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function k2(n,e,t){let r=kt(),i=kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Cs();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(st.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function KJ(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jh(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ka(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function ef(n,e,t){return KC.apply(this,arguments)}function KC(){return(KC=(0,me.Z)(function*(n,e,t){const r=Ve(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qc(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function VE(n,e,t){const r=Ve(n);let i=st.min(),s=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=Ve(c),y=m.rs.get(f);return void 0!==y?J.resolve(m.ns.get(y)):m.Qr.getTargetData(u,f)}(r,o,ki(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:st.min(),t?s:kt())).next(a=>(V2(r,fV(e),a),{documents:a,hs:s})))}function F2(n,e){const t=Ve(n),r=Ve(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function L2(n,e){const t=Ve(n),r=t.ss.get(e)||st.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,CL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(V2(t,e,i),i))}function V2(n,e,t){let r=n.ss.get(e)||st.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function ZC(){return(ZC=(0,me.Z)(function*(n,e,t,r){const i=Ve(n);let s=kt(),o=Cs();for(const u of t){const f=e.Ps(u.metadata.name);u.document&&(s=s.add(f));const m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Jh(i,(f=r,ki(Bh(Jt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>k2(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function QJ(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,me.Z)(function*(n,e,t=kt()){const r=yield Jh(n,ki(OC(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Pr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(ni.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function U2(n,e){return`firestore_clients_${n}_${e}`}function B2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function YC(n,e){return`firestore_targets_${n}_${e}`}class UE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new we(i.error.code,i.error.message))),o?new UE(e,t,i.state,s):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new we(r.error.code,r.error.message))),s?new fm(e,r.state,i):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class BE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=wC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=PL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new BE(e,s):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class XC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new XC(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class JC{constructor(){this.activeTargetIds=wC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eA{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new jn(Tt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=U2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new JC),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(U2(e.persistenceKey,i));if(s){const o=BE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(YC(this.persistenceKey,e));if(r){const i=fm.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(YC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ce("SharedClientState","READ",e,t),t}setItem(e,t){Ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ce("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Vs.oe;if(null!=o)try{const c=JSON.parse(o);tt("number"==typeof c),a=c}catch(c){Mr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Vs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new UE(this.currentUser,e,t,r),s=B2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=B2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=YC(this.persistenceKey,e),s=new fm(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return BE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return UE.Es(new ui(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return fm.Es(i,t)}xs(e){return XC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=wC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class j2{constructor(){this.no=new JC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new JC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YJ{io(e){}shutdown(){}}class $2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jE=null;function tA(){return null===jE?jE=268435456+Math.round(2147483648*Math.random()):jE++,"0x"+jE.toString(16)}const XJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Li="WebChannelConnection";class eee extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=tA(),c=this.vo(t,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(t,c,u,i).then(f=>(Ce("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw ws("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${XJ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=tA();return new Promise((o,a)=>{const c=new pL;c.setWithCredentials(!0),c.listenOnce(mL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case lE.NO_ERROR:const f=c.getResponseJson();Ce(Li,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case lE.TIMEOUT:Ce(Li,`RPC '${e}' ${s} timed out`),a(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case lE.HTTP_ERROR:const m=c.getStatus();if(Ce(Li,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const T=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(q)>=0?q:ce.UNKNOWN}(I.status);a(new we(T,I.message))}else a(new we(ce.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Ce(Li,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ce(Li,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Oo(e,t,r){const i=tA(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vL(),a=yL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new gL({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Ce(Li,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let y=!1,I=!1;const T=new JJ({lo:O=>{I?Ce(Li,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(Ce(Li,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ce(Li,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},ho:()=>m.close()}),N=(O,q,j)=>{O.listen(q,Y=>{try{j(Y)}catch(oe){setTimeout(()=>{throw oe},0)}})};return N(m,Ug.EventType.OPEN,()=>{I||(Ce(Li,`RPC '${e}' stream ${i} transport opened.`),T.mo())}),N(m,Ug.EventType.CLOSE,()=>{I||(I=!0,Ce(Li,`RPC '${e}' stream ${i} transport closed`),T.po())}),N(m,Ug.EventType.ERROR,O=>{I||(I=!0,ws(Li,`RPC '${e}' stream ${i} transport errored:`,O),T.po(new we(ce.UNAVAILABLE,"The operation could not be completed")))}),N(m,Ug.EventType.MESSAGE,O=>{var q;if(!I){const j=O.data[0];tt(!!j);const oe=j.error||(null===(q=j[0])||void 0===q?void 0:q.error);if(oe){Ce(Li,`RPC '${e}' stream ${i} received error:`,oe);const Ae=oe.status;let je=function(B){const G=qr[B];if(void 0!==G)return NV(G)}(Ae),z=oe.message;void 0===je&&(je=ce.INTERNAL,z="Unknown error status: "+Ae+" with message "+oe.message),I=!0,T.po(new we(je,z)),m.close()}else Ce(Li,`RPC '${e}' stream ${i} received:`,j),T.yo(j)}}),N(a,_L.STAT_EVENT,O=>{O.stat===cC.PROXY?Ce(Li,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===cC.NOPROXY&&Ce(Li,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function z2(){return typeof window<"u"?window:null}function $E(){return typeof document<"u"?document:null}function pm(n){return new lJ(n,!0)}class nA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class H2{constructor(e,t,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new nA(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,me.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,me.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,me.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tee extends H2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function fJ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ze(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(tt(void 0===f||"string"==typeof f),ni.fromBase64String(f||"")):(tt(void 0===f||f instanceof Buffer||f instanceof Uint8Array),ni.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?ce.UNKNOWN:NV(u.code);return new we(f,u.message||"")}(o);t=new VV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ra(n,r.document.name),s=Pr(r.document.updateTime),o=r.document.createTime?Pr(r.document.createTime):st.min(),a=new Ii({mapValue:{fields:r.document.fields}}),c=Kn.newFoundDocument(i,s,o,a);t=new AE(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ra(n,r.document),s=r.readTime?Pr(r.readTime):st.min(),o=Kn.newNoDocument(i,s);t=new AE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ra(n,r.document);t=new AE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ze();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new iJ(i,s);t=new LV(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return st.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?Pr(o.readTime):st.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=xC(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=vE(c)?{documents:ZV(s,c)}:{query:DE(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$V(s,o.resumeToken);const u=RC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(st.min())>0){a.readTime=Wh(s,o.snapshotVersion.toTimestamp());const u=RC(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function gJ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=xC(this.serializer),t.removeTarget=e,this.i_(t)}}class nee extends H2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function pJ(n,e){return n&&n.length>0?(tt(void 0!==e),n.map(t=>function(i,s){let o=Pr(i.updateTime?i.updateTime:s);return o.isEqual(st.min())&&(o=Pr(s)),new tJ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.A_(r,t)}return tt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=xC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>om(this.serializer,r))};this.i_(t)}}class ree extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,PC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(ce.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,PC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ce.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class iee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Mr(t),this.y_=!1):Ce("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class see{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,me.Z)(function*(){var c;au(o)&&(Ce("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,me.Z)(function*(f){const m=Ve(f);m.M_.add(4),yield tf(m),m.N_.set("Unknown"),m.M_.delete(4),yield gm(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.N_=new iee(r,i)}}function gm(n){return rA.apply(this,arguments)}function rA(){return(rA=(0,me.Z)(function*(n){if(au(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function tf(n){return iA.apply(this,arguments)}function iA(){return(iA=(0,me.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function zE(n,e){const t=Ve(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),aA(t)?oA(t):sf(t).Xo()&&sA(t,e))}function nf(n,e){const t=Ve(n),r=sf(t);t.F_.delete(e),r.Xo()&&q2(t,e),0===t.F_.size&&(r.Xo()?r.n_():au(t)&&t.N_.set("Unknown"))}function sA(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sf(n).P_(e)}function q2(n,e){n.L_.xe(e),sf(n).I_(e)}function oA(n){n.L_=new oJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),sf(n).start(),n.N_.w_()}function aA(n){return au(n)&&!sf(n).Zo()&&n.F_.size>0}function au(n){return 0===Ve(n).M_.size}function G2(n){n.L_=void 0}function oee(n){return cA.apply(this,arguments)}function cA(){return(cA=(0,me.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function aee(n){return uA.apply(this,arguments)}function uA(){return(uA=(0,me.Z)(function*(n){n.F_.forEach((e,t)=>{sA(n,e)})})).apply(this,arguments)}function cee(n,e){return lA.apply(this,arguments)}function lA(){return(lA=(0,me.Z)(function*(n,e){G2(n),aA(n)?(n.N_.D_(e),oA(n)):n.N_.set("Unknown")})).apply(this,arguments)}function uee(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof VV&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HE(n,r)}else if(e instanceof AE?n.L_.Ke(e):e instanceof LV?n.L_.He(e):n.L_.We(e),!t.isEqual(st.min()))try{const r=yield O2(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.F_.get(c);if(!f)return;s.F_.set(c,f.withResumeToken(ni.EMPTY_BYTE_STRING,f.snapshotVersion)),q2(s,c);const m=new Ka(f.target,c,u,f.sequenceNumber);sA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),yield HE(n,r)}var r}),dA.apply(this,arguments)}function HE(n,e,t){return hA.apply(this,arguments)}function hA(){return(hA=(0,me.Z)(function*(n,e,t){if(!Qc(e))throw e;n.M_.add(1),yield tf(n),n.N_.set("Offline"),t||(t=()=>O2(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield gm(n)}))})).apply(this,arguments)}function W2(n,e){return e().catch(t=>HE(n,t,e))}function rf(n){return fA.apply(this,arguments)}function fA(){return(fA=(0,me.Z)(function*(n){const e=Ve(n),t=cu(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;lee(e);)try{const i=yield KJ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,dee(e,i)}catch(i){yield HE(e,i)}K2(e)&&Z2(e)})).apply(this,arguments)}function lee(n){return au(n)&&n.v_.length<10}function dee(n,e){n.v_.push(e);const t=cu(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function K2(n){return au(n)&&!cu(n).Zo()&&n.v_.length>0}function Z2(n){cu(n).start()}function hee(n){return pA.apply(this,arguments)}function pA(){return(pA=(0,me.Z)(function*(n){cu(n).V_()})).apply(this,arguments)}function fee(n){return gA.apply(this,arguments)}function gA(){return(gA=(0,me.Z)(function*(n){const e=cu(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function pee(n,e,t){return mA.apply(this,arguments)}function mA(){return(mA=(0,me.Z)(function*(n,e,t){const r=n.v_.shift(),i=AC.from(r,e,t);yield W2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield rf(n)})).apply(this,arguments)}function gee(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,me.Z)(function*(n,e){var t;e&&cu(n).E_&&(yield(t=(0,me.Z)(function*(i,s){if(xV(a=s.code)&&a!==ce.ABORTED){const o=i.v_.shift();cu(i).t_(),yield W2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield rf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),K2(n)&&Z2(n)}),_A.apply(this,arguments)}function Q2(n,e){return yA.apply(this,arguments)}function yA(){return(yA=(0,me.Z)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=au(t);t.M_.add(3),yield tf(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield gm(t)})).apply(this,arguments)}function vA(n,e){return EA.apply(this,arguments)}function EA(){return(EA=(0,me.Z)(function*(n,e){const t=Ve(n);e?(t.M_.delete(2),yield gm(t)):e||(t.M_.add(2),yield tf(t),t.N_.set("Unknown"))})).apply(this,arguments)}function sf(n){return n.B_||(n.B_=function(t,r,i){const s=Ve(t);return s.f_(),new tee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:oee.bind(null,n),To:aee.bind(null,n),Ao:cee.bind(null,n),h_:uee.bind(null,n)}),n.x_.push(function(){var e=(0,me.Z)(function*(t){t?(n.B_.t_(),aA(n)?oA(n):n.N_.set("Unknown")):(yield n.B_.stop(),G2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function cu(n){return n.k_||(n.k_=function(t,r,i){const s=Ve(t);return s.f_(),new nee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:hee.bind(null,n),Ao:gee.bind(null,n),R_:fee.bind(null,n),A_:pee.bind(null,n)}),n.x_.push(function(){var e=(0,me.Z)(function*(t){t?(n.k_.t_(),yield rf(n)):(yield n.k_.stop(),n.v_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class IA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new IA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function af(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),Qc(n))return new we(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class cf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Xg(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new cf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Y2{constructor(){this.q_=new jn(Be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ze():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class uf{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new uf(e,t,cf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mee{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class _ee{constructor(){this.queries=new Ga(e=>hV(e),Qg),this.onlineState="Unknown",this.z_=new Set}}function bA(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,me.Z)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new mee,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=af(o,`Initialization of query '${$h(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&AA(t)})).apply(this,arguments)}function TA(n,e){return CA.apply(this,arguments)}function CA(){return(CA=(0,me.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function yee(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&AA(t)}function vee(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function AA(n){n.z_.forEach(e=>{e.next()})}var DA,X2;(X2=DA||(DA={})).J_="default",X2.Cache="cache";class SA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=uf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==DA.Cache}}class Eee{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class J2{constructor(e){this.serializer=e}Ps(e){return ra(this.serializer,e)}Is(e){return e.metadata.exists?KV(this.serializer,e.document,!1):Kn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Pr(e)}}class Iee{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eU(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Jt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new J2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||kt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function ZJ(n,e,t,r){return ZC.apply(this,arguments)}(e.localStore,new J2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield QJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function eU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tU{constructor(e){this.key=e}}class nU{constructor(e){this.key=e}}class rU{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=kt(),this.mutatedKeys=kt(),this.Ia=pV(e),this.Ta=new cf(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new Y2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=Yg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;y&&I?y.data.isEqual(I.data)?T!==N&&(r.track({type:3,doc:I}),O=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),O=!0,(c&&this.Ia(I,c)>0||u&&this.Ia(I,u)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),O=!0):y&&!I&&(r.track({type:1,doc:y}),O=!0,(c||u)&&(a=!0)),O&&(I?(o=o.add(I),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(I,T){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return N(I)-N(T)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],c=0===this.Pa.size&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,0!==o.length||u?{snapshot:new uf(this.query,e.Ta,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Y2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=kt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new nU(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new tU(r))}),t}pa(e){this.la=e.hs,this.Pa=kt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return uf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class bee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wee{constructor(e){this.key=e,this.wa=!1}}class Tee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ga(a=>hV(a),Qg),this.Da=new Map,this.Ca=new Set,this.va=new jn(Be.comparator),this.Fa=new Map,this.Ma=new jC,this.xa={},this.Oa=new Map,this.Na=Al.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Cee(n,e){return RA.apply(this,arguments)}function RA(){return(RA=(0,me.Z)(function*(n,e,t=!0){const r=qE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield iU(r,e,t,!0),i})).apply(this,arguments)}function Aee(n,e){return MA.apply(this,arguments)}function MA(){return(MA=(0,me.Z)(function*(n,e){const t=qE(n);yield iU(t,e,!0,!1)})).apply(this,arguments)}function iU(n,e,t,r){return PA.apply(this,arguments)}function PA(){return(PA=(0,me.Z)(function*(n,e,t,r){const i=yield Jh(n.localStore,ki(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield xA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&zE(n.remoteStore,i),a})).apply(this,arguments)}function xA(n,e,t,r,i){return NA.apply(this,arguments)}function NA(){return NA=(0,me.Z)(function*(n,e,t,r,i){n.Ba=(m,y,I)=>{return(T=(0,me.Z)(function*(O,q,j,Y){let oe=q.view.da(j);oe.Xi&&(oe=yield VE(O.localStore,q.query,!1).then(({documents:L})=>q.view.da(L,oe)));const Ae=Y&&Y.targetChanges.get(q.targetId),je=Y&&null!=Y.targetMismatches.get(q.targetId),z=q.view.applyChanges(oe,O.isPrimaryClient,Ae,je);return HA(O,q.targetId,z.fa),z.snapshot}),function N(O,q,j,Y){return T.apply(this,arguments)})(n,m,y,I);var T};const s=yield VE(n.localStore,e,!0),o=new rU(e,s.hs),a=o.da(s.documents),c=im.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);HA(n,t,u.fa);const f=new bee(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),u.snapshot}),NA.apply(this,arguments)}function Dee(n,e,t){return OA.apply(this,arguments)}function OA(){return(OA=(0,me.Z)(function*(n,e,t){const r=Ve(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Qg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ef(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nf(r.remoteStore,i.targetId),lf(r,i.targetId)}).catch(Zc))):(lf(r,i.targetId),yield ef(r.localStore,i.targetId,!0))})).apply(this,arguments)}function See(n,e){return kA.apply(this,arguments)}function kA(){return(kA=(0,me.Z)(function*(n,e){const t=Ve(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nf(t.remoteStore,r.targetId))})).apply(this,arguments)}function FA(){return(FA=(0,me.Z)(function*(n,e,t){const r=tD(n);try{const i=yield function(o,a){const c=Ve(o),u=tr.now(),f=a.reduce((I,T)=>I.add(T.key),kt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=Cs(),N=kt();return c.os.getEntries(I,f).next(O=>{T=O,T.forEach((q,j)=>{j.isValidDocument()||(N=N.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(O=>{m=O;const q=[];for(const j of a){const Y=rJ(j,m.get(j.key).overlayedDocument);null!=Y&&q.push(new Wa(j.key,Y,QL(Y.value.mapValue),nr.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,q,a)}).next(O=>{y=O;const q=O.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(I,O.batchId,q)})}).then(()=>({batchId:y.batchId,changes:mV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new jn(Tt)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Za(r,i.changes),yield rf(r.remoteStore)}catch(i){const s=af(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function sU(n,e){return LA.apply(this,arguments)}function LA(){return(LA=(0,me.Z)(function*(n,e){const t=Ve(n);try{const r=yield function WJ(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let I=y.withSequenceNumber(s.currentSequenceNumber);var N,O,q;null!==e.targetMismatches.get(m)?I=I.withResumeToken(ni.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),O=I,q=f,(0===(N=y).resumeToken.approximateByteSize()||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,I))});let c=Cs(),u=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(k2(s,o,e.documentUpdates).next(f=>{c=f.cs,u=f.ls})),!r.isEqual(st.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?tt(o.wa):i.removedDocuments.size>0&&(tt(o.wa),o.wa=!1))}),yield Za(t,r,e)}catch(r){yield Zc(r)}})).apply(this,arguments)}function oU(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ve(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(u=!0)}),u&&AA(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mee(n,e,t){return VA.apply(this,arguments)}function VA(){return(VA=(0,me.Z)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new jn(Be.comparator);o=o.insert(s,Kn.newNoDocument(s,st.min()));const a=kt().add(s),c=new rm(st.min(),new Map,new jn(Tt),o,a);yield sU(r,c),r.va=r.va.remove(s),r.Fa.delete(e),qA(r)}else yield ef(r.localStore,e,!1).then(()=>lf(r,e,t)).catch(Zc)})).apply(this,arguments)}function Pee(n,e){return UA.apply(this,arguments)}function UA(){return(UA=(0,me.Z)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function GJ(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,y=m.keys();let I=J.resolve();return y.forEach(T=>{I=I.next(()=>f.getEntry(c,T)).next(N=>{const O=u.docVersions.get(T);tt(null!==O),N.version.compareTo(O)<0&&(m.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),f.addEntry(N)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=kt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);zA(t,r,null),$A(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Za(t,i)}catch(i){yield Zc(i)}})).apply(this,arguments)}function xee(n,e,t){return BA.apply(this,arguments)}function BA(){return(BA=(0,me.Z)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const c=Ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(tt(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);zA(r,e,t),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Za(r,i)}catch(i){yield Zc(i)}})).apply(this,arguments)}function jA(){return(jA=(0,me.Z)(function*(n,e){const t=Ve(n);au(t.remoteStore)||Ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ve(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=af(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function $A(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function zA(n,e,t){const r=Ve(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function lf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||aU(n,r)})}function aU(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(nf(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),qA(n))}function HA(n,e,t){for(const r of t)r instanceof tU?(n.Ma.addReference(r.key,e),Oee(n,r)):r instanceof nU?(Ce("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||aU(n,r.key)):Ze()}function Oee(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ce("SyncEngine","New document in limbo: "+t),n.Ca.add(r),qA(n))}function qA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Be(Jt.fromString(e)),r=n.Na.next();n.Fa.set(r,new wee(t)),n.va=n.va.insert(t,r),zE(n.remoteStore,new Ka(ki(Bh(t.path)),r,"TargetPurposeLimboResolution",Vs.oe))}}function Za(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,me.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u&&!u.fromCache?"current":"not-current"),u){i.push(u);const f=GC.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,me.Z)(function*(u,f){const m=Ve(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>J.forEach(f,I=>J.forEach(I.qi,T=>m.persistence.referenceDelegate.addReference(y,I.targetId,T)).next(()=>J.forEach(I.Qi,T=>m.persistence.referenceDelegate.removeReference(y,I.targetId,T)))))}catch(y){if(!Qc(y))throw y;Ce("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const T=m.ns.get(I),O=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.ns=m.ns.insert(I,O)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),GA.apply(this,arguments)}function kee(n,e){return WA.apply(this,arguments)}function WA(){return(WA=(0,me.Z)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=yield N2(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(c=>{c.reject(new we(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Za(t,r.us)}var s})).apply(this,arguments)}function Fee(n,e){const t=Ve(n),r=t.Fa.get(e);if(r&&r.wa)return kt().add(r.key);{let i=kt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Lee(n,e){return KA.apply(this,arguments)}function KA(){return(KA=(0,me.Z)(function*(n,e){const t=Ve(n),r=yield VE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&HA(t,e.targetId,i.fa),i})).apply(this,arguments)}function Vee(n,e){return ZA.apply(this,arguments)}function ZA(){return(ZA=(0,me.Z)(function*(n,e){const t=Ve(n);return L2(t.localStore,e).then(r=>Za(t,r))})).apply(this,arguments)}function Uee(n,e,t,r){return QA.apply(this,arguments)}function QA(){return(QA=(0,me.Z)(function*(n,e,t,r){const i=Ve(n),s=yield function(a,c){const u=Ve(a),f=Ve(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(y=>y?u.localDocuments.getDocuments(m,y):J.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield rf(i.remoteStore):"acknowledged"===t||"rejected"===t?(zA(i,e,r||null),$A(i,e),c=e,Ve(Ve(i.localStore).mutationQueue).Mn(c)):Ze(),yield Za(i,s)):Ce("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function YA(){return(YA=(0,me.Z)(function*(n,e){const t=Ve(n);if(qE(t),tD(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield cU(t,r.toArray());t.La=!0,yield vA(t.remoteStore,!0);for(const s of i)zE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(lf(t,o),ef(t.localStore,o,!0))),nf(t.remoteStore,o)}),yield i,yield cU(t,r),function(o){const a=Ve(o);a.Fa.forEach((c,u)=>{nf(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new jn(Be.comparator)}(t),t.La=!1,yield vA(t.remoteStore,!1)}})).apply(this,arguments)}function cU(n,e,t){return XA.apply(this,arguments)}function XA(){return(XA=(0,me.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const o of e){let a;const c=r.Da.get(o);if(c&&0!==c.length){a=yield Jh(r.localStore,ki(c[0]));for(const u of c){const f=r.ba.get(u),m=yield Lee(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield F2(r.localStore,o);a=yield Jh(r.localStore,u),yield xA(r,uU(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function uU(n){return cV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jee(n){return t=Ve(n).localStore,Ve(Ve(t).persistence).Bi();var t}function $ee(n,e,t,r){return JA.apply(this,arguments)}function JA(){return(JA=(0,me.Z)(function*(n,e,t,r){const i=Ve(n);if(i.La)return void Ce("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield L2(i.localStore,fV(s[0])),a=rm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ni.EMPTY_BYTE_STRING);yield Za(i,o,a);break}case"rejected":yield ef(i.localStore,e,!0),lf(i,e,r);break;default:Ze()}})).apply(this,arguments)}function zee(n,e,t){return eD.apply(this,arguments)}function eD(){return(eD=(0,me.Z)(function*(n,e,t){const r=qE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ce("SyncEngine","Adding an already active target "+i);continue}const s=yield F2(r.localStore,i),o=yield Jh(r.localStore,s);yield xA(r,uU(s),o.targetId,!1,o.resumeToken),zE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield ef(r.localStore,i,!1).then(()=>{nf(r.remoteStore,i),lf(r,i)}).catch(Zc))}})).apply(this,arguments)}function qE(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mee.bind(null,e),e.Sa.h_=yee.bind(null,e.eventManager),e.Sa.ka=vee.bind(null,e.eventManager),e}function tD(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xee.bind(null,e),e}class mm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=pm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return x2(this.persistence,new P2,e.initialUser,this.serializer)}createPersistence(e){return new $C(kE.Hr,this.serializer)}createSharedClientState(e){return new j2}terminate(){var e=this;return(0,me.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nD extends mm{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield tD(r.Qa.syncEngine),yield rf(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return x2(this.persistence,new P2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new b2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new gX(t,this.persistence);return new pX(e.asyncQueue,r)}createPersistence(e){const t=qC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new HC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,z2(),$E(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new j2}}class lU extends nD{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof eA&&(r.sharedClientState.syncEngine={Zs:Uee.bind(null,i),Xs:$ee.bind(null,i),eo:zee.bind(null,i),Bi:jee.bind(null,i),Ys:Vee.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,me.Z)(function*(o){yield function Bee(n,e){return YA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=z2();if(!eA.D(t))throw new we(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class df{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>oU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=kee.bind(null,r.syncEngine),yield vA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _ee}createDatastore(e){const t=pm(e.databaseInfo.databaseId),r=new eee(e.databaseInfo);return new ree(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>oU(this.syncEngine,t,0),a=$2.D()?new $2:new YJ,new see(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new Tee(i,s,o,a,c,u);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,me.Z)(function*(){var t,r;yield(r=(0,me.Z)(function*(s){const o=Ve(s);Ce("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield tf(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function dU(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class GE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gee{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,me.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new Eee(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,me.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Wee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new we(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,me.Z)(function*(o,a){const c=Ve(o),u={documents:a.map(I=>sm(c.serializer,I))},f=yield c.xo("BatchGetDocuments",c.serializer.databaseId,Jt.emptyPath(),u,a.length),m=new Map;f.forEach(I=>{const T=function hJ(n,e){return"found"in e?function(r,i){tt(!!i.found);const s=ra(r,i.found.name),o=Pr(i.found.updateTime),a=i.found.createTime?Pr(i.found.createTime):st.min(),c=new Ii({mapValue:{fields:i.found.fields}});return Kn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){tt(!!i.missing),tt(!!i.readTime);const s=ra(r,i.missing),o=Pr(i.readTime);return Kn.newNoDocument(s,o)}(n,e):Ze()}(c.serializer,I);m.set(T.key.toString(),T)});const y=[];return a.forEach(I=>{const T=m.get(I.toString());tt(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Be.fromPath(i);e.mutations.push(new TC(s,e.precondition(s)))}),yield(r=(0,me.Z)(function*(s,o){const a=Ve(s),c={writes:o.map(u=>om(a.serializer,u))};yield a.Co("Commit",a.serializer.databaseId,Jt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ze();t=st.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new we(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(st.min())?nr.exists(!1):nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(st.min()))throw new we(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Kee{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new nA(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,me.Z)(function*(){const t=new Wee(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!$g(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xV(t)}return!1}}class Zee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=wL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,me.Z)(function*(a){Ce("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=af(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function WE(n,e){return rD.apply(this,arguments)}function rD(){return rD=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(s){r.isEqual(s)||(yield N2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),rD.apply(this,arguments)}function iD(n,e){return sD.apply(this,arguments)}function sD(){return(sD=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oD(n);Ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Q2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Q2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function hU(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function oD(n){return aD.apply(this,arguments)}function aD(){return(aD=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield WE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!hU(t))throw t;ws("Error using user provided cache. Falling back to memory cache: "+t),yield WE(n,new mm)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),yield WE(n,new mm);return n._offlineComponents})).apply(this,arguments)}function KE(n){return cD.apply(this,arguments)}function cD(){return(cD=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield iD(n,n._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),yield iD(n,new df))),n._onlineComponents})).apply(this,arguments)}function fU(n){return oD(n).then(e=>e.persistence)}function hf(n){return oD(n).then(e=>e.localStore)}function pU(n){return KE(n).then(e=>e.remoteStore)}function uD(n){return KE(n).then(e=>e.syncEngine)}function ff(n){return lD.apply(this,arguments)}function lD(){return(lD=(0,me.Z)(function*(n){const e=yield KE(n),t=e.eventManager;return t.onListen=Cee.bind(null,e.syncEngine),t.onUnlisten=Dee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Aee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=See.bind(null,e.syncEngine),t})).apply(this,arguments)}function mU(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,o,a,c,u){const f=new GE({next:y=>{o.enqueueAndForget(()=>TA(s,m));const I=y.docs.has(a);!I&&y.fromCache?u.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?u.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new SA(Bh(a.path),f,{includeMetadataChanges:!0,ra:!0});return bA(s,m)}(yield ff(n),n.asyncQueue,e,t,r)})),r.promise}function _U(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,o,a,c,u){const f=new GE({next:y=>{o.enqueueAndForget(()=>TA(s,m)),y.fromCache&&"server"===c.source?u.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),m=new SA(a,f,{includeMetadataChanges:!0,ra:!0});return bA(s,m)}(yield ff(n),n.asyncQueue,e,t,r)})),r.promise}function yU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const vU=new Map;function dD(n,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EU(n,e,t,r){if(!0===e&&!0===r)throw new we(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IU(n){if(!Be.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bU(n){if(Be.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ze()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZE(n);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wU(n,e){if(e<=0)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class TU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new nX;switch(r.type){case"firstParty":return new oX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=vU.get(t);r&&(Ce("ComponentProvider","Removing Datastore"),vU.delete(t),r.terminate())}(this),Promise.resolve()}}function CU(n,e,t,r={}){var i;const s=(n=Ht(n,_m))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ui.MOCK_USER;else{a=(0,St.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ui(u)}n._authCredentials=new rX(new IL(a,c))}}class bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class ia extends bi{constructor(e,t,r){super(e,t,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Be(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function AU(n,e,...t){if(n=(0,St.m9)(n),dD("collection","path",e),n instanceof _m){const r=Jt.fromString(e,...t);return bU(r),new ia(n,null,r)}{if(!(n instanceof Zn||n instanceof ia))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return bU(r),new ia(n.firestore,null,r)}}function QE(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=wL.newId()),dD("doc","path",e),n instanceof _m){const r=Jt.fromString(e,...t);return IU(r),new Zn(n,null,new Be(r))}{if(!(n instanceof Zn||n instanceof ia))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return IU(r),new Zn(n.firestore,n instanceof ia?n.converter:null,new Be(r))}}function DU(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof Zn||n instanceof ia)&&(e instanceof Zn||e instanceof ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hD(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof bi&&e instanceof bi&&n.firestore===e.firestore&&Qg(n._query,e._query)&&n.converter===e.converter}class cte{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new nA(this,"async_queue_retry"),this.hu=()=>{const t=$E();t&&Ce("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=$E();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=$E();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new ti;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,me.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Qc(t))throw t;Ce("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=IA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ze()}verifyOperationInProgress(){}du(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function fD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class ute{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mn extends _m{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cte,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SU(this),this._firestoreClient.terminate()}}function dte(n,e){const t="object"==typeof n?n:(0,_r.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,_r._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,St.P0)("firestore");s&&CU(i,...s)}return i}function rr(n){return n._firestoreClient||SU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function SU(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new FX(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yU(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new Zee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function RU(n,e,t){const r=new ti;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield WE(n,t),yield iD(n,e),r.resolve()}catch(i){const s=i;if(!hU(s))throw s;ws("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function MU(n){if(n._initialized||n._terminated)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(ni.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sa(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sl{constructor(e){this._methodName=e}}class YE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const Ite=/^__.*__$/;class bte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new qh(e,this.data,t,this.fieldTransforms)}}class PU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}class XE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new XE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return tI(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(xU(this.fu)&&Ite.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class wte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pm(e)}Fu(e,t,r,i=!1){return new XE({fu:e,methodName:t,vu:r,path:Wn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(n){const e=n._freezeSettings(),t=pm(n._databaseId);return new wte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JE(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);ED("Data must be an object, but it was:",o,r);const a=kU(r,o);let c,u;if(s.merge)c=new Ts(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Em(e,m,t);if(!o.contains(y))throw new we(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);LU(f,y)||f.push(y)}c=new Ts(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new bte(new Ii(a),c,u)}class vm extends Sl{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vm}}function NU(n,e,t){return new XE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pD extends Sl{_toFieldTransform(e){return new em(e.path,new zh)}isEqual(e){return e instanceof pD}}class gD extends Sl{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NU(this,e,!0),r=this.Mu.map(s=>Ml(s,t)),i=new vl(r);return new em(e.path,i)}isEqual(e){return e instanceof gD&&(0,St.vZ)(this.Mu,e.Mu)}}class mD extends Sl{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NU(this,e,!0),r=this.Mu.map(s=>Ml(s,t)),i=new El(r);return new em(e.path,i)}isEqual(e){return e instanceof mD&&(0,St.vZ)(this.Mu,e.Mu)}}class _D extends Sl{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Hh(e.serializer,EV(e.serializer,this.xu));return new em(e.path,t)}isEqual(e){return e instanceof _D&&this.xu===e.xu}}function yD(n,e,t,r){const i=n.Fu(1,e,t);ED("Data must be an object, but it was:",i,r);const s=[],o=Ii.empty();Yc(r,(c,u)=>{const f=eI(e,c,t);u=(0,St.m9)(u);const m=i.Su(f);if(u instanceof vm)s.push(f);else{const y=Ml(u,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Ts(s);return new PU(o,a,i.fieldTransforms)}function vD(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Em(e,r,t)],c=[i];if(s.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Em(e,s[y])),c.push(s[y+1]);const u=[],f=Ii.empty();for(let y=a.length-1;y>=0;--y)if(!LU(u,a[y])){const I=a[y];let T=c[y];T=(0,St.m9)(T);const N=o.Su(I);if(T instanceof vm)u.push(I);else{const O=Ml(T,N);null!=O&&(u.push(I),f.set(I,O))}}const m=new Ts(u);return new PU(f,m,o.fieldTransforms)}function OU(n,e,t,r=!1){return Ml(t,n.Fu(r?4:3,e))}function Ml(n,e){if(FU(n=(0,St.m9)(n)))return ED("Unsupported field value:",e,n),kU(n,e);if(n instanceof Sl)return function(r,i){if(!xU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Ml(a,i.bu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,St.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return EV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=tr.fromDate(r);return{timestampValue:Wh(i.serializer,s)}}if(r instanceof tr){const s=new tr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wh(i.serializer,s)}}if(r instanceof YE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:$V(i.serializer,r._byteString)};if(r instanceof Zn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:MC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${ZE(r)}`)}(n,e)}function kU(n,e){const t={};return jL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(n,(r,i)=>{const s=Ml(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function FU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof YE||n instanceof sa||n instanceof Zn||n instanceof Sl)}function ED(n,e,t){if(!FU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=ZE(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Em(n,e,t){if((e=(0,St.m9)(e))instanceof Qa)return e._internalPath;if("string"==typeof e)return eI(n,e);throw tI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tte=new RegExp("[~\\*/\\[\\]]");function eI(n,e,t){if(e.search(Tte)>=0)throw tI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qa(...e.split("."))._internalPath}catch{throw tI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new we(ce.INVALID_ARGUMENT,a+n+c)}function LU(n,e){return n.some(t=>t.isEqual(e))}class Im{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cte extends Im{data(){return super.data()}}function nI(n,e){return"string"==typeof e?eI(n,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}function VU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ID{}class bm extends ID{}function uu(n,e,...t){let r=[];e instanceof ID&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof pf).length,a=s.filter(c=>c instanceof wm).length;if(o>1||o>0&&a>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class wm extends bm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wm(e,t,r)}_apply(e){const t=this._parse(e);return $U(e._query,t),new bi(e.firestore,e.converter,bC(e._query,t))}_parse(e){const t=Rl(e.firestore);return function(s,o,a,c,u,f,m){let y;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){jU(m,f);const I=[];for(const T of m)I.push(BU(c,s,T));y={arrayValue:{values:I}}}else y=BU(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||jU(m,f),y=OU(a,"where",m,"in"===f||"not-in"===f);return en.create(u,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class pf extends ID{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)$U(o,c),o=bC(o,c)}(e._query,t),new bi(e.firestore,e.converter,bC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bD extends bm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kg(s,o)}(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class rI extends bm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new rI(e,t,r)}_apply(e){return new bi(e.firestore,e.converter,IE(e._query,this._limit,this._limitType))}}class iI extends bm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new iI(e,t,r)}_apply(e){const t=UU(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(s=t,new qa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class sI extends bm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new sI(e,t,r)}_apply(e){const t=UU(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(s=t,new qa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function UU(n,e,t,r){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof Im)return function(s,o,a,c,u){if(!c)throw new we(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of jh(s))if(m.field.isKeyField())f.push(_l(o,c.key));else{const y=c.data.field(m.field);if(pE(y))throw new we(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new we(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new nu(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Rl(n.firestore);return function(o,a,c,u,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new we(ce.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<f.length;T++){const N=f[T];if(y[T].field.isKeyField()){if("string"!=typeof N)throw new we(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof N}`);if(!IC(o)&&-1!==N.indexOf("/"))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${N}' contains a slash.`);const O=o.path.child(Jt.fromString(N));if(!Be.isDocumentKey(O))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const q=new Be(O);I.push(_l(a,q))}else{const O=OU(c,u,N);I.push(O)}}return new nu(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BU(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IC(e)&&-1!==t.indexOf("/"))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Be.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _l(n,new Be(r))}if(t instanceof Zn)return _l(n,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZE(t)}.`)}function jU(n,e){if(!Array.isArray(n)||0===n.length)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $U(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new we(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wD{convertValue(e,t="none"){switch(eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ze()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new YE(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hg(e));default:return null}}convertTimestamp(e){const t=za(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);tt(e2(r));const i=new Xc(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function oI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ote extends wD{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends Im{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tm extends Ya{data(e={}){return super.data(e)}}class lu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tm(this._firestore,this._userDataWriter,r.key,r,new Pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Tm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Tm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Fte(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}function HU(n,e){return n instanceof Ya&&e instanceof Ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lu&&e instanceof lu&&n._firestore===e._firestore&&hD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class du extends wD{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function qU(n,e,t){n=Ht(n,Zn);const r=Ht(n.firestore,Mn),i=oI(n.converter,e,t);return gf(r,[JE(Rl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,nr.none())])}function GU(n,e,t,...r){n=Ht(n,Zn);const i=Ht(n.firestore,Mn),s=Rl(i);let o;return o="string"==typeof(e=(0,St.m9)(e))||e instanceof Qa?vD(s,"updateDoc",n._key,e,t,r):yD(s,"updateDoc",n._key,e),gf(i,[o.toMutation(n._key,nr.exists(!0))])}function WU(n,...e){var t,r,i;n=(0,St.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||fD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof Zn)u=Ht(n.firestore,Mn),f=Bh(n._key.path),c={next:m=>{e[o]&&e[o](TD(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Ht(n,bi);u=Ht(m.firestore,Mn),f=m._query;const y=new du(u);c={next:I=>{e[o]&&e[o](new lu(u,y,m,I))},error:e[o+1],complete:e[o+2]},VU(n._query)}return function(y,I,T,N){const O=new GE(N),q=new SA(I,O,T);return y.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return bA(yield ff(y),q)})),()=>{O.$a(),y.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return TA(yield ff(y),q)}))}}(rr(u),f,a,c)}function gf(n,e){return function(r,i){const s=new ti;return r.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Ree(n,e,t){return FA.apply(this,arguments)}(yield uD(r),i,s)})),s.promise}(rr(n),e)}function TD(n,e,t){const r=t.docs.get(e._key),i=new du(n);return new Ya(n,i,e._key,r,new Pl(t.hasPendingWrites,t.fromCache),e.converter)}const ene={maxAttempts:5};class KU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,t,r){this._verifyNotCommitted();const i=hu(e,this._firestore),s=oI(i.converter,t,r),o=JE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=hu(e,this._firestore);let o;return o="string"==typeof(t=(0,St.m9)(t))||t instanceof Qa?vD(this._dataReader,"WriteBatch.update",s._key,t,r,i):yD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hu(e,this._firestore);return this._mutations=this._mutations.concat(new Gh(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hu(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new we(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class tne extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Rl(t)}get(t){const r=hu(t,this._firestore),i=new Ote(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ze();const o=s[0];if(o.isFoundDocument())return new Im(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Im(this._firestore,i,r._key,null,r.converter);throw Ze()})}set(t,r,i){const s=hu(t,this._firestore),o=oI(s.converter,r,i),a=JE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=hu(t,this._firestore);let a;return a="string"==typeof(r=(0,St.m9)(r))||r instanceof Qa?vD(this._dataReader,"Transaction.update",o._key,r,i,s):yD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=hu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hu(e,this._firestore),r=new du(this._firestore);return super.get(e).then(i=>new Ya(this._firestore,r,t._key,i._document,new Pl(!1,!1),t.converter))}}function AD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new we("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XU(){if(typeof Uint8Array>"u")throw new we("unimplemented","Uint8Arrays are not available in this environment.")}function JU(){if(!function OX(){return typeof atob<"u"}())throw new we("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){xh=_r.SDK_VERSION,(0,_r._registerComponent)(new cE.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Mn(new iX(r.getProvider("auth-internal")),new aX(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(EL,"4.6.3",e),(0,_r.registerVersion)(EL,"4.6.3","esm2017")}();class Cm{constructor(e){this._delegate=e}static fromBase64String(e){return JU(),new Cm(sa.fromBase64String(e))}static fromUint8Array(e){return XU(),new Cm(sa.fromUint8Array(e))}toBase64(){return JU(),this._delegate.toBase64()}toUint8Array(){return XU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DD(n){return function dne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hne{enableIndexedDbPersistence(e,t){return function hte(n,e){MU(n=Ht(n,Mn));const t=rr(n);if(t._uninitializedComponentsProvider)throw new we(ce.FAILED_PRECONDITION,"SDK cache is already specified.");ws("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new df;return RU(t,i,new nD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fte(n){MU(n=Ht(n,Mn));const e=rr(n);if(e._uninitializedComponentsProvider)throw new we(ce.FAILED_PRECONDITION,"SDK cache is already specified.");ws("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new df;return RU(e,r,new lU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pte(n){if(n._initialized&&!n._terminated)throw new we(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(i){if(!Jo.D())return Promise.resolve();const s=i+"main";yield Jo.delete(s)}),function r(i){return t.apply(this,arguments)})(qC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ws("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){CU(this._delegate,e,t,r)}enableNetwork(){return function mte(n){return function Qee(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!0),function(i){const s=Ve(i);return s.M_.delete(0),gm(s)}(t)}))}(rr(n=Ht(n,Mn)))}(this._delegate)}disableNetwork(){return function _te(n){return function Yee(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(s){const o=Ve(s);o.M_.add(0),yield tf(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(rr(n=Ht(n,Mn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,EU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gte(n){return function(t){const r=new ti;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Nee(n,e){return jA.apply(this,arguments)}(yield uD(t),r)})),r.promise}(rr(n=Ht(n,Mn)))}(this._delegate)}onSnapshotsInSync(e){return function qte(n,e){return function tte(n,e){const t=new GE(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield ff(n),s=t,Ve(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield ff(n),s=t,void Ve(i).z_.delete(s);var i,s}))}}(rr(n=Ht(n,Mn)),fD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new we("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mf(this,AU(this._delegate,e))}catch(t){throw ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new ao(this,QE(this._delegate,e))}catch(t){throw ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,function ate(n,e){if(n=Ht(n,_m),dD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bi(n,null,(r=e,new qa(Jt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function nne(n,e,t){n=Ht(n,Mn);const r=Object.assign(Object.assign({},ene),t);return function(s){if(s.maxAttempts<1)throw new we(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new ti;return s.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const u=yield function gU(n){return KE(n).then(e=>e.datastore)}(s);new Kee(s.asyncQueue,u,a,o,c).Xa()})),c.promise}(rr(n),i=>e(new tne(n,i)),r)}(this._delegate,t=>e(new tB(this,t)))}batch(){return rr(this._delegate),new nB(new KU(this._delegate,e=>gf(this._delegate,e)))}loadBundle(e){return function yte(n,e){const t=rr(n=Ht(n,Mn)),r=new ute;return function nte(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?OV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return dU(f,m);if(f instanceof ArrayBuffer)return dU(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Gee(f,a);var f}(t,pm(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function Hee(n,e,t){const r=Ve(n);var i;(i=(0,me.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(T,N){const O=Ve(T),q=Pr(N.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",j=>O.$r.getBundleMetadata(j,N.id)).then(j=>!!j&&j.createTime.compareTo(q)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=u).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(eU(u));const f=new Iee(u,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield f._a(m);I&&c._updateProgress(I),m=yield a.qa()}const y=yield f.complete();return yield Za(o,y.ca,void 0),yield function(T,N){const O=Ve(T);return O.persistence.runTransaction("Save bundle","readwrite",q=>O.$r.saveBundleMetadata(q,N))}(o.localStore,u),c._completeWith(y.progress),Promise.resolve(y.ua)}catch(u){return ws("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield uD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function vte(n,e){return function rte(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(r,i){const s=Ve(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield hf(n),e)}))}(rr(n=Ht(n,Mn)),e).then(t=>t?new bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ns(this,t):null)}}class cI extends wD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cm(new sa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ao.forKey(t,this.firestore,null)}}class tB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cI(e)}get(e){const t=Nl(e);return this._delegate.get(t).then(r=>new Am(this._firestore,new Ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Nl(e);return r?(AD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Nl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Nl(e);return this._delegate.delete(t),this}}class nB{constructor(e){this._delegate=e}set(e,t,r){const i=Nl(e);return r?(AD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Nl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Nl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Tm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new xl(e,new cI(e),t),i.set(t,s)),s}}xl.INSTANCES=new WeakMap;class ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new we("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ao(t,new Zn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ao(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mf(this.firestore,AU(this._delegate,e))}catch(t){throw ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Zn&&DU(this._delegate,e)}set(e,t){t=AD("DocumentReference.set",t);try{return t?qU(this._delegate,e,t):qU(this._delegate,e)}catch(r){throw ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GU(this._delegate,e):GU(this._delegate,e,t,...r)}catch(i){throw ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function zte(n){return gf(Ht(n.firestore,Mn),[new Gh(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=rB(e),r=iB(e,i=>new Am(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Vte(n){n=Ht(n,Zn);const e=Ht(n.firestore,Mn),t=rr(e),r=new du(e);return function Xee(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,o,a){try{const c=yield function(f,m){const y=Ve(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new we(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=af(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hf(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ya(e,r,n._key,i,new Pl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Ute(n){n=Ht(n,Zn);const e=Ht(n.firestore,Mn);return mU(rr(e),n._key,{source:"server"}).then(t=>TD(e,n,t))}(this._delegate):function Lte(n){n=Ht(n,Zn);const e=Ht(n.firestore,Mn);return mU(rr(e),n._key).then(t=>TD(e,n,t))}(this._delegate),t.then(r=>new Am(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?xl.getInstance(this.firestore,e):null))}}function ts(n,e,t){return n.message=n.message.replace(e,t),n}function rB(n){for(const e of n)if("object"==typeof e&&!DD(e))return e;return{}}function iB(n,e){var t,r;let i;return i=DD(n[0])?n[0]:DD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Am{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HU(this._delegate,e._delegate)}}class Dm extends Am{data(e){const t=this._delegate.data(e);return this._delegate._converter||function tX(n,e){n||Ze()}(void 0!==t),t}}class ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cI(e)}where(e,t,r){try{return new ns(this.firestore,uu(this._delegate,function Ate(n,e,t){const r=e,i=nI("where",n);return wm._create(i,r,t)}(e,t,r)))}catch(i){throw ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ns(this.firestore,uu(this._delegate,function Dte(n,e="asc"){const t=e,r=nI("orderBy",n);return bD._create(r,t)}(e,t)))}catch(r){throw ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ns(this.firestore,uu(this._delegate,function Ste(n){return wU("limit",n),rI._create("limit",n,"F")}(e)))}catch(t){throw ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ns(this.firestore,uu(this._delegate,function Rte(n){return wU("limitToLast",n),rI._create("limitToLast",n,"L")}(e)))}catch(t){throw ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ns(this.firestore,uu(this._delegate,function Mte(...n){return iI._create("startAt",n,!0)}(...e)))}catch(t){throw ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ns(this.firestore,uu(this._delegate,function Pte(...n){return iI._create("startAfter",n,!1)}(...e)))}catch(t){throw ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ns(this.firestore,uu(this._delegate,function xte(...n){return sI._create("endBefore",n,!1)}(...e)))}catch(t){throw ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ns(this.firestore,uu(this._delegate,function Nte(...n){return sI._create("endAt",n,!0)}(...e)))}catch(t){throw ts(t,"endAt()","Query.endAt()")}}isEqual(e){return hD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function jte(n){n=Ht(n,bi);const e=Ht(n.firestore,Mn),t=rr(e),r=new du(e);return function Jee(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,o,a){try{const c=yield VE(s,o,!0),u=new rU(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=af(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hf(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lu(e,r,n,i))}(this._delegate):"server"===e?.source?function $te(n){n=Ht(n,bi);const e=Ht(n.firestore,Mn),t=rr(e),r=new du(e);return _U(t,n._query,{source:"server"}).then(i=>new lu(e,r,n,i))}(this._delegate):function Bte(n){n=Ht(n,bi);const e=Ht(n.firestore,Mn),t=rr(e),r=new du(e);return VU(n._query),_U(t,n._query).then(i=>new lu(e,r,n,i))}(this._delegate),t.then(r=>new SD(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rB(e),r=iB(e,i=>new SD(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WU(this._delegate,t,r)}withConverter(e){return new ns(this.firestore,this._delegate.withConverter(e?xl.getInstance(this.firestore,e):null))}}class pne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pne(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Dm(this._firestore,r))})}isEqual(e){return HU(this._delegate,e._delegate)}}class mf extends ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ao(this.firestore,e):null}doc(e){try{return new ao(this.firestore,void 0===e?QE(this._delegate):QE(this._delegate,e))}catch(t){throw ts(t,"doc()","CollectionReference.doc()")}}add(e){return function Hte(n,e){const t=Ht(n.firestore,Mn),r=QE(n),i=oI(n.converter,e);return gf(t,[JE(Rl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ao(this.firestore,t))}isEqual(e){return DU(this._delegate,e._delegate)}withConverter(e){return new mf(this.firestore,this._delegate.withConverter(e?xl.getInstance(this.firestore,e):null))}}function Nl(n){return Ht(n,Zn)}class RD{constructor(...e){this._delegate=new Qa(...e)}static documentId(){return new RD(Wn.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ol{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ine(){return new pD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ol(e)}static delete(){const e=function rne(){return new vm("deleteField")}();return e._methodName="FieldValue.delete",new Ol(e)}static arrayUnion(...e){const t=function sne(...n){return new gD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ol(t)}static arrayRemove(...e){const t=function one(...n){return new mD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ol(t)}static increment(e){const t=function ane(n){return new _D("increment",n)}(e);return t._methodName="FieldValue.increment",new Ol(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gne={Firestore:eB,GeoPoint:YE,Timestamp:tr,Blob:Cm,Transaction:tB,WriteBatch:nB,DocumentReference:ao,DocumentSnapshot:Am,Query:ns,QueryDocumentSnapshot:Dm,QuerySnapshot:SD,CollectionReference:mf,FieldPath:RD,FieldValue:Ol,setLogLevel:function fne(n){!function eX(n){Kc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sB(n,e){return function yne(n,e=wT){return new Et(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function MD(n,e){return sB(n,e).pipe(Pe(t=>({payload:t,type:"query"})))}!function _ne(n){(function mne(n,e){n.INTERNAL.registerComponent(new cE.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gne)))})(n,(e,t)=>new eB(e,t,new hne)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Yo.Z);class oB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=hB(r,t);return new uB(i,s,this.afs)}snapshotChanges(){return function vne(n,e){return sB(n,e).pipe(gg(void 0),aC(),Pe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return this.snapshotChanges().pipe(Pe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(es)}}function uI(n,e){return MD(n,e).pipe(gg(void 0),aC(),Pe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function aB(n,e,t){return uI(n,t).pipe(jv((r,i)=>function Ene(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ine(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return PD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return PD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),pt(),Pe(r=>r.map(i=>({type:i.type,payload:i}))))}function PD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function cB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class uB{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Pe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(gg(void 0),aC(),bs(([r,i])=>i.length>0||!r),Pe(([,r])=>r),es)}auditTrail(e){return this.stateChanges(e).pipe(jv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cB(e);return aB(this.query,t,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return MD(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),es)}get(e){return b(this.query.get(e)).pipe(es)}add(e){return this.ref.add(e)}doc(e){return new oB(this.ref.doc(e),this.afs)}}class bne{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uI(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(t=>t.filter(r=>e.indexOf(r.type)>-1)),bs(t=>t.length>0),es):uI(this.query,this.afs.schedulers.outsideAngular).pipe(es)}auditTrail(e){return this.stateChanges(e).pipe(jv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cB(e);return aB(this.query,t,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return MD(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),es)}get(e){return b(this.query.get(e)).pipe(es)}}const lB=new Ee("angularfire2.enableFirestorePersistence"),dB=new Ee("angularfire2.firestore.persistenceSettings"),wne=new Ee("angularfire2.firestore.settings"),Tne=new Ee("angularfire2.firestore.use-emulator");function hB(n,e=(t=>t)){return{query:e(n),ref:n}}let kl=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,y,I,T,N,O,q,j){this.schedulers=c;const Y=oE(t,a,r),oe=f;m&&uL(Y,a,y,T,N,O,I,q),[this.firestore,this.persistenceEnabled$]=aE(`${Y.name}.firestore`,"AngularFirestore",Y.name,()=>{const Ae=a.runOutsideAngular(()=>Y.firestore());if(s&&Ae.settings(s),oe&&Ae.useEmulator(...oe),i&&!Cv(o)){const je=()=>{try{return b(Ae.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),k(!1)}};return[Ae,a.runOutsideAngular(je)]}return[Ae,k(!1)]},[s,oe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=hB(i,r),a=this.schedulers.ngZone.run(()=>s);return new uB(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new bne(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oB(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(fe(Lg),fe(Vg,8),fe(lB,8),fe(wne,8),fe(Os),fe(Gt),fe(dl),fe(dB,8),fe(Tne,8),fe(lL,8),fe(rL,8),fe(iL,8),fe(sL,8),fe(oL,8),fe(aL,8),fe(cL,8),fe(Fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Cne=(()=>{class n{constructor(){Yo.Z.registerVersion("angularfire",Wc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lB,useValue:!0},{provide:dB,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[kl]})}return n})(),xD=(()=>{class n{constructor(t){this.firestore=t}getEvents(){return this.firestore.collection("Events",t=>t.orderBy("Community_Sponsor","desc")).valueChanges()}addEvent(t){const r=this.firestore.createId();return this.firestore.collection("Events").doc(r).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(kl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ND=(()=>{class n{constructor(t){this.firestore=t}getOffers(){return this.firestore.collection("Offers").snapshotChanges().pipe(Pe(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}addOffer(t){const r=this.firestore.createId(),i=(new Date).toISOString().split("T")[0];return t.Date_Created=i,this.firestore.collection("Offers").doc(r).set(t)}getOffer(t){return this.firestore.collection("Offers").doc(t).valueChanges()}updateOffer(t,r){return this.firestore.collection("Offers").doc(t).update(r)}getAllOfferTypes(){return this.firestore.collection("OfferTypes").valueChanges().pipe(Pe(t=>{const r=t.map(i=>i.OfferType);return Array.from(new Set(r))}))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(kl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ane(n,e){1&n&&(W(0,"p"),ne(1,"This offer is filled"),U())}function Dne(n,e){1&n&&(W(0,"p"),ne(1,"This offer is still open"),U())}function Sne(n,e){if(1&n&&(W(0,"div")(1,"a",9),ut(2,"img",10),U(),ut(3,"br"),ne(4," Facebook"),U()),2&n){const t=Ho();Se(1),yo("href",t.offer.Facebook,ai)}}function Rne(n,e){if(1&n&&(W(0,"div")(1,"a",9),ut(2,"img",11),U(),ut(3,"br"),ne(4," Instagram"),U()),2&n){const t=Ho();Se(1),qo("href","https://www.instagram.com/",t.offer.Instagram,"",ai)}}function Mne(n,e){if(1&n&&(W(0,"div")(1,"a",12),ut(2,"img",13),U(),ut(3,"br"),ne(4," Email"),U()),2&n){const t=Ho();Se(1),qo("href","mailto:",t.offer.Email,"",ai)}}function Pne(n,e){if(1&n&&(W(0,"div")(1,"a",9),ut(2,"img",14),U(),ut(3,"br"),ne(4," Website"),U()),2&n){const t=Ho();Se(1),yo("href",t.offer.Website,ai)}}let fB=(()=>{class n{constructor(){this.currentImageIndex=1}ngOnInit(){this.offer.Image1||(this.offer.Image1="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image2||(this.offer.Image2="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image3||(this.offer.Image3="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image4||(this.offer.Image4="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.offer.Image5||(this.offer.Image5="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/dafaultImage.jpg"),this.startImageCarousel()}startImageCarousel(){setInterval(()=>{this.currentImageIndex=this.currentImageIndex%5+1},3e3)}nextImage(){this.currentImageIndex=this.currentImageIndex%5+1}prevImage(){this.currentImageIndex=(this.currentImageIndex-2+5)%5+1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-offer-card"]],inputs:{offer:"offer"},decls:47,vars:17,consts:[[1,"offer-card"],[1,"carousel"],[1,"prev",3,"click"],[1,"next",3,"click"],[3,"src","alt"],[1,"offer-details"],[4,"ngIf"],[1,"offer-footer"],[1,"social-icons"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"button",2),Nt("click",function(){return i.prevImage()}),ne(3,"\u276e"),U(),W(4,"button",3),Nt("click",function(){return i.nextImage()}),ne(5,"\u276f"),U(),ut(6,"img",4),U(),W(7,"div",5)(8,"h3"),ne(9),U(),W(10,"p")(11,"strong"),ne(12,"Compania:"),U(),ne(13),U(),W(14,"p")(15,"strong"),ne(16,"Persona de contact:"),U(),ne(17),U(),ut(18,"hr"),W(19,"p")(20,"strong"),ne(21,"Numar de Tel:"),U(),ne(22),U(),W(23,"p")(24,"strong"),ne(25,"Locatie:"),U(),ne(26),U(),W(27,"p")(28,"strong"),ne(29,"Descriiere:"),U(),ne(30),U(),W(31,"p")(32,"strong"),ne(33,"Pret:"),U(),ne(34),U(),W(35,"p"),ne(36),U(),W(37,"p"),ne(38),U(),Gn(39,Ane,2,0,"p",6),Gn(40,Dne,2,0,"p",6),U(),W(41,"div",7)(42,"div",8),Gn(43,Sne,5,1,"div",6),Gn(44,Rne,5,1,"div",6),Gn(45,Mne,5,1,"div",6),Gn(46,Pne,5,1,"div",6),U()()()),2&r&&(Se(6),qo("alt","Image ",i.currentImageIndex,""),ft("src",i.offer["Image"+i.currentImageIndex],ai),Se(3),an(i.offer.Title),Se(4),Pa(" ",i.offer.Company_Name,""),Se(4),Pa(" ",i.offer.Contact_Name,""),Se(5),Pa(" ",i.offer.Phone_Number,""),Se(4),Pa(" ",i.offer.Location,""),Se(4),an(i.offer.Description),Se(4),an(i.offer.Price),Se(2),Pa("Offer Type: ",i.offer.OfferType,""),Se(2),Pa("Date Created: ",i.offer.Date_Created,""),Se(1),ft("ngIf",i.offer.Filled),Se(1),ft("ngIf",!i.offer.Filled),Se(3),ft("ngIf",i.offer.Facebook),Se(1),ft("ngIf",i.offer.Instagram),Se(1),ft("ngIf",i.offer.Email),Se(1),ft("ngIf",i.offer.Website))},dependencies:[lg],styles:[".offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})}return n})();function xne(n,e){1&n&&(W(0,"div",23)(1,"span",24),ne(2,"Sponsor al Comunitatii"),U(),W(3,"span",25),ne(4,"\u2605"),U()())}function Nne(n,e){if(1&n&&(W(0,"div",15)(1,"div",16)(2,"div",17),ne(3),U(),W(4,"div",18),ut(5,"img",19),U(),W(6,"div",20),ne(7),U(),W(8,"div",20),ne(9),U(),W(10,"div",20),ne(11),U(),W(12,"div",20),ne(13),U(),W(14,"div",20)(15,"a",21),ne(16),U()(),W(17,"div",20)(18,"a",21),ne(19),U()(),W(20,"div",20),ne(21),U()(),Gn(22,xne,5,0,"div",22),U()),2&n){const t=e.$implicit;Se(3),an(t.Name),Se(2),yo("src",t.Poster_Image,ai),Se(2),an(t.Location),Se(2),an(t.Event_date),Se(2),an(t.Price),Se(2),an(t.Phone_Number),Se(2),qo("href","mailto:",t.Contact,"",ai),Se(1),an(t.Contact),Se(2),yo("href",t.Website,ai),Se(1),an(t.Website),Se(2),an(t.Description),Se(1),ft("ngIf",t.Community_Sponsor)}}function One(n,e){1&n&&ut(0,"app-offer-card",26),2&n&&ft("offer",e.$implicit)}function kne(n,e){if(1&n&&(W(0,"li",27)(1,"a",28),ne(2),U()()),2&n){const t=e.$implicit;Se(1),yo("href",t.url,ai),Se(1),an(t.name)}}let Fne=(()=>{class n{constructor(t,r,i){this.eventService=t,this.offersService=r,this.router=i,this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"},{name:"Biserica Sfintii Trei Ierarhi",url:"http://www.ortodox.org/"}],this.events=[],this.offers=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t}),this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(_e(xD),_e(ND),_e(ci))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-home"]],decls:48,vars:3,consts:[[1,"container"],[1,"hero-section"],[1,"hero-overlay"],["href","https://www.facebook.com/groups/RomaniinSeattle"],[1,"community-descriptions"],[1,"description-card-group"],[1,"description-card"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"],[3,"offer"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),ne(4,"Bine ati venit in comunitatea "),W(5,"a",3),ne(6,"Romani in Seattle"),U()()()(),ut(7,"p"),W(8,"div",4)(9,"div",5)(10,"h2"),ne(11,"Discutii si evenimente pentru persoanele care locuiesc in zona Seattle."),U(),W(12,"p"),ne(13," Bun venit \xeen grupul rom\xe2nilor din Seattle! Comunitatea noastra se bazeaza \xeen primul r\xe2nd pe respectul reciproc. Pentru armonia grupului si buna desfasurarea a activitatilor, va rugam sa respectati conduita recomandata."),U()()(),W(14,"div",4)(15,"div",6)(16,"h2"),ne(17,"Evenimente"),U(),W(18,"p"),ne(19,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),U()(),W(20,"div",6)(21,"h2"),ne(22,"Servicii"),U(),W(23,"p"),ne(24,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),U()(),W(25,"div",6)(26,"h2"),ne(27,"Oportunit\u0103\u021bi"),U(),W(28,"p"),ne(29,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),U()(),W(30,"div",6)(31,"h2"),ne(32,"Resurse"),U(),W(33,"p"),ne(34,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),U()()(),W(35,"h1"),ne(36,"Evenimente"),U(),W(37,"div",7),Gn(38,Nne,23,12,"div",8),U(),W(39,"h1"),ne(40,"Oferte"),U(),W(41,"div",9),Gn(42,One,1,1,"app-offer-card",10),U(),W(43,"section",11)(44,"h2",12),ne(45,"Resurse utile pentru comunitate"),U(),W(46,"ul",13),Gn(47,kne,3,2,"li",14),U()()()),2&r&&(Se(38),ft("ngForOf",i.events),Se(4),ft("ngForOf",i.offers),Se(5),ft("ngForOf",i.resourceLinks))},dependencies:[Fa,lg,fB],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;color:#333}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:#666}.hero-section[_ngcontent-%COMP%]{position:relative;height:50vh;background-image:url(Seattle-Romania.322e2da675d571d6.png);background-size:cover;background-position:0 25%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:4rem;text-align:center}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px;background-color:#f9f9f9}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.offers[_ngcontent-%COMP%], .offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offers-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offer-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}"]})}return n})(),OD=(()=>{class n{constructor(t){this.firestore=t}getServices(){return this.firestore.collection("Services",t=>t.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe(Pe(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getService(t){return this.firestore.collection("Services").doc(t).valueChanges()}getServicesByType(t){return this.firestore.collection("Services",r=>r.where("Service_Type","==",t)).valueChanges()}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe(Pe(t=>{const r=t.map(i=>i.Name);return Array.from(new Set(r))}))}addServiceWithDate(t){t.id=this.firestore.createId();const r=(new Date).toISOString().split("T")[0];return t.Date_Created=r,this.firestore.collection("Services").doc(t.id).set(t)}addService(t){const r=this.firestore.createId();return this.firestore.collection("Services").doc(r).set(t)}updateService(t,r){return console.log("Update Service: "+t),console.log(r),this.firestore.collection("Services").doc(t).update(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(kl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pB=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Sa),_e(vs))};static#t=this.\u0275dir=et({type:n})}return n})(),Fl=(()=>{class n extends pB{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=jr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,features:[bn]})}return n})();const oa=new Ee("NgValueAccessor"),Vne={provide:oa,useExisting:un(()=>Ll),multi:!0},Bne=new Ee("CompositionEventMode");let Ll=(()=>{class n extends pB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Une(){const n=Uc()?Uc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Sa),_e(vs),_e(Bne,8))};static#t=this.\u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Nt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[er([Vne]),bn]})}return n})();function fu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function mB(n){return null!=n&&"number"==typeof n.length}const Vi=new Ee("NgValidators"),pu=new Ee("NgAsyncValidators"),jne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vr{static min(e){return function _B(n){return e=>{if(fu(e.value)||fu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function yB(n){return e=>{if(fu(e.value)||fu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return vB(e)}static requiredTrue(e){return function EB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function IB(n){return fu(n.value)||jne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function bB(n){return e=>fu(e.value)||!mB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function wB(n){return e=>mB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function TB(n){if(!n)return lI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(fu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return MB(e)}static composeAsync(e){return PB(e)}}function vB(n){return fu(n.value)?{required:!0}:null}function lI(n){return null}function CB(n){return null!=n}function AB(n){return Qp(n)?b(n):n}function DB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function SB(n,e){return e.map(t=>t(n))}function RB(n){return n.map(e=>function $ne(n){return!n.validate}(e)?e:t=>e.validate(t))}function MB(n){if(!n)return null;const e=n.filter(CB);return 0==e.length?null:function(t){return DB(SB(t,e))}}function kD(n){return null!=n?MB(RB(n)):null}function PB(n){if(!n)return null;const e=n.filter(CB);return 0==e.length?null:function(t){return AT(SB(t,e).map(AB)).pipe(Pe(DB))}}function FD(n){return null!=n?PB(RB(n)):null}function xB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NB(n){return n._rawValidators}function OB(n){return n._rawAsyncValidators}function LD(n){return n?Array.isArray(n)?n:[n]:[]}function dI(n,e){return Array.isArray(n)?n.includes(e):n===e}function kB(n,e){const t=LD(e);return LD(n).forEach(i=>{dI(t,i)||t.push(i)}),t}function FB(n,e){return LD(e).filter(t=>!dI(n,t))}class LB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rs extends LB{get formDirective(){return null}get path(){return null}}class gu extends LB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _f=(()=>{class n extends VB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(_e(gu,2))};static#t=this.\u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&hh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}return n})(),Sm=(()=>{class n extends VB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(_e(rs,10))};static#t=this.\u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&hh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}return n})();const Rm="VALID",fI="INVALID",yf="PENDING",Mm="DISABLED";function BD(n){return(pI(n)?n.validators:n)||null}function jD(n,e){return(pI(e)?e.asyncValidators:n)||null}function pI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function BB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new le(1e3,"");if(!r[t])throw new le(1001,"")}function jB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new le(1002,"")})}class gI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rm}get invalid(){return this.status===fI}get pending(){return this.status==yf}get disabled(){return this.status===Mm}get enabled(){return this.status!==Mm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FB(e,this._rawAsyncValidators))}hasValidator(e){return dI(this._rawValidators,e)}hasAsyncValidator(e){return dI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rm||this.status===yf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mm:Rm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yf,this._hasOwnPendingAsyncValidator=!0;const t=AB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pr,this.statusChanges=new pr}_calculateStatus(){return this._allControlsDisabled()?Mm:this.errors?fI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yf)?yf:this._anyControlsHaveStatus(fI)?fI:Rm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Gne(n){return Array.isArray(n)?kD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Wne(n){return Array.isArray(n)?FD(n):n||null}(this._rawAsyncValidators)}}class Pm extends gI{constructor(e,t,r){super(BD(t),jD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jB(this,0,e),Object.keys(e).forEach(r=>{BB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class $B extends Pm{}const Vl=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>xm}),xm="always";function mI(n,e){return[...e.path,n]}function Nm(n,e,t=xm){$D(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Zne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&zB(n,e)})}(n,e),function Yne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Qne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&zB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Kne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _I(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $D(n,e){const t=NB(n);null!==e.validator?n.setValidators(xB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=OB(n);null!==e.asyncValidator?n.setAsyncValidators(xB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yI(e._rawValidators,i),yI(e._rawAsyncValidators,i)}function vI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=NB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=OB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return yI(e._rawValidators,r),yI(e._rawAsyncValidators,r),t}function zB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HB(n,e){$D(n,e)}function HD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function qB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Ll?t=s:function ere(n){return Object.getPrototypeOf(n.constructor)===Fl}(s)?r=s:i=s}),i||r||t||null}const nre={provide:rs,useExisting:un(()=>EI)},Om=(()=>Promise.resolve())();let EI=(()=>{class n extends rs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new pr,this.form=new Pm({},kD(t),FD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Om.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Nm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Om.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Om.then(()=>{const r=this._findContainer(t.path),i=new Pm({});HB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Om.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Om.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,qB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Vi,10),_e(pu,10),_e(Vl,8))};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Nt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[er([nre]),bn]})}return n})();function GB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function WB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const km=class extends gI{constructor(e=null,t,r){super(BD(t),jD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=WB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){WB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},sre={provide:gu,useExisting:un(()=>II)},QB=(()=>Promise.resolve())();let II=(()=>{class n extends gu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new km,this._registered=!1,this.name="",this.update=new pr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),HD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Nm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){QB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&_h(r);QB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?mI(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(_e(rs,9),_e(Vi,10),_e(pu,10),_e(oa,10),_e(lv,8),_e(Vl,8))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[er([sre]),bn,ms]})}return n})(),Fm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),XB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({})}return n})();const GD=new Ee("NgModelWithFormControlWarning"),dre={provide:rs,useExisting:un(()=>vf)};let vf=(()=>{class n extends rs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pr,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Nm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_I(t.control||null,t,!1),function tre(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,qB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(_I(r||null,t),(n=>n instanceof km)(i)&&(Nm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);HB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Xne(n,e){return vI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$D(this.form,this),this._oldForm&&vI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(_e(Vi,10),_e(pu,10),_e(Vl,8))};static#t=this.\u0275dir=et({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Nt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[er([dre]),bn,ms]})}return n})();const pre={provide:gu,useExisting:un(()=>Lm)};let Lm=(()=>{class n extends gu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new pr,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qD(0,s)}ngOnChanges(t){this._added||this._setUpControl(),HD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return mI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(_e(rs,13),_e(Vi,10),_e(pu,10),_e(oa,10),_e(GD,8))};static#n=this.\u0275dir=et({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[er([pre]),bn,ms]})}return n})();const gre={provide:oa,useExisting:un(()=>Ul),multi:!0};function rj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ul=(()=>{class n extends Fl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=rj(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function mre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=jr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Nt("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[er([gre]),bn]})}return n})(),Vm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(rj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(_e(vs),_e(Sa),_e(Ul,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const _re={provide:oa,useExisting:un(()=>ZD),multi:!0};function ij(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ZD=(()=>{class n extends Fl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function yre(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=jr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Nt("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[er([_re]),bn]})}return n})(),Um=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(_e(vs),_e(Sa),_e(ZD,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Bl=(()=>{class n{constructor(){this._validator=lI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=et({type:n,features:[ms]})}return n})();const Ire={provide:Vi,useExisting:un(()=>jl),multi:!0};let jl=(()=>{class n extends Bl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_h,this.createValidator=t=>vB}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=jr(n)))(i||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&zo("required",i._enabled?"":null)},inputs:{required:"required"},features:[er([Ire]),bn]})}return n})(),pj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[XB]})}return n})();class gj extends gI{constructor(e,t,r){super(BD(t),jD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jB(this,0,e),e.forEach((r,i)=>{BB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function mj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let bI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return mj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Pm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new $B(i,r)}control(t,r,i){let s={};return this.useNonNullable?(mj(r)?s=r:(s.validators=r,s.asyncValidators=i),new km(t,{...s,nonNullable:!0})):new km(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new gj(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof km||t instanceof gI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vl,useValue:t.callSetDisabledState??xm}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[pj]})}return n})(),Sre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:GD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Vl,useValue:t.callSetDisabledState??xm}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[pj]})}return n})();function Rre(n,e){if(1&n&&(W(0,"option",14),ne(1),U()),2&n){const t=e.$implicit;ft("value",t),Se(1),an(t)}}function Mre(n,e){1&n&&(W(0,"span",29),ne(1,"\u2605"),U())}function Pre(n,e){if(1&n&&(W(0,"div")(1,"a",30),ut(2,"img",31),U(),ut(3,"br"),ne(4," Facebook"),U()),2&n){const t=Ho().$implicit;Se(1),yo("href",t.Facebook,ai)}}function xre(n,e){if(1&n&&(W(0,"div")(1,"a",30),ut(2,"img",32),U(),ut(3,"br"),ne(4," Instagram"),U()),2&n){const t=Ho().$implicit;Se(1),qo("href","https://www.instagram.com/",t.Instagram,"",ai)}}function Nre(n,e){if(1&n&&(W(0,"div")(1,"a",33),ut(2,"img",34),U(),ut(3,"br"),ne(4," Email"),U()),2&n){const t=Ho().$implicit;Se(1),qo("href","mailto:",t.Email,"",ai)}}function Ore(n,e){if(1&n&&(W(0,"div")(1,"a",30),ut(2,"img",35),U(),ut(3,"br"),ne(4," Website"),U()),2&n){const t=Ho().$implicit;Se(1),yo("href",t.Website,ai)}}function kre(n,e){if(1&n){const t=e0();W(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"div",19)(5,"div",20),ne(6),Gn(7,Mre,2,0,"span",21),U(),W(8,"div",22),ne(9),U(),W(10,"div",23),ne(11),U(),W(12,"div",24),ne(13),U(),W(14,"div")(15,"button",25),Nt("click",function(){const s=dp(t).$implicit;return Uu(Ho().navigateToEditService(s.id))}),ne(16,"Edit"),U()()(),W(17,"div",26)(18,"div",27),Gn(19,Pre,5,1,"div",28),Gn(20,xre,5,1,"div",28),Gn(21,Nre,5,1,"div",28),Gn(22,Ore,5,1,"div",28),U()()()()()()}if(2&n){const t=e.$implicit;Se(6),an(t.Name),Se(1),ft("ngIf",t.Community_Sponsor),Se(2),an(t.Service_Type),Se(2),an(t.Phone_Number),Se(2),an(t.Description),Se(6),ft("ngIf",t.Facebook),Se(1),ft("ngIf",t.Instagram),Se(1),ft("ngIf",t.Email),Se(1),ft("ngIf",t.Website)}}let Fre=(()=>{class n{constructor(t,r,i){this.servicesService=t,this.route=r,this.router=i,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedServiceType=t.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}navigateToEditService(t){this.router.navigate(["/edit-service",t])}handleChange(t){const{target:r}=t;return r&&console.log(r.value),r.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t,t.forEach(r=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(t){console.log("Filter changed:",t),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:t},queryParamsHandling:"merge"}),this.filterServices(t)}filterServices(t){console.log("Filter Serices: "+t),this.fetchServiceTypes(),t&&""!==t?this.servicesService.getServicesByType(t).subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(r=>{this.services=r,this.filteredServices=r,console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(t=>t.Service_Type))]}shareLink(){const r=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(r?"?"+r:"")).then(()=>{alert("Link copied to clipboard!")},s=>{console.error("Could not copy text: ",s)})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(OD),_e(Ba),_e(ci))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[3,"value"],[1,"service-card"],[1,"service-card-inner"],[1,"service-card-front"],[1,"service-card-content"],[1,"card-header"],[1,"card-title"],["class","sponsor-icon",4,"ngIf"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-description"],[1,"editButton",3,"click"],[1,"card-footer"],[1,"social-icons"],[4,"ngIf"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"h1"),ne(3,"Lista de Servicii"),U()(),W(4,"div",2)(5,"h2"),ne(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),U()()(),W(7,"div",3)(8,"div",4)(9,"label",5),ne(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),U()(),W(11,"div",4)(12,"select",6),Nt("change",function(o){return i.onFilterChange(i.handleChange(o))})("ngModelChange",function(o){return i.selectedServiceType=o}),W(13,"option",7),ne(14,"Toate serviciile"),U(),Gn(15,Rre,2,2,"option",8),U()(),W(16,"div",4)(17,"button",9),Nt("click",function(){return i.navigateToAddService()}),ne(18,"Adaugati un Serviciu"),U()(),W(19,"button",10),Nt("click",function(){return i.shareLink()}),ut(20,"i",11),ne(21," Share "),U()(),W(22,"div",12),Gn(23,kre,23,9,"div",13),U()),2&r&&(Se(12),ft("ngModel",i.selectedServiceType),Se(3),ft("ngForOf",i.serviceTypes),Se(8),ft("ngForOf",i.filteredServices))},dependencies:[Fa,lg,Vm,Um,Ul,_f,II],styles:[".editButton[_ngcontent-%COMP%]{visibility:hidden}.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold;font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:1rem;color:#666;margin-top:4px}.card-description[_ngcontent-%COMP%]{text-align:left;font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;color:#666;margin-top:4px}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.service-card[_ngcontent-%COMP%]{background-color:transparent;width:400px;min-height:500px;perspective:1000px}.service-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}.service-card-front[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;box-shadow:0 4px 8px #00000080;margin:10px;padding:40px;box-sizing:border-box;position:relative;position:absolute;width:100%;height:100%;backface-visibility:hidden;-webkit-backface-visibility:hidden}.service-card-front[_ngcontent-%COMP%]{background-color:#fff;color:#000}.service-card-content[_ngcontent-%COMP%]{padding:0}.service-date[_ngcontent-%COMP%]{font-size:12px;color:#f1c40f}.service-footer[_ngcontent-%COMP%]{margin-top:10px}.featured[_ngcontent-%COMP%]{font-weight:700;color:#f39c12}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}#browser-icon[_ngcontent-%COMP%]{fill:red;stroke:#000}"]})}return n})(),Lre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-rules"]],decls:32,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","#",1,"cta-button"]],template:function(r,i){1&r&&(W(0,"div",0),ut(1,"div",1),W(2,"div",2)(3,"h1"),ne(4,"Regulile \u0219i Reglement\u0103rile"),U(),W(5,"p"),ne(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),U(),W(7,"a",3),ne(8,"Get Started"),U()()(),W(9,"h2"),ne(10,"Regulile \u0219i Reglement\u0103rile"),U(),W(11,"ul")(12,"li"),ne(13,"Nu este permis\u0103 nicio form\u0103 de publicitate."),U(),W(14,"li"),ne(15,"Respecta\u021bi to\u021bi membrii."),U(),W(16,"li"),ne(17,"F\u0103r\u0103 spam."),U(),W(18,"li"),ne(19,"F\u0103r\u0103 limbaj ofensator."),U(),W(20,"li"),ne(21,"R\u0103m\xe2ne\u021bi la subiect."),U(),W(22,"li"),ne(23,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),U(),W(24,"li"),ne(25,"Folosi\u021bi un limbaj adecvat."),U(),W(26,"li"),ne(27,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),U(),W(28,"li"),ne(29,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),U()(),W(30,"p"),ne(31,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),U())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(http://source.unsplash.com/800x600/?Seattle) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:#f60;border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}"]})}return n})();function Vre(n,e){1&n&&(W(0,"div",15)(1,"span",16),ne(2,"Sponsor al Comunitatii"),U(),W(3,"span",17),ne(4,"\u2605"),U()())}function Ure(n,e){if(1&n&&(W(0,"div",7)(1,"div",8)(2,"div",9),ne(3),U(),W(4,"div",10),ut(5,"img",11),U(),W(6,"div",12),ne(7),U(),W(8,"div",12),ne(9),U(),W(10,"div",12),ne(11),U(),W(12,"div",12),ne(13),U(),W(14,"div",12)(15,"a",13),ne(16),U()(),W(17,"div",12)(18,"a",13),ne(19),U()(),W(20,"div",12),ne(21),U()(),Gn(22,Vre,5,0,"div",14),U()),2&n){const t=e.$implicit;Se(3),an(t.Name),Se(2),yo("src",t.Poster_Image,ai),Se(2),an(t.Location),Se(2),an(t.Event_date),Se(2),an(t.Price),Se(2),an(t.Phone_Number),Se(2),qo("href","mailto:",t.Contact,"",ai),Se(1),an(t.Contact),Se(2),yo("href",t.Website,ai),Se(1),an(t.Website),Se(2),an(t.Description),Se(1),ft("ngIf",t.Community_Sponsor)}}let Bre=(()=>{class n{constructor(t,r){this.eventService=t,this.router=r,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(t=>{this.events=t})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(r){return new(r||n)(_e(xD),_e(ci))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"card-header"],[1,"card-title"],[1,"card-image"],[3,"src"],[1,"card-subtitle"],[3,"href"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"sponsor-text"],[1,"sponsor-icon"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"h1"),ne(3,"Lista de Evenimente"),U()(),W(4,"div",2)(5,"h2"),ne(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),U()()(),W(7,"div",3)(8,"button",4),Nt("click",function(){return i.navigateToAddEvent()}),ne(9,"Adaugati un Eveniment"),U()(),W(10,"div",5),Gn(11,Ure,23,12,"div",6),U()),2&r&&(Se(11),ft("ngForOf",i.events))},dependencies:[Fa,lg],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();function jre(n,e){1&n&&ut(0,"app-offer-card",7),2&n&&ft("offer",e.$implicit)}let $re=(()=>{class n{constructor(t,r){this.offersService=t,this.router=r,this.offers=[]}ngOnInit(){this.offersService.getOffers().subscribe(t=>{this.offers=t})}navigateToAddOffer(){this.router.navigate(["/add-offers"])}static#e=this.\u0275fac=function(r){return new(r||n)(_e(ND),_e(ci))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-offers"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-job-container"],[3,"click"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[3,"offer"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"h1"),ne(3,"Locuri de munca"),U()(),W(4,"div",2)(5,"h2"),ne(6,"Descoperi\u021bi oferte de membrii comunit\u0103\u021bii"),U()()(),W(7,"div",3)(8,"button",4),Nt("click",function(){return i.navigateToAddOffer()}),ne(9,"Adaugati oferte"),U()(),W(10,"div",5),Gn(11,jre,1,1,"app-offer-card",6),U()),2&r&&(Se(11),ft("ngForOf",i.offers))},dependencies:[Fa,fB],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-offer-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offer-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offers-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.offer-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.offer-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return n})();class zre{constructor(){this.Name="",this.Phone_Number="",this.Email="",this.Description="",this.Website="",this.Facebook="",this.Instagram="",this.Date_Created="",this.Image=""}}class Hre extends zre{constructor(){super(...arguments),this.id=""}}const _j="firebasestorage.googleapis.com",yj="storageBucket";class dr extends St.ZR{constructor(e,t,r=0){super(QD(e),`Firebase Storage: ${t} (${QD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return QD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ir=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ir||{});function QD(n){return"storage/"+n}function YD(){return new dr(ir.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vj(){return new dr(ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ej(){return new dr(ir.CANCELED,"User canceled the upload/download.")}function Ij(){return new dr(ir.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ef(n){return new dr(ir.INVALID_ARGUMENT,n)}function bj(){return new dr(ir.APP_DELETED,"The Firebase app was deleted.")}function wj(n){return new dr(ir.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bm(n,e){return new dr(ir.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function jm(n){throw new dr(ir.INTERNAL_ERROR,"Internal error: "+n)}class Ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ui.makeFromUrl(e,t)}catch{return new Ui(e,"")}if(""===r.path)return r;throw function eie(n){return new dr(ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(oe){oe.path_=decodeURIComponent(oe.path)}const m=t.replace(/[.]/g,"\\."),Y=[{regex:a,indices:{bucket:1,path:3},postModify:function s(oe){"/"===oe.path.charAt(oe.path.length-1)&&(oe.path_=oe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===_j?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let oe=0;oe<Y.length;oe++){const Ae=Y[oe],je=Ae.regex.exec(e);if(je){let L=je[Ae.indices.path];L||(L=""),r=new Ui(je[Ae.indices.bucket],L),Ae.postModify(r);break}}if(null==r)throw function Jre(n){return new dr(ir.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class sie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wI(n){return"string"==typeof n||n instanceof String}function Tj(n){return XD()&&n instanceof Blob}function XD(){return typeof Blob<"u"}function JD(n,e,t,r){if(r<e)throw Ef(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ef(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Cj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var If=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(If||{});function Aj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class die{constructor(e,t,r,i,s,o,a,c,u,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,T)=>{this.resolve_=I,this.reject_=T,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function cie(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=YD();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?bj():Ej():vj())};this.canceled_?t(0,new TI(!1,null,!0)):this.backoffId_=function oie(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function f(...O){u||(u=!0,e.apply(null,O))}function m(O){i=setTimeout(()=>{i=null,n(I,c())},O)}function y(){s&&clearTimeout(s)}function I(O,...q){if(u)return void y();if(O)return y(),void f.call(null,O,...q);if(c()||o)return y(),void f.call(null,O,...q);let Y;r<64&&(r*=2),1===a?(a=2,Y=0):Y=1e3*(r+Math.random()),m(Y)}let T=!1;function N(O){T||(T=!0,y(),!u&&(null!==i?(O||(a=2),clearTimeout(i),m(0)):O||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}((r,i)=>{if(i)return void r(!1,new TI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===If.NO_ERROR,c=s.getStatus();if(!a||Aj(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===If.ABORT;return void r(!1,new TI(!1,null,f))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new TI(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function aie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class TI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function yie(...n){const e=function _ie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(XD())return new Blob(n);throw new dr(ir.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eS{constructor(e,t){this.data=e,this.contentType=t||null}}function tS(n,e){switch(n){case Us.RAW:return new eS(Dj(e));case Us.BASE64:case Us.BASE64URL:return new eS(Sj(n,e));case Us.DATA_URL:return new eS(function bie(n){const e=new Rj(n);return e.base64?Sj(Us.BASE64,e.rest):function Iie(n){let e;try{e=decodeURIComponent(n)}catch{throw Bm(Us.DATA_URL,"Malformed data URL.")}return Dj(e)}(e.rest)}(e),function wie(n){return new Rj(n).contentType}(e))}throw YD()}function Dj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sj(n,e){switch(n){case Us.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Bm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Us.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Bm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Eie(n){if(typeof atob>"u")throw function iie(n){return new dr(ir.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Bm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Rj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Bm(Us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Tie(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class aa{constructor(e,t){let r=0,i="";Tj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Tj(this.data_)){const i=function vie(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new aa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new aa(r,!0)}}static getBlob(...e){if(XD()){const t=e.map(r=>r instanceof aa?r.data_:r);return new aa(yie.apply(null,t))}{const t=e.map(o=>wI(o)?tS(Us.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new aa(i,!0)}}uploadData(){return this.data_}}function nS(n){let e;try{e=JSON.parse(n)}catch{return null}return function lie(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Mj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Die(n,e){return e}class is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Die}}let CI=null;function $m(){if(CI)return CI;const n=[];n.push(new is("bucket")),n.push(new is("generation")),n.push(new is("metageneration")),n.push(new is("name","fullPath",!0));const t=new is("name");t.xform=function e(s,o){return function Sie(n){return!wI(n)||n.length<2?n:Mj(n)}(o)},n.push(t);const i=new is("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new is("timeCreated")),n.push(new is("updated")),n.push(new is("md5Hash",null,!0)),n.push(new is("cacheControl",null,!0)),n.push(new is("contentDisposition",null,!0)),n.push(new is("contentEncoding",null,!0)),n.push(new is("contentLanguage",null,!0)),n.push(new is("contentType",null,!0)),n.push(new is("metadata","customMetadata",!0)),CI=n,CI}function Pj(n,e,t){const r=nS(e);return null===r?null:function Mie(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Rie(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ui(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function rS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const xj="prefixes",Nj="items";class ca{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ua(n){if(!n)throw YD()}function AI(n,e){return function t(r,i){const s=Pj(n,i,e);return ua(null!==s),s}}function bf(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Yre(){return new dr(ir.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Qre(){return new dr(ir.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Zre(n){return new dr(ir.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Xre(n){return new dr(ir.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function zm(n){const e=bf(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Kre(n){return new dr(ir.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function Oj(n,e,t){const i=Xa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ca(i,"GET",AI(n,t),o);return a.errorHandler=zm(e),a}function Fie(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Xa(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new ca(a,"GET",function Oie(n,e){return function t(r,i){const s=function Nie(n,e,t){const r=nS(t);return null===r?null:function xie(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[xj])for(const i of t[xj]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Ui(e,s));r.prefixes.push(o)}if(t[Nj])for(const i of t[Nj]){const s=n._makeStorageReference(new Ui(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return ua(null!==s),s}}(n,e.bucket),u);return f.urlParams=s,f.errorHandler=bf(e),f}function Fj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Bie(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class DI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function iS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ua(!1)}return ua(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Hie={STATE_CHANGED:"state_changed"},ss={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sS(n){switch(n){case"running":case"pausing":case"canceling":return ss.RUNNING;case"paused":return ss.PAUSED;case"success":return ss.SUCCESS;case"canceled":return ss.CANCELED;default:return ss.ERROR}}class qie{constructor(e,t,r){if(function uie(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function wf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Uj=null;class Gie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=If.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=If.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=If.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw jm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Wie extends Gie{initXhr(){this.xhr_.responseType="text"}}function Co(){return Uj?Uj():new Wie}class Bj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=$m(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ir.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Aj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=vj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ir.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function jie(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=Fj(e,r,i),a={name:o.fullPath},c=Xa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=rS(o,t),T=new ca(c,"POST",function I(N){let O;iS(N);try{O=N.getResponseHeader("X-Goog-Upload-URL")}catch{ua(!1)}return ua(wI(O)),O},n.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=bf(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Co,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function $ie(n,e,t,r){const c=new ca(t,"POST",function s(u){const f=iS(u,["active","final"]);let m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ua(!1)}m||ua(!1);const y=Number(m);return ua(!isNaN(y)),new DI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=bf(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Co,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new DI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function zie(n,e,t,r,i,s,o,a){const c=new DI(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function nie(){return new dr(ir.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let f=u;i>0&&(f=Math.min(f,i));const m=c.current;let I="";I=0===f?"finalize":u===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(m,m+f);if(null===N)throw Ij();const Y=new ca(t,"POST",function O(oe,Ae){const je=iS(oe,["active","final"]),z=c.current+f,L=r.size();let B;return B="final"===je?AI(e,s)(oe,Ae):null,new DI(z,L,"final"===je,B)},e.maxUploadRetryTime);return Y.headers=T,Y.body=N.uploadData(),Y.progressCallback=a||null,Y.errorHandler=bf(n),Y}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Co,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Oj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Co,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Lj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let Y="";for(let oe=0;oe<2;oe++)Y+=Math.random().toString().slice(2);return Y}();o["Content-Type"]="multipart/related; boundary="+c;const u=Fj(e,r,i),f=rS(u,t),I=aa.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===I)throw Ij();const T={name:u.fullPath},N=Xa(s,n.host,n._protocol),q=n.maxUploadRetryTime,j=new ca(N,"POST",AI(n,t),q);return j.urlParams=T,j.headers=o,j.body=I.uploadData(),j.errorHandler=bf(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Co,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ej(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=sS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new qie(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(sS(this._state)){case ss.SUCCESS:wf(this._resolve.bind(null,this.snapshot))();break;case ss.CANCELED:case ss.ERROR:wf(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sS(this._state)){case ss.RUNNING:case ss.PAUSED:e.next&&wf(e.next.bind(e,this.snapshot))();break;case ss.SUCCESS:e.complete&&wf(e.complete.bind(e))();break;default:e.error&&wf(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class $l{constructor(e,t){this._service=e,this._location=t instanceof Ui?t:Ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $l(e,t)}get root(){const e=new Ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mj(this._location.path)}get storage(){return this._service}get parent(){const e=function Cie(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ui(this._location.bucket,e);return new $l(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw wj(e)}}function $j(n,e,t){return oS.apply(this,arguments)}function oS(){return(oS=(0,me.Z)(function*(n,e,t){const i=yield zj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $j(n,e,i.nextPageToken))})).apply(this,arguments)}function zj(n,e){null!=e&&"number"==typeof e.maxResults&&JD("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Fie(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Co)}function sse(n){n._throwIfRoot("getDownloadURL");const e=function Lie(n,e,t){const i=Xa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ca(i,"GET",function kie(n,e){return function t(r,i){const s=Pj(n,i,e);return ua(null!==s),function Pie(n,e,t,r){const i=nS(e);if(null===i||!wI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const m=n.fullPath;return Xa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+Cj({alt:"media",token:u})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=zm(e),a}(n.storage,n._location,$m());return n.storage.makeRequestWithTokens(e,Co).then(t=>{if(null===t)throw function rie(){return new dr(ir.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Hj(n,e){const t=function Aie(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ui(n._location.bucket,t);return new $l(n.storage,r)}function qj(n,e){if(n instanceof aS){const t=n;if(null==t._bucket)throw function tie(){return new dr(ir.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yj+"' property when initializing the app?")}();const r=new $l(t,t._bucket);return null!=e?qj(r,e):r}return void 0!==e?Hj(n,e):n}function use(n,e){if(e&&function ase(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof aS)return function cse(n,e){return new $l(n,e)}(n,e);throw Ef("To use ref(service, url), the first argument must be a Storage instance.")}return qj(n,e)}function Gj(n,e){const t=e?.[yj];return null==t?null:Ui.makeFromBucketSpec(t,n)}class aS{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_j,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ui.makeFromBucketSpec(i,this._host):Gj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ui.makeFromBucketSpec(this._url,e):Gj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $l(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new sie(bj());{const o=function mie(n,e,t,r,i,s,o=!0){const a=Cj(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return function pie(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function hie(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function fie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function gie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,r),new die(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Wj="@firebase/storage",Zj="storage";function Qj(n,e){return use(n=(0,St.m9)(n),e)}function vse(n=(0,_r.getApp)(),e){n=(0,St.m9)(n);const r=(0,_r._getProvider)(n,Zj).getImmediate({identifier:e}),i=(0,St.P0)("storage");return i&&Yj(r,...i),r}function Yj(n,e,t,r={}){!function lse(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,St.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Ese(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aS(t,r,i,e,_r.SDK_VERSION)}!function Ise(){(0,_r._registerComponent)(new cE.wA(Zj,Ese,"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(Wj,"0.12.5",""),(0,_r.registerVersion)(Wj,"0.12.5","esm2017")}();class SI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Xj{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new SI(o,this,this._ref)):{next:t.next?o=>t.next(new SI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Jj{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ja(e,this._service))}get items(){return this._delegate.items.map(e=>new Ja(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ja{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function yse(n,e){return Hj(n,e)}(this._delegate,e);return new Ja(t,this.storage)}get root(){return new Ja(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ja(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Xj(function dse(n,e,t){return function ese(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Bj(n,new aa(e),t)}(n=(0,St.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Us.RAW,r){this._throwIfRoot("putString");const i=tS(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new Xj(new Bj(this._delegate,new aa(i.data,!0),s),this)}listAll(){return function gse(n){return function nse(n){const e={prefixes:[],items:[]};return $j(n,e).then(()=>e)}(n=(0,St.m9)(n))}(this._delegate).then(e=>new Jj(e,this.storage))}list(e){return function pse(n,e){return zj(n=(0,St.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Jj(t,this.storage))}getMetadata(){return function hse(n){return function rse(n){n._throwIfRoot("getMetadata");const e=Oj(n.storage,n._location,$m());return n.storage.makeRequestWithTokens(e,Co)}(n=(0,St.m9)(n))}(this._delegate)}updateMetadata(e){return function fse(n,e){return function ise(n,e){n._throwIfRoot("updateMetadata");const t=function Vie(n,e,t,r){const s=Xa(e.fullServerUrl(),n.host,n._protocol),a=rS(t,r),u=n.maxOperationRetryTime,f=new ca(s,"PATCH",AI(n,r),u);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=zm(e),f}(n.storage,n._location,e,$m());return n.storage.makeRequestWithTokens(t,Co)}(n=(0,St.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function mse(n){return sse(n=(0,St.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function _se(n){return function ose(n){n._throwIfRoot("deleteObject");const e=function Uie(n,e){const r=Xa(e.fullServerUrl(),n.host,n._protocol),a=new ca(r,"DELETE",function o(c,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=zm(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Co)}(n=(0,St.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw wj(e)}}class e${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(t$(e))throw Ef("ref() expected a child path but got a URL, use refFromURL instead.");return new Ja(Qj(this._delegate,e),this)}refFromURL(e){if(!t$(e))throw Ef("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ui.makeFromUrl(e,this._delegate.host)}catch{throw Ef("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ja(Qj(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){Yj(this._delegate,e,t,r)}}function t$(n){return/^[A-Za-z]+:\/\//.test(n)}function Cse(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new e$(t,r)}function n$(n){const e=function Dse(n){return new Et(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(lk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Pe(t=>t.bytesTransferred/t.totalBytes*100))}}function RI(n){return{getDownloadURL:()=>k(void 0).pipe(XF,$e(()=>n.getDownloadURL()),es),getMetadata:()=>k(void 0).pipe(XF,$e(()=>n.getMetadata()),es),delete:()=>b(n.delete()),child:e=>RI(n.child(e)),updateMetadata:e=>b(n.updateMetadata(e)),put:(e,t)=>n$(n.put(e,t)),putString:(e,t,r)=>n$(n.putString(e,t,r)),list:e=>b(n.list(e)),listAll:()=>b(n.listAll())}}!function Ase(n){const e={TaskState:ss,TaskEvent:Hie,StringFormat:Us,Storage:e$,Reference:Ja};n.INTERNAL.registerComponent(new cE.wA("storage-compat",Cse,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Yo.Z);const Sse=new Ee("angularfire2.storageBucket"),Rse=new Ee("angularfire2.storage.maxUploadRetryTime"),Mse=new Ee("angularfire2.storage.maxOperationRetryTime"),Pse=new Ee("angularfire2.storage.use-emulator");let r$=(()=>{class n{storage;constructor(t,r,i,s,o,a,c,u,f,m){const y=oE(t,o,r);this.storage=aE(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const I=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&I.useEmulator(...T),c&&I.setMaxUploadRetryTime(c),u&&I.setMaxOperationRetryTime(u),I},[c,u])}ref(t){return RI(this.storage.ref(t))}refFromURL(t){return RI(this.storage.refFromURL(t))}upload(t,r,i){return RI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(fe(Lg),fe(Vg,8),fe(Sse,8),fe(Os),fe(Gt),fe(dl),fe(Rse,8),fe(Mse,8),fe(Pse,8),fe(Fg,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=rn({})}return n})(),Nse=(()=>{class n{constructor(){Yo.Z.registerVersion("angularfire",Wc.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[r$],imports:[xse]})}return n})(),i$=(()=>{class n{constructor(t){this.storage=t}uploadImage(t,r){const i=`${r}/${t.name}`,s=this.storage.ref(i),o=this.storage.upload(i,t);return new Et(a=>{o.snapshotChanges().pipe(_g(()=>{s.getDownloadURL().subscribe(c=>{a.next(c),a.complete()})})).subscribe()})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(r$))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ose(n,e){if(1&n&&(W(0,"option",26),ne(1),U()),2&n){const t=e.$implicit;ft("value",t),Se(1),an(t)}}let kse=(()=>{class n{constructor(t,r,i){this.fb=t,this.servicesService=r,this.imageUploadService=i,this.serviceTypes=[],this.selectedFile=null,this.serviceObj=new Hre,this.serviceForm=this.fb.group({Name:["",vr.required],Email:["",[vr.required,vr.email]],Phone_Number:[""],Website:[""],Facebook:[""],Instagram:[""],Image:[""],Description:[""],Date_Created:[""],Community_Sponsor:[""],Service_Type:["",vr.required]})}ngOnInit(){this.fetchServiceTypes()}onFileSelected(t){this.selectedFile=t.target.files[0]}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&(this.serviceObj.Name=this.serviceForm.value.Name,this.serviceObj.Phone_Number=this.serviceForm.value.Phone_Number,this.serviceObj.Service_Type=this.serviceForm.value.Service_Type,this.serviceObj.Community_Sponsor=!1,this.serviceObj.Email=this.serviceForm.value.Email,this.serviceObj.Website=this.serviceForm.value.Website,this.serviceObj.Facebook=this.serviceForm.value.Facebook,this.serviceObj.Instagram=this.serviceForm.value.Instagram,this.serviceObj.Description=this.serviceForm.value.Description,this.serviceObj.Date_Created=this.serviceForm.value.Date_Created,this.serviceObj.Image=this.serviceForm.value.Image,this.selectedFile?this.imageUploadService.uploadImage(this.selectedFile,"serviceImages").subscribe(t=>{this.serviceObj.Image=t,console.log(t),this.saveService()}):this.saveService())}saveService(){this.servicesService.addService({id:this.serviceObj.id,Name:this.serviceObj.Name,Phone_Number:this.serviceObj.Phone_Number,Service_Type:this.serviceObj.Service_Type,Community_Sponsor:!1,Email:this.serviceObj.Email,Website:this.serviceObj.Website,Facebook:this.serviceObj.Facebook,Instagram:this.serviceObj.Instagram,Description:this.serviceObj.Description,Date_Created:this.serviceObj.Date_Created,Image:this.serviceObj.Image}).then(()=>{console.log("Service added successfully"),this.serviceForm.reset()}).catch(r=>{console.error("Error adding service: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(bI),_e(OD),_e(i$))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-add-service"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Service_Type",1,"required"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["for","Image"],["type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"h1"),ne(3,"Lista de Servicii"),U()(),W(4,"div",2)(5,"h2"),ne(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),U()()(),W(7,"div",3)(8,"form",4),Nt("ngSubmit",function(){return i.onSubmit()}),W(9,"div",5)(10,"label",6),ne(11,"Nume:"),U(),ut(12,"input",7),U(),W(13,"div",5)(14,"label",8),ne(15,"Adresa Email:"),U(),ut(16,"input",9),U(),W(17,"div",5)(18,"label",10),ne(19,"Numar de telefon:"),U(),ut(20,"input",11),U(),W(21,"div",5)(22,"label",12),ne(23,"Pagina Web:"),U(),ut(24,"input",13),U(),W(25,"div",5)(26,"label",14),ne(27,"Pagina Facebook:"),U(),ut(28,"input",15),U(),W(29,"div",5)(30,"label",16),ne(31,"Instagram:"),U(),ut(32,"input",17),U(),W(33,"div",5)(34,"label",18),ne(35,"Descriere a serviciile oferite:"),U(),ut(36,"textarea",19),U(),W(37,"div",5)(38,"label",20),ne(39,"Categoria de serviciului:"),U(),W(40,"select",21),Gn(41,Ose,2,2,"option",22),U()(),W(42,"div",5)(43,"label",23),ne(44,"Categoria de serviciului:"),U(),W(45,"input",24),Nt("change",function(o){return i.onFileSelected(o)}),U()(),W(46,"button",25),ne(47,"Add Service"),U()()()),2&r&&(Se(8),ft("formGroup",i.serviceForm),Se(33),ft("ngForOf",i.serviceTypes),Se(5),ft("disabled",i.serviceForm.invalid))},dependencies:[Fa,Fm,Vm,Um,Ll,Ul,_f,Sm,jl,vf,Lm],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})(),Fse=(()=>{class n{constructor(t,r){this.fb=t,this.eventsService=r,this.eventForm=this.fb.group({Approved:[""],Community_Sponsor:[""],Contact:[""],Description:["",vr.required],Event_date:["",vr.required],Location:["",vr.required],Name:["",vr.required],Phone_Number:[""],Poster_Image:["",vr.required],Price:["",vr.required],Website:[""]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(r=>{console.error("Error adding event: ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(bI),_e(xD))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-add-event"]],decls:40,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Contact"],["id","Contact","formControlName","Contact","required",""],["for","Poster_Image",1,"required"],["id","Poster_Image","formControlName","Poster_Image","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Event_date",1,"required"],["id","Event_date","type","date","formControlName","Event_date","required",""],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Price",1,"required"],["id","Price","formControlName","Price","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"form",1),Nt("ngSubmit",function(){return i.onSubmit()}),W(2,"div",2)(3,"label",3),ne(4,"Event Name:"),U(),ut(5,"input",4),U(),W(6,"div",2)(7,"label",5),ne(8,"Contatct Name:"),U(),ut(9,"input",6),U(),W(10,"div",2)(11,"label",7),ne(12,"Poster Image:"),U(),ut(13,"input",8),U(),W(14,"div",2)(15,"label",9),ne(16,"Phone Number:"),U(),ut(17,"input",10),U(),W(18,"div",2)(19,"label",11),ne(20,"Date:"),U(),ut(21,"input",12),U(),W(22,"div",2)(23,"label",13),ne(24,"Location:"),U(),ut(25,"input",14),U(),W(26,"div",2)(27,"label",15),ne(28,"Description:"),U(),ut(29,"textarea",16),U(),W(30,"div",2)(31,"label",17),ne(32,"Price:"),U(),ut(33,"input",18),U(),W(34,"div",2)(35,"label",19),ne(36,"Website:"),U(),ut(37,"input",20),U(),W(38,"button",21),ne(39,"Add Event"),U()()()),2&r&&(Se(1),ft("formGroup",i.eventForm),Se(37),ft("disabled",i.eventForm.invalid))},dependencies:[Fm,Ll,_f,Sm,jl,vf,Lm],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function Lse(n,e){if(1&n&&(W(0,"option",28),ne(1),U()),2&n){const t=e.$implicit;ft("value",t),Se(1),an(t)}}let Vse=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.offersService=r,this.firestore=i,this.imageUploadService=s,this.offerTypes=[],this.offer={Title:"",Company_Name:"",Contact_Name:"",Phone_Number:"",Email:"",Description:"",Location:"",Website:"",Filled:!1,Date_Created:(new Date).toISOString(),Price:"",Image1:"",Image2:"",Image3:"",Image4:"",Image5:"",OfferType:"",Facebook:"",Instagram:"",id:""},this.selectedFiles=null,this.offerForm=this.fb.group({Title:["",vr.required],Company_Name:[""],Contact_Name:["",vr.required],Phone_Number:["",vr.required],Email:["",[vr.email]],Location:["",vr.required],Website:[""],Description:["",vr.required],Price:[""],Image1:[""],Image2:[""],Image3:[""],Image4:[""],Image5:[""],Filled:!1,Date_Created:[""],OfferType:[""]})}onFileSelected(t){this.selectedFiles=t.target.files}ngOnInit(){this.offersService.getAllOfferTypes().subscribe(t=>{this.offerTypes=t})}onSubmit(t){var r=this;if(console.log(t),this.selectedFiles&&this.selectedFiles.length>0){const i=[];for(let s=0;s<this.selectedFiles.length;s++){const a=this.imageUploadService.uploadImage(this.selectedFiles[s],"offers");i.push(a)}AT(i).pipe(Pe(s=>{this.offer.Image1=s[0]||"",this.offer.Image2=s[1]||"",this.offer.Image3=s[2]||"",this.offer.Image4=s[3]||"",this.offer.Image5=s[4]||""}),$e((0,me.Z)(function*(){return r.saveOffer()}))).subscribe()}else this.saveOffer().subscribe()}saveOffer(){return b(this.firestore.collection("Offers").add(this.offer).then(()=>{console.log("Offer added successfully"),this.offerForm.reset()}).catch(t=>{console.error("Error adding offer: ",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(_e(bI),_e(ND),_e(kl),_e(i$))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-add-offers"]],decls:50,vars:11,consts:[[1,"form-container"],[3,"ngSubmit"],["offerForm","ngForm"],[1,"form-group"],["for","Title",1,"required"],["type","text","name","Title","required","","placeholder","Title",3,"ngModel","ngModelChange"],["for","Company_Name"],["type","text","name","Company_Name","required","","placeholder","Company Name",3,"ngModel","ngModelChange"],["for","Contact_Name",1,"required"],["type","text","name","Contact_Name","required","","placeholder","Contact Name",3,"ngModel","ngModelChange"],["for","Phone_Number",1,"required"],["type","text","name","Phone_Number","required","","placeholder","Phone Number",3,"ngModel","ngModelChange"],["for","Email"],["type","email","name","Email","required","","placeholder","Email",3,"ngModel","ngModelChange"],["for","Description",1,"required"],["name","Description","required","","placeholder","Description",3,"ngModel","ngModelChange"],["for","Price"],["type","text","name","Price","required","","placeholder","Price",3,"ngModel","ngModelChange"],["for","Location",1,"required"],["type","text","name","Location","required","","placeholder","Location",3,"ngModel","ngModelChange"],["for","Website"],["type","url","name","Website","placeholder","Website",3,"ngModel","ngModelChange"],["for","OfferType"],["id","OfferType","name","OfferType","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","Images"],["type","file","id","Images","multiple","","accept","image/*",1,"form-control",3,"change"],["type","submit"],[3,"value"]],template:function(r,i){if(1&r){const s=e0();W(0,"div",0)(1,"form",1,2),Nt("ngSubmit",function(){dp(s);const a=function tx(n){return _s(function Ab(){return yt.lFrame.contextLView}(),$t+n)}(2);return Uu(i.onSubmit(a))}),W(3,"div",3)(4,"label",4),ne(5,"Offer Title:"),U(),W(6,"input",5),Nt("ngModelChange",function(a){return i.offer.Title=a}),U()(),W(7,"div",3)(8,"label",6),ne(9,"Numele Companiei:"),U(),W(10,"input",7),Nt("ngModelChange",function(a){return i.offer.Company_Name=a}),U()(),W(11,"div",3)(12,"label",8),ne(13,"Numele persoanei de contact:"),U(),W(14,"input",9),Nt("ngModelChange",function(a){return i.offer.Contact_Name=a}),U()(),W(15,"div",3)(16,"label",10),ne(17,"Numar de telfon:"),U(),W(18,"input",11),Nt("ngModelChange",function(a){return i.offer.Phone_Number=a}),U()(),W(19,"div",3)(20,"label",12),ne(21,"Adresa de Email:"),U(),W(22,"input",13),Nt("ngModelChange",function(a){return i.offer.Email=a}),U()(),W(23,"div",3)(24,"label",14),ne(25,"Descriiere:"),U(),W(26,"textarea",15),Nt("ngModelChange",function(a){return i.offer.Description=a}),U()(),W(27,"div",3)(28,"label",16),ne(29,"Pret:"),U(),W(30,"input",17),Nt("ngModelChange",function(a){return i.offer.Price=a}),U()(),W(31,"div",3)(32,"label",18),ne(33,"Locatie:"),U(),W(34,"input",19),Nt("ngModelChange",function(a){return i.offer.Location=a}),U()(),W(35,"div",3)(36,"label",20),ne(37,"Website:"),U(),W(38,"input",21),Nt("ngModelChange",function(a){return i.offer.Website=a}),U()(),W(39,"div",3)(40,"label",22),ne(41,"Tip de oferta"),U(),W(42,"select",23),Nt("ngModelChange",function(a){return i.offer.OfferType=a}),Gn(43,Lse,2,2,"option",24),U()(),W(44,"div",3)(45,"label",25),ne(46,"Images"),U(),W(47,"input",26),Nt("change",function(a){return i.onFileSelected(a)}),U()(),W(48,"button",27),ne(49,"Adauga Oferta"),U()()()}2&r&&(Se(6),ft("ngModel",i.offer.Title),Se(4),ft("ngModel",i.offer.Company_Name),Se(4),ft("ngModel",i.offer.Contact_Name),Se(4),ft("ngModel",i.offer.Phone_Number),Se(4),ft("ngModel",i.offer.Email),Se(4),ft("ngModel",i.offer.Description),Se(4),ft("ngModel",i.offer.Price),Se(4),ft("ngModel",i.offer.Location),Se(4),ft("ngModel",i.offer.Website),Se(4),ft("ngModel",i.offer.OfferType),Se(1),ft("ngForOf",i.offerTypes))},dependencies:[Fa,Fm,Vm,Um,Ll,Ul,_f,Sm,jl,II,EI],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return n})();function Use(n,e){if(1&n&&(W(0,"option",26),ne(1),U()),2&n){const t=e.$implicit;ft("value",t),Se(1),an(t)}}let Bse=(()=>{class n{constructor(t,r,i,s){this.fb=t,this.route=r,this.router=i,this.servicesService=s,this.serviceId=null,this.serviceTypes=[],this.serviceForm=this.fb.group({Name:["",vr.required],Email:["",vr.email],Phone_Number:["",vr.required],Website:["",vr.required],Facebook:[""],Instagram:[""],Description:["",vr.required],Service_Type:["",vr.required],Image:[""]})}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getService(this.serviceId).subscribe(t=>{this.serviceForm.patchValue({Name:t?.Name,Email:t?.Email?"":t?.Email,Phone_Number:t?.Phone_Number,Service_Type:t?.Service_Type,Website:t?.Website,Facebook:t?.Facebook,Instagram:t?.Instagram,Description:t?.Description,Image:t?.Image})}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(t=>{this.serviceTypes=t})}onSubmit(){this.serviceForm.valid&&this.serviceId&&(console.log(this.serviceForm),this.serviceForm.value.Facebook=this.serviceForm.value.Facebook||"",this.serviceForm.value.Instagram=this.serviceForm.value.Instagram||"",this.serviceForm.value.Image=this.serviceForm.value.Image||"",this.serviceForm.value.Email=this.serviceForm.value.Email||"",this.servicesService.updateService(this.serviceId,this.serviceForm.value).then(()=>{console.log("Service updated successfully"),this.router.navigate(["/services"])}).catch(t=>{console.error("Error updating service: ",t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(_e(bI),_e(Ba),_e(ci),_e(OD))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-edit-services"]],decls:48,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name"],["id","Name","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Website"],["id","Website","formControlName","Website"],["for","Facebook"],["id","Facebook","formControlName","Facebook"],["for","Instagram"],["id","Instagram","formControlName","Instagram"],["for","Description"],["id","Description","formControlName","Description"],["for","Image"],["id","Image","formControlName","Image"],["for","Service_Type"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"div",1)(2,"h1"),ne(3,"Lista de Servicii"),U()(),W(4,"div",2)(5,"h2"),ne(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),U()()(),W(7,"div",3)(8,"form",4),Nt("ngSubmit",function(){return i.onSubmit()}),W(9,"div",5)(10,"label",6),ne(11,"Nume:"),U(),ut(12,"input",7),U(),W(13,"div",5)(14,"label",8),ne(15,"Adresa Email:"),U(),ut(16,"input",9),U(),W(17,"div",5)(18,"label",10),ne(19,"Numar de telefon:"),U(),ut(20,"input",11),U(),W(21,"div",5)(22,"label",12),ne(23,"Pagina Web:"),U(),ut(24,"input",13),U(),W(25,"div",5)(26,"label",14),ne(27,"Pagina Facebook:"),U(),ut(28,"input",15),U(),W(29,"div",5)(30,"label",16),ne(31,"Instagram:"),U(),ut(32,"input",17),U(),W(33,"div",5)(34,"label",18),ne(35,"Descriere a serviciile oferite:"),U(),ut(36,"textarea",19),U(),W(37,"div",5)(38,"label",20),ne(39,"Imagine:"),U(),ut(40,"input",21),U(),W(41,"div",5)(42,"label",22),ne(43,"Categoria de serviciului:"),U(),W(44,"select",23),Gn(45,Use,2,2,"option",24),U()(),W(46,"button",25),ne(47,"Salvati Serviciu"),U()()()),2&r&&(Se(8),ft("formGroup",i.serviceForm),Se(37),ft("ngForOf",i.serviceTypes),Se(1),ft("disabled",i.serviceForm.invalid))},dependencies:[Fa,Fm,Vm,Um,Ll,Ul,_f,Sm,jl,vf,Lm],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}"]})}return n})(),jse=(()=>{class n{constructor(t){this.firestore=t}getAnalytics(){return this.firestore.collection("analytics").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(kl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $se(n,e){if(1&n&&(W(0,"tr")(1,"td"),ne(2),U(),W(3,"td"),ne(4),m0(5,"json"),U(),W(6,"td"),ne(7),m0(8,"date"),U()()),2&n){const t=e.$implicit;Se(2),an(t.page_path),Se(2),an(function z1(n,e,t){const r=n+$t,i=be(),s=_s(i,r);return ig(i,r)?V1(i,Qr(),e,s.transform,t,s):s.transform(t)}(5,3,t.query_params)),Se(3),an(function H1(n,e,t,r){const i=n+$t,s=be(),o=_s(s,i);return ig(s,i)?U1(s,Qr(),e,o.transform,t,r,o):o.transform(t,r)}(8,5,t.timestamp,"medium"))}}const zse=[{path:"",component:Fne},{path:"services",component:Fre},{path:"rules",component:Lre},{path:"events",component:Bre},{path:"offers",component:$re},{path:"add-service",component:kse},{path:"add-event",component:Fse},{path:"add-offers",component:Vse},{path:"edit-service/:id",component:Bse},{path:"analytics",component:(()=>{class n{constructor(t){this.analyticsService=t,this.analyticsData=[]}ngOnInit(){this.analyticsService.getAnalytics().subscribe(t=>{this.analyticsData=t})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(jse))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-analytics"]],decls:14,vars:1,consts:[[1,"container"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(W(0,"div",0)(1,"h2"),ne(2,"Analytics Data"),U(),W(3,"table",1)(4,"thead")(5,"tr")(6,"th"),ne(7,"Page Path"),U(),W(8,"th"),ne(9,"Query Params"),U(),W(10,"th"),ne(11,"Timestamp"),U()()(),W(12,"tbody"),Gn(13,$se,9,8,"tr",2),U()()()),2&r&&(Se(13),ft("ngForOf",i.analyticsData))},dependencies:[Fa,DO,AO],styles:[".container[_ngcontent-%COMP%]{margin:20px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}return n})()}];let Hse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({imports:[ZF.forRoot(zse),ZF]})}return n})();var qse=We(513);const Wse=new Ee("angularfire2.analytics.analyticsCollectionEnabled"),Kse=new Ee("angularfire2.analytics.appVersion"),Zse=new Ee("angularfire2.analytics.appName"),Qse=new Ee("angularfire2.analytics.debugMode"),Yse=new Ee("angularfire2.analytics.config"),MI="dataLayer";let o$=(()=>{class n{measurementId;analyticsInitialized=new Promise(()=>{});updateConfig(t){var r=this;return(0,me.Z)(function*(){yield r.analyticsInitialized,window.gtag("config",r.measurementId,{...t,update:!0})})()}constructor(t,r,i,s,o,a,c,u,f){if(PO(c)){window[MI]=window[MI]||[];const y=(...N)=>"config"===N[0]&&"firebase"===N[2].origin&&(this.measurementId=N[1],!0),I=N=>{window.gtag=(...O)=>{N&&N(...O),"event"===O[0]&&O[2].send_to===this.measurementId&&(s&&(O[2].app_name=s),i&&(O[2].app_version=i)),o&&typeof console<"u"&&console.info(...O),function(...q){window[MI].push(arguments)}(...O)}};window[MI].some(y)?(this.analyticsInitialized=Promise.resolve(),I()):this.analyticsInitialized=new Promise(N=>{I((...O)=>{y(...O)&&N()})}),a&&this.updateConfig(a),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const m=k(void 0).pipe(En(f.outsideAngular),$e(qse.Gb),$e(y=>y?u.runOutsideAngular(()=>We.e(861).then(We.bind(We,244))):kn),Pe(()=>aE("analytics","AngularFireAnalytics",t.name,()=>{const y=t.analytics();return!1===r&&y.setAnalyticsCollectionEnabled(!1),y},[t,r,a,o])),oC({bufferSize:1,refCount:!1}));return JF(this,m,u)}static \u0275fac=function(r){return new(r||n)(fe(sC),fe(Wse,8),fe(Kse,8),fe(Zse,8),fe(Qse,8),fe(Yse,8),fe(Os),fe(Gt),fe(dl))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const roe=function(n,e){return{"fa-bars":n,"fa-times":e}},ioe=function(n){return{active:n}};let soe=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-navigation"]],decls:23,vars:7,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"fa",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/offers",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(r,i){1&r&&(W(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),ne(4,"Romani in Seattle"),U()(),W(5,"div",4),Nt("click",function(){return i.toggleMenu()}),ut(6,"i",5),U(),W(7,"ul",6)(8,"li",7)(9,"a",8),Nt("click",function(){return i.closeMenu()}),ne(10,"Home"),U()(),W(11,"li",7)(12,"a",9),Nt("click",function(){return i.closeMenu()}),ne(13,"Servicii"),U()(),W(14,"li",7)(15,"a",10),Nt("click",function(){return i.closeMenu()}),ne(16,"Evenimente"),U()(),W(17,"li",7)(18,"a",11),Nt("click",function(){return i.closeMenu()}),ne(19,"Oferte"),U()(),W(20,"li",7)(21,"a",12),Nt("click",function(){return i.closeMenu()}),ne(22,"Regulament"),U()()()()()),2&r&&(Se(6),ft("ngClass",function L1(n,e,t,r,i){return U1(be(),Qr(),n,e,t,r,i)}(2,roe,!i.menuOpen,i.menuOpen)),Se(1),ft("ngClass",function F1(n,e,t,r){return V1(be(),Qr(),n,e,t,r)}(5,ioe,i.menuOpen)))},dependencies:[IO,iE],styles:[".navbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center;font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;z-index:1;width:100%;max-width:1000px;padding:0 10px}.navbar-logo[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;font-weight:700}.menu-icon[_ngcontent-%COMP%]{display:none;cursor:pointer;font-size:2rem}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none;text-align:center}.nav-item[_ngcontent-%COMP%]{height:20px}.nav-links[_ngcontent-%COMP%]{color:#333;text-decoration:none;text-transform:uppercase;padding:.5rem 1rem;display:flex;align-items:center;height:100%}.nav-links[_ngcontent-%COMP%]:hover{border-bottom:2px solid;border-image:linear-gradient(to left,blue 0,blue 33.3%,yellow 33.3%,yellow 66.6%,red 66.6%,red)}.active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 960px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between}.menu-icon[_ngcontent-%COMP%]{display:block}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:absolute;top:60px;left:-100%;opacity:1;transition:all .5s ease;background-color:#ffffffe6}.nav-menu.active[_ngcontent-%COMP%]{background-color:#ffffffe6;left:0;opacity:1;transition:all .5s ease;z-index:1}.nav-item[_ngcontent-%COMP%]{height:40px;margin:10px 70px 10px 10px;padding:10px;width:90%;color:#000;font-size:2rem;text-decoration:none}.nav-links[_ngcontent-%COMP%]{text-align:center;padding:0;width:100%;display:table}}"]})}return n})(),ooe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(r,i){1&r&&(W(0,"footer",0)(1,"div",1),ne(2," \xa9 2024 Romani in Seattle. All rights reserved. "),U()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),aoe=(()=>{class n{constructor(t,r,i,s){this.router=t,this.analytics=r,this.activatedRoute=i,this.firestore=s,this.title="romani-in-seattle"}ngOnInit(){this.router.events.pipe(bs(t=>t instanceof Va)).subscribe(t=>{const r=t.urlAfterRedirects,i=this.activatedRoute.snapshot.queryParams,s=new Date;this.firestore.collection("analytics").add({page_path:r,query_params:i,timestamp:s}).then(()=>{console.log("Analytics data saved")}).catch(o=>{console.error("Error saving analytics data",o)})})}static#e=this.\u0275fac=function(r){return new(r||n)(_e(ci),_e(o$),_e(Ba),_e(kl))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(r,i){1&r&&(W(0,"div",0),ut(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),U())},dependencies:[KT,soe,ooe],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return n})();class a${}class coe{}const ec="*";function c$(n,e=null){return{type:2,steps:n,options:e}}function u$(n){return{type:6,styles:n,offset:null}}class Hm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class l${constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function d$(n){return new le(3e3,!1)}function mu(n){switch(n.length){case 0:return new Hm;case 1:return n[0];default:return new l$(n)}}function h$(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),f=u==o,m=f&&a||new Map;c.forEach((y,I)=>{let T=I,N=y;if("offset"!==I)switch(T=n.normalizePropertyName(T,i),N){case"!":N=t.get(I);break;case ec:N=r.get(I);break;default:N=n.normalizeStyleValue(I,T,N,i)}m.set(T,N)}),f||s.push(m),a=m,o=u}),i.length)throw function Poe(n){return new le(3502,!1)}();return s}function uS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lS(t,"destroy",n)))}}function lS(n,e,t){const s=dS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function dS(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Bs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function f$(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const zoe=(()=>typeof document>"u"?null:document.documentElement)();function hS(n){const e=n.parentNode||n.host||null;return e===zoe?null:e}let zl=null,p$=!1;function g$(n,e){for(;e;){if(e===n)return!0;e=hS(e)}return!1}function m$(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let _$=(()=>{class n{validateStyleProperty(t){return function qoe(n){zl||(zl=function Goe(){return typeof document<"u"?document.body:null}()||{},p$=!!zl.style&&"WebkitAppearance"in zl.style);let e=!0;return zl.style&&!function Hoe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in zl.style,!e&&p$&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in zl.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return g$(t,r)}getParentElement(t){return hS(t)}query(t,r,i){return m$(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Hm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),fS=(()=>{class n{static#e=this.NOOP=new _$}return n})();const Woe=1e3,pS="ng-enter",PI="ng-leave",xI="ng-trigger",NI=".ng-trigger",v$="ng-animating",gS=".ng-animating";function tc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mS(parseFloat(e[1]),e[2])}function mS(n,e){return"s"===e?n*Woe:n}function OI(n,e,t){return n.hasOwnProperty("duration")?n:function Zoe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(d$()),{duration:0,delay:0,easing:""};i=mS(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=mS(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function uoe(){return new le(3100,!1)}()),a=!0),s<0&&(e.push(function loe(){return new le(3101,!1)}()),a=!0),a&&e.splice(c,0,d$())}return{duration:i,delay:s,easing:o}}(n,e,t)}function qm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function E$(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function _u(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function la(n,e,t){e.forEach((r,i)=>{const s=yS(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Hl(n,e){e.forEach((t,r)=>{const i=yS(r);n.style[i]=""})}function Gm(n){return Array.isArray(n)?1==n.length?n[0]:c$(n):n}const _S=new RegExp("{{\\s*(.+?)\\s*}}","g");function b$(n){let e=[];if("string"==typeof n){let t;for(;t=_S.exec(n);)e.push(t[1]);_S.lastIndex=0}return e}function Wm(n,e,t){const r=n.toString(),i=r.replace(_S,(s,o)=>{let a=e[o];return null==a&&(t.push(function hoe(n){return new le(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function kI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Xoe=/-+([a-z0-9])/g;function yS(n){return n.replace(Xoe,(...e)=>e[1].toUpperCase())}function js(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function foe(n){return new le(3004,!1)}()}}function w$(n,e){return window.getComputedStyle(n)[e]}const FI="*";function tae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function nae(n,e,t){if(":"==n[0]){const c=function rae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Doe(n){return new le(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Aoe(n){return new le(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(T$(i,o));"<"==s[0]&&!(i==FI&&o==FI)&&e.push(T$(o,i))}(r,t,e)):t.push(n),t}const LI=new Set(["true","1"]),VI=new Set(["false","0"]);function T$(n,e){const t=LI.has(n)||VI.has(n),r=LI.has(e)||VI.has(e);return(i,s)=>{let o=n==FI||n==i,a=e==FI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?LI.has(n):VI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?LI.has(e):VI.has(e)),o&&a}}const iae=new RegExp("s*:selfs*,?","g");function vS(n,e,t,r){return new sae(n).build(e,t,r)}class sae{constructor(e){this._driver=e}build(e,t,r){const i=new cae(t);return this._resetContextStyleTimingState(i),js(this,Gm(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function goe(){return new le(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function moe(){return new le(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{b$(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(kI(s.values()),t.errors.push(function _oe(n,e){return new le(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=js(this,Gm(e.animation),t);return{type:1,matchers:tae(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ql(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>js(this,r,t)),options:ql(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=js(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:ql(e.options)}}visitAnimate(e,t){const r=function lae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ES(OI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ES(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=OI(t,e);return ES(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:u$({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=u$(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ec?r.push(a):t.errors.push(new le(3002,!1)):r.push(E$(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c);let m=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function voe(n,e,t,r,i){return new le(3010,!1)}()),m=!1),s=f.startTime),m&&u.set(c,{startTime:s,endTime:i}),t.options&&function Yoe(n,e,t){const r=e.params||{},i=b$(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function doe(n){return new le(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Eoe(){return new le(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const f=e.steps.map(q=>{const j=this._makeStyleAst(q,t);let Y=null!=j.offset?j.offset:function uae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(j.styles),oe=0;return null!=Y&&(s++,oe=j.offset=Y),c=c||oe<0||oe>1,a=a||oe<u,u=oe,o.push(oe),j});c&&t.errors.push(function Ioe(){return new le(3012,!1)}()),a&&t.errors.push(function boe(){return new le(3200,!1)}());const m=e.steps.length;let y=0;s>0&&s<m?t.errors.push(function woe(){return new le(3202,!1)}()):0==s&&(y=1/(m-1));const I=m-1,T=t.currentTime,N=t.currentAnimateTimings,O=N.duration;return f.forEach((q,j)=>{const Y=y>0?j==I?1:y*j:o[j],oe=Y*O;t.currentTime=T+N.delay+oe,N.duration=oe,this._validateStyleAst(q,t),q.offset=Y,r.styles.push(q)}),r}visitReference(e,t){return{type:8,animation:js(this,Gm(e.animation),t),options:ql(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ql(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ql(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function oae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(iae,"")),n=n.replace(/@\*/g,NI).replace(/@\w+/g,t=>NI+"-"+t.slice(1)).replace(/:animating/g,gS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Bs(t.collectedStyles,t.currentQuerySelector,new Map);const a=js(this,Gm(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ql(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Toe(){return new le(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:OI(e.timings,t.errors,!0);return{type:12,animation:js(this,Gm(e.animation),t),timings:r,options:null}}}class cae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ql(n){return n?(n=qm(n)).params&&(n.params=function aae(n){return n?qm(n):null}(n.params)):n={},n}function ES(n,e,t){return{duration:n,delay:e,easing:t}}function IS(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class UI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const fae=new RegExp(":enter","g"),gae=new RegExp(":leave","g");function bS(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new mae).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class mae{buildKeyframes(e,t,r,i,s,o,a,c,u,f=[]){u=u||new UI;const m=new wS(e,t,u,i,s,f,[]);m.options=c;const y=c.delay?tc(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),js(this,r,m);const I=m.timelines.filter(T=>T.containsAnimation());if(I.length&&a.size){let T;for(let N=I.length-1;N>=0;N--){const O=I[N];if(O.element===t){T=O;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,m.errors,c)}return I.length?I.map(T=>T.buildKeyframes()):[IS(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:tc(Wm(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?tc(r.duration):null,a=null!=r.delay?tc(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),js(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=BI);const o=tc(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>js(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?tc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),js(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return OI(t.params?Wm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?tc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=BI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(c=m.currentTimeline),js(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const m=f.currentTime;js(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const BI={};class wS{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new jI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=tc(r.duration)),null!=r.delay&&(i.delay=tc(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Wm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new wS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=BI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new _ae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(fae,"."+this._enterClassName)).replace(gae,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function Coe(n){return new le(3014,!1)}()),a}}class jI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new jI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ec),this._currentKeyframe.set(t,ec);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function yae(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ec)}else _u(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=Wm(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ec),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=_u(a,new Map,this._backFill);u.forEach((f,m)=>{"!"===f?e.add(m):f===ec&&t.add(m)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?kI(e.values()):[],o=t.size?kI(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return IS(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class _ae extends jI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=_u(e[0]);c.set("offset",0),s.push(c);const u=_u(e[0]);u.set("offset",D$(a)),s.push(u);const f=e.length-1;for(let m=1;m<=f;m++){let y=_u(e[m]);const I=y.get("offset");y.set("offset",D$((t+I*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return IS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function D$(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class TS{}const vae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Eae extends TS{normalizePropertyName(e,t){return yS(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(vae.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function poe(n,e){return new le(3005,!1)}())}return o+s}}function S$(n,e,t,r,i,s,o,a,c,u,f,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:m,errors:y}}const CS={};class R${constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Iae(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,f){const m=[],y=this.ast.options&&this.ast.options.params||CS,T=this.buildStyles(r,a&&a.params||CS,m),N=c&&c.params||CS,O=this.buildStyles(i,N,m),q=new Set,j=new Map,Y=new Map,oe="void"===i,Ae={params:bae(N,y),delay:this.ast.options?.delay},je=f?[]:bS(e,t,this.ast.animation,s,o,T,O,Ae,u,m);let z=0;if(je.forEach(B=>{z=Math.max(B.duration+B.delay,z)}),m.length)return S$(t,this._triggerName,r,i,oe,T,O,[],[],j,Y,z,m);je.forEach(B=>{const G=B.element,Q=Bs(j,G,new Set);B.preStyleProps.forEach($=>Q.add($));const te=Bs(Y,G,new Set);B.postStyleProps.forEach($=>te.add($)),G!==t&&q.add(G)});const L=kI(q.values());return S$(t,this._triggerName,r,i,oe,T,O,je,L,j,Y,z)}}function bae(n,e){const t=qm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class wae{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=qm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Wm(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class Cae{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new wae(i.style,i.options&&i.options.params||{},r))}),M$(this.states,"true","1"),M$(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new R$(e,i,this.states))}),this.fallbackTransition=function Aae(n,e,t){return new R$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function M$(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Dae=new UI;class Sae{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=vS(this._driver,t,r,[]);if(r.length)throw function xoe(n){return new le(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=h$(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=bS(this._driver,t,s,pS,PI,new Map,new Map,r,Dae,i),o.forEach(f=>{const m=Bs(a,f.element,new Map);f.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(function Noe(){return new le(3300,!1)}()),o=[]),i.length)throw function Ooe(n){return new le(3504,!1)}();a.forEach((f,m)=>{f.forEach((y,I)=>{f.set(I,this._driver.computeStyle(m,I,ec))})});const u=mu(o.map(f=>{const m=a.get(f.element);return this._buildPlayer(f,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function koe(n){return new le(3301,!1)}();return t}listen(e,t,r,i){const s=dS(t,"","","");return uS(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const P$="ng-animate-queued",AS="ng-animate-disabled",Nae=[],x$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Oae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ao="__ng_removed";class DS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Vae(n){return n??null}(r?e.value:e),r){const s=qm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Km="void",SS=new DS(Km);class kae{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,co(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Foe(n,e){return new le(3302,!1)}();if(null==r||0==r.length)throw function Loe(n){return new le(3303,!1)}();if(!function Uae(n){return"start"==n||"done"==n}(r))throw function Voe(n,e){return new le(3400,!1)}();const s=Bs(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Bs(this._engine.statesByElement,e,new Map);return a.has(t)||(co(e,xI),co(e,xI+"-"+t),a.set(t,SS)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Uoe(n){return new le(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new RS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(co(e,xI),co(e,xI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new DS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=SS),u.value!==Km&&c.value===u.value){if(!function $ae(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const N=[],O=s.matchStyles(c.value,c.params,N),q=s.matchStyles(u.value,u.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{Hl(e,O),la(e,q)})}return}const y=Bs(this._engine.playersByElement,e,[]);y.forEach(N=>{N.namespaceId==this.id&&N.triggerName==t&&N.queued&&N.destroy()});let I=s.matchTransition(c.value,u.value,e,u.params),T=!1;if(!I){if(!i)return;I=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:c,toState:u,player:o,isFallbackTransition:T}),T||(co(e,P$),o.onStart(()=>{Tf(e,P$)})),o.onDone(()=>{let N=this.players.indexOf(o);N>=0&&this.players.splice(N,1);const O=this._engine.playersByElement.get(e);if(O){let q=O.indexOf(o);q>=0&&O.splice(q,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,NI,!0);r.forEach(i=>{if(i[Ao])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const f=this.trigger(e,u,Km,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&mu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||SS,f=new DS(Km),m=new RS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ao];(!s||s===x$)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){co(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=dS(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,uS(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Fae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new kae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if($I(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!$I(t))return;const s=t[Ao];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),co(e,AS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Tf(e,AS))}removeNode(e,t,r){if($I(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ao]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return $I(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,NI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,gS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return mu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ao];if(t&&t.setForRemoval){if(e[Ao]=x$,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(AS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)co(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?mu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Boe(n){return new le(3402,!1)}()}_flushAnimations(e,t){const r=new UI,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(Xe=>{f.add(Xe);const ot=this.driver.query(Xe,".ng-animate-queued",!0);for(let ct=0;ct<ot.length;ct++)f.add(ot[ct])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),I=k$(y,this.collectedEnterElements),T=new Map;let N=0;I.forEach((Xe,ot)=>{const ct=pS+N++;T.set(ot,ct),Xe.forEach(Zt=>co(Zt,ct))});const O=[],q=new Set,j=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const ot=this.collectedLeaveElements[Xe],ct=ot[Ao];ct&&ct.setForRemoval&&(O.push(ot),q.add(ot),ct.hasAnimation?this.driver.query(ot,".ng-star-inserted",!0).forEach(Zt=>q.add(Zt)):j.add(ot))}const Y=new Map,oe=k$(y,Array.from(q));oe.forEach((Xe,ot)=>{const ct=PI+N++;Y.set(ot,ct),Xe.forEach(Zt=>co(Zt,ct))}),e.push(()=>{I.forEach((Xe,ot)=>{const ct=T.get(ot);Xe.forEach(Zt=>Tf(Zt,ct))}),oe.forEach((Xe,ot)=>{const ct=Y.get(ot);Xe.forEach(Zt=>Tf(Zt,ct))}),O.forEach(Xe=>{this.processLeaveNode(Xe)})});const Ae=[],je=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(t).forEach(ct=>{const Zt=ct.player,xr=ct.element;if(Ae.push(Zt),this.collectedEnterElements.length){const Ir=xr[Ao];if(Ir&&Ir.setForMove){if(Ir.previousTriggersValues&&Ir.previousTriggersValues.has(ct.triggerName)){const nc=Ir.previousTriggersValues.get(ct.triggerName),As=this.statesByElement.get(ct.element);if(As&&As.has(ct.triggerName)){const rc=As.get(ct.triggerName);rc.value=nc,As.set(ct.triggerName,rc)}}return void Zt.destroy()}}const lo=!m||!this.driver.containsElement(m,xr),Er=Y.get(xr),Qn=T.get(xr),Yn=this._buildInstruction(ct,r,Qn,Er,lo);if(Yn.errors&&Yn.errors.length)return void je.push(Yn);if(lo)return Zt.onStart(()=>Hl(xr,Yn.fromStyles)),Zt.onDestroy(()=>la(xr,Yn.toStyles)),void i.push(Zt);if(ct.isFallbackTransition)return Zt.onStart(()=>Hl(xr,Yn.fromStyles)),Zt.onDestroy(()=>la(xr,Yn.toStyles)),void i.push(Zt);const vu=[];Yn.timelines.forEach(Ir=>{Ir.stretchStartingKeyframe=!0,this.disabledNodes.has(Ir.element)||vu.push(Ir)}),Yn.timelines=vu,r.append(xr,Yn.timelines),o.push({instruction:Yn,player:Zt,element:xr}),Yn.queriedElements.forEach(Ir=>Bs(a,Ir,[]).push(Zt)),Yn.preStyleProps.forEach((Ir,nc)=>{if(Ir.size){let As=c.get(nc);As||c.set(nc,As=new Set),Ir.forEach((rc,Eu)=>As.add(Eu))}}),Yn.postStyleProps.forEach((Ir,nc)=>{let As=u.get(nc);As||u.set(nc,As=new Set),Ir.forEach((rc,Eu)=>As.add(Eu))})});if(je.length){const Xe=[];je.forEach(ot=>{Xe.push(function joe(n,e){return new le(3505,!1)}())}),Ae.forEach(ot=>ot.destroy()),this.reportError(Xe)}const z=new Map,L=new Map;o.forEach(Xe=>{const ot=Xe.element;r.has(ot)&&(L.set(ot,ot),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,z))}),i.forEach(Xe=>{const ot=Xe.element;this._getPreviousPlayers(ot,!1,Xe.namespaceId,Xe.triggerName,null).forEach(Zt=>{Bs(z,ot,[]).push(Zt),Zt.destroy()})});const B=O.filter(Xe=>L$(Xe,c,u)),G=new Map;O$(G,this.driver,j,u,ec).forEach(Xe=>{L$(Xe,c,u)&&B.push(Xe)});const te=new Map;I.forEach((Xe,ot)=>{O$(te,this.driver,new Set(Xe),c,"!")}),B.forEach(Xe=>{const ot=G.get(Xe),ct=te.get(Xe);G.set(Xe,new Map([...ot?.entries()??[],...ct?.entries()??[]]))});const $=[],uo=[],yu={};o.forEach(Xe=>{const{element:ot,player:ct,instruction:Zt}=Xe;if(r.has(ot)){if(f.has(ot))return ct.onDestroy(()=>la(ot,Zt.toStyles)),ct.disabled=!0,ct.overrideTotalTime(Zt.totalTime),void i.push(ct);let xr=yu;if(L.size>1){let Er=ot;const Qn=[];for(;Er=Er.parentNode;){const Yn=L.get(Er);if(Yn){xr=Yn;break}Qn.push(Er)}Qn.forEach(Yn=>L.set(Yn,xr))}const lo=this._buildAnimation(ct.namespaceId,Zt,z,s,te,G);if(ct.setRealPlayer(lo),xr===yu)$.push(ct);else{const Er=this.playersByElement.get(xr);Er&&Er.length&&(ct.parentPlayer=mu(Er)),i.push(ct)}}else Hl(ot,Zt.fromStyles),ct.onDestroy(()=>la(ot,Zt.toStyles)),uo.push(ct),f.has(ot)&&i.push(ct)}),uo.forEach(Xe=>{const ot=s.get(Xe.element);if(ot&&ot.length){const ct=mu(ot);Xe.setRealPlayer(ct)}}),i.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<O.length;Xe++){const ot=O[Xe],ct=ot[Ao];if(Tf(ot,PI),ct&&ct.hasAnimation)continue;let Zt=[];if(a.size){let lo=a.get(ot);lo&&lo.length&&Zt.push(...lo);let Er=this.driver.query(ot,gS,!0);for(let Qn=0;Qn<Er.length;Qn++){let Yn=a.get(Er[Qn]);Yn&&Yn.length&&Zt.push(...Yn)}}const xr=Zt.filter(lo=>!lo.destroyed);xr.length?Bae(this,ot,xr):this.processLeaveNode(ot)}return O.length=0,$.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const ot=this.players.indexOf(Xe);this.players.splice(ot,1)}),Xe.play()}),$}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Km;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,f=u!==s,m=Bs(r,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(I=>{const T=I.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),I.destroy(),m.push(I)})}Hl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],f=new Set,m=new Set,y=t.timelines.map(T=>{const N=T.element;f.add(N);const O=N[Ao];if(O&&O.removedBeforeQueried)return new Hm(T.duration,T.delay);const q=N!==c,j=function jae(n){const e=[];return F$(n,e),e}((r.get(N)||Nae).map(z=>z.getRealPlayer())).filter(z=>!!z.element&&z.element===N),Y=s.get(N),oe=o.get(N),Ae=h$(this._normalizer,T.keyframes,Y,oe),je=this._buildPlayer(T,Ae,j);if(T.subTimeline&&i&&m.add(N),q){const z=new RS(e,a,N);z.setRealPlayer(je),u.push(z)}return je});u.forEach(T=>{Bs(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function Lae(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>co(T,v$));const I=mu(y);return I.onDestroy(()=>{f.forEach(T=>Tf(T,v$)),la(c,t.toStyles)}),m.forEach(T=>{Bs(i,T,[]).push(I)}),I}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Hm(e.duration,e.delay)}}class RS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Hm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>uS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function $I(n){return n&&1===n.nodeType}function N$(n,e){const t=n.style.display;return n.style.display=e??"none",t}function O$(n,e,t,r,i){const s=[];t.forEach(c=>s.push(N$(c)));const o=[];r.forEach((c,u)=>{const f=new Map;c.forEach(m=>{const y=e.computeStyle(u,m,i);f.set(m,y),(!y||0==y.length)&&(u[Ao]=Oae,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(c=>N$(c,s[a++])),o}function k$(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function co(n,e){n.classList?.add(e)}function Tf(n,e){n.classList?.remove(e)}function Bae(n,e,t){mu(t).onDone(()=>n.processLeaveNode(e))}function F$(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof l$?F$(r.players,e):e.push(r)}}function L$(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class zI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Fae(e,t,r),this._timelineEngine=new Sae(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],f=vS(this._driver,s,c,[]);if(c.length)throw function Moe(n,e){return new le(3404,!1)}();a=function Tae(n,e,t){return new Cae(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=f$(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=f$(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Hae=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&la(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(la(this._element,this._initialStyles),this._endStyles&&(la(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hl(this._element,this._endStyles),this._endStyles=null),la(this._element,this._initialStyles),this._state=3)}}return n})();function MS(n){let e=null;return n.forEach((t,r)=>{(function qae(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class V${constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:w$(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Gae{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return g$(e,t)}getParentElement(e){return hS(e)}query(e,t,r){return m$(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,f=o.filter(I=>I instanceof V$);(function Joe(n,e){return 0===n||0===e})(r,i)&&f.forEach(I=>{I.currentSnapshot.forEach((T,N)=>u.set(N,T))});let m=function Qoe(n){return n.length?n[0]instanceof Map?n:n.map(e=>E$(e)):[]}(t).map(I=>_u(I));m=function eae(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,w$(n,a)))}}return e}(e,m,u);const y=function zae(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=MS(e[0]),e.length>1&&(r=MS(e[e.length-1]))):e instanceof Map&&(t=MS(e)),t||r?new Hae(n,t,r):null}(e,m);return new V$(e,m,c,y)}}let Wae=(()=>{class n extends a${constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Jn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?c$(t):t;return U$(this._renderer,null,r,"register",[i]),new Kae(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Bp),fe(gr))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class Kae extends coe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Zae(this._id,e,t||{},this._renderer)}}class Zae{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return U$(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function U$(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const B$="@.disabled";let Qae=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new j$("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(c),new Yae(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Bp),fe(zI),fe(Gt))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class j${constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==B$?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Yae extends j${constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==B$?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Xae(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Jae(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const $$=[{provide:a$,useClass:Wae},{provide:TS,useFactory:function tce(){return new Eae}},{provide:zI,useClass:(()=>{class n extends zI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(gr),fe(fS),fe(TS),fe(el))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})()},{provide:Bp,useFactory:function nce(n,e,t){return new Qae(n,e,t)},deps:[gT,zI,Gt]}],PS=[{provide:fS,useFactory:()=>new Gae},{provide:LM,useValue:"BrowserAnimations"},...$$],z$=[{provide:fS,useClass:_$},{provide:LM,useValue:"NoopAnimations"},...$$];let rce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?z$:PS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n});static#n=this.\u0275inj=rn({providers:PS,imports:[KO]})}return n})();const H$_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};class Cf{constructor(e){return e}}class xS{constructor(){return(0,_r.getApps)()}}const NS=new Ee("angularfire2._apps"),sce={provide:Cf,useFactory:function ice(n){return n&&1===n.length?n[0]:new Cf((0,_r.getApp)())},deps:[[new $r,NS]]},oce={provide:xS,deps:[[new $r,NS]]};function ace(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Cf(r)}}let cce=(()=>{class n{constructor(t){(0,_r.registerVersion)("angularfire",Wc.full,"core"),(0,_r.registerVersion)("angularfire",Wc.full,"app"),(0,_r.registerVersion)("angular",Cw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(Os))};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[sce,oce]})}return n})();function uce(n,...e){return{ngModule:cce,providers:[{provide:NS,useFactory:ace(n),multi:!0,deps:[Gt,vi,dl,...e]}]}}const lce=iC(_r.initializeApp,!0);We(35);class kS{constructor(){return sE("auth")}}class LS{constructor(e){return e}}const G$="firestore",VS=new Ee("angularfire2.firestore-instances");function mce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new LS(r)}}const _ce={provide:class pce{constructor(){return sE(G$)}},deps:[[new $r,VS]]},yce={provide:LS,useFactory:function gce(n,e){const t=rC(G$,n,e);return t&&new LS(t)},deps:[[new $r,VS],Cf]};let vce=(()=>{class n{constructor(){(0,_r.registerVersion)("angularfire",Wc.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[yce,_ce]})}return n})();function Ece(n,...e){return{ngModule:vce,providers:[{provide:VS,useFactory:mce(n),multi:!0,deps:[Gt,vi,dl,xS,[new $r,kS],[new $r,Fg],...e]}]}}const Ice=iC(dte,!0);class US{constructor(e){return e}}const W$="storage",BS=new Ee("angularfire2.storage-instances");function Tce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new US(r)}}const Cce={provide:class bce{constructor(){return sE(W$)}},deps:[[new $r,BS]]},Ace={provide:US,useFactory:function wce(n,e){const t=rC(W$,n,e);return t&&new US(t)},deps:[[new $r,BS],Cf]};let Dce=(()=>{class n{constructor(){(0,_r.registerVersion)("angularfire",Wc.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xn({type:n});static \u0275inj=rn({providers:[Ace,Cce]})}return n})();function Sce(n,...e){return{ngModule:Dce,providers:[{provide:BS,useFactory:Tce(n),multi:!0,deps:[Gt,vi,dl,xS,[new $r,kS],[new $r,Fg],...e]}]}}const Rce=iC(vse,!0);let Mce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=xn({type:n,bootstrap:[aoe]});static#n=this.\u0275inj=rn({imports:[KO,Hse,rce,PK,lZ,fZ,Cne,Nse,ZY.initializeApp(H$_firebase),uce(()=>lce(H$_firebase)),Ece(()=>Ice()),Sce(()=>Rce()),Sre,Dre]})}return n})();A7().bootstrapModule(Mce).catch(n=>console.error(n))},513:(cs,$n,We)=>{We.d($n,{Gb:()=>Ws,Kz:()=>sd,EI:()=>Wi,lT:()=>fe,Iv:()=>_c,xP:()=>ya,Xd:()=>Mu});var P=We(861),Re=We(303),V=We(879),xe=We(58),Rt=We(537),Cn=We(878);const An="@firebase/installations",Ut="0.6.7",At=1e4,ge=`w:${Ut}`,Te="FIS_v2",Ye="https://firebaseinstallations.googleapis.com/v1",It=36e5,at=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(S){return S instanceof xe.ZR&&S.code.includes("request-failed")}function Dn({projectId:S}){return`${Ye}/projects/${S}/installations`}function gn(S){return{token:S.token,requestStatus:2,expiresIn:ee(S.expiresIn),creationTime:Date.now()}}function Wt(S,F){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,P.Z)(function*(S,F){const ye=(yield F.json()).error;return at.create("request-failed",{requestName:S,serverCode:ye.code,serverMessage:ye.message,serverStatus:ye.status})})).apply(this,arguments)}function wr({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function ht(S){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(S){const F=yield S();return F.status>=500&&F.status<600?S():F})).apply(this,arguments)}function ee(S){return Number(S.replace("s","000"))}function xt(){return(xt=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:F},{fid:K}){const ye=Dn(S),Me=wr(S),ze=F.getImmediate({optional:!0});if(ze){const jt=yield ze.getHeartbeatsHeader();jt&&Me.append("x-firebase-client",jt)}const mt={method:"POST",headers:Me,body:JSON.stringify({fid:K,authVersion:Te,appId:S.appId,sdkVersion:ge})},_t=yield ht(()=>fetch(ye,mt));if(_t.ok){const jt=yield _t.json();return{fid:jt.fid||K,registrationStatus:2,refreshToken:jt.refreshToken,authToken:gn(jt.authToken)}}throw yield Wt("Create Installation",_t)})).apply(this,arguments)}function Pn(S){return new Promise(F=>{setTimeout(F,S)})}const Et=/^[cdef][\w-]{21}$/,mn="";function sr(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const K=function ie(S){return function dn(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Et.test(K)?K:mn}catch{return mn}}function se(S){return`${S.appName}!${S.appId}`}const ue=new Map;function pe(S,F){const K=se(S);Ne(K,F),function Ft(S,F){const K=function Qe(){return!Pe&&"BroadcastChannel"in self&&(Pe=new BroadcastChannel("[Firebase] FID Change"),Pe.onmessage=S=>{Ne(S.data.key,S.data.fid)}),Pe}();K&&K.postMessage({key:S,fid:F}),function Vt(){0===ue.size&&Pe&&(Pe.close(),Pe=null)}()}(K,F)}function Ne(S,F){const K=ue.get(S);if(K)for(const ye of K)ye(F)}let Pe=null;const _n="firebase-installations-database",hn=1,vn="firebase-installations-store";let Sn=null;function Qt(){return Sn||(Sn=(0,Cn.X3)(_n,hn,{upgrade:(S,F)=>{0===F&&S.createObjectStore(vn)}})),Sn}function Hn(S,F){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,P.Z)(function*(S,F){const K=se(S),Me=(yield Qt()).transaction(vn,"readwrite"),ze=Me.objectStore(vn),Ke=yield ze.get(K);return yield ze.put(F,K),yield Me.done,(!Ke||Ke.fid!==F.fid)&&pe(S,F.fid),F})).apply(this,arguments)}function zi(S){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.Z)(function*(S){const F=se(S),ye=(yield Qt()).transaction(vn,"readwrite");yield ye.objectStore(vn).delete(F),yield ye.done})).apply(this,arguments)}function Lt(S,F){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*(S,F){const K=se(S),Me=(yield Qt()).transaction(vn,"readwrite"),ze=Me.objectStore(vn),Ke=yield ze.get(K),mt=F(Ke);return void 0===mt?yield ze.delete(K):yield ze.put(mt,K),yield Me.done,mt&&(!Ke||Ke.fid!==mt.fid)&&pe(S,mt.fid),mt})).apply(this,arguments)}function us(S){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,P.Z)(function*(S){let F;const K=yield Lt(S.appConfig,ye=>{const Me=function Hi(S){return Nr(S||{fid:sr(),registrationStatus:0})}(ye),ze=function Gr(S,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(at.create("app-offline"))};const K={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},ye=function zs(S,F){return Ci.apply(this,arguments)}(S,K);return{installationEntry:K,registrationPromise:ye}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:hr(S)}:{installationEntry:F}}(S,Me);return F=ze.registrationPromise,ze.installationEntry});return K.fid===mn?{installationEntry:yield F}:{installationEntry:K,registrationPromise:F}}),Ti.apply(this,arguments)}function Ci(){return Ci=(0,P.Z)(function*(S,F){try{const K=yield function vt(S,F){return xt.apply(this,arguments)}(S,F);return Hn(S.appConfig,K)}catch(K){throw nt(K)&&409===K.customData.serverCode?yield zi(S.appConfig):yield Hn(S.appConfig,{fid:F.fid,registrationStatus:0}),K}}),Ci.apply(this,arguments)}function hr(S){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(S){let F=yield tn(S.appConfig);for(;1===F.registrationStatus;)yield Pn(100),F=yield tn(S.appConfig);if(0===F.registrationStatus){const{installationEntry:K,registrationPromise:ye}=yield us(S);return ye||K}return F})).apply(this,arguments)}function tn(S){return Lt(S,F=>{if(!F)throw at.create("installation-not-found");return Nr(F)})}function Nr(S){return function kn(S){return 1===S.registrationStatus&&S.registrationTime+At<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Ai(){return(Ai=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:F},K){const ye=function cn(S,{fid:F}){return`${Dn(S)}/${F}/authTokens:generate`}(S,K),Me=function Pt(S,{refreshToken:F}){const K=wr(S);return K.append("Authorization",function Je(S){return`${Te} ${S}`}(F)),K}(S,K),ze=F.getImmediate({optional:!0});if(ze){const jt=yield ze.getHeartbeatsHeader();jt&&Me.append("x-firebase-client",jt)}const mt={method:"POST",headers:Me,body:JSON.stringify({installation:{sdkVersion:ge,appId:S.appId}})},_t=yield ht(()=>fetch(ye,mt));if(_t.ok)return gn(yield _t.json());throw yield Wt("Generate Auth Token",_t)})).apply(this,arguments)}function Or(S){return Di.apply(this,arguments)}function Di(){return Di=(0,P.Z)(function*(S,F=!1){let K;const ye=yield Lt(S.appConfig,ze=>{if(!hs(ze))throw at.create("not-registered");const Ke=ze.authToken;if(!F&&function Ds(S){return 2===S.requestStatus&&!function qs(S){const F=Date.now();return F<S.creationTime||S.creationTime+S.expiresIn<F+It}(S)}(Ke))return ze;if(1===Ke.requestStatus)return K=function ls(S,F){return or.apply(this,arguments)}(S,F),ze;{if(!navigator.onLine)throw at.create("app-offline");const mt=function ke(S){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:F})}(ze);return K=function Cr(S,F){return ds.apply(this,arguments)}(S,mt),mt}});return K?yield K:ye.authToken}),Di.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(S,F){let K=yield En(S.appConfig);for(;1===K.authToken.requestStatus;)yield Pn(100),K=yield En(S.appConfig);const ye=K.authToken;return 0===ye.requestStatus?Or(S,F):ye})).apply(this,arguments)}function En(S){return Lt(S,F=>{if(!hs(F))throw at.create("not-registered");return function R(S){return 1===S.requestStatus&&S.requestTime+At<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function ds(){return ds=(0,P.Z)(function*(S,F){try{const K=yield function Hs(S,F){return Ai.apply(this,arguments)}(S,F),ye=Object.assign(Object.assign({},F),{authToken:K});return yield Hn(S.appConfig,ye),K}catch(K){if(!nt(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const ye=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Hn(S.appConfig,ye)}else yield zi(S.appConfig);throw K}}),ds.apply(this,arguments)}function hs(S){return void 0!==S&&2===S.registrationStatus}function b(){return(b=(0,P.Z)(function*(S){const F=S,{installationEntry:K,registrationPromise:ye}=yield us(F);return ye?ye.catch(console.error):Or(F).catch(console.error),K.fid})).apply(this,arguments)}function w(){return w=(0,P.Z)(function*(S,F=!1){const K=S;return yield function k(S){return de.apply(this,arguments)}(K),(yield Or(K,F)).token}),w.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*(S){const{registrationPromise:F}=yield us(S);F&&(yield F)})).apply(this,arguments)}function ho(S){return at.create("missing-app-config-values",{valueName:S})}const un="installations",oc=S=>{const F=S.getProvider("app").getImmediate(),K=function kr(S){if(!S||!S.options)throw ho("App Configuration");if(!S.name)throw ho("App Name");const F=["projectId","apiKey","appId"];for(const K of F)if(!S.options[K])throw ho(K);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(F);return{app:F,appConfig:K,heartbeatServiceProvider:(0,Re._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},ac=S=>{const F=S.getProvider("app").getImmediate(),K=(0,Re._getProvider)(F,un).getImmediate();return{getId:()=>function x(S){return b.apply(this,arguments)}(K),getToken:Me=>function D(S){return w.apply(this,arguments)}(K,Me)}};(function cc(){(0,Re._registerComponent)(new Rt.wA(un,oc,"PUBLIC")),(0,Re._registerComponent)(new Rt.wA("installations-internal",ac,"PRIVATE"))})(),(0,Re.registerVersion)(An,Ut),(0,Re.registerVersion)(An,Ut,"esm2017");const da="analytics",le="firebase_id",uc="origin",gt=6e4,nn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lc="https://www.googletagmanager.com/gtag/js",Ar=new V.Yd("@firebase/analytics"),ar=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function hi(S){if(!S.startsWith(lc)){const F=ar.create("invalid-gtag-resource",{gtagURL:S});return Ar.warn(F.message),""}return S}function Pf(S){return Promise.all(S.map(F=>F.catch(K=>K)))}function Ql(){return(Ql=(0,P.Z)(function*(S,F,K,ye,Me,ze){const Ke=ye[Me];try{if(Ke)yield F[Ke];else{const _t=(yield Pf(K)).find(jt=>jt.measurementId===Me);_t&&(yield F[_t.appId])}}catch(mt){Ar.error(mt)}S("config",Me,ze)})).apply(this,arguments)}function Xl(){return(Xl=(0,P.Z)(function*(S,F,K,ye,Me){try{let ze=[];if(Me&&Me.send_to){let Ke=Me.send_to;Array.isArray(Ke)||(Ke=[Ke]);const mt=yield Pf(K);for(const _t of Ke){const jt=mt.find(fs=>fs.measurementId===_t),Fr=jt&&F[jt.appId];if(!Fr){ze=[];break}ze.push(Fr)}}0===ze.length&&(ze=Object.values(F)),yield Promise.all(ze),S("event",ye,Me||{})}catch(ze){Ar.error(ze)}})).apply(this,arguments)}const l_=30,ed=new class dt{constructor(F={},K=1e3){this.throttleMetadata=F,this.intervalMillis=K}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,K){this.throttleMetadata[F]=K}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function td(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Le(){return(Le=(0,P.Z)(function*(S){var F;const{appId:K,apiKey:ye}=S,Me={method:"GET",headers:td(ye)},ze=nn.replace("{app-id}",K),Ke=yield fetch(ze,Me);if(200!==Ke.status&&304!==Ke.status){let mt="";try{const _t=yield Ke.json();null!==(F=_t.error)&&void 0!==F&&F.message&&(mt=_t.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:mt})}return Ke.json()})).apply(this,arguments)}function rn(){return(rn=(0,P.Z)(function*(S,F=ed,K){const{appId:ye,apiKey:Me,measurementId:ze}=S.options;if(!ye)throw ar.create("no-app-id");if(!Me){if(ze)return{measurementId:ze,appId:ye};throw ar.create("no-api-key")}const Ke=F.getThrottleMetadata(ye)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mt=new fc;return setTimeout((0,P.Z)(function*(){mt.abort()}),void 0!==K?K:gt),ha({appId:ye,apiKey:Me,measurementId:ze},Ke,mt,F)})).apply(this,arguments)}function ha(S,F,K){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,P.Z)(function*(S,{throttleEndTimeMillis:F,backoffCount:K},ye,Me=ed){var ze;const{appId:Ke,measurementId:mt}=S;try{yield function Cu(S,F){return new Promise((K,ye)=>{const Me=Math.max(F-Date.now(),0),ze=setTimeout(K,Me);S.addEventListener(()=>{clearTimeout(ze),ye(ar.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(ye,F)}catch(_t){if(mt)return Ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:Ke,measurementId:mt};throw _t}try{const _t=yield function hc(S){return Le.apply(this,arguments)}(S);return Me.deleteThrottleMetadata(Ke),_t}catch(_t){const jt=_t;if(!function nd(S){if(!(S instanceof xe.ZR&&S.customData))return!1;const F=Number(S.customData.httpStatus);return 429===F||500===F||503===F||504===F}(jt)){if(Me.deleteThrottleMetadata(Ke),mt)return Ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${jt?.message}]`),{appId:Ke,measurementId:mt};throw _t}const Fr=503===Number(null===(ze=jt?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,xe.$s)(K,Me.intervalMillis,l_):(0,xe.$s)(K,Me.intervalMillis),fs={throttleEndTimeMillis:Date.now()+Fr,backoffCount:K+1};return Me.setThrottleMetadata(Ke,fs),Ar.debug(`Calling attemptFetch again in ${Fr} millis`),ha(S,fs,ye,Me)}}),Tu.apply(this,arguments)}class fc{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let fo,Ee;function Ss(){return(Ss=(0,P.Z)(function*(S,F,K,ye,Me){if(Me&&Me.global)S("event",K,ye);else{const ze=yield F;S("event",K,Object.assign(Object.assign({},ye),{send_to:ze}))}})).apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(S,F,K,ye){if(ye&&ye.global)return S("set",{screen_name:K}),Promise.resolve();S("config",yield F,{update:!0,screen_name:K})})).apply(this,arguments)}function So(){return(So=(0,P.Z)(function*(S,F,K,ye){if(ye&&ye.global)return S("set",{user_id:K}),Promise.resolve();S("config",yield F,{update:!0,user_id:K})})).apply(this,arguments)}function Ro(){return(Ro=(0,P.Z)(function*(S,F,K,ye){if(ye&&ye.global){const Me={};for(const ze of Object.keys(K))Me[`user_properties.${ze}`]=K[ze];return S("set",Me),Promise.resolve()}S("config",yield F,{update:!0,user_properties:K})})).apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(S,F){const K=yield S;window[`ga-disable-${K}`]=!F})).apply(this,arguments)}function fa(){return(fa=(0,P.Z)(function*(){if(!(0,xe.hl)())return Ar.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(S){return Ar.warn(ar.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function pa(){return pa=(0,P.Z)(function*(S,F,K,ye,Me,ze,Ke){var mt;const _t=function d_(S){return rn.apply(this,arguments)}(S);_t.then(fi=>{K[fi.measurementId]=fi.appId,S.options.measurementId&&fi.measurementId!==S.options.measurementId&&Ar.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${fi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fi=>Ar.error(fi)),F.push(_t);const jt=function mc(){return fa.apply(this,arguments)}().then(fi=>{if(fi)return ye.getId()}),[Fr,fs]=yield Promise.all([_t,jt]);(function Jl(S){const F=window.document.getElementsByTagName("script");for(const K of Object.values(F))if(K.src&&K.src.includes(lc)&&K.src.includes(S))return K;return null})(ze)||function Fn(S,F){const K=function xf(S,F){let K;return window.trustedTypes&&(K=window.trustedTypes.createPolicy(S,F)),K}("firebase-js-sdk-policy",{createScriptURL:hi}),ye=document.createElement("script"),Me=`${lc}?l=${S}&id=${F}`;ye.src=K?K?.createScriptURL(Me):Me,ye.async=!0,document.head.appendChild(ye)}(ze,Fr.measurementId),Ee&&(Me("consent","default",Ee),function Mo(S){Ee=S}(void 0)),Me("js",new Date);const Lr=null!==(mt=Ke?.config)&&void 0!==mt?mt:{};return Lr[uc]="firebase",Lr.update=!0,null!=fs&&(Lr[le]=fs),Me("config",Fr.measurementId,Lr),fo&&(Me("set",fo),function gc(S){fo=S}(void 0)),Fr.measurementId}),pa.apply(this,arguments)}class id{constructor(F){this.app=F}_delete(){return delete Rs[this.app.options.appId],Promise.resolve()}}let Rs={},Ru=[];const Of={};let xo,Dr,ga="dataLayer",Po="gtag",qi=!1;function Mu(S){if(qi)throw ar.create("already-initialized");S.dataLayerName&&(ga=S.dataLayerName),S.gtagName&&(Po=S.gtagName)}function Gi(S,F,K){!function kf(){const S=[];if((0,xe.ru)()&&S.push("This is a browser extension environment."),(0,xe.zI)()||S.push("Cookies are not available."),S.length>0){const F=S.map((ye,Me)=>`(${Me+1}) ${ye}`).join(" "),K=ar.create("invalid-analytics-context",{errorInfo:F});Ar.warn(K.message)}}();const ye=S.options.appId;if(!ye)throw ar.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ar.create("no-api-key");Ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rs[ye])throw ar.create("already-exists",{id:ye});if(!qi){!function Gs(S){let F=[];Array.isArray(window[S])?F=window[S]:window[S]=F}(ga);const{wrappedGtag:ze,gtagCore:Ke}=function u_(S,F,K,ye,Me){let ze=function(...Ke){window[ye].push(arguments)};return window[Me]&&"function"==typeof window[Me]&&(ze=window[Me]),window[Me]=function Nf(S,F,K,ye){function ze(){return ze=(0,P.Z)(function*(Ke,...mt){try{if("event"===Ke){const[_t,jt]=mt;yield function Yl(S,F,K,ye,Me){return Xl.apply(this,arguments)}(S,F,K,_t,jt)}else if("config"===Ke){const[_t,jt]=mt;yield function dc(S,F,K,ye,Me,ze){return Ql.apply(this,arguments)}(S,F,K,ye,_t,jt)}else if("consent"===Ke){const[_t,jt]=mt;S("consent",_t,jt)}else if("get"===Ke){const[_t,jt,Fr]=mt;S("get",_t,jt,Fr)}else if("set"===Ke){const[_t]=mt;S("set",_t)}else S(Ke,...mt)}catch(_t){Ar.error(_t)}}),ze.apply(this,arguments)}return function Me(Ke){return ze.apply(this,arguments)}}(ze,S,F,K),{gtagCore:ze,wrappedGtag:window[Me]}}(Rs,Ru,Of,ga,Po);Dr=ze,xo=Ke,qi=!0}return Rs[ye]=function Su(S,F,K,ye,Me,ze,Ke){return pa.apply(this,arguments)}(S,Ru,Of,F,xo,ga,K),new id(S)}function Ws(){return _a.apply(this,arguments)}function _a(){return(_a=(0,P.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}function fe(S,F,K){S=(0,xe.m9)(S),function rd(S,F,K,ye){return Ct.apply(this,arguments)}(Dr,Rs[S.app.options.appId],F,K).catch(ye=>Ar.error(ye))}function _c(S,F,K){S=(0,xe.m9)(S),function Du(S,F,K,ye){return So.apply(this,arguments)}(Dr,Rs[S.app.options.appId],F,K).catch(ye=>Ar.error(ye))}function ya(S,F,K){S=(0,xe.m9)(S),function si(S,F,K,ye){return Ro.apply(this,arguments)}(Dr,Rs[S.app.options.appId],F,K).catch(ye=>Ar.error(ye))}function Wi(S,F){S=(0,xe.m9)(S),function f_(S,F){return pc.apply(this,arguments)}(Rs[S.app.options.appId],F).catch(K=>Ar.error(K))}function sd(S,F,K,ye){S=(0,xe.m9)(S),function Au(S,F,K,ye,Me){return Ss.apply(this,arguments)}(Dr,Rs[S.app.options.appId],F,K,ye).catch(Me=>Ar.error(Me))}const Ms="@firebase/analytics";!function Jn(){(0,Re._registerComponent)(new Rt.wA(da,(F,{options:K})=>Gi(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,Re._registerComponent)(new Rt.wA("analytics-internal",function S(F){try{const K=F.getProvider(da).getImmediate();return{logEvent:(ye,Me,ze)=>sd(K,ye,Me,ze)}}catch(K){throw ar.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,Re.registerVersion)(Ms,"0.10.4"),(0,Re.registerVersion)(Ms,"0.10.4","esm2017")}()},106:(cs,$n,We)=>{We.d($n,{Z:()=>zn});var P=We(58),Re=We(537),V=We(303),xe=We(879);class Rt{constructor(at,nt){this._delegate=at,this.firebase=nt,(0,V._addComponent)(at,new Re.wA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(at,nt=V._DEFAULT_ENTRY_NAME){var Dn;this._delegate.checkDestroyed();const gn=this._delegate.container.getProvider(at);return!gn.isInitialized()&&"EXPLICIT"===(null===(Dn=gn.getComponent())||void 0===Dn?void 0:Dn.instantiationMode)&&gn.initialize(),gn.getImmediate({identifier:nt})}_removeServiceInstance(at,nt=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(nt)}_addComponent(at){(0,V._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,V._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const An=new P.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function At(){const Mt=function Ut(Mt){const at={},nt={__esModule:!0,initializeApp:function Wt(ht,De={}){const ee=V.initializeApp(ht,De);if((0,P.r3)(at,ee.name))return at[ee.name];const Je=new Mt(ee,nt);return at[ee.name]=Je,Je},app:gn,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function wr(ht){const De=ht.name,ee=De.replace("-compat","");if(V._registerComponent(ht)&&"PUBLIC"===ht.type){const Je=(vt=gn())=>{if("function"!=typeof vt[ee])throw An.create("invalid-app-argument",{appName:De});return vt[ee]()};void 0!==ht.serviceProps&&(0,P.ZB)(Je,ht.serviceProps),nt[ee]=Je,Mt.prototype[ee]=function(...vt){return this._getService.bind(this,De).apply(this,ht.multipleInstances?vt:[])}}return"PUBLIC"===ht.type?nt[ee]:null},removeApp:function Dn(ht){delete at[ht]},useAsService:function Pt(ht,De){return"serverAuth"===De?null:De},modularAPIs:V}};function gn(ht){if(!(0,P.r3)(at,ht=ht||V._DEFAULT_ENTRY_NAME))throw An.create("no-app",{appName:ht});return at[ht]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Kt(){return Object.keys(at).map(ht=>at[ht])}}),gn.App=Mt,nt}(Rt);return Mt.INTERNAL=Object.assign(Object.assign({},Mt.INTERNAL),{createFirebaseNamespace:At,extendNamespace:function at(nt){(0,P.ZB)(Mt,nt)},createSubscribe:P.ne,ErrorFactory:P.LL,deepExtend:P.ZB}),Mt}(),Te=new xe.Yd("@firebase/app-compat");if((0,P.jU)()&&void 0!==self.firebase){Te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Mt=self.firebase.SDK_VERSION;Mt&&Mt.indexOf("LITE")>=0&&Te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const zn=ge;!function Bt(Mt){(0,V.registerVersion)("@firebase/app-compat","0.2.35",Mt)}()},303:(cs,$n,We)=>{We.r($n),We.d($n,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>se,_addComponent:()=>Ne,_addOrOverwriteComponent:()=>Ft,_apps:()=>pe,_clearComponents:()=>vn,_components:()=>ae,_getProvider:()=>Qe,_isFirebaseApp:()=>_n,_isFirebaseServerApp:()=>hn,_registerComponent:()=>Pe,_removeServiceInstance:()=>Vt,_serverApps:()=>ve,deleteApp:()=>Ti,getApp:()=>ii,getApps:()=>us,initializeApp:()=>ri,initializeServerApp:()=>Lt,onLog:()=>zs,registerVersion:()=>Gr,setLogLevel:()=>Ci});var P=We(861),Re=We(537),V=We(879),xe=We(58),Rt=We(878);class Cn{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(x=>{if(function An(ke){const R=ke.getComponent();return"VERSION"===R?.type}(x)){const b=x.getImmediate();return`${b.library}/${b.version}`}return null}).filter(x=>x).join(" ")}}const Ut="@firebase/app",At="0.10.5",ge=new V.Yd("@firebase/app"),se="[DEFAULT]",ue={[Ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},pe=new Map,ve=new Map,ae=new Map;function Ne(ke,R){try{ke.container.addComponent(R)}catch(x){ge.debug(`Component ${R.name} failed to register with FirebaseApp ${ke.name}`,x)}}function Ft(ke,R){ke.container.addOrOverwriteComponent(R)}function Pe(ke){const R=ke.name;if(ae.has(R))return ge.debug(`There were multiple attempts to register component ${R}.`),!1;ae.set(R,ke);for(const x of pe.values())Ne(x,ke);for(const x of ve.values())Ne(x,ke);return!0}function Qe(ke,R){const x=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return x&&x.triggerHeartbeat(),ke.container.getProvider(R)}function Vt(ke,R,x=se){Qe(ke,R).clearInstance(x)}function _n(ke){return void 0!==ke.options}function hn(ke){return void 0!==ke.settings}function vn(){ae.clear()}const Qt=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Hn{constructor(R,x,b){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},x),this._name=x.name,this._automaticDataCollectionEnabled=x.automaticDataCollectionEnabled,this._container=b,this.container.addComponent(new Re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}class Tr extends Hn{constructor(R,x,b,D){const w=void 0!==x.automaticDataCollectionEnabled&&x.automaticDataCollectionEnabled,k={name:b,automaticDataCollectionEnabled:w};super(void 0!==R.apiKey?R:R.options,k,D),this._serverConfig=Object.assign({automaticDataCollectionEnabled:w},x),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,x.releaseOnDeref=void 0,Gr(Ut,At,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(R){this.isDeleted||(this._refCount++,void 0!==R&&this._finalizationRegistry.register(R,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ti(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Qt.create("server-app-deleted")}}const zi="10.12.2";function ri(ke,R={}){let x=ke;"object"!=typeof R&&(R={name:R});const b=Object.assign({name:se,automaticDataCollectionEnabled:!1},R),D=b.name;if("string"!=typeof D||!D)throw Qt.create("bad-app-name",{appName:String(D)});if(x||(x=(0,xe.aH)()),!x)throw Qt.create("no-options");const w=pe.get(D);if(w){if((0,xe.vZ)(x,w.options)&&(0,xe.vZ)(b,w.config))return w;throw Qt.create("duplicate-app",{appName:D})}const k=new Re.H0(D);for(const Oe of ae.values())k.addComponent(Oe);const de=new Hn(x,b,k);return pe.set(D,de),de}function Lt(ke,R){if((0,xe.jU)())throw Qt.create("invalid-server-app-environment");let x;void 0===R.automaticDataCollectionEnabled&&(R.automaticDataCollectionEnabled=!1),x=_n(ke)?ke.options:ke;const b=Object.assign(Object.assign({},R),x);if(void 0!==b.releaseOnDeref&&delete b.releaseOnDeref,void 0!==R.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Qt.create("finalization-registry-not-supported",{});const w=""+($e=JSON.stringify(b),[...$e].reduce((pt,Yt)=>Math.imul(31,pt)+Yt.charCodeAt(0)|0,0)),k=ve.get(w);var $e;if(k)return k.incRefCount(R.releaseOnDeref),k;const de=new Re.H0(w);for(const $e of ae.values())de.addComponent($e);const Oe=new Tr(x,R,w,de);return ve.set(w,Oe),Oe}function ii(ke=se){const R=pe.get(ke);if(!R&&ke===se&&(0,xe.aH)())return ri();if(!R)throw Qt.create("no-app",{appName:ke});return R}function us(){return Array.from(pe.values())}function Ti(ke){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,P.Z)(function*(ke){let R=!1;const x=ke.name;pe.has(x)?(R=!0,pe.delete(x)):ve.has(x)&&ke.decRefCount()<=0&&(ve.delete(x),R=!0),R&&(yield Promise.all(ke.container.getProviders().map(b=>b.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function Gr(ke,R,x){var b;let D=null!==(b=ue[ke])&&void 0!==b?b:ke;x&&(D+=`-${x}`);const w=D.match(/\s|\//),k=R.match(/\s|\//);if(w||k){const de=[`Unable to register library "${D}" with version "${R}":`];return w&&de.push(`library name "${D}" contains illegal characters (whitespace or "/")`),w&&k&&de.push("and"),k&&de.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void ge.warn(de.join(" "))}Pe(new Re.wA(`${D}-version`,()=>({library:D,version:R}),"VERSION"))}function zs(ke,R){if(null!==ke&&"function"!=typeof ke)throw Qt.create("invalid-log-argument");(0,V.Am)(ke,R)}function Ci(ke){(0,V.Ub)(ke)}const hr="firebase-heartbeat-database",Wr=1,tn="firebase-heartbeat-store";let Nr=null;function kn(){return Nr||(Nr=(0,Rt.X3)(hr,Wr,{upgrade:(ke,R)=>{if(0===R)try{ke.createObjectStore(tn)}catch(x){console.warn(x)}}}).catch(ke=>{throw Qt.create("idb-open",{originalErrorMessage:ke.message})})),Nr}function Ai(){return(Ai=(0,P.Z)(function*(ke){try{const x=(yield kn()).transaction(tn),b=yield x.objectStore(tn).get(Di(ke));return yield x.done,b}catch(R){if(R instanceof xe.ZR)ge.warn(R.message);else{const x=Qt.create("idb-get",{originalErrorMessage:R?.message});ge.warn(x.message)}}})).apply(this,arguments)}function cn(ke,R){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.Z)(function*(ke,R){try{const b=(yield kn()).transaction(tn,"readwrite");yield b.objectStore(tn).put(R,Di(ke)),yield b.done}catch(x){if(x instanceof xe.ZR)ge.warn(x.message);else{const b=Qt.create("idb-set",{originalErrorMessage:x?.message});ge.warn(b.message)}}})).apply(this,arguments)}function Di(ke){return`${ke.name}!${ke.options.appId}`}class En{constructor(R){this.container=R,this._heartbeatsCache=null;const x=this.container.getProvider("app").getImmediate();this._storage=new hs(x),this._heartbeatsCachePromise=this._storage.read().then(b=>(this._heartbeatsCache=b,b))}triggerHeartbeat(){var R=this;return(0,P.Z)(function*(){var x,b;const w=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),k=Cr();if((null!=(null===(x=R._heartbeatsCache)||void 0===x?void 0:x.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(b=R._heartbeatsCache)||void 0===b?void 0:b.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==k&&!R._heartbeatsCache.heartbeats.some(de=>de.date===k))return R._heartbeatsCache.heartbeats.push({date:k,agent:w}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(de=>{const Oe=new Date(de.date).valueOf();return Date.now()-Oe<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,P.Z)(function*(){var x;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(x=R._heartbeatsCache)||void 0===x?void 0:x.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const b=Cr(),{heartbeatsToSend:D,unsentEntries:w}=function ds(ke,R=1024){const x=[];let b=ke.slice();for(const D of ke){const w=x.find(k=>k.agent===D.agent);if(w){if(w.dates.push(D.date),Ds(x)>R){w.dates.pop();break}}else if(x.push({agent:D.agent,dates:[D.date]}),Ds(x)>R){x.pop();break}b=b.slice(1)}return{heartbeatsToSend:x,unsentEntries:b}}(R._heartbeatsCache.heartbeats),k=(0,xe.L)(JSON.stringify({version:2,heartbeats:D}));return R._heartbeatsCache.lastSentHeartbeatDate=b,w.length>0?(R._heartbeatsCache.heartbeats=w,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),k})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class hs{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,P.Z)(function*(){if(yield R._canUseIndexedDBPromise){const b=yield function Hs(ke){return Ai.apply(this,arguments)}(R.app);return b?.heartbeats?b:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var x=this;return(0,P.Z)(function*(){var b;if(yield x._canUseIndexedDBPromise){const w=yield x.read();return cn(x.app,{lastSentHeartbeatDate:null!==(b=R.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var x=this;return(0,P.Z)(function*(){var b;if(yield x._canUseIndexedDBPromise){const w=yield x.read();return cn(x.app,{lastSentHeartbeatDate:null!==(b=R.lastSentHeartbeatDate)&&void 0!==b?b:w.lastSentHeartbeatDate,heartbeats:[...w.heartbeats,...R.heartbeats]})}})()}}function Ds(ke){return(0,xe.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function qs(ke){Pe(new Re.wA("platform-logger",R=>new Cn(R),"PRIVATE")),Pe(new Re.wA("heartbeat",R=>new En(R),"PRIVATE")),Gr(Ut,At,ke),Gr(Ut,At,"esm2017"),Gr("fire-js","")}("")},537:(cs,$n,We)=>{We.d($n,{H0:()=>Ut,wA:()=>V});var P=We(861),Re=We(58);class V{constructor(ge,Te,Ye){this.name=ge,this.instanceFactory=Te,this.type=Ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const xe="[DEFAULT]";class Rt{constructor(ge,Te){this.name=ge,this.container=Te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const Te=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(Te)){const Ye=new Re.BH;if(this.instancesDeferred.set(Te,Ye),this.isInitialized(Te)||this.shouldAutoInitialize())try{const It=this.getOrInitializeService({instanceIdentifier:Te});It&&Ye.resolve(It)}catch{}}return this.instancesDeferred.get(Te).promise}getImmediate(ge){var Te;const Ye=this.normalizeInstanceIdentifier(ge?.identifier),It=null!==(Te=ge?.optional)&&void 0!==Te&&Te;if(!this.isInitialized(Ye)&&!this.shouldAutoInitialize()){if(It)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ye})}catch(Bt){if(It)return null;throw Bt}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function An(At){return"EAGER"===At.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:xe})}catch{}for(const[Te,Ye]of this.instancesDeferred.entries()){const It=this.normalizeInstanceIdentifier(Te);try{const Bt=this.getOrInitializeService({instanceIdentifier:It});Ye.resolve(Bt)}catch{}}}}clearInstance(ge=xe){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,P.Z)(function*(){const Te=Array.from(ge.instances.values());yield Promise.all([...Te.filter(Ye=>"INTERNAL"in Ye).map(Ye=>Ye.INTERNAL.delete()),...Te.filter(Ye=>"_delete"in Ye).map(Ye=>Ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=xe){return this.instances.has(ge)}getOptions(ge=xe){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:Te={}}=ge,Ye=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(Ye))throw Error(`${this.name}(${Ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const It=this.getOrInitializeService({instanceIdentifier:Ye,options:Te});for(const[Bt,zn]of this.instancesDeferred.entries())Ye===this.normalizeInstanceIdentifier(Bt)&&zn.resolve(It);return It}onInit(ge,Te){var Ye;const It=this.normalizeInstanceIdentifier(Te),Bt=null!==(Ye=this.onInitCallbacks.get(It))&&void 0!==Ye?Ye:new Set;Bt.add(ge),this.onInitCallbacks.set(It,Bt);const zn=this.instances.get(It);return zn&&ge(zn,It),()=>{Bt.delete(ge)}}invokeOnInitCallbacks(ge,Te){const Ye=this.onInitCallbacks.get(Te);if(Ye)for(const It of Ye)try{It(ge,Te)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:Te={}}){let Ye=this.instances.get(ge);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:(At=ge,At===xe?void 0:At),options:Te}),this.instances.set(ge,Ye),this.instancesOptions.set(ge,Te),this.invokeOnInitCallbacks(Ye,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,Ye)}catch{}var At;return Ye||null}normalizeInstanceIdentifier(ge=xe){return this.component?this.component.multipleInstances?ge:xe:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ut{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const Te=this.getProvider(ge.name);if(Te.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);Te.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const Te=new Rt(ge,this);return this.providers.set(ge,Te),Te}getProviders(){return Array.from(this.providers.values())}}},879:(cs,$n,We)=>{We.d($n,{Am:()=>At,Ub:()=>Ut,Yd:()=>An,in:()=>Re});const P=[];var Re=function(ge){return ge[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",ge}(Re||{});const V={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},xe=Re.INFO,Rt={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},Cn=(ge,Te,...Ye)=>{if(Te<ge.logLevel)return;const It=(new Date).toISOString(),Bt=Rt[Te];if(!Bt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Te})`);console[Bt](`[${It}]  ${ge.name}:`,...Ye)};class An{constructor(Te){this.name=Te,this._logLevel=xe,this._logHandler=Cn,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(Te){if(!(Te in Re))throw new TypeError(`Invalid value "${Te}" assigned to \`logLevel\``);this._logLevel=Te}setLogLevel(Te){this._logLevel="string"==typeof Te?V[Te]:Te}get logHandler(){return this._logHandler}set logHandler(Te){if("function"!=typeof Te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Te}get userLogHandler(){return this._userLogHandler}set userLogHandler(Te){this._userLogHandler=Te}debug(...Te){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...Te),this._logHandler(this,Re.DEBUG,...Te)}log(...Te){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...Te),this._logHandler(this,Re.VERBOSE,...Te)}info(...Te){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...Te),this._logHandler(this,Re.INFO,...Te)}warn(...Te){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...Te),this._logHandler(this,Re.WARN,...Te)}error(...Te){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...Te),this._logHandler(this,Re.ERROR,...Te)}}function Ut(ge){P.forEach(Te=>{Te.setLogLevel(ge)})}function At(ge,Te){for(const Ye of P){let It=null;Te&&Te.level&&(It=V[Te.level]),Ye.userLogHandler=null===ge?null:(Bt,zn,...Mt)=>{const at=Mt.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");zn>=(It??Bt.logLevel)&&ge({level:Re[zn].toLowerCase(),message:at,args:Mt,type:Bt.name})}}}},365:(cs,$n,We)=>{We.r($n);var P=We(861),Re=We(106),V=We(35),xe=We(58),An=(We(303),We(879),We(537));function Ut(){return window}function Te(){return Te=(0,P.Z)(function*(b,D,w){var k;const{BuildInfo:de}=Ut();(0,V.au)(D.sessionId,"AuthEvent did not contain a session ID");const Oe=yield function nt(b){return Dn.apply(this,arguments)}(D.sessionId),$e={};return(0,V.av)()?$e.ibi=de.packageName:(0,V.aw)()?$e.apn=de.packageName:(0,V.ax)(b,"operation-not-supported-in-this-environment"),de.displayName&&($e.appDisplayName=de.displayName),$e.sessionId=Oe,(0,V.ay)(b,w,D.type,void 0,null!==(k=D.eventId)&&void 0!==k?k:void 0,$e)}),Te.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(b){const{BuildInfo:D}=Ut(),w={};(0,V.av)()?w.iosBundleId=D.packageName:(0,V.aw)()?w.androidPackageName=D.packageName:(0,V.ax)(b,"operation-not-supported-in-this-environment"),yield(0,V.az)(b,w)})).apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(b,D,w){const{cordova:k}=Ut();let de=()=>{};try{yield new Promise((Oe,$e)=>{let pt=null;function Yt(){var it;Oe();const kr=null===(it=k.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof kr&&kr(),"function"==typeof w?.close&&w.close()}function Fe(){pt||(pt=window.setTimeout(()=>{$e((0,V.aB)(b,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===document?.visibilityState&&Fe()}D.addPassiveListener(Yt),document.addEventListener("resume",Fe,!1),(0,V.aw)()&&document.addEventListener("visibilitychange",In,!1),de=()=>{D.removePassiveListener(Yt),document.removeEventListener("resume",Fe,!1),document.removeEventListener("visibilitychange",In,!1),pt&&window.clearTimeout(pt)}})}finally{de()}})).apply(this,arguments)}function Dn(){return(Dn=(0,P.Z)(function*(b){const D=function gn(b){if((0,V.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const D=new ArrayBuffer(b.length),w=new Uint8Array(D);for(let k=0;k<b.length;k++)w[k]=b.charCodeAt(k);return w}(b),w=yield crypto.subtle.digest("SHA-256",D);return Array.from(new Uint8Array(w)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Kt extends V.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(D=>{this.resolveInialized=D})}addPassiveListener(D){this.passiveListeners.add(D)}removePassiveListener(D){this.passiveListeners.delete(D)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(D){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(D)),super.onEvent(D)}initialized(){var D=this;return(0,P.Z)(function*(){yield D.initPromise})()}}function ht(b){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(b){const D=yield vt()._get(xt(b));return D&&(yield vt()._remove(xt(b))),D})).apply(this,arguments)}function Je(){const b=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return b.join("")}function vt(){return(0,V.aE)(V.b)}function xt(b){return(0,V.aF)("authEvent",b.config.apiKey,b.name)}function Et(b){if(!b?.includes("?"))return{};const[D,...w]=b.split("?");return(0,xe.zd)(w.join("?"))}const ie=class sr{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aG,this._overrideRedirectResult=V.aH}_initialize(D){var w=this;return(0,P.Z)(function*(){const k=D._key();let de=w.eventManagers.get(k);return de||(de=new Kt(D),w.eventManagers.set(k,de),w.attachCallbackListeners(D,de)),de})()}_openPopup(D){(0,V.ax)(D,"operation-not-supported-in-this-environment")}_openRedirect(D,w,k,de){var Oe=this;return(0,P.Z)(function*(){!function at(b){var D,w,k,de,Oe,$e,pt,Yt,Fe,In;const it=Ut();(0,V.aC)("function"==typeof(null===(D=it?.universalLinks)||void 0===D?void 0:D.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.aC)(typeof(null===(w=it?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.aC)("function"==typeof(null===(Oe=null===(de=null===(k=it?.cordova)||void 0===k?void 0:k.plugins)||void 0===de?void 0:de.browsertab)||void 0===Oe?void 0:Oe.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aC)("function"==typeof(null===(Yt=null===(pt=null===($e=it?.cordova)||void 0===$e?void 0:$e.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===Yt?void 0:Yt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aC)("function"==typeof(null===(In=null===(Fe=it?.cordova)||void 0===Fe?void 0:Fe.InAppBrowser)||void 0===In?void 0:In.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(D);const $e=yield Oe._initialize(D);yield $e.initialized(),$e.resetRedirect(),(0,V.aI)(),yield Oe._originValidation(D);const pt=function wr(b,D,w=null){return{type:D,eventId:w,urlResponse:null,sessionId:Je(),postBody:null,tenantId:b.tenantId,error:(0,V.aB)(b,"no-auth-event")}}(D,k,de);yield function Pt(b,D){return vt()._set(xt(b),D)}(D,pt);const Yt=yield function ge(b,D,w){return Te.apply(this,arguments)}(D,pt,w),Fe=yield function Bt(b){const{cordova:D}=Ut();return new Promise(w=>{D.plugins.browsertab.isAvailable(k=>{let de=null;k?D.plugins.browsertab.openUrl(b):de=D.InAppBrowser.open(b,(0,V.aA)()?"_blank":"_system","location=yes"),w(de)})})}(Yt);return function zn(b,D,w){return Mt.apply(this,arguments)}(D,$e,Fe)})()}_isIframeWebStorageSupported(D,w){throw new Error("Method not implemented.")}_originValidation(D){const w=D._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Ye(b){return It.apply(this,arguments)}(D)),this.originValidationPromises[w]}attachCallbackListeners(D,w){const{universalLinks:k,handleOpenURL:de,BuildInfo:Oe}=Ut(),$e=setTimeout((0,P.Z)(function*(){yield ht(D),w.onEvent(se())}),500),pt=function(){var In=(0,P.Z)(function*(it){clearTimeout($e);const kr=yield ht(D);let ho=null;kr&&it?.url&&(ho=function ee(b,D){var w,k;const de=function dn(b){const D=Et(b),w=D.link?decodeURIComponent(D.link):void 0,k=Et(w).link,de=D.deep_link_id?decodeURIComponent(D.deep_link_id):void 0;return Et(de).link||de||k||w||b}(D);if(de.includes("/__/auth/callback")){const Oe=Et(de),$e=Oe.firebaseError?function Pn(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Oe.firebaseError)):null,pt=null===(k=null===(w=$e?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],Yt=pt?(0,V.aB)(pt):null;return Yt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:de,postBody:null}}return null}(kr,it.url)),w.onEvent(ho||se())});return function(kr){return In.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,pt);const Yt=de,Fe=`${Oe.packageName.toLowerCase()}://`;Ut().handleOpenURL=function(){var In=(0,P.Z)(function*(it){if(it.toLowerCase().startsWith(Fe)&&pt({url:it}),"function"==typeof Yt)try{Yt(it)}catch(kr){console.error(kr)}});return function(it){return In.apply(this,arguments)}}()}};function se(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.aB)("no-auth-event")}}function Ne(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Pe(b=(0,xe.z$)()){return!("file:"!==Ne()&&"ionic:"!==Ne()&&"capacitor:"!==Ne()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function vn(){try{const b=self.localStorage,D=V.aN();if(b)return b.setItem(D,"1"),b.removeItem(D),!function hn(b=(0,xe.z$)()){return function Vt(){return(0,xe.w1)()&&11===document?.documentMode}()||function _n(b=(0,xe.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,xe.hl)()}catch{return Sn()&&(0,xe.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qt(){return(function Ft(){return"http:"===Ne()||"https:"===Ne()}()||(0,xe.ru)()||Pe())&&!function Qe(){return(0,xe.b$)()||(0,xe.UG)()}()&&vn()&&!Sn()}function Hn(){return Pe()&&typeof document<"u"}function zi(){return(zi=(0,P.Z)(function*(){return!!Hn()&&new Promise(b=>{const D=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(D),b(!0)})})})).apply(this,arguments)}const Lt={LOCAL:"local",NONE:"none",SESSION:"session"},ii=V.aC,us="persistence";function Hi(b){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,P.Z)(function*(b){yield b._initializationPromise;const D=Ci(),w=V.aF(us,b.config.apiKey,b.name);D&&D.setItem(w,b._getPersistence())})).apply(this,arguments)}function Ci(){var b;try{return(null===(b=function ri(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const hr=V.aC;class Wr{constructor(){this.browserResolver=V.aE(V.k),this.cordovaResolver=V.aE(ie),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aG,this._overrideRedirectResult=V.aH}_initialize(D){var w=this;return(0,P.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(D)})()}_openPopup(D,w,k,de){var Oe=this;return(0,P.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openPopup(D,w,k,de)})()}_openRedirect(D,w,k,de){var Oe=this;return(0,P.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openRedirect(D,w,k,de)})()}_isIframeWebStorageSupported(D,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(D,w)}_originValidation(D){return this.assertedUnderlyingResolver._originValidation(D)}get _shouldInitProactively(){return Hn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var D=this;return(0,P.Z)(function*(){if(D.underlyingResolver)return;const w=yield function Tr(){return zi.apply(this,arguments)}();D.underlyingResolver=w?D.cordovaResolver:D.browserResolver})()}}function tn(b){return b.unwrap()}function kn(b){return Ai(b)}function Ai(b){const{_tokenResponse:D}=b instanceof xe.ZR?b.customData:b;if(!D)return null;if(!(b instanceof xe.ZR)&&"temporaryProof"in D&&"phoneNumber"in D)return V.P.credentialFromResult(b);const w=D.providerId;if(!w||w===V.p.PASSWORD)return null;let k;switch(w){case V.p.GOOGLE:k=V.X;break;case V.p.FACEBOOK:k=V.W;break;case V.p.GITHUB:k=V.Y;break;case V.p.TWITTER:k=V.$;break;default:const{oauthIdToken:de,oauthAccessToken:Oe,oauthTokenSecret:$e,pendingToken:pt,nonce:Yt}=D;return Oe||$e||de||pt?pt?w.startsWith("saml.")?V.aQ._create(w,pt):V.N._fromParams({providerId:w,signInMethod:w,pendingToken:pt,idToken:de,accessToken:Oe}):new V.Z(w).credential({idToken:de,accessToken:Oe,rawNonce:Yt}):null}return b instanceof xe.ZR?k.credentialFromError(b):k.credentialFromResult(b)}function cn(b,D){return D.catch(w=>{throw w instanceof xe.ZR&&function Hs(b,D){var w;const k=null===(w=D.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===D?.code)D.resolver=new ls(b,V.as(b,D));else if(k){const de=Ai(D),Oe=D;de&&(Oe.credential=de,Oe.tenantId=k.tenantId||void 0,Oe.email=k.email||void 0,Oe.phoneNumber=k.phoneNumber||void 0)}}(b,w),w}).then(w=>{const de=w.user;return{operationType:w.operationType,credential:kn(w),additionalUserInfo:V.aq(w),user:or.getOrCreate(de)}})}function Or(b,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*(b,D){const w=yield D;return{verificationId:w.verificationId,confirm:k=>cn(b,w.confirm(k))}})).apply(this,arguments)}class ls{constructor(D,w){this.resolver=w,this.auth=function Nr(b){return b.wrapped()}(D)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(D){return cn(tn(this.auth),this.resolver.resolveSignIn(D))}}class or{constructor(D){this._delegate=D,this.multiFactor=V.at(D)}static getOrCreate(D){return or.USER_MAP.has(D)||or.USER_MAP.set(D,new or(D)),or.USER_MAP.get(D)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(D){return this._delegate.getIdTokenResult(D)}getIdToken(D){return this._delegate.getIdToken(D)}linkAndRetrieveDataWithCredential(D){return this.linkWithCredential(D)}linkWithCredential(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,V.a2(w._delegate,D))})()}linkWithPhoneNumber(D,w){var k=this;return(0,P.Z)(function*(){return Or(k.auth,V.l(k._delegate,D,w))})()}linkWithPopup(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,V.d(w._delegate,D,Wr))})()}linkWithRedirect(D){var w=this;return(0,P.Z)(function*(){return yield Hi(V.aJ(w.auth)),V.g(w._delegate,D,Wr)})()}reauthenticateAndRetrieveDataWithCredential(D){return this.reauthenticateWithCredential(D)}reauthenticateWithCredential(D){var w=this;return(0,P.Z)(function*(){return cn(w.auth,V.a3(w._delegate,D))})()}reauthenticateWithPhoneNumber(D,w){return Or(this.auth,V.r(this._delegate,D,w))}reauthenticateWithPopup(D){return cn(this.auth,V.e(this._delegate,D,Wr))}reauthenticateWithRedirect(D){var w=this;return(0,P.Z)(function*(){return yield Hi(V.aJ(w.auth)),V.h(w._delegate,D,Wr)})()}sendEmailVerification(D){return V.ag(this._delegate,D)}unlink(D){var w=this;return(0,P.Z)(function*(){return yield V.ap(w._delegate,D),w})()}updateEmail(D){return V.al(this._delegate,D)}updatePassword(D){return V.am(this._delegate,D)}updatePhoneNumber(D){return V.u(this._delegate,D)}updateProfile(D){return V.ak(this._delegate,D)}verifyBeforeUpdateEmail(D,w){return V.ah(this._delegate,D,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}or.USER_MAP=new WeakMap;const En=V.aC;let Cr=(()=>{class b{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=w.options;En(de,"invalid-api-key",{appName:w.name}),En(de,"invalid-api-key",{appName:w.name});const Oe=typeof window<"u"?Wr:void 0;this._delegate=k.initialize({options:{persistence:hs(de,w.name),popupRedirectResolver:Oe}}),this._delegate._updateErrorMap(V.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){V.K(this._delegate,w,k)}applyActionCode(w){return V.a7(this._delegate,w)}checkActionCode(w){return V.a8(this._delegate,w)}confirmPasswordReset(w,k){return V.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var de=this;return(0,P.Z)(function*(){return cn(de._delegate,V.aa(de._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return V.af(this._delegate,w)}isSignInWithEmailLink(w){return V.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,P.Z)(function*(){En(Qt(),w._delegate,"operation-not-supported-in-this-environment");const k=yield V.j(w._delegate,Wr);return k?cn(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function ue(b,D){(0,V.aJ)(b)._logFramework(D)}(this._delegate,w)}onAuthStateChanged(w,k,de){const{next:Oe,error:$e,complete:pt}=ds(w,k,de);return this._delegate.onAuthStateChanged(Oe,$e,pt)}onIdTokenChanged(w,k,de){const{next:Oe,error:$e,complete:pt}=ds(w,k,de);return this._delegate.onIdTokenChanged(Oe,$e,pt)}sendSignInLinkToEmail(w,k){return V.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return V.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,P.Z)(function*(){let de;switch(function Ti(b,D){ii(Object.values(Lt).includes(D),b,"invalid-persistence-type"),(0,xe.b$)()?ii(D!==Lt.SESSION,b,"unsupported-persistence-type"):(0,xe.UG)()?ii(D===Lt.NONE,b,"unsupported-persistence-type"):Sn()?ii(D===Lt.NONE||D===Lt.LOCAL&&(0,xe.hl)(),b,"unsupported-persistence-type"):ii(D===Lt.NONE||vn(),b,"unsupported-persistence-type")}(k._delegate,w),w){case Lt.SESSION:de=V.a;break;case Lt.LOCAL:de=(yield V.aE(V.i)._isAvailable())?V.i:V.b;break;case Lt.NONE:de=V.U;break;default:return V.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return cn(this._delegate,V.a0(this._delegate))}signInWithCredential(w){return cn(this._delegate,V.a1(this._delegate,w))}signInWithCustomToken(w){return cn(this._delegate,V.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return cn(this._delegate,V.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return cn(this._delegate,V.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return Or(this._delegate,V.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,P.Z)(function*(){return En(Qt(),k._delegate,"operation-not-supported-in-this-environment"),cn(k._delegate,V.c(k._delegate,w,Wr))})()}signInWithRedirect(w){var k=this;return(0,P.Z)(function*(){return En(Qt(),k._delegate,"operation-not-supported-in-this-environment"),yield Hi(k._delegate),V.f(k._delegate,w,Wr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return V.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Lt,b})();function ds(b,D,w){let k=b;"function"!=typeof b&&({next:k,error:D,complete:w}=b);const de=k;return{next:$e=>de($e&&or.getOrCreate($e)),error:D,complete:w}}function hs(b,D){const w=function zs(b,D){const w=Ci();if(!w)return[];const k=V.aF(us,b,D);switch(w.getItem(k)){case Lt.NONE:return[V.U];case Lt.LOCAL:return[V.i,V.a];case Lt.SESSION:return[V.a];default:return[]}}(b,D);if(typeof self<"u"&&!w.includes(V.i)&&w.push(V.i),typeof window<"u")for(const k of[V.b,V.a])w.includes(k)||w.push(k);return w.includes(V.U)||w.push(V.U),w}class Ds{constructor(){this.providerId="phone",this._delegate=new V.P(tn(Re.Z.auth()))}static credential(D,w){return V.P.credential(D,w)}verifyPhoneNumber(D,w){return this._delegate.verifyPhoneNumber(D,w)}unwrap(){return this._delegate}}Ds.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,Ds.PROVIDER_ID=V.P.PROVIDER_ID;const qs=V.aC;class ke{constructor(D,w,k=Re.Z.app()){var de;qs(null===(de=k.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new V.R(k.auth(),D,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function x(b){b.INTERNAL.registerComponent(new An.wA("auth-compat",D=>{const w=D.getProvider("app-compat").getImmediate(),k=D.getProvider("auth");return new Cr(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.V,FacebookAuthProvider:V.W,GithubAuthProvider:V.Y,GoogleAuthProvider:V.X,OAuthProvider:V.Z,SAMLAuthProvider:V._,PhoneAuthProvider:Ds,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:ke,TwitterAuthProvider:V.$,Auth:Cr,AuthCredential:V.L,Error:xe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.9")}(Re.Z)},878:(cs,$n,We)=>{We.d($n,{X3:()=>gn});var P=We(861);const Re=(De,ee)=>ee.some(Je=>De instanceof Je);let V,xe;const An=new WeakMap,Ut=new WeakMap,At=new WeakMap,ge=new WeakMap,Te=new WeakMap;let Bt={get(De,ee,Je){if(De instanceof IDBTransaction){if("done"===ee)return Ut.get(De);if("objectStoreNames"===ee)return De.objectStoreNames||At.get(De);if("store"===ee)return Je.objectStoreNames[1]?void 0:Je.objectStore(Je.objectStoreNames[0])}return nt(De[ee])},set:(De,ee,Je)=>(De[ee]=Je,!0),has:(De,ee)=>De instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in De};function at(De){return"function"==typeof De?function Mt(De){return De!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Cn(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(De)?function(...ee){return De.apply(Dn(this),ee),nt(An.get(this))}:function(...ee){return nt(De.apply(Dn(this),ee))}:function(ee,...Je){const vt=De.call(Dn(this),ee,...Je);return At.set(vt,ee.sort?ee.sort():[ee]),nt(vt)}}(De):(De instanceof IDBTransaction&&function It(De){if(Ut.has(De))return;const ee=new Promise((Je,vt)=>{const xt=()=>{De.removeEventListener("complete",Pn),De.removeEventListener("error",dn),De.removeEventListener("abort",dn)},Pn=()=>{Je(),xt()},dn=()=>{vt(De.error||new DOMException("AbortError","AbortError")),xt()};De.addEventListener("complete",Pn),De.addEventListener("error",dn),De.addEventListener("abort",dn)});Ut.set(De,ee)}(De),Re(De,function Rt(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(De,Bt):De)}function nt(De){if(De instanceof IDBRequest)return function Ye(De){const ee=new Promise((Je,vt)=>{const xt=()=>{De.removeEventListener("success",Pn),De.removeEventListener("error",dn)},Pn=()=>{Je(nt(De.result)),xt()},dn=()=>{vt(De.error),xt()};De.addEventListener("success",Pn),De.addEventListener("error",dn)});return ee.then(Je=>{Je instanceof IDBCursor&&An.set(Je,De)}).catch(()=>{}),Te.set(ee,De),ee}(De);if(ge.has(De))return ge.get(De);const ee=at(De);return ee!==De&&(ge.set(De,ee),Te.set(ee,De)),ee}const Dn=De=>Te.get(De);function gn(De,ee,{blocked:Je,upgrade:vt,blocking:xt,terminated:Pn}={}){const dn=indexedDB.open(De,ee),Et=nt(dn);return vt&&dn.addEventListener("upgradeneeded",mn=>{vt(nt(dn.result),mn.oldVersion,mn.newVersion,nt(dn.transaction),mn)}),Je&&dn.addEventListener("blocked",mn=>Je(mn.oldVersion,mn.newVersion,mn)),Et.then(mn=>{Pn&&mn.addEventListener("close",()=>Pn()),xt&&mn.addEventListener("versionchange",sr=>xt(sr.oldVersion,sr.newVersion,sr))}).catch(()=>{}),Et}const Kt=["get","getKey","getAll","getAllKeys","count"],wr=["put","add","delete","clear"],Pt=new Map;function ht(De,ee){if(!(De instanceof IDBDatabase)||ee in De||"string"!=typeof ee)return;if(Pt.get(ee))return Pt.get(ee);const Je=ee.replace(/FromIndex$/,""),vt=ee!==Je,xt=wr.includes(Je);if(!(Je in(vt?IDBIndex:IDBObjectStore).prototype)||!xt&&!Kt.includes(Je))return;const Pn=function(){var dn=(0,P.Z)(function*(Et,...mn){const sr=this.transaction(Et,xt?"readwrite":"readonly");let ie=sr.store;return vt&&(ie=ie.index(mn.shift())),(yield Promise.all([ie[Je](...mn),xt&&sr.done]))[0]});return function(mn){return dn.apply(this,arguments)}}();return Pt.set(ee,Pn),Pn}!function zn(De){Bt=De(Bt)}(De=>({...De,get:(ee,Je,vt)=>ht(ee,Je)||De.get(ee,Je,vt),has:(ee,Je)=>!!ht(ee,Je)||De.has(ee,Je)}))},861:(cs,$n,We)=>{function P(V,xe,Rt,Cn,An,Ut,At){try{var ge=V[Ut](At),Te=ge.value}catch(Ye){return void Rt(Ye)}ge.done?xe(Te):Promise.resolve(Te).then(Cn,An)}function Re(V){return function(){var xe=this,Rt=arguments;return new Promise(function(Cn,An){var Ut=V.apply(xe,Rt);function At(Te){P(Ut,Cn,An,At,ge,"next",Te)}function ge(Te){P(Ut,Cn,An,At,ge,"throw",Te)}At(void 0)})}}We.d($n,{Z:()=>Re})},582:(cs,$n,We)=>{function xe(ie,se){var ue={};for(var pe in ie)Object.prototype.hasOwnProperty.call(ie,pe)&&se.indexOf(pe)<0&&(ue[pe]=ie[pe]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(pe=Object.getOwnPropertySymbols(ie);ve<pe.length;ve++)se.indexOf(pe[ve])<0&&Object.prototype.propertyIsEnumerable.call(ie,pe[ve])&&(ue[pe[ve]]=ie[pe[ve]])}return ue}function Ye(ie,se,ue,pe){return new(ue||(ue=Promise))(function(ae,Ne){function Ft(Vt){try{Qe(pe.next(Vt))}catch(_n){Ne(_n)}}function Pe(Vt){try{Qe(pe.throw(Vt))}catch(_n){Ne(_n)}}function Qe(Vt){Vt.done?ae(Vt.value):function ve(ae){return ae instanceof ue?ae:new ue(function(Ne){Ne(ae)})}(Vt.value).then(Ft,Pe)}Qe((pe=pe.apply(ie,se||[])).next())})}function Wt(ie){return this instanceof Wt?(this.v=ie,this):new Wt(ie)}function Kt(ie,se,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,pe=ue.apply(ie,se||[]),ae=[];return ve={},Ne("next"),Ne("throw"),Ne("return"),ve[Symbol.asyncIterator]=function(){return this},ve;function Ne(hn){pe[hn]&&(ve[hn]=function(vn){return new Promise(function(Sn,Qt){ae.push([hn,vn,Sn,Qt])>1||Ft(hn,vn)})})}function Ft(hn,vn){try{!function Pe(hn){hn.value instanceof Wt?Promise.resolve(hn.value.v).then(Qe,Vt):_n(ae[0][2],hn)}(pe[hn](vn))}catch(Sn){_n(ae[0][3],Sn)}}function Qe(hn){Ft("next",hn)}function Vt(hn){Ft("throw",hn)}function _n(hn,vn){hn(vn),ae.shift(),ae.length&&Ft(ae[0][0],ae[0][1])}}function Pt(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,se=ie[Symbol.asyncIterator];return se?se.call(ie):(ie=function Mt(ie){var se="function"==typeof Symbol&&Symbol.iterator,ue=se&&ie[se],pe=0;if(ue)return ue.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&pe>=ie.length&&(ie=void 0),{value:ie&&ie[pe++],done:!ie}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),ue={},pe("next"),pe("throw"),pe("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function pe(ae){ue[ae]=ie[ae]&&function(Ne){return new Promise(function(Ft,Pe){!function ve(ae,Ne,Ft,Pe){Promise.resolve(Pe).then(function(Qe){ae({value:Qe,done:Ft})},Ne)}(Ft,Pe,(Ne=ie[ae](Ne)).done,Ne.value)})}}}We.d($n,{FC:()=>Kt,KL:()=>Pt,_T:()=>xe,mG:()=>Ye,qq:()=>Wt}),"function"==typeof SuppressedError&&SuppressedError}},cs=>{cs(cs.s=944)}]);
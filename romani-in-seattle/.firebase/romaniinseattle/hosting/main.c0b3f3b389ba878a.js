(self.webpackChunkromani_in_seattle=self.webpackChunkromani_in_seattle||[]).push([[179],{35:(an,lt,k)=>{"use strict";k.d(lt,{$:()=>To,A:()=>z,G:()=>ye,K:()=>ws,L:()=>ts,N:()=>$e,P:()=>xg,R:()=>ku,U:()=>mn,V:()=>ds,W:()=>Ii,X:()=>po,Y:()=>os,Z:()=>Qr,_:()=>xs,a:()=>qt,a0:()=>F,a1:()=>Cc,a2:()=>ro,a3:()=>wu,a4:()=>Tc,a5:()=>cl,a6:()=>ua,a7:()=>Ho,a8:()=>ll,a9:()=>Sc,aA:()=>yn,aB:()=>tt,aC:()=>Ee,aD:()=>Kl,aE:()=>kt,aF:()=>cn,aG:()=>Gd,aH:()=>_l,aI:()=>Zr,aJ:()=>dr,aN:()=>ec,aQ:()=>Ki,aa:()=>Rd,ab:()=>dl,ac:()=>Na,ad:()=>$l,ae:()=>ha,af:()=>x,ag:()=>j,ah:()=>Ue,ak:()=>Fr,al:()=>ni,am:()=>Ar,ap:()=>hs,aq:()=>qs,as:()=>Su,at:()=>kd,au:()=>Vt,av:()=>fr,aw:()=>en,ax:()=>Oe,ay:()=>ja,az:()=>Wd,b:()=>Po,c:()=>ap,d:()=>Og,e:()=>gl,f:()=>Ba,g:()=>nf,h:()=>Wl,i:()=>di,j:()=>lp,k:()=>Xd,l:()=>Va,m:()=>Wu,p:()=>ae,r:()=>Bd,s:()=>Lu,u:()=>fl});var f=k(5861),s=k(534),B=k(9058),Se=k(7879),_e=k(7582),Ae=k(4537);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ye=function oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},De=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new Se.Yd("@firebase/auth");function Fe(T,...g){We.logLevel<=Se.in.ERROR&&We.error(`Auth (${s.SDK_VERSION}): ${T}`,...g)}function Oe(T,...g){throw bt(T,...g)}function tt(T,...g){return bt(T,...g)}function Ze(T,g,v){const M=Object.assign(Object.assign({},De()),{[g]:v});return new B.LL("auth","Firebase",M).create(g,{appName:T.name})}function Ge(T){return Ze(T,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dt(T,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Oe(T,"argument-error"),Ze(T,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bt(T,...g){if("string"!=typeof T){const v=g[0],M=[...g.slice(1)];return M[0]&&(M[0].appName=T.name),T._errorFactory.create(v,...M)}return Re.create(T,...g)}function Ee(T,g,...v){if(!T)throw bt(g,...v)}function Nt(T){const g="INTERNAL ASSERTION FAILED: "+T;throw Fe(g),new Error(g)}function Vt(T,g){T||Nt(g)}function Dn(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function wt(){return"http:"===Ke()||"https:"===Ke()}function Ke(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class we{constructor(g,v){this.shortDelay=g,this.longDelay=v,Vt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(T,g){Vt(T.emulator,"Emulator should always be set here");const{url:v}=T.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Ie{static initialize(g,v,M){this.fetchImpl=g,v&&(this.headersImpl=v),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},je=new we(3e4,6e4);function st(T,g){return T.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:T.tenantId}):g}function vt(T,g,v,M){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(T,g,v,M,X={}){return Gt(T,X,(0,f.Z)(function*(){let me={},rt={};M&&("GET"===g?rt=M:me={body:JSON.stringify(M)});const Pt=(0,B.xO)(Object.assign({key:T.config.apiKey},rt)).slice(1),$t=yield T._getAdditionalHeaders();return $t["Content-Type"]="application/json",T.languageCode&&($t["X-Firebase-Locale"]=T.languageCode),Ie.fetch()(Pn(T,T.config.apiHost,v,Pt),Object.assign({method:g,headers:$t,referrerPolicy:"no-referrer"},me))}))})).apply(this,arguments)}function Gt(T,g,v){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(T,g,v){T._canInitEmulator=!1;const M=Object.assign(Object.assign({},Pe),g);try{const X=new sn(T),me=yield Promise.race([v(),X.promise]);X.clearNetworkTimeout();const rt=yield me.json();if("needConfirmation"in rt)throw Nn(T,"account-exists-with-different-credential",rt);if(me.ok&&!("errorMessage"in rt))return rt;{const Pt=me.ok?rt.errorMessage:rt.error.message,[$t,Vn]=Pt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$t)throw Nn(T,"credential-already-in-use",rt);if("EMAIL_EXISTS"===$t)throw Nn(T,"email-already-in-use",rt);if("USER_DISABLED"===$t)throw Nn(T,"user-disabled",rt);const nr=M[$t]||$t.toLowerCase().replace(/[_\s]+/g,"-");if(Vn)throw Ze(T,nr,Vn);Oe(T,nr)}}catch(X){if(X instanceof B.ZR)throw X;Oe(T,"network-request-failed",{message:String(X)})}})).apply(this,arguments)}function bn(T,g,v,M){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(T,g,v,M,X={}){const me=yield vt(T,g,v,M,X);return"mfaPendingCredential"in me&&Oe(T,"multi-factor-auth-required",{_serverResponse:me}),me})).apply(this,arguments)}function Pn(T,g,v,M){const X=`${g}${v}?${M}`;return T.config.emulator?te(T.config,X):`${T.config.apiScheme}://${X}`}function On(T){switch(T){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,M)=>{this.timer=setTimeout(()=>M(tt(this.auth,"network-request-failed")),je.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(T,g,v){const M={appName:T.name};v.email&&(M.email=v.email),v.phoneNumber&&(M.phoneNumber=v.phoneNumber);const X=tt(T,g,M);return X.customData._tokenResponse=v,X}function gr(T){return void 0!==T&&void 0!==T.getResponse}function Jn(T){return void 0!==T&&void 0!==T.enterprise}class Yt{constructor(g){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=g.recaptchaEnforcementState}getProviderEnforcementState(g){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===g)return On(v.enforcementState);return null}isProviderEnabled(g){return"ENFORCE"===this.getProviderEnforcementState(g)||"AUDIT"===this.getProviderEnforcementState(g)}}function xn(){return(xn=(0,f.Z)(function*(T){return(yield vt(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mr(T,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(T,g){return vt(T,"GET","/v2/recaptchaConfig",st(T,g))})).apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Er(T,g){return br.apply(this,arguments)}function br(){return(br=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Gn(T){if(T)try{const g=new Date(Number(T));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function yi(){return(yi=(0,f.Z)(function*(T,g=!1){const v=(0,B.m9)(T),M=yield v.getIdToken(g),X=Vr(M);Ee(X&&X.exp&&X.auth_time&&X.iat,v.auth,"internal-error");const me="object"==typeof X.firebase?X.firebase:void 0,rt=me?.sign_in_provider;return{claims:X,token:M,authTime:Gn(gn(X.auth_time)),issuedAtTime:Gn(gn(X.iat)),expirationTime:Gn(gn(X.exp)),signInProvider:rt||null,signInSecondFactor:me?.sign_in_second_factor||null}})).apply(this,arguments)}function gn(T){return 1e3*Number(T)}function Vr(T){const[g,v,M]=T.split(".");if(void 0===g||void 0===v||void 0===M)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const X=(0,B.tV)(v);return X?JSON.parse(X):(Fe("Failed to decode base64 JWT payload"),null)}catch(X){return Fe("Caught error parsing JWT payload as JSON",X?.toString()),null}}function ar(T){const g=Vr(T);return Ee(g,"internal-error"),Ee(typeof g.exp<"u","internal-error"),Ee(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}function Pr(T,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,f.Z)(function*(T,g,v=!1){if(v)return g;try{return yield g}catch(M){throw M instanceof B.ZR&&function ii({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(M)&&T.auth.currentUser===T&&(yield T.auth.signOut()),M}})).apply(this,arguments)}class at{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const X=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,X)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const M=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield v.iteration()}),M)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class Dt{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gn(this.lastLoginAt),this.creationTime=Gn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ue(T){return Be.apply(this,arguments)}function Be(){return(Be=(0,f.Z)(function*(T){var g;const v=T.auth,M=yield T.getIdToken(),X=yield Pr(T,Er(v,{idToken:M}));Ee(X?.users.length,v,"internal-error");const me=X.users[0];T._notifyReloadListener(me);const rt=null!==(g=me.providerUserInfo)&&void 0!==g&&g.length?hi(me.providerUserInfo):[],Pt=function zn(T,g){return[...T.filter(M=>!g.some(X=>X.providerId===M.providerId)),...g]}(T.providerData,rt),nr=!!T.isAnonymous&&!(T.email&&me.passwordHash||Pt?.length),Gr={uid:me.localId,displayName:me.displayName||null,photoURL:me.photoUrl||null,email:me.email||null,emailVerified:me.emailVerified||!1,phoneNumber:me.phoneNumber||null,tenantId:me.tenantId||null,providerData:Pt,metadata:new Dt(me.createdAt,me.lastLoginAt),isAnonymous:nr};Object.assign(T,Gr)})).apply(this,arguments)}function tn(){return(tn=(0,f.Z)(function*(T){const g=(0,B.m9)(T);yield ue(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function hi(T){return T.map(g=>{var{providerId:v}=g,M=(0,_e._T)(g,["providerId"]);return{providerId:v,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function qe(){return(qe=(0,f.Z)(function*(T,g){const v=yield Gt(T,{},(0,f.Z)(function*(){const M=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:X,apiKey:me}=T.config,rt=Pn(T,X,"/v1/token",`key=${me}`),Pt=yield T._getAdditionalHeaders();return Pt["Content-Type"]="application/x-www-form-urlencoded",Ie.fetch()(rt,{method:"POST",headers:Pt,body:M})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}function K(){return(K=(0,f.Z)(function*(T,g){return vt(T,"POST","/v2/accounts:revokeToken",st(T,g))})).apply(this,arguments)}class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ee(g.idToken,"internal-error"),Ee(typeof g.idToken<"u","internal-error"),Ee(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):ar(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}updateFromIdToken(g){Ee(0!==g.length,"internal-error");const v=ar(g);this.updateTokensAndExpiration(g,null,v)}getToken(g,v=!1){var M=this;return(0,f.Z)(function*(){return v||!M.accessToken||M.isExpired?(Ee(M.refreshToken,g,"user-token-expired"),M.refreshToken?(yield M.refresh(g,M.refreshToken),M.accessToken):null):M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var M=this;return(0,f.Z)(function*(){const{accessToken:X,refreshToken:me,expiresIn:rt}=yield function Cr(T,g){return qe.apply(this,arguments)}(g,v);M.updateTokensAndExpiration(X,me,Number(rt))})()}updateTokensAndExpiration(g,v,M){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(g,v){const{refreshToken:M,accessToken:X,expirationTime:me}=v,rt=new H;return M&&(Ee("string"==typeof M,"internal-error",{appName:g}),rt.refreshToken=M),X&&(Ee("string"==typeof X,"internal-error",{appName:g}),rt.accessToken=X),me&&(Ee("number"==typeof me,"internal-error",{appName:g}),rt.expirationTime=me),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function U(T,g){Ee("string"==typeof T||typeof T>"u","internal-error",{appName:g})}class Te{constructor(g){var{uid:v,auth:M,stsTokenManager:X}=g,me=(0,_e._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new at(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=M,this.stsTokenManager=X,this.accessToken=X.accessToken,this.displayName=me.displayName||null,this.email=me.email||null,this.emailVerified=me.emailVerified||!1,this.phoneNumber=me.phoneNumber||null,this.photoURL=me.photoURL||null,this.isAnonymous=me.isAnonymous||!1,this.tenantId=me.tenantId||null,this.providerData=me.providerData?[...me.providerData]:[],this.metadata=new Dt(me.createdAt||void 0,me.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,f.Z)(function*(){const M=yield Pr(v,v.stsTokenManager.getToken(v.auth,g));return Ee(M,v.auth,"internal-error"),v.accessToken!==M&&(v.accessToken=M,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),M})()}getIdTokenResult(g){return function Jr(T){return yi.apply(this,arguments)}(this,g)}reload(){return function xt(T){return tn.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new Te(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var M=this;return(0,f.Z)(function*(){let X=!1;g.idToken&&g.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(g),X=!0),v&&(yield ue(M)),yield M.auth._persistUserIfCurrent(M),X&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var g=this;return(0,f.Z)(function*(){if((0,s._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ge(g.auth));const v=yield g.getIdToken();return yield Pr(g,function Jt(T,g){return In.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var M,X,me,rt,Pt,$t,Vn,nr;const Gr=null!==(M=v.displayName)&&void 0!==M?M:void 0,oo=null!==(X=v.email)&&void 0!==X?X:void 0,za=null!==(me=v.phoneNumber)&&void 0!==me?me:void 0,$c=null!==(rt=v.photoURL)&&void 0!==rt?rt:void 0,tu=null!==(Pt=v.tenantId)&&void 0!==Pt?Pt:void 0,Dl=null!==($t=v._redirectEventId)&&void 0!==$t?$t:void 0,ff=null!==(Vn=v.createdAt)&&void 0!==Vn?Vn:void 0,Sl=null!==(nr=v.lastLoginAt)&&void 0!==nr?nr:void 0,{uid:Ml,emailVerified:pf,isAnonymous:pp,providerData:oc,stsTokenManager:Qu}=v;Ee(Ml&&Qu,g,"internal-error");const va=H.fromJSON(this.name,Qu);Ee("string"==typeof Ml,g,"internal-error"),U(Gr,g.name),U(oo,g.name),Ee("boolean"==typeof pf,g,"internal-error"),Ee("boolean"==typeof pp,g,"internal-error"),U(za,g.name),U($c,g.name),U(tu,g.name),U(Dl,g.name),U(ff,g.name),U(Sl,g.name);const Pl=new Te({uid:Ml,auth:g,email:oo,emailVerified:pf,displayName:Gr,isAnonymous:pp,photoURL:$c,phoneNumber:za,tenantId:tu,stsTokenManager:va,createdAt:ff,lastLoginAt:Sl});return oc&&Array.isArray(oc)&&(Pl.providerData=oc.map(nu=>Object.assign({},nu))),Dl&&(Pl._redirectEventId=Dl),Pl}static _fromIdTokenResponse(g,v,M=!1){return(0,f.Z)(function*(){const X=new H;X.updateFromServerResponse(v);const me=new Te({uid:v.localId,auth:g,stsTokenManager:X,isAnonymous:M});return yield ue(me),me})()}static _fromGetAccountInfoResponse(g,v,M){return(0,f.Z)(function*(){const X=v.users[0];Ee(void 0!==X.localId,"internal-error");const me=void 0!==X.providerUserInfo?hi(X.providerUserInfo):[],rt=!(X.email&&X.passwordHash||me?.length),Pt=new H;Pt.updateFromIdToken(M);const $t=new Te({uid:X.localId,auth:g,stsTokenManager:Pt,isAnonymous:rt}),Vn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:me,metadata:new Dt(X.createdAt,X.lastLoginAt),isAnonymous:!(X.email&&X.passwordHash||me?.length)};return Object.assign($t,Vn),$t})()}}const Xe=new Map;function kt(T){Vt(T instanceof Function,"Expected a class definition");let g=Xe.get(T);return g?(Vt(g instanceof T,"Instance stored in cache mismatched with class"),g):(g=new T,Xe.set(T,g),g)}const mn=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(v,M){var X=this;return(0,f.Z)(function*(){X.storage[v]=M})()}_get(v){var M=this;return(0,f.Z)(function*(){const X=M.storage[v];return void 0===X?null:X})()}_remove(v){var M=this;return(0,f.Z)(function*(){delete M.storage[v]})()}_addListener(v,M){}_removeListener(v,M){}}return T.type="NONE",T})();function cn(T,g,v){return`firebase:${T}:${g}:${v}`}class fn{constructor(g,v,M){this.persistence=g,this.auth=v,this.userKey=M;const{config:X,name:me}=this.auth;this.fullUserKey=cn(this.userKey,X.apiKey,me),this.fullPersistenceKey=cn("persistence",X.apiKey,me),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Te._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,f.Z)(function*(){if(v.persistence===g)return;const M=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,M?v.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,M="authUser"){return(0,f.Z)(function*(){if(!v.length)return new fn(kt(mn),g,M);const X=(yield Promise.all(v.map(function(){var Vn=(0,f.Z)(function*(nr){if(yield nr._isAvailable())return nr});return function(nr){return Vn.apply(this,arguments)}}()))).filter(Vn=>Vn);let me=X[0]||kt(mn);const rt=cn(M,g.config.apiKey,g.name);let Pt=null;for(const Vn of v)try{const nr=yield Vn._get(rt);if(nr){const Gr=Te._fromJSON(g,nr);Vn!==me&&(Pt=Gr),me=Vn;break}}catch{}const $t=X.filter(Vn=>Vn._shouldAllowMigration);return me._shouldAllowMigration&&$t.length?(me=$t[0],Pt&&(yield me._set(rt,Pt.toJSON())),yield Promise.all(v.map(function(){var Vn=(0,f.Z)(function*(nr){if(nr!==me)try{yield nr._remove(rt)}catch{}});return function(nr){return Vn.apply(this,arguments)}}())),new fn(me,g,M)):new fn(me,g,M)})()}}function Xn(T){const g=T.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(jt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Je(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(En(g))return"Blackberry";if(ln(g))return"Webos";if(He(g))return"Safari";if((g.includes("chrome/")||nt(g))&&!g.includes("edge/"))return"Chrome";if(en(g))return"Android";{const M=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function Je(T=(0,B.z$)()){return/firefox\//i.test(T)}function He(T=(0,B.z$)()){const g=T.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function nt(T=(0,B.z$)()){return/crios\//i.test(T)}function jt(T=(0,B.z$)()){return/iemobile/i.test(T)}function en(T=(0,B.z$)()){return/android/i.test(T)}function En(T=(0,B.z$)()){return/blackberry/i.test(T)}function ln(T=(0,B.z$)()){return/webos/i.test(T)}function fr(T=(0,B.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function yn(T=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function Ft(T=(0,B.z$)()){return fr(T)||en(T)||ln(T)||En(T)||/windows phone/i.test(T)||jt(T)}function Ln(T,g=[]){let v;switch(T){case"Browser":v=Xn((0,B.z$)());break;case"Worker":v=`${Xn((0,B.z$)())}-${T}`;break;default:v=T}const M=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${s.SDK_VERSION}/${M}`}class Un{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const M=me=>new Promise((rt,Pt)=>{try{rt(g(me))}catch($t){Pt($t)}});M.onAbort=v,this.queue.push(M);const X=this.queue.length-1;return()=>{this.queue[X]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,f.Z)(function*(){if(v.auth.currentUser===g)return;const M=[];try{for(const X of v.queue)yield X(g),X.onAbort&&M.push(X.onAbort)}catch(X){M.reverse();for(const me of M)try{me()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:X?.message})}})()}}function $n(){return($n=(0,f.Z)(function*(T,g={}){return vt(T,"GET","/v2/passwordPolicy",st(T,g))})).apply(this,arguments)}class fi{constructor(g){var v,M,X,me;const rt=g.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=rt.minPasswordLength)&&void 0!==v?v:6,rt.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=rt.maxPasswordLength),void 0!==rt.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=rt.containsLowercaseCharacter),void 0!==rt.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=rt.containsUppercaseCharacter),void 0!==rt.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=rt.containsNumericCharacter),void 0!==rt.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=rt.containsNonAlphanumericCharacter),this.enforcementState=g.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(X=null===(M=g.allowedNonAlphanumericCharacters)||void 0===M?void 0:M.join(""))&&void 0!==X?X:"",this.forceUpgradeOnSignin=null!==(me=g.forceUpgradeOnSignin)&&void 0!==me&&me,this.schemaVersion=g.schemaVersion}validatePassword(g){var v,M,X,me,rt,Pt;const $t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(g,$t),this.validatePasswordCharacterOptions(g,$t),$t.isValid&&($t.isValid=null===(v=$t.meetsMinPasswordLength)||void 0===v||v),$t.isValid&&($t.isValid=null===(M=$t.meetsMaxPasswordLength)||void 0===M||M),$t.isValid&&($t.isValid=null===(X=$t.containsLowercaseLetter)||void 0===X||X),$t.isValid&&($t.isValid=null===(me=$t.containsUppercaseLetter)||void 0===me||me),$t.isValid&&($t.isValid=null===(rt=$t.containsNumericCharacter)||void 0===rt||rt),$t.isValid&&($t.isValid=null===(Pt=$t.containsNonAlphanumericCharacter)||void 0===Pt||Pt),$t}validatePasswordLengthOptions(g,v){const M=this.customStrengthOptions.minPasswordLength,X=this.customStrengthOptions.maxPasswordLength;M&&(v.meetsMinPasswordLength=g.length>=M),X&&(v.meetsMaxPasswordLength=g.length<=X)}validatePasswordCharacterOptions(g,v){let M;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let X=0;X<g.length;X++)M=g.charAt(X),this.updatePasswordCharacterOptionsStatuses(v,M>="a"&&M<="z",M>="A"&&M<="Z",M>="0"&&M<="9",this.allowedNonAlphanumericCharacters.includes(M))}updatePasswordCharacterOptionsStatuses(g,v,M,X,me){this.customStrengthOptions.containsLowercaseLetter&&(g.containsLowercaseLetter||(g.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(g.containsUppercaseLetter||(g.containsUppercaseLetter=M)),this.customStrengthOptions.containsNumericCharacter&&(g.containsNumericCharacter||(g.containsNumericCharacter=X)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(g.containsNonAlphanumericCharacter||(g.containsNonAlphanumericCharacter=me))}}class ti{constructor(g,v,M,X){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=M,this.config=X,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pi(this),this.idTokenSubscription=new Pi(this),this.beforeStateQueue=new Un(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=X.sdkClientVersion}_initializeWithPersistence(g,v){var M=this;return v&&(this._popupRedirectResolver=kt(v)),this._initializationPromise=this.queue((0,f.Z)(function*(){var X,me;if(!M._deleted&&(M.persistenceManager=yield fn.create(M,g),!M._deleted)){if(null!==(X=M._popupRedirectResolver)&&void 0!==X&&X._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(v),M.lastNotifiedUid=(null===(me=M.currentUser)||void 0===me?void 0:me.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUserFromIdToken(g){var v=this;return(0,f.Z)(function*(){try{const M=yield Er(v,{idToken:g}),X=yield Te._fromGetAccountInfoResponse(v,M,g);yield v.directlySetCurrentUser(X)}catch(M){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",M),yield v.directlySetCurrentUser(null)}})()}initializeCurrentUser(g){var v=this;return(0,f.Z)(function*(){var M;if((0,s._isFirebaseServerApp)(v.app)){const Pt=v.app.settings.authIdToken;return Pt?new Promise($t=>{setTimeout(()=>v.initializeCurrentUserFromIdToken(Pt).then($t,$t))}):v.directlySetCurrentUser(null)}const X=yield v.assertedPersistence.getCurrentUser();let me=X,rt=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Pt=null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId,$t=me?._redirectEventId,Vn=yield v.tryRedirectSignIn(g);(!Pt||Pt===$t)&&Vn?.user&&(me=Vn.user,rt=!0)}if(!me)return v.directlySetCurrentUser(null);if(!me._redirectEventId){if(rt)try{yield v.beforeStateQueue.runMiddleware(me)}catch(Pt){me=X,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Pt))}return me?v.reloadAndSetCurrentUserOrClear(me):v.directlySetCurrentUser(null)}return Ee(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===me._redirectEventId?v.directlySetCurrentUser(me):v.reloadAndSetCurrentUserOrClear(me)})()}tryRedirectSignIn(g){var v=this;return(0,f.Z)(function*(){let M=null;try{M=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,f.Z)(function*(){try{yield ue(g)}catch(M){if("auth/network-request-failed"!==M?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Le(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,f.Z)(function*(){if((0,s._isFirebaseServerApp)(v.app))return Promise.reject(Ge(v));const M=g?(0,B.m9)(g):null;return M&&Ee(M.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(M&&M._clone(v))})()}_updateCurrentUser(g,v=!1){var M=this;return(0,f.Z)(function*(){if(!M._deleted)return g&&Ee(M.tenantId===g.tenantId,M,"tenant-id-mismatch"),v||(yield M.beforeStateQueue.runMiddleware(g)),M.queue((0,f.Z)(function*(){yield M.directlySetCurrentUser(g),M.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return(0,s._isFirebaseServerApp)(g.app)?Promise.reject(Ge(g)):(yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0))})()}setPersistence(g){var v=this;return(0,s._isFirebaseServerApp)(this.app)?Promise.reject(Ge(this)):this.queue((0,f.Z)(function*(){yield v.assertedPersistence.setPersistence(kt(g))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(g){var v=this;return(0,f.Z)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const M=v._getPasswordPolicyInternal();return M.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):M.validatePassword(g)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var g=this;return(0,f.Z)(function*(){const v=yield function vn(T){return $n.apply(this,arguments)}(g),M=new fi(v);null===g.tenantId?g._projectPasswordPolicy=M:g._tenantPasswordPolicies[g.tenantId]=M})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,v,M){return this.registerStateListener(this.authStateSubscription,g,v,M)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,M){return this.registerStateListener(this.idTokenSubscription,g,v,M)}authStateReady(){return new Promise((g,v)=>{if(this.currentUser)g();else{const M=this.onAuthStateChanged(()=>{M(),g()},v)}})}revokeAccessToken(g){var v=this;return(0,f.Z)(function*(){if(v.currentUser){const M=yield v.currentUser.getIdToken(),X={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:g,idToken:M};null!=v.tenantId&&(X.tenantId=v.tenantId),yield function ce(T,g){return K.apply(this,arguments)}(v,X)}})()}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var M=this;return(0,f.Z)(function*(){const X=yield M.getOrInitRedirectPersistenceManager(v);return null===g?X.removeCurrentUser():X.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,f.Z)(function*(){if(!v.redirectPersistenceManager){const M=g&&kt(g)||v._popupRedirectResolver;Ee(M,v,"argument-error"),v.redirectPersistenceManager=yield fn.create(v,[kt(M._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,f.Z)(function*(){var M,X;return v._isInitialized&&(yield v.queue((0,f.Z)(function*(){}))),(null===(M=v._currentUser)||void 0===M?void 0:M._redirectEventId)===g?v._currentUser:(null===(X=v.redirectUser)||void 0===X?void 0:X._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,f.Z)(function*(){if(g===v.currentUser)return v.queue((0,f.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,M,X){if(this._deleted)return()=>{};const me="function"==typeof v?v:v.next.bind(v);let rt=!1;const Pt=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(Pt,this,"internal-error"),Pt.then(()=>{rt||me(this.currentUser)}),"function"==typeof v){const $t=g.addObserver(v,M,X);return()=>{rt=!0,$t()}}{const $t=g.addObserver(v);return()=>{rt=!0,$t()}}}directlySetCurrentUser(g){var v=this;return(0,f.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var v;const M={"X-Client-Version":g.clientVersion};g.app.options.appId&&(M["X-Firebase-gmpid"]=g.app.options.appId);const X=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();X&&(M["X-Firebase-Client"]=X);const me=yield g._getAppCheckToken();return me&&(M["X-Firebase-AppCheck"]=me),M})()}_getAppCheckToken(){var g=this;return(0,f.Z)(function*(){var v;const M=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return M?.error&&function _t(T,...g){We.logLevel<=Se.in.WARN&&We.warn(`Auth (${s.SDK_VERSION}): ${T}`,...g)}(`Error while retrieving App Check token: ${M.error}`),M?.token})()}}function dr(T){return(0,B.m9)(T)}class Pi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(v=>this.observer=v)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gi={loadJS:()=>(0,f.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jr(T){return gi.loadJS(T)}function Ys(T){return`__${T}${Math.floor(1e6*Math.random())}`}class Oi{constructor(g){this.type="recaptcha-enterprise",this.auth=dr(g)}verify(g="verify",v=!1){var M=this;return(0,f.Z)(function*(){function me(){return me=(0,f.Z)(function*(Pt){if(!v){if(null==Pt.tenantId&&null!=Pt._agentRecaptchaConfig)return Pt._agentRecaptchaConfig.siteKey;if(null!=Pt.tenantId&&void 0!==Pt._tenantRecaptchaConfigs[Pt.tenantId])return Pt._tenantRecaptchaConfigs[Pt.tenantId].siteKey}return new Promise(function(){var $t=(0,f.Z)(function*(Vn,nr){Mr(Pt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gr=>{if(void 0!==Gr.recaptchaKey){const oo=new Yt(Gr);return null==Pt.tenantId?Pt._agentRecaptchaConfig=oo:Pt._tenantRecaptchaConfigs[Pt.tenantId]=oo,Vn(oo.siteKey)}nr(new Error("recaptcha Enterprise site key undefined"))}).catch(Gr=>{nr(Gr)})});return function(Vn,nr){return $t.apply(this,arguments)}}())}),me.apply(this,arguments)}function rt(Pt,$t,Vn){const nr=window.grecaptcha;Jn(nr)?nr.enterprise.ready(()=>{nr.enterprise.execute(Pt,{action:g}).then(Gr=>{$t(Gr)}).catch(()=>{$t("NO_RECAPTCHA")})}):Vn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Pt,$t)=>{(function X(Pt){return me.apply(this,arguments)})(M.auth).then(Vn=>{if(!v&&Jn(window.grecaptcha))rt(Vn,Pt,$t);else{if(typeof window>"u")return void $t(new Error("RecaptchaVerifier is only supported in browser"));let nr=function ps(){return gi.recaptchaEnterpriseScript}();0!==nr.length&&(nr+=Vn),jr(nr).then(()=>{rt(Vn,Pt,$t)}).catch(Gr=>{$t(Gr)})}}).catch(Vn=>{$t(Vn)})})})()}}function Xr(T,g,v){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(T,g,v,M=!1){const X=new Oi(T);let me;try{me=yield X.verify(v)}catch{me=yield X.verify(v,!0)}const rt=Object.assign({},g);return Object.assign(rt,M?{captchaResp:me}:{captchaResponse:me}),Object.assign(rt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(rt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),rt})).apply(this,arguments)}function Us(T,g,v,M){return Ui.apply(this,arguments)}function Ui(){return Ui=(0,f.Z)(function*(T,g,v,M){var X;if(null!==(X=T._getRecaptchaConfig())&&void 0!==X&&X.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const me=yield Xr(T,g,v,"getOobCode"===v);return M(T,me)}return M(T,g).catch(function(){var me=(0,f.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Pt=yield Xr(T,g,v,"getOobCode"===v);return M(T,Pt)}return Promise.reject(rt)});return function(rt){return me.apply(this,arguments)}}())}),Ui.apply(this,arguments)}function ws(T,g,v){const M=dr(T);Ee(M._canInitEmulator,M,"emulator-config-failed"),Ee(/^https?:\/\//.test(g),M,"invalid-emulator-scheme");const X=!!v?.disableWarnings,me=Ei(g),{host:rt,port:Pt}=function gs(T){const g=Ei(T),v=/(\/\/)?([^?#/]+)/.exec(T.substr(g.length));if(!v)return{host:"",port:null};const M=v[2].split("@").pop()||"",X=/^(\[[^\]]+\])(:|$)/.exec(M);if(X){const me=X[1];return{host:me,port:Zs(M.substr(me.length+1))}}{const[me,rt]=M.split(":");return{host:me,port:Zs(rt)}}}(g);M.config.emulator={url:`${me}//${rt}${null===Pt?"":`:${Pt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:rt,port:Pt,protocol:me.replace(":",""),options:Object.freeze({disableWarnings:X})}),X||function to(){function T(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Ei(T){const g=T.indexOf(":");return g<0?"":T.substr(0,g+1)}function Zs(T){if(!T)return null;const g=Number(T);return isNaN(g)?null:g}class ts{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Nt("not implemented")}_getIdTokenResponse(g){return Nt("not implemented")}_linkToIdToken(g,v){return Nt("not implemented")}_getReauthenticationResolver(g){return Nt("not implemented")}}function fo(T,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:resetPassword",st(T,g))})).apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Bi(T,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:signUp",g)})).apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:update",st(T,g))})).apply(this,arguments)}function Co(T,g){return ms.apply(this,arguments)}function ms(){return(ms=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithPassword",st(T,g))})).apply(this,arguments)}function Bs(T,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:sendOobCode",st(T,g))})).apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(T,g){return Bs(T,g)})).apply(this,arguments)}function xr(T,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(T,g){return Bs(T,g)})).apply(this,arguments)}function is(T,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(T,g){return Bs(T,g)})).apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(T,g){return Bs(T,g)})).apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithEmailLink",st(T,g))})).apply(this,arguments)}function Ss(){return(Ss=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithEmailLink",st(T,g))})).apply(this,arguments)}class li extends ts{constructor(g,v,M,X=null){super("password",M),this._email=g,this._password=v,this._tenantId=X}static _fromEmailAndPassword(g,v){return new li(g,v,"password")}static _fromEmailAndCode(g,v,M=null){return new li(g,v,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return Us(g,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Co);case"emailLink":return function ss(T,g){return _s.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Oe(g,"internal-error")}})()}_linkToIdToken(g,v){var M=this;return(0,f.Z)(function*(){switch(M.signInMethod){case"password":return Us(g,{idToken:v,returnSecureToken:!0,email:M._email,password:M._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bi);case"emailLink":return function tr(T,g){return Ss.apply(this,arguments)}(g,{idToken:v,email:M._email,oobCode:M._password});default:Oe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function re(T,g){return Y.apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithIdp",st(T,g))})).apply(this,arguments)}class $e extends ts{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new $e(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Oe("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:X}=v,me=(0,_e._T)(v,["providerId","signInMethod"]);if(!M||!X)return null;const rt=new $e(M,X);return rt.idToken=me.idToken||void 0,rt.accessToken=me.accessToken||void 0,rt.secret=me.secret,rt.nonce=me.nonce,rt.pendingToken=me.pendingToken||null,rt}_getIdTokenResponse(g){return re(g,this.buildRequest())}_linkToIdToken(g,v){const M=this.buildRequest();return M.idToken=v,re(g,M)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,re(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,B.xO)(v)}return g}}function Lt(){return(Lt=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:sendVerificationCode",st(T,g))})).apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithPhoneNumber",st(T,g))})).apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(T,g){const v=yield bn(T,"POST","/v1/accounts:signInWithPhoneNumber",st(T,g));if(v.temporaryProof)throw Nn(T,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const mr={USER_NOT_FOUND:"user-not-found"};function Ai(){return(Ai=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithPhoneNumber",st(T,Object.assign(Object.assign({},g),{operation:"REAUTH"})),mr)})).apply(this,arguments)}class zr extends ts{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new zr({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new zr({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function pn(T,g){return Sn.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Qt(T,g){return An.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function jn(T,g){return Ai.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:M,verificationCode:X}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:M,code:X}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:M,phoneNumber:X,temporaryProof:me}=g;return M||v||X||me?new zr({verificationId:v,verificationCode:M,phoneNumber:X,temporaryProof:me}):null}}class Ur{constructor(g){var v,M,X,me,rt,Pt;const $t=(0,B.zd)((0,B.pd)(g)),Vn=null!==(v=$t.apiKey)&&void 0!==v?v:null,nr=null!==(M=$t.oobCode)&&void 0!==M?M:null,Gr=function Rr(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(X=$t.mode)&&void 0!==X?X:null);Ee(Vn&&nr&&Gr,"argument-error"),this.apiKey=Vn,this.operation=Gr,this.code=nr,this.continueUrl=null!==(me=$t.continueUrl)&&void 0!==me?me:null,this.languageCode=null!==(rt=$t.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Pt=$t.tenantId)&&void 0!==Pt?Pt:null}static parseLink(g){const v=function mi(T){const g=(0,B.zd)((0,B.pd)(T)).link,v=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,M=(0,B.zd)((0,B.pd)(T)).deep_link_id;return(M?(0,B.zd)((0,B.pd)(M)).link:null)||M||v||g||T}(g);try{return new Ur(v)}catch{return null}}}let ds=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(v,M){return li._fromEmailAndPassword(v,M)}static credentialWithLink(v,M){const X=Ur.parseLink(M);return Ee(X,"argument-error"),li._fromEmailAndCode(v,X.code,X.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class vr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xi extends vr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Qr extends xi{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return Ee("providerId"in v&&"signInMethod"in v,"argument-error"),$e._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ee(g.idToken||g.accessToken,"argument-error"),$e._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Qr.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Qr.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:M,oauthTokenSecret:X,pendingToken:me,nonce:rt,providerId:Pt}=g;if(!M&&!X&&!v&&!me||!Pt)return null;try{return new Qr(Pt)._credential({idToken:v,accessToken:M,nonce:rt,pendingToken:me})}catch{return null}}}let Ii=(()=>{class T extends xi{constructor(){super("facebook.com")}static credential(v){return $e._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),po=(()=>{class T extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(v,M){return $e._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:M})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:M,oauthAccessToken:X}=v;if(!M&&!X)return null;try{return T.credential(M,X)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),os=(()=>{class T extends xi{constructor(){super("github.com")}static credential(v){return $e._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class Ki extends ts{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return re(g,this.buildRequest())}_linkToIdToken(g,v){const M=this.buildRequest();return M.idToken=v,re(g,M)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,re(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:X,pendingToken:me}=v;return M&&X&&me&&M===X?new Ki(M,me):null}static _create(g,v){return new Ki(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends vr{constructor(g){Ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return xs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return xs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Ki.fromJSON(g);return Ee(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:M}=g;if(!v||!M)return null;try{return Ki._create(M,v)}catch{return null}}}let To=(()=>{class T extends xi{constructor(){super("twitter.com")}static credential(v,M){return $e._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:M})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:M,oauthTokenSecret:X}=v;if(!M||!X)return null;try{return T.credential(M,X)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Qa(T,g){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signUp",st(T,g))})).apply(this,arguments)}class Q{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,M,X=!1){return(0,f.Z)(function*(){const me=yield Te._fromIdTokenResponse(g,M,X),rt=ie(M);return new Q({user:me,providerId:rt,_tokenResponse:M,operationType:v})})()}static _forOperation(g,v,M){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(M,!0);const X=ie(M);return new Q({user:g,providerId:X,_tokenResponse:M,operationType:v})})()}}function ie(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function F(T){return pe.apply(this,arguments)}function pe(){return(pe=(0,f.Z)(function*(T){var g;if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const v=dr(T);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new Q({user:v.currentUser,providerId:null,operationType:"signIn"});const M=yield Qa(v,{returnSecureToken:!0}),X=yield Q._fromIdTokenResponse(v,"signIn",M,!0);return yield v._updateCurrentUser(X.user),X})).apply(this,arguments)}class ze extends B.ZR{constructor(g,v,M,X){var me;super(v.code,v.message),this.operationType=M,this.user=X,Object.setPrototypeOf(this,ze.prototype),this.customData={appName:g.name,tenantId:null!==(me=g.tenantId)&&void 0!==me?me:void 0,_serverResponse:v.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(g,v,M,X){return new ze(g,v,M,X)}}function kn(T,g,v,M){return("reauthenticate"===g?v._getReauthenticationResolver(T):v._getIdTokenResponse(T)).catch(me=>{throw"auth/multi-factor-auth-required"===me.code?ze._fromErrorAndOperation(T,me,g,M):me})}function _r(T){return new Set(T.map(({providerId:g})=>g).filter(g=>!!g))}function hs(T,g){return _i.apply(this,arguments)}function _i(){return _i=(0,f.Z)(function*(T,g){const v=(0,B.m9)(T);yield Ic(!0,v,g);const{providerUserInfo:M}=yield function Bn(T,g){return Hn.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),X=_r(M||[]);return v.providerData=v.providerData.filter(me=>X.has(me.providerId)),X.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),_i.apply(this,arguments)}function Ma(T,g){return zl.apply(this,arguments)}function zl(){return(zl=(0,f.Z)(function*(T,g,v=!1){const M=yield Pr(T,g._linkToIdToken(T.auth,yield T.getIdToken()),v);return Q._forOperation(T,"link",M)})).apply(this,arguments)}function Ic(T,g,v){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(T,g,v){yield ue(g);const X=!1===T?"provider-already-linked":"no-such-provider";Ee(_r(g.providerData).has(v)===T,g.auth,X)})).apply(this,arguments)}function Pa(T,g){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(T,g,v=!1){const{auth:M}=T;if((0,s._isFirebaseServerApp)(M.app))return Promise.reject(Ge(M));const X="reauthenticate";try{const me=yield Pr(T,kn(M,X,g,T),v);Ee(me.idToken,M,"internal-error");const rt=Vr(me.idToken);Ee(rt,M,"internal-error");const{sub:Pt}=rt;return Ee(T.uid===Pt,M,"user-mismatch"),Q._forOperation(T,X,me)}catch(me){throw"auth/user-not-found"===me?.code&&Oe(M,"user-mismatch"),me}})).apply(this,arguments)}function xa(T,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(T,g,v=!1){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M="signIn",X=yield kn(T,M,g),me=yield Q._fromIdTokenResponse(T,M,X);return v||(yield T._updateCurrentUser(me.user)),me})).apply(this,arguments)}function Cc(T,g){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(T,g){return xa(dr(T),g)})).apply(this,arguments)}function ro(T,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(T,g){const v=(0,B.m9)(T);return yield Ic(!1,v,g.providerId),Ma(v,g)})).apply(this,arguments)}function wu(T,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(T,g){return Pa((0,B.m9)(T),g)})).apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(T,g){return bn(T,"POST","/v1/accounts:signInWithCustomToken",st(T,g))})).apply(this,arguments)}function Tc(T,g){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,f.Z)(function*(T,g){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const v=dr(T),M=yield function la(T,g){return ji.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),X=yield Q._fromIdTokenResponse(v,"signIn",M);return yield v._updateCurrentUser(X.user),X}),Rs.apply(this,arguments)}class go{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?wo._fromServerResponse(g,v):"totpInfo"in v?Ra._fromServerResponse(g,v):Oe(g,"internal-error")}}class wo extends go{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new wo(v)}}class Ra extends go{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new Ra(v)}}function Oa(T,g,v){var M;Ee((null===(M=v.url)||void 0===M?void 0:M.length)>0,T,"invalid-continue-uri"),Ee(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Ee(v.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(Ee(v.android.packageName.length>0,T,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function pr(T){return wc.apply(this,arguments)}function wc(){return(wc=(0,f.Z)(function*(T){const g=dr(T);g._getPasswordPolicyInternal()&&(yield g._updatePasswordPolicy())})).apply(this,arguments)}function cl(T,g,v){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(T,g,v){const M=dr(T),X={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};v&&Oa(M,X,v),yield Us(M,X,"getOobCode",xr)})).apply(this,arguments)}function ua(T,g,v){return jo.apply(this,arguments)}function jo(){return jo=(0,f.Z)(function*(T,g,v){yield fo((0,B.m9)(T),{oobCode:g,newPassword:v}).catch(function(){var M=(0,f.Z)(function*(X){throw"auth/password-does-not-meet-requirements"===X.code&&pr(T),X});return function(X){return M.apply(this,arguments)}}())}),jo.apply(this,arguments)}function Ho(T,g){return da.apply(this,arguments)}function da(){return da=(0,f.Z)(function*(T,g){yield function ns(T,g){return rs.apply(this,arguments)}((0,B.m9)(T),{oobCode:g})}),da.apply(this,arguments)}function ll(T,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,f.Z)(function*(T,g){const v=(0,B.m9)(T),M=yield fo(v,{oobCode:g}),X=M.requestType;switch(Ee(X,v,"internal-error"),X){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(M.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(M.mfaInfo,v,"internal-error");default:Ee(M.email,v,"internal-error")}let me=null;return M.mfaInfo&&(me=go._fromServerResponse(dr(v),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:me},operation:X}})).apply(this,arguments)}function Sc(T,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(T,g){const{data:v}=yield ll((0,B.m9)(T),g);return v.email})).apply(this,arguments)}function Rd(T,g,v){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(T,g,v){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M=dr(T),rt=yield Us(M,{returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qa).catch($t=>{throw"auth/password-does-not-meet-requirements"===$t.code&&pr(T),$t}),Pt=yield Q._fromIdTokenResponse(M,"signIn",rt);return yield M._updateCurrentUser(Pt.user),Pt})).apply(this,arguments)}function dl(T,g,v){return(0,s._isFirebaseServerApp)(T.app)?Promise.reject(Ge(T)):Cc((0,B.m9)(T),ds.credential(g,v)).catch(function(){var M=(0,f.Z)(function*(X){throw"auth/password-does-not-meet-requirements"===X.code&&pr(T),X});return function(X){return M.apply(this,arguments)}}())}function Na(T,g,v){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(T,g,v){const M=dr(T),X={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};(function me(rt,Pt){Ee(Pt.handleCodeInApp,M,"argument-error"),Pt&&Oa(M,rt,Pt)})(X,v),yield Us(M,X,"getOobCode",is)})).apply(this,arguments)}function $l(T,g){const v=Ur.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}function ha(T,g,v){return So.apply(this,arguments)}function So(){return(So=(0,f.Z)(function*(T,g,v){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M=(0,B.m9)(T),X=ds.credentialWithLink(g,v||Dn());return Ee(X._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Cc(M,X)})).apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:createAuthUri",st(T,g))})).apply(this,arguments)}function x(T,g){return se.apply(this,arguments)}function se(){return se=(0,f.Z)(function*(T,g){const M={identifier:g,continueUri:wt()?Dn():"http://localhost"},{signinMethods:X}=yield function hl(T,g){return bi.apply(this,arguments)}((0,B.m9)(T),M);return X||[]}),se.apply(this,arguments)}function j(T,g){return ne.apply(this,arguments)}function ne(){return ne=(0,f.Z)(function*(T,g){const v=(0,B.m9)(T),X={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};g&&Oa(v.auth,X,g);const{email:me}=yield function _n(T,g){return er.apply(this,arguments)}(v.auth,X);me!==T.email&&(yield T.reload())}),ne.apply(this,arguments)}function Ue(T,g,v){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T),me={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:g};v&&Oa(M.auth,me,v);const{email:rt}=yield function Ds(T,g){return ai.apply(this,arguments)}(M.auth,me);rt!==T.email&&(yield T.reload())}),Ot.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(T,g){return vt(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Fr(T,g){return ui.apply(this,arguments)}function ui(){return ui=(0,f.Z)(function*(T,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const M=(0,B.m9)(T),me={idToken:yield M.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},rt=yield Pr(M,function Ht(T,g){return Mn.apply(this,arguments)}(M.auth,me));M.displayName=rt.displayName||null,M.photoURL=rt.photoUrl||null;const Pt=M.providerData.find(({providerId:$t})=>"password"===$t);Pt&&(Pt.displayName=M.displayName,Pt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(rt)}),ui.apply(this,arguments)}function ni(T,g){const v=(0,B.m9)(T);return(0,s._isFirebaseServerApp)(v.auth.app)?Promise.reject(Ge(v.auth)):pi(v,g,null)}function Ar(T,g){return pi((0,B.m9)(T),null,g)}function pi(T,g,v){return Yr.apply(this,arguments)}function Yr(){return Yr=(0,f.Z)(function*(T,g,v){const{auth:M}=T,me={idToken:yield T.getIdToken(),returnSecureToken:!0};g&&(me.email=g),v&&(me.password=v);const rt=yield Pr(T,function Kr(T,g){return oi.apply(this,arguments)}(M,me));yield T._updateTokensIfNecessary(rt,!0)}),Yr.apply(this,arguments)}class Ms{constructor(g,v,M={}){this.isNewUser=g,this.providerId=v,this.profile=M}}class ys extends Ms{constructor(g,v,M,X){super(g,v,M),this.username=X}}class $o extends Ms{constructor(g,v){super(g,"facebook.com",v)}}class Gs extends ys{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Ci extends Ms{constructor(g,v){super(g,"google.com",v)}}class lr extends ys{constructor(g,v,M){super(g,"twitter.com",v,M)}}function qs(T){const{user:g,_tokenResponse:v}=T;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Qi(T){var g,v;if(!T)return null;const{providerId:M}=T,X=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},me=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!M&&T?.idToken){const rt=null===(v=null===(g=Vr(T.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(rt)return new Ms(me,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!M)return null;switch(M){case"facebook.com":return new $o(me,X);case"github.com":return new Gs(me,X);case"google.com":return new Ci(me,X);case"twitter.com":return new lr(me,X,T.screenName||null);case"custom":case"anonymous":return new Ms(me,null);default:return new Ms(me,M,X)}}(v)}class Wo{constructor(g,v,M){this.type=g,this.credential=v,this.user=M}static _fromIdtoken(g,v){return new Wo("enroll",g,v)}static _fromMfaPendingCredential(g){return new Wo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,M;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Wo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(M=g.multiFactorSession)&&void 0!==M&&M.idToken)return Wo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Mo{constructor(g,v,M){this.session=g,this.hints=v,this.signInResolver=M}static _fromError(g,v){const M=dr(g),X=v.customData._serverResponse,me=(X.mfaInfo||[]).map(Pt=>go._fromServerResponse(M,Pt));Ee(X.mfaPendingCredential,M,"internal-error");const rt=Wo._fromMfaPendingCredential(X.mfaPendingCredential);return new Mo(rt,me,function(){var Pt=(0,f.Z)(function*($t){const Vn=yield $t._process(M,rt);delete X.mfaInfo,delete X.mfaPendingCredential;const nr=Object.assign(Object.assign({},X),{idToken:Vn.idToken,refreshToken:Vn.refreshToken});switch(v.operationType){case"signIn":const Gr=yield Q._fromIdTokenResponse(M,v.operationType,nr);return yield M._updateCurrentUser(Gr.user),Gr;case"reauthenticate":return Ee(v.user,M,"internal-error"),Q._forOperation(v.user,v.operationType,nr);default:Oe(M,"internal-error")}});return function($t){return Pt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,f.Z)(function*(){return v.signInResolver(g)})()}}function Su(T,g){var v;const M=(0,B.m9)(T),X=g;return Ee(g.customData.operationType,M,"argument-error"),Ee(null===(v=X.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,M,"argument-error"),Mo._fromError(M,X)}class Rc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(M=>go._fromServerResponse(g.auth,M)))})}static _fromUser(g){return new Rc(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Wo._fromIdtoken(yield g.user.getIdToken(),g.user)})()}enroll(g,v){var M=this;return(0,f.Z)(function*(){const X=g,me=yield M.getSession(),rt=yield Pr(M.user,X._process(M.user.auth,me,v));return yield M.user._updateTokensIfNecessary(rt),M.user.reload()})()}unenroll(g){var v=this;return(0,f.Z)(function*(){const M="string"==typeof g?g:g.uid,X=yield v.user.getIdToken();try{const me=yield Pr(v.user,function Mu(T,g){return vt(T,"POST","/v2/accounts/mfaEnrollment:withdraw",st(T,g))}(v.user.auth,{idToken:X,mfaEnrollmentId:M}));v.enrolledFactors=v.enrolledFactors.filter(({uid:rt})=>rt!==M),yield v.user._updateTokensIfNecessary(me),yield v.user.reload()}catch(me){throw me}})()}}const ka=new WeakMap;function kd(T){const g=(0,B.m9)(T);return ka.has(g)||ka.set(g,Rc._fromUser(g)),ka.get(g)}const Pu="__sak";class Li{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Po=(()=>{class T extends Li{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,M)=>this.onStorageEvent(v,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fa(){const T=(0,B.z$)();return He(T)||fr(T)}()&&function un(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ft(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const M of Object.keys(this.listeners)){const X=this.storage.getItem(M),me=this.localCache[M];X!==me&&v(M,me,X)}}onStorageEvent(v,M=!1){if(!v.key)return void this.forAllChangedKeys((Pt,$t,Vn)=>{this.notifyListeners(Pt,Vn)});const X=v.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pt=this.storage.getItem(X);if(v.newValue!==Pt)null!==v.newValue?this.storage.setItem(X,v.newValue):this.storage.removeItem(X);else if(this.localCache[X]===v.newValue&&!M)return}const me=()=>{const Pt=this.storage.getItem(X);!M&&this.localCache[X]===Pt||this.notifyListeners(X,Pt)},rt=this.storage.getItem(X);!function ft(){return(0,B.w1)()&&10===document.documentMode}()||rt===v.newValue||v.newValue===v.oldValue?me():setTimeout(me,10)}notifyListeners(v,M){this.localCache[v]=M;const X=this.listeners[v];if(X)for(const me of Array.from(X))me(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,M,X)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:M,newValue:X}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(M)}_removeListener(v,M){this.listeners[v]&&(this.listeners[v].delete(M),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,M){var X=()=>super._set,me=this;return(0,f.Z)(function*(){yield X().call(me,v,M),me.localCache[v]=JSON.stringify(M)})()}_get(v){var M=()=>super._get,X=this;return(0,f.Z)(function*(){const me=yield M().call(X,v);return X.localCache[v]=JSON.stringify(me),me})()}_remove(v){var M=()=>super._remove,X=this;return(0,f.Z)(function*(){yield M().call(X,v),delete X.localCache[v]})()}}return T.type="LOCAL",T})(),qt=(()=>{class T extends Li{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,M){}_removeListener(v,M){}}return T.type="SESSION",T})();let Ru=(()=>{class T{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const M=this.receivers.find(me=>me.isListeningto(v));if(M)return M;const X=new T(v);return this.receivers.push(X),X}isListeningto(v){return this.eventTarget===v}handleEvent(v){var M=this;return(0,f.Z)(function*(){const X=v,{eventId:me,eventType:rt,data:Pt}=X.data,$t=M.handlersMap[rt];if(!$t?.size)return;X.ports[0].postMessage({status:"ack",eventId:me,eventType:rt});const Vn=Array.from($t).map(function(){var Gr=(0,f.Z)(function*(oo){return oo(X.origin,Pt)});return function(oo){return Gr.apply(this,arguments)}}()),nr=yield function $r(T){return Promise.all(T.map(function(){var g=(0,f.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(M){return{fulfilled:!1,reason:M}}});return function(v){return g.apply(this,arguments)}}()))}(Vn);X.ports[0].postMessage({status:"done",eventId:me,eventType:rt,response:nr})})()}_subscribe(v,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(M)}_unsubscribe(v,M){this.handlersMap[v]&&M&&this.handlersMap[v].delete(M),(!M||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function ec(T="",g=10){let v="";for(let M=0;M<g;M++)v+=Math.floor(10*Math.random());return T+v}class Es{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,M=50){var X=this;return(0,f.Z)(function*(){const me=typeof MessageChannel<"u"?new MessageChannel:null;if(!me)throw new Error("connection_unavailable");let rt,Pt;return new Promise(($t,Vn)=>{const nr=ec("",20);me.port1.start();const Gr=setTimeout(()=>{Vn(new Error("unsupported_event"))},M);Pt={messageChannel:me,onMessage(oo){const za=oo;if(za.data.eventId===nr)switch(za.data.status){case"ack":clearTimeout(Gr),rt=setTimeout(()=>{Vn(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),$t(za.data.response);break;default:clearTimeout(Gr),clearTimeout(rt),Vn(new Error("invalid_response"))}}},X.handlers.add(Pt),me.port1.addEventListener("message",Pt.onMessage),X.target.postMessage({eventType:g,eventId:nr,data:v},[me.port2])}).finally(()=>{Pt&&X.removeMessageHandler(Pt)})})()}}function Yi(){return window}function ks(){return typeof Yi().WorkerGlobalScope<"u"&&"function"==typeof Yi().importScripts}function tc(){return(tc=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ou="firebaseLocalStorageDb",xo="firebaseLocalStorage",Nu="fbase_key";class fa{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function S(T,g){return T.transaction([xo],g?"readwrite":"readonly").objectStore(xo)}function w(){const T=indexedDB.open(Ou,1);return new Promise((g,v)=>{T.addEventListener("error",()=>{v(T.error)}),T.addEventListener("upgradeneeded",()=>{const M=T.result;try{M.createObjectStore(xo,{keyPath:Nu})}catch(X){v(X)}}),T.addEventListener("success",(0,f.Z)(function*(){const M=T.result;M.objectStoreNames.contains(xo)?g(M):(M.close(),yield function O(){const T=indexedDB.deleteDatabase(Ou);return new fa(T).toPromise()}(),g(yield w()))}))})}function N(T,g,v){return W.apply(this,arguments)}function W(){return(W=(0,f.Z)(function*(T,g,v){const M=S(T,!0).put({[Nu]:g,value:v});return new fa(M).toPromise()})).apply(this,arguments)}function Ve(){return(Ve=(0,f.Z)(function*(T,g){const v=S(T,!1).get(g),M=yield new fa(v).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function St(T,g){const v=S(T,!0).delete(g);return new fa(v).toPromise()}const di=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,f.Z)(function*(){return v.db||(v.db=yield w()),v.db})()}_withRetries(v){var M=this;return(0,f.Z)(function*(){let X=0;for(;;)try{const me=yield M._openDb();return yield v(me)}catch(me){if(X++>3)throw me;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,f.Z)(function*(){return ks()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,f.Z)(function*(){v.receiver=Ru._getInstance(function Vd(){return ks()?self:null}()),v.receiver._subscribe("keyChanged",function(){var M=(0,f.Z)(function*(X,me){return{keyProcessed:(yield v._poll()).includes(me.key)}});return function(X,me){return M.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var M=(0,f.Z)(function*(X,me){return["keyChanged"]});return function(X,me){return M.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,f.Z)(function*(){var M,X;if(v.activeServiceWorker=yield function Nc(){return tc.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Es(v.activeServiceWorker);const me=yield v.sender._send("ping",{},800);me&&null!==(M=me[0])&&void 0!==M&&M.fulfilled&&null!==(X=me[0])&&void 0!==X&&X.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var M=this;return(0,f.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function Ld(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:v},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const v=yield w();return yield N(v,Pu,"1"),yield St(v,Pu),!0}catch{}return!1})()}_withPendingWrite(v){var M=this;return(0,f.Z)(function*(){M.pendingWrites++;try{yield v()}finally{M.pendingWrites--}})()}_set(v,M){var X=this;return(0,f.Z)(function*(){return X._withPendingWrite((0,f.Z)(function*(){return yield X._withRetries(me=>N(me,v,M)),X.localCache[v]=M,X.notifyServiceWorker(v)}))})()}_get(v){var M=this;return(0,f.Z)(function*(){const X=yield M._withRetries(me=>function fe(T,g){return Ve.apply(this,arguments)}(me,v));return M.localCache[v]=X,X})()}_remove(v){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(X=>St(X,v)),delete M.localCache[v],M.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,f.Z)(function*(){const M=yield v._withRetries(rt=>{const Pt=S(rt,!1).getAll();return new fa(Pt).toPromise()});if(!M)return[];if(0!==v.pendingWrites)return[];const X=[],me=new Set;if(0!==M.length)for(const{fbase_key:rt,value:Pt}of M)me.add(rt),JSON.stringify(v.localCache[rt])!==JSON.stringify(Pt)&&(v.notifyListeners(rt,Pt),X.push(rt));for(const rt of Object.keys(v.localCache))v.localCache[rt]&&!me.has(rt)&&(v.notifyListeners(rt,null),X.push(rt));return X})()}notifyListeners(v,M){this.localCache[v]=M;const X=this.listeners[v];if(X)for(const me of Array.from(X))me(M)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(M)}_removeListener(v,M){this.listeners[v]&&(this.listeners[v].delete(M),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})(),Oo=1e12;class nc{constructor(g){this.auth=g,this.counter=Oo,this._widgets=new Map}render(g,v){const M=this.counter;return this._widgets.set(M,new Ks(g,this.auth.name,v||{})),this.counter++,M}reset(g){var v;const M=g||Oo;null===(v=this._widgets.get(M))||void 0===v||v.delete(),this._widgets.delete(M)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Oo))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,f.Z)(function*(){var M;return null===(M=v._widgets.get(g||Oo))||void 0===M||M.execute(),""})()}}class Ks{constructor(g,v,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const X="string"==typeof g?document.getElementById(g):g;Ee(X,"argument-error",{appName:v}),this.container=X,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function No(T){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<T;M++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ki=Ys("rcb"),ef=new we(3e4,6e4);class Ud{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Yi().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return Ee(function Zl(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&gr(Yi().grecaptcha)?Promise.resolve(Yi().grecaptcha):new Promise((M,X)=>{const me=Yi().setTimeout(()=>{X(tt(g,"network-request-failed"))},ef.get());Yi()[ki]=()=>{Yi().clearTimeout(me),delete Yi()[ki];const Pt=Yi().grecaptcha;if(!Pt||!gr(Pt))return void X(tt(g,"internal-error"));const $t=Pt.render;Pt.render=(Vn,nr)=>{const Gr=$t(Vn,nr);return this.counter++,Gr},this.hostLanguage=v,M(Pt)},jr(`${function eo(){return gi.recaptchaV2Script}()}?${(0,B.xO)({onload:ki,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(me),X(tt(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=Yi().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ko{load(g){return(0,f.Z)(function*(){return new nc(g)})()}clearedOneInstance(){}}const Qo="recaptcha",tf={theme:"light",type:"image"};class ku{constructor(g,v,M=Object.assign({},tf)){this.parameters=M,this.type=Qo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dr(g),this.isInvisible="invisible"===this.parameters.size,Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const X="string"==typeof v?document.getElementById(v):v;Ee(X,this.auth,"argument-error"),this.container=X,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ko:new Ud,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),M=g.getAssertedRecaptcha();return M.getResponse(v)||new Promise(me=>{const rt=Pt=>{Pt&&(g.tokenChangeListeners.delete(rt),me(Pt))};g.tokenChangeListeners.add(rt),g.isInvisible&&M.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(M=>M(v)),"function"==typeof g)g(v);else if("string"==typeof g){const M=Yi()[g];"function"==typeof M&&M(v)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const M=document.createElement("div");v.appendChild(M),v=M}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){Ee(wt()&&!ks(),g.auth,"internal-error"),yield function Yo(){let T=null;return new Promise(g=>{"complete"!==document.readyState?(T=()=>g(),window.addEventListener("load",T)):g()}).catch(g=>{throw T&&window.removeEventListener("load",T),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function Br(T){return xn.apply(this,arguments)}(g.auth);Ee(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fu{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=zr._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Lu(T,g,v){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(T,g,v){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M=dr(T),X=yield Uu(M,g,(0,B.m9)(v));return new Fu(X,me=>Cc(M,me))})).apply(this,arguments)}function Va(T,g,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);yield Ic(!1,M,"phone");const X=yield Uu(M.auth,g,(0,B.m9)(v));return new Fu(X,me=>ro(M,me))})).apply(this,arguments)}function Bd(T,g,v){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);if((0,s._isFirebaseServerApp)(M.auth.app))return Promise.reject(Ge(M.auth));const X=yield Uu(M.auth,g,(0,B.m9)(v));return new Fu(X,me=>wu(M,me))})).apply(this,arguments)}function Uu(T,g,v){return kc.apply(this,arguments)}function kc(){return kc=(0,f.Z)(function*(T,g,v){var M;const X=yield v.verify();try{let me;if(Ee("string"==typeof X,T,"argument-error"),Ee(v.type===Qo,T,"argument-error"),me="string"==typeof g?{phoneNumber:g}:g,"session"in me){const rt=me.session;if("phoneNumber"in me)return Ee("enroll"===rt.type,T,"internal-error"),(yield function Nd(T,g){return vt(T,"POST","/v2/accounts/mfaEnrollment:start",st(T,g))}(T,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:me.phoneNumber,recaptchaToken:X}})).phoneSessionInfo.sessionInfo;{Ee("signin"===rt.type,T,"internal-error");const Pt=(null===(M=me.multiFactorHint)||void 0===M?void 0:M.uid)||me.multiFactorUid;return Ee(Pt,T,"missing-multi-factor-info"),(yield function Ir(T,g){return vt(T,"POST","/v2/accounts/mfaSignIn:start",st(T,g))}(T,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Pt,phoneSignInInfo:{recaptchaToken:X}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield function ht(T,g){return Lt.apply(this,arguments)}(T,{phoneNumber:me.phoneNumber,recaptchaToken:X});return rt}}finally{v._reset()}}),kc.apply(this,arguments)}function fl(T,g){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(T,g){const v=(0,B.m9)(T);if((0,s._isFirebaseServerApp)(v.auth.app))return Promise.reject(Ge(v.auth));yield Ma(v,g)})).apply(this,arguments)}let xg=(()=>{class T{constructor(v){this.providerId=T.PROVIDER_ID,this.auth=dr(v)}verifyPhoneNumber(v,M){return Uu(this.auth,v,(0,B.m9)(M))}static credential(v,M){return zr._fromVerification(v,M)}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:M,temporaryProof:X}=v;return M&&X?zr._fromTokenResponse(M,X):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function ga(T,g){return g?kt(g):(Ee(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class jd extends ts{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return re(g,this._buildIdpRequest())}_linkToIdToken(g,v){return re(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return re(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function op(T){return xa(T.auth,new jd(T),T.bypassAuthState)}function Hd(T){const{auth:g,user:v}=T;return Ee(v,g,"internal-error"),Pa(v,new jd(T),T.bypassAuthState)}function Rg(T){return zd.apply(this,arguments)}function zd(){return(zd=(0,f.Z)(function*(T){const{auth:g,user:v}=T;return Ee(v,g,"internal-error"),Ma(v,new jd(T),T.bypassAuthState)})).apply(this,arguments)}class pl{constructor(g,v,M,X,me=!1){this.auth=g,this.resolver=M,this.user=X,this.bypassAuthState=me,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,f.Z)(function*(M,X){g.pendingPromise={resolve:M,reject:X};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(me){g.reject(me)}});return function(M,X){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,f.Z)(function*(){const{urlResponse:M,sessionId:X,postBody:me,tenantId:rt,error:Pt,type:$t}=g;if(Pt)return void v.reject(Pt);const Vn={auth:v.auth,requestUri:M,sessionId:X,tenantId:rt||void 0,postBody:me||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask($t)(Vn))}catch(nr){v.reject(nr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return op;case"linkViaPopup":case"linkViaRedirect":return Rg;case"reauthViaPopup":case"reauthViaRedirect":return Hd;default:Oe(this.auth,"internal-error")}}resolve(g){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bu=new we(2e3,1e4);function ap(T,g,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(T,g,v){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(tt(T,"operation-not-supported-in-this-environment"));const M=dr(T);dt(T,g,vr);const X=ga(M,v);return new Ls(M,"signInViaPopup",g,X).executeNotNull()})).apply(this,arguments)}function gl(T,g,v){return ea.apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);if((0,s._isFirebaseServerApp)(M.auth.app))return Promise.reject(tt(M.auth,"operation-not-supported-in-this-environment"));dt(M.auth,g,vr);const X=ga(M.auth,v);return new Ls(M.auth,"reauthViaPopup",g,X,M).executeNotNull()})).apply(this,arguments)}function Og(T,g,v){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);dt(M.auth,g,vr);const X=ga(M.auth,v);return new Ls(M.auth,"linkViaPopup",g,X,M).executeNotNull()})).apply(this,arguments)}let Ls=(()=>{class T extends pl{constructor(v,M,X,me,rt){super(v,M,me,rt),this.provider=X,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var v=this;return(0,f.Z)(function*(){const M=yield v.execute();return Ee(M,v.auth,"internal-error"),M})()}onExecution(){var v=this;return(0,f.Z)(function*(){Vt(1===v.filter.length,"Popup operations only handle one event");const M=ec();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],M),v.authWindow.associatedEvent=M,v.resolver._originValidation(v.auth).catch(X=>{v.reject(X)}),v.resolver._isIframeWebStorageSupported(v.auth,X=>{X||v.reject(tt(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const v=()=>{var M,X;this.pollId=null!==(X=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==X&&X.closed?window.setTimeout(()=>{this.pollId=null,this.reject(tt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Bu.get())};v()}}return T.currentPopupAction=null,T})();const cp="pendingRedirect",Ji=new Map;class ql extends pl{constructor(g,v,M=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,M),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,f.Z)(function*(){let M=Ji.get(v.auth._key());if(!M){try{const me=(yield function Hu(T,g){return ta.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;M=()=>Promise.resolve(me)}catch(X){M=()=>Promise.reject(X)}Ji.set(v.auth._key(),M)}return v.bypassAuthState||Ji.set(v.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,M=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(M,g);if("unknown"!==g.type){if(g.eventId){const X=yield M.auth._redirectUserForId(g.eventId);if(X)return M.user=X,v().call(M,g);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ta(){return(ta=(0,f.Z)(function*(T,g){const v=zu(g),M=ko(T);if(!(yield M._isAvailable()))return!1;const X="true"===(yield M._get(v));return yield M._remove(v),X})).apply(this,arguments)}function Ua(T,g){return ml.apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(T,g){return ko(T)._set(zu(g),"true")})).apply(this,arguments)}function Zr(){Ji.clear()}function _l(T,g){Ji.set(T._key(),g)}function ko(T){return kt(T._redirectPersistence)}function zu(T){return cn(cp,T.config.apiKey,T.name)}function Ba(T,g,v){return function $d(T,g,v){return Zd.apply(this,arguments)}(T,g,v)}function Zd(){return(Zd=(0,f.Z)(function*(T,g,v){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M=dr(T);dt(T,g,vr),yield M._initializationPromise;const X=ga(M,v);return yield Ua(X,M),X._openRedirect(M,g,"signInViaRedirect")})).apply(this,arguments)}function Wl(T,g,v){return function Fc(T,g,v){return $u.apply(this,arguments)}(T,g,v)}function $u(){return($u=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);if(dt(M.auth,g,vr),(0,s._isFirebaseServerApp)(M.auth.app))return Promise.reject(Ge(M.auth));yield M.auth._initializationPromise;const X=ga(M.auth,v);yield Ua(X,M.auth);const me=yield ma(M);return X._openRedirect(M.auth,g,"reauthViaRedirect",me)})).apply(this,arguments)}function nf(T,g,v){return function vl(T,g,v){return rc.apply(this,arguments)}(T,g,v)}function rc(){return(rc=(0,f.Z)(function*(T,g,v){const M=(0,B.m9)(T);dt(M.auth,g,vr),yield M.auth._initializationPromise;const X=ga(M.auth,v);yield Ic(!1,M,g.providerId),yield Ua(X,M.auth);const me=yield ma(M);return X._openRedirect(M.auth,g,"linkViaRedirect",me)})).apply(this,arguments)}function lp(T,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(T,g){return yield dr(T)._initializationPromise,Gd(T,g,!1)})).apply(this,arguments)}function Gd(T,g){return yl.apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(T,g,v=!1){if((0,s._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const M=dr(T),X=ga(M,g),rt=yield new ql(M,X,v).execute();return rt&&!v&&(delete rt.user._redirectEventId,yield M._persistUserIfCurrent(rt.user),yield M._setRedirectUser(null,g)),rt})).apply(this,arguments)}function ma(T){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(T){const g=ec(`${T.uid}:::`);return T._redirectEventId=g,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),g})).apply(this,arguments)}class Kl{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(g,M)&&(v=!0,this.sendToConsumer(g,M),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Vc(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xt(T);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var M;if(g.error&&!Xt(g)){const X=(null===(M=g.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";v.onError(tt(this.auth,X))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const M=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&M}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(g))}saveEventToCache(g){this.cachedEventUids.add(_a(g)),this.lastProcessedEventTime=Date.now()}}function _a(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(g=>g).join("-")}function Xt({type:T,error:g}){return"unknown"===T&&"auth/no-auth-event"===g?.code}function Wd(T){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,f.Z)(function*(T,g={}){return vt(T,"GET","/v1/projects",g)})).apply(this,arguments)}const Xi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ng=/^https?/;function rf(){return(rf=(0,f.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:g}=yield Wd(T);for(const v of g)try{if(kg(v))return}catch{}Oe(T,"unauthorized-domain")})).apply(this,arguments)}function kg(T){const g=Dn(),{protocol:v,hostname:M}=new URL(g);if(T.startsWith("chrome-extension://")){const rt=new URL(T);return""===rt.hostname&&""===M?"chrome-extension:"===v&&T.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&rt.hostname===M}if(!Ng.test(v))return!1;if(Xi.test(T))return M===T;const X=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+X+"|"+X+")$","i").test(M)}const sf=new we(3e4,6e4);function dp(){const T=Yi().___jsl;if(T?.H)for(const g of Object.keys(T.H))if(T.H[g].r=T.H[g].r||[],T.H[g].L=T.H[g].L||[],T.H[g].r=[...T.H[g].L],T.CP)for(let v=0;v<T.CP.length;v++)T.CP[v]=null}let El=null;const af=new we(5e3,15e3),Qd="__/auth/iframe",Hi="emulator/auth/iframe",Ql={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yd(T){const g=T.config;Ee(g.authDomain,T,"auth-domain-config-required");const v=g.emulator?te(g,Hi):`https://${T.config.authDomain}/${Qd}`,M={apiKey:g.apiKey,appName:T.name,v:s.SDK_VERSION},X=ic.get(T.config.apiHost);X&&(M.eid=X);const me=T._getFrameworks();return me.length&&(M.fw=me.join(",")),`${v}?${(0,B.xO)(M).slice(1)}`}function sc(){return sc=(0,f.Z)(function*(T){const g=yield function Al(T){return El=El||function Kd(T){return new Promise((g,v)=>{var M,X,me;function rt(){dp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{dp(),v(tt(T,"network-request-failed"))},timeout:sf.get()})}if(null!==(X=null===(M=Yi().gapi)||void 0===M?void 0:M.iframes)&&void 0!==X&&X.Iframe)g(gapi.iframes.getContext());else{if(null===(me=Yi().gapi)||void 0===me||!me.load){const Pt=Ys("iframefcb");return Yi()[Pt]=()=>{gapi.load?rt():v(tt(T,"network-request-failed"))},jr(`${function Vi(){return gi.gapiScript}()}?onload=${Pt}`).catch($t=>v($t))}rt()}}).catch(g=>{throw El=null,g})}(T),El}(T),v=Yi().gapi;return Ee(v,T,"internal-error"),g.open({where:document.body,url:Yd(T),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ql,dontclear:!0},M=>new Promise(function(){var X=(0,f.Z)(function*(me,rt){yield M.restyle({setHideOnLeave:!1});const Pt=tt(T,"network-request-failed"),$t=Yi().setTimeout(()=>{rt(Pt)},af.get());function Vn(){Yi().clearTimeout($t),me(M)}M.ping(Vn).then(Vn,()=>{rt(Pt)})});return function(me,rt){return X.apply(this,arguments)}}()))}),sc.apply(this,arguments)}const Zu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lf{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Jl="__/auth/handler",Il="emulator/auth/handler",bl=encodeURIComponent("fac");function ja(T,g,v,M,X,me){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(T,g,v,M,X,me){Ee(T.config.authDomain,T,"auth-domain-config-required"),Ee(T.config.apiKey,T,"invalid-api-key");const rt={apiKey:T.config.apiKey,appName:T.name,authType:v,redirectUrl:M,v:s.SDK_VERSION,eventId:X};if(g instanceof vr){g.setDefaultLanguage(T.languageCode),rt.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(rt.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nr,Gr]of Object.entries(me||{}))rt[nr]=Gr}if(g instanceof xi){const nr=g.getScopes().filter(Gr=>""!==Gr);nr.length>0&&(rt.scopes=nr.join(","))}T.tenantId&&(rt.tid=T.tenantId);const Pt=rt;for(const nr of Object.keys(Pt))void 0===Pt[nr]&&delete Pt[nr];const $t=yield T._getAppCheckToken(),Vn=$t?`#${bl}=${encodeURIComponent($t)}`:"";return`${function Gu({config:T}){return T.emulator?te(T,Il):`https://${T.authDomain}/${Jl}`}(T)}?${(0,B.xO)(Pt).slice(1)}${Vn}`})).apply(this,arguments)}const qu="webStorageSupport",Xd=class uf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qt,this._completeRedirectFn=Gd,this._overrideRedirectResult=_l}_openPopup(g,v,M,X){var me=this;return(0,f.Z)(function*(){var rt;Vt(null===(rt=me.eventManagers[g._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Pt=yield ja(g,v,M,Dn(),X);return function hp(T,g,v,M=500,X=600){const me=Math.max((window.screen.availHeight-X)/2,0).toString(),rt=Math.max((window.screen.availWidth-M)/2,0).toString();let Pt="";const $t=Object.assign(Object.assign({},Zu),{width:M.toString(),height:X.toString(),top:me,left:rt}),Vn=(0,B.z$)().toLowerCase();v&&(Pt=nt(Vn)?"_blank":v),Je(Vn)&&(g=g||"http://localhost",$t.scrollbars="yes");const nr=Object.entries($t).reduce((oo,[za,$c])=>`${oo}${za}=${$c},`,"");if(function yt(T=(0,B.z$)()){var g;return fr(T)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Vn)&&"_self"!==Pt)return function mo(T,g){const v=document.createElement("a");v.href=T,v.target=g;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(M)}(g||"",Pt),new lf(null);const Gr=window.open(g||"",Pt,nr);Ee(Gr,T,"popup-blocked");try{Gr.focus()}catch{}return new lf(Gr)}(g,Pt,ec())})()}_openRedirect(g,v,M,X){var me=this;return(0,f.Z)(function*(){return yield me._originValidation(g),function Oc(T){Yi().location.href=T}(yield ja(g,v,M,Dn(),X)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:X,promise:me}=this.eventManagers[v];return X?Promise.resolve(X):(Vt(me,"If manager is not set, promise should be"),me)}const M=this.initAndGetManager(g);return this.eventManagers[v]={promise:M},M.catch(()=>{delete this.eventManagers[v]}),M}initAndGetManager(g){var v=this;return(0,f.Z)(function*(){const M=yield function so(T){return sc.apply(this,arguments)}(g),X=new Kl(g);return M.register("authEvent",me=>(Ee(me?.authEvent,g,"invalid-auth-event"),{status:X.onEvent(me.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:X},v.iframes[g._key()]=M,X})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(qu,{type:qu},X=>{var me;const rt=null===(me=X?.[0])||void 0===me?void 0:me[qu];void 0!==rt&&v(!!rt),Oe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function up(T){return rf.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return Ft()||He()||fr()}};class fp{constructor(g){this.factorId=g}_process(g,v,M){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,M);case"signin":return this._finalizeSignIn(g,v.credential);default:return Nt("unexpected MultiFactorSessionType")}}}class Bc extends fp{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Bc(g)}_finalizeEnroll(g,v,M){return function Jh(T,g){return vt(T,"POST","/v2/accounts/mfaEnrollment:finalize",st(T,g))}(g,{idToken:v,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Fs(T,g){return vt(T,"POST","/v2/accounts/mfaSignIn:finalize",st(T,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wu=(()=>{class T{constructor(){}static assertion(v){return Bc._fromCredential(v)}}return T.FACTOR_ID="phone",T})();var eu="@firebase/auth";class Cl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,f.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(M=>{g(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function ls(T){gi=T}({loadJS:T=>new Promise((g,v)=>{const M=document.createElement("script");M.setAttribute("src",T),M.onload=g,M.onerror=X=>{const me=tt("internal-error");me.customData=X,v(me)},M.type="text/javascript",M.charset="UTF-8",function hf(){var T,g;return null!==(g=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==g?g:document}().appendChild(M)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ku(T){(0,s._registerComponent)(new Ae.wA("auth",(g,{options:v})=>{const M=g.getProvider("app").getImmediate(),X=g.getProvider("heartbeat"),me=g.getProvider("app-check-internal"),{apiKey:rt,authDomain:Pt}=M.options;Ee(rt&&!rt.includes(":"),"invalid-api-key",{appName:M.name});const $t={apiKey:rt,authDomain:Pt,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ln(T)},Vn=new ti(M,X,me,$t);return function Uo(T,g){const v=g?.persistence||[],M=(Array.isArray(v)?v:[v]).map(kt);g?.errorMap&&T._updateErrorMap(g.errorMap),T._initializeWithPersistence(M,g?.popupRedirectResolver)}(Vn,v),Vn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,M)=>{g.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new Ae.wA("auth-internal",g=>{const v=dr(g.getProvider("auth").getImmediate());return new Cl(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)(eu,"1.7.4",function Tl(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(T)),(0,s.registerVersion)(eu,"1.7.4","esm2017")}("Browser")},5588:(an,lt,k)=>{"use strict";k.d(lt,{u7:()=>E_,Jj:()=>Vl,IX:()=>Ll,my:()=>Is,xU:()=>Cd,Lz:()=>Jc,WA:()=>te,F8:()=>vd,$q:()=>og,W:()=>vu,EK:()=>Jn,PU:()=>rl,l7:()=>qn,Ky:()=>Jt,Xb:()=>sr,Cf:()=>Or,K9:()=>ut,Me:()=>bo,yq:()=>Vt,Wi:()=>Ia,ET:()=>T_,Ab:()=>Bf,vr:()=>Vh,Fc:()=>Jp,hJ:()=>Kp,B$:()=>Th,at:()=>Rf,oe:()=>tl,AK:()=>Uf,TF:()=>Sh,JU:()=>Ca,ST:()=>Dh,fH:()=>dc,Ix:()=>im,Wu:()=>pv,Lx:()=>__,qY:()=>zi,GL:()=>bs,QT:()=>C_,kl:()=>ym,Xk:()=>yu,PL:()=>Em,UQ:()=>mv,zN:()=>Ey,ad:()=>Of,nP:()=>Cm,b9:()=>fv,vh:()=>ng,Pb:()=>p_,L$:()=>sm,cf:()=>vv,sc:()=>Ay,Xo:()=>gm,IO:()=>tg,iE:()=>Qp,Eo:()=>Fl,i3:()=>x_,Bt:()=>ag,pl:()=>_v,Ub:()=>bt,qK:()=>hc,TQ:()=>Lf,e0:()=>Fh,r7:()=>Am,Mx:()=>f_,ar:()=>kh});var ae,ve,f=k(5861),s=k(534),B=k(4537),Se=k(7879),_e=k(9058),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},de={};(function(){var c;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(pt,Qe,ot){ot||(ot=0);var mt=Array(16);if("string"==typeof Qe)for(var At=0;16>At;++At)mt[At]=Qe.charCodeAt(ot++)|Qe.charCodeAt(ot++)<<8|Qe.charCodeAt(ot++)<<16|Qe.charCodeAt(ot++)<<24;else for(At=0;16>At;++At)mt[At]=Qe[ot++]|Qe[ot++]<<8|Qe[ot++]<<16|Qe[ot++]<<24;var Rt=pt.g[3],it=(Qe=pt.g[0])+(Rt^(ot=pt.g[1])&((At=pt.g[2])^Rt))+mt[0]+3614090360&4294967295;it=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=(ot=(At=(Rt=(Qe=ot+(it<<7&4294967295|it>>>25))+((it=Rt+(At^Qe&(ot^At))+mt[1]+3905402710&4294967295)<<12&4294967295|it>>>20))+((it=At+(ot^Rt&(Qe^ot))+mt[2]+606105819&4294967295)<<17&4294967295|it>>>15))+((it=ot+(Qe^At&(Rt^Qe))+mt[3]+3250441966&4294967295)<<22&4294967295|it>>>10))+((it=Qe+(Rt^ot&(At^Rt))+mt[4]+4118548399&4294967295)<<7&4294967295|it>>>25))+((it=Rt+(At^Qe&(ot^At))+mt[5]+1200080426&4294967295)<<12&4294967295|it>>>20))+((it=At+(ot^Rt&(Qe^ot))+mt[6]+2821735955&4294967295)<<17&4294967295|it>>>15))+((it=ot+(Qe^At&(Rt^Qe))+mt[7]+4249261313&4294967295)<<22&4294967295|it>>>10))+((it=Qe+(Rt^ot&(At^Rt))+mt[8]+1770035416&4294967295)<<7&4294967295|it>>>25))+((it=Rt+(At^Qe&(ot^At))+mt[9]+2336552879&4294967295)<<12&4294967295|it>>>20))+((it=At+(ot^Rt&(Qe^ot))+mt[10]+4294925233&4294967295)<<17&4294967295|it>>>15))+((it=ot+(Qe^At&(Rt^Qe))+mt[11]+2304563134&4294967295)<<22&4294967295|it>>>10))+((it=Qe+(Rt^ot&(At^Rt))+mt[12]+1804603682&4294967295)<<7&4294967295|it>>>25))+((it=Rt+(At^Qe&(ot^At))+mt[13]+4254626195&4294967295)<<12&4294967295|it>>>20))+((it=At+(ot^Rt&(Qe^ot))+mt[14]+2792965006&4294967295)<<17&4294967295|it>>>15))+((it=ot+(Qe^At&(Rt^Qe))+mt[15]+1236535329&4294967295)<<22&4294967295|it>>>10))+((it=Qe+(At^Rt&(ot^At))+mt[1]+4129170786&4294967295)<<5&4294967295|it>>>27))+((it=Rt+(ot^At&(Qe^ot))+mt[6]+3225465664&4294967295)<<9&4294967295|it>>>23))+((it=At+(Qe^ot&(Rt^Qe))+mt[11]+643717713&4294967295)<<14&4294967295|it>>>18))+((it=ot+(Rt^Qe&(At^Rt))+mt[0]+3921069994&4294967295)<<20&4294967295|it>>>12))+((it=Qe+(At^Rt&(ot^At))+mt[5]+3593408605&4294967295)<<5&4294967295|it>>>27))+((it=Rt+(ot^At&(Qe^ot))+mt[10]+38016083&4294967295)<<9&4294967295|it>>>23))+((it=At+(Qe^ot&(Rt^Qe))+mt[15]+3634488961&4294967295)<<14&4294967295|it>>>18))+((it=ot+(Rt^Qe&(At^Rt))+mt[4]+3889429448&4294967295)<<20&4294967295|it>>>12))+((it=Qe+(At^Rt&(ot^At))+mt[9]+568446438&4294967295)<<5&4294967295|it>>>27))+((it=Rt+(ot^At&(Qe^ot))+mt[14]+3275163606&4294967295)<<9&4294967295|it>>>23))+((it=At+(Qe^ot&(Rt^Qe))+mt[3]+4107603335&4294967295)<<14&4294967295|it>>>18))+((it=ot+(Rt^Qe&(At^Rt))+mt[8]+1163531501&4294967295)<<20&4294967295|it>>>12))+((it=Qe+(At^Rt&(ot^At))+mt[13]+2850285829&4294967295)<<5&4294967295|it>>>27))+((it=Rt+(ot^At&(Qe^ot))+mt[2]+4243563512&4294967295)<<9&4294967295|it>>>23))+((it=At+(Qe^ot&(Rt^Qe))+mt[7]+1735328473&4294967295)<<14&4294967295|it>>>18))+((it=ot+(Rt^Qe&(At^Rt))+mt[12]+2368359562&4294967295)<<20&4294967295|it>>>12))+((it=Qe+(ot^At^Rt)+mt[5]+4294588738&4294967295)<<4&4294967295|it>>>28))+((it=Rt+(Qe^ot^At)+mt[8]+2272392833&4294967295)<<11&4294967295|it>>>21))+((it=At+(Rt^Qe^ot)+mt[11]+1839030562&4294967295)<<16&4294967295|it>>>16))+((it=ot+(At^Rt^Qe)+mt[14]+4259657740&4294967295)<<23&4294967295|it>>>9))+((it=Qe+(ot^At^Rt)+mt[1]+2763975236&4294967295)<<4&4294967295|it>>>28))+((it=Rt+(Qe^ot^At)+mt[4]+1272893353&4294967295)<<11&4294967295|it>>>21))+((it=At+(Rt^Qe^ot)+mt[7]+4139469664&4294967295)<<16&4294967295|it>>>16))+((it=ot+(At^Rt^Qe)+mt[10]+3200236656&4294967295)<<23&4294967295|it>>>9))+((it=Qe+(ot^At^Rt)+mt[13]+681279174&4294967295)<<4&4294967295|it>>>28))+((it=Rt+(Qe^ot^At)+mt[0]+3936430074&4294967295)<<11&4294967295|it>>>21))+((it=At+(Rt^Qe^ot)+mt[3]+3572445317&4294967295)<<16&4294967295|it>>>16))+((it=ot+(At^Rt^Qe)+mt[6]+76029189&4294967295)<<23&4294967295|it>>>9))+((it=Qe+(ot^At^Rt)+mt[9]+3654602809&4294967295)<<4&4294967295|it>>>28))+((it=Rt+(Qe^ot^At)+mt[12]+3873151461&4294967295)<<11&4294967295|it>>>21))+((it=At+(Rt^Qe^ot)+mt[15]+530742520&4294967295)<<16&4294967295|it>>>16))+((it=ot+(At^Rt^Qe)+mt[2]+3299628645&4294967295)<<23&4294967295|it>>>9))+((it=Qe+(At^(ot|~Rt))+mt[0]+4096336452&4294967295)<<6&4294967295|it>>>26))+((it=Rt+(ot^(Qe|~At))+mt[7]+1126891415&4294967295)<<10&4294967295|it>>>22))+((it=At+(Qe^(Rt|~ot))+mt[14]+2878612391&4294967295)<<15&4294967295|it>>>17))+((it=ot+(Rt^(At|~Qe))+mt[5]+4237533241&4294967295)<<21&4294967295|it>>>11))+((it=Qe+(At^(ot|~Rt))+mt[12]+1700485571&4294967295)<<6&4294967295|it>>>26))+((it=Rt+(ot^(Qe|~At))+mt[3]+2399980690&4294967295)<<10&4294967295|it>>>22))+((it=At+(Qe^(Rt|~ot))+mt[10]+4293915773&4294967295)<<15&4294967295|it>>>17))+((it=ot+(Rt^(At|~Qe))+mt[1]+2240044497&4294967295)<<21&4294967295|it>>>11))+((it=Qe+(At^(ot|~Rt))+mt[8]+1873313359&4294967295)<<6&4294967295|it>>>26))+((it=Rt+(ot^(Qe|~At))+mt[15]+4264355552&4294967295)<<10&4294967295|it>>>22))+((it=At+(Qe^(Rt|~ot))+mt[6]+2734768916&4294967295)<<15&4294967295|it>>>17))+((it=ot+(Rt^(At|~Qe))+mt[13]+1309151649&4294967295)<<21&4294967295|it>>>11))+((Rt=(Qe=ot+((it=Qe+(At^(ot|~Rt))+mt[4]+4149444226&4294967295)<<6&4294967295|it>>>26))+((it=Rt+(ot^(Qe|~At))+mt[11]+3174756917&4294967295)<<10&4294967295|it>>>22))^((At=Rt+((it=At+(Qe^(Rt|~ot))+mt[2]+718787259&4294967295)<<15&4294967295|it>>>17))|~Qe))+mt[9]+3951481745&4294967295,pt.g[0]=pt.g[0]+Qe&4294967295,pt.g[1]=pt.g[1]+(At+(it<<21&4294967295|it>>>11))&4294967295,pt.g[2]=pt.g[2]+At&4294967295,pt.g[3]=pt.g[3]+Rt&4294967295}function I(pt,Qe){this.h=Qe;for(var ot=[],mt=!0,At=pt.length-1;0<=At;At--){var Rt=0|pt[At];mt&&Rt==Qe||(ot[At]=Rt,mt=!1)}this.g=ot}(function e(pt,Qe){function ot(){}ot.prototype=Qe.prototype,pt.D=Qe.prototype,pt.prototype=new ot,pt.prototype.constructor=pt,pt.C=function(mt,At,Rt){for(var it=Array(arguments.length-2),jl=2;jl<arguments.length;jl++)it[jl-2]=arguments[jl];return Qe.prototype[At].apply(mt,it)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(pt,Qe){void 0===Qe&&(Qe=pt.length);for(var ot=Qe-this.blockSize,mt=this.B,At=this.h,Rt=0;Rt<Qe;){if(0==At)for(;Rt<=ot;)u(this,pt,Rt),Rt+=this.blockSize;if("string"==typeof pt){for(;Rt<Qe;)if(mt[At++]=pt.charCodeAt(Rt++),At==this.blockSize){u(this,mt),At=0;break}}else for(;Rt<Qe;)if(mt[At++]=pt[Rt++],At==this.blockSize){u(this,mt),At=0;break}}this.h=At,this.o+=Qe},o.prototype.v=function(){var pt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);pt[0]=128;for(var Qe=1;Qe<pt.length-8;++Qe)pt[Qe]=0;var ot=8*this.o;for(Qe=pt.length-8;Qe<pt.length;++Qe)pt[Qe]=255&ot,ot/=256;for(this.u(pt),pt=Array(16),Qe=ot=0;4>Qe;++Qe)for(var mt=0;32>mt;mt+=8)pt[ot++]=this.g[Qe]>>>mt&255;return pt};var P={};function L(pt){return-128<=pt&&128>pt?function m(pt,Qe){var ot=P;return Object.prototype.hasOwnProperty.call(ot,pt)?ot[pt]:ot[pt]=Qe(pt)}(pt,function(Qe){return new I([0|Qe],0>Qe?-1:0)}):new I([0|pt],0>pt?-1:0)}function J(pt){if(isNaN(pt)||!isFinite(pt))return Me;if(0>pt)return nn(J(-pt));for(var Qe=[],ot=1,mt=0;pt>=ot;mt++)Qe[mt]=pt/ot|0,ot*=4294967296;return new I(Qe,0)}var Me=L(0),et=L(1),Ct=L(16777216);function Wt(pt){if(0!=pt.h)return!1;for(var Qe=0;Qe<pt.g.length;Qe++)if(0!=pt.g[Qe])return!1;return!0}function hn(pt){return-1==pt.h}function nn(pt){for(var Qe=pt.g.length,ot=[],mt=0;mt<Qe;mt++)ot[mt]=~pt.g[mt];return new I(ot,~pt.h).add(et)}function Zn(pt,Qe){return pt.add(nn(Qe))}function or(pt,Qe){for(;(65535&pt[Qe])!=pt[Qe];)pt[Qe+1]+=pt[Qe]>>>16,pt[Qe]&=65535,Qe++}function Kn(pt,Qe){this.g=pt,this.h=Qe}function Sr(pt,Qe){if(Wt(Qe))throw Error("division by zero");if(Wt(pt))return new Kn(Me,Me);if(hn(pt))return Qe=Sr(nn(pt),Qe),new Kn(nn(Qe.g),nn(Qe.h));if(hn(Qe))return Qe=Sr(pt,nn(Qe)),new Kn(nn(Qe.g),Qe.h);if(30<pt.g.length){if(hn(pt)||hn(Qe))throw Error("slowDivide_ only works with positive integers.");for(var ot=et,mt=Qe;0>=mt.l(pt);)ot=wi(ot),mt=wi(mt);var At=qr(ot,1),Rt=qr(mt,1);for(mt=qr(mt,2),ot=qr(ot,2);!Wt(mt);){var it=Rt.add(mt);0>=it.l(pt)&&(At=At.add(ot),Rt=it),mt=qr(mt,1),ot=qr(ot,1)}return Qe=Zn(pt,At.j(Qe)),new Kn(At,Qe)}for(At=Me;0<=pt.l(Qe);){for(ot=Math.max(1,Math.floor(pt.m()/Qe.m())),mt=48>=(mt=Math.ceil(Math.log(ot)/Math.LN2))?1:Math.pow(2,mt-48),it=(Rt=J(ot)).j(Qe);hn(it)||0<it.l(pt);)it=(Rt=J(ot-=mt)).j(Qe);Wt(Rt)&&(Rt=et),At=At.add(Rt),pt=Zn(pt,it)}return new Kn(At,pt)}function wi(pt){for(var Qe=pt.g.length+1,ot=[],mt=0;mt<Qe;mt++)ot[mt]=pt.i(mt)<<1|pt.i(mt-1)>>>31;return new I(ot,pt.h)}function qr(pt,Qe){var ot=Qe>>5;Qe%=32;for(var mt=pt.g.length-ot,At=[],Rt=0;Rt<mt;Rt++)At[Rt]=0<Qe?pt.i(Rt+ot)>>>Qe|pt.i(Rt+ot+1)<<32-Qe:pt.i(Rt+ot);return new I(At,pt.h)}(c=I.prototype).m=function(){if(hn(this))return-nn(this).m();for(var pt=0,Qe=1,ot=0;ot<this.g.length;ot++){var mt=this.i(ot);pt+=(0<=mt?mt:4294967296+mt)*Qe,Qe*=4294967296}return pt},c.toString=function(pt){if(2>(pt=pt||10)||36<pt)throw Error("radix out of range: "+pt);if(Wt(this))return"0";if(hn(this))return"-"+nn(this).toString(pt);for(var Qe=J(Math.pow(pt,6)),ot=this,mt="";;){var At=Sr(ot,Qe).g,Rt=((0<(ot=Zn(ot,At.j(Qe))).g.length?ot.g[0]:ot.h)>>>0).toString(pt);if(Wt(ot=At))return Rt+mt;for(;6>Rt.length;)Rt="0"+Rt;mt=Rt+mt}},c.i=function(pt){return 0>pt?0:pt<this.g.length?this.g[pt]:this.h},c.l=function(pt){return hn(pt=Zn(this,pt))?-1:Wt(pt)?0:1},c.abs=function(){return hn(this)?nn(this):this},c.add=function(pt){for(var Qe=Math.max(this.g.length,pt.g.length),ot=[],mt=0,At=0;At<=Qe;At++){var Rt=mt+(65535&this.i(At))+(65535&pt.i(At)),it=(Rt>>>16)+(this.i(At)>>>16)+(pt.i(At)>>>16);mt=it>>>16,ot[At]=(it&=65535)<<16|(Rt&=65535)}return new I(ot,-2147483648&ot[ot.length-1]?-1:0)},c.j=function(pt){if(Wt(this)||Wt(pt))return Me;if(hn(this))return hn(pt)?nn(this).j(nn(pt)):nn(nn(this).j(pt));if(hn(pt))return nn(this.j(nn(pt)));if(0>this.l(Ct)&&0>pt.l(Ct))return J(this.m()*pt.m());for(var Qe=this.g.length+pt.g.length,ot=[],mt=0;mt<2*Qe;mt++)ot[mt]=0;for(mt=0;mt<this.g.length;mt++)for(var At=0;At<pt.g.length;At++){var Rt=this.i(mt)>>>16,it=65535&this.i(mt),jl=pt.i(At)>>>16,Bh=65535&pt.i(At);ot[2*mt+2*At]+=it*Bh,or(ot,2*mt+2*At),ot[2*mt+2*At+1]+=Rt*Bh,or(ot,2*mt+2*At+1),ot[2*mt+2*At+1]+=it*jl,or(ot,2*mt+2*At+1),ot[2*mt+2*At+2]+=Rt*jl,or(ot,2*mt+2*At+2)}for(mt=0;mt<Qe;mt++)ot[mt]=ot[2*mt+1]<<16|ot[2*mt];for(mt=Qe;mt<2*Qe;mt++)ot[mt]=0;return new I(ot,0)},c.A=function(pt){return Sr(this,pt).h},c.and=function(pt){for(var Qe=Math.max(this.g.length,pt.g.length),ot=[],mt=0;mt<Qe;mt++)ot[mt]=this.i(mt)&pt.i(mt);return new I(ot,this.h&pt.h)},c.or=function(pt){for(var Qe=Math.max(this.g.length,pt.g.length),ot=[],mt=0;mt<Qe;mt++)ot[mt]=this.i(mt)|pt.i(mt);return new I(ot,this.h|pt.h)},c.xor=function(pt){for(var Qe=Math.max(this.g.length,pt.g.length),ot=[],mt=0;mt<Qe;mt++)ot[mt]=this.i(mt)^pt.i(mt);return new I(ot,this.h^pt.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,ve=de.Md5=o,I.prototype.add=I.prototype.add,I.prototype.multiply=I.prototype.j,I.prototype.modulo=I.prototype.A,I.prototype.compare=I.prototype.l,I.prototype.toNumber=I.prototype.m,I.prototype.toString=I.prototype.toString,I.prototype.getBits=I.prototype.i,I.fromNumber=J,I.fromString=function he(pt,Qe){if(0==pt.length)throw Error("number format error: empty string");if(2>(Qe=Qe||10)||36<Qe)throw Error("radix out of range: "+Qe);if("-"==pt.charAt(0))return nn(he(pt.substring(1),Qe));if(0<=pt.indexOf("-"))throw Error('number format error: interior "-" character');for(var ot=J(Math.pow(Qe,8)),mt=Me,At=0;At<pt.length;At+=8){var Rt=Math.min(8,pt.length-At),it=parseInt(pt.substring(At,At+Rt),Qe);8>Rt?(Rt=J(Math.pow(Qe,Rt)),mt=mt.j(Rt).add(J(it))):mt=(mt=mt.j(ot)).add(J(it))}return mt},ae=de.Integer=I}).apply(typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{});var oe,be,ye,De,Re,Ye,We,_t,Fe,$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z={};(function(){var c,e="function"==typeof Object.defineProperties?Object.defineProperty:function(y,V,ee){return y==Array.prototype||y==Object.prototype||(y[V]=ee.value),y},o=function r(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $&&$];for(var V=0;V<y.length;++V){var ee=y[V];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}(this);!function u(y,V){if(V)e:{var ee=o;y=y.split(".");for(var Ce=0;Ce<y.length-1;Ce++){var It=y[Ce];if(!(It in ee))break e;ee=ee[It]}(V=V(Ce=ee[y=y[y.length-1]]))!=Ce&&null!=V&&e(ee,y,{configurable:!0,writable:!0,value:V})}}("Array.prototype.values",function(y){return y||function(){return function m(y,V){y instanceof String&&(y+="");var ee=0,Ce=!1,It={next:function(){if(!Ce&&ee<y.length){var Ut=ee++;return{value:V(Ut,y[Ut]),done:!1}}return Ce=!0,{done:!0,value:void 0}}};return It[Symbol.iterator]=function(){return It},It}(this,function(V,ee){return ee})}});var I=I||{},P=this||self;function L(y){var V=typeof y;return"array"==(V="object"!=V?V:y?Array.isArray(y)?"array":V:"null")||"object"==V&&"number"==typeof y.length}function J(y){var V=typeof y;return"object"==V&&null!=y||"function"==V}function he(y,V,ee){return y.call.apply(y.bind,arguments)}function Me(y,V,ee){if(!y)throw Error();if(2<arguments.length){var Ce=Array.prototype.slice.call(arguments,2);return function(){var It=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(It,Ce),y.apply(V,It)}}return function(){return y.apply(V,arguments)}}function et(y,V,ee){return(et=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?he:Me).apply(null,arguments)}function Ct(y,V){var ee=Array.prototype.slice.call(arguments,1);return function(){var Ce=ee.slice();return Ce.push.apply(Ce,arguments),y.apply(this,Ce)}}function Wt(y,V){function ee(){}ee.prototype=V.prototype,y.aa=V.prototype,y.prototype=new ee,y.prototype.constructor=y,y.Qb=function(Ce,It,Ut){for(var wn=Array(arguments.length-2),qi=2;qi<arguments.length;qi++)wn[qi-2]=arguments[qi];return V.prototype[It].apply(Ce,wn)}}function hn(y){const V=y.length;if(0<V){const ee=Array(V);for(let Ce=0;Ce<V;Ce++)ee[Ce]=y[Ce];return ee}return[]}function nn(y,V){for(let ee=1;ee<arguments.length;ee++){const Ce=arguments[ee];if(L(Ce)){const It=y.length||0,Ut=Ce.length||0;y.length=It+Ut;for(let wn=0;wn<Ut;wn++)y[It+wn]=Ce[wn]}else y.push(Ce)}}function or(y){return/^[\s\xa0]*$/.test(y)}function Kn(){var y=P.navigator;return y&&(y=y.userAgent)?y:""}function Sr(y){return Sr[" "](y),y}Sr[" "]=function(){};var wi=!(-1==Kn().indexOf("Gecko")||-1!=Kn().toLowerCase().indexOf("webkit")&&-1==Kn().indexOf("Edge")||-1!=Kn().indexOf("Trident")||-1!=Kn().indexOf("MSIE")||-1!=Kn().indexOf("Edge"));function qr(y,V,ee){for(const Ce in y)V.call(ee,y[Ce],Ce,y)}function Qe(y){const V={};for(const ee in y)V[ee]=y[ee];return V}const ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(y,V){let ee,Ce;for(let It=1;It<arguments.length;It++){for(ee in Ce=arguments[It],Ce)y[ee]=Ce[ee];for(let Ut=0;Ut<ot.length;Ut++)ee=ot[Ut],Object.prototype.hasOwnProperty.call(Ce,ee)&&(y[ee]=Ce[ee])}}function At(y){var V=1;y=y.split(":");const ee=[];for(;0<V&&y.length;)ee.push(y.shift()),V--;return y.length&&ee.push(y.join(":")),ee}function Rt(y){P.setTimeout(()=>{throw y},0)}function it(){var y=N_;let V=null;return y.g&&(V=y.g,y.g=y.g.next,y.g||(y.h=null),V.next=null),V}var Bh=new class Zn{constructor(V,ee){this.i=V,this.j=ee,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}(()=>new Ta,y=>y.reset());class Ta{constructor(){this.next=this.g=this.h=null}set(V,ee){this.h=V,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let Hf,zf=!1,N_=new class jl{constructor(){this.h=this.g=null}add(V,ee){const Ce=Bh.get();Ce.set(V,ee),this.h?this.h.next=Ce:this.g=Ce,this.h=Ce}},cg=()=>{const y=P.Promise.resolve(void 0);Hf=()=>{y.then(k_)}};var k_=()=>{for(var y;y=it();){try{y.h.call(y.g)}catch(ee){Rt(ee)}var V=Bh;V.j(y),100>V.h&&(V.h++,y.next=V.g,V.g=y)}zf=!1};function Eu(){this.s=this.s,this.C=this.C}function yo(y,V){this.type=y,this.g=this.target=V,this.defaultPrevented=!1}Eu.prototype.s=!1,Eu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Eu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},yo.prototype.h=function(){this.defaultPrevented=!0};var Rv=function(){if(!P.addEventListener||!Object.defineProperty)return!1;var y=!1,V=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const ee=()=>{};P.addEventListener("test",ee,V),P.removeEventListener("test",ee,V)}catch{}return y}();function jh(y,V){if(yo.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var ee=this.type=y.type,Ce=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=V,V=y.relatedTarget){if(wi){e:{try{Sr(V.nodeName);var It=!0;break e}catch{}It=!1}It||(V=null)}}else"mouseover"==ee?V=y.fromElement:"mouseout"==ee&&(V=y.toElement);this.relatedTarget=V,Ce?(this.clientX=void 0!==Ce.clientX?Ce.clientX:Ce.pageX,this.clientY=void 0!==Ce.clientY?Ce.clientY:Ce.pageY,this.screenX=Ce.screenX||0,this.screenY=Ce.screenY||0):(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType="string"==typeof y.pointerType?y.pointerType:Ov[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&jh.aa.h.call(this)}}Wt(jh,yo);var Ov={2:"touch",3:"pen",4:"mouse"};jh.prototype.h=function(){jh.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var $f="closure_listenable_"+(1e6*Math.random()|0),Tm=0;function Nv(y,V,ee,Ce,It){this.listener=y,this.proxy=null,this.src=V,this.type=ee,this.capture=!!Ce,this.ha=It,this.key=++Tm,this.da=this.fa=!1}function lg(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ug(y){this.src=y,this.g={},this.h=0}function wm(y,V){var ee=V.type;if(ee in y.g){var Ut,Ce=y.g[ee],It=Array.prototype.indexOf.call(Ce,V,void 0);(Ut=0<=It)&&Array.prototype.splice.call(Ce,It,1),Ut&&(lg(V),0==y.g[ee].length&&(delete y.g[ee],y.h--))}}function Dm(y,V,ee,Ce){for(var It=0;It<y.length;++It){var Ut=y[It];if(!Ut.da&&Ut.listener==V&&Ut.capture==!!ee&&Ut.ha==Ce)return It}return-1}ug.prototype.add=function(y,V,ee,Ce,It){var Ut=y.toString();(y=this.g[Ut])||(y=this.g[Ut]=[],this.h++);var wn=Dm(y,V,Ce,It);return-1<wn?(V=y[wn],ee||(V.fa=!1)):((V=new Nv(V,this.src,Ut,!!Ce,It)).fa=ee,y.push(V)),V};var Ga="closure_lm_"+(1e6*Math.random()|0),Zf={};function F_(y,V,ee,Ce,It){if(Ce&&Ce.once)return Mm(y,V,ee,Ce,It);if(Array.isArray(V)){for(var Ut=0;Ut<V.length;Ut++)F_(y,V[Ut],ee,Ce,It);return null}return ee=pg(ee),y&&y[$f]?y.K(V,ee,J(Ce)?!!Ce.capture:!!Ce,It):Sm(y,V,ee,!1,Ce,It)}function Sm(y,V,ee,Ce,It,Ut){if(!V)throw Error("Invalid event type");var wn=J(It)?!!It.capture:!!It,qi=hg(y);if(qi||(y[Ga]=qi=new ug(y)),(ee=qi.add(V,ee,Ce,wn,Ut)).proxy)return ee;if(Ce=function kv(){const V=wy;return function y(ee){return V.call(y.src,y.listener,ee)}}(),ee.proxy=Ce,Ce.src=y,Ce.listener=ee,y.addEventListener)Rv||(It=wn),void 0===It&&(It=!1),y.addEventListener(V.toString(),Ce,It);else if(y.attachEvent)y.attachEvent(dg(V.toString()),Ce);else{if(!y.addListener||!y.removeListener)throw Error("addEventListener and attachEvent are unavailable.");y.addListener(Ce)}return ee}function Mm(y,V,ee,Ce,It){if(Array.isArray(V)){for(var Ut=0;Ut<V.length;Ut++)Mm(y,V[Ut],ee,Ce,It);return null}return ee=pg(ee),y&&y[$f]?y.L(V,ee,J(Ce)?!!Ce.capture:!!Ce,It):Sm(y,V,ee,!0,Ce,It)}function Pm(y,V,ee,Ce,It){if(Array.isArray(V))for(var Ut=0;Ut<V.length;Ut++)Pm(y,V[Ut],ee,Ce,It);else Ce=J(Ce)?!!Ce.capture:!!Ce,ee=pg(ee),y&&y[$f]?(y=y.i,(V=String(V).toString())in y.g&&-1<(ee=Dm(Ut=y.g[V],ee,Ce,It))&&(lg(Ut[ee]),Array.prototype.splice.call(Ut,ee,1),0==Ut.length&&(delete y.g[V],y.h--))):y&&(y=hg(y))&&(V=y.g[V.toString()],y=-1,V&&(y=Dm(V,ee,Ce,It)),(ee=-1<y?V[y]:null)&&Hh(ee))}function Hh(y){if("number"!=typeof y&&y&&!y.da){var V=y.src;if(V&&V[$f])wm(V.i,y);else{var ee=y.type,Ce=y.proxy;V.removeEventListener?V.removeEventListener(ee,Ce,y.capture):V.detachEvent?V.detachEvent(dg(ee),Ce):V.addListener&&V.removeListener&&V.removeListener(Ce),(ee=hg(V))?(wm(ee,y),0==ee.h&&(ee.src=null,V[Ga]=null)):lg(y)}}}function dg(y){return y in Zf?Zf[y]:Zf[y]="on"+y}function wy(y,V){if(y.da)y=!0;else{V=new jh(V,this);var ee=y.listener,Ce=y.ha||y.src;y.fa&&Hh(y),y=ee.call(Ce,V)}return y}function hg(y){return(y=y[Ga])instanceof ug?y:null}var fg="__closure_events_fn_"+(1e9*Math.random()>>>0);function pg(y){return"function"==typeof y?y:(y[fg]||(y[fg]=function(V){return y.handleEvent(V)}),y[fg])}function co(){Eu.call(this),this.i=new ug(this),this.M=this,this.F=null}function lo(y,V){var ee,Ce=y.F;if(Ce)for(ee=[];Ce;Ce=Ce.F)ee.push(Ce);if(y=y.M,Ce=V.type||V,"string"==typeof V)V=new yo(V,y);else if(V instanceof yo)V.target=V.target||y;else{var It=V;mt(V=new yo(Ce,y),It)}if(It=!0,ee)for(var Ut=ee.length-1;0<=Ut;Ut--){var wn=V.g=ee[Ut];It=qa(wn,Ce,!0,V)&&It}if(It=qa(wn=V.g=y,Ce,!0,V)&&It,It=qa(wn,Ce,!1,V)&&It,ee)for(Ut=0;Ut<ee.length;Ut++)It=qa(wn=V.g=ee[Ut],Ce,!1,V)&&It}function qa(y,V,ee,Ce){if(!(V=y.i.g[String(V)]))return!0;V=V.concat();for(var It=!0,Ut=0;Ut<V.length;++Ut){var wn=V[Ut];if(wn&&!wn.da&&wn.capture==ee){var qi=wn.listener,Xs=wn.ha||wn.src;wn.fa&&wm(y.i,wn),It=!1!==qi.call(Xs,Ce)&&It}}return It&&!Ce.defaultPrevented}function xm(y,V,ee){if("function"==typeof y)ee&&(y=et(y,ee));else{if(!y||"function"!=typeof y.handleEvent)throw Error("Invalid listener argument");y=et(y.handleEvent,y)}return 2147483647<Number(V)?-1:P.setTimeout(y,V||0)}function Rm(y){y.g=xm(()=>{y.g=null,y.i&&(y.i=!1,Rm(y))},y.l);const V=y.h;y.h=null,y.m.apply(null,V)}Wt(co,Eu),co.prototype[$f]=!0,co.prototype.removeEventListener=function(y,V,ee,Ce){Pm(this,y,V,ee,Ce)},co.prototype.N=function(){if(co.aa.N.call(this),this.i){var V,y=this.i;for(V in y.g){for(var ee=y.g[V],Ce=0;Ce<ee.length;Ce++)lg(ee[Ce]);delete y.g[V],y.h--}}this.F=null},co.prototype.K=function(y,V,ee,Ce){return this.i.add(String(y),V,!1,ee,Ce)},co.prototype.L=function(y,V,ee,Ce){return this.i.add(String(y),V,!0,ee,Ce)};class gg extends Eu{constructor(V,ee){super(),this.m=V,this.l=ee,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:Rm(this)}N(){super.N(),this.g&&(P.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zh(y){Eu.call(this),this.h=y,this.g={}}Wt(zh,Eu);var mg=[];function Gf(y){qr(y.g,function(V,ee){this.g.hasOwnProperty(ee)&&Hh(V)},y),y.g={}}zh.prototype.N=function(){zh.aa.N.call(this),Gf(this)},zh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Au=P.JSON.stringify,$h=P.JSON.parse,L_=class{stringify(y){return P.JSON.stringify(y,void 0)}parse(y){return P.JSON.parse(y,void 0)}};function Hl(){}function Om(){}Hl.prototype.h=null;var wd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qf(){yo.call(this,"d")}function _g(){yo.call(this,"c")}Wt(qf,yo),Wt(_g,yo);var Iu={},Nm=null;function Wf(){return Nm=Nm||new co}function Zh(y){yo.call(this,Iu.La,y)}function Kf(y){const V=Wf();lo(V,new Zh(V))}function km(y,V){yo.call(this,Iu.STAT_EVENT,y),this.stat=V}function Eo(y){const V=Wf();lo(V,new km(V,y))}function U_(y,V){yo.call(this,Iu.Ma,y),this.size=V}function Qf(y,V){if("function"!=typeof y)throw Error("Fn must not be null and must be a function");return P.setTimeout(function(){y()},V)}function sl(){this.g=!0}function Gh(y,V,ee,Ce){y.info(function(){return"XMLHTTP TEXT ("+V+"): "+function Uv(y,V){if(!y.g)return V;if(!V)return null;try{var ee=JSON.parse(V);if(ee)for(y=0;y<ee.length;y++)if(Array.isArray(ee[y])){var Ce=ee[y];if(!(2>Ce.length)){var It=Ce[1];if(Array.isArray(It)&&!(1>It.length)){var Ut=It[0];if("noop"!=Ut&&"stop"!=Ut&&"close"!=Ut)for(var wn=1;wn<It.length;wn++)It[wn]=""}}}return Au(ee)}catch{return V}}(y,ee)+(Ce?" "+Ce:"")})}Iu.La="serverreachability",Wt(Zh,yo),Iu.STAT_EVENT="statevent",Wt(km,yo),Iu.Ma="timingevent",Wt(U_,yo),sl.prototype.xa=function(){this.g=!1},sl.prototype.info=function(){};var Fm,vg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},B_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Dd(){}function fc(y,V,ee,Ce){this.j=y,this.i=V,this.l=ee,this.R=Ce||1,this.U=new zh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}Wt(Dd,Hl),Dd.prototype.g=function(){return new XMLHttpRequest},Dd.prototype.i=function(){return{}},Fm=new Dd;var E={},h={};function l(y,V,ee){y.L=1,y.v=mc(Hs(V)),y.m=ee,y.P=!0,_(y,null)}function _(y,V){y.F=Date.now(),ge(y),y.A=Hs(y.v);var ee=y.A,Ce=y.R;Array.isArray(Ce)||(Ce=[String(Ce)]),al(ee.i,"t",Ce),y.C=0,ee=y.j.J,y.h=new Lm,y.g=Yv(y.j,ee?V:null,!y.m),0<y.O&&(y.M=new gg(et(y.Y,y,y.g),y.O)),V=y.U,ee=y.g,Ce=y.ca;var It="readystatechange";Array.isArray(It)||(It&&(mg[0]=It.toString()),It=mg);for(var Ut=0;Ut<It.length;Ut++){var wn=F_(ee,It[Ut],Ce||V.handleEvent,!1,V.h||V);if(!wn)break;V.g[wn.key]=wn}V=y.H?Qe(y.H):{},y.m?(y.u||(y.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,V)):(y.u="GET",y.g.ea(y.A,y.u,null,V)),Kf(),function Fv(y,V,ee,Ce,It,Ut){y.info(function(){if(y.g)if(Ut)for(var wn="",qi=Ut.split("&"),Xs=0;Xs<qi.length;Xs++){var Si=qi[Xs].split("=");if(1<Si.length){var ho=Si[0];Si=Si[1];var Ao=ho.split("_");wn=2<=Ao.length&&"type"==Ao[1]?wn+(ho+"=")+Si+"&":wn+(ho+"=redacted&")}}else wn=null;else wn=Ut;return"XMLHTTP REQ ("+Ce+") [attempt "+It+"]: "+V+"\n"+ee+"\n"+wn})}(y.i,y.u,y.A,y.l,y.R,y.m)}function C(y){return!!y.g&&"GET"==y.u&&2!=y.L&&y.j.Ca}function G(y,V){var ee=y.C,Ce=V.indexOf("\n",ee);return-1==Ce?h:(ee=Number(V.substring(ee,Ce)),isNaN(ee)?E:(Ce+=1)+ee>V.length?h:(V=V.slice(Ce,Ce+ee),y.C=Ce+ee,V))}function ge(y){y.S=Date.now()+y.I,ke(y,y.I)}function ke(y,V){if(null!=y.B)throw Error("WatchDog timer not null");y.B=Qf(et(y.ba,y),V)}function gt(y){y.B&&(P.clearTimeout(y.B),y.B=null)}function Tt(y){0==y.j.G||y.J||Kv(y.j,y)}function on(y){gt(y);var V=y.M;V&&"function"==typeof V.ma&&V.ma(),y.M=null,Gf(y.U),y.g&&(V=y.g,y.g=null,V.abort(),V.ma())}function Cn(y,V){try{var ee=y.j;if(0!=ee.G&&(ee.g==y||Ri(ee.h,y)))if(!y.K&&Ri(ee.h,y)&&3==ee.G){try{var Ce=ee.Da.g.parse(V)}catch{Ce=null}if(Array.isArray(Ce)&&3==Ce.length){var It=Ce;if(0==It[0]){e:if(!ee.u){if(ee.g){if(!(ee.g.F+3e3<y.F))break e;$m(ee),z_(ee)}Hm(ee),Eo(18)}}else ee.za=It[1],0<ee.za-ee.T&&37500>It[2]&&ee.F&&0==ee.v&&!ee.C&&(ee.C=Qf(et(ee.Za,ee),6e3));if(1>=ir(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else Kh(ee,11)}else if((y.K||ee.g==y)&&$m(ee),!or(V))for(It=ee.Da.g.parse(V),V=0;V<It.length;V++){let Si=It[V];if(ee.T=Si[0],Si=Si[1],2==ee.G)if("c"==Si[0]){ee.K=Si[1],ee.ia=Si[2];const ho=Si[3];null!=ho&&(ee.la=ho,ee.j.info("VER="+ee.la));const Ao=Si[4];null!=Ao&&(ee.Aa=Ao,ee.j.info("SVER="+ee.Aa));const np=Si[5];null!=np&&"number"==typeof np&&0<np&&(ee.L=Ce=1.5*np,ee.j.info("backChannelRequestTimeoutMs_="+Ce)),Ce=ee;const vc=y.g;if(vc){const Tg=vc.g?vc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tg){var Ut=Ce.h;Ut.g||-1==Tg.indexOf("spdy")&&-1==Tg.indexOf("quic")&&-1==Tg.indexOf("h2")||(Ut.j=Ut.l,Ut.g=new Set,Ut.h&&(as(Ut,Ut.h),Ut.h=null))}if(Ce.D){const qm=vc.g?vc.g.getResponseHeader("X-HTTP-Session-Id"):null;qm&&(Ce.ya=qm,Di(Ce.I,Ce.D,qm))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-y.F,ee.j.info("Handshake RTT: "+ee.R+"ms"));var wn=y;if((Ce=ee).qa=Gm(Ce,Ce.J?Ce.ia:null,Ce.W),wn.K){cs(Ce.h,wn);var qi=wn,Xs=Ce.L;Xs&&(qi.I=Xs),qi.B&&(gt(qi),ge(qi)),Ce.g=wn}else Wv(Ce);0<ee.i.length&&jm(ee)}else"stop"!=Si[0]&&"close"!=Si[0]||Kh(ee,7);else 3==ee.G&&("stop"==Si[0]||"close"==Si[0]?"stop"==Si[0]?Kh(ee,7):Xf(ee):"noop"!=Si[0]&&ee.l&&ee.l.ta(Si),ee.v=0)}Kf()}catch{}}function yr(y){this.l=y||10,y=P.PerformanceNavigationTiming?0<(y=P.performance.getEntriesByType("navigation")).length&&("hq"==y[0].nextHopProtocol||"h2"==y[0].nextHopProtocol):!!(P.chrome&&P.chrome.loadTimes&&P.chrome.loadTimes()&&P.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rr(y){return!!y.h||!!y.g&&y.g.size>=y.j}function ir(y){return y.h?1:y.g?y.g.size:0}function Ri(y,V){return y.h?y.h==V:!!y.g&&y.g.has(V)}function as(y,V){y.g?y.g.add(V):y.h=V}function cs(y,V){y.h&&y.h==V?y.h=null:y.g&&y.g.has(V)&&y.g.delete(V)}function uo(y){if(null!=y.h)return y.i.concat(y.h.D);if(null!=y.g&&0!==y.g.size){let V=y.i;for(const ee of y.g.values())V=V.concat(ee.D);return V}return hn(y.i)}function Zi(y,V){if(y.forEach&&"function"==typeof y.forEach)y.forEach(V,void 0);else if(L(y)||"string"==typeof y)Array.prototype.forEach.call(y,V,void 0);else for(var ee=function pc(y){if(y.na&&"function"==typeof y.na)return y.na();if(!y.V||"function"!=typeof y.V){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(L(y)||"string"==typeof y){var V=[];y=y.length;for(var ee=0;ee<y;ee++)V.push(ee);return V}V=[],ee=0;for(const Ce in y)V[ee++]=Ce;return V}}}(y),Ce=function $i(y){if(y.V&&"function"==typeof y.V)return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if("string"==typeof y)return y.split("");if(L(y)){for(var V=[],ee=y.length,Ce=0;Ce<ee;Ce++)V.push(y[Ce]);return V}for(Ce in V=[],ee=0,y)V[ee++]=y[Ce];return V}(y),It=Ce.length,Ut=0;Ut<It;Ut++)V.call(void 0,Ce[Ut],ee&&ee[Ut],y)}fc.prototype.ca=function(y){y=y.target;const V=this.M;V&&3==bu(y)?V.j():this.Y(y)},fc.prototype.Y=function(y){try{if(y==this.g)e:{const Ao=bu(this.g);var V=this.g.Ba();if(this.g.Z(),!(3>Ao)&&(3!=Ao||this.g&&(this.h.h||this.g.oa()||$v(this.g)))){this.J||4!=Ao||7==V||Kf(),gt(this);var ee=this.g.Z();this.X=ee;t:if(C(this)){var Ce=$v(this.g);y="";var It=Ce.length,Ut=4==bu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){on(this),Tt(this);var wn="";break t}this.h.i=new P.TextDecoder}for(V=0;V<It;V++)this.h.h=!0,y+=this.h.i.decode(Ce[V],{stream:!(Ut&&V==It-1)});Ce.length=0,this.h.g+=y,this.C=0,wn=this.h.g}else wn=this.g.oa();if(this.o=200==ee,function Lv(y,V,ee,Ce,It,Ut,wn){y.info(function(){return"XMLHTTP RESP ("+Ce+") [ attempt "+It+"]: "+V+"\n"+ee+"\n"+Ut+" "+wn})}(this.i,this.u,this.A,this.l,this.R,Ao,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var qi,Xs=this.g;if((qi=Xs.g?Xs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!or(qi)){var Si=qi;break t}}Si=null}if(!(ee=Si)){this.o=!1,this.s=3,Eo(12),on(this),Tt(this);break e}Gh(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cn(this,ee)}if(this.P){let vc;for(ee=!0;!this.J&&this.C<wn.length;){if(vc=G(this,wn),vc==h){4==Ao&&(this.s=4,Eo(14),ee=!1),Gh(this.i,this.l,null,"[Incomplete Response]");break}if(vc==E){this.s=4,Eo(15),Gh(this.i,this.l,wn,"[Invalid Chunk]"),ee=!1;break}Gh(this.i,this.l,vc,null),Cn(this,vc)}if(C(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ao||0!=wn.length||this.h.h||(this.s=1,Eo(16),ee=!1),this.o=this.o&&ee,ee){if(0<wn.length&&!this.W){this.W=!0;var ho=this.j;ho.g==this&&ho.ba&&!ho.M&&(ho.j.info("Great, no buffering proxy detected. Bytes received: "+wn.length),zm(ho),ho.M=!0,Eo(11))}}else Gh(this.i,this.l,wn,"[Invalid Chunked Response]"),on(this),Tt(this)}else Gh(this.i,this.l,wn,null),Cn(this,wn);4==Ao&&on(this),this.o&&!this.J&&(4==Ao?Kv(this.j,this):(this.o=!1,ge(this)))}else(function Sy(y){const V={};y=(y.g&&2<=bu(y)&&y.g.getAllResponseHeaders()||"").split("\r\n");for(let Ce=0;Ce<y.length;Ce++){if(or(y[Ce]))continue;var ee=At(y[Ce]);const It=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();const Ut=V[It]||[];V[It]=Ut,Ut.push(ee)}!function pt(y,V){for(const ee in y)V.call(void 0,y[ee],ee,y)}(V,function(Ce){return Ce.join(", ")})})(this.g),400==ee&&0<wn.indexOf("Unknown SID")?(this.s=3,Eo(12)):(this.s=0,Eo(13)),on(this),Tt(this)}}}catch{}},fc.prototype.cancel=function(){this.J=!0,on(this)},fc.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(function Vv(y,V){y.info(function(){return"TIMEOUT: "+V})}(this.i,this.A),2!=this.L&&(Kf(),Eo(17)),on(this),this.s=2,Tt(this)):ke(this,this.S-y)},yr.prototype.cancel=function(){if(this.i=uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const y of this.g.values())y.cancel();this.g.clear()}};var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gi(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Gi){this.h=y.h,gc(this,y.j),this.o=y.o,this.g=y.g,sa(this,y.s),this.l=y.l;var V=y.i,ee=new Fi;ee.i=V.i,V.g&&(ee.g=new Map(V.g),ee.h=V.h),oa(this,ee),this.m=y.m}else y&&(V=String(y).match(Cs))?(this.h=!1,gc(this,V[1]||"",!0),this.o=Fn(V[2]||""),this.g=Fn(V[3]||"",!0),sa(this,V[4]),this.l=Fn(V[5]||"",!0),oa(this,V[6]||"",!0),this.m=Fn(V[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}function Hs(y){return new Gi(y)}function gc(y,V,ee){y.j=ee?Fn(V,!0):V,y.j&&(y.j=y.j.replace(/:$/,""))}function sa(y,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);y.s=V}else y.s=null}function oa(y,V,ee){V instanceof Fi?(y.i=V,function Yf(y,V){V&&!y.j&&(_c(y),y.i=null,y.g.forEach(function(ee,Ce){var It=Ce.toLowerCase();Ce!=It&&(yg(this,Ce),al(this,It,ee))},y)),y.j=V}(y.i,y.h)):(ee||(V=Qn(V,Lo)),y.i=new Fi(V,y.h))}function Di(y,V,ee){y.i.set(V,ee)}function mc(y){return Di(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Fn(y,V){return y?V?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Qn(y,V,ee){return"string"==typeof y?(y=encodeURI(y).replace(V,ur),ee&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function ur(y){return"%"+((y=y.charCodeAt(0))>>4&15).toString(16)+(15&y).toString(16)}Gi.prototype.toString=function(){var y=[],V=this.j;V&&y.push(Qn(V,Wr,!0),":");var ee=this.g;return(ee||"file"==V)&&(y.push("//"),(V=this.o)&&y.push(Qn(V,Wr,!0),"@"),y.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.s)&&y.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&y.push("/"),y.push(Qn(ee,"/"==ee.charAt(0)?Wa:zs,!0))),(ee=this.i.toString())&&y.push("?",ee),(ee=this.m)&&y.push("#",Qn(ee,ol)),y.join("")};var y,Wr=/[#\/\?@]/g,zs=/[#\?:]/g,Wa=/[#\?]/g,Lo=/[#\?@]/g,ol=/#/g;function Fi(y,V){this.h=this.g=null,this.i=y||null,this.j=!!V}function _c(y){y.g||(y.g=new Map,y.h=0,y.i&&function wa(y,V){if(y){y=y.split("&");for(var ee=0;ee<y.length;ee++){var Ce=y[ee].indexOf("="),It=null;if(0<=Ce){var Ut=y[ee].substring(0,Ce);It=y[ee].substring(Ce+1)}else Ut=y[ee];V(Ut,It?decodeURIComponent(It.replace(/\+/g," ")):"")}}}(y.i,function(V,ee){y.add(decodeURIComponent(V.replace(/\+/g," ")),ee)}))}function yg(y,V){_c(y),V=$s(y,V),y.g.has(V)&&(y.i=null,y.h-=y.g.get(V).length,y.g.delete(V))}function Qs(y,V){return _c(y),V=$s(y,V),y.g.has(V)}function al(y,V,ee){yg(y,V),0<ee.length&&(y.i=null,y.g.set($s(y,V),hn(ee)),y.h+=ee.length)}function $s(y,V){return V=String(V),y.j&&(V=V.toLowerCase()),V}function Sd(y,V,ee,Ce,It){try{It&&(It.onload=null,It.onerror=null,It.onabort=null,It.ontimeout=null),Ce(ee)}catch{}}function Dy(){this.g=new L_}function T0(y,V,ee){const Ce=ee||"";try{Zi(y,function(It,Ut){let wn=It;J(It)&&(wn=Au(It)),V.push(Ce+Ut+"="+encodeURIComponent(wn))})}catch(It){throw V.push(Ce+"type="+encodeURIComponent("_badmap")),It}}function Eg(y){this.l=y.Ub||null,this.j=y.eb||!1}function j_(y,V){co.call(this),this.D=y,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bv(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}function Ag(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Ig(y)}function Ig(y){y.onreadystatechange&&y.onreadystatechange.call(y)}function Um(y){let V="";return qr(y,function(ee,Ce){V+=Ce,V+=":",V+=ee,V+="\r\n"}),V}function qh(y,V,ee){e:{for(Ce in ee){var Ce=!1;break e}Ce=!0}Ce||(ee=Um(ee),"string"==typeof y?null!=ee&&encodeURIComponent(String(ee)):Di(y,V,ee))}function Ts(y){co.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(c=Fi.prototype).add=function(y,V){_c(this),this.i=null,y=$s(this,y);var ee=this.g.get(y);return ee||this.g.set(y,ee=[]),ee.push(V),this.h+=1,this},c.forEach=function(y,V){_c(this),this.g.forEach(function(ee,Ce){ee.forEach(function(It){y.call(V,It,Ce,this)},this)},this)},c.na=function(){_c(this);const y=Array.from(this.g.values()),V=Array.from(this.g.keys()),ee=[];for(let Ce=0;Ce<V.length;Ce++){const It=y[Ce];for(let Ut=0;Ut<It.length;Ut++)ee.push(V[Ce])}return ee},c.V=function(y){_c(this);let V=[];if("string"==typeof y)Qs(this,y)&&(V=V.concat(this.g.get($s(this,y))));else{y=Array.from(this.g.values());for(let ee=0;ee<y.length;ee++)V=V.concat(y[ee])}return V},c.set=function(y,V){return _c(this),this.i=null,Qs(this,y=$s(this,y))&&(this.h-=this.g.get(y).length),this.g.set(y,[V]),this.h+=1,this},c.get=function(y,V){return y&&0<(y=this.V(y)).length?String(y[0]):V},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],V=Array.from(this.g.keys());for(var ee=0;ee<V.length;ee++){var Ce=V[ee];const Ut=encodeURIComponent(String(Ce)),wn=this.V(Ce);for(Ce=0;Ce<wn.length;Ce++){var It=Ut;""!==wn[Ce]&&(It+="="+encodeURIComponent(String(wn[Ce]))),y.push(It)}}return this.i=y.join("&")},Wt(Eg,Hl),Eg.prototype.g=function(){return new j_(this.l,this.j)},Eg.prototype.i=(y={},function(){return y}),Wt(j_,co),(c=j_.prototype).open=function(y,V){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=V,this.readyState=1,Ig(this)},c.send=function(y){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(V.body=y),(this.D||P).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},c.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ag(this)),this.readyState=0},c.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ig(this)),this.g&&(this.readyState=3,Ig(this),this.g)))if("arraybuffer"===this.responseType)y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof P.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bv(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))},c.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var V=y.value?y.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!y.done}))&&(this.response=this.responseText+=V)}y.done?Ag(this):Ig(this),3==this.readyState&&Bv(this)}},c.Ra=function(y){this.g&&(this.response=this.responseText=y,Ag(this))},c.Qa=function(y){this.g&&(this.response=y,Ag(this))},c.ga=function(){this.g&&Ag(this)},c.setRequestHeader=function(y,V){this.u.append(y,V)},c.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],V=this.h.entries();for(var ee=V.next();!ee.done;)y.push((ee=ee.value)[0]+": "+ee[1]),ee=V.next();return y.join("\r\n")},Object.defineProperty(j_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(y){this.m=y?"include":"same-origin"}}),Wt(Ts,co);var Bm=/^https?$/i,jv=["POST","PUT"];function Jf(y,V){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=V,y.m=5,H_(y),Md(y)}function H_(y){y.A||(y.A=!0,lo(y,"complete"),lo(y,"error"))}function Hv(y){if(y.h&&typeof I<"u"&&(!y.v[1]||4!=bu(y)||2!=y.Z()))if(y.u&&4==bu(y))xm(y.Ea,0,y);else if(lo(y,"readystatechange"),4==bu(y)){y.h=!1;try{const wn=y.Z();e:switch(wn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var ee;if(!(ee=V)){var Ce;if(Ce=0===wn){var It=String(y.D).match(Cs)[1]||null;!It&&P.self&&P.self.location&&(It=P.self.location.protocol.slice(0,-1)),Ce=!Bm.test(It?It.toLowerCase():"")}ee=Ce}if(ee)lo(y,"complete"),lo(y,"success");else{y.m=6;try{var Ut=2<bu(y)?y.g.statusText:""}catch{Ut=""}y.l=Ut+" ["+y.Z()+"]",H_(y)}}finally{Md(y)}}}function Md(y,V){if(y.g){zv(y);const ee=y.g,Ce=y.v[0]?()=>{}:null;y.g=null,y.v=null,V||lo(y,"ready");try{ee.onreadystatechange=Ce}catch{}}}function zv(y){y.I&&(P.clearTimeout(y.I),y.I=null)}function bu(y){return y.g?y.g.readyState:0}function $v(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Wh(y,V,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[y]||V}function bg(y){this.Aa=0,this.i=[],this.j=new sl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wh("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wh("baseRetryDelayMs",5e3,y),this.cb=Wh("retryDelaySeedMs",1e4,y),this.Wa=Wh("forwardChannelMaxRetries",2,y),this.wa=Wh("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new yr(y&&y.concurrentRequestLimit),this.Da=new Dy,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xf(y){if(Zv(y),3==y.G){var V=y.U++,ee=Hs(y.I);if(Di(ee,"SID",y.K),Di(ee,"RID",V),Di(ee,"TYPE","terminate"),ep(y,ee),(V=new fc(y,y.j,V)).L=2,V.v=mc(Hs(ee)),ee=!1,P.navigator&&P.navigator.sendBeacon)try{ee=P.navigator.sendBeacon(V.v.toString(),"")}catch{}!ee&&P.Image&&((new Image).src=V.v,ee=!0),ee||(V.g=Yv(V.j,null),V.g.ea(V.v)),V.F=Date.now(),ge(V)}Zm(y)}function z_(y){y.g&&(zm(y),y.g.cancel(),y.g=null)}function Zv(y){z_(y),y.u&&(P.clearTimeout(y.u),y.u=null),$m(y),y.h.cancel(),y.s&&("number"==typeof y.s&&P.clearTimeout(y.s),y.s=null)}function jm(y){if(!rr(y.h)&&!y.s){y.s=!0;var V=y.Ga;Hf||cg(),zf||(Hf(),zf=!0),N_.add(V,y),y.B=0}}function Gv(y,V){var ee;ee=V?V.l:y.U++;const Ce=Hs(y.I);Di(Ce,"SID",y.K),Di(Ce,"RID",ee),Di(Ce,"AID",y.T),ep(y,Ce),y.m&&y.o&&qh(Ce,y.m,y.o),ee=new fc(y,y.j,ee,y.B+1),null===y.m&&(ee.H=y.o),V&&(y.i=V.D.concat(y.i)),V=qv(y,ee,1e3),ee.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),as(y.h,ee),l(ee,Ce,V)}function ep(y,V){y.H&&qr(y.H,function(ee,Ce){Di(V,Ce,ee)}),y.l&&Zi({},function(ee,Ce){Di(V,Ce,ee)})}function qv(y,V,ee){ee=Math.min(y.i.length,ee);var Ce=y.l?et(y.l.Na,y.l,y):null;e:{var It=y.i;let Ut=-1;for(;;){const wn=["count="+ee];-1==Ut?0<ee?(Ut=It[0].g,wn.push("ofs="+Ut)):Ut=0:wn.push("ofs="+Ut);let qi=!0;for(let Xs=0;Xs<ee;Xs++){let Si=It[Xs].g;const ho=It[Xs].map;if(Si-=Ut,0>Si)Ut=Math.max(0,It[Xs].g-100),qi=!1;else try{T0(ho,wn,"req"+Si+"_")}catch{Ce&&Ce(ho)}}if(qi){Ce=wn.join("&");break e}}}return y=y.i.splice(0,ee),V.D=y,Ce}function Wv(y){if(!y.g&&!y.u){y.Y=1;var V=y.Fa;Hf||cg(),zf||(Hf(),zf=!0),N_.add(V,y),y.v=0}}function Hm(y){return!(y.g||y.u||3<=y.v||(y.Y++,y.u=Qf(et(y.Fa,y),Qv(y,y.v)),y.v++,0))}function zm(y){null!=y.A&&(P.clearTimeout(y.A),y.A=null)}function Z_(y){y.g=new fc(y,y.j,"rpc",y.Y),null===y.m&&(y.g.H=y.o),y.g.O=0;var V=Hs(y.qa);Di(V,"RID","rpc"),Di(V,"SID",y.K),Di(V,"AID",y.T),Di(V,"CI",y.F?"0":"1"),!y.F&&y.ja&&Di(V,"TO",y.ja),Di(V,"TYPE","xmlhttp"),ep(y,V),y.m&&y.o&&qh(V,y.m,y.o),y.L&&(y.g.I=y.L);var ee=y.g;y=y.ia,ee.L=1,ee.v=mc(Hs(V)),ee.m=null,ee.P=!0,_(ee,y)}function $m(y){null!=y.C&&(P.clearTimeout(y.C),y.C=null)}function Kv(y,V){var ee=null;if(y.g==V){$m(y),zm(y),y.g=null;var Ce=2}else{if(!Ri(y.h,V))return;ee=V.D,cs(y.h,V),Ce=1}if(0!=y.G)if(V.o)if(1==Ce){ee=V.m?V.m.length:0,V=Date.now()-V.F;var It=y.B;lo(Ce=Wf(),new U_(Ce,ee)),jm(y)}else Wv(y);else if(3==(It=V.s)||0==It&&0<V.X||!(1==Ce&&function $_(y,V){return!(ir(y.h)>=y.h.j-(y.s?1:0)||(y.s?(y.i=V.D.concat(y.i),0):1==y.G||2==y.G||y.B>=(y.Va?0:y.Wa)||(y.s=Qf(et(y.Ga,y,V),Qv(y,y.B)),y.B++,0)))}(y,V)||2==Ce&&Hm(y)))switch(ee&&0<ee.length&&(V=y.h,V.i=V.i.concat(ee)),It){case 1:Kh(y,5);break;case 4:Kh(y,10);break;case 3:Kh(y,6);break;default:Kh(y,2)}}function Qv(y,V){let ee=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(ee*=2),ee*V}function Kh(y,V){if(y.j.info("Error code "+V),2==V){var ee=et(y.fb,y),Ce=y.Xa;const It=!Ce;Ce=new Gi(Ce||"//www.google.com/images/cleardot.gif"),P.location&&"http"==P.location.protocol||gc(Ce,"https"),mc(Ce),It?function Vm(y,V){const ee=new sl;if(P.Image){const Ce=new Image;Ce.onload=Ct(Sd,ee,"TestLoadImage: loaded",!0,V,Ce),Ce.onerror=Ct(Sd,ee,"TestLoadImage: error",!1,V,Ce),Ce.onabort=Ct(Sd,ee,"TestLoadImage: abort",!1,V,Ce),Ce.ontimeout=Ct(Sd,ee,"TestLoadImage: timeout",!1,V,Ce),P.setTimeout(function(){Ce.ontimeout&&Ce.ontimeout()},1e4),Ce.src=y}else V(!1)}(Ce.toString(),ee):function C0(y,V){new sl;const Ce=new AbortController,It=setTimeout(()=>{Ce.abort(),Sd(0,0,!1,V)},1e4);fetch(y,{signal:Ce.signal}).then(Ut=>{clearTimeout(It),Sd(0,0,!!Ut.ok,V)}).catch(()=>{clearTimeout(It),Sd(0,0,!1,V)})}(Ce.toString(),ee)}else Eo(2);y.G=0,y.l&&y.l.sa(V),Zm(y),Zv(y)}function Zm(y){if(y.G=0,y.ka=[],y.l){const V=uo(y.h);(0!=V.length||0!=y.i.length)&&(nn(y.ka,V),nn(y.ka,y.i),y.h.i.length=0,hn(y.i),y.i.length=0),y.l.ra()}}function Gm(y,V,ee){var Ce=ee instanceof Gi?Hs(ee):new Gi(ee);if(""!=Ce.g)V&&(Ce.g=V+"."+Ce.g),sa(Ce,Ce.s);else{var It=P.location;Ce=It.protocol,V=V?V+"."+It.hostname:It.hostname,It=+It.port;var Ut=new Gi(null);Ce&&gc(Ut,Ce),V&&(Ut.g=V),It&&sa(Ut,It),ee&&(Ut.l=ee),Ce=Ut}return V=y.ya,(ee=y.D)&&V&&Di(Ce,ee,V),Di(Ce,"VER",y.la),ep(y,Ce),Ce}function Yv(y,V,ee){if(V&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return(V=new Ts(y.Ca&&!y.pa?new Eg({eb:ee}):y.pa)).Ha(y.J),V}function Cg(){}function Qh(){}function aa(y,V){co.call(this),this.g=new bg(V),this.l=y,this.h=V&&V.messageUrlParams||null,y=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(y?y["X-WebChannel-Content-Type"]=V.messageContentType:y={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(y?y["X-WebChannel-Client-Profile"]=V.va:y={"X-WebChannel-Client-Profile":V.va}),this.g.S=y,(y=V&&V.Sb)&&!or(y)&&(this.g.m=y),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!or(V)&&(this.g.D=V,null!==(y=this.h)&&V in y&&V in(y=this.h)&&delete y[V]),this.j=new tp(this)}function G_(y){qf.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var V=y.__sm__;if(V){e:{for(const ee in V){y=ee;break e}y=void 0}(this.i=y)&&(y=this.i,V=null!==V&&y in V?V[y]:void 0),this.data=V}else this.data=y}function Jv(){_g.call(this),this.status=1}function tp(y){this.g=y}(c=Ts.prototype).Ha=function(y){this.J=y},c.ea=function(y,V,ee,Ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);V=V?V.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fm.g(),this.v=function V_(y){return y.h||(y.h=y.i())}(this.o?this.o:Fm),this.g.onreadystatechange=et(this.Ea,this);try{this.B=!0,this.g.open(V,String(y),!0),this.B=!1}catch(Ut){return void Jf(this,Ut)}if(y=ee||"",ee=new Map(this.headers),Ce)if(Object.getPrototypeOf(Ce)===Object.prototype)for(var It in Ce)ee.set(It,Ce[It]);else{if("function"!=typeof Ce.keys||"function"!=typeof Ce.get)throw Error("Unknown input type for opt_headers: "+String(Ce));for(const Ut of Ce.keys())ee.set(Ut,Ce.get(Ut))}Ce=Array.from(ee.keys()).find(Ut=>"content-type"==Ut.toLowerCase()),It=P.FormData&&y instanceof P.FormData,!(0<=Array.prototype.indexOf.call(jv,V,void 0))||Ce||It||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ut,wn]of ee)this.g.setRequestHeader(Ut,wn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zv(this),this.u=!0,this.g.send(y),this.u=!1}catch(Ut){Jf(this,Ut)}},c.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,lo(this,"complete"),lo(this,"abort"),Md(this))},c.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Md(this,!0)),Ts.aa.N.call(this)},c.Ea=function(){this.s||(this.B||this.u||this.j?Hv(this):this.bb())},c.bb=function(){Hv(this)},c.isActive=function(){return!!this.g},c.Z=function(){try{return 2<bu(this)?this.g.status:-1}catch{return-1}},c.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},c.Oa=function(y){if(this.g){var V=this.g.responseText;return y&&0==V.indexOf(y)&&(V=V.substring(y.length)),$h(V)}},c.Ba=function(){return this.m},c.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(c=bg.prototype).la=8,c.G=1,c.connect=function(y,V,ee,Ce){Eo(0),this.W=y,this.H=V||{},ee&&void 0!==Ce&&(this.H.OSID=ee,this.H.OAID=Ce),this.F=this.X,this.I=Gm(this,null,this.W),jm(this)},c.Ga=function(y){if(this.s)if(this.s=null,1==this.G){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const It=new fc(this,this.j,y);let Ut=this.o;if(this.S&&(Ut?(Ut=Qe(Ut),mt(Ut,this.S)):Ut=this.S),null!==this.m||this.O||(It.H=Ut,Ut=null),this.P)e:{for(var V=0,ee=0;ee<this.i.length;ee++){var Ce=this.i[ee];if(void 0===(Ce="__data__"in Ce.map&&"string"==typeof(Ce=Ce.map.__data__)?Ce.length:void 0))break;if(4096<(V+=Ce)){V=ee;break e}if(4096===V||ee===this.i.length-1){V=ee+1;break e}}V=1e3}else V=1e3;V=qv(this,It,V),Di(ee=Hs(this.I),"RID",y),Di(ee,"CVER",22),this.D&&Di(ee,"X-HTTP-Session-Id",this.D),ep(this,ee),Ut&&(this.O?V="headers="+encodeURIComponent(String(Um(Ut)))+"&"+V:this.m&&qh(ee,this.m,Ut)),as(this.h,It),this.Ua&&Di(ee,"TYPE","init"),this.P?(Di(ee,"$req",V),Di(ee,"SID","null"),It.T=!0,l(It,ee,null)):l(It,ee,V),this.G=2}}else 3==this.G&&(y?Gv(this,y):0==this.i.length||rr(this.h)||Gv(this))},c.Fa=function(){if(this.u=null,Z_(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Qf(et(this.ab,this),y)}},c.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Eo(10),z_(this),Z_(this))},c.Za=function(){null!=this.C&&(this.C=null,z_(this),Hm(this),Eo(19))},c.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Eo(2)):(this.j.info("Failed to ping google.com"),Eo(1))},c.isActive=function(){return!!this.l&&this.l.isActive(this)},(c=Cg.prototype).ua=function(){},c.ta=function(){},c.sa=function(){},c.ra=function(){},c.isActive=function(){return!0},c.Na=function(){},Qh.prototype.g=function(y,V){return new aa(y,V)},Wt(aa,co),aa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},aa.prototype.close=function(){Xf(this.g)},aa.prototype.o=function(y){var V=this.g;if("string"==typeof y){var ee={};ee.__data__=y,y=ee}else this.u&&((ee={}).__data__=Au(y),y=ee);V.i.push(new class{constructor(y,V){this.g=y,this.map=V}}(V.Ya++,y)),3==V.G&&jm(V)},aa.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,aa.aa.N.call(this)},Wt(G_,qf),Wt(Jv,_g),Wt(tp,Cg),tp.prototype.ua=function(){lo(this.g,"a")},tp.prototype.ta=function(y){lo(this.g,new G_(y))},tp.prototype.sa=function(y){lo(this.g,new Jv)},tp.prototype.ra=function(){lo(this.g,"b")},Qh.prototype.createWebChannel=Qh.prototype.g,aa.prototype.send=aa.prototype.o,aa.prototype.open=aa.prototype.m,aa.prototype.close=aa.prototype.close,Fe=z.createWebChannelTransport=function(){return new Qh},_t=z.getStatEventTarget=function(){return Wf()},We=z.Event=Iu,Ye=z.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vg.NO_ERROR=0,vg.TIMEOUT=8,vg.HTTP_ERROR=6,Re=z.ErrorCode=vg,B_.COMPLETE="complete",De=z.EventType=B_,Om.EventType=wd,wd.OPEN="a",wd.CLOSE="b",wd.ERROR="c",wd.MESSAGE="d",co.prototype.listen=co.prototype.K,ye=z.WebChannel=Om,be=z.FetchXmlHttpFactory=Eg,Ts.prototype.listenOnce=Ts.prototype.L,Ts.prototype.getLastError=Ts.prototype.Ka,Ts.prototype.getLastErrorCode=Ts.prototype.Ba,Ts.prototype.getStatus=Ts.prototype.Z,Ts.prototype.getResponseJson=Ts.prototype.Oa,Ts.prototype.getResponseText=Ts.prototype.oa,Ts.prototype.send=Ts.prototype.ea,Ts.prototype.setWithCredentials=Ts.prototype.Ha,oe=z.XhrIo=Ts}).apply(typeof $<"u"?$:typeof self<"u"?self:typeof window<"u"?window:{});const Oe="@firebase/firestore";class tt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");let Ze="10.12.1";const Ge=new Se.Yd("@firebase/firestore");function dt(){return Ge.logLevel}function bt(c){Ge.setLogLevel(c)}function Ee(c,...e){if(Ge.logLevel<=Se.in.DEBUG){const r=e.map(Dn);Ge.debug(`Firestore (${Ze}): ${c}`,...r)}}function Nt(c,...e){if(Ge.logLevel<=Se.in.ERROR){const r=e.map(Dn);Ge.error(`Firestore (${Ze}): ${c}`,...r)}}function Vt(c,...e){if(Ge.logLevel<=Se.in.WARN){const r=e.map(Dn);Ge.warn(`Firestore (${Ze}): ${c}`,...r)}}function Dn(c){if("string"==typeof c)return c;try{return JSON.stringify(c)}catch{return c}}function wt(c="Unexpected state"){const e=`FIRESTORE (${Ze}) INTERNAL ASSERTION FAILED: `+c;throw Nt(e),new Error(e)}function Ke(c,e){c||wt()}function ut(c,e){c||wt()}function Le(c,e){return c}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends _e.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ie{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Pe{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class je{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(tt.UNAUTHENTICATED))}shutdown(){}}class st{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class vt{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var o=this;let u=this.i;const m=J=>this.i!==u?(u=this.i,r(J)):Promise.resolve();let I=new Ie;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ie,e.enqueueRetryable(()=>m(this.currentUser))};const P=()=>{const J=I;e.enqueueRetryable((0,f.Z)(function*(){yield J.promise,yield m(o.currentUser)}))},L=J=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(J=>L(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?L(J):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ie)}},0),P()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ke("string"==typeof o.accessToken),new Pe(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(null===e||"string"==typeof e),new tt(e)}}class Bt{constructor(e,r,o){this.l=e,this.h=r,this.P=o,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gt{constructor(e,r,o){this.l=e,this.h=r,this.P=o}getToken(){return Promise.resolve(new Bt(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const o=m=>{null!=m.error&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const I=m.token!==this.R;return this.R=m.token,Ee("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const u=m=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.A.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.A.getImmediate({optional:!0});m?u(m):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ke("string"==typeof r.token),this.R=r.token,new Kt(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pn(c){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(c);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let o=0;o<c;o++)r[o]=Math.floor(256*Math.random());return r}class On{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Pn(40);for(let m=0;m<u.length;++m)o.length<20&&u[m]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[m]%62))}return o}}function sn(c,e){return c<e?-1:c>e?1:0}function Nn(c,e,r){return c.length===e.length&&c.every((o,u)=>r(o,e[u]))}function gr(c){return c+"\0"}class Jn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new te(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new te(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new te(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*r));return new Jn(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new Jn(0,0))}static max(){return new Yt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Br{constructor(e,r,o){void 0===r?r=0:r>e.length&&wt(),void 0===o?o=e.length-r:o>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=o}get length(){return this.len}isEqual(e){return 0===Br.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(o=>{r.push(o)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,o=this.limit();r<o;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const o=Math.min(e.length,r.length);for(let u=0;u<o;u++){const m=e.get(u),I=r.get(u);if(m<I)return-1;if(m>I)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class xn extends Br{construct(e,r,o){return new xn(e,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const o of e){if(o.indexOf("//")>=0)throw new te(we.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new xn(r)}static emptyPath(){return new xn([])}}const Mr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Br{construct(e,r,o){return new sr(e,r,o)}static isValidIdentifier(e){return Mr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const r=[];let o="",u=0;const m=()=>{if(0===o.length)throw new te(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let I=!1;for(;u<e.length;){const P=e[u];if("\\"===P){if(u+1===e.length)throw new te(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new te(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===P?(I=!I,u++):"."!==P||I?(o+=P,u++):(m(),u++)}if(m(),I)throw new te(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(r)}static emptyPath(){return new sr([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(xn.fromString(e))}static fromName(e){return new Jt(xn.fromString(e).popFirst(5))}static empty(){return new Jt(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return xn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new xn(e.slice()))}}class In{constructor(e,r,o,u){this.indexId=e,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Bn(c){return c.fields.find(e=>2===e.kind)}function Hn(c){return c.fields.filter(e=>2!==e.kind)}In.UNKNOWN_ID=-1;class br{constructor(e,r){this.fieldPath=e,this.kind=r}}class Wn{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Wn(0,gn.min())}}function Jr(c,e){const r=c.toTimestamp().seconds,o=c.toTimestamp().nanoseconds+1,u=Yt.fromTimestamp(1e9===o?new Jn(r+1,0):new Jn(r,o));return new gn(u,Jt.empty(),e)}function yi(c){return new gn(c.readTime,c.key,-1)}class gn{constructor(e,r,o){this.readTime=e,this.documentKey=r,this.largestBatchId=o}static min(){return new gn(Yt.min(),Jt.empty(),-1)}static max(){return new gn(Yt.max(),Jt.empty(),-1)}}function Vr(c,e){let r=c.readTime.compareTo(e.readTime);return 0!==r?r:(r=Jt.comparator(c.documentKey,e.documentKey),0!==r?r:sn(c.largestBatchId,e.largestBatchId))}const ar="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wr(c){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(c){if(c.code!==we.FAILED_PRECONDITION||c.message!==ar)throw c;Ee("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new at((o,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,u)},this.catchCallback=m=>{this.wrapFailure(r,m).next(o,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof at?r:at.resolve(r)}catch(r){return at.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):at.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):at.reject(r)}static resolve(e){return new at((r,o)=>{r(e)})}static reject(e){return new at((r,o)=>{o(e)})}static waitFor(e){return new at((r,o)=>{let u=0,m=0,I=!1;e.forEach(P=>{++u,P.next(()=>{++m,I&&m===u&&r()},L=>o(L))}),I=!0,m===u&&r()})}static or(e){let r=at.resolve(!1);for(const o of e)r=r.next(u=>u?at.resolve(u):o());return r}static forEach(e,r){const o=[];return e.forEach((u,m)=>{o.push(r.call(this,u,m))}),this.waitFor(o)}static mapArray(e,r){return new at((o,u)=>{const m=e.length,I=new Array(m);let P=0;for(let L=0;L<m;L++){const J=L;r(e[J]).next(he=>{I[J]=he,++P,P===m&&o(I)},he=>u(he))}})}static doWhile(e,r){return new at((o,u)=>{const m=()=>{!0===e()?r().next(()=>{m()},u):o()};m()})}}class Dt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Ie,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new tn(e,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=ce(o.target.error);this.V.reject(new tn(e,u))}}static open(e,r,o,u){try{return new Dt(r,e.transaction(u,o))}catch(m){throw new tn(r,m)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new hi(r)}}class ue{constructor(e,r,o){this.name=e,this.version=r,this.p=o,12.2===ue.S((0,_e.z$)())&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ee("SimpleDb","Removing database:",e),Cr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_e.hl)())return!1;if(ue.C())return!0;const e=(0,_e.z$)(),r=ue.S(e),o=0<r&&r<10,u=Be(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(e){var r=this;return(0,f.Z)(function*(){return r.db||(Ee("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const m=indexedDB.open(r.name,r.version);m.onsuccess=I=>{o(I.target.result)},m.onblocked=()=>{u(new tn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=I=>{const P=I.target.error;u("VersionError"===P.name?new te(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new te(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new tn(e,P))},m.onupgradeneeded=I=>{Ee("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',I.oldVersion),r.p.O(I.target.result,m.transaction,I.oldVersion,r.version).next(()=>{Ee("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,o,u){var m=this;return(0,f.Z)(function*(){const I="readonly"===r;let P=0;for(;;){++P;try{m.db=yield m.M(e);const L=Dt.open(m.db,e,I?"readonly":"readwrite",o),J=u(L).next(he=>(L.g(),he)).catch(he=>(L.abort(he),at.reject(he))).toPromise();return J.catch(()=>{}),yield L.m,J}catch(L){const J=L,he="FirebaseError"!==J.name&&P<3;if(Ee("SimpleDb","Transaction failed with error:",J.message,"Retrying:",he),m.close(),!he)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Be(c){const e=c.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class xt{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Cr(this.B.delete())}}class tn extends te{constructor(e,r){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function zn(c){return"IndexedDbTransactionError"===c.name}class hi{constructor(e){this.store=e}put(e,r){let o;return void 0!==r?(Ee("SimpleDb","PUT",this.store.name,e,r),o=this.store.put(r,e)):(Ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Cr(o)}add(e){return Ee("SimpleDb","ADD",this.store.name,e,e),Cr(this.store.add(e))}get(e){return Cr(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ee("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ee("SimpleDb","DELETE",this.store.name,e),Cr(this.store.delete(e))}count(){return Ee("SimpleDb","COUNT",this.store.name),Cr(this.store.count())}U(e,r){const o=this.options(e,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const m=u.getAll(o.range);return new at((I,P)=>{m.onerror=L=>{P(L.target.error)},m.onsuccess=L=>{I(L.target.result)}})}{const m=this.cursor(o),I=[];return this.W(m,(P,L)=>{I.push(L)}).next(()=>I)}}G(e,r){const o=this.store.getAll(e,null===r?void 0:r);return new at((u,m)=>{o.onerror=I=>{m(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}j(e,r){Ee("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,r);o.H=!1;const u=this.cursor(o);return this.W(u,(m,I,P)=>P.delete())}J(e,r){let o;r?o=e:(o={},r=e);const u=this.cursor(o);return this.W(u,r)}Y(e){const r=this.cursor({});return new at((o,u)=>{r.onerror=m=>{const I=ce(m.target.error);u(I)},r.onsuccess=m=>{const I=m.target.result;I?e(I.primaryKey,I.value).next(P=>{P?I.continue():o()}):o()}})}W(e,r){const o=[];return new at((u,m)=>{e.onerror=I=>{m(I.target.error)},e.onsuccess=I=>{const P=I.target.result;if(!P)return void u();const L=new xt(P),J=r(P.primaryKey,P.value,L);if(J instanceof at){const he=J.catch(Me=>(L.done(),at.reject(Me)));o.push(he)}L.isDone?u():null===L.K?P.continue():P.continue(L.K)}}).next(()=>at.waitFor(o))}options(e,r){let o;return void 0!==e&&("string"==typeof e?o=e:r=e),{index:o,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const o=this.store.index(e.index);return e.H?o.openKeyCursor(e.range,r):o.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Cr(c){return new at((e,r)=>{c.onsuccess=o=>{e(o.target.result)},c.onerror=o=>{const u=ce(o.target.error);r(u)}})}let qe=!1;function ce(c){const e=ue.S((0,_e.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(c.message.indexOf(r)>=0){const o=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qe||(qe=!0,setTimeout(()=>{throw o},0)),o}}return c}class K{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;Ee("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){r.task=null;try{Ee("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){zn(o)?Ee("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield wr(o)}yield r.X(6e4)}))}}class H{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,f.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,e))})()}te(e,r){const o=new Set;let u=r,m=!0;return at.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return Ee("IndexBackfiller",`Processing collection: ${I}`),this.ne(e,I,u).next(P=>{u-=P,o.add(I)});m=!1})).next(()=>r-u)}ne(e,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,o).next(m=>{const I=m.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.re(u,m)).next(P=>(Ee("IndexBackfiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,r,P))).next(()=>I.size)}))}re(e,r){let o=e;return r.changes.forEach((u,m)=>{const I=yi(m);Vr(I,o)>0&&(o=I)}),new gn(o.readTime,o.documentKey,Math.max(r.batchId,e.largestBatchId))}}let U=(()=>{class c{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return c.oe=-1,c})();function Te(c){return null==c}function Xe(c){return 0===c&&1/c==-1/0}function kt(c){return"number"==typeof c&&Number.isInteger(c)&&!Xe(c)&&c<=Number.MAX_SAFE_INTEGER&&c>=Number.MIN_SAFE_INTEGER}function Zt(c){let e="";for(let r=0;r<c.length;r++)e.length>0&&(e=cn(e)),e=mn(c.get(r),e);return cn(e)}function mn(c,e){let r=e;const o=c.length;for(let u=0;u<o;u++){const m=c.charAt(u);switch(m){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=m}}return r}function cn(c){return c+"\x01\x01"}function fn(c){const e=c.length;if(Ke(e>=2),2===e)return Ke("\x01"===c.charAt(0)&&"\x01"===c.charAt(1)),xn.emptyPath();const r=e-2,o=[];let u="";for(let m=0;m<e;){const I=c.indexOf("\x01",m);switch((I<0||I>r)&&wt(),c.charAt(I+1)){case"\x01":const P=c.substring(m,I);let L;0===u.length?L=P:(u+=P,L=u,u=""),o.push(L);break;case"\x10":u+=c.substring(m,I),u+="\0";break;case"\x11":u+=c.substring(m,I+1);break;default:wt()}m=I+2}return new xn(o)}const Xn=["userId","batchId"];function Je(c,e){return[c,Zt(e)]}function He(c,e,r){return[c,Zt(e),r]}const nt={},jt=["prefixPath","collectionGroup","readTime","documentId"],en=["prefixPath","collectionGroup","documentId"],En=["collectionGroup","readTime","prefixPath","documentId"],ln=["canonicalId","targetId"],fr=["targetId","path"],yn=["path","targetId"],yt=["collectionId","parent"],ft=["indexId","uid"],Ft=["uid","sequenceNumber"],un=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ln=["indexId","uid","orderedDocumentKey"],Un=["userId","collectionPath","documentId"],vn=["userId","collectionPath","largestBatchId"],$n=["userId","collectionGroup","largestBatchId"],Dr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fi=[...Dr,"documentOverlays"],ti=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dr=ti,Pi=[...dr,"indexConfiguration","indexState","indexEntries"],gi=Pi;class ls extends Pr{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function jr(c,e){const r=Le(c);return ue.F(r._e,e)}function eo(c){let e=0;for(const r in c)Object.prototype.hasOwnProperty.call(c,r)&&e++;return e}function ps(c,e){for(const r in c)Object.prototype.hasOwnProperty.call(c,r)&&e(r,c[r])}function Ys(c){for(const e in c)if(Object.prototype.hasOwnProperty.call(c,e))return!1;return!0}class si{constructor(e,r){this.comparator=e,this.root=r||Oi.EMPTY}insert(e,r){return new si(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(e){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,o)=>(e(r,o),!1))}toString(){const e=[];return this.inorderTraversal((r,o)=>(e.push(`${r}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Da(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Da(this.root,e,this.comparator,!1)}getReverseIterator(){return new Da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Da(this.root,e,this.comparator,!0)}}class Da{constructor(e,r,o,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?o(e.key,r):1,r&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,r,o,u,m){this.key=e,this.value=r,this.color=o??Oi.RED,this.left=u??Oi.EMPTY,this.right=m??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,o,u,m){return new Oi(e??this.key,r??this.value,o??this.color,u??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,o){let u=this;const m=o(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,r,o),null):0===m?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let o,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Oi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1,Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,o,u,m){return this}insert(e,r,o){return new Oi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xr{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,o)=>(e(r),!1))}forEachInRange(e,r){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Vo(this.data.getIterator())}getIteratorFrom(e){return new Vo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(o=>{r=r.add(o)}),r}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const r=this.data.getIterator(),o=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,m=o.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Xr(this.comparator);return r.data=e,r}}class Vo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Us(c){return c.hasNext()?c.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new Ui([])}unionWith(e){let r=new Xr(sr.comparator);for(const o of this.fields)r=r.add(o);for(const o of e)r=r.add(o);return new Ui(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Nn(this.fields,e.fields,(r,o)=>r.isEqual(o))}}class Wi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function bo(){return typeof atob<"u"}class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new Wi("Invalid base64 string: "+m):m}}(e);return new Mi(r)}static fromUint8Array(e){const r=function(u){let m="";for(let I=0;I<u.length;++I)m+=String.fromCharCode(u[I]);return m}(e);return new Mi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const Uo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(c){if(Ke(!!c),"string"==typeof c){let e=0;const r=Uo.exec(c);if(Ke(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(c);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ei(c.seconds),nanos:Ei(c.nanos)}}function Ei(c){return"number"==typeof c?c:"string"==typeof c?Number(c):0}function gs(c){return"string"==typeof c?Mi.fromBase64String(c):Mi.fromUint8Array(c)}function Zs(c){var e,r;return"server_timestamp"===(null===(r=((null===(e=c?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function to(c){const e=c.mapValue.fields.__previous_value__;return Zs(e)?to(e):e}function ts(c){const e=ws(c.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class fo{constructor(e,r,o,u,m,I,P,L,J){this.databaseId=e,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=m,this.forceLongPolling=I,this.autoDetectLongPolling=P,this.longPollingOptions=L,this.useFetchStreams=J}}class qn{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qn&&e.projectId===this.projectId&&e.database===this.database}}const Kr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oi={nullValue:"NULL_VALUE"};function Bi(c){return"nullValue"in c?0:"booleanValue"in c?1:"integerValue"in c||"doubleValue"in c?2:"timestampValue"in c?3:"stringValue"in c?5:"bytesValue"in c?6:"referenceValue"in c?7:"geoPointValue"in c?8:"arrayValue"in c?9:"mapValue"in c?Zs(c)?4:ai(c)?9007199254740991:10:wt()}function ei(c,e){if(c===e)return!0;const r=Bi(c);if(r!==Bi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return c.booleanValue===e.booleanValue;case 4:return ts(c).isEqual(ts(e));case 3:return function(u,m){if("string"==typeof u.timestampValue&&"string"==typeof m.timestampValue&&u.timestampValue.length===m.timestampValue.length)return u.timestampValue===m.timestampValue;const I=ws(u.timestampValue),P=ws(m.timestampValue);return I.seconds===P.seconds&&I.nanos===P.nanos}(c,e);case 5:return c.stringValue===e.stringValue;case 6:return m=e,gs(c.bytesValue).isEqual(gs(m.bytesValue));case 7:return c.referenceValue===e.referenceValue;case 8:return function(u,m){return Ei(u.geoPointValue.latitude)===Ei(m.geoPointValue.latitude)&&Ei(u.geoPointValue.longitude)===Ei(m.geoPointValue.longitude)}(c,e);case 2:return function(u,m){if("integerValue"in u&&"integerValue"in m)return Ei(u.integerValue)===Ei(m.integerValue);if("doubleValue"in u&&"doubleValue"in m){const I=Ei(u.doubleValue),P=Ei(m.doubleValue);return I===P?Xe(I)===Xe(P):isNaN(I)&&isNaN(P)}return!1}(c,e);case 9:return Nn(c.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:return function(u,m){const I=u.mapValue.fields||{},P=m.mapValue.fields||{};if(eo(I)!==eo(P))return!1;for(const L in I)if(I.hasOwnProperty(L)&&(void 0===P[L]||!ei(I[L],P[L])))return!1;return!0}(c,e);default:return wt()}var m}function ns(c,e){return void 0!==(c.values||[]).find(r=>ei(r,e))}function rs(c,e){if(c===e)return 0;const r=Bi(c),o=Bi(e);if(r!==o)return sn(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return sn(c.booleanValue,e.booleanValue);case 2:return function(m,I){const P=Ei(m.integerValue||m.doubleValue),L=Ei(I.integerValue||I.doubleValue);return P<L?-1:P>L?1:P===L?0:isNaN(P)?isNaN(L)?0:-1:1}(c,e);case 3:return Co(c.timestampValue,e.timestampValue);case 4:return Co(ts(c),ts(e));case 5:return sn(c.stringValue,e.stringValue);case 6:return function(m,I){const P=gs(m),L=gs(I);return P.compareTo(L)}(c.bytesValue,e.bytesValue);case 7:return function(m,I){const P=m.split("/"),L=I.split("/");for(let J=0;J<P.length&&J<L.length;J++){const he=sn(P[J],L[J]);if(0!==he)return he}return sn(P.length,L.length)}(c.referenceValue,e.referenceValue);case 8:return function(m,I){const P=sn(Ei(m.latitude),Ei(I.latitude));return 0!==P?P:sn(Ei(m.longitude),Ei(I.longitude))}(c.geoPointValue,e.geoPointValue);case 9:return function(m,I){const P=m.values||[],L=I.values||[];for(let J=0;J<P.length&&J<L.length;++J){const he=rs(P[J],L[J]);if(he)return he}return sn(P.length,L.length)}(c.arrayValue,e.arrayValue);case 10:return function(m,I){if(m===Kr.mapValue&&I===Kr.mapValue)return 0;if(m===Kr.mapValue)return 1;if(I===Kr.mapValue)return-1;const P=m.fields||{},L=Object.keys(P),J=I.fields||{},he=Object.keys(J);L.sort(),he.sort();for(let Me=0;Me<L.length&&Me<he.length;++Me){const et=sn(L[Me],he[Me]);if(0!==et)return et;const Ct=rs(P[L[Me]],J[he[Me]]);if(0!==Ct)return Ct}return sn(L.length,he.length)}(c.mapValue,e.mapValue);default:throw wt()}}function Co(c,e){if("string"==typeof c&&"string"==typeof e&&c.length===e.length)return sn(c,e);const r=ws(c),o=ws(e),u=sn(r.seconds,o.seconds);return 0!==u?u:sn(r.nanos,o.nanos)}function ms(c){return Bs(c)}function Bs(c){return"nullValue"in c?"null":"booleanValue"in c?""+c.booleanValue:"integerValue"in c?""+c.integerValue:"doubleValue"in c?""+c.doubleValue:"timestampValue"in c?function(r){const o=ws(r);return`time(${o.seconds},${o.nanos})`}(c.timestampValue):"stringValue"in c?c.stringValue:"bytesValue"in c?gs(c.bytesValue).toBase64():"referenceValue"in c?Jt.fromName(c.referenceValue).toString():"geoPointValue"in c?function(r){return`geo(${r.latitude},${r.longitude})`}(c.geoPointValue):"arrayValue"in c?function(r){let o="[",u=!0;for(const m of r.values||[])u?u=!1:o+=",",o+=Bs(m);return o+"]"}(c.arrayValue):"mapValue"in c?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",m=!0;for(const I of o)m?m=!1:u+=",",u+=`${I}:${Bs(r.fields[I])}`;return u+"}"}(c.mapValue):wt()}function _n(c,e){return{referenceValue:`projects/${c.projectId}/databases/${c.database}/documents/${e.path.canonicalString()}`}}function er(c){return!!c&&"integerValue"in c}function xr(c){return!!c&&"arrayValue"in c}function Ni(c){return!!c&&"nullValue"in c}function is(c){return!!c&&"doubleValue"in c&&isNaN(Number(c.doubleValue))}function ci(c){return!!c&&"mapValue"in c}function Ds(c){if(c.geoPointValue)return{geoPointValue:Object.assign({},c.geoPointValue)};if(c.timestampValue&&"object"==typeof c.timestampValue)return{timestampValue:Object.assign({},c.timestampValue)};if(c.mapValue){const e={mapValue:{fields:{}}};return ps(c.mapValue.fields,(r,o)=>e.mapValue.fields[r]=Ds(o)),e}if(c.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(c.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ds(c.arrayValue.values[r]);return e}return Object.assign({},c)}function ai(c){return"__max__"===(((c.mapValue||{}).fields||{}).__type__||{}).stringValue}function ss(c){return"nullValue"in c?oi:"booleanValue"in c?{booleanValue:!1}:"integerValue"in c||"doubleValue"in c?{doubleValue:NaN}:"timestampValue"in c?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in c?{stringValue:""}:"bytesValue"in c?{bytesValue:""}:"referenceValue"in c?_n(qn.empty(),Jt.empty()):"geoPointValue"in c?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in c?{arrayValue:{}}:"mapValue"in c?{mapValue:{}}:wt()}function _s(c){return"nullValue"in c?{booleanValue:!1}:"booleanValue"in c?{doubleValue:NaN}:"integerValue"in c||"doubleValue"in c?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in c?{stringValue:""}:"stringValue"in c?{bytesValue:""}:"bytesValue"in c?_n(qn.empty(),Jt.empty()):"referenceValue"in c?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in c?{arrayValue:{}}:"arrayValue"in c?{mapValue:{}}:"mapValue"in c?Kr:wt()}function tr(c,e){const r=rs(c.value,e.value);return 0!==r?r:c.inclusive&&!e.inclusive?-1:!c.inclusive&&e.inclusive?1:0}function Ss(c,e){const r=rs(c.value,e.value);return 0!==r?r:c.inclusive&&!e.inclusive?1:!c.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let o=0;o<e.length-1;++o)if(r=(r.mapValue.fields||{})[e.get(o)],!ci(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ds(r)}setAll(e){let r=sr.emptyPath(),o={},u=[];e.forEach((I,P)=>{if(!r.isImmediateParentOf(P)){const L=this.getFieldsMap(r);this.applyChanges(L,o,u),o={},u=[],r=P.popLast()}I?o[P.lastSegment()]=Ds(I):u.push(P.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,o,u)}delete(e){const r=this.field(e.popLast());ci(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=r.mapValue.fields[e.get(o)];ci(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,o){ps(r,(u,m)=>e[u]=m);for(const u of o)delete e[u]}clone(){return new li(Ds(this.value))}}function re(c){const e=[];return ps(c.fields,(r,o)=>{const u=new sr([r]);if(ci(o)){const m=re(o.mapValue).fields;if(0===m.length)e.push(u);else for(const I of m)e.push(u.child(I))}else e.push(u)}),new Ui(e)}class Y{constructor(e,r,o,u,m,I,P){this.key=e,this.documentType=r,this.version=o,this.readTime=u,this.createTime=m,this.data=I,this.documentState=P}static newInvalidDocument(e){return new Y(e,0,Yt.min(),Yt.min(),Yt.min(),li.empty(),0)}static newFoundDocument(e,r,o,u){return new Y(e,1,r,Yt.min(),o,u,0)}static newNoDocument(e,r){return new Y(e,2,r,Yt.min(),Yt.min(),li.empty(),0)}static newUnknownDocument(e,r){return new Y(e,3,r,Yt.min(),Yt.min(),li.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Y&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Y(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ne{constructor(e,r){this.position=e,this.inclusive=r}}function $e(c,e,r){let o=0;for(let u=0;u<c.position.length;u++){const m=e[u],I=c.position[u];if(o=m.field.isKeyField()?Jt.comparator(Jt.fromName(I.referenceValue),r.key):rs(I,r.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function ht(c,e){if(null===c)return null===e;if(null===e||c.inclusive!==e.inclusive||c.position.length!==e.position.length)return!1;for(let r=0;r<c.position.length;r++)if(!ei(c.position[r],e.position[r]))return!1;return!0}class Lt{constructor(e,r="asc"){this.field=e,this.dir=r}}function pn(c,e){return c.dir===e.dir&&c.field.isEqual(e.field)}class Sn{}class Qt extends Sn{constructor(e,r,o){super(),this.field=e,this.op=r,this.value=o}static create(e,r,o){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,o):new ds(e,r,o):"array-contains"===r?new Ii(e,o):"in"===r?new po(e,o):"not-in"===r?new os(e,o):"array-contains-any"===r?new Ps(e,o):new Qt(e,r,o)}static createKeyFieldInFilter(e,r,o){return"in"===r?new vr(e,o):new xi(e,o)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(rs(r,this.value)):null!==r&&Bi(this.value)===Bi(r)&&this.matchesComparison(rs(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends Sn{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new An(e,r)}matches(e){return mr(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mr(c){return"and"===c.op}function jn(c){return"or"===c.op}function Ai(c){return zr(c)&&mr(c)}function zr(c){for(const e of c.filters)if(e instanceof An)return!1;return!0}function Rr(c){if(c instanceof Qt)return c.field.canonicalString()+c.op.toString()+ms(c.value);if(Ai(c))return c.filters.map(e=>Rr(e)).join(",");{const e=c.filters.map(r=>Rr(r)).join(",");return`${c.op}(${e})`}}function mi(c,e){return c instanceof Qt?(o=c,(u=e)instanceof Qt&&o.op===u.op&&o.field.isEqual(u.field)&&ei(o.value,u.value)):c instanceof An?function(o,u){return u instanceof An&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((m,I,P)=>m&&mi(I,u.filters[P]),!0)}(c,e):void wt();var o,u}function Ur(c,e){const r=c.filters.concat(e);return An.create(r,c.op)}function us(c){return c instanceof Qt?`${(r=c).field.canonicalString()} ${r.op} ${ms(r.value)}`:c instanceof An?function(r){return r.op.toString()+" {"+r.getFilters().map(us).join(" ,")+"}"}(c):"Filter";var r}class ds extends Qt{constructor(e,r,o){super(e,r,o),this.key=Jt.fromName(o.referenceValue)}matches(e){const r=Jt.comparator(e.key,this.key);return this.matchesComparison(r)}}class vr extends Qt{constructor(e,r){super(e,"in",r),this.keys=Qr(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class xi extends Qt{constructor(e,r){super(e,"not-in",r),this.keys=Qr(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Qr(c,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Jt.fromName(o.referenceValue))}class Ii extends Qt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return xr(r)&&ns(r.arrayValue,this.value)}}class po extends Qt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&ns(this.value.arrayValue,r)}}class os extends Qt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!ns(this.value.arrayValue,r)}}class Ps extends Qt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!xr(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>ns(this.value.arrayValue,o))}}class Ki{constructor(e,r=null,o=[],u=[],m=null,I=null,P=null){this.path=e,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=m,this.startAt=I,this.endAt=P,this.ue=null}}function Sa(c,e=null,r=[],o=[],u=null,m=null,I=null){return new Ki(c,e,r,o,u,m,I)}function xs(c){const e=Le(c);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(o=>Rr(o)).join(","),r+="|ob:",r+=e.orderBy.map(o=>{return(m=o).field.canonicalString()+m.dir;var m}).join(","),Te(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>ms(o)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>ms(o)).join(",")),e.ue=r}return e.ue}function To(c,e){if(c.limit!==e.limit||c.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<c.orderBy.length;r++)if(!pn(c.orderBy[r],e.orderBy[r]))return!1;if(c.filters.length!==e.filters.length)return!1;for(let r=0;r<c.filters.length;r++)if(!mi(c.filters[r],e.filters[r]))return!1;return c.collectionGroup===e.collectionGroup&&!!c.path.isEqual(e.path)&&!!ht(c.startAt,e.startAt)&&ht(c.endAt,e.endAt)}function Qa(c){return Jt.isDocumentKey(c.path)&&null===c.collectionGroup&&0===c.filters.length}function Bo(c,e){return c.filters.filter(r=>r instanceof Qt&&r.field.isEqual(e))}function Q(c,e,r){let o=oi,u=!0;for(const m of Bo(c,e)){let I=oi,P=!0;switch(m.op){case"<":case"<=":I=ss(m.value);break;case"==":case"in":case">=":I=m.value;break;case">":I=m.value,P=!1;break;case"!=":case"not-in":I=oi}tr({value:o,inclusive:u},{value:I,inclusive:P})<0&&(o=I,u=P)}if(null!==r)for(let m=0;m<c.orderBy.length;++m)if(c.orderBy[m].field.isEqual(e)){const I=r.position[m];tr({value:o,inclusive:u},{value:I,inclusive:r.inclusive})<0&&(o=I,u=r.inclusive);break}return{value:o,inclusive:u}}function ie(c,e,r){let o=Kr,u=!0;for(const m of Bo(c,e)){let I=Kr,P=!0;switch(m.op){case">=":case">":I=_s(m.value),P=!1;break;case"==":case"in":case"<=":I=m.value;break;case"<":I=m.value,P=!1;break;case"!=":case"not-in":I=Kr}Ss({value:o,inclusive:u},{value:I,inclusive:P})>0&&(o=I,u=P)}if(null!==r)for(let m=0;m<c.orderBy.length;++m)if(c.orderBy[m].field.isEqual(e)){const I=r.position[m];Ss({value:o,inclusive:u},{value:I,inclusive:r.inclusive})>0&&(o=I,u=r.inclusive);break}return{value:o,inclusive:u}}class F{constructor(e,r=null,o=[],u=[],m=null,I="F",P=null,L=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=m,this.limitType=I,this.startAt=P,this.endAt=L,this.ce=null,this.le=null,this.he=null}}function pe(c,e,r,o,u,m,I,P){return new F(c,e,r,o,u,m,I,P)}function ze(c){return new F(c)}function kn(c){return 0===c.filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())}function _r(c){return null!==c.collectionGroup}function hs(c){const e=Le(c);if(null===e.ce){e.ce=[];const r=new Set;for(const m of e.explicitOrderBy)e.ce.push(m),r.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(I){let P=new Xr(sr.comparator);return I.filters.forEach(L=>{L.getFlattenedFilters().forEach(J=>{J.isInequality()&&(P=P.add(J.field))})}),P})(e).forEach(m=>{r.has(m.canonicalString())||m.isKeyField()||e.ce.push(new Lt(m,o))}),r.has(sr.keyField().canonicalString())||e.ce.push(new Lt(sr.keyField(),o))}return e.ce}function _i(c){const e=Le(c);return e.le||(e.le=function zl(c,e){if("F"===c.limitType)return Sa(c.path,c.collectionGroup,e,c.filters,c.limit,c.startAt,c.endAt);{e=e.map(u=>new Lt(u.field,"desc"===u.dir?"asc":"desc"));const r=c.endAt?new Ne(c.endAt.position,c.endAt.inclusive):null,o=c.startAt?new Ne(c.startAt.position,c.startAt.inclusive):null;return Sa(c.path,c.collectionGroup,e,c.filters,c.limit,r,o)}}(e,hs(c))),e.le}function Ic(c,e){const r=c.filters.concat([e]);return new F(c.path,c.collectionGroup,c.explicitOrderBy.slice(),r,c.limit,c.limitType,c.startAt,c.endAt)}function Ya(c,e,r){return new F(c.path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),e,r,c.startAt,c.endAt)}function Pa(c,e){return To(_i(c),_i(e))&&c.limitType===e.limitType}function bc(c){return`${xs(_i(c))}|lt:${c.limitType}`}function xa(c){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>us(u)).join(", ")}]`),Te(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(I=u).field.canonicalString()} (${I.dir})`;var I}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>ms(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>ms(u)).join(",")),`Target(${o})`}(_i(c))}; limitType=${c.limitType})`}function ca(c,e){return e.isFoundDocument()&&function(o,u){const m=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):Jt.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)}(c,e)&&function(o,u){for(const m of hs(o))if(!m.field.isKeyField()&&null===u.data.field(m.field))return!1;return!0}(c,e)&&function(o,u){for(const m of o.filters)if(!m.matches(u))return!1;return!0}(c,e)&&(u=e,!((o=c).startAt&&!function(I,P,L){const J=$e(I,P,L);return I.inclusive?J<=0:J<0}(o.startAt,hs(o),u)||o.endAt&&!function(I,P,L){const J=$e(I,P,L);return I.inclusive?J>=0:J>0}(o.endAt,hs(o),u)));var o,u}function Cc(c){return c.collectionGroup||(c.path.length%2==1?c.path.lastSegment():c.path.get(c.path.length-2))}function no(c){return(e,r)=>{let o=!1;for(const u of hs(c)){const m=ro(u,e,r);if(0!==m)return m;o=o||u.field.isKeyField()}return 0}}function ro(c,e,r){const o=c.field.isKeyField()?Jt.comparator(e.key,r.key):function(m,I,P){const L=I.data.field(m),J=P.data.field(m);return null!==L&&null!==J?rs(L,J):wt()}(c.field,e,r);switch(c.dir){case"asc":return o;case"desc":return-1*o;default:return wt()}}class vs{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o)for(const[u,m]of o)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,r){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,r]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(r,o)=>{for(const[u,m]of o)e(u,m)})}isEmpty(){return Ys(this.inner)}size(){return this.innerSize}}const wu=new si(Jt.comparator);function Lr(){return wu}const la=new si(Jt.comparator);function ji(...c){let e=la;for(const r of c)e=e.insert(r.key,r);return e}function Tc(c){let e=la;return c.forEach((r,o)=>e=e.insert(r,o.overlayedDocument)),e}function Rs(){return wo()}function go(){return wo()}function wo(){return new vs(c=>c.toString(),(c,e)=>c.isEqual(e))}const Ra=new si(Jt.comparator),Oa=new Xr(Jt.comparator);function pr(...c){let e=Oa;for(const r of c)e=e.add(r);return e}const wc=new Xr(sn);function cl(){return wc}function Dc(c,e){if(c.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xe(e)?"-0":e}}function ua(c){return{integerValue:""+c}}function jo(c,e){return kt(e)?ua(e):Dc(c,e)}class Ho{constructor(){this._=void 0}}function da(c,e,r){return c instanceof Sc?function(u,m){const I={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return m&&Zs(m)&&(m=to(m)),m&&(I.fields.__previous_value__=m),{mapValue:I}}(r,e):c instanceof zo?Rd(c,e):c instanceof Do?dl(c,e):function(u,m){const I=ul(u,m),P=Ja(I)+Ja(u.Pe);return er(I)&&er(u.Pe)?ua(P):Dc(u.serializer,P)}(c,e)}function ll(c,e,r){return c instanceof zo?Rd(c,e):c instanceof Do?dl(c,e):r}function ul(c,e){return c instanceof Na?er(o=e)||(m=o)&&"doubleValue"in m?e:{integerValue:0}:null;var o,m}class Sc extends Ho{}class zo extends Ho{constructor(e){super(),this.elements=e}}function Rd(c,e){const r=$l(e);for(const o of c.elements)r.some(u=>ei(u,o))||r.push(o);return{arrayValue:{values:r}}}class Do extends Ho{constructor(e){super(),this.elements=e}}function dl(c,e){let r=$l(e);for(const o of c.elements)r=r.filter(u=>!ei(u,o));return{arrayValue:{values:r}}}class Na extends Ho{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Ja(c){return Ei(c.integerValue||c.doubleValue)}function $l(c){return xr(c)&&c.arrayValue.values?c.arrayValue.values.slice():[]}class ha{constructor(e,r){this.field=e,this.transform=r}}class hl{constructor(e,r){this.version=e,this.transformResults=r}}class bi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x(c,e){return void 0!==c.updateTime?e.isFoundDocument()&&e.version.isEqual(c.updateTime):void 0===c.exists||c.exists===e.isFoundDocument()}class se{}function j(c,e){if(!c.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return c.isNoDocument()?new pi(c.key,bi.none()):new Mn(c.key,c.data,bi.none());{const r=c.data,o=li.empty();let u=new Xr(sr.comparator);for(let m of e.fields)if(!u.has(m)){let I=r.field(m);null===I&&m.length>1&&(m=m.popLast(),I=r.field(m)),null===I?o.delete(m):o.set(m,I),u=u.add(m)}return new Fr(c.key,o,new Ui(u.toArray()),bi.none())}}function ne(c,e,r){c instanceof Mn?function(u,m,I){const P=u.value.clone(),L=ni(u.fieldTransforms,m,I.transformResults);P.setAll(L),m.convertToFoundDocument(I.version,P).setHasCommittedMutations()}(c,e,r):c instanceof Fr?function(u,m,I){if(!x(u.precondition,m))return void m.convertToUnknownDocument(I.version);const P=ni(u.fieldTransforms,m,I.transformResults),L=m.data;L.setAll(ui(u)),L.setAll(P),m.convertToFoundDocument(I.version,L).setHasCommittedMutations()}(c,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ue(c,e,r,o){return c instanceof Mn?function(m,I,P,L){if(!x(m.precondition,I))return P;const J=m.value.clone(),he=Ar(m.fieldTransforms,L,I);return J.setAll(he),I.convertToFoundDocument(I.version,J).setHasLocalMutations(),null}(c,e,r,o):c instanceof Fr?function(m,I,P,L){if(!x(m.precondition,I))return P;const J=Ar(m.fieldTransforms,L,I),he=I.data;return he.setAll(ui(m)),he.setAll(J),I.convertToFoundDocument(I.version,he).setHasLocalMutations(),null===P?null:P.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map(Me=>Me.field))}(c,e,r,o):(P=r,x(c.precondition,I=e)?(I.convertToNoDocument(I.version).setHasLocalMutations(),null):P);var I,P}function Ot(c,e){let r=null;for(const o of c.fieldTransforms){const u=e.data.field(o.field),m=ul(o.transform,u||null);null!=m&&(null===r&&(r=li.empty()),r.set(o.field,m))}return r||null}function Ht(c,e){return c.type===e.type&&!!c.key.isEqual(e.key)&&!!c.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=c.fieldTransforms)&&void 0===u||o&&u&&Nn(o,u,(m,I)=>function So(c,e){return c.field.isEqual(e.field)&&(u=e.transform,(o=c.transform)instanceof zo&&u instanceof zo||o instanceof Do&&u instanceof Do?Nn(o.elements,u.elements,ei):o instanceof Na&&u instanceof Na?ei(o.Pe,u.Pe):o instanceof Sc&&u instanceof Sc);var o,u}(m,I))))&&(0===c.type?c.value.isEqual(e.value):1!==c.type||c.data.isEqual(e.data)&&c.fieldMask.isEqual(e.fieldMask));var o,u}class Mn extends se{constructor(e,r,o,u=[]){super(),this.key=e,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Fr extends se{constructor(e,r,o,u,m=[]){super(),this.key=e,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function ui(c){const e=new Map;return c.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=c.data.field(r);e.set(r,o)}}),e}function ni(c,e,r){const o=new Map;Ke(c.length===r.length);for(let u=0;u<r.length;u++){const m=c[u],I=m.transform,P=e.data.field(m.field);o.set(m.field,ll(I,P,r[u]))}return o}function Ar(c,e,r){const o=new Map;for(const u of c){const m=u.transform,I=r.data.field(u.field);o.set(u.field,da(m,I,e))}return o}class pi extends se{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yr extends se{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qi{constructor(e,r,o,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&ne(m,e,o[u])}}applyToLocalView(e,r){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(r=Ue(o,e,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(r=Ue(o,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const o=go();return this.mutations.forEach(u=>{const m=e.get(u.key),I=m.overlayedDocument;let P=this.applyToLocalView(I,m.mutatedFields);P=r.has(u.key)?null:P;const L=j(I,P);null!==L&&o.set(u.key,L),I.isValidDocument()||I.convertToNoDocument(Yt.min())}),o}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),pr())}isEqual(e){return this.batchId===e.batchId&&Nn(this.mutations,e.mutations,(r,o)=>Ht(r,o))&&Nn(this.baseMutations,e.baseMutations,(r,o)=>Ht(r,o))}}class Ms{constructor(e,r,o,u){this.batch=e,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(e,r,o){Ke(e.mutations.length===o.length);let u=Ra;const m=e.mutations;for(let I=0;I<m.length;I++)u=u.insert(m[I].key,o[I].version);return new Ms(e,r,o,u)}}class ys{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gs{constructor(e,r){this.count=e,this.unchangedNames=r}}var Ci,lr;function qs(c){switch(c){default:return wt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function js(c){if(void 0===c)return Nt("GRPC error has no .code"),we.UNKNOWN;switch(c){case Ci.OK:return we.OK;case Ci.CANCELLED:return we.CANCELLED;case Ci.UNKNOWN:return we.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return we.INTERNAL;case Ci.UNAVAILABLE:return we.UNAVAILABLE;case Ci.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Ci.NOT_FOUND:return we.NOT_FOUND;case Ci.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Ci.ABORTED:return we.ABORTED;case Ci.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Ci.DATA_LOSS:return we.DATA_LOSS;default:return wt()}}(lr=Ci||(Ci={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";function Mc(){return new TextEncoder}const Zo=new ae([4294967295,4294967295],0);function Os(c){const e=Mc().encode(c),r=new ve;return r.update(e),new Uint8Array(r.digest())}function Du(c){const e=new DataView(c.buffer),r=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new ae([r,o],0),new ae([u,m],0)]}class Pc{constructor(e,r,o){if(this.bitmap=e,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Go(`Invalid padding: ${r}`);if(o<0)throw new Go(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new Go(`Invalid hash count: ${o}`);if(0===e.length&&0!==r)throw new Go(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ae.fromNumber(this.Ie)}Ee(e,r,o){let u=e.add(r.multiply(ae.fromNumber(o)));return 1===u.compare(Zo)&&(u=new ae([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=Os(e),[o,u]=Du(r);for(let m=0;m<this.hashCount;m++){const I=this.Ee(o,u,m);if(!this.de(I))return!1}return!0}static create(e,r,o){const u=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),I=new Pc(m,u,r);return o.forEach(P=>I.insert(P)),I}insert(e){if(0===this.Ie)return;const r=Os(e),[o,u]=Du(r);for(let m=0;m<this.hashCount;m++){const I=this.Ee(o,u,m);this.Ae(I)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ns{constructor(e,r,o,u,m){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,r,o){const u=new Map;return u.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,r,o)),new Ns(Yt.min(),u,new si(sn),Lr(),pr())}}class Xa{constructor(e,r,o,u,m){this.resumeToken=e,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,r,o){return new Xa(o,r,pr(),pr(),pr())}}class xc{constructor(e,r,o,u){this.Re=e,this.removedTargetIds=r,this.key=o,this.Ve=u}}class Od{constructor(e,r){this.targetId=e,this.me=r}}class qo{constructor(e,r,o=Mi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=o,this.cause=u}}class Wo{constructor(){this.fe=0,this.ge=Nd(),this.pe=Mi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pr(),r=pr(),o=pr();return this.ge.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:wt()}}),new Xa(this.pe,this.ye,e,r,o)}ve(){this.we=!1,this.ge=Nd()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Mo{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lr(),this.qe=Su(),this.Qe=new si(sn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const o=this.Ge(r);switch(e.state){case 0:this.ze(r)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.ve(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,o=e.me.count,u=this.Je(r);if(u){const m=u.target;if(Qa(m))if(0===o){const I=new Jt(m.path);this.Ue(r,I,Y.newNoDocument(I,Yt.min()))}else Ke(1===o);else{const I=this.Ye(r);if(I!==o){const P=this.Ze(e),L=P?this.Xe(P,e,I):1;0!==L&&(this.je(r),this.Qe=this.Qe.insert(r,2===L?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:m=0}=r;let I,P;try{I=gs(o).toUint8Array()}catch(L){if(L instanceof Wi)return Vt("Decoding the base64 bloom filter in existence filter failed ("+L.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw L}try{P=new Pc(I,u,m)}catch(L){return Vt(L instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",L),null}return 0===P.Ie?null:P}Xe(e,r,o){return r.me.count===o-this.nt(e,r.targetId)?0:2}nt(e,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(m=>{const I=this.Le.tt(),P=`projects/${I.projectId}/databases/${I.database}/documents/${m.path.canonicalString()}`;e.mightContain(P)||(this.Ue(r,m,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((m,I)=>{const P=this.Je(I);if(P){if(m.current&&Qa(P.target)){const L=new Jt(P.target.path);null!==this.ke.get(L)||this.it(I,L)||this.Ue(I,L,Y.newNoDocument(L,e))}m.be&&(r.set(I,m.Ce()),m.ve())}});let o=pr();this.qe.forEach((m,I)=>{let P=!0;I.forEachWhile(L=>{const J=this.Je(L);return!J||"TargetPurposeLimboResolution"===J.purpose||(P=!1,!1)}),P&&(o=o.add(m))}),this.ke.forEach((m,I)=>I.setReadTime(e));const u=new Ns(e,r,this.Qe,this.ke,o);return this.ke=Lr(),this.qe=Su(),this.Qe=new si(sn),u}$e(e,r){if(!this.ze(e))return;const o=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,o){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Wo,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Xr(sn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||Ee("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wo),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Su(){return new si(Jt.comparator)}function Nd(){return new si(Jt.comparator)}const Jh={asc:"ASCENDING",desc:"DESCENDING"},Pg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hr={and:"AND",or:"OR"};class Mu{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Rc(c,e){return c.useProto3Json||Te(e)?e:{value:e}}function ka(c,e){return c.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kd(c,e){return c.useProto3Json?e.toBase64():e.toUint8Array()}function Pu(c,e){return ka(c,e.toTimestamp())}function Li(c){return Ke(!!c),Yt.fromTimestamp(function(r){const o=ws(r);return new Jn(o.seconds,o.nanos)}(c))}function Fa(c,e){return Fd(c,e).canonicalString()}function Fd(c,e){const r=(u=c,new xn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function Xh(c){const e=xn.fromString(c);return Ke(Ve(e)),e}function xu(c,e){return Fa(c.databaseId,e.path)}function Po(c,e){const r=Xh(e);if(r.get(1)!==c.databaseId.projectId)throw new te(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+c.databaseId.projectId);if(r.get(3)!==c.databaseId.database)throw new te(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+c.databaseId.database);return new Jt(Ru(r))}function sp(c,e){return Fa(c.databaseId,e)}function qt(c){const e=Xh(c);return 4===e.length?xn.emptyPath():Ru(e)}function $r(c){return new xn(["projects",c.databaseId.projectId,"databases",c.databaseId.database]).canonicalString()}function Ru(c){return Ke(c.length>4&&"documents"===c.get(4)),c.popFirst(5)}function ec(c,e,r){return{name:xu(c,e),fields:r.value.mapValue.fields}}function Es(c,e,r){const o=Po(c,e.name),u=Li(e.updateTime),m=e.createTime?Li(e.createTime):Yt.min(),I=new li({mapValue:{fields:e.fields}}),P=Y.newFoundDocument(o,u,m,I);return r&&P.setHasCommittedMutations(),r?P.setHasCommittedMutations():P}function ks(c,e){let r;if(e instanceof Mn)r={update:ec(c,e.key,e.value)};else if(e instanceof pi)r={delete:xu(c,e.key)};else if(e instanceof Fr)r={update:ec(c,e.key,e.data),updateMask:fe(e.fieldMask)};else{if(!(e instanceof Yr))return wt();r={verify:xu(c,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(o=>function(m,I){const P=I.transform;if(P instanceof Sc)return{fieldPath:I.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(P instanceof zo)return{fieldPath:I.field.canonicalString(),appendMissingElements:{values:P.elements}};if(P instanceof Do)return{fieldPath:I.field.canonicalString(),removeAllFromArray:{values:P.elements}};if(P instanceof Na)return{fieldPath:I.field.canonicalString(),increment:P.Pe};throw wt()}(0,o))),e.precondition.isNone||(r.currentDocument=void 0!==(m=e.precondition).updateTime?{updateTime:Pu(c,m.updateTime)}:void 0!==m.exists?{exists:m.exists}:wt()),r;var m}function Nc(c,e){const r=e.currentDocument?void 0!==(m=e.currentDocument).updateTime?bi.updateTime(Li(m.updateTime)):void 0!==m.exists?bi.exists(m.exists):bi.none():bi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(I,P){let L=null;"setToServerValue"in P?(Ke("REQUEST_TIME"===P.setToServerValue),L=new Sc):"appendMissingElements"in P?L=new zo(P.appendMissingElements.values||[]):"removeAllFromArray"in P?L=new Do(P.removeAllFromArray.values||[]):"increment"in P?L=new Na(I,P.increment):wt();const J=sr.fromServerFormat(P.fieldPath);return new ha(J,L)}(c,u)):[];var m;if(e.update){const u=Po(c,e.update.name),m=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Ui((e.updateMask.fieldPaths||[]).map(he=>sr.fromServerFormat(he)));return new Fr(u,m,I,r,o)}return new Mn(u,m,r,o)}if(e.delete){const u=Po(c,e.delete);return new pi(u,r)}if(e.verify){const u=Po(c,e.verify);return new Yr(u,r)}return wt()}function Ld(c,e){return{documents:[sp(c,e.path)]}}function Vd(c,e){const r={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=sp(c,u);const m=function(J){if(0!==J.length)return W(An.create(J,"and"))}(e.filters);m&&(r.structuredQuery.where=m);const I=function(J){if(0!==J.length)return J.map(he=>{return{field:w((et=he).field),direction:fa(et.dir)};var et})}(e.orderBy);I&&(r.structuredQuery.orderBy=I);const P=Rc(c,e.limit);return null!==P&&(r.structuredQuery.limit=P),e.startAt&&(r.structuredQuery.startAt={before:(J=e.startAt).inclusive,values:J.position}),e.endAt&&(r.structuredQuery.endAt=function(J){return{before:!J.inclusive,values:J.position}}(e.endAt)),{_t:r,parent:u};var J}function Ws(c){let e=qt(c.parent);const r=c.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){Ke(1===o);const he=r.from[0];he.allDescendants?u=he.collectionId:e=e.child(he.collectionId)}let m=[];r.where&&(m=function(Me){const et=Nu(Me);return et instanceof An&&Ai(et)?et.getFilters():[et]}(r.where));let I=[];r.orderBy&&(I=r.orderBy.map(et=>{return new Lt(N((Wt=et).field),function(nn){switch(nn){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Wt.direction));var Wt}));let P=null;r.limit&&(P=function(Me){let et;return et="object"==typeof Me?Me.value:Me,Te(et)?null:et}(r.limit));let L=null;var Me;r.startAt&&(L=new Ne((Me=r.startAt).values||[],!!Me.before));let J=null;return r.endAt&&(J=function(Me){return new Ne(Me.values||[],!Me.before)}(r.endAt)),pe(e,u,I,m,P,"F",L,J)}function Nu(c){return void 0!==c.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=N(r.unaryFilter.field);return Qt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=N(r.unaryFilter.field);return Qt.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=N(r.unaryFilter.field);return Qt.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const I=N(r.unaryFilter.field);return Qt.create(I,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(c):void 0!==c.fieldFilter?Qt.create(N((r=c).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==c.compositeFilter?function(r){return An.create(r.compositeFilter.filters.map(o=>Nu(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return wt()}}(r.compositeFilter.op))}(c):wt();var r}function fa(c){return Jh[c]}function S(c){return Pg[c]}function O(c){return hr[c]}function w(c){return{fieldPath:c.canonicalString()}}function N(c){return sr.fromServerFormat(c.fieldPath)}function W(c){return c instanceof Qt?function(r){if("=="===r.op){if(is(r.value))return{unaryFilter:{field:w(r.field),op:"IS_NAN"}};if(Ni(r.value))return{unaryFilter:{field:w(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(is(r.value))return{unaryFilter:{field:w(r.field),op:"IS_NOT_NAN"}};if(Ni(r.value))return{unaryFilter:{field:w(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w(r.field),op:S(r.op),value:r.value}}}(c):c instanceof An?function(r){const o=r.getFilters().map(u=>W(u));return 1===o.length?o[0]:{compositeFilter:{op:O(r.op),filters:o}}}(c):wt()}function fe(c){const e=[];return c.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Ve(c){return c.length>=4&&"projects"===c.get(0)&&"databases"===c.get(2)}class St{constructor(e,r,o,u,m=Yt.min(),I=Yt.min(),P=Mi.EMPTY_BYTE_STRING,L=null){this.target=e,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=P,this.expectedCount=L}withSequenceNumber(e){return new St(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new St(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new St(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new St(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mt{constructor(e){this.ct=e}}function Tr(c,e){const r=e.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:di(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:xu(m=c.ct,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:ka(m,I.version.toTimestamp()),createTime:ka(m,I.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:Ir(e.version)};else{if(!e.isUnknownDocument())return wt();o.unknownDocument={path:r.path.toArray(),version:Ir(e.version)}}var m,I;return o}function di(c){const e=c.toTimestamp();return[e.seconds,e.nanoseconds]}function Ir(c){const e=c.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fs(c){const e=new Jn(c.seconds,c.nanoseconds);return Yt.fromTimestamp(e)}function io(c,e){const r=(e.baseMutations||[]).map(m=>Nc(c.ct,m));for(let m=0;m<e.mutations.length-1;++m)m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(e.mutations[m].updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m);const o=e.mutations.map(m=>Nc(c.ct,m)),u=Jn.fromMillis(e.localWriteTimeMs);return new Qi(e.batchId,u,r,o)}function Ro(c){const e=Fs(c.readTime),r=void 0!==c.lastLimboFreeSnapshotVersion?Fs(c.lastLimboFreeSnapshotVersion):Yt.min();let o;return o=void 0!==c.query.documents?(Ke(1===(m=c.query).documents.length),_i(ze(qt(m.documents[0])))):function(m){return _i(Ws(m))}(c.query),new St(o,c.targetId,"TargetPurposeListen",c.lastListenSequenceNumber,e,r,Mi.fromBase64String(c.resumeToken));var m}function pa(c,e){const r=Ir(e.snapshotVersion),o=Ir(e.lastLimboFreeSnapshotVersion);let u;u=Qa(e.target)?Ld(c.ct,e.target):Vd(c.ct,e.target)._t;const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xs(e.target),readTime:r,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Oo(c){const e=Ws({parent:c.parent,structuredQuery:c.structuredQuery});return"LAST"===c.limitType?Ya(e,e.limit,"L"):e}function nc(c,e){return new ys(e.largestBatchId,Nc(c.ct,e.overlayMutation))}function Ks(c,e){const r=e.path.lastSegment();return[c,Zt(e.path.popLast()),r]}function No(c,e,r,o){return{indexId:c,uid:e,sequenceNumber:r,readTime:Ir(o.readTime),documentKey:Zt(o.documentKey.path),largestBatchId:o.largestBatchId}}class ki{getBundleMetadata(e,r){return ef(e).get(r).next(o=>{if(o)return{id:(m=o).bundleId,createTime:Fs(m.createTime),version:m.version};var m})}saveBundleMetadata(e,r){return ef(e).put({bundleId:(u=r).id,createTime:Ir(Li(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return Ud(e).get(r).next(o=>{if(o)return{name:(m=o).name,query:Oo(m.bundledQuery),readTime:Fs(m.readTime)};var m})}saveNamedQuery(e,r){return Ud(e).put({name:(u=r).name,readTime:Ir(Li(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(c){return jr(c,"bundles")}function Ud(c){return jr(c,"namedQueries")}class Zl{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new Zl(e,r.uid||"")}getOverlay(e,r){return Ko(e).get(Ks(this.userId,r)).next(o=>o?nc(this.serializer,o):null)}getOverlays(e,r){const o=Rs();return at.forEach(r,u=>this.getOverlay(e,u).next(m=>{null!==m&&o.set(u,m)})).next(()=>o)}saveOverlays(e,r,o){const u=[];return o.forEach((m,I)=>{const P=new ys(r,I);u.push(this.ht(e,P))}),at.waitFor(u)}removeOverlaysForBatchId(e,r,o){const u=new Set;r.forEach(I=>u.add(Zt(I.getCollectionPath())));const m=[];return u.forEach(I=>{const P=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);m.push(Ko(e).j("collectionPathOverlayIndex",P))}),at.waitFor(m)}getOverlaysForCollection(e,r,o){const u=Rs(),m=Zt(r),I=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Ko(e).U("collectionPathOverlayIndex",I).next(P=>{for(const L of P){const J=nc(this.serializer,L);u.set(J.getKey(),J)}return u})}getOverlaysForCollectionGroup(e,r,o,u){const m=Rs();let I;const P=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Ko(e).J({index:"collectionGroupOverlayIndex",range:P},(L,J,he)=>{const Me=nc(this.serializer,J);m.size()<u||Me.largestBatchId===I?(m.set(Me.getKey(),Me),I=Me.largestBatchId):he.done()}).next(()=>m)}ht(e,r){return Ko(e).put(function(u,m,I){const[P,L,J]=Ks(m,I.mutation.key);return{userId:m,collectionPath:L,documentId:J,collectionGroup:I.mutation.key.getCollectionGroup(),largestBatchId:I.largestBatchId,overlayMutation:ks(u.ct,I.mutation)}}(this.serializer,this.userId,r))}}function Ko(c){return jr(c,"documentOverlays")}class Qo{constructor(){}Pt(e,r){this.It(e,r),r.Tt()}It(e,r){if("nullValue"in e)this.Et(r,5);else if("booleanValue"in e)this.Et(r,10),r.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(r,15),r.dt(Ei(e.integerValue));else if("doubleValue"in e){const o=Ei(e.doubleValue);isNaN(o)?this.Et(r,13):(this.Et(r,15),Xe(o)?r.dt(0):r.dt(o))}else if("timestampValue"in e){let o=e.timestampValue;this.Et(r,20),"string"==typeof o&&(o=ws(o)),r.At(`${o.seconds||""}`),r.dt(o.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,r),this.Vt(r);else if("bytesValue"in e)this.Et(r,30),r.ft(gs(e.bytesValue)),this.Vt(r);else if("referenceValue"in e)this.gt(e.referenceValue,r);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(r,45),r.dt(o.latitude||0),r.dt(o.longitude||0)}else"mapValue"in e?ai(e)?this.Et(r,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,r),this.Vt(r)):"arrayValue"in e?(this.wt(e.arrayValue,r),this.Vt(r)):wt()}Rt(e,r){this.Et(r,25),this.St(e,r)}St(e,r){r.At(e)}yt(e,r){const o=e.fields||{};this.Et(r,55);for(const u of Object.keys(o))this.Rt(u,r),this.It(o[u],r)}wt(e,r){const o=e.values||[];this.Et(r,50);for(const u of o)this.It(u,r)}gt(e,r){this.Et(r,37),Jt.fromName(e).path.forEach(o=>{this.Et(r,60),this.St(o,r)})}Et(e,r){e.dt(r)}Vt(e){e.dt(2)}}function tf(c){if(0===c)return 8;let e=0;return!(c>>4)&&(e+=4,c<<=4),!(c>>6)&&(e+=2,c<<=2),!(c>>7)&&(e+=1),e}function ku(c){const e=64-function(o){let u=0;for(let m=0;m<8;++m){const I=tf(255&o[m]);if(u+=I,8!==I)break}return u}(c);return Math.ceil(e/8)}Qo.bt=new Qo;class Yo{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const r=e[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ct(o.value),o=r.next();this.vt()}Ft(e){const r=e[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Mt(o.value),o=r.next();this.xt()}Ot(e){for(const r of e){const o=r.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=r.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const r of e){const o=r.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=r.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const r=this.Bt(e),o=ku(r);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}qt(e){const r=this.Bt(e),o=ku(r);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const r=function(m){const I=new DataView(new ArrayBuffer(8));return I.setFloat64(0,m,!1),new Uint8Array(I.buffer)}(e),o=0!=(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ct(e){const r=255&e;0===r?(this.Kt(0),this.Kt(255)):255===r?(this.Kt(255),this.Kt(0)):this.Kt(r)}Mt(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const r=e+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Lu{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class La{constructor(){this.Gt=new Yo,this.zt=new Fu(this.Gt),this.jt=new Lu(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Va{constructor(e,r,o,u){this.indexId=e,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Va(this.indexId,this.documentKey,this.arrayValue,o)}}function Jo(c,e){let r=c.indexId-e.indexId;return 0!==r?r:(r=Bd(c.arrayValue,e.arrayValue),0!==r?r:(r=Bd(c.directionalValue,e.directionalValue),0!==r?r:Jt.comparator(c.documentKey,e.documentKey)))}function Bd(c,e){for(let r=0;r<c.length&&r<e.length;++r){const o=c[r]-e[r];if(0!==o)return o}return c.length-e.length}class Vu{constructor(e){this.Yt=new Xr((r,o)=>sr.comparator(r.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const r of e.filters){const o=r;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(Ke(e.collectionGroup===this.collectionId),this.en)return!1;const r=Bn(e);if(void 0!==r&&!this.nn(r))return!1;const o=Hn(e);let u=new Set,m=0,I=0;for(;m<o.length&&this.nn(o[m]);++m)u=u.add(o[m].fieldPath.canonicalString());if(m===o.length)return!0;if(this.Yt.size>0){const P=this.Yt.getIterator().getNext();if(!u.has(P.field.canonicalString())){const L=o[m];if(!this.rn(P,L)||!this.sn(this.Zt[I++],L))return!1}++m}for(;m<o.length;++m)if(I>=this.Zt.length||!this.sn(this.Zt[I++],o[m]))return!1;return!0}on(){if(this.en)return null;let e=new Xr(sr.comparator);const r=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new br(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),r.push(new br(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),r.push(new br(o.field,"asc"===o.dir?0:1)));return new In(In.UNKNOWN_ID,this.collectionId,r,Wn.empty())}nn(e){for(const r of this.Xt)if(this.rn(r,e))return!0;return!1}rn(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Uu(c){var e,r;if(Ke(c instanceof Qt||c instanceof An),c instanceof Qt){if(c instanceof po){const u=(null===(r=null===(e=c.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(m=>Qt.create(c.field,"==",m)))||[];return An.create(u,"or")}return c}const o=c.filters.map(u=>Uu(u));return An.create(o,c.op)}function kc(c){if(0===c.getFilters().length)return[];const e=ga(Uu(c));return Ke(xg(e)),fl(e)||Gl(e)?[e]:e.getFilters()}function fl(c){return c instanceof Qt}function Gl(c){return c instanceof An&&Ai(c)}function xg(c){return fl(c)||Gl(c)||function(r){if(r instanceof An&&jn(r)){for(const o of r.getFilters())if(!fl(o)&&!Gl(o))return!1;return!0}return!1}(c)}function ga(c){if(Ke(c instanceof Qt||c instanceof An),c instanceof Qt)return c;if(1===c.filters.length)return ga(c.filters[0]);const e=c.filters.map(o=>ga(o));let r=An.create(e,c.op);return r=Hd(r),xg(r)?r:(Ke(r instanceof An),Ke(mr(r)),Ke(r.filters.length>1),r.filters.reduce((o,u)=>jd(o,u)))}function jd(c,e){let r;return Ke(c instanceof Qt||c instanceof An),Ke(e instanceof Qt||e instanceof An),r=c instanceof Qt?e instanceof Qt?An.create([c,e],"and"):op(c,e):e instanceof Qt?op(e,c):function(u,m){if(Ke(u.filters.length>0&&m.filters.length>0),mr(u)&&mr(m))return Ur(u,m.getFilters());const I=jn(u)?u:m,P=jn(u)?m:u,L=I.filters.map(J=>jd(J,P));return An.create(L,"or")}(c,e),Hd(r)}function op(c,e){if(mr(e))return Ur(e,c.getFilters());{const r=e.filters.map(o=>jd(c,o));return An.create(r,"or")}}function Hd(c){if(Ke(c instanceof Qt||c instanceof An),c instanceof Qt)return c;const e=c.getFilters();if(1===e.length)return Hd(e[0]);if(zr(c))return c;const r=e.map(u=>Hd(u)),o=[];return r.forEach(u=>{u instanceof Qt?o.push(u):u instanceof An&&(u.op===c.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:An.create(o,c.op)}class Rg{constructor(){this._n=new zd}addToCollectionParentIndex(e,r){return this._n.add(r),at.resolve()}getCollectionParents(e,r){return at.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return at.resolve()}deleteFieldIndex(e,r){return at.resolve()}deleteAllFieldIndexes(e){return at.resolve()}createTargetIndexes(e,r){return at.resolve()}getDocumentsMatchingTarget(e,r){return at.resolve(null)}getIndexType(e,r){return at.resolve(0)}getFieldIndexes(e,r){return at.resolve([])}getNextCollectionGroupToUpdate(e){return at.resolve(null)}getMinOffset(e,r){return at.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,r){return at.resolve(gn.min())}updateCollectionGroup(e,r,o){return at.resolve()}updateIndexEntries(e,r){return at.resolve()}}class zd{constructor(){this.index={}}add(e){const r=e.lastSegment(),o=e.popLast(),u=this.index[r]||new Xr(xn.comparator),m=!u.has(o);return this.index[r]=u.add(o),m}has(e){const r=e.lastSegment(),o=e.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Xr(xn.comparator)).toArray()}}const pl=new Uint8Array(0);class Bu{constructor(e,r){this.databaseId=r,this.an=new zd,this.un=new vs(o=>xs(o),(o,u)=>To(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.an.has(r)){const o=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.an.add(r)});const m={collectionId:o,parent:Zt(u)};return ap(e).put(m)}return at.resolve()}getCollectionParents(e,r){const o=[],u=IDBKeyRange.bound([r,""],[gr(r),""],!1,!0);return ap(e).U(u).next(m=>{for(const I of m){if(I.collectionId!==r)break;o.push(fn(I.parent))}return o})}addFieldIndex(e,r){const o=gl(e),u={indexId:(P=r).indexId,collectionGroup:P.collectionGroup,fields:P.fields.map(L=>[L.fieldPath.canonicalString(),L.kind])};var P;delete u.indexId;const m=o.add(u);if(r.indexState){const I=ea(e);return m.next(P=>{I.put(No(P,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return m.next()}deleteFieldIndex(e,r){const o=gl(e),u=ea(e),m=Xo(e);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=gl(e),o=Xo(e),u=ea(e);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(e,r){return at.forEach(this.cn(r),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const m=new Vu(o).on();if(null!=m)return this.addFieldIndex(e,m)}}))}getDocumentsMatchingTarget(e,r){const o=Xo(e);let u=!0;const m=new Map;return at.forEach(this.cn(r),I=>this.ln(e,I).next(P=>{u&&(u=!!P),m.set(I,P)})).next(()=>{if(u){let I=pr();const P=[];return at.forEach(m,(L,J)=>{var Kn;Ee("IndexedDbIndexManager",`Using index ${Kn=L,`id=${Kn.indexId}|cg=${Kn.collectionGroup}|f=${Kn.fields.map(Sr=>`${Sr.fieldPath}:${Sr.kind}`).join(",")}`} to execute ${xs(r)}`);const he=function(Kn,Sr){const wi=Bn(Sr);if(void 0===wi)return null;for(const qr of Bo(Kn,wi.fieldPath))switch(qr.op){case"array-contains-any":return qr.value.arrayValue.values||[];case"array-contains":return[qr.value]}return null}(J,L),Me=function(Kn,Sr){const wi=new Map;for(const qr of Hn(Sr))for(const pt of Bo(Kn,qr.fieldPath))switch(pt.op){case"==":case"in":wi.set(qr.fieldPath.canonicalString(),pt.value);break;case"not-in":case"!=":return wi.set(qr.fieldPath.canonicalString(),pt.value),Array.from(wi.values())}return null}(J,L),et=function(Kn,Sr){const wi=[];let qr=!0;for(const pt of Hn(Sr)){const Qe=0===pt.kind?Q(Kn,pt.fieldPath,Kn.startAt):ie(Kn,pt.fieldPath,Kn.startAt);wi.push(Qe.value),qr&&(qr=Qe.inclusive)}return new Ne(wi,qr)}(J,L),Ct=function(Kn,Sr){const wi=[];let qr=!0;for(const pt of Hn(Sr)){const Qe=0===pt.kind?ie(Kn,pt.fieldPath,Kn.endAt):Q(Kn,pt.fieldPath,Kn.endAt);wi.push(Qe.value),qr&&(qr=Qe.inclusive)}return new Ne(wi,qr)}(J,L),Wt=this.hn(L,J,et),hn=this.hn(L,J,Ct),nn=this.Pn(L,J,Me),Zn=this.In(L.indexId,he,Wt,et.inclusive,hn,Ct.inclusive,nn);return at.forEach(Zn,or=>o.G(or,r.limit).next(Kn=>{Kn.forEach(Sr=>{const wi=Jt.fromSegments(Sr.documentKey);I.has(wi)||(I=I.add(wi),P.push(wi))})}))}).next(()=>P)}return at.resolve(null)})}cn(e){let r=this.un.get(e);return r||(r=0===e.filters.length?[e]:kc(An.create(e.filters,"and")).map(o=>Sa(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,r),r)}In(e,r,o,u,m,I,P){const L=(null!=r?r.length:1)*Math.max(o.length,m.length),J=L/(null!=r?r.length:1),he=[];for(let Me=0;Me<L;++Me){const et=r?this.Tn(r[Me/J]):pl,Ct=this.En(e,et,o[Me%J],u),Wt=this.dn(e,et,m[Me%J],I),hn=P.map(nn=>this.En(e,et,nn,!0));he.push(...this.createRange(Ct,Wt,hn))}return he}En(e,r,o,u){const m=new Va(e,Jt.empty(),r,o);return u?m:m.Jt()}dn(e,r,o,u){const m=new Va(e,Jt.empty(),r,o);return u?m.Jt():m}ln(e,r){const o=new Vu(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let I=null;for(const P of m)o.tn(P)&&(!I||P.fields.length>I.fields.length)&&(I=P);return I})}getIndexType(e,r){let o=2;const u=this.cn(r);return at.forEach(u,m=>this.ln(e,m).next(I=>{I?0!==o&&I.fields.length<function(L){let J=new Xr(sr.comparator),he=!1;for(const Me of L.filters)for(const et of Me.getFlattenedFilters())et.field.isKeyField()||("array-contains"===et.op||"array-contains-any"===et.op?he=!0:J=J.add(et.field));for(const Me of L.orderBy)Me.field.isKeyField()||(J=J.add(Me.field));return J.size+(he?1:0)}(m)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}An(e,r){const o=new La;for(const u of Hn(e)){const m=r.data.field(u.fieldPath);if(null==m)return null;const I=o.Ht(u.kind);Qo.bt.Pt(m,I)}return o.Wt()}Tn(e){const r=new La;return Qo.bt.Pt(e,r.Ht(0)),r.Wt()}Rn(e,r){const o=new La;return Qo.bt.Pt(_n(this.databaseId,r),o.Ht(function(m){const I=Hn(m);return 0===I.length?0:I[I.length-1].kind}(e))),o.Wt()}Pn(e,r,o){if(null===o)return[];let u=[];u.push(new La);let m=0;for(const I of Hn(e)){const P=o[m++];for(const L of u)if(this.Vn(r,I.fieldPath)&&xr(P))u=this.mn(u,I,P);else{const J=L.Ht(I.kind);Qo.bt.Pt(P,J)}}return this.fn(u)}hn(e,r,o){return this.Pn(e,r,o.position)}fn(e){const r=[];for(let o=0;o<e.length;++o)r[o]=e[o].Wt();return r}mn(e,r,o){const u=[...e],m=[];for(const I of o.arrayValue.values||[])for(const P of u){const L=new La;L.seed(P.Wt()),Qo.bt.Pt(I,L.Ht(r.kind)),m.push(L)}return m}Vn(e,r){return!!e.filters.find(o=>o instanceof Qt&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,r){const o=gl(e),u=ea(e);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(m=>{const I=[];return at.forEach(m,P=>u.get([P.indexId,this.uid]).next(L=>{I.push(function(he,Me){const et=Me?new Wn(Me.sequenceNumber,new gn(Fs(Me.readTime),new Jt(fn(Me.documentKey)),Me.largestBatchId)):Wn.empty(),Ct=he.fields.map(([Wt,hn])=>new br(sr.fromServerFormat(Wt),hn));return new In(he.indexId,he.collectionGroup,Ct,et)}(P,L))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((o,u)=>{const m=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:sn(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,o){const u=gl(e),m=ea(e);return this.gn(e).next(I=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(P=>at.forEach(P,L=>m.put(No(L.indexId,this.uid,I,o)))))}updateIndexEntries(e,r){const o=new Map;return at.forEach(r,(u,m)=>{const I=o.get(u.collectionGroup);return(I?at.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(P=>(o.set(u.collectionGroup,P),at.forEach(P,L=>this.pn(e,u,L).next(J=>{const he=this.yn(m,L);return J.isEqual(he)?at.resolve():this.wn(e,m,L,J,he)}))))})}Sn(e,r,o,u){return Xo(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,r.key),documentKey:r.key.path.toArray()})}bn(e,r,o,u){return Xo(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,r.key),r.key.path.toArray()])}pn(e,r,o){const u=Xo(e);let m=new Xr(Jo);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,r)])},(I,P)=>{m=m.add(new Va(o.indexId,r,P.arrayValue,P.directionalValue))}).next(()=>m)}yn(e,r){let o=new Xr(Jo);const u=this.An(r,e);if(null==u)return o;const m=Bn(r);if(null!=m){const I=e.data.field(m.fieldPath);if(xr(I))for(const P of I.arrayValue.values||[])o=o.add(new Va(r.indexId,e.key,this.Tn(P),u))}else o=o.add(new Va(r.indexId,e.key,pl,u));return o}wn(e,r,o,u,m){Ee("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const I=[];return function(L,J,he,Me,et){const Ct=L.getIterator(),Wt=J.getIterator();let hn=Us(Ct),nn=Us(Wt);for(;hn||nn;){let Zn=!1,or=!1;if(hn&&nn){const Kn=he(hn,nn);Kn<0?or=!0:Kn>0&&(Zn=!0)}else null!=hn?or=!0:Zn=!0;Zn?(Me(nn),nn=Us(Wt)):or?(et(hn),hn=Us(Ct)):(hn=Us(Ct),nn=Us(Wt))}}(u,m,Jo,P=>{I.push(this.Sn(e,r,o,P))},P=>{I.push(this.bn(e,r,o,P))}),at.waitFor(I)}gn(e){let r=1;return ea(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,m)=>{m.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,o){o=o.sort((I,P)=>Jo(I,P)).filter((I,P,L)=>!P||0!==Jo(I,L[P-1]));const u=[];u.push(e);for(const I of o){const P=Jo(I,e),L=Jo(I,r);if(0===P)u[0]=e.Jt();else if(P>0&&L<0)u.push(I),u.push(I.Jt());else if(L>0)break}u.push(r);const m=[];for(let I=0;I<u.length;I+=2){if(this.Dn(u[I],u[I+1]))return[];m.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,pl,[]],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,pl,[]]))}return m}Dn(e,r){return Jo(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Og)}getMinOffset(e,r){return at.mapArray(this.cn(r),o=>this.ln(e,o).next(u=>u||wt())).next(Og)}}function ap(c){return jr(c,"collectionParents")}function Xo(c){return jr(c,"indexEntries")}function gl(c){return jr(c,"indexConfiguration")}function ea(c){return jr(c,"indexState")}function Og(c){Ke(0!==c.length);let e=c[0].indexState.offset,r=e.largestBatchId;for(let o=1;o<c.length;o++){const u=c[o].indexState.offset;Vr(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new gn(e.readTime,e.documentKey,r)}const ju={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ls{constructor(e,r,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ls(e,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cp(c,e,r){const o=c.store("mutations"),u=c.store("documentMutations"),m=[],I=IDBKeyRange.only(r.batchId);let P=0;const L=o.J({range:I},(he,Me,et)=>(P++,et.delete()));m.push(L.next(()=>{Ke(1===P)}));const J=[];for(const he of r.mutations){const Me=He(e,he.key.path,r.batchId);m.push(u.delete(Me)),J.push(he.key)}return at.waitFor(m).next(()=>J)}function Ji(c){if(!c)return 0;let e;if(c.document)e=c.document;else if(c.unknownDocument)e=c.unknownDocument;else{if(!c.noDocument)throw wt();e=c.noDocument}return JSON.stringify(e).length}Ls.DEFAULT_COLLECTION_PERCENTILE=10,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ls.DEFAULT=new Ls(41943040,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ls.DISABLED=new Ls(-1,0,0);class ql{constructor(e,r,o,u){this.userId=e,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,r,o,u){Ke(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new ql(m,r,o,u)}checkEmpty(e){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).J({index:"userMutationsIndex",range:o},(u,m,I)=>{r=!1,I.done()}).next(()=>r)}addMutationBatch(e,r,o,u){const m=Ua(e),I=ta(e);return I.add({}).next(P=>{Ke("number"==typeof P);const L=new Qi(P,r,o,u),J=function(Ct,Wt,hn){const nn=hn.baseMutations.map(or=>ks(Ct.ct,or)),Zn=hn.mutations.map(or=>ks(Ct.ct,or));return{userId:Wt,batchId:hn.batchId,localWriteTimeMs:hn.localWriteTime.toMillis(),baseMutations:nn,mutations:Zn}}(this.serializer,this.userId,L),he=[];let Me=new Xr((et,Ct)=>sn(et.canonicalString(),Ct.canonicalString()));for(const et of u){const Ct=He(this.userId,et.key.path,P);Me=Me.add(et.key.path.popLast()),he.push(I.put(J)),he.push(m.put(Ct,nt))}return Me.forEach(et=>{he.push(this.indexManager.addToCollectionParentIndex(e,et))}),e.addOnCommittedListener(()=>{this.Cn[P]=L.keys()}),at.waitFor(he).next(()=>L)})}lookupMutationBatch(e,r){return ta(e).get(r).next(o=>o?(Ke(o.userId===this.userId),io(this.serializer,o)):null)}vn(e,r){return this.Cn[r]?at.resolve(this.Cn[r]):this.lookupMutationBatch(e,r).next(o=>{if(o){const u=o.keys();return this.Cn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return ta(e).J({index:"userMutationsIndex",range:u},(I,P,L)=>{P.userId===this.userId&&(Ke(P.batchId>=o),m=io(this.serializer,P)),L.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ta(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,m,I)=>{o=m.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).U("userMutationsIndex",r).next(o=>o.map(u=>io(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const o=Je(this.userId,r.path),u=IDBKeyRange.lowerBound(o),m=[];return Ua(e).J({range:u},(I,P,L)=>{const[J,he,Me]=I,et=fn(he);if(J===this.userId&&r.path.isEqual(et))return ta(e).get(Me).next(Ct=>{if(!Ct)throw wt();Ke(Ct.userId===this.userId),m.push(io(this.serializer,Ct))});L.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Xr(sn);const u=[];return r.forEach(m=>{const I=Je(this.userId,m.path),P=IDBKeyRange.lowerBound(I),L=Ua(e).J({range:P},(J,he,Me)=>{const[et,Ct,Wt]=J,hn=fn(Ct);et===this.userId&&m.path.isEqual(hn)?o=o.add(Wt):Me.done()});u.push(L)}),at.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,u=o.length+1,m=Je(this.userId,o),I=IDBKeyRange.lowerBound(m);let P=new Xr(sn);return Ua(e).J({range:I},(L,J,he)=>{const[Me,et,Ct]=L,Wt=fn(et);Me===this.userId&&o.isPrefixOf(Wt)?Wt.length===u&&(P=P.add(Ct)):he.done()}).next(()=>this.Fn(e,P))}Fn(e,r){const o=[],u=[];return r.forEach(m=>{u.push(ta(e).get(m).next(I=>{if(null===I)throw wt();Ke(I.userId===this.userId),o.push(io(this.serializer,I))}))}),at.waitFor(u).next(()=>o)}removeMutationBatch(e,r){return cp(e._e,this.userId,r).next(o=>(e.addOnCommittedListener(()=>{this.Mn(r.batchId)}),at.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return at.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Ua(e).J({range:o},(m,I,P)=>{if(m[0]===this.userId){const L=fn(m[1]);u.push(L)}else P.done()}).next(()=>{Ke(0===u.length)})})}containsKey(e,r){return Hu(e,this.userId,r)}xn(e){return ml(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hu(c,e,r){const o=Je(e,r.path),u=o[1],m=IDBKeyRange.lowerBound(o);let I=!1;return Ua(c).J({range:m,H:!0},(P,L,J)=>{const[he,Me,et]=P;he===e&&Me===u&&(I=!0),J.done()}).next(()=>I)}function ta(c){return jr(c,"mutations")}function Ua(c){return jr(c,"documentMutations")}function ml(c){return jr(c,"mutationQueues")}class Zr{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Zr(0)}static Ln(){return new Zr(-1)}}class _l{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.Bn(e).next(r=>{const o=new Zr(r.highestTargetId);return r.highestTargetId=o.next(),this.kn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(r=>Yt.fromTimestamp(new Jn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.kn(e,u)))}addTargetData(e,r){return this.qn(e,r).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.Qn(r,o),this.kn(e,o))))}updateTargetData(e,r){return this.qn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>ko(e).delete(r.targetId)).next(()=>this.Bn(e)).next(o=>(Ke(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,r,o){let u=0;const m=[];return ko(e).J((I,P)=>{const L=Ro(P);L.sequenceNumber<=r&&null===o.get(L.targetId)&&(u++,m.push(this.removeTargetData(e,L)))}).next(()=>at.waitFor(m)).next(()=>u)}forEachTarget(e,r){return ko(e).J((o,u)=>{const m=Ro(u);r(m)})}Bn(e){return zu(e).get("targetGlobalKey").next(r=>(Ke(null!==r),r))}kn(e,r){return zu(e).put("targetGlobalKey",r)}qn(e,r){return ko(e).put(pa(this.serializer,r))}Qn(e,r){let o=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,o=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(r=>r.targetCount)}getTargetData(e,r){const o=xs(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return ko(e).J({range:u,index:"queryTargetsIndex"},(I,P,L)=>{const J=Ro(P);To(r,J.target)&&(m=J,L.done())}).next(()=>m)}addMatchingKeys(e,r,o){const u=[],m=Ba(e);return r.forEach(I=>{const P=Zt(I.path);u.push(m.put({targetId:o,path:P})),u.push(this.referenceDelegate.addReference(e,o,I))}),at.waitFor(u)}removeMatchingKeys(e,r,o){const u=Ba(e);return at.forEach(r,m=>{const I=Zt(m.path);return at.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,r){const o=Ba(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=Ba(e);let m=pr();return u.J({range:o,H:!0},(I,P,L)=>{const J=fn(I[1]),he=new Jt(J);m=m.add(he)}).next(()=>m)}containsKey(e,r){const o=Zt(r.path),u=IDBKeyRange.bound([o],[gr(o)],!1,!0);let m=0;return Ba(e).J({index:"documentTargetsIndex",H:!0,range:u},([I,P],L,J)=>{0!==I&&(m++,J.done())}).next(()=>m>0)}ot(e,r){return ko(e).get(r).next(o=>o?Ro(o):null)}}function ko(c){return jr(c,"targets")}function zu(c){return jr(c,"targetGlobal")}function Ba(c){return jr(c,"targetDocuments")}function $d([c,e],[r,o]){const u=sn(c,r);return 0===u?sn(e,o):u}class Zd{constructor(e){this.Kn=e,this.buffer=new Xr($d),this.$n=0}Un(){return++this.$n}Wn(e){const r=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();$d(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Wl{constructor(e,r,o){this.garbageCollector=e,this.asyncQueue=r,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var r=this;Ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){r.Gn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){zn(o)?Ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield wr(o)}yield r.zn(3e5)}))}}class Fc{constructor(e,r){this.jn=e,this.params=r}calculateTargetCount(e,r){return this.jn.Hn(e).next(o=>Math.floor(r/100*o))}nthSequenceNumber(e,r){if(0===r)return at.resolve(U.oe);const o=new Zd(r);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,r,o){return this.jn.removeTargets(e,r,o)}removeOrphanedDocuments(e,r){return this.jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(ju)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ju):this.Yn(e,r))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,r){let o,u,m,I,P,L,J;const he=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Me=>(Me>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Me}`),u=this.params.maximumSequenceNumbersToCollect):u=Me,I=Date.now(),this.nthSequenceNumber(e,u))).next(Me=>(o=Me,P=Date.now(),this.removeTargets(e,o,r))).next(Me=>(m=Me,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(Me=>(J=Date.now(),dt()<=Se.in.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-he}ms\n\tDetermined least recently used ${u} in `+(P-I)+`ms\n\tRemoved ${m} targets in `+(L-P)+`ms\n\tRemoved ${Me} documents in `+(J-L)+`ms\nTotal Duration: ${J-he}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:Me})))}}class nf{constructor(e,r){this.db=e,this.garbageCollector=function $u(c,e){return new Fc(c,e)}(this,r)}Hn(e){const r=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>r.next(u=>o+u))}Zn(e){let r=0;return this.Jn(e,o=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Jn(e,r){return this.Xn(e,(o,u)=>r(u))}addReference(e,r,o){return vl(e,o)}removeReference(e,r,o){return vl(e,o)}removeTargets(e,r,o){return this.db.getTargetCache().removeTargets(e,r,o)}markPotentiallyOrphaned(e,r){return vl(e,r)}er(e,r){return function(u,m){let I=!1;return ml(u).Y(P=>Hu(u,P,m).next(L=>(L&&(I=!0),at.resolve(!L)))).next(()=>I)}(e,r)}removeOrphanedDocuments(e,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Xn(e,(I,P)=>{if(P<=r){const L=this.er(e,I).next(J=>{if(!J)return m++,o.getEntry(e,I).next(()=>(o.removeEntry(I,Yt.min()),Ba(e).delete([0,Zt(I.path)])))});u.push(L)}}).next(()=>at.waitFor(u)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,r){const o=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,r){return vl(e,r)}Xn(e,r){const o=Ba(e);let u,m=U.oe;return o.J({index:"documentTargetsIndex"},([I,P],{path:L,sequenceNumber:J})=>{0===I?(m!==U.oe&&r(new Jt(fn(u)),m),m=J,u=L):m=U.oe}).next(()=>{m!==U.oe&&r(new Jt(fn(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vl(c,e){return Ba(c).put((u=c.currentSequenceNumber,{targetId:0,path:Zt(e.path),sequenceNumber:u}));var u}class rc{constructor(){this.changes=new vs(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Y.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?at.resolve(o):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,o){return ma(e).put(o)}removeEntry(e,r,o){return ma(e).delete(function(m,I){const P=m.path.toArray();return[P.slice(0,P.length-2),P[P.length-2],di(I),P[P.length-1]]}(r,o))}updateMetadata(e,r){return this.getMetadata(e).next(o=>(o.byteSize+=r,this.tr(e,o)))}getEntry(e,r){let o=Y.newInvalidDocument(r);return ma(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lc(r))},(u,m)=>{o=this.nr(r,m)}).next(()=>o)}rr(e,r){let o={size:0,document:Y.newInvalidDocument(r)};return ma(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lc(r))},(u,m)=>{o={document:this.nr(r,m),size:Ji(m)}}).next(()=>o)}getEntries(e,r){let o=Lr();return this.ir(e,r,(u,m)=>{const I=this.nr(u,m);o=o.insert(u,I)}).next(()=>o)}sr(e,r){let o=Lr(),u=new si(Jt.comparator);return this.ir(e,r,(m,I)=>{const P=this.nr(m,I);o=o.insert(m,P),u=u.insert(m,Ji(I))}).next(()=>({documents:o,_r:u}))}ir(e,r,o){if(r.isEmpty())return at.resolve();let u=new Xr(Kl);r.forEach(L=>u=u.add(L));const m=IDBKeyRange.bound(Lc(u.first()),Lc(u.last())),I=u.getIterator();let P=I.getNext();return ma(e).J({index:"documentKeyIndex",range:m},(L,J,he)=>{const Me=Jt.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;P&&Kl(P,Me)<0;)o(P,null),P=I.getNext();P&&P.isEqual(Me)&&(o(P,J),P=I.hasNext()?I.getNext():null),P?he.$(Lc(P)):he.done()}).next(()=>{for(;P;)o(P,null),P=I.hasNext()?I.getNext():null})}getDocumentsMatchingQuery(e,r,o,u,m){const I=r.path,P=[I.popLast().toArray(),I.lastSegment(),di(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],L=[I.popLast().toArray(),I.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ma(e).U(IDBKeyRange.bound(P,L,!0)).next(J=>{m?.incrementDocumentReadCount(J.length);let he=Lr();for(const Me of J){const et=this.nr(Jt.fromSegments(Me.prefixPath.concat(Me.collectionGroup,Me.documentId)),Me);et.isFoundDocument()&&(ca(r,et)||u.has(et.key))&&(he=he.insert(et.key,et))}return he})}getAllFromCollectionGroup(e,r,o,u){let m=Lr();const I=qd(r,o),P=qd(r,gn.max());return ma(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,P,!0)},(L,J,he)=>{const Me=this.nr(Jt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);m=m.insert(Me.key,Me),m.size===u&&he.done()}).next(()=>m)}newChangeBuffer(e){return new Gd(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return yl(e).get("remoteDocumentGlobalKey").next(r=>(Ke(!!r),r))}tr(e,r){return yl(e).put("remoteDocumentGlobalKey",r)}nr(e,r){if(r){const o=function Tn(c,e){let r;if(e.document)r=Es(c.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Jt.fromSegments(e.noDocument.path),u=Fs(e.noDocument.readTime);r=Y.newNoDocument(o,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt();{const o=Jt.fromSegments(e.unknownDocument.path),u=Fs(e.unknownDocument.version);r=Y.newUnknownDocument(o,u)}}return e.readTime&&r.setReadTime(function(u){const m=new Jn(u[0],u[1]);return Yt.fromTimestamp(m)}(e.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(Yt.min()))return o}return Y.newInvalidDocument(e)}}function Vs(c){return new lp(c)}class Gd extends rc{constructor(e,r){super(),this.ar=e,this.trackRemovals=r,this.ur=new vs(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const r=[];let o=0,u=new Xr((m,I)=>sn(m.canonicalString(),I.canonicalString()));return this.changes.forEach((m,I)=>{const P=this.ur.get(m);if(r.push(this.ar.removeEntry(e,m,P.readTime)),I.isValidDocument()){const L=Tr(this.ar.serializer,I);u=u.add(m.path.popLast());const J=Ji(L);o+=J-P.size,r.push(this.ar.addEntry(e,m,L))}else if(o-=P.size,this.trackRemovals){const L=Tr(this.ar.serializer,I.convertToNoDocument(Yt.min()));r.push(this.ar.addEntry(e,m,L))}}),u.forEach(m=>{r.push(this.ar.indexManager.addToCollectionParentIndex(e,m))}),r.push(this.ar.updateMetadata(e,o)),at.waitFor(r)}getFromCache(e,r){return this.ar.rr(e,r).next(o=>(this.ur.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,r){return this.ar.sr(e,r).next(({documents:o,_r:u})=>(u.forEach((m,I)=>{this.ur.set(m,{size:I,readTime:o.get(m).readTime})}),o))}}function yl(c){return jr(c,"remoteDocumentGlobal")}function ma(c){return jr(c,"remoteDocumentsV14")}function Lc(c){const e=c.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qd(c,e){const r=e.documentKey.path.toArray();return[c,di(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Kl(c,e){const r=c.path.toArray(),o=e.path.toArray();let u=0;for(let m=0;m<r.length-2&&m<o.length-2;++m)if(u=sn(r[m],o[m]),u)return u;return u=sn(r.length,o.length),u||(u=sn(r[r.length-2],o[o.length-2]),u||sn(r[r.length-1],o[o.length-1]))}class _a{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Xt{constructor(e,r,o,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,r){let o=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==o&&Ue(o.mutation,u,Ui.empty(),Jn.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(o=>this.getLocalViewOfDocuments(e,o,pr()).next(()=>o))}getLocalViewOfDocuments(e,r,o=pr()){const u=Rs();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,o).next(m=>{let I=ji();return m.forEach((P,L)=>{I=I.insert(P,L.overlayedDocument)}),I}))}getOverlayedDocuments(e,r){const o=Rs();return this.populateOverlays(e,o,r).next(()=>this.computeViews(e,r,o,pr()))}populateOverlays(e,r,o){const u=[];return o.forEach(m=>{r.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((I,P)=>{r.set(I,P)})})}computeViews(e,r,o,u){let m=Lr();const I=wo(),P=wo();return r.forEach((L,J)=>{const he=o.get(J.key);u.has(J.key)&&(void 0===he||he.mutation instanceof Fr)?m=m.insert(J.key,J):void 0!==he?(I.set(J.key,he.mutation.getFieldMask()),Ue(he.mutation,J,he.mutation.getFieldMask(),Jn.now())):I.set(J.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,m).next(L=>(L.forEach((J,he)=>I.set(J,he)),r.forEach((J,he)=>{var Me;return P.set(J,new _a(he,null!==(Me=I.get(J))&&void 0!==Me?Me:null))}),P))}recalculateAndSaveOverlays(e,r){const o=wo();let u=new si((I,P)=>I-P),m=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(I=>{for(const P of I)P.keys().forEach(L=>{const J=r.get(L);if(null===J)return;let he=o.get(L)||Ui.empty();he=P.applyToLocalView(J,he),o.set(L,he);const Me=(u.get(P.batchId)||pr()).add(L);u=u.insert(P.batchId,Me)})}).next(()=>{const I=[],P=u.getReverseIterator();for(;P.hasNext();){const L=P.getNext(),J=L.key,he=L.value,Me=go();he.forEach(et=>{if(!m.has(et)){const Ct=j(r.get(et),o.get(et));null!==Ct&&Me.set(et,Ct),m=m.add(et)}}),I.push(this.documentOverlayCache.saveOverlays(e,J,Me))}return at.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,r,o,u){return Jt.isDocumentKey((I=r).path)&&null===I.collectionGroup&&0===I.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):_r(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,o,u):this.getDocumentsMatchingCollectionQuery(e,r,o,u);var I}getNextDocuments(e,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,o,u).next(m=>{const I=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,o.largestBatchId,u-m.size):at.resolve(Rs());let P=-1,L=m;return I.next(J=>at.forEach(J,(he,Me)=>(P<Me.largestBatchId&&(P=Me.largestBatchId),m.get(he)?at.resolve():this.remoteDocumentCache.getEntry(e,he).next(et=>{L=L.insert(he,et)}))).next(()=>this.populateOverlays(e,J,m)).next(()=>this.computeViews(e,L,J,pr())).next(he=>({batchId:P,changes:Tc(he)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Jt(r)).next(o=>{let u=ji();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,o,u){const m=r.collectionGroup;let I=ji();return this.indexManager.getCollectionParents(e,m).next(P=>at.forEach(P,L=>{const J=(Me=r,et=L.child(m),new F(et,null,Me.explicitOrderBy.slice(),Me.filters.slice(),Me.limit,Me.limitType,Me.startAt,Me.endAt));var Me,et;return this.getDocumentsMatchingCollectionQuery(e,J,o,u).next(he=>{he.forEach((Me,et)=>{I=I.insert(Me,et)})})}).next(()=>I))}getDocumentsMatchingCollectionQuery(e,r,o,u){let m;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,o.largestBatchId).next(I=>(m=I,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,o,m,u))).next(I=>{m.forEach((L,J)=>{const he=J.getKey();null===I.get(he)&&(I=I.insert(he,Y.newInvalidDocument(he)))});let P=ji();return I.forEach((L,J)=>{const he=m.get(L);void 0!==he&&Ue(he.mutation,J,Ui.empty(),Jn.now()),ca(r,J)&&(P=P.insert(L,J))}),P})}}class Vc{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return at.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,{id:(u=r).id,version:u.version,createTime:Li(u.createTime)}),at.resolve();var u}getNamedQuery(e,r){return at.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,{name:(u=r).name,query:Oo(u.bundledQuery),readTime:Li(u.readTime)}),at.resolve();var u}}class Wd{constructor(){this.overlays=new si(Jt.comparator),this.hr=new Map}getOverlay(e,r){return at.resolve(this.overlays.get(r))}getOverlays(e,r){const o=Rs();return at.forEach(r,u=>this.getOverlay(e,u).next(m=>{null!==m&&o.set(u,m)})).next(()=>o)}saveOverlays(e,r,o){return o.forEach((u,m)=>{this.ht(e,r,m)}),at.resolve()}removeOverlaysForBatchId(e,r,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.hr.delete(o)),at.resolve()}getOverlaysForCollection(e,r,o){const u=Rs(),m=r.length+1,I=new Jt(r.child("")),P=this.overlays.getIteratorFrom(I);for(;P.hasNext();){const L=P.getNext().value,J=L.getKey();if(!r.isPrefixOf(J.path))break;J.path.length===m&&L.largestBatchId>o&&u.set(L.getKey(),L)}return at.resolve(u)}getOverlaysForCollectionGroup(e,r,o,u){let m=new si((J,he)=>J-he);const I=this.overlays.getIterator();for(;I.hasNext();){const J=I.getNext().value;if(J.getKey().getCollectionGroup()===r&&J.largestBatchId>o){let he=m.get(J.largestBatchId);null===he&&(he=Rs(),m=m.insert(J.largestBatchId,he)),he.set(J.getKey(),J)}}const P=Rs(),L=m.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((J,he)=>P.set(J,he)),!(P.size()>=u)););return at.resolve(P)}ht(e,r,o){const u=this.overlays.get(o.key);if(null!==u){const I=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new ys(r,o));let m=this.hr.get(r);void 0===m&&(m=pr(),this.hr.set(r,m)),this.hr.set(r,m.add(o.key))}}class Uc{constructor(){this.Pr=new Xr(Xi.Ir),this.Tr=new Xr(Xi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const o=new Xi(e,r);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,r){e.forEach(o=>this.addReference(o,r))}removeReference(e,r){this.Ar(new Xi(e,r))}Rr(e,r){e.forEach(o=>this.removeReference(o,r))}Vr(e){const r=new Jt(new xn([])),o=new Xi(r,e),u=new Xi(r,e+1),m=[];return this.Tr.forEachInRange([o,u],I=>{this.Ar(I),m.push(I.key)}),m}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new Jt(new xn([])),o=new Xi(r,e),u=new Xi(r,e+1);let m=pr();return this.Tr.forEachInRange([o,u],I=>{m=m.add(I.key)}),m}containsKey(e){const r=new Xi(e,0),o=this.Pr.firstAfterOrEqual(r);return null!==o&&e.isEqual(o.key)}}class Xi{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return Jt.comparator(e.key,r.key)||sn(e.pr,r.pr)}static Er(e,r){return sn(e.pr,r.pr)||Jt.comparator(e.key,r.key)}}class Ng{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Xr(Xi.Ir)}checkEmpty(e){return at.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,o,u){const m=this.yr;this.yr++;const I=new Qi(m,r,o,u);this.mutationQueue.push(I);for(const P of u)this.wr=this.wr.add(new Xi(P.key,m)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return at.resolve(I)}lookupMutationBatch(e,r){return at.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.br(r+1),m=u<0?0:u;return at.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const o=new Xi(r,0),u=new Xi(r,Number.POSITIVE_INFINITY),m=[];return this.wr.forEachInRange([o,u],I=>{const P=this.Sr(I.pr);m.push(P)}),at.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Xr(sn);return r.forEach(u=>{const m=new Xi(u,0),I=new Xi(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([m,I],P=>{o=o.add(P.pr)})}),at.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,u=o.length+1;let m=o;Jt.isDocumentKey(m)||(m=m.child(""));const I=new Xi(new Jt(m),0);let P=new Xr(sn);return this.wr.forEachWhile(L=>{const J=L.key.path;return!!o.isPrefixOf(J)&&(J.length===u&&(P=P.add(L.pr)),!0)},I),at.resolve(this.Dr(P))}Dr(e){const r=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){Ke(0===this.Cr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return at.forEach(r.mutations,u=>{const m=new Xi(u.key,r.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,r){const o=new Xi(r,0),u=this.wr.firstAfterOrEqual(o);return at.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return at.resolve()}Cr(e,r){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class up{constructor(e){this.vr=e,this.docs=new si(Jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const o=r.key,u=this.docs.get(o),m=u?u.size:0,I=this.vr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:I}),this.size+=I-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const o=this.docs.get(r);return at.resolve(o?o.document.mutableCopy():Y.newInvalidDocument(r))}getEntries(e,r){let o=Lr();return r.forEach(u=>{const m=this.docs.get(u);o=o.insert(u,m?m.document.mutableCopy():Y.newInvalidDocument(u))}),at.resolve(o)}getDocumentsMatchingQuery(e,r,o,u){let m=Lr();const I=r.path,P=new Jt(I.child("")),L=this.docs.getIteratorFrom(P);for(;L.hasNext();){const{key:J,value:{document:he}}=L.getNext();if(!I.isPrefixOf(J.path))break;J.path.length>I.length+1||Vr(yi(he),o)<=0||(u.has(he.key)||ca(r,he))&&(m=m.insert(he.key,he.mutableCopy()))}return at.resolve(m)}getAllFromCollectionGroup(e,r,o,u){wt()}Fr(e,r){return at.forEach(this.docs,o=>r(o))}newChangeBuffer(e){return new rf(this)}getSize(e){return at.resolve(this.size)}}class rf extends rc{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),at.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}class kg{constructor(e){this.persistence=e,this.Mr=new vs(r=>xs(r),To),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Uc,this.targetCount=0,this.Lr=Zr.Nn()}forEachTarget(e,r){return this.Mr.forEach((o,u)=>r(u)),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Or&&(this.Or=r),at.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Lr=new Zr(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,at.resolve()}updateTargetData(e,r){return this.qn(r),at.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,r,o){let u=0;const m=[];return this.Mr.forEach((I,P)=>{P.sequenceNumber<=r&&null===o.get(P.targetId)&&(this.Mr.delete(I),m.push(this.removeMatchingKeysForTargetId(e,P.targetId)),u++)}),at.waitFor(m).next(()=>u)}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,r){const o=this.Mr.get(r)||null;return at.resolve(o)}addMatchingKeys(e,r,o){return this.Nr.dr(r,o),at.resolve()}removeMatchingKeys(e,r,o){this.Nr.Rr(r,o);const u=this.persistence.referenceDelegate,m=[];return u&&r.forEach(I=>{m.push(u.markPotentiallyOrphaned(e,I))}),at.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),at.resolve()}getMatchingKeysForTargetId(e,r){const o=this.Nr.gr(r);return at.resolve(o)}containsKey(e,r){return at.resolve(this.Nr.containsKey(r))}}class sf{constructor(e,r){this.Br={},this.overlays={},this.kr=new U(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new kg(this),this.indexManager=new Rg,this.remoteDocumentCache=new up(o=>this.referenceDelegate.Kr(o)),this.serializer=new Mt(r),this.$r=new Vc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Wd,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let o=this.Br[e.toKey()];return o||(o=new Ng(r,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,o){Ee("MemoryPersistence","Starting transaction:",e);const u=new dp(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(m=>this.referenceDelegate.Wr(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Gr(e,r){return at.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,r)))}}class dp extends Pr{constructor(e){super(),this.currentSequenceNumber=e}}class Kd{constructor(e){this.persistence=e,this.zr=new Uc,this.jr=null}static Hr(e){return new Kd(e)}get Jr(){if(this.jr)return this.jr;throw wt()}addReference(e,r,o){return this.zr.addReference(o,r),this.Jr.delete(o.toString()),at.resolve()}removeReference(e,r,o){return this.zr.removeReference(o,r),this.Jr.add(o.toString()),at.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),at.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(m=>this.Jr.add(m.toString()))}).next(()=>o.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.Jr,o=>{const u=Jt.fromPath(o);return this.Yr(e,u).next(m=>{m||r.removeEntry(u,Yt.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(o=>{o?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return at.or([()=>at.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}class Al{constructor(e){this.serializer=e}O(e,r,o,u){const m=new Dt("createOrUpgrade",r);var L;o<1&&u>=1&&(e.createObjectStore("owner"),(L=e).createObjectStore("mutationQueues",{keyPath:"userId"}),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xn,{unique:!0}),L.createObjectStore("documentMutations"),af(e),function(L){L.createObjectStore("remoteDocuments")}(e));let I=at.resolve();return o<3&&u>=3&&(0!==o&&(function(L){L.deleteObjectStore("targetDocuments"),L.deleteObjectStore("targets"),L.deleteObjectStore("targetGlobal")}(e),af(e)),I=I.next(()=>function(L){const J=L.store("targetGlobal"),he={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return J.put("targetGlobalKey",he)}(m))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(L,J){return J.store("mutations").U().next(he=>{L.deleteObjectStore("mutations"),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xn,{unique:!0});const Me=J.store("mutations"),et=he.map(Ct=>Me.put(Ct));return at.waitFor(et)})}(e,m))),I=I.next(()=>{!function(L){L.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.Xr(m))),o<6&&u>=6&&(I=I.next(()=>(function(L){L.createObjectStore("remoteDocumentGlobal")}(e),this.ei(m)))),o<7&&u>=7&&(I=I.next(()=>this.ti(m))),o<8&&u>=8&&(I=I.next(()=>this.ni(e,m))),o<9&&u>=9&&(I=I.next(()=>{!function(L){L.objectStoreNames.contains("remoteDocumentChanges")&&L.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.ri(m))),o<11&&u>=11&&(I=I.next(()=>{(function(L){L.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(L){L.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(L){const J=L.createObjectStore("documentOverlays",{keyPath:Un});J.createIndex("collectionPathOverlayIndex",vn,{unique:!1}),J.createIndex("collectionGroupOverlayIndex",$n,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(L){const J=L.createObjectStore("remoteDocumentsV14",{keyPath:jt});J.createIndex("documentKeyIndex",en),J.createIndex("collectionGroupIndex",En)}(e)).next(()=>this.ii(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>this.si(e,m))),o<15&&u>=15&&(I=I.next(()=>function(L){L.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),L.createObjectStore("indexState",{keyPath:ft}).createIndex("sequenceNumberIndex",Ft,{unique:!1}),L.createObjectStore("indexEntries",{keyPath:un}).createIndex("documentKeyIndex",Ln,{unique:!1})}(e))),o<16&&u>=16&&(I=I.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),I}ei(e){let r=0;return e.store("remoteDocuments").J((o,u)=>{r+=Ji(u)}).next(()=>{const o={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const r=e.store("mutationQueues"),o=e.store("mutations");return r.U().next(u=>at.forEach(u,m=>{const I=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",I).next(P=>at.forEach(P,L=>{Ke(L.userId===m.userId);const J=io(this.serializer,L);return cp(e,m.userId,J).next(()=>{})}))}))}ti(e){const r=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return o.J((I,P)=>{const L=new xn(I),J=[0,Zt(L)];m.push(r.get(J).next(he=>he?at.resolve():r.put({targetId:0,path:Zt(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>at.waitFor(m))})}ni(e,r){e.createObjectStore("collectionParents",{keyPath:yt});const o=r.store("collectionParents"),u=new zd,m=I=>{if(u.add(I)){const P=I.lastSegment(),L=I.popLast();return o.put({collectionId:P,parent:Zt(L)})}};return r.store("remoteDocuments").J({H:!0},(I,P)=>{const L=new xn(I);return m(L.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([I,P,L],J)=>{const he=fn(P);return m(he.popLast())}))}ri(e){const r=e.store("targets");return r.J((o,u)=>{const m=Ro(u),I=pa(this.serializer,m);return r.put(I)})}ii(e,r){const o=r.store("remoteDocuments"),u=[];return o.J((m,I)=>{const P=r.store("remoteDocumentsV14"),L=(Me=I,Me.document?new Jt(xn.fromString(Me.document.name).popFirst(5)):Me.noDocument?Jt.fromSegments(Me.noDocument.path):Me.unknownDocument?Jt.fromSegments(Me.unknownDocument.path):wt()).path.toArray(),J={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};var Me;u.push(P.put(J))}).next(()=>at.waitFor(u))}si(e,r){const o=r.store("mutations"),u=Vs(this.serializer),m=new sf(Kd.Hr,this.serializer.ct);return o.U().next(I=>{const P=new Map;return I.forEach(L=>{var J;let he=null!==(J=P.get(L.userId))&&void 0!==J?J:pr();io(this.serializer,L).keys().forEach(Me=>he=he.add(Me)),P.set(L.userId,he)}),at.forEach(P,(L,J)=>{const he=new tt(J),Me=Zl.lt(this.serializer,he),et=m.getIndexManager(he),Ct=ql.lt(he,this.serializer,et,m.referenceDelegate);return new Xt(u,Ct,Me,et).recalculateAndSaveOverlaysForDocumentKeys(new ls(r,U.oe),L).next()})})}}function af(c){c.createObjectStore("targetDocuments",{keyPath:fr}).createIndex("documentTargetsIndex",yn,{unique:!0}),c.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ln,{unique:!0}),c.createObjectStore("targetGlobal")}const Qd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hi{constructor(e,r,o,u,m,I,P,L,J,he,Me=16){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=o,this.oi=m,this.window=I,this.document=P,this._i=J,this.ai=he,this.ui=Me,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=et=>Promise.resolve(),!Hi.D())throw new te(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nf(this,u),this.Ti=r+"main",this.serializer=new Mt(L),this.Ei=new ue(this.Ti,this.ui,new Al(this.serializer)),this.Qr=new _l(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vs(this.serializer),this.$r=new ki,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===he&&Nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(we.FAILED_PRECONDITION,Qd);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new U(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var r=this;return this.Ii=function(){var o=(0,f.Z)(function*(u){if(r.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var r=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,f.Z)(function*(){r.started&&(yield r.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ic(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(r=>{r||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(r=>this.isPrimary&&!r?this.yi(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(zn(e))return Ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ql(e).get("owner").next(r=>at.resolve(this.Si(r)))}bi(e){return ic(e).delete(this.clientId)}Di(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=jr(o,"clientMetadata");return u.U().next(m=>{const I=e.vi(m,18e5),P=m.filter(L=>-1===I.indexOf(L));return at.forEach(P,L=>u.delete(L.clientId)).next(()=>P)})}).catch(()=>[]);if(e.di)for(const o of r)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?at.resolve(!0):Ql(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)){if(this.Si(r)&&this.networkEnabled)return!0;if(!this.Si(r)){if(!r.allowTabSynchronization)throw new te(we.FAILED_PRECONDITION,Qd);return!1}}return!(!this.networkEnabled||!this.inForeground)||ic(e).U().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&Ee("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,f.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new ls(r,U.oe);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Li()})()}vi(e,r){return e.filter(o=>this.Ci(o.updateTimeMs,r)&&!this.Mi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ic(e).U().next(r=>this.vi(r,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,r){return ql.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bu(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Zl.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,r,o){Ee("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",m=16===(L=this.ui)?gi:15===L?Pi:14===L?dr:13===L?ti:12===L?fi:11===L?Dr:void wt();var L;let I;return this.Ei.runTransaction(e,u,m,P=>(I=new ls(P,this.kr?this.kr.next():U.oe),"readwrite-primary"===r?this.gi(I).next(L=>!!L||this.pi(I)).next(L=>{if(!L)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new te(we.FAILED_PRECONDITION,ar);return o(I)}).next(L=>this.wi(I).next(()=>L)):this.ki(I).next(()=>o(I)))).then(P=>(I.raiseOnCommittedEvent(),P))}ki(e){return Ql(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)&&!this.Si(r)&&!(this.ai||this.allowTabSynchronization&&r.allowTabSynchronization))throw new te(we.FAILED_PRECONDITION,Qd)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ql(e).put("owner",r)}static D(){return ue.D()}yi(e){const r=Ql(e);return r.get("owner").next(o=>this.Si(o)?(Ee("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):at.resolve())}Ci(e,r){const o=Date.now();return!(e<o-r||e>o&&(Nt(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const r=/(?:Version|Mobile)\/1[456]/;(0,_e.G6)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var r;try{const o=null!==(null===(r=this.di)||void 0===r?void 0:r.getItem(this.Fi(e)));return Ee("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Nt("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ql(c){return jr(c,"owner")}function ic(c){return jr(c,"clientMetadata")}function Yd(c,e){let r=c.projectId;return c.isDefaultDatabase||(r+="."+c.database),"firestore/"+e+"/"+r+"/"}class so{constructor(e,r,o,u){this.targetId=e,this.fromCache=r,this.qi=o,this.Qi=u}static Ki(e,r){let o=pr(),u=pr();for(const m of r.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new so(e,r.fromCache,o,u)}}class sc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Zu{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,_e.G6)()?8:Be((0,_e.z$)())>0?6:4}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,o,u){const m={result:null};return this.ji(e,r).next(I=>{m.result=I}).next(()=>{if(!m.result)return this.Hi(e,r,u,o).next(I=>{m.result=I})}).next(()=>{if(m.result)return;const I=new sc;return this.Ji(e,r,I).next(P=>{if(m.result=P,this.Ui)return this.Yi(e,r,I,P.size)})}).next(()=>m.result)}Yi(e,r,o,u){return o.documentReadCount<this.Wi?(dt()<=Se.in.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",xa(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),at.resolve()):(dt()<=Se.in.DEBUG&&Ee("QueryEngine","Query:",xa(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(dt()<=Se.in.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",xa(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(r))):at.resolve())}ji(e,r){if(kn(r))return at.resolve(null);let o=_i(r);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Ya(r,null,"F"),o=_i(r)),this.indexManager.getDocumentsMatchingTarget(e,o).next(m=>{const I=pr(...m);return this.zi.getDocuments(e,I).next(P=>this.indexManager.getMinOffset(e,o).next(L=>{const J=this.Zi(r,P);return this.Xi(r,J,I,L.readTime)?this.ji(e,Ya(r,null,"F")):this.es(e,J,r,L)}))})))}Hi(e,r,o,u){return kn(r)||u.isEqual(Yt.min())?at.resolve(null):this.zi.getDocuments(e,o).next(m=>{const I=this.Zi(r,m);return this.Xi(r,I,o,u)?at.resolve(null):(dt()<=Se.in.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),xa(r)),this.es(e,I,r,Jr(u,-1)).next(P=>P))})}Zi(e,r){let o=new Xr(no(e));return r.forEach((u,m)=>{ca(e,m)&&(o=o.add(m))}),o}Xi(e,r,o,u){if(null===e.limit)return!1;if(o.size!==r.size)return!0;const m="F"===e.limitType?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Ji(e,r,o){return dt()<=Se.in.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",xa(r)),this.zi.getDocumentsMatchingQuery(e,r,gn.min(),o)}es(e,r,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(m=>(r.forEach(I=>{m=m.insert(I.key,I)}),m))}}class Yl{constructor(e,r,o,u){this.persistence=e,this.ts=r,this.serializer=u,this.ns=new si(sn),this.rs=new vs(m=>xs(m),To),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function na(c,e,r,o){return new Yl(c,e,r,o)}function cf(c,e){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,f.Z)(function*(c,e){const r=Le(c);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(m=>(u=m,r._s(e),r.mutationQueue.getAllMutationBatches(o))).next(m=>{const I=[],P=[];let L=pr();for(const J of u){I.push(J.batchId);for(const he of J.mutations)L=L.add(he.key)}for(const J of m){P.push(J.batchId);for(const he of J.mutations)L=L.add(he.key)}return r.localDocuments.getDocuments(o,L).next(J=>({us:J,removedBatchIds:I,addedBatchIds:P}))})})})).apply(this,arguments)}function hp(c){const e=Le(c);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function Jl(c,e,r){let o=pr(),u=pr();return r.forEach(m=>o=o.add(m)),e.getEntries(c,o).next(m=>{let I=Lr();return r.forEach((P,L)=>{const J=m.get(P);L.isFoundDocument()!==J.isFoundDocument()&&(u=u.add(P)),L.isNoDocument()&&L.version.isEqual(Yt.min())?(e.removeEntry(P,L.readTime),I=I.insert(P,L)):!J.isValidDocument()||L.version.compareTo(J.version)>0||0===L.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(L),I=I.insert(P,L)):Ee("LocalStore","Ignoring outdated watch update for ",P,". Current version:",J.version," Watch version:",L.version)}),{cs:I,ls:u}})}function Il(c,e){const r=Le(c);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function bl(c,e){const r=Le(c);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Qr.getTargetData(o,e).next(m=>m?(u=m,at.resolve(u)):r.Qr.allocateTargetId(o).next(I=>(u=new St(e,I,"TargetPurposeListen",o.currentSequenceNumber),r.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.ns=r.ns.insert(o.targetId,o),r.rs.set(e,o.targetId)),o})}function ja(c,e,r){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(c,e,r){const o=Le(c),u=o.ns.get(e),m=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",m,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!zn(I))throw I;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)})).apply(this,arguments)}function Gu(c,e,r){const o=Le(c);let u=Yt.min(),m=pr();return o.persistence.runTransaction("Execute query","readwrite",I=>function(L,J,he){const Me=Le(L),et=Me.rs.get(he);return void 0!==et?at.resolve(Me.ns.get(et)):Me.Qr.getTargetData(J,he)}(o,I,_i(e)).next(P=>{if(P)return u=P.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(I,P.targetId).next(L=>{m=L})}).next(()=>o.ts.getDocumentsMatchingQuery(I,e,r?u:Yt.min(),r?m:pr())).next(P=>(Xd(o,Cc(e),P),{documents:P,hs:m})))}function qu(c,e){const r=Le(c),o=Le(r.Qr),u=r.ns.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",m=>o.ot(m,e).next(I=>I?I.target:null))}function uf(c,e){const r=Le(c),o=r.ss.get(e)||Yt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.os.getAllFromCollectionGroup(u,e,Jr(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Xd(r,e,u),u))}function Xd(c,e,r){let o=c.ss.get(e)||Yt.min();r.forEach((u,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),c.ss.set(e,o)}function Bc(){return(Bc=(0,f.Z)(function*(c,e,r,o){const u=Le(c);let m=pr(),I=Lr();for(const J of r){const he=e.Ps(J.metadata.name);J.document&&(m=m.add(he));const Me=e.Is(J);Me.setReadTime(e.Ts(J.metadata.readTime)),I=I.insert(he,Me)}const P=u.os.newChangeBuffer({trackRemovals:!0}),L=yield bl(u,(he=o,_i(ze(xn.fromString(`__bundle__/docs/${he}`)))));var he;return u.persistence.runTransaction("Apply bundle documents","readwrite",J=>Jl(J,P,I).next(he=>(P.apply(J),he)).next(he=>u.Qr.removeMatchingKeysForTargetId(J,L.targetId).next(()=>u.Qr.addMatchingKeys(J,m,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(J,he.cs,he.ls)).next(()=>he.cs)))})).apply(this,arguments)}function Wu(c,e){return eh.apply(this,arguments)}function eh(){return(eh=(0,f.Z)(function*(c,e,r=pr()){const o=yield bl(c,_i(Oo(e.bundledQuery))),u=Le(c);return u.persistence.runTransaction("Save named query","readwrite",m=>{const I=Li(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.$r.saveNamedQuery(m,e);const P=o.withResumeToken(Mi.EMPTY_BYTE_STRING,I);return u.ns=u.ns.insert(P.targetId,P),u.Qr.updateTargetData(m,P).next(()=>u.Qr.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>u.Qr.addMatchingKeys(m,r,o.targetId)).next(()=>u.$r.saveNamedQuery(m,e))})})).apply(this,arguments)}function jc(c,e){return`firestore_clients_${c}_${e}`}function th(c,e,r){let o=`firestore_mutations_${c}_${r}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Ha(c,e){return`firestore_targets_${c}_${e}`}class eu{constructor(e,r,o,u){this.user=e,this.batchId=r,this.state=o,this.error=u}static Es(e,r,o){const u=JSON.parse(o);let m,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(m=new te(u.error.code,u.error.message))),I?new eu(e,r,u.state,m):(Nt("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hc{constructor(e,r,o){this.targetId=e,this.state=r,this.error=o}static Es(e,r){const o=JSON.parse(r);let u,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(u=new te(o.error.code,o.error.message))),m?new Hc(e,o.state,u):(Nt("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cl{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Es(e,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,m=cl();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=kt(o.activeTargetIds[I]),m=m.add(o.activeTargetIds[I]);return u?new Cl(e,m):(Nt("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Tl{constructor(e,r){this.clientId=e,this.onlineState=r}static Es(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Tl(r.clientId,r.onlineState):(Nt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ku{constructor(){this.activeTargetIds=cl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nh{constructor(e,r,o,u,m){this.window=e,this.oi=r,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new si(sn),this.started=!1,this.ys=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ws=jc(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Ku),this.bs=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(L){return`firestore_bundle_loaded_v2_${L}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,f.Z)(function*(){const r=yield e.syncEngine.Bi();for(const u of r){if(u===e.Vs)continue;const m=e.getItem(jc(e.persistenceKey,u));if(m){const I=Cl.Es(u,m);I&&(e.ps=e.ps.insert(I.clientId,I))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let r=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,r,o){this.Ls(e,r,o),this.Bs(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Ha(this.persistenceKey,e));if(o){const u=Hc.Es(e,o);u&&(r=u.state)}}return this.ks.As(e),this.Ms(),r}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ha(this.persistenceKey,e))}updateQueryState(e,r,o){this.qs(e,r,o)}handleUserChange(e,r,o){r.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ee("SharedClientState","READ",e,r),r}setItem(e,r){Ee("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var r=this;const o=e;if(o.storageArea===this.storage){if(Ee("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,f.Z)(function*(){if(r.started){if(null!==o.key)if(r.bs.test(o.key)){if(null==o.newValue){const u=r.$s(o.key);return r.Us(u,null)}{const u=r.Ws(o.key,o.newValue);if(u)return r.Us(u.clientId,u)}}else if(r.Ds.test(o.key)){if(null!==o.newValue){const u=r.Gs(o.key,o.newValue);if(u)return r.zs(u)}}else if(r.Cs.test(o.key)){if(null!==o.newValue){const u=r.js(o.key,o.newValue);if(u)return r.Hs(u)}}else if(o.key===r.vs){if(null!==o.newValue){const u=r.xs(o.newValue);if(u)return r.Os(u)}}else if(o.key===r.Ss){const u=function(I){let P=U.oe;if(null!=I)try{const L=JSON.parse(I);Ke("number"==typeof L),P=L}catch(L){Nt("SharedClientState","Failed to read sequence number from WebStorage",L)}return P}(o.newValue);u!==U.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Fs){const u=r.Js(o.newValue);yield Promise.all(u.map(m=>r.syncEngine.Ys(m)))}}else r.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,r,o){const u=new eu(this.currentUser,e,r,o),m=th(this.persistenceKey,this.currentUser,e);this.setItem(m,u.ds())}Bs(e){const r=th(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,r,o){const u=Ha(this.persistenceKey,e),m=new Hc(e,r,o);this.setItem(u,m.ds())}Ks(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Fs,r)}$s(e){const r=this.bs.exec(e);return r?r[1]:null}Ws(e,r){const o=this.$s(e);return Cl.Es(o,r)}Gs(e,r){const o=this.Ds.exec(e),u=Number(o[1]);return eu.Es(new tt(void 0!==o[2]?o[2]:null),u,r)}js(e,r){const o=this.Cs.exec(e),u=Number(o[1]);return Hc.Es(u,r)}xs(e){return Tl.Es(e)}Js(e){return JSON.parse(e)}zs(e){var r=this;return(0,f.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Zs(e.batchId,e.state,e.error);Ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,r){const o=r?this.ps.insert(e,r):this.ps.remove(e),u=this.Ns(this.ps),m=this.Ns(o),I=[],P=[];return m.forEach(L=>{u.has(L)||I.push(L)}),u.forEach(L=>{m.has(L)||P.push(L)}),this.syncEngine.eo(I,P).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let r=cl();return e.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class df{constructor(){this.no=new Ku,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,o){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ku,Promise.resolve()}handleUserChange(e,r,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zc{io(e){}shutdown(){}}class wl{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rh=null;function hf(){return null===rh?rh=268435456+Math.round(2147483648*Math.random()):rh++,"0x"+rh.toString(16)}const T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const v="WebChannelConnection";class M extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),m=encodeURIComponent(this.databaseId.database);this.wo=o+"://"+r.host,this.So=`projects/${u}/databases/${m}`,this.bo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${m}`}get Do(){return!1}Co(r,o,u,m,I){const P=hf(),L=this.vo(r,o.toUriEncodedString());Ee("RestConnection",`Sending RPC '${r}' ${P}:`,L,u);const J={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(J,m,I),this.Mo(r,L,J,u).then(he=>(Ee("RestConnection",`Received RPC '${r}' ${P}: `,he),he),he=>{throw Vt("RestConnection",`RPC '${r}' ${P} failed with error: `,he,"url: ",L,"request:",u),he})}xo(r,o,u,m,I,P){return this.Co(r,o,u,m,I)}Fo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+Ze,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((m,I)=>r[I]=m),u&&u.headers.forEach((m,I)=>r[I]=m)}vo(r,o){return`${this.wo}/v1/${o}:${T[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,r,o,u){const m=hf();return new Promise((I,P)=>{const L=new oe;L.setWithCredentials(!0),L.listenOnce(De.COMPLETE,()=>{try{switch(L.getLastErrorCode()){case Re.NO_ERROR:const he=L.getResponseJson();Ee(v,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(he)),I(he);break;case Re.TIMEOUT:Ee(v,`RPC '${e}' ${m} timed out`),P(new te(we.DEADLINE_EXCEEDED,"Request time out"));break;case Re.HTTP_ERROR:const Me=L.getStatus();if(Ee(v,`RPC '${e}' ${m} failed with status:`,Me,"response text:",L.getResponseText()),Me>0){let et=L.getResponseJson();Array.isArray(et)&&(et=et[0]);const Ct=et?.error;if(Ct&&Ct.status&&Ct.message){const Wt=function(nn){const Zn=nn.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(Zn)>=0?Zn:we.UNKNOWN}(Ct.status);P(new te(Wt,Ct.message))}else P(new te(we.UNKNOWN,"Server responded with status "+L.getStatus()))}else P(new te(we.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Ee(v,`RPC '${e}' ${m} completed.`)}});const J=JSON.stringify(u);Ee(v,`RPC '${e}' ${m} sending request:`,u),L.send(r,"POST",J,o,15)})}Oo(e,r,o){const u=hf(),m=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],I=Fe(),P=_t(),L={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},J=this.longPollingOptions.timeoutSeconds;void 0!==J&&(L.longPollingTimeout=Math.round(1e3*J)),this.useFetchStreams&&(L.xmlHttpFactory=new be({})),this.Fo(L.initMessageHeaders,r,o),L.encodeInitMessageHeaders=!0;const he=m.join("");Ee(v,`Creating RPC '${e}' stream ${u}: ${he}`,L);const Me=I.createWebChannel(he,L);let et=!1,Ct=!1;const Wt=new g({lo:nn=>{Ct?Ee(v,`Not sending because RPC '${e}' stream ${u} is closed:`,nn):(et||(Ee(v,`Opening RPC '${e}' stream ${u} transport.`),Me.open(),et=!0),Ee(v,`RPC '${e}' stream ${u} sending:`,nn),Me.send(nn))},ho:()=>Me.close()}),hn=(nn,Zn,or)=>{nn.listen(Zn,Kn=>{try{or(Kn)}catch(Sr){setTimeout(()=>{throw Sr},0)}})};return hn(Me,ye.EventType.OPEN,()=>{Ct||(Ee(v,`RPC '${e}' stream ${u} transport opened.`),Wt.mo())}),hn(Me,ye.EventType.CLOSE,()=>{Ct||(Ct=!0,Ee(v,`RPC '${e}' stream ${u} transport closed`),Wt.po())}),hn(Me,ye.EventType.ERROR,nn=>{Ct||(Ct=!0,Vt(v,`RPC '${e}' stream ${u} transport errored:`,nn),Wt.po(new te(we.UNAVAILABLE,"The operation could not be completed")))}),hn(Me,ye.EventType.MESSAGE,nn=>{var Zn;if(!Ct){const or=nn.data[0];Ke(!!or);const Sr=or.error||(null===(Zn=or[0])||void 0===Zn?void 0:Zn.error);if(Sr){Ee(v,`RPC '${e}' stream ${u} received error:`,Sr);const wi=Sr.status;let qr=function(ot){const mt=Ci[ot];if(void 0!==mt)return js(mt)}(wi),pt=Sr.message;void 0===qr&&(qr=we.INTERNAL,pt="Unknown error status: "+wi+" with message "+Sr.message),Ct=!0,Wt.po(new te(qr,pt)),Me.close()}else Ee(v,`RPC '${e}' stream ${u} received:`,or),Wt.yo(or)}}),hn(P,We.STAT_EVENT,nn=>{nn.stat===Ye.PROXY?Ee(v,`RPC '${e}' stream ${u} detected buffering proxy`):nn.stat===Ye.NOPROXY&&Ee(v,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Wt.fo()},0),Wt}}function X(){return typeof window<"u"?window:null}function me(){return typeof document<"u"?document:null}function rt(c){return new Mu(c,!0)}class Pt{constructor(e,r,o=1e3,u=1.5,m=6e4){this.oi=e,this.timerId=r,this.No=o,this.Lo=u,this.Bo=m,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const r=Math.floor(this.ko+this.Uo()),o=Math.max(0,Date.now()-this.Qo),u=Math.max(0,r-o);u>0&&Ee("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class $t{constructor(e,r,o,u,m,I,P,L){this.oi=e,this.Go=o,this.zo=u,this.connection=m,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=P,this.listener=L,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Pt(e,r)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,f.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,f.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,r){var o=this;return(0,f.Z)(function*(){o.s_(),o.o_(),o.Yo.cancel(),o.jo++,4!==e?o.Yo.reset():r&&r.code===we.RESOURCE_EXHAUSTED?(Nt(r.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),o.Yo.Ko()):r&&r.code===we.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.__(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Ao(r)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),r=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.jo===r&&this.u_(o,u)},o=>{e(()=>{const u=new te(we.UNKNOWN,"Fetching auth token failed: "+o.message);return this.c_(u)})})}u_(e,r){const o=this.a_(this.jo);this.stream=this.l_(e,r),this.stream.Po(()=>{o(()=>this.listener.Po())}),this.stream.To(()=>{o(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(u=>{o(()=>this.c_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}e_(){var e=this;this.state=5,this.Yo.$o((0,f.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return r=>{this.oi.enqueueAndForget(()=>this.jo===e?r():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vn extends $t{constructor(e,r,o,u,m,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,I),this.serializer=m}l_(e,r){return this.connection.Oo("Listen",e,r)}onMessage(e){this.Yo.reset();const r=function Oc(c,e){let r;if("targetChange"in e){const o="NO_CHANGE"===(J=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===J?1:"REMOVE"===J?2:"CURRENT"===J?3:"RESET"===J?4:wt(),u=e.targetChange.targetIds||[],m=function(J,he){return J.useProto3Json?(Ke(void 0===he||"string"==typeof he),Mi.fromBase64String(he||"")):(Ke(void 0===he||he instanceof Buffer||he instanceof Uint8Array),Mi.fromUint8Array(he||new Uint8Array))}(c,e.targetChange.resumeToken),I=e.targetChange.cause,P=I&&function(J){const he=void 0===J.code?we.UNKNOWN:js(J.code);return new te(he,J.message||"")}(I);r=new qo(o,u,m,P||null)}else if("documentChange"in e){const o=e.documentChange,u=Po(c,o.document.name),m=Li(o.document.updateTime),I=o.document.createTime?Li(o.document.createTime):Yt.min(),P=new li({mapValue:{fields:o.document.fields}}),L=Y.newFoundDocument(u,m,I,P);r=new xc(o.targetIds||[],o.removedTargetIds||[],L.key,L)}else if("documentDelete"in e){const o=e.documentDelete,u=Po(c,o.document),m=o.readTime?Li(o.readTime):Yt.min(),I=Y.newNoDocument(u,m);r=new xc([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=Po(c,o.document);r=new xc([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return wt();{const o=e.filter,{count:u=0,unchangedNames:m}=o,I=new Gs(u,m);r=new Od(o.targetId,I)}}var J;return r}(this.serializer,e),o=function(m){if(!("targetChange"in m))return Yt.min();const I=m.targetChange;return I.targetIds&&I.targetIds.length?Yt.min():I.readTime?Li(I.readTime):Yt.min()}(e);return this.listener.h_(r,o)}P_(e){const r={};r.database=$r(this.serializer),r.addTarget=function(m,I){let P;const L=I.target;if(P=Qa(L)?{documents:Ld(m,L)}:{query:Vd(m,L)._t},P.targetId=I.targetId,I.resumeToken.approximateByteSize()>0){P.resumeToken=kd(m,I.resumeToken);const J=Rc(m,I.expectedCount);null!==J&&(P.expectedCount=J)}else if(I.snapshotVersion.compareTo(Yt.min())>0){P.readTime=ka(m,I.snapshotVersion.toTimestamp());const J=Rc(m,I.expectedCount);null!==J&&(P.expectedCount=J)}return P}(this.serializer,e);const o=function xo(c,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);o&&(r.labels=o),this.i_(r)}I_(e){const r={};r.database=$r(this.serializer),r.removeTarget=e,this.i_(r)}}class nr extends $t{constructor(e,r,o,u,m,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,I),this.serializer=m,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,r){return this.connection.Oo("Write",e,r)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const r=function tc(c,e){return c&&c.length>0?(Ke(void 0!==e),c.map(r=>function(u,m){let I=Li(u.updateTime?u.updateTime:m);return I.isEqual(Yt.min())&&(I=Li(m)),new hl(I,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),o=Li(e.commitTime);return this.listener.A_(o,r)}return Ke(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=$r(this.serializer),this.i_(e)}d_(e){const r={streamToken:this.lastStreamToken,writes:e.map(o=>ks(this.serializer,o))};this.i_(r)}}class Gr extends class{}{constructor(e,r,o,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.m_=!1}f_(){if(this.m_)throw new te(we.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,r,o,u){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,I])=>this.connection.Co(e,Fd(r,o),u,m,I)).catch(m=>{throw"FirebaseError"===m.name?(m.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new te(we.UNKNOWN,m.toString())})}xo(e,r,o,u,m){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([I,P])=>this.connection.xo(e,Fd(r,o),u,I,P,m)).catch(I=>{throw"FirebaseError"===I.name?(I.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),I):new te(we.UNKNOWN,I.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class oo{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nt(r),this.y_=!1):Ee("OnlineStateTracker",r)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class za{constructor(e,r,o,u,m){var I=this;this.localStore=e,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=m,this.O_.io(P=>{o.enqueueAndForget((0,f.Z)(function*(){var L;va(I)&&(Ee("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,f.Z)(function*(he){const Me=Le(he);Me.M_.add(4),yield Dl(Me),Me.N_.set("Unknown"),Me.M_.delete(4),yield $c(Me)}),function J(he){return L.apply(this,arguments)})(I))}))}),this.N_=new oo(o,u)}}function $c(c){return tu.apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(c){if(va(c))for(const e of c.x_)yield e(!0)})).apply(this,arguments)}function Dl(c){return ff.apply(this,arguments)}function ff(){return(ff=(0,f.Z)(function*(c){for(const e of c.x_)yield e(!1)})).apply(this,arguments)}function Sl(c,e){const r=Le(c);r.F_.has(e.targetId)||(r.F_.set(e.targetId,e),Qu(r)?oc(r):ed(r).Xo()&&pf(r,e))}function Ml(c,e){const r=Le(c),o=ed(r);r.F_.delete(e),o.Xo()&&pp(r,e),0===r.F_.size&&(o.Xo()?o.n_():va(r)&&r.N_.set("Unknown"))}function pf(c,e){if(c.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const r=c.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ed(c).P_(e)}function pp(c,e){c.L_.xe(e),ed(c).I_(e)}function oc(c){c.L_=new Mo({getRemoteKeysForTarget:e=>c.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>c.F_.get(e)||null,tt:()=>c.datastore.serializer.databaseId}),ed(c).start(),c.N_.w_()}function Qu(c){return va(c)&&!ed(c).Zo()&&c.F_.size>0}function va(c){return 0===Le(c).M_.size}function Pl(c){c.L_=void 0}function nu(c){return gf.apply(this,arguments)}function gf(){return(gf=(0,f.Z)(function*(c){c.N_.set("Online")})).apply(this,arguments)}function Fg(c){return mf.apply(this,arguments)}function mf(){return(mf=(0,f.Z)(function*(c){c.F_.forEach((e,r)=>{pf(c,e)})})).apply(this,arguments)}function Yu(c,e){return _f.apply(this,arguments)}function _f(){return(_f=(0,f.Z)(function*(c,e){Pl(c),Qu(c)?(c.N_.D_(e),oc(c)):c.N_.set("Unknown")})).apply(this,arguments)}function Lg(c,e,r){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,f.Z)(function*(c,e,r){if(c.N_.set("Online"),e instanceof qo&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(m,I){const P=I.cause;for(const L of I.targetIds)m.F_.has(L)&&(yield m.remoteSyncer.rejectListen(L,P),m.F_.delete(L),m.L_.removeTarget(L))}),function u(m,I){return o.apply(this,arguments)})(c,e)}catch(o){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ru(c,o)}else if(e instanceof xc?c.L_.Ke(e):e instanceof Od?c.L_.He(e):c.L_.We(e),!r.isEqual(Yt.min()))try{const o=yield hp(c.localStore);r.compareTo(o)>=0&&(yield function(m,I){const P=m.L_.rt(I);return P.targetChanges.forEach((L,J)=>{if(L.resumeToken.approximateByteSize()>0){const he=m.F_.get(J);he&&m.F_.set(J,he.withResumeToken(L.resumeToken,I))}}),P.targetMismatches.forEach((L,J)=>{const he=m.F_.get(L);if(!he)return;m.F_.set(L,he.withResumeToken(Mi.EMPTY_BYTE_STRING,he.snapshotVersion)),pp(m,L);const Me=new St(he.target,L,J,he.sequenceNumber);pf(m,Me)}),m.remoteSyncer.applyRemoteEvent(P)}(c,r))}catch(o){Ee("RemoteStore","Failed to raise snapshot:",o),yield ru(c,o)}var o}),Ju.apply(this,arguments)}function ru(c,e,r){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,f.Z)(function*(c,e,r){if(!zn(e))throw e;c.M_.add(1),yield Dl(c),c.N_.set("Offline"),r||(r=()=>hp(c.localStore)),c.asyncQueue.enqueueRetryable((0,f.Z)(function*(){Ee("RemoteStore","Retrying IndexedDB access"),yield r(),c.M_.delete(1),yield $c(c)}))})).apply(this,arguments)}function Vg(c,e){return e().catch(r=>ru(c,r,e))}function ih(c){return gp.apply(this,arguments)}function gp(){return(gp=(0,f.Z)(function*(c){const e=Le(c),r=Zc(e);let o=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Ug(e);)try{const u=yield Il(e.localStore,o);if(null===u){0===e.v_.length&&r.n_();break}o=u.batchId,mp(e,u)}catch(u){yield ru(e,u)}Bg(e)&&jg(e)})).apply(this,arguments)}function Ug(c){return va(c)&&c.v_.length<10}function mp(c,e){c.v_.push(e);const r=Zc(c);r.Xo()&&r.E_&&r.d_(e.mutations)}function Bg(c){return va(c)&&!Zc(c).Zo()&&c.v_.length>0}function jg(c){Zc(c).start()}function n_(c){return vf.apply(this,arguments)}function vf(){return(vf=(0,f.Z)(function*(c){Zc(c).V_()})).apply(this,arguments)}function r_(c){return _p.apply(this,arguments)}function _p(){return(_p=(0,f.Z)(function*(c){const e=Zc(c);for(const r of c.v_)e.d_(r.mutations)})).apply(this,arguments)}function Fo(c,e,r){return sh.apply(this,arguments)}function sh(){return(sh=(0,f.Z)(function*(c,e,r){const o=c.v_.shift(),u=Ms.from(o,e,r);yield Vg(c,()=>c.remoteSyncer.applySuccessfulWrite(u)),yield ih(c)})).apply(this,arguments)}function Hg(c,e){return oh.apply(this,arguments)}function oh(){return oh=(0,f.Z)(function*(c,e){var r;e&&Zc(c).E_&&(yield(r=(0,f.Z)(function*(u,m){if(qs(P=m.code)&&P!==we.ABORTED){const I=u.v_.shift();Zc(u).t_(),yield Vg(u,()=>u.remoteSyncer.rejectFailedWrite(I.batchId,m)),yield ih(u)}var P}),function o(u,m){return r.apply(this,arguments)})(c,e)),Bg(c)&&jg(c)}),oh.apply(this,arguments)}function Js(c,e){return iu.apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(c,e){const r=Le(c);r.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const o=va(r);r.M_.add(3),yield Dl(r),o&&r.N_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.M_.delete(3),yield $c(r)})).apply(this,arguments)}function yf(c,e){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,f.Z)(function*(c,e){const r=Le(c);e?(r.M_.delete(2),yield $c(r)):e||(r.M_.add(2),yield Dl(r),r.N_.set("Unknown"))})).apply(this,arguments)}function ed(c){return c.B_||(c.B_=function(r,o,u){const m=Le(r);return m.f_(),new Vn(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,u)}(c.datastore,c.asyncQueue,{Po:nu.bind(null,c),To:Fg.bind(null,c),Ao:Yu.bind(null,c),h_:Lg.bind(null,c)}),c.x_.push(function(){var e=(0,f.Z)(function*(r){r?(c.B_.t_(),Qu(c)?oc(c):c.N_.set("Unknown")):(yield c.B_.stop(),Pl(c))});return function(r){return e.apply(this,arguments)}}())),c.B_}function Zc(c){return c.k_||(c.k_=function(r,o,u){const m=Le(r);return m.f_(),new nr(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,u)}(c.datastore,c.asyncQueue,{Po:()=>Promise.resolve(),To:n_.bind(null,c),Ao:Hg.bind(null,c),R_:r_.bind(null,c),A_:Fo.bind(null,c)}),c.x_.push(function(){var e=(0,f.Z)(function*(r){r?(c.k_.t_(),yield ih(c)):(yield c.k_.stop(),c.v_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${c.v_.length} pending writes`),c.v_=[]))});return function(r){return e.apply(this,arguments)}}())),c.k_}class vp{constructor(e,r,o,u,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=m,this.deferred=new Ie,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,o,u,m){const I=Date.now()+o,P=new vp(e,r,I,u,m);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new te(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function su(c,e){if(Nt("AsyncQueue",`${e}: ${c}`),zn(c))return new te(we.UNAVAILABLE,`${e}: ${c}`);throw c}class td{constructor(e){this.comparator=e?(r,o)=>e(r,o)||Jt.comparator(r.key,o.key):(r,o)=>Jt.comparator(r.key,o.key),this.keyedMap=ji(),this.sortedSet=new si(this.comparator)}static emptySet(e){return new td(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,o)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof td)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,m=o.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const o=new td;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=r,o}}class zg{constructor(){this.q_=new si(Jt.comparator)}track(e){const r=e.doc.key,o=this.q_.get(r);o?0!==e.type&&3===o.type?this.q_=this.q_.insert(r,e):3===e.type&&1!==o.type?this.q_=this.q_.insert(r,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.q_=this.q_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.q_=this.q_.remove(r):1===e.type&&2===o.type?this.q_=this.q_.insert(r,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):wt():this.q_=this.q_.insert(r,e)}Q_(){const e=[];return this.q_.inorderTraversal((r,o)=>{e.push(o)}),e}}class nd{constructor(e,r,o,u,m,I,P,L,J){this.query=e,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=m,this.fromCache=I,this.syncStateChanged=P,this.excludesMetadataChanges=L,this.hasCachedResults=J}static fromInitialDocuments(e,r,o,u,m){const I=[];return r.forEach(P=>{I.push({type:0,doc:P})}),new nd(e,r,td.emptySet(r),I,o,u,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,o=e.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class i_{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class ac{constructor(){this.queries=new vs(e=>bc(e),Pa),this.onlineState="Unknown",this.z_=new Set}}function rd(c,e){return ah.apply(this,arguments)}function ah(){return(ah=(0,f.Z)(function*(c,e){const r=Le(c);let o=3;const u=e.query;let m=r.queries.get(u);m?!m.W_()&&e.G_()&&(o=2):(m=new i_,o=e.G_()?0:1);try{switch(o){case 0:m.K_=yield r.onListen(u,!0);break;case 1:m.K_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(I){const P=su(I,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(P)}r.queries.set(u,m),m.U_.push(e),e.j_(r.onlineState),m.K_&&e.H_(m.K_)&&Af(r)})).apply(this,arguments)}function Gc(c,e){return ch.apply(this,arguments)}function ch(){return(ch=(0,f.Z)(function*(c,e){const r=Le(c),o=e.query;let u=3;const m=r.queries.get(o);if(m){const I=m.U_.indexOf(e);I>=0&&(m.U_.splice(I,1),0===m.U_.length?u=e.G_()?0:1:!m.W_()&&e.G_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function ra(c,e){const r=Le(c);let o=!1;for(const u of e){const I=r.queries.get(u.query);if(I){for(const P of I.U_)P.H_(u)&&(o=!0);I.K_=u}}o&&Af(r)}function yp(c,e,r){const o=Le(c),u=o.queries.get(e);if(u)for(const m of u.U_)m.onError(r);o.queries.delete(e)}function Af(c){c.z_.forEach(e=>{e.next()})}var id,ou;(ou=id||(id={})).J_="default",ou.Cache="cache";class ya{constructor(e,r,o){this.query=e,this.Y_=r,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=o||{}}H_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new nd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),r=!0):this.ta(e,this.onlineState)&&(this.na(e),r=!0),this.X_=e,r}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let r=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),r=!0),r}ta(e,r){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==id.Cache}}class Ep{constructor(e,r){this.ia=e,this.byteLength=r}sa(){return"metadata"in this.ia}}class If{constructor(e){this.serializer=e}Ps(e){return Po(this.serializer,e)}Is(e){return e.metadata.exists?Es(this.serializer,e.document,!1):Y.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Li(e)}}class Ap{constructor(e,r,o){this.oa=e,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$g(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++r;const o=xn.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}aa(e){const r=new Map,o=new If(this.serializer);for(const u of e)if(u.metadata.queries){const m=o.Ps(u.metadata.name);for(const I of u.metadata.queries){const P=(r.get(I)||pr()).add(m);r.set(I,P)}}return r}complete(){var e=this;return(0,f.Z)(function*(){const r=yield function fp(c,e,r,o){return Bc.apply(this,arguments)}(e.localStore,new If(e.serializer),e.documents,e.oa.id),o=e.aa(e.documents);for(const u of e.queries)yield Wu(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:r}})()}}function $g(c){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:c.totalDocuments,totalBytes:c.totalBytes}}class Ip{constructor(e){this.key=e}}class bp{constructor(e){this.key=e}}class s_{constructor(e,r){this.query=e,this.la=r,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pr(),this.mutatedKeys=pr(),this.Ia=no(e),this.Ta=new td(this.Ia)}get Ea(){return this.la}da(e,r){const o=r?r.Aa:new zg,u=r?r.Ta:this.Ta;let m=r?r.mutatedKeys:this.mutatedKeys,I=u,P=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,J="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((he,Me)=>{const et=u.get(he),Ct=ca(this.query,Me)?Me:null,Wt=!!et&&this.mutatedKeys.has(et.key),hn=!!Ct&&(Ct.hasLocalMutations||this.mutatedKeys.has(Ct.key)&&Ct.hasCommittedMutations);let nn=!1;et&&Ct?et.data.isEqual(Ct.data)?Wt!==hn&&(o.track({type:3,doc:Ct}),nn=!0):this.Ra(et,Ct)||(o.track({type:2,doc:Ct}),nn=!0,(L&&this.Ia(Ct,L)>0||J&&this.Ia(Ct,J)<0)&&(P=!0)):!et&&Ct?(o.track({type:0,doc:Ct}),nn=!0):et&&!Ct&&(o.track({type:1,doc:et}),nn=!0,(L||J)&&(P=!0)),nn&&(Ct?(I=I.add(Ct),m=hn?m.add(he):m.delete(he)):(I=I.delete(he),m=m.delete(he)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const he="F"===this.query.limitType?I.last():I.first();I=I.delete(he.key),m=m.delete(he.key),o.track({type:1,doc:he})}return{Ta:I,Aa:o,Xi:P,mutatedKeys:m}}Ra(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,o,u){const m=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const I=e.Aa.Q_();I.sort((he,Me)=>function(Ct,Wt){const hn=nn=>{switch(nn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return hn(Ct)-hn(Wt)}(he.type,Me.type)||this.Ia(he.doc,Me.doc)),this.Va(o),u=null!=u&&u;const P=r&&!u?this.ma():[],L=0===this.Pa.size&&this.current&&!u?1:0,J=L!==this.ha;return this.ha=L,0!==I.length||J?{snapshot:new nd(this.query,e.Ta,m,I,e.mutatedKeys,0===L,J,!1,!!o&&o.resumeToken.approximateByteSize()>0),fa:P}:{fa:P}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(r=>this.la=this.la.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.la=this.la.delete(r)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=pr(),this.Ta.forEach(o=>{this.ga(o.key)&&(this.Pa=this.Pa.add(o.key))});const r=[];return e.forEach(o=>{this.Pa.has(o)||r.push(new bp(o))}),this.Pa.forEach(o=>{e.has(o)||r.push(new Ip(o))}),r}pa(e){this.la=e.hs,this.Pa=pr();const r=this.da(e.documents);return this.applyChanges(r,!0)}ya(){return nd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Zg{constructor(e,r,o){this.query=e,this.targetId=r,this.view=o}}class Cp{constructor(e){this.key=e,this.wa=!1}}class Gg{constructor(e,r,o,u,m,I){this.localStore=e,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=I,this.Sa={},this.ba=new vs(P=>bc(P),Pa),this.Da=new Map,this.Ca=new Set,this.va=new si(Jt.comparator),this.Fa=new Map,this.Ma=new Uc,this.xa={},this.Oa=new Map,this.Na=Zr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function lh(c,e){return uh.apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(c,e,r=!0){const o=Mf(c);let u;const m=o.ba.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),u=m.view.ya()):u=yield hh(o,e,r,!0),u})).apply(this,arguments)}function dh(c,e){return sd.apply(this,arguments)}function sd(){return(sd=(0,f.Z)(function*(c,e){const r=Mf(c);yield hh(r,e,!0,!1)})).apply(this,arguments)}function hh(c,e,r,o){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(c,e,r,o){const u=yield bl(c.localStore,_i(e)),m=u.targetId,I=r?c.sharedClientState.addLocalQueryTarget(m):"not-current";let P;return o&&(P=yield fh(c,e,m,"current"===I,u.resumeToken)),c.isPrimaryClient&&r&&Sl(c.remoteStore,u),P})).apply(this,arguments)}function fh(c,e,r,o,u){return $a.apply(this,arguments)}function $a(){return $a=(0,f.Z)(function*(c,e,r,o,u){c.Ba=(Me,et,Ct)=>{return(Wt=(0,f.Z)(function*(nn,Zn,or,Kn){let Sr=Zn.view.da(or);Sr.Xi&&(Sr=yield Gu(nn.localStore,Zn.query,!1).then(({documents:Qe})=>Zn.view.da(Qe,Sr)));const wi=Kn&&Kn.targetChanges.get(Zn.targetId),qr=Kn&&null!=Kn.targetMismatches.get(Zn.targetId),pt=Zn.view.applyChanges(Sr,nn.isPrimaryClient,wi,qr);return Dp(nn,Zn.targetId,pt.fa),pt.snapshot}),function hn(nn,Zn,or,Kn){return Wt.apply(this,arguments)})(c,Me,et,Ct);var Wt};const m=yield Gu(c.localStore,e,!0),I=new s_(e,m.hs),P=I.da(m.documents),L=Xa.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==c.onlineState,u),J=I.applyChanges(P,c.isPrimaryClient,L);Dp(c,r,J.fa);const he=new Zg(e,r,I);return c.ba.set(e,he),c.Da.has(r)?c.Da.get(r).push(e):c.Da.set(r,[e]),J.snapshot}),$a.apply(this,arguments)}function cc(c,e,r){return od.apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(c,e,r){const o=Le(c),u=o.ba.get(e),m=o.Da.get(u.targetId);if(m.length>1)return o.Da.set(u.targetId,m.filter(I=>!Pa(I,e))),void o.ba.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield ja(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&Ml(o.remoteStore,u.targetId),mh(o,u.targetId)}).catch(wr))):(mh(o,u.targetId),yield ja(o.localStore,u.targetId,!0))})).apply(this,arguments)}function bf(c,e){return qg.apply(this,arguments)}function qg(){return(qg=(0,f.Z)(function*(c,e){const r=Le(c),o=r.ba.get(e),u=r.Da.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),Ml(r.remoteStore,o.targetId))})).apply(this,arguments)}function Cf(){return(Cf=(0,f.Z)(function*(c,e,r){const o=kp(c);try{const u=yield function(I,P){const L=Le(I),J=Jn.now(),he=P.reduce((Ct,Wt)=>Ct.add(Wt.key),pr());let Me,et;return L.persistence.runTransaction("Locally write mutations","readwrite",Ct=>{let Wt=Lr(),hn=pr();return L.os.getEntries(Ct,he).next(nn=>{Wt=nn,Wt.forEach((Zn,or)=>{or.isValidDocument()||(hn=hn.add(Zn))})}).next(()=>L.localDocuments.getOverlayedDocuments(Ct,Wt)).next(nn=>{Me=nn;const Zn=[];for(const or of P){const Kn=Ot(or,Me.get(or.key).overlayedDocument);null!=Kn&&Zn.push(new Fr(or.key,Kn,re(Kn.value.mapValue),bi.exists(!0)))}return L.mutationQueue.addMutationBatch(Ct,J,Zn,P)}).next(nn=>{et=nn;const Zn=nn.applyToLocalDocumentSet(Me,hn);return L.documentOverlayCache.saveOverlays(Ct,nn.batchId,Zn)})}).then(()=>({batchId:et.batchId,changes:Tc(Me)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(I,P,L){let J=I.xa[I.currentUser.toKey()];J||(J=new si(sn)),J=J.insert(P,L),I.xa[I.currentUser.toKey()]=J}(o,u.batchId,r),yield Wc(o,u.changes),yield ih(o.remoteStore)}catch(u){const m=su(u,"Failed to persist write");r.reject(m)}})).apply(this,arguments)}function Tp(c,e){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(c,e){const r=Le(c);try{const o=yield function mo(c,e){const r=Le(c),o=e.snapshotVersion;let u=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const I=r.os.newChangeBuffer({trackRemovals:!0});u=r.ns;const P=[];e.targetChanges.forEach((he,Me)=>{const et=u.get(Me);if(!et)return;P.push(r.Qr.removeMatchingKeys(m,he.removedDocuments,Me).next(()=>r.Qr.addMatchingKeys(m,he.addedDocuments,Me)));let Ct=et.withSequenceNumber(m.currentSequenceNumber);var hn,nn,Zn;null!==e.targetMismatches.get(Me)?Ct=Ct.withResumeToken(Mi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):he.resumeToken.approximateByteSize()>0&&(Ct=Ct.withResumeToken(he.resumeToken,o)),u=u.insert(Me,Ct),nn=Ct,Zn=he,(0===(hn=et).resumeToken.approximateByteSize()||nn.snapshotVersion.toMicroseconds()-hn.snapshotVersion.toMicroseconds()>=3e8||Zn.addedDocuments.size+Zn.modifiedDocuments.size+Zn.removedDocuments.size>0)&&P.push(r.Qr.updateTargetData(m,Ct))});let L=Lr(),J=pr();if(e.documentUpdates.forEach(he=>{e.resolvedLimboDocuments.has(he)&&P.push(r.persistence.referenceDelegate.updateLimboDocument(m,he))}),P.push(Jl(m,I,e.documentUpdates).next(he=>{L=he.cs,J=he.ls})),!o.isEqual(Yt.min())){const he=r.Qr.getLastRemoteSnapshotVersion(m).next(Me=>r.Qr.setTargetsMetadata(m,m.currentSequenceNumber,o));P.push(he)}return at.waitFor(P).next(()=>I.apply(m)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,L,J)).next(()=>L)}).then(m=>(r.ns=u,m))}(r.localStore,e);e.targetChanges.forEach((u,m)=>{const I=r.Fa.get(m);I&&(Ke(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.wa=!0:u.modifiedDocuments.size>0?Ke(I.wa):u.removedDocuments.size>0&&(Ke(I.wa),I.wa=!1))}),yield Wc(r,o,e)}catch(o){yield wr(o)}})).apply(this,arguments)}function lc(c,e,r){const o=Le(c);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.ba.forEach((m,I)=>{const P=I.view.j_(e);P.snapshot&&u.push(P.snapshot)}),function(I,P){const L=Le(I);L.onlineState=P;let J=!1;L.queries.forEach((he,Me)=>{for(const et of Me.U_)et.j_(P)&&(J=!0)}),J&&Af(L)}(o.eventManager,e),u.length&&o.Sa.h_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Ea(c,e,r){return uc.apply(this,arguments)}function uc(){return(uc=(0,f.Z)(function*(c,e,r){const o=Le(c);o.sharedClientState.updateQueryState(e,"rejected",r);const u=o.Fa.get(e),m=u&&u.key;if(m){let I=new si(Jt.comparator);I=I.insert(m,Y.newNoDocument(m,Yt.min()));const P=pr().add(m),L=new Ns(Yt.min(),new Map,new si(sn),I,P);yield Tp(o,L),o.va=o.va.remove(m),o.Fa.delete(e),wf(o)}else yield ja(o.localStore,e,!1).then(()=>mh(o,e,r)).catch(wr)})).apply(this,arguments)}function Ol(c,e){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(c,e){const r=Le(c),o=e.batch.batchId;try{const u=yield function lf(c,e){const r=Le(c);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),m=r.os.newChangeBuffer({trackRemovals:!0});return function(P,L,J,he){const Me=J.batch,et=Me.keys();let Ct=at.resolve();return et.forEach(Wt=>{Ct=Ct.next(()=>he.getEntry(L,Wt)).next(hn=>{const nn=J.docVersions.get(Wt);Ke(null!==nn),hn.version.compareTo(nn)<0&&(Me.applyToRemoteDocument(hn,J),hn.isValidDocument()&&(hn.setReadTime(J.commitVersion),he.addEntry(hn)))})}),Ct.next(()=>P.mutationQueue.removeMutationBatch(L,Me))}(r,o,e,m).next(()=>m.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(P){let L=pr();for(let J=0;J<P.mutationResults.length;++J)P.mutationResults[J].transformResults.length>0&&(L=L.add(P.batch.mutations[J].key));return L}(e))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,e);qc(r,o,null),gh(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Wc(r,u)}catch(u){yield wr(u)}})).apply(this,arguments)}function Tf(c,e,r){return ad.apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(c,e,r){const o=Le(c);try{const u=yield function(I,P){const L=Le(I);return L.persistence.runTransaction("Reject batch","readwrite-primary",J=>{let he;return L.mutationQueue.lookupMutationBatch(J,P).next(Me=>(Ke(null!==Me),he=Me.keys(),L.mutationQueue.removeMutationBatch(J,Me))).next(()=>L.mutationQueue.performConsistencyCheck(J)).next(()=>L.documentOverlayCache.removeOverlaysForBatchId(J,he,P)).next(()=>L.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(J,he)).next(()=>L.localDocuments.getDocuments(J,he))})}(o.localStore,e);qc(o,e,r),gh(o,e),o.sharedClientState.updateMutationState(e,"rejected",r),yield Wc(o,u)}catch(u){yield wr(u)}})).apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(c,e){const r=Le(c);va(r.remoteStore)||Ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(I){const P=Le(I);return P.persistence.runTransaction("Get highest unacknowledged batch id","readonly",L=>P.mutationQueue.getHighestUnacknowledgedBatchId(L))}(r.localStore);if(-1===o)return void e.resolve();const u=r.Oa.get(o)||[];u.push(e),r.Oa.set(o,u)}catch(o){const u=su(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function gh(c,e){(c.Oa.get(e)||[]).forEach(r=>{r.resolve()}),c.Oa.delete(e)}function qc(c,e,r){const o=Le(c);let u=o.xa[o.currentUser.toKey()];if(u){const m=u.get(e);m&&(r?m.reject(r):m.resolve(),u=u.remove(e)),o.xa[o.currentUser.toKey()]=u}}function mh(c,e,r=null){c.sharedClientState.removeLocalQueryTarget(e);for(const o of c.Da.get(e))c.ba.delete(o),r&&c.Sa.ka(o,r);c.Da.delete(e),c.isPrimaryClient&&c.Ma.Vr(e).forEach(o=>{c.Ma.containsKey(o)||wp(c,o)})}function wp(c,e){c.Ca.delete(e.path.canonicalString());const r=c.va.get(e);null!==r&&(Ml(c.remoteStore,r),c.va=c.va.remove(e),c.Fa.delete(r),wf(c))}function Dp(c,e,r){for(const o of r)o instanceof Ip?(c.Ma.addReference(o.key,e),ia(c,o)):o instanceof bp?(Ee("SyncEngine","Document no longer in limbo: "+o.key),c.Ma.removeReference(o.key,e),c.Ma.containsKey(o.key)||wp(c,o.key)):wt()}function ia(c,e){const r=e.key,o=r.path.canonicalString();c.va.get(r)||c.Ca.has(o)||(Ee("SyncEngine","New document in limbo: "+r),c.Ca.add(o),wf(c))}function wf(c){for(;c.Ca.size>0&&c.va.size<c.maxConcurrentLimboResolutions;){const e=c.Ca.values().next().value;c.Ca.delete(e);const r=new Jt(xn.fromString(e)),o=c.Na.next();c.Fa.set(o,new Cp(r)),c.va=c.va.insert(r,o),Sl(c.remoteStore,new St(_i(ze(r.path)),o,"TargetPurposeLimboResolution",U.oe))}}function Wc(c,e,r){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,f.Z)(function*(c,e,r){const o=Le(c),u=[],m=[],I=[];var P;o.ba.isEmpty()||(o.ba.forEach((P,L)=>{I.push(o.Ba(L,e,r).then(J=>{if((J||r)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,J&&!J.fromCache?"current":"not-current"),J){u.push(J);const he=so.Ki(L.targetId,J);m.push(he)}}))}),yield Promise.all(I),o.Sa.h_(u),yield(P=(0,f.Z)(function*(J,he){const Me=Le(J);try{yield Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",et=>at.forEach(he,Ct=>at.forEach(Ct.qi,Wt=>Me.persistence.referenceDelegate.addReference(et,Ct.targetId,Wt)).next(()=>at.forEach(Ct.Qi,Wt=>Me.persistence.referenceDelegate.removeReference(et,Ct.targetId,Wt)))))}catch(et){if(!zn(et))throw et;Ee("LocalStore","Failed to update sequence numbers: "+et)}for(const et of he){const Ct=et.targetId;if(!et.fromCache){const Wt=Me.ns.get(Ct),nn=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);Me.ns=Me.ns.insert(Ct,nn)}}}),function L(J,he){return P.apply(this,arguments)})(o.localStore,m))}),Sp.apply(this,arguments)}function Mp(c,e){return Df.apply(this,arguments)}function Df(){return(Df=(0,f.Z)(function*(c,e){const r=Le(c);if(!r.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const o=yield cf(r.localStore,e);r.currentUser=e,(m=r).Oa.forEach(P=>{P.forEach(L=>{L.reject(new te(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),m.Oa.clear(),r.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Wc(r,o.us)}var m})).apply(this,arguments)}function _h(c,e){const r=Le(c),o=r.Fa.get(e);if(o&&o.wa)return pr().add(o.key);{let u=pr();const m=r.Da.get(e);if(!m)return u;for(const I of m){const P=r.ba.get(I);u=u.unionWith(P.view.Ea)}return u}}function iv(c,e){return cd.apply(this,arguments)}function cd(){return(cd=(0,f.Z)(function*(c,e){const r=Le(c),o=yield Gu(r.localStore,e.query,!0),u=e.view.pa(o);return r.isPrimaryClient&&Dp(r,e.targetId,u.fa),u})).apply(this,arguments)}function sv(c,e){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,f.Z)(function*(c,e){const r=Le(c);return uf(r.localStore,e).then(o=>Wc(r,o))})).apply(this,arguments)}function xp(c,e,r,o){return ld.apply(this,arguments)}function ld(){return(ld=(0,f.Z)(function*(c,e,r,o){const u=Le(c),m=yield function(P,L){const J=Le(P),he=Le(J.mutationQueue);return J.persistence.runTransaction("Lookup mutation documents","readonly",Me=>he.vn(Me,L).next(et=>et?J.localDocuments.getDocuments(Me,et):at.resolve(null)))}(u.localStore,e);var L;null!==m?("pending"===r?yield ih(u.remoteStore):"acknowledged"===r||"rejected"===r?(qc(u,e,o||null),gh(u,e),L=e,Le(Le(u.localStore).mutationQueue).Mn(L)):wt(),yield Wc(u,m)):Ee("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(c,e){const r=Le(c);if(Mf(r),kp(r),!0===e&&!0!==r.La){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield vh(r,o.toArray());r.La=!0,yield yf(r.remoteStore,!0);for(const m of u)Sl(r.remoteStore,m)}else if(!1===e&&!1!==r.La){const o=[];let u=Promise.resolve();r.Da.forEach((m,I)=>{r.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>(mh(r,I),ja(r.localStore,I,!0))),Ml(r.remoteStore,I)}),yield u,yield vh(r,o),function(I){const P=Le(I);P.Fa.forEach((L,J)=>{Ml(P.remoteStore,J)}),P.Ma.mr(),P.Fa=new Map,P.va=new si(Jt.comparator)}(r),r.La=!1,yield yf(r.remoteStore,!1)}})).apply(this,arguments)}function vh(c,e,r){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,f.Z)(function*(c,e,r){const o=Le(c),u=[],m=[];for(const I of e){let P;const L=o.Da.get(I);if(L&&0!==L.length){P=yield bl(o.localStore,_i(L[0]));for(const J of L){const he=o.ba.get(J),Me=yield iv(o,he);Me.snapshot&&m.push(Me.snapshot)}}else{const J=yield qu(o.localStore,I);P=yield bl(o.localStore,J),yield fh(o,yh(J),I,!1,P.resumeToken)}u.push(P)}return o.Sa.h_(m),u})).apply(this,arguments)}function yh(c){return pe(c.path,c.collectionGroup,c.orderBy,c.filters,c.limit,"F",c.startAt,c.endAt)}function Rp(c){return r=Le(c).localStore,Le(Le(r).persistence).Bi();var r}function uu(c,e,r,o){return Op.apply(this,arguments)}function Op(){return(Op=(0,f.Z)(function*(c,e,r,o){const u=Le(c);if(u.La)return void Ee("SyncEngine","Ignoring unexpected query state notification.");const m=u.Da.get(e);if(m&&m.length>0)switch(r){case"current":case"not-current":{const I=yield uf(u.localStore,Cc(m[0])),P=Ns.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Mi.EMPTY_BYTE_STRING);yield Wc(u,I,P);break}case"rejected":yield ja(u.localStore,e,!0),mh(u,e,o);break;default:wt()}})).apply(this,arguments)}function o_(c,e,r){return Np.apply(this,arguments)}function Np(){return(Np=(0,f.Z)(function*(c,e,r){const o=Mf(c);if(o.La){for(const u of e){if(o.Da.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){Ee("SyncEngine","Adding an already active target "+u);continue}const m=yield qu(o.localStore,u),I=yield bl(o.localStore,m);yield fh(o,yh(m),I.targetId,!1,I.resumeToken),Sl(o.remoteStore,I)}for(const u of r)o.Da.has(u)&&(yield ja(o.localStore,u,!1).then(()=>{Ml(o.remoteStore,u),mh(o,u)}).catch(wr))}})).apply(this,arguments)}function Mf(c){const e=Le(c);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_h.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ea.bind(null,e),e.Sa.h_=ra.bind(null,e.eventManager),e.Sa.ka=yp.bind(null,e.eventManager),e}function kp(c){const e=Le(c);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ol.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tf.bind(null,e),e}class Aa{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,f.Z)(function*(){r.serializer=rt(e.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(e),r.persistence=r.createPersistence(e),yield r.persistence.start(),r.localStore=r.createLocalStore(e),r.gcScheduler=r.createGarbageCollectionScheduler(e,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(e,r.localStore)})()}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return na(this.persistence,new Zu,e.initialUser,this.serializer)}createPersistence(e){return new sf(Kd.Hr,this.serializer)}createSharedClientState(e){return new df}terminate(){var e=this;return(0,f.Z)(function*(){var r,o;null===(r=e.gcScheduler)||void 0===r||r.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ud extends Aa{constructor(e,r,o){super(),this.Qa=e,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield r().call(o,e),yield o.Qa.initialize(o,e),yield kp(o.Qa.syncEngine),yield ih(o.Qa.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return na(this.persistence,new Zu,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){return new Wl(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const o=new H(r,this.persistence);return new K(e.asyncQueue,o)}createPersistence(e){const r=Yd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ls.withCacheSize(this.cacheSizeBytes):Ls.DEFAULT;return new Hi(this.synchronizeTabs,r,e.clientId,o,e.asyncQueue,X(),me(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new df}}class Wg extends ud{constructor(e,r){super(e,r,!1),this.Qa=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield r().call(o,e);const u=o.Qa.syncEngine;o.sharedClientState instanceof nh&&(o.sharedClientState.syncEngine={Zs:xp.bind(null,u),Xs:uu.bind(null,u),eo:o_.bind(null,u),Bi:Rp.bind(null,u),Ys:sv.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var m=(0,f.Z)(function*(I){yield function Kc(c,e){return lu.apply(this,arguments)}(o.Qa.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return m.apply(this,arguments)}}())})()}createSharedClientState(e){const r=X();if(!nh.D(r))throw new te(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Yd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nh(r,e.asyncQueue,o,e.clientId,e.initialUser)}}class dd{initialize(e,r){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>lc(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Mp.bind(null,o.syncEngine),yield yf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ac}createDatastore(e){const r=rt(e.databaseInfo.databaseId),o=new M(e.databaseInfo);return new Gr(e.authCredentials,e.appCheckCredentials,o,r)}createRemoteStore(e){return o=this.localStore,u=this.datastore,m=e.asyncQueue,I=r=>lc(this.syncEngine,r,0),P=wl.D()?new wl:new zc,new za(o,u,m,I,P);var o,u,m,I,P}createSyncEngine(e,r){return function(u,m,I,P,L,J,he){const Me=new Gg(u,m,I,P,L,J);return he&&(Me.La=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){var e=this;return(0,f.Z)(function*(){var r,o;yield(o=(0,f.Z)(function*(m){const I=Le(m);Ee("RemoteStore","RemoteStore shutting down."),I.M_.add(5),yield Dl(I),I.O_.shutdown(),I.N_.set("Unknown")}),function u(m){return o.apply(this,arguments)})(e.remoteStore),null===(r=e.datastore)||void 0===r||r.terminate()})()}}function Kg(c,e=10240){let r=0;return{read:()=>(0,f.Z)(function*(){if(r<c.byteLength){const o={value:c.slice(r,r+e),done:!1};return r+=e,o}return{done:!0}})(),cancel:()=>(0,f.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class Qg{constructor(e,r){this.Ua=e,this.serializer=r,this.metadata=new Ie,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(o=>{o&&o.sa()?this.metadata.resolve(o.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.ia)}`))},o=>this.metadata.reject(o))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,f.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,f.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,f.Z)(function*(){const r=yield e.za();if(null===r)return null;const o=e.Wa.decode(r),u=Number(o);isNaN(u)&&e.ja(`length string (${o}) is not valid number`);const m=yield e.Ha(u);return new Ep(JSON.parse(m),r.length+u)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,f.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const r=e.Ja();r<0&&e.ja("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),o})()}Ha(e){var r=this;return(0,f.Z)(function*(){for(;r.buffer.length<e;)(yield r.Ya())&&r.ja("Reached the end of bundle when more is expected.");const o=r.Wa.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),o})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,f.Z)(function*(){const r=yield e.Ua.read();if(!r.done){const o=new Uint8Array(e.buffer.length+r.value.length);o.set(e.buffer),o.set(r.value,e.buffer.length),e.buffer=o}return r.done})()}}class Lp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,f.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new te(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,f.Z)(function*(I,P){const L=Le(I),J={documents:P.map(Ct=>xu(L.serializer,Ct))},he=yield L.xo("BatchGetDocuments",L.serializer.databaseId,xn.emptyPath(),J,P.length),Me=new Map;he.forEach(Ct=>{const Wt=function Yi(c,e){return"found"in e?function(o,u){Ke(!!u.found);const m=Po(o,u.found.name),I=Li(u.found.updateTime),P=u.found.createTime?Li(u.found.createTime):Yt.min(),L=new li({mapValue:{fields:u.found.fields}});return Y.newFoundDocument(m,I,P,L)}(c,e):"missing"in e?function(o,u){Ke(!!u.missing),Ke(!!u.readTime);const m=Po(o,u.missing),I=Li(u.readTime);return Y.newNoDocument(m,I)}(c,e):wt()}(L.serializer,Ct);Me.set(Wt.key.toString(),Wt)});const et=[];return P.forEach(Ct=>{const Wt=Me.get(Ct.toString());Ke(!!Wt),et.push(Wt)}),et}),function m(I,P){return u.apply(this,arguments)})(r.datastore,e);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new pi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,f.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var o;e.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const m=Jt.fromPath(u);e.mutations.push(new Yr(m,e.precondition(m)))}),yield(o=(0,f.Z)(function*(m,I){const P=Le(m),L={writes:I.map(J=>ks(P.serializer,J))};yield P.Co("Commit",P.serializer.databaseId,xn.emptyPath(),L)}),function u(m,I){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw wt();r=Yt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!r.isEqual(o))throw new te(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Yt.min())?bi.exists(!1):bi.updateTime(r):bi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Yt.min()))throw new te(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bi.updateTime(r)}return bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a_{constructor(e,r,o,u,m){this.asyncQueue=e,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=m,this.Za=o.maxAttempts,this.Yo=new Pt(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,f.Z)(function*(){const r=new Lp(e.datastore),o=e.tu(r);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.nu(m)}))}).catch(u=>{e.nu(u)})}))}tu(e){try{const r=this.updateFunction(e);return!Te(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!qs(r)}return!1}}class xf{constructor(e,r,o,u){var m=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=tt.UNAUTHENTICATED,this.clientId=On.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,f.Z)(function*(P){Ee("FirestoreClient","Received user=",P.uid),yield m.authCredentialListener(P),m.user=P});return function(P){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(Ee("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Ie;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=su(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function hd(c,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,f.Z)(function*(c,e){c.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const r=c.configuration;yield e.initialize(r);let o=r.initialUser;c.setCredentialChangeListener(function(){var u=(0,f.Z)(function*(m){o.isEqual(m)||(yield cf(e.localStore,m),o=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>c.terminate()),c._offlineComponents=e}),Qc.apply(this,arguments)}function Za(c,e){return kl.apply(this,arguments)}function kl(){return(kl=(0,f.Z)(function*(c,e){c.asyncQueue.verifyOperationInProgress();const r=yield Up(c);Ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,c.configuration),c.setCredentialChangeListener(o=>Js(e.remoteStore,o)),c.setAppCheckTokenChangeListener((o,u)=>Js(e.remoteStore,u)),c._onlineComponents=e})).apply(this,arguments)}function Vp(c){return"FirebaseError"===c.name?c.code===we.FAILED_PRECONDITION||c.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code}function Up(c){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(c){if(!c._offlineComponents)if(c._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hd(c,c._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!Vp(r))throw r;Vt("Error using user provided cache. Falling back to memory cache: "+r),yield hd(c,new Aa)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),yield hd(c,new Aa);return c._offlineComponents})).apply(this,arguments)}function Yg(c){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,f.Z)(function*(c){return c._onlineComponents||(c._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield Za(c,c._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),yield Za(c,new dd))),c._onlineComponents})).apply(this,arguments)}function c_(c){return Up(c).then(e=>e.persistence)}function Yc(c){return Up(c).then(e=>e.localStore)}function pd(c){return Yg(c).then(e=>e.remoteStore)}function Bp(c){return Yg(c).then(e=>e.syncEngine)}function du(c){return jp.apply(this,arguments)}function jp(){return(jp=(0,f.Z)(function*(c){const e=yield Yg(c),r=e.eventManager;return r.onListen=lh.bind(null,e.syncEngine),r.onUnlisten=cc.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=dh.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=bf.bind(null,e.syncEngine),r})).apply(this,arguments)}function Hp(c,e,r={}){const o=new Ie;return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(m,I,P,L,J){const he=new Pf({next:et=>{I.enqueueAndForget(()=>Gc(m,Me));const Ct=et.docs.has(P);!Ct&&et.fromCache?J.reject(new te(we.UNAVAILABLE,"Failed to get document because the client is offline.")):Ct&&et.fromCache&&L&&"server"===L.source?J.reject(new te(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):J.resolve(et)},error:et=>J.reject(et)}),Me=new ya(ze(P.path),he,{includeMetadataChanges:!0,ra:!0});return rd(m,Me)}(yield du(c),c.asyncQueue,e,r,o)})),o.promise}function zp(c,e,r={}){const o=new Ie;return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(m,I,P,L,J){const he=new Pf({next:et=>{I.enqueueAndForget(()=>Gc(m,Me)),et.fromCache&&"server"===L.source?J.reject(new te(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):J.resolve(et)},error:et=>J.reject(et)}),Me=new ya(P,he,{includeMetadataChanges:!0,ra:!0});return rd(m,Me)}(yield du(c),c.asyncQueue,e,r,o)})),o.promise}function tm(c){const e={};return void 0!==c.timeoutSeconds&&(e.timeoutSeconds=c.timeoutSeconds),e}const qp=new Map;function Wp(c,e,r){if(!r)throw new te(we.INVALID_ARGUMENT,`Function ${c}() cannot be called with an empty ${e}.`)}function Ia(c,e,r,o){if(!0===e&&!0===o)throw new te(we.INVALID_ARGUMENT,`${c} and ${r} cannot be used together.`)}function Ah(c){if(!Jt.isDocumentKey(c))throw new te(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${c} has ${c.length}.`)}function Ih(c){if(Jt.isDocumentKey(c))throw new te(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${c} has ${c.length}.`)}function bh(c){if(void 0===c)return"undefined";if(null===c)return"null";if("string"==typeof c)return c.length>20&&(c=`${c.substring(0,20)}...`),JSON.stringify(c);if("number"==typeof c||"boolean"==typeof c)return""+c;if("object"==typeof c){if(c instanceof Array)return"an array";{const e=(o=c).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof c?"a function":wt()}function Or(c,e){if("_delegate"in c&&(c=c._delegate),!(c instanceof e)){if(e.name===c.constructor.name)throw new te(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=bh(c);throw new te(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return c}function gd(c,e){if(e<=0)throw new te(we.INVALID_ARGUMENT,`Function ${c}() requires a positive number, but it was: ${e}.`)}class Ch{constructor(e){var r,o;if(void 0===e.host){if(void 0!==e.ssl)throw new te(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new te(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ia("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tm(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(m){if(void 0!==m.timeoutSeconds){if(isNaN(m.timeoutSeconds))throw new te(we.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (must not be NaN)`);if(m.timeoutSeconds<5)throw new te(we.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (minimum allowed value is 5)`);if(m.timeoutSeconds>30)throw new te(we.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,r,o,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ch({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new te(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ch(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new je;switch(o.type){case"firstParty":return new Gt(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new te(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=qp.get(r);o&&(Ee("ComponentProvider","Removing Datastore"),qp.delete(r),o.terminate())}(this),Promise.resolve()}}function Rf(c,e,r,o={}){var u;const m=(c=Or(c,md))._getSettings(),I=`${e}:${r}`;if("firestore.googleapis.com"!==m.host&&m.host!==I&&Vt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),c._setSettings(Object.assign(Object.assign({},m),{host:I,ssl:!1})),o.mockUserToken){let P,L;if("string"==typeof o.mockUserToken)P=o.mockUserToken,L=tt.MOCK_USER;else{P=(0,_e.Sg)(o.mockUserToken,null===(u=c._app)||void 0===u?void 0:u.options.projectId);const J=o.mockUserToken.sub||o.mockUserToken.user_id;if(!J)throw new te(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");L=new tt(J)}c._authCredentials=new st(new Pe(P,L))}}class As{constructor(e,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Is{constructor(e,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Is(this.firestore,e,this._key)}}class ba extends As{constructor(e,r,o){super(e,r,ze(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Is(this.firestore,null,new Jt(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function Kp(c,e,...r){if(c=(0,_e.m9)(c),Wp("collection","path",e),c instanceof md){const o=xn.fromString(e,...r);return Ih(o),new ba(c,null,o)}{if(!(c instanceof Is||c instanceof ba))throw new te(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=c._path.child(xn.fromString(e,...r));return Ih(o),new ba(c.firestore,null,o)}}function Th(c,e){if(c=Or(c,md),Wp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(c,null,(o=e,new F(xn.emptyPath(),o)));var o}function Ca(c,e,...r){if(c=(0,_e.m9)(c),1===arguments.length&&(e=On.newId()),Wp("doc","path",e),c instanceof md){const o=xn.fromString(e,...r);return Ah(o),new Is(c,null,new Jt(o))}{if(!(c instanceof Is||c instanceof ba))throw new te(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=c._path.child(xn.fromString(e,...r));return Ah(o),new Is(c.firestore,c instanceof ba?c.converter:null,new Jt(o))}}function Fl(c,e){return c=(0,_e.m9)(c),e=(0,_e.m9)(e),(c instanceof Is||c instanceof ba)&&(e instanceof Is||e instanceof ba)&&c.firestore===e.firestore&&c.path===e.path&&c.converter===e.converter}function Qp(c,e){return c=(0,_e.m9)(c),e=(0,_e.m9)(e),c instanceof As&&e instanceof As&&c.firestore===e.firestore&&Pa(c._query,e._query)&&c.converter===e.converter}class Yp{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Pt(this,"async_queue_retry"),this.hu=()=>{const r=me();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Yo.Wo()};const e=me();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const r=me();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const r=new Ie;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,f.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(r){if(!zn(r))throw r;Ee("AsyncQueue","Operation failed with retryable error: "+r)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const r=this.iu.then(()=>(this.uu=!0,e().catch(o=>{throw this.au=o,this.uu=!1,Nt("INTERNAL UNHANDLED ERROR: ",function(I){let P=I.message||"";return I.stack&&(P=I.stack.includes(I.message)?I.stack:I.message+"\n"+I.stack),P}(o)),o}).then(o=>(this.uu=!1,o))));return this.iu=r,r}enqueueAfterDelay(e,r,o){this.Pu(),this.lu.indexOf(e)>-1&&(r=0);const u=vp.createAndSchedule(this,e,r,o,m=>this.Eu(m));return this._u.push(u),u}Pu(){this.au&&wt()}verifyOperationInProgress(){}du(){var e=this;return(0,f.Z)(function*(){let r;do{r=e.iu,yield r}while(r!==e.iu)})()}Au(e){for(const r of this._u)if(r.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this._u)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const r=this._u.indexOf(e);this._u.splice(r,1)}}function wh(c){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const m of["next","error","complete"])if(m in u&&"function"==typeof u[m])return!0;return!1}(c)}class nm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ie,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,o){this._progressObserver={next:e,error:r,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Ll=-1;class Ti extends md{constructor(e,r,o,u){super(e,r,o,u),this.type="firestore",this._queue=new Yp,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nf(this),this._firestoreClient.terminate()}}function Of(c,e){const r="object"==typeof c?c:(0,s.getApp)(),o="string"==typeof c?c:e||"(default)",u=(0,s._getProvider)(r,"firestore").getImmediate({identifier:o});if(!u._initialized){const m=(0,_e.P0)("firestore");m&&Rf(u,...m)}return u}function zi(c){return c._firestoreClient||Nf(c),c._firestoreClient.verifyNotTerminated(),c._firestoreClient}function Nf(c){var e,r,o;const u=c._freezeSettings(),m=(L=(null===(e=c._app)||void 0===e?void 0:e.options.appId)||"",new fo(c._databaseId,L,c._persistenceKey,(he=u).host,he.ssl,he.experimentalForceLongPolling,he.experimentalAutoDetectLongPolling,tm(he.experimentalLongPollingOptions),he.useFetchStreams));var L,he;c._firestoreClient=new xf(c._authCredentials,c._appCheckCredentials,c._queue,m),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(c._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Dh(c,e){om(c=Or(c,Ti));const r=zi(c);if(r._uninitializedComponentsProvider)throw new te(we.FAILED_PRECONDITION,"SDK cache is already specified.");Vt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=c._freezeSettings(),u=new dd;return fu(r,u,new ud(u,o.cacheSizeBytes,e?.forceOwnership))}function dc(c){om(c=Or(c,Ti));const e=zi(c);if(e._uninitializedComponentsProvider)throw new te(we.FAILED_PRECONDITION,"SDK cache is already specified.");Vt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=c._freezeSettings(),o=new dd;return fu(e,o,new Wg(o,r.cacheSizeBytes))}function fu(c,e,r){const o=new Ie;return c.asyncQueue.enqueue((0,f.Z)(function*(){try{yield hd(c,r),yield Za(c,e),o.resolve()}catch(u){const m=u;if(!Vp(m))throw m;Vt("Error enabling indexeddb cache. Falling back to memory cache: "+m),o.reject(m)}})).then(()=>o.promise)}function Jp(c){if(c._initialized&&!c._terminated)throw new te(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ie;return c._queue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{yield(r=(0,f.Z)(function*(u){if(!ue.D())return Promise.resolve();const m=u+"main";yield ue.delete(m)}),function o(u){return r.apply(this,arguments)})(Yd(c._databaseId,c._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function f_(c){return function(r){const o=new Ie;return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Nl(c,e){return cu.apply(this,arguments)}(yield Bp(r),o)})),o.promise}(zi(c=Or(c,Ti)))}function im(c){return function l_(c){return c.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield c_(c),r=yield pd(c);return e.setNetworkEnabled(!0),function(u){const m=Le(u);return m.M_.delete(0),$c(m)}(r)}))}(zi(c=Or(c,Ti)))}function Sh(c){return function u_(c){return c.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield c_(c),r=yield pd(c);return e.setNetworkEnabled(!1),(o=(0,f.Z)(function*(m){const I=Le(m);I.M_.add(0),yield Dl(I),I.N_.set("Offline")}),function u(m){return o.apply(this,arguments)})(r);var o}))}(zi(c=Or(c,Ti)))}function p_(c,e){const r=zi(c=Or(c,Ti)),o=new nm;return function hu(c,e,r,o){const u=function(I,P){let L;return L="string"==typeof I?Mc().encode(I):I,he=function(he,Me){if(he instanceof Uint8Array)return Kg(he,void 0);if(he instanceof ArrayBuffer)return Kg(new Uint8Array(he),void 0);if(he instanceof ReadableStream)return he.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(L),new Qg(he,P);var he}(r,rt(e));c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){!function _o(c,e,r){const o=Le(c);var u;(u=(0,f.Z)(function*(I,P,L){try{const J=yield P.getMetadata();if(yield function(Wt,hn){const nn=Le(Wt),Zn=Li(hn.createTime);return nn.persistence.runTransaction("hasNewerBundle","readonly",or=>nn.$r.getBundleMetadata(or,hn.id)).then(or=>!!or&&or.createTime.compareTo(Zn)>=0)}(I.localStore,J))return yield P.close(),L._completeWith({taskState:"Success",documentsLoaded:(Wt=J).totalDocuments,bytesLoaded:Wt.totalBytes,totalDocuments:Wt.totalDocuments,totalBytes:Wt.totalBytes}),Promise.resolve(new Set);L._updateProgress($g(J));const he=new Ap(J,I.localStore,P.serializer);let Me=yield P.qa();for(;Me;){const Ct=yield he._a(Me);Ct&&L._updateProgress(Ct),Me=yield P.qa()}const et=yield he.complete();return yield Wc(I,et.ca,void 0),yield function(Wt,hn){const nn=Le(Wt);return nn.persistence.runTransaction("Save bundle","readwrite",Zn=>nn.$r.saveBundleMetadata(Zn,hn))}(I.localStore,J),L._completeWith(et.progress),Promise.resolve(et.ua)}catch(J){return Vt("SyncEngine",`Loading bundle failed with ${J}`),L._failWith(J),Promise.resolve(new Set)}var Wt}),function m(I,P,L){return u.apply(this,arguments)})(o,e,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(c),u,o)}))}(r,c._databaseId,e,o),o}function sm(c,e){return function Zp(c,e){return c.asyncQueue.enqueue((0,f.Z)(function*(){return function(o,u){const m=Le(o);return m.persistence.runTransaction("Get named query","readonly",I=>m.$r.getNamedQuery(I,u))}(yield Yc(c),e)}))}(zi(c=Or(c,Ti)),e).then(r=>r?new As(c,null,r.query):null)}function om(c){if(c._initialized||c._terminated)throw new te(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vl(Mi.fromBase64String(e))}catch(r){throw new te(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Vl(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jc{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new te(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gu{constructor(e){this._methodName=e}}class vd{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new te(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new te(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const lm=/^__.*__$/;class g_{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return null!==this.fieldMask?new Fr(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mn(e,this.data,r,this.fieldTransforms)}}class av{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return new Fr(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function cv(c){switch(c){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class yd{constructor(e,r,o,u,m,I){this.settings=e,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===m&&this.mu(),this.fieldTransforms=m||[],this.fieldMask=I||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.gu({path:o,yu:!1});return u.wu(e),u}Su(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.gu({path:o,yu:!1});return u.mu(),u}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Oh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(cv(this.fu)&&lm.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class um{constructor(e,r,o){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=o||rt(e)}Fu(e,r,o,u=!1){return new yd({fu:e,methodName:r,vu:o,path:sr.emptyPath(),yu:!1,Cu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ao(c){const e=c._freezeSettings(),r=rt(c._databaseId);return new um(c._databaseId,!!e.ignoreUndefinedProperties,r)}function fs(c,e,r,o,u,m={}){const I=c.Fu(m.merge||m.mergeFields?2:0,e,r,u);dm("Data must be an object, but it was:",I,o);const P=Xp(o,I);let L,J;if(m.merge)L=new Ui(I.fieldMask),J=I.fieldTransforms;else if(m.mergeFields){const he=[];for(const Me of m.mergeFields){const et=Id(e,Me,r);if(!I.contains(et))throw new te(we.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);hm(he,et)||he.push(et)}L=new Ui(he),J=I.fieldTransforms.filter(Me=>L.covers(Me.field))}else L=null,J=I.fieldTransforms;return new g_(new li(P),L,J)}class vo extends gu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vo}}function Ed(c,e,r){return new yd({fu:3,vu:e.settings.vu,methodName:c._methodName,yu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kf extends gu{_toFieldTransform(e){return new ha(e.path,new Sc)}isEqual(e){return e instanceof kf}}class mu extends gu{constructor(e,r){super(e),this.Mu=r}_toFieldTransform(e){const r=Ed(this,e,!0),o=this.Mu.map(m=>Ad(m,r)),u=new zo(o);return new ha(e.path,u)}isEqual(e){return e instanceof mu&&(0,_e.vZ)(this.Mu,e.Mu)}}class Ul extends gu{constructor(e,r){super(e),this.Mu=r}_toFieldTransform(e){const r=Ed(this,e,!0),o=this.Mu.map(m=>Ad(m,r)),u=new Do(o);return new ha(e.path,u)}isEqual(e){return e instanceof Ul&&(0,_e.vZ)(this.Mu,e.Mu)}}class Bl extends gu{constructor(e,r){super(e),this.xu=r}_toFieldTransform(e){const r=new Na(e.serializer,jo(e.serializer,this.xu));return new ha(e.path,r)}isEqual(e){return e instanceof Bl&&this.xu===e.xu}}function Mh(c,e,r,o){const u=c.Fu(1,e,r);dm("Data must be an object, but it was:",u,o);const m=[],I=li.empty();ps(o,(L,J)=>{const he=eg(e,L,r);J=(0,_e.m9)(J);const Me=u.Su(he);if(J instanceof vo)m.push(he);else{const et=Ad(J,Me);null!=et&&(m.push(he),I.set(he,et))}});const P=new Ui(m);return new av(I,P,u.fieldTransforms)}function Ph(c,e,r,o,u,m){const I=c.Fu(1,e,r),P=[Id(e,o,r)],L=[u];if(m.length%2!=0)throw new te(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<m.length;et+=2)P.push(Id(e,m[et])),L.push(m[et+1]);const J=[],he=li.empty();for(let et=P.length-1;et>=0;--et)if(!hm(J,P[et])){const Ct=P[et];let Wt=L[et];Wt=(0,_e.m9)(Wt);const hn=I.Su(Ct);if(Wt instanceof vo)J.push(Ct);else{const nn=Ad(Wt,hn);null!=nn&&(J.push(Ct),he.set(Ct,nn))}}const Me=new Ui(J);return new av(he,Me,I.fieldTransforms)}function xh(c,e,r,o=!1){return Ad(r,c.Fu(o?4:3,e))}function Ad(c,e){if(Rh(c=(0,_e.m9)(c)))return dm("Unsupported field value:",e,c),Xp(c,e);if(c instanceof gu)return function(o,u){if(!cv(u.fu))throw u.Du(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Du(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(u);m&&u.fieldTransforms.push(m)}(c,e),null;if(void 0===c&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),c instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(o,u){const m=[];let I=0;for(const P of o){let L=Ad(P,u.bu(I));null==L&&(L={nullValue:"NULL_VALUE"}),m.push(L),I++}return{arrayValue:{values:m}}}(c,e)}return function(o,u){if(null===(o=(0,_e.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return jo(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const m=Jn.fromDate(o);return{timestampValue:ka(u.serializer,m)}}if(o instanceof Jn){const m=new Jn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ka(u.serializer,m)}}if(o instanceof vd)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Vl)return{bytesValue:kd(u.serializer,o._byteString)};if(o instanceof Is){const m=u.databaseId,I=o.firestore._databaseId;if(!I.isEqual(m))throw u.Du(`Document reference is for database ${I.projectId}/${I.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:Fa(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.Du(`Unsupported field value: ${bh(o)}`)}(c,e)}function Xp(c,e){const r={};return Ys(c)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(c,(o,u)=>{const m=Ad(u,e.pu(o));null!=m&&(r[o]=m)}),{mapValue:{fields:r}}}function Rh(c){return!("object"!=typeof c||null===c||c instanceof Array||c instanceof Date||c instanceof Jn||c instanceof vd||c instanceof Vl||c instanceof Is||c instanceof gu)}function dm(c,e,r){if(!Rh(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=bh(r);throw e.Du("an object"===o?c+" a custom object":c+" "+o)}var u}function Id(c,e,r){if((e=(0,_e.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return eg(c,e);throw Oh("Field path arguments must be of type string or ",c,!1,void 0,r)}const lv=new RegExp("[~\\*/\\[\\]]");function eg(c,e,r){if(e.search(lv)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,c,!1,void 0,r);try{return new Jc(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,c,!1,void 0,r)}}function Oh(c,e,r,o,u){const m=o&&!o.isEmpty(),I=void 0!==u;let P=`Function ${e}() called with invalid data`;r&&(P+=" (via `toFirestore()`)"),P+=". ";let L="";return(m||I)&&(L+=" (found",m&&(L+=` in field ${o}`),I&&(L+=` in document ${u}`),L+=")"),new te(we.INVALID_ARGUMENT,P+c+L)}function hm(c,e){return c.some(r=>r.isEqual(e))}class Ff{constructor(e,r,o,u,m){this._firestore=e,this._userDataWriter=r,this._key=o,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Is(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class uv extends Ff{data(){return super.data()}}function fm(c,e){return"string"==typeof e?eg(c,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}function m_(c){if("L"===c.limitType&&0===c.explicitOrderBy.length)throw new te(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _u{}class Xc extends _u{}function tg(c,e,...r){let o=[];e instanceof _u&&o.push(e),o=o.concat(r),function(m){const I=m.filter(L=>L instanceof el).length,P=m.filter(L=>L instanceof Nh).length;if(I>1||I>0&&P>0)throw new te(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)c=u._apply(c);return c}class Nh extends Xc{constructor(e,r,o){super(),this._field=e,this._op=r,this._value=o,this.type="where"}static _create(e,r,o){return new Nh(e,r,o)}_apply(e){const r=this._parse(e);return vm(e._query,r),new As(e.firestore,e.converter,Ic(e._query,r))}_parse(e){const r=ao(e.firestore);return function(m,I,P,L,J,he,Me){let et;if(J.isKeyField()){if("array-contains"===he||"array-contains-any"===he)throw new te(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${he}' queries on documentId().`);if("in"===he||"not-in"===he){_m(Me,he);const Ct=[];for(const Wt of Me)Ct.push(y_(L,m,Wt));et={arrayValue:{values:Ct}}}else et=y_(L,m,Me)}else"in"!==he&&"not-in"!==he&&"array-contains-any"!==he||_m(Me,he),et=xh(P,"where",Me,"in"===he||"not-in"===he);return Qt.create(J,he,et)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}function kh(c,e,r){const o=e,u=fm("where",c);return Nh._create(u,o,r)}class el extends _u{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new el(e,r)}_parse(e){const r=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:An.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,m){let I=u;const P=m.getFlattenedFilters();for(const L of P)vm(I,L),I=Ic(I,L)}(e._query,r),new As(e.firestore,e.converter,Ic(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pm extends Xc{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new pm(e,r)}_apply(e){const r=function(u,m,I){if(null!==u.startAt)throw new te(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new te(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lt(m,I)}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(u,m){const I=u.explicitOrderBy.concat([m]);return new F(u.path,u.collectionGroup,I,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}function gm(c,e="asc"){const r=e,o=fm("orderBy",c);return pm._create(o,r)}class mm extends Xc{constructor(e,r,o){super(),this.type=e,this._limit=r,this._limitType=o}static _create(e,r,o){return new mm(e,r,o)}_apply(e){return new As(e.firestore,e.converter,Ya(e._query,this._limit,this._limitType))}}function fv(c){return gd("limit",c),mm._create("limit",c,"F")}function ng(c){return gd("limitToLast",c),mm._create("limitToLast",c,"L")}class rg extends Xc{constructor(e,r,o){super(),this.type=e,this._docOrFields=r,this._inclusive=o}static _create(e,r,o){return new rg(e,r,o)}_apply(e){const r=v_(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(m=r,new F((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,m,u.endAt)));var u,m}}function Fh(...c){return rg._create("startAt",c,!0)}function Lf(...c){return rg._create("startAfter",c,!1)}class ig extends Xc{constructor(e,r,o){super(),this.type=e,this._docOrFields=r,this._inclusive=o}static _create(e,r,o){return new ig(e,r,o)}_apply(e){const r=v_(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(m=r,new F((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,m)));var u,m}}function __(...c){return ig._create("endBefore",c,!1)}function pv(...c){return ig._create("endAt",c,!0)}function v_(c,e,r,o){if(r[0]=(0,_e.m9)(r[0]),r[0]instanceof Ff)return function(m,I,P,L,J){if(!L)throw new te(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${P}().`);const he=[];for(const Me of hs(m))if(Me.field.isKeyField())he.push(_n(I,L.key));else{const et=L.data.field(Me.field);if(Zs(et))throw new te(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===et){const Ct=Me.field.canonicalString();throw new te(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ct}' (used as the orderBy) does not exist.`)}he.push(et)}return new Ne(he,J)}(c._query,c.firestore._databaseId,e,r[0]._document,o);{const u=ao(c.firestore);return function(I,P,L,J,he,Me){const et=I.explicitOrderBy;if(he.length>et.length)throw new te(we.INVALID_ARGUMENT,`Too many arguments provided to ${J}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ct=[];for(let Wt=0;Wt<he.length;Wt++){const hn=he[Wt];if(et[Wt].field.isKeyField()){if("string"!=typeof hn)throw new te(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${J}(), but got a ${typeof hn}`);if(!_r(I)&&-1!==hn.indexOf("/"))throw new te(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${J}() must be a plain document ID, but '${hn}' contains a slash.`);const nn=I.path.child(xn.fromString(hn));if(!Jt.isDocumentKey(nn))throw new te(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${J}() must result in a valid document path, but '${nn}' is not because it contains an odd number of segments.`);const Zn=new Jt(nn);Ct.push(_n(P,Zn))}else{const nn=xh(L,J,hn);Ct.push(nn)}}return new Ne(Ct,Me)}(c._query,c.firestore._databaseId,u,e,r,o)}}function y_(c,e,r){if("string"==typeof(r=(0,_e.m9)(r))){if(""===r)throw new te(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_r(e)&&-1!==r.indexOf("/"))throw new te(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=e.path.child(xn.fromString(r));if(!Jt.isDocumentKey(o))throw new te(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return _n(c,new Jt(o))}if(r instanceof Is)return _n(c,r._key);throw new te(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(r)}.`)}function _m(c,e){if(!Array.isArray(c)||0===c.length)throw new te(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vm(c,e){const r=function(u,m){for(const I of u)for(const P of I.getFlattenedFilters())if(m.indexOf(P.op)>=0)return P.op;return null}(c.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new te(we.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class E_{convertValue(e,r="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const o={};return ps(e,(u,m)=>{o[u]=this.convertValue(m,r)}),o}convertGeoPoint(e){return new vd(Ei(e.latitude),Ei(e.longitude))}convertArray(e,r){return(e.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(e,r){switch(r){case"previous":const o=to(e);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(ts(e));default:return null}}convertTimestamp(e){const r=ws(e);return new Jn(r.seconds,r.nanos)}convertDocumentKey(e,r){const o=xn.fromString(e);Ke(Ve(o));const u=new qn(o.get(1),o.get(3)),m=new Jt(o.popFirst(5));return u.isEqual(r)||Nt(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}function Lh(c,e,r){let o;return o=c?r&&(r.merge||r.mergeFields)?c.toFirestore(e,r):c.toFirestore(e):e,o}class A_ extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Is(this.firestore,null,r)}}class bd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends Ff{constructor(e,r,o,u,m,I){super(e,r,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const o=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class og extends Cd{data(e={}){return super.data(e)}}class vu{constructor(e,r,o,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new bd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(o=>{e.call(r,new og(this._firestore,this._userDataWriter,o.key,o,new bd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new te(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,m){if(u._snapshot.oldDocs.isEmpty()){let I=0;return u._snapshot.docChanges.map(P=>({type:"added",doc:new og(u._firestore,u._userDataWriter,P.doc.key,P.doc,new bd(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:I++}))}{let I=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(P=>m||3!==P.type).map(P=>{const L=new og(u._firestore,u._userDataWriter,P.doc.key,P.doc,new bd(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter);let J=-1,he=-1;return 0!==P.type&&(J=I.indexOf(P.doc.key),I=I.delete(P.doc.key)),1!==P.type&&(I=I.add(P.doc),he=I.indexOf(P.doc.key)),{type:b_(P.type),doc:L,oldIndex:J,newIndex:he}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function b_(c){switch(c){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function hc(c,e){return c instanceof Cd&&e instanceof Cd?c._firestore===e._firestore&&c._key.isEqual(e._key)&&(null===c._document?null===e._document:c._document.isEqual(e._document))&&c._converter===e._converter:c instanceof vu&&e instanceof vu&&c._firestore===e._firestore&&Qp(c.query,e.query)&&c.metadata.isEqual(e.metadata)&&c._snapshot.isEqual(e._snapshot)}function C_(c){c=Or(c,Is);const e=Or(c.firestore,Ti);return Hp(zi(e),c._key).then(r=>Im(e,c,r))}class Td extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Is(this.firestore,null,r)}}function ym(c){c=Or(c,Is);const e=Or(c.firestore,Ti),r=zi(e),o=new Td(e);return function d_(c,e){const r=new Ie;return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(m,I,P){try{const L=yield function(he,Me){const et=Le(he);return et.persistence.runTransaction("read document","readonly",Ct=>et.localDocuments.getDocument(Ct,Me))}(m,I);L.isFoundDocument()?P.resolve(L):L.isNoDocument()?P.resolve(null):P.reject(new te(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(L){const J=su(L,`Failed to get document '${I} from cache`);P.reject(J)}}),function u(m,I,P){return o.apply(this,arguments)})(yield Yc(c),e,r);var o})),r.promise}(r,c._key).then(u=>new Cd(e,o,c._key,u,new bd(null!==u&&u.hasLocalMutations,!0),c.converter))}function yu(c){c=Or(c,Is);const e=Or(c.firestore,Ti);return Hp(zi(e),c._key,{source:"server"}).then(r=>Im(e,c,r))}function Em(c){c=Or(c,As);const e=Or(c.firestore,Ti),r=zi(e),o=new Td(e);return m_(c._query),zp(r,c._query).then(u=>new vu(e,o,c,u))}function mv(c){c=Or(c,As);const e=Or(c.firestore,Ti),r=zi(e),o=new Td(e);return function Eh(c,e){const r=new Ie;return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(m,I,P){try{const L=yield Gu(m,I,!0),J=new s_(I,L.hs),he=J.da(L.documents),Me=J.applyChanges(he,!1);P.resolve(Me.snapshot)}catch(L){const J=su(L,`Failed to execute query '${I} against cache`);P.reject(J)}}),function u(m,I,P){return o.apply(this,arguments)})(yield Yc(c),e,r);var o})),r.promise}(r,c._query).then(u=>new vu(e,o,c,u))}function Ey(c){c=Or(c,As);const e=Or(c.firestore,Ti),r=zi(e),o=new Td(e);return zp(r,c._query,{source:"server"}).then(u=>new vu(e,o,c,u))}function _v(c,e,r){c=Or(c,Is);const o=Or(c.firestore,Ti),u=Lh(c.converter,e,r);return bs(o,[fs(ao(o),"setDoc",c._key,u,null!==c.converter,r).toMutation(c._key,bi.none())])}function Am(c,e,r,...o){c=Or(c,Is);const u=Or(c.firestore,Ti),m=ao(u);let I;return I="string"==typeof(e=(0,_e.m9)(e))||e instanceof Jc?Ph(m,"updateDoc",c._key,e,r,o):Mh(m,"updateDoc",c._key,e),bs(u,[I.toMutation(c._key,bi.exists(!0))])}function tl(c){return bs(Or(c.firestore,Ti),[new pi(c._key,bi.none())])}function T_(c,e){const r=Or(c.firestore,Ti),o=Ca(c),u=Lh(c.converter,e);return bs(r,[fs(ao(c.firestore),"addDoc",o._key,u,null!==c.converter,{}).toMutation(o._key,bi.exists(!1))]).then(()=>o)}function vv(c,...e){var r,o,u;c=(0,_e.m9)(c);let m={includeMetadataChanges:!1,source:"default"},I=0;"object"!=typeof e[I]||wh(e[I])||(m=e[I],I++);const P={includeMetadataChanges:m.includeMetadataChanges,source:m.source};if(wh(e[I])){const Me=e[I];e[I]=null===(r=Me.next)||void 0===r?void 0:r.bind(Me),e[I+1]=null===(o=Me.error)||void 0===o?void 0:o.bind(Me),e[I+2]=null===(u=Me.complete)||void 0===u?void 0:u.bind(Me)}let L,J,he;if(c instanceof Is)J=Or(c.firestore,Ti),he=ze(c._key.path),L={next:Me=>{e[I]&&e[I](Im(J,c,Me))},error:e[I+1],complete:e[I+2]};else{const Me=Or(c,As);J=Or(Me.firestore,Ti),he=Me._query;const et=new Td(J);L={next:Ct=>{e[I]&&e[I](new vu(J,et,Me,Ct))},error:e[I+1],complete:e[I+2]},m_(c._query)}return function(et,Ct,Wt,hn){const nn=new Pf(hn),Zn=new ya(Ct,nn,Wt);return et.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return rd(yield du(et),Zn)})),()=>{nn.$a(),et.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Gc(yield du(et),Zn)}))}}(zi(J),he,P,L)}function Ay(c,e){return function Xg(c,e){const r=new Pf(e);return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return u=yield du(c),m=r,Le(u).z_.add(m),void m.next();var u,m})),()=>{r.$a(),c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return u=yield du(c),m=r,void Le(u).z_.delete(m);var u,m}))}}(zi(c=Or(c,Ti)),wh(e)?e:{next:e})}function bs(c,e){return function(o,u){const m=new Ie;return o.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Rl(c,e,r){return Cf.apply(this,arguments)}(yield Bp(o),u,m)})),m.promise}(zi(c),e)}function Im(c,e,r){const o=r.docs.get(e._key),u=new Td(c);return new Cd(c,u,e._key,o,new bd(r.hasPendingWrites,r.fromCache),e.converter)}const nl={maxAttempts:5};class rl{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=ao(e)}set(e,r,o){this._verifyNotCommitted();const u=il(e,this._firestore),m=Lh(u.converter,r,o),I=fs(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,bi.none())),this}update(e,r,o,...u){this._verifyNotCommitted();const m=il(e,this._firestore);let I;return I="string"==typeof(r=(0,_e.m9)(r))||r instanceof Jc?Ph(this._dataReader,"WriteBatch.update",m._key,r,o,u):Mh(this._dataReader,"WriteBatch.update",m._key,r),this._mutations.push(I.toMutation(m._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=il(e,this._firestore);return this._mutations=this._mutations.concat(new pi(r._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function il(c,e){if((c=(0,_e.m9)(c)).firestore!==e)throw new te(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return c}class P_ extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=ao(r)}get(r){const o=il(r,this._firestore),u=new A_(this._firestore);return this._transaction.lookup([o._key]).then(m=>{if(!m||1!==m.length)return wt();const I=m[0];if(I.isFoundDocument())return new Ff(this._firestore,u,I.key,I,o.converter);if(I.isNoDocument())return new Ff(this._firestore,u,o._key,null,o.converter);throw wt()})}set(r,o,u){const m=il(r,this._firestore),I=Lh(m.converter,o,u),P=fs(this._dataReader,"Transaction.set",m._key,I,null!==m.converter,u);return this._transaction.set(m._key,P),this}update(r,o,u,...m){const I=il(r,this._firestore);let P;return P="string"==typeof(o=(0,_e.m9)(o))||o instanceof Jc?Ph(this._dataReader,"Transaction.update",I._key,o,u,m):Mh(this._dataReader,"Transaction.update",I._key,o),this._transaction.update(I._key,P),this}delete(r){const o=il(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=il(e,this._firestore),o=new Td(this._firestore);return super.get(e).then(u=>new Cd(this._firestore,o,r._key,u._document,new bd(!1,!1),r.converter))}}function x_(c,e,r){c=Or(c,Ti);const o=Object.assign(Object.assign({},nl),r);return function(m){if(m.maxAttempts<1)throw new te(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(m,I,P){const L=new Ie;return m.asyncQueue.enqueueAndForget((0,f.Z)(function*(){const J=yield function ov(c){return Yg(c).then(e=>e.datastore)}(m);new a_(m.asyncQueue,J,P,I,L).Xa()})),L.promise}(zi(c),u=>e(new P_(c,u)),o)}function Uf(){return new vo("deleteField")}function ag(){return new kf("serverTimestamp")}function Vh(...c){return new mu("arrayUnion",c)}function Bf(...c){return new Ul("arrayRemove",c)}function Cm(c){return new Bl("increment",c)}!function(e,r=!0){Ze=s.SDK_VERSION,(0,s._registerComponent)(new B.wA("firestore",(o,{instanceIdentifier:u,options:m})=>{const I=o.getProvider("app").getImmediate(),P=new Ti(new vt(o.getProvider("auth-internal")),new bn(o.getProvider("app-check-internal")),function(J,he){if(!Object.prototype.hasOwnProperty.apply(J.options,["projectId"]))throw new te(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qn(J.options.projectId,he)}(I,u),I);return m=Object.assign({useFetchStreams:r},m),P._setSettings(m),P},"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)(Oe,"4.6.3",e),(0,s.registerVersion)(Oe,"4.6.3","esm2017")}()},8153:(an,lt,k)=>{"use strict";k.d(lt,{$Y:()=>vn,B0:()=>Bs,FN:()=>Un,IX:()=>Vi,Jt:()=>Ni,UJ:()=>Vr,Ym:()=>_n,a1:()=>ss,aF:()=>xr,bm:()=>In,cF:()=>ai,g6:()=>Ds,gE:()=>ut,gH:()=>Nt,iH:()=>ci,oq:()=>is,pb:()=>er,qm:()=>Hn,sd:()=>Hr,y4:()=>Dn});var f=k(5861),s=k(534),B=k(9058),Se=k(4537);const _e="firebasestorage.googleapis.com",Ae="storageBucket";class $ extends B.ZR{constructor(Y,Ne,$e=0){super(oe(Y),`Firebase Storage: ${Ne} (${oe(Y)})`),this.status_=$e,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$.prototype)}get status(){return this.status_}set status(Y){this.status_=Y}_codeEquals(Y){return oe(Y)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(Y){this.customData.serverResponse=Y,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var z=function(re){return re.UNKNOWN="unknown",re.OBJECT_NOT_FOUND="object-not-found",re.BUCKET_NOT_FOUND="bucket-not-found",re.PROJECT_NOT_FOUND="project-not-found",re.QUOTA_EXCEEDED="quota-exceeded",re.UNAUTHENTICATED="unauthenticated",re.UNAUTHORIZED="unauthorized",re.UNAUTHORIZED_APP="unauthorized-app",re.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",re.INVALID_CHECKSUM="invalid-checksum",re.CANCELED="canceled",re.INVALID_EVENT_NAME="invalid-event-name",re.INVALID_URL="invalid-url",re.INVALID_DEFAULT_BUCKET="invalid-default-bucket",re.NO_DEFAULT_BUCKET="no-default-bucket",re.CANNOT_SLICE_BLOB="cannot-slice-blob",re.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",re.NO_DOWNLOAD_URL="no-download-url",re.INVALID_ARGUMENT="invalid-argument",re.INVALID_ARGUMENT_COUNT="invalid-argument-count",re.APP_DELETED="app-deleted",re.INVALID_ROOT_OPERATION="invalid-root-operation",re.INVALID_FORMAT="invalid-format",re.INTERNAL_ERROR="internal-error",re.UNSUPPORTED_ENVIRONMENT="unsupported-environment",re}(z||{});function oe(re){return"storage/"+re}function be(){return new $(z.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _t(){return new $(z.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Fe(){return new $(z.CANCELED,"User canceled the upload/download.")}function Ge(){return new $(z.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nt(re){return new $(z.INVALID_ARGUMENT,re)}function Vt(){return new $(z.APP_DELETED,"The Firebase app was deleted.")}function Dn(re){return new $(z.INVALID_ROOT_OPERATION,"The operation '"+re+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wt(re,Y){return new $(z.INVALID_FORMAT,"String does not match format '"+re+"': "+Y)}function Ke(re){throw new $(z.INTERNAL_ERROR,"Internal error: "+re)}class ut{constructor(Y,Ne){this.bucket=Y,this.path_=Ne}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const Y=encodeURIComponent;return"/b/"+Y(this.bucket)+"/o/"+Y(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(Y,Ne){let $e;try{$e=ut.makeFromUrl(Y,Ne)}catch{return new ut(Y,"")}if(""===$e.path)return $e;throw function tt(re){return new $(z.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+re+"'.")}(Y)}static makeFromUrl(Y,Ne){let $e=null;const ht="([A-Za-z0-9.\\-_]+)",Sn=new RegExp("^gs://"+ht+"(/(.*))?$","i");function An(xi){xi.path_=decodeURIComponent(xi.path)}const jn=Ne.replace(/[.]/g,"\\."),vr=[{regex:Sn,indices:{bucket:1,path:3},postModify:function Lt(xi){"/"===xi.path.charAt(xi.path.length-1)&&(xi.path_=xi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${jn}/v[A-Za-z0-9_]+/b/${ht}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:An},{regex:new RegExp(`^https?://${Ne===_e?"(?:storage.googleapis.com|storage.cloud.google.com)":Ne}/${ht}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:An}];for(let xi=0;xi<vr.length;xi++){const Qr=vr[xi],Ii=Qr.regex.exec(Y);if(Ii){let os=Ii[Qr.indices.path];os||(os=""),$e=new ut(Ii[Qr.indices.bucket],os),Qr.postModify($e);break}}if(null==$e)throw function Oe(re){return new $(z.INVALID_URL,"Invalid URL '"+re+"'.")}(Y);return $e}}class Le{constructor(Y){this.promise_=Promise.reject(Y)}getPromise(){return this.promise_}cancel(Y=!1){}}function st(re){return"string"==typeof re||re instanceof String}function vt(re){return Bt()&&re instanceof Blob}function Bt(){return typeof Blob<"u"}function Gt(re,Y,Ne,$e){if($e<Y)throw Nt(`Invalid value for '${re}'. Expected ${Y} or greater.`);if($e>Ne)throw Nt(`Invalid value for '${re}'. Expected ${Ne} or less.`)}function Kt(re,Y,Ne){let $e=Y;return null==Ne&&($e=`https://${Y}`),`${Ne}://${$e}/v0${re}`}function bn(re){const Y=encodeURIComponent;let Ne="?";for(const $e in re)re.hasOwnProperty($e)&&(Ne=Ne+(Y($e)+"=")+Y(re[$e])+"&");return Ne=Ne.slice(0,-1),Ne}var Yn=function(re){return re[re.NO_ERROR=0]="NO_ERROR",re[re.NETWORK_ERROR=1]="NETWORK_ERROR",re[re.ABORT=2]="ABORT",re}(Yn||{});function Pn(re,Y){const Ne=re>=500&&re<600,ht=-1!==[408,429].indexOf(re),Lt=-1!==Y.indexOf(re);return Ne||ht||Lt}class On{constructor(Y,Ne,$e,ht,Lt,pn,Sn,Qt,An,mr,jn,Ai=!0){this.url_=Y,this.method_=Ne,this.headers_=$e,this.body_=ht,this.successCodes_=Lt,this.additionalRetryCodes_=pn,this.callback_=Sn,this.errorCallback_=Qt,this.timeout_=An,this.progressCallback_=mr,this.connectionFactory_=jn,this.retry=Ai,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((zr,Rr)=>{this.resolve_=zr,this.reject_=Rr,this.start_()})}start_(){const Ne=($e,ht)=>{const Lt=this.resolve_,pn=this.reject_,Sn=ht.connection;if(ht.wasSuccessCode)try{const Qt=this.callback_(Sn,Sn.getResponse());!function Ie(re){return void 0!==re}(Qt)?Lt():Lt(Qt)}catch(Qt){pn(Qt)}else if(null!==Sn){const Qt=be();Qt.serverResponse=Sn.getErrorText(),pn(this.errorCallback_?this.errorCallback_(Sn,Qt):Qt)}else pn(ht.canceled?this.appDelete_?Vt():Fe():_t())};this.canceled_?Ne(0,new sn(!1,null,!0)):this.backoffId_=function we(re,Y,Ne){let $e=1,ht=null,Lt=null,pn=!1,Sn=0;function Qt(){return 2===Sn}let An=!1;function mr(...Ur){An||(An=!0,Y.apply(null,Ur))}function jn(Ur){ht=setTimeout(()=>{ht=null,re(zr,Qt())},Ur)}function Ai(){Lt&&clearTimeout(Lt)}function zr(Ur,...us){if(An)return void Ai();if(Ur)return Ai(),void mr.call(null,Ur,...us);if(Qt()||pn)return Ai(),void mr.call(null,Ur,...us);let vr;$e<64&&($e*=2),1===Sn?(Sn=2,vr=0):vr=1e3*($e+Math.random()),jn(vr)}let Rr=!1;function mi(Ur){Rr||(Rr=!0,Ai(),!An&&(null!==ht?(Ur||(Sn=2),clearTimeout(ht),jn(0)):Ur||(Sn=1)))}return jn(0),Lt=setTimeout(()=>{pn=!0,mi(!0)},Ne),mi}(($e,ht)=>{if(ht)return void $e(!1,new sn(!1,null,!0));const Lt=this.connectionFactory_();this.pendingConnection_=Lt;const pn=Sn=>{null!==this.progressCallback_&&this.progressCallback_(Sn.loaded,Sn.lengthComputable?Sn.total:-1)};null!==this.progressCallback_&&Lt.addUploadProgressListener(pn),Lt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Lt.removeUploadProgressListener(pn),this.pendingConnection_=null;const Sn=Lt.getErrorCode()===Yn.NO_ERROR,Qt=Lt.getStatus();if(!Sn||Pn(Qt,this.additionalRetryCodes_)&&this.retry){const mr=Lt.getErrorCode()===Yn.ABORT;return void $e(!1,new sn(!1,null,mr))}const An=-1!==this.successCodes_.indexOf(Qt);$e(!0,new sn(An,Lt))})},Ne,this.timeout_)}getPromise(){return this.promise_}cancel(Y){this.canceled_=!0,this.appDelete_=Y||!1,null!==this.backoffId_&&function te(re){re(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sn{constructor(Y,Ne,$e){this.wasSuccessCode=Y,this.connection=Ne,this.canceled=!!$e}}function Mr(...re){const Y=function xn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==Y){const Ne=new Y;for(let $e=0;$e<re.length;$e++)Ne.append(re[$e]);return Ne.getBlob()}if(Bt())return new Blob(re);throw new $(z.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const In={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bn{constructor(Y,Ne){this.data=Y,this.contentType=Ne||null}}function Hn(re,Y){switch(re){case In.RAW:return new Bn(Er(Y));case In.BASE64:case In.BASE64URL:return new Bn(Gn(re,Y));case In.DATA_URL:return new Bn(function Jr(re){const Y=new Wn(re);return Y.base64?Gn(In.BASE64,Y.rest):function br(re){let Y;try{Y=decodeURIComponent(re)}catch{throw wt(In.DATA_URL,"Malformed data URL.")}return Er(Y)}(Y.rest)}(Y),function yi(re){return new Wn(re).contentType}(Y))}throw be()}function Er(re){const Y=[];for(let Ne=0;Ne<re.length;Ne++){let $e=re.charCodeAt(Ne);$e<=127?Y.push($e):$e<=2047?Y.push(192|$e>>6,128|63&$e):55296==(64512&$e)?Ne<re.length-1&&56320==(64512&re.charCodeAt(Ne+1))?($e=65536|(1023&$e)<<10|1023&re.charCodeAt(++Ne),Y.push(240|$e>>18,128|$e>>12&63,128|$e>>6&63,128|63&$e)):Y.push(239,191,189):56320==(64512&$e)?Y.push(239,191,189):Y.push(224|$e>>12,128|$e>>6&63,128|63&$e)}return new Uint8Array(Y)}function Gn(re,Y){switch(re){case In.BASE64:{const ht=-1!==Y.indexOf("-"),Lt=-1!==Y.indexOf("_");if(ht||Lt)throw wt(re,"Invalid character '"+(ht?"-":"_")+"' found: is it base64url encoded?");break}case In.BASE64URL:{const ht=-1!==Y.indexOf("+"),Lt=-1!==Y.indexOf("/");if(ht||Lt)throw wt(re,"Invalid character '"+(ht?"+":"/")+"' found: is it base64 encoded?");Y=Y.replace(/-/g,"+").replace(/_/g,"/");break}}let Ne;try{Ne=function Jt(re){if(typeof atob>"u")throw function Ee(re){return new $(z.UNSUPPORTED_ENVIRONMENT,`${re} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(re)}(Y)}catch(ht){throw ht.message.includes("polyfill")?ht:wt(re,"Invalid character found")}const $e=new Uint8Array(Ne.length);for(let ht=0;ht<Ne.length;ht++)$e[ht]=Ne.charCodeAt(ht);return $e}class Wn{constructor(Y){this.base64=!1,this.contentType=null;const Ne=Y.match(/^data:([^,]+)?,/);if(null===Ne)throw wt(In.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const $e=Ne[1]||null;null!=$e&&(this.base64=function gn(re,Y){return re.length>=Y.length&&re.substring(re.length-Y.length)===Y}($e,";base64"),this.contentType=this.base64?$e.substring(0,$e.length-7):$e),this.rest=Y.substring(Y.indexOf(",")+1)}}class Vr{constructor(Y,Ne){let $e=0,ht="";vt(Y)?(this.data_=Y,$e=Y.size,ht=Y.type):Y instanceof ArrayBuffer?(Ne?this.data_=new Uint8Array(Y):(this.data_=new Uint8Array(Y.byteLength),this.data_.set(new Uint8Array(Y))),$e=this.data_.length):Y instanceof Uint8Array&&(Ne?this.data_=Y:(this.data_=new Uint8Array(Y.length),this.data_.set(Y)),$e=Y.length),this.size_=$e,this.type_=ht}size(){return this.size_}type(){return this.type_}slice(Y,Ne){if(vt(this.data_)){const ht=function sr(re,Y,Ne){return re.webkitSlice?re.webkitSlice(Y,Ne):re.mozSlice?re.mozSlice(Y,Ne):re.slice?re.slice(Y,Ne):null}(this.data_,Y,Ne);return null===ht?null:new Vr(ht)}{const $e=new Uint8Array(this.data_.buffer,Y,Ne-Y);return new Vr($e,!0)}}static getBlob(...Y){if(Bt()){const Ne=Y.map($e=>$e instanceof Vr?$e.data_:$e);return new Vr(Mr.apply(null,Ne))}{const Ne=Y.map(pn=>st(pn)?Hn(In.RAW,pn).data:pn.data_);let $e=0;Ne.forEach(pn=>{$e+=pn.byteLength});const ht=new Uint8Array($e);let Lt=0;return Ne.forEach(pn=>{for(let Sn=0;Sn<pn.length;Sn++)ht[Lt++]=pn[Sn]}),new Vr(ht,!0)}}uploadData(){return this.data_}}function ar(re){let Y;try{Y=JSON.parse(re)}catch{return null}return function je(re){return"object"==typeof re&&!Array.isArray(re)}(Y)?Y:null}function ii(re){const Y=re.lastIndexOf("/",re.length-2);return-1===Y?re:re.slice(Y+1)}function at(re,Y){return Y}class Dt{constructor(Y,Ne,$e,ht){this.server=Y,this.local=Ne||Y,this.writable=!!$e,this.xform=ht||at}}let ue=null;function xt(){if(ue)return ue;const re=[];re.push(new Dt("bucket")),re.push(new Dt("generation")),re.push(new Dt("metageneration")),re.push(new Dt("name","fullPath",!0));const Ne=new Dt("name");Ne.xform=function Y(Lt,pn){return function Be(re){return!st(re)||re.length<2?re:ii(re)}(pn)},re.push(Ne);const ht=new Dt("size");return ht.xform=function $e(Lt,pn){return void 0!==pn?Number(pn):pn},re.push(ht),re.push(new Dt("timeCreated")),re.push(new Dt("updated")),re.push(new Dt("md5Hash",null,!0)),re.push(new Dt("cacheControl",null,!0)),re.push(new Dt("contentDisposition",null,!0)),re.push(new Dt("contentEncoding",null,!0)),re.push(new Dt("contentLanguage",null,!0)),re.push(new Dt("contentType",null,!0)),re.push(new Dt("metadata","customMetadata",!0)),ue=re,ue}function hi(re,Y,Ne){const $e=ar(Y);return null===$e?null:function zn(re,Y,Ne){const $e={type:"file"},ht=Ne.length;for(let Lt=0;Lt<ht;Lt++){const pn=Ne[Lt];$e[pn.local]=pn.xform($e,Y[pn.server])}return function tn(re,Y){Object.defineProperty(re,"ref",{get:function Ne(){const Lt=new ut(re.bucket,re.fullPath);return Y._makeStorageReference(Lt)}})}($e,re),$e}(re,$e,Ne)}function qe(re,Y){const Ne={},$e=Y.length;for(let ht=0;ht<$e;ht++){const Lt=Y[ht];Lt.writable&&(Ne[Lt.server]=re[Lt.local])}return JSON.stringify(Ne)}const ce="prefixes",K="items";class Te{constructor(Y,Ne,$e,ht){this.url=Y,this.method=Ne,this.handler=$e,this.timeout=ht,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xe(re){if(!re)throw be()}function kt(re,Y){return function Ne($e,ht){const Lt=hi(re,ht,Y);return Xe(null!==Lt),Lt}}function cn(re){return function Y(Ne,$e){let ht;return ht=401===Ne.getStatus()?Ne.getErrorText().includes("Firebase App Check token is invalid")?function Ye(){return new $(z.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Re(){return new $(z.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ne.getStatus()?function De(re){return new $(z.QUOTA_EXCEEDED,"Quota for bucket '"+re+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(re.bucket):403===Ne.getStatus()?function We(re){return new $(z.UNAUTHORIZED,"User does not have permission to access '"+re+"'.")}(re.path):$e,ht.status=Ne.getStatus(),ht.serverResponse=$e.serverResponse,ht}}function fn(re){const Y=cn(re);return function Ne($e,ht){let Lt=Y($e,ht);return 404===$e.getStatus()&&(Lt=function ye(re){return new $(z.OBJECT_NOT_FOUND,"Object '"+re+"' does not exist.")}(re.path)),Lt.serverResponse=ht.serverResponse,Lt}}function Xn(re,Y,Ne){const ht=Kt(Y.fullServerUrl(),re.host,re._protocol),pn=re.maxOperationRetryTime,Sn=new Te(ht,"GET",kt(re,Ne),pn);return Sn.errorHandler=fn(Y),Sn}function Je(re,Y,Ne,$e,ht){const Lt={};Lt.prefix=Y.isRoot?"":Y.path+"/",Ne&&Ne.length>0&&(Lt.delimiter=Ne),$e&&(Lt.pageToken=$e),ht&&(Lt.maxResults=ht);const Sn=Kt(Y.bucketOnlyServerUrl(),re.host,re._protocol),An=re.maxOperationRetryTime,mr=new Te(Sn,"GET",function Zt(re,Y){return function Ne($e,ht){const Lt=function U(re,Y,Ne){const $e=ar(Ne);return null===$e?null:function H(re,Y,Ne){const $e={prefixes:[],items:[],nextPageToken:Ne.nextPageToken};if(Ne[ce])for(const ht of Ne[ce]){const Lt=ht.replace(/\/$/,""),pn=re._makeStorageReference(new ut(Y,Lt));$e.prefixes.push(pn)}if(Ne[K])for(const ht of Ne[K]){const Lt=re._makeStorageReference(new ut(Y,ht.name));$e.items.push(Lt)}return $e}(re,Y,$e)}(re,Y,ht);return Xe(null!==Lt),Lt}}(re,Y.bucket),An);return mr.urlParams=Lt,mr.errorHandler=cn(Y),mr}function ln(re,Y,Ne){const $e=Object.assign({},Ne);return $e.fullPath=re.path,$e.size=Y.size(),$e.contentType||($e.contentType=function En(re,Y){return re&&re.contentType||Y&&Y.type()||"application/octet-stream"}(null,Y)),$e}class yn{constructor(Y,Ne,$e,ht){this.current=Y,this.total=Ne,this.finalized=!!$e,this.metadata=ht||null}}function yt(re,Y){let Ne=null;try{Ne=re.getResponseHeader("X-Goog-Upload-Status")}catch{Xe(!1)}return Xe(!!Ne&&-1!==(Y||["active"]).indexOf(Ne)),Ne}const Un={STATE_CHANGED:"state_changed"},vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $n(re){switch(re){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;default:return vn.ERROR}}class Dr{constructor(Y,Ne,$e){if(function Pe(re){return"function"==typeof re}(Y)||null!=Ne||null!=$e)this.next=Y,this.error=Ne??void 0,this.complete=$e??void 0;else{const Lt=Y;this.next=Lt.next,this.error=Lt.error,this.complete=Lt.complete}}}function fi(re){return(...Y)=>{Promise.resolve().then(()=>re(...Y))}}let ti=null;class dr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yn.NO_ERROR,this.sendPromise_=new Promise(Y=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yn.ABORT,Y()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yn.NETWORK_ERROR,Y()}),this.xhr_.addEventListener("load",()=>{Y()})})}send(Y,Ne,$e,ht){if(this.sent_)throw Ke("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ne,Y,!0),void 0!==ht)for(const Lt in ht)ht.hasOwnProperty(Lt)&&this.xhr_.setRequestHeader(Lt,ht[Lt].toString());return void 0!==$e?this.xhr_.send($e):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ke("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ke("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ke("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ke("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(Y){return this.xhr_.getResponseHeader(Y)}addUploadProgressListener(Y){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",Y)}removeUploadProgressListener(Y){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",Y)}}class Pi extends dr{initXhr(){this.xhr_.responseType="text"}}function gi(){return ti?ti():new Pi}class Vi{constructor(Y,Ne,$e=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=Y,this._blob=Ne,this._metadata=$e,this._mappings=xt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ht=>{if(this._request=void 0,this._chunkMultiplier=1,ht._codeEquals(z.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Lt=this.isExponentialBackoffExpired();if(Pn(ht.status,[])){if(!Lt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();ht=_t()}this._error=ht,this._transition("error")}},this._metadataErrorHandler=ht=>{this._request=void 0,ht._codeEquals(z.CANCELED)?this.completeTransitions_():(this._error=ht,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ht,Lt)=>{this._resolve=ht,this._reject=Lt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const Y=this._transferred;return Ne=>this._updateProgress(Y+Ne)}_shouldDoResumable(Y){return Y.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(Y){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ne,$e])=>{switch(this._state){case"running":Y(Ne,$e);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((Y,Ne)=>{const $e=function ft(re,Y,Ne,$e,ht){const Lt=Y.bucketOnlyServerUrl(),pn=ln(Y,$e,ht),Sn={name:pn.fullPath},Qt=Kt(Lt,re.host,re._protocol),mr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${$e.size()}`,"X-Goog-Upload-Header-Content-Type":pn.contentType,"Content-Type":"application/json; charset=utf-8"},jn=qe(pn,Ne),Rr=new Te(Qt,"POST",function zr(mi){let Ur;yt(mi);try{Ur=mi.getResponseHeader("X-Goog-Upload-URL")}catch{Xe(!1)}return Xe(st(Ur)),Ur},re.maxUploadRetryTime);return Rr.urlParams=Sn,Rr.headers=mr,Rr.body=jn,Rr.errorHandler=cn(Y),Rr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ht=this._ref.storage._makeRequest($e,gi,Y,Ne);this._request=ht,ht.getPromise().then(Lt=>{this._request=void 0,this._uploadUrl=Lt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const Y=this._uploadUrl;this._resolveToken((Ne,$e)=>{const ht=function Ft(re,Y,Ne,$e){const Qt=new Te(Ne,"POST",function Lt(An){const mr=yt(An,["active","final"]);let jn=null;try{jn=An.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xe(!1)}jn||Xe(!1);const Ai=Number(jn);return Xe(!isNaN(Ai)),new yn(Ai,$e.size(),"final"===mr)},re.maxUploadRetryTime);return Qt.headers={"X-Goog-Upload-Command":"query"},Qt.errorHandler=cn(Y),Qt}(this._ref.storage,this._ref._location,Y,this._blob),Lt=this._ref.storage._makeRequest(ht,gi,Ne,$e);this._request=Lt,Lt.getPromise().then(pn=>{this._request=void 0,this._updateProgress(pn.current),this._needToFetchStatus=!1,pn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const Y=262144*this._chunkMultiplier,Ne=new yn(this._transferred,this._blob.size()),$e=this._uploadUrl;this._resolveToken((ht,Lt)=>{let pn;try{pn=function Ln(re,Y,Ne,$e,ht,Lt,pn,Sn){const Qt=new yn(0,0);if(pn?(Qt.current=pn.current,Qt.total=pn.total):(Qt.current=0,Qt.total=$e.size()),$e.size()!==Qt.total)throw function dt(){return new $(z.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const An=Qt.total-Qt.current;let mr=An;ht>0&&(mr=Math.min(mr,ht));const jn=Qt.current;let zr="";zr=0===mr?"finalize":An===mr?"upload, finalize":"upload";const Rr={"X-Goog-Upload-Command":zr,"X-Goog-Upload-Offset":`${Qt.current}`},mi=$e.slice(jn,jn+mr);if(null===mi)throw Ge();const vr=new Te(Ne,"POST",function Ur(xi,Qr){const Ii=yt(xi,["active","final"]),po=Qt.current+mr,os=$e.size();let Ps;return Ps="final"===Ii?kt(Y,Lt)(xi,Qr):null,new yn(po,os,"final"===Ii,Ps)},Y.maxUploadRetryTime);return vr.headers=Rr,vr.body=mi.uploadData(),vr.progressCallback=Sn||null,vr.errorHandler=cn(re),vr}(this._ref._location,this._ref.storage,$e,this._blob,Y,this._mappings,Ne,this._makeProgressCallback())}catch(Qt){return this._error=Qt,void this._transition("error")}const Sn=this._ref.storage._makeRequest(pn,gi,ht,Lt,!1);this._request=Sn,Sn.getPromise().then(Qt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Qt.current),Qt.finalized?(this._metadata=Qt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((Y,Ne)=>{const $e=Xn(this._ref.storage,this._ref._location,this._mappings),ht=this._ref.storage._makeRequest($e,gi,Y,Ne);this._request=ht,ht.getPromise().then(Lt=>{this._request=void 0,this._metadata=Lt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((Y,Ne)=>{const $e=function fr(re,Y,Ne,$e,ht){const Lt=Y.bucketOnlyServerUrl(),pn={"X-Goog-Upload-Protocol":"multipart"},Qt=function Sn(){let vr="";for(let xi=0;xi<2;xi++)vr+=Math.random().toString().slice(2);return vr}();pn["Content-Type"]="multipart/related; boundary="+Qt;const An=ln(Y,$e,ht),mr=qe(An,Ne),zr=Vr.getBlob("--"+Qt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mr+"\r\n--"+Qt+"\r\nContent-Type: "+An.contentType+"\r\n\r\n",$e,"\r\n--"+Qt+"--");if(null===zr)throw Ge();const Rr={name:An.fullPath},mi=Kt(Lt,re.host,re._protocol),us=re.maxUploadRetryTime,ds=new Te(mi,"POST",kt(re,Ne),us);return ds.urlParams=Rr,ds.headers=pn,ds.body=zr.uploadData(),ds.errorHandler=cn(Y),ds}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ht=this._ref.storage._makeRequest($e,gi,Y,Ne);this._request=ht,ht.getPromise().then(Lt=>{this._request=void 0,this._metadata=Lt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(Y){const Ne=this._transferred;this._transferred=Y,this._transferred!==Ne&&this._notifyObservers()}_transition(Y){if(this._state!==Y)switch(Y){case"canceling":case"pausing":this._state=Y,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Ne="paused"===this._state;this._state=Y,Ne&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=Y,this._notifyObservers();break;case"canceled":this._error=Fe(),this._state=Y,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const Y=$n(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:Y,metadata:this._metadata,task:this,ref:this._ref}}on(Y,Ne,$e,ht){const Lt=new Dr(Ne||void 0,$e||void 0,ht||void 0);return this._addObserver(Lt),()=>{this._removeObserver(Lt)}}then(Y,Ne){return this._promise.then(Y,Ne)}catch(Y){return this.then(null,Y)}_addObserver(Y){this._observers.push(Y),this._notifyObserver(Y)}_removeObserver(Y){const Ne=this._observers.indexOf(Y);-1!==Ne&&this._observers.splice(Ne,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ne=>{this._notifyObserver(Ne)})}_finishPromise(){if(void 0!==this._resolve){let Y=!0;switch($n(this._state)){case vn.SUCCESS:fi(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:fi(this._reject.bind(null,this._error))();break;default:Y=!1}Y&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(Y){switch($n(this._state)){case vn.RUNNING:case vn.PAUSED:Y.next&&fi(Y.next.bind(Y,this.snapshot))();break;case vn.SUCCESS:Y.complete&&fi(Y.complete.bind(Y))();break;default:Y.error&&fi(Y.error.bind(Y,this._error))()}}resume(){const Y="paused"===this._state||"pausing"===this._state;return Y&&this._transition("running"),Y}pause(){const Y="running"===this._state;return Y&&this._transition("pausing"),Y}cancel(){const Y="running"===this._state||"pausing"===this._state;return Y&&this._transition("canceling"),Y}}class Ys{constructor(Y,Ne){this._service=Y,this._location=Ne instanceof ut?Ne:ut.makeFromUrl(Ne,Y.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(Y,Ne){return new Ys(Y,Ne)}get root(){const Y=new ut(this._location.bucket,"");return this._newRef(this._service,Y)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ii(this._location.path)}get storage(){return this._service}get parent(){const Y=function Pr(re){if(0===re.length)return null;const Y=re.lastIndexOf("/");return-1===Y?"":re.slice(0,Y)}(this._location.path);if(null===Y)return null;const Ne=new ut(this._location.bucket,Y);return new Ys(this._service,Ne)}_throwIfRoot(Y){if(""===this._location.path)throw Dn(Y)}}function Ui(re,Y,Ne){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(re,Y,Ne){const ht=yield bo(re,{pageToken:Ne});Y.prefixes.push(...ht.prefixes),Y.items.push(...ht.items),null!=ht.nextPageToken&&(yield Ui(re,Y,ht.nextPageToken))})).apply(this,arguments)}function bo(re,Y){null!=Y&&"number"==typeof Y.maxResults&&Gt("options.maxResults",1,1e3,Y.maxResults);const Ne=Y||{},$e=Je(re.storage,re._location,"/",Ne.pageToken,Ne.maxResults);return re.storage.makeRequestWithTokens($e,gi)}function ws(re){re._throwIfRoot("getDownloadURL");const Y=function nt(re,Y,Ne){const ht=Kt(Y.fullServerUrl(),re.host,re._protocol),pn=re.maxOperationRetryTime,Sn=new Te(ht,"GET",function mn(re,Y){return function Ne($e,ht){const Lt=hi(re,ht,Y);return Xe(null!==Lt),function Cr(re,Y,Ne,$e){const ht=ar(Y);if(null===ht||!st(ht.downloadTokens))return null;const Lt=ht.downloadTokens;if(0===Lt.length)return null;const pn=encodeURIComponent;return Lt.split(",").map(An=>{const jn=re.fullPath;return Kt("/b/"+pn(re.bucket)+"/o/"+pn(jn),Ne,$e)+bn({alt:"media",token:An})})[0]}(Lt,ht,re.host,re._protocol)}}(re,Ne),pn);return Sn.errorHandler=fn(Y),Sn}(re.storage,re._location,xt());return re.storage.makeRequestWithTokens(Y,gi).then(Ne=>{if(null===Ne)throw function bt(){return new $(z.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Ne})}function gs(re,Y){const Ne=function wr(re,Y){const Ne=Y.split("/").filter($e=>$e.length>0).join("/");return 0===re.length?Ne:re+"/"+Ne}(re._location.path,Y),$e=new ut(re._location.bucket,Ne);return new Ys(re.storage,$e)}function ts(re,Y){if(re instanceof oi){const Ne=re;if(null==Ne._bucket)throw function Ze(){return new $(z.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ae+"' property when initializing the app?")}();const $e=new Ys(Ne,Ne._bucket);return null!=Y?ts($e,Y):$e}return void 0!==Y?gs(re,Y):re}function fo(re,Y){if(Y&&function Zs(re){return/^[A-Za-z]+:\/\//.test(re)}(Y)){if(re instanceof oi)return function to(re,Y){return new Ys(re,Y)}(re,Y);throw Nt("To use ref(service, url), the first argument must be a Storage instance.")}return ts(re,Y)}function qn(re,Y){const Ne=Y?.[Ae];return null==Ne?null:ut.makeFromBucketSpec(Ne,re)}class oi{constructor(Y,Ne,$e,ht,Lt){this.app=Y,this._authProvider=Ne,this._appCheckProvider=$e,this._url=ht,this._firebaseVersion=Lt,this._bucket=null,this._host=_e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ht?ut.makeFromBucketSpec(ht,this._host):qn(this._host,this.app.options)}get host(){return this._host}set host(Y){this._host=Y,this._bucket=null!=this._url?ut.makeFromBucketSpec(this._url,Y):qn(Y,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(Y){Gt("time",0,Number.POSITIVE_INFINITY,Y),this._maxUploadRetryTime=Y}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(Y){Gt("time",0,Number.POSITIVE_INFINITY,Y),this._maxOperationRetryTime=Y}_getAuthToken(){var Y=this;return(0,f.Z)(function*(){if(Y._overrideAuthToken)return Y._overrideAuthToken;const Ne=Y._authProvider.getImmediate({optional:!0});if(Ne){const $e=yield Ne.getToken();if(null!==$e)return $e.accessToken}return null})()}_getAppCheckToken(){var Y=this;return(0,f.Z)(function*(){const Ne=Y._appCheckProvider.getImmediate({optional:!0});return Ne?(yield Ne.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(Y=>Y.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(Y){return new Ys(this,Y)}_makeRequest(Y,Ne,$e,ht,Lt=!0){if(this._deleted)return new Le(Vt());{const pn=function Br(re,Y,Ne,$e,ht,Lt,pn=!0){const Sn=bn(re.urlParams),Qt=re.url+Sn,An=Object.assign({},re.headers);return function Jn(re,Y){Y&&(re["X-Firebase-GMPID"]=Y)}(An,Y),function Nn(re,Y){null!==Y&&Y.length>0&&(re.Authorization="Firebase "+Y)}(An,Ne),function gr(re,Y){re["X-Firebase-Storage-Version"]="webjs/"+(Y??"AppManager")}(An,Lt),function Yt(re,Y){null!==Y&&(re["X-Firebase-AppCheck"]=Y)}(An,$e),new On(Qt,re.method,An,re.body,re.successCodes,re.additionalRetryCodes,re.handler,re.errorHandler,re.timeout,re.progressCallback,ht,pn)}(Y,this._appId,$e,ht,Ne,this._firebaseVersion,Lt);return this._requests.add(pn),pn.getPromise().then(()=>this._requests.delete(pn),()=>this._requests.delete(pn)),pn}}makeRequestWithTokens(Y,Ne){var $e=this;return(0,f.Z)(function*(){const[ht,Lt]=yield Promise.all([$e._getAuthToken(),$e._getAppCheckToken()]);return $e._makeRequest(Y,Ne,ht,Lt).getPromise()})()}}const Bi="@firebase/storage",ns="storage";function Bs(re,Y,Ne){return function Xr(re,Y,Ne){return re._throwIfRoot("uploadBytesResumable"),new Vi(re,new Vr(Y),Ne)}(re=(0,B.m9)(re),Y,Ne)}function Hr(re){return function Mi(re){re._throwIfRoot("getMetadata");const Y=Xn(re.storage,re._location,xt());return re.storage.makeRequestWithTokens(Y,gi)}(re=(0,B.m9)(re))}function _n(re,Y){return function Uo(re,Y){re._throwIfRoot("updateMetadata");const Ne=function jt(re,Y,Ne,$e){const Lt=Kt(Y.fullServerUrl(),re.host,re._protocol),Sn=qe(Ne,$e),An=re.maxOperationRetryTime,mr=new Te(Lt,"PATCH",kt(re,$e),An);return mr.headers={"Content-Type":"application/json; charset=utf-8"},mr.body=Sn,mr.errorHandler=fn(Y),mr}(re.storage,re._location,Y,xt());return re.storage.makeRequestWithTokens(Ne,gi)}(re=(0,B.m9)(re),Y)}function er(re,Y){return bo(re=(0,B.m9)(re),Y)}function xr(re){return function Us(re){const Y={prefixes:[],items:[]};return Ui(re,Y).then(()=>Y)}(re=(0,B.m9)(re))}function Ni(re){return ws(re=(0,B.m9)(re))}function is(re){return function Ei(re){re._throwIfRoot("deleteObject");const Y=function en(re,Y){const $e=Kt(Y.fullServerUrl(),re.host,re._protocol),Sn=new Te($e,"DELETE",function pn(Qt,An){},re.maxOperationRetryTime);return Sn.successCodes=[200,204],Sn.errorHandler=fn(Y),Sn}(re.storage,re._location);return re.storage.makeRequestWithTokens(Y,gi)}(re=(0,B.m9)(re))}function ci(re,Y){return fo(re=(0,B.m9)(re),Y)}function Ds(re,Y){return gs(re,Y)}function ai(re=(0,s.getApp)(),Y){re=(0,B.m9)(re);const $e=(0,s._getProvider)(re,ns).getImmediate({identifier:Y}),ht=(0,B.P0)("storage");return ht&&ss($e,...ht),$e}function ss(re,Y,Ne,$e={}){!function Kr(re,Y,Ne,$e={}){re.host=`${Y}:${Ne}`,re._protocol="http";const{mockUserToken:ht}=$e;ht&&(re._overrideAuthToken="string"==typeof ht?ht:(0,B.Sg)(ht,re.app.options.projectId))}(re,Y,Ne,$e)}function Ss(re,{instanceIdentifier:Y}){const Ne=re.getProvider("app").getImmediate(),$e=re.getProvider("auth-internal"),ht=re.getProvider("app-check-internal");return new oi(Ne,$e,ht,Y,s.SDK_VERSION)}!function li(){(0,s._registerComponent)(new Se.wA(ns,Ss,"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)(Bi,"0.12.5",""),(0,s.registerVersion)(Bi,"0.12.5","esm2017")}()},9058:(an,lt,k)=>{"use strict";k.d(lt,{BH:()=>Ze,G6:()=>we,L:()=>ve,LL:()=>vt,P0:()=>Fe,Pz:()=>tt,Sg:()=>Ge,UG:()=>Ee,ZB:()=>oe,ZR:()=>st,aH:()=>Oe,b$:()=>Dn,eu:()=>Ie,hl:()=>te,jU:()=>Nt,m9:()=>Cr,ne:()=>Er,pd:()=>Bn,r3:()=>gr,ru:()=>Vt,tV:()=>$,uI:()=>bt,vZ:()=>xn,w1:()=>Ke,xO:()=>Jt,xb:()=>Yt,z$:()=>dt,zd:()=>In});const Se=function(qe){const ce=[];let K=0;for(let H=0;H<qe.length;H++){let U=qe.charCodeAt(H);U<128?ce[K++]=U:U<2048?(ce[K++]=U>>6|192,ce[K++]=63&U|128):55296==(64512&U)&&H+1<qe.length&&56320==(64512&qe.charCodeAt(H+1))?(U=65536+((1023&U)<<10)+(1023&qe.charCodeAt(++H)),ce[K++]=U>>18|240,ce[K++]=U>>12&63|128,ce[K++]=U>>6&63|128,ce[K++]=63&U|128):(ce[K++]=U>>12|224,ce[K++]=U>>6&63|128,ce[K++]=63&U|128)}return ce},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(qe,ce){if(!Array.isArray(qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let U=0;U<qe.length;U+=3){const Te=qe[U],Xe=U+1<qe.length,kt=Xe?qe[U+1]:0,Zt=U+2<qe.length,mn=Zt?qe[U+2]:0;let Xn=(15&kt)<<2|mn>>6,Je=63&mn;Zt||(Je=64,Xe||(Xn=64)),H.push(K[Te>>2],K[(3&Te)<<4|kt>>4],K[Xn],K[Je])}return H.join("")},encodeString(qe,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(qe):this.encodeByteArray(Se(qe),ce)},decodeString(qe,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(qe):function(qe){const ce=[];let K=0,H=0;for(;K<qe.length;){const U=qe[K++];if(U<128)ce[H++]=String.fromCharCode(U);else if(U>191&&U<224){const Te=qe[K++];ce[H++]=String.fromCharCode((31&U)<<6|63&Te)}else if(U>239&&U<365){const Zt=((7&U)<<18|(63&qe[K++])<<12|(63&qe[K++])<<6|63&qe[K++])-65536;ce[H++]=String.fromCharCode(55296+(Zt>>10)),ce[H++]=String.fromCharCode(56320+(1023&Zt))}else{const Te=qe[K++],Xe=qe[K++];ce[H++]=String.fromCharCode((15&U)<<12|(63&Te)<<6|63&Xe)}}return ce.join("")}(this.decodeStringToByteArray(qe,ce))},decodeStringToByteArray(qe,ce){this.init_();const K=ce?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let U=0;U<qe.length;){const Te=K[qe.charAt(U++)],kt=U<qe.length?K[qe.charAt(U)]:0;++U;const mn=U<qe.length?K[qe.charAt(U)]:64;++U;const fn=U<qe.length?K[qe.charAt(U)]:64;if(++U,null==Te||null==kt||null==mn||null==fn)throw new de;H.push(Te<<2|kt>>4),64!==mn&&(H.push(kt<<4&240|mn>>2),64!==fn&&H.push(mn<<6&192|fn))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let qe=0;qe<this.ENCODED_VALS.length;qe++)this.byteToCharMap_[qe]=this.ENCODED_VALS.charAt(qe),this.charToByteMap_[this.byteToCharMap_[qe]]=qe,this.byteToCharMapWebSafe_[qe]=this.ENCODED_VALS_WEBSAFE.charAt(qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[qe]]=qe,qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(qe)]=qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(qe)]=qe)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ve=function(qe){return function(qe){const ce=Se(qe);return Ae.encodeByteArray(ce,!0)}(qe).replace(/\./g,"")},$=function(qe){try{return Ae.decodeString(qe,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function oe(qe,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===qe&&(qe={});break;case Array:qe=[];break;default:return ce}for(const K in ce)!ce.hasOwnProperty(K)||!be(K)||(qe[K]=oe(qe[K],ce[K]));return qe}function be(qe){return"__proto__"!==qe}const We=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const qe=process.env.__FIREBASE_DEFAULTS__;return qe?JSON.parse(qe):void 0})()||(()=>{if(typeof document>"u")return;let qe;try{qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ce=qe&&$(qe[1]);return ce&&JSON.parse(ce)})()}catch(qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${qe}`)}},Fe=qe=>{const ce=(qe=>{var ce,K;return null===(K=null===(ce=We())||void 0===ce?void 0:ce.emulatorHosts)||void 0===K?void 0:K[qe]})(qe);if(!ce)return;const K=ce.lastIndexOf(":");if(K<=0||K+1===ce.length)throw new Error(`Invalid host ${ce} with no separate hostname and port!`);const H=parseInt(ce.substring(K+1),10);return"["===ce[0]?[ce.substring(1,K-1),H]:[ce.substring(0,K),H]},Oe=()=>{var qe;return null===(qe=We())||void 0===qe?void 0:qe.config},tt=qe=>{var ce;return null===(ce=We())||void 0===ce?void 0:ce[`_${qe}`]};class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,K)=>{this.resolve=ce,this.reject=K})}wrapCallback(ce){return(K,H)=>{K?this.reject(K):this.resolve(H),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(K):ce(K,H))}}}function Ge(qe,ce){if(qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=ce||"demo-project",U=qe.iat||0,Te=qe.sub||qe.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xe=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:U,exp:U+3600,auth_time:U,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},qe);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Xe)),""].join(".")}function dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function Ee(){var qe;const ce=null===(qe=We())||void 0===qe?void 0:qe.forceEnvironment;if("node"===ce)return!0;if("browser"===ce)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Nt(){return"object"==typeof self&&self.self===self}function Vt(){const qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof qe&&void 0!==qe.id}function Dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const qe=dt();return qe.indexOf("MSIE ")>=0||qe.indexOf("Trident/")>=0}function we(){return!Ee()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function Ie(){return new Promise((qe,ce)=>{try{let K=!0;const H="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(H);U.onsuccess=()=>{U.result.close(),K||self.indexedDB.deleteDatabase(H),qe(!0)},U.onupgradeneeded=()=>{K=!1},U.onerror=()=>{var Te;ce((null===(Te=U.error)||void 0===Te?void 0:Te.message)||"")}}catch(K){ce(K)}})}class st extends Error{constructor(ce,K,H){super(K),this.code=ce,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(ce,K,H){this.service=ce,this.serviceName=K,this.errors=H}create(ce,...K){const H=K[0]||{},U=`${this.service}/${ce}`,Te=this.errors[ce],Xe=Te?function Bt(qe,ce){return qe.replace(Gt,(K,H)=>{const U=ce[H];return null!=U?String(U):`<${H}?>`})}(Te,H):"Error";return new st(U,`${this.serviceName}: ${Xe} (${U}).`,H)}}const Gt=/\{\$([^}]+)}/g;function gr(qe,ce){return Object.prototype.hasOwnProperty.call(qe,ce)}function Yt(qe){for(const ce in qe)if(Object.prototype.hasOwnProperty.call(qe,ce))return!1;return!0}function xn(qe,ce){if(qe===ce)return!0;const K=Object.keys(qe),H=Object.keys(ce);for(const U of K){if(!H.includes(U))return!1;const Te=qe[U],Xe=ce[U];if(Mr(Te)&&Mr(Xe)){if(!xn(Te,Xe))return!1}else if(Te!==Xe)return!1}for(const U of H)if(!K.includes(U))return!1;return!0}function Mr(qe){return null!==qe&&"object"==typeof qe}function Jt(qe){const ce=[];for(const[K,H]of Object.entries(qe))Array.isArray(H)?H.forEach(U=>{ce.push(encodeURIComponent(K)+"="+encodeURIComponent(U))}):ce.push(encodeURIComponent(K)+"="+encodeURIComponent(H));return ce.length?"&"+ce.join("&"):""}function In(qe){const ce={};return qe.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[U,Te]=H.split("=");ce[decodeURIComponent(U)]=decodeURIComponent(Te)}}),ce}function Bn(qe){const ce=qe.indexOf("?");if(!ce)return"";const K=qe.indexOf("#",ce);return qe.substring(ce,K>0?K:void 0)}function Er(qe,ce){const K=new br(qe,ce);return K.subscribe.bind(K)}class br{constructor(ce,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{ce(this)}).catch(H=>{this.error(H)})}next(ce){this.forEachObserver(K=>{K.next(ce)})}error(ce){this.forEachObserver(K=>{K.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,K,H){let U;if(void 0===ce&&void 0===K&&void 0===H)throw new Error("Missing Observer.");U=function Wn(qe,ce){if("object"!=typeof qe||null===qe)return!1;for(const K of ce)if(K in qe&&"function"==typeof qe[K])return!0;return!1}(ce,["next","error","complete"])?ce:{next:ce,error:K,complete:H},void 0===U.next&&(U.next=Jr),void 0===U.error&&(U.error=Jr),void 0===U.complete&&(U.complete=Jr);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),Te}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,ce)}sendOne(ce,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{K(this.observers[ce])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}function Cr(qe){return qe&&qe._delegate?qe._delegate:qe}},769:(an,lt,k)=>{"use strict";k.d(lt,{y:()=>oe});var f=k(5861),s=k(2181),B=k(7398),Se=k(1631),_e=k(6306),Ae=k(2096),de=k(3914),ae=k(5879),ve=k(7104),$=k(9862),z=k(6814);let oe=(()=>{class be{constructor(De,Re,Ye,We,_t,Fe){this.firestore=De,this.http=Re,this.route=Ye,this.location=We,this.router=_t,this.activatedRoute=Fe,this.analyticsCollection=this.firestore.collection("analytics"),this.trackPageViews()}getAnalytics(){return this.firestore.collection("analytics",De=>De.orderBy("timestamp","desc")).valueChanges()}trackPageViews(){this.router.events.pipe((0,s.h)(De=>De instanceof de.m2),(0,B.U)(()=>this.activatedRoute),(0,B.U)(De=>{for(;De.firstChild;)De=De.firstChild;return De}),(0,Se.z)(De=>De.queryParams),(0,Se.z)(De=>this.router.events.pipe((0,s.h)(Re=>Re instanceof de.m2),(0,B.U)(Re=>({navigationEvent:Re,queryParams:De}))))).subscribe(({navigationEvent:De,queryParams:Re})=>{this.logAnalyticsData(De.urlAfterRedirects,Re,De.type)})}logAnalyticsData(De,Re,Ye){var We=this;return(0,f.Z)(function*(){const _t=navigator.userAgent,Fe=new Date,Oe=We.getBrowserType(_t),tt=/mobile/i.test(_t),Ze={pagePath:De,queryParams:Re,timestamp:Fe,browser:Oe,isMobile:tt,event_type:Ye};return We.firestore.collection("analytics").add(Ze)})()}getBrowserType(De){return De.includes("Firefox")?"Firefox":De.includes("Chrome")?"Chrome":De.includes("Safari")?"Safari":De.includes("Edge")?"Edge":"Unknown"}getIPAddress(){return this.http.get("https://api.ipify.org/?format=json").pipe((0,_e.K)(De=>(console.error("Error getting IP address: ",De),(0,Ae.of)({ip:"Unknown"}))))}static#e=this.\u0275fac=function(Re){return new(Re||be)(ae.LFG(ve.ST),ae.LFG($.eN),ae.LFG(de.gz),ae.LFG(z.Ye),ae.LFG(de.F0),ae.LFG(de.gz))};static#t=this.\u0275prov=ae.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"})}return be})()},4626:(an,lt,k)=>{"use strict";k.d(lt,{e:()=>ae});var f=k(5861),s=k(2459),B=k(6306),Se=k(7398),_e=k(5879),Ae=k(7213),de=k(3914);let ae=(()=>{class ve{constructor(z,oe){this.afAuth=z,this.router=oe,this.user$=this.afAuth.authState}login(z,oe){return this.router.navigate(["/admin"]),(0,s.D)(this.afAuth.signInWithEmailAndPassword(z,oe)).pipe((0,B.K)(be=>{throw console.error("Login error: ",be),be}))}logout(){var z=this;return(0,f.Z)(function*(){yield z.afAuth.signOut(),z.router.navigate(["/login"])})()}isLoggedIn(){return this.user$.pipe((0,Se.U)(z=>!!z))}static#e=this.\u0275fac=function(oe){return new(oe||ve)(_e.LFG(Ae.zQ),_e.LFG(de.F0))};static#t=this.\u0275prov=_e.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"})}return ve})()},5842:(an,lt,k)=>{"use strict";k.d(lt,{I:()=>Ae});var f=k(5861);class s{constructor(){this.message="",this.context="",this.stack="",this.timestamp=new Date,this.id=""}}var B=k(1043),Se=k(5879),_e=k(7104);let Ae=(()=>{class de{constructor(ve){this.firestore=ve,this.err=new s,this.errorLogsCollection=this.firestore.collection("errorLogs")}logError(ve,$){const z={message:ve.message||ve.toString(),stack:ve.stack||"",timestamp:B.EK.now(),context:$||""};return this.firestore.collection("errorLogs").add(Object.assign({},z))}getErrorLogs(){return this.firestore.collection("errorLogs",ve=>ve.orderBy("timestamp","desc").limit(200)).valueChanges()}clearErrorLogs(){var ve=this;return(0,f.Z)(function*(){const $=yield ve.firestore.collection("errorLogs").get().toPromise();if($&&!$.empty){const z=ve.firestore.firestore.batch();return $.forEach(oe=>{z.delete(oe.ref)}),z.commit()}console.warn("No error logs to clear.")})()}static#e=this.\u0275fac=function($){return new($||de)(Se.LFG(_e.ST))};static#t=this.\u0275prov=Se.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"})}return de})()},3375:(an,lt,k)=>{"use strict";k.d(lt,{n:()=>de});var f=k(7398),s=k(6306),B=k(8504),Se=k(5879),_e=k(7104),Ae=k(5842);let de=(()=>{class ae{constructor($,z){this.firestore=$,this.errorLoggingService=z,this.eventsCollection=this.firestore.collection("Events")}getEvents(){return this.firestore.collection("Events",$=>$.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)($=>$.map(z=>{const oe=z.payload.doc.data();return{id:z.payload.doc.id,...oe}})),(0,f.U)($=>$.filter(z=>z.Approved)),(0,s.K)($=>(this.errorLoggingService.logError($,"getEvents"),(0,B._)(()=>new Error($)))))}getAllEvents(){return this.firestore.collection("Events",$=>$.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)($=>$.map(z=>{const oe=z.payload.doc.data();return{id:z.payload.doc.id,...oe}})),(0,s.K)($=>(this.errorLoggingService.logError($,"getAllEvents"),(0,B._)(()=>new Error($)))))}getEventById($){return this.eventsCollection.doc($).valueChanges().pipe((0,s.K)(z=>(this.errorLoggingService.logError(z,`getEventById: ${$}`),(0,B._)(()=>new Error(z)))))}addEvent($){const z=this.firestore.createId();return $.Date_Created=new Date,$.Date_Updated=new Date,$.ApprovedDate=new Date,$.Approved=!0,this.firestore.collection("Events").doc(z).set($).catch(oe=>{throw this.errorLoggingService.logError(oe,"addEvent"),oe})}updateEvent($,z){return z.Date_Updated=new Date,this.eventsCollection.doc($).update(z).catch(oe=>{throw this.errorLoggingService.logError(oe,"updateEvent"),oe}),this.firestore.doc(`Events/${$}`).valueChanges().pipe((0,f.U)(oe=>oe?{id:$,...oe}:void 0))}deleteEvent($){return this.eventsCollection.doc($).delete().catch(z=>{throw this.errorLoggingService.logError(z,"deleteEvent"),z})}static#e=this.\u0275fac=function(z){return new(z||ae)(Se.LFG(_e.ST),Se.LFG(Ae.I))};static#t=this.\u0275prov=Se.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"})}return ae})()},8779:(an,lt,k)=>{"use strict";k.d(lt,{K:()=>$});var f=k(4716),s=k(4664),B=k(6306),Se=k(5592),_e=k(2459),Ae=k(8504),de=k(5879),ae=k(243),ve=k(5842);let $=(()=>{class z{constructor(be,ye){this.storage=be,this.errorLoggingService=ye}uploadImage(be,ye){const De=`${ye}/${be.name}`,Re=this.storage.ref(De),Ye=this.storage.upload(De,be);return new Se.y(We=>{Ye.snapshotChanges().pipe((0,f.x)(()=>{Re.getDownloadURL().subscribe(_t=>{We.next(_t),We.complete()})})).subscribe()})}uploadOfferImage(be,ye){const De=`offers/${ye}/${be.name}`,Re=this.storage.ref(De),Ye=this.storage.upload(De,be);return(0,_e.D)(Ye).pipe((0,s.w)(()=>Re.getDownloadURL()),(0,B.K)(We=>{throw this.errorLoggingService.logError(We,"uploadImage"),We}))}deleteOfferImage(be){return this.storage.refFromURL(be).delete().pipe((0,B.K)(De=>(this.errorLoggingService.logError(De,"deleteImage"),(0,Ae._)(()=>new Error(De)))))}static#e=this.\u0275fac=function(ye){return new(ye||z)(de.LFG(ae.Q1),de.LFG(ve.I))};static#t=this.\u0275prov=de.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})()},8924:(an,lt,k)=>{"use strict";k.d(lt,{b:()=>$});var f=k(7398),s=k(6306),B=k(8504),Se=k(2459),_e=k(4664),Ae=k(5879),de=k(7104),ae=k(5842),ve=k(8779);let $=(()=>{class z{constructor(be,ye,De){this.firestore=be,this.errorLoggingService=ye,this.imageService=De,this.offerCollection=this.firestore.collection("Offers")}generateOfferId(){return this.firestore.createId()}getAllOffers(){return this.firestore.collection("Offers",be=>be.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)(be=>be.map(ye=>{const De=ye.payload.doc.data();return{id:ye.payload.doc.id,...De}}))).pipe((0,s.K)(be=>(this.errorLoggingService.logError(be,"getAllOffers"),(0,B._)(()=>new Error(be)))))}getOffers(){return this.firestore.collection("Offers",be=>be.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)(be=>be.map(ye=>{const De=ye.payload.doc.data();return{id:ye.payload.doc.id,...De}}))).pipe((0,f.U)(be=>be.filter(ye=>1==ye.Approved))).pipe((0,f.U)(be=>be.filter(ye=>1==ye.Approved))).pipe((0,s.K)(be=>(this.errorLoggingService.logError(be,"getApprovedOffers"),(0,B._)(()=>new Error(be)))))}getOfferById(be){return this.firestore.collection("Offers").doc(be).valueChanges().pipe((0,f.U)(ye=>{if(!ye)throw new Error(`Offer with ID ${be} not found`);return{id:be,...ye}}),(0,s.K)(ye=>(this.errorLoggingService.logError(ye,"getOfferById: "+be),(0,B._)(()=>new Error(ye)))))}getAllOfferTypes(){return this.firestore.collection("OfferTypes").valueChanges().pipe((0,f.U)(be=>{const ye=be.map(De=>De.OfferType);return Array.from(new Set(ye))})).pipe((0,s.K)(be=>(this.errorLoggingService.logError(be,"getOfferTypes"),(0,B._)(()=>new Error(be)))))}addOffer(be){console.log(be);const ye=this.firestore.createId();return be.id=ye,be.Date_Created=(new Date).toISOString(),be.Date_Updated=(new Date).toISOString(),this.offerCollection.doc(ye).set(Object.assign({},be)).catch(De=>{throw this.errorLoggingService.logError(De,"addOffer"),De}),this.firestore.doc(`Offers/${ye}`).valueChanges().pipe((0,f.U)(De=>De?{id:ye,...De}:void 0))}addOfferWithId(be,ye){return be.id=ye,be.Date_Created=(new Date).toISOString(),be.Date_Updated=(new Date).toISOString(),(0,Se.D)(this.offerCollection.doc(ye).set(Object.assign({},be))).pipe((0,_e.w)(()=>this.firestore.doc(`Offers/${ye}`).valueChanges().pipe((0,f.U)(De=>{if(!De)throw new Error(`Offer with ID ${ye} not found`);return{...De,id:ye}}),(0,s.K)(De=>(this.errorLoggingService.logError(De,"addOffer"),(0,B._)(()=>new Error(De)))))))}updateOffer(be,ye){return console.log("Update Offer: "+be),ye.Date_Updated=(new Date).toISOString(),this.offerCollection.doc(be).update(ye).catch(De=>{throw this.errorLoggingService.logError(De,"updateOffer"),De}),this.firestore.doc(`Offers/${be}`).valueChanges().pipe((0,f.U)(De=>De?{id:be,...De}:void 0))}deleteOffer(be){return this.offerCollection.doc(be).delete().catch(ye=>{throw this.errorLoggingService.logError(ye,"deleteOffer"),ye})}static#e=this.\u0275fac=function(ye){return new(ye||z)(Ae.LFG(de.ST),Ae.LFG(ae.I),Ae.LFG(ve.K))};static#t=this.\u0275prov=Ae.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})()},614:(an,lt,k)=>{"use strict";k.d(lt,{r:()=>de});var f=k(7398),s=k(6306),B=k(8504),Se=k(5879),_e=k(7104),Ae=k(5842);let de=(()=>{class ae{constructor($,z){this.firestore=$,this.errorLoggingService=z,this.servicesCollection=this.firestore.collection("Services")}getServices(){return this.firestore.collection("Services",$=>$.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)($=>$.map(z=>{const oe=z.payload.doc.data();return{id:z.payload.doc.id,...oe}}))).pipe((0,f.U)($=>$.filter(z=>1==z.Approved))).pipe((0,s.K)($=>(this.errorLoggingService.logError($,"getApprovedServices"),(0,B._)(()=>new Error($)))))}getAllServices(){return this.firestore.collection("Services",$=>$.orderBy("Community_Sponsor","desc")).snapshotChanges().pipe((0,f.U)($=>$.map(z=>{const oe=z.payload.doc.data();return{id:z.payload.doc.id,...oe}}))).pipe((0,s.K)($=>(this.errorLoggingService.logError($,"getAllServices"),(0,B._)(()=>new Error($)))))}getServiceById($){return this.servicesCollection.doc($).valueChanges().pipe((0,s.K)(z=>(this.errorLoggingService.logError(z,"getGetServiceById: "+$),(0,B._)(()=>new Error(z)))))}getServicesByType($){return this.firestore.collection("Services",z=>z.where("Service_Type","==",$).orderBy("Community_Sponsor","desc")).valueChanges().pipe((0,s.K)(z=>(this.errorLoggingService.logError(z,"getServiceByServiceType: "+$),(0,B._)(()=>new Error(z)))))}getAllServiceTypes(){return this.firestore.collection("ListOfServices").valueChanges().pipe((0,f.U)($=>{const z=$.map(oe=>oe.Name);return Array.from(new Set(z))})).pipe((0,s.K)($=>(this.errorLoggingService.logError($,"getServiceTypes"),(0,B._)(()=>new Error($)))))}addService($){const z=this.firestore.createId();return $.id=z,$.Date_Created=(new Date).toISOString(),$.Date_Updated=(new Date).toISOString(),this.servicesCollection.doc(z).set(Object.assign({},$)).catch(oe=>{throw this.errorLoggingService.logError(oe,"addService"),oe}),this.firestore.doc(`Services/${z}`).valueChanges().pipe((0,f.U)(oe=>oe?{id:z,...oe}:void 0))}updateService($,z){return z.Date_Updated=(new Date).toISOString(),this.servicesCollection.doc($).update(Object.assign({},z)).catch(oe=>{throw this.errorLoggingService.logError(oe,"updateService"),oe}),this.firestore.doc(`Services/${$}`).valueChanges().pipe((0,f.U)(oe=>oe?{id:$,...oe}:void 0))}deleteService($){return this.servicesCollection.doc($).delete().catch(z=>{throw this.errorLoggingService.logError(z,"deleteService"),z})}static#e=this.\u0275fac=function(z){return new(z||ae)(Se.LFG(_e.ST),Se.LFG(Ae.I))};static#t=this.\u0275prov=Se.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"})}return ae})()},2380:(an,lt,k)=>{"use strict";k.d(lt,{d:()=>_e});var f=k(5879),s=k(769),B=k(6814);function Se(Ae,de){if(1&Ae&&(f.TgZ(0,"tr")(1,"td"),f._uU(2),f.ALo(3,"date"),f.qZA(),f.TgZ(4,"td"),f._uU(5),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.ALo(10,"json"),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.TgZ(15,"td"),f._uU(16),f.qZA()()),2&Ae){const ae=de.$implicit;f.xp6(2),f.Oqu(f.xi3(3,7,null==ae.timestamp?null:ae.timestamp.toDate(),"short")),f.xp6(3),f.Oqu(ae.eventType),f.xp6(2),f.Oqu(ae.pagePath),f.xp6(2),f.Oqu(f.lcZ(10,10,ae.queryParams)),f.xp6(3),f.Oqu(ae.browser),f.xp6(2),f.Oqu(ae.isMobile?"Mobile":"Desktop"),f.xp6(2),f.Oqu(ae.ipAddress)}}let _e=(()=>{class Ae{constructor(ae){this.analyticsService=ae}ngOnInit(){this.analyticsService.getAnalytics().subscribe(ae=>{this.analyticsLogs=ae},ae=>{console.error("Error fetching analytics:",ae)})}static#e=this.\u0275fac=function(ve){return new(ve||Ae)(f.Y36(s.y))};static#t=this.\u0275cmp=f.Xpm({type:Ae,selectors:[["app-analytics"]],decls:22,vars:1,consts:[[1,"analytics-container"],[4,"ngFor","ngForOf"]],template:function(ve,$){1&ve&&(f.TgZ(0,"div",0)(1,"h2"),f._uU(2,"Analytics Logs"),f.qZA(),f.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),f._uU(7,"Timestamp"),f.qZA(),f.TgZ(8,"th"),f._uU(9,"Event Type"),f.qZA(),f.TgZ(10,"th"),f._uU(11,"Page Path"),f.qZA(),f.TgZ(12,"th"),f._uU(13,"Query Params"),f.qZA(),f.TgZ(14,"th"),f._uU(15,"Browser"),f.qZA(),f.TgZ(16,"th"),f._uU(17,"Device"),f.qZA(),f.TgZ(18,"th"),f._uU(19,"IP Address"),f.qZA()()(),f.TgZ(20,"tbody"),f.YNc(21,Se,17,12,"tr",1),f.qZA()()()),2&ve&&(f.xp6(21),f.Q6J("ngForOf",$.analyticsLogs))},dependencies:[B.sg,B.Ts,B.uU],styles:[".analytics-container[_ngcontent-%COMP%]{padding:20px;margin:auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return Ae})()},3445:(an,lt,k)=>{"use strict";var f=k(6593),s=k(5879),B=k(6814);let Se;try{Se=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Se=!1}let $,_e=(()=>{class E{constructor(l){this._platformId=l,this.isBrowser=this._platformId?(0,B.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Se)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(s.Lbi))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function oe(E){return function z(){if(null==$&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$=!0}))}finally{$=$||!1}return $}()?E:!!E.capture}function Bi(E){return Array.isArray(E)?E:[E]}var Co=k(8645),ms=k(2572),Bs=k(5211),Hr=k(5592),_n=k(8180),er=k(2181),Ni=k(3620),is=k(7398),ci=k(7921),Ds=k(9773);const ss=new Set;let _s,tr=(()=>{class E{constructor(l,_){this._platform=l,this._nonce=_,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):li}matchMedia(l){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ss(E,h){if(!ss.has(E))try{_s||(_s=document.createElement("style"),h&&(_s.nonce=h),_s.setAttribute("type","text/css"),document.head.appendChild(_s)),_s.sheet&&(_s.sheet.insertRule(`@media ${E} {body{ }}`,0),ss.add(E))}catch(l){console.error(l)}}(l,this._nonce),this._matchMedia(l)}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(_e),s.LFG(s.Ojb,8))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function li(E){return{matches:"all"===E||""===E,media:E,addListener:()=>{},removeListener:()=>{}}}let re=(()=>{class E{constructor(l,_){this._mediaMatcher=l,this._zone=_,this._queries=new Map,this._destroySubject=new Co.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(l){return Y(Bi(l)).some(C=>this._registerQuery(C).mql.matches)}observe(l){const C=Y(Bi(l)).map(ge=>this._registerQuery(ge).observable);let G=(0,ms.a)(C);return G=(0,Bs.z)(G.pipe((0,_n.q)(1)),G.pipe(function xr(E){return(0,er.h)((h,l)=>E<=l)}(1),(0,Ni.b)(0))),G.pipe((0,is.U)(ge=>{const ke={matches:!1,breakpoints:{}};return ge.forEach(({matches:gt,query:Tt})=>{ke.matches=ke.matches||gt,ke.breakpoints[Tt]=gt}),ke}))}_registerQuery(l){if(this._queries.has(l))return this._queries.get(l);const _=this._mediaMatcher.matchMedia(l),G={observable:new Hr.y(ge=>{const ke=gt=>this._zone.run(()=>ge.next(gt));return _.addListener(ke),()=>{_.removeListener(ke)}}).pipe((0,ci.O)(_),(0,is.U)(({matches:ge})=>({query:l,matches:ge})),(0,Ds.R)(this._destroySubject)),mql:_};return this._queries.set(l,G),G}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(tr),s.LFG(s.R0b))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Y(E){return E.map(h=>h.split(",")).reduce((h,l)=>h.concat(l)).map(h=>h.trim())}const ji="cdk-high-contrast-black-on-white",Tc="cdk-high-contrast-white-on-black",Rs="cdk-high-contrast-active";let go=(()=>{class E{constructor(l,_){this._platform=l,this._document=_,this._breakpointSubscription=(0,s.f3M)(re).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const l=this._document.createElement("div");l.style.backgroundColor="rgb(1,2,3)",l.style.position="absolute",this._document.body.appendChild(l);const _=this._document.defaultView||window,C=_&&_.getComputedStyle?_.getComputedStyle(l):null,G=(C&&C.backgroundColor||"").replace(/ /g,"");switch(l.remove(),G){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const l=this._document.body.classList;l.remove(Rs,ji,Tc),this._hasCheckedHighContrastMode=!0;const _=this.getHighContrastMode();1===_?l.add(Rs,ji):2===_&&l.add(Rs,Tc)}}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(_e),s.LFG(B.K0))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),ua=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({})}return E})();const ha=new s.OlP("mat-sanity-checks",{providedIn:"root",factory:function $l(){return!0}});let So=(()=>{class E{constructor(l,_,C){this._sanityChecks=_,this._document=C,this._hasDoneGlobalChecks=!1,l._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(l){return!function tt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[l])}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(go),s.LFG(ha,8),s.LFG(B.K0))};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[ua,ua]})}return E})(),js=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[So,So]})}return E})();const Mc=oe({passive:!0,capture:!0});class Zo{constructor(){this._events=new Map,this._delegateEventHandler=h=>{const l=function Oe(E){return E.composedPath?E.composedPath()[0]:E.target}(h);l&&this._events.get(h.type)?.forEach((_,C)=>{(C===l||C.contains(l))&&_.forEach(G=>G.handleEvent(h))})}}addHandler(h,l,_,C){const G=this._events.get(l);if(G){const ge=G.get(_);ge?ge.add(C):G.set(_,new Set([C]))}else this._events.set(l,new Map([[_,new Set([C])]])),h.runOutsideAngular(()=>{document.addEventListener(l,this._delegateEventHandler,Mc)})}removeHandler(h,l,_){const C=this._events.get(h);if(!C)return;const G=C.get(l);G&&(G.delete(_),0===G.size&&C.delete(l),0===C.size&&(this._events.delete(h),document.removeEventListener(h,this._delegateEventHandler,Mc)))}}class Xa{static#e=this._eventManager=new Zo;constructor(h,l,_,C){this._target=h,this._ngZone=l,this._platform=C,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,C.isBrowser&&(this._containerElement=ns(_))}fadeInRipple(h,l,_={}){const C=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),G={...Os,..._.animation},ge=_.radius||function xc(E,h,l){const _=Math.max(Math.abs(E-l.left),Math.abs(E-l.right)),C=Math.max(Math.abs(h-l.top),Math.abs(h-l.bottom));return Math.sqrt(_*_+C*C)}(h,l,C),ke=h-C.left,gt=l-C.top,Tt=G.enterDuration,on=document.createElement("div");on.classList.add("mat-ripple-element"),on.style.left=ke-ge+"px",on.style.top=gt-ge+"px",on.style.height=2*ge+"px",on.style.width=2*ge+"px",null!=_.color&&(on.style.backgroundColor=_.color),on.style.transitionDuration=`${Tt}ms`,this._containerElement.appendChild(on);const Cn=window.getComputedStyle(on),yr=Cn.transitionDuration,rr="none"===Cn.transitionProperty||"0s"===yr||"0s, 0s"===yr||0===C.width&&0===C.height,ir=new vi(this,on,_,rr);on.style.transform="scale3d(1, 1, 1)",ir.state=0,_.persistent||(this._mostRecentTransientRipple=ir);return!rr&&(Tt||G.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const as=()=>this._finishRippleTransition(ir),cs=()=>this._destroyRipple(ir);on.addEventListener("transitionend",as),on.addEventListener("transitioncancel",cs)}),this._activeRipples.set(ir,null),(rr||!Tt)&&this._finishRippleTransition(ir),ir}fadeOutRipple(h){if(2===h.state||3===h.state)return;const l=h.element,_={...Os,...h.config.animation};l.style.transitionDuration=`${_.exitDuration}ms`,l.style.opacity="0",h.state=2,(h._animationForciblyDisabledThroughCss||!_.exitDuration)&&this._finishRippleTransition(h)}fadeOutAll(){this._getActiveRipples().forEach(h=>h.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(h=>{h.config.persistent||h.fadeOut()})}setupTriggerEvents(h){const l=ns(h);!this._platform.isBrowser||!l||l===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=l,Go.forEach(_=>{Xa._eventManager.addHandler(this._ngZone,_,l,this)}))}handleEvent(h){"mousedown"===h.type?this._onMousedown(h):"touchstart"===h.type?this._onTouchStart(h):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Ns.forEach(l=>{this._triggerElement.addEventListener(l,this,Pc)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(h){0===h.state?this._startFadeOutTransition(h):2===h.state&&this._destroyRipple(h)}_startFadeOutTransition(h){const l=h===this._mostRecentTransientRipple,{persistent:_}=h.config;h.state=1,!_&&(!l||!this._isPointerDown)&&h.fadeOut()}_destroyRipple(h){const l=this._activeRipples.get(h)??null;this._activeRipples.delete(h),this._activeRipples.size||(this._containerRect=null),h===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),h.state=3,null!==l&&(h.element.removeEventListener("transitionend",l.onTransitionEnd),h.element.removeEventListener("transitioncancel",l.onTransitionCancel)),h.element.remove()}_onMousedown(h){const l=function hs(E){return 0===E.buttons||0===E.detail}(h),_=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!l&&!_&&(this._isPointerDown=!0,this.fadeInRipple(h.clientX,h.clientY,this._target.rippleConfig))}_onTouchStart(h){if(!this._target.rippleDisabled&&!function _i(E){const h=E.touches&&E.touches[0]||E.changedTouches&&E.changedTouches[0];return!(!h||-1!==h.identifier||null!=h.radiusX&&1!==h.radiusX||null!=h.radiusY&&1!==h.radiusY)}(h)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const l=h.changedTouches;if(l)for(let _=0;_<l.length;_++)this.fadeInRipple(l[_].clientX,l[_].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(h=>{!h.config.persistent&&(1===h.state||h.config.terminateOnPointerUp&&0===h.state)&&h.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const h=this._triggerElement;h&&(Go.forEach(l=>Xa._eventManager.removeHandler(l,h,this)),this._pointerUpEventsRegistered&&Ns.forEach(l=>h.removeEventListener(l,this,Pc)))}}let Mt=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[So,B.ez,So]})}return E})();k(2096),k(8504),k(9315),k(9397),k(6306),k(4716),k(3020);var pa=k(9862);let Gl=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[So,So]})}return E})(),Ua=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[js,So,js,So]})}return E})();var Zr=k(3914),_l=k(3375),ko=k(8924);function zu(E,h){if(1&E&&(s.TgZ(0,"div",13),s._UZ(1,"img",14),s.qZA()),2&E){const l=h.$implicit,_=h.index,C=s.oxw();s.ekj("active",_===C.currentImageIndex),s.xp6(1),s.MGl("alt","Offer Image ",_+1,""),s.Q6J("src",l,s.LSH)}}function Ba(E,h){1&E&&(s.TgZ(0,"span",15),s._uU(1,"\u2605"),s.qZA())}function $d(E,h){1&E&&(s.TgZ(0,"p"),s._uU(1,"Oferta a expirat"),s.qZA())}function Zd(E,h){1&E&&(s.TgZ(0,"p"),s._uU(1,"Oferta este valabil\u0101"),s.qZA())}function Wl(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",17),s.qZA(),s._UZ(3,"br"),s._uU(4," Facebook"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.s9C("href",l.offer.Facebook,s.LSH)}}function Fc(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",18),s.qZA(),s._UZ(3,"br"),s._uU(4," Instagram"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.MGl("href","https://www.instagram.com/",l.offer.Instagram,"",s.LSH)}}function $u(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",19),s._UZ(2,"img",20),s.qZA(),s._UZ(3,"br"),s._uU(4," Email"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.MGl("href","mailto:",l.offer.Email,"",s.LSH)}}function nf(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",21),s.qZA(),s._UZ(3,"br"),s._uU(4," Website"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.s9C("href",l.offer.Website,s.LSH)}}let vl=(()=>{class E{constructor(l){this.router=l,this.currentImageIndex=0,this.images=[],this.defaultImage="https://storage.cloud.google.com/romaniinseattle.appspot.com/offers/defaultImage.jpg"}ngOnInit(){console.log(this.offer),this.images=this.offer?.Images?.length?this.offer.Images:[this.defaultImage],this.startImageCarousel()}startImageCarousel(){setInterval(()=>{this.currentImageIndex=(this.currentImageIndex+1)%this.images.length},15e3)}nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.images.length}prevImage(){this.currentImageIndex=(this.currentImageIndex-1+this.images.length)%this.images.length}navigateToDetails(){console.log("Navigating to details:",this.offer.id),this.router.navigate(["/offers",this.offer.id])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-offer-card"]],inputs:{offer:"offer"},decls:44,vars:14,consts:[[1,"offer-card"],[1,"offer-carousel-container"],[1,"carousel"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],[1,"carousel-control","prev",3,"click"],[1,"carousel-control","next",3,"click"],[1,"offer-details"],["class","sponsor-icon",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"offer-footer"],[1,"social-icons"],[1,"carousel-item"],[1,"carousel-image",3,"src","alt"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s.YNc(4,zu,2,4,"div",4),s.qZA(),s.TgZ(5,"a",5),s.NdJ("click",function(){return C.prevImage()}),s._uU(6,"\u276e"),s.qZA(),s.TgZ(7,"a",6),s.NdJ("click",function(){return C.nextImage()}),s._uU(8,"\u276f"),s.qZA()()(),s.TgZ(9,"div",7)(10,"h3"),s._uU(11),s.qZA(),s.YNc(12,Ba,2,0,"span",8),s.TgZ(13,"p")(14,"strong"),s._uU(15,"Compania:"),s.qZA(),s._uU(16),s.qZA(),s._UZ(17,"hr"),s.TgZ(18,"p")(19,"strong"),s._uU(20,"Locatie:"),s.qZA(),s._uU(21),s.qZA(),s.TgZ(22,"p")(23,"strong"),s._uU(24,"Descriiere:"),s.qZA(),s._uU(25),s.qZA(),s.TgZ(26,"p")(27,"strong"),s._uU(28,"Pret:"),s.qZA(),s._uU(29),s.qZA(),s.TgZ(30,"p")(31,"strong"),s._uU(32,"Tip de ofert\u0101:"),s.qZA(),s._uU(33),s.qZA(),s.YNc(34,$d,2,0,"p",9),s.YNc(35,Zd,2,0,"p",9),s.TgZ(36,"button",10),s.NdJ("click",function(){return C.navigateToDetails()}),s._uU(37,"Detalii"),s.qZA()(),s.TgZ(38,"div",11)(39,"div",12),s.YNc(40,Wl,5,1,"div",9),s.YNc(41,Fc,5,1,"div",9),s.YNc(42,$u,5,1,"div",9),s.YNc(43,nf,5,1,"div",9),s.qZA()()()),2&_&&(s.xp6(4),s.Q6J("ngForOf",C.images),s.xp6(7),s.Oqu(C.offer.Title),s.xp6(1),s.Q6J("ngIf",C.offer.Community_Sponsor),s.xp6(4),s.hij(" ",C.offer.Company_Name,""),s.xp6(5),s.hij(" ",C.offer.Location,""),s.xp6(4),s.Oqu(C.offer.Description),s.xp6(4),s.Oqu(C.offer.Price),s.xp6(4),s.Oqu(C.offer.OfferType),s.xp6(1),s.Q6J("ngIf",C.offer.Filled),s.xp6(1),s.Q6J("ngIf",!C.offer.Filled),s.xp6(5),s.Q6J("ngIf",C.offer.Facebook),s.xp6(1),s.Q6J("ngIf",C.offer.Instagram),s.xp6(1),s.Q6J("ngIf",C.offer.Email),s.xp6(1),s.Q6J("ngIf",C.offer.Website))},dependencies:[B.sg,B.O5],styles:[".offer-card[_ngcontent-%COMP%]{background-color:#fafafa;width:400px;min-height:550px;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;height:800px;position:relative}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.offer-carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;margin:0 auto}.carousel[_ngcontent-%COMP%]{width:100%;position:relative}.carousel-inner[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;min-height:300px}.carousel-item[_ngcontent-%COMP%]{display:none;text-align:center}.carousel-item.active[_ngcontent-%COMP%]{display:block}.carousel-image[_ngcontent-%COMP%]{width:400px;height:300px;object-fit:cover}.carousel-control[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:24px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);cursor:pointer;-webkit-user-select:none;user-select:none}.carousel-control.prev[_ngcontent-%COMP%]{left:10px}.carousel-control.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px;text-align:left}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}"]})}return E})();function rc(E,h){if(1&E&&(s.TgZ(0,"div",9),s._UZ(1,"img",10),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.s9C("alt",l.event.Event_Name),s.Q6J("src",l.event.Poster_Image,s.LSH)}}function lp(E,h){if(1&E&&(s.TgZ(0,"p")(1,"strong"),s._uU(2,"Facebook:"),s.qZA(),s.TgZ(3,"a",4),s._uU(4),s.qZA()()),2&E){const l=s.oxw();s.xp6(3),s.Q6J("href",l.event.Facebook,s.LSH),s.xp6(1),s.Oqu(l.event.Facebook)}}function Vs(E,h){if(1&E&&(s.TgZ(0,"p")(1,"strong"),s._uU(2,"Instagram:"),s.qZA(),s.TgZ(3,"a",4),s._uU(4),s.qZA()()),2&E){const l=s.oxw();s.xp6(3),s.Q6J("href",l.event.Instagram,s.LSH),s.xp6(1),s.Oqu(l.event.Instagram)}}function Gd(E,h){1&E&&(s.TgZ(0,"div",11)(1,"span",12),s._uU(2,"Evenimentul a Expirat"),s.qZA()())}let yl=(()=>{class E{constructor(l){this.router=l,this.defaultImage="https://storage.cloud.google.com/romaniinseattle.appspot.com/events/defaultImage.jpg"}ngOnInit(){this.event.Poster_Image||(this.event.Poster_Image=this.defaultImage)}navigateToDetails(){console.log("Navigating to details:",this.event.id),this.router.navigate(["/events",this.event.id])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-event-card"]],inputs:{event:"event"},decls:42,vars:17,consts:[[1,"event-card"],["class","event-image",4,"ngIf"],[1,"event-details"],[1,"card-title"],["target","_blank",3,"href"],[4,"ngIf"],[1,"card-subtitle"],["class","card-expired",4,"ngIf"],[3,"click"],[1,"event-image"],[3,"src","alt"],[1,"card-expired"],[1,"expired"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0),s.YNc(1,rc,2,2,"div",1),s.TgZ(2,"div",2)(3,"div",3),s._uU(4),s.qZA(),s.TgZ(5,"p")(6,"strong"),s._uU(7,"Locatie:"),s.qZA(),s._UZ(8,"br"),s._uU(9),s.qZA(),s.TgZ(10,"p")(11,"strong"),s._uU(12,"Data Evenimentului:"),s.qZA(),s._uU(13),s.ALo(14,"date"),s.qZA(),s.TgZ(15,"p")(16,"strong"),s._uU(17,"Ora:"),s.qZA(),s._uU(18),s.qZA(),s.TgZ(19,"p")(20,"strong"),s._uU(21,"Pret:"),s.qZA(),s._uU(22),s.qZA(),s.TgZ(23,"p")(24,"strong"),s._uU(25,"Persoana de contact:"),s.qZA(),s._uU(26),s.qZA(),s.TgZ(27,"p")(28,"strong"),s._uU(29,"Pagina Web:"),s.qZA(),s.TgZ(30,"a",4),s._uU(31),s.qZA()(),s.YNc(32,lp,5,2,"p",5),s.YNc(33,Vs,5,2,"p",5),s.TgZ(34,"div")(35,"strong"),s._uU(36," Detalii"),s.qZA(),s.TgZ(37,"div",6),s._uU(38),s.qZA(),s.YNc(39,Gd,3,0,"div",7),s.qZA()(),s.TgZ(40,"button",8),s.NdJ("click",function(){return C.navigateToDetails()}),s._uU(41,"View Details"),s.qZA()()),2&_&&(s.xp6(1),s.Q6J("ngIf",C.event.Poster_Image),s.xp6(3),s.Oqu(C.event.Event_Name),s.xp6(5),s.Oqu(C.event.Location),s.xp6(4),s.hij(" ",s.xi3(14,14,C.event.Event_Date,"short"),""),s.xp6(5),s.hij(" ",C.event.Event_Time,""),s.xp6(4),s.hij(" ",C.event.Price,""),s.xp6(4),s.AsE(" ",C.event.Contact_Person_Name," - ",C.event.Phone_Number,""),s.xp6(4),s.Q6J("href",C.event.Website,s.LSH),s.xp6(1),s.Oqu(C.event.Website),s.xp6(1),s.Q6J("ngIf",C.event.Facebook),s.xp6(1),s.Q6J("ngIf",C.event.Instagram),s.xp6(5),s.Oqu(C.event.Description),s.xp6(1),s.Q6J("ngIf",C.event.Expired))},dependencies:[B.O5,B.uU],styles:[".event-card[_ngcontent-%COMP%]{background-color:#fafafa;width:400px;min-height:550px;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;height:1000px;position:relative}.event-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.event-details[_ngcontent-%COMP%]{padding:16px;text-align:left}.event-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.event-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.event-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.event-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.card-expired[_ngcontent-%COMP%]{padding:10px;text-align:center}.expired[_ngcontent-%COMP%]{color:red}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return E})();function ma(E,h){1&E&&s._UZ(0,"app-offer-card",28),2&E&&s.Q6J("offer",h.$implicit)}function Lc(E,h){1&E&&s._UZ(0,"app-event-card",29),2&E&&s.Q6J("event",h.$implicit)}function qd(E,h){if(1&E&&(s.TgZ(0,"li",30)(1,"a",31),s._uU(2),s.qZA()()),2&E){const l=h.$implicit;s.xp6(1),s.s9C("href",l.url,s.LSH),s.xp6(1),s.Oqu(l.name)}}let Kl=(()=>{class E{constructor(l,_,C){this.eventService=l,this.offersService=_,this.router=C,this.resourceLinks=[{name:"Ambasada Romaniei in SUA",url:"https://washington.mae.ro/"},{name:"Ambasada SUA in Romania",url:"https://ro.usembassy.gov/"},{name:"American Romanian Cultural Society",url:"www.arcsproject.org"},{name:"Biserica Sfintii Trei Ierarhi",url:"http://www.ortodox.org/"},{name:"Romanian United Foundation",url:"https://www.romanianunitedfund.org/"}],this.events=[],this.offers=[]}ngOnInit(){this.eventService.getEvents().subscribe(l=>{this.events=l}),this.offersService.getOffers().subscribe(l=>{this.offers=l})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(_l.n),s.Y36(ko.b),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-home"]],decls:100,vars:3,consts:[[1,"container"],[1,"hero"],[1,"container","hero-content"],[1,"hero-text"],["href","https://www.facebook.com/groups/RomaniinSeattle"],["href","https://www.facebook.com/groups/RomaniinSeattle",1,"btn"],[1,"hero-image"],["src","../../../assets/images/Seattle-Romania.png","alt","Seattle"],[1,"community-description"],[1,"community-descriptions"],[1,"description-card"],["href","/services/"],["href","/offers"],["href","/events"],[1,"sharedContent-Section"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[1,"services-container"],[3,"event",4,"ngFor","ngForOf"],[1,"resource-consulate"],["target","_blank","href","http://newyork.mae.ro/"],["target","_blank","href","http://chicago.mae.ro/"],["target","_blank","href","http://losangeles.mae.ro/"],["target","_blank","href","http://miami.mae.ro/"],[1,"resources-section"],[1,"section-header"],[1,"resource-list"],["class","resource-item",4,"ngFor","ngForOf"],[3,"offer"],[3,"event"],[1,"resource-item"],["target","_blank",3,"href"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h1"),s._uU(5,"Bine ati venit in comunitatea "),s.TgZ(6,"a",4),s._uU(7,"Romani in Seattle"),s.qZA()(),s.TgZ(8,"p"),s._uU(9,"Servictii, oferte si evenimente pentru persoanele care locuiesc in zona Seattle."),s.qZA(),s.TgZ(10,"a",5),s._uU(11,"Join our Facebook Group"),s.qZA()(),s.TgZ(12,"div",6),s._UZ(13,"img",7),s.qZA()()(),s.TgZ(14,"section",8)(15,"div",0)(16,"h2"),s._uU(17,"Despre communitatea noastra"),s.qZA(),s.TgZ(18,"p"),s._uU(19,'Scopul al acestui website este de a beneficia Romani \xeen Seattle, prin schimbul de informa\u021bii utile si in acela\u0219i timp promov\xe2nd Companiile Romane\u0219ti din zona Seattle la \xa0Comunitatea Romaneasca de aici. Acesta a \xeenceput pe facebook prin grupul "Romani \xeen Seattle\u201d care acum con\u021bine peste 3700 de membri.'),s.qZA()()(),s.TgZ(20,"div",9)(21,"div",10)(22,"a",11)(23,"h2"),s._uU(24,"Servicii"),s.qZA()(),s.TgZ(25,"p"),s._uU(26,"Sprijini\u021bi-ne afacerile locale \u0219i descoperi\u021bi produse \u0219i servicii unice oferite de membrii comunit\u0103\u021bii."),s.qZA()(),s.TgZ(27,"div",10)(28,"a",12)(29,"h2"),s._uU(30,"Oportunit\u0103\u021bi si Oferte"),s.qZA()(),s.TgZ(31,"p"),s._uU(32,"Implica\u021bi-v\u0103 \u0219i face\u021bi o diferen\u021b\u0103 prin voluntariat pentru diverse proiecte \u0219i ini\u021biative comunitare."),s.qZA()(),s.TgZ(33,"div",10)(34,"a",13)(35,"h2"),s._uU(36,"Evenimente"),s.qZA()(),s.TgZ(37,"p"),s._uU(38,"Al\u0103tura\u021bi-v\u0103 nou\u0103 pentru o varietate de evenimente care reunesc comunitatea. De la festivaluri la ateliere, exist\u0103 ceva pentru toat\u0103 lumea."),s.qZA()(),s.TgZ(39,"div",10)(40,"h2"),s._uU(41,"Resurse"),s.qZA(),s.TgZ(42,"p"),s._uU(43,"Accesa\u021bi resurse \u0219i servicii valoroase oferite de comunitate at\xe2t pentru reziden\u021bi, c\xe2t \u0219i pentru vizitatori."),s.qZA()()(),s.TgZ(44,"div",14)(45,"h1"),s._uU(46,"Oportunit\u0103\u021bi si Oferte"),s.qZA(),s.TgZ(47,"div",15),s.YNc(48,ma,1,1,"app-offer-card",16),s.qZA(),s.TgZ(49,"div",14)(50,"h1"),s._uU(51,"Evenimente"),s.qZA(),s.TgZ(52,"div",17),s.YNc(53,Lc,1,1,"app-event-card",18),s.qZA()()(),s.TgZ(54,"div",14)(55,"h1"),s._uU(56,"Resurse"),s.qZA(),s.TgZ(57,"section",19)(58,"div",9)(59,"div",10)(60,"h2"),s._uU(61,"Consulatul Rom\xe2niei la New York"),s.qZA(),s.TgZ(62,"h3"),s._uU(63,"CONSUL GENERAL: doamna Mihaela-Simona FLOREA"),s.qZA(),s.TgZ(64,"p"),s._uU(65,"Adres\u0103: 200 East 38th Street, New York, NY 10016"),s.qZA(),s.TgZ(66,"a",20),s._uU(67,"http://newyork.mae.ro/"),s.qZA()(),s.TgZ(68,"div",10)(69,"h2"),s._uU(70,"Consulatul Rom\xe2niei la Chicago"),s.qZA(),s.TgZ(71,"h3"),s._uU(72,"CONSUL GENERAL: "),s.qZA(),s.TgZ(73,"p"),s._uU(74,"Adres\u0103: 737 North Michigan Avenue, Suite 2300, Chicago, IL 60611"),s.qZA(),s.TgZ(75,"a",21),s._uU(76,"http://chicago.mae.ro/"),s.qZA()(),s.TgZ(77,"div",10)(78,"h2"),s._uU(79,"Consulatul Rom\xe2niei la Los Angeles"),s.qZA(),s.TgZ(80,"h3"),s._uU(81,"CONSUL GENERAL: doamna Lucia SAVA"),s.qZA(),s.TgZ(82,"p"),s._uU(83,"Adres\u0103: 11766 Wilshire Blvd. Suite 200, Los Angeles CA 90025"),s.qZA(),s.TgZ(84,"a",22),s._uU(85,"http://losangeles.mae.ro/"),s.qZA()(),s.TgZ(86,"div",10)(87,"h2"),s._uU(88,"Consulatul Rom\xe2niei la Miami"),s.qZA(),s.TgZ(89,"h3"),s._uU(90,"CONSUL GENERAL: doamna Elena-GabrielA EREMIA"),s.qZA(),s.TgZ(91,"p"),s._uU(92,"Adres\u0103: 1101 Brickell Ave, suite N 600, Miami, FL 33131"),s.qZA(),s.TgZ(93,"a",23),s._uU(94,"http://miami.mae.ro/"),s.qZA()()()()(),s.TgZ(95,"section",24)(96,"h2",25),s._uU(97,"Resurse utile pentru comunitate"),s.qZA(),s.TgZ(98,"ul",26),s.YNc(99,qd,3,2,"li",27),s.qZA()()()),2&_&&(s.xp6(48),s.Q6J("ngForOf",C.offers),s.xp6(5),s.Q6J("ngForOf",C.events),s.xp6(46),s.Q6J("ngForOf",C.resourceLinks))},dependencies:[B.sg,vl,yl],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;color:var(--button-color)}.hero[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;background-color:#f5f5f5;padding:6rem 0 0rem}.hero-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.hero-text[_ngcontent-%COMP%]{flex:1;padding:0 2rem}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{background-color:var(--button-color);color:#fff;padding:.75rem 1.5rem;text-decoration:none;border-radius:5px;font-size:1rem}.hero-image[_ngcontent-%COMP%]{flex:1}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.community-description[_ngcontent-%COMP%]{background-color:var(--button-color);color:#fff;padding:2rem 0;text-align:center}.community-description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.community-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 auto;max-width:800px;color:#f5f5f5}@media (max-width: 768px){.hero[_ngcontent-%COMP%]{flex-direction:column}.hero-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.hero-text[_ngcontent-%COMP%]{margin-bottom:2rem}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}}.community-descriptions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:40px 20px}.description-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:300px;text-align:center}.description-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--button-color);margin-bottom:10px}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--button-color)}.description-card-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px;padding:20px;width:100%;text-align:center}.resource-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.resource-item[_ngcontent-%COMP%]{margin:10px 0}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--button-color);font-size:18px;transition:color .3s ease}.resource-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}a[_ngcontent-%COMP%]{color:inherit}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.offers[_ngcontent-%COMP%], .offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offer-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s;max-width:400px;height:800px;position:relative;text-align:left}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-inner[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.image-container[_ngcontent-%COMP%]{width:400px;height:250px;overflow:hidden;display:flex;justify-content:center;align-items:center}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:50%}.prev[_ngcontent-%COMP%]{left:10px}.next[_ngcontent-%COMP%]{right:10px}.offer-details[_ngcontent-%COMP%]{padding:15px}.offer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.offer-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.offer-footer[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.sharedContent-Section[_ngcontent-%COMP%]{padding:50px 0}.button-container[_ngcontent-%COMP%]{text-align:center}.fb-button[_ngcontent-%COMP%]{background-color:var(--button-bg-color);color:var(--button-text-color);padding:10px 20px;border-radius:5px;text-decoration:none;font-size:18px;display:inline-flex;align-items:center;transition:background-color .3s}.fb-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;font-size:20px}.fb-button[_ngcontent-%COMP%]:hover{background-color:var(--button-hover-bg-color)}"]})}return E})();var _a=k(614),Xt=k(6223);function Vc(E){return E?/^https?:\/\//i.test(E)?E:`http://${E}`:""}function Wd(E,h){1&E&&(s.TgZ(0,"span",15),s._uU(1,"\u2605"),s.qZA())}function Uc(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",17),s.qZA(),s._UZ(3,"br"),s._uU(4," Facebook"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.s9C("href",l.svc.Facebook,s.LSH)}}function Xi(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",18),s.qZA(),s._UZ(3,"br"),s._uU(4," Instagram"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.MGl("href","https://www.instagram.com/",l.svc.Instagram,"",s.LSH)}}function Ng(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",19),s._UZ(2,"img",20),s.qZA(),s._UZ(3,"br"),s._uU(4," Email"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.MGl("href","mailto:",l.svc.Email,"",s.LSH)}}function up(E,h){if(1&E&&(s.TgZ(0,"div")(1,"a",16),s._UZ(2,"img",21),s.qZA(),s._UZ(3,"br"),s._uU(4," Website"),s.qZA()),2&E){const l=s.oxw();s.xp6(1),s.s9C("href",l.svc.Website,s.LSH)}}let rf=(()=>{class E{constructor(l){this.router=l}ngOnInit(){(void 0===this.svc.Image||""==this.svc.Image)&&(this.svc.Image="https://firebasestorage.googleapis.com/v0/b/romaniinseattle.appspot.com/o/serviceImages%2FdafaultImage.jpg?alt=media&token=3b0787df-12f0-444a-a426-013843534f1e"),this.svc.Website=Vc(this.svc.Website)}viewDetails(){this.router.navigate(["/services",this.svc.id])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-service-card"]],inputs:{svc:"svc"},decls:23,vars:11,consts:[[1,"service-card"],[1,"service-card-image-container"],[1,"service-card-image",3,"src","alt"],[1,"service-card-content"],[1,"card-header"],[1,"card-title"],["class","sponsor-icon",4,"ngIf"],[1,"card-subtitle","service_type"],[1,"card-subtitle","contact_info"],[1,"card-description"],[1,"card-button"],[3,"click"],[1,"card-footer"],[1,"social-icons"],[4,"ngIf"],[1,"sponsor-icon"],["target","_blank",3,"href"],["src","../../../assets/images/SVG/facebook-icon.svg"],["src","../../../assets/images/SVG/instagram-icon.svg"],[3,"href"],["src","../../../assets/images/SVG/email-icon.svg"],["src","../../../assets/images/SVG/browser-icon.svg"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1),s._UZ(2,"img",2),s.qZA(),s.TgZ(3,"div",3)(4,"div",4)(5,"div",5),s._uU(6),s.YNc(7,Wd,2,0,"span",6),s.qZA(),s.TgZ(8,"div",7),s._uU(9),s.qZA(),s.TgZ(10,"div",8),s._uU(11),s.qZA(),s.TgZ(12,"div",9),s._uU(13),s.qZA(),s.TgZ(14,"div",10)(15,"button",11),s.NdJ("click",function(){return C.viewDetails()}),s._uU(16,"Detalii"),s.qZA()()(),s.TgZ(17,"div",12)(18,"div",13),s.YNc(19,Uc,5,1,"div",14),s.YNc(20,Xi,5,1,"div",14),s.YNc(21,Ng,5,1,"div",14),s.YNc(22,up,5,1,"div",14),s.qZA()()()()),2&_&&(s.xp6(2),s.s9C("alt",C.svc.Name),s.Q6J("src",C.svc.Image,s.LSH),s.xp6(4),s.Oqu(C.svc.Name),s.xp6(1),s.Q6J("ngIf",C.svc.Community_Sponsor),s.xp6(2),s.Oqu(C.svc.Service_Type),s.xp6(2),s.Oqu(C.svc.Phone_Number),s.xp6(2),s.Oqu(C.svc.Description),s.xp6(6),s.Q6J("ngIf",C.svc.Facebook),s.xp6(1),s.Q6J("ngIf",C.svc.Instagram),s.xp6(1),s.Q6J("ngIf",C.svc.Email),s.xp6(1),s.Q6J("ngIf",C.svc.Website))},dependencies:[B.O5],styles:[".service-card[_ngcontent-%COMP%]{background-color:#fafafa;width:400px;min-height:550px;display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;box-shadow:0 4px 8px #00000080;margin:10px;padding:40px;box-sizing:border-box;position:relative}.service-card-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:5px}.service-card-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #ddd}.card-header[_ngcontent-%COMP%]{text-align:center;margin:25px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold;font-size:1.7rem;font-weight:700;color:#333;line-height:1.2}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:1rem;color:#666;margin-top:4px}.card-description[_ngcontent-%COMP%]{text-align:left;font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;color:#666;margin-top:4px;overflow:hidden;-webkit-box-orient:vertical;display:block;display:-webkit-box;overflow:hidden!important;text-overflow:ellipsis;-webkit-line-clamp:4}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:1rem 0}.contact_info[_ngcontent-%COMP%]{padding:0 0 1rem;font-size:1.2rem}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 480px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 100px);min-width:175px;margin:2px;padding:2px;min-height:150px;min-height:330px}.card-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:100;font-style:bold;font-size:.9rem;font-weight:400;color:#333;line-height:1;padding:0;margin:0}.card-subtitle[_ngcontent-%COMP%]{font-family:Catamaran,sans-serif;font-optical-sizing:auto;font-weight:100;font-style:normal;color:#666;margin-top:1px}.card-description[_ngcontent-%COMP%]{display:none}.service_type[_ngcontent-%COMP%]{text-transform:uppercase;padding:0;font-size:.5rem}.card-footer[_ngcontent-%COMP%]{display:none}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:175px}.service-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:#666;font-size:.6rem}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px) and(min-width:480px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}.service-card-front[_ngcontent-%COMP%]{background-color:#fff;color:#000}.service-card-content[_ngcontent-%COMP%]{padding:0}.service-date[_ngcontent-%COMP%]{font-size:12px;color:#f1c40f}.service-footer[_ngcontent-%COMP%]{margin-top:10px}.featured[_ngcontent-%COMP%]{font-weight:700;color:#f39c12}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:400px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}#browser-icon[_ngcontent-%COMP%]{fill:red;stroke:#000}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px;color:gold}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}"]})}return E})();function kg(E,h){if(1&E&&(s.TgZ(0,"option",14),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function sf(E,h){1&E&&s._UZ(0,"app-service-card",15),2&E&&s.Q6J("svc",h.$implicit)}let dp=(()=>{class E{constructor(l,_,C){this.servicesService=l,this.route=_,this.router=C,this.services=[],this.filteredServices=[],this.serviceTypes=[],this.selectedServiceType=""}ngOnInit(){this.route.queryParams.subscribe(l=>{this.selectedServiceType=l.serviceType||""}),this.filterServices(this.selectedServiceType)}navigateToAddService(){this.router.navigate(["/add-service"])}handleChange(l){const{target:_}=l;return _&&console.log(_.value),_.value}fetchServiceTypes(){console.log("FetchServiceTypes Function"),this.servicesService.getAllServiceTypes().subscribe(l=>{this.serviceTypes=l,l.forEach(_=>{})}),console.log("Number of Service Types returned by the database : "+this.serviceTypes.length)}onFilterChange(l){console.log("Filter changed:",l),this.router.navigate([],{relativeTo:this.route,queryParams:{serviceType:l},queryParamsHandling:"merge"}),this.filterServices(l)}filterServices(l){console.log("Filter Serices: "+l),this.fetchServiceTypes(),l&&""!==l?this.servicesService.getServicesByType(l).subscribe(_=>{this.services=_.filter(C=>C.Approved),this.filteredServices=_.filter(C=>C.Approved),console.log("Number of Services returned by the Database :  "+this.services.length)}):this.servicesService.getServices().subscribe(_=>{this.services=_.filter(C=>C.Approved),this.filteredServices=_.filter(C=>C.Approved),console.log("Number of Services returned by the Database :  "+this.services.length)})}extractServiceTypes(){this.serviceTypes=[...new Set(this.services.map(l=>l.Service_Type))]}shareLink(){const _=this.router.url.split("?")[1]||"";navigator.clipboard.writeText("https://romaniinseattle.web.app/services"+(_?"?"+_:"")).then(()=>{alert("Link copied to clipboard!")},G=>{console.error("Could not copy text: ",G)})}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(_a.r),s.Y36(Zr.gz),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-services"]],decls:24,vars:3,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"services-control"],[1,"service-control-container"],["for","service-type"],["id","service-type",1,"filter-dropdown",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"min-width","150px",3,"click"],[1,"share-button",3,"click"],[1,"fas","fa-share-alt"],[1,"services-container"],[3,"svc",4,"ngFor","ngForOf"],[3,"value"],[3,"svc"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3,"Lista de Servicii"),s.qZA()(),s.TgZ(4,"div",2)(5,"h2"),s._uU(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),s.qZA()()(),s.TgZ(7,"div",3)(8,"div",4)(9,"label",5),s._uU(10,"Filtra\u021bi lista dup\u0103 tipul serviciului: "),s.qZA()(),s.TgZ(11,"div",4)(12,"select",6),s.NdJ("change",function(ge){return C.onFilterChange(C.handleChange(ge))})("ngModelChange",function(ge){return C.selectedServiceType=ge}),s.TgZ(13,"option",7),s._uU(14,"Toate serviciile"),s.qZA(),s.YNc(15,kg,2,2,"option",8),s.qZA()(),s.TgZ(16,"div",4)(17,"button",9),s.NdJ("click",function(){return C.navigateToAddService()}),s._uU(18,"Adaugati un Serviciu"),s.qZA()(),s.TgZ(19,"button",10),s.NdJ("click",function(){return C.shareLink()}),s._UZ(20,"i",11),s._uU(21," Share "),s.qZA()(),s.TgZ(22,"div",12),s.YNc(23,sf,1,1,"app-service-card",13),s.qZA()),2&_&&(s.xp6(12),s.Q6J("ngModel",C.selectedServiceType),s.xp6(3),s.Q6J("ngForOf",C.serviceTypes),s.xp6(8),s.Q6J("ngForOf",C.filteredServices))},dependencies:[B.sg,Xt.YN,Xt.Kr,Xt.EJ,Xt.JJ,Xt.On,rf],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.services-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px;padding:20px;flex-wrap:wrap}.service-control-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:5px;padding:5px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase}.filter-dropdown[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;text-transform:uppercase;cursor:pointer}@media (max-width: 480px){.services-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;padding:1rem}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:3rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1rem;text-align:center}}"]})}return E})(),Kd=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-rules"]],decls:43,vars:0,consts:[[1,"hero-section"],[1,"overlay"],[1,"content"],["href","https://www.facebook.com/groups/RomaniinSeattle",1,"cta-button"],[1,"rules-section"],[1,"container"],[1,"rules-list"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0),s._UZ(1,"div",1),s.TgZ(2,"div",2)(3,"h1"),s._uU(4,"Regulile \u0219i Reglement\u0103rile"),s.qZA(),s.TgZ(5,"p"),s._uU(6,"Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),s.qZA(),s.TgZ(7,"a",3),s._uU(8,"Join our Facebook Group"),s.qZA()()(),s.TgZ(9,"section",4)(10,"div",5)(11,"h2"),s._uU(12,"Regulile \u0219i Reglement\u0103rile"),s.qZA(),s.TgZ(13,"ol",6)(14,"li")(15,"span"),s._uU(16,"Respecta\u021bi to\u021bi membrii."),s.qZA(),s._uU(17," Trateaz\u0103 pe toat\u0103 lumea cu respect. Dezbaterile s\u0103n\u0103toase sunt naturale, dar amabilitatea este obligatorie."),s.qZA(),s.TgZ(18,"li")(19,"span"),s._uU(20,"F\u0103r\u0103 discursuri de ur\u0103 sau h\u0103r\u021buire."),s.qZA(),s._uU(21," Asigur\u0103-te c\u0103 toat\u0103 lumea se simte \xeen siguran\u021b\u0103. Bullying-ul de orice fel nu este permis, iar comentariile degradante despre lucruri precum rasa, religia, cultura, orientarea sexual\u0103, genul sau identitatea nu vor fi tolerate."),s.qZA(),s.TgZ(22,"li"),s._uU(23,"F\u0103r\u0103 limbaj ofensator."),s.qZA(),s.TgZ(24,"li")(25,"span"),s._uU(26,"F\u0103r\u0103 Promov\u0103ri sau Spam:"),s.qZA(),s._uU(27," Ofer\u0103 mai mult dec\xe2t prime\u0219ti \xeen acest grup. Auto-promovarea, spam-ul \u0219i link-urile irelevante nu sunt permise."),s.qZA(),s.TgZ(28,"li"),s._uU(29,"R\u0103m\xe2ne\u021bi la subiect."),s.qZA(),s.TgZ(30,"li")(31,"span"),s._uU(32,"Respect\u0103 Intimitatea Fiec\u0103ruia:"),s.qZA(),s._uU(33," Participarea \xeen acest grup necesit\u0103 \xeencredere reciproc\u0103. Discu\u021biile autentice \u0219i expresive fac grupurile grozave, dar pot fi \u0219i sensibile \u0219i private. Ce se \xeemp\u0103rt\u0103\u0219e\u0219te \xeen grup ar trebui s\u0103 r\u0103m\xe2n\u0103 \xeen grup."),s.qZA(),s.TgZ(34,"li")(35,"span"),s._uU(36,"Respecta\u021bi Standardele Comunit\u0103\u021bii Facebook."),s.qZA(),s._uU(37," Respect\u0103 toate liniile directoare ale comunit\u0103\u021bii pentru a asigura c\u0103 grupul r\u0103m\xe2ne un spa\u021biu sigur pentru to\u021bi."),s.qZA(),s.TgZ(38,"li"),s._uU(39,"Raporta\u021bi \xeenc\u0103lc\u0103rile regulilor c\u0103tre administratori."),s.qZA()()(),s.TgZ(40,"div")(41,"p"),s._uU(42,"Dac\u0103 dori\u021bi s\u0103 v\u0103 oferi\u021bi serviciile comunit\u0103\u021bii, v\u0103 rug\u0103m s\u0103 trimite\u021bi detaliile serviciilor dumneavoastr\u0103 prin intermediul site-ului nostru. Un administrator va revizui trimiterea dvs. \u0219i o va ad\u0103uga \xeen grup c\xe2t mai cur\xe2nd posibil. Apreciem cooperarea \u0219i \xeen\u021belegerea dvs. \xeen respectarea regulilor grupului nostru."),s.qZA()()())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;background:url(Seattle-Romania.322e2da675d571d6.png) no-repeat center center/cover;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1}.content[_ngcontent-%COMP%]{position:relative;z-index:2}h1[_ngcontent-%COMP%]{font-size:3em;margin:.5em 0}p[_ngcontent-%COMP%]{font-size:1.5em;margin:.5em 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;padding:.75em 1.5em;margin-top:1em;font-size:1.2em;color:#fff;background-color:var(--button-color);border:none;border-radius:5px;text-decoration:none;cursor:pointer;transition:background-color .3s ease}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e65c00}.rules-section[_ngcontent-%COMP%]{padding:40px 20px;background:#f4f4f4}.rules-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.rules-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:32px}.rules-list[_ngcontent-%COMP%]{list-style:none}.rules-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fff;padding:20px;margin-bottom:10px;border-left:5px solid #007BFF}.rules-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#333}"]})}return E})();function El(E,h){1&E&&s._UZ(0,"app-event-card",7),2&E&&s.Q6J("event",h.$implicit)}let Al=(()=>{class E{constructor(l,_){this.eventService=l,this.router=_,this.events=[]}ngOnInit(){this.eventService.getEvents().subscribe(l=>{this.events=l})}navigateToAddEvent(){this.router.navigate(["/add-event"])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(_l.n),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-events"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"services-container"],[3,"event",4,"ngFor","ngForOf"],[3,"event"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3,"Lista de Evenimente"),s.qZA()(),s.TgZ(4,"div",2)(5,"h2"),s._uU(6,"Descoperi\u021bi serviciile oferite de membrii comunit\u0103\u021bii"),s.qZA()()(),s.TgZ(7,"div",3)(8,"button",4),s.NdJ("click",function(){return C.navigateToAddEvent()}),s._uU(9,"Adaugati un Eveniment"),s.qZA()(),s.TgZ(10,"div",5),s.YNc(11,El,1,1,"app-event-card",6),s.qZA()),2&_&&(s.xp6(11),s.Q6J("ngForOf",C.events))},dependencies:[B.sg,yl],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.service-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:10px;padding:40px;width:calc(25% - 32px);box-sizing:border-box;position:relative;min-width:400px}.card-header[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:4px}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;position:absolute;bottom:10px;right:10px;color:gold}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.services-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:30px;padding:30px}.services-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.services-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;font-size:1rem}.sponsor-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:4px}.sponsor-text[_ngcontent-%COMP%]{font-size:1rem;color:gold}.add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.services-control[_ngcontent-%COMP%]{flex-direction:column}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return E})();function af(E,h){1&E&&s._UZ(0,"app-offer-card",7),2&E&&s.Q6J("offer",h.$implicit)}let Qd=(()=>{class E{constructor(l,_){this.offersService=l,this.router=_,this.offers=[]}ngOnInit(){this.offersService.getOffers().subscribe(l=>{console.log(l),this.offers=l})}navigateToAddOffer(){this.router.navigate(["/add-offers"])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(ko.b),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-offers"]],decls:12,vars:1,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"add-service-container"],[3,"click"],[1,"offer-list"],[3,"offer",4,"ngFor","ngForOf"],[3,"offer"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3,"De toate pentru to\u021bi"),s.qZA()(),s.TgZ(4,"div",2)(5,"h2"),s._uU(6,"Descoperi\u021bi oferte de membrii comunit\u0103\u021bii"),s.qZA()()(),s.TgZ(7,"div",3)(8,"button",4),s.NdJ("click",function(){return C.navigateToAddOffer()}),s._uU(9,"Adaugati oferta"),s.qZA()(),s.TgZ(10,"div",5),s.YNc(11,af,1,1,"app-offer-card",6),s.qZA()),2&_&&(s.xp6(11),s.Q6J("ngForOf",C.offers))},dependencies:[B.sg,vl],styles:[".hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(http://source.unsplash.com/800x600/?Seattle);background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.section-header[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.add-offer-container[_ngcontent-%COMP%], .add-service-container[_ngcontent-%COMP%]{text-align:right;margin:20px}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.offers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;padding:20px}.offers-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.offers-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:15px;width:calc(25% - 32px);overflow:hidden;transition:transform .3s,box-shadow .3s;min-width:400px}.offers-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 12px 24px #0003}.offer-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover}.offers-card-content[_ngcontent-%COMP%]{padding:20px;text-align:left}.offers-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;font-weight:600}.offers-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#666;font-weight:400}.offers-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#777}.offers-footer[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.featured[_ngcontent-%COMP%]{color:#007bff;font-weight:700}@media (max-width: 1024px){.offer-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.offer-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}"]})}return E})();var Hi=k(8779);function Ql(E,h){if(1&E&&(s.TgZ(0,"option",30),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function ic(E,h){if(1&E&&(s.TgZ(0,"option",30),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function Yd(E,h){if(1&E&&(s.TgZ(0,"option",30),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function so(E,h){if(1&E&&(s.TgZ(0,"div",31)(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"label",32),s._uU(4,"Open:"),s.qZA(),s.TgZ(5,"select",33),s.YNc(6,ic,2,2,"option",8),s.qZA(),s.TgZ(7,"label",32),s._uU(8,"Close:"),s.qZA(),s.TgZ(9,"select",34),s.YNc(10,Yd,2,2,"option",8),s.qZA()()),2&E){const l=h.$implicit,_=s.oxw();s.Q6J("formGroupName",l),s.xp6(2),s.Oqu(l),s.xp6(1),s.MGl("for","",l,"-open"),s.xp6(3),s.Q6J("ngForOf",_.hoursOptions),s.xp6(1),s.MGl("for","",l,"-close"),s.xp6(3),s.Q6J("ngForOf",_.hoursOptions)}}const sc=function(){return["Luni","Marti","Miercuri","Joi","Vineri","Sambata","Duminica"]};let Zu=(()=>{class E{constructor(l,_,C,G){this.fb=l,this.servicesService=_,this.imageUploadService=C,this.router=G,this.serviceTypes=[],this.selectedFile=null,this.hoursOptions=["Closed","7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM"],this.serviceForm=this.fb.group({Name:["",Xt.kI.required],Email:["",[Xt.kI.email]],Phone_Number:[""],Website:[""],Facebook:[""],Instagram:[""],Image:[""],Description:[""],Date_Created:[""],Community_Sponsor:[!1],Service_Type:["",Xt.kI.required],Hours:this.fb.group({Luni:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Marti:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Miercuri:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Joi:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Vineri:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Sambata:this.fb.group({open:["Closed"],close:["Closed"]}),Duminica:this.fb.group({open:["Closed"],close:["Closed"]})})})}ngOnInit(){this.fetchServiceTypes()}onFileSelected(l){this.selectedFile=l.target.files[0]}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(l=>{this.serviceTypes=l})}onSubmit(){this.serviceForm.valid&&(this.selectedFile?this.imageUploadService.uploadImage(this.selectedFile,"serviceImages").subscribe(l=>{this.serviceForm.value.Image=l,console.log(l),this.saveService()}):this.saveService())}formatHours(l){for(const _ of Object.keys(l))""===l[_].open&&""===l[_].close&&(l[_]=null);return l}saveService(){this.servicesService.addService(this.serviceForm.value).subscribe(l=>{console.log("Service added successfully with ID:",l?.id),this.serviceForm.reset(),this.router.navigate(["/services",l?.id])})}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Xt.qu),s.Y36(_a.r),s.Y36(Hi.K),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-add-service"]],decls:59,vars:5,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Service_Type",1,"required"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["for","Name",1,"required"],["id","Name","placeholder","Ion Dumitrescu","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","placeholder","info@website.com","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","type","text","placeholder","(425) 444-5555","formControlName","Phone_Number"],["for","Website"],["id","Website","type","text","placeholder","https://www.website.com","formControlName","Website"],["for","Facebook"],["id","Facebook","type","text","placeholder","https://www.facebook.com/yourname","formControlName","Facebook"],["for","Instagram"],["id","Instagram","type","text","placeholder","instaHandle..","formControlName","Instagram"],["for","Description",1,"required"],["id","Description","formControlName","Description"],["for","Hours"],["formGroupName","Hours"],[1,"day-container"],["class","day",3,"formGroupName",4,"ngFor","ngForOf"],["for","Image"],["type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"],[3,"value"],[1,"day",3,"formGroupName"],[3,"for"],["formControlName","open"],["formControlName","close"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3,"Lista de Servicii"),s.qZA()(),s.TgZ(4,"div",2)(5,"h2"),s._uU(6,"Adaugati serviciile dumneavoastra pentru membrii comunit\u0103\u021bii"),s.qZA(),s._UZ(7,"p"),s.qZA()(),s.TgZ(8,"div",3)(9,"h2"),s._uU(10," Serviciile ad\u0103ugate prin aceast\u0103 pagin\u0103 sunt supuse aprob\u0103rii administratorului \xeenainte de a fi afi\u0219ate \xeen list\u0103."),s.qZA(),s.TgZ(11,"h3"),s._uU(12,"V\u0103 rug\u0103m s\u0103 introduce\u021bi cel pu\u021bin o metod\u0103 de contact."),s.qZA(),s.TgZ(13,"form",4),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(14,"div",5)(15,"label",6),s._uU(16,"Categoria de serviciului:"),s.qZA(),s.TgZ(17,"select",7),s.YNc(18,Ql,2,2,"option",8),s.qZA()(),s.TgZ(19,"div",5)(20,"label",9),s._uU(21,"Nume:"),s.qZA(),s._UZ(22,"input",10),s.qZA(),s.TgZ(23,"div",5)(24,"label",11),s._uU(25,"Adresa Email:"),s.qZA(),s._UZ(26,"input",12),s.qZA(),s.TgZ(27,"div",5)(28,"label",13),s._uU(29,"Numar de telefon:"),s.qZA(),s._UZ(30,"input",14),s.qZA(),s.TgZ(31,"div",5)(32,"label",15),s._uU(33,"Pagina Web:"),s.qZA(),s._UZ(34,"input",16),s.qZA(),s.TgZ(35,"div",5)(36,"label",17),s._uU(37,"Pagina Facebook:"),s.qZA(),s._UZ(38,"input",18),s.qZA(),s.TgZ(39,"div",5)(40,"label",19),s._uU(41,"Instagram:(doar numele contului)"),s.qZA(),s._UZ(42,"input",20),s.qZA(),s.TgZ(43,"div",5)(44,"label",21),s._uU(45,"Descriere a serviciile oferite:"),s.qZA(),s._UZ(46,"textarea",22),s.qZA(),s.TgZ(47,"div",5)(48,"label",23),s._uU(49,"Orele de contactare:"),s.qZA(),s.TgZ(50,"div",24)(51,"div",25),s.YNc(52,so,11,6,"div",26),s.qZA()()(),s.TgZ(53,"div",5)(54,"label",27),s._uU(55,"Imagine:"),s.qZA(),s.TgZ(56,"input",28),s.NdJ("change",function(ge){return C.onFileSelected(ge)}),s.qZA()(),s.TgZ(57,"button",29),s._uU(58,"Adaugati Serviciul"),s.qZA()()()),2&_&&(s.xp6(13),s.Q6J("formGroup",C.serviceForm),s.xp6(5),s.Q6J("ngForOf",C.serviceTypes),s.xp6(34),s.Q6J("ngForOf",s.DdM(4,sc)),s.xp6(5),s.Q6J("disabled",C.serviceForm.invalid))},dependencies:[B.sg,Xt._Y,Xt.YN,Xt.Kr,Xt.Fj,Xt.EJ,Xt.JJ,Xt.JL,Xt.Q7,Xt.sg,Xt.u,Xt.x0],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:50px auto 0;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.day-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.day[_ngcontent-%COMP%]{width:20%;padding:10px;box-sizing:border-box}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:var(--button-color);color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}']})}return E})(),Yl=(()=>{class E{constructor(l,_){this.fb=l,this.eventsService=_,this.eventForm=this.fb.group({Approved:[""],Community_Sponsor:[""],Contact:[""],Description:["",Xt.kI.required],Event_date:["",Xt.kI.required],Location:["",Xt.kI.required],Name:["",Xt.kI.required],Phone_Number:[""],Poster_Image:["",Xt.kI.required],Price:["",Xt.kI.required],Website:[""]})}ngOnInit(){}onSubmit(){this.eventForm.valid&&this.eventsService.addEvent(this.eventForm.value).then(()=>{console.log("Event added successfully"),this.eventForm.reset()}).catch(_=>{console.error("Error adding event: ",_)})}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Xt.qu),s.Y36(_l.n))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-add-event"]],decls:40,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Name",1,"required"],["id","Name","formControlName","Name","required",""],["for","Contact"],["id","Contact","formControlName","Contact","required",""],["for","Poster_Image",1,"required"],["id","Poster_Image","formControlName","Poster_Image","required",""],["for","Phone_Number"],["id","Phone_Number","formControlName","Phone_Number"],["for","Event_date",1,"required"],["id","Event_date","type","date","formControlName","Event_date","required",""],["for","Location",1,"required"],["id","Location","formControlName","Location","required",""],["for","Description",1,"required"],["id","Description","formControlName","Description","required",""],["for","Price",1,"required"],["id","Price","formControlName","Price","required",""],["for","Website"],["id","Website","formControlName","Website"],["type","submit",3,"disabled"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"form",1),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(2,"div",2)(3,"label",3),s._uU(4,"Titlu:"),s.qZA(),s._UZ(5,"input",4),s.qZA(),s.TgZ(6,"div",2)(7,"label",5),s._uU(8,"Persoana de contact:"),s.qZA(),s._UZ(9,"input",6),s.qZA(),s.TgZ(10,"div",2)(11,"label",7),s._uU(12,"Imagine poster:"),s.qZA(),s._UZ(13,"input",8),s.qZA(),s.TgZ(14,"div",2)(15,"label",9),s._uU(16,"Numar de Telefon:"),s.qZA(),s._UZ(17,"input",10),s.qZA(),s.TgZ(18,"div",2)(19,"label",11),s._uU(20,"Data Evenimentului:"),s.qZA(),s._UZ(21,"input",12),s.qZA(),s.TgZ(22,"div",2)(23,"label",13),s._uU(24,"Locatie:"),s.qZA(),s._UZ(25,"input",14),s.qZA(),s.TgZ(26,"div",2)(27,"label",15),s._uU(28,"Descriere:"),s.qZA(),s._UZ(29,"textarea",16),s.qZA(),s.TgZ(30,"div",2)(31,"label",17),s._uU(32,"Pret:"),s.qZA(),s._UZ(33,"input",18),s.qZA(),s.TgZ(34,"div",2)(35,"label",19),s._uU(36,"Website:"),s.qZA(),s._UZ(37,"input",20),s.qZA(),s.TgZ(38,"button",21),s._uU(39,"Adauga Eveniment"),s.qZA()()()),2&_&&(s.xp6(1),s.Q6J("formGroup",C.eventForm),s.xp6(37),s.Q6J("disabled",C.eventForm.invalid))},dependencies:[Xt._Y,Xt.Fj,Xt.JJ,Xt.JL,Xt.Q7,Xt.sg,Xt.u],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto 0;padding:50px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}']})}return E})();var na=k(5861),cf=k(8963),Jd=k.n(cf);function lf(E,h){if(1&E&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function hp(E,h){if(1&E&&(s.TgZ(0,"div",38),s._UZ(1,"div",39),s.qZA()),2&E){const l=s.oxw().$implicit;s.xp6(1),s.Udp("width",l.progress,"%")}}function mo(E,h){if(1&E){const l=s.EpF();s.TgZ(0,"div",34),s._UZ(1,"img",35),s.YNc(2,hp,2,2,"div",36),s.TgZ(3,"button",37),s.NdJ("click",function(){const G=s.CHM(l).$implicit,ge=s.oxw();return s.KtG(ge.removeImage(G))}),s._uU(4,"X"),s.qZA()()}if(2&E){const l=h.$implicit;s.xp6(1),s.s9C("alt",l.name),s.Q6J("src",l.url,s.LSH),s.xp6(1),s.Q6J("ngIf",void 0!==l.progress)}}let Jl=(()=>{class E{constructor(l,_,C,G){this.fb=l,this.offersService=_,this.imageUploadService=C,this.router=G,this.offerTypes=[],this.images=[],this.imageUploadStatus={},this.offerId="",this.offer={Title:"",Company_Name:"",Contact_Name:"",Phone_Number:"",Email:"",Description:"",Price:"",Location:"",Website:"",OfferType:"",Community_Sponsor:!1,Date_Created:"",Date_Updated:"",Hours:{},Images:[],id:"",Facebook:"",Instagram:"",Filled:!1,Approved:!1,ApprovedDate:""},this.offerForm=this.fb.group({Title:["",Xt.kI.required],Company_Name:[""],Contact_Name:["",Xt.kI.required],Phone_Number:[""],Email:["",[Xt.kI.email]],Location:[""],Website:[""],Facebook:[""],Instagram:[""],Description:["",Xt.kI.required],Price:[""],Images:[],Filled:!1,Date_Created:[""],ApprovedDate:[""],OfferType:[""],Community_Sponsor:!1})}ngOnInit(){this.fetchOfferTypes(),this.offerId=this.offersService.generateOfferId()}onFileSelected(l){var _=this;return(0,na.Z)(function*(){const C=l.target.files;for(let G=0;G<C.length;G++){const ge=C[G],ke=yield _.resizeImage(ge);_.imageUploadStatus[ge.name]="Uploading...";const gt={name:ge.name,url:"",file:ge,progress:0};_.images.push(gt),_.imageUploadService.uploadOfferImage(ke,_.offerId).subscribe({next:Tt=>{"string"==typeof Tt?(gt.url=Tt,_.offer.Images.push(Tt),_.imageUploadStatus[ge.name]="Uploaded"):gt.progress=Tt},error:Tt=>{console.error("Image upload failed: ",Tt),_.imageUploadStatus[ge.name]="Failed to upload"}})}})()}removeImage(l){this.images=this.images.filter(_=>_!==l),this.offer.Images=this.offer.Images.filter(_=>_!==l.url),this.imageUploadService.deleteOfferImage(l.url).subscribe(()=>{this.offersService.updateOffer(this.offerId,this.offer).subscribe()})}fetchOfferTypes(){this.offersService.getAllOfferTypes().subscribe(l=>{this.offerTypes=l})}onSubmit(){this.offerForm.valid&&(this.offer.Title=this.offerForm.value.Title,this.offer.Phone_Number=this.offerForm.value.Phone_Number,this.offer.Price=this.offerForm.value.Price,this.offer.Community_Sponsor=this.offerForm.value.Community_Sponsor,this.offer.Company_Name=this.offerForm.value.Company_Name,this.offer.Contact_Name=this.offerForm.value.Contact_Name,this.offer.Website=this.offerForm.value.Website,this.offer.Email=this.offerForm.value.Email,this.offer.Location=this.offerForm.value.Location,this.offer.OfferType=this.offerForm.value.OfferType,this.offer.Description=this.offerForm.value.Description,this.offer.Date_Created=(new Date).toISOString(),this.offer.Date_Updated=(new Date).toISOString(),this.offersService.addOfferWithId(this.offer,this.offerId).subscribe(()=>{this.router.navigate(["/offers"])}))}resizeImage(l){return(0,na.Z)(function*(){const _=Jd()(),C=new Image;return C.src=URL.createObjectURL(l),new Promise((G,ge)=>{C.onload=(0,na.Z)(function*(){const ke=document.createElement("canvas"),on=(ke.getContext("2d"),Math.min(1024/C.width,1024/C.height));ke.width=C.width*on,ke.height=C.height*on;try{yield _.resize(C,ke),ke.toBlob(Cn=>{if(Cn){const Nr=new File([Cn],l.name,{type:l.type});G(Nr)}else ge(new Error("Image resizing failed"))},l.type)}catch(Cn){ge(Cn)}}),C.onerror=ke=>ge(ke)})})()}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Xt.qu),s.Y36(ko.b),s.Y36(Hi.K),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-add-offers"]],decls:63,vars:4,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","OfferType"],["id","OfferType","id","OfferType","formControlName","OfferType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","Title",1,"required"],["type","text","id","Title","formControlName","Title","required","","placeholder","Titlu"],["for","Company_Name"],["type","text","id","Company_Name","formControlName","Company_Name","required","","placeholder","Numele Companiei"],["for","Contact_Name",1,"required"],["type","text","id","Contact_Name","formControlName","Contact_Name","required","","placeholder","Persoana de contact"],["for","Phone_Number"],["type","text","id","Phone_Number","formControlName","Phone_Number","placeholder","Numar de telefon"],["for","Email",1,"required"],["type","email","id","Email","formControlName","Email","required","","placeholder","Adresa de Email"],["for","Facebook"],["type","text","id","Facebook","formControlName","Facebook","placeholder","Adresa de Facebook"],["for","Instagram"],["type","text","id","Instagram","formControlName","Instagram","placeholder","cont_de_instagram"],["for","Description",1,"required"],["id","Description","formControlName","Description","required","","placeholder","Descriere"],["for","Price"],["type","text","id","Price","formControlName","Price","placeholder","Pret"],["for","Location"],["type","text","id","Location","formControlName","Location","placeholder","Locatie"],["for","Website"],["type","url","id","Website","formControlName","Website","placeholder","Pagina de Web"],["for","Images"],["id","Images","type","file","multiple","",1,"form-control-file",3,"change"],[1,"image-preview-container"],["class","image-preview",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"],[1,"image-preview"],[1,"img-thumbnail",3,"src","alt"],["class","progress",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"progress"],[1,"progress-bar"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2," Ofertele ad\u0103ugate prin aceast\u0103 pagin\u0103 sunt supuse aprob\u0103rii administratorului \xeenainte de a fi afi\u0219ate \xeen list\u0103."),s.qZA(),s.TgZ(3,"h3"),s._uU(4,"V\u0103 rug\u0103m s\u0103 introduce\u021bi cel pu\u021bin o metod\u0103 de contact."),s.qZA(),s.TgZ(5,"form",1),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(6,"div",2)(7,"label",3),s._uU(8,"Tip de oferta"),s.qZA(),s.TgZ(9,"select",4),s.YNc(10,lf,2,2,"option",5),s.qZA()(),s.TgZ(11,"div",2)(12,"label",6),s._uU(13,"Titlu:"),s.qZA(),s._UZ(14,"input",7),s.qZA(),s.TgZ(15,"div",2)(16,"label",8),s._uU(17,"Numele Companiei:"),s.qZA(),s._UZ(18,"input",9),s.qZA(),s.TgZ(19,"div",2)(20,"label",10),s._uU(21,"Numele persoanei de contact:"),s.qZA(),s._UZ(22,"input",11),s.qZA(),s.TgZ(23,"div",2)(24,"label",12),s._uU(25,"Numar de telefon:"),s.qZA(),s._UZ(26,"input",13),s.qZA(),s.TgZ(27,"div",2)(28,"label",14),s._uU(29,"Adresa de Email:"),s.qZA(),s._UZ(30,"input",15),s.qZA(),s.TgZ(31,"div",2)(32,"label",16),s._uU(33,"Adresa de Facebook:"),s.qZA(),s._UZ(34,"input",17),s.qZA(),s.TgZ(35,"div",2)(36,"label",18),s._uU(37,"Cont de Instagram:"),s.qZA(),s._UZ(38,"input",19),s.qZA(),s.TgZ(39,"div",2)(40,"label",20),s._uU(41,"Descriere:"),s.qZA(),s._UZ(42,"textarea",21),s.qZA(),s.TgZ(43,"div",2)(44,"label",22),s._uU(45,"Pret:"),s.qZA(),s._UZ(46,"input",23),s.qZA(),s.TgZ(47,"div",2)(48,"label",24),s._uU(49,"Locatie:"),s.qZA(),s._UZ(50,"input",25),s.qZA(),s.TgZ(51,"div",2)(52,"label",26),s._uU(53,"Website:"),s.qZA(),s._UZ(54,"input",27),s.qZA(),s.TgZ(55,"div",2)(56,"label",28),s._uU(57,"Images"),s.qZA(),s.TgZ(58,"input",29),s.NdJ("change",function(ge){return C.onFileSelected(ge)}),s.qZA(),s.TgZ(59,"div",30),s.YNc(60,mo,5,3,"div",31),s.qZA()(),s.TgZ(61,"button",32),s._uU(62,"Adauga Oferta"),s.qZA()()()),2&_&&(s.xp6(5),s.Q6J("formGroup",C.offerForm),s.xp6(5),s.Q6J("ngForOf",C.offerTypes),s.xp6(50),s.Q6J("ngForOf",C.images),s.xp6(1),s.Q6J("disabled",C.offerForm.invalid))},dependencies:[B.sg,B.O5,Xt._Y,Xt.YN,Xt.Kr,Xt.Fj,Xt.EJ,Xt.JJ,Xt.JL,Xt.Q7,Xt.sg,Xt.u],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto 0;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;border:none;border-radius:4px;cursor:pointer;background-color:var(--button-color)}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.offer-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.offer-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin:0}.company-name[_ngcontent-%COMP%]{font-size:1.2em;color:#555}.contact-name[_ngcontent-%COMP%], .contact-info[_ngcontent-%COMP%], .location[_ngcontent-%COMP%]{font-size:1em;color:#777}.offer-images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:20px}.offer-thumbnail[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:5px;box-shadow:0 0 10px #0000001a}.offer-details[_ngcontent-%COMP%]{text-align:left}.description[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:15px}.price[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;margin-bottom:10px}.website[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.website[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.offer-type[_ngcontent-%COMP%], .date-created[_ngcontent-%COMP%], .date-updated[_ngcontent-%COMP%]{font-size:.9em;color:#555;margin-bottom:5px}@media (max-width: 600px){.offer-container[_ngcontent-%COMP%]{padding:15px}.offer-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em}.company-name[_ngcontent-%COMP%], .contact-name[_ngcontent-%COMP%], .contact-info[_ngcontent-%COMP%], .location[_ngcontent-%COMP%], .description[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .offer-type[_ngcontent-%COMP%], .date-created[_ngcontent-%COMP%], .date-updated[_ngcontent-%COMP%]{font-size:1em}.offer-thumbnail[_ngcontent-%COMP%]{width:80px;height:80px}}.image-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.image-preview[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;margin-right:10px;margin-bottom:10px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px;border-radius:4px;border:1px solid #ddd}.image-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:rgba(0,0,0,.5);color:#fff;border:none;border-radius:50%;padding:5px;cursor:pointer}']})}return E})();class Il{constructor(){this.Name="",this.Phone_Number="",this.Email="",this.Description="",this.Website="",this.Facebook="",this.Instagram="",this.Date_Created="",this.Date_Updated="",this.Image="",this.Approved=!1,this.OpenHour="",this.CloseHour="",this.Hours={}}}class bl extends Il{constructor(){super(...arguments),this.id=""}}function ja(E,h){if(1&E&&(s.TgZ(0,"option",35),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function Xl(E,h){if(1&E&&(s.TgZ(0,"option",35),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function Gu(E,h){if(1&E&&(s.TgZ(0,"option",35),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function qu(E,h){if(1&E&&(s.TgZ(0,"div",36)(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"label",37),s._uU(4,"Open:"),s.qZA(),s.TgZ(5,"select",38),s.YNc(6,Xl,2,2,"option",8),s.qZA(),s.TgZ(7,"label",37),s._uU(8,"Close:"),s.qZA(),s.TgZ(9,"select",39),s.YNc(10,Gu,2,2,"option",8),s.qZA()()),2&E){const l=h.$implicit,_=s.oxw();s.Q6J("formGroupName",l),s.xp6(2),s.Oqu(l),s.xp6(1),s.MGl("for","",l,"-open"),s.xp6(3),s.Q6J("ngForOf",_.hoursOptions),s.xp6(1),s.MGl("for","",l,"-close"),s.xp6(3),s.Q6J("ngForOf",_.hoursOptions)}}const uf=function(){return["Luni","Marti","Miercuri","Joi","Vineri","Sambata","Duminica"]};let Xd=(()=>{class E{constructor(l,_,C,G,ge){this.fb=l,this.route=_,this.router=C,this.servicesService=G,this.imageUploadService=ge,this.serviceId=null,this.serviceTypes=[],this.selectedFile=null,this.serviceObj=new bl,this.oldImage=null,this.hoursOptions=["Closed","7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM"],this.serviceForm=this.fb.group({Name:["",Xt.kI.required],Email:["",[Xt.kI.email]],Phone_Number:[""],Website:[""],Facebook:[""],Instagram:[""],Image:[""],Description:[""],Date_Created:[""],Community_Sponsor:[!1],Service_Type:["",Xt.kI.required],Hours:this.fb.group({Luni:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Marti:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Miercuri:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Joi:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Vineri:this.fb.group({open:["8:00 AM"],close:["5:00 PM"]}),Sambata:this.fb.group({open:["Closed"],close:["Closed"]}),Duminica:this.fb.group({open:["Closed"],close:["Closed"]})})})}onFileSelected(l){this.selectedFile=l.target.files[0]}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),console.log(this.serviceId),this.servicesService.getServiceById(this.serviceId).subscribe(l=>{this.serviceForm.patchValue({Id:this.serviceId,Name:l?.Name,Email:l?.Email?l.Email:"",Phone_Number:l?.Phone_Number?l.Phone_Number:"",Service_Type:l?.Service_Type,Website:l?.Website?l.Website:"",Facebook:l?.Facebook?l?.Facebook:"",Instagram:l?.Instagram?l?.Instagram:"",Description:l?.Description,Date_Created:l?.Date_Created,Date_Updated:l?.Date_Updated,Approved:!0,Hours:l?.Hours}),console.log(this.serviceForm.value),l?.Image&&(this.oldImage=l?.Image)}),this.fetchServiceTypes()}fetchServiceTypes(){this.servicesService.getAllServiceTypes().subscribe(l=>{this.serviceTypes=l})}onSubmit(){this.serviceForm.valid&&(this.serviceObj.id=this.serviceId?this.serviceId:"0",this.serviceObj.Name=this.serviceForm.value.Name,this.serviceObj.Phone_Number=this.serviceForm.value.Phone_Number,this.serviceObj.Service_Type=this.serviceForm.value.Service_Type,this.serviceObj.Community_Sponsor=!1,this.serviceObj.Email=this.serviceForm.value.Email,this.serviceObj.Website=this.serviceForm.value.Website,this.serviceObj.Facebook=this.serviceForm.value.Facebook,this.serviceObj.Instagram=this.serviceForm.value.Instagram,this.serviceObj.Description=this.serviceForm.value.Description,this.serviceObj.Date_Created=this.serviceForm.value.Date_Created,this.serviceObj.Date_Updated=this.serviceForm.value.Date_Updated,this.serviceObj.Image=this.serviceForm.value.Image,this.serviceObj.Hours=this.serviceForm.value.Hours,this.selectedFile?(console.log(this.selectedFile),this.imageUploadService.uploadImage(this.selectedFile,"serviceImages").subscribe(l=>{this.serviceObj.Image=l,this.saveService()})):(this.oldImage&&(this.serviceObj.Image=this.oldImage),this.saveService()))}saveService(){let l=this.route.snapshot.paramMap.get("id");this.servicesService.updateService(l,this.serviceObj).subscribe(_=>{console.log("Service updated successfully  ID:",_?.id),this.serviceForm.reset(),this.router.navigate(["/services",_?.id])})}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Xt.qu),s.Y36(Zr.gz),s.Y36(Zr.F0),s.Y36(_a.r),s.Y36(Hi.K))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-edit-services"]],decls:61,vars:6,consts:[[1,"hero-section"],[1,"hero-overlay"],[1,"overlay_subtitle"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Service_Type",1,"required"],["id","Service_Type","formControlName","Service_Type","required",""],[3,"value",4,"ngFor","ngForOf"],["for","Name",1,"required"],["id","Name","placeholder","Ion Dumitrescu","formControlName","Name","required",""],["for","Email"],["id","Email","type","Email","placeholder","info@website.com","formControlName","Email"],["for","Phone_Number"],["id","Phone_Number","type","text","placeholder","(425) 444-5555","formControlName","Phone_Number"],["for","Website"],["id","Website","type","text","placeholder","https://www.website.com","formControlName","Website"],["for","Facebook"],["id","Facebook","type","text","placeholder","https://www.facebook.com/yourname","formControlName","Facebook"],["for","Instagram"],["id","Instagram","type","text","placeholder","instaHandle..","formControlName","Instagram"],["for","Description",1,"required"],["id","Description","formControlName","Description"],["for","Hours"],["formGroupName","Hours"],[1,"day-container"],["class","day",3,"formGroupName",4,"ngFor","ngForOf"],["for","Image"],[1,"service-card-image-container"],[1,"service-card-image",3,"src"],["type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"],[2,"display","none"],["for","Approved"],["id","Approved","formControlName","Approved"],[3,"value"],[1,"day",3,"formGroupName"],[3,"for"],["formControlName","open"],["formControlName","close"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3,"Lista de Servicii"),s.qZA()(),s.TgZ(4,"div",2)(5,"h2"),s._uU(6,"Adaugati serviciile oferite pentru membrii comunit\u0103\u021bii"),s.qZA()()(),s.TgZ(7,"div",3)(8,"form",4),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(9,"div",5)(10,"label",6),s._uU(11,"Categoria de serviciului:"),s.qZA(),s.TgZ(12,"select",7),s.YNc(13,ja,2,2,"option",8),s.qZA()(),s.TgZ(14,"div",5)(15,"label",9),s._uU(16,"Nume:"),s.qZA(),s._UZ(17,"input",10),s.qZA(),s.TgZ(18,"div",5)(19,"label",11),s._uU(20,"Adresa Email:"),s.qZA(),s._UZ(21,"input",12),s.qZA(),s.TgZ(22,"div",5)(23,"label",13),s._uU(24,"Numar de telefon:"),s.qZA(),s._UZ(25,"input",14),s.qZA(),s.TgZ(26,"div",5)(27,"label",15),s._uU(28,"Pagina Web:"),s.qZA(),s._UZ(29,"input",16),s.qZA(),s.TgZ(30,"div",5)(31,"label",17),s._uU(32,"Pagina Facebook:"),s.qZA(),s._UZ(33,"input",18),s.qZA(),s.TgZ(34,"div",5)(35,"label",19),s._uU(36,"Instagram:(doar numele contului)"),s.qZA(),s._UZ(37,"input",20),s.qZA(),s.TgZ(38,"div",5)(39,"label",21),s._uU(40,"Descriere a serviciile oferite:"),s.qZA(),s._UZ(41,"textarea",22),s.qZA(),s.TgZ(42,"div",5)(43,"label",23),s._uU(44,"Orele de contactare:"),s.qZA(),s.TgZ(45,"div",24)(46,"div",25),s.YNc(47,qu,11,6,"div",26),s.qZA()()(),s.TgZ(48,"div",5)(49,"label",27),s._uU(50,"Imagine:"),s.qZA(),s.TgZ(51,"div",28),s._UZ(52,"img",29),s.qZA(),s.TgZ(53,"input",30),s.NdJ("change",function(ge){return C.onFileSelected(ge)}),s.qZA()(),s.TgZ(54,"button",31),s._uU(55,"Salvati Serviciu"),s.qZA(),s.TgZ(56,"div",32)(57,"div")(58,"label",33),s._uU(59,"Approved:"),s.qZA(),s._UZ(60,"input",34),s.qZA()()()()),2&_&&(s.xp6(8),s.Q6J("formGroup",C.serviceForm),s.xp6(5),s.Q6J("ngForOf",C.serviceTypes),s.xp6(34),s.Q6J("ngForOf",s.DdM(5,uf)),s.xp6(5),s.Q6J("src",C.oldImage,s.LSH),s.xp6(2),s.Q6J("disabled",C.serviceForm.invalid))},dependencies:[B.sg,Xt._Y,Xt.YN,Xt.Kr,Xt.Fj,Xt.EJ,Xt.JJ,Xt.JL,Xt.Q7,Xt.sg,Xt.u,Xt.x0],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;height:30vh;background-image:url(Services.8624e1c234ff47fa.png);background-size:cover;background-position:0 35%}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5)}.overlay_subtitle[_ngcontent-%COMP%]{position:absolute;top:70px;left:0;width:100%;height:90%;display:flex;justify-content:center;align-items:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-align:center}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:50px auto 0;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.day-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.day[_ngcontent-%COMP%]{width:20%;padding:10px;box-sizing:border-box}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:var(--button-color);color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin:10px 0;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}button[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}.service-card-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.service-card-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #ddd}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}@media (max-width: 1024px){.service-card[_ngcontent-%COMP%]{width:calc(50% - 32px);min-width:350px}}@media (max-width: 600px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}@media screen and (max-width: 960px){.service-card[_ngcontent-%COMP%]{width:calc(90% - 100px);min-width:350px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-align:center}.overlay_subtitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center}}}']})}return E})();var fp=k(2380);function Bc(E,h){if(1&E&&(s.TgZ(0,"div",17),s._UZ(1,"img",18),s.qZA()),2&E){const l=h.$implicit,_=h.index,C=s.oxw();s.ekj("active",_===C.currentIndex),s.xp6(1),s.MGl("alt","Offer Image ",_+1,""),s.Q6J("src",l,s.LSH)}}let Wu=(()=>{class E{constructor(l,_,C){this.route=l,this.router=_,this.offerService=C,this.images=[],this.currentIndex=0}ngOnInit(){const l=this.route.snapshot.paramMap.get("id");l&&this.offerService.getOfferById(l).subscribe(_=>{this.offer=_,this.offer&&this.offer.Images&&(this.images=this.offer.Images.filter(C=>!!C)),this.initCarousel()})}goBack(){this.router.navigate(["/offers"])}initCarousel(){setTimeout(()=>{const l=document.querySelectorAll(".carousel-item");l.length>0&&l[0].classList.add("active")},0)}prevSlide(){this.images.length&&(this.currentIndex=this.currentIndex>0?this.currentIndex-1:this.images.length-1,this.updateSlide())}nextSlide(){this.images.length&&(this.currentIndex=(this.currentIndex+1)%this.images.length,this.updateSlide())}updateSlide(){document.querySelectorAll(".carousel-item").forEach((_,C)=>{_.classList.toggle("active",C===this.currentIndex)})}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.gz),s.Y36(Zr.F0),s.Y36(ko.b))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-offer-detail"]],decls:75,vars:22,consts:[[1,"offer-details-container"],[1,"offer-header"],[1,"offer-company"],[1,"offer-carousel-container"],[1,"carousel"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],[1,"carousel-control","prev",3,"click"],[1,"carousel-control","next",3,"click"],[1,"offer-content"],[1,"offer-info"],["target","_blank",3,"href"],[1,"offer-description"],[1,"offer-hours"],[1,"offer-sponsor"],[1,"offer-dates"],[1,"return-button",3,"click"],[1,"carousel-item"],[3,"src","alt"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3),s.qZA(),s.TgZ(4,"div",2)(5,"strong"),s._uU(6,"Company:"),s.qZA(),s._uU(7),s.qZA()(),s.TgZ(8,"div",3)(9,"div",4)(10,"div",5),s.YNc(11,Bc,2,4,"div",6),s.qZA(),s.TgZ(12,"a",7),s.NdJ("click",function(){return C.prevSlide()}),s._uU(13,"\u276e"),s.qZA(),s.TgZ(14,"a",8),s.NdJ("click",function(){return C.nextSlide()}),s._uU(15,"\u276f"),s.qZA()()(),s.TgZ(16,"div",9)(17,"div",10)(18,"div")(19,"strong"),s._uU(20,"Contact Name:"),s.qZA(),s._uU(21),s.qZA(),s.TgZ(22,"div")(23,"strong"),s._uU(24,"Phone Number:"),s.qZA(),s._uU(25),s.qZA(),s.TgZ(26,"div")(27,"strong"),s._uU(28,"Email:"),s.qZA(),s._uU(29),s.qZA(),s.TgZ(30,"div")(31,"strong"),s._uU(32,"Website:"),s.qZA(),s.TgZ(33,"a",11),s._uU(34),s.qZA()(),s.TgZ(35,"div")(36,"strong"),s._uU(37,"Facebool:"),s.qZA(),s._uU(38),s.qZA(),s.TgZ(39,"div")(40,"strong"),s._uU(41,"Instagram:"),s.qZA(),s._uU(42),s.qZA(),s.TgZ(43,"div")(44,"strong"),s._uU(45,"Location:"),s.qZA(),s._uU(46),s.qZA(),s.TgZ(47,"div")(48,"strong"),s._uU(49,"Offer Type:"),s.qZA(),s._uU(50),s.qZA()(),s.TgZ(51,"div",12)(52,"strong"),s._uU(53,"Description:"),s.qZA(),s._uU(54),s.qZA(),s.TgZ(55,"div",13)(56,"strong"),s._uU(57,"Hours:"),s.qZA(),s._UZ(58,"ul"),s.qZA(),s.TgZ(59,"div",14)(60,"strong"),s._uU(61,"Sponsor:"),s.qZA(),s._uU(62),s.qZA(),s.TgZ(63,"div",15)(64,"strong"),s._uU(65,"Created Date:"),s.qZA(),s._uU(66),s.ALo(67,"date"),s._UZ(68,"br"),s.TgZ(69,"strong"),s._uU(70,"Updated Date:"),s.qZA(),s._uU(71),s.ALo(72,"date"),s.qZA(),s.TgZ(73,"button",16),s.NdJ("click",function(){return C.goBack()}),s._uU(74,"Return to Offers"),s.qZA()()()),2&_&&(s.xp6(3),s.Oqu(null==C.offer?null:C.offer.Title),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Company_Name," "),s.xp6(4),s.Q6J("ngForOf",C.images),s.xp6(10),s.hij(" ",null==C.offer?null:C.offer.Contact_Name,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Phone_Number,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Email,""),s.xp6(4),s.Q6J("href",null==C.offer?null:C.offer.Website,s.LSH),s.xp6(1),s.Oqu(null==C.offer?null:C.offer.Website),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Facebook,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Instagram,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Location,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.OfferType,""),s.xp6(4),s.hij(" ",null==C.offer?null:C.offer.Description," "),s.xp6(8),s.hij(" ",null!=C.offer&&C.offer.Community_Sponsor?"Yes":"No"," "),s.xp6(4),s.hij(" ",s.xi3(67,16,null==C.offer?null:C.offer.Date_Created,"shortDate"),""),s.xp6(5),s.hij(" ",s.xi3(72,19,null==C.offer?null:C.offer.Date_Updated,"shortDate")," "))},dependencies:[B.sg,B.uU],styles:[".offer-details-container[_ngcontent-%COMP%]{padding:16px;margin:100px auto;max-width:1024px;background-color:#f9f9f9;border-radius:10px;box-shadow:0 2px 4px #0000001a}.offer-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:1.7rem}.offer-carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;margin-bottom:20px}.carousel[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;transition:transform .5s ease-in-out}.carousel-inner[_ngcontent-%COMP%]{display:flex;width:100%}.carousel-item[_ngcontent-%COMP%]{min-width:100%;transition:transform .5s ease-in-out;opacity:0;display:none}.carousel-item.active[_ngcontent-%COMP%]{opacity:1;display:block}.carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.carousel-control[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;color:#fff;border:none;padding:10px;cursor:pointer;font-size:18px}.carousel-control.prev[_ngcontent-%COMP%]{left:10px}.carousel-control.next[_ngcontent-%COMP%]{right:10px}.offer-content[_ngcontent-%COMP%]{margin-top:20px}.offer-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}.offer-description[_ngcontent-%COMP%], .offer-hours[_ngcontent-%COMP%], .offer-sponsor[_ngcontent-%COMP%], .offer-dates[_ngcontent-%COMP%]{margin-top:20px}.return-button[_ngcontent-%COMP%]{display:block;margin-top:20px;padding:10px 20px;background-color:var(--button-color);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.return-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return E})();var eh=k(4626);function jc(E,h){if(1&E){const l=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(l);const C=s.oxw();return s.KtG(C.navigateToEditService(C.service.id))}),s._uU(1,"Edit"),s.qZA()}}let th=(()=>{class E{constructor(l,_,C,G){this.route=l,this.servicesService=_,this.router=C,this.authService=G,this.service=new bl,this.serviceId=null,this.isLoggedIn$=this.authService.isLoggedIn()}ngOnInit(){this.serviceId=this.route.snapshot.paramMap.get("id"),this.servicesService.getServiceById(this.serviceId).subscribe(l=>{l&&(this.service.Community_Sponsor=l?.Community_Sponsor??!1,this.service.Name=l.Name??"",this.service.Date_Created=l.Date_Created??"",this.service.Description=l.Description??"",this.service.Email=l.Email??"",this.service.Facebook=l.Facebook??"",this.service.Instagram=l.Instagram??"",this.service.Phone_Number=l.Phone_Number??"",this.service.Service_Type=l.Service_Type??"",this.service.Website=Vc(l.Website)??"",this.service.Image=l.Image??"",this.service.Hours=l.Hours??{},this.serviceId&&(this.service.id=this.serviceId),console.log("Image",l?.Image),(""==l.Image||void 0===l.Image)&&(this.service.Image="https://firebasestorage.googleapis.com/v0/b/romaniinseattle.appspot.com/o/serviceImages%2FdafaultImage.jpg?alt=media&token=3b0787df-12f0-444a-a426-013843534f1e"))})}goBack(){this.router.navigate(["/services"])}navigateToEditService(l){this.router.navigate(["/edit-service",l])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.gz),s.Y36(_a.r),s.Y36(Zr.F0),s.Y36(eh.e))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-service-detail"]],decls:91,vars:36,consts:[[1,"service-details-container"],[1,"service-header"],[1,"forDebug"],[1,"service-content"],[1,"service-image"],[3,"src","alt"],[1,"service-details"],[1,"service-details-label"],["target","_blank",3,"href"],[1,"date-created"],[1,"service-description"],[1,"hours-label"],[1,"dayLabel"],[1,"service-actions"],["class","editButton",3,"click",4,"ngIf"],[3,"click"],[1,"editButton",3,"click"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3")(4,"strong"),s._uU(5,"Service Id:"),s.qZA(),s._uU(6),s.qZA()()(),s.TgZ(7,"div",3)(8,"div",4),s._UZ(9,"img",5),s.TgZ(10,"h1"),s._uU(11),s.qZA()(),s.TgZ(12,"div",6)(13,"div")(14,"label",7),s._uU(15,"Tip Serviciu:"),s.qZA(),s._uU(16),s.qZA(),s.TgZ(17,"div")(18,"label",7),s._uU(19,"Nr Telefon:"),s.qZA(),s._uU(20),s.qZA(),s.TgZ(21,"div")(22,"label",7),s._uU(23,"Email:"),s.qZA(),s._uU(24),s.qZA(),s.TgZ(25,"div")(26,"label",7),s._uU(27,"Website:"),s.qZA(),s.TgZ(28,"a",8),s._uU(29),s.qZA()(),s.TgZ(30,"div")(31,"label",7),s._uU(32,"Facebook:"),s.qZA(),s.TgZ(33,"a",8),s._uU(34),s.qZA()(),s.TgZ(35,"div")(36,"label",7),s._uU(37,"Instagram:"),s.qZA(),s.TgZ(38,"a",8),s._uU(39),s.qZA()(),s.TgZ(40,"div")(41,"label",7),s._uU(42,"Sponsor:"),s.qZA(),s._uU(43),s.qZA(),s.TgZ(44,"div",9)(45,"label",7),s._uU(46,"Data:"),s.qZA(),s._uU(47),s.ALo(48,"date"),s.qZA(),s.TgZ(49,"div",10)(50,"label",7),s._uU(51,"Descriere:"),s.qZA(),s._uU(52),s.qZA(),s.TgZ(53,"div")(54,"label",11),s._uU(55,"Orele de contactare:"),s.qZA(),s.TgZ(56,"ul")(57,"li")(58,"strong",12),s._uU(59,"Monday:"),s.qZA(),s._uU(60),s.qZA(),s.TgZ(61,"li")(62,"strong",12),s._uU(63,"Tuesday:"),s.qZA(),s._uU(64),s.qZA(),s.TgZ(65,"li")(66,"strong",12),s._uU(67,"Wednesday:"),s.qZA(),s._uU(68),s.qZA(),s.TgZ(69,"li")(70,"strong",12),s._uU(71,"Thursday:"),s.qZA(),s._uU(72),s.qZA(),s.TgZ(73,"li")(74,"strong",12),s._uU(75,"Friday:"),s.qZA(),s._uU(76),s.qZA(),s.TgZ(77,"li")(78,"strong",12),s._uU(79,"Saturday:"),s.qZA(),s._uU(80),s.qZA(),s.TgZ(81,"li")(82,"strong",12),s._uU(83,"Sunday:"),s.qZA(),s._uU(84),s.qZA()()()()(),s.TgZ(85,"div",13),s.YNc(86,jc,2,0,"button",14),s.ALo(87,"async"),s._uU(88," \xa0 "),s.TgZ(89,"button",15),s.NdJ("click",function(){return C.goBack()}),s._uU(90,"Inapoi la Servicii"),s.qZA()()()),2&_&&(s.xp6(6),s.hij(" ",C.service.id,""),s.xp6(3),s.s9C("alt",C.service.Name),s.Q6J("src",C.service.Image,s.LSH),s.xp6(2),s.Oqu(C.service.Name),s.xp6(5),s.hij(" ",C.service.Service_Type,""),s.xp6(4),s.hij(" ",C.service.Phone_Number,""),s.xp6(4),s.hij(" ",C.service.Email,""),s.xp6(4),s.Q6J("href",C.service.Website,s.LSH),s.xp6(1),s.Oqu(C.service.Website),s.xp6(4),s.Q6J("href",C.service.Facebook,s.LSH),s.xp6(1),s.Oqu(C.service.Facebook),s.xp6(4),s.Q6J("href",C.service.Instagram,s.LSH),s.xp6(1),s.Oqu(C.service.Instagram),s.xp6(4),s.hij(" ",C.service.Community_Sponsor?"Yes":"No",""),s.xp6(4),s.hij(" ",s.xi3(48,31,C.service.Date_Created,"shortDate"),""),s.xp6(5),s.hij(" ",C.service.Description," "),s.xp6(8),s.AsE(" ",null==C.service.Hours.Luni?null:C.service.Hours.Luni.open," - ",null==C.service.Hours.Luni?null:C.service.Hours.Luni.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Marti?null:C.service.Hours.Marti.open," - ",null==C.service.Hours.Marti?null:C.service.Hours.Marti.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Miercuri?null:C.service.Hours.Miercuri.open," - ",null==C.service.Hours.Miercuri?null:C.service.Hours.Miercuri.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Joi?null:C.service.Hours.Joi.open," - ",null==C.service.Hours.Joi?null:C.service.Hours.Joi.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Vineri?null:C.service.Hours.Vineri.open," - ",null==C.service.Hours.Vineri?null:C.service.Hours.Vineri.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Sambata?null:C.service.Hours.Sambata.open," - ",null==C.service.Hours.Sambata?null:C.service.Hours.Sambata.close,""),s.xp6(4),s.AsE(" ",null==C.service.Hours.Duminica?null:C.service.Hours.Duminica.open," - ",null==C.service.Hours.Duminica?null:C.service.Hours.Duminica.close,""),s.xp6(2),s.Q6J("ngIf",s.lcZ(87,34,C.isLoggedIn$)))},dependencies:[B.O5,B.Ov,B.uU],styles:[".forDebug[_ngcontent-%COMP%]{display:none}.service-details-container[_ngcontent-%COMP%]{padding:16px;margin:100px auto;max-width:1024px;background-color:#f9f9f9;border-radius:10px;box-shadow:0 2px 4px #0000001a}.service-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.service-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}.service-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.service-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:400px;height:auto;border-radius:10px}.service-image[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{align-items:center;text-align:center}.service-details[_ngcontent-%COMP%]{width:100%;margin-top:16px}.service-details-label[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;color:var(--button-color);display:inline-block;width:100px}.service-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .service-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:4px 0;font-size:.9em}.service-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.service-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.8em;margin:4px 0}.service-description[_ngcontent-%COMP%]{font-size:1em;margin-top:16px;border-top:1px solid #ccc;padding-top:16px}.service-actions[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between;width:100%}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:5px;background-color:var(--button-color);color:#fff;cursor:pointer;font-size:1em}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.date-created[_ngcontent-%COMP%]{display:none}.dayLabel[_ngcontent-%COMP%]{display:inline-block;width:80px;color:var(--button-color)}.hours-label[_ngcontent-%COMP%]{display:inline-block;width:100%;font-size:1.2rem;color:var(--button-color)}@media (min-width: 768px){.service-content[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.service-image[_ngcontent-%COMP%]{margin-right:16px}.service-details[_ngcontent-%COMP%]{flex:1}}@media (max-width: 767px){.service-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em}.service-details[_ngcontent-%COMP%]{text-align:left}.service-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4px 0}}"]})}return E})(),Ha=(()=>{class E{constructor(l,_){this.authService=l,this.router=_,this.email="",this.password="",this.errorMessage=""}login(){this.authService.login(this.email,this.password).subscribe({next:()=>this.router.navigate(["/admin"]),error:l=>this.handleLoginError(l)})}handleLoginError(l){switch(l.code){case"auth/user-not-found":this.errorMessage="No user found with this email.";break;case"auth/wrong-password":this.errorMessage="Incorrect password.";break;case"auth/invalid-email":this.errorMessage="Invalid email format.";break;default:this.errorMessage="Login failed. Please try again."}console.log(this.errorMessage)}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(eh.e),s.Y36(Zr.F0))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"login-container"],[1,"login-box"],[3,"submit"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h2"),s._uU(3,"Login"),s.qZA(),s.TgZ(4,"form",2),s.NdJ("submit",function(){return C.login()}),s.TgZ(5,"div",3)(6,"label",4),s._uU(7,"Email"),s.qZA(),s.TgZ(8,"input",5),s.NdJ("ngModelChange",function(ge){return C.email=ge}),s.qZA()(),s.TgZ(9,"div",3)(10,"label",6),s._uU(11,"Password"),s.qZA(),s.TgZ(12,"input",7),s.NdJ("ngModelChange",function(ge){return C.password=ge}),s.qZA()(),s.TgZ(13,"button",8),s._uU(14,"Login"),s.qZA()()()()),2&_&&(s.xp6(8),s.Q6J("ngModel",C.email),s.xp6(4),s.Q6J("ngModel",C.password))},dependencies:[Xt._Y,Xt.Fj,Xt.JJ,Xt.JL,Xt.Q7,Xt.On,Xt.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(to right,#007bff,#0056b3)}.login-box[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:300px;text-align:center}.login-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333}.input-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{width:100%;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return E})(),eu=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-test"]],decls:17,vars:0,consts:[[1,"hero"],[1,"container","hero-content"],[1,"hero-text"],["href","https://www.facebook.com/groups/seattlecommunity",1,"btn"],[1,"hero-image"],["src","https://via.placeholder.com/600x400","alt","Seattle"],[1,"community-description"],[1,"container"]],template:function(_,C){1&_&&(s.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1"),s._uU(4,"Welcome to Seattle Community"),s.qZA(),s.TgZ(5,"p"),s._uU(6,"Your go-to place for community services and events"),s.qZA(),s.TgZ(7,"a",3),s._uU(8,"Join our Facebook Group"),s.qZA()(),s.TgZ(9,"div",4),s._UZ(10,"img",5),s.qZA()()(),s.TgZ(11,"section",6)(12,"div",7)(13,"h2"),s._uU(14,"About Our Community"),s.qZA(),s.TgZ(15,"p"),s._uU(16,"Seattle Community is dedicated to bringing together local residents, businesses, and organizations to foster a sense of unity and support. We offer a variety of services, events, and opportunities to connect with others in the area. Join us and be a part of a vibrant and active community!"),s.qZA()()())},styles:[".hero[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f5f5f5;padding:2rem 0}.hero-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.hero-text[_ngcontent-%COMP%]{flex:1}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;text-decoration:none;border-radius:5px;font-size:1rem}.hero-image[_ngcontent-%COMP%]{flex:1}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:5px}.community-description[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:2rem 0;text-align:center}.community-description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.community-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 auto;max-width:800px}"]})}return E})();function Hc(E,h){if(1&E&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&E){const l=h.$implicit;s.Q6J("value",l),s.xp6(1),s.Oqu(l)}}function Cl(E,h){if(1&E&&(s.TgZ(0,"div",38),s._UZ(1,"div",39),s.qZA()),2&E){const l=s.oxw().$implicit;s.xp6(1),s.Udp("width",l.progress,"%")}}function Tl(E,h){if(1&E){const l=s.EpF();s.TgZ(0,"div",34),s._UZ(1,"img",35),s.YNc(2,Cl,2,2,"div",36),s.TgZ(3,"button",37),s.NdJ("click",function(){const G=s.CHM(l).$implicit,ge=s.oxw();return s.KtG(ge.removeImage(G))}),s._uU(4,"X"),s.qZA()()}if(2&E){const l=h.$implicit;s.xp6(1),s.s9C("alt",l.name),s.Q6J("src",l.url,s.LSH),s.xp6(1),s.Q6J("ngIf",void 0!==l.progress)}}let Ku=(()=>{class E{constructor(l,_,C,G,ge){this.fb=l,this.offersService=_,this.imageUploadService=C,this.router=G,this.route=ge,this.offerTypes=[],this.images=[],this.imageUploadStatus={},this.offerId="",this.offer={Title:"",Company_Name:"",Contact_Name:"",Phone_Number:"",Email:"",Description:"",Price:"",Location:"",Website:"",OfferType:"",Community_Sponsor:!1,Date_Created:"",Date_Updated:"",Hours:{},Images:[],id:"",Facebook:"",Instagram:"",Filled:!1,Approved:!1,ApprovedDate:""},this.offerForm=this.fb.group({Title:["",Xt.kI.required],Company_Name:[""],Contact_Name:["",Xt.kI.required],Phone_Number:[""],Email:["",[Xt.kI.email]],Location:[""],Website:[""],Facebook:[""],Instagram:[""],Description:["",Xt.kI.required],Price:[""],Images:[],Filled:!1,Date_Created:[""],ApprovedDate:[""],OfferType:[""],Community_Sponsor:!1})}ngOnInit(){this.route.paramMap.subscribe(l=>{this.offerId=l.get("id"),this.offersService.getOfferById(this.offerId).subscribe(_=>{_&&(this.offer=_,this.offerForm.patchValue(_),_.Images?this.images=_.Images.map(C=>({name:"",url:C})):_.Images=[])})}),this.fetchOfferTypes()}onFileSelected(l){var _=this;return(0,na.Z)(function*(){const C=l.target.files;for(let G=0;G<C.length;G++){const ge=C[G],ke=yield _.resizeImage(ge);_.imageUploadStatus[ge.name]="Uploading...";const gt={name:ge.name,url:"",file:ge,progress:0};_.images.push(gt),_.imageUploadService.uploadOfferImage(ke,_.offerId).subscribe({next:Tt=>{console.log("OnFileSelected/uploadImage/Next",_.offer.Images),"string"==typeof Tt?(gt.url=Tt,_.offer.Images.push(Tt),console.log("Image uploaded to offer:",_.offer?.Images),_.imageUploadStatus[ge.name]="Uploaded"):gt.progress=Tt},error:Tt=>{console.error("Image upload failed: ",Tt),_.imageUploadStatus[ge.name]="Failed to upload"}})}})()}removeImage(l){this.images=this.images.filter(_=>_!==l),this.offer.Images=this.offer.Images.filter(_=>_!==l.url),this.imageUploadService.deleteOfferImage(l.url).subscribe(()=>{this.offersService.updateOffer(this.offerId,this.offer).subscribe()})}fetchOfferTypes(){this.offersService.getAllOfferTypes().subscribe(l=>{this.offerTypes=l})}onSubmit(){this.offerForm.valid&&(this.offer.Title=this.offerForm.value.Title,this.offer.Phone_Number=this.offerForm.value.Phone_Number,this.offer.Price=this.offerForm.value.Price,this.offer.Community_Sponsor=this.offerForm.value.Community_Sponsor,this.offer.Company_Name=this.offerForm.value.Company_Name,this.offer.Contact_Name=this.offerForm.value.Contact_Name,this.offer.Website=this.offerForm.value.Website,this.offer.Email=this.offerForm.value.Email,this.offer.Location=this.offerForm.value.Location,this.offer.OfferType=this.offerForm.value.OfferType,this.offer.Description=this.offerForm.value.Description,this.offer.Date_Updated=(new Date).toISOString(),this.offer.Instagram=this.offerForm.value.Instagram,this.offer.Facebook=this.offerForm.value.Facebook,console.log("offer:",this.offer),this.offersService.updateOffer(this.offerId,this.offer).subscribe(()=>{this.router.navigate(["/offers"])}))}resizeImage(l){return(0,na.Z)(function*(){const _=Jd()(),C=new Image;return C.src=URL.createObjectURL(l),new Promise((G,ge)=>{C.onload=(0,na.Z)(function*(){const ke=document.createElement("canvas"),on=(ke.getContext("2d"),Math.min(1024/C.width,1024/C.height));ke.width=C.width*on,ke.height=C.height*on;try{yield _.resize(C,ke),ke.toBlob(Cn=>{if(Cn){const Nr=new File([Cn],l.name,{type:l.type});G(Nr)}else ge(new Error("Image resizing failed"))},l.type)}catch(Cn){ge(Cn)}}),C.onerror=ke=>ge(ke)})})()}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Xt.qu),s.Y36(ko.b),s.Y36(Hi.K),s.Y36(Zr.F0),s.Y36(Zr.gz))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-edit-oferte"]],decls:59,vars:4,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","OfferType"],["id","OfferType","id","OfferType","formControlName","OfferType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","Title",1,"required"],["type","text","id","Title","formControlName","Title","required","","placeholder","Titlu"],["for","Company_Name"],["type","text","id","Company_Name","formControlName","Company_Name","placeholder","Numele Companiei"],["for","Contact_Name",1,"required"],["type","text","id","Contact_Name","formControlName","Contact_Name","required","","placeholder","Persoana de contact"],["for","Phone_Number"],["type","text","id","Phone_Number","formControlName","Phone_Number","placeholder","Numar de telefon"],["for","Email",1,"required"],["type","email","id","Email","formControlName","Email","required","","placeholder","Adresa de Email"],["for","Facebook"],["type","text","id","Facebook","formControlName","Facebook","placeholder","Adresa de Facebook"],["for","Instagram"],["type","text","id","Instagram","formControlName","Instagram","placeholder","cont_de_instagram"],["for","Description",1,"required"],["id","Description","formControlName","Description","required","","placeholder","Descriere"],["for","Price"],["type","text","id","Price","formControlName","Price","placeholder","Pret"],["for","Location"],["type","text","id","Location","formControlName","Location","placeholder","Locatie"],["for","Website"],["type","url","id","Website","formControlName","Website","placeholder","Pagina de Web"],["for","Images"],["id","Images","type","file","multiple","",1,"form-control-file",3,"change"],[1,"image-preview-container"],["class","image-preview",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"],[1,"image-preview"],[1,"img-thumbnail",3,"src","alt"],["class","progress",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"progress"],[1,"progress-bar"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"form",1),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(2,"div",2)(3,"label",3),s._uU(4,"Tip de oferta"),s.qZA(),s.TgZ(5,"select",4),s.YNc(6,Hc,2,2,"option",5),s.qZA()(),s.TgZ(7,"div",2)(8,"label",6),s._uU(9,"Titlu:"),s.qZA(),s._UZ(10,"input",7),s.qZA(),s.TgZ(11,"div",2)(12,"label",8),s._uU(13,"Numele Companiei:"),s.qZA(),s._UZ(14,"input",9),s.qZA(),s.TgZ(15,"div",2)(16,"label",10),s._uU(17,"Numele persoanei de contact:"),s.qZA(),s._UZ(18,"input",11),s.qZA(),s.TgZ(19,"div",2)(20,"label",12),s._uU(21,"Numar de telefon:"),s.qZA(),s._UZ(22,"input",13),s.qZA(),s.TgZ(23,"div",2)(24,"label",14),s._uU(25,"Adresa de Email:"),s.qZA(),s._UZ(26,"input",15),s.qZA(),s.TgZ(27,"div",2)(28,"label",16),s._uU(29,"Adresa de Facebook:"),s.qZA(),s._UZ(30,"input",17),s.qZA(),s.TgZ(31,"div",2)(32,"label",18),s._uU(33,"Cont de Instagram:"),s.qZA(),s._UZ(34,"input",19),s.qZA(),s.TgZ(35,"div",2)(36,"label",20),s._uU(37,"Descriere:"),s.qZA(),s._UZ(38,"textarea",21),s.qZA(),s.TgZ(39,"div",2)(40,"label",22),s._uU(41,"Pret:"),s.qZA(),s._UZ(42,"input",23),s.qZA(),s.TgZ(43,"div",2)(44,"label",24),s._uU(45,"Locatie:"),s.qZA(),s._UZ(46,"input",25),s.qZA(),s.TgZ(47,"div",2)(48,"label",26),s._uU(49,"Website:"),s.qZA(),s._UZ(50,"input",27),s.qZA(),s.TgZ(51,"div",2)(52,"label",28),s._uU(53,"Images"),s.qZA(),s.TgZ(54,"input",29),s.NdJ("change",function(ge){return C.onFileSelected(ge)}),s.qZA(),s.TgZ(55,"div",30),s.YNc(56,Tl,5,3,"div",31),s.qZA()(),s.TgZ(57,"button",32),s._uU(58,"Salveaza Oferta"),s.qZA()()()),2&_&&(s.xp6(1),s.Q6J("formGroup",C.offerForm),s.xp6(5),s.Q6J("ngForOf",C.offerTypes),s.xp6(50),s.Q6J("ngForOf",C.images),s.xp6(1),s.Q6J("disabled",C.offerForm.invalid))},dependencies:[B.sg,B.O5,Xt._Y,Xt.YN,Xt.Kr,Xt.Fj,Xt.EJ,Xt.JJ,Xt.JL,Xt.Q7,Xt.sg,Xt.u],styles:['.form-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto 0;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.image-preview-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100px;height:100px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.image-preview[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080}.image-preview[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:5px;background-color:#4caf50}.image-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background-color:#ff0000b3;border:none;border-radius:3px}']})}return E})();const zc=[{path:"",component:Kl},{path:"rules",component:Kd},{path:"analytics",component:fp.d},{path:"events",component:Al},{path:"add-event",component:Yl},{path:"events/add",component:Yl},{path:"events/:id",component:(()=>{class E{constructor(l,_,C){this.route=l,this.router=_,this.eventsService=C,this.defaultImage="https://storage.cloud.google.com/romaniinseattle.appspot.com/events/defaultImage.jpg"}ngOnInit(){const l=this.route.snapshot.paramMap.get("id");l&&this.eventsService.getEventById(l).subscribe(_=>{this.event=_,this.event?.Poster_Image||(this.event.Poster_Image=this.defaultImage)})}goBack(){this.router.navigate(["/events"])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.gz),s.Y36(Zr.F0),s.Y36(_l.n))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-event-detail"]],decls:61,vars:21,consts:[[1,"event-details-container"],[1,"event-header"],[1,"event-contact"],[1,"event-poster-container"],["alt","Event Poster",1,"poster-image",3,"src"],[1,"event-content"],[1,"event-info"],["target","_blank",3,"href"],[1,"event-description"],[1,"event-sponsor"],[1,"event-dates"],[3,"click"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1"),s._uU(3),s.qZA(),s.TgZ(4,"div",2)(5,"strong"),s._uU(6,"Contact:"),s.qZA(),s._uU(7),s.qZA()(),s.TgZ(8,"div",3),s._UZ(9,"img",4),s.qZA(),s.TgZ(10,"div",5)(11,"div",6)(12,"div")(13,"strong"),s._uU(14,"Phone Number:"),s.qZA(),s._uU(15),s.qZA(),s.TgZ(16,"div")(17,"strong"),s._uU(18,"Email:"),s.qZA(),s._uU(19),s.qZA(),s.TgZ(20,"div")(21,"strong"),s._uU(22,"Website:"),s.qZA(),s.TgZ(23,"a",7),s._uU(24),s.qZA()(),s.TgZ(25,"div")(26,"strong"),s._uU(27,"Location:"),s.qZA(),s._uU(28),s.qZA(),s.TgZ(29,"div")(30,"strong"),s._uU(31,"Event Date:"),s.qZA(),s._uU(32),s.qZA(),s.TgZ(33,"div")(34,"strong"),s._uU(35,"Time:"),s.qZA(),s._uU(36),s.qZA(),s.TgZ(37,"div")(38,"strong"),s._uU(39,"Price:"),s.qZA(),s._uU(40),s.qZA()(),s.TgZ(41,"div",8)(42,"strong"),s._uU(43,"Description:"),s.qZA(),s._uU(44),s.qZA(),s.TgZ(45,"div",9)(46,"strong"),s._uU(47,"Sponsor:"),s.qZA(),s._uU(48),s.qZA(),s.TgZ(49,"div",10)(50,"strong"),s._uU(51,"Created Date:"),s.qZA(),s._uU(52),s.ALo(53,"date"),s._UZ(54,"br"),s.TgZ(55,"strong"),s._uU(56,"Updated Date:"),s.qZA(),s._uU(57),s.ALo(58,"date"),s.qZA()(),s.TgZ(59,"button",11),s.NdJ("click",function(){return C.goBack()}),s._uU(60,"Return to Events"),s.qZA()()),2&_&&(s.xp6(3),s.Oqu(null==C.event?null:C.event.Event_Name),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Contact_Person_Name," "),s.xp6(2),s.Q6J("src",null==C.event?null:C.event.Poster_Image,s.LSH),s.xp6(6),s.hij(" ",null==C.event?null:C.event.Phone_Number,""),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Email,""),s.xp6(4),s.Q6J("href",null==C.event?null:C.event.Website,s.LSH),s.xp6(1),s.Oqu(null==C.event?null:C.event.Website),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Location,""),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Event_Date,""),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Event_Time,""),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Price,""),s.xp6(4),s.hij(" ",null==C.event?null:C.event.Description," "),s.xp6(4),s.hij(" ",null!=C.event&&C.event.Community_Sponsor?"Yes":"No"," "),s.xp6(4),s.hij(" ",s.xi3(53,15,null==C.event?null:C.event.Date_Created,"shortDate"),""),s.xp6(5),s.hij(" ",s.xi3(58,18,null==C.event?null:C.event.Date_Updated,"shortDate")," "))},dependencies:[B.uU],styles:[".event-details-container[_ngcontent-%COMP%]{border-radius:8px;background-color:#f5f5f5;padding:16px;margin:16px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.event-header[_ngcontent-%COMP%], .event-poster-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.poster-image[_ngcontent-%COMP%]{width:100%;max-width:400px;height:300px;object-fit:cover;border-radius:8px}.event-content[_ngcontent-%COMP%]{margin-top:16px}button[_ngcontent-%COMP%]{background-color:var(--button-color);color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;display:block;margin:0 auto}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return E})()},{path:"edit-event/:id",component:(()=>{class E{constructor(l,_,C,G){this.route=l,this.router=_,this.fb=C,this.eventsService=G,this.eventId=null,this.eventForm=this.fb.group({Approved:[!1],Community_Sponsor:[!1],Contact:[""],Description:["",Xt.kI.required],Event_Date:["",Xt.kI.required],Location:["",Xt.kI.required],Name:["",Xt.kI.required],Phone_Number:[""],Poster_Image:["",Xt.kI.required],Price:["",Xt.kI.required],Website:[""],Facebook:[""],Instagram:[""]})}ngOnInit(){this.eventId=this.route.snapshot.paramMap.get("id"),this.eventId&&this.eventsService.getEventById(this.eventId).subscribe(l=>{l&&(this.event=l,this.eventForm.patchValue(l))})}onSubmit(){this.eventForm.valid&&this.eventId&&this.eventsService.updateEvent(this.eventId,this.eventForm.value).subscribe(()=>{console.log("Event updated successfully"),this.router.navigate(["/events",this.eventId])},_=>{console.error("Error updating event: ",_)})}goBack(){this.router.navigate(this.eventId?["/events",this.eventId]:["/events"])}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(Zr.gz),s.Y36(Zr.F0),s.Y36(Xt.qu),s.Y36(_l.n))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-event-edit"]],decls:62,vars:1,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","Name","type","text"],["for","contact"],["id","contact","formControlName","Contact","type","text"],["for","phone"],["id","phone","formControlName","Phone_Number","type","text"],["for","description"],["id","description","formControlName","Description"],["for","location"],["id","location","formControlName","Location","type","text"],["for","event_date"],["id","event_date","formControlName","Event_Date","type","date"],["for","time"],["id","time","formControlName","Time","type","time"],["for","price"],["id","price","formControlName","Price","type","text"],["for","poster_image"],["id","poster_image","formControlName","Poster_Image","type","text"],["for","website"],["id","website","formControlName","Website","type","text"],["for","facebook"],["id","facebook","formControlName","Facebook","type","text"],["for","instagram"],["id","instagram","formControlName","Instagram","type","text"],["for","community_sponsor"],["id","community_sponsor","formControlName","Community_Sponsor","type","checkbox"],["for","approved"],["id","approved","formControlName","Approved","type","checkbox"],["type","submit"],["type","button",3,"click"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0)(1,"form",1),s.NdJ("ngSubmit",function(){return C.onSubmit()}),s.TgZ(2,"div",2)(3,"label",3),s._uU(4,"Event Name"),s.qZA(),s._UZ(5,"input",4),s.qZA(),s.TgZ(6,"div",2)(7,"label",5),s._uU(8,"Contact"),s.qZA(),s._UZ(9,"input",6),s.qZA(),s.TgZ(10,"div",2)(11,"label",7),s._uU(12,"Phone Number"),s.qZA(),s._UZ(13,"input",8),s.qZA(),s.TgZ(14,"div",2)(15,"label",9),s._uU(16,"Description"),s.qZA(),s._UZ(17,"textarea",10),s.qZA(),s.TgZ(18,"div",2)(19,"label",11),s._uU(20,"Location"),s.qZA(),s._UZ(21,"input",12),s.qZA(),s.TgZ(22,"div",2)(23,"label",13),s._uU(24,"Event Date"),s.qZA(),s._UZ(25,"input",14),s.qZA(),s.TgZ(26,"div",2)(27,"label",15),s._uU(28,"Time"),s.qZA(),s._UZ(29,"input",16),s.qZA(),s.TgZ(30,"div",2)(31,"label",17),s._uU(32,"Price"),s.qZA(),s._UZ(33,"input",18),s.qZA(),s.TgZ(34,"div",2)(35,"label",19),s._uU(36,"Poster Image"),s.qZA(),s._UZ(37,"input",20),s.qZA(),s.TgZ(38,"div",2)(39,"label",21),s._uU(40,"Website"),s.qZA(),s._UZ(41,"input",22),s.qZA(),s.TgZ(42,"div",2)(43,"label",23),s._uU(44,"Facebook"),s.qZA(),s._UZ(45,"input",24),s.qZA(),s.TgZ(46,"div",2)(47,"label",25),s._uU(48,"Instagram"),s.qZA(),s._UZ(49,"input",26),s.qZA(),s.TgZ(50,"div",2)(51,"label",27),s._uU(52,"Community Sponsor"),s.qZA(),s._UZ(53,"input",28),s.qZA(),s.TgZ(54,"div",2)(55,"label",29),s._uU(56,"Approved"),s.qZA(),s._UZ(57,"input",30),s.qZA(),s.TgZ(58,"button",31),s._uU(59,"Save Changes"),s.qZA(),s.TgZ(60,"button",32),s.NdJ("click",function(){return C.goBack()}),s._uU(61,"Cancel"),s.qZA()()()),2&_&&(s.xp6(1),s.Q6J("formGroup",C.eventForm))},dependencies:[Xt._Y,Xt.Fj,Xt.Wl,Xt.JJ,Xt.JL,Xt.sg,Xt.u],styles:['.edit-event-container[_ngcontent-%COMP%]{border-radius:8px;background-color:#f5f5f5;padding:16px;margin:16px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto 0;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:1rem;color:#fff;border:none;border-radius:4px;cursor:pointer}button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.image-preview-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100px;height:100px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.image-preview[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080}.image-preview[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:5px;background-color:#4caf50}.image-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background-color:#ff0000b3;border:none;border-radius:3px}']})}return E})()},{path:"offers",component:Qd},{path:"add-offers",component:Jl},{path:"offers/add",component:Jl},{path:"offers/:id",component:Wu},{path:"edit-oferte/:id",component:Ku},{path:"services",component:dp},{path:"add-service",component:Zu},{path:"services/add",component:Zu},{path:"services/:id",component:th},{path:"edit-service/:id",component:Xd},{path:"test",component:eu},{path:"login",component:Ha},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"admin",loadChildren:()=>k.e(658).then(k.bind(k,7658)).then(E=>E.AdminModule)}];let wl=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({imports:[Zr.Bz.forRoot(zc),Zr.Bz]})}return E})();var rh=k(769);const hf=function(E){return{"open-bar1":E}},T=function(E){return{"open-bar2":E}},g=function(E){return{"open-bar3":E}},v=function(E){return{active:E}};let M=(()=>{class E{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-navigation"]],decls:25,vars:12,consts:[[1,"navbar"],[1,"navbar-container"],[1,"logo"],["routerLink","/"],[1,"menu-icon",3,"click"],[1,"bar1",3,"ngClass"],[1,"bar2",3,"ngClass"],[1,"bar3",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item"],["routerLink","/",1,"nav-links",3,"click"],["routerLink","/services",1,"nav-links",3,"click"],["routerLink","/offers",1,"nav-links",3,"click"],["routerLink","/events",1,"nav-links",3,"click"],["routerLink","/rules",1,"nav-links",3,"click"]],template:function(_,C){1&_&&(s.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),s._uU(4,"Romani in Seattle"),s.qZA()(),s.TgZ(5,"div",4),s.NdJ("click",function(){return C.toggleMenu()}),s._UZ(6,"div",5)(7,"div",6)(8,"div",7),s.qZA(),s.TgZ(9,"ul",8)(10,"li",9)(11,"a",10),s.NdJ("click",function(){return C.closeMenu()}),s._uU(12,"Home"),s.qZA()(),s.TgZ(13,"li",9)(14,"a",11),s.NdJ("click",function(){return C.closeMenu()}),s._uU(15,"Servicii"),s.qZA()(),s.TgZ(16,"li",9)(17,"a",12),s.NdJ("click",function(){return C.closeMenu()}),s._uU(18,"Oferte"),s.qZA()(),s.TgZ(19,"li",9)(20,"a",13),s.NdJ("click",function(){return C.closeMenu()}),s._uU(21,"Evenimente"),s.qZA()(),s.TgZ(22,"li",9)(23,"a",14),s.NdJ("click",function(){return C.closeMenu()}),s._uU(24,"Regulament"),s.qZA()()()()()),2&_&&(s.xp6(6),s.Q6J("ngClass",s.VKq(4,hf,C.menuOpen)),s.xp6(1),s.Q6J("ngClass",s.VKq(6,T,C.menuOpen)),s.xp6(1),s.Q6J("ngClass",s.VKq(8,g,C.menuOpen)),s.xp6(1),s.Q6J("ngClass",s.VKq(10,v,C.menuOpen)))},dependencies:[B.mk,Zr.rH],styles:[".navbar[_ngcontent-%COMP%]{background-color:var(--nav-background-color);position:fixed;width:100%;top:0;left:0;box-shadow:0 2px 4px #0000001a;z-index:1000}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:70px;max-width:1200px;margin:0 auto}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:34px;font-weight:700;color:var(--button-color);text-decoration:none}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;align-items:center}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);text-decoration:none;text-transform:uppercase;font-size:18px;font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold}.menu-icon[_ngcontent-%COMP%]{position:absolute;display:none;cursor:pointer;flex-direction:column;justify-content:space-around;width:30px;height:30px;z-index:1}.menu-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:4px;background-color:var(--nav-text-color);transition:all .3s}.menu-icon.open[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{background-color:var(--nav-active-text)}.menu-icon[_ngcontent-%COMP%]   .open-bar1[_ngcontent-%COMP%]{transform:rotate(-45deg) translate(-5px,5px);background-color:#fff}.menu-icon[_ngcontent-%COMP%]   .open-bar2[_ngcontent-%COMP%]{opacity:0}.menu-icon[_ngcontent-%COMP%]   .open-bar3[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-5px,-5px);background-color:#fff}.nav-menu.active[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:var(--nav-active-background);opacity:.9;flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu.active[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px;margin:20px 0}@media (max-width: 768px){.navbar-container[_ngcontent-%COMP%]{justify-content:flex-start}.logo[_ngcontent-%COMP%]{order:2;margin-left:auto}.menu-icon[_ngcontent-%COMP%]{display:flex;order:1}.nav-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:var(--nav-active-background);flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);text-decoration:none;text-transform:uppercase;font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:200;font-style:normal;color:var(--nav-active-text);font-size:24px}}"]})}return E})(),X=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(_,C){1&_&&(s.TgZ(0,"footer",0)(1,"div",1),s._uU(2," \xa9 2024 Romani in Seattle. All rights reserved. "),s.qZA()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#333;color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{font-size:.9rem}"]})}return E})(),me=(()=>{class E{constructor(l){this.analyticsService=l,this.title="romani-in-seattle"}ngOnInit(){}trackButtonClick(){}static#e=this.\u0275fac=function(_){return new(_||E)(s.Y36(rh.y))};static#t=this.\u0275cmp=s.Xpm({type:E,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"main-layout"]],template:function(_,C){1&_&&(s.TgZ(0,"div",0),s._UZ(1,"app-navigation")(2,"router-outlet")(3,"app-footer"),s.qZA())},dependencies:[Zr.lC,M,X],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;min-width:calc(100vw - 70px);min-height:calc(100vh - 70px);padding:20px}"]})}return E})();class rt{}class Pt{}const $t="*";function oo(E,h=null){return{type:2,steps:E,options:h}}function za(E){return{type:6,styles:E,offset:null}}class oc{constructor(h=0,l=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=h+l}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(h=>h()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(h){this._position=this.totalTime?h*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(h){const l="start"==h?this._onStartFns:this._onDoneFns;l.forEach(_=>_()),l.length=0}}class Qu{constructor(h){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=h;let l=0,_=0,C=0;const G=this.players.length;0==G?queueMicrotask(()=>this._onFinish()):this.players.forEach(ge=>{ge.onDone(()=>{++l==G&&this._onFinish()}),ge.onDestroy(()=>{++_==G&&this._onDestroy()}),ge.onStart(()=>{++C==G&&this._onStart()})}),this.totalTime=this.players.reduce((ge,ke)=>Math.max(ge,ke.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this.players.forEach(h=>h.init())}onStart(h){this._onStartFns.push(h)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(h=>h()),this._onStartFns=[])}onDone(h){this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(h=>h.play())}pause(){this.players.forEach(h=>h.pause())}restart(){this.players.forEach(h=>h.restart())}finish(){this._onFinish(),this.players.forEach(h=>h.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(h=>h.destroy()),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}reset(){this.players.forEach(h=>h.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(h){const l=h*this.totalTime;this.players.forEach(_=>{const C=_.totalTime?Math.min(1,l/_.totalTime):1;_.setPosition(C)})}getPosition(){const h=this.players.reduce((l,_)=>null===l||_.totalTime>l.totalTime?_:l,null);return null!=h?h.getPosition():0}beforeDestroy(){this.players.forEach(h=>{h.beforeDestroy&&h.beforeDestroy()})}triggerCallback(h){const l="start"==h?this._onStartFns:this._onDoneFns;l.forEach(_=>_()),l.length=0}}function nu(E){return new s.vHH(3e3,!1)}function ac(E){switch(E.length){case 0:return new oc;case 1:return E[0];default:return new Qu(E)}}function rd(E,h,l=new Map,_=new Map){const C=[],G=[];let ge=-1,ke=null;if(h.forEach(gt=>{const Tt=gt.get("offset"),on=Tt==ge,Cn=on&&ke||new Map;gt.forEach((Nr,yr)=>{let rr=yr,ir=Nr;if("offset"!==yr)switch(rr=E.normalizePropertyName(rr,C),ir){case"!":ir=l.get(yr);break;case $t:ir=_.get(yr);break;default:ir=E.normalizeStyleValue(yr,rr,ir,C)}Cn.set(rr,ir)}),on||G.push(Cn),ke=Cn,ge=Tt}),C.length)throw function oh(E){return new s.vHH(3502,!1)}();return G}function ah(E,h,l,_){switch(h){case"start":E.onStart(()=>_(l&&Gc(l,"start",E)));break;case"done":E.onDone(()=>_(l&&Gc(l,"done",E)));break;case"destroy":E.onDestroy(()=>_(l&&Gc(l,"destroy",E)))}}function Gc(E,h,l){const G=ch(E.element,E.triggerName,E.fromState,E.toState,h||E.phaseName,l.totalTime??E.totalTime,!!l.disabled),ge=E._data;return null!=ge&&(G._data=ge),G}function ch(E,h,l,_,C="",G=0,ge){return{element:E,triggerName:h,fromState:l,toState:_,phaseName:C,totalTime:G,disabled:!!ge}}function ra(E,h,l){let _=E.get(h);return _||E.set(h,_=l),_}function yp(E){const h=E.indexOf(":");return[E.substring(1,h),E.slice(h+1)]}const Af=(()=>typeof document>"u"?null:document.documentElement)();function id(E){const h=E.parentNode||E.host||null;return h===Af?null:h}let ya=null,Ep=!1;function Ip(E,h){for(;h;){if(h===E)return!0;h=id(h)}return!1}function bp(E,h,l){if(l)return Array.from(E.querySelectorAll(h));const _=E.querySelector(h);return _?[_]:[]}let Zg=(()=>{class E{validateStyleProperty(l){return function If(E){ya||(ya=function $g(){return typeof document<"u"?document.body:null}()||{},Ep=!!ya.style&&"WebkitAppearance"in ya.style);let h=!0;return ya.style&&!function ou(E){return"ebkit"==E.substring(1,6)}(E)&&(h=E in ya.style,!h&&Ep&&(h="Webkit"+E.charAt(0).toUpperCase()+E.slice(1)in ya.style)),h}(l)}matchesElement(l,_){return!1}containsElement(l,_){return Ip(l,_)}getParentElement(l){return id(l)}query(l,_,C){return bp(l,_,C)}computeStyle(l,_,C){return C||""}animate(l,_,C,G,ge,ke=[],gt){return new oc(C,G)}static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac})}return E})(),Cp=(()=>{class E{static#e=this.NOOP=new Zg}return E})();const Gg=1e3,dh="ng-enter",sd="ng-leave",hh="ng-trigger",xl=".ng-trigger",fh="ng-animating",$a=".ng-animating";function cc(E){if("number"==typeof E)return E;const h=E.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:od(parseFloat(h[1]),h[2])}function od(E,h){return"s"===h?E*Gg:E}function bf(E,h,l){return E.hasOwnProperty("duration")?E:function qg(E,h,l){let C,G=0,ge="";if("string"==typeof E){const ke=E.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ke)return h.push(nu()),{duration:0,delay:0,easing:""};C=od(parseFloat(ke[1]),ke[2]);const gt=ke[3];null!=gt&&(G=od(parseFloat(gt),ke[4]));const Tt=ke[5];Tt&&(ge=Tt)}else C=E;if(!l){let ke=!1,gt=h.length;C<0&&(h.push(function gf(){return new s.vHH(3100,!1)}()),ke=!0),G<0&&(h.push(function Fg(){return new s.vHH(3101,!1)}()),ke=!0),ke&&h.splice(gt,0,nu())}return{duration:C,delay:G,easing:ge}}(E,h,l)}function Rl(E,h={}){return Object.keys(E).forEach(l=>{h[l]=E[l]}),h}function Cf(E){const h=new Map;return Object.keys(E).forEach(l=>{h.set(l,E[l])}),h}function lc(E,h=new Map,l){if(l)for(let[_,C]of l)h.set(_,C);for(let[_,C]of E)h.set(_,C);return h}function Ea(E,h,l){h.forEach((_,C)=>{const G=qc(C);l&&!l.has(C)&&l.set(C,E.style[G]),E.style[G]=_})}function uc(E,h){h.forEach((l,_)=>{const C=qc(_);E.style[C]=""})}function Ol(E){return Array.isArray(E)?1==E.length?E[0]:oo(E):E}const Tf=new RegExp("{{\\s*(.+?)\\s*}}","g");function ad(E){let h=[];if("string"==typeof E){let l;for(;l=Tf.exec(E);)h.push(l[1]);Tf.lastIndex=0}return h}function Nl(E,h,l){const _=E.toString(),C=_.replace(Tf,(G,ge)=>{let ke=h[ge];return null==ke&&(l.push(function Yu(E){return new s.vHH(3003,!1)}()),ke=""),ke.toString()});return C==_?E:C}function cu(E){const h=[];let l=E.next();for(;!l.done;)h.push(l.value),l=E.next();return h}const gh=/-+([a-z0-9])/g;function qc(E){return E.replace(gh,(...h)=>h[1].toUpperCase())}function ia(E,h,l){switch(h.type){case 7:return E.visitTrigger(h,l);case 0:return E.visitState(h,l);case 1:return E.visitTransition(h,l);case 2:return E.visitSequence(h,l);case 3:return E.visitGroup(h,l);case 4:return E.visitAnimate(h,l);case 5:return E.visitKeyframes(h,l);case 6:return E.visitStyle(h,l);case 8:return E.visitReference(h,l);case 9:return E.visitAnimateChild(h,l);case 10:return E.visitAnimateRef(h,l);case 11:return E.visitQuery(h,l);case 12:return E.visitStagger(h,l);default:throw function _f(E){return new s.vHH(3004,!1)}()}}function wf(E,h){return window.getComputedStyle(E)[h]}const cd="*";function sv(E,h){const l=[];return"string"==typeof E?E.split(/\s*,\s*/).forEach(_=>function Pp(E,h,l){if(":"==E[0]){const gt=function xp(E,h){switch(E){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(l,_)=>parseFloat(_)>parseFloat(l);case":decrement":return(l,_)=>parseFloat(_)<parseFloat(l);default:return h.push(function _p(E){return new s.vHH(3016,!1)}()),"* => *"}}(E,l);if("function"==typeof gt)return void h.push(gt);E=gt}const _=E.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==_||_.length<4)return l.push(function r_(E){return new s.vHH(3015,!1)}()),h;const C=_[1],G=_[2],ge=_[3];h.push(lu(C,ge));"<"==G[0]&&!(C==cd&&ge==cd)&&h.push(lu(ge,C))}(_,l,h)):l.push(E),l}const ld=new Set(["true","1"]),Kc=new Set(["false","0"]);function lu(E,h){const l=ld.has(E)||Kc.has(E),_=ld.has(h)||Kc.has(h);return(C,G)=>{let ge=E==cd||E==C,ke=h==cd||h==G;return!ge&&l&&"boolean"==typeof C&&(ge=C?ld.has(E):Kc.has(E)),!ke&&_&&"boolean"==typeof G&&(ke=G?ld.has(h):Kc.has(h)),ge&&ke}}const Sf=new RegExp("s*:selfs*,?","g");function yh(E,h,l,_){return new uu(E).build(h,l,_)}class uu{constructor(h){this._driver=h}build(h,l,_){const C=new Np(l);return this._resetContextStyleTimingState(C),ia(this,Ol(h),C)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,l){let _=l.queryCount=0,C=l.depCount=0;const G=[],ge=[];return"@"==h.name.charAt(0)&&l.errors.push(function Ju(){return new s.vHH(3006,!1)}()),h.definitions.forEach(ke=>{if(this._resetContextStyleTimingState(l),0==ke.type){const gt=ke,Tt=gt.name;Tt.toString().split(/\s*,\s*/).forEach(on=>{gt.name=on,G.push(this.visitState(gt,l))}),gt.name=Tt}else if(1==ke.type){const gt=this.visitTransition(ke,l);_+=gt.queryCount,C+=gt.depCount,ge.push(gt)}else l.errors.push(function ru(){return new s.vHH(3007,!1)}())}),{type:7,name:h.name,states:G,transitions:ge,queryCount:_,depCount:C,options:null}}visitState(h,l){const _=this.visitStyle(h.styles,l),C=h.options&&h.options.params||null;if(_.containsDynamicStyles){const G=new Set,ge=C||{};_.styles.forEach(ke=>{ke instanceof Map&&ke.forEach(gt=>{ad(gt).forEach(Tt=>{ge.hasOwnProperty(Tt)||G.add(Tt)})})}),G.size&&(cu(G.values()),l.errors.push(function Xu(E,h){return new s.vHH(3008,!1)}()))}return{type:0,name:h.name,style:_,options:C?{params:C}:null}}visitTransition(h,l){l.queryCount=0,l.depCount=0;const _=ia(this,Ol(h.animation),l);return{type:1,matchers:sv(h.expr,l.errors),animation:_,queryCount:l.queryCount,depCount:l.depCount,options:_o(h.options)}}visitSequence(h,l){return{type:2,steps:h.steps.map(_=>ia(this,_,l)),options:_o(h.options)}}visitGroup(h,l){const _=l.currentTime;let C=0;const G=h.steps.map(ge=>{l.currentTime=_;const ke=ia(this,ge,l);return C=Math.max(C,l.currentTime),ke});return l.currentTime=C,{type:3,steps:G,options:_o(h.options)}}visitAnimate(h,l){const _=function kp(E,h){if(E.hasOwnProperty("duration"))return E;if("number"==typeof E)return Aa(bf(E,h).duration,0,"");const l=E;if(l.split(/\s+/).some(G=>"{"==G.charAt(0)&&"{"==G.charAt(1))){const G=Aa(0,0,"");return G.dynamic=!0,G.strValue=l,G}const C=bf(l,h);return Aa(C.duration,C.delay,C.easing)}(h.timings,l.errors);l.currentAnimateTimings=_;let C,G=h.styles?h.styles:za({});if(5==G.type)C=this.visitKeyframes(G,l);else{let ge=h.styles,ke=!1;if(!ge){ke=!0;const Tt={};_.easing&&(Tt.easing=_.easing),ge=za(Tt)}l.currentTime+=_.duration+_.delay;const gt=this.visitStyle(ge,l);gt.isEmptyStep=ke,C=gt}return l.currentAnimateTimings=null,{type:4,timings:_,style:C,options:null}}visitStyle(h,l){const _=this._makeStyleAst(h,l);return this._validateStyleAst(_,l),_}_makeStyleAst(h,l){const _=[],C=Array.isArray(h.styles)?h.styles:[h.styles];for(let ke of C)"string"==typeof ke?ke===$t?_.push(ke):l.errors.push(new s.vHH(3002,!1)):_.push(Cf(ke));let G=!1,ge=null;return _.forEach(ke=>{if(ke instanceof Map&&(ke.has("easing")&&(ge=ke.get("easing"),ke.delete("easing")),!G))for(let gt of ke.values())if(gt.toString().indexOf("{{")>=0){G=!0;break}}),{type:6,styles:_,easing:ge,offset:h.offset,containsDynamicStyles:G,options:null}}_validateStyleAst(h,l){const _=l.currentAnimateTimings;let C=l.currentTime,G=l.currentTime;_&&G>0&&(G-=_.duration+_.delay),h.styles.forEach(ge=>{"string"!=typeof ge&&ge.forEach((ke,gt)=>{const Tt=l.collectedStyles.get(l.currentQuerySelector),on=Tt.get(gt);let Cn=!0;on&&(G!=C&&G>=on.startTime&&C<=on.endTime&&(l.errors.push(function gp(E,h,l,_,C){return new s.vHH(3010,!1)}()),Cn=!1),G=on.startTime),Cn&&Tt.set(gt,{startTime:G,endTime:C}),l.options&&function au(E,h,l){const _=h.params||{},C=ad(E);C.length&&C.forEach(G=>{_.hasOwnProperty(G)||l.push(function mf(E){return new s.vHH(3001,!1)}())})}(ke,l.options,l.errors)})})}visitKeyframes(h,l){const _={type:5,styles:[],options:null};if(!l.currentAnimateTimings)return l.errors.push(function Ug(){return new s.vHH(3011,!1)}()),_;let G=0;const ge=[];let ke=!1,gt=!1,Tt=0;const on=h.steps.map(as=>{const cs=this._makeStyleAst(as,l);let uo=null!=cs.offset?cs.offset:function Mf(E){if("string"==typeof E)return null;let h=null;if(Array.isArray(E))E.forEach(l=>{if(l instanceof Map&&l.has("offset")){const _=l;h=parseFloat(_.get("offset")),_.delete("offset")}});else if(E instanceof Map&&E.has("offset")){const l=E;h=parseFloat(l.get("offset")),l.delete("offset")}return h}(cs.styles),$i=0;return null!=uo&&(G++,$i=cs.offset=uo),gt=gt||$i<0||$i>1,ke=ke||$i<Tt,Tt=$i,ge.push($i),cs});gt&&l.errors.push(function mp(){return new s.vHH(3012,!1)}()),ke&&l.errors.push(function Bg(){return new s.vHH(3200,!1)}());const Cn=h.steps.length;let Nr=0;G>0&&G<Cn?l.errors.push(function jg(){return new s.vHH(3202,!1)}()):0==G&&(Nr=1/(Cn-1));const yr=Cn-1,rr=l.currentTime,ir=l.currentAnimateTimings,Ri=ir.duration;return on.forEach((as,cs)=>{const uo=Nr>0?cs==yr?1:Nr*cs:ge[cs],$i=uo*Ri;l.currentTime=rr+ir.delay+$i,ir.duration=$i,this._validateStyleAst(as,l),as.offset=uo,_.styles.push(as)}),_}visitReference(h,l){return{type:8,animation:ia(this,Ol(h.animation),l),options:_o(h.options)}}visitAnimateChild(h,l){return l.depCount++,{type:9,options:_o(h.options)}}visitAnimateRef(h,l){return{type:10,animation:this.visitReference(h.animation,l),options:_o(h.options)}}visitQuery(h,l){const _=l.currentQuerySelector,C=h.options||{};l.queryCount++,l.currentQuery=h;const[G,ge]=function Op(E){const h=!!E.split(/\s*,\s*/).find(l=>":self"==l);return h&&(E=E.replace(Sf,"")),E=E.replace(/@\*/g,xl).replace(/@\w+/g,l=>xl+"-"+l.slice(1)).replace(/:animating/g,$a),[E,h]}(h.selector);l.currentQuerySelector=_.length?_+" "+G:G,ra(l.collectedStyles,l.currentQuerySelector,new Map);const ke=ia(this,Ol(h.animation),l);return l.currentQuery=null,l.currentQuerySelector=_,{type:11,selector:G,limit:C.limit||0,optional:!!C.optional,includeSelf:ge,animation:ke,originalSelector:h.selector,options:_o(h.options)}}visitStagger(h,l){l.currentQuery||l.errors.push(function n_(){return new s.vHH(3013,!1)}());const _="full"===h.timings?{duration:0,delay:0,easing:"full"}:bf(h.timings,l.errors,!0);return{type:12,animation:ia(this,Ol(h.animation),l),timings:_,options:null}}}class Np{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function _o(E){return E?(E=Rl(E)).params&&(E.params=function o_(E){return E?Rl(E):null}(E.params)):E={},E}function Aa(E,h,l){return{duration:E,delay:h,easing:l}}function Fp(E,h,l,_,C,G,ge=null,ke=!1){return{type:1,element:E,keyframes:h,preStyleProps:l,postStyleProps:_,duration:C,delay:G,totalTime:C+G,easing:ge,subTimeline:ke}}class ud{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,l){let _=this._map.get(h);_||this._map.set(h,_=[]),_.push(...l)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const Kg=new RegExp(":enter","g"),Qg=new RegExp(":leave","g");function Lp(E,h,l,_,C,G=new Map,ge=new Map,ke,gt,Tt=[]){return(new a_).buildKeyframes(E,h,l,_,C,G,ge,ke,gt,Tt)}class a_{buildKeyframes(h,l,_,C,G,ge,ke,gt,Tt,on=[]){Tt=Tt||new ud;const Cn=new hd(h,l,Tt,C,G,on,[]);Cn.options=gt;const Nr=gt.delay?cc(gt.delay):0;Cn.currentTimeline.delayNextStep(Nr),Cn.currentTimeline.setStyles([ge],null,Cn.errors,gt),ia(this,_,Cn);const yr=Cn.timelines.filter(rr=>rr.containsAnimation());if(yr.length&&ke.size){let rr;for(let ir=yr.length-1;ir>=0;ir--){const Ri=yr[ir];if(Ri.element===l){rr=Ri;break}}rr&&!rr.allowOnlyTimelineStyles()&&rr.setStyles([ke],null,Cn.errors,gt)}return yr.length?yr.map(rr=>rr.buildKeyframes()):[Fp(l,[],[],[],0,Nr,"",!1)]}visitTrigger(h,l){}visitState(h,l){}visitTransition(h,l){}visitAnimateChild(h,l){const _=l.subInstructions.get(l.element);if(_){const C=l.createSubContext(h.options),G=l.currentTimeline.currentTime,ge=this._visitSubInstructions(_,C,C.options);G!=ge&&l.transformIntoNewTimeline(ge)}l.previousNode=h}visitAnimateRef(h,l){const _=l.createSubContext(h.options);_.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],l,_),this.visitReference(h.animation,_),l.transformIntoNewTimeline(_.currentTimeline.currentTime),l.previousNode=h}_applyAnimationRefDelays(h,l,_){for(const C of h){const G=C?.delay;if(G){const ge="number"==typeof G?G:cc(Nl(G,C?.params??{},l.errors));_.delayNextStep(ge)}}}_visitSubInstructions(h,l,_){let G=l.currentTimeline.currentTime;const ge=null!=_.duration?cc(_.duration):null,ke=null!=_.delay?cc(_.delay):null;return 0!==ge&&h.forEach(gt=>{const Tt=l.appendInstructionToTimeline(gt,ge,ke);G=Math.max(G,Tt.duration+Tt.delay)}),G}visitReference(h,l){l.updateOptions(h.options,!0),ia(this,h.animation,l),l.previousNode=h}visitSequence(h,l){const _=l.subContextCount;let C=l;const G=h.options;if(G&&(G.params||G.delay)&&(C=l.createSubContext(G),C.transformIntoNewTimeline(),null!=G.delay)){6==C.previousNode.type&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=xf);const ge=cc(G.delay);C.delayNextStep(ge)}h.steps.length&&(h.steps.forEach(ge=>ia(this,ge,C)),C.currentTimeline.applyStylesToKeyframe(),C.subContextCount>_&&C.transformIntoNewTimeline()),l.previousNode=h}visitGroup(h,l){const _=[];let C=l.currentTimeline.currentTime;const G=h.options&&h.options.delay?cc(h.options.delay):0;h.steps.forEach(ge=>{const ke=l.createSubContext(h.options);G&&ke.delayNextStep(G),ia(this,ge,ke),C=Math.max(C,ke.currentTimeline.currentTime),_.push(ke.currentTimeline)}),_.forEach(ge=>l.currentTimeline.mergeTimelineCollectedStyles(ge)),l.transformIntoNewTimeline(C),l.previousNode=h}_visitTiming(h,l){if(h.dynamic){const _=h.strValue;return bf(l.params?Nl(_,l.params,l.errors):_,l.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,l){const _=l.currentAnimateTimings=this._visitTiming(h.timings,l),C=l.currentTimeline;_.delay&&(l.incrementTime(_.delay),C.snapshotCurrentStyles());const G=h.style;5==G.type?this.visitKeyframes(G,l):(l.incrementTime(_.duration),this.visitStyle(G,l),C.applyStylesToKeyframe()),l.currentAnimateTimings=null,l.previousNode=h}visitStyle(h,l){const _=l.currentTimeline,C=l.currentAnimateTimings;!C&&_.hasCurrentStyleProperties()&&_.forwardFrame();const G=C&&C.easing||h.easing;h.isEmptyStep?_.applyEmptyStep(G):_.setStyles(h.styles,G,l.errors,l.options),l.previousNode=h}visitKeyframes(h,l){const _=l.currentAnimateTimings,C=l.currentTimeline.duration,G=_.duration,ke=l.createSubContext().currentTimeline;ke.easing=_.easing,h.styles.forEach(gt=>{ke.forwardTime((gt.offset||0)*G),ke.setStyles(gt.styles,gt.easing,l.errors,l.options),ke.applyStylesToKeyframe()}),l.currentTimeline.mergeTimelineCollectedStyles(ke),l.transformIntoNewTimeline(C+G),l.previousNode=h}visitQuery(h,l){const _=l.currentTimeline.currentTime,C=h.options||{},G=C.delay?cc(C.delay):0;G&&(6===l.previousNode.type||0==_&&l.currentTimeline.hasCurrentStyleProperties())&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=xf);let ge=_;const ke=l.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!C.optional,l.errors);l.currentQueryTotal=ke.length;let gt=null;ke.forEach((Tt,on)=>{l.currentQueryIndex=on;const Cn=l.createSubContext(h.options,Tt);G&&Cn.delayNextStep(G),Tt===l.element&&(gt=Cn.currentTimeline),ia(this,h.animation,Cn),Cn.currentTimeline.applyStylesToKeyframe(),ge=Math.max(ge,Cn.currentTimeline.currentTime)}),l.currentQueryIndex=0,l.currentQueryTotal=0,l.transformIntoNewTimeline(ge),gt&&(l.currentTimeline.mergeTimelineCollectedStyles(gt),l.currentTimeline.snapshotCurrentStyles()),l.previousNode=h}visitStagger(h,l){const _=l.parentContext,C=l.currentTimeline,G=h.timings,ge=Math.abs(G.duration),ke=ge*(l.currentQueryTotal-1);let gt=ge*l.currentQueryIndex;switch(G.duration<0?"reverse":G.easing){case"reverse":gt=ke-gt;break;case"full":gt=_.currentStaggerTime}const on=l.currentTimeline;gt&&on.delayNextStep(gt);const Cn=on.currentTime;ia(this,h.animation,l),l.previousNode=h,_.currentStaggerTime=C.currentTime-Cn+(C.startTime-_.currentTimeline.startTime)}}const xf={};class hd{constructor(h,l,_,C,G,ge,ke,gt){this._driver=h,this.element=l,this.subInstructions=_,this._enterClassName=C,this._leaveClassName=G,this.errors=ge,this.timelines=ke,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=gt||new Qc(this._driver,l,0),ke.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,l){if(!h)return;const _=h;let C=this.options;null!=_.duration&&(C.duration=cc(_.duration)),null!=_.delay&&(C.delay=cc(_.delay));const G=_.params;if(G){let ge=C.params;ge||(ge=this.options.params={}),Object.keys(G).forEach(ke=>{(!l||!ge.hasOwnProperty(ke))&&(ge[ke]=Nl(G[ke],ge,this.errors))})}}_copyOptions(){const h={};if(this.options){const l=this.options.params;if(l){const _=h.params={};Object.keys(l).forEach(C=>{_[C]=l[C]})}}return h}createSubContext(h=null,l,_){const C=l||this.element,G=new hd(this._driver,C,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(C,_||0));return G.previousNode=this.previousNode,G.currentAnimateTimings=this.currentAnimateTimings,G.options=this._copyOptions(),G.updateOptions(h),G.currentQueryIndex=this.currentQueryIndex,G.currentQueryTotal=this.currentQueryTotal,G.parentContext=this,this.subContextCount++,G}transformIntoNewTimeline(h){return this.previousNode=xf,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,l,_){const C={duration:l??h.duration,delay:this.currentTimeline.currentTime+(_??0)+h.delay,easing:""},G=new Za(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,C,h.stretchStartingKeyframe);return this.timelines.push(G),C}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,l,_,C,G,ge){let ke=[];if(C&&ke.push(this.element),h.length>0){h=(h=h.replace(Kg,"."+this._enterClassName)).replace(Qg,"."+this._leaveClassName);let Tt=this._driver.query(this.element,h,1!=_);0!==_&&(Tt=_<0?Tt.slice(Tt.length+_,Tt.length):Tt.slice(0,_)),ke.push(...Tt)}return!G&&0==ke.length&&ge.push(function vf(E){return new s.vHH(3014,!1)}()),ke}}class Qc{constructor(h,l,_,C){this._driver=h,this.element=l,this.startTime=_,this._elementTimelineStylesLookup=C,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(l),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(l,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const l=1===this._keyframes.size&&this._pendingStyles.size;this.duration||l?(this.forwardTime(this.currentTime+h),l&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,l){return this.applyStylesToKeyframe(),new Qc(this._driver,h,l||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,l){this._localTimelineStyles.set(h,l),this._globalTimelineStyles.set(h,l),this._styleSummary.set(h,{time:this.currentTime,value:l})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[l,_]of this._globalTimelineStyles)this._backFill.set(l,_||$t),this._currentKeyframe.set(l,$t);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,l,_,C){l&&this._previousKeyframe.set("easing",l);const G=C&&C.params||{},ge=function Vp(E,h){const l=new Map;let _;return E.forEach(C=>{if("*"===C){_=_||h.keys();for(let G of _)l.set(G,$t)}else lc(C,l)}),l}(h,this._globalTimelineStyles);for(let[ke,gt]of ge){const Tt=Nl(gt,G,_);this._pendingStyles.set(ke,Tt),this._localTimelineStyles.has(ke)||this._backFill.set(ke,this._globalTimelineStyles.get(ke)??$t),this._updateStyle(ke,Tt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,l)=>{this._currentKeyframe.set(l,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,l)=>{this._currentKeyframe.has(l)||this._currentKeyframe.set(l,h)}))}snapshotCurrentStyles(){for(let[h,l]of this._localTimelineStyles)this._pendingStyles.set(h,l),this._updateStyle(h,l)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let l in this._currentKeyframe)h.push(l);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((l,_)=>{const C=this._styleSummary.get(_);(!C||l.time>C.time)&&this._updateStyle(_,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,l=new Set,_=1===this._keyframes.size&&0===this.duration;let C=[];this._keyframes.forEach((ke,gt)=>{const Tt=lc(ke,new Map,this._backFill);Tt.forEach((on,Cn)=>{"!"===on?h.add(Cn):on===$t&&l.add(Cn)}),_||Tt.set("offset",gt/this.duration),C.push(Tt)});const G=h.size?cu(h.values()):[],ge=l.size?cu(l.values()):[];if(_){const ke=C[0],gt=new Map(ke);ke.set("offset",0),gt.set("offset",1),C=[ke,gt]}return Fp(this.element,C,G,ge,this.duration,this.startTime,this.easing,!1)}}class Za extends Qc{constructor(h,l,_,C,G,ge,ke=!1){super(h,l,ge.delay),this.keyframes=_,this.preStyleProps=C,this.postStyleProps=G,this._stretchStartingKeyframe=ke,this.timings={duration:ge.duration,delay:ge.delay,easing:ge.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:l,duration:_,easing:C}=this.timings;if(this._stretchStartingKeyframe&&l){const G=[],ge=_+l,ke=l/ge,gt=lc(h[0]);gt.set("offset",0),G.push(gt);const Tt=lc(h[0]);Tt.set("offset",kl(ke)),G.push(Tt);const on=h.length-1;for(let Cn=1;Cn<=on;Cn++){let Nr=lc(h[Cn]);const yr=Nr.get("offset");Nr.set("offset",kl((l+yr*_)/ge)),G.push(Nr)}_=ge,l=0,C="",h=G}return Fp(this.element,h,this.preStyleProps,this.postStyleProps,_,l,C,!0)}}function kl(E,h=3){const l=Math.pow(10,h-1);return Math.round(E*l)/l}class fd{}const Jg=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class c_ extends fd{normalizePropertyName(h,l){return qc(h)}normalizeStyleValue(h,l,_,C){let G="";const ge=_.toString().trim();if(Jg.has(l)&&0!==_&&"0"!==_)if("number"==typeof _)G="px";else{const ke=_.match(/^[+-]?[\d\.]+([a-z]*)$/);ke&&0==ke[1].length&&C.push(function Lg(E,h){return new s.vHH(3005,!1)}())}return ge+G}}function Yc(E,h,l,_,C,G,ge,ke,gt,Tt,on,Cn,Nr){return{type:0,element:E,triggerName:h,isRemovalTransition:C,fromState:l,fromStyles:G,toState:_,toStyles:ge,timelines:ke,queriedElements:gt,preStyleProps:Tt,postStyleProps:on,totalTime:Cn,errors:Nr}}const pd={};class Bp{constructor(h,l,_){this._triggerName=h,this.ast=l,this._stateStyles=_}match(h,l,_,C){return function du(E,h,l,_,C){return E.some(G=>G(h,l,_,C))}(this.ast.matchers,h,l,_,C)}buildStyles(h,l,_){let C=this._stateStyles.get("*");return void 0!==h&&(C=this._stateStyles.get(h?.toString())||C),C?C.buildStyles(l,_):new Map}build(h,l,_,C,G,ge,ke,gt,Tt,on){const Cn=[],Nr=this.ast.options&&this.ast.options.params||pd,rr=this.buildStyles(_,ke&&ke.params||pd,Cn),ir=gt&&gt.params||pd,Ri=this.buildStyles(C,ir,Cn),as=new Set,cs=new Map,uo=new Map,$i="void"===C,pc={params:jp(ir,Nr),delay:this.ast.options?.delay},Zi=on?[]:Lp(h,l,this.ast.animation,G,ge,rr,Ri,pc,Tt,Cn);let Cs=0;if(Zi.forEach(Gi=>{Cs=Math.max(Gi.duration+Gi.delay,Cs)}),Cn.length)return Yc(l,this._triggerName,_,C,$i,rr,Ri,[],[],cs,uo,Cs,Cn);Zi.forEach(Gi=>{const Hs=Gi.element,gc=ra(cs,Hs,new Set);Gi.preStyleProps.forEach(oa=>gc.add(oa));const sa=ra(uo,Hs,new Set);Gi.postStyleProps.forEach(oa=>sa.add(oa)),Hs!==l&&as.add(Hs)});const wa=cu(as.values());return Yc(l,this._triggerName,_,C,$i,rr,Ri,Zi,wa,cs,uo,Cs)}}function jp(E,h){const l=Rl(h);for(const _ in E)E.hasOwnProperty(_)&&null!=E[_]&&(l[_]=E[_]);return l}class l_{constructor(h,l,_){this.styles=h,this.defaultParams=l,this.normalizer=_}buildStyles(h,l){const _=new Map,C=Rl(this.defaultParams);return Object.keys(h).forEach(G=>{const ge=h[G];null!==ge&&(C[G]=ge)}),this.styles.styles.forEach(G=>{"string"!=typeof G&&G.forEach((ge,ke)=>{ge&&(ge=Nl(ge,C,l));const gt=this.normalizer.normalizePropertyName(ke,l);ge=this.normalizer.normalizeStyleValue(ke,gt,ge,l),_.set(ke,ge)})}),_}}class d_{constructor(h,l,_){this.name=h,this.ast=l,this._normalizer=_,this.transitionFactories=[],this.states=new Map,l.states.forEach(C=>{this.states.set(C.name,new l_(C.style,C.options&&C.options.params||{},_))}),Eh(this.states,"true","1"),Eh(this.states,"false","0"),l.transitions.forEach(C=>{this.transitionFactories.push(new Bp(h,C,this.states))}),this.fallbackTransition=function Hp(E,h,l){return new Bp(E,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ge,ke)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,l,_,C){return this.transitionFactories.find(ge=>ge.match(h,l,_,C))||null}matchStyles(h,l,_){return this.fallbackTransition.buildStyles(h,l,_)}}function Eh(E,h,l){E.has(h)?E.has(l)||E.set(l,E.get(h)):E.has(l)&&E.set(h,E.get(l))}const zp=new ud;class $p{constructor(h,l,_){this.bodyNode=h,this._driver=l,this._normalizer=_,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,l){const _=[],G=yh(this._driver,l,_,[]);if(_.length)throw function Js(E){return new s.vHH(3503,!1)}();this._animations.set(h,G)}_buildPlayer(h,l,_){const C=h.element,G=rd(this._normalizer,h.keyframes,l,_);return this._driver.animate(C,G,h.duration,h.delay,h.easing,[],!0)}create(h,l,_={}){const C=[],G=this._animations.get(h);let ge;const ke=new Map;if(G?(ge=Lp(this._driver,l,G,dh,sd,new Map,new Map,_,zp,C),ge.forEach(on=>{const Cn=ra(ke,on.element,new Map);on.postStyleProps.forEach(Nr=>Cn.set(Nr,null))})):(C.push(function iu(){return new s.vHH(3300,!1)}()),ge=[]),C.length)throw function yf(E){return new s.vHH(3504,!1)}();ke.forEach((on,Cn)=>{on.forEach((Nr,yr)=>{on.set(yr,this._driver.computeStyle(Cn,yr,$t))})});const Tt=ac(ge.map(on=>{const Cn=ke.get(on.element);return this._buildPlayer(on,new Map,Cn)}));return this._playersById.set(h,Tt),Tt.onDestroy(()=>this.destroy(h)),this.players.push(Tt),Tt}destroy(h){const l=this._getPlayer(h);l.destroy(),this._playersById.delete(h);const _=this.players.indexOf(l);_>=0&&this.players.splice(_,1)}_getPlayer(h){const l=this._playersById.get(h);if(!l)throw function Ef(E){return new s.vHH(3301,!1)}();return l}listen(h,l,_,C){const G=ch(l,"","","");return ah(this._getPlayer(h),_,G,C),()=>{}}command(h,l,_,C){if("register"==_)return void this.register(h,C[0]);if("create"==_)return void this.create(h,l,C[0]||{});const G=this._getPlayer(h);switch(_){case"play":G.play();break;case"pause":G.pause();break;case"reset":G.reset();break;case"restart":G.restart();break;case"finish":G.finish();break;case"init":G.init();break;case"setPosition":G.setPosition(parseFloat(C[0]));break;case"destroy":this.destroy(h)}}}const Xg="ng-animate-queued",Zp="ng-animate-disabled",tm=[],qp={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Wp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ia="__ng_removed";class Ah{get params(){return this.options.params}constructor(h,l=""){this.namespaceId=l;const _=h&&h.hasOwnProperty("value");if(this.value=function Rf(E){return E??null}(_?h.value:h),_){const G=Rl(h);delete G.value,this.options=G}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const l=h.params;if(l){const _=this.options.params;Object.keys(l).forEach(C=>{null==_[C]&&(_[C]=l[C])})}}}const Ih="void",bh=new Ah(Ih);class Or{constructor(h,l,_){this.id=h,this.hostElement=l,this._engine=_,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,Ca(l,this._hostClassName)}listen(h,l,_,C){if(!this._triggers.has(l))throw function ed(E,h){return new s.vHH(3302,!1)}();if(null==_||0==_.length)throw function Zc(E){return new s.vHH(3303,!1)}();if(!function Is(E){return"start"==E||"done"==E}(_))throw function vp(E,h){return new s.vHH(3400,!1)}();const G=ra(this._elementListeners,h,[]),ge={name:l,phase:_,callback:C};G.push(ge);const ke=ra(this._engine.statesByElement,h,new Map);return ke.has(l)||(Ca(h,hh),Ca(h,hh+"-"+l),ke.set(l,bh)),()=>{this._engine.afterFlush(()=>{const gt=G.indexOf(ge);gt>=0&&G.splice(gt,1),this._triggers.has(l)||ke.delete(l)})}}register(h,l){return!this._triggers.has(h)&&(this._triggers.set(h,l),!0)}_getTrigger(h){const l=this._triggers.get(h);if(!l)throw function su(E){return new s.vHH(3401,!1)}();return l}trigger(h,l,_,C=!0){const G=this._getTrigger(l),ge=new Ch(this.id,l,h);let ke=this._engine.statesByElement.get(h);ke||(Ca(h,hh),Ca(h,hh+"-"+l),this._engine.statesByElement.set(h,ke=new Map));let gt=ke.get(l);const Tt=new Ah(_,this.id);if(!(_&&_.hasOwnProperty("value"))&&gt&&Tt.absorbOptions(gt.options),ke.set(l,Tt),gt||(gt=bh),Tt.value!==Ih&&gt.value===Tt.value){if(!function nm(E,h){const l=Object.keys(E),_=Object.keys(h);if(l.length!=_.length)return!1;for(let C=0;C<l.length;C++){const G=l[C];if(!h.hasOwnProperty(G)||E[G]!==h[G])return!1}return!0}(gt.params,Tt.params)){const ir=[],Ri=G.matchStyles(gt.value,gt.params,ir),as=G.matchStyles(Tt.value,Tt.params,ir);ir.length?this._engine.reportError(ir):this._engine.afterFlush(()=>{uc(h,Ri),Ea(h,as)})}return}const Nr=ra(this._engine.playersByElement,h,[]);Nr.forEach(ir=>{ir.namespaceId==this.id&&ir.triggerName==l&&ir.queued&&ir.destroy()});let yr=G.matchTransition(gt.value,Tt.value,h,Tt.params),rr=!1;if(!yr){if(!C)return;yr=G.fallbackTransition,rr=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:l,transition:yr,fromState:gt,toState:Tt,player:ge,isFallbackTransition:rr}),rr||(Ca(h,Xg),ge.onStart(()=>{Fl(h,Xg)})),ge.onDone(()=>{let ir=this.players.indexOf(ge);ir>=0&&this.players.splice(ir,1);const Ri=this._engine.playersByElement.get(h);if(Ri){let as=Ri.indexOf(ge);as>=0&&Ri.splice(as,1)}}),this.players.push(ge),Nr.push(ge),ge}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(l=>l.delete(h)),this._elementListeners.forEach((l,_)=>{this._elementListeners.set(_,l.filter(C=>C.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const l=this._engine.playersByElement.get(h);l&&(l.forEach(_=>_.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,l){const _=this._engine.driver.query(h,xl,!0);_.forEach(C=>{if(C[Ia])return;const G=this._engine.fetchNamespacesByElement(C);G.size?G.forEach(ge=>ge.triggerLeaveAnimation(C,l,!1,!0)):this.clearElementCache(C)}),this._engine.afterFlushAnimationsDone(()=>_.forEach(C=>this.clearElementCache(C)))}triggerLeaveAnimation(h,l,_,C){const G=this._engine.statesByElement.get(h),ge=new Map;if(G){const ke=[];if(G.forEach((gt,Tt)=>{if(ge.set(Tt,gt.value),this._triggers.has(Tt)){const on=this.trigger(h,Tt,Ih,C);on&&ke.push(on)}}),ke.length)return this._engine.markElementAsRemoved(this.id,h,!0,l,ge),_&&ac(ke).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const l=this._elementListeners.get(h),_=this._engine.statesByElement.get(h);if(l&&_){const C=new Set;l.forEach(G=>{const ge=G.name;if(C.has(ge))return;C.add(ge);const gt=this._triggers.get(ge).fallbackTransition,Tt=_.get(ge)||bh,on=new Ah(Ih),Cn=new Ch(this.id,ge,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:ge,transition:gt,fromState:Tt,toState:on,player:Cn,isFallbackTransition:!0})})}}removeNode(h,l){const _=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,l),this.triggerLeaveAnimation(h,l,!0))return;let C=!1;if(_.totalAnimations){const G=_.players.length?_.playersByQueriedElement.get(h):[];if(G&&G.length)C=!0;else{let ge=h;for(;ge=ge.parentNode;)if(_.statesByElement.get(ge)){C=!0;break}}}if(this.prepareLeaveAnimationListeners(h),C)_.markElementAsRemoved(this.id,h,!1,l);else{const G=h[Ia];(!G||G===qp)&&(_.afterFlush(()=>this.clearElementCache(h)),_.destroyInnerAnimations(h),_._onRemovalComplete(h,l))}}insertNode(h,l){Ca(h,this._hostClassName)}drainQueuedTransitions(h){const l=[];return this._queue.forEach(_=>{const C=_.player;if(C.destroyed)return;const G=_.element,ge=this._elementListeners.get(G);ge&&ge.forEach(ke=>{if(ke.name==_.triggerName){const gt=ch(G,_.triggerName,_.fromState.value,_.toState.value);gt._data=h,ah(_.player,ke.phase,gt,ke.callback)}}),C.markedForDestroy?this._engine.afterFlush(()=>{C.destroy()}):l.push(_)}),this._queue=[],l.sort((_,C)=>{const G=_.transition.ast.depCount,ge=C.transition.ast.depCount;return 0==G||0==ge?G-ge:this._engine.driver.containsElement(_.element,C.element)?1:-1})}destroy(h){this.players.forEach(l=>l.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class gd{_onRemovalComplete(h,l){this.onRemovalComplete(h,l)}constructor(h,l,_){this.bodyNode=h,this.driver=l,this._normalizer=_,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(C,G)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(l=>{l.players.forEach(_=>{_.queued&&h.push(_)})}),h}createNamespace(h,l){const _=new Or(h,l,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,l)?this._balanceNamespaceList(_,l):(this.newHostElements.set(l,_),this.collectEnterElement(l)),this._namespaceLookup[h]=_}_balanceNamespaceList(h,l){const _=this._namespaceList,C=this.namespacesByHostElement;if(_.length-1>=0){let ge=!1,ke=this.driver.getParentElement(l);for(;ke;){const gt=C.get(ke);if(gt){const Tt=_.indexOf(gt);_.splice(Tt+1,0,h),ge=!0;break}ke=this.driver.getParentElement(ke)}ge||_.unshift(h)}else _.push(h);return C.set(l,h),h}register(h,l){let _=this._namespaceLookup[h];return _||(_=this.createNamespace(h,l)),_}registerTrigger(h,l,_){let C=this._namespaceLookup[h];C&&C.register(l,_)&&this.totalAnimations++}destroy(h,l){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const _=this._fetchNamespace(h);this.namespacesByHostElement.delete(_.hostElement);const C=this._namespaceList.indexOf(_);C>=0&&this._namespaceList.splice(C,1),_.destroy(l),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const l=new Set,_=this.statesByElement.get(h);if(_)for(let C of _.values())if(C.namespaceId){const G=this._fetchNamespace(C.namespaceId);G&&l.add(G)}return l}trigger(h,l,_,C){if(As(l)){const G=this._fetchNamespace(h);if(G)return G.trigger(l,_,C),!0}return!1}insertNode(h,l,_,C){if(!As(l))return;const G=l[Ia];if(G&&G.setForRemoval){G.setForRemoval=!1,G.setForMove=!0;const ge=this.collectedLeaveElements.indexOf(l);ge>=0&&this.collectedLeaveElements.splice(ge,1)}if(h){const ge=this._fetchNamespace(h);ge&&ge.insertNode(l,_)}C&&this.collectEnterElement(l)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,l){l?this.disabledNodes.has(h)||(this.disabledNodes.add(h),Ca(h,Zp)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Fl(h,Zp))}removeNode(h,l,_){if(As(l)){const C=h?this._fetchNamespace(h):null;C?C.removeNode(l,_):this.markElementAsRemoved(h,l,!1,_);const G=this.namespacesByHostElement.get(l);G&&G.id!==h&&G.removeNode(l,_)}else this._onRemovalComplete(l,_)}markElementAsRemoved(h,l,_,C,G){this.collectedLeaveElements.push(l),l[Ia]={namespaceId:h,setForRemoval:C,hasAnimation:_,removedBeforeQueried:!1,previousTriggersValues:G}}listen(h,l,_,C,G){return As(l)?this._fetchNamespace(h).listen(l,_,C,G):()=>{}}_buildInstruction(h,l,_,C,G){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,_,C,h.fromState.options,h.toState.options,l,G)}destroyInnerAnimations(h){let l=this.driver.query(h,xl,!0);l.forEach(_=>this.destroyActiveAnimationsForElement(_)),0!=this.playersByQueriedElement.size&&(l=this.driver.query(h,$a,!0),l.forEach(_=>this.finishActiveQueriedAnimationOnElement(_)))}destroyActiveAnimationsForElement(h){const l=this.playersByElement.get(h);l&&l.forEach(_=>{_.queued?_.markedForDestroy=!0:_.destroy()})}finishActiveQueriedAnimationOnElement(h){const l=this.playersByQueriedElement.get(h);l&&l.forEach(_=>_.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return ac(this.players).onDone(()=>h());h()})}processLeaveNode(h){const l=h[Ia];if(l&&l.setForRemoval){if(h[Ia]=qp,l.namespaceId){this.destroyInnerAnimations(h);const _=this._fetchNamespace(l.namespaceId);_&&_.clearElementCache(h)}this._onRemovalComplete(h,l.setForRemoval)}h.classList?.contains(Zp)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(_=>{this.markElementAsDisabled(_,!1)})}flush(h=-1){let l=[];if(this.newHostElements.size&&(this.newHostElements.forEach((_,C)=>this._balanceNamespaceList(_,C)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let _=0;_<this.collectedEnterElements.length;_++)Ca(this.collectedEnterElements[_],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const _=[];try{l=this._flushAnimations(_,h)}finally{for(let C=0;C<_.length;C++)_[C]()}}else for(let _=0;_<this.collectedLeaveElements.length;_++)this.processLeaveNode(this.collectedLeaveElements[_]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(_=>_()),this._flushFns=[],this._whenQuietFns.length){const _=this._whenQuietFns;this._whenQuietFns=[],l.length?ac(l).onDone(()=>{_.forEach(C=>C())}):_.forEach(C=>C())}}reportError(h){throw function td(E){return new s.vHH(3402,!1)}()}_flushAnimations(h,l){const _=new ud,C=[],G=new Map,ge=[],ke=new Map,gt=new Map,Tt=new Map,on=new Set;this.disabledNodes.forEach(Fn=>{on.add(Fn);const Qn=this.driver.query(Fn,".ng-animate-queued",!0);for(let ur=0;ur<Qn.length;ur++)on.add(Qn[ur])});const Cn=this.bodyNode,Nr=Array.from(this.statesByElement.keys()),yr=Th(Nr,this.collectedEnterElements),rr=new Map;let ir=0;yr.forEach((Fn,Qn)=>{const ur=dh+ir++;rr.set(Qn,ur),Fn.forEach(Wr=>Ca(Wr,ur))});const Ri=[],as=new Set,cs=new Set;for(let Fn=0;Fn<this.collectedLeaveElements.length;Fn++){const Qn=this.collectedLeaveElements[Fn],ur=Qn[Ia];ur&&ur.setForRemoval&&(Ri.push(Qn),as.add(Qn),ur.hasAnimation?this.driver.query(Qn,".ng-star-inserted",!0).forEach(Wr=>as.add(Wr)):cs.add(Qn))}const uo=new Map,$i=Th(Nr,Array.from(as));$i.forEach((Fn,Qn)=>{const ur=sd+ir++;uo.set(Qn,ur),Fn.forEach(Wr=>Ca(Wr,ur))}),h.push(()=>{yr.forEach((Fn,Qn)=>{const ur=rr.get(Qn);Fn.forEach(Wr=>Fl(Wr,ur))}),$i.forEach((Fn,Qn)=>{const ur=uo.get(Qn);Fn.forEach(Wr=>Fl(Wr,ur))}),Ri.forEach(Fn=>{this.processLeaveNode(Fn)})});const pc=[],Zi=[];for(let Fn=this._namespaceList.length-1;Fn>=0;Fn--)this._namespaceList[Fn].drainQueuedTransitions(l).forEach(ur=>{const Wr=ur.player,zs=ur.element;if(pc.push(Wr),this.collectedEnterElements.length){const Qs=zs[Ia];if(Qs&&Qs.setForMove){if(Qs.previousTriggersValues&&Qs.previousTriggersValues.has(ur.triggerName)){const al=Qs.previousTriggersValues.get(ur.triggerName),$s=this.statesByElement.get(ur.element);if($s&&$s.has(ur.triggerName)){const Yf=$s.get(ur.triggerName);Yf.value=al,$s.set(ur.triggerName,Yf)}}return void Wr.destroy()}}const Wa=!Cn||!this.driver.containsElement(Cn,zs),Lo=uo.get(zs),ol=rr.get(zs),Fi=this._buildInstruction(ur,_,ol,Lo,Wa);if(Fi.errors&&Fi.errors.length)return void Zi.push(Fi);if(Wa)return Wr.onStart(()=>uc(zs,Fi.fromStyles)),Wr.onDestroy(()=>Ea(zs,Fi.toStyles)),void C.push(Wr);if(ur.isFallbackTransition)return Wr.onStart(()=>uc(zs,Fi.fromStyles)),Wr.onDestroy(()=>Ea(zs,Fi.toStyles)),void C.push(Wr);const _c=[];Fi.timelines.forEach(Qs=>{Qs.stretchStartingKeyframe=!0,this.disabledNodes.has(Qs.element)||_c.push(Qs)}),Fi.timelines=_c,_.append(zs,Fi.timelines),ge.push({instruction:Fi,player:Wr,element:zs}),Fi.queriedElements.forEach(Qs=>ra(ke,Qs,[]).push(Wr)),Fi.preStyleProps.forEach((Qs,al)=>{if(Qs.size){let $s=gt.get(al);$s||gt.set(al,$s=new Set),Qs.forEach((Yf,Vm)=>$s.add(Vm))}}),Fi.postStyleProps.forEach((Qs,al)=>{let $s=Tt.get(al);$s||Tt.set(al,$s=new Set),Qs.forEach((Yf,Vm)=>$s.add(Vm))})});if(Zi.length){const Fn=[];Zi.forEach(Qn=>{Fn.push(function nd(E,h){return new s.vHH(3505,!1)}())}),pc.forEach(Qn=>Qn.destroy()),this.reportError(Fn)}const Cs=new Map,wa=new Map;ge.forEach(Fn=>{const Qn=Fn.element;_.has(Qn)&&(wa.set(Qn,Qn),this._beforeAnimationBuild(Fn.player.namespaceId,Fn.instruction,Cs))}),C.forEach(Fn=>{const Qn=Fn.element;this._getPreviousPlayers(Qn,!1,Fn.namespaceId,Fn.triggerName,null).forEach(Wr=>{ra(Cs,Qn,[]).push(Wr),Wr.destroy()})});const Gi=Ri.filter(Fn=>Ll(Fn,gt,Tt)),Hs=new Map;Kp(Hs,this.driver,cs,Tt,$t).forEach(Fn=>{Ll(Fn,gt,Tt)&&Gi.push(Fn)});const sa=new Map;yr.forEach((Fn,Qn)=>{Kp(sa,this.driver,new Set(Fn),gt,"!")}),Gi.forEach(Fn=>{const Qn=Hs.get(Fn),ur=sa.get(Fn);Hs.set(Fn,new Map([...Qn?.entries()??[],...ur?.entries()??[]]))});const oa=[],Di=[],mc={};ge.forEach(Fn=>{const{element:Qn,player:ur,instruction:Wr}=Fn;if(_.has(Qn)){if(on.has(Qn))return ur.onDestroy(()=>Ea(Qn,Wr.toStyles)),ur.disabled=!0,ur.overrideTotalTime(Wr.totalTime),void C.push(ur);let zs=mc;if(wa.size>1){let Lo=Qn;const ol=[];for(;Lo=Lo.parentNode;){const Fi=wa.get(Lo);if(Fi){zs=Fi;break}ol.push(Lo)}ol.forEach(Fi=>wa.set(Fi,zs))}const Wa=this._buildAnimation(ur.namespaceId,Wr,Cs,G,sa,Hs);if(ur.setRealPlayer(Wa),zs===mc)oa.push(ur);else{const Lo=this.playersByElement.get(zs);Lo&&Lo.length&&(ur.parentPlayer=ac(Lo)),C.push(ur)}}else uc(Qn,Wr.fromStyles),ur.onDestroy(()=>Ea(Qn,Wr.toStyles)),Di.push(ur),on.has(Qn)&&C.push(ur)}),Di.forEach(Fn=>{const Qn=G.get(Fn.element);if(Qn&&Qn.length){const ur=ac(Qn);Fn.setRealPlayer(ur)}}),C.forEach(Fn=>{Fn.parentPlayer?Fn.syncPlayerEvents(Fn.parentPlayer):Fn.destroy()});for(let Fn=0;Fn<Ri.length;Fn++){const Qn=Ri[Fn],ur=Qn[Ia];if(Fl(Qn,sd),ur&&ur.hasAnimation)continue;let Wr=[];if(ke.size){let Wa=ke.get(Qn);Wa&&Wa.length&&Wr.push(...Wa);let Lo=this.driver.query(Qn,$a,!0);for(let ol=0;ol<Lo.length;ol++){let Fi=ke.get(Lo[ol]);Fi&&Fi.length&&Wr.push(...Fi)}}const zs=Wr.filter(Wa=>!Wa.destroyed);zs.length?Qp(this,Qn,zs):this.processLeaveNode(Qn)}return Ri.length=0,oa.forEach(Fn=>{this.players.push(Fn),Fn.onDone(()=>{Fn.destroy();const Qn=this.players.indexOf(Fn);this.players.splice(Qn,1)}),Fn.play()}),oa}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,l,_,C,G){let ge=[];if(l){const ke=this.playersByQueriedElement.get(h);ke&&(ge=ke)}else{const ke=this.playersByElement.get(h);if(ke){const gt=!G||G==Ih;ke.forEach(Tt=>{Tt.queued||!gt&&Tt.triggerName!=C||ge.push(Tt)})}}return(_||C)&&(ge=ge.filter(ke=>!(_&&_!=ke.namespaceId||C&&C!=ke.triggerName))),ge}_beforeAnimationBuild(h,l,_){const G=l.element,ge=l.isRemovalTransition?void 0:h,ke=l.isRemovalTransition?void 0:l.triggerName;for(const gt of l.timelines){const Tt=gt.element,on=Tt!==G,Cn=ra(_,Tt,[]);this._getPreviousPlayers(Tt,on,ge,ke,l.toState).forEach(yr=>{const rr=yr.getRealPlayer();rr.beforeDestroy&&rr.beforeDestroy(),yr.destroy(),Cn.push(yr)})}uc(G,l.fromStyles)}_buildAnimation(h,l,_,C,G,ge){const ke=l.triggerName,gt=l.element,Tt=[],on=new Set,Cn=new Set,Nr=l.timelines.map(rr=>{const ir=rr.element;on.add(ir);const Ri=ir[Ia];if(Ri&&Ri.removedBeforeQueried)return new oc(rr.duration,rr.delay);const as=ir!==gt,cs=function Yp(E){const h=[];return wh(E,h),h}((_.get(ir)||tm).map(Cs=>Cs.getRealPlayer())).filter(Cs=>!!Cs.element&&Cs.element===ir),uo=G.get(ir),$i=ge.get(ir),pc=rd(this._normalizer,rr.keyframes,uo,$i),Zi=this._buildPlayer(rr,pc,cs);if(rr.subTimeline&&C&&Cn.add(ir),as){const Cs=new Ch(h,ke,ir);Cs.setRealPlayer(Zi),Tt.push(Cs)}return Zi});Tt.forEach(rr=>{ra(this.playersByQueriedElement,rr.element,[]).push(rr),rr.onDone(()=>function md(E,h,l){let _=E.get(h);if(_){if(_.length){const C=_.indexOf(l);_.splice(C,1)}0==_.length&&E.delete(h)}return _}(this.playersByQueriedElement,rr.element,rr))}),on.forEach(rr=>Ca(rr,fh));const yr=ac(Nr);return yr.onDestroy(()=>{on.forEach(rr=>Fl(rr,fh)),Ea(gt,l.toStyles)}),Cn.forEach(rr=>{ra(C,rr,[]).push(yr)}),yr}_buildPlayer(h,l,_){return l.length>0?this.driver.animate(h.element,l,h.duration,h.delay,h.easing,_):new oc(h.duration,h.delay)}}class Ch{constructor(h,l,_){this.namespaceId=h,this.triggerName=l,this.element=_,this._player=new oc,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((l,_)=>{l.forEach(C=>ah(h,_,void 0,C))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const l=this._player;l.triggerCallback&&h.onStart(()=>l.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,l){ra(this._queuedCallbacks,h,[]).push(l)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const l=this._player;l.triggerCallback&&l.triggerCallback(h)}}function As(E){return E&&1===E.nodeType}function ba(E,h){const l=E.style.display;return E.style.display=h??"none",l}function Kp(E,h,l,_,C){const G=[];l.forEach(gt=>G.push(ba(gt)));const ge=[];_.forEach((gt,Tt)=>{const on=new Map;gt.forEach(Cn=>{const Nr=h.computeStyle(Tt,Cn,C);on.set(Cn,Nr),(!Nr||0==Nr.length)&&(Tt[Ia]=Wp,ge.push(Tt))}),E.set(Tt,on)});let ke=0;return l.forEach(gt=>ba(gt,G[ke++])),ge}function Th(E,h){const l=new Map;if(E.forEach(ke=>l.set(ke,[])),0==h.length)return l;const C=new Set(h),G=new Map;function ge(ke){if(!ke)return 1;let gt=G.get(ke);if(gt)return gt;const Tt=ke.parentNode;return gt=l.has(Tt)?Tt:C.has(Tt)?1:ge(Tt),G.set(ke,gt),gt}return h.forEach(ke=>{const gt=ge(ke);1!==gt&&l.get(gt).push(ke)}),l}function Ca(E,h){E.classList?.add(h)}function Fl(E,h){E.classList?.remove(h)}function Qp(E,h,l){ac(l).onDone(()=>E.processLeaveNode(h))}function wh(E,h){for(let l=0;l<E.length;l++){const _=E[l];_ instanceof Qu?wh(_.players,h):h.push(_)}}function Ll(E,h,l){const _=l.get(E);if(!_)return!1;let C=h.get(E);return C?_.forEach(G=>C.add(G)):h.set(E,_),l.delete(E),!0}class Ti{constructor(h,l,_){this.bodyNode=h,this._driver=l,this._normalizer=_,this._triggerCache={},this.onRemovalComplete=(C,G)=>{},this._transitionEngine=new gd(h,l,_),this._timelineEngine=new $p(h,l,_),this._transitionEngine.onRemovalComplete=(C,G)=>this.onRemovalComplete(C,G)}registerTrigger(h,l,_,C,G){const ge=h+"-"+C;let ke=this._triggerCache[ge];if(!ke){const gt=[],on=yh(this._driver,G,gt,[]);if(gt.length)throw function Hg(E,h){return new s.vHH(3404,!1)}();ke=function u_(E,h,l){return new d_(E,h,l)}(C,on,this._normalizer),this._triggerCache[ge]=ke}this._transitionEngine.registerTrigger(l,C,ke)}register(h,l){this._transitionEngine.register(h,l)}destroy(h,l){this._transitionEngine.destroy(h,l)}onInsert(h,l,_,C){this._transitionEngine.insertNode(h,l,_,C)}onRemove(h,l,_){this._transitionEngine.removeNode(h,l,_)}disableAnimations(h,l){this._transitionEngine.markElementAsDisabled(h,l)}process(h,l,_,C){if("@"==_.charAt(0)){const[G,ge]=yp(_);this._timelineEngine.command(G,l,ge,C)}else this._transitionEngine.trigger(h,l,_,C)}listen(h,l,_,C,G){if("@"==_.charAt(0)){const[ge,ke]=yp(_);return this._timelineEngine.listen(ge,l,ke,G)}return this._transitionEngine.listen(h,l,_,C,G)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let Of=(()=>{class E{static#e=this.initialStylesByElement=new WeakMap;constructor(l,_,C){this._element=l,this._startStyles=_,this._endStyles=C,this._state=0;let G=E.initialStylesByElement.get(l);G||E.initialStylesByElement.set(l,G=new Map),this._initialStyles=G}start(){this._state<1&&(this._startStyles&&Ea(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ea(this._element,this._initialStyles),this._endStyles&&(Ea(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(E.initialStylesByElement.delete(this._element),this._startStyles&&(uc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(uc(this._element,this._endStyles),this._endStyles=null),Ea(this._element,this._initialStyles),this._state=3)}}return E})();function zi(E){let h=null;return E.forEach((l,_)=>{(function Nf(E){return"display"===E||"position"===E})(_)&&(h=h||new Map,h.set(_,l))}),h}class Dh{constructor(h,l,_,C){this.element=h,this.keyframes=l,this.options=_,this._specialStyles=C,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=_.duration,this._delay=_.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map;const l=()=>this._onFinish();this.domPlayer.addEventListener("finish",l),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",l)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const l=[];return h.forEach(_=>{l.push(Object.fromEntries(_))}),l}_triggerWebAnimation(h,l,_){return h.animate(this._convertKeyframesToObject(l),_)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((_,C)=>{"offset"!==C&&h.set(C,this._finished?_:wf(this.element,C))}),this.currentSnapshot=h}triggerCallback(h){const l="start"===h?this._onStartFns:this._onDoneFns;l.forEach(_=>_()),l.length=0}}class dc{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,l){return!1}containsElement(h,l){return Ip(h,l)}getParentElement(h){return id(h)}query(h,l,_){return bp(h,l,_)}computeStyle(h,l,_){return window.getComputedStyle(h)[l]}animate(h,l,_,C,G,ge=[]){const gt={duration:_,delay:C,fill:0==C?"both":"forwards"};G&&(gt.easing=G);const Tt=new Map,on=ge.filter(yr=>yr instanceof Dh);(function wp(E,h){return 0===E||0===h})(_,C)&&on.forEach(yr=>{yr.currentSnapshot.forEach((rr,ir)=>Tt.set(ir,rr))});let Cn=function Tp(E){return E.length?E[0]instanceof Map?E:E.map(h=>Cf(h)):[]}(l).map(yr=>lc(yr));Cn=function Dp(E,h,l){if(l.size&&h.length){let _=h[0],C=[];if(l.forEach((G,ge)=>{_.has(ge)||C.push(ge),_.set(ge,G)}),C.length)for(let G=1;G<h.length;G++){let ge=h[G];C.forEach(ke=>ge.set(ke,wf(E,ke)))}}return h}(h,Cn,Tt);const Nr=function rm(E,h){let l=null,_=null;return Array.isArray(h)&&h.length?(l=zi(h[0]),h.length>1&&(_=zi(h[h.length-1]))):h instanceof Map&&(l=zi(h)),l||_?new Of(E,l,_):null}(h,Cn);return new Dh(h,Cn,gt,Nr)}}let fu=(()=>{class E extends rt{constructor(l,_){super(),this._nextAnimationId=0,this._renderer=l.createRenderer(_.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(l){const _=this._nextAnimationId.toString();this._nextAnimationId++;const C=Array.isArray(l)?oo(l):l;return im(this._renderer,null,_,"register",[C]),new Jp(_,this._renderer)}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(s.FYo),s.LFG(B.K0))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac})}return E})();class Jp extends Pt{constructor(h,l){super(),this._id=h,this._renderer=l}create(h,l){return new f_(this._id,h,l||{},this._renderer)}}class f_{constructor(h,l,_,C){this.id=h,this.element=l,this._renderer=C,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",_)}_listen(h,l){return this._renderer.listen(this.element,`@@${this.id}:${h}`,l)}_command(h,...l){return im(this._renderer,this.element,this.id,h,l)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function im(E,h,l,_,C){return E.setProperty(h,`@@${l}:${_}`,C)}const _d="@.disabled";let p_=(()=>{class E{constructor(l,_,C){this.delegate=l,this.engine=_,this._zone=C,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,_.onRemovalComplete=(G,ge)=>{const ke=ge?.parentNode(G);ke&&ge.removeChild(ke,G)}}createRenderer(l,_){const G=this.delegate.createRenderer(l,_);if(!(l&&_&&_.data&&_.data.animation)){let on=this._rendererCache.get(G);return on||(on=new sm("",G,this.engine,()=>this._rendererCache.delete(G)),this._rendererCache.set(G,on)),on}const ge=_.id,ke=_.id+"-"+this._currentId;this._currentId++,this.engine.register(ke,l);const gt=on=>{Array.isArray(on)?on.forEach(gt):this.engine.registerTrigger(ge,ke,l,on.name,on)};return _.data.animation.forEach(gt),new om(this,ke,G,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(l,_,C){l>=0&&l<this._microtaskId?this._zone.run(()=>_(C)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(G=>{const[ge,ke]=G;ge(ke)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([_,C]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(s.FYo),s.LFG(Ti),s.LFG(s.R0b))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac})}return E})();class sm{constructor(h,l,_,C){this.namespaceId=h,this.delegate=l,this.engine=_,this._onDestroy=C}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,l){return this.delegate.createElement(h,l)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,l){this.delegate.appendChild(h,l),this.engine.onInsert(this.namespaceId,l,h,!1)}insertBefore(h,l,_,C=!0){this.delegate.insertBefore(h,l,_),this.engine.onInsert(this.namespaceId,l,h,C)}removeChild(h,l,_){this.engine.onRemove(this.namespaceId,l,this.delegate)}selectRootElement(h,l){return this.delegate.selectRootElement(h,l)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,l,_,C){this.delegate.setAttribute(h,l,_,C)}removeAttribute(h,l,_){this.delegate.removeAttribute(h,l,_)}addClass(h,l){this.delegate.addClass(h,l)}removeClass(h,l){this.delegate.removeClass(h,l)}setStyle(h,l,_,C){this.delegate.setStyle(h,l,_,C)}removeStyle(h,l,_){this.delegate.removeStyle(h,l,_)}setProperty(h,l,_){"@"==l.charAt(0)&&l==_d?this.disableAnimations(h,!!_):this.delegate.setProperty(h,l,_)}setValue(h,l){this.delegate.setValue(h,l)}listen(h,l,_){return this.delegate.listen(h,l,_)}disableAnimations(h,l){this.engine.disableAnimations(h,l)}}class om extends sm{constructor(h,l,_,C,G){super(l,_,C,G),this.factory=h,this.namespaceId=l}setProperty(h,l,_){"@"==l.charAt(0)?"."==l.charAt(1)&&l==_d?this.disableAnimations(h,_=void 0===_||!!_):this.engine.process(this.namespaceId,h,l.slice(1),_):this.delegate.setProperty(h,l,_)}listen(h,l,_){if("@"==l.charAt(0)){const C=function pu(E){switch(E){case"body":return document.body;case"document":return document;case"window":return window;default:return E}}(h);let G=l.slice(1),ge="";return"@"!=G.charAt(0)&&([G,ge]=function am(E){const h=E.indexOf(".");return[E.substring(0,h),E.slice(h+1)]}(G)),this.engine.listen(this.namespaceId,C,G,ge,ke=>{this.factory.scheduleListenerCallback(ke._data||-1,_,ke)})}return this.delegate.listen(h,l,_)}}const gu=[{provide:rt,useClass:fu},{provide:fd,useFactory:function Jc(){return new c_}},{provide:Ti,useClass:(()=>{class E extends Ti{constructor(l,_,C,G){super(l.body,_,C)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(B.K0),s.LFG(Cp),s.LFG(fd),s.LFG(s.z2F))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac})}return E})()},{provide:s.FYo,useFactory:function cm(E,h,l){return new p_(E,h,l)},deps:[f.se,Ti,s.R0b]}],vd=[{provide:Cp,useFactory:()=>new dc},{provide:s.QbO,useValue:"BrowserAnimations"},...gu],lm=[{provide:Cp,useClass:Zg},{provide:s.QbO,useValue:"NoopAnimations"},...gu];let g_=(()=>{class E{static withConfig(l){return{ngModule:E,providers:l.disableAnimations?lm:vd}}static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E});static#n=this.\u0275inj=s.cJS({providers:vd,imports:[f.b2]})}return E})();const um_firebase={apiKey:"AIzaSyBfMHRYkwC16Pt-IuqcVJOYjkrRgOlEVH8",authDomain:"romaniinseattle.firebaseapp.com",projectId:"romaniinseattle",storageBucket:"romaniinseattle.appspot.com",messagingSenderId:"548714995927",appId:"1:548714995927:web:70a2631d9f5d8d2f8fd092"};var ao=k(3182),fs=k(1920);class vo{constructor(h){return h}}class Ed{constructor(){return(0,ao.C6)()}}const Ul=new s.OlP("angularfire2._apps"),Bl={provide:vo,useFactory:function mu(E){return E&&1===E.length?E[0]:new vo((0,ao.Mq)())},deps:[[new s.FiY,Ul]]},Mh={provide:Ed,deps:[[new s.FiY,Ul]]};function Ph(E){return(h,l)=>{const _=h.runOutsideAngular(()=>E(l));return new vo(_)}}let xh=(()=>{class E{constructor(l){(0,ao.KN)("angularfire",fs.q4.full,"core"),(0,ao.KN)("angularfire",fs.q4.full,"app"),(0,ao.KN)("angular",s.q4F.full,l.toString())}static \u0275fac=function(_){return new(_||E)(s.LFG(s.Lbi))};static \u0275mod=s.oAB({type:E});static \u0275inj=s.cJS({providers:[Bl,Mh]})}return E})();function Ad(E,...h){return{ngModule:xh,providers:[{provide:Ul,useFactory:Ph(E),multi:!0,deps:[s.R0b,s.zs3,fs.HU,...h]}]}}const Id=(0,fs.u3)(ao.ZF,!0);k(35),k(534),k(9058),k(7879),k(4537);class tg{constructor(){return(0,fs.vb)("auth")}}var nl=k(1043);class rl{constructor(h){return h}}const il="firestore",Uf=new s.OlP("angularfire2.firestore-instances");function Vh(E){return(h,l)=>{const _=h.runOutsideAngular(()=>E(l));return new rl(_)}}const Bf={provide:class P_{constructor(){return(0,fs.vb)(il)}},deps:[[new s.FiY,Uf]]},Cm={provide:rl,useFactory:function ag(E,h){const l=(0,fs.JM)(il,E,h);return l&&new rl(l)},deps:[[new s.FiY,Uf],vo]};let R_=(()=>{class E{constructor(){(0,ao.KN)("angularfire",fs.q4.full,"fst")}static \u0275fac=function(_){return new(_||E)};static \u0275mod=s.oAB({type:E});static \u0275inj=s.cJS({providers:[Cm,Bf]})}return E})();function Tv(E,...h){return{ngModule:R_,providers:[{provide:Uf,useFactory:Vh(E),multi:!0,deps:[s.R0b,s.zs3,fs.HU,Ed,[new s.FiY,tg],[new s.FiY,fs.Rf],...h]}]}}const Bh=(0,fs.u3)(nl.ad,!0);var xm=k(7217),Rm=k(7104),gg=k(243),zh=k(7213),mg=k(8153);class Gf{constructor(h){return h}}const Au="storage",Hl=new s.OlP("angularfire2.storage-instances");function Om(E){return(h,l)=>{const _=h.runOutsideAngular(()=>E(l));return new Gf(_)}}const wd={provide:class $h{constructor(){return(0,fs.vb)(Au)}},deps:[[new s.FiY,Hl]]},qf={provide:Gf,useFactory:function V_(E,h){const l=(0,fs.JM)(Au,E,h);return l&&new Gf(l)},deps:[[new s.FiY,Hl],vo]};let _g=(()=>{class E{constructor(){(0,ao.KN)("angularfire",fs.q4.full,"gcs")}static \u0275fac=function(_){return new(_||E)};static \u0275mod=s.oAB({type:E});static \u0275inj=s.cJS({providers:[qf,wd]})}return E})();function Iu(E,...h){return{ngModule:_g,providers:[{provide:Hl,useFactory:Om(E),multi:!0,deps:[s.R0b,s.zs3,fs.HU,Ed,[new s.FiY,tg],[new s.FiY,fs.Rf],...h]}]}}const sl=(0,fs.u3)(mg.cF,!0);var Dd=k(5842);let fc=(()=>{class E{constructor(l){this.injector=l}handleError(l){this.injector.get(Dd.I).logError(l)}static#e=this.\u0275fac=function(_){return new(_||E)(s.LFG(s.zs3))};static#t=this.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac})}return E})(),Lm=(()=>{class E{static#e=this.\u0275fac=function(_){return new(_||E)};static#t=this.\u0275mod=s.oAB({type:E,bootstrap:[me]});static#n=this.\u0275inj=s.cJS({providers:[{provide:s.qLn,useClass:fc},Dd.I],imports:[f.b2,pa.JF,Zr.Bz,wl,g_,Mt,Gl,Ua,Rm.yb,gg.TE,zh.ww,xm.hO.initializeApp(um_firebase),Ad(()=>Id(um_firebase)),Tv(()=>Bh()),Iu(()=>sl()),Xt.UX,Xt.u5,Zr.Bz]})}return E})();f.q6().bootstrapModule(Lm).catch(E=>console.error(E))},8963:an=>{an.exports=function s(B,Se,_e){function Ae(ve,$){if(!Se[ve]){if(!B[ve]){if(de)return de(ve,!0);var oe=new Error("Cannot find module '"+ve+"'");throw oe.code="MODULE_NOT_FOUND",oe}var be=Se[ve]={exports:{}};B[ve][0].call(be.exports,function(ye){return Ae(B[ve][1][ye]||ye)},be,be.exports,s,B,Se,_e)}return Se[ve].exports}for(var de=void 0,ae=0;ae<_e.length;ae++)Ae(_e[ae]);return Ae}({1:[function(s,B,Se){"use strict";var _e=s("multimath"),Ae=s("./mm_unsharp_mask"),de=s("./mm_resize");function ae(ve){var $=ve||[],z={js:$.indexOf("js")>=0,wasm:$.indexOf("wasm")>=0};_e.call(this,z),this.features={js:z.js,wasm:z.wasm&&this.has_wasm()},this.use(Ae),this.use(de)}(ae.prototype=Object.create(_e.prototype)).constructor=ae,ae.prototype.resizeAndUnsharp=function($,z){var oe=this.resize($,z);return $.unsharpAmount&&this.unsharp_mask(oe,$.toWidth,$.toHeight,$.unsharpAmount,$.unsharpRadius,$.unsharpThreshold),oe},B.exports=ae},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(s,B,Se){"use strict";function _e(z){return z<0?0:z>255?255:z}function Ae(z){return z>=0?z:0}B.exports={convolveHor:function de(z,oe,be,ye,De,Re){var Ye,We,_t,Fe,Oe,tt,Ze,Ge,dt,bt,Ee,Nt=0,Vt=0;for(dt=0;dt<ye;dt++){for(Oe=0,bt=0;bt<De;bt++){for(tt=Re[Oe++],Ze=Re[Oe++],Ge=Nt+4*tt|0,Ye=We=_t=Fe=0;Ze>0;Ze--)Fe=Fe+(Ee=Re[Oe++])*z[Ge+3]|0,_t=_t+Ee*z[Ge+2]|0,We=We+Ee*z[Ge+1]|0,Ye=Ye+Ee*z[Ge]|0,Ge=Ge+4|0;oe[Vt+3]=Ae(Fe>>7),oe[Vt+2]=Ae(_t>>7),oe[Vt+1]=Ae(We>>7),oe[Vt]=Ae(Ye>>7),Vt=Vt+4*ye|0}Vt=4*(dt+1)|0,Nt=(dt+1)*be*4|0}},convolveVert:function ae(z,oe,be,ye,De,Re){var Ye,We,_t,Fe,Oe,tt,Ze,Ge,dt,bt,Ee,Nt=0,Vt=0;for(dt=0;dt<ye;dt++){for(Oe=0,bt=0;bt<De;bt++){for(tt=Re[Oe++],Ze=Re[Oe++],Ge=Nt+4*tt|0,Ye=We=_t=Fe=0;Ze>0;Ze--)Fe=Fe+(Ee=Re[Oe++])*z[Ge+3]|0,_t=_t+Ee*z[Ge+2]|0,We=We+Ee*z[Ge+1]|0,Ye=Ye+Ee*z[Ge]|0,Ge=Ge+4|0;Ye>>=7,We>>=7,_t>>=7,oe[Vt+3]=_e(8192+(Fe>>=7)>>14),oe[Vt+2]=_e(_t+8192>>14),oe[Vt+1]=_e(We+8192>>14),oe[Vt]=_e(Ye+8192>>14),Vt=Vt+4*ye|0}Vt=4*(dt+1)|0,Nt=(dt+1)*be*4|0}},convolveHorWithPre:function ve(z,oe,be,ye,De,Re){var Ye,We,_t,Fe,Oe,tt,Ze,Ge,dt,bt,Ee,Nt,Vt=0,Dn=0;for(bt=0;bt<ye;bt++){for(tt=0,Ee=0;Ee<De;Ee++){for(Ze=Re[tt++],Ge=Re[tt++],dt=Vt+4*Ze|0,Ye=We=_t=Fe=0;Ge>0;Ge--)Fe=Fe+(Nt=Re[tt++])*(Oe=z[dt+3])|0,_t=_t+Nt*z[dt+2]*Oe|0,We=We+Nt*z[dt+1]*Oe|0,Ye=Ye+Nt*z[dt]*Oe|0,dt=dt+4|0;_t=_t/255|0,We=We/255|0,Ye=Ye/255|0,oe[Dn+3]=Ae(Fe>>7),oe[Dn+2]=Ae(_t>>7),oe[Dn+1]=Ae(We>>7),oe[Dn]=Ae(Ye>>7),Dn=Dn+4*ye|0}Dn=4*(bt+1)|0,Vt=(bt+1)*be*4|0}},convolveVertWithPre:function $(z,oe,be,ye,De,Re){var Ye,We,_t,Fe,Oe,tt,Ze,Ge,dt,bt,Ee,Nt=0,Vt=0;for(dt=0;dt<ye;dt++){for(Oe=0,bt=0;bt<De;bt++){for(tt=Re[Oe++],Ze=Re[Oe++],Ge=Nt+4*tt|0,Ye=We=_t=Fe=0;Ze>0;Ze--)Fe=Fe+(Ee=Re[Oe++])*z[Ge+3]|0,_t=_t+Ee*z[Ge+2]|0,We=We+Ee*z[Ge+1]|0,Ye=Ye+Ee*z[Ge]|0,Ge=Ge+4|0;Ye>>=7,We>>=7,_t>>=7,(Fe=_e(8192+(Fe>>=7)>>14))>0&&(Ye=255*Ye/Fe|0,We=255*We/Fe|0,_t=255*_t/Fe|0),oe[Vt+3]=Fe,oe[Vt+2]=_e(_t+8192>>14),oe[Vt+1]=_e(We+8192>>14),oe[Vt]=_e(Ye+8192>>14),Vt=Vt+4*ye|0}Vt=4*(dt+1)|0,Nt=(dt+1)*be*4|0}}}},{}],3:[function(s,B,Se){"use strict";B.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(s,B,Se){"use strict";B.exports={name:"resize",fn:s("./resize"),wasm_fn:s("./resize_wasm"),wasm_src:s("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(s,B,Se){"use strict";var _e=s("./resize_filter_gen"),Ae=s("./convolve"),de=Ae.convolveHor,ae=Ae.convolveVert,ve=Ae.convolveHorWithPre,$=Ae.convolveVertWithPre;B.exports=function(ye){var De=ye.src,Re=ye.width,Ye=ye.height,We=ye.toWidth,_t=ye.toHeight,Fe=ye.scaleX||ye.toWidth/ye.width,Oe=ye.scaleY||ye.toHeight/ye.height,tt=ye.offsetX||0,Ze=ye.offsetY||0,Ge=ye.dest||new Uint8Array(We*_t*4),dt=typeof ye.filter>"u"?"mks2013":ye.filter,bt=_e(dt,Re,We,Fe,tt),Ee=_e(dt,Ye,_t,Oe,Ze),Nt=new Uint16Array(We*Ye*4);return function z(be,ye,De){for(var Re=3,Ye=ye*De*4|0;Re<Ye;){if(255!==be[Re])return!0;Re=Re+4|0}return!1}(De,Re,Ye)?(ve(De,Nt,Re,Ye,We,bt),$(Nt,Ge,Ye,We,_t,Ee)):(de(De,Nt,Re,Ye,We,bt),ae(Nt,Ge,Ye,We,_t,Ee),function oe(be,ye,De){for(var Re=3,Ye=ye*De*4|0;Re<Ye;)be[Re]=255,Re=Re+4|0}(Ge,We,_t)),Ge}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(s,B,Se){"use strict";var _e=s("./resize_filter_info");function de(ae){return Math.round(16383*ae)}B.exports=function(ve,$,z,oe,be){var We,_t,Fe,Oe,tt,Ze,Ge,dt,bt,Ee,Nt,Vt,Dn,wt,Ke,Le,ye=_e.filter[ve].fn,De=1/oe,Re=Math.min(1,oe),Ye=_e.filter[ve].win/Re,we=Math.floor(2*(Ye+1)),te=new Int16Array((we+2)*z),Ie=0,Pe=!te.subarray||!te.set;for(We=0;We<z;We++){for(_t=(We+.5)*De+be,Fe=Math.max(0,Math.floor(_t-Ye)),tt=(Oe=Math.min($-1,Math.ceil(_t+Ye)))-Fe+1,Ze=new Float32Array(tt),Ge=new Int16Array(tt),dt=0,bt=Fe,Ee=0;bt<=Oe;bt++,Ee++)dt+=Nt=ye((bt+.5-_t)*Re),Ze[Ee]=Nt;for(Vt=0,Ee=0;Ee<Ze.length;Ee++)Vt+=Dn=Ze[Ee]/dt,Ge[Ee]=de(Dn);for(Ge[z>>1]+=de(1-Vt),wt=0;wt<Ge.length&&0===Ge[wt];)wt++;if(wt<Ge.length){for(Ke=Ge.length-1;Ke>0&&0===Ge[Ke];)Ke--;if(Le=Ke-wt+1,te[Ie++]=Fe+wt,te[Ie++]=Le,Pe)for(Ee=wt;Ee<=Ke;Ee++)te[Ie++]=Ge[Ee];else te.set(Ge.subarray(wt,Ke+1),Ie),Ie+=Le}else te[Ie++]=0,te[Ie++]=0}return te}},{"./resize_filter_info":7}],7:[function(s,B,Se){"use strict";B.exports={filter:{box:{win:.5,fn:function(de){return de<0&&(de=-de),de<.5?1:0}},hamming:{win:1,fn:function(de){if(de<0&&(de=-de),de>=1)return 0;if(de<1.1920929e-7)return 1;var ae=de*Math.PI;return Math.sin(ae)/ae*(.54+.46*Math.cos(ae/1))}},lanczos2:{win:2,fn:function(de){if(de<0&&(de=-de),de>=2)return 0;if(de<1.1920929e-7)return 1;var ae=de*Math.PI;return Math.sin(ae)/ae*Math.sin(ae/2)/(ae/2)}},lanczos3:{win:3,fn:function(de){if(de<0&&(de=-de),de>=3)return 0;if(de<1.1920929e-7)return 1;var ae=de*Math.PI;return Math.sin(ae)/ae*Math.sin(ae/3)/(ae/3)}},mks2013:{win:2.5,fn:function(de){return de<0&&(de=-de),de>=2.5?0:de>=1.5?-.125*(de-2.5)*(de-2.5):de>=.5?.25*(4*de*de-11*de+7):1.0625-1.75*de*de}}},f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(s,B,Se){"use strict";var _e=s("./resize_filter_gen");var ve=!0;try{ve=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch{}function $(z,oe,be){if(ve)oe.set(function ae(z){return new Uint8Array(z.buffer,0,z.byteLength)}(z),be);else for(var ye=be,De=0;De<z.length;De++){var Re=z[De];oe[ye++]=255&Re,oe[ye++]=Re>>8&255}}B.exports=function(oe){var be=oe.src,ye=oe.width,De=oe.height,Re=oe.toWidth,Ye=oe.toHeight,We=oe.scaleX||oe.toWidth/oe.width,_t=oe.scaleY||oe.toHeight/oe.height,Fe=oe.offsetX||0,Oe=oe.offsetY||0,tt=oe.dest||new Uint8Array(Re*Ye*4),Ze=typeof oe.filter>"u"?"mks2013":oe.filter,Ge=_e(Ze,ye,Re,We,Fe),dt=_e(Ze,De,Ye,_t,Oe),Ee=Math.max(be.byteLength,tt.byteLength),Nt=this.__align(0+Ee),Dn=this.__align(Nt+De*Re*4*2),wt=this.__align(Dn+Ge.byteLength),ut=this.__instance("resize",wt+dt.byteLength),Le=new Uint8Array(this.__memory.buffer),we=new Uint32Array(this.__memory.buffer),te=new Uint32Array(be.buffer);we.set(te),$(Ge,Le,Dn),$(dt,Le,wt);var Ie=ut.exports.convolveHV||ut.exports._convolveHV;return function Ae(z,oe,be){for(var ye=3,De=oe*be*4|0;ye<De;){if(255!==z[ye])return!0;ye=ye+4|0}return!1}(be,ye,De)?Ie(Dn,wt,Nt,ye,De,Re,Ye,1):(Ie(Dn,wt,Nt,ye,De,Re,Ye,0),function de(z,oe,be){for(var ye=3,De=oe*be*4|0;ye<De;)z[ye]=255,ye=ye+4|0}(tt,Re,Ye)),new Uint32Array(tt.buffer).set(new Uint32Array(this.__memory.buffer,0,Ye*Re)),tt}},{"./resize_filter_gen":6}],9:[function(s,B,Se){"use strict";B.exports={name:"unsharp_mask",fn:s("./unsharp_mask"),wasm_fn:s("./unsharp_mask_wasm"),wasm_src:s("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(s,B,Se){"use strict";var _e=s("glur/mono16");B.exports=function(ae,ve,$,z,oe,be){var ye,De,Re,Ye,We;if(!(0===z||oe<.5)){oe>2&&(oe=2);var _t=function Ae(de,ae,ve){for(var oe,be,ye,$=ae*ve,z=new Uint16Array($),Re=0;Re<$;Re++)ye=de[4*Re+2],z[Re]=((oe=de[4*Re])>=(be=de[4*Re+1])&&oe>=ye?oe:be>=ye&&be>=oe?be:ye)<<8;return z}(ae,ve,$),Fe=new Uint16Array(_t);_e(Fe,ve,$,oe);for(var Oe=z/100*4096+.5|0,tt=be<<8,Ze=ve*$,Ge=0;Ge<Ze;Ge++)Ye=(ye=_t[Ge])-Fe[Ge],Math.abs(Ye)>=tt&&(ae[We=4*Ge]=ae[We]*(Re=((De=(De=(De=ye+(Oe*Ye+2048>>12))>65280?65280:De)<0?0:De)<<12)/(ye=0!==ye?ye:1)|0)+2048>>12,ae[We+1]=ae[We+1]*Re+2048>>12,ae[We+2]=ae[We+2]*Re+2048>>12)}}},{"glur/mono16":18}],11:[function(s,B,Se){"use strict";B.exports=function(Ae,de,ae,ve,$,z){if(!(0===ve||$<.5)){$>2&&($=2);var oe=de*ae,be=4*oe,ye=2*oe,De=2*oe,Re=4*Math.max(de,ae),_t=be,Fe=_t+ye,Oe=Fe+De,tt=Oe+De,Ze=tt+Re,Ge=this.__instance("unsharp_mask",be+ye+2*De+Re+32,{exp:Math.exp}),dt=new Uint32Array(Ae.buffer);new Uint32Array(this.__memory.buffer).set(dt);var Ee=Ge.exports.hsv_v16||Ge.exports._hsv_v16;Ee(0,_t,de,ae),(Ee=Ge.exports.blurMono16||Ge.exports._blurMono16)(_t,Fe,Oe,tt,Ze,de,ae,$),(Ee=Ge.exports.unsharp||Ge.exports._unsharp)(0,0,_t,Fe,de,ae,ve,z),dt.set(new Uint32Array(this.__memory.buffer,0,oe))}}},{}],12:[function(s,B,Se){"use strict";B.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(s,B,Se){"use strict";function Ae(de,ae){this.create=de,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=ae||2e3}Ae.prototype.acquire=function(){var ae,de=this;return 0!==this.available.length?ae=this.available.pop():((ae=this.create()).id=this.lastId++,ae.release=function(){return de.release(ae)}),this.acquired[ae.id]=ae,ae},Ae.prototype.release=function(de){var ae=this;delete this.acquired[de.id],de.lastUsed=Date.now(),this.available.push(de),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return ae.gc()},100))},Ae.prototype.gc=function(){var de=this,ae=Date.now();this.available=this.available.filter(function(ve){return!(ae-ve.lastUsed>de.idle&&(ve.destroy(),1))}),this.timeoutId=0!==this.available.length?setTimeout(function(){return de.gc()},100):0},B.exports=Ae},{}],14:[function(s,B,Se){"use strict";B.exports=function(de,ae,ve,$,z,oe){var De=(2*oe+2+1)/z;if(De>.5)return[[ve,$]];var Re=Math.ceil(Math.log(Math.min(ve/de,$/ae))/Math.log(De));if(Re<=1)return[[ve,$]];for(var Ye=[],We=0;We<Re;We++){var _t=Math.round(Math.pow(Math.pow(de,Re-We-1)*Math.pow(ve,We+1),1/Re)),Fe=Math.round(Math.pow(Math.pow(ae,Re-We-1)*Math.pow($,We+1),1/Re));Ye.push([_t,Fe])}return Ye}},{}],15:[function(s,B,Se){"use strict";function Ae(ae){var ve=Math.round(ae);return Math.abs(ae-ve)<1e-5?ve:Math.floor(ae)}function de(ae){var ve=Math.round(ae);return Math.abs(ae-ve)<1e-5?ve:Math.ceil(ae)}B.exports=function(ve){var $=ve.toWidth/ve.width,z=ve.toHeight/ve.height,oe=Ae(ve.srcTileSize*$)-2*ve.destTileBorder,be=Ae(ve.srcTileSize*z)-2*ve.destTileBorder;if(oe<1||be<1)throw new Error("Internal error in pica: target tile width/height is too small.");var ye,De,Re,Ye,We,_t,Oe,Fe=[];for(Ye=0;Ye<ve.toHeight;Ye+=be)for(Re=0;Re<ve.toWidth;Re+=oe)(ye=Re-ve.destTileBorder)<0&&(ye=0),ye+(We=Re+oe+ve.destTileBorder-ye)>=ve.toWidth&&(We=ve.toWidth-ye),(De=Ye-ve.destTileBorder)<0&&(De=0),De+(_t=Ye+be+ve.destTileBorder-De)>=ve.toHeight&&(_t=ve.toHeight-De),Oe={toX:ye,toY:De,toWidth:We,toHeight:_t,toInnerX:Re,toInnerY:Ye,toInnerWidth:oe,toInnerHeight:be,offsetX:ye/$-Ae(ye/$),offsetY:De/z-Ae(De/z),scaleX:$,scaleY:z,x:Ae(ye/$),y:Ae(De/z),width:de(We/$),height:de(_t/z)},Fe.push(Oe);return Fe}},{}],16:[function(s,B,Se){"use strict";function _e(Ae){return Object.prototype.toString.call(Ae)}B.exports.isCanvas=function(de){var ae=_e(de);return"[object HTMLCanvasElement]"===ae||"[object OffscreenCanvas]"===ae||"[object Canvas]"===ae},B.exports.isImage=function(de){return"[object HTMLImageElement]"===_e(de)},B.exports.isImageBitmap=function(de){return"[object ImageBitmap]"===_e(de)},B.exports.limiter=function(de){var ae=0,ve=[];function $(){ae<de&&ve.length&&(ae++,ve.shift()())}return function(oe){return new Promise(function(be,ye){ve.push(function(){oe().then(function(De){be(De),ae--,$()},function(De){ye(De),ae--,$()})}),$()})}},B.exports.cib_quality_name=function(de){switch(de){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},B.exports.cib_support=function(de){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var ae=de(100,100);return createImageBitmap(ae,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(ve){var $=10===ve.width;return ve.close(),ae=null,$})}).catch(function(){return!1})},B.exports.worker_offscreen_canvas_support=function(){return new Promise(function(de,ae){if(typeof OffscreenCanvas>"u")de(!1);else{var $=btoa("(".concat(function ve(oe){typeof createImageBitmap>"u"?oe.postMessage(!1):Promise.resolve().then(function(){var be=new OffscreenCanvas(10,10);return be.getContext("2d").rect(0,0,1,1),createImageBitmap(be,0,0,1,1)}).then(function(){return oe.postMessage(!0)},function(){return oe.postMessage(!1)})}.toString(),")(self);")),z=new Worker("data:text/javascript;base64,".concat($));z.onmessage=function(oe){return de(oe.data)},z.onerror=ae}}).then(function(de){return de},function(){return!1})},B.exports.can_use_canvas=function(de){var ae=!1;try{var $=de(2,1).getContext("2d"),z=$.createImageData(2,1);z.data[0]=12,z.data[1]=23,z.data[2]=34,z.data[3]=255,z.data[4]=45,z.data[5]=56,z.data[6]=67,z.data[7]=255,$.putImageData(z,0,0),z=null,12===(z=$.getImageData(0,0,2,1)).data[0]&&23===z.data[1]&&34===z.data[2]&&255===z.data[3]&&45===z.data[4]&&56===z.data[5]&&67===z.data[6]&&255===z.data[7]&&(ae=!0)}catch{}return ae},B.exports.cib_can_use_region=function(){return new Promise(function(de){if(typeof Image>"u"||typeof createImageBitmap>"u")de(!1);else{var ae=new Image;ae.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",ae.onload=function(){createImageBitmap(ae,0,0,ae.width,ae.height).then(function(ve){de(ve.width===ae.width&&ve.height===ae.height)},function(){return de(!1)})},ae.onerror=function(){return de(!1)}}})}},{}],17:[function(s,B,Se){"use strict";B.exports=function(){var Ae,_e=s("./mathlib");onmessage=function(ae){var ve=ae.data.opts;if(!ve.src&&ve.srcBitmap){var z=new OffscreenCanvas(ve.width,ve.height),oe=z.getContext("2d");oe.drawImage(ve.srcBitmap,0,0),ve.src=oe.getImageData(0,0,ve.width,ve.height).data,z.width=z.height=0,z=null,ve.srcBitmap.close(),ve.srcBitmap=null}Ae||(Ae=new _e(ae.data.features));var be=Ae.resizeAndUnsharp(ve);postMessage({data:be},[be.buffer])}}},{"./mathlib":1}],18:[function(s,B,Se){var _e,Ae,de,ae,ve,$;function ye(Re,Ye,We,_t,Fe,Oe){var tt,Ze,Ge,dt,bt,Ee,Nt,Vt,Dn,wt,Ke,ut,Le,we;for(Dn=0;Dn<Oe;Dn++){for(Nt=Dn,Vt=0,dt=bt=(tt=Re[Ee=Dn*Fe])*_t[6],Ke=_t[0],ut=_t[1],Le=_t[4],we=_t[5],wt=0;wt<Fe;wt++)Ge=(Ze=Re[Ee])*Ke+tt*ut+dt*Le+bt*we,bt=dt,tt=Ze,We[Vt]=dt=Ge,Vt++,Ee++;for(Vt--,Nt+=Oe*(Fe-1),dt=bt=(tt=Re[--Ee])*_t[7],Ze=tt,Ke=_t[2],ut=_t[3],wt=Fe-1;wt>=0;wt--)Ge=Ze*Ke+tt*ut+dt*Le+bt*we,bt=dt,tt=Ze,Ze=Re[Ee],Ye[Nt]=We[Vt]+(dt=Ge),Ee--,Vt--,Nt-=Oe}}B.exports=function De(Re,Ye,We,_t){if(_t){var Fe=new Uint16Array(Re.length),Oe=new Float32Array(Math.max(Ye,We)),tt=function be(Re){Re<.5&&(Re=.5);var Ye=Math.exp(.527076)/Re,We=Math.exp(-Ye),_t=Math.exp(-2*Ye),Fe=(1-We)*(1-We)/(1+2*Ye*We-_t);return _e=Fe,Ae=Fe*(Ye-1)*We,de=Fe*(Ye+1)*We,ae=-Fe*_t,ve=2*We,$=-_t,new Float32Array([_e,Ae,de,ae,ve,$,(_e+Ae)/(1-ve-$),(de+ae)/(1-ve-$)])}(_t);ye(Re,Fe,Oe,tt,Ye,We),ye(Fe,Re,Oe,tt,We,Ye)}}},{}],19:[function(s,B,Se){"use strict";var _e=s("object-assign"),Ae=s("./lib/base64decode"),de=s("./lib/wa_detect"),ae={js:!0,wasm:!0};function ve($){if(!(this instanceof ve))return new ve($);var z=_e({},ae,$||{});if(this.options=z,this.__cache={},this.__init_promise=null,this.__modules=z.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}ve.prototype.has_wasm=de,ve.prototype.use=function($){return this.__modules[$.name]=$,this[$.name]=this.options.wasm&&this.has_wasm()&&$.wasm_fn?$.wasm_fn:$.fn,this},ve.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var $=this;return this.__init_promise=Promise.all(Object.keys($.__modules).map(function(z){var oe=$.__modules[z];return $.options.wasm&&$.has_wasm()&&oe.wasm_fn&&!$.__wasm[z]?WebAssembly.compile($.__base64decode(oe.wasm_src)).then(function(be){$.__wasm[z]=be}):null})).then(function(){return $}),this.__init_promise},ve.prototype.__base64decode=Ae,ve.prototype.__reallocate=function(z){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(z/65536)}),this.__memory;var oe=this.__memory.buffer.byteLength;return oe<z&&this.__memory.grow(Math.ceil((z-oe)/65536)),this.__memory},ve.prototype.__instance=function(z,oe,be){if(oe&&this.__reallocate(oe),this.__wasm[z]||(this.__wasm[z]=new WebAssembly.Module(this.__base64decode(this.__modules[z].wasm_src))),!this.__cache[z]){var De={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[z]=new WebAssembly.Instance(this.__wasm[z],{env:_e(De,be||{})})}return this.__cache[z]},ve.prototype.__align=function(z,oe){var be=z%(oe=oe||8);return z+(be?oe-be:0)},B.exports=ve},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(s,B,Se){"use strict";B.exports=function(de){for(var ae=de.replace(/[\r\n=]/g,""),ve=ae.length,$=new Uint8Array(3*ve>>2),z=0,oe=0,be=0;be<ve;be++)be%4==0&&be&&($[oe++]=z>>16&255,$[oe++]=z>>8&255,$[oe++]=255&z),z=z<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(ae.charAt(be));var ye=ve%4*6;return 0===ye?($[oe++]=z>>16&255,$[oe++]=z>>8&255,$[oe++]=255&z):18===ye?($[oe++]=z>>10&255,$[oe++]=z>>2&255):12===ye&&($[oe++]=z>>4&255),$}},{}],21:[function(s,B,Se){"use strict";var _e;B.exports=function(){if(typeof _e<"u"||(_e=!1,typeof WebAssembly>"u"))return _e;try{var de=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),ae=new WebAssembly.Module(de);return 0!==new WebAssembly.Instance(ae,{}).exports.test(4)&&(_e=!0),_e}catch{}return _e}},{}],22:[function(s,B,Se){"use strict";var _e=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;B.exports=function ve(){try{if(!Object.assign)return!1;var $=new String("abc");if($[5]="de","5"===Object.getOwnPropertyNames($)[0])return!1;for(var z={},oe=0;oe<10;oe++)z["_"+String.fromCharCode(oe)]=oe;if("0123456789"!==Object.getOwnPropertyNames(z).map(function(De){return z[De]}).join(""))return!1;var ye={};return"abcdefghijklmnopqrst".split("").forEach(function(De){ye[De]=De}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},ye)).join("")}catch{return!1}}()?Object.assign:function($,z){for(var oe,ye,be=function ae($){if(null==$)throw new TypeError("Object.assign cannot be called with null or undefined");return Object($)}($),De=1;De<arguments.length;De++){for(var Re in oe=Object(arguments[De]))Ae.call(oe,Re)&&(be[Re]=oe[Re]);if(_e){ye=_e(oe);for(var Ye=0;Ye<ye.length;Ye++)de.call(oe,ye[Ye])&&(be[ye[Ye]]=oe[ye[Ye]])}}return be}},{}],23:[function(s,B,Se){var _e=arguments[3],Ae=arguments[4],de=arguments[5],ae=JSON.stringify;B.exports=function(ve,$){for(var z,oe=Object.keys(de),be=0,ye=oe.length;be<ye;be++){var Re=de[De=oe[be]].exports;if(Re===ve||Re&&Re.default===ve){z=De;break}}if(!z){z=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var Ye={};for(be=0,ye=oe.length;be<ye;be++){var De;Ye[De=oe[be]]=De}Ae[z]=["function(require,module,exports){"+ve+"(self); }",Ye]}var We=Math.floor(Math.pow(16,8)*Math.random()).toString(16),_t={};_t[z]=z,Ae[We]=["function(require,module,exports){var f = require("+ae(z)+");(f.default ? f.default : f)(self);}",_t];var Fe={};!function Oe(Ee){for(var Nt in Fe[Ee]=!0,Ae[Ee][1]){var Vt=Ae[Ee][1][Nt];Fe[Vt]||Oe(Vt)}}(We);var tt="("+_e+")({"+Object.keys(Fe).map(function(Ee){return ae(Ee)+":["+Ae[Ee][0]+","+ae(Ae[Ee][1])+"]"}).join(",")+"},{},["+ae(We)+"])",Ze=window.URL||window.webkitURL||window.mozURL||window.msURL,Ge=new Blob([tt],{type:"text/javascript"});if($&&$.bare)return Ge;var dt=Ze.createObjectURL(Ge),bt=new Worker(dt);return bt.objectURL=dt,bt}},{}],"/index.js":[function(s,B,Se){"use strict";function _e(Ke,ut){return function $(Ke){if(Array.isArray(Ke))return Ke}(Ke)||function ve(Ke,ut){var Le=null==Ke?null:typeof Symbol<"u"&&Ke[Symbol.iterator]||Ke["@@iterator"];if(null!=Le){var Pe,je,we=[],te=!0,Ie=!1;try{for(Le=Le.call(Ke);!(te=(Pe=Le.next()).done)&&(we.push(Pe.value),!ut||we.length!==ut);te=!0);}catch(st){Ie=!0,je=st}finally{try{!te&&null!=Le.return&&Le.return()}finally{if(Ie)throw je}}return we}}(Ke,ut)||function de(Ke,ut){if(Ke){if("string"==typeof Ke)return ae(Ke,ut);var Le=Object.prototype.toString.call(Ke).slice(8,-1);if("Object"===Le&&Ke.constructor&&(Le=Ke.constructor.name),"Map"===Le||"Set"===Le)return Array.from(Ke);if("Arguments"===Le||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Le))return ae(Ke,ut)}}(Ke,ut)||function Ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(Ke,ut){(null==ut||ut>Ke.length)&&(ut=Ke.length);for(var Le=0,we=new Array(ut);Le<ut;Le++)we[Le]=Ke[Le];return we}var z=s("object-assign"),oe=s("webworkify"),be=s("./lib/mathlib"),ye=s("./lib/pool"),De=s("./lib/utils"),Re=s("./lib/worker"),Ye=s("./lib/stepper"),We=s("./lib/tiler"),_t=s("./lib/mm_resize/resize_filter_info"),Fe={},Oe=!1;try{typeof navigator<"u"&&navigator.userAgent&&(Oe=navigator.userAgent.indexOf("Safari")>=0)}catch{}var tt=1;typeof navigator<"u"&&(tt=Math.min(navigator.hardwareConcurrency||1,4));var Ze={tile:1024,concurrency:tt,features:["js","wasm","ww"],idle:2e3,createCanvas:function(ut,Le){var we=document.createElement("canvas");return we.width=ut,we.height=Le,we}},Ge={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},dt=!1,bt=!1,Ee=!1,Nt=!1,Vt=!1;function Dn(){return{value:oe(Re),destroy:function(){if(this.value.terminate(),typeof window<"u"){var ut=window.URL||window.webkitURL||window.mozURL||window.msURL;ut&&ut.revokeObjectURL&&this.value.objectURL&&ut.revokeObjectURL(this.value.objectURL)}}}}function wt(Ke){if(!(this instanceof wt))return new wt(Ke);this.options=z({},Ze,Ke||{});var ut="lk_".concat(this.options.concurrency);this.__limit=Fe[ut]||De.limiter(this.options.concurrency),Fe[ut]||(Fe[ut]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}wt.prototype.init=function(){var Ke=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),dt=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?bt=!0:this.debug("ImageBitmap does not support .close(), disabled"));var ut=this.options.features.slice();if(ut.indexOf("all")>=0&&(ut=["cib","wasm","js","ww"]),this.__requested_features=ut,this.__mathlib=new be(ut),ut.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{s("webworkify")(function(){}).terminate(),this.features.ww=!0;var we="wp_".concat(JSON.stringify(this.options));Fe[we]?this.__workersPool=Fe[we]:(this.__workersPool=new ye(Dn,this.options.idle),Fe[we]=this.__workersPool)}catch{}var Ie,Pe,te=this.__mathlib.init().then(function(st){z(Ke.features,st.features)});Ie=bt?De.cib_support(this.options.createCanvas).then(function(st){Ke.features.cib&&ut.indexOf("cib")<0?Ke.debug("createImageBitmap() resize supported, but disabled by config"):ut.indexOf("cib")>=0&&(Ke.features.cib=st)}):Promise.resolve(!1),Ee=De.can_use_canvas(this.options.createCanvas),Pe=(Pe=bt&&dt&&-1!==ut.indexOf("ww")?De.worker_offscreen_canvas_support():Promise.resolve(!1)).then(function(st){Nt=st});var je=De.cib_can_use_region().then(function(st){Vt=st});return this.__initPromise=Promise.all([te,Ie,Pe,je]).then(function(){return Ke}),this.__initPromise},wt.prototype.__invokeResize=function(Ke,ut){var Le=this;return ut.__mathCache=ut.__mathCache||{},Promise.resolve().then(function(){return Le.features.ww?new Promise(function(we,te){var Ie=Le.__workersPool.acquire();ut.cancelToken&&ut.cancelToken.catch(function(je){return te(je)}),Ie.value.onmessage=function(je){Ie.release(),je.data.err?te(je.data.err):we(je.data)};var Pe=[];Ke.src&&Pe.push(Ke.src.buffer),Ke.srcBitmap&&Pe.push(Ke.srcBitmap),Ie.value.postMessage({opts:Ke,features:Le.__requested_features,preload:{wasm_nodule:Le.__mathlib.__}},Pe)}):{data:Le.__mathlib.resizeAndUnsharp(Ke,ut.__mathCache)}})},wt.prototype.__extractTileData=function(Ke,ut,Le,we,te){if(this.features.ww&&Nt&&(De.isCanvas(ut)||Vt))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(we.srcImageBitmap||ut,Ke.x,Ke.y,Ke.width,Ke.height).then(function(je){return te.srcBitmap=je,te});if(De.isCanvas(ut))return we.srcCtx||(we.srcCtx=ut.getContext("2d")),this.debug("Get tile pixel data"),te.src=we.srcCtx.getImageData(Ke.x,Ke.y,Ke.width,Ke.height).data,te;this.debug("Draw tile imageBitmap/image to temporary canvas");var Ie=this.options.createCanvas(Ke.width,Ke.height),Pe=Ie.getContext("2d");return Pe.globalCompositeOperation="copy",Pe.drawImage(we.srcImageBitmap||ut,Ke.x,Ke.y,Ke.width,Ke.height,0,0,Ke.width,Ke.height),this.debug("Get tile pixel data"),te.src=Pe.getImageData(0,0,Ke.width,Ke.height).data,Ie.width=Ie.height=0,te},wt.prototype.__landTileData=function(Ke,ut,Le){var we;if(this.debug("Convert raw rgba tile result to ImageData"),ut.bitmap)return Le.toCtx.drawImage(ut.bitmap,Ke.toX,Ke.toY),null;if(dt)we=new ImageData(new Uint8ClampedArray(ut.data),Ke.toWidth,Ke.toHeight);else if((we=Le.toCtx.createImageData(Ke.toWidth,Ke.toHeight)).data.set)we.data.set(ut.data);else for(var te=we.data.length-1;te>=0;te--)we.data[te]=ut.data[te];return this.debug("Draw tile"),Oe?Le.toCtx.putImageData(we,Ke.toX,Ke.toY,Ke.toInnerX-Ke.toX,Ke.toInnerY-Ke.toY,Ke.toInnerWidth+1e-5,Ke.toInnerHeight+1e-5):Le.toCtx.putImageData(we,Ke.toX,Ke.toY,Ke.toInnerX-Ke.toX,Ke.toInnerY-Ke.toY,Ke.toInnerWidth,Ke.toInnerHeight),null},wt.prototype.__tileAndResize=function(Ke,ut,Le){var we=this,te={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then(function(){if(te.toCtx=ut.getContext("2d"),De.isCanvas(Ke))return null;if(De.isImageBitmap(Ke))return te.srcImageBitmap=Ke,te.isImageBitmapReused=!0,null;if(De.isImage(Ke))return bt?(we.debug("Decode image via createImageBitmap"),createImageBitmap(Ke).then(function(Pe){te.srcImageBitmap=Pe}).catch(function(Pe){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(Le.canceled)return Le.cancelToken;we.debug("Calculate tiles");var je=We({width:Le.width,height:Le.height,srcTileSize:we.options.tile,toWidth:Le.toWidth,toHeight:Le.toHeight,destTileBorder:Le.__destTileBorder}).map(function(vt){return function(je){return we.__limit(function(){if(Le.canceled)return Le.cancelToken;var st={width:je.width,height:je.height,toWidth:je.toWidth,toHeight:je.toHeight,scaleX:je.scaleX,scaleY:je.scaleY,offsetX:je.offsetX,offsetY:je.offsetY,filter:Le.filter,unsharpAmount:Le.unsharpAmount,unsharpRadius:Le.unsharpRadius,unsharpThreshold:Le.unsharpThreshold};return we.debug("Invoke resize math"),Promise.resolve(st).then(function(vt){return we.__extractTileData(je,Ke,Le,te,vt)}).then(function(vt){return we.debug("Invoke resize math"),we.__invokeResize(vt,Le)}).then(function(vt){return Le.canceled?Le.cancelToken:(te.srcImageData=null,we.__landTileData(je,vt,te))})})}(vt)});function st(vt){vt.srcImageBitmap&&(vt.isImageBitmapReused||vt.srcImageBitmap.close(),vt.srcImageBitmap=null)}return we.debug("Process tiles"),Promise.all(je).then(function(){return we.debug("Finished!"),st(te),ut},function(vt){throw st(te),vt})})},wt.prototype.__processStages=function(Ke,ut,Le,we){var te=this;if(we.canceled)return we.cancelToken;var Bt,Gt,Pe=_e(Ke.shift(),2),je=Pe[0],st=Pe[1],vt=0===Ke.length;return Bt=vt||_t.q2f.indexOf(we.filter)<0?we.filter:"box"===we.filter?"box":"hamming",we=z({},we,{toWidth:je,toHeight:st,filter:Bt}),vt||(Gt=this.options.createCanvas(je,st)),this.__tileAndResize(ut,vt?Le:Gt,we).then(function(){return vt?Le:(we.width=je,we.height=st,te.__processStages(Ke,Gt,Le,we))}).then(function(Kt){return Gt&&(Gt.width=Gt.height=0),Kt})},wt.prototype.__resizeViaCreateImageBitmap=function(Ke,ut,Le){var we=this,te=ut.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(Ke,{resizeWidth:Le.toWidth,resizeHeight:Le.toHeight,resizeQuality:De.cib_quality_name(_t.f2q[Le.filter])}).then(function(Ie){if(Le.canceled)return Le.cancelToken;if(!Le.unsharpAmount)return te.drawImage(Ie,0,0),Ie.close(),te=null,we.debug("Finished!"),ut;we.debug("Unsharp result");var Pe=we.options.createCanvas(Le.toWidth,Le.toHeight),je=Pe.getContext("2d");je.drawImage(Ie,0,0),Ie.close();var st=je.getImageData(0,0,Le.toWidth,Le.toHeight);return we.__mathlib.unsharp_mask(st.data,Le.toWidth,Le.toHeight,Le.unsharpAmount,Le.unsharpRadius,Le.unsharpThreshold),te.putImageData(st,0,0),Pe.width=Pe.height=0,st=je=Pe=te=null,we.debug("Finished!"),ut})},wt.prototype.resize=function(Ke,ut,Le){var we=this;this.debug("Start resize...");var te=z({},Ge);if(isNaN(Le)?Le&&(te=z(te,Le)):te=z(te,{quality:Le}),te.toWidth=ut.width,te.toHeight=ut.height,te.width=Ke.naturalWidth||Ke.width,te.height=Ke.naturalHeight||Ke.height,Object.prototype.hasOwnProperty.call(te,"quality")){if(te.quality<0||te.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(te.quality));te.filter=_t.q2f[te.quality]}return 0===ut.width||0===ut.height?Promise.reject(new Error("Invalid output size: ".concat(ut.width,"x").concat(ut.height))):(te.unsharpRadius>2&&(te.unsharpRadius=2),te.canceled=!1,te.cancelToken&&(te.cancelToken=te.cancelToken.then(function(Pe){throw te.canceled=!0,Pe},function(Pe){throw te.canceled=!0,Pe})),te.__destTileBorder=Math.ceil(Math.max(3,2.5*te.unsharpRadius|0)),this.init().then(function(){if(te.canceled)return te.cancelToken;if(we.features.cib){if(_t.q2f.indexOf(te.filter)>=0)return we.__resizeViaCreateImageBitmap(Ke,ut,te);we.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!Ee){var Pe=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw Pe.code="ERR_GET_IMAGE_DATA",Pe}var je=Ye(te.width,te.height,te.toWidth,te.toHeight,we.options.tile,te.__destTileBorder);return we.__processStages(je,Ke,ut,te)}))},wt.prototype.resizeBuffer=function(Ke){var ut=this,Le=z({},Ge,Ke);if(Object.prototype.hasOwnProperty.call(Le,"quality")){if(Le.quality<0||Le.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(Le.quality));Le.filter=_t.q2f[Le.quality]}return this.init().then(function(){return ut.__mathlib.resizeAndUnsharp(Le)})},wt.prototype.toBlob=function(Ke,ut,Le){return ut=ut||"image/png",new Promise(function(we){if(Ke.toBlob)Ke.toBlob(function(st){return we(st)},ut,Le);else if(Ke.convertToBlob)we(Ke.convertToBlob({type:ut,quality:Le}));else{for(var te=atob(Ke.toDataURL(ut,Le).split(",")[1]),Ie=te.length,Pe=new Uint8Array(Ie),je=0;je<Ie;je++)Pe[je]=te.charCodeAt(je);we(new Blob([Pe],{type:ut}))}})},wt.prototype.debug=function(){},B.exports=wt},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")},5619:(an,lt,k)=>{"use strict";k.d(lt,{X:()=>s});var f=k(8645);class s extends f.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const _e=super._subscribe(Se);return!_e.closed&&Se.next(this._value),_e}getValue(){const{hasError:Se,thrownError:_e,_value:Ae}=this;if(Se)throw _e;return this._throwIfClosed(),Ae}next(Se){super.next(this._value=Se)}}},5592:(an,lt,k)=>{"use strict";k.d(lt,{y:()=>ae});var f=k(305),s=k(7394),B=k(4850),Se=k(8407),_e=k(2653),Ae=k(4674),de=k(1441);let ae=(()=>{class oe{constructor(ye){ye&&(this._subscribe=ye)}lift(ye){const De=new oe;return De.source=this,De.operator=ye,De}subscribe(ye,De,Re){const Ye=function z(oe){return oe&&oe instanceof f.Lv||function $(oe){return oe&&(0,Ae.m)(oe.next)&&(0,Ae.m)(oe.error)&&(0,Ae.m)(oe.complete)}(oe)&&(0,s.Nn)(oe)}(ye)?ye:new f.Hp(ye,De,Re);return(0,de.x)(()=>{const{operator:We,source:_t}=this;Ye.add(We?We.call(Ye,_t):_t?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ye){try{return this._subscribe(ye)}catch(De){ye.error(De)}}forEach(ye,De){return new(De=ve(De))((Re,Ye)=>{const We=new f.Hp({next:_t=>{try{ye(_t)}catch(Fe){Ye(Fe),We.unsubscribe()}},error:Ye,complete:Re});this.subscribe(We)})}_subscribe(ye){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(ye)}[B.L](){return this}pipe(...ye){return(0,Se.U)(ye)(this)}toPromise(ye){return new(ye=ve(ye))((De,Re)=>{let Ye;this.subscribe(We=>Ye=We,We=>Re(We),()=>De(Ye))})}}return oe.create=be=>new oe(be),oe})();function ve(oe){var be;return null!==(be=oe??_e.config.Promise)&&void 0!==be?be:Promise}},8645:(an,lt,k)=>{"use strict";k.d(lt,{x:()=>de});var f=k(5592),s=k(7394);const Se=(0,k(2306).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=k(9039),Ae=k(1441);let de=(()=>{class ve extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const oe=new ae(this,this);return oe.operator=z,oe}_throwIfClosed(){if(this.closed)throw new Se}next(z){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(z)}})}error(z){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:oe}=this;for(;oe.length;)oe.shift().error(z)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:oe,isStopped:be,observers:ye}=this;return oe||be?s.Lc:(this.currentObservers=null,ye.push(z),new s.w0(()=>{this.currentObservers=null,(0,_e.P)(ye,z)}))}_checkFinalizedStatuses(z){const{hasError:oe,thrownError:be,isStopped:ye}=this;oe?z.error(be):ye&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return ve.create=($,z)=>new ae($,z),ve})();class ae extends de{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===oe||oe.call(z,$)}error($){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===oe||oe.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,oe;return null!==(oe=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==oe?oe:s.Lc}}},305:(an,lt,k)=>{"use strict";k.d(lt,{Hp:()=>Re,Lv:()=>oe});var f=k(4674),s=k(7394),B=k(2653),Se=k(3894),_e=k(2420);const Ae=ve("C",void 0,void 0);function ve(Oe,tt,Ze){return{kind:Oe,value:tt,error:Ze}}var $=k(7599),z=k(1441);class oe extends s.w0{constructor(tt){super(),this.isStopped=!1,tt?(this.destination=tt,(0,s.Nn)(tt)&&tt.add(this)):this.destination=Fe}static create(tt,Ze,Ge){return new Re(tt,Ze,Ge)}next(tt){this.isStopped?_t(function ae(Oe){return ve("N",Oe,void 0)}(tt),this):this._next(tt)}error(tt){this.isStopped?_t(function de(Oe){return ve("E",void 0,Oe)}(tt),this):(this.isStopped=!0,this._error(tt))}complete(){this.isStopped?_t(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(tt){this.destination.next(tt)}_error(tt){try{this.destination.error(tt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const be=Function.prototype.bind;function ye(Oe,tt){return be.call(Oe,tt)}class De{constructor(tt){this.partialObserver=tt}next(tt){const{partialObserver:Ze}=this;if(Ze.next)try{Ze.next(tt)}catch(Ge){Ye(Ge)}}error(tt){const{partialObserver:Ze}=this;if(Ze.error)try{Ze.error(tt)}catch(Ge){Ye(Ge)}else Ye(tt)}complete(){const{partialObserver:tt}=this;if(tt.complete)try{tt.complete()}catch(Ze){Ye(Ze)}}}class Re extends oe{constructor(tt,Ze,Ge){let dt;if(super(),(0,f.m)(tt)||!tt)dt={next:tt??void 0,error:Ze??void 0,complete:Ge??void 0};else{let bt;this&&B.config.useDeprecatedNextContext?(bt=Object.create(tt),bt.unsubscribe=()=>this.unsubscribe(),dt={next:tt.next&&ye(tt.next,bt),error:tt.error&&ye(tt.error,bt),complete:tt.complete&&ye(tt.complete,bt)}):dt=tt}this.destination=new De(dt)}}function Ye(Oe){B.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(Oe):(0,Se.h)(Oe)}function _t(Oe,tt){const{onStoppedNotification:Ze}=B.config;Ze&&$.z.setTimeout(()=>Ze(Oe,tt))}const Fe={closed:!0,next:_e.Z,error:function We(Oe){throw Oe},complete:_e.Z}},7394:(an,lt,k)=>{"use strict";k.d(lt,{Lc:()=>Ae,w0:()=>_e,Nn:()=>de});var f=k(4674);const B=(0,k(2306).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((oe,be)=>`${be+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var Se=k(9039);class _e{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const ye of z)ye.remove(this);else z.remove(this);const{initialTeardown:oe}=this;if((0,f.m)(oe))try{oe()}catch(ye){$=ye instanceof B?ye.errors:[ye]}const{_finalizers:be}=this;if(be){this._finalizers=null;for(const ye of be)try{ae(ye)}catch(De){$=$??[],De instanceof B?$=[...$,...De.errors]:$.push(De)}}if($)throw new B($)}}add($){var z;if($&&$!==this)if(this.closed)ae($);else{if($ instanceof _e){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,Se.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,Se.P)(z,$),$ instanceof _e&&$._removeParent(this)}}_e.EMPTY=(()=>{const ve=new _e;return ve.closed=!0,ve})();const Ae=_e.EMPTY;function de(ve){return ve instanceof _e||ve&&"closed"in ve&&(0,f.m)(ve.remove)&&(0,f.m)(ve.add)&&(0,f.m)(ve.unsubscribe)}function ae(ve){(0,f.m)(ve)?ve():ve.unsubscribe()}},2653:(an,lt,k)=>{"use strict";k.d(lt,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(an,lt,k)=>{"use strict";k.d(lt,{a:()=>$});var f=k(5592),s=k(7453),B=k(2459),Se=k(2737),_e=k(7400),Ae=k(4564),de=k(2714),ae=k(8251),ve=k(7103);function $(...be){const ye=(0,Ae.yG)(be),De=(0,Ae.jO)(be),{args:Re,keys:Ye}=(0,s.D)(be);if(0===Re.length)return(0,B.D)([],ye);const We=new f.y(function z(be,ye,De=Se.y){return Re=>{oe(ye,()=>{const{length:Ye}=be,We=new Array(Ye);let _t=Ye,Fe=Ye;for(let Oe=0;Oe<Ye;Oe++)oe(ye,()=>{const tt=(0,B.D)(be[Oe],ye);let Ze=!1;tt.subscribe((0,ae.x)(Re,Ge=>{We[Oe]=Ge,Ze||(Ze=!0,Fe--),Fe||Re.next(De(We.slice()))},()=>{--_t||Re.complete()}))},Re)},Re)}}(Re,ye,Ye?_t=>(0,de.n)(Ye,_t):Se.y));return De?We.pipe((0,_e.Z)(De)):We}function oe(be,ye,De){be?(0,ve.f)(De,be,ye):ye()}},5211:(an,lt,k)=>{"use strict";k.d(lt,{z:()=>_e});var f=k(7537),B=k(4564),Se=k(2459);function _e(...Ae){return function s(){return(0,f.J)(1)}()((0,Se.D)(Ae,(0,B.yG)(Ae)))}},6232:(an,lt,k)=>{"use strict";k.d(lt,{E:()=>s});const s=new(k(5592).y)(_e=>_e.complete())},9315:(an,lt,k)=>{"use strict";k.d(lt,{D:()=>ae});var f=k(5592),s=k(7453),B=k(4829),Se=k(4564),_e=k(8251),Ae=k(7400),de=k(2714);function ae(...ve){const $=(0,Se.jO)(ve),{args:z,keys:oe}=(0,s.D)(ve),be=new f.y(ye=>{const{length:De}=z;if(!De)return void ye.complete();const Re=new Array(De);let Ye=De,We=De;for(let _t=0;_t<De;_t++){let Fe=!1;(0,B.Xf)(z[_t]).subscribe((0,_e.x)(ye,Oe=>{Fe||(Fe=!0,We--),Re[_t]=Oe},()=>Ye--,void 0,()=>{(!Ye||!Fe)&&(We||ye.next(oe?(0,de.n)(oe,Re):Re),ye.complete())}))}});return $?be.pipe((0,Ae.Z)($)):be}},2459:(an,lt,k)=>{"use strict";k.d(lt,{D:()=>tt});var f=k(4829),s=k(3093),B=k(5137),Ae=k(5592),ae=k(4971),ve=k(4674),$=k(7103);function oe(Ze,Ge){if(!Ze)throw new Error("Iterable cannot be null");return new Ae.y(dt=>{(0,$.f)(dt,Ge,()=>{const bt=Ze[Symbol.asyncIterator]();(0,$.f)(dt,Ge,()=>{bt.next().then(Ee=>{Ee.done?dt.complete():dt.next(Ee.value)})},0,!0)})})}var be=k(8382),ye=k(4026),De=k(4266),Re=k(3664),Ye=k(5726),We=k(9853),_t=k(541);function tt(Ze,Ge){return Ge?function Oe(Ze,Ge){if(null!=Ze){if((0,be.c)(Ze))return function Se(Ze,Ge){return(0,f.Xf)(Ze).pipe((0,B.R)(Ge),(0,s.Q)(Ge))}(Ze,Ge);if((0,De.z)(Ze))return function de(Ze,Ge){return new Ae.y(dt=>{let bt=0;return Ge.schedule(function(){bt===Ze.length?dt.complete():(dt.next(Ze[bt++]),dt.closed||this.schedule())})})}(Ze,Ge);if((0,ye.t)(Ze))return function _e(Ze,Ge){return(0,f.Xf)(Ze).pipe((0,B.R)(Ge),(0,s.Q)(Ge))}(Ze,Ge);if((0,Ye.D)(Ze))return oe(Ze,Ge);if((0,Re.T)(Ze))return function z(Ze,Ge){return new Ae.y(dt=>{let bt;return(0,$.f)(dt,Ge,()=>{bt=Ze[ae.h](),(0,$.f)(dt,Ge,()=>{let Ee,Nt;try{({value:Ee,done:Nt}=bt.next())}catch(Vt){return void dt.error(Vt)}Nt?dt.complete():dt.next(Ee)},0,!0)}),()=>(0,ve.m)(bt?.return)&&bt.return()})}(Ze,Ge);if((0,_t.L)(Ze))return function Fe(Ze,Ge){return oe((0,_t.Q)(Ze),Ge)}(Ze,Ge)}throw(0,We.z)(Ze)}(Ze,Ge):(0,f.Xf)(Ze)}},4829:(an,lt,k)=>{"use strict";k.d(lt,{Xf:()=>be});var f=k(7582),s=k(4266),B=k(4026),Se=k(5592),_e=k(8382),Ae=k(5726),de=k(9853),ae=k(3664),ve=k(541),$=k(4674),z=k(3894),oe=k(4850);function be(Oe){if(Oe instanceof Se.y)return Oe;if(null!=Oe){if((0,_e.c)(Oe))return function ye(Oe){return new Se.y(tt=>{const Ze=Oe[oe.L]();if((0,$.m)(Ze.subscribe))return Ze.subscribe(tt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,s.z)(Oe))return function De(Oe){return new Se.y(tt=>{for(let Ze=0;Ze<Oe.length&&!tt.closed;Ze++)tt.next(Oe[Ze]);tt.complete()})}(Oe);if((0,B.t)(Oe))return function Re(Oe){return new Se.y(tt=>{Oe.then(Ze=>{tt.closed||(tt.next(Ze),tt.complete())},Ze=>tt.error(Ze)).then(null,z.h)})}(Oe);if((0,Ae.D)(Oe))return We(Oe);if((0,ae.T)(Oe))return function Ye(Oe){return new Se.y(tt=>{for(const Ze of Oe)if(tt.next(Ze),tt.closed)return;tt.complete()})}(Oe);if((0,ve.L)(Oe))return function _t(Oe){return We((0,ve.Q)(Oe))}(Oe)}throw(0,de.z)(Oe)}function We(Oe){return new Se.y(tt=>{(function Fe(Oe,tt){var Ze,Ge,dt,bt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ze=(0,f.KL)(Oe);!(Ge=yield Ze.next()).done;)if(tt.next(Ge.value),tt.closed)return}catch(Ee){dt={error:Ee}}finally{try{Ge&&!Ge.done&&(bt=Ze.return)&&(yield bt.call(Ze))}finally{if(dt)throw dt.error}}tt.complete()})})(Oe,tt).catch(Ze=>tt.error(Ze))})}},3019:(an,lt,k)=>{"use strict";k.d(lt,{T:()=>Ae});var f=k(7537),s=k(4829),B=k(6232),Se=k(4564),_e=k(2459);function Ae(...de){const ae=(0,Se.yG)(de),ve=(0,Se._6)(de,1/0),$=de;return $.length?1===$.length?(0,s.Xf)($[0]):(0,f.J)(ve)((0,_e.D)($,ae)):B.E}},2096:(an,lt,k)=>{"use strict";k.d(lt,{of:()=>B});var f=k(4564),s=k(2459);function B(...Se){const _e=(0,f.yG)(Se);return(0,s.D)(Se,_e)}},8504:(an,lt,k)=>{"use strict";k.d(lt,{_:()=>B});var f=k(5592),s=k(4674);function B(Se,_e){const Ae=(0,s.m)(Se)?Se:()=>Se,de=ae=>ae.error(Ae());return new f.y(_e?ae=>_e.schedule(de,0,ae):de)}},8251:(an,lt,k)=>{"use strict";k.d(lt,{x:()=>s});var f=k(305);function s(Se,_e,Ae,de,ae){return new B(Se,_e,Ae,de,ae)}class B extends f.Lv{constructor(_e,Ae,de,ae,ve,$){super(_e),this.onFinalize=ve,this.shouldUnsubscribe=$,this._next=Ae?function(z){try{Ae(z)}catch(oe){_e.error(oe)}}:super._next,this._error=ae?function(z){try{ae(z)}catch(oe){_e.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(z){_e.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},6306:(an,lt,k)=>{"use strict";k.d(lt,{K:()=>Se});var f=k(4829),s=k(8251),B=k(9360);function Se(_e){return(0,B.e)((Ae,de)=>{let $,ae=null,ve=!1;ae=Ae.subscribe((0,s.x)(de,void 0,void 0,z=>{$=(0,f.Xf)(_e(z,Se(_e)(Ae))),ae?(ae.unsubscribe(),ae=null,$.subscribe(de)):ve=!0})),ve&&(ae.unsubscribe(),ae=null,$.subscribe(de))})}},6328:(an,lt,k)=>{"use strict";k.d(lt,{b:()=>B});var f=k(1631),s=k(4674);function B(Se,_e){return(0,s.m)(_e)?(0,f.z)(Se,_e,1):(0,f.z)(Se,1)}},3620:(an,lt,k)=>{"use strict";k.d(lt,{b:()=>Se});var f=k(6321),s=k(9360),B=k(8251);function Se(_e,Ae=f.z){return(0,s.e)((de,ae)=>{let ve=null,$=null,z=null;const oe=()=>{if(ve){ve.unsubscribe(),ve=null;const ye=$;$=null,ae.next(ye)}};function be(){const ye=z+_e,De=Ae.now();if(De<ye)return ve=this.schedule(void 0,ye-De),void ae.add(ve);oe()}de.subscribe((0,B.x)(ae,ye=>{$=ye,z=Ae.now(),ve||(ve=Ae.schedule(be,_e),ae.add(ve))},()=>{oe(),ae.complete()},void 0,()=>{$=ve=null}))})}},3572:(an,lt,k)=>{"use strict";k.d(lt,{d:()=>B});var f=k(9360),s=k(8251);function B(Se){return(0,f.e)((_e,Ae)=>{let de=!1;_e.subscribe((0,s.x)(Ae,ae=>{de=!0,Ae.next(ae)},()=>{de||Ae.next(Se),Ae.complete()}))})}},3997:(an,lt,k)=>{"use strict";k.d(lt,{x:()=>Se});var f=k(2737),s=k(9360),B=k(8251);function Se(Ae,de=f.y){return Ae=Ae??_e,(0,s.e)((ae,ve)=>{let $,z=!0;ae.subscribe((0,B.x)(ve,oe=>{const be=de(oe);(z||!Ae($,be))&&(z=!1,$=be,ve.next(oe))}))})}function _e(Ae,de){return Ae===de}},2181:(an,lt,k)=>{"use strict";k.d(lt,{h:()=>B});var f=k(9360),s=k(8251);function B(Se,_e){return(0,f.e)((Ae,de)=>{let ae=0;Ae.subscribe((0,s.x)(de,ve=>Se.call(_e,ve,ae++)&&de.next(ve)))})}},4716:(an,lt,k)=>{"use strict";k.d(lt,{x:()=>s});var f=k(9360);function s(B){return(0,f.e)((Se,_e)=>{try{Se.subscribe(_e)}finally{_e.add(B)}})}},1374:(an,lt,k)=>{"use strict";k.d(lt,{P:()=>de});var f=k(6973),s=k(2181),B=k(8180),Se=k(3572),_e=k(3026),Ae=k(2737);function de(ae,ve){const $=arguments.length>=2;return z=>z.pipe(ae?(0,s.h)((oe,be)=>ae(oe,be,z)):Ae.y,(0,B.q)(1),$?(0,Se.d)(ve):(0,_e.T)(()=>new f.K))}},7398:(an,lt,k)=>{"use strict";k.d(lt,{U:()=>B});var f=k(9360),s=k(8251);function B(Se,_e){return(0,f.e)((Ae,de)=>{let ae=0;Ae.subscribe((0,s.x)(de,ve=>{de.next(Se.call(_e,ve,ae++))}))})}},7537:(an,lt,k)=>{"use strict";k.d(lt,{J:()=>B});var f=k(1631),s=k(2737);function B(Se=1/0){return(0,f.z)(s.y,Se)}},1631:(an,lt,k)=>{"use strict";k.d(lt,{z:()=>ae});var f=k(7398),s=k(4829),B=k(9360),Se=k(7103),_e=k(8251),de=k(4674);function ae(ve,$,z=1/0){return(0,de.m)($)?ae((oe,be)=>(0,f.U)((ye,De)=>$(oe,ye,be,De))((0,s.Xf)(ve(oe,be))),z):("number"==typeof $&&(z=$),(0,B.e)((oe,be)=>function Ae(ve,$,z,oe,be,ye,De,Re){const Ye=[];let We=0,_t=0,Fe=!1;const Oe=()=>{Fe&&!Ye.length&&!We&&$.complete()},tt=Ge=>We<oe?Ze(Ge):Ye.push(Ge),Ze=Ge=>{ye&&$.next(Ge),We++;let dt=!1;(0,s.Xf)(z(Ge,_t++)).subscribe((0,_e.x)($,bt=>{be?.(bt),ye?tt(bt):$.next(bt)},()=>{dt=!0},void 0,()=>{if(dt)try{for(We--;Ye.length&&We<oe;){const bt=Ye.shift();De?(0,Se.f)($,De,()=>Ze(bt)):Ze(bt)}Oe()}catch(bt){$.error(bt)}}))};return ve.subscribe((0,_e.x)($,tt,()=>{Fe=!0,Oe()})),()=>{Re?.()}}(oe,be,ve,z)))}},3093:(an,lt,k)=>{"use strict";k.d(lt,{Q:()=>Se});var f=k(7103),s=k(9360),B=k(8251);function Se(_e,Ae=0){return(0,s.e)((de,ae)=>{de.subscribe((0,B.x)(ae,ve=>(0,f.f)(ae,_e,()=>ae.next(ve),Ae),()=>(0,f.f)(ae,_e,()=>ae.complete(),Ae),ve=>(0,f.f)(ae,_e,()=>ae.error(ve),Ae)))})}},6699:(an,lt,k)=>{"use strict";k.d(lt,{R:()=>Se});var f=k(9360),s=k(8251);function Se(_e,Ae){return(0,f.e)(function B(_e,Ae,de,ae,ve){return($,z)=>{let oe=de,be=Ae,ye=0;$.subscribe((0,s.x)(z,De=>{const Re=ye++;be=oe?_e(be,De,Re):(oe=!0,De),ae&&z.next(be)},ve&&(()=>{oe&&z.next(be),z.complete()})))}}(_e,Ae,arguments.length>=2,!0))}},3020:(an,lt,k)=>{"use strict";k.d(lt,{B:()=>_e});var f=k(4829),s=k(8645),B=k(305),Se=k(9360);function _e(de={}){const{connector:ae=(()=>new s.x),resetOnError:ve=!0,resetOnComplete:$=!0,resetOnRefCountZero:z=!0}=de;return oe=>{let be,ye,De,Re=0,Ye=!1,We=!1;const _t=()=>{ye?.unsubscribe(),ye=void 0},Fe=()=>{_t(),be=De=void 0,Ye=We=!1},Oe=()=>{const tt=be;Fe(),tt?.unsubscribe()};return(0,Se.e)((tt,Ze)=>{Re++,!We&&!Ye&&_t();const Ge=De=De??ae();Ze.add(()=>{Re--,0===Re&&!We&&!Ye&&(ye=Ae(Oe,z))}),Ge.subscribe(Ze),!be&&Re>0&&(be=new B.Hp({next:dt=>Ge.next(dt),error:dt=>{We=!0,_t(),ye=Ae(Fe,ve,dt),Ge.error(dt)},complete:()=>{Ye=!0,_t(),ye=Ae(Fe,$),Ge.complete()}}),(0,f.Xf)(tt).subscribe(be))})(oe)}}function Ae(de,ae,...ve){if(!0===ae)return void de();if(!1===ae)return;const $=new B.Hp({next:()=>{$.unsubscribe(),de()}});return(0,f.Xf)(ae(...ve)).subscribe($)}},7921:(an,lt,k)=>{"use strict";k.d(lt,{O:()=>Se});var f=k(5211),s=k(4564),B=k(9360);function Se(..._e){const Ae=(0,s.yG)(_e);return(0,B.e)((de,ae)=>{(Ae?(0,f.z)(_e,de,Ae):(0,f.z)(_e,de)).subscribe(ae)})}},5137:(an,lt,k)=>{"use strict";k.d(lt,{R:()=>s});var f=k(9360);function s(B,Se=0){return(0,f.e)((_e,Ae)=>{Ae.add(B.schedule(()=>_e.subscribe(Ae),Se))})}},4664:(an,lt,k)=>{"use strict";k.d(lt,{w:()=>Se});var f=k(4829),s=k(9360),B=k(8251);function Se(_e,Ae){return(0,s.e)((de,ae)=>{let ve=null,$=0,z=!1;const oe=()=>z&&!ve&&ae.complete();de.subscribe((0,B.x)(ae,be=>{ve?.unsubscribe();let ye=0;const De=$++;(0,f.Xf)(_e(be,De)).subscribe(ve=(0,B.x)(ae,Re=>ae.next(Ae?Ae(be,Re,De,ye++):Re),()=>{ve=null,oe()}))},()=>{z=!0,oe()}))})}},8180:(an,lt,k)=>{"use strict";k.d(lt,{q:()=>Se});var f=k(6232),s=k(9360),B=k(8251);function Se(_e){return _e<=0?()=>f.E:(0,s.e)((Ae,de)=>{let ae=0;Ae.subscribe((0,B.x)(de,ve=>{++ae<=_e&&(de.next(ve),_e<=ae&&de.complete())}))})}},9773:(an,lt,k)=>{"use strict";k.d(lt,{R:()=>_e});var f=k(9360),s=k(8251),B=k(4829),Se=k(2420);function _e(Ae){return(0,f.e)((de,ae)=>{(0,B.Xf)(Ae).subscribe((0,s.x)(ae,()=>ae.complete(),Se.Z)),!ae.closed&&de.subscribe(ae)})}},9397:(an,lt,k)=>{"use strict";k.d(lt,{b:()=>_e});var f=k(4674),s=k(9360),B=k(8251),Se=k(2737);function _e(Ae,de,ae){const ve=(0,f.m)(Ae)||de||ae?{next:Ae,error:de,complete:ae}:Ae;return ve?(0,s.e)(($,z)=>{var oe;null===(oe=ve.subscribe)||void 0===oe||oe.call(ve);let be=!0;$.subscribe((0,B.x)(z,ye=>{var De;null===(De=ve.next)||void 0===De||De.call(ve,ye),z.next(ye)},()=>{var ye;be=!1,null===(ye=ve.complete)||void 0===ye||ye.call(ve),z.complete()},ye=>{var De;be=!1,null===(De=ve.error)||void 0===De||De.call(ve,ye),z.error(ye)},()=>{var ye,De;be&&(null===(ye=ve.unsubscribe)||void 0===ye||ye.call(ve)),null===(De=ve.finalize)||void 0===De||De.call(ve)}))}):Se.y}},3026:(an,lt,k)=>{"use strict";k.d(lt,{T:()=>Se});var f=k(6973),s=k(9360),B=k(8251);function Se(Ae=_e){return(0,s.e)((de,ae)=>{let ve=!1;de.subscribe((0,B.x)(ae,$=>{ve=!0,ae.next($)},()=>ve?ae.complete():ae.error(Ae())))})}function _e(){return new f.K}},1954:(an,lt,k)=>{"use strict";k.d(lt,{o:()=>_e});var f=k(7394);class s extends f.w0{constructor(de,ae){super()}schedule(de,ae=0){return this}}const B={setInterval(Ae,de,...ae){const{delegate:ve}=B;return ve?.setInterval?ve.setInterval(Ae,de,...ae):setInterval(Ae,de,...ae)},clearInterval(Ae){const{delegate:de}=B;return(de?.clearInterval||clearInterval)(Ae)},delegate:void 0};var Se=k(9039);class _e extends s{constructor(de,ae){super(de,ae),this.scheduler=de,this.work=ae,this.pending=!1}schedule(de,ae=0){var ve;if(this.closed)return this;this.state=de;const $=this.id,z=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(z,$,ae)),this.pending=!0,this.delay=ae,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,ae),this}requestAsyncId(de,ae,ve=0){return B.setInterval(de.flush.bind(de,this),ve)}recycleAsyncId(de,ae,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ae;null!=ae&&B.clearInterval(ae)}execute(de,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(de,ae);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ae){let $,ve=!1;try{this.work(de)}catch(z){ve=!0,$=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:de,scheduler:ae}=this,{actions:ve}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Se.P)(ve,this),null!=de&&(this.id=this.recycleAsyncId(ae,de,null)),this.delay=null,super.unsubscribe()}}}},2631:(an,lt,k)=>{"use strict";k.d(lt,{v:()=>B});var f=k(4552);class s{constructor(_e,Ae=s.now){this.schedulerActionCtor=_e,this.now=Ae}schedule(_e,Ae=0,de){return new this.schedulerActionCtor(this,_e).schedule(de,Ae)}}s.now=f.l.now;class B extends s{constructor(_e,Ae=s.now){super(_e,Ae),this.actions=[],this._active=!1}flush(_e){const{actions:Ae}=this;if(this._active)return void Ae.push(_e);let de;this._active=!0;do{if(de=_e.execute(_e.state,_e.delay))break}while(_e=Ae.shift());if(this._active=!1,de){for(;_e=Ae.shift();)_e.unsubscribe();throw de}}}},6321:(an,lt,k)=>{"use strict";k.d(lt,{z:()=>B});var f=k(1954);const B=new(k(2631).v)(f.o)},4552:(an,lt,k)=>{"use strict";k.d(lt,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(an,lt,k)=>{"use strict";k.d(lt,{z:()=>f});const f={setTimeout(s,B,...Se){const{delegate:_e}=f;return _e?.setTimeout?_e.setTimeout(s,B,...Se):setTimeout(s,B,...Se)},clearTimeout(s){const{delegate:B}=f;return(B?.clearTimeout||clearTimeout)(s)},delegate:void 0}},4971:(an,lt,k)=>{"use strict";k.d(lt,{h:()=>s});const s=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(an,lt,k)=>{"use strict";k.d(lt,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(an,lt,k)=>{"use strict";k.d(lt,{K:()=>s});const s=(0,k(2306).d)(B=>function(){B(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(an,lt,k)=>{"use strict";k.d(lt,{_6:()=>Ae,jO:()=>Se,yG:()=>_e});var f=k(4674);function B(de){return de[de.length-1]}function Se(de){return(0,f.m)(B(de))?de.pop():void 0}function _e(de){return function s(de){return de&&(0,f.m)(de.schedule)}(B(de))?de.pop():void 0}function Ae(de,ae){return"number"==typeof B(de)?de.pop():ae}},7453:(an,lt,k)=>{"use strict";k.d(lt,{D:()=>_e});const{isArray:f}=Array,{getPrototypeOf:s,prototype:B,keys:Se}=Object;function _e(de){if(1===de.length){const ae=de[0];if(f(ae))return{args:ae,keys:null};if(function Ae(de){return de&&"object"==typeof de&&s(de)===B}(ae)){const ve=Se(ae);return{args:ve.map($=>ae[$]),keys:ve}}}return{args:de,keys:null}}},9039:(an,lt,k)=>{"use strict";function f(s,B){if(s){const Se=s.indexOf(B);0<=Se&&s.splice(Se,1)}}k.d(lt,{P:()=>f})},2306:(an,lt,k)=>{"use strict";function f(s){const Se=s(_e=>{Error.call(_e),_e.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}k.d(lt,{d:()=>f})},2714:(an,lt,k)=>{"use strict";function f(s,B){return s.reduce((Se,_e,Ae)=>(Se[_e]=B[Ae],Se),{})}k.d(lt,{n:()=>f})},1441:(an,lt,k)=>{"use strict";k.d(lt,{O:()=>Se,x:()=>B});var f=k(2653);let s=null;function B(_e){if(f.config.useDeprecatedSynchronousErrorHandling){const Ae=!s;if(Ae&&(s={errorThrown:!1,error:null}),_e(),Ae){const{errorThrown:de,error:ae}=s;if(s=null,de)throw ae}}else _e()}function Se(_e){f.config.useDeprecatedSynchronousErrorHandling&&s&&(s.errorThrown=!0,s.error=_e)}},7103:(an,lt,k)=>{"use strict";function f(s,B,Se,_e=0,Ae=!1){const de=B.schedule(function(){Se(),Ae?s.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(s.add(de),!Ae)return de}k.d(lt,{f:()=>f})},2737:(an,lt,k)=>{"use strict";function f(s){return s}k.d(lt,{y:()=>f})},4266:(an,lt,k)=>{"use strict";k.d(lt,{z:()=>f});const f=s=>s&&"number"==typeof s.length&&"function"!=typeof s},5726:(an,lt,k)=>{"use strict";k.d(lt,{D:()=>s});var f=k(4674);function s(B){return Symbol.asyncIterator&&(0,f.m)(B?.[Symbol.asyncIterator])}},4674:(an,lt,k)=>{"use strict";function f(s){return"function"==typeof s}k.d(lt,{m:()=>f})},8382:(an,lt,k)=>{"use strict";k.d(lt,{c:()=>B});var f=k(4850),s=k(4674);function B(Se){return(0,s.m)(Se[f.L])}},3664:(an,lt,k)=>{"use strict";k.d(lt,{T:()=>B});var f=k(4971),s=k(4674);function B(Se){return(0,s.m)(Se?.[f.h])}},4026:(an,lt,k)=>{"use strict";k.d(lt,{t:()=>s});var f=k(4674);function s(B){return(0,f.m)(B?.then)}},541:(an,lt,k)=>{"use strict";k.d(lt,{L:()=>Se,Q:()=>B});var f=k(7582),s=k(4674);function B(_e){return(0,f.FC)(this,arguments,function*(){const de=_e.getReader();try{for(;;){const{value:ae,done:ve}=yield(0,f.qq)(de.read());if(ve)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ae)}}finally{de.releaseLock()}})}function Se(_e){return(0,s.m)(_e?.getReader)}},9360:(an,lt,k)=>{"use strict";k.d(lt,{A:()=>s,e:()=>B});var f=k(4674);function s(Se){return(0,f.m)(Se?.lift)}function B(Se){return _e=>{if(s(_e))return _e.lift(function(Ae){try{return Se(Ae,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(an,lt,k)=>{"use strict";k.d(lt,{Z:()=>Se});var f=k(7398);const{isArray:s}=Array;function Se(_e){return(0,f.U)(Ae=>function B(_e,Ae){return s(Ae)?_e(...Ae):_e(Ae)}(_e,Ae))}},2420:(an,lt,k)=>{"use strict";function f(){}k.d(lt,{Z:()=>f})},8407:(an,lt,k)=>{"use strict";k.d(lt,{U:()=>B,z:()=>s});var f=k(2737);function s(...Se){return B(Se)}function B(Se){return 0===Se.length?f.y:1===Se.length?Se[0]:function(Ae){return Se.reduce((de,ae)=>ae(de),Ae)}}},3894:(an,lt,k)=>{"use strict";k.d(lt,{h:()=>B});var f=k(2653),s=k(7599);function B(Se){s.z.setTimeout(()=>{const{onUnhandledError:_e}=f.config;if(!_e)throw Se;_e(Se)})}},9853:(an,lt,k)=>{"use strict";function f(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(lt,{z:()=>f})},6814:(an,lt,k)=>{"use strict";k.d(lt,{Do:()=>Re,EM:()=>$e,HT:()=>Se,JF:()=>Sn,K0:()=>Ae,Mx:()=>Ln,NF:()=>Ss,O5:()=>ls,Ov:()=>Ei,PM:()=>li,S$:()=>be,Ts:()=>rs,V_:()=>ae,Ye:()=>Ye,b0:()=>De,bD:()=>ai,ez:()=>Ds,mk:()=>$n,q:()=>B,sg:()=>dr,uU:()=>oi,w_:()=>_e});var f=k(5879);let s=null;function B(){return s}function Se(x){s||(s=x)}class _e{}const Ae=new f.OlP("DocumentToken");let de=(()=>{class x{historyGo(j){throw new Error("Not implemented")}static#e=this.\u0275fac=function(ne){return new(ne||x)};static#t=this.\u0275prov=f.Yz7({token:x,factory:function(){return(0,f.f3M)(ve)},providedIn:"platform"})}return x})();const ae=new f.OlP("Location Initialized");let ve=(()=>{class x extends de{constructor(){super(),this._doc=(0,f.f3M)(Ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(j){const ne=B().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",j,!1),()=>ne.removeEventListener("popstate",j)}onHashChange(j){const ne=B().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",j,!1),()=>ne.removeEventListener("hashchange",j)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(j){this._location.pathname=j}pushState(j,ne,Ue){this._history.pushState(j,ne,Ue)}replaceState(j,ne,Ue){this._history.replaceState(j,ne,Ue)}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}static#e=this.\u0275fac=function(ne){return new(ne||x)};static#t=this.\u0275prov=f.Yz7({token:x,factory:function(){return new x},providedIn:"platform"})}return x})();function $(x,se){if(0==x.length)return se;if(0==se.length)return x;let j=0;return x.endsWith("/")&&j++,se.startsWith("/")&&j++,2==j?x+se.substring(1):1==j?x+se:x+"/"+se}function z(x){const se=x.match(/#|\?|$/),j=se&&se.index||x.length;return x.slice(0,j-("/"===x[j-1]?1:0))+x.slice(j)}function oe(x){return x&&"?"!==x[0]?"?"+x:x}let be=(()=>{class x{historyGo(j){throw new Error("Not implemented")}static#e=this.\u0275fac=function(ne){return new(ne||x)};static#t=this.\u0275prov=f.Yz7({token:x,factory:function(){return(0,f.f3M)(De)},providedIn:"root"})}return x})();const ye=new f.OlP("appBaseHref");let De=(()=>{class x extends be{constructor(j,ne){super(),this._platformLocation=j,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return $(this._baseHref,j)}path(j=!1){const ne=this._platformLocation.pathname+oe(this._platformLocation.search),Ue=this._platformLocation.hash;return Ue&&j?`${ne}${Ue}`:ne}pushState(j,ne,Ue,Ot){const Ht=this.prepareExternalUrl(Ue+oe(Ot));this._platformLocation.pushState(j,ne,Ht)}replaceState(j,ne,Ue,Ot){const Ht=this.prepareExternalUrl(Ue+oe(Ot));this._platformLocation.replaceState(j,ne,Ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){this._platformLocation.historyGo?.(j)}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.LFG(de),f.LFG(ye,8))};static#t=this.\u0275prov=f.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})(),Re=(()=>{class x extends be{constructor(j,ne){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(j){const ne=$(this._baseHref,j);return ne.length>0?"#"+ne:ne}pushState(j,ne,Ue,Ot){let Ht=this.prepareExternalUrl(Ue+oe(Ot));0==Ht.length&&(Ht=this._platformLocation.pathname),this._platformLocation.pushState(j,ne,Ht)}replaceState(j,ne,Ue,Ot){let Ht=this.prepareExternalUrl(Ue+oe(Ot));0==Ht.length&&(Ht=this._platformLocation.pathname),this._platformLocation.replaceState(j,ne,Ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){this._platformLocation.historyGo?.(j)}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.LFG(de),f.LFG(ye,8))};static#t=this.\u0275prov=f.Yz7({token:x,factory:x.\u0275fac})}return x})(),Ye=(()=>{class x{constructor(j){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=j;const ne=this._locationStrategy.getBaseHref();this._basePath=function Oe(x){if(new RegExp("^(https?:)?//").test(x)){const[,j]=x.split(/\/\/[^\/]+/);return j}return x}(z(Fe(ne))),this._locationStrategy.onPopState(Ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ue.state,type:Ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(j=!1){return this.normalize(this._locationStrategy.path(j))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(j,ne=""){return this.path()==this.normalize(j+oe(ne))}normalize(j){return x.stripTrailingSlash(function _t(x,se){if(!x||!se.startsWith(x))return se;const j=se.substring(x.length);return""===j||["/",";","?","#"].includes(j[0])?j:se}(this._basePath,Fe(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._locationStrategy.prepareExternalUrl(j)}go(j,ne="",Ue=null){this._locationStrategy.pushState(Ue,"",j,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+oe(ne)),Ue)}replaceState(j,ne="",Ue=null){this._locationStrategy.replaceState(Ue,"",j,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+oe(ne)),Ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(j=0){this._locationStrategy.historyGo?.(j)}onUrlChange(j){return this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)})),()=>{const ne=this._urlChangeListeners.indexOf(j);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(j="",ne){this._urlChangeListeners.forEach(Ue=>Ue(j,ne))}subscribe(j,ne,Ue){return this._subject.subscribe({next:j,error:ne,complete:Ue})}static#e=this.normalizeQueryParams=oe;static#t=this.joinWithSlash=$;static#n=this.stripTrailingSlash=z;static#r=this.\u0275fac=function(ne){return new(ne||x)(f.LFG(be))};static#i=this.\u0275prov=f.Yz7({token:x,factory:function(){return function We(){return new Ye((0,f.LFG)(be))}()},providedIn:"root"})}return x})();function Fe(x){return x.replace(/\/index.html$/,"")}var dt=function(x){return x[x.Format=0]="Format",x[x.Standalone=1]="Standalone",x}(dt||{}),bt=function(x){return x[x.Narrow=0]="Narrow",x[x.Abbreviated=1]="Abbreviated",x[x.Wide=2]="Wide",x[x.Short=3]="Short",x}(bt||{}),Ee=function(x){return x[x.Short=0]="Short",x[x.Medium=1]="Medium",x[x.Long=2]="Long",x[x.Full=3]="Full",x}(Ee||{}),Nt=function(x){return x[x.Decimal=0]="Decimal",x[x.Group=1]="Group",x[x.List=2]="List",x[x.PercentSign=3]="PercentSign",x[x.PlusSign=4]="PlusSign",x[x.MinusSign=5]="MinusSign",x[x.Exponential=6]="Exponential",x[x.SuperscriptingExponent=7]="SuperscriptingExponent",x[x.PerMille=8]="PerMille",x[x.Infinity=9]="Infinity",x[x.NaN=10]="NaN",x[x.TimeSeparator=11]="TimeSeparator",x[x.CurrencyDecimal=12]="CurrencyDecimal",x[x.CurrencyGroup=13]="CurrencyGroup",x}(Nt||{});function Ie(x,se){return gr((0,f.cg1)(x)[f.wAp.DateFormat],se)}function Pe(x,se){return gr((0,f.cg1)(x)[f.wAp.TimeFormat],se)}function je(x,se){return gr((0,f.cg1)(x)[f.wAp.DateTimeFormat],se)}function st(x,se){const j=(0,f.cg1)(x),ne=j[f.wAp.NumberSymbols][se];if(typeof ne>"u"){if(se===Nt.CurrencyDecimal)return j[f.wAp.NumberSymbols][Nt.Decimal];if(se===Nt.CurrencyGroup)return j[f.wAp.NumberSymbols][Nt.Group]}return ne}function Pn(x){if(!x[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${x[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gr(x,se){for(let j=se;j>-1;j--)if(typeof x[j]<"u")return x[j];throw new Error("Locale data API: locale data undefined")}function Jn(x){const[se,j]=x.split(":");return{hours:+se,minutes:+j}}const Mr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sr={},Jt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var In=function(x){return x[x.Short=0]="Short",x[x.ShortGMT=1]="ShortGMT",x[x.Long=2]="Long",x[x.Extended=3]="Extended",x}(In||{}),Bn=function(x){return x[x.FullYear=0]="FullYear",x[x.Month=1]="Month",x[x.Date=2]="Date",x[x.Hours=3]="Hours",x[x.Minutes=4]="Minutes",x[x.Seconds=5]="Seconds",x[x.FractionalSeconds=6]="FractionalSeconds",x[x.Day=7]="Day",x}(Bn||{}),Hn=function(x){return x[x.DayPeriods=0]="DayPeriods",x[x.Days=1]="Days",x[x.Months=2]="Months",x[x.Eras=3]="Eras",x}(Hn||{});function Er(x,se,j,ne){let Ue=function ce(x){if(H(x))return x;if("number"==typeof x&&!isNaN(x))return new Date(x);if("string"==typeof x){if(x=x.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(x)){const[Ue,Ot=1,Ht=1]=x.split("-").map(Mn=>+Mn);return br(Ue,Ot-1,Ht)}const j=parseFloat(x);if(!isNaN(x-j))return new Date(j);let ne;if(ne=x.match(Mr))return function K(x){const se=new Date(0);let j=0,ne=0;const Ue=x[8]?se.setUTCFullYear:se.setFullYear,Ot=x[8]?se.setUTCHours:se.setHours;x[9]&&(j=Number(x[9]+x[10]),ne=Number(x[9]+x[11])),Ue.call(se,Number(x[1]),Number(x[2])-1,Number(x[3]));const Ht=Number(x[4]||0)-j,Mn=Number(x[5]||0)-ne,Fr=Number(x[6]||0),ui=Math.floor(1e3*parseFloat("0."+(x[7]||0)));return Ot.call(se,Ht,Mn,Fr,ui),se}(ne)}const se=new Date(x);if(!H(se))throw new Error(`Unable to convert "${x}" into a date`);return se}(x);se=Gn(j,se)||se;let Mn,Ht=[];for(;se;){if(Mn=Jt.exec(se),!Mn){Ht.push(se);break}{Ht=Ht.concat(Mn.slice(1));const ni=Ht.pop();if(!ni)break;se=ni}}let Fr=Ue.getTimezoneOffset();ne&&(Fr=hi(ne,Fr),Ue=function qe(x,se,j){const ne=j?-1:1,Ue=x.getTimezoneOffset();return function Cr(x,se){return(x=new Date(x.getTime())).setMinutes(x.getMinutes()+se),x}(x,ne*(hi(se,Ue)-Ue))}(Ue,ne,!0));let ui="";return Ht.forEach(ni=>{const Ar=function zn(x){if(tn[x])return tn[x];let se;switch(x){case"G":case"GG":case"GGG":se=ar(Hn.Eras,bt.Abbreviated);break;case"GGGG":se=ar(Hn.Eras,bt.Wide);break;case"GGGGG":se=ar(Hn.Eras,bt.Narrow);break;case"y":se=gn(Bn.FullYear,1,0,!1,!0);break;case"yy":se=gn(Bn.FullYear,2,0,!0,!0);break;case"yyy":se=gn(Bn.FullYear,3,0,!1,!0);break;case"yyyy":se=gn(Bn.FullYear,4,0,!1,!0);break;case"Y":se=xt(1);break;case"YY":se=xt(2,!0);break;case"YYY":se=xt(3);break;case"YYYY":se=xt(4);break;case"M":case"L":se=gn(Bn.Month,1,1);break;case"MM":case"LL":se=gn(Bn.Month,2,1);break;case"MMM":se=ar(Hn.Months,bt.Abbreviated);break;case"MMMM":se=ar(Hn.Months,bt.Wide);break;case"MMMMM":se=ar(Hn.Months,bt.Narrow);break;case"LLL":se=ar(Hn.Months,bt.Abbreviated,dt.Standalone);break;case"LLLL":se=ar(Hn.Months,bt.Wide,dt.Standalone);break;case"LLLLL":se=ar(Hn.Months,bt.Narrow,dt.Standalone);break;case"w":se=Be(1);break;case"ww":se=Be(2);break;case"W":se=Be(1,!0);break;case"d":se=gn(Bn.Date,1);break;case"dd":se=gn(Bn.Date,2);break;case"c":case"cc":se=gn(Bn.Day,1);break;case"ccc":se=ar(Hn.Days,bt.Abbreviated,dt.Standalone);break;case"cccc":se=ar(Hn.Days,bt.Wide,dt.Standalone);break;case"ccccc":se=ar(Hn.Days,bt.Narrow,dt.Standalone);break;case"cccccc":se=ar(Hn.Days,bt.Short,dt.Standalone);break;case"E":case"EE":case"EEE":se=ar(Hn.Days,bt.Abbreviated);break;case"EEEE":se=ar(Hn.Days,bt.Wide);break;case"EEEEE":se=ar(Hn.Days,bt.Narrow);break;case"EEEEEE":se=ar(Hn.Days,bt.Short);break;case"a":case"aa":case"aaa":se=ar(Hn.DayPeriods,bt.Abbreviated);break;case"aaaa":se=ar(Hn.DayPeriods,bt.Wide);break;case"aaaaa":se=ar(Hn.DayPeriods,bt.Narrow);break;case"b":case"bb":case"bbb":se=ar(Hn.DayPeriods,bt.Abbreviated,dt.Standalone,!0);break;case"bbbb":se=ar(Hn.DayPeriods,bt.Wide,dt.Standalone,!0);break;case"bbbbb":se=ar(Hn.DayPeriods,bt.Narrow,dt.Standalone,!0);break;case"B":case"BB":case"BBB":se=ar(Hn.DayPeriods,bt.Abbreviated,dt.Format,!0);break;case"BBBB":se=ar(Hn.DayPeriods,bt.Wide,dt.Format,!0);break;case"BBBBB":se=ar(Hn.DayPeriods,bt.Narrow,dt.Format,!0);break;case"h":se=gn(Bn.Hours,1,-12);break;case"hh":se=gn(Bn.Hours,2,-12);break;case"H":se=gn(Bn.Hours,1);break;case"HH":se=gn(Bn.Hours,2);break;case"m":se=gn(Bn.Minutes,1);break;case"mm":se=gn(Bn.Minutes,2);break;case"s":se=gn(Bn.Seconds,1);break;case"ss":se=gn(Bn.Seconds,2);break;case"S":se=gn(Bn.FractionalSeconds,1);break;case"SS":se=gn(Bn.FractionalSeconds,2);break;case"SSS":se=gn(Bn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":se=wr(In.Short);break;case"ZZZZZ":se=wr(In.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":se=wr(In.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":se=wr(In.Long);break;default:return null}return tn[x]=se,se}(ni);ui+=Ar?Ar(Ue,j,Fr):"''"===ni?"'":ni.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ui}function br(x,se,j){const ne=new Date(0);return ne.setFullYear(x,se,j),ne.setHours(0,0,0),ne}function Gn(x,se){const j=function Dn(x){return(0,f.cg1)(x)[f.wAp.LocaleId]}(x);if(sr[j]=sr[j]||{},sr[j][se])return sr[j][se];let ne="";switch(se){case"shortDate":ne=Ie(x,Ee.Short);break;case"mediumDate":ne=Ie(x,Ee.Medium);break;case"longDate":ne=Ie(x,Ee.Long);break;case"fullDate":ne=Ie(x,Ee.Full);break;case"shortTime":ne=Pe(x,Ee.Short);break;case"mediumTime":ne=Pe(x,Ee.Medium);break;case"longTime":ne=Pe(x,Ee.Long);break;case"fullTime":ne=Pe(x,Ee.Full);break;case"short":const Ue=Gn(x,"shortTime"),Ot=Gn(x,"shortDate");ne=Wn(je(x,Ee.Short),[Ue,Ot]);break;case"medium":const Ht=Gn(x,"mediumTime"),Mn=Gn(x,"mediumDate");ne=Wn(je(x,Ee.Medium),[Ht,Mn]);break;case"long":const Fr=Gn(x,"longTime"),ui=Gn(x,"longDate");ne=Wn(je(x,Ee.Long),[Fr,ui]);break;case"full":const ni=Gn(x,"fullTime"),Ar=Gn(x,"fullDate");ne=Wn(je(x,Ee.Full),[ni,Ar])}return ne&&(sr[j][se]=ne),ne}function Wn(x,se){return se&&(x=x.replace(/\{([^}]+)}/g,function(j,ne){return null!=se&&ne in se?se[ne]:j})),x}function Jr(x,se,j="-",ne,Ue){let Ot="";(x<0||Ue&&x<=0)&&(Ue?x=1-x:(x=-x,Ot=j));let Ht=String(x);for(;Ht.length<se;)Ht="0"+Ht;return ne&&(Ht=Ht.slice(Ht.length-se)),Ot+Ht}function gn(x,se,j=0,ne=!1,Ue=!1){return function(Ot,Ht){let Mn=function Vr(x,se){switch(x){case Bn.FullYear:return se.getFullYear();case Bn.Month:return se.getMonth();case Bn.Date:return se.getDate();case Bn.Hours:return se.getHours();case Bn.Minutes:return se.getMinutes();case Bn.Seconds:return se.getSeconds();case Bn.FractionalSeconds:return se.getMilliseconds();case Bn.Day:return se.getDay();default:throw new Error(`Unknown DateType value "${x}".`)}}(x,Ot);if((j>0||Mn>-j)&&(Mn+=j),x===Bn.Hours)0===Mn&&-12===j&&(Mn=12);else if(x===Bn.FractionalSeconds)return function yi(x,se){return Jr(x,3).substring(0,se)}(Mn,se);const Fr=st(Ht,Nt.MinusSign);return Jr(Mn,se,Fr,ne,Ue)}}function ar(x,se,j=dt.Format,ne=!1){return function(Ue,Ot){return function Pr(x,se,j,ne,Ue,Ot){switch(j){case Hn.Months:return function ut(x,se,j){const ne=(0,f.cg1)(x),Ot=gr([ne[f.wAp.MonthsFormat],ne[f.wAp.MonthsStandalone]],se);return gr(Ot,j)}(se,Ue,ne)[x.getMonth()];case Hn.Days:return function Ke(x,se,j){const ne=(0,f.cg1)(x),Ot=gr([ne[f.wAp.DaysFormat],ne[f.wAp.DaysStandalone]],se);return gr(Ot,j)}(se,Ue,ne)[x.getDay()];case Hn.DayPeriods:const Ht=x.getHours(),Mn=x.getMinutes();if(Ot){const ui=function On(x){const se=(0,f.cg1)(x);return Pn(se),(se[f.wAp.ExtraData][2]||[]).map(ne=>"string"==typeof ne?Jn(ne):[Jn(ne[0]),Jn(ne[1])])}(se),ni=function sn(x,se,j){const ne=(0,f.cg1)(x);Pn(ne);const Ot=gr([ne[f.wAp.ExtraData][0],ne[f.wAp.ExtraData][1]],se)||[];return gr(Ot,j)||[]}(se,Ue,ne),Ar=ui.findIndex(pi=>{if(Array.isArray(pi)){const[Yr,Qi]=pi,Ms=Ht>=Yr.hours&&Mn>=Yr.minutes,ys=Ht<Qi.hours||Ht===Qi.hours&&Mn<Qi.minutes;if(Yr.hours<Qi.hours){if(Ms&&ys)return!0}else if(Ms||ys)return!0}else if(pi.hours===Ht&&pi.minutes===Mn)return!0;return!1});if(-1!==Ar)return ni[Ar]}return function wt(x,se,j){const ne=(0,f.cg1)(x),Ot=gr([ne[f.wAp.DayPeriodsFormat],ne[f.wAp.DayPeriodsStandalone]],se);return gr(Ot,j)}(se,Ue,ne)[Ht<12?0:1];case Hn.Eras:return function Le(x,se){return gr((0,f.cg1)(x)[f.wAp.Eras],se)}(se,ne)[x.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${j}`)}}(Ue,Ot,x,se,j,ne)}}function wr(x){return function(se,j,ne){const Ue=-1*ne,Ot=st(j,Nt.MinusSign),Ht=Ue>0?Math.floor(Ue/60):Math.ceil(Ue/60);switch(x){case In.Short:return(Ue>=0?"+":"")+Jr(Ht,2,Ot)+Jr(Math.abs(Ue%60),2,Ot);case In.ShortGMT:return"GMT"+(Ue>=0?"+":"")+Jr(Ht,1,Ot);case In.Long:return"GMT"+(Ue>=0?"+":"")+Jr(Ht,2,Ot)+":"+Jr(Math.abs(Ue%60),2,Ot);case In.Extended:return 0===ne?"Z":(Ue>=0?"+":"")+Jr(Ht,2,Ot)+":"+Jr(Math.abs(Ue%60),2,Ot);default:throw new Error(`Unknown zone width "${x}"`)}}}const ii=0,at=4;function ue(x){return br(x.getFullYear(),x.getMonth(),x.getDate()+(at-x.getDay()))}function Be(x,se=!1){return function(j,ne){let Ue;if(se){const Ot=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,Ht=j.getDate();Ue=1+Math.floor((Ht+Ot)/7)}else{const Ot=ue(j),Ht=function Dt(x){const se=br(x,ii,1).getDay();return br(x,0,1+(se<=at?at:at+7)-se)}(Ot.getFullYear()),Mn=Ot.getTime()-Ht.getTime();Ue=1+Math.round(Mn/6048e5)}return Jr(Ue,x,st(ne,Nt.MinusSign))}}function xt(x,se=!1){return function(j,ne){return Jr(ue(j).getFullYear(),x,st(ne,Nt.MinusSign),se)}}const tn={};function hi(x,se){x=x.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+x)/6e4;return isNaN(j)?se:j}function H(x){return x instanceof Date&&!isNaN(x.valueOf())}function Ln(x,se){se=encodeURIComponent(se);for(const j of x.split(";")){const ne=j.indexOf("="),[Ue,Ot]=-1==ne?[j,""]:[j.slice(0,ne),j.slice(ne+1)];if(Ue.trim()===se)return decodeURIComponent(Ot)}return null}const Un=/\s+/,vn=[];let $n=(()=>{class x{constructor(j,ne,Ue,Ot){this._iterableDiffers=j,this._keyValueDiffers=ne,this._ngEl=Ue,this._renderer=Ot,this.initialClasses=vn,this.stateMap=new Map}set klass(j){this.initialClasses=null!=j?j.trim().split(Un):vn}set ngClass(j){this.rawClass="string"==typeof j?j.trim().split(Un):j}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const j=this.rawClass;if(Array.isArray(j)||j instanceof Set)for(const ne of j)this._updateState(ne,!0);else if(null!=j)for(const ne of Object.keys(j))this._updateState(ne,!!j[ne]);this._applyStateDiff()}_updateState(j,ne){const Ue=this.stateMap.get(j);void 0!==Ue?(Ue.enabled!==ne&&(Ue.changed=!0,Ue.enabled=ne),Ue.touched=!0):this.stateMap.set(j,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const j of this.stateMap){const ne=j[0],Ue=j[1];Ue.changed?(this._toggleClass(ne,Ue.enabled),Ue.changed=!1):Ue.touched||(Ue.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),Ue.touched=!1}}_toggleClass(j,ne){(j=j.trim()).length>0&&j.split(Un).forEach(Ue=>{ne?this._renderer.addClass(this._ngEl.nativeElement,Ue):this._renderer.removeClass(this._ngEl.nativeElement,Ue)})}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))};static#t=this.\u0275dir=f.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return x})();class ti{constructor(se,j,ne,Ue){this.$implicit=se,this.ngForOf=j,this.index=ne,this.count=Ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dr=(()=>{class x{set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}constructor(j,ne,Ue){this._viewContainer=j,this._template=ne,this._differs=Ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const ne=this._viewContainer;j.forEachOperation((Ue,Ot,Ht)=>{if(null==Ue.previousIndex)ne.createEmbeddedView(this._template,new ti(Ue.item,this._ngForOf,-1,-1),null===Ht?void 0:Ht);else if(null==Ht)ne.remove(null===Ot?void 0:Ot);else if(null!==Ot){const Mn=ne.get(Ot);ne.move(Mn,Ht),Pi(Mn,Ue)}});for(let Ue=0,Ot=ne.length;Ue<Ot;Ue++){const Mn=ne.get(Ue).context;Mn.index=Ue,Mn.count=Ot,Mn.ngForOf=this._ngForOf}j.forEachIdentityChange(Ue=>{Pi(ne.get(Ue.currentIndex),Ue)})}static ngTemplateContextGuard(j,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))};static#t=this.\u0275dir=f.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return x})();function Pi(x,se){x.context.$implicit=se.item}let ls=(()=>{class x{constructor(j,ne){this._viewContainer=j,this._context=new jr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){eo("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){eo("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.Y36(f.s_b),f.Y36(f.Rgc))};static#t=this.\u0275dir=f.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return x})();class jr{constructor(){this.$implicit=null,this.ngIf=null}}function eo(x,se){if(se&&!se.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,f.AaK)(se)}'.`)}function Wi(x,se){return new f.vHH(2100,!1)}class bo{createSubscription(se,j){return(0,f.rg0)(()=>se.subscribe({next:j,error:ne=>{throw ne}}))}dispose(se){(0,f.rg0)(()=>se.unsubscribe())}}class Mi{createSubscription(se,j){return se.then(j,ne=>{throw ne})}dispose(se){}}const Uo=new Mi,ws=new bo;let Ei=(()=>{class x{constructor(j){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=j}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(j){return this._obj?j!==this._obj?(this._dispose(),this.transform(j)):this._latestValue:(j&&this._subscribe(j),this._latestValue)}_subscribe(j){this._obj=j,this._strategy=this._selectStrategy(j),this._subscription=this._strategy.createSubscription(j,ne=>this._updateLatestValue(j,ne))}_selectStrategy(j){if((0,f.QGY)(j))return Uo;if((0,f.F4k)(j))return ws;throw Wi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(j,ne){j===this._obj&&(this._latestValue=ne,this._ref.markForCheck())}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.Y36(f.sBO,16))};static#t=this.\u0275pipe=f.Yjl({name:"async",type:x,pure:!1,standalone:!0})}return x})();const qn=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Kr=new f.OlP("DATE_PIPE_DEFAULT_OPTIONS");let oi=(()=>{class x{constructor(j,ne,Ue){this.locale=j,this.defaultTimezone=ne,this.defaultOptions=Ue}transform(j,ne,Ue,Ot){if(null==j||""===j||j!=j)return null;try{return Er(j,ne??this.defaultOptions?.dateFormat??"mediumDate",Ot||this.locale,Ue??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Ht){throw Wi()}}static#e=this.\u0275fac=function(ne){return new(ne||x)(f.Y36(f.soG,16),f.Y36(qn,24),f.Y36(Kr,24))};static#t=this.\u0275pipe=f.Yjl({name:"date",type:x,pure:!0,standalone:!0})}return x})(),rs=(()=>{class x{transform(j){return JSON.stringify(j,null,2)}static#e=this.\u0275fac=function(ne){return new(ne||x)};static#t=this.\u0275pipe=f.Yjl({name:"json",type:x,pure:!1,standalone:!0})}return x})(),Ds=(()=>{class x{static#e=this.\u0275fac=function(ne){return new(ne||x)};static#t=this.\u0275mod=f.oAB({type:x});static#n=this.\u0275inj=f.cJS({})}return x})();const ai="browser",ss="server";function Ss(x){return x===ai}function li(x){return x===ss}let $e=(()=>{class x{static#e=this.\u0275prov=(0,f.Yz7)({token:x,providedIn:"root",factory:()=>new ht((0,f.LFG)(Ae),window)})}return x})();class ht{constructor(se,j){this.document=se,this.window=j,this.offset=()=>[0,0]}setOffset(se){this.offset=Array.isArray(se)?()=>se:se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}scrollToAnchor(se){if(!this.supportsScrolling())return;const j=function Lt(x,se){const j=x.getElementById(se)||x.getElementsByName(se)[0];if(j)return j;if("function"==typeof x.createTreeWalker&&x.body&&"function"==typeof x.body.attachShadow){const ne=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let Ue=ne.currentNode;for(;Ue;){const Ot=Ue.shadowRoot;if(Ot){const Ht=Ot.getElementById(se)||Ot.querySelector(`[name="${se}"]`);if(Ht)return Ht}Ue=ne.nextNode()}}return null}(this.document,se);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(se){this.supportsScrolling()&&(this.window.history.scrollRestoration=se)}scrollToElement(se){const j=se.getBoundingClientRect(),ne=j.left+this.window.pageXOffset,Ue=j.top+this.window.pageYOffset,Ot=this.offset();this.window.scrollTo(ne-Ot[0],Ue-Ot[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Sn{}},9862:(an,lt,k)=>{"use strict";k.d(lt,{JF:()=>U,eN:()=>te});var f=k(5879),s=k(2096),B=k(2459),Se=k(5592),_e=k(6328),Ae=k(2181),de=k(7398),ae=k(4716),ve=k(4664),$=k(6814);class z{}class oe{}class be{constructor(He){this.normalizedNames=new Map,this.lazyUpdate=null,He?"string"==typeof He?this.lazyInit=()=>{this.headers=new Map,He.split("\n").forEach(nt=>{const jt=nt.indexOf(":");if(jt>0){const en=nt.slice(0,jt),En=en.toLowerCase(),ln=nt.slice(jt+1).trim();this.maybeSetNormalizedName(en,En),this.headers.has(En)?this.headers.get(En).push(ln):this.headers.set(En,[ln])}})}:typeof Headers<"u"&&He instanceof Headers?(this.headers=new Map,He.forEach((nt,jt)=>{this.setHeaderEntries(jt,nt)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(He).forEach(([nt,jt])=>{this.setHeaderEntries(nt,jt)})}:this.headers=new Map}has(He){return this.init(),this.headers.has(He.toLowerCase())}get(He){this.init();const nt=this.headers.get(He.toLowerCase());return nt&&nt.length>0?nt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(He){return this.init(),this.headers.get(He.toLowerCase())||null}append(He,nt){return this.clone({name:He,value:nt,op:"a"})}set(He,nt){return this.clone({name:He,value:nt,op:"s"})}delete(He,nt){return this.clone({name:He,value:nt,op:"d"})}maybeSetNormalizedName(He,nt){this.normalizedNames.has(nt)||this.normalizedNames.set(nt,He)}init(){this.lazyInit&&(this.lazyInit instanceof be?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(He=>this.applyUpdate(He)),this.lazyUpdate=null))}copyFrom(He){He.init(),Array.from(He.headers.keys()).forEach(nt=>{this.headers.set(nt,He.headers.get(nt)),this.normalizedNames.set(nt,He.normalizedNames.get(nt))})}clone(He){const nt=new be;return nt.lazyInit=this.lazyInit&&this.lazyInit instanceof be?this.lazyInit:this,nt.lazyUpdate=(this.lazyUpdate||[]).concat([He]),nt}applyUpdate(He){const nt=He.name.toLowerCase();switch(He.op){case"a":case"s":let jt=He.value;if("string"==typeof jt&&(jt=[jt]),0===jt.length)return;this.maybeSetNormalizedName(He.name,nt);const en=("a"===He.op?this.headers.get(nt):void 0)||[];en.push(...jt),this.headers.set(nt,en);break;case"d":const En=He.value;if(En){let ln=this.headers.get(nt);if(!ln)return;ln=ln.filter(fr=>-1===En.indexOf(fr)),0===ln.length?(this.headers.delete(nt),this.normalizedNames.delete(nt)):this.headers.set(nt,ln)}else this.headers.delete(nt),this.normalizedNames.delete(nt)}}setHeaderEntries(He,nt){const jt=(Array.isArray(nt)?nt:[nt]).map(En=>En.toString()),en=He.toLowerCase();this.headers.set(en,jt),this.maybeSetNormalizedName(He,en)}forEach(He){this.init(),Array.from(this.normalizedNames.keys()).forEach(nt=>He(this.normalizedNames.get(nt),this.headers.get(nt)))}}class De{encodeKey(He){return _t(He)}encodeValue(He){return _t(He)}decodeKey(He){return decodeURIComponent(He)}decodeValue(He){return decodeURIComponent(He)}}const Ye=/%(\d[a-f0-9])/gi,We={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _t(Je){return encodeURIComponent(Je).replace(Ye,(He,nt)=>We[nt]??He)}function Fe(Je){return`${Je}`}class Oe{constructor(He={}){if(this.updates=null,this.cloneFrom=null,this.encoder=He.encoder||new De,He.fromString){if(He.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(Je,He){const nt=new Map;return Je.length>0&&Je.replace(/^\?/,"").split("&").forEach(en=>{const En=en.indexOf("="),[ln,fr]=-1==En?[He.decodeKey(en),""]:[He.decodeKey(en.slice(0,En)),He.decodeValue(en.slice(En+1))],yn=nt.get(ln)||[];yn.push(fr),nt.set(ln,yn)}),nt}(He.fromString,this.encoder)}else He.fromObject?(this.map=new Map,Object.keys(He.fromObject).forEach(nt=>{const jt=He.fromObject[nt],en=Array.isArray(jt)?jt.map(Fe):[Fe(jt)];this.map.set(nt,en)})):this.map=null}has(He){return this.init(),this.map.has(He)}get(He){this.init();const nt=this.map.get(He);return nt?nt[0]:null}getAll(He){return this.init(),this.map.get(He)||null}keys(){return this.init(),Array.from(this.map.keys())}append(He,nt){return this.clone({param:He,value:nt,op:"a"})}appendAll(He){const nt=[];return Object.keys(He).forEach(jt=>{const en=He[jt];Array.isArray(en)?en.forEach(En=>{nt.push({param:jt,value:En,op:"a"})}):nt.push({param:jt,value:en,op:"a"})}),this.clone(nt)}set(He,nt){return this.clone({param:He,value:nt,op:"s"})}delete(He,nt){return this.clone({param:He,value:nt,op:"d"})}toString(){return this.init(),this.keys().map(He=>{const nt=this.encoder.encodeKey(He);return this.map.get(He).map(jt=>nt+"="+this.encoder.encodeValue(jt)).join("&")}).filter(He=>""!==He).join("&")}clone(He){const nt=new Oe({encoder:this.encoder});return nt.cloneFrom=this.cloneFrom||this,nt.updates=(this.updates||[]).concat(He),nt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(He=>this.map.set(He,this.cloneFrom.map.get(He))),this.updates.forEach(He=>{switch(He.op){case"a":case"s":const nt=("a"===He.op?this.map.get(He.param):void 0)||[];nt.push(Fe(He.value)),this.map.set(He.param,nt);break;case"d":if(void 0===He.value){this.map.delete(He.param);break}{let jt=this.map.get(He.param)||[];const en=jt.indexOf(Fe(He.value));-1!==en&&jt.splice(en,1),jt.length>0?this.map.set(He.param,jt):this.map.delete(He.param)}}}),this.cloneFrom=this.updates=null)}}class Ze{constructor(){this.map=new Map}set(He,nt){return this.map.set(He,nt),this}get(He){return this.map.has(He)||this.map.set(He,He.defaultValue()),this.map.get(He)}delete(He){return this.map.delete(He),this}has(He){return this.map.has(He)}keys(){return this.map.keys()}}function dt(Je){return typeof ArrayBuffer<"u"&&Je instanceof ArrayBuffer}function bt(Je){return typeof Blob<"u"&&Je instanceof Blob}function Ee(Je){return typeof FormData<"u"&&Je instanceof FormData}class Vt{constructor(He,nt,jt,en){let En;if(this.url=nt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=He.toUpperCase(),function Ge(Je){switch(Je){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||en?(this.body=void 0!==jt?jt:null,En=en):En=jt,En&&(this.reportProgress=!!En.reportProgress,this.withCredentials=!!En.withCredentials,En.responseType&&(this.responseType=En.responseType),En.headers&&(this.headers=En.headers),En.context&&(this.context=En.context),En.params&&(this.params=En.params)),this.headers||(this.headers=new be),this.context||(this.context=new Ze),this.params){const ln=this.params.toString();if(0===ln.length)this.urlWithParams=nt;else{const fr=nt.indexOf("?");this.urlWithParams=nt+(-1===fr?"?":fr<nt.length-1?"&":"")+ln}}else this.params=new Oe,this.urlWithParams=nt}serializeBody(){return null===this.body?null:dt(this.body)||bt(this.body)||Ee(this.body)||function Nt(Je){return typeof URLSearchParams<"u"&&Je instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ee(this.body)?null:bt(this.body)?this.body.type||null:dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(He={}){const nt=He.method||this.method,jt=He.url||this.url,en=He.responseType||this.responseType,En=void 0!==He.body?He.body:this.body,ln=void 0!==He.withCredentials?He.withCredentials:this.withCredentials,fr=void 0!==He.reportProgress?He.reportProgress:this.reportProgress;let yn=He.headers||this.headers,yt=He.params||this.params;const ft=He.context??this.context;return void 0!==He.setHeaders&&(yn=Object.keys(He.setHeaders).reduce((Ft,un)=>Ft.set(un,He.setHeaders[un]),yn)),He.setParams&&(yt=Object.keys(He.setParams).reduce((Ft,un)=>Ft.set(un,He.setParams[un]),yt)),new Vt(nt,jt,En,{params:yt,headers:yn,context:ft,reportProgress:fr,responseType:en,withCredentials:ln})}}var Dn=function(Je){return Je[Je.Sent=0]="Sent",Je[Je.UploadProgress=1]="UploadProgress",Je[Je.ResponseHeader=2]="ResponseHeader",Je[Je.DownloadProgress=3]="DownloadProgress",Je[Je.Response=4]="Response",Je[Je.User=5]="User",Je}(Dn||{});class wt{constructor(He,nt=200,jt="OK"){this.headers=He.headers||new be,this.status=void 0!==He.status?He.status:nt,this.statusText=He.statusText||jt,this.url=He.url||null,this.ok=this.status>=200&&this.status<300}}class Ke extends wt{constructor(He={}){super(He),this.type=Dn.ResponseHeader}clone(He={}){return new Ke({headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class ut extends wt{constructor(He={}){super(He),this.type=Dn.Response,this.body=void 0!==He.body?He.body:null}clone(He={}){return new ut({body:void 0!==He.body?He.body:this.body,headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class Le extends wt{constructor(He){super(He,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${He.url||"(unknown url)"}`:`Http failure response for ${He.url||"(unknown url)"}: ${He.status} ${He.statusText}`,this.error=He.error||null}}function we(Je,He){return{body:He,headers:Je.headers,context:Je.context,observe:Je.observe,params:Je.params,reportProgress:Je.reportProgress,responseType:Je.responseType,withCredentials:Je.withCredentials}}let te=(()=>{class Je{constructor(nt){this.handler=nt}request(nt,jt,en={}){let En;if(nt instanceof Vt)En=nt;else{let yn,yt;yn=en.headers instanceof be?en.headers:new be(en.headers),en.params&&(yt=en.params instanceof Oe?en.params:new Oe({fromObject:en.params})),En=new Vt(nt,jt,void 0!==en.body?en.body:null,{headers:yn,context:en.context,params:yt,reportProgress:en.reportProgress,responseType:en.responseType||"json",withCredentials:en.withCredentials})}const ln=(0,s.of)(En).pipe((0,_e.b)(yn=>this.handler.handle(yn)));if(nt instanceof Vt||"events"===en.observe)return ln;const fr=ln.pipe((0,Ae.h)(yn=>yn instanceof ut));switch(en.observe||"body"){case"body":switch(En.responseType){case"arraybuffer":return fr.pipe((0,de.U)(yn=>{if(null!==yn.body&&!(yn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return yn.body}));case"blob":return fr.pipe((0,de.U)(yn=>{if(null!==yn.body&&!(yn.body instanceof Blob))throw new Error("Response is not a Blob.");return yn.body}));case"text":return fr.pipe((0,de.U)(yn=>{if(null!==yn.body&&"string"!=typeof yn.body)throw new Error("Response is not a string.");return yn.body}));default:return fr.pipe((0,de.U)(yn=>yn.body))}case"response":return fr;default:throw new Error(`Unreachable: unhandled observe type ${en.observe}}`)}}delete(nt,jt={}){return this.request("DELETE",nt,jt)}get(nt,jt={}){return this.request("GET",nt,jt)}head(nt,jt={}){return this.request("HEAD",nt,jt)}jsonp(nt,jt){return this.request("JSONP",nt,{params:(new Oe).append(jt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(nt,jt={}){return this.request("OPTIONS",nt,jt)}patch(nt,jt,en={}){return this.request("PATCH",nt,we(en,jt))}post(nt,jt,en={}){return this.request("POST",nt,we(en,jt))}put(nt,jt,en={}){return this.request("PUT",nt,we(en,jt))}static#e=this.\u0275fac=function(jt){return new(jt||Je)(f.LFG(z))};static#t=this.\u0275prov=f.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();function Kt(Je,He){return He(Je)}function bn(Je,He){return(nt,jt)=>He.intercept(nt,{handle:en=>Je(en,jt)})}const Pn=new f.OlP(""),On=new f.OlP(""),sn=new f.OlP("");function Nn(){let Je=null;return(He,nt)=>{null===Je&&(Je=((0,f.f3M)(Pn,{optional:!0})??[]).reduceRight(bn,Kt));const jt=(0,f.f3M)(f.HDt),en=jt.add();return Je(He,nt).pipe((0,ae.x)(()=>jt.remove(en)))}}let gr=(()=>{class Je extends z{constructor(nt,jt){super(),this.backend=nt,this.injector=jt,this.chain=null,this.pendingTasks=(0,f.f3M)(f.HDt)}handle(nt){if(null===this.chain){const en=Array.from(new Set([...this.injector.get(On),...this.injector.get(sn,[])]));this.chain=en.reduceRight((En,ln)=>function Yn(Je,He,nt){return(jt,en)=>nt.runInContext(()=>He(jt,En=>Je(En,en)))}(En,ln,this.injector),Kt)}const jt=this.pendingTasks.add();return this.chain(nt,en=>this.backend.handle(en)).pipe((0,ae.x)(()=>this.pendingTasks.remove(jt)))}static#e=this.\u0275fac=function(jt){return new(jt||Je)(f.LFG(oe),f.LFG(f.lqb))};static#t=this.\u0275prov=f.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();const br=/^\)\]\}',?\n/;let Wn=(()=>{class Je{constructor(nt){this.xhrFactory=nt}handle(nt){if("JSONP"===nt.method)throw new f.vHH(-2800,!1);const jt=this.xhrFactory;return(jt.\u0275loadImpl?(0,B.D)(jt.\u0275loadImpl()):(0,s.of)(null)).pipe((0,ve.w)(()=>new Se.y(En=>{const ln=jt.build();if(ln.open(nt.method,nt.urlWithParams),nt.withCredentials&&(ln.withCredentials=!0),nt.headers.forEach((vn,$n)=>ln.setRequestHeader(vn,$n.join(","))),nt.headers.has("Accept")||ln.setRequestHeader("Accept","application/json, text/plain, */*"),!nt.headers.has("Content-Type")){const vn=nt.detectContentTypeHeader();null!==vn&&ln.setRequestHeader("Content-Type",vn)}if(nt.responseType){const vn=nt.responseType.toLowerCase();ln.responseType="json"!==vn?vn:"text"}const fr=nt.serializeBody();let yn=null;const yt=()=>{if(null!==yn)return yn;const vn=ln.statusText||"OK",$n=new be(ln.getAllResponseHeaders()),Dr=function Gn(Je){return"responseURL"in Je&&Je.responseURL?Je.responseURL:/^X-Request-URL:/m.test(Je.getAllResponseHeaders())?Je.getResponseHeader("X-Request-URL"):null}(ln)||nt.url;return yn=new Ke({headers:$n,status:ln.status,statusText:vn,url:Dr}),yn},ft=()=>{let{headers:vn,status:$n,statusText:Dr,url:fi}=yt(),ti=null;204!==$n&&(ti=typeof ln.response>"u"?ln.responseText:ln.response),0===$n&&($n=ti?200:0);let dr=$n>=200&&$n<300;if("json"===nt.responseType&&"string"==typeof ti){const Pi=ti;ti=ti.replace(br,"");try{ti=""!==ti?JSON.parse(ti):null}catch(gi){ti=Pi,dr&&(dr=!1,ti={error:gi,text:ti})}}dr?(En.next(new ut({body:ti,headers:vn,status:$n,statusText:Dr,url:fi||void 0})),En.complete()):En.error(new Le({error:ti,headers:vn,status:$n,statusText:Dr,url:fi||void 0}))},Ft=vn=>{const{url:$n}=yt(),Dr=new Le({error:vn,status:ln.status||0,statusText:ln.statusText||"Unknown Error",url:$n||void 0});En.error(Dr)};let un=!1;const Ln=vn=>{un||(En.next(yt()),un=!0);let $n={type:Dn.DownloadProgress,loaded:vn.loaded};vn.lengthComputable&&($n.total=vn.total),"text"===nt.responseType&&ln.responseText&&($n.partialText=ln.responseText),En.next($n)},Un=vn=>{let $n={type:Dn.UploadProgress,loaded:vn.loaded};vn.lengthComputable&&($n.total=vn.total),En.next($n)};return ln.addEventListener("load",ft),ln.addEventListener("error",Ft),ln.addEventListener("timeout",Ft),ln.addEventListener("abort",Ft),nt.reportProgress&&(ln.addEventListener("progress",Ln),null!==fr&&ln.upload&&ln.upload.addEventListener("progress",Un)),ln.send(fr),En.next({type:Dn.Sent}),()=>{ln.removeEventListener("error",Ft),ln.removeEventListener("abort",Ft),ln.removeEventListener("load",ft),ln.removeEventListener("timeout",Ft),nt.reportProgress&&(ln.removeEventListener("progress",Ln),null!==fr&&ln.upload&&ln.upload.removeEventListener("progress",Un)),ln.readyState!==ln.DONE&&ln.abort()}})))}static#e=this.\u0275fac=function(jt){return new(jt||Je)(f.LFG($.JF))};static#t=this.\u0275prov=f.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();const Jr=new f.OlP("XSRF_ENABLED"),gn=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ar=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Pr{}let wr=(()=>{class Je{constructor(nt,jt,en){this.doc=nt,this.platform=jt,this.cookieName=en,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const nt=this.doc.cookie||"";return nt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,$.Mx)(nt,this.cookieName),this.lastCookieString=nt),this.lastToken}static#e=this.\u0275fac=function(jt){return new(jt||Je)(f.LFG($.K0),f.LFG(f.Lbi),f.LFG(gn))};static#t=this.\u0275prov=f.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();function ii(Je,He){const nt=Je.url.toLowerCase();if(!(0,f.f3M)(Jr)||"GET"===Je.method||"HEAD"===Je.method||nt.startsWith("http://")||nt.startsWith("https://"))return He(Je);const jt=(0,f.f3M)(Pr).getToken(),en=(0,f.f3M)(ar);return null!=jt&&!Je.headers.has(en)&&(Je=Je.clone({headers:Je.headers.set(en,jt)})),He(Je)}var Dt=function(Je){return Je[Je.Interceptors=0]="Interceptors",Je[Je.LegacyInterceptors=1]="LegacyInterceptors",Je[Je.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Je[Je.NoXsrfProtection=3]="NoXsrfProtection",Je[Je.JsonpSupport=4]="JsonpSupport",Je[Je.RequestsMadeViaParent=5]="RequestsMadeViaParent",Je[Je.Fetch=6]="Fetch",Je}(Dt||{});function Be(...Je){const He=[te,Wn,gr,{provide:z,useExisting:gr},{provide:oe,useExisting:Wn},{provide:On,useValue:ii,multi:!0},{provide:Jr,useValue:!0},{provide:Pr,useClass:wr}];for(const nt of Je)He.push(...nt.\u0275providers);return(0,f.MR2)(He)}const tn=new f.OlP("LEGACY_INTERCEPTOR_FN");function zn(){return function ue(Je,He){return{\u0275kind:Je,\u0275providers:He}}(Dt.LegacyInterceptors,[{provide:tn,useFactory:Nn},{provide:On,useExisting:tn,multi:!0}])}let U=(()=>{class Je{static#e=this.\u0275fac=function(jt){return new(jt||Je)};static#t=this.\u0275mod=f.oAB({type:Je});static#n=this.\u0275inj=f.cJS({providers:[Be(zn())]})}return Je})()},5879:(an,lt,k)=>{"use strict";k.d(lt,{$8M:()=>Kl,$WT:()=>Bi,$Z:()=>L,AFp:()=>am,ALo:()=>cA,AaK:()=>oe,AsE:()=>Ly,CHM:()=>Ru,CRH:()=>CA,DdM:()=>tA,EJc:()=>RT,EiD:()=>zp,EpF:()=>qi,F$t:()=>D0,F4k:()=>Si,FYo:()=>__,FiY:()=>jc,GfV:()=>_m,Gpc:()=>De,HDt:()=>GA,Hsn:()=>S0,JOm:()=>Xu,JVY:()=>ud,JZr:()=>Fe,KtG:()=>ec,L6k:()=>Wg,LAX:()=>Kg,LFG:()=>Zt,LSH:()=>Gp,Lbi:()=>cm,Lck:()=>vC,MGl:()=>Xv,MMx:()=>qE,MR2:()=>As,NdJ:()=>ho,Ojb:()=>lm,OlP:()=>gn,Oqu:()=>Fy,P3R:()=>Ah,PXZ:()=>aw,Q6J:()=>Zm,QGY:()=>Xs,QbO:()=>vd,Qsj:()=>pv,R0b:()=>bs,RDi:()=>ld,Rgc:()=>tv,SBq:()=>Lf,Sil:()=>kT,Suo:()=>bA,TTD:()=>Ar,TgZ:()=>Cg,Udp:()=>Oy,VKq:()=>nA,VuI:()=>zw,X6Q:()=>gw,XFs:()=>In,Xpm:()=>Mi,Xq5:()=>yr,Xts:()=>gd,Y36:()=>P,YKP:()=>ZE,YNc:()=>Hm,Yjl:()=>fo,Yz7:()=>Pn,Z0I:()=>gr,ZZ4:()=>v0,_Bn:()=>$E,_UZ:()=>aa,_c5:()=>xw,_uU:()=>Q0,aQg:()=>y0,c2e:()=>ZA,cJS:()=>sn,cg1:()=>Vy,dDg:()=>rw,dqk:()=>Wn,eBb:()=>dd,eFA:()=>nI,eJc:()=>t0,ekj:()=>Ny,eoX:()=>JA,f3M:()=>cn,g9A:()=>Jc,h0i:()=>Sg,hGG:()=>Rw,hij:()=>ny,iGM:()=>IA,ifc:()=>ln,ip1:()=>$A,jDz:()=>WE,kL8:()=>mE,lG2:()=>ts,lcZ:()=>lA,lqb:()=>dc,lri:()=>QA,mCW:()=>Qc,n5z:()=>yl,oAB:()=>gs,oxw:()=>w0,pB0:()=>Pf,q3G:()=>hu,q4F:()=>vm,qFp:()=>Zw,qLn:()=>yu,qOj:()=>fc,qZA:()=>Qh,qzn:()=>Aa,rWj:()=>YA,rg0:()=>Ot,s9C:()=>My,sBO:()=>mw,s_b:()=>ly,soG:()=>dy,tb:()=>h0,tp0:()=>Ha,uIk:()=>Hs,vHH:()=>Oe,vpe:()=>tl,wAp:()=>Qm,xi3:()=>uA,xp6:()=>m,z2F:()=>e_,z3N:()=>_o,zSh:()=>rm,zs3:()=>hc});var f=k(8645),s=k(7394),B=k(5592),Se=k(3019),_e=k(5619),Ae=k(2096),de=k(3020),ae=k(4664),ve=k(3997);function $(t){for(let n in t)if(t[n]===$)return n;throw Error("Could not find renamed property on target object.")}function z(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function be(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ye=$({__forward_ref__:$});function De(t){return t.__forward_ref__=De,t.toString=function(){return oe(this())},t}function Re(t){return Ye(t)?t():t}function Ye(t){return"function"==typeof t&&t.hasOwnProperty(ye)&&t.__forward_ref__===De}function We(t){return t&&!!t.\u0275providers}const Fe="https://g.co/ng/security#xss";class Oe extends Error{constructor(n,i){super(function tt(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Ze(t){return"string"==typeof t?t:null==t?"":String(t)}function Nt(t,n){throw new Oe(-201,!1)}function Bt(t,n){null==t&&function Gt(t,n,i,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${i} ${a} ${n} <=Actual]`))}(n,t,null,"!=")}function Pn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nn(t){return Jn(t,xn)||Jn(t,sr)}function gr(t){return null!==Nn(t)}function Jn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Br(t){return t&&(t.hasOwnProperty(Mr)||t.hasOwnProperty(Jt))?t[Mr]:null}const xn=$({\u0275prov:$}),Mr=$({\u0275inj:$}),sr=$({ngInjectableDef:$}),Jt=$({ngInjectorDef:$});var In=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(In||{});let Bn;function Er(t){const n=Bn;return Bn=t,n}function br(t,n,i){const a=Nn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:i&In.Optional?null:void 0!==n?n:void Nt(oe(t))}const Wn=globalThis;class gn{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Pn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const zn={},hi="__NG_DI_FLAG__",Cr="ngTempTokenPath",ce=/\n/gm,H="__source";let U;function Xe(t){const n=U;return U=t,n}function kt(t,n=In.Default){if(void 0===U)throw new Oe(-203,!1);return null===U?br(t,void 0,n):U.get(t,n&In.Optional?null:void 0,n)}function Zt(t,n=In.Default){return(function Hn(){return Bn}()||kt)(Re(t),n)}function cn(t,n=In.Default){return Zt(t,fn(n))}function fn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xn(t){const n=[];for(let i=0;i<t.length;i++){const a=Re(t[i]);if(Array.isArray(a)){if(0===a.length)throw new Oe(900,!1);let d,p=In.Default;for(let b=0;b<a.length;b++){const D=a[b],R=He(D);"number"==typeof R?-1===R?d=D.token:p|=R:d=D}n.push(Zt(d,p))}else n.push(Zt(a))}return n}function Je(t,n){return t[hi]=n,t.prototype[hi]=n,t}function He(t){return t[hi]}function en(t){return{toString:t}.toString()}var En=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(En||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{});const fr={},yn=[],yt=$({\u0275cmp:$}),ft=$({\u0275dir:$}),Ft=$({\u0275pipe:$}),un=$({\u0275mod:$}),Ln=$({\u0275fac:$}),Un=$({__NG_ELEMENT_ID__:$}),vn=$({__NG_ENV_ID__:$});function $n(t,n,i){let a=t.length;for(;;){const d=t.indexOf(n,i);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=n.length;if(d+p===a||t.charCodeAt(d+p)<=32)return d}i=d+1}}function Dr(t,n,i){let a=0;for(;a<i.length;){const d=i[a];if("number"==typeof d){if(0!==d)break;a++;const p=i[a++],b=i[a++],D=i[a++];t.setAttribute(n,b,D,p)}else{const p=d,b=i[++a];ti(p)?t.setProperty(n,p,b):t.setAttribute(n,p,b),a++}}return a}function fi(t){return 3===t||4===t||6===t}function ti(t){return 64===t.charCodeAt(0)}function dr(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let a=0;a<n.length;a++){const d=n[a];"number"==typeof d?i=d:0===i||Pi(t,i,d,null,-1===i||2===i?n[++a]:null)}}return t}function Pi(t,n,i,a,d){let p=0,b=t.length;if(-1===n)b=-1;else for(;p<t.length;){const D=t[p++];if("number"==typeof D){if(D===n){b=-1;break}if(D>n){b=p-1;break}}}for(;p<t.length;){const D=t[p];if("number"==typeof D)break;if(D===i){if(null===a)return void(null!==d&&(t[p+1]=d));if(a===t[p+1])return void(t[p+2]=d)}p++,null!==a&&p++,null!==d&&p++}-1!==b&&(t.splice(b,0,n),p=b+1),t.splice(p++,0,i),null!==a&&t.splice(p++,0,a),null!==d&&t.splice(p++,0,d)}const gi="ng-template";function ls(t,n,i){let a=0,d=!0;for(;a<t.length;){let p=t[a++];if("string"==typeof p&&d){const b=t[a++];if(i&&"class"===p&&-1!==$n(b.toLowerCase(),n,0))return!0}else{if(1===p){for(;a<t.length&&"string"==typeof(p=t[a++]);)if(p.toLowerCase()===n)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function jr(t){return 4===t.type&&t.value!==gi}function eo(t,n,i){return n===(4!==t.type||i?t.value:gi)}function ps(t,n,i){let a=4;const d=t.attrs||[],p=function Oi(t){for(let n=0;n<t.length;n++)if(fi(t[n]))return n;return t.length}(d);let b=!1;for(let D=0;D<n.length;D++){const R=n[D];if("number"!=typeof R){if(!b)if(4&a){if(a=2|1&a,""!==R&&!eo(t,R,i)||""===R&&1===n.length){if(Vi(a))return!1;b=!0}}else{const q=8&a?R:n[++D];if(8&a&&null!==t.attrs){if(!ls(t.attrs,q,i)){if(Vi(a))return!1;b=!0}continue}const xe=Ys(8&a?"class":R,d,jr(t),i);if(-1===xe){if(Vi(a))return!1;b=!0;continue}if(""!==q){let ct;ct=xe>p?"":d[xe+1].toLowerCase();const Et=8&a?ct:null;if(Et&&-1!==$n(Et,q,0)||2&a&&q!==ct){if(Vi(a))return!1;b=!0}}}}else{if(!b&&!Vi(a)&&!Vi(R))return!1;if(b&&Vi(R))continue;b=!1,a=R|1&a}}return Vi(a)||b}function Vi(t){return 0==(1&t)}function Ys(t,n,i,a){if(null===n)return-1;let d=0;if(a||!i){let p=!1;for(;d<n.length;){const b=n[d];if(b===t)return d;if(3===b||6===b)p=!0;else{if(1===b||2===b){let D=n[++d];for(;"string"==typeof D;)D=n[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=p?1:2}return-1}return function Xr(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const a=t[i];if("number"==typeof a)return-1;if(a===n)return i;i++}return-1}(n,t)}function si(t,n,i=!1){for(let a=0;a<n.length;a++)if(ps(t,n[a],i))return!0;return!1}function Vo(t,n){e:for(let i=0;i<n.length;i++){const a=n[i];if(t.length===a.length){for(let d=0;d<t.length;d++)if(t[d]!==a[d])continue e;return!0}}return!1}function Us(t,n){return t?":not("+n.trim()+")":n}function Ui(t){let n=t[0],i=1,a=2,d="",p=!1;for(;i<t.length;){let b=t[i];if("string"==typeof b)if(2&a){const D=t[++i];d+="["+b+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!Vi(b)&&(n+=Us(p,d),d=""),a=b,p=p||!Vi(a);i++}return""!==d&&(n+=Us(p,d)),n}function Mi(t){return en(()=>{const n=ns(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||yn,_:null,schemas:t.schemas||null,tView:null,id:""};rs(i);const a=t.dependencies;return i.directiveDefs=Co(a,!1),i.pipeDefs=Co(a,!0),i.id=function Bs(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const d of i)n=Math.imul(31,n)+d.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function ws(t){return qn(t)||Kr(t)}function Ei(t){return null!==t}function gs(t){return en(()=>({type:t.type,bootstrap:t.bootstrap||yn,declarations:t.declarations||yn,imports:t.imports||yn,exports:t.exports||yn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function to(t,n){if(null==t)return fr;const i={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),i[d]=a,n&&(n[d]=p)}return i}function ts(t){return en(()=>{const n=ns(t);return rs(n),n})}function fo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function qn(t){return t[yt]||null}function Kr(t){return t[ft]||null}function oi(t){return t[Ft]||null}function Bi(t){const n=qn(t)||Kr(t)||oi(t);return null!==n&&n.standalone}function ei(t,n){const i=t[un]||null;if(!i&&!0===n)throw new Error(`Type ${oe(t)} does not have '\u0275mod' property.`);return i}function ns(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||fr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||yn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:to(t.inputs,n),outputs:to(t.outputs)}}function rs(t){t.features?.forEach(n=>n(t))}function Co(t,n){if(!t)return null;const i=n?oi:ws;return()=>("function"==typeof t?t():t).map(a=>i(a)).filter(Ei)}const Hr=0,_n=1,er=2,xr=3,Ni=4,is=5,ci=6,Ds=7,ai=8,ss=9,_s=10,tr=11,Ss=12,li=13,re=14,Y=15,Ne=16,$e=17,ht=18,Lt=19,pn=20,Sn=21,Qt=22,An=23,mr=24,jn=25,zr=1,Rr=2,mi=7,us=9,vr=11;function Qr(t){return Array.isArray(t)&&"object"==typeof t[zr]}function Ii(t){return Array.isArray(t)&&!0===t[zr]}function po(t){return 0!=(4&t.flags)}function os(t){return t.componentOffset>-1}function Ps(t){return 1==(1&t.flags)}function Ki(t){return!!t.template}function Sa(t){return 0!=(512&t[er])}function no(t,n){return t.hasOwnProperty(Ln)?t[Ln]:null}let Lr=null,la=!1;function ji(t){const n=Lr;return Lr=t,n}const Tc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function go(t){if(!Ho(t)||t.dirty){if(!t.producerMustRecompute(t)&&!cl(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Oa(t){t.dirty=!0,function wo(t){if(void 0===t.liveConsumerNode)return;const n=la;la=!0;try{for(const i of t.liveConsumerNode)i.dirty||Oa(i)}finally{la=n}}(t),t.consumerMarkedDirty?.(t)}function pr(t){return t&&(t.nextProducerIndex=0),ji(t)}function wc(t,n){if(ji(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ho(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)jo(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function cl(t){da(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],a=t.producerLastReadVersion[n];if(a!==i.version||(go(i),a!==i.version))return!0}return!1}function Dc(t){if(da(t),Ho(t))for(let n=0;n<t.producerNode.length;n++)jo(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function jo(t,n){if(function ll(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),da(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)jo(t.producerNode[a],t.producerIndexOfThis[a]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[n],d=t.liveConsumerNode[n];da(d),d.producerIndexOfThis[a]=n}}function Ho(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function da(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Na=null;function Ot(t){const n=ji(null);try{return t()}finally{ji(n)}}const Mn=()=>{},Fr=(()=>({...Tc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Mn}))();class ni{constructor(n,i,a){this.previousValue=n,this.currentValue=i,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ar(){return pi}function pi(t){return t.type.prototype.ngOnChanges&&(t.setInput=Qi),Yr}function Yr(){const t=ys(this),n=t?.current;if(n){const i=t.previous;if(i===fr)t.previous=n;else for(let a in n)i[a]=n[a];t.current=null,this.ngOnChanges(n)}}function Qi(t,n,i,a){const d=this.declaredInputs[i],p=ys(t)||function $o(t,n){return t[Ms]=n}(t,{previous:fr,current:null}),b=p.current||(p.current={}),D=p.previous,R=D[d];b[d]=new ni(R&&R.currentValue,n,D===fr),t[a]=n}Ar.ngInherit=!0;const Ms="__ngSimpleChanges__";function ys(t){return t[Ms]||null}const lr=function(t,n,i){};function vi(t){for(;Array.isArray(t);)t=t[Hr];return t}function Zo(t,n){return vi(n[t])}function Os(t,n){return vi(n[t.index])}function Pc(t,n){return t.data[n]}function Go(t,n){return t[n]}function Ns(t,n){const i=n[t];return Qr(i)?i:i[Hr]}function qo(t,n){return null==n?null:t[n]}function Wo(t){t[$e]=0}function Mo(t){1024&t[er]||(t[er]|=1024,Nd(t,1))}function Su(t){1024&t[er]&&(t[er]&=-1025,Nd(t,-1))}function Nd(t,n){let i=t[xr];if(null===i)return;i[is]+=n;let a=i;for(i=i[xr];null!==i&&(1===n&&1===a[is]||-1===n&&0===a[is]);)i[is]+=n,a=i,i=i[xr]}const hr={lFrame:Fs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Li(){return hr.bindingsEnabled}function Fa(){return null!==hr.skipHydrationRootTNode}function qt(){return hr.lFrame.lView}function $r(){return hr.lFrame.tView}function Ru(t){return hr.lFrame.contextLView=t,t[ai]}function ec(t){return hr.lFrame.contextLView=null,t}function Es(){let t=Yi();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yi(){return hr.lFrame.currentTNode}function ks(t,n){const i=hr.lFrame;i.currentTNode=t,i.isParent=n}function Nc(){return hr.lFrame.isParent}function tc(){hr.lFrame.isParent=!1}function Ws(){const t=hr.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function fa(){return hr.lFrame.bindingIndex++}function S(t){const n=hr.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function N(t,n){const i=hr.lFrame;i.bindingIndex=i.bindingRootIndex=t,fe(n)}function fe(t){hr.lFrame.currentDirectiveIndex=t}function St(){return hr.lFrame.currentQueryIndex}function Mt(t){hr.lFrame.currentQueryIndex=t}function Tn(t){const n=t[_n];return 2===n.type?n.declTNode:1===n.type?t[ci]:null}function Tr(t,n,i){if(i&In.SkipSelf){let d=n,p=t;for(;!(d=d.parent,null!==d||i&In.Host||(d=Tn(p),null===d||(p=p[re],10&d.type))););if(null===d)return!1;n=d,t=p}const a=hr.lFrame=Ir();return a.currentTNode=n,a.lView=t,!0}function di(t){const n=Ir(),i=t[_n];hr.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Ir(){const t=hr.lFrame,n=null===t?null:t.child;return null===n?Fs(t):n}function Fs(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function io(){const t=hr.lFrame;return hr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ro=io;function pa(){const t=io();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ks(){return hr.lFrame.selectedIndex}function No(t){hr.lFrame.selectedIndex=t}function ki(){const t=hr.lFrame;return Pc(t.tView,t.selectedIndex)}let tf=!0;function ku(){return tf}function Yo(t){tf=t}function Lu(t,n){for(let i=n.directiveStart,a=n.directiveEnd;i<a;i++){const p=t.data[i].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:D,ngAfterViewInit:R,ngAfterViewChecked:q,ngOnDestroy:le}=p;b&&(t.contentHooks??=[]).push(-i,b),D&&((t.contentHooks??=[]).push(i,D),(t.contentCheckHooks??=[]).push(i,D)),R&&(t.viewHooks??=[]).push(-i,R),q&&((t.viewHooks??=[]).push(i,q),(t.viewCheckHooks??=[]).push(i,q)),null!=le&&(t.destroyHooks??=[]).push(i,le)}}function La(t,n,i){Bd(t,n,3,i)}function Va(t,n,i,a){(3&t[er])===i&&Bd(t,n,i,a)}function Jo(t,n){let i=t[er];(3&i)===n&&(i&=8191,i+=1,t[er]=i)}function Bd(t,n,i,a){const p=a??-1,b=n.length-1;let D=0;for(let R=void 0!==a?65535&t[$e]:0;R<b;R++)if("number"==typeof n[R+1]){if(D=n[R],null!=a&&D>=a)break}else n[R]<0&&(t[$e]+=65536),(D<p||-1==p)&&(Uu(t,i,n,R),t[$e]=(4294901760&t[$e])+R+2),R++}function Vu(t,n){lr(4,t,n);const i=ji(null);try{n.call(t)}finally{ji(i),lr(5,t,n)}}function Uu(t,n,i,a){const d=i[a]<0,p=i[a+1],D=t[d?-i[a]:i[a]];d?t[er]>>13<t[$e]>>16&&(3&t[er])===n&&(t[er]+=8192,Vu(D,p)):Vu(D,p)}const kc=-1;class fl{constructor(n,i,a){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=a}}function pl(t){return t!==kc}function Bu(t){return 32767&t}function Xo(t,n){let i=function ap(t){return t>>16}(t),a=n;for(;i>0;)a=a[re],i--;return a}let gl=!0;function ea(t){const n=gl;return gl=t,n}const ju=255,Ls=5;let cp=0;const Ji={};function Hu(t,n){const i=Ua(t,n);if(-1!==i)return i;const a=n[_n];a.firstCreatePass&&(t.injectorIndex=n.length,ta(a.data,t),ta(n,null),ta(a.blueprint,null));const d=ml(t,n),p=t.injectorIndex;if(pl(d)){const b=Bu(d),D=Xo(d,n),R=D[_n].data;for(let q=0;q<8;q++)n[p+q]=D[b+q]|R[b+q]}return n[p+8]=d,p}function ta(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Ua(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function ml(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,a=null,d=n;for(;null!==d;){if(a=qd(d),null===a)return kc;if(i++,d=d[re],-1!==a.injectorIndex)return a.injectorIndex|i<<16}return kc}function Zr(t,n,i){!function ql(t,n,i){let a;"string"==typeof i?a=i.charCodeAt(0)||0:i.hasOwnProperty(Un)&&(a=i[Un]),null==a&&(a=i[Un]=cp++);const d=a&ju;n.data[t+(d>>Ls)]|=1<<d}(t,n,i)}function ko(t,n,i){if(i&In.Optional||void 0!==t)return t;Nt()}function zu(t,n,i,a){if(i&In.Optional&&void 0===a&&(a=null),!(i&(In.Self|In.Host))){const d=t[ss],p=Er(void 0);try{return d?d.get(n,a,i&In.Optional):br(n,a,i&In.Optional)}finally{Er(p)}}return ko(a,0,i)}function Ba(t,n,i,a=In.Default,d){if(null!==t){if(2048&n[er]&&!(a&In.Self)){const b=function Lc(t,n,i,a,d){let p=t,b=n;for(;null!==p&&null!==b&&2048&b[er]&&!(512&b[er]);){const D=$d(p,b,i,a|In.Self,Ji);if(D!==Ji)return D;let R=p.parent;if(!R){const q=b[pn];if(q){const le=q.get(i,Ji,a);if(le!==Ji)return le}R=qd(b),b=b[re]}p=R}return d}(t,n,i,a,Ji);if(b!==Ji)return b}const p=$d(t,n,i,a,Ji);if(p!==Ji)return p}return zu(n,i,a,d)}function $d(t,n,i,a,d){const p=function $u(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Un)?t[Un]:void 0;return"number"==typeof n?n>=0?n&ju:Gd:n}(i);if("function"==typeof p){if(!Tr(n,t,a))return a&In.Host?ko(d,0,a):zu(n,i,a,d);try{let b;if(b=p(a),null!=b||a&In.Optional)return b;Nt()}finally{Ro()}}else if("number"==typeof p){let b=null,D=Ua(t,n),R=kc,q=a&In.Host?n[Y][ci]:null;for((-1===D||a&In.SkipSelf)&&(R=-1===D?ml(t,n):n[D+8],R!==kc&&vl(a,!1)?(b=n[_n],D=Bu(R),n=Xo(R,n)):D=-1);-1!==D;){const le=n[_n];if(nf(p,D,le.data)){const xe=Zd(D,n,i,b,a,q);if(xe!==Ji)return xe}R=n[D+8],R!==kc&&vl(a,n[_n].data[D+8]===q)&&nf(p,D,n)?(b=le,D=Bu(R),n=Xo(R,n)):D=-1}}return d}function Zd(t,n,i,a,d,p){const b=n[_n],D=b.data[t+8],le=Wl(D,b,i,null==a?os(D)&&gl:a!=b&&0!=(3&D.type),d&In.Host&&p===D);return null!==le?Fc(n,b,le,D):Ji}function Wl(t,n,i,a,d){const p=t.providerIndexes,b=n.data,D=1048575&p,R=t.directiveStart,le=p>>20,ct=d?D+le:t.directiveEnd;for(let Et=a?D:D+le;Et<ct;Et++){const zt=b[Et];if(Et<R&&i===zt||Et>=R&&zt.type===i)return Et}if(d){const Et=b[R];if(Et&&Ki(Et)&&Et.type===i)return R}return null}function Fc(t,n,i,a){let d=t[i];const p=n.data;if(function Gl(t){return t instanceof fl}(d)){const b=d;b.resolving&&function dt(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${t}${i}`)}(function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ze(t)}(p[i]));const D=ea(b.canSeeViewProviders);b.resolving=!0;const q=b.injectImpl?Er(b.injectImpl):null;Tr(t,a,In.Default);try{d=t[i]=b.factory(void 0,p,t,a),n.firstCreatePass&&i>=a.directiveStart&&function Fu(t,n,i){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:p}=n.type.prototype;if(a){const b=pi(n);(i.preOrderHooks??=[]).push(t,b),(i.preOrderCheckHooks??=[]).push(t,b)}d&&(i.preOrderHooks??=[]).push(0-t,d),p&&((i.preOrderHooks??=[]).push(t,p),(i.preOrderCheckHooks??=[]).push(t,p))}(i,p[i],n)}finally{null!==q&&Er(q),ea(D),b.resolving=!1,Ro()}}return d}function nf(t,n,i){return!!(i[n+(t>>Ls)]&1<<t)}function vl(t,n){return!(t&In.Self||t&In.Host&&n)}class Vs{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,a){return Ba(this._tNode,this._lView,n,fn(a),i)}}function Gd(){return new Vs(Es(),qt())}function yl(t){return en(()=>{const n=t.prototype.constructor,i=n[Ln]||ma(n),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const p=d[Ln]||ma(d);if(p&&p!==i)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ma(t){return Ye(t)?()=>{const n=ma(Re(t));return n&&n()}:no(t)}function qd(t){const n=t[_n],i=n.type;return 2===i?n.declTNode:1===i?t[ci]:null}function Kl(t){return function _l(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const a=i.length;let d=0;for(;d<a;){const p=i[d];if(fi(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<a&&"string"==typeof i[d];)d++;else{if(p===n)return i[d+1];d+=2}}}return null}(Es(),t)}const Xt="__parameters__";function Xi(t,n,i){return en(()=>{const a=function Uc(t){return function(...i){if(t){const a=t(...i);for(const d in a)this[d]=a[d]}}}(n);function d(...p){if(this instanceof d)return a.apply(this,p),this;const b=new d(...p);return D.annotation=b,D;function D(R,q,le){const xe=R.hasOwnProperty(Xt)?R[Xt]:Object.defineProperty(R,Xt,{value:[]})[Xt];for(;xe.length<=le;)xe.push(null);return(xe[le]=xe[le]||[]).push(b),R}}return i&&(d.prototype=Object.create(i.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}function sc(t,n){t.forEach(i=>Array.isArray(i)?sc(i,n):n(i))}function Zu(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Yl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function na(t,n){const i=[];for(let a=0;a<t;a++)i.push(n);return i}function mo(t,n,i){let a=Il(t,n);return a>=0?t[1|a]=i:(a=~a,function lf(t,n,i,a){let d=t.length;if(d==n)t.push(i,a);else if(1===d)t.push(a,t[0]),t[0]=i;else{for(d--,t.push(t[d-1],t[d]);d>n;)t[d]=t[d-2],d--;t[n]=i,t[n+1]=a}}(t,a,n,i)),a}function Jl(t,n){const i=Il(t,n);if(i>=0)return t[1|i]}function Il(t,n){return function ja(t,n,i){let a=0,d=t.length>>i;for(;d!==a;){const p=a+(d-a>>1),b=t[p<<i];if(n===b)return p<<i;b>n?d=p:a=p+1}return~(d<<i)}(t,n,1)}const jc=Je(Xi("Optional"),8),Ha=Je(Xi("SkipSelf"),4);function Ju(t){return 128==(128&t.flags)}var Xu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xu||{});const mp=new Map;let Bg=0;const oh="__ngContext__";function Js(t,n){Qr(n)?(t[oh]=n[Lt],function n_(t){mp.set(t[Lt],t)}(n)):t[oh]=n}let ac;function rd(t,n){return ac(t,n)}function Gc(t){const n=t[xr];return Ii(n)?n[xr]:n}function yp(t){return id(t[Ss])}function Af(t){return id(t[Ni])}function id(t){for(;null!==t&&!Ii(t);)t=t[Ni];return t}function ou(t,n,i,a,d){if(null!=a){let p,b=!1;Ii(a)?p=a:Qr(a)&&(b=!0,a=a[Hr]);const D=vi(a);0===t&&null!==i?null==d?cc(n,i,D):$a(n,i,D,d||null,!0):1===t&&null!==i?$a(n,i,D,d||null,!0):2===t?function Nl(t,n,i){const a=Rl(t,n);a&&function bf(t,n,i,a){t.removeChild(n,i,a)}(t,a,n,i)}(n,D,b):3===t&&n.destroyNode(D),null!=p&&function Dp(t,n,i,a,d){const p=i[mi];p!==vi(i)&&ou(n,t,a,p,d);for(let D=vr;D<i.length;D++){const R=i[D];qc(R[_n],R,t,n,a,p)}}(n,t,p,i,d)}}function Ap(t,n,i){return t.createElement(n,i)}function Gg(t,n){const i=t[us],a=i.indexOf(n);Su(n),i.splice(a,1)}function lh(t,n){if(t.length<=vr)return;const i=vr+n,a=t[i];if(a){const d=a[Ne];null!==d&&d!==t&&Gg(d,a),n>0&&(t[i-1][Ni]=a[Ni]);const p=Yl(t,vr+n);!function $g(t,n){qc(t,n,n[tr],2,null,null),n[Hr]=null,n[ci]=null}(a[_n],a);const b=p[ht];null!==b&&b.detachView(p[_n]),a[xr]=null,a[Ni]=null,a[er]&=-129}return a}function uh(t,n){if(!(256&n[er])){const i=n[tr];n[An]&&Dc(n[An]),n[mr]&&Dc(n[mr]),i.destroyNode&&qc(t,n,i,3,null,null),function s_(t){let n=t[Ss];if(!n)return dh(t[_n],t);for(;n;){let i=null;if(Qr(n))i=n[Ss];else{const a=n[vr];a&&(i=a)}if(!i){for(;n&&!n[Ni]&&n!==t;)Qr(n)&&dh(n[_n],n),n=n[xr];null===n&&(n=t),Qr(n)&&dh(n[_n],n),i=n&&n[Ni]}n=i}}(n)}}function dh(t,n){if(!(256&n[er])){n[er]&=-129,n[er]|=256,function hh(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let a=0;a<i.length;a+=2){const d=n[i[a]];if(!(d instanceof fl)){const p=i[a+1];if(Array.isArray(p))for(let b=0;b<p.length;b+=2){const D=d[p[b]],R=p[b+1];lr(4,D,R);try{R.call(D)}finally{lr(5,D,R)}}else{lr(4,d,p);try{p.call(d)}finally{lr(5,d,p)}}}}}(t,n),function sd(t,n){const i=t.cleanup,a=n[Ds];if(null!==i)for(let p=0;p<i.length-1;p+=2)if("string"==typeof i[p]){const b=i[p+3];b>=0?a[b]():a[-b].unsubscribe(),p+=2}else i[p].call(a[i[p+1]]);null!==a&&(n[Ds]=null);const d=n[Sn];if(null!==d){n[Sn]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(t,n),1===n[_n].type&&n[tr].destroy();const i=n[Ne];if(null!==i&&Ii(n[xr])){i!==n[xr]&&Gg(i,n);const a=n[ht];null!==a&&a.detachView(t)}!function r_(t){mp.delete(t[Lt])}(n)}}function xl(t,n,i){return function fh(t,n,i){let a=n;for(;null!==a&&40&a.type;)a=(n=a).parent;if(null===a)return i[Hr];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:p}=t.data[a.directiveStart+d];if(p===ln.None||p===ln.Emulated)return null}return Os(a,i)}}(t,n.parent,i)}function $a(t,n,i,a,d){t.insertBefore(n,i,a,d)}function cc(t,n,i){t.appendChild(n,i)}function od(t,n,i,a,d){null!==a?$a(t,n,i,a,d):cc(t,n,i)}function Rl(t,n){return t.parentNode(n)}function Tp(t,n,i){return lc(t,n,i)}let Ea,Mp,xp,lu,lc=function ph(t,n,i){return 40&t.type?Os(t,i):null};function Ol(t,n,i,a){const d=xl(t,a,n),p=n[tr],D=Tp(a.parent||n[ci],a,n);if(null!=d)if(Array.isArray(i))for(let R=0;R<i.length;R++)od(p,d,i[R],D,!1);else od(p,d,i,D,!1);void 0!==Ea&&Ea(p,a,n,i,d)}function au(t,n){if(null!==n){const i=n.type;if(3&i)return Os(n,t);if(4&i)return ad(-1,t[n.index]);if(8&i){const a=n.child;if(null!==a)return au(t,a);{const d=t[n.index];return Ii(d)?ad(-1,d):vi(d)}}if(32&i)return rd(n,t)()||vi(t[n.index]);{const a=Tf(t,n);return null!==a?Array.isArray(a)?a[0]:au(Gc(t[Y]),a):au(t,n.next)}}return null}function Tf(t,n){return null!==n?t[Y][ci].projection[n.projection]:null}function ad(t,n){const i=vr+t+1;if(i<n.length){const a=n[i],d=a[_n].firstChild;if(null!==d)return au(a,d)}return n[mi]}function gh(t,n,i,a,d,p,b){for(;null!=i;){const D=a[i.index],R=i.type;if(b&&0===n&&(D&&Js(vi(D),a),i.flags|=2),32!=(32&i.flags))if(8&R)gh(t,n,i.child,a,d,p,!1),ou(n,t,d,D,p);else if(32&R){const q=rd(i,a);let le;for(;le=q();)ou(n,t,d,le,p);ou(n,t,d,D,p)}else 16&R?wp(t,n,a,i,d,p):ou(n,t,d,D,p);i=b?i.projectionNext:i.next}}function qc(t,n,i,a,d,p){gh(i,a,t.firstChild,n,d,p,!1)}function wp(t,n,i,a,d,p){const b=i[Y],R=b[ci].projection[a.projection];if(Array.isArray(R))for(let q=0;q<R.length;q++)ou(n,t,d,R[q],p);else{let q=R;const le=b[xr];Ju(a)&&(q.flags|=128),gh(t,n,q,le,d,p,!0)}}function Wc(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function Sp(t,n,i){const{mergedAttrs:a,classes:d,styles:p}=i;null!==a&&Dr(t,n,a),null!==d&&Wc(t,n,d),null!==p&&function wf(t,n,i){t.setAttribute(n,"style",i)}(t,n,p)}function _h(t){return function Df(){if(void 0===Mp&&(Mp=null,Wn.trustedTypes))try{Mp=Wn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Mp}()?.createHTML(t)||t}function ld(t){xp=t}function Rp(t){return function vh(){if(void 0===lu&&(lu=null,Wn.trustedTypes))try{lu=Wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lu}()?.createScriptURL(t)||t}class uu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fe})`}}class Op extends uu{getTypeName(){return"HTML"}}class o_ extends uu{getTypeName(){return"Style"}}class Np extends uu{getTypeName(){return"Script"}}class Mf extends uu{getTypeName(){return"URL"}}class kp extends uu{getTypeName(){return"ResourceURL"}}function _o(t){return t instanceof uu?t.changingThisBreaksApplicationSecurity:t}function Aa(t,n){const i=function Fp(t){return t instanceof uu&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Fe})`)}return i===n}function ud(t){return new Op(t)}function Wg(t){return new o_(t)}function dd(t){return new Np(t)}function Kg(t){return new Mf(t)}function Pf(t){return new kp(t)}class Lp{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(_h(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch{return null}}}class a_{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const i=this.inertDocument.createElement("template");return i.innerHTML=_h(n),i}}const hd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qc(t){return(t=String(t)).match(hd)?t:"unsafe:"+t}function Za(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function kl(...t){const n={};for(const i of t)for(const a in i)i.hasOwnProperty(a)&&(n[a]=!0);return n}const Vp=Za("area,br,col,hr,img,wbr"),Up=Za("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fd=Za("rp,rt"),Yc=kl(Vp,kl(Up,Za("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kl(fd,Za("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),kl(fd,Up)),pd=Za("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),du=kl(pd,Za("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Za("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jp=Za("script,style,template");class l_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,a=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?a=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,a&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let d=this.checkClobberedElement(i,i.nextSibling);if(d){i=d;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Yc.hasOwnProperty(i))return this.sanitizedSomething=!0,!jp.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const a=n.attributes;for(let d=0;d<a.length;d++){const p=a.item(d),b=p.name,D=b.toLowerCase();if(!du.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let R=p.value;pd[D]&&(R=Qc(R)),this.buf.push(" ",b,'="',Hp(R),'"')}return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Yc.hasOwnProperty(i)&&!Vp.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(Hp(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const u_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d_=/([^\#-~ |!])/g;function Hp(t){return t.replace(/&/g,"&amp;").replace(u_,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(d_,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Eh;function zp(t,n){let i=null;try{Eh=Eh||function Qg(t){const n=new a_(t);return function xf(){try{return!!(new window.DOMParser).parseFromString(_h(""),"text/html")}catch{return!1}}()?new Lp(n):n}(t);let a=n?String(n):"";i=Eh.getInertBodyElement(a);let d=5,p=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=p,p=i.innerHTML,i=Eh.getInertBodyElement(a)}while(a!==p);return _h((new l_).sanitizeChildren($p(i)||i))}finally{if(i){const a=$p(i)||i;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function $p(t){return"content"in t&&function Xg(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(hu||{});function Gp(t){const n=Or();return n?n.sanitize(hu.URL,t)||"":Aa(t,"URL")?_o(t):Qc(Ze(t))}function em(t){const n=Or();if(n)return Rp(n.sanitize(hu.RESOURCE_URL,t)||"");if(Aa(t,"ResourceURL"))return Rp(_o(t));throw new Oe(904,!1)}function Ah(t,n,i){return function Ia(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?em:Gp}(n,i)(t)}function Or(){const t=qt();return t&&t[_s].sanitizer}const gd=new gn("ENVIRONMENT_INITIALIZER"),Ch=new gn("INJECTOR",-1),md=new gn("INJECTOR_DEF_TYPES");class Rf{get(n,i=zn){if(i===zn){const a=new Error(`NullInjectorError: No provider for ${oe(n)}!`);throw a.name="NullInjectorError",a}return i}}function As(t){return{\u0275providers:t}}function Is(...t){return{\u0275providers:ba(0,t),\u0275fromNgModule:!0}}function ba(t,...n){const i=[],a=new Set;let d;const p=b=>{i.push(b)};return sc(n,b=>{const D=b;Th(D,p,[],a)&&(d||=[],d.push(D))}),void 0!==d&&Kp(d,p),i}function Kp(t,n){for(let i=0;i<t.length;i++){const{ngModule:a,providers:d}=t[i];Fl(d,p=>{n(p,a)})}}function Th(t,n,i,a){if(!(t=Re(t)))return!1;let d=null,p=Br(t);const b=!p&&qn(t);if(p||b){if(b&&!b.standalone)return!1;d=t}else{const R=t.ngModule;if(p=Br(R),!p)return!1;d=R}const D=a.has(d);if(b){if(D)return!1;if(a.add(d),b.dependencies){const R="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const q of R)Th(q,n,i,a)}}else{if(!p)return!1;{if(null!=p.imports&&!D){let q;a.add(d);try{sc(p.imports,le=>{Th(le,n,i,a)&&(q||=[],q.push(le))})}finally{}void 0!==q&&Kp(q,n)}if(!D){const q=no(d)||(()=>new d);n({provide:d,useFactory:q,deps:yn},d),n({provide:md,useValue:d,multi:!0},d),n({provide:gd,useValue:()=>Zt(d),multi:!0},d)}const R=p.providers;if(null!=R&&!D){const q=t;Fl(R,le=>{n(le,q)})}}}return d!==t&&void 0!==t.providers}function Fl(t,n){for(let i of t)We(i)&&(i=i.\u0275providers),Array.isArray(i)?Fl(i,n):n(i)}const Qp=$({provide:String,useValue:$});function Yp(t){return null!==t&&"object"==typeof t&&Qp in t}function Ll(t){return"function"==typeof t}const rm=new gn("Set Injector scope."),Of={},zi={};let Nf;function Dh(){return void 0===Nf&&(Nf=new Rf),Nf}class dc{}class fu extends dc{get destroyed(){return this._destroyed}constructor(n,i,a,d){super(),this.parent=i,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pu(n,b=>this.processProvider(b)),this.records.set(Ch,_d(void 0,this)),d.has("environment")&&this.records.set(dc,_d(void 0,this));const p=this.records.get(rm);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(md.multi,yn,In.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=Xe(this),a=Er(void 0);try{return n()}finally{Xe(i),Er(a)}}get(n,i=zn,a=In.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(vn))return n[vn](this);a=fn(a);const p=Xe(this),b=Er(void 0);try{if(!(a&In.SkipSelf)){let R=this.records.get(n);if(void 0===R){const q=function om(t){return"function"==typeof t||"object"==typeof t&&t instanceof gn}(n)&&Nn(n);R=q&&this.injectableDefInScope(q)?_d(Jp(n),Of):null,this.records.set(n,R)}if(null!=R)return this.hydrate(n,R)}return(a&In.Self?Dh():this.parent).get(n,i=a&In.Optional&&i===zn?null:i)}catch(D){if("NullInjectorError"===D.name){if((D[Cr]=D[Cr]||[]).unshift(oe(n)),p)throw D;return function nt(t,n,i,a){const d=t[Cr];throw n[H]&&d.unshift(n[H]),t.message=function jt(t,n,i,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=oe(n);if(Array.isArray(n))d=n.map(oe).join(" -> ");else if("object"==typeof n){let p=[];for(let b in n)if(n.hasOwnProperty(b)){let D=n[b];p.push(b+":"+("string"==typeof D?JSON.stringify(D):oe(D)))}d=`{${p.join(", ")}}`}return`${i}${a?"("+a+")":""}[${d}]: ${t.replace(ce,"\n  ")}`}("\n"+t.message,d,i,a),t.ngTokenPath=d,t[Cr]=null,t}(D,n,"R3InjectorError",this.source)}throw D}finally{Er(b),Xe(p)}}resolveInjectorInitializers(){const n=Xe(this),i=Er(void 0);try{const d=this.get(gd.multi,yn,In.Self);for(const p of d)p()}finally{Xe(n),Er(i)}}toString(){const n=[],i=this.records;for(const a of i.keys())n.push(oe(a));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(n){let i=Ll(n=Re(n))?n:Re(n&&n.provide);const a=function im(t){return Yp(t)?_d(void 0,t.useValue):_d(Sh(t),Of)}(n);if(Ll(n)||!0!==n.multi)this.records.get(i);else{let d=this.records.get(i);d||(d=_d(void 0,Of,!0),d.factory=()=>Xn(d.multi),this.records.set(i,d)),i=n,d.multi.push(n)}this.records.set(i,a)}hydrate(n,i){return i.value===Of&&(i.value=zi,i.value=i.factory()),"object"==typeof i.value&&i.value&&function sm(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Re(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Jp(t){const n=Nn(t),i=null!==n?n.factory:no(t);if(null!==i)return i;if(t instanceof gn)throw new Oe(204,!1);if(t instanceof Function)return function f_(t){const n=t.length;if(n>0)throw na(n,"?"),new Oe(204,!1);const i=function Yt(t){return t&&(t[xn]||t[sr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Oe(204,!1)}function Sh(t,n,i){let a;if(Ll(t)){const d=Re(t);return no(d)||Jp(d)}if(Yp(t))a=()=>Re(t.useValue);else if(function nm(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Xn(t.deps||[]));else if(function wh(t){return!(!t||!t.useExisting)}(t))a=()=>Zt(Re(t.useExisting));else{const d=Re(t&&(t.useClass||t.provide));if(!function p_(t){return!!t.deps}(t))return no(d)||Jp(d);a=()=>new d(...Xn(t.deps))}return a}function _d(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function pu(t,n){for(const i of t)Array.isArray(i)?pu(i,n):i&&We(i)?pu(i.\u0275providers,n):n(i)}const am=new gn("AppId",{providedIn:"root",factory:()=>Vl}),Vl="ng",Jc=new gn("Platform Initializer"),cm=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vd=new gn("AnimationModuleType"),lm=new gn("CSP nonce",{providedIn:"root",factory:()=>function Kc(){if(void 0!==xp)return xp;if(typeof document<"u")return document;throw new Oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Id=(t,n,i)=>null;function Oh(t,n,i=!1){return Id(t,n,i)}class dv{}class hv{}class fv{resolveComponentFactory(n){throw function pm(t){const n=Error(`No component factory found for ${oe(t)}.`);return n.ngComponent=t,n}(n)}}let ng=(()=>{class t{static#e=this.NULL=new fv}return t})();function rg(){return Fh(Es(),qt())}function Fh(t,n){return new Lf(Os(t,n))}let Lf=(()=>{class t{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=rg}return t})();function ig(t){return t instanceof Lf?t.nativeElement:t}class __{}let pv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function v_(){const t=qt(),i=Ns(Es().index,t);return(Qr(i)?i:t)[tr]}()}return t})(),y_=(()=>{class t{static#e=this.\u0275prov=Pn({token:t,providedIn:"root",factory:()=>null})}return t})();class _m{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const vm=new _m("16.2.12"),sg={};function vu(t,n=null,i=null,a){const d=b_(t,n,i,a);return d.resolveInjectorInitializers(),d}function b_(t,n=null,i=null,a,d=new Set){const p=[i||yn,Is(t)];return a=a||("object"==typeof t?void 0:oe(t)),new fu(p,n||Dh(),a||null,d)}let hc=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=zn;static#t=this.NULL=new Rf;static create(i,a){if(Array.isArray(i))return vu({name:""},a,i,"");{const d=i.name??"";return vu({name:d},i.parent,i.providers,d)}}static#n=this.\u0275prov=Pn({token:t,providedIn:"any",factory:()=>Zt(Ch)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function ym(t){return t.ngOriginalError}class yu{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&ym(n);for(;i&&ym(i);)i=ym(i);return i||null}}function Am(t){return n=>{setTimeout(t,void 0,n)}}const tl=class _v extends f.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,a){let d=n,p=i||(()=>null),b=a;if(n&&"object"==typeof n){const R=n;d=R.next?.bind(R),p=R.error?.bind(R),b=R.complete?.bind(R)}this.__isAsync&&(p=Am(p),d&&(d=Am(d)),b&&(b=Am(b)));const D=super.subscribe({next:d,error:p,complete:b});return n instanceof s.w0&&n.add(D),D}};function T_(...t){}class bs{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tl(!1),this.onMicrotaskEmpty=new tl(!1),this.onStable=new tl(!1),this.onError=new tl(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&i,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function vv(){const t="function"==typeof Wn.requestAnimationFrame;let n=Wn[t?"requestAnimationFrame":"setTimeout"],i=Wn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Ev(t){const n=()=>{!function yv(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Wn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bm(t),t.isCheckStableRunning=!0,w_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,a,d,p,b,D)=>{if(function by(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(D))return i.invokeTask(d,p,b,D);try{return D_(t),i.invokeTask(d,p,b,D)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),S_(t)}},onInvoke:(i,a,d,p,b,D,R)=>{try{return D_(t),i.invoke(d,p,b,D,R)}finally{t.shouldCoalesceRunChangeDetection&&n(),S_(t)}},onHasTask:(i,a,d,p)=>{i.hasTask(d,p),a===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,bm(t),w_(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(i,a,d,p)=>(i.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bs.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(bs.isInAngularZone())throw new Oe(909,!1)}run(n,i,a){return this._inner.run(n,i,a)}runTask(n,i,a,d){const p=this._inner,b=p.scheduleEventTask("NgZoneEvent: "+d,n,Im,T_,T_);try{return p.runTask(b,i,a)}finally{p.cancelTask(b)}}runGuarded(n,i,a){return this._inner.runGuarded(n,i,a)}runOutsideAngular(n){return this._outer.run(n)}}const Im={};function w_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function D_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function S_(t){t._nesting--,w_(t)}class Iy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tl,this.onMicrotaskEmpty=new tl,this.onStable=new tl,this.onError=new tl}run(n,i,a){return n.apply(i,a)}runGuarded(n,i,a){return n.apply(i,a)}runOutsideAngular(n){return n()}runTask(n,i,a,d){return n.apply(i,a)}}const Av=new gn("",{providedIn:"root",factory:Iv});function Iv(){const t=cn(bs);let n=!0;const i=new B.y(d=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{d.next(n),d.complete()})}),a=new B.y(d=>{let p;t.runOutsideAngular(()=>{p=t.onStable.subscribe(()=>{bs.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,d.next(!0))})})});const b=t.onUnstable.subscribe(()=>{bs.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),b.unsubscribe()}});return(0,Se.T)(i,a.pipe((0,de.B)()))}function nl(t){return t instanceof Function?t():t}let ag=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pn({token:t,providedIn:"root",factory:()=>new t})}return t})();function Vh(t){for(;t;){t[er]|=64;const n=Gc(t);if(Sa(t)&&!n)return t;t=n}return null}const R_=new gn("",{providedIn:"root",factory:()=>!1});let Uh=null;function jf(t,n){return t[n]??o()}function c(t,n){const i=o();i.producerNode?.length&&(t[n]=Uh,i.lView=t,Uh=r())}const e={...Tc,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vh(t.lView)},lView:null};function r(){return Object.create(e)}function o(){return Uh??=r(),Uh}const u={};function m(t){I($r(),qt(),Ks()+t,!1)}function I(t,n,i,a){if(!a)if(3==(3&n[er])){const p=t.preOrderCheckHooks;null!==p&&La(n,p,i)}else{const p=t.preOrderHooks;null!==p&&Va(n,p,0,i)}No(i)}function P(t,n=In.Default){const i=qt();return null===i?Zt(t,n):Ba(Es(),i,Re(t),n)}function L(){throw new Error("invalid")}function he(t,n,i,a,d,p,b,D,R,q,le){const xe=n.blueprint.slice();return xe[Hr]=d,xe[er]=140|a,(null!==q||t&&2048&t[er])&&(xe[er]|=2048),Wo(xe),xe[xr]=xe[re]=t,xe[ai]=i,xe[_s]=b||t&&t[_s],xe[tr]=D||t&&t[tr],xe[ss]=R||t&&t[ss]||null,xe[ci]=p,xe[Lt]=function jg(){return Bg++}(),xe[Qt]=le,xe[pn]=q,xe[Y]=2==n.type?t[Y]:xe,xe}function Me(t,n,i,a,d){let p=t.data[n];if(null===p)p=function et(t,n,i,a,d){const p=Yi(),b=Nc(),R=t.data[n]=function At(t,n,i,a,d,p){let b=n?n.injectorIndex:-1,D=0;return Fa()&&(D|=128),{type:i,index:a,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:D,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?p:p&&p.parent,i,n,a,d);return null===t.firstChild&&(t.firstChild=R),null!==p&&(b?null==p.child&&null!==R.parent&&(p.child=R):null===p.next&&(p.next=R,R.prev=p)),R}(t,n,i,a,d),function O(){return hr.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=i,p.value=a,p.attrs=d;const b=function Oc(){const t=hr.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===b?-1:b.injectorIndex}return ks(p,!0),p}function Ct(t,n,i,a){if(0===i)return-1;const d=n.length;for(let p=0;p<i;p++)n.push(a),t.blueprint.push(a),t.data.push(null);return d}function Wt(t,n,i,a,d){const p=jf(n,An),b=Ks(),D=2&a;try{No(-1),D&&n.length>jn&&I(t,n,jn,!1),lr(D?2:0,d);const q=D?p:null,le=pr(q);try{null!==q&&(q.dirty=!1),i(a,d)}finally{wc(q,le)}}finally{D&&null===n[An]&&c(n,An),No(b),lr(D?3:1,d)}}function hn(t,n,i){if(po(n)){const a=ji(null);try{const p=n.directiveEnd;for(let b=n.directiveStart;b<p;b++){const D=t.data[b];D.contentQueries&&D.contentQueries(1,i[b],b)}}finally{ji(a)}}}function nn(t,n,i){Li()&&(function Rv(t,n,i,a){const d=i.directiveStart,p=i.directiveEnd;os(i)&&function Dm(t,n,i){const a=Os(n,t),d=or(i);let b=16;i.signals?b=4096:i.onPush&&(b=64);const D=Hh(t,he(t,d,null,b,a,n,null,t[_s].rendererFactory.createRenderer(a,i),null,null,null));t[n.index]=D}(n,i,t.data[d+i.componentOffset]),t.firstCreatePass||Hu(i,n),Js(a,n);const b=i.initialInputs;for(let D=d;D<p;D++){const R=t.data[D],q=Fc(n,t,D,i);Js(q,n),null!==b&&F_(0,D-d,q,R,0,b),Ki(R)&&(Ns(i.index,n)[ai]=Fc(n,t,D,i))}}(t,n,i,Os(i,n)),64==(64&i.flags)&&jh(t,n,i))}function Zn(t,n,i=Os){const a=n.localNames;if(null!==a){let d=n.index+1;for(let p=0;p<a.length;p+=2){const b=a[p+1],D=-1===b?i(n,t):t[b];t[d++]=D}}}function or(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Kn(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Kn(t,n,i,a,d,p,b,D,R,q,le){const xe=jn+a,ct=xe+d,Et=function Sr(t,n){const i=[];for(let a=0;a<n;a++)i.push(a<t?null:u);return i}(xe,ct),zt="function"==typeof q?q():q;return Et[_n]={type:t,blueprint:Et,template:i,queries:null,viewQuery:D,declTNode:n,data:Et.slice().fill(null,xe),bindingStartIndex:xe,expandoStartIndex:ct,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:R,consts:zt,incompleteFirstPass:!1,ssrId:le}}let pt=t=>null;function Rt(t,n,i,a){for(let d in t)if(t.hasOwnProperty(d)){i=null===i?{}:i;const p=t[d];null===a?it(i,n,d,p):a.hasOwnProperty(d)&&it(i,n,a[d],p)}return i}function it(t,n,i,a){t.hasOwnProperty(i)?t[i].push(n,a):t[i]=[n,a]}function Ta(t,n,i,a,d,p,b,D){const R=Os(n,i);let le,q=n.inputs;!D&&null!=q&&(le=q[a])?(lo(t,i,le,a,d),os(n)&&function Hf(t,n){const i=Ns(n,t);16&i[er]||(i[er]|=64)}(i,n.index)):3&n.type&&(a=function Bh(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=b?b(d,n.value||"",a):d,p.setProperty(R,a,d))}function cg(t,n,i,a){if(Li()){const d=null===a?null:{"":-1},p=function $f(t,n){const i=t.directiveRegistry;let a=null,d=null;if(i)for(let p=0;p<i.length;p++){const b=i[p];if(si(n,b.selectors,!1))if(a||(a=[]),Ki(b))if(null!==b.findHostDirectiveDefs){const D=[];d=d||new Map,b.findHostDirectiveDefs(b,D,d),a.unshift(...D,b),Tm(t,n,D.length)}else a.unshift(b),Tm(t,n,0);else d=d||new Map,b.findHostDirectiveDefs?.(b,a,d),a.push(b)}return null===a?null:[a,d]}(t,i);let b,D;null===p?b=D=null:[b,D]=p,null!==b&&k_(t,n,i,b,d,D),d&&function Nv(t,n,i){if(n){const a=t.localNames=[];for(let d=0;d<n.length;d+=2){const p=i[n[d+1]];if(null==p)throw new Oe(-301,!1);a.push(n[d],p)}}}(i,a,d)}i.mergedAttrs=dr(i.mergedAttrs,i.attrs)}function k_(t,n,i,a,d,p){for(let q=0;q<a.length;q++)Zr(Hu(i,n),t,a[q].type);!function ug(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,a.length);for(let q=0;q<a.length;q++){const le=a[q];le.providersResolver&&le.providersResolver(le)}let b=!1,D=!1,R=Ct(t,n,a.length,null);for(let q=0;q<a.length;q++){const le=a[q];i.mergedAttrs=dr(i.mergedAttrs,le.hostAttrs),wm(t,i,n,R,le),lg(R,le,d),null!==le.contentQueries&&(i.flags|=4),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(i.flags|=64);const xe=le.type.prototype;!b&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),b=!0),!D&&(xe.ngOnChanges||xe.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),D=!0),R++}!function jl(t,n,i){const d=n.directiveEnd,p=t.data,b=n.attrs,D=[];let R=null,q=null;for(let le=n.directiveStart;le<d;le++){const xe=p[le],ct=i?i.get(xe):null,zt=ct?ct.outputs:null;R=Rt(xe.inputs,le,R,ct?ct.inputs:null),q=Rt(xe.outputs,le,q,zt);const dn=null===R||null===b||jr(n)?null:kv(R,le,b);D.push(dn)}null!==R&&(R.hasOwnProperty("class")&&(n.flags|=8),R.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=D,n.inputs=R,n.outputs=q}(t,i,p)}function jh(t,n,i){const a=i.directiveStart,d=i.directiveEnd,p=i.index,b=function W(){return hr.lFrame.currentDirectiveIndex}();try{No(p);for(let D=a;D<d;D++){const R=t.data[D],q=n[D];fe(D),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&Ov(R,q)}}finally{No(-1),fe(b)}}function Ov(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Tm(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function lg(t,n,i){if(i){if(n.exportAs)for(let a=0;a<n.exportAs.length;a++)i[n.exportAs[a]]=t;Ki(n)&&(i[""]=t)}}function wm(t,n,i,a,d){t.data[a]=d;const p=d.factory||(d.factory=no(d.type)),b=new fl(p,Ki(d),P);t.blueprint[a]=b,i[a]=b,function Eu(t,n,i,a,d){const p=d.hostBindings;if(p){let b=t.hostBindingOpCodes;null===b&&(b=t.hostBindingOpCodes=[]);const D=~n.index;(function yo(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(b)!=D&&b.push(D),b.push(i,a,p)}}(t,n,a,Ct(t,i,d.hostVars,u),d)}function Ga(t,n,i,a,d,p){const b=Os(t,n);!function Zf(t,n,i,a,d,p,b){if(null==p)t.removeAttribute(n,d,i);else{const D=null==b?Ze(p):b(p,a||"",d);t.setAttribute(n,d,D,i)}}(n[tr],b,p,t.value,i,a,d)}function F_(t,n,i,a,d,p){const b=p[n];if(null!==b)for(let D=0;D<b.length;)Sm(a,i,b[D++],b[D++],b[D++])}function Sm(t,n,i,a,d){const p=ji(null);try{const b=t.inputTransforms;null!==b&&b.hasOwnProperty(a)&&(d=b[a].call(n,d)),null!==t.setInput?t.setInput(n,d,i,a):n[a]=d}finally{ji(p)}}function kv(t,n,i){let a=null,d=0;for(;d<i.length;){const p=i[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===a&&(a=[]);const b=t[p];for(let D=0;D<b.length;D+=2)if(b[D]===n){a.push(p,b[D+1],i[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function Mm(t,n,i,a){return[t,!0,!1,n,null,0,a,i,null,null,null]}function Pm(t,n){const i=t.contentQueries;if(null!==i)for(let a=0;a<i.length;a+=2){const p=i[a+1];if(-1!==p){const b=t.data[p];Mt(i[a]),b.contentQueries(2,n[p],p)}}}function Hh(t,n){return t[Ss]?t[li][Ni]=n:t[Ss]=n,t[li]=n,n}function dg(t,n,i){Mt(0);const a=ji(null);try{n(t,i)}finally{ji(a)}}function hg(t){return t[Ds]||(t[Ds]=[])}function fg(t){return t.cleanup||(t.cleanup=[])}function co(t,n){const i=t[ss],a=i?i.get(yu,null):null;a&&a.handleError(n)}function lo(t,n,i,a,d){for(let p=0;p<i.length;){const b=i[p++],D=i[p++];Sm(t.data[b],n[b],a,D,d)}}function qa(t,n,i){const a=Zo(n,t);!function Ep(t,n,i){t.setValue(n,i)}(t[tr],a,i)}function xm(t,n){const i=Ns(n,t),a=i[_n];!function Rm(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(a,i);const d=i[Hr];null!==d&&null===i[Qt]&&(i[Qt]=Oh(d,i[ss])),gg(a,i,i[ai])}function gg(t,n,i){di(n);try{const a=t.viewQuery;null!==a&&dg(1,a,i);const d=t.template;null!==d&&Wt(t,n,d,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Pm(t,n),t.staticViewQueries&&dg(2,t.viewQuery,i);const p=t.components;null!==p&&function zh(t,n){for(let i=0;i<n.length;i++)xm(t,n[i])}(n,p)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{n[er]&=-5,pa()}}let mg=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,a,d){const p=typeof Zone>"u"?null:Zone.current,b=function Ht(t,n,i){const a=Object.create(Fr);i&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=n;const d=b=>{a.cleanupFn=b};return a.ref={notify:()=>Oa(a),run:()=>{if(a.dirty=!1,a.hasRun&&!cl(a))return;a.hasRun=!0;const b=pr(a);try{a.cleanupFn(),a.cleanupFn=Mn,a.fn(d)}finally{wc(a,b)}},cleanup:()=>a.cleanupFn()},a.ref}(i,q=>{this.all.has(q)&&this.queue.set(q,p)},d);let D;this.all.add(b),b.notify();const R=()=>{b.cleanup(),D?.(),this.all.delete(b),this.queue.delete(b)};return D=a?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[i,a]of this.queue)this.queue.delete(i),a?a.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pn({token:t,providedIn:"root",factory:()=>new t})}return t})();function Au(t,n,i){let a=i?t.styles:null,d=i?t.classes:null,p=0;if(null!==n)for(let b=0;b<n.length;b++){const D=n[b];"number"==typeof D?p=D:1==p?d=be(d,D):2==p&&(a=be(a,D+": "+n[++b]+";"))}i?t.styles=a:t.stylesWithoutHost=a,i?t.classes=d:t.classesWithoutHost=d}function $h(t,n,i,a,d=!1){for(;null!==i;){const p=n[i.index];null!==p&&a.push(vi(p)),Ii(p)&&L_(p,a);const b=i.type;if(8&b)$h(t,n,i.child,a);else if(32&b){const D=rd(i,n);let R;for(;R=D();)a.push(R)}else if(16&b){const D=Tf(n,i);if(Array.isArray(D))a.push(...D);else{const R=Gc(n[Y]);$h(R[_n],R,D,a,!0)}}i=d?i.projectionNext:i.next}return a}function L_(t,n){for(let i=vr;i<t.length;i++){const a=t[i],d=a[_n].firstChild;null!==d&&$h(a[_n],a,d,n)}t[mi]!==t[Hr]&&n.push(t[mi])}function Hl(t,n,i,a=!0){const d=n[_s],p=d.rendererFactory,b=d.afterRenderEventManager;p.begin?.(),b?.begin();try{wd(t,n,t.template,i)}catch(R){throw a&&co(n,R),R}finally{p.end?.(),d.effectManager?.flush(),b?.end()}}function wd(t,n,i,a){const d=n[er];if(256!=(256&d)){n[_s].effectManager?.flush(),di(n);try{Wo(n),function Nu(t){return hr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Wt(t,n,i,2,a);const b=3==(3&d);if(b){const q=t.preOrderCheckHooks;null!==q&&La(n,q,null)}else{const q=t.preOrderHooks;null!==q&&Va(n,q,0,null),Jo(n,0)}if(function _g(t){for(let n=yp(t);null!==n;n=Af(n)){if(!n[Rr])continue;const i=n[us];for(let a=0;a<i.length;a++){Mo(i[a])}}}(n),qf(n,2),null!==t.contentQueries&&Pm(t,n),b){const q=t.contentCheckHooks;null!==q&&La(n,q)}else{const q=t.contentHooks;null!==q&&Va(n,q,1),Jo(n,1)}!function J(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const a=jf(n,mr);try{for(let d=0;d<i.length;d++){const p=i[d];if(p<0)No(~p);else{const b=p,D=i[++d],R=i[++d];N(D,b),a.dirty=!1;const q=pr(a);try{R(2,n[b])}finally{wc(a,q)}}}}finally{null===n[mr]&&c(n,mr),No(-1)}}(t,n);const D=t.components;null!==D&&Wf(n,D,0);const R=t.viewQuery;if(null!==R&&dg(2,R,a),b){const q=t.viewCheckHooks;null!==q&&La(n,q)}else{const q=t.viewHooks;null!==q&&Va(n,q,2),Jo(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[er]&=-73,Su(n)}finally{pa()}}}function qf(t,n){for(let i=yp(t);null!==i;i=Af(i))for(let a=vr;a<i.length;a++)Nm(i[a],n)}function Iu(t,n,i){Nm(Ns(n,t),i)}function Nm(t,n){if(!function xc(t){return 128==(128&t[er])}(t))return;const i=t[_n],a=t[er];if(80&a&&0===n||1024&a||2===n)wd(i,t,i.template,t[ai]);else if(t[is]>0){qf(t,1);const d=i.components;null!==d&&Wf(t,d,1)}}function Wf(t,n,i){for(let a=0;a<n.length;a++)Iu(t,n[a],i)}class Zh{get rootNodes(){const n=this._lView,i=n[_n];return $h(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ai]}set context(n){this._lView[ai]=n}get destroyed(){return 256==(256&this._lView[er])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[xr];if(Ii(n)){const i=n[8],a=i?i.indexOf(this):-1;a>-1&&(lh(n,a),Yl(i,a))}this._attachedToViewContainer=!1}uh(this._lView[_n],this._lView)}onDestroy(n){!function Jh(t,n){if(256==(256&t[er]))throw new Oe(911,!1);null===t[Sn]&&(t[Sn]=[]),t[Sn].push(n)}(this._lView,n)}markForCheck(){Vh(this._cdRefInjectingView||this._lView)}detach(){this._lView[er]&=-129}reattach(){this._lView[er]|=128}detectChanges(){Hl(this._lView[_n],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bp(t,n){qc(t,n,n[tr],2,null,null)}(this._lView[_n],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=n}}class Kf extends Zh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Hl(n[_n],n,n[ai],!1)}checkNoChanges(){}get context(){return null}}class km extends ng{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=qn(n);return new sl(i,this.ngModule)}}function Eo(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class Qf{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,a){a=fn(a);const d=this.injector.get(n,sg,a);return d!==sg||i===sg?d:this.parentInjector.get(n,i,a)}}class sl extends hv{get inputs(){const n=this.componentDef,i=n.inputTransforms,a=Eo(n.inputs);if(null!==i)for(const d of a)i.hasOwnProperty(d.propName)&&(d.transform=i[d.propName]);return a}get outputs(){return Eo(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Wi(t){return t.map(Ui).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,a,d){let p=(d=d||this.ngModule)instanceof dc?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const b=p?new Qf(n,p):n,D=b.get(__,null);if(null===D)throw new Oe(407,!1);const xe={rendererFactory:D,sanitizer:b.get(y_,null),effectManager:b.get(mg,null),afterRenderEventManager:b.get(ag,null)},ct=D.createRenderer(null,this.componentDef),Et=this.componentDef.selectors[0][0]||"div",zt=a?function wi(t,n,i,a){const p=a.get(R_,!1)||i===ln.ShadowDom,b=t.selectRootElement(n,p);return function qr(t){pt(t)}(b),b}(ct,a,this.componentDef.encapsulation,b):Ap(ct,Et,function U_(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(Et)),cr=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let rn=null;null!==zt&&(rn=Oh(zt,b,!0));const kr=Kn(0,null,null,1,0,null,null,null,null,null,null),ri=he(null,kr,null,cr,null,null,xe,ct,b,null,rn);let es,Ac;di(ri);try{const Yh=this.componentDef;let t_,A0=null;Yh.findHostDirectiveDefs?(t_=[],A0=new Map,Yh.findHostDirectiveDefs(Yh,t_,A0),t_.push(Yh)):t_=[Yh];const Gw=function Lv(t,n){const i=t[_n],a=jn;return t[a]=n,Me(i,a,2,"#host",null)}(ri,zt),qw=function Gh(t,n,i,a,d,p,b){const D=d[_n];!function Vv(t,n,i,a){for(const d of t)n.mergedAttrs=dr(n.mergedAttrs,d.hostAttrs);null!==n.mergedAttrs&&(Au(n,n.mergedAttrs,!0),null!==i&&Sp(a,i,n))}(a,t,n,b);let R=null;null!==n&&(R=Oh(n,d[ss]));const q=p.rendererFactory.createRenderer(n,i);let le=16;i.signals?le=4096:i.onPush&&(le=64);const xe=he(d,or(i),null,le,d[t.index],t,p,q,null,null,R);return D.firstCreatePass&&Tm(D,t,a.length-1),Hh(d,xe),d[t.index]=xe}(Gw,zt,Yh,t_,ri,xe,ct);Ac=Pc(kr,jn),zt&&function vg(t,n,i,a){if(a)Dr(t,i,["ng-version",vm.full]);else{const{attrs:d,classes:p}=function bo(t){const n=[],i=[];let a=1,d=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===d?""!==p&&n.push(p,t[++a]):8===d&&i.push(p);else{if(!Vi(d))break;d=p}a++}return{attrs:n,classes:i}}(n.selectors[0]);d&&Dr(t,i,d),p&&p.length>0&&Wc(t,i,p.join(" "))}}(ct,Yh,zt,a),void 0!==i&&function B_(t,n,i){const a=t.projection=[];for(let d=0;d<n.length;d++){const p=i[d];a.push(null!=p?Array.from(p):null)}}(Ac,this.ngContentSelectors,i),es=function Uv(t,n,i,a,d,p){const b=Es(),D=d[_n],R=Os(b,d);k_(D,d,b,i,null,a);for(let le=0;le<i.length;le++)Js(Fc(d,D,b.directiveStart+le,b),d);jh(D,d,b),R&&Js(R,d);const q=Fc(d,D,b.directiveStart+b.componentOffset,b);if(t[ai]=d[ai]=q,null!==p)for(const le of p)le(q,n);return hn(D,b,t),q}(qw,Yh,t_,A0,ri,[Fm]),gg(kr,ri,null)}finally{pa()}return new Fv(this.componentType,es,Fh(Ac,ri),ri,Ac)}}class Fv extends dv{constructor(n,i,a,d,p){super(),this.location=a,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Kf(d),this.componentType=n}setInput(n,i){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const p=this._rootLView;lo(p[_n],p,d,n,i),this.previousInputValues.set(n,i),Vh(Ns(this._tNode.index,p))}}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Fm(){const t=Es();Lu(qt()[_n],t)}function fc(t){let n=function Dd(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const a=[t];for(;n;){let d;if(Ki(t))d=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Oe(903,!1);d=n.\u0275dir}if(d){if(i){a.push(d);const b=t;b.inputs=E(t.inputs),b.inputTransforms=E(t.inputTransforms),b.declaredInputs=E(t.declaredInputs),b.outputs=E(t.outputs);const D=d.hostBindings;D&&_(t,D);const R=d.viewQuery,q=d.contentQueries;if(R&&h(t,R),q&&l(t,q),z(t.inputs,d.inputs),z(t.declaredInputs,d.declaredInputs),z(t.outputs,d.outputs),null!==d.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),z(b.inputTransforms,d.inputTransforms)),Ki(d)&&d.data.animation){const le=t.data;le.animation=(le.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let b=0;b<p.length;b++){const D=p[b];D&&D.ngInherit&&D(t),D===fc&&(i=!1)}}n=Object.getPrototypeOf(n)}!function Lm(t){let n=0,i=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=n+=d.hostVars,d.hostAttrs=dr(d.hostAttrs,i=dr(i,d.hostAttrs))}}(a)}function E(t){return t===fr?{}:t===yn?[]:t}function h(t,n){const i=t.viewQuery;t.viewQuery=i?(a,d)=>{n(a,d),i(a,d)}:n}function l(t,n){const i=t.contentQueries;t.contentQueries=i?(a,d,p)=>{n(a,d,p),i(a,d,p)}:n}function _(t,n){const i=t.hostBindings;t.hostBindings=i?(a,d)=>{n(a,d),i(a,d)}:n}function yr(t){const n=t.inputConfig,i={};for(const a in n)if(n.hasOwnProperty(a)){const d=n[a];Array.isArray(d)&&d[2]&&(i[a]=d[2])}t.inputTransforms=i}function ir(t){return!!cs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function cs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function $i(t,n,i){return t[n]=i}function Zi(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Cs(t,n,i,a){const d=Zi(t,n,i);return Zi(t,n+1,a)||d}function Hs(t,n,i,a){const d=qt();return Zi(d,fa(),n)&&($r(),Ga(ki(),d,t,n,i,a)),Hs}function sa(t,n,i,a){return Zi(t,fa(),i)?n+Ze(i)+a:u}function oa(t,n,i,a,d,p){const D=Cs(t,function xo(){return hr.lFrame.bindingIndex}(),i,d);return S(2),D?n+Ze(i)+a+Ze(d)+p:u}function Hm(t,n,i,a,d,p,b,D){const R=qt(),q=$r(),le=t+jn,xe=q.firstCreatePass?function Wv(t,n,i,a,d,p,b,D,R){const q=n.consts,le=Me(n,t,4,b||null,qo(q,D));cg(n,i,le,qo(q,R)),Lu(n,le);const xe=le.tView=Kn(2,le,a,d,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,q,null);return null!==n.queries&&(n.queries.template(n,le),xe.queries=n.queries.embeddedTView(le)),le}(le,q,R,n,i,a,d,p,b):q.data[le];ks(xe,!1);const ct=zm(q,R,xe,t);ku()&&Ol(q,R,ct,xe),Js(ct,R),Hh(R,R[le]=Mm(ct,R,ct,xe)),Ps(xe)&&nn(q,R,xe),null!=b&&Zn(R,xe,D)}let zm=function Z_(t,n,i,a){return Yo(!0),n[tr].createComment("")};function Zm(t,n,i){const a=qt();return Zi(a,fa(),n)&&Ta($r(),ki(),a,t,n,a[tr],i,!1),Zm}function Gm(t,n,i,a,d){const b=d?"class":"style";lo(t,i,n.inputs[b],b,a)}function Cg(t,n,i,a){const d=qt(),p=$r(),b=jn+t,D=d[tr],R=p.firstCreatePass?function Yv(t,n,i,a,d,p){const b=n.consts,R=Me(n,t,2,a,qo(b,d));return cg(n,i,R,qo(b,p)),null!==R.attrs&&Au(R,R.attrs,!1),null!==R.mergedAttrs&&Au(R,R.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,R),R}(b,p,d,n,i,a):p.data[b],q=G_(p,d,R,D,n,t);d[b]=q;const le=Ps(R);return ks(R,!0),Sp(D,q,R),32!=(32&R.flags)&&ku()&&Ol(p,d,q,R),0===function ka(){return hr.lFrame.elementDepthCount}()&&Js(q,d),function kd(){hr.lFrame.elementDepthCount++}(),le&&(nn(p,d,R),hn(p,R,d)),null!==a&&Zn(d,R),Cg}function Qh(){let t=Es();Nc()?tc():(t=t.parent,ks(t,!1));const n=t;(function Fd(t){return hr.skipHydrationRootTNode===t})(n)&&function sp(){hr.skipHydrationRootTNode=null}(),function Pu(){hr.lFrame.elementDepthCount--}();const i=$r();return i.firstCreatePass&&(Lu(i,t),po(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function op(t){return 0!=(8&t.flags)}(n)&&Gm(i,n,qt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Hd(t){return 0!=(16&t.flags)}(n)&&Gm(i,n,qt(),n.stylesWithoutHost,!1),Qh}function aa(t,n,i,a){return Cg(t,n,i,a),Qh(),aa}let G_=(t,n,i,a,d,p)=>(Yo(!0),Ap(a,d,function Qo(){return hr.lFrame.currentNamespace}()));function qi(){return qt()}function Xs(t){return!!t&&"function"==typeof t.then}function Si(t){return!!t&&"function"==typeof t.subscribe}function ho(t,n,i,a){const d=qt(),p=$r(),b=Es();return function vc(t,n,i,a,d,p,b){const D=Ps(a),q=t.firstCreatePass&&fg(t),le=n[ai],xe=hg(n);let ct=!0;if(3&a.type||b){const dn=Os(a,n),Rn=b?b(dn):dn,cr=xe.length,rn=b?ri=>b(vi(ri[a.index])):a.index;let kr=null;if(!b&&D&&(kr=function np(t,n,i,a){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const b=d[p];if(b===i&&d[p+1]===a){const D=n[Ds],R=d[p+2];return D.length>R?D[R]:null}"string"==typeof b&&(p+=2)}return null}(t,n,d,a.index)),null!==kr)(kr.__ngLastListenerFn__||kr).__ngNextListenerFn__=p,kr.__ngLastListenerFn__=p,ct=!1;else{p=qm(a,n,le,p,!1);const ri=i.listen(Rn,d,p);xe.push(p,ri),q&&q.push(d,rn,cr,cr+1)}}else p=qm(a,n,le,p,!1);const Et=a.outputs;let zt;if(ct&&null!==Et&&(zt=Et[d])){const dn=zt.length;if(dn)for(let Rn=0;Rn<dn;Rn+=2){const es=n[zt[Rn]][zt[Rn+1]].subscribe(p),Ac=xe.length;xe.push(p,es),q&&q.push(d,a.index,Ac,-(Ac+1))}}}(p,d,d[tr],b,t,n,a),ho}function Tg(t,n,i,a){try{return lr(6,n,i),!1!==i(a)}catch(d){return co(t,d),!1}finally{lr(7,n,i)}}function qm(t,n,i,a,d){return function p(b){if(b===Function)return a;Vh(t.componentOffset>-1?Ns(t.index,n):n);let R=Tg(n,i,a,b),q=p.__ngNextListenerFn__;for(;q;)R=Tg(n,i,q,b)&&R,q=q.__ngNextListenerFn__;return d&&!1===R&&b.preventDefault(),R}}function w0(t=1){return function Oo(t){return(hr.lFrame.contextLView=function nc(t,n){for(;t>0;)n=n[re],t--;return n}(t,hr.lFrame.contextLView))[ai]}(t)}function SI(t,n){let i=null;const a=function Da(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(!(1&i))return n[i+1]}return null}(t);for(let d=0;d<n.length;d++){const p=n[d];if("*"!==p){if(null===a?si(t,p,!0):Vo(a,p))return d}else i=d}return i}function D0(t){const n=qt()[Y][ci];if(!n.projection){const a=n.projection=na(t?t.length:1,null),d=a.slice();let p=n.child;for(;null!==p;){const b=t?SI(p,t):0;null!==b&&(d[b]?d[b].projectionNext=p:a[b]=p,d[b]=p),p=p.next}}}function S0(t,n=0,i){const a=qt(),d=$r(),p=Me(d,jn+t,16,null,i||null);null===p.projection&&(p.projection=n),tc(),(!a[Qt]||Fa())&&32!=(32&p.flags)&&function mh(t,n,i){wp(n[tr],0,n,i,xl(t,i,n),Tp(i.parent||n[ci],i,n))}(d,a,p)}function My(t,n,i){return Xv(t,"",n,"",i),My}function Xv(t,n,i,a,d){const p=qt(),b=sa(p,n,i,a);return b!==u&&Ta($r(),ki(),p,t,b,p[tr],d,!1),Xv}function ey(t,n){return t<<17|n<<2}function rp(t){return t>>17&32767}function Py(t){return 2|t}function wg(t){return(131068&t)>>2}function xy(t,n){return-131069&t|n<<2}function Ry(t){return 1|t}function L0(t,n,i,a,d){const p=t[i+1],b=null===n;let D=a?rp(p):wg(p),R=!1;for(;0!==D&&(!1===R||b);){const le=t[D+1];NI(t[D],n)&&(R=!0,t[D+1]=a?Ry(le):Py(le)),D=a?rp(le):wg(le)}R&&(t[i+1]=a?Py(p):Ry(p))}function NI(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Il(t,n)>=0}function Oy(t,n,i){return Cu(t,n,i,!1),Oy}function Ny(t,n){return Cu(t,n,null,!0),Ny}function Cu(t,n,i,a){const d=qt(),p=$r(),b=S(2);p.firstUpdatePass&&function Z0(t,n,i,a){const d=t.data;if(null===d[i+1]){const p=d[Ks()],b=function $0(t,n){return n>=t.expandoStartIndex}(t,i);(function K0(t,n){return 0!=(t.flags&(n?8:16))})(p,a)&&null===n&&!b&&(n=!1),n=function zI(t,n,i,a){const d=function Ve(t){const n=hr.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let p=a?n.residualClasses:n.residualStyles;if(null===d)0===(a?n.classBindings:n.styleBindings)&&(i=q_(i=ky(null,t,n,i,a),n.attrs,a),p=null);else{const b=n.directiveStylingLast;if(-1===b||t[b]!==d)if(i=ky(d,t,n,i,a),null===p){let R=function $I(t,n,i){const a=i?n.classBindings:n.styleBindings;if(0!==wg(a))return t[rp(a)]}(t,n,a);void 0!==R&&Array.isArray(R)&&(R=ky(null,t,n,R[1],a),R=q_(R,n.attrs,a),function ZI(t,n,i,a){t[rp(i?n.classBindings:n.styleBindings)]=a}(t,n,a,R))}else p=function GI(t,n,i){let a;const d=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<d;p++)a=q_(a,t[p].hostAttrs,i);return q_(a,n.attrs,i)}(t,n,a)}return void 0!==p&&(a?n.residualClasses=p:n.residualStyles=p),i}(d,p,n,a),function RI(t,n,i,a,d,p){let b=p?n.classBindings:n.styleBindings,D=rp(b),R=wg(b);t[a]=i;let le,q=!1;if(Array.isArray(i)?(le=i[1],(null===le||Il(i,le)>0)&&(q=!0)):le=i,d)if(0!==R){const ct=rp(t[D+1]);t[a+1]=ey(ct,D),0!==ct&&(t[ct+1]=xy(t[ct+1],a)),t[D+1]=function PI(t,n){return 131071&t|n<<17}(t[D+1],a)}else t[a+1]=ey(D,0),0!==D&&(t[D+1]=xy(t[D+1],a)),D=a;else t[a+1]=ey(R,0),0===D?D=a:t[R+1]=xy(t[R+1],a),R=a;q&&(t[a+1]=Py(t[a+1])),L0(t,le,a,!0),L0(t,le,a,!1),function OI(t,n,i,a,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&Il(p,n)>=0&&(i[a+1]=Ry(i[a+1]))}(n,le,t,a,p),b=ey(D,R),p?n.classBindings=b:n.styleBindings=b}(d,p,n,i,b,a)}}(p,t,b,a),n!==u&&Zi(d,b,n)&&function q0(t,n,i,a,d,p,b,D){if(!(3&n.type))return;const R=t.data,q=R[D+1],le=function xI(t){return 1==(1&t)}(q)?W0(R,n,i,d,wg(q),b):void 0;ty(le)||(ty(p)||function MI(t){return 2==(2&t)}(q)&&(p=W0(R,null,i,d,D,b)),function ia(t,n,i,a,d){if(n)d?t.addClass(i,a):t.removeClass(i,a);else{let p=-1===a.indexOf("-")?void 0:Xu.DashCase;null==d?t.removeStyle(i,a,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Xu.Important),t.setStyle(i,a,d,p))}}(a,b,Zo(Ks(),i),d,p))}(p,p.data[Ks()],d,d[tr],t,d[b+1]=function QI(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=oe(_o(t)))),t}(n,i),a,b)}function ky(t,n,i,a,d){let p=null;const b=i.directiveEnd;let D=i.directiveStylingLast;for(-1===D?D=i.directiveStart:D++;D<b&&(p=n[D],a=q_(a,p.hostAttrs,d),p!==t);)D++;return null!==t&&(i.directiveStylingLast=D),a}function q_(t,n,i){const a=i?1:2;let d=-1;if(null!==n)for(let p=0;p<n.length;p++){const b=n[p];"number"==typeof b?d=b:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mo(t,b,!!i||n[++p]))}return void 0===t?null:t}function W0(t,n,i,a,d,p){const b=null===n;let D;for(;d>0;){const R=t[d],q=Array.isArray(R),le=q?R[1]:R,xe=null===le;let ct=i[d+1];ct===u&&(ct=xe?yn:void 0);let Et=xe?Jl(ct,a):le===a?ct:void 0;if(q&&!ty(Et)&&(Et=Jl(R,a)),ty(Et)&&(D=Et,b))return D;const zt=t[d+1];d=b?rp(zt):wg(zt)}if(null!==n){let R=p?n.residualClasses:n.residualStyles;null!=R&&(D=Jl(R,a))}return D}function ty(t){return void 0!==t}function Q0(t,n=""){const i=qt(),a=$r(),d=t+jn,p=a.firstCreatePass?Me(a,d,1,n,null):a.data[d],b=Y0(a,i,p,n,t);i[d]=b,ku()&&Ol(a,i,b,p),ks(p,!1)}let Y0=(t,n,i,a,d)=>(Yo(!0),function ya(t,n){return t.createText(n)}(n[tr],a));function Fy(t){return ny("",t,""),Fy}function ny(t,n,i){const a=qt(),d=sa(a,t,n,i);return d!==u&&qa(a,Ks(),d),ny}function Ly(t,n,i,a,d){const p=qt(),b=oa(p,t,n,i,a,d);return b!==u&&qa(p,Ks(),b),Ly}const Dg=void 0;var vb=["en",[["a","p"],["AM","PM"],Dg],[["AM","PM"],Dg,Dg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dg,"{1} 'at' {0}",Dg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _b(t){const i=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let Km={};function Vy(t){const n=function yb(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=_E(n);if(i)return i;const a=n.split("-")[0];if(i=_E(a),i)return i;if("en"===a)return vb;throw new Oe(701,!1)}function mE(t){return Vy(t)[Qm.PluralCase]}function _E(t){return t in Km||(Km[t]=Wn.ng&&Wn.ng.common&&Wn.ng.common.locales&&Wn.ng.common.locales[t]),Km[t]}var Qm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Qm||{});const Ym="en-US";let vE=Ym;function jy(t,n,i,a,d){if(t=Re(t),Array.isArray(t))for(let p=0;p<t.length;p++)jy(t[p],n,i,a,d);else{const p=$r(),b=qt(),D=Es();let R=Ll(t)?t:Re(t.provide);const q=Sh(t),le=1048575&D.providerIndexes,xe=D.directiveStart,ct=D.providerIndexes>>20;if(Ll(t)||!t.multi){const Et=new fl(q,d,P),zt=zy(R,n,d?le:le+ct,xe);-1===zt?(Zr(Hu(D,b),p,R),Hy(p,t,n.length),n.push(R),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),i.push(Et),b.push(Et)):(i[zt]=Et,b[zt]=Et)}else{const Et=zy(R,n,le+ct,xe),zt=zy(R,n,le,le+ct),Rn=zt>=0&&i[zt];if(d&&!Rn||!d&&!(Et>=0&&i[Et])){Zr(Hu(D,b),p,R);const cr=function _C(t,n,i,a,d){const p=new fl(t,i,P);return p.multi=[],p.index=n,p.componentProviders=0,zE(p,d,a&&!i),p}(d?mC:gC,i.length,d,a,q);!d&&Rn&&(i[zt].providerFactory=cr),Hy(p,t,n.length,0),n.push(R),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),i.push(cr),b.push(cr)}else Hy(p,t,Et>-1?Et:zt,zE(i[d?zt:Et],q,!d&&a));!d&&a&&Rn&&i[zt].componentProviders++}}}function Hy(t,n,i,a){const d=Ll(n),p=function Ti(t){return!!t.useClass}(n);if(d||p){const R=(p?Re(n.useClass):n).prototype.ngOnDestroy;if(R){const q=t.destroyHooks||(t.destroyHooks=[]);if(!d&&n.multi){const le=q.indexOf(i);-1===le?q.push(i,[a,R]):q[le+1].push(a,R)}else q.push(i,R)}}}function zE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function zy(t,n,i,a){for(let d=i;d<a;d++)if(n[d]===t)return d;return-1}function gC(t,n,i,a){return $y(this.multi,[])}function mC(t,n,i,a){const d=this.multi;let p;if(this.providerFactory){const b=this.providerFactory.componentProviders,D=Fc(i,i[_n],this.providerFactory.index,a);p=D.slice(0,b),$y(d,p);for(let R=b;R<D.length;R++)p.push(D[R])}else p=[],$y(d,p);return p}function $y(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function $E(t,n=[]){return i=>{i.providersResolver=(a,d)=>function pC(t,n,i){const a=$r();if(a.firstCreatePass){const d=Ki(t);jy(i,a.data,a.blueprint,d,!0),jy(n,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,n)}}class Sg{}class ZE{}function vC(t,n){return new Zy(t,n??null,[])}class Zy extends Sg{constructor(n,i,a){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new km(this);const d=ei(n);this._bootstrapComponents=nl(d.bootstrap),this._r3Injector=b_(n,i,[{provide:Sg,useValue:this},{provide:ng,useValue:this.componentFactoryResolver},...a],oe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Gy extends ZE{constructor(n){super(),this.moduleType=n}create(n){return new Zy(this.moduleType,n,[])}}class GE extends Sg{constructor(n){super(),this.componentFactoryResolver=new km(this),this.instance=null;const i=new fu([...n.providers,{provide:Sg,useValue:this},{provide:ng,useValue:this.componentFactoryResolver}],n.parent||Dh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function qE(t,n,i=null){return new GE({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let EC=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const a=ba(0,i.type),d=a.length>0?qE([a],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,d)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pn({token:t,providedIn:"environment",factory:()=>new t(Zt(dc))})}return t})();function WE(t){t.getStandaloneInjector=n=>n.get(EC).getOrCreateStandaloneInjector(t)}function tA(t,n,i){const a=Ws()+t,d=qt();return d[a]===u?$i(d,a,i?n.call(i):n()):function pc(t,n){return t[n]}(d,a)}function nA(t,n,i,a){return rA(qt(),Ws(),t,n,i,a)}function X_(t,n){const i=t[n];return i===u?void 0:i}function rA(t,n,i,a,d,p){const b=n+i;return Zi(t,b,d)?$i(t,b+1,p?a.call(p,d):a(d)):X_(t,b+1)}function cA(t,n){const i=$r();let a;const d=t+jn;i.firstCreatePass?(a=function LC(t,n){if(n)for(let i=n.length-1;i>=0;i--){const a=n[i];if(t===a.name)return a}}(n,i.pipeRegistry),i.data[d]=a,a.onDestroy&&(i.destroyHooks??=[]).push(d,a.onDestroy)):a=i.data[d];const p=a.factory||(a.factory=no(a.type)),D=Er(P);try{const R=ea(!1),q=p();return ea(R),function Qv(t,n,i,a){i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),n[i]=a}(i,qt(),d,q),q}finally{Er(D)}}function lA(t,n,i){const a=t+jn,d=qt(),p=Go(d,a);return ev(d,a)?rA(d,Ws(),n,p.transform,i,p):p.transform(i)}function uA(t,n,i,a){const d=t+jn,p=qt(),b=Go(p,d);return ev(p,d)?function iA(t,n,i,a,d,p,b){const D=n+i;return Cs(t,D,d,p)?$i(t,D+2,b?a.call(b,d,p):a(d,p)):X_(t,D+2)}(p,Ws(),n,b.transform,i,a,b):b.transform(i,a)}function ev(t,n){return t[_n].data[n].pure}function jC(){return this._results[Symbol.iterator]()}class Wy{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new tl)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Wy.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=jC)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const a=this;a.dirty=!1;const d=function so(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Yd(t,n,i){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],p=n[a];if(i&&(d=i(d),p=i(p)),p!==d)return!1}return!0}(a._results,d,i))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zC(t,n,i,a=!0){const d=n[_n];if(function Zg(t,n,i,a){const d=vr+a,p=i.length;a>0&&(i[d-1][Ni]=n),a<p-vr?(n[Ni]=i[d],Zu(i,vr+a,n)):(i.push(n),n[Ni]=null),n[xr]=i;const b=n[Ne];null!==b&&i!==b&&function Cp(t,n){const i=t[us];n[Y]!==n[xr][xr][Y]&&(t[Rr]=!0),null===i?t[us]=[n]:i.push(n)}(b,n);const D=n[ht];null!==D&&D.insertView(t),n[er]|=128}(d,n,t,i),a){const p=ad(i,t),b=n[tr],D=Rl(b,t[mi]);null!==D&&function Ip(t,n,i,a,d,p){a[Hr]=d,a[ci]=n,qc(t,a,i,1,d,p)}(d,t[ci],b,n,D,p)}}let tv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=GC}return t})();const $C=tv,ZC=class extends $C{constructor(n,i,a){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,a){const d=function HC(t,n,i,a){const d=n.tView,D=he(t,d,i,4096&t[er]?4096:16,null,n,null,null,null,a?.injector??null,a?.hydrationInfo??null);D[Ne]=t[n.index];const q=t[ht];return null!==q&&(D[ht]=q.createEmbeddedView(d)),gg(d,D,i),D}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:a});return new Zh(d)}};function GC(){return ay(Es(),qt())}function ay(t,n){return 4&t.type?new ZC(n,t,Fh(t,n)):null}let ly=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=JC}return t})();function JC(){return _A(Es(),qt())}const XC=ly,gA=class extends XC{constructor(n,i,a){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=a}get element(){return Fh(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){const n=ml(this._hostTNode,this._hostLView);if(pl(n)){const i=Xo(n,this._hostLView),a=Bu(n);return new Vs(i[_n].data[a+8],i)}return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=mA(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-vr}createEmbeddedView(n,i,a){let d,p;"number"==typeof a?d=a:null!=a&&(d=a.index,p=a.injector);const D=n.createEmbeddedViewImpl(i||{},p,null);return this.insertImpl(D,d,false),D}createComponent(n,i,a,d,p){const b=n&&!function ic(t){return"function"==typeof t}(n);let D;if(b)D=i;else{const dn=i||{};D=dn.index,a=dn.injector,d=dn.projectableNodes,p=dn.environmentInjector||dn.ngModuleRef}const R=b?n:new sl(qn(n)),q=a||this.parentInjector;if(!p&&null==R.ngModule){const Rn=(b?q:this.parentInjector).get(dc,null);Rn&&(p=Rn)}qn(R.componentType??{});const Et=R.create(q,d,null,p);return this.insertImpl(Et.hostView,D,false),Et}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,a){const d=n._lView;if(function Od(t){return Ii(t[xr])}(d)){const R=this.indexOf(n);if(-1!==R)this.detach(R);else{const q=d[xr],le=new gA(q,q[ci],q[xr]);le.detach(le.indexOf(n))}}const b=this._adjustIndex(i),D=this._lContainer;return zC(D,d,b,!a),n.attachToViewContainerRef(),Zu(Ky(D),b,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=mA(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),a=lh(this._lContainer,i);a&&(Yl(Ky(this._lContainer),i),uh(a[_n],a))}detach(n){const i=this._adjustIndex(n,-1),a=lh(this._lContainer,i);return a&&null!=Yl(Ky(this._lContainer),i)?new Zh(a):null}_adjustIndex(n,i=0){return n??this.length+i}};function mA(t){return t[8]}function Ky(t){return t[8]||(t[8]=[])}function _A(t,n){let i;const a=n[t.index];return Ii(a)?i=a:(i=Mm(a,n,null,t),n[t.index]=i,Hh(n,i)),vA(i,n,t,a),new gA(i,t,n)}let vA=function yA(t,n,i,a){if(t[mi])return;let d;d=8&i.type?vi(a):function eT(t,n){const i=t[tr],a=i.createComment(""),d=Os(n,t);return $a(i,Rl(i,d),a,function Cf(t,n){return t.nextSibling(n)}(i,d),!1),a}(n,i),t[mi]=d};class Qy{constructor(n){this.queryList=n,this.matches=null}clone(){return new Qy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yy{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const a=null!==n.contentQueries?n.contentQueries[0]:i.length,d=[];for(let p=0;p<a;p++){const b=i.getByIndex(p);d.push(this.queries[b.indexInDeclarationView].clone())}return new Yy(d)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==DA(n,i).matches&&this.queries[i].setDirty()}}class EA{constructor(n,i,a=null){this.predicate=n,this.flags=i,this.read=a}}class Jy{constructor(n=[]){this.queries=n}elementStart(n,i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let a=0;a<this.length;a++){const d=null!==i?i.length:0,p=this.getByIndex(a).embeddedTView(n,d);p&&(p.indexInDeclarationView=a,null!==i?i.push(p):i=[p])}return null!==i?new Jy(i):null}template(n,i){for(let a=0;a<this.queries.length;a++)this.queries[a].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Xy{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Xy(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let a=n.parent;for(;null!==a&&8&a.type&&a.index!==i;)a=a.parent;return i===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const p=a[d];this.matchTNodeWithReadOption(n,i,rT(i,p)),this.matchTNodeWithReadOption(n,i,Wl(i,n,p,!1,!1))}else a===tv?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Wl(i,n,a,!1,!1))}matchTNodeWithReadOption(n,i,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Lf||d===ly||d===tv&&4&i.type)this.addMatch(i.index,-2);else{const p=Wl(i,n,d,!1,!1);null!==p&&this.addMatch(i.index,p)}else this.addMatch(i.index,a)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function rT(t,n){const i=t.localNames;if(null!==i)for(let a=0;a<i.length;a+=2)if(i[a]===n)return i[a+1];return null}function sT(t,n,i,a){return-1===i?function iT(t,n){return 11&t.type?Fh(t,n):4&t.type?ay(t,n):null}(n,t):-2===i?function oT(t,n,i){return i===Lf?Fh(n,t):i===tv?ay(n,t):i===ly?_A(n,t):void 0}(t,n,a):Fc(t,t[_n],i,n)}function AA(t,n,i,a){const d=n[ht].queries[a];if(null===d.matches){const p=t.data,b=i.matches,D=[];for(let R=0;R<b.length;R+=2){const q=b[R];D.push(q<0?null:sT(n,p[q],b[R+1],i.metadata.read))}d.matches=D}return d.matches}function e0(t,n,i,a){const d=t.queries.getByIndex(i),p=d.matches;if(null!==p){const b=AA(t,n,d,i);for(let D=0;D<p.length;D+=2){const R=p[D];if(R>0)a.push(b[D/2]);else{const q=p[D+1],le=n[-R];for(let xe=vr;xe<le.length;xe++){const ct=le[xe];ct[Ne]===ct[xr]&&e0(ct[_n],ct,q,a)}if(null!==le[us]){const xe=le[us];for(let ct=0;ct<xe.length;ct++){const Et=xe[ct];e0(Et[_n],Et,q,a)}}}}}return a}function IA(t){const n=qt(),i=$r(),a=St();Mt(a+1);const d=DA(i,a);if(t.dirty&&function Xa(t){return 4==(4&t[er])}(n)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?e0(i,n,a,[]):AA(i,n,d,a);t.reset(p,ig),t.notifyOnChanges()}return!0}return!1}function bA(t,n,i,a){const d=$r();if(d.firstCreatePass){const p=Es();(function wA(t,n,i){null===t.queries&&(t.queries=new Jy),t.queries.track(new Xy(n,i))})(d,new EA(n,i,a),p.index),function lT(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(d,t),2==(2&i)&&(d.staticContentQueries=!0)}!function TA(t,n,i){const a=new Wy(4==(4&i));(function mt(t,n,i,a){const d=hg(n);d.push(i),t.firstCreatePass&&fg(t).push(a,d.length-1)})(t,n,a,a.destroy),null===n[ht]&&(n[ht]=new Yy),n[ht].queries.push(new Qy(a))}(d,qt(),i)}function CA(){return function cT(t,n){return t[ht].queries[n].queryList}(qt(),St())}function DA(t,n){return t.queries.getByIndex(n)}function t0(t){return!!ei(t)}const $A=new gn("Application Initializer");let a0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,a)=>{this.resolve=i,this.reject=a}),this.appInits=cn($A,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const d of this.appInits){const p=d();if(Xs(p))i.push(p);else if(Si(p)){const b=new Promise((D,R)=>{p.subscribe({complete:D,error:R})});i.push(b)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{a()}).catch(d=>{this.reject(d)}),0===i.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZA=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const dy=new gn("LocaleId",{providedIn:"root",factory:()=>cn(dy,In.Optional|In.SkipSelf)||function xT(){return typeof $localize<"u"&&$localize.locale||Ym}()}),RT=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let GA=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _e.X(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class NT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let kT=(()=>{class t{compileModuleSync(i){return new Gy(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const a=this.compileModuleSync(i),p=nl(ei(i).declarations).reduce((b,D)=>{const R=qn(D);return R&&b.push(new sl(R)),b},[]);return new NT(a,p)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const QA=new gn(""),YA=new gn("");let u0,rw=(()=>{class t{constructor(i,a,d){this._ngZone=i,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,u0||(function iw(t){u0=t}(d),d.addToWindow(a)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(i)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,a,d){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==p),i(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:i,timeoutId:p,updateCb:d})}whenStable(i,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,a,d){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Zt(bs),Zt(JA),Zt(YA))};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac})}return t})(),JA=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,a){this._applications.set(i,a)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,a=!0){return u0?.findTestabilityInTree(this,i,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ip=null;const XA=new gn("AllowMultipleToken"),d0=new gn("PlatformDestroyListeners"),h0=new gn("appBootstrapListener");class aw{constructor(n,i){this.name=n,this.token=i}}function nI(t,n,i=[]){const a=`Platform: ${n}`,d=new gn(a);return(p=[])=>{let b=f0();if(!b||b.injector.get(XA,!1)){const D=[...i,...p,{provide:d,useValue:!0}];t?t(D):function cw(t){if(ip&&!ip.get(XA,!1))throw new Oe(400,!1);(function eI(){!function $l(t){Na=t}(()=>{throw new Oe(600,!1)})})(),ip=t;const n=t.get(iI);(function tI(t){t.get(Jc,null)?.forEach(i=>i())})(t)}(function rI(t=[],n){return hc.create({name:n,providers:[{provide:rm,useValue:"platform"},{provide:d0,useValue:new Set([()=>ip=null])},...t]})}(D,a))}return function uw(t){const n=f0();if(!n)throw new Oe(401,!1);return n}()}}function f0(){return ip?.get(iI)??null}let iI=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,a){const d=function dw(t="zone.js",n){return"noop"===t?new Iy:"zone.js"===t?new bs(n):t}(a?.ngZone,function sI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return d.run(()=>{const p=function yC(t,n,i){return new Zy(t,n,i)}(i.moduleType,this.injector,function uI(t){return[{provide:bs,useFactory:t},{provide:gd,multi:!0,useFactory:()=>{const n=cn(fw,{optional:!0});return()=>n.initialize()}},{provide:lI,useFactory:hw},{provide:Av,useFactory:Iv}]}(()=>d)),b=p.injector.get(yu,null);return d.runOutsideAngular(()=>{const D=d.onError.subscribe({next:R=>{b.handleError(R)}});p.onDestroy(()=>{fy(this._modules,p),D.unsubscribe()})}),function oI(t,n,i){try{const a=i();return Xs(a)?a.catch(d=>{throw n.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw n.runOutsideAngular(()=>t.handleError(a)),a}}(b,d,()=>{const D=p.injector.get(a0);return D.runInitializers(),D.donePromise.then(()=>(function yE(t){Bt(t,"Expected localeId to be defined"),"string"==typeof t&&(vE=t.toLowerCase().replace(/_/g,"-"))}(p.injector.get(dy,Ym)||Ym),this._moduleDoBootstrap(p),p))})})}bootstrapModule(i,a=[]){const d=aI({},a);return function sw(t,n,i){const a=new Gy(i);return Promise.resolve(a)}(0,0,i).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(i){const a=i.injector.get(e_);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!i.instance.ngDoBootstrap)throw new Oe(-403,!1);i.instance.ngDoBootstrap(a)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const i=this._injector.get(d0,null);i&&(i.forEach(a=>a()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Zt(hc))};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function aI(t,n){return Array.isArray(n)?n.reduce(aI,t):{...t,...n}}let e_=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=cn(lI),this.zoneIsStable=cn(Av),this.componentTypes=[],this.components=[],this.isStable=cn(GA).hasPendingTasks.pipe((0,ae.w)(i=>i?(0,Ae.of)(!1):this.zoneIsStable),(0,ve.x)(),(0,de.B)()),this._injector=cn(dc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,a){const d=i instanceof hv;if(!this._injector.get(a0).done)throw!d&&Bi(i),new Oe(405,!1);let b;b=d?i:this._injector.get(ng).resolveComponentFactory(i),this.componentTypes.push(b.componentType);const D=function ow(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Sg),q=b.create(hc.NULL,[],a||b.selector,D),le=q.location.nativeElement,xe=q.injector.get(QA,null);return xe?.registerApplication(le),q.onDestroy(()=>{this.detachView(q.hostView),fy(this.components,q),xe?.unregisterApplication(le)}),this._loadComponent(q),q}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const a=i;this._views.push(a),a.attachToAppRef(this)}detachView(i){const a=i;fy(this._views,a),a.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const a=this._injector.get(h0,[]);a.push(...this._bootstrapListeners),a.forEach(d=>d(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>fy(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Oe(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fy(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const lI=new gn("",{providedIn:"root",factory:()=>cn(yu).handleError.bind(void 0)});function hw(){const t=cn(bs),n=cn(yu);return i=>t.runOutsideAngular(()=>n.handleError(i))}let fw=(()=>{class t{constructor(){this.zone=cn(bs),this.applicationRef=cn(e_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Pn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gw(){return!1}let mw=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=_w}return t})();function _w(t){return function vw(t,n,i){if(os(t)&&!i){const a=Ns(t.index,n);return new Zh(a,a)}return 47&t.type?new Zh(n[Y],n):null}(Es(),qt(),16==(16&t))}class pI{constructor(){}supports(n){return ir(n)}create(n){return new Cw(n)}}const bw=(t,n)=>n;class Cw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||bw}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,a=this._removalsHead,d=0,p=null;for(;i||a;){const b=!a||i&&i.currentIndex<mI(a,d,p)?i:a,D=mI(b,d,p),R=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(i=i._next,null==b.previousIndex)d++;else{p||(p=[]);const q=D-d,le=R-d;if(q!=le){for(let ct=0;ct<q;ct++){const Et=ct<p.length?p[ct]:p[ct]=0,zt=Et+ct;le<=zt&&zt<q&&(p[ct]=Et+1)}p[b.previousIndex]=le-q}}D!==R&&n(b,D,R)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!ir(n))throw new Oe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let d,p,b,i=this._itHead,a=!1;if(Array.isArray(n)){this.length=n.length;for(let D=0;D<this.length;D++)p=n[D],b=this._trackByFn(D,p),null!==i&&Object.is(i.trackById,b)?(a&&(i=this._verifyReinsertion(i,p,b,D)),Object.is(i.item,p)||this._addIdentityChange(i,p)):(i=this._mismatch(i,p,b,D),a=!0),i=i._next}else d=0,function as(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let a;for(;!(a=i.next()).done;)n(a.value)}}(n,D=>{b=this._trackByFn(d,D),null!==i&&Object.is(i.trackById,b)?(a&&(i=this._verifyReinsertion(i,D,b,d)),Object.is(i.item,D)||this._addIdentityChange(i,D)):(i=this._mismatch(i,D,b,d),a=!0),i=i._next,d++}),this.length=d;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,a,d){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,p,d)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,p,d)):n=this._addAfter(new Tw(i,a),p,d),n}_verifyReinsertion(n,i,a,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?n=this._reinsertAfter(p,n._prev,d):n.currentIndex!=d&&(n.currentIndex=d,this._addToMoves(n,d)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const d=n._prevRemoved,p=n._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(n,i,a),this._addToMoves(n,a),n}_moveAfter(n,i,a){return this._unlink(n),this._insertAfter(n,i,a),this._addToMoves(n,a),n}_addAfter(n,i,a){return this._insertAfter(n,i,a),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,a){const d=null===i?this._itHead:i._next;return n._next=d,n._prev=i,null===d?this._itTail=n:d._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new gI),this._linkedRecords.put(n),n.currentIndex=a,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,a=n._next;return null===i?this._itHead=a:i._next=a,null===a?this._itTail=i:a._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gI),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Tw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ww{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===i||i<=a.currentIndex)&&Object.is(a.trackById,n))return a;return null}remove(n){const i=n._prevDup,a=n._nextDup;return null===i?this._head=a:i._nextDup=a,null===a?this._tail=i:a._prevDup=i,null===this._head}}class gI{constructor(){this.map=new Map}put(n){const i=n.trackById;let a=this.map.get(i);a||(a=new ww,this.map.set(i,a)),a.add(n)}get(n,i){const d=this.map.get(n);return d?d.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mI(t,n,i){const a=t.previousIndex;if(null===a)return a;let d=0;return i&&a<i.length&&(d=i[a]),a+n+d}class _I{constructor(){}supports(n){return n instanceof Map||cs(n)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||cs(n)))throw new Oe(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(a,d)=>{if(i&&i.key===d)this._maybeAddToChanges(i,a),this._appendAfter=i,i=i._next;else{const p=this._getOrCreateRecordForKey(d,a);i=this._insertBeforeOrAppend(i,p)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let a=i;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const a=n._prev;return i._next=n,i._prev=a,n._prev=i,a&&(a._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const d=this._records.get(n);this._maybeAddToChanges(d,i);const p=d._prev,b=d._next;return p&&(p._next=b),b&&(b._prev=p),d._next=null,d._prev=null,d}const a=new Sw(n);return this._records.set(n,a),a.currentValue=i,this._addToAdditions(a),a}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(a=>i(n[a],a))}}class Sw{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vI(){return new v0([new pI])}let v0=(()=>{class t{static#e=this.\u0275prov=Pn({token:t,providedIn:"root",factory:vI});constructor(i){this.factories=i}static create(i,a){if(null!=a){const d=a.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||vI()),deps:[[t,new Ha,new jc]]}}find(i){const a=this.factories.find(d=>d.supports(i));if(null!=a)return a;throw new Oe(901,!1)}}return t})();function yI(){return new y0([new _I])}let y0=(()=>{class t{static#e=this.\u0275prov=Pn({token:t,providedIn:"root",factory:yI});constructor(i){this.factories=i}static create(i,a){if(a){const d=a.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||yI()),deps:[[t,new Ha,new jc]]}}find(i){const a=this.factories.find(d=>d.supports(i));if(a)return a;throw new Oe(901,!1)}}return t})();const xw=nI(null,"core",[]);let Rw=(()=>{class t{constructor(i){}static#e=this.\u0275fac=function(a){return new(a||t)(Zt(e_))};static#t=this.\u0275mod=gs({type:t});static#n=this.\u0275inj=sn({})}return t})();function zw(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Zw(t){const n=qn(t);if(!n)return null;const i=new sl(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},7213:(an,lt,k)=>{"use strict";k.d(lt,{zQ:()=>Ke,ww:()=>ut,rT:()=>Nt,f7:()=>Dn,L6:()=>bt,_Q:()=>Ee,lh:()=>Vt,Qv:()=>dt,nw:()=>wt}),k(6365);var s=k(6814),B=k(5879),Se=k(1920),_e=k(7217),Ae=k(8645),de=k(2096),ae=k(5592),ve=k(2459),$=k(3019),z=k(3093),oe=k(4664),be=k(7398),ye=k(4552);class De extends Ae.x{constructor(we=1/0,te=1/0,Ie=ye.l){super(),this._bufferSize=we,this._windowTime=te,this._timestampProvider=Ie,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=te===1/0,this._bufferSize=Math.max(1,we),this._windowTime=Math.max(1,te)}next(we){const{isStopped:te,_buffer:Ie,_infiniteTimeWindow:Pe,_timestampProvider:je,_windowTime:st}=this;te||(Ie.push(we),!Pe&&Ie.push(je.now()+st)),this._trimBuffer(),super.next(we)}_subscribe(we){this._throwIfClosed(),this._trimBuffer();const te=this._innerSubscribe(we),{_infiniteTimeWindow:Ie,_buffer:Pe}=this,je=Pe.slice();for(let st=0;st<je.length&&!we.closed;st+=Ie?1:2)we.next(je[st]);return this._checkFinalizedStatuses(we),te}_trimBuffer(){const{_bufferSize:we,_timestampProvider:te,_buffer:Ie,_infiniteTimeWindow:Pe}=this,je=(Pe?1:2)*we;if(we<1/0&&je<Ie.length&&Ie.splice(0,Ie.length-je),!Pe){const st=te.now();let vt=0;for(let Bt=1;Bt<Ie.length&&Ie[Bt]<=st;Bt+=2)vt=Bt;vt&&Ie.splice(0,vt+1)}}}var Re=k(3020);function Ye(Le,we,te){let Ie,Pe=!1;return Le&&"object"==typeof Le?({bufferSize:Ie=1/0,windowTime:we=1/0,refCount:Pe=!1,scheduler:te}=Le):Ie=Le??1/0,(0,Re.B)({connector:()=>new De(Ie,we,te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Pe})}var We=k(1374),_t=k(4674);function Fe(Le,we){return(0,_t.m)(we)?(0,oe.w)(()=>Le,we):(0,oe.w)(()=>Le)}var Oe=k(5137),tt=k(2181),Ze=k(7142);const dt=new B.OlP("angularfire2.auth.use-emulator"),bt=new B.OlP("angularfire2.auth.settings"),Ee=new B.OlP("angularfire2.auth.tenant-id"),Nt=new B.OlP("angularfire2.auth.langugage-code"),Vt=new B.OlP("angularfire2.auth.use-device-language"),Dn=new B.OlP("angularfire.auth.persistence"),wt=(Le,we,te,Ie,Pe,je,st,vt)=>(0,_e.cc)(`${Le.name}.auth`,"AngularFireAuth",Le.name,()=>{const Bt=we.runOutsideAngular(()=>Le.auth());if(te&&Bt.useEmulator(...te),Ie&&(Bt.tenantId=Ie),Bt.languageCode=Pe,je&&Bt.useDeviceLanguage(),st)for(const[Gt,Kt]of Object.entries(st))Bt.settings[Gt]=Kt;return vt&&Bt.setPersistence(vt),Bt},[te,Ie,Pe,je,st,vt]);let Ke=(()=>{class Le{authState;idToken;user;idTokenResult;credential;constructor(te,Ie,Pe,je,st,vt,Bt,Gt,Kt,bn,Yn,Pn){const On=new Ae.x,sn=(0,de.of)(void 0).pipe((0,z.Q)(st.outsideAngular),(0,oe.w)(()=>je.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,6365)))),(0,be.U)(()=>(0,_e.on)(te,je,Ie)),(0,be.U)(Nn=>wt(Nn,je,vt,Gt,Kt,bn,Bt,Yn)),Ye({bufferSize:1,refCount:!1}));if((0,s.PM)(Pe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,de.of)(null);else{sn.pipe((0,We.P)()).subscribe();const Nn=sn.pipe((0,oe.w)(Yt=>Yt.getRedirectResult().then(Br=>Br,()=>null)),Se.iC,Ye({bufferSize:1,refCount:!1})),gr=sn.pipe((0,oe.w)(Yt=>new ae.y(Br=>({unsubscribe:je.runOutsideAngular(()=>Yt.onAuthStateChanged(xn=>Br.next(xn),xn=>Br.error(xn),()=>Br.complete()))})))),Jn=sn.pipe((0,oe.w)(Yt=>new ae.y(Br=>({unsubscribe:je.runOutsideAngular(()=>Yt.onIdTokenChanged(xn=>Br.next(xn),xn=>Br.error(xn),()=>Br.complete()))}))));this.authState=Nn.pipe(Fe(gr),(0,Oe.R)(st.outsideAngular),(0,z.Q)(st.insideAngular)),this.user=Nn.pipe(Fe(Jn),(0,Oe.R)(st.outsideAngular),(0,z.Q)(st.insideAngular)),this.idToken=this.user.pipe((0,oe.w)(Yt=>Yt?(0,ve.D)(Yt.getIdToken()):(0,de.of)(null))),this.idTokenResult=this.user.pipe((0,oe.w)(Yt=>Yt?(0,ve.D)(Yt.getIdTokenResult()):(0,de.of)(null))),this.credential=(0,$.T)(Nn,On,this.authState.pipe((0,tt.h)(Yt=>!Yt))).pipe((0,be.U)(Yt=>Yt?.user?Yt:null),(0,Oe.R)(st.outsideAngular),(0,z.Q)(st.insideAngular))}return(0,_e.pX)(this,sn,je,{spy:{apply:(Nn,gr,Jn)=>{(Nn.startsWith("signIn")||Nn.startsWith("createUser"))&&Jn.then(Yt=>On.next(Yt))}}})}static \u0275fac=function(Ie){return new(Ie||Le)(B.LFG(_e.Dh),B.LFG(_e.xv,8),B.LFG(B.Lbi),B.LFG(B.R0b),B.LFG(Se.HU),B.LFG(dt,8),B.LFG(bt,8),B.LFG(Ee,8),B.LFG(Nt,8),B.LFG(Vt,8),B.LFG(Dn,8),B.LFG(Se.Rf,8))};static \u0275prov=B.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"any"})}return Le})(),ut=(()=>{class Le{constructor(){Ze.Z.registerVersion("angularfire",Se.q4.full,"auth-compat")}static \u0275fac=function(Ie){return new(Ie||Le)};static \u0275mod=B.oAB({type:Le});static \u0275inj=B.cJS({providers:[Ke]})}return Le})()},7104:(an,lt,k)=>{"use strict";k.d(lt,{ST:()=>ii,yb:()=>at});var f=k(6814),s=k(5879),B=k(1920),Se=k(7217),_e=k(7213),Ae=k(6321),de=k(5592),ae=k(2459),ve=k(2096),$=k(7921),z=k(9360),oe=k(8251);function be(){return(0,z.e)((Dt,ue)=>{let Be,xt=!1;Dt.subscribe((0,oe.x)(ue,tn=>{const zn=Be;Be=tn,xt&&ue.next([zn,tn]),xt=!0}))})}var ye=k(7398),De=k(6699),Re=k(3997),Ye=k(2181),_t=(k(6365),k(3106)),Fe=k(5588),Oe=k(9058),tt=k(4537);function dt(Dt,ue){if(void 0===ue)return{merge:!1};if(void 0!==ue.mergeFields&&void 0!==ue.merge)throw new Fe.WA("invalid-argument",`Invalid options passed to function ${Dt}(): You cannot specify both "merge" and "mergeFields".`);return ue}function bt(){if(typeof Uint8Array>"u")throw new Fe.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Ee(){if(!(0,Fe.Me)())throw new Fe.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Nt{constructor(ue){this._delegate=ue}static fromBase64String(ue){return Ee(),new Nt(Fe.Jj.fromBase64String(ue))}static fromUint8Array(ue){return bt(),new Nt(Fe.Jj.fromUint8Array(ue))}toBase64(){return Ee(),this._delegate.toBase64()}toUint8Array(){return bt(),this._delegate.toUint8Array()}isEqual(ue){return this._delegate.isEqual(ue._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vt(Dt){return function Dn(Dt,ue){if("object"!=typeof Dt||null===Dt)return!1;const Be=Dt;for(const xt of ue)if(xt in Be&&"function"==typeof Be[xt])return!0;return!1}(Dt,["next","error","complete"])}class wt{enableIndexedDbPersistence(ue,Be){return(0,Fe.ST)(ue._delegate,{forceOwnership:Be})}enableMultiTabIndexedDbPersistence(ue){return(0,Fe.fH)(ue._delegate)}clearIndexedDbPersistence(ue){return(0,Fe.Fc)(ue._delegate)}}class Ke{constructor(ue,Be,xt){this._delegate=Be,this._persistenceProvider=xt,this.INTERNAL={delete:()=>this.terminate()},ue instanceof Fe.l7||(this._appCompat=ue)}get _databaseId(){return this._delegate._databaseId}settings(ue){const Be=this._delegate._getSettings();!ue.merge&&Be.host!==ue.host&&(0,Fe.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),ue.merge&&delete(ue=Object.assign(Object.assign({},Be),ue)).merge,this._delegate._setSettings(ue)}useEmulator(ue,Be,xt={}){(0,Fe.at)(this._delegate,ue,Be,xt)}enableNetwork(){return(0,Fe.Ix)(this._delegate)}disableNetwork(){return(0,Fe.TF)(this._delegate)}enablePersistence(ue){let Be=!1,xt=!1;return ue&&(Be=!!ue.synchronizeTabs,xt=!!ue.experimentalForceOwningTab,(0,Fe.Wi)("synchronizeTabs",Be,"experimentalForceOwningTab",xt)),Be?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,xt)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Fe.Mx)(this._delegate)}onSnapshotsInSync(ue){return(0,Fe.sc)(this._delegate,ue)}get app(){if(!this._appCompat)throw new Fe.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(ue){try{return new Pn(this,(0,Fe.hJ)(this._delegate,ue))}catch(Be){throw je(Be,"collection()","Firestore.collection()")}}doc(ue){try{return new Pe(this,(0,Fe.JU)(this._delegate,ue))}catch(Be){throw je(Be,"doc()","Firestore.doc()")}}collectionGroup(ue){try{return new Kt(this,(0,Fe.B$)(this._delegate,ue))}catch(Be){throw je(Be,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(ue){return(0,Fe.i3)(this._delegate,Be=>ue(new we(this,Be)))}batch(){return(0,Fe.qY)(this._delegate),new te(new Fe.PU(this._delegate,ue=>(0,Fe.GL)(this._delegate,ue)))}loadBundle(ue){return(0,Fe.Pb)(this._delegate,ue)}namedQuery(ue){return(0,Fe.L$)(this._delegate,ue).then(Be=>Be?new Kt(this,Be):null)}}class ut extends Fe.u7{constructor(ue){super(),this.firestore=ue}convertBytes(ue){return new Nt(new Fe.Jj(ue))}convertReference(ue){const Be=this.convertDocumentKey(ue,this.firestore._databaseId);return Pe.forKey(Be,this.firestore,null)}}class we{constructor(ue,Be){this._firestore=ue,this._delegate=Be,this._userDataWriter=new ut(ue)}get(ue){const Be=On(ue);return this._delegate.get(Be).then(xt=>new Bt(this._firestore,new Fe.xU(this._firestore._delegate,this._userDataWriter,xt._key,xt._document,xt.metadata,Be.converter)))}set(ue,Be,xt){const tn=On(ue);return xt?(dt("Transaction.set",xt),this._delegate.set(tn,Be,xt)):this._delegate.set(tn,Be),this}update(ue,Be,xt,...tn){const zn=On(ue);return 2===arguments.length?this._delegate.update(zn,Be):this._delegate.update(zn,Be,xt,...tn),this}delete(ue){const Be=On(ue);return this._delegate.delete(Be),this}}class te{constructor(ue){this._delegate=ue}set(ue,Be,xt){const tn=On(ue);return xt?(dt("WriteBatch.set",xt),this._delegate.set(tn,Be,xt)):this._delegate.set(tn,Be),this}update(ue,Be,xt,...tn){const zn=On(ue);return 2===arguments.length?this._delegate.update(zn,Be):this._delegate.update(zn,Be,xt,...tn),this}delete(ue){const Be=On(ue);return this._delegate.delete(Be),this}commit(){return this._delegate.commit()}}class Ie{constructor(ue,Be,xt){this._firestore=ue,this._userDataWriter=Be,this._delegate=xt}fromFirestore(ue,Be){const xt=new Fe.$q(this._firestore._delegate,this._userDataWriter,ue._key,ue._document,ue.metadata,null);return this._delegate.fromFirestore(new Gt(this._firestore,xt),Be??{})}toFirestore(ue,Be){return Be?this._delegate.toFirestore(ue,Be):this._delegate.toFirestore(ue)}static getInstance(ue,Be){const xt=Ie.INSTANCES;let tn=xt.get(ue);tn||(tn=new WeakMap,xt.set(ue,tn));let zn=tn.get(Be);return zn||(zn=new Ie(ue,new ut(ue),Be),tn.set(Be,zn)),zn}}Ie.INSTANCES=new WeakMap;class Pe{constructor(ue,Be){this.firestore=ue,this._delegate=Be,this._userDataWriter=new ut(ue)}static forPath(ue,Be,xt){if(ue.length%2!=0)throw new Fe.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${ue.canonicalString()} has ${ue.length}`);return new Pe(Be,new Fe.my(Be._delegate,xt,new Fe.Ky(ue)))}static forKey(ue,Be,xt){return new Pe(Be,new Fe.my(Be._delegate,xt,ue))}get id(){return this._delegate.id}get parent(){return new Pn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(ue){try{return new Pn(this.firestore,(0,Fe.hJ)(this._delegate,ue))}catch(Be){throw je(Be,"collection()","DocumentReference.collection()")}}isEqual(ue){return(ue=(0,Oe.m9)(ue))instanceof Fe.my&&(0,Fe.Eo)(this._delegate,ue)}set(ue,Be){Be=dt("DocumentReference.set",Be);try{return Be?(0,Fe.pl)(this._delegate,ue,Be):(0,Fe.pl)(this._delegate,ue)}catch(xt){throw je(xt,"setDoc()","DocumentReference.set()")}}update(ue,Be,...xt){try{return 1===arguments.length?(0,Fe.r7)(this._delegate,ue):(0,Fe.r7)(this._delegate,ue,Be,...xt)}catch(tn){throw je(tn,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Fe.oe)(this._delegate)}onSnapshot(...ue){const Be=st(ue),xt=vt(ue,tn=>new Bt(this.firestore,new Fe.xU(this.firestore._delegate,this._userDataWriter,tn._key,tn._document,tn.metadata,this._delegate.converter)));return(0,Fe.cf)(this._delegate,Be,xt)}get(ue){let Be;return Be="cache"===ue?.source?(0,Fe.kl)(this._delegate):"server"===ue?.source?(0,Fe.Xk)(this._delegate):(0,Fe.QT)(this._delegate),Be.then(xt=>new Bt(this.firestore,new Fe.xU(this.firestore._delegate,this._userDataWriter,xt._key,xt._document,xt.metadata,this._delegate.converter)))}withConverter(ue){return new Pe(this.firestore,this._delegate.withConverter(ue?Ie.getInstance(this.firestore,ue):null))}}function je(Dt,ue,Be){return Dt.message=Dt.message.replace(ue,Be),Dt}function st(Dt){for(const ue of Dt)if("object"==typeof ue&&!Vt(ue))return ue;return{}}function vt(Dt,ue){var Be,xt;let tn;return tn=Vt(Dt[0])?Dt[0]:Vt(Dt[1])?Dt[1]:"function"==typeof Dt[0]?{next:Dt[0],error:Dt[1],complete:Dt[2]}:{next:Dt[1],error:Dt[2],complete:Dt[3]},{next:zn=>{tn.next&&tn.next(ue(zn))},error:null===(Be=tn.error)||void 0===Be?void 0:Be.bind(tn),complete:null===(xt=tn.complete)||void 0===xt?void 0:xt.bind(tn)}}class Bt{constructor(ue,Be){this._firestore=ue,this._delegate=Be}get ref(){return new Pe(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(ue){return this._delegate.data(ue)}get(ue,Be){return this._delegate.get(ue,Be)}isEqual(ue){return(0,Fe.qK)(this._delegate,ue._delegate)}}class Gt extends Bt{data(ue){const Be=this._delegate.data(ue);return this._delegate._converter||(0,Fe.K9)(void 0!==Be,"Document in a QueryDocumentSnapshot should exist"),Be}}class Kt{constructor(ue,Be){this.firestore=ue,this._delegate=Be,this._userDataWriter=new ut(ue)}where(ue,Be,xt){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.ar)(ue,Be,xt)))}catch(tn){throw je(tn,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(ue,Be){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.Xo)(ue,Be)))}catch(xt){throw je(xt,/(orderBy|where)\(\)/,"Query.$1()")}}limit(ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.b9)(ue)))}catch(Be){throw je(Be,"limit()","Query.limit()")}}limitToLast(ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.vh)(ue)))}catch(Be){throw je(Be,"limitToLast()","Query.limitToLast()")}}startAt(...ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.e0)(...ue)))}catch(Be){throw je(Be,"startAt()","Query.startAt()")}}startAfter(...ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.TQ)(...ue)))}catch(Be){throw je(Be,"startAfter()","Query.startAfter()")}}endBefore(...ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.Lx)(...ue)))}catch(Be){throw je(Be,"endBefore()","Query.endBefore()")}}endAt(...ue){try{return new Kt(this.firestore,(0,Fe.IO)(this._delegate,(0,Fe.Wu)(...ue)))}catch(Be){throw je(Be,"endAt()","Query.endAt()")}}isEqual(ue){return(0,Fe.iE)(this._delegate,ue._delegate)}get(ue){let Be;return Be="cache"===ue?.source?(0,Fe.UQ)(this._delegate):"server"===ue?.source?(0,Fe.zN)(this._delegate):(0,Fe.PL)(this._delegate),Be.then(xt=>new Yn(this.firestore,new Fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,xt._snapshot)))}onSnapshot(...ue){const Be=st(ue),xt=vt(ue,tn=>new Yn(this.firestore,new Fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,tn._snapshot)));return(0,Fe.cf)(this._delegate,Be,xt)}withConverter(ue){return new Kt(this.firestore,this._delegate.withConverter(ue?Ie.getInstance(this.firestore,ue):null))}}class bn{constructor(ue,Be){this._firestore=ue,this._delegate=Be}get type(){return this._delegate.type}get doc(){return new Gt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yn{constructor(ue,Be){this._firestore=ue,this._delegate=Be}get query(){return new Kt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(ue=>new Gt(this._firestore,ue))}docChanges(ue){return this._delegate.docChanges(ue).map(Be=>new bn(this._firestore,Be))}forEach(ue,Be){this._delegate.forEach(xt=>{ue.call(Be,new Gt(this._firestore,xt))})}isEqual(ue){return(0,Fe.qK)(this._delegate,ue._delegate)}}class Pn extends Kt{constructor(ue,Be){super(ue,Be),this.firestore=ue,this._delegate=Be}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const ue=this._delegate.parent;return ue?new Pe(this.firestore,ue):null}doc(ue){try{return new Pe(this.firestore,void 0===ue?(0,Fe.JU)(this._delegate):(0,Fe.JU)(this._delegate,ue))}catch(Be){throw je(Be,"doc()","CollectionReference.doc()")}}add(ue){return(0,Fe.ET)(this._delegate,ue).then(Be=>new Pe(this.firestore,Be))}isEqual(ue){return(0,Fe.Eo)(this._delegate,ue._delegate)}withConverter(ue){return new Pn(this.firestore,this._delegate.withConverter(ue?Ie.getInstance(this.firestore,ue):null))}}function On(Dt){return(0,Fe.Cf)(Dt,Fe.my)}class sn{constructor(...ue){this._delegate=new Fe.Lz(...ue)}static documentId(){return new sn(Fe.Xb.keyField().canonicalString())}isEqual(ue){return(ue=(0,Oe.m9)(ue))instanceof Fe.Lz&&this._delegate._internalPath.isEqual(ue._internalPath)}}class Nn{constructor(ue){this._delegate=ue}static serverTimestamp(){const ue=(0,Fe.Bt)();return ue._methodName="FieldValue.serverTimestamp",new Nn(ue)}static delete(){const ue=(0,Fe.AK)();return ue._methodName="FieldValue.delete",new Nn(ue)}static arrayUnion(...ue){const Be=(0,Fe.vr)(...ue);return Be._methodName="FieldValue.arrayUnion",new Nn(Be)}static arrayRemove(...ue){const Be=(0,Fe.Ab)(...ue);return Be._methodName="FieldValue.arrayRemove",new Nn(Be)}static increment(ue){const Be=(0,Fe.nP)(ue);return Be._methodName="FieldValue.increment",new Nn(Be)}isEqual(ue){return this._delegate.isEqual(ue._delegate)}}const gr={Firestore:Ke,GeoPoint:Fe.F8,Timestamp:Fe.EK,Blob:Nt,Transaction:we,WriteBatch:te,DocumentReference:Pe,DocumentSnapshot:Bt,Query:Kt,QueryDocumentSnapshot:Gt,QuerySnapshot:Yn,CollectionReference:Pn,FieldPath:sn,FieldValue:Nn,setLogLevel:function Le(Dt){(0,Fe.Ub)(Dt)},CACHE_SIZE_UNLIMITED:Fe.IX};!function Yt(Dt){(function Jn(Dt,ue){Dt.INTERNAL.registerComponent(new tt.wA("firestore-compat",Be=>{const xt=Be.getProvider("app-compat").getImmediate(),tn=Be.getProvider("firestore").getImmediate();return ue(xt,tn)},"PUBLIC").setServiceProps(Object.assign({},gr)))})(Dt,(ue,Be)=>new Ke(ue,Be,new wt)),Dt.registerVersion("@firebase/firestore-compat","0.3.32")}(_t.Z);var Br=k(7142);function Mr(Dt,ue){return function xn(Dt,ue=Ae.z){return new de.y(Be=>{let xt;return null!=ue?ue.schedule(()=>{xt=Dt.onSnapshot({includeMetadataChanges:!0},Be)}):xt=Dt.onSnapshot({includeMetadataChanges:!0},Be),()=>{xt?.()}})}(Dt,ue)}function Jt(Dt,ue){return Mr(Dt,ue).pipe((0,ye.U)(Be=>({payload:Be,type:"query"})))}class In{ref;afs;constructor(ue,Be){this.ref=ue,this.afs=Be}set(ue,Be){return this.ref.set(ue,Be)}update(ue){return this.ref.update(ue)}delete(){return this.ref.delete()}collection(ue,Be){const xt=this.ref.collection(ue),{ref:tn,query:zn}=wr(xt,Be);return new Jr(tn,zn,this.afs)}snapshotChanges(){return function sr(Dt,ue){return Mr(Dt,ue).pipe((0,$.O)(void 0),be(),(0,ye.U)(Be=>{const[xt,tn]=Be;return tn.exists?xt?.exists?{payload:tn,type:"modified"}:{payload:tn,type:"added"}:{payload:tn,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(B.iC)}valueChanges(ue={}){return this.snapshotChanges().pipe((0,ye.U)(({payload:Be})=>ue.idField?{...Be.data(),[ue.idField]:Be.id}:Be.data()))}get(ue){return(0,ae.D)(this.ref.get(ue)).pipe(B.iC)}}function Bn(Dt,ue){return Jt(Dt,ue).pipe((0,$.O)(void 0),be(),(0,ye.U)(Be=>{const[xt,tn]=Be,zn=tn.payload.docChanges(),hi=zn.map(Cr=>({type:Cr.type,payload:Cr}));return xt&&JSON.stringify(xt.payload.metadata)!==JSON.stringify(tn.payload.metadata)&&tn.payload.docs.forEach((Cr,qe)=>{const ce=zn.find(H=>H.doc.ref.isEqual(Cr.ref)),K=xt?.payload.docs.find(H=>H.ref.isEqual(Cr.ref));ce&&JSON.stringify(ce.doc.metadata)===JSON.stringify(Cr.metadata)||!ce&&K&&JSON.stringify(K.metadata)===JSON.stringify(Cr.metadata)||hi.push({type:"modified",payload:{oldIndex:qe,newIndex:qe,type:"modified",doc:Cr}})}),hi}))}function Hn(Dt,ue,Be){return Bn(Dt,Be).pipe((0,De.R)((xt,tn)=>function Er(Dt,ue,Be){return ue.forEach(xt=>{Be.indexOf(xt.type)>-1&&(Dt=function Gn(Dt,ue){switch(ue.type){case"added":if(!Dt[ue.newIndex]||!Dt[ue.newIndex].doc.ref.isEqual(ue.doc.ref))return br(Dt,ue.newIndex,0,ue);break;case"modified":if(null==Dt[ue.oldIndex]||Dt[ue.oldIndex].doc.ref.isEqual(ue.doc.ref)){if(ue.oldIndex!==ue.newIndex){const Be=Dt.slice();return Be.splice(ue.oldIndex,1),Be.splice(ue.newIndex,0,ue),Be}return br(Dt,ue.newIndex,1,ue)}break;case"removed":if(Dt[ue.oldIndex]&&Dt[ue.oldIndex].doc.ref.isEqual(ue.doc.ref))return br(Dt,ue.oldIndex,1)}return Dt}(Dt,xt))}),Dt}(xt,tn.map(zn=>zn.payload),ue),[]),(0,Re.x)(),(0,ye.U)(xt=>xt.map(tn=>({type:tn.type,payload:tn}))))}function br(Dt,ue,Be,...xt){const tn=Dt.slice();return tn.splice(ue,Be,...xt),tn}function Wn(Dt){return(!Dt||0===Dt.length)&&(Dt=["added","removed","modified"]),Dt}class Jr{ref;query;afs;constructor(ue,Be,xt){this.ref=ue,this.query=Be,this.afs=xt}stateChanges(ue){let Be=Bn(this.query,this.afs.schedulers.outsideAngular);return ue&&ue.length>0&&(Be=Be.pipe((0,ye.U)(xt=>xt.filter(tn=>ue.indexOf(tn.type)>-1)))),Be.pipe((0,$.O)(void 0),be(),(0,Ye.h)(([xt,tn])=>tn.length>0||!xt),(0,ye.U)(([,xt])=>xt),B.iC)}auditTrail(ue){return this.stateChanges(ue).pipe((0,De.R)((Be,xt)=>[...Be,...xt],[]))}snapshotChanges(ue){const Be=Wn(ue);return Hn(this.query,Be,this.afs.schedulers.outsideAngular).pipe(B.iC)}valueChanges(ue={}){return Jt(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(Be=>Be.payload.docs.map(xt=>ue.idField?{...xt.data(),[ue.idField]:xt.id}:xt.data())),B.iC)}get(ue){return(0,ae.D)(this.query.get(ue)).pipe(B.iC)}add(ue){return this.ref.add(ue)}doc(ue){return new In(this.ref.doc(ue),this.afs)}}class yi{query;afs;constructor(ue,Be){this.query=ue,this.afs=Be}stateChanges(ue){return ue&&0!==ue.length?Bn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(Be=>Be.filter(xt=>ue.indexOf(xt.type)>-1)),(0,Ye.h)(Be=>Be.length>0),B.iC):Bn(this.query,this.afs.schedulers.outsideAngular).pipe(B.iC)}auditTrail(ue){return this.stateChanges(ue).pipe((0,De.R)((Be,xt)=>[...Be,...xt],[]))}snapshotChanges(ue){const Be=Wn(ue);return Hn(this.query,Be,this.afs.schedulers.outsideAngular).pipe(B.iC)}valueChanges(ue={}){return Jt(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(xt=>xt.payload.docs.map(tn=>ue.idField?{[ue.idField]:tn.id,...tn.data()}:tn.data())),B.iC)}get(ue){return(0,ae.D)(this.query.get(ue)).pipe(B.iC)}}const gn=new s.OlP("angularfire2.enableFirestorePersistence"),Vr=new s.OlP("angularfire2.firestore.persistenceSettings"),ar=new s.OlP("angularfire2.firestore.settings"),Pr=new s.OlP("angularfire2.firestore.use-emulator");function wr(Dt,ue=(Be=>Be)){return{query:ue(Dt),ref:Dt}}let ii=(()=>{class Dt{schedulers;firestore;persistenceEnabled$;constructor(Be,xt,tn,zn,hi,Cr,qe,ce,K,H,U,Te,Xe,kt,Zt,mn,cn){this.schedulers=qe;const fn=(0,Se.on)(Be,Cr,xt),Xn=K;H&&(0,_e.nw)(fn,Cr,U,Xe,kt,Zt,Te,mn),[this.firestore,this.persistenceEnabled$]=(0,Se.cc)(`${fn.name}.firestore`,"AngularFirestore",fn.name,()=>{const Je=Cr.runOutsideAngular(()=>fn.firestore());if(zn&&Je.settings(zn),Xn&&Je.useEmulator(...Xn),tn&&!(0,f.PM)(hi)){const He=()=>{try{return(0,ae.D)(Je.enablePersistence(ce||void 0).then(()=>!0,()=>!1))}catch(nt){return typeof console<"u"&&console.warn(nt),(0,ve.of)(!1)}};return[Je,Cr.runOutsideAngular(He)]}return[Je,(0,ve.of)(!1)]},[zn,Xn,tn])}collection(Be,xt){let tn;tn="string"==typeof Be?this.firestore.collection(Be):Be;const{ref:zn,query:hi}=wr(tn,xt),Cr=this.schedulers.ngZone.run(()=>zn);return new Jr(Cr,hi,this)}collectionGroup(Be,xt){const tn=xt||(hi=>hi),zn=this.firestore.collectionGroup(Be);return new yi(tn(zn),this)}doc(Be){let xt;xt="string"==typeof Be?this.firestore.doc(Be):Be;const tn=this.schedulers.ngZone.run(()=>xt);return new In(tn,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(xt){return new(xt||Dt)(s.LFG(Se.Dh),s.LFG(Se.xv,8),s.LFG(gn,8),s.LFG(ar,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(B.HU),s.LFG(Vr,8),s.LFG(Pr,8),s.LFG(_e.zQ,8),s.LFG(_e.Qv,8),s.LFG(_e.L6,8),s.LFG(_e._Q,8),s.LFG(_e.rT,8),s.LFG(_e.lh,8),s.LFG(_e.f7,8),s.LFG(B.Rf,8))};static \u0275prov=s.Yz7({token:Dt,factory:Dt.\u0275fac,providedIn:"any"})}return Dt})(),at=(()=>{class Dt{constructor(){Br.Z.registerVersion("angularfire",B.q4.full,"fst-compat")}static enablePersistence(Be){return{ngModule:Dt,providers:[{provide:gn,useValue:!0},{provide:Vr,useValue:Be}]}}static \u0275fac=function(xt){return new(xt||Dt)};static \u0275mod=s.oAB({type:Dt});static \u0275inj=s.cJS({providers:[ii]})}return Dt})()},243:(an,lt,k)=>{"use strict";k.d(lt,{Q1:()=>Ke,TE:()=>we});var f=k(1920),s=k(5592),B=k(2096),Se=k(2459),_e=k(3620),Ae=k(7398),de=k(4664),ae=k(5879),ve=k(7217),$=k(3106),z=k(8153),oe=k(4537);class be{constructor(Ie,Pe,je){this._delegate=Ie,this.task=Pe,this.ref=je}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ye{constructor(Ie,Pe){this._delegate=Ie,this._ref=Pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new be(this._delegate.snapshot,this,this._ref)}then(Ie,Pe){return this._delegate.then(je=>{if(Ie)return Ie(new be(je,this,this._ref))},Pe)}on(Ie,Pe,je,st){let vt;return Pe&&(vt="function"==typeof Pe?Bt=>Pe(new be(Bt,this,this._ref)):{next:Pe.next?Bt=>Pe.next(new be(Bt,this,this._ref)):void 0,complete:Pe.complete||void 0,error:Pe.error||void 0}),this._delegate.on(Ie,vt,je||void 0,st||void 0)}}class De{constructor(Ie,Pe){this._delegate=Ie,this._service=Pe}get prefixes(){return this._delegate.prefixes.map(Ie=>new Re(Ie,this._service))}get items(){return this._delegate.items.map(Ie=>new Re(Ie,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Re{constructor(Ie,Pe){this._delegate=Ie,this.storage=Pe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(Ie){const Pe=(0,z.g6)(this._delegate,Ie);return new Re(Pe,this.storage)}get root(){return new Re(this._delegate.root,this.storage)}get parent(){const Ie=this._delegate.parent;return null==Ie?null:new Re(Ie,this.storage)}put(Ie,Pe){return this._throwIfRoot("put"),new ye((0,z.B0)(this._delegate,Ie,Pe),this)}putString(Ie,Pe=z.bm.RAW,je){this._throwIfRoot("putString");const st=(0,z.qm)(Pe,Ie),vt=Object.assign({},je);return null==vt.contentType&&null!=st.contentType&&(vt.contentType=st.contentType),new ye(new z.IX(this._delegate,new z.UJ(st.data,!0),vt),this)}listAll(){return(0,z.aF)(this._delegate).then(Ie=>new De(Ie,this.storage))}list(Ie){return(0,z.pb)(this._delegate,Ie||void 0).then(Pe=>new De(Pe,this.storage))}getMetadata(){return(0,z.sd)(this._delegate)}updateMetadata(Ie){return(0,z.Ym)(this._delegate,Ie)}getDownloadURL(){return(0,z.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,z.oq)(this._delegate)}_throwIfRoot(Ie){if(""===this._delegate._location.path)throw(0,z.y4)(Ie)}}class Ye{constructor(Ie,Pe){this.app=Ie,this._delegate=Pe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(Ie){if(We(Ie))throw(0,z.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new Re((0,z.iH)(this._delegate,Ie),this)}refFromURL(Ie){if(!We(Ie))throw(0,z.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{z.gE.makeFromUrl(Ie,this._delegate.host)}catch{throw(0,z.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new Re((0,z.iH)(this._delegate,Ie),this)}setMaxUploadRetryTime(Ie){this._delegate.maxUploadRetryTime=Ie}setMaxOperationRetryTime(Ie){this._delegate.maxOperationRetryTime=Ie}useEmulator(Ie,Pe,je={}){(0,z.a1)(this._delegate,Ie,Pe,je)}}function We(te){return/^[A-Za-z]+:\/\//.test(te)}function tt(te,{instanceIdentifier:Ie}){const Pe=te.getProvider("app-compat").getImmediate(),je=te.getProvider("storage").getImmediate({identifier:Ie});return new Ye(Pe,je)}!function Ze(te){const Ie={TaskState:z.$Y,TaskEvent:z.FN,StringFormat:z.bm,Storage:Ye,Reference:Re};te.INTERNAL.registerComponent(new oe.wA("storage-compat",tt,"PUBLIC").setServiceProps(Ie).setMultipleInstances(!0)),te.registerVersion("@firebase/storage-compat","0.3.8")}($.Z);var Ge=k(7142);function bt(te){const Ie=function dt(te){return new s.y(Ie=>{const Pe=Bt=>Ie.next(Bt);Pe(te.snapshot);const vt=te.on("state_changed",Pe);return te.then(Bt=>{Pe(Bt),Ie.complete()},Bt=>{Pe(te.snapshot),(Bt=>{Ie.error(Bt)})(Bt)}),function(){vt()}}).pipe((0,_e.b)(0))}(te);return{task:te,then:te.then.bind(te),catch:te.catch.bind(te),pause:te.pause.bind(te),cancel:te.cancel.bind(te),resume:te.resume.bind(te),snapshotChanges:()=>Ie,percentageChanges:()=>Ie.pipe((0,Ae.U)(Pe=>Pe.bytesTransferred/Pe.totalBytes*100))}}function Ee(te){return{getDownloadURL:()=>(0,B.of)(void 0).pipe(f.fc,(0,de.w)(()=>te.getDownloadURL()),f.iC),getMetadata:()=>(0,B.of)(void 0).pipe(f.fc,(0,de.w)(()=>te.getMetadata()),f.iC),delete:()=>(0,Se.D)(te.delete()),child:Ie=>Ee(te.child(Ie)),updateMetadata:Ie=>(0,Se.D)(te.updateMetadata(Ie)),put:(Ie,Pe)=>bt(te.put(Ie,Pe)),putString:(Ie,Pe,je)=>bt(te.putString(Ie,Pe,je)),list:Ie=>(0,Se.D)(te.list(Ie)),listAll:()=>(0,Se.D)(te.listAll())}}const Nt=new ae.OlP("angularfire2.storageBucket"),Vt=new ae.OlP("angularfire2.storage.maxUploadRetryTime"),Dn=new ae.OlP("angularfire2.storage.maxOperationRetryTime"),wt=new ae.OlP("angularfire2.storage.use-emulator");let Ke=(()=>{class te{storage;constructor(Pe,je,st,vt,Bt,Gt,Kt,bn,Yn,Pn){const On=(0,ve.on)(Pe,Bt,je);this.storage=(0,ve.cc)(`${On.name}.storage.${st}`,"AngularFireStorage",On.name,()=>{const sn=Bt.runOutsideAngular(()=>On.storage(st||void 0)),Nn=Yn;return Nn&&sn.useEmulator(...Nn),Kt&&sn.setMaxUploadRetryTime(Kt),bn&&sn.setMaxOperationRetryTime(bn),sn},[Kt,bn])}ref(Pe){return Ee(this.storage.ref(Pe))}refFromURL(Pe){return Ee(this.storage.refFromURL(Pe))}upload(Pe,je,st){return Ee(this.storage.ref(Pe)).put(je,st)}static \u0275fac=function(je){return new(je||te)(ae.LFG(ve.Dh),ae.LFG(ve.xv,8),ae.LFG(Nt,8),ae.LFG(ae.Lbi),ae.LFG(ae.R0b),ae.LFG(f.HU),ae.LFG(Vt,8),ae.LFG(Dn,8),ae.LFG(wt,8),ae.LFG(f.Rf,8))};static \u0275prov=ae.Yz7({token:te,factory:te.\u0275fac,providedIn:"any"})}return te})(),Le=(()=>{class te{static \u0275fac=function(je){return new(je||te)};static \u0275mod=ae.oAB({type:te});static \u0275inj=ae.cJS({})}return te})(),we=(()=>{class te{constructor(){Ge.Z.registerVersion("angularfire",f.q4.full,"gcs-compat")}static \u0275fac=function(je){return new(je||te)};static \u0275mod=ae.oAB({type:te});static \u0275inj=ae.cJS({providers:[Ke],imports:[Le]})}return te})()},7217:(an,lt,k)=>{"use strict";k.d(lt,{Dh:()=>ae,GT:()=>Ae,cc:()=>ye,hO:()=>be,on:()=>$,pX:()=>_e,xv:()=>ve});var f=k(5879),s=k(1920),B=k(7142);const Se=["ngOnDestroy"],_e=(We,_t,Fe,Oe={})=>new Proxy(We,{get:(tt,Ze)=>Fe.runOutsideAngular(()=>{if(We[Ze])return Oe?.spy?.get&&Oe.spy.get(Ze,We[Ze]),We[Ze];if(Se.indexOf(Ze)>-1)return()=>{};const Ge=_t.toPromise().then(dt=>{const bt=dt?.[Ze];return"function"==typeof bt?bt.bind(dt):bt?.then?bt.then(Ee=>Fe.run(()=>Ee)):Fe.run(()=>bt)});return new Proxy(()=>{},{get:(dt,bt)=>Ge[bt],apply:(dt,bt,Ee)=>Ge.then(Nt=>{const Vt=Nt?.(...Ee);return Oe?.spy?.apply&&Oe.spy.apply(Ze,Ee,Vt),Vt})})})}),Ae=(We,_t)=>{_t.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Oe=>{Object.defineProperty(We.prototype,Oe,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Oe))})})};class de{constructor(_t){return _t}}const ae=new f.OlP("angularfire2.app.options"),ve=new f.OlP("angularfire2.app.name");function $(We,_t,Fe){const tt="object"==typeof Fe&&Fe||{};tt.name=tt.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const Ge=B.Z.apps.filter(dt=>dt&&dt.name===tt.name)[0]||_t.runOutsideAngular(()=>B.Z.initializeApp(We,tt));try{if(JSON.stringify(We)!==JSON.stringify(Ge.options)){const dt=!!module.hot;z("error",`${Ge.name} Firebase App already initialized with different options${dt?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new de(Ge)}const z=(We,..._t)=>{(0,f.X6Q)()&&typeof console<"u"&&console[We](..._t)},oe={provide:de,useFactory:$,deps:[ae,f.R0b,[new f.FiY,ve]]};let be=(()=>{class We{static initializeApp(Fe,Oe){return{ngModule:We,providers:[{provide:ae,useValue:Fe},{provide:ve,useValue:Oe}]}}constructor(Fe){B.Z.registerVersion("angularfire",s.q4.full,"core"),B.Z.registerVersion("angularfire",s.q4.full,"app-compat"),B.Z.registerVersion("angular",f.q4F.full,Fe.toString())}static \u0275fac=function(Oe){return new(Oe||We)(f.LFG(f.Lbi))};static \u0275mod=f.oAB({type:We});static \u0275inj=f.cJS({providers:[oe]})}return We})();function ye(We,_t,Fe,Oe,tt){const[,Ze,Ge]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===We)||[];if(Ze)return function De(We,_t){try{return We.toString()===_t.toString()}catch{return We===_t}}(tt,Ge)||(Ye("error",`${_t} was already initialized on the ${Fe} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:tt,was:Ge})),Ze;{const dt=Oe();return globalThis.\u0275AngularfireInstanceCache.push([We,dt,tt]),dt}}const Re=typeof module<"u"&&!!module.hot,Ye=(We,..._t)=>{(0,f.X6Q)()&&typeof console<"u"&&console[We](..._t)};globalThis.\u0275AngularfireInstanceCache||=[]},1920:(an,lt,k)=>{"use strict";k.d(lt,{q4:()=>ye,iC:()=>Vt,fc:()=>Ee,HU:()=>Ze,Rf:()=>We,vb:()=>Ye,JM:()=>Re,u3:()=>Ke});var f=k(5879),s=k(3182),B=k(1954),_e=k(2631);const de=new class Ae extends _e.v{}(class Se extends B.o{constructor(Le,we){super(Le,we),this.scheduler=Le,this.work=we}schedule(Le,we=0){return we>0?super.schedule(Le,we):(this.delay=we,this.state=Le,this.scheduler.flush(this),this)}execute(Le,we){return we>0||this.closed?super.execute(Le,we):this._execute(Le,we)}requestAsyncId(Le,we,te=0){return null!=te&&te>0||null==te&&this.delay>0?super.requestAsyncId(Le,we,te):(Le.flush(this),0)}});var ve=k(6321),$=k(5592),z=k(9397),oe=k(3093),be=k(5137);const ye=new f.GfV("ANGULARFIRE2_VERSION");function Re(ut,Le,we){if(Le){if(1===Le.length)return Le[0];const Pe=Le.filter(je=>je.app===we);if(1===Pe.length)return Pe[0]}return we.container.getProvider(ut).getImmediate({optional:!0})}const Ye=(ut,Le)=>{const we=Le?[Le]:(0,s.C6)(),te=[];return we.forEach(Ie=>{Ie.container.getProvider(ut).instances.forEach(je=>{te.includes(je)||te.push(je)})}),te};class We{constructor(){return Ye(_t)}}const _t="app-check";function Fe(){}class Oe{zone;delegate;constructor(Le,we=de){this.zone=Le,this.delegate=we}now(){return this.delegate.now()}schedule(Le,we,te){const Ie=this.zone;return this.delegate.schedule(function(je){Ie.runGuarded(()=>{Le.apply(this,[je])})},we,te)}}class tt{zone;task=null;constructor(Le){this.zone=Le}call(Le,we){const te=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fe,{},Fe,Fe)),we.pipe((0,z.b)({next:te,complete:te,error:te})).subscribe(Le).add(te)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ze=(()=>{class ut{ngZone;outsideAngular;insideAngular;constructor(we){this.ngZone=we,this.outsideAngular=we.runOutsideAngular(()=>new Oe(Zone.current)),this.insideAngular=we.run(()=>new Oe(Zone.current,ve.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(te){return new(te||ut)(f.LFG(f.R0b))};static \u0275prov=f.Yz7({token:ut,factory:ut.\u0275fac,providedIn:"root"})}return ut})();function Ge(){const ut=globalThis.\u0275AngularFireScheduler;if(!ut)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return ut}function bt(ut){return Ge().ngZone.run(()=>ut())}function Ee(ut){return ut.pipe((0,oe.Q)(Ge().outsideAngular))}function Vt(ut){return function Dn(ut){return function(we){return(we=we.lift(new tt(ut.ngZone))).pipe((0,be.R)(ut.outsideAngular),(0,oe.Q)(ut.insideAngular))}}(Ge())(ut)}const wt=(ut,Le)=>function(){const te=arguments;return Le&&setTimeout(()=>{"scheduled"===Le.state&&Le.invoke()},10),bt(()=>ut.apply(void 0,te))},Ke=(ut,Le)=>function(){let we;const te=arguments;for(let Pe=0;Pe<arguments.length;Pe++)"function"==typeof te[Pe]&&(Le&&(we||=bt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fe,{},Fe,Fe))),te[Pe]=wt(te[Pe],we));const Ie=function dt(ut){return Ge().ngZone.runOutsideAngular(()=>ut())}(()=>ut.apply(this,te));if(!Le){if(Ie instanceof $.y){const Pe=Ge();return Ie.pipe((0,be.R)(Pe.outsideAngular),(0,oe.Q)(Pe.insideAngular))}return bt(()=>Ie)}return Ie instanceof $.y?Ie.pipe(Vt):Ie instanceof Promise?bt(()=>new Promise((Pe,je)=>Ie.then(st=>bt(()=>Pe(st)),st=>bt(()=>je(st))))):"function"==typeof Ie&&we?function(){return setTimeout(()=>{we&&"scheduled"===we.state&&we.invoke()},10),Ie.apply(this,arguments)}:bt(()=>Ie)}},6223:(an,lt,k)=>{"use strict";k.d(lt,{EJ:()=>is,F:()=>Pi,Fj:()=>ye,JJ:()=>Yt,JL:()=>Br,Kr:()=>Ss,On:()=>Wi,Q7:()=>Qt,UX:()=>Bo,Wl:()=>$,YN:()=>ci,_Y:()=>bo,kI:()=>Fe,qu:()=>Ki,sg:()=>ei,u:()=>_n,u5:()=>Qa,x0:()=>rs});var f=k(5879),s=k(6814),B=k(2459),Se=k(9315),_e=k(7398);let Ae=(()=>{class Q{constructor(F,pe){this._renderer=F,this._elementRef=pe,this.onChange=ze=>{},this.onTouched=()=>{}}setProperty(F,pe){this._renderer.setProperty(this._elementRef.nativeElement,F,pe)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(f.Qsj),f.Y36(f.SBq))};static#t=this.\u0275dir=f.lG2({type:Q})}return Q})(),de=(()=>{class Q extends Ae{static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,features:[f.qOj]})}return Q})();const ae=new f.OlP("NgValueAccessor"),ve={provide:ae,useExisting:(0,f.Gpc)(()=>$),multi:!0};let $=(()=>{class Q extends de{writeValue(F){this.setProperty("checked",F)}static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("change",function(_r){return ze.onChange(_r.target.checked)})("blur",function(){return ze.onTouched()})},features:[f._Bn([ve]),f.qOj]})}return Q})();const z={provide:ae,useExisting:(0,f.Gpc)(()=>ye),multi:!0},be=new f.OlP("CompositionEventMode");let ye=(()=>{class Q extends Ae{constructor(F,pe,ze){super(F,pe),this._compositionMode=ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oe(){const Q=(0,s.q)()?(0,s.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(F){this.setProperty("value",F??"")}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(be,8))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("input",function(_r){return ze._handleInput(_r.target.value)})("blur",function(){return ze.onTouched()})("compositionstart",function(){return ze._compositionStart()})("compositionend",function(_r){return ze._compositionEnd(_r.target.value)})},features:[f._Bn([z]),f.qOj]})}return Q})();function De(Q){return null==Q||("string"==typeof Q||Array.isArray(Q))&&0===Q.length}function Re(Q){return null!=Q&&"number"==typeof Q.length}const Ye=new f.OlP("NgValidators"),We=new f.OlP("NgAsyncValidators"),_t=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fe{static min(ie){return function Oe(Q){return ie=>{if(De(ie.value)||De(Q))return null;const F=parseFloat(ie.value);return!isNaN(F)&&F<Q?{min:{min:Q,actual:ie.value}}:null}}(ie)}static max(ie){return function tt(Q){return ie=>{if(De(ie.value)||De(Q))return null;const F=parseFloat(ie.value);return!isNaN(F)&&F>Q?{max:{max:Q,actual:ie.value}}:null}}(ie)}static required(ie){return Ze(ie)}static requiredTrue(ie){return function Ge(Q){return!0===Q.value?null:{required:!0}}(ie)}static email(ie){return function dt(Q){return De(Q.value)||_t.test(Q.value)?null:{email:!0}}(ie)}static minLength(ie){return function bt(Q){return ie=>De(ie.value)||!Re(ie.value)?null:ie.value.length<Q?{minlength:{requiredLength:Q,actualLength:ie.value.length}}:null}(ie)}static maxLength(ie){return function Ee(Q){return ie=>Re(ie.value)&&ie.value.length>Q?{maxlength:{requiredLength:Q,actualLength:ie.value.length}}:null}(ie)}static pattern(ie){return function Nt(Q){if(!Q)return Vt;let ie,F;return"string"==typeof Q?(F="","^"!==Q.charAt(0)&&(F+="^"),F+=Q,"$"!==Q.charAt(Q.length-1)&&(F+="$"),ie=new RegExp(F)):(F=Q.toString(),ie=Q),pe=>{if(De(pe.value))return null;const ze=pe.value;return ie.test(ze)?null:{pattern:{requiredPattern:F,actualValue:ze}}}}(ie)}static nullValidator(ie){return null}static compose(ie){return te(ie)}static composeAsync(ie){return Pe(ie)}}function Ze(Q){return De(Q.value)?{required:!0}:null}function Vt(Q){return null}function Dn(Q){return null!=Q}function wt(Q){return(0,f.QGY)(Q)?(0,B.D)(Q):Q}function Ke(Q){let ie={};return Q.forEach(F=>{ie=null!=F?{...ie,...F}:ie}),0===Object.keys(ie).length?null:ie}function ut(Q,ie){return ie.map(F=>F(Q))}function we(Q){return Q.map(ie=>function Le(Q){return!Q.validate}(ie)?ie:F=>ie.validate(F))}function te(Q){if(!Q)return null;const ie=Q.filter(Dn);return 0==ie.length?null:function(F){return Ke(ut(F,ie))}}function Ie(Q){return null!=Q?te(we(Q)):null}function Pe(Q){if(!Q)return null;const ie=Q.filter(Dn);return 0==ie.length?null:function(F){const pe=ut(F,ie).map(wt);return(0,Se.D)(pe).pipe((0,_e.U)(Ke))}}function je(Q){return null!=Q?Pe(we(Q)):null}function st(Q,ie){return null===Q?[ie]:Array.isArray(Q)?[...Q,ie]:[Q,ie]}function vt(Q){return Q._rawValidators}function Bt(Q){return Q._rawAsyncValidators}function Gt(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Kt(Q,ie){return Array.isArray(Q)?Q.includes(ie):Q===ie}function bn(Q,ie){const F=Gt(ie);return Gt(Q).forEach(ze=>{Kt(F,ze)||F.push(ze)}),F}function Yn(Q,ie){return Gt(ie).filter(F=>!Kt(Q,F))}class Pn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ie){this._rawValidators=ie||[],this._composedValidatorFn=Ie(this._rawValidators)}_setAsyncValidators(ie){this._rawAsyncValidators=ie||[],this._composedAsyncValidatorFn=je(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ie){this._onDestroyCallbacks.push(ie)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ie=>ie()),this._onDestroyCallbacks=[]}reset(ie=void 0){this.control&&this.control.reset(ie)}hasError(ie,F){return!!this.control&&this.control.hasError(ie,F)}getError(ie,F){return this.control?this.control.getError(ie,F):null}}class On extends Pn{get formDirective(){return null}get path(){return null}}class sn extends Pn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nn{constructor(ie){this._cd=ie}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Yt=(()=>{class Q extends Nn{constructor(F){super(F)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(sn,2))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(pe,ze){2&pe&&f.ekj("ng-untouched",ze.isUntouched)("ng-touched",ze.isTouched)("ng-pristine",ze.isPristine)("ng-dirty",ze.isDirty)("ng-valid",ze.isValid)("ng-invalid",ze.isInvalid)("ng-pending",ze.isPending)},features:[f.qOj]})}return Q})(),Br=(()=>{class Q extends Nn{constructor(F){super(F)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(On,10))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(pe,ze){2&pe&&f.ekj("ng-untouched",ze.isUntouched)("ng-touched",ze.isTouched)("ng-pristine",ze.isPristine)("ng-dirty",ze.isDirty)("ng-valid",ze.isValid)("ng-invalid",ze.isInvalid)("ng-pending",ze.isPending)("ng-submitted",ze.isSubmitted)},features:[f.qOj]})}return Q})();const wr="VALID",ii="INVALID",at="PENDING",Dt="DISABLED";function ue(Q){return(zn(Q)?Q.validators:Q)||null}function xt(Q,ie){return(zn(ie)?ie.asyncValidators:Q)||null}function zn(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}function hi(Q,ie,F){const pe=Q.controls;if(!(ie?Object.keys(pe):pe).length)throw new f.vHH(1e3,"");if(!pe[F])throw new f.vHH(1001,"")}function Cr(Q,ie,F){Q._forEachChild((pe,ze)=>{if(void 0===F[ze])throw new f.vHH(1002,"")})}class qe{constructor(ie,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(ie),this._assignAsyncValidators(F)}get validator(){return this._composedValidatorFn}set validator(ie){this._rawValidators=this._composedValidatorFn=ie}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ie){this._rawAsyncValidators=this._composedAsyncValidatorFn=ie}get parent(){return this._parent}get valid(){return this.status===wr}get invalid(){return this.status===ii}get pending(){return this.status==at}get disabled(){return this.status===Dt}get enabled(){return this.status!==Dt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ie){this._assignValidators(ie)}setAsyncValidators(ie){this._assignAsyncValidators(ie)}addValidators(ie){this.setValidators(bn(ie,this._rawValidators))}addAsyncValidators(ie){this.setAsyncValidators(bn(ie,this._rawAsyncValidators))}removeValidators(ie){this.setValidators(Yn(ie,this._rawValidators))}removeAsyncValidators(ie){this.setAsyncValidators(Yn(ie,this._rawAsyncValidators))}hasValidator(ie){return Kt(this._rawValidators,ie)}hasAsyncValidator(ie){return Kt(this._rawAsyncValidators,ie)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ie={}){this.touched=!0,this._parent&&!ie.onlySelf&&this._parent.markAsTouched(ie)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ie=>ie.markAllAsTouched())}markAsUntouched(ie={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!ie.onlySelf&&this._parent._updateTouched(ie)}markAsDirty(ie={}){this.pristine=!1,this._parent&&!ie.onlySelf&&this._parent.markAsDirty(ie)}markAsPristine(ie={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!ie.onlySelf&&this._parent._updatePristine(ie)}markAsPending(ie={}){this.status=at,!1!==ie.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ie.onlySelf&&this._parent.markAsPending(ie)}disable(ie={}){const F=this._parentMarkedDirty(ie.onlySelf);this.status=Dt,this.errors=null,this._forEachChild(pe=>{pe.disable({...ie,onlySelf:!0})}),this._updateValue(),!1!==ie.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ie,skipPristineCheck:F}),this._onDisabledChange.forEach(pe=>pe(!0))}enable(ie={}){const F=this._parentMarkedDirty(ie.onlySelf);this.status=wr,this._forEachChild(pe=>{pe.enable({...ie,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ie.emitEvent}),this._updateAncestors({...ie,skipPristineCheck:F}),this._onDisabledChange.forEach(pe=>pe(!1))}_updateAncestors(ie){this._parent&&!ie.onlySelf&&(this._parent.updateValueAndValidity(ie),ie.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ie){this._parent=ie}getRawValue(){return this.value}updateValueAndValidity(ie={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wr||this.status===at)&&this._runAsyncValidator(ie.emitEvent)),!1!==ie.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ie.onlySelf&&this._parent.updateValueAndValidity(ie)}_updateTreeValidity(ie={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(ie)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ie.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dt:wr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ie){if(this.asyncValidator){this.status=at,this._hasOwnPendingAsyncValidator=!0;const F=wt(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(pe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(pe,{emitEvent:ie})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ie,F={}){this.errors=ie,this._updateControlsErrors(!1!==F.emitEvent)}get(ie){let F=ie;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((pe,ze)=>pe&&pe._find(ze),this)}getError(ie,F){const pe=F?this.get(F):this;return pe&&pe.errors?pe.errors[ie]:null}hasError(ie,F){return!!this.getError(ie,F)}get root(){let ie=this;for(;ie._parent;)ie=ie._parent;return ie}_updateControlsErrors(ie){this.status=this._calculateStatus(),ie&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ie)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Dt:this.errors?ii:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(at)?at:this._anyControlsHaveStatus(ii)?ii:wr}_anyControlsHaveStatus(ie){return this._anyControls(F=>F.status===ie)}_anyControlsDirty(){return this._anyControls(ie=>ie.dirty)}_anyControlsTouched(){return this._anyControls(ie=>ie.touched)}_updatePristine(ie={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ie.onlySelf&&this._parent._updatePristine(ie)}_updateTouched(ie={}){this.touched=this._anyControlsTouched(),this._parent&&!ie.onlySelf&&this._parent._updateTouched(ie)}_registerOnCollectionChange(ie){this._onCollectionChange=ie}_setUpdateStrategy(ie){zn(ie)&&null!=ie.updateOn&&(this._updateOn=ie.updateOn)}_parentMarkedDirty(ie){return!ie&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ie){return null}_assignValidators(ie){this._rawValidators=Array.isArray(ie)?ie.slice():ie,this._composedValidatorFn=function Be(Q){return Array.isArray(Q)?Ie(Q):Q||null}(this._rawValidators)}_assignAsyncValidators(ie){this._rawAsyncValidators=Array.isArray(ie)?ie.slice():ie,this._composedAsyncValidatorFn=function tn(Q){return Array.isArray(Q)?je(Q):Q||null}(this._rawAsyncValidators)}}class ce extends qe{constructor(ie,F,pe){super(ue(F),xt(pe,F)),this.controls=ie,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ie,F){return this.controls[ie]?this.controls[ie]:(this.controls[ie]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(ie,F,pe={}){this.registerControl(ie,F),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}removeControl(ie,F={}){this.controls[ie]&&this.controls[ie]._registerOnCollectionChange(()=>{}),delete this.controls[ie],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(ie,F,pe={}){this.controls[ie]&&this.controls[ie]._registerOnCollectionChange(()=>{}),delete this.controls[ie],F&&this.registerControl(ie,F),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}contains(ie){return this.controls.hasOwnProperty(ie)&&this.controls[ie].enabled}setValue(ie,F={}){Cr(this,0,ie),Object.keys(ie).forEach(pe=>{hi(this,!0,pe),this.controls[pe].setValue(ie[pe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(ie,F={}){null!=ie&&(Object.keys(ie).forEach(pe=>{const ze=this.controls[pe];ze&&ze.patchValue(ie[pe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(ie={},F={}){this._forEachChild((pe,ze)=>{pe.reset(ie?ie[ze]:null,{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(ie,F,pe)=>(ie[pe]=F.getRawValue(),ie))}_syncPendingControls(){let ie=this._reduceChildren(!1,(F,pe)=>!!pe._syncPendingControls()||F);return ie&&this.updateValueAndValidity({onlySelf:!0}),ie}_forEachChild(ie){Object.keys(this.controls).forEach(F=>{const pe=this.controls[F];pe&&ie(pe,F)})}_setUpControls(){this._forEachChild(ie=>{ie.setParent(this),ie._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ie){for(const[F,pe]of Object.entries(this.controls))if(this.contains(F)&&ie(pe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,pe,ze)=>((pe.enabled||this.disabled)&&(F[ze]=pe.value),F))}_reduceChildren(ie,F){let pe=ie;return this._forEachChild((ze,kn)=>{pe=F(pe,ze,kn)}),pe}_allControlsDisabled(){for(const ie of Object.keys(this.controls))if(this.controls[ie].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ie){return this.controls.hasOwnProperty(ie)?this.controls[ie]:null}}class U extends ce{}const Xe=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>kt}),kt="always";function Zt(Q,ie){return[...ie.path,Q]}function mn(Q,ie,F=kt){Je(Q,ie),ie.valueAccessor.writeValue(Q.value),(Q.disabled||"always"===F)&&ie.valueAccessor.setDisabledState?.(Q.disabled),function nt(Q,ie){ie.valueAccessor.registerOnChange(F=>{Q._pendingValue=F,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&en(Q,ie)})}(Q,ie),function En(Q,ie){const F=(pe,ze)=>{ie.valueAccessor.writeValue(pe),ze&&ie.viewToModelUpdate(pe)};Q.registerOnChange(F),ie._registerOnDestroy(()=>{Q._unregisterOnChange(F)})}(Q,ie),function jt(Q,ie){ie.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&en(Q,ie),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,ie),function Xn(Q,ie){if(ie.valueAccessor.setDisabledState){const F=pe=>{ie.valueAccessor.setDisabledState(pe)};Q.registerOnDisabledChange(F),ie._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(F)})}}(Q,ie)}function cn(Q,ie,F=!0){const pe=()=>{};ie.valueAccessor&&(ie.valueAccessor.registerOnChange(pe),ie.valueAccessor.registerOnTouched(pe)),He(Q,ie),Q&&(ie._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function fn(Q,ie){Q.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(ie)})}function Je(Q,ie){const F=vt(Q);null!==ie.validator?Q.setValidators(st(F,ie.validator)):"function"==typeof F&&Q.setValidators([F]);const pe=Bt(Q);null!==ie.asyncValidator?Q.setAsyncValidators(st(pe,ie.asyncValidator)):"function"==typeof pe&&Q.setAsyncValidators([pe]);const ze=()=>Q.updateValueAndValidity();fn(ie._rawValidators,ze),fn(ie._rawAsyncValidators,ze)}function He(Q,ie){let F=!1;if(null!==Q){if(null!==ie.validator){const ze=vt(Q);if(Array.isArray(ze)&&ze.length>0){const kn=ze.filter(_r=>_r!==ie.validator);kn.length!==ze.length&&(F=!0,Q.setValidators(kn))}}if(null!==ie.asyncValidator){const ze=Bt(Q);if(Array.isArray(ze)&&ze.length>0){const kn=ze.filter(_r=>_r!==ie.asyncValidator);kn.length!==ze.length&&(F=!0,Q.setAsyncValidators(kn))}}}const pe=()=>{};return fn(ie._rawValidators,pe),fn(ie._rawAsyncValidators,pe),F}function en(Q,ie){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),ie.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function ln(Q,ie){Je(Q,ie)}function Ln(Q,ie){if(!Q.hasOwnProperty("model"))return!1;const F=Q.model;return!!F.isFirstChange()||!Object.is(ie,F.currentValue)}function vn(Q,ie){Q._syncPendingControls(),ie.forEach(F=>{const pe=F.control;"submit"===pe.updateOn&&pe._pendingChange&&(F.viewToModelUpdate(pe._pendingValue),pe._pendingChange=!1)})}function $n(Q,ie){if(!ie)return null;let F,pe,ze;return Array.isArray(ie),ie.forEach(kn=>{kn.constructor===ye?F=kn:function Un(Q){return Object.getPrototypeOf(Q.constructor)===de}(kn)?pe=kn:ze=kn}),ze||pe||F||null}const ti={provide:On,useExisting:(0,f.Gpc)(()=>Pi)},dr=(()=>Promise.resolve())();let Pi=(()=>{class Q extends On{constructor(F,pe,ze){super(),this.callSetDisabledState=ze,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new ce({},Ie(F),je(pe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(F){dr.then(()=>{const pe=this._findContainer(F.path);F.control=pe.registerControl(F.name,F.control),mn(F.control,F,this.callSetDisabledState),F.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(F)})}getControl(F){return this.form.get(F.path)}removeControl(F){dr.then(()=>{const pe=this._findContainer(F.path);pe&&pe.removeControl(F.name),this._directives.delete(F)})}addFormGroup(F){dr.then(()=>{const pe=this._findContainer(F.path),ze=new ce({});ln(ze,F),pe.registerControl(F.name,ze),ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(F){dr.then(()=>{const pe=this._findContainer(F.path);pe&&pe.removeControl(F.name)})}getFormGroup(F){return this.form.get(F.path)}updateModel(F,pe){dr.then(()=>{this.form.get(F.path).setValue(pe)})}setValue(F){this.control.setValue(F)}onSubmit(F){return this.submitted=!0,vn(this.form,this._directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F=void 0){this.form.reset(F),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(F){return F.pop(),F.length?this.form.get(F):this.form}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(Ye,10),f.Y36(We,10),f.Y36(Xe,8))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("submit",function(_r){return ze.onSubmit(_r)})("reset",function(){return ze.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([ti]),f.qOj]})}return Q})();function gi(Q,ie){const F=Q.indexOf(ie);F>-1&&Q.splice(F,1)}function ls(Q){return"object"==typeof Q&&null!==Q&&2===Object.keys(Q).length&&"value"in Q&&"disabled"in Q}const jr=class extends qe{constructor(ie=null,F,pe){super(ue(F),xt(pe,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ie),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zn(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=ls(ie)?ie.value:ie)}setValue(ie,F={}){this.value=this._pendingValue=ie,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(pe=>pe(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(ie,F={}){this.setValue(ie,F)}reset(ie=this.defaultValue,F={}){this._applyFormState(ie),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(ie){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ie){this._onChange.push(ie)}_unregisterOnChange(ie){gi(this._onChange,ie)}registerOnDisabledChange(ie){this._onDisabledChange.push(ie)}_unregisterOnDisabledChange(ie){gi(this._onDisabledChange,ie)}_forEachChild(ie){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ie){ls(ie)?(this.value=this._pendingValue=ie.value,ie.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ie}};let Vi=(()=>{class Q extends On{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Zt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,features:[f.qOj]})}return Q})();const Us={provide:sn,useExisting:(0,f.Gpc)(()=>Wi)},Ui=(()=>Promise.resolve())();let Wi=(()=>{class Q extends sn{constructor(F,pe,ze,kn,_r,hs){super(),this._changeDetectorRef=_r,this.callSetDisabledState=hs,this.control=new jr,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=F,this._setValidators(pe),this._setAsyncValidators(ze),this.valueAccessor=$n(0,kn)}ngOnChanges(F){if(this._checkForErrors(),!this._registered||"name"in F){if(this._registered&&(this._checkName(),this.formDirective)){const pe=F.name.previousValue;this.formDirective.removeControl({name:pe,path:this._getPath(pe)})}this._setUpControl()}"isDisabled"in F&&this._updateDisabled(F),Ln(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){Ui.then(()=>{this.control.setValue(F,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(F){const pe=F.isDisabled.currentValue,ze=0!==pe&&(0,f.VuI)(pe);Ui.then(()=>{ze&&!this.control.disabled?this.control.disable():!ze&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(F){return this._parent?Zt(F,this._parent):[F]}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(On,9),f.Y36(Ye,10),f.Y36(We,10),f.Y36(ae,10),f.Y36(f.sBO,8),f.Y36(Xe,8))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([Us]),f.qOj,f.TTD]})}return Q})(),bo=(()=>{class Q{static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return Q})(),gs=(()=>{class Q{static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275mod=f.oAB({type:Q});static#n=this.\u0275inj=f.cJS({})}return Q})();const qn=new f.OlP("NgModelWithFormControlWarning"),Bi={provide:On,useExisting:(0,f.Gpc)(()=>ei)};let ei=(()=>{class Q extends On{constructor(F,pe,ze){super(),this.callSetDisabledState=ze,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(F),this._setAsyncValidators(pe)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(He(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const pe=this.form.get(F.path);return mn(pe,F,this.callSetDisabledState),pe.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),pe}getControl(F){return this.form.get(F.path)}removeControl(F){cn(F.control||null,F,!1),function Dr(Q,ie){const F=Q.indexOf(ie);F>-1&&Q.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,pe){this.form.get(F.path).setValue(pe)}onSubmit(F){return this.submitted=!0,vn(this.form,this.directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F=void 0){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const pe=F.control,ze=this.form.get(F.path);pe!==ze&&(cn(pe||null,F),(Q=>Q instanceof jr)(ze)&&(mn(ze,F,this.callSetDisabledState),F.control=ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const pe=this.form.get(F.path);ln(pe,F),pe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const pe=this.form.get(F.path);pe&&function fr(Q,ie){return He(Q,ie)}(pe,F)&&pe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&He(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(Ye,10),f.Y36(We,10),f.Y36(Xe,8))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("submit",function(_r){return ze.onSubmit(_r)})("reset",function(){return ze.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Bi]),f.qOj,f.TTD]})}return Q})();const ns={provide:On,useExisting:(0,f.Gpc)(()=>rs)};let rs=(()=>{class Q extends Vi{constructor(F,pe,ze){super(),this.name=null,this._parent=F,this._setValidators(pe),this._setAsyncValidators(ze)}_checkParentType(){Bs(this._parent)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(On,13),f.Y36(Ye,10),f.Y36(We,10))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[f._Bn([ns]),f.qOj]})}return Q})();const Co={provide:On,useExisting:(0,f.Gpc)(()=>ms)};let ms=(()=>{class Q extends On{constructor(F,pe,ze){super(),this.name=null,this._parent=F,this._setValidators(pe),this._setAsyncValidators(ze)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Zt(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Bs(this._parent)}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(On,13),f.Y36(Ye,10),f.Y36(We,10))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[f._Bn([Co]),f.qOj]})}return Q})();function Bs(Q){return!(Q instanceof rs||Q instanceof ei||Q instanceof ms)}const Hr={provide:sn,useExisting:(0,f.Gpc)(()=>_n)};let _n=(()=>{class Q extends sn{set isDisabled(F){}static#e=this._ngModelWarningSentOnce=!1;constructor(F,pe,ze,kn,_r){super(),this._ngModelWarningConfig=_r,this._added=!1,this.name=null,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(pe),this._setAsyncValidators(ze),this.valueAccessor=$n(0,kn)}ngOnChanges(F){this._added||this._setUpControl(),Ln(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return Zt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(On,13),f.Y36(Ye,10),f.Y36(We,10),f.Y36(ae,10),f.Y36(qn,8))};static#n=this.\u0275dir=f.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Hr]),f.qOj,f.TTD]})}return Q})();const er={provide:ae,useExisting:(0,f.Gpc)(()=>is),multi:!0};function xr(Q,ie){return null==Q?`${ie}`:(ie&&"object"==typeof ie&&(ie="Object"),`${Q}: ${ie}`.slice(0,50))}let is=(()=>{class Q extends de{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){this.value=F;const ze=xr(this._getOptionId(F),F);this.setProperty("value",ze)}registerOnChange(F){this.onChange=pe=>{this.value=this._getOptionValue(pe),F(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(F){for(const pe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(pe),F))return pe;return null}_getOptionValue(F){const pe=function Ni(Q){return Q.split(":")[0]}(F);return this._optionMap.has(pe)?this._optionMap.get(pe):F}static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("change",function(_r){return ze.onChange(_r.target.value)})("blur",function(){return ze.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([er]),f.qOj]})}return Q})(),ci=(()=>{class Q{constructor(F,pe,ze){this._element=F,this._renderer=pe,this._select=ze,this._select&&(this.id=this._select._registerOption())}set ngValue(F){null!=this._select&&(this._select._optionMap.set(this.id,F),this._setElementValue(xr(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._setElementValue(F),this._select&&this._select.writeValue(this._select.value)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(is,9))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Q})();const Ds={provide:ae,useExisting:(0,f.Gpc)(()=>tr),multi:!0};function ai(Q,ie){return null==Q?`${ie}`:("string"==typeof ie&&(ie=`'${ie}'`),ie&&"object"==typeof ie&&(ie="Object"),`${Q}: ${ie}`.slice(0,50))}let tr=(()=>{class Q extends de{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){let pe;if(this.value=F,Array.isArray(F)){const ze=F.map(kn=>this._getOptionId(kn));pe=(kn,_r)=>{kn._setSelected(ze.indexOf(_r.toString())>-1)}}else pe=(ze,kn)=>{ze._setSelected(!1)};this._optionMap.forEach(pe)}registerOnChange(F){this.onChange=pe=>{const ze=[],kn=pe.selectedOptions;if(void 0!==kn){const _r=kn;for(let hs=0;hs<_r.length;hs++){const Ma=this._getOptionValue(_r[hs].value);ze.push(Ma)}}else{const _r=pe.options;for(let hs=0;hs<_r.length;hs++){const _i=_r[hs];if(_i.selected){const Ma=this._getOptionValue(_i.value);ze.push(Ma)}}}this.value=ze,F(ze)}}_registerOption(F){const pe=(this._idCounter++).toString();return this._optionMap.set(pe,F),pe}_getOptionId(F){for(const pe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(pe)._value,F))return pe;return null}_getOptionValue(F){const pe=function ss(Q){return Q.split(":")[0]}(F);return this._optionMap.has(pe)?this._optionMap.get(pe)._value:F}static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(pe,ze){1&pe&&f.NdJ("change",function(_r){return ze.onChange(_r.target)})("blur",function(){return ze.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Ds]),f.qOj]})}return Q})(),Ss=(()=>{class Q{constructor(F,pe,ze){this._element=F,this._renderer=pe,this._select=ze,this._select&&(this.id=this._select._registerOption(this))}set ngValue(F){null!=this._select&&(this._value=F,this._setElementValue(ai(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._select?(this._value=F,this._setElementValue(ai(this.id,F)),this._select.writeValue(this._select.value)):this._setElementValue(F)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}_setSelected(F){this._renderer.setProperty(this._element.nativeElement,"selected",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(pe){return new(pe||Q)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(tr,9))};static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Q})(),Y=(()=>{class Q{constructor(){this._validator=Vt}ngOnChanges(F){if(this.inputName in F){const pe=this.normalizeInput(F[this.inputName].currentValue);this._enabled=this.enabled(pe),this._validator=this._enabled?this.createValidator(pe):Vt,this._onChange&&this._onChange()}}validate(F){return this._validator(F)}registerOnValidatorChange(F){this._onChange=F}enabled(F){return null!=F}static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275dir=f.lG2({type:Q,features:[f.TTD]})}return Q})();const pn={provide:Ye,useExisting:(0,f.Gpc)(()=>Qt),multi:!0};let Qt=(()=>{class Q extends Y{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.VuI,this.createValidator=F=>Ze}enabled(F){return F}static#e=this.\u0275fac=function(){let F;return function(ze){return(F||(F=f.n5z(Q)))(ze||Q)}}();static#t=this.\u0275dir=f.lG2({type:Q,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(pe,ze){2&pe&&f.uIk("required",ze._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([pn]),f.qOj]})}return Q})(),Qr=(()=>{class Q{static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275mod=f.oAB({type:Q});static#n=this.\u0275inj=f.cJS({imports:[gs]})}return Q})();class Ii extends qe{constructor(ie,F,pe){super(ue(F),xt(pe,F)),this.controls=ie,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ie){return this.controls[this._adjustIndex(ie)]}push(ie,F={}){this.controls.push(ie),this._registerControl(ie),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(ie,F,pe={}){this.controls.splice(ie,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:pe.emitEvent})}removeAt(ie,F={}){let pe=this._adjustIndex(ie);pe<0&&(pe=0),this.controls[pe]&&this.controls[pe]._registerOnCollectionChange(()=>{}),this.controls.splice(pe,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(ie,F,pe={}){let ze=this._adjustIndex(ie);ze<0&&(ze=0),this.controls[ze]&&this.controls[ze]._registerOnCollectionChange(()=>{}),this.controls.splice(ze,1),F&&(this.controls.splice(ze,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ie,F={}){Cr(this,0,ie),ie.forEach((pe,ze)=>{hi(this,!1,ze),this.at(ze).setValue(pe,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(ie,F={}){null!=ie&&(ie.forEach((pe,ze)=>{this.at(ze)&&this.at(ze).patchValue(pe,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(ie=[],F={}){this._forEachChild((pe,ze)=>{pe.reset(ie[ze],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(ie=>ie.getRawValue())}clear(ie={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ie.emitEvent}))}_adjustIndex(ie){return ie<0?ie+this.length:ie}_syncPendingControls(){let ie=this.controls.reduce((F,pe)=>!!pe._syncPendingControls()||F,!1);return ie&&this.updateValueAndValidity({onlySelf:!0}),ie}_forEachChild(ie){this.controls.forEach((F,pe)=>{ie(F,pe)})}_updateValue(){this.value=this.controls.filter(ie=>ie.enabled||this.disabled).map(ie=>ie.value)}_anyControls(ie){return this.controls.some(F=>F.enabled&&ie(F))}_setUpControls(){this._forEachChild(ie=>this._registerControl(ie))}_allControlsDisabled(){for(const ie of this.controls)if(ie.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ie){ie.setParent(this),ie._registerOnCollectionChange(this._onCollectionChange)}_find(ie){return this.at(ie)??null}}function Ps(Q){return!!Q&&(void 0!==Q.asyncValidators||void 0!==Q.validators||void 0!==Q.updateOn)}let Ki=(()=>{class Q{constructor(){this.useNonNullable=!1}get nonNullable(){const F=new Q;return F.useNonNullable=!0,F}group(F,pe=null){const ze=this._reduceControls(F);let kn={};return Ps(pe)?kn=pe:null!==pe&&(kn.validators=pe.validator,kn.asyncValidators=pe.asyncValidator),new ce(ze,kn)}record(F,pe=null){const ze=this._reduceControls(F);return new U(ze,pe)}control(F,pe,ze){let kn={};return this.useNonNullable?(Ps(pe)?kn=pe:(kn.validators=pe,kn.asyncValidators=ze),new jr(F,{...kn,nonNullable:!0})):new jr(F,pe,ze)}array(F,pe,ze){const kn=F.map(_r=>this._createControl(_r));return new Ii(kn,pe,ze)}_reduceControls(F){const pe={};return Object.keys(F).forEach(ze=>{pe[ze]=this._createControl(F[ze])}),pe}_createControl(F){return F instanceof jr||F instanceof qe?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275prov=f.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"})}return Q})(),Qa=(()=>{class Q{static withConfig(F){return{ngModule:Q,providers:[{provide:Xe,useValue:F.callSetDisabledState??kt}]}}static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275mod=f.oAB({type:Q});static#n=this.\u0275inj=f.cJS({imports:[Qr]})}return Q})(),Bo=(()=>{class Q{static withConfig(F){return{ngModule:Q,providers:[{provide:qn,useValue:F.warnOnNgModelWithFormControl??"always"},{provide:Xe,useValue:F.callSetDisabledState??kt}]}}static#e=this.\u0275fac=function(pe){return new(pe||Q)};static#t=this.\u0275mod=f.oAB({type:Q});static#n=this.\u0275inj=f.cJS({imports:[Qr]})}return Q})()},6593:(an,lt,k)=>{"use strict";k.d(lt,{Dx:()=>Mr,H7:()=>ii,b2:()=>gr,q6:()=>Pn,se:()=>bt});var f=k(5879),s=k(6814);class B extends s.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends B{static makeCurrent(){(0,s.HT)(new Se)}onAndCancel(K,H,U){return K.addEventListener(H,U),()=>{K.removeEventListener(H,U)}}dispatchEvent(K,H){K.dispatchEvent(H)}remove(K){K.parentNode&&K.parentNode.removeChild(K)}createElement(K,H){return(H=H||this.getDefaultDocument()).createElement(K)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(K){return K.nodeType===Node.ELEMENT_NODE}isShadowRoot(K){return K instanceof DocumentFragment}getGlobalEventTarget(K,H){return"window"===H?window:"document"===H?K:"body"===H?K.body:null}getBaseHref(K){const H=function Ae(){return _e=_e||document.querySelector("base"),_e?_e.getAttribute("href"):null}();return null==H?null:function ae(ce){de=de||document.createElement("a"),de.setAttribute("href",ce);const K=de.pathname;return"/"===K.charAt(0)?K:`/${K}`}(H)}resetBaseElement(){_e=null}getUserAgent(){return window.navigator.userAgent}getCookie(K){return(0,s.Mx)(document.cookie,K)}}let de,_e=null,$=(()=>{class ce{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(U){return new(U||ce)};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();const z=new f.OlP("EventManagerPlugins");let oe=(()=>{class ce{constructor(H,U){this._zone=U,this._eventNameToPlugin=new Map,H.forEach(Te=>{Te.manager=this}),this._plugins=H.slice().reverse()}addEventListener(H,U,Te){return this._findPluginFor(U).addEventListener(H,U,Te)}getZone(){return this._zone}_findPluginFor(H){let U=this._eventNameToPlugin.get(H);if(U)return U;if(U=this._plugins.find(Xe=>Xe.supports(H)),!U)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(H,U),U}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(z),f.LFG(f.R0b))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();class be{constructor(K){this._doc=K}}const ye="ng-app-id";let De=(()=>{class ce{constructor(H,U,Te,Xe={}){this.doc=H,this.appId=U,this.nonce=Te,this.platformId=Xe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,s.PM)(Xe),this.resetHostNodes()}addStyles(H){for(const U of H)1===this.changeUsageCount(U,1)&&this.onStyleAdded(U)}removeStyles(H){for(const U of H)this.changeUsageCount(U,-1)<=0&&this.onStyleRemoved(U)}ngOnDestroy(){const H=this.styleNodesInDOM;H&&(H.forEach(U=>U.remove()),H.clear());for(const U of this.getAllStyles())this.onStyleRemoved(U);this.resetHostNodes()}addHost(H){this.hostNodes.add(H);for(const U of this.getAllStyles())this.addStyleToHost(H,U)}removeHost(H){this.hostNodes.delete(H)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(H){for(const U of this.hostNodes)this.addStyleToHost(U,H)}onStyleRemoved(H){const U=this.styleRef;U.get(H)?.elements?.forEach(Te=>Te.remove()),U.delete(H)}collectServerRenderedStyles(){const H=this.doc.head?.querySelectorAll(`style[${ye}="${this.appId}"]`);if(H?.length){const U=new Map;return H.forEach(Te=>{null!=Te.textContent&&U.set(Te.textContent,Te)}),U}return null}changeUsageCount(H,U){const Te=this.styleRef;if(Te.has(H)){const Xe=Te.get(H);return Xe.usage+=U,Xe.usage}return Te.set(H,{usage:U,elements:[]}),U}getStyleElement(H,U){const Te=this.styleNodesInDOM,Xe=Te?.get(U);if(Xe?.parentNode===H)return Te.delete(U),Xe.removeAttribute(ye),Xe;{const kt=this.doc.createElement("style");return this.nonce&&kt.setAttribute("nonce",this.nonce),kt.textContent=U,this.platformIsServer&&kt.setAttribute(ye,this.appId),kt}}addStyleToHost(H,U){const Te=this.getStyleElement(H,U);H.appendChild(Te);const Xe=this.styleRef,kt=Xe.get(U)?.elements;kt?kt.push(Te):Xe.set(U,{elements:[Te],usage:1})}resetHostNodes(){const H=this.hostNodes;H.clear(),H.add(this.doc.head)}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(s.K0),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();const Re={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ye=/%COMP%/g,tt=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function dt(ce,K){return K.map(H=>H.replace(Ye,ce))}let bt=(()=>{class ce{constructor(H,U,Te,Xe,kt,Zt,mn,cn=null){this.eventManager=H,this.sharedStylesHost=U,this.appId=Te,this.removeStylesOnCompDestroy=Xe,this.doc=kt,this.platformId=Zt,this.ngZone=mn,this.nonce=cn,this.rendererByCompId=new Map,this.platformIsServer=(0,s.PM)(Zt),this.defaultRenderer=new Ee(H,kt,mn,this.platformIsServer)}createRenderer(H,U){if(!H||!U)return this.defaultRenderer;this.platformIsServer&&U.encapsulation===f.ifc.ShadowDom&&(U={...U,encapsulation:f.ifc.Emulated});const Te=this.getOrCreateRenderer(H,U);return Te instanceof ut?Te.applyToHost(H):Te instanceof Ke&&Te.applyStyles(),Te}getOrCreateRenderer(H,U){const Te=this.rendererByCompId;let Xe=Te.get(U.id);if(!Xe){const kt=this.doc,Zt=this.ngZone,mn=this.eventManager,cn=this.sharedStylesHost,fn=this.removeStylesOnCompDestroy,Xn=this.platformIsServer;switch(U.encapsulation){case f.ifc.Emulated:Xe=new ut(mn,cn,U,this.appId,fn,kt,Zt,Xn);break;case f.ifc.ShadowDom:return new wt(mn,cn,H,U,kt,Zt,this.nonce,Xn);default:Xe=new Ke(mn,cn,U,fn,kt,Zt,Xn)}Te.set(U.id,Xe)}return Xe}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(oe),f.LFG(De),f.LFG(f.AFp),f.LFG(tt),f.LFG(s.K0),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();class Ee{constructor(K,H,U,Te){this.eventManager=K,this.doc=H,this.ngZone=U,this.platformIsServer=Te,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(K,H){return H?this.doc.createElementNS(Re[H]||H,K):this.doc.createElement(K)}createComment(K){return this.doc.createComment(K)}createText(K){return this.doc.createTextNode(K)}appendChild(K,H){(Dn(K)?K.content:K).appendChild(H)}insertBefore(K,H,U){K&&(Dn(K)?K.content:K).insertBefore(H,U)}removeChild(K,H){K&&K.removeChild(H)}selectRootElement(K,H){let U="string"==typeof K?this.doc.querySelector(K):K;if(!U)throw new f.vHH(-5104,!1);return H||(U.textContent=""),U}parentNode(K){return K.parentNode}nextSibling(K){return K.nextSibling}setAttribute(K,H,U,Te){if(Te){H=Te+":"+H;const Xe=Re[Te];Xe?K.setAttributeNS(Xe,H,U):K.setAttribute(H,U)}else K.setAttribute(H,U)}removeAttribute(K,H,U){if(U){const Te=Re[U];Te?K.removeAttributeNS(Te,H):K.removeAttribute(`${U}:${H}`)}else K.removeAttribute(H)}addClass(K,H){K.classList.add(H)}removeClass(K,H){K.classList.remove(H)}setStyle(K,H,U,Te){Te&(f.JOm.DashCase|f.JOm.Important)?K.style.setProperty(H,U,Te&f.JOm.Important?"important":""):K.style[H]=U}removeStyle(K,H,U){U&f.JOm.DashCase?K.style.removeProperty(H):K.style[H]=""}setProperty(K,H,U){K[H]=U}setValue(K,H){K.nodeValue=H}listen(K,H,U){if("string"==typeof K&&!(K=(0,s.q)().getGlobalEventTarget(this.doc,K)))throw new Error(`Unsupported event target ${K} for event ${H}`);return this.eventManager.addEventListener(K,H,this.decoratePreventDefault(U))}decoratePreventDefault(K){return H=>{if("__ngUnwrap__"===H)return K;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>K(H)):K(H))&&H.preventDefault()}}}function Dn(ce){return"TEMPLATE"===ce.tagName&&void 0!==ce.content}class wt extends Ee{constructor(K,H,U,Te,Xe,kt,Zt,mn){super(K,Xe,kt,mn),this.sharedStylesHost=H,this.hostEl=U,this.shadowRoot=U.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const cn=dt(Te.id,Te.styles);for(const fn of cn){const Xn=document.createElement("style");Zt&&Xn.setAttribute("nonce",Zt),Xn.textContent=fn,this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot(K){return K===this.hostEl?this.shadowRoot:K}appendChild(K,H){return super.appendChild(this.nodeOrShadowRoot(K),H)}insertBefore(K,H,U){return super.insertBefore(this.nodeOrShadowRoot(K),H,U)}removeChild(K,H){return super.removeChild(this.nodeOrShadowRoot(K),H)}parentNode(K){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(K)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ke extends Ee{constructor(K,H,U,Te,Xe,kt,Zt,mn){super(K,Xe,kt,Zt),this.sharedStylesHost=H,this.removeStylesOnCompDestroy=Te,this.styles=mn?dt(mn,U.styles):U.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ut extends Ke{constructor(K,H,U,Te,Xe,kt,Zt,mn){const cn=Te+"-"+U.id;super(K,H,U,Xe,kt,Zt,mn,cn),this.contentAttr=function Ze(ce){return"_ngcontent-%COMP%".replace(Ye,ce)}(cn),this.hostAttr=function Ge(ce){return"_nghost-%COMP%".replace(Ye,ce)}(cn)}applyToHost(K){this.applyStyles(),this.setAttribute(K,this.hostAttr,"")}createElement(K,H){const U=super.createElement(K,H);return super.setAttribute(U,this.contentAttr,""),U}}let Le=(()=>{class ce extends be{constructor(H){super(H)}supports(H){return!0}addEventListener(H,U,Te){return H.addEventListener(U,Te,!1),()=>this.removeEventListener(H,U,Te)}removeEventListener(H,U,Te){return H.removeEventListener(U,Te)}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(s.K0))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();const we=["alt","control","meta","shift"],te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ie={alt:ce=>ce.altKey,control:ce=>ce.ctrlKey,meta:ce=>ce.metaKey,shift:ce=>ce.shiftKey};let Pe=(()=>{class ce extends be{constructor(H){super(H)}supports(H){return null!=ce.parseEventName(H)}addEventListener(H,U,Te){const Xe=ce.parseEventName(U),kt=ce.eventCallback(Xe.fullKey,Te,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,s.q)().onAndCancel(H,Xe.domEventName,kt))}static parseEventName(H){const U=H.toLowerCase().split("."),Te=U.shift();if(0===U.length||"keydown"!==Te&&"keyup"!==Te)return null;const Xe=ce._normalizeKey(U.pop());let kt="",Zt=U.indexOf("code");if(Zt>-1&&(U.splice(Zt,1),kt="code."),we.forEach(cn=>{const fn=U.indexOf(cn);fn>-1&&(U.splice(fn,1),kt+=cn+".")}),kt+=Xe,0!=U.length||0===Xe.length)return null;const mn={};return mn.domEventName=Te,mn.fullKey=kt,mn}static matchEventFullKeyCode(H,U){let Te=te[H.key]||H.key,Xe="";return U.indexOf("code.")>-1&&(Te=H.code,Xe="code."),!(null==Te||!Te)&&(Te=Te.toLowerCase()," "===Te?Te="space":"."===Te&&(Te="dot"),we.forEach(kt=>{kt!==Te&&(0,Ie[kt])(H)&&(Xe+=kt+".")}),Xe+=Te,Xe===U)}static eventCallback(H,U,Te){return Xe=>{ce.matchEventFullKeyCode(Xe,H)&&Te.runGuarded(()=>U(Xe))}}static _normalizeKey(H){return"esc"===H?"escape":H}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(s.K0))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:ce.\u0275fac})}return ce})();const Pn=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:s.bD},{provide:f.g9A,useValue:function Gt(){Se.makeCurrent()},multi:!0},{provide:s.K0,useFactory:function bn(){return(0,f.RDi)(document),document},deps:[]}]),On=new f.OlP(""),sn=[{provide:f.rWj,useClass:class ve{addToWindow(K){f.dqk.getAngularTestability=(U,Te=!0)=>{const Xe=K.findTestabilityInTree(U,Te);if(null==Xe)throw new f.vHH(5103,!1);return Xe},f.dqk.getAllAngularTestabilities=()=>K.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>K.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(U=>{const Te=f.dqk.getAllAngularTestabilities();let Xe=Te.length,kt=!1;const Zt=function(mn){kt=kt||mn,Xe--,0==Xe&&U(kt)};Te.forEach(mn=>{mn.whenStable(Zt)})})}findTestabilityInTree(K,H,U){return null==H?null:K.getTestability(H)??(U?(0,s.q)().isShadowRoot(H)?this.findTestabilityInTree(K,H.host,!0):this.findTestabilityInTree(K,H.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Nn=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Kt(){return new f.qLn},deps:[]},{provide:z,useClass:Le,multi:!0,deps:[s.K0,f.R0b,f.Lbi]},{provide:z,useClass:Pe,multi:!0,deps:[s.K0]},bt,De,oe,{provide:f.FYo,useExisting:bt},{provide:s.JF,useClass:$,deps:[]},[]];let gr=(()=>{class ce{constructor(H){}static withServerTransition(H){return{ngModule:ce,providers:[{provide:f.AFp,useValue:H.appId}]}}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(On,12))};static#t=this.\u0275mod=f.oAB({type:ce});static#n=this.\u0275inj=f.cJS({providers:[...Nn,...sn],imports:[s.ez,f.hGG]})}return ce})(),Mr=(()=>{class ce{constructor(H){this._doc=H}getTitle(){return this._doc.title}setTitle(H){this._doc.title=H||""}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(s.K0))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:function(U){let Te=null;return Te=U?new U:function xn(){return new Mr((0,f.LFG)(s.K0))}(),Te},providedIn:"root"})}return ce})();typeof window<"u"&&window;let ii=(()=>{class ce{static#e=this.\u0275fac=function(U){return new(U||ce)};static#t=this.\u0275prov=f.Yz7({token:ce,factory:function(U){let Te=null;return Te=U?new(U||ce):f.LFG(Dt),Te},providedIn:"root"})}return ce})(),Dt=(()=>{class ce extends ii{constructor(H){super(),this._doc=H}sanitize(H,U){if(null==U)return null;switch(H){case f.q3G.NONE:return U;case f.q3G.HTML:return(0,f.qzn)(U,"HTML")?(0,f.z3N)(U):(0,f.EiD)(this._doc,String(U)).toString();case f.q3G.STYLE:return(0,f.qzn)(U,"Style")?(0,f.z3N)(U):U;case f.q3G.SCRIPT:if((0,f.qzn)(U,"Script"))return(0,f.z3N)(U);throw new f.vHH(5200,!1);case f.q3G.URL:return(0,f.qzn)(U,"URL")?(0,f.z3N)(U):(0,f.mCW)(String(U));case f.q3G.RESOURCE_URL:if((0,f.qzn)(U,"ResourceURL"))return(0,f.z3N)(U);throw new f.vHH(5201,!1);default:throw new f.vHH(5202,!1)}}bypassSecurityTrustHtml(H){return(0,f.JVY)(H)}bypassSecurityTrustStyle(H){return(0,f.L6k)(H)}bypassSecurityTrustScript(H){return(0,f.eBb)(H)}bypassSecurityTrustUrl(H){return(0,f.LAX)(H)}bypassSecurityTrustResourceUrl(H){return(0,f.pB0)(H)}static#e=this.\u0275fac=function(U){return new(U||ce)(f.LFG(s.K0))};static#t=this.\u0275prov=f.Yz7({token:ce,factory:function(U){let Te=null;return Te=U?new U:function at(ce){return new Dt(ce.get(s.K0))}(f.LFG(f.zs3)),Te},providedIn:"root"})}return ce})()},3914:(an,lt,k)=>{"use strict";k.d(lt,{gz:()=>ns,m2:()=>ls,F0:()=>js,rH:()=>Zo,Bz:()=>ec,lC:()=>Ni});var f=k(5879),s=k(5592),B=k(4674),_e=k(2459),Ae=k(2096),de=k(5619),ae=k(2572),ve=k(6973),$=k(5211),z=k(4829);function oe(S){return new s.y(O=>{(0,z.Xf)(S()).subscribe(O)})}var be=k(8407),ye=k(8504),De=k(6232),Re=k(7394),Ye=k(9360),We=k(8251);function _t(){return(0,Ye.e)((S,O)=>{let w=null;S._refCount++;const N=(0,We.x)(O,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(w=null);const W=S._connection,fe=w;w=null,W&&(!fe||W===fe)&&W.unsubscribe(),O.unsubscribe()});S.subscribe(N),N.closed||(w=S.connect())})}class Fe extends s.y{constructor(O,w){super(),this.source=O,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Ye.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new Re.w0;const w=this.getSubject();O.add(this.source.subscribe((0,We.x)(w,void 0,()=>{this._teardown(),w.complete()},N=>{this._teardown(),w.error(N)},()=>this._teardown()))),O.closed&&(this._connection=null,O=Re.w0.EMPTY)}return O}refCount(){return _t()(this)}}var Oe=k(8645),tt=k(6814),Ze=k(7398),Ge=k(4664),dt=k(8180),bt=k(7921),Ee=k(2181),Nt=k(1631),Vt=k(1374),Dn=k(6328),wt=k(9397),Ke=k(6306),ut=k(6699),Le=k(3572);function we(S){return S<=0?()=>De.E:(0,Ye.e)((O,w)=>{let N=[];O.subscribe((0,We.x)(w,W=>{N.push(W),S<N.length&&N.shift()},()=>{for(const W of N)w.next(W);w.complete()},void 0,()=>{N=null}))})}var te=k(3026),Ie=k(2737),st=k(4716),vt=k(9773),Bt=k(7537),Gt=k(6593);const Kt="primary",bn=Symbol("RouteTitle");class Yn{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const w=this.params[O];return Array.isArray(w)?w[0]:w}return null}getAll(O){if(this.has(O)){const w=this.params[O];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Pn(S){return new Yn(S)}function On(S,O,w){const N=w.path.split("/");if(N.length>S.length||"full"===w.pathMatch&&(O.hasChildren()||N.length<S.length))return null;const W={};for(let fe=0;fe<N.length;fe++){const Ve=N[fe],St=S[fe];if(Ve.startsWith(":"))W[Ve.substring(1)]=St;else if(Ve!==St.path)return null}return{consumed:S.slice(0,N.length),posParams:W}}function Nn(S,O){const w=S?Object.keys(S):void 0,N=O?Object.keys(O):void 0;if(!w||!N||w.length!=N.length)return!1;let W;for(let fe=0;fe<w.length;fe++)if(W=w[fe],!gr(S[W],O[W]))return!1;return!0}function gr(S,O){if(Array.isArray(S)&&Array.isArray(O)){if(S.length!==O.length)return!1;const w=[...S].sort(),N=[...O].sort();return w.every((W,fe)=>N[fe]===W)}return S===O}function Jn(S){return S.length>0?S[S.length-1]:null}function Yt(S){return function Se(S){return!!S&&(S instanceof s.y||(0,B.m)(S.lift)&&(0,B.m)(S.subscribe))}(S)?S:(0,f.QGY)(S)?(0,_e.D)(Promise.resolve(S)):(0,Ae.of)(S)}const Br={exact:function Jt(S,O,w){if(!yi(S.segments,O.segments)||!Er(S.segments,O.segments,w)||S.numberOfChildren!==O.numberOfChildren)return!1;for(const N in O.children)if(!S.children[N]||!Jt(S.children[N],O.children[N],w))return!1;return!0},subset:Bn},xn={exact:function sr(S,O){return Nn(S,O)},subset:function In(S,O){return Object.keys(O).length<=Object.keys(S).length&&Object.keys(O).every(w=>gr(S[w],O[w]))},ignored:()=>!0};function Mr(S,O,w){return Br[w.paths](S.root,O.root,w.matrixParams)&&xn[w.queryParams](S.queryParams,O.queryParams)&&!("exact"===w.fragment&&S.fragment!==O.fragment)}function Bn(S,O,w){return Hn(S,O,O.segments,w)}function Hn(S,O,w,N){if(S.segments.length>w.length){const W=S.segments.slice(0,w.length);return!(!yi(W,w)||O.hasChildren()||!Er(W,w,N))}if(S.segments.length===w.length){if(!yi(S.segments,w)||!Er(S.segments,w,N))return!1;for(const W in O.children)if(!S.children[W]||!Bn(S.children[W],O.children[W],N))return!1;return!0}{const W=w.slice(0,S.segments.length),fe=w.slice(S.segments.length);return!!(yi(S.segments,W)&&Er(S.segments,W,N)&&S.children[Kt])&&Hn(S.children[Kt],O,fe,N)}}function Er(S,O,w){return O.every((N,W)=>xn[w](S[W].parameters,N.parameters))}class br{constructor(O=new Gn([],{}),w={},N=null){this.root=O,this.queryParams=w,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pn(this.queryParams)),this._queryParamMap}toString(){return Pr.serialize(this)}}class Gn{constructor(O,w){this.segments=O,this.children=w,this.parent=null,Object.values(w).forEach(N=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wr(this)}}class Wn{constructor(O,w){this.path=O,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=Pn(this.parameters)),this._parameterMap}toString(){return zn(this)}}function yi(S,O){return S.length===O.length&&S.every((w,N)=>w.path===O[N].path)}let Vr=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:function(){return new ar},providedIn:"root"})}return S})();class ar{parse(O){const w=new Zt(O);return new br(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(O){const w=`/${ii(O.root,!0)}`,N=function Cr(S){const O=Object.keys(S).map(w=>{const N=S[w];return Array.isArray(N)?N.map(W=>`${Dt(w)}=${Dt(W)}`).join("&"):`${Dt(w)}=${Dt(N)}`}).filter(w=>!!w);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${w}${N}${"string"==typeof O.fragment?`#${function ue(S){return encodeURI(S)}(O.fragment)}`:""}`}}const Pr=new ar;function wr(S){return S.segments.map(O=>zn(O)).join("/")}function ii(S,O){if(!S.hasChildren())return wr(S);if(O){const w=S.children[Kt]?ii(S.children[Kt],!1):"",N=[];return Object.entries(S.children).forEach(([W,fe])=>{W!==Kt&&N.push(`${W}:${ii(fe,!1)}`)}),N.length>0?`${w}(${N.join("//")})`:w}{const w=function gn(S,O){let w=[];return Object.entries(S.children).forEach(([N,W])=>{N===Kt&&(w=w.concat(O(W,N)))}),Object.entries(S.children).forEach(([N,W])=>{N!==Kt&&(w=w.concat(O(W,N)))}),w}(S,(N,W)=>W===Kt?[ii(S.children[Kt],!1)]:[`${W}:${ii(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Kt]?`${wr(S)}/${w[0]}`:`${wr(S)}/(${w.join("//")})`}}function at(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dt(S){return at(S).replace(/%3B/gi,";")}function Be(S){return at(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xt(S){return decodeURIComponent(S)}function tn(S){return xt(S.replace(/\+/g,"%20"))}function zn(S){return`${Be(S.path)}${function hi(S){return Object.keys(S).map(O=>`;${Be(O)}=${Be(S[O])}`).join("")}(S.parameters)}`}const qe=/^[^\/()?;#]+/;function ce(S){const O=S.match(qe);return O?O[0]:""}const K=/^[^\/()?;=#]+/,U=/^[^=?&#]+/,Xe=/^[^&#]+/;class Zt{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(O.length>0||Object.keys(w).length>0)&&(N[Kt]=new Gn(O,w)),N}parseSegment(){const O=ce(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(O),new Wn(xt(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const w=function H(S){const O=S.match(K);return O?O[0]:""}(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const W=ce(this.remaining);W&&(N=W,this.capture(N))}O[xt(w)]=xt(N)}parseQueryParam(O){const w=function Te(S){const O=S.match(U);return O?O[0]:""}(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const Ve=function kt(S){const O=S.match(Xe);return O?O[0]:""}(this.remaining);Ve&&(N=Ve,this.capture(N))}const W=tn(w),fe=tn(N);if(O.hasOwnProperty(W)){let Ve=O[W];Array.isArray(Ve)||(Ve=[Ve],O[W]=Ve),Ve.push(fe)}else O[W]=fe}parseParens(O){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=ce(this.remaining),W=this.remaining[N.length];if("/"!==W&&")"!==W&&";"!==W)throw new f.vHH(4010,!1);let fe;N.indexOf(":")>-1?(fe=N.slice(0,N.indexOf(":")),this.capture(fe),this.capture(":")):O&&(fe=Kt);const Ve=this.parseChildren();w[fe]=1===Object.keys(Ve).length?Ve[Kt]:new Gn([],Ve),this.consumeOptional("//")}return w}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new f.vHH(4011,!1)}}function mn(S){return S.segments.length>0?new Gn([],{[Kt]:S}):S}function cn(S){const O={};for(const N of Object.keys(S.children)){const fe=cn(S.children[N]);if(N===Kt&&0===fe.segments.length&&fe.hasChildren())for(const[Ve,St]of Object.entries(fe.children))O[Ve]=St;else(fe.segments.length>0||fe.hasChildren())&&(O[N]=fe)}return function fn(S){if(1===S.numberOfChildren&&S.children[Kt]){const O=S.children[Kt];return new Gn(S.segments.concat(O.segments),O.children)}return S}(new Gn(S.segments,O))}function Xn(S){return S instanceof br}function He(S){let O;const W=mn(function w(fe){const Ve={};for(const Mt of fe.children){const Tn=w(Mt);Ve[Mt.outlet]=Tn}const St=new Gn(fe.url,Ve);return fe===S&&(O=St),St}(S.root));return O??W}function nt(S,O,w,N){let W=S;for(;W.parent;)W=W.parent;if(0===O.length)return En(W,W,W,w,N);const fe=function yn(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new fr(!0,0,S);let O=0,w=!1;const N=S.reduce((W,fe,Ve)=>{if("object"==typeof fe&&null!=fe){if(fe.outlets){const St={};return Object.entries(fe.outlets).forEach(([Mt,Tn])=>{St[Mt]="string"==typeof Tn?Tn.split("/"):Tn}),[...W,{outlets:St}]}if(fe.segmentPath)return[...W,fe.segmentPath]}return"string"!=typeof fe?[...W,fe]:0===Ve?(fe.split("/").forEach((St,Mt)=>{0==Mt&&"."===St||(0==Mt&&""===St?w=!0:".."===St?O++:""!=St&&W.push(St))}),W):[...W,fe]},[]);return new fr(w,O,N)}(O);if(fe.toRoot())return En(W,W,new Gn([],{}),w,N);const Ve=function ft(S,O,w){if(S.isAbsolute)return new yt(O,!0,0);if(!w)return new yt(O,!1,NaN);if(null===w.parent)return new yt(w,!0,0);const N=jt(S.commands[0])?0:1;return function Ft(S,O,w){let N=S,W=O,fe=w;for(;fe>W;){if(fe-=W,N=N.parent,!N)throw new f.vHH(4005,!1);W=N.segments.length}return new yt(N,!1,W-fe)}(w,w.segments.length-1+N,S.numberOfDoubleDots)}(fe,W,S),St=Ve.processChildren?Un(Ve.segmentGroup,Ve.index,fe.commands):Ln(Ve.segmentGroup,Ve.index,fe.commands);return En(W,Ve.segmentGroup,St,w,N)}function jt(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function en(S){return"object"==typeof S&&null!=S&&S.outlets}function En(S,O,w,N,W){let Ve,fe={};N&&Object.entries(N).forEach(([Mt,Tn])=>{fe[Mt]=Array.isArray(Tn)?Tn.map(Tr=>`${Tr}`):`${Tn}`}),Ve=S===O?w:ln(S,O,w);const St=mn(cn(Ve));return new br(St,fe,W)}function ln(S,O,w){const N={};return Object.entries(S.children).forEach(([W,fe])=>{N[W]=fe===O?w:ln(fe,O,w)}),new Gn(S.segments,N)}class fr{constructor(O,w,N){if(this.isAbsolute=O,this.numberOfDoubleDots=w,this.commands=N,O&&N.length>0&&jt(N[0]))throw new f.vHH(4003,!1);const W=N.find(en);if(W&&W!==Jn(N))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yt{constructor(O,w,N){this.segmentGroup=O,this.processChildren=w,this.index=N}}function Ln(S,O,w){if(S||(S=new Gn([],{})),0===S.segments.length&&S.hasChildren())return Un(S,O,w);const N=function vn(S,O,w){let N=0,W=O;const fe={match:!1,pathIndex:0,commandIndex:0};for(;W<S.segments.length;){if(N>=w.length)return fe;const Ve=S.segments[W],St=w[N];if(en(St))break;const Mt=`${St}`,Tn=N<w.length-1?w[N+1]:null;if(W>0&&void 0===Mt)break;if(Mt&&Tn&&"object"==typeof Tn&&void 0===Tn.outlets){if(!ti(Mt,Tn,Ve))return fe;N+=2}else{if(!ti(Mt,{},Ve))return fe;N++}W++}return{match:!0,pathIndex:W,commandIndex:N}}(S,O,w),W=w.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const fe=new Gn(S.segments.slice(0,N.pathIndex),{});return fe.children[Kt]=new Gn(S.segments.slice(N.pathIndex),S.children),Un(fe,0,W)}return N.match&&0===W.length?new Gn(S.segments,{}):N.match&&!S.hasChildren()?$n(S,O,w):N.match?Un(S,0,W):$n(S,O,w)}function Un(S,O,w){if(0===w.length)return new Gn(S.segments,{});{const N=function un(S){return en(S[0])?S[0].outlets:{[Kt]:S}}(w),W={};if(Object.keys(N).some(fe=>fe!==Kt)&&S.children[Kt]&&1===S.numberOfChildren&&0===S.children[Kt].segments.length){const fe=Un(S.children[Kt],O,w);return new Gn(S.segments,fe.children)}return Object.entries(N).forEach(([fe,Ve])=>{"string"==typeof Ve&&(Ve=[Ve]),null!==Ve&&(W[fe]=Ln(S.children[fe],O,Ve))}),Object.entries(S.children).forEach(([fe,Ve])=>{void 0===N[fe]&&(W[fe]=Ve)}),new Gn(S.segments,W)}}function $n(S,O,w){const N=S.segments.slice(0,O);let W=0;for(;W<w.length;){const fe=w[W];if(en(fe)){const Mt=Dr(fe.outlets);return new Gn(N,Mt)}if(0===W&&jt(w[0])){N.push(new Wn(S.segments[O].path,fi(w[0]))),W++;continue}const Ve=en(fe)?fe.outlets[Kt]:`${fe}`,St=W<w.length-1?w[W+1]:null;Ve&&St&&jt(St)?(N.push(new Wn(Ve,fi(St))),W+=2):(N.push(new Wn(Ve,{})),W++)}return new Gn(N,{})}function Dr(S){const O={};return Object.entries(S).forEach(([w,N])=>{"string"==typeof N&&(N=[N]),null!==N&&(O[w]=$n(new Gn([],{}),0,N))}),O}function fi(S){const O={};return Object.entries(S).forEach(([w,N])=>O[w]=`${N}`),O}function ti(S,O,w){return S==w.path&&Nn(O,w.parameters)}const dr="imperative";class Pi{constructor(O,w){this.id=O,this.url=w}}class gi extends Pi{constructor(O,w,N="imperative",W=null){super(O,w),this.type=0,this.navigationTrigger=N,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ls extends Pi{constructor(O,w,N){super(O,w),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jr extends Pi{constructor(O,w,N,W){super(O,w),this.reason=N,this.code=W,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eo extends Pi{constructor(O,w,N,W){super(O,w),this.reason=N,this.code=W,this.type=16}}class ps extends Pi{constructor(O,w,N,W){super(O,w),this.error=N,this.target=W,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vi extends Pi{constructor(O,w,N,W){super(O,w),this.urlAfterRedirects=N,this.state=W,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ys extends Pi{constructor(O,w,N,W){super(O,w),this.urlAfterRedirects=N,this.state=W,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si extends Pi{constructor(O,w,N,W,fe){super(O,w),this.urlAfterRedirects=N,this.state=W,this.shouldActivate=fe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Da extends Pi{constructor(O,w,N,W){super(O,w),this.urlAfterRedirects=N,this.state=W,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oi extends Pi{constructor(O,w,N,W){super(O,w),this.urlAfterRedirects=N,this.state=W,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xr{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vo{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Us{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wi{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bo{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(O,w,N){this.routerEvent=O,this.position=w,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Uo{}class ws{constructor(O){this.url=O}}class gs{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Zs,this.attachRef=null}}let Zs=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,N){const W=this.getOrCreateContext(w);W.outlet=N,this.contexts.set(w,W)}onChildOutletDestroyed(w){const N=this.getContext(w);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let N=this.getContext(w);return N||(N=new gs,this.contexts.set(w,N)),N}getContext(w){return this.contexts.get(w)||null}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class to{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const w=this.pathFromRoot(O);return w.length>1?w[w.length-2]:null}children(O){const w=ts(O,this._root);return w?w.children.map(N=>N.value):[]}firstChild(O){const w=ts(O,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(O){const w=fo(O,this._root);return w.length<2?[]:w[w.length-2].children.map(W=>W.value).filter(W=>W!==O)}pathFromRoot(O){return fo(O,this._root).map(w=>w.value)}}function ts(S,O){if(S===O.value)return O;for(const w of O.children){const N=ts(S,w);if(N)return N}return null}function fo(S,O){if(S===O.value)return[O];for(const w of O.children){const N=fo(S,w);if(N.length)return N.unshift(O),N}return[]}class qn{constructor(O,w){this.value=O,this.children=w}toString(){return`TreeNode(${this.value})`}}function Kr(S){const O={};return S&&S.children.forEach(w=>O[w.value.outlet]=w),O}class oi extends to{constructor(O,w){super(O),this.snapshot=w,Hr(this,O)}toString(){return this.snapshot.toString()}}function Bi(S,O){const w=function ei(S,O){const Ve=new ms([],{},{},"",{},Kt,O,null,{});return new Bs("",new qn(Ve,[]))}(0,O),N=new de.X([new Wn("",{})]),W=new de.X({}),fe=new de.X({}),Ve=new de.X({}),St=new de.X(""),Mt=new ns(N,W,Ve,St,fe,Kt,O,w.root);return Mt.snapshot=w.root,new oi(new qn(Mt,[]),w)}class ns{constructor(O,w,N,W,fe,Ve,St,Mt){this.urlSubject=O,this.paramsSubject=w,this.queryParamsSubject=N,this.fragmentSubject=W,this.dataSubject=fe,this.outlet=Ve,this.component=St,this._futureSnapshot=Mt,this.title=this.dataSubject?.pipe((0,Ze.U)(Tn=>Tn[bn]))??(0,Ae.of)(void 0),this.url=O,this.params=w,this.queryParams=N,this.fragment=W,this.data=fe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ze.U)(O=>Pn(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ze.U)(O=>Pn(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rs(S,O="emptyOnly"){const w=S.pathFromRoot;let N=0;if("always"!==O)for(N=w.length-1;N>=1;){const W=w[N],fe=w[N-1];if(W.routeConfig&&""===W.routeConfig.path)N--;else{if(fe.component)break;N--}}return function Co(S){return S.reduce((O,w)=>({params:{...O.params,...w.params},data:{...O.data,...w.data},resolve:{...w.data,...O.resolve,...w.routeConfig?.data,...w._resolvedData}}),{params:{},data:{},resolve:{}})}(w.slice(N))}class ms{get title(){return this.data?.[bn]}constructor(O,w,N,W,fe,Ve,St,Mt,Tn){this.url=O,this.params=w,this.queryParams=N,this.fragment=W,this.data=fe,this.outlet=Ve,this.component=St,this.routeConfig=Mt,this._resolve=Tn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Bs extends to{constructor(O,w){super(w),this.url=O,Hr(this,w)}toString(){return _n(this._root)}}function Hr(S,O){O.value._routerState=S,O.children.forEach(w=>Hr(S,w))}function _n(S){const O=S.children.length>0?` { ${S.children.map(_n).join(", ")} } `:"";return`${S.value}${O}`}function er(S){if(S.snapshot){const O=S.snapshot,w=S._futureSnapshot;S.snapshot=w,Nn(O.queryParams,w.queryParams)||S.queryParamsSubject.next(w.queryParams),O.fragment!==w.fragment&&S.fragmentSubject.next(w.fragment),Nn(O.params,w.params)||S.paramsSubject.next(w.params),function sn(S,O){if(S.length!==O.length)return!1;for(let w=0;w<S.length;++w)if(!Nn(S[w],O[w]))return!1;return!0}(O.url,w.url)||S.urlSubject.next(w.url),Nn(O.data,w.data)||S.dataSubject.next(w.data)}else S.snapshot=S._futureSnapshot,S.dataSubject.next(S._futureSnapshot.data)}function xr(S,O){const w=Nn(S.params,O.params)&&function Jr(S,O){return yi(S,O)&&S.every((w,N)=>Nn(w.parameters,O[N].parameters))}(S.url,O.url);return w&&!(!S.parent!=!O.parent)&&(!S.parent||xr(S.parent,O.parent))}let Ni=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Kt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Zs),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(ci,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:N,previousValue:W}=w.name;if(N)return;this.isTrackedInParentContexts(W)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(W)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,N){this.activated=w,this._activatedRoute=N,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,N){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=w;const W=this.location,Ve=w.snapshot.component,St=this.parentContexts.getOrCreateContext(this.name).children,Mt=new is(w,St,W.injector);this.activated=W.createComponent(Ve,{index:W.length,injector:Mt,environmentInjector:N??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275dir=f.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]})}return S})();class is{constructor(O,w,N){this.route=O,this.childContexts=w,this.parent=N}get(O,w){return O===ns?this.route:O===Zs?this.childContexts:this.parent.get(O,w)}}const ci=new f.OlP("");let Ds=(()=>{class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:N}=w,W=(0,ae.a)([N.queryParams,N.params,N.data]).pipe((0,Ge.w)(([fe,Ve,St],Mt)=>(St={...fe,...Ve,...St},0===Mt?(0,Ae.of)(St):Promise.resolve(St)))).subscribe(fe=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==N||null===N.component)return void this.unsubscribeFromRouteData(w);const Ve=(0,f.qFp)(N.component);if(Ve)for(const{templateName:St}of Ve.inputs)w.activatedComponentRef.setInput(St,fe[St]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,W)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac})}return S})();function ss(S,O,w){if(w&&S.shouldReuseRoute(O.value,w.value.snapshot)){const N=w.value;N._futureSnapshot=O.value;const W=function _s(S,O,w){return O.children.map(N=>{for(const W of w.children)if(S.shouldReuseRoute(N.value,W.value.snapshot))return ss(S,N,W);return ss(S,N)})}(S,O,w);return new qn(N,W)}{if(S.shouldAttach(O.value)){const fe=S.retrieve(O.value);if(null!==fe){const Ve=fe.route;return Ve.value._futureSnapshot=O.value,Ve.children=O.children.map(St=>ss(S,St)),Ve}}const N=function tr(S){return new ns(new de.X(S.url),new de.X(S.params),new de.X(S.queryParams),new de.X(S.fragment),new de.X(S.data),S.outlet,S.component,S)}(O.value),W=O.children.map(fe=>ss(S,fe));return new qn(N,W)}}const Ss="ngNavigationCancelingError";function li(S,O){const{redirectTo:w,navigationBehaviorOptions:N}=Xn(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,W=re(!1,0,O);return W.url=w,W.navigationBehaviorOptions=N,W}function re(S,O,w){const N=new Error("NavigationCancelingError: "+(S||""));return N[Ss]=!0,N.cancellationCode=O,w&&(N.url=w),N}function Ne(S){return S&&S[Ss]}let $e=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275cmp=f.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(N,W){1&N&&f._UZ(0,"router-outlet")},dependencies:[Ni],encapsulation:2})}return S})();function zr(S){const O=S.children&&S.children.map(zr),w=O?{...S,children:O}:{...S};return!w.component&&!w.loadComponent&&(O||w.loadChildren)&&w.outlet&&w.outlet!==Kt&&(w.component=$e),w}function Rr(S){return S.outlet||Kt}function Ur(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let O=S.parent;O;O=O.parent){const w=O.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class vr{constructor(O,w,N,W,fe){this.routeReuseStrategy=O,this.futureState=w,this.currState=N,this.forwardEvent=W,this.inputBindingEnabled=fe}activate(O){const w=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,N,O),er(this.futureState.root),this.activateChildRoutes(w,N,O)}deactivateChildRoutes(O,w,N){const W=Kr(w);O.children.forEach(fe=>{const Ve=fe.value.outlet;this.deactivateRoutes(fe,W[Ve],N),delete W[Ve]}),Object.values(W).forEach(fe=>{this.deactivateRouteAndItsChildren(fe,N)})}deactivateRoutes(O,w,N){const W=O.value,fe=w?w.value:null;if(W===fe)if(W.component){const Ve=N.getContext(W.outlet);Ve&&this.deactivateChildRoutes(O,w,Ve.children)}else this.deactivateChildRoutes(O,w,N);else fe&&this.deactivateRouteAndItsChildren(w,N)}deactivateRouteAndItsChildren(O,w){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,w):this.deactivateRouteAndOutlet(O,w)}detachAndStoreRouteSubtree(O,w){const N=w.getContext(O.value.outlet),W=N&&O.value.component?N.children:w,fe=Kr(O);for(const Ve of Object.keys(fe))this.deactivateRouteAndItsChildren(fe[Ve],W);if(N&&N.outlet){const Ve=N.outlet.detach(),St=N.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:Ve,route:O,contexts:St})}}deactivateRouteAndOutlet(O,w){const N=w.getContext(O.value.outlet),W=N&&O.value.component?N.children:w,fe=Kr(O);for(const Ve of Object.keys(fe))this.deactivateRouteAndItsChildren(fe[Ve],W);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.route=null)}activateChildRoutes(O,w,N){const W=Kr(w);O.children.forEach(fe=>{this.activateRoutes(fe,W[fe.value.outlet],N),this.forwardEvent(new bo(fe.value.snapshot))}),O.children.length&&this.forwardEvent(new Ui(O.value.snapshot))}activateRoutes(O,w,N){const W=O.value,fe=w?w.value:null;if(er(W),W===fe)if(W.component){const Ve=N.getOrCreateContext(W.outlet);this.activateChildRoutes(O,w,Ve.children)}else this.activateChildRoutes(O,w,N);else if(W.component){const Ve=N.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const St=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Ve.children.onOutletReAttached(St.contexts),Ve.attachRef=St.componentRef,Ve.route=St.route.value,Ve.outlet&&Ve.outlet.attach(St.componentRef,St.route.value),er(St.route.value),this.activateChildRoutes(O,null,Ve.children)}else{const St=Ur(W.snapshot);Ve.attachRef=null,Ve.route=W,Ve.injector=St,Ve.outlet&&Ve.outlet.activateWith(W,Ve.injector),this.activateChildRoutes(O,null,Ve.children)}}else this.activateChildRoutes(O,null,N)}}class xi{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class Qr{constructor(O,w){this.component=O,this.route=w}}function Ii(S,O,w){const N=S._root;return Ps(N,O?O._root:null,w,[N.value])}function os(S,O){const w=Symbol(),N=O.get(S,w);return N===w?"function"!=typeof S||(0,f.Z0I)(S)?O.get(S):S:N}function Ps(S,O,w,N,W={canDeactivateChecks:[],canActivateChecks:[]}){const fe=Kr(O);return S.children.forEach(Ve=>{(function Ki(S,O,w,N,W={canDeactivateChecks:[],canActivateChecks:[]}){const fe=S.value,Ve=O?O.value:null,St=w?w.getContext(S.value.outlet):null;if(Ve&&fe.routeConfig===Ve.routeConfig){const Mt=function Sa(S,O,w){if("function"==typeof w)return w(S,O);switch(w){case"pathParamsChange":return!yi(S.url,O.url);case"pathParamsOrQueryParamsChange":return!yi(S.url,O.url)||!Nn(S.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xr(S,O)||!Nn(S.queryParams,O.queryParams);default:return!xr(S,O)}}(Ve,fe,fe.routeConfig.runGuardsAndResolvers);Mt?W.canActivateChecks.push(new xi(N)):(fe.data=Ve.data,fe._resolvedData=Ve._resolvedData),Ps(S,O,fe.component?St?St.children:null:w,N,W),Mt&&St&&St.outlet&&St.outlet.isActivated&&W.canDeactivateChecks.push(new Qr(St.outlet.component,Ve))}else Ve&&xs(O,St,W),W.canActivateChecks.push(new xi(N)),Ps(S,null,fe.component?St?St.children:null:w,N,W)})(Ve,fe[Ve.value.outlet],w,N.concat([Ve.value]),W),delete fe[Ve.value.outlet]}),Object.entries(fe).forEach(([Ve,St])=>xs(St,w.getContext(Ve),W)),W}function xs(S,O,w){const N=Kr(S),W=S.value;Object.entries(N).forEach(([fe,Ve])=>{xs(Ve,W.component?O?O.children.getContext(fe):null:O,w)}),w.canDeactivateChecks.push(new Qr(W.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,W))}function To(S){return"function"==typeof S}function _r(S){return S instanceof ve.K||"EmptyError"===S?.name}const hs=Symbol("INITIAL_VALUE");function _i(){return(0,Ge.w)(S=>(0,ae.a)(S.map(O=>O.pipe((0,dt.q)(1),(0,bt.O)(hs)))).pipe((0,Ze.U)(O=>{for(const w of O)if(!0!==w){if(w===hs)return hs;if(!1===w||w instanceof br)return w}return!0}),(0,Ee.h)(O=>O!==hs),(0,dt.q)(1)))}function no(S){return(0,be.z)((0,wt.b)(O=>{if(Xn(O))throw li(0,O)}),(0,Ze.U)(O=>!0===O))}class vs{constructor(O){this.segmentGroup=O||null}}class wu{constructor(O){this.urlTree=O}}function Lr(S){return(0,ye._)(new vs(S))}function la(S){return(0,ye._)(new wu(S))}class Rs{constructor(O,w){this.urlSerializer=O,this.urlTree=w}noMatchError(O){return new f.vHH(4002,!1)}lineralizeSegments(O,w){let N=[],W=w.root;for(;;){if(N=N.concat(W.segments),0===W.numberOfChildren)return(0,Ae.of)(N);if(W.numberOfChildren>1||!W.children[Kt])return(0,ye._)(new f.vHH(4e3,!1));W=W.children[Kt]}}applyRedirectCommands(O,w,N){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),O,N)}applyRedirectCreateUrlTree(O,w,N,W){const fe=this.createSegmentGroup(O,w.root,N,W);return new br(fe,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(O,w){const N={};return Object.entries(O).forEach(([W,fe])=>{if("string"==typeof fe&&fe.startsWith(":")){const St=fe.substring(1);N[W]=w[St]}else N[W]=fe}),N}createSegmentGroup(O,w,N,W){const fe=this.createSegments(O,w.segments,N,W);let Ve={};return Object.entries(w.children).forEach(([St,Mt])=>{Ve[St]=this.createSegmentGroup(O,Mt,N,W)}),new Gn(fe,Ve)}createSegments(O,w,N,W){return w.map(fe=>fe.path.startsWith(":")?this.findPosParam(O,fe,W):this.findOrReturn(fe,N))}findPosParam(O,w,N){const W=N[w.path.substring(1)];if(!W)throw new f.vHH(4001,!1);return W}findOrReturn(O,w){let N=0;for(const W of w){if(W.path===O.path)return w.splice(N),W;N++}return O}}const go={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wo(S,O,w,N,W){const fe=Ra(S,O,w);return fe.matched?(N=function ht(S,O){return S.providers&&!S._injector&&(S._injector=(0,f.MMx)(S.providers,O,`Route: ${S.path}`)),S._injector??O}(O,N),function ro(S,O,w,N){const W=O.canMatch;if(!W||0===W.length)return(0,Ae.of)(!0);const fe=W.map(Ve=>{const St=os(Ve,S);return Yt(function pe(S){return S&&To(S.canMatch)}(St)?St.canMatch(O,w):S.runInContext(()=>St(O,w)))});return(0,Ae.of)(fe).pipe(_i(),no())}(N,O,w).pipe((0,Ze.U)(Ve=>!0===Ve?fe:{...go}))):(0,Ae.of)(fe)}function Ra(S,O,w){if(""===O.path)return"full"===O.pathMatch&&(S.hasChildren()||w.length>0)?{...go}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const W=(O.matcher||On)(w,S,O);if(!W)return{...go};const fe={};Object.entries(W.posParams??{}).forEach(([St,Mt])=>{fe[St]=Mt.path});const Ve=W.consumed.length>0?{...fe,...W.consumed[W.consumed.length-1].parameters}:fe;return{matched:!0,consumedSegments:W.consumed,remainingSegments:w.slice(W.consumed.length),parameters:Ve,positionalParamSegments:W.posParams??{}}}function Oa(S,O,w,N){return w.length>0&&function cl(S,O,w){return w.some(N=>ua(S,O,N)&&Rr(N)!==Kt)}(S,w,N)?{segmentGroup:new Gn(O,wc(N,new Gn(w,S.children))),slicedSegments:[]}:0===w.length&&function Dc(S,O,w){return w.some(N=>ua(S,O,N))}(S,w,N)?{segmentGroup:new Gn(S.segments,pr(S,0,w,N,S.children)),slicedSegments:w}:{segmentGroup:new Gn(S.segments,S.children),slicedSegments:w}}function pr(S,O,w,N,W){const fe={};for(const Ve of N)if(ua(S,w,Ve)&&!W[Rr(Ve)]){const St=new Gn([],{});fe[Rr(Ve)]=St}return{...W,...fe}}function wc(S,O){const w={};w[Kt]=O;for(const N of S)if(""===N.path&&Rr(N)!==Kt){const W=new Gn([],{});w[Rr(N)]=W}return w}function ua(S,O,w){return(!(S.hasChildren()||O.length>0)||"full"!==w.pathMatch)&&""===w.path}class ll{constructor(O,w,N,W,fe,Ve,St){this.injector=O,this.configLoader=w,this.rootComponentType=N,this.config=W,this.urlTree=fe,this.paramsInheritanceStrategy=Ve,this.urlSerializer=St,this.allowRedirects=!0,this.applyRedirects=new Rs(this.urlSerializer,this.urlTree)}noMatchError(O){return new f.vHH(4002,!1)}recognize(){const O=Oa(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,Kt).pipe((0,Ke.K)(w=>{if(w instanceof wu)return this.allowRedirects=!1,this.urlTree=w.urlTree,this.match(w.urlTree);throw w instanceof vs?this.noMatchError(w):w}),(0,Ze.U)(w=>{const N=new ms([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,{}),W=new qn(N,w),fe=new Bs("",W),Ve=function Je(S,O,w=null,N=null){return nt(He(S),O,w,N)}(N,[],this.urlTree.queryParams,this.urlTree.fragment);return Ve.queryParams=this.urlTree.queryParams,fe.url=this.urlSerializer.serialize(Ve),this.inheritParamsAndData(fe._root),{state:fe,tree:Ve}}))}match(O){return this.processSegmentGroup(this.injector,this.config,O.root,Kt).pipe((0,Ke.K)(N=>{throw N instanceof vs?this.noMatchError(N):N}))}inheritParamsAndData(O){const w=O.value,N=rs(w,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data),O.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(O,w,N,W){return 0===N.segments.length&&N.hasChildren()?this.processChildren(O,w,N):this.processSegment(O,w,N,N.segments,W,!0)}processChildren(O,w,N){const W=[];for(const fe of Object.keys(N.children))"primary"===fe?W.unshift(fe):W.push(fe);return(0,_e.D)(W).pipe((0,Dn.b)(fe=>{const Ve=N.children[fe],St=function mi(S,O){const w=S.filter(N=>Rr(N)===O);return w.push(...S.filter(N=>Rr(N)!==O)),w}(w,fe);return this.processSegmentGroup(O,St,Ve,fe)}),(0,ut.R)((fe,Ve)=>(fe.push(...Ve),fe)),(0,Le.d)(null),function Pe(S,O){const w=arguments.length>=2;return N=>N.pipe(S?(0,Ee.h)((W,fe)=>S(W,fe,N)):Ie.y,we(1),w?(0,Le.d)(O):(0,te.T)(()=>new ve.K))}(),(0,Nt.z)(fe=>{if(null===fe)return Lr(N);const Ve=zo(fe);return function ul(S){S.sort((O,w)=>O.value.outlet===Kt?-1:w.value.outlet===Kt?1:O.value.outlet.localeCompare(w.value.outlet))}(Ve),(0,Ae.of)(Ve)}))}processSegment(O,w,N,W,fe,Ve){return(0,_e.D)(w).pipe((0,Dn.b)(St=>this.processSegmentAgainstRoute(St._injector??O,w,St,N,W,fe,Ve).pipe((0,Ke.K)(Mt=>{if(Mt instanceof vs)return(0,Ae.of)(null);throw Mt}))),(0,Vt.P)(St=>!!St),(0,Ke.K)(St=>{if(_r(St))return function Ho(S,O,w){return 0===O.length&&!S.children[w]}(N,W,fe)?(0,Ae.of)([]):Lr(N);throw St}))}processSegmentAgainstRoute(O,w,N,W,fe,Ve,St){return function jo(S,O,w,N){return!!(Rr(S)===N||N!==Kt&&ua(O,w,S))&&("**"===S.path||Ra(O,S,w).matched)}(N,W,fe,Ve)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(O,W,N,fe,Ve,St):St&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,W,w,N,fe,Ve):Lr(W):Lr(W)}expandSegmentAgainstRouteUsingRedirect(O,w,N,W,fe,Ve){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,N,W,Ve):this.expandRegularSegmentAgainstRouteUsingRedirect(O,w,N,W,fe,Ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,w,N,W){const fe=this.applyRedirects.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?la(fe):this.applyRedirects.lineralizeSegments(N,fe).pipe((0,Nt.z)(Ve=>{const St=new Gn(Ve,{});return this.processSegment(O,w,St,Ve,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,w,N,W,fe,Ve){const{matched:St,consumedSegments:Mt,remainingSegments:Tn,positionalParamSegments:Tr}=Ra(w,W,fe);if(!St)return Lr(w);const di=this.applyRedirects.applyRedirectCommands(Mt,W.redirectTo,Tr);return W.redirectTo.startsWith("/")?la(di):this.applyRedirects.lineralizeSegments(W,di).pipe((0,Nt.z)(Ir=>this.processSegment(O,N,w,Ir.concat(Tn),Ve,!1)))}matchSegmentAgainstRoute(O,w,N,W,fe,Ve){let St;if("**"===N.path){const Mt=W.length>0?Jn(W).parameters:{},Tn=new ms(W,Mt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Do(N),Rr(N),N.component??N._loadedComponent??null,N,dl(N));St=(0,Ae.of)({snapshot:Tn,consumedSegments:[],remainingSegments:[]}),w.children={}}else St=wo(w,N,W,O).pipe((0,Ze.U)(({matched:Mt,consumedSegments:Tn,remainingSegments:Tr,parameters:di})=>Mt?{snapshot:new ms(Tn,di,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Do(N),Rr(N),N.component??N._loadedComponent??null,N,dl(N)),consumedSegments:Tn,remainingSegments:Tr}:null));return St.pipe((0,Ge.w)(Mt=>null===Mt?Lr(w):this.getChildConfig(O=N._injector??O,N,W).pipe((0,Ge.w)(({routes:Tn})=>{const Tr=N._loadedInjector??O,{snapshot:di,consumedSegments:Ir,remainingSegments:Fs}=Mt,{segmentGroup:io,slicedSegments:Ro}=Oa(w,Ir,Fs,Tn);if(0===Ro.length&&io.hasChildren())return this.processChildren(Tr,Tn,io).pipe((0,Ze.U)(Oo=>null===Oo?null:[new qn(di,Oo)]));if(0===Tn.length&&0===Ro.length)return(0,Ae.of)([new qn(di,[])]);const pa=Rr(N)===fe;return this.processSegment(Tr,Tn,io,Ro,pa?Kt:fe,!0).pipe((0,Ze.U)(Oo=>[new qn(di,Oo)]))}))))}getChildConfig(O,w,N){return w.children?(0,Ae.of)({routes:w.children,injector:O}):w.loadChildren?void 0!==w._loadedRoutes?(0,Ae.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Cc(S,O,w,N){const W=O.canLoad;if(void 0===W||0===W.length)return(0,Ae.of)(!0);const fe=W.map(Ve=>{const St=os(Ve,S);return Yt(function Bo(S){return S&&To(S.canLoad)}(St)?St.canLoad(O,w):S.runInContext(()=>St(O,w)))});return(0,Ae.of)(fe).pipe(_i(),no())}(O,w,N).pipe((0,Nt.z)(W=>W?this.configLoader.loadChildren(O,w).pipe((0,wt.b)(fe=>{w._loadedRoutes=fe.routes,w._loadedInjector=fe.injector})):function Tc(S){return(0,ye._)(re(!1,3))}())):(0,Ae.of)({routes:[],injector:O})}}function Sc(S){const O=S.value.routeConfig;return O&&""===O.path}function zo(S){const O=[],w=new Set;for(const N of S){if(!Sc(N)){O.push(N);continue}const W=O.find(fe=>N.value.routeConfig===fe.value.routeConfig);void 0!==W?(W.children.push(...N.children),w.add(W)):O.push(N)}for(const N of w){const W=zo(N.children);O.push(new qn(N.value,W))}return O.filter(N=>!w.has(N))}function Do(S){return S.data||{}}function dl(S){return S.resolve||{}}function bi(S){return"string"==typeof S.title||null===S.title}function x(S){return(0,Ge.w)(O=>{const w=S(O);return w?(0,_e.D)(w).pipe((0,Ze.U)(()=>O)):(0,Ae.of)(O)})}const se=new f.OlP("ROUTES");let j=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,Ae.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const N=Yt(w.loadComponent()).pipe((0,Ze.U)(Ot),(0,wt.b)(fe=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=fe}),(0,st.x)(()=>{this.componentLoaders.delete(w)})),W=new Fe(N,()=>new Oe.x).pipe(_t());return this.componentLoaders.set(w,W),W}loadChildren(w,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,Ae.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const fe=function ne(S,O,w,N){return Yt(S.loadChildren()).pipe((0,Ze.U)(Ot),(0,Nt.z)(W=>W instanceof f.YKP||Array.isArray(W)?(0,Ae.of)(W):(0,_e.D)(O.compileModuleAsync(W))),(0,Ze.U)(W=>{N&&N(S);let fe,Ve,St=!1;return Array.isArray(W)?(Ve=W,!0):(fe=W.create(w).injector,Ve=fe.get(se,[],{optional:!0,self:!0}).flat()),{routes:Ve.map(zr),injector:fe}}))}(N,this.compiler,w,this.onLoadEndListener).pipe((0,st.x)(()=>{this.childrenLoaders.delete(N)})),Ve=new Fe(fe,()=>new Oe.x).pipe(_t());return this.childrenLoaders.set(N,Ve),Ve}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Ot(S){return function Ue(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let Ht=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe.x,this.transitionAbortSubject=new Oe.x,this.configLoader=(0,f.f3M)(j),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Vr),this.rootContexts=(0,f.f3M)(Zs),this.inputBindingEnabled=null!==(0,f.f3M)(ci,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ae.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=W=>this.events.next(new Vo(W)),this.configLoader.onLoadStartListener=W=>this.events.next(new Xr(W))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:N})}setupNavigations(w,N,W){return this.transitions=new de.X({id:0,currentUrlTree:N,currentRawUrl:N,currentBrowserUrl:N,extractedUrl:w.urlHandlingStrategy.extract(N),urlAfterRedirects:w.urlHandlingStrategy.extract(N),rawUrl:N,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:dr,restoredState:null,currentSnapshot:W.snapshot,targetSnapshot:null,currentRouterState:W,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ee.h)(fe=>0!==fe.id),(0,Ze.U)(fe=>({...fe,extractedUrl:w.urlHandlingStrategy.extract(fe.rawUrl)})),(0,Ge.w)(fe=>{this.currentTransition=fe;let Ve=!1,St=!1;return(0,Ae.of)(fe).pipe((0,wt.b)(Mt=>{this.currentNavigation={id:Mt.id,initialUrl:Mt.rawUrl,extractedUrl:Mt.extractedUrl,trigger:Mt.source,extras:Mt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ge.w)(Mt=>{const Tn=Mt.currentBrowserUrl.toString(),Tr=!w.navigated||Mt.extractedUrl.toString()!==Tn||Tn!==Mt.currentUrlTree.toString();if(!Tr&&"reload"!==(Mt.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const Ir="";return this.events.next(new eo(Mt.id,this.urlSerializer.serialize(Mt.rawUrl),Ir,0)),Mt.resolve(null),De.E}if(w.urlHandlingStrategy.shouldProcessUrl(Mt.rawUrl))return(0,Ae.of)(Mt).pipe((0,Ge.w)(Ir=>{const Fs=this.transitions?.getValue();return this.events.next(new gi(Ir.id,this.urlSerializer.serialize(Ir.extractedUrl),Ir.source,Ir.restoredState)),Fs!==this.transitions?.getValue()?De.E:Promise.resolve(Ir)}),function Na(S,O,w,N,W,fe){return(0,Nt.z)(Ve=>function da(S,O,w,N,W,fe,Ve="emptyOnly"){return new ll(S,O,w,N,W,Ve,fe).recognize()}(S,O,w,N,Ve.extractedUrl,W,fe).pipe((0,Ze.U)(({state:St,tree:Mt})=>({...Ve,targetSnapshot:St,urlAfterRedirects:Mt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,wt.b)(Ir=>{fe.targetSnapshot=Ir.targetSnapshot,fe.urlAfterRedirects=Ir.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Ir.urlAfterRedirects};const Fs=new Vi(Ir.id,this.urlSerializer.serialize(Ir.extractedUrl),this.urlSerializer.serialize(Ir.urlAfterRedirects),Ir.targetSnapshot);this.events.next(Fs)}));if(Tr&&w.urlHandlingStrategy.shouldProcessUrl(Mt.currentRawUrl)){const{id:Ir,extractedUrl:Fs,source:io,restoredState:Ro,extras:pa}=Mt,Oo=new gi(Ir,this.urlSerializer.serialize(Fs),io,Ro);this.events.next(Oo);const nc=Bi(0,this.rootComponentType).snapshot;return this.currentTransition=fe={...Mt,targetSnapshot:nc,urlAfterRedirects:Fs,extras:{...pa,skipLocationChange:!1,replaceUrl:!1}},(0,Ae.of)(fe)}{const Ir="";return this.events.next(new eo(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),Ir,1)),Mt.resolve(null),De.E}}),(0,wt.b)(Mt=>{const Tn=new Ys(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(Tn)}),(0,Ze.U)(Mt=>(this.currentTransition=fe={...Mt,guards:Ii(Mt.targetSnapshot,Mt.currentSnapshot,this.rootContexts)},fe)),function Ma(S,O){return(0,Nt.z)(w=>{const{targetSnapshot:N,currentSnapshot:W,guards:{canActivateChecks:fe,canDeactivateChecks:Ve}}=w;return 0===Ve.length&&0===fe.length?(0,Ae.of)({...w,guardsResult:!0}):function zl(S,O,w,N){return(0,_e.D)(S).pipe((0,Nt.z)(W=>function ca(S,O,w,N,W){const fe=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!fe||0===fe.length)return(0,Ae.of)(!0);const Ve=fe.map(St=>{const Mt=Ur(O)??W,Tn=os(St,Mt);return Yt(function F(S){return S&&To(S.canDeactivate)}(Tn)?Tn.canDeactivate(S,O,w,N):Mt.runInContext(()=>Tn(S,O,w,N))).pipe((0,Vt.P)())});return(0,Ae.of)(Ve).pipe(_i())}(W.component,W.route,w,O,N)),(0,Vt.P)(W=>!0!==W,!0))}(Ve,N,W,S).pipe((0,Nt.z)(St=>St&&function Qa(S){return"boolean"==typeof S}(St)?function Ic(S,O,w,N){return(0,_e.D)(O).pipe((0,Dn.b)(W=>(0,$.z)(function Pa(S,O){return null!==S&&O&&O(new Us(S)),(0,Ae.of)(!0)}(W.route.parent,N),function Ya(S,O){return null!==S&&O&&O(new Wi(S)),(0,Ae.of)(!0)}(W.route,N),function xa(S,O,w){const N=O[O.length-1],fe=O.slice(0,O.length-1).reverse().map(Ve=>function po(S){const O=S.routeConfig?S.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:S,guards:O}:null}(Ve)).filter(Ve=>null!==Ve).map(Ve=>oe(()=>{const St=Ve.guards.map(Mt=>{const Tn=Ur(Ve.node)??w,Tr=os(Mt,Tn);return Yt(function ie(S){return S&&To(S.canActivateChild)}(Tr)?Tr.canActivateChild(N,S):Tn.runInContext(()=>Tr(N,S))).pipe((0,Vt.P)())});return(0,Ae.of)(St).pipe(_i())}));return(0,Ae.of)(fe).pipe(_i())}(S,W.path,w),function bc(S,O,w){const N=O.routeConfig?O.routeConfig.canActivate:null;if(!N||0===N.length)return(0,Ae.of)(!0);const W=N.map(fe=>oe(()=>{const Ve=Ur(O)??w,St=os(fe,Ve);return Yt(function Q(S){return S&&To(S.canActivate)}(St)?St.canActivate(O,S):Ve.runInContext(()=>St(O,S))).pipe((0,Vt.P)())}));return(0,Ae.of)(W).pipe(_i())}(S,W.route,w))),(0,Vt.P)(W=>!0!==W,!0))}(N,fe,S,O):(0,Ae.of)(St)),(0,Ze.U)(St=>({...w,guardsResult:St})))})}(this.environmentInjector,Mt=>this.events.next(Mt)),(0,wt.b)(Mt=>{if(fe.guardsResult=Mt.guardsResult,Xn(Mt.guardsResult))throw li(0,Mt.guardsResult);const Tn=new si(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot,!!Mt.guardsResult);this.events.next(Tn)}),(0,Ee.h)(Mt=>!!Mt.guardsResult||(this.cancelNavigationTransition(Mt,"",3),!1)),x(Mt=>{if(Mt.guards.canActivateChecks.length)return(0,Ae.of)(Mt).pipe((0,wt.b)(Tn=>{const Tr=new Da(Tn.id,this.urlSerializer.serialize(Tn.extractedUrl),this.urlSerializer.serialize(Tn.urlAfterRedirects),Tn.targetSnapshot);this.events.next(Tr)}),(0,Ge.w)(Tn=>{let Tr=!1;return(0,Ae.of)(Tn).pipe(function Ja(S,O){return(0,Nt.z)(w=>{const{targetSnapshot:N,guards:{canActivateChecks:W}}=w;if(!W.length)return(0,Ae.of)(w);let fe=0;return(0,_e.D)(W).pipe((0,Dn.b)(Ve=>function $l(S,O,w,N){const W=S.routeConfig,fe=S._resolve;return void 0!==W?.title&&!bi(W)&&(fe[bn]=W.title),function ha(S,O,w,N){const W=function So(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===W.length)return(0,Ae.of)({});const fe={};return(0,_e.D)(W).pipe((0,Nt.z)(Ve=>function hl(S,O,w,N){const W=Ur(O)??N,fe=os(S,W);return Yt(fe.resolve?fe.resolve(O,w):W.runInContext(()=>fe(O,w)))}(S[Ve],O,w,N).pipe((0,Vt.P)(),(0,wt.b)(St=>{fe[Ve]=St}))),we(1),function je(S){return(0,Ze.U)(()=>S)}(fe),(0,Ke.K)(Ve=>_r(Ve)?De.E:(0,ye._)(Ve)))}(fe,S,O,N).pipe((0,Ze.U)(Ve=>(S._resolvedData=Ve,S.data=rs(S,w).resolve,W&&bi(W)&&(S.data[bn]=W.title),null)))}(Ve.route,N,S,O)),(0,wt.b)(()=>fe++),we(1),(0,Nt.z)(Ve=>fe===W.length?(0,Ae.of)(w):De.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,wt.b)({next:()=>Tr=!0,complete:()=>{Tr||this.cancelNavigationTransition(Tn,"",2)}}))}),(0,wt.b)(Tn=>{const Tr=new Oi(Tn.id,this.urlSerializer.serialize(Tn.extractedUrl),this.urlSerializer.serialize(Tn.urlAfterRedirects),Tn.targetSnapshot);this.events.next(Tr)}))}),x(Mt=>{const Tn=Tr=>{const di=[];Tr.routeConfig?.loadComponent&&!Tr.routeConfig._loadedComponent&&di.push(this.configLoader.loadComponent(Tr.routeConfig).pipe((0,wt.b)(Ir=>{Tr.component=Ir}),(0,Ze.U)(()=>{})));for(const Ir of Tr.children)di.push(...Tn(Ir));return di};return(0,ae.a)(Tn(Mt.targetSnapshot.root)).pipe((0,Le.d)(),(0,dt.q)(1))}),x(()=>this.afterPreactivation()),(0,Ze.U)(Mt=>{const Tn=function ai(S,O,w){const N=ss(S,O._root,w?w._root:void 0);return new oi(N,O)}(w.routeReuseStrategy,Mt.targetSnapshot,Mt.currentRouterState);return this.currentTransition=fe={...Mt,targetRouterState:Tn},fe}),(0,wt.b)(()=>{this.events.next(new Uo)}),((S,O,w,N)=>(0,Ze.U)(W=>(new vr(O,W.targetRouterState,W.currentRouterState,w,N).activate(S),W)))(this.rootContexts,w.routeReuseStrategy,Mt=>this.events.next(Mt),this.inputBindingEnabled),(0,dt.q)(1),(0,wt.b)({next:Mt=>{Ve=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ls(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects))),w.titleStrategy?.updateTitle(Mt.targetRouterState.snapshot),Mt.resolve(!0)},complete:()=>{Ve=!0}}),(0,vt.R)(this.transitionAbortSubject.pipe((0,wt.b)(Mt=>{throw Mt}))),(0,st.x)(()=>{Ve||St||this.cancelNavigationTransition(fe,"",1),this.currentNavigation?.id===fe.id&&(this.currentNavigation=null)}),(0,Ke.K)(Mt=>{if(St=!0,Ne(Mt))this.events.next(new jr(fe.id,this.urlSerializer.serialize(fe.extractedUrl),Mt.message,Mt.cancellationCode)),function Y(S){return Ne(S)&&Xn(S.url)}(Mt)?this.events.next(new ws(Mt.url)):fe.resolve(!1);else{this.events.next(new ps(fe.id,this.urlSerializer.serialize(fe.extractedUrl),Mt,fe.targetSnapshot??void 0));try{fe.resolve(w.errorHandler(Mt))}catch(Tn){fe.reject(Tn)}}return De.E}))}))}cancelNavigationTransition(w,N,W){const fe=new jr(w.id,this.urlSerializer.serialize(w.extractedUrl),N,W);this.events.next(fe),w.resolve(!1)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Mn(S){return S!==dr}let Fr=(()=>{class S{buildTitle(w){let N,W=w.root;for(;void 0!==W;)N=this.getResolvedTitleForRoute(W)??N,W=W.children.find(fe=>fe.outlet===Kt);return N}getResolvedTitleForRoute(w){return w.data[bn]}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:function(){return(0,f.f3M)(ui)},providedIn:"root"})}return S})(),ui=(()=>{class S extends Fr{constructor(w){super(),this.title=w}updateTitle(w){const N=this.buildTitle(w);void 0!==N&&this.title.setTitle(N)}static#e=this.\u0275fac=function(N){return new(N||S)(f.LFG(Gt.Dx))};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),ni=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:function(){return(0,f.f3M)(pi)},providedIn:"root"})}return S})();class Ar{shouldDetach(O){return!1}store(O,w){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,w){return O.routeConfig===w.routeConfig}}let pi=(()=>{class S extends Ar{static#e=this.\u0275fac=function(){let w;return function(W){return(w||(w=f.n5z(S)))(W||S)}}();static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const Yr=new f.OlP("",{providedIn:"root",factory:()=>({})});let Qi=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:function(){return(0,f.f3M)(Ms)},providedIn:"root"})}return S})(),Ms=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,N){return w}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var ys=function(S){return S[S.COMPLETE=0]="COMPLETE",S[S.FAILED=1]="FAILED",S[S.REDIRECTING=2]="REDIRECTING",S}(ys||{});function $o(S,O){S.events.pipe((0,Ee.h)(w=>w instanceof ls||w instanceof jr||w instanceof ps||w instanceof eo),(0,Ze.U)(w=>w instanceof ls||w instanceof eo?ys.COMPLETE:w instanceof jr&&(0===w.code||1===w.code)?ys.REDIRECTING:ys.FAILED),(0,Ee.h)(w=>w!==ys.REDIRECTING),(0,dt.q)(1)).subscribe(()=>{O()})}function Gs(S){throw S}function Ci(S,O,w){return O.parse("/")}const lr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let js=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this._events=new Oe.x,this.options=(0,f.f3M)(Yr,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||Gs,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ci,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Qi),this.routeReuseStrategy=(0,f.f3M)(ni),this.titleStrategy=(0,f.f3M)(Fr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(se,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(Ht),this.urlSerializer=(0,f.f3M)(Vr),this.location=(0,f.f3M)(tt.Ye),this.componentInputBindingEnabled=!!(0,f.f3M)(ci,{optional:!0}),this.eventsSubscription=new Re.w0,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Bi(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(w=>{this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(N=>{try{const{currentTransition:W}=this.navigationTransitions;if(null===W)return void(Mc(N)&&this._events.next(N));if(N instanceof gi)Mn(W.source)&&(this.browserUrlTree=W.extractedUrl);else if(N instanceof eo)this.rawUrlTree=W.rawUrl;else if(N instanceof Vi){if("eager"===this.urlUpdateStrategy){if(!W.extras.skipLocationChange){const fe=this.urlHandlingStrategy.merge(W.urlAfterRedirects,W.rawUrl);this.setBrowserUrl(fe,W)}this.browserUrlTree=W.urlAfterRedirects}}else if(N instanceof Uo)this.currentUrlTree=W.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(W.urlAfterRedirects,W.rawUrl),this.routerState=W.targetRouterState,"deferred"===this.urlUpdateStrategy&&(W.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,W),this.browserUrlTree=W.urlAfterRedirects);else if(N instanceof jr)0!==N.code&&1!==N.code&&(this.navigated=!0),(3===N.code||2===N.code)&&this.restoreHistory(W);else if(N instanceof ws){const fe=this.urlHandlingStrategy.merge(N.url,W.currentRawUrl),Ve={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Mn(W.source)};this.scheduleNavigation(fe,dr,null,Ve,{resolve:W.resolve,reject:W.reject,promise:W.promise})}N instanceof ps&&this.restoreHistory(W,!0),N instanceof ls&&(this.navigated=!0),Mc(N)&&this._events.next(N)}catch(W){this.navigationTransitions.transitionAbortSubject.next(W)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),dr,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const N="popstate"===w.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,N,w.state)},0)}))}navigateToSyncWithBrowser(w,N,W){const fe={replaceUrl:!0},Ve=W?.navigationId?W:null;if(W){const Mt={...W};delete Mt.navigationId,delete Mt.\u0275routerPageId,0!==Object.keys(Mt).length&&(fe.state=Mt)}const St=this.parseUrl(w);this.scheduleNavigation(St,N,Ve,fe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(zr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,N={}){const{relativeTo:W,queryParams:fe,fragment:Ve,queryParamsHandling:St,preserveFragment:Mt}=N,Tn=Mt?this.currentUrlTree.fragment:Ve;let di,Tr=null;switch(St){case"merge":Tr={...this.currentUrlTree.queryParams,...fe};break;case"preserve":Tr=this.currentUrlTree.queryParams;break;default:Tr=fe||null}null!==Tr&&(Tr=this.removeEmptyProps(Tr));try{di=He(W?W.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),di=this.currentUrlTree.root}return nt(di,w,Tr,Tn??null)}navigateByUrl(w,N={skipLocationChange:!1}){const W=Xn(w)?w:this.parseUrl(w),fe=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(fe,dr,null,N)}navigate(w,N={skipLocationChange:!1}){return function vi(S){for(let O=0;O<S.length;O++)if(null==S[O])throw new f.vHH(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,N),N)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let N;try{N=this.urlSerializer.parse(w)}catch(W){N=this.malformedUriErrorHandler(W,this.urlSerializer,w)}return N}isActive(w,N){let W;if(W=!0===N?{...lr}:!1===N?{...qs}:N,Xn(w))return Mr(this.currentUrlTree,w,W);const fe=this.parseUrl(w);return Mr(this.currentUrlTree,fe,W)}removeEmptyProps(w){return Object.keys(w).reduce((N,W)=>{const fe=w[W];return null!=fe&&(N[W]=fe),N},{})}scheduleNavigation(w,N,W,fe,Ve){if(this.disposed)return Promise.resolve(!1);let St,Mt,Tn;Ve?(St=Ve.resolve,Mt=Ve.reject,Tn=Ve.promise):Tn=new Promise((di,Ir)=>{St=di,Mt=Ir});const Tr=this.pendingTasks.add();return $o(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Tr))}),this.navigationTransitions.handleNavigationRequest({source:N,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:w,extras:fe,resolve:St,reject:Mt,promise:Tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Tn.catch(di=>Promise.reject(di))}setBrowserUrl(w,N){const W=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(W)||N.extras.replaceUrl){const Ve={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState(W,"",Ve)}else{const fe={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId+1)};this.location.go(W,"",fe)}}restoreHistory(w,N=!1){if("computed"===this.canceledNavigationResolution){const fe=this.currentPageId-this.browserPageId;0!==fe?this.location.historyGo(fe):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===fe&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,N){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:N}:{navigationId:w}}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Mc(S){return!(S instanceof Uo||S instanceof ws)}let Zo=(()=>{class S{constructor(w,N,W,fe,Ve,St){this.router=w,this.route=N,this.tabIndexAttribute=W,this.renderer=fe,this.el=Ve,this.locationStrategy=St,this.href=null,this.commands=null,this.onChanges=new Oe.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Mt=Ve.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Mt||"area"===Mt,this.isAnchorElement?this.subscription=w.events.subscribe(Tn=>{Tn instanceof ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,N,W,fe,Ve){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||N||W||fe||Ve||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const w=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",w)}applyAttributeValue(w,N){const W=this.renderer,fe=this.el.nativeElement;null!==N?W.setAttribute(fe,w,N):W.removeAttribute(fe,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(N){return new(N||S)(f.Y36(js),f.Y36(ns),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(tt.S$))};static#t=this.\u0275dir=f.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(N,W){1&N&&f.NdJ("click",function(Ve){return W.onClick(Ve.button,Ve.ctrlKey,Ve.shiftKey,Ve.altKey,Ve.metaKey)}),2&N&&f.uIk("target",W.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",f.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",f.VuI],replaceUrl:["replaceUrl","replaceUrl",f.VuI],routerLink:"routerLink"},standalone:!0,features:[f.Xq5,f.TTD]})}return S})();class Pc{}let Xa=(()=>{class S{constructor(w,N,W,fe,Ve){this.router=w,this.injector=W,this.preloadingStrategy=fe,this.loader=Ve}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ee.h)(w=>w instanceof ls),(0,Dn.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,N){const W=[];for(const fe of N){fe.providers&&!fe._injector&&(fe._injector=(0,f.MMx)(fe.providers,w,`Route: ${fe.path}`));const Ve=fe._injector??w,St=fe._loadedInjector??Ve;(fe.loadChildren&&!fe._loadedRoutes&&void 0===fe.canLoad||fe.loadComponent&&!fe._loadedComponent)&&W.push(this.preloadConfig(Ve,fe)),(fe.children||fe._loadedRoutes)&&W.push(this.processRoutes(St,fe.children??fe._loadedRoutes))}return(0,_e.D)(W).pipe((0,Bt.J)())}preloadConfig(w,N){return this.preloadingStrategy.preload(N,()=>{let W;W=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(w,N):(0,Ae.of)(null);const fe=W.pipe((0,Nt.z)(Ve=>null===Ve?(0,Ae.of)(void 0):(N._loadedRoutes=Ve.routes,N._loadedInjector=Ve.injector,this.processRoutes(Ve.injector??w,Ve.routes))));if(N.loadComponent&&!N._loadedComponent){const Ve=this.loader.loadComponent(N);return(0,_e.D)([fe,Ve]).pipe((0,Bt.J)())}return fe})}static#e=this.\u0275fac=function(N){return new(N||S)(f.LFG(js),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Pc),f.LFG(j))};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const xc=new f.OlP("");let Od=(()=>{class S{constructor(w,N,W,fe,Ve={}){this.urlSerializer=w,this.transitions=N,this.viewportScroller=W,this.zone=fe,this.options=Ve,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ve.scrollPositionRestoration=Ve.scrollPositionRestoration||"disabled",Ve.anchorScrolling=Ve.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof gi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof ls?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof eo&&0===w.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Mi&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mi(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(N){f.$Z()};static#t=this.\u0275prov=f.Yz7({token:S,factory:S.\u0275fac})}return S})();function Mo(S,O){return{\u0275kind:S,\u0275providers:O}}function hr(){const S=(0,f.f3M)(f.zs3);return O=>{const w=S.get(f.z2F);if(O!==w.components[0])return;const N=S.get(js),W=S.get(Mu);1===S.get(Rc)&&N.initialNavigation(),S.get(Li,null,f.XFs.Optional)?.setUpPreloading(),S.get(xc,null,f.XFs.Optional)?.init(),N.resetRootComponentType(w.componentTypes[0]),W.closed||(W.next(),W.complete(),W.unsubscribe())}}const Mu=new f.OlP("",{factory:()=>new Oe.x}),Rc=new f.OlP("",{providedIn:"root",factory:()=>1}),Li=new f.OlP("");function Fa(S){return Mo(0,[{provide:Li,useExisting:Xa},{provide:Pc,useExisting:S}])}const qt=new f.OlP("ROUTER_FORROOT_GUARD"),$r=[tt.Ye,{provide:Vr,useClass:ar},js,Zs,{provide:ns,useFactory:function Wo(S){return S.routerState.root},deps:[js]},j,[]];function Ru(){return new f.PXZ("Router",js)}let ec=(()=>{class S{constructor(w){}static forRoot(w,N){return{ngModule:S,providers:[$r,[],{provide:se,multi:!0,useValue:w},{provide:qt,useFactory:ks,deps:[[js,new f.FiY,new f.tp0]]},{provide:Yr,useValue:N||{}},N?.useHash?{provide:tt.S$,useClass:tt.Do}:{provide:tt.S$,useClass:tt.b0},{provide:xc,useFactory:()=>{const S=(0,f.f3M)(tt.EM),O=(0,f.f3M)(f.R0b),w=(0,f.f3M)(Yr),N=(0,f.f3M)(Ht),W=(0,f.f3M)(Vr);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Od(W,N,S,O,w)}},N?.preloadingStrategy?Fa(N.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Ru},N?.initialNavigation?Nc(N):[],N?.bindToComponentInputs?Mo(8,[Ds,{provide:ci,useExisting:Ds}]).\u0275providers:[],[{provide:tc,useFactory:hr},{provide:f.tb,multi:!0,useExisting:tc}]]}}static forChild(w){return{ngModule:S,providers:[{provide:se,multi:!0,useValue:w}]}}static#e=this.\u0275fac=function(N){return new(N||S)(f.LFG(qt,8))};static#t=this.\u0275mod=f.oAB({type:S});static#n=this.\u0275inj=f.cJS({})}return S})();function ks(S){return"guarded"}function Nc(S){return["disabled"===S.initialNavigation?Mo(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const O=(0,f.f3M)(js);return()=>{O.setUpLocationChangeListener()}}},{provide:Rc,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?Mo(2,[{provide:Rc,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:O=>{const w=O.get(tt.V_,Promise.resolve());return()=>w.then(()=>new Promise(N=>{const W=O.get(js),fe=O.get(Mu);$o(W,()=>{N(!0)}),O.get(Ht).afterPreactivation=()=>(N(!0),fe.closed?(0,Ae.of)(void 0):fe),W.initialNavigation()}))}}]).\u0275providers:[]]}const tc=new f.OlP("")},3106:(an,lt,k)=>{"use strict";k.d(lt,{Z:()=>De});var f=k(9058),s=k(4537),B=k(534),Se=k(7879);class _e{constructor(Ye,We){this._delegate=Ye,this.firebase=We,(0,B._addComponent)(Ye,new s.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Ye,We=B._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(Ye);return!Fe.isInitialized()&&"EXPLICIT"===(null===(_t=Fe.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:We})}_removeServiceInstance(Ye,We=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(We)}_addComponent(Ye){(0,B._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,B._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ve(){const Re=function ae(Re){const Ye={},We={__esModule:!0,initializeApp:function Oe(dt,bt={}){const Ee=B.initializeApp(dt,bt);if((0,f.r3)(Ye,Ee.name))return Ye[Ee.name];const Nt=new Re(Ee,We);return Ye[Ee.name]=Nt,Nt},app:Fe,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Ze(dt){const bt=dt.name,Ee=bt.replace("-compat","");if(B._registerComponent(dt)&&"PUBLIC"===dt.type){const Nt=(Vt=Fe())=>{if("function"!=typeof Vt[Ee])throw de.create("invalid-app-argument",{appName:bt});return Vt[Ee]()};void 0!==dt.serviceProps&&(0,f.ZB)(Nt,dt.serviceProps),We[Ee]=Nt,Re.prototype[Ee]=function(...Vt){return this._getService.bind(this,bt).apply(this,dt.multipleInstances?Vt:[])}}return"PUBLIC"===dt.type?We[Ee]:null},removeApp:function _t(dt){delete Ye[dt]},useAsService:function Ge(dt,bt){return"serverAuth"===bt?null:bt},modularAPIs:B}};function Fe(dt){if(!(0,f.r3)(Ye,dt=dt||B._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:dt});return Ye[dt]}return We.default=We,Object.defineProperty(We,"apps",{get:function tt(){return Object.keys(Ye).map(dt=>Ye[dt])}}),Fe.App=Re,We}(_e);return Re.INTERNAL=Object.assign(Object.assign({},Re.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ye(We){(0,f.ZB)(Re,We)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Re}(),z=new Se.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Re=self.firebase.SDK_VERSION;Re&&Re.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=$;!function ye(Re){(0,B.registerVersion)("@firebase/app-compat","0.2.35",Re)}()},534:(an,lt,k)=>{"use strict";k.r(lt),k.d(lt,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>Be,_DEFAULT_ENTRY_NAME:()=>Bn,_addComponent:()=>Wn,_addOrOverwriteComponent:()=>Jr,_apps:()=>Er,_clearComponents:()=>wr,_components:()=>Gn,_getProvider:()=>gn,_isFirebaseApp:()=>ar,_isFirebaseServerApp:()=>Pr,_registerComponent:()=>yi,_removeServiceInstance:()=>Vr,_serverApps:()=>br,deleteApp:()=>Cr,getApp:()=>zn,getApps:()=>hi,initializeApp:()=>xt,initializeServerApp:()=>tn,onLog:()=>K,registerVersion:()=>ce,setLogLevel:()=>H});var f=k(5861),s=k(4537),B=k(7879),Se=k(9058);const _e=(yt,ft)=>ft.some(Ft=>yt instanceof Ft);let Ae,de;const $=new WeakMap,z=new WeakMap,oe=new WeakMap,be=new WeakMap,ye=new WeakMap;let Ye={get(yt,ft,Ft){if(yt instanceof IDBTransaction){if("done"===ft)return z.get(yt);if("objectStoreNames"===ft)return yt.objectStoreNames||oe.get(yt);if("store"===ft)return Ft.objectStoreNames[1]?void 0:Ft.objectStore(Ft.objectStoreNames[0])}return Oe(yt[ft])},set:(yt,ft,Ft)=>(yt[ft]=Ft,!0),has:(yt,ft)=>yt instanceof IDBTransaction&&("done"===ft||"store"===ft)||ft in yt};function Fe(yt){return"function"==typeof yt?function _t(yt){return yt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(yt)?function(...ft){return yt.apply(tt(this),ft),Oe($.get(this))}:function(...ft){return Oe(yt.apply(tt(this),ft))}:function(ft,...Ft){const un=yt.call(tt(this),ft,...Ft);return oe.set(un,ft.sort?ft.sort():[ft]),Oe(un)}}(yt):(yt instanceof IDBTransaction&&function Re(yt){if(z.has(yt))return;const ft=new Promise((Ft,un)=>{const Ln=()=>{yt.removeEventListener("complete",Un),yt.removeEventListener("error",vn),yt.removeEventListener("abort",vn)},Un=()=>{Ft(),Ln()},vn=()=>{un(yt.error||new DOMException("AbortError","AbortError")),Ln()};yt.addEventListener("complete",Un),yt.addEventListener("error",vn),yt.addEventListener("abort",vn)});z.set(yt,ft)}(yt),_e(yt,function ae(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(yt,Ye):yt)}function Oe(yt){if(yt instanceof IDBRequest)return function De(yt){const ft=new Promise((Ft,un)=>{const Ln=()=>{yt.removeEventListener("success",Un),yt.removeEventListener("error",vn)},Un=()=>{Ft(Oe(yt.result)),Ln()},vn=()=>{un(yt.error),Ln()};yt.addEventListener("success",Un),yt.addEventListener("error",vn)});return ft.then(Ft=>{Ft instanceof IDBCursor&&$.set(Ft,yt)}).catch(()=>{}),ye.set(ft,yt),ft}(yt);if(be.has(yt))return be.get(yt);const ft=Fe(yt);return ft!==yt&&(be.set(yt,ft),ye.set(ft,yt)),ft}const tt=yt=>ye.get(yt),dt=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],Ee=new Map;function Nt(yt,ft){if(!(yt instanceof IDBDatabase)||ft in yt||"string"!=typeof ft)return;if(Ee.get(ft))return Ee.get(ft);const Ft=ft.replace(/FromIndex$/,""),un=ft!==Ft,Ln=bt.includes(Ft);if(!(Ft in(un?IDBIndex:IDBObjectStore).prototype)||!Ln&&!dt.includes(Ft))return;const Un=function(){var vn=(0,f.Z)(function*($n,...Dr){const fi=this.transaction($n,Ln?"readwrite":"readonly");let ti=fi.store;return un&&(ti=ti.index(Dr.shift())),(yield Promise.all([ti[Ft](...Dr),Ln&&fi.done]))[0]});return function(Dr){return vn.apply(this,arguments)}}();return Ee.set(ft,Un),Un}!function We(yt){Ye=yt(Ye)}(yt=>({...yt,get:(ft,Ft,un)=>Nt(ft,Ft)||yt.get(ft,Ft,un),has:(ft,Ft)=>!!Nt(ft,Ft)||yt.has(ft,Ft)}));class Vt{constructor(ft){this.container=ft}getPlatformInfoString(){return this.container.getProviders().map(Ft=>{if(function Dn(yt){const ft=yt.getComponent();return"VERSION"===ft?.type}(Ft)){const un=Ft.getImmediate();return`${un.library}/${un.version}`}return null}).filter(Ft=>Ft).join(" ")}}const wt="@firebase/app",Ke="0.10.5",ut=new B.Yd("@firebase/app"),Bn="[DEFAULT]",Hn={[wt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Er=new Map,br=new Map,Gn=new Map;function Wn(yt,ft){try{yt.container.addComponent(ft)}catch(Ft){ut.debug(`Component ${ft.name} failed to register with FirebaseApp ${yt.name}`,Ft)}}function Jr(yt,ft){yt.container.addOrOverwriteComponent(ft)}function yi(yt){const ft=yt.name;if(Gn.has(ft))return ut.debug(`There were multiple attempts to register component ${ft}.`),!1;Gn.set(ft,yt);for(const Ft of Er.values())Wn(Ft,yt);for(const Ft of br.values())Wn(Ft,yt);return!0}function gn(yt,ft){const Ft=yt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ft&&Ft.triggerHeartbeat(),yt.container.getProvider(ft)}function Vr(yt,ft,Ft=Bn){gn(yt,ft).clearInstance(Ft)}function ar(yt){return void 0!==yt.options}function Pr(yt){return void 0!==yt.settings}function wr(){Gn.clear()}const at=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dt{constructor(ft,Ft,un){this._isDeleted=!1,this._options=Object.assign({},ft),this._config=Object.assign({},Ft),this._name=Ft.name,this._automaticDataCollectionEnabled=Ft.automaticDataCollectionEnabled,this._container=un,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ft){this._isDeleted=ft}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}class ue extends Dt{constructor(ft,Ft,un,Ln){const Un=void 0!==Ft.automaticDataCollectionEnabled&&Ft.automaticDataCollectionEnabled,vn={name:un,automaticDataCollectionEnabled:Un};super(void 0!==ft.apiKey?ft:ft.options,vn,Ln),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Un},Ft),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Ft.releaseOnDeref=void 0,ce(wt,Ke,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ft){this.isDeleted||(this._refCount++,void 0!==ft&&this._finalizationRegistry.register(ft,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Cr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw at.create("server-app-deleted")}}const Be="10.12.2";function xt(yt,ft={}){let Ft=yt;"object"!=typeof ft&&(ft={name:ft});const un=Object.assign({name:Bn,automaticDataCollectionEnabled:!1},ft),Ln=un.name;if("string"!=typeof Ln||!Ln)throw at.create("bad-app-name",{appName:String(Ln)});if(Ft||(Ft=(0,Se.aH)()),!Ft)throw at.create("no-options");const Un=Er.get(Ln);if(Un){if((0,Se.vZ)(Ft,Un.options)&&(0,Se.vZ)(un,Un.config))return Un;throw at.create("duplicate-app",{appName:Ln})}const vn=new s.H0(Ln);for(const Dr of Gn.values())vn.addComponent(Dr);const $n=new Dt(Ft,un,vn);return Er.set(Ln,$n),$n}function tn(yt,ft){if((0,Se.jU)())throw at.create("invalid-server-app-environment");let Ft;void 0===ft.automaticDataCollectionEnabled&&(ft.automaticDataCollectionEnabled=!1),Ft=ar(yt)?yt.options:yt;const un=Object.assign(Object.assign({},ft),Ft);if(void 0!==un.releaseOnDeref&&delete un.releaseOnDeref,void 0!==ft.releaseOnDeref&&typeof FinalizationRegistry>"u")throw at.create("finalization-registry-not-supported",{});const Un=""+(fi=JSON.stringify(un),[...fi].reduce((ti,dr)=>Math.imul(31,ti)+dr.charCodeAt(0)|0,0)),vn=br.get(Un);var fi;if(vn)return vn.incRefCount(ft.releaseOnDeref),vn;const $n=new s.H0(Un);for(const fi of Gn.values())$n.addComponent(fi);const Dr=new ue(Ft,ft,Un,$n);return br.set(Un,Dr),Dr}function zn(yt=Bn){const ft=Er.get(yt);if(!ft&&yt===Bn&&(0,Se.aH)())return xt();if(!ft)throw at.create("no-app",{appName:yt});return ft}function hi(){return Array.from(Er.values())}function Cr(yt){return qe.apply(this,arguments)}function qe(){return(qe=(0,f.Z)(function*(yt){let ft=!1;const Ft=yt.name;Er.has(Ft)?(ft=!0,Er.delete(Ft)):br.has(Ft)&&yt.decRefCount()<=0&&(br.delete(Ft),ft=!0),ft&&(yield Promise.all(yt.container.getProviders().map(un=>un.delete())),yt.isDeleted=!0)})).apply(this,arguments)}function ce(yt,ft,Ft){var un;let Ln=null!==(un=Hn[yt])&&void 0!==un?un:yt;Ft&&(Ln+=`-${Ft}`);const Un=Ln.match(/\s|\//),vn=ft.match(/\s|\//);if(Un||vn){const $n=[`Unable to register library "${Ln}" with version "${ft}":`];return Un&&$n.push(`library name "${Ln}" contains illegal characters (whitespace or "/")`),Un&&vn&&$n.push("and"),vn&&$n.push(`version name "${ft}" contains illegal characters (whitespace or "/")`),void ut.warn($n.join(" "))}yi(new s.wA(`${Ln}-version`,()=>({library:Ln,version:ft}),"VERSION"))}function K(yt,ft){if(null!==yt&&"function"!=typeof yt)throw at.create("invalid-log-argument");(0,B.Am)(yt,ft)}function H(yt){(0,B.Ub)(yt)}const U="firebase-heartbeat-database",Te=1,Xe="firebase-heartbeat-store";let kt=null;function Zt(){return kt||(kt=function Ze(yt,ft,{blocked:Ft,upgrade:un,blocking:Ln,terminated:Un}={}){const vn=indexedDB.open(yt,ft),$n=Oe(vn);return un&&vn.addEventListener("upgradeneeded",Dr=>{un(Oe(vn.result),Dr.oldVersion,Dr.newVersion,Oe(vn.transaction),Dr)}),Ft&&vn.addEventListener("blocked",Dr=>Ft(Dr.oldVersion,Dr.newVersion,Dr)),$n.then(Dr=>{Un&&Dr.addEventListener("close",()=>Un()),Ln&&Dr.addEventListener("versionchange",fi=>Ln(fi.oldVersion,fi.newVersion,fi))}).catch(()=>{}),$n}(U,Te,{upgrade:(yt,ft)=>{if(0===ft)try{yt.createObjectStore(Xe)}catch(Ft){console.warn(Ft)}}}).catch(yt=>{throw at.create("idb-open",{originalErrorMessage:yt.message})})),kt}function cn(){return(cn=(0,f.Z)(function*(yt){try{const Ft=(yield Zt()).transaction(Xe),un=yield Ft.objectStore(Xe).get(Je(yt));return yield Ft.done,un}catch(ft){if(ft instanceof Se.ZR)ut.warn(ft.message);else{const Ft=at.create("idb-get",{originalErrorMessage:ft?.message});ut.warn(Ft.message)}}})).apply(this,arguments)}function fn(yt,ft){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(yt,ft){try{const un=(yield Zt()).transaction(Xe,"readwrite");yield un.objectStore(Xe).put(ft,Je(yt)),yield un.done}catch(Ft){if(Ft instanceof Se.ZR)ut.warn(Ft.message);else{const un=at.create("idb-set",{originalErrorMessage:Ft?.message});ut.warn(un.message)}}})).apply(this,arguments)}function Je(yt){return`${yt.name}!${yt.options.appId}`}class jt{constructor(ft){this.container=ft,this._heartbeatsCache=null;const Ft=this.container.getProvider("app").getImmediate();this._storage=new ln(Ft),this._heartbeatsCachePromise=this._storage.read().then(un=>(this._heartbeatsCache=un,un))}triggerHeartbeat(){var ft=this;return(0,f.Z)(function*(){var Ft,un;const Un=ft.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vn=en();if((null!=(null===(Ft=ft._heartbeatsCache)||void 0===Ft?void 0:Ft.heartbeats)||(ft._heartbeatsCache=yield ft._heartbeatsCachePromise,null!=(null===(un=ft._heartbeatsCache)||void 0===un?void 0:un.heartbeats)))&&ft._heartbeatsCache.lastSentHeartbeatDate!==vn&&!ft._heartbeatsCache.heartbeats.some($n=>$n.date===vn))return ft._heartbeatsCache.heartbeats.push({date:vn,agent:Un}),ft._heartbeatsCache.heartbeats=ft._heartbeatsCache.heartbeats.filter($n=>{const Dr=new Date($n.date).valueOf();return Date.now()-Dr<=2592e6}),ft._storage.overwrite(ft._heartbeatsCache)})()}getHeartbeatsHeader(){var ft=this;return(0,f.Z)(function*(){var Ft;if(null===ft._heartbeatsCache&&(yield ft._heartbeatsCachePromise),null==(null===(Ft=ft._heartbeatsCache)||void 0===Ft?void 0:Ft.heartbeats)||0===ft._heartbeatsCache.heartbeats.length)return"";const un=en(),{heartbeatsToSend:Ln,unsentEntries:Un}=function En(yt,ft=1024){const Ft=[];let un=yt.slice();for(const Ln of yt){const Un=Ft.find(vn=>vn.agent===Ln.agent);if(Un){if(Un.dates.push(Ln.date),fr(Ft)>ft){Un.dates.pop();break}}else if(Ft.push({agent:Ln.agent,dates:[Ln.date]}),fr(Ft)>ft){Ft.pop();break}un=un.slice(1)}return{heartbeatsToSend:Ft,unsentEntries:un}}(ft._heartbeatsCache.heartbeats),vn=(0,Se.L)(JSON.stringify({version:2,heartbeats:Ln}));return ft._heartbeatsCache.lastSentHeartbeatDate=un,Un.length>0?(ft._heartbeatsCache.heartbeats=Un,yield ft._storage.overwrite(ft._heartbeatsCache)):(ft._heartbeatsCache.heartbeats=[],ft._storage.overwrite(ft._heartbeatsCache)),vn})()}}function en(){return(new Date).toISOString().substring(0,10)}class ln{constructor(ft){this.app=ft,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Se.hl)()&&(0,Se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ft=this;return(0,f.Z)(function*(){if(yield ft._canUseIndexedDBPromise){const un=yield function mn(yt){return cn.apply(this,arguments)}(ft.app);return un?.heartbeats?un:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ft){var Ft=this;return(0,f.Z)(function*(){var un;if(yield Ft._canUseIndexedDBPromise){const Un=yield Ft.read();return fn(Ft.app,{lastSentHeartbeatDate:null!==(un=ft.lastSentHeartbeatDate)&&void 0!==un?un:Un.lastSentHeartbeatDate,heartbeats:ft.heartbeats})}})()}add(ft){var Ft=this;return(0,f.Z)(function*(){var un;if(yield Ft._canUseIndexedDBPromise){const Un=yield Ft.read();return fn(Ft.app,{lastSentHeartbeatDate:null!==(un=ft.lastSentHeartbeatDate)&&void 0!==un?un:Un.lastSentHeartbeatDate,heartbeats:[...Un.heartbeats,...ft.heartbeats]})}})()}}function fr(yt){return(0,Se.L)(JSON.stringify({version:2,heartbeats:yt})).length}!function yn(yt){yi(new s.wA("platform-logger",ft=>new Vt(ft),"PRIVATE")),yi(new s.wA("heartbeat",ft=>new jt(ft),"PRIVATE")),ce(wt,Ke,yt),ce(wt,Ke,"esm2017"),ce("fire-js","")}("")},4537:(an,lt,k)=>{"use strict";k.d(lt,{H0:()=>ae,wA:()=>B});var f=k(5861),s=k(9058);class B{constructor($,z,oe){this.name=$,this.instanceFactory=z,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const Se="[DEFAULT]";class _e{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const oe=new s.BH;if(this.instancesDeferred.set(z,oe),this.isInitialized(z)||this.shouldAutoInitialize())try{const be=this.getOrInitializeService({instanceIdentifier:z});be&&oe.resolve(be)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const oe=this.normalizeInstanceIdentifier($?.identifier),be=null!==(z=$?.optional)&&void 0!==z&&z;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(ye){if(be)return null;throw ye}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function de(ve){return"EAGER"===ve.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:Se})}catch{}for(const[z,oe]of this.instancesDeferred.entries()){const be=this.normalizeInstanceIdentifier(z);try{const ye=this.getOrInitializeService({instanceIdentifier:be});oe.resolve(ye)}catch{}}}}clearInstance($=Se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...z.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=Se){return this.instances.has($)}getOptions($=Se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,oe=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const be=this.getOrInitializeService({instanceIdentifier:oe,options:z});for(const[ye,De]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(ye)&&De.resolve(be);return be}onInit($,z){var oe;const be=this.normalizeInstanceIdentifier(z),ye=null!==(oe=this.onInitCallbacks.get(be))&&void 0!==oe?oe:new Set;ye.add($),this.onInitCallbacks.set(be,ye);const De=this.instances.get(be);return De&&$(De,be),()=>{ye.delete($)}}invokeOnInitCallbacks($,z){const oe=this.onInitCallbacks.get(z);if(oe)for(const be of oe)try{be($,z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let oe=this.instances.get($);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=$,ve===Se?void 0:ve),options:z}),this.instances.set($,oe),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(oe,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,oe)}catch{}var ve;return oe||null}normalizeInstanceIdentifier($=Se){return this.component?this.component.multipleInstances?$:Se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new _e($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},7879:(an,lt,k)=>{"use strict";k.d(lt,{Am:()=>ve,Ub:()=>ae,Yd:()=>de,in:()=>s});const f=[];var s=function($){return $[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",$}(s||{});const B={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},Se=s.INFO,_e={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},Ae=($,z,...oe)=>{if(z<$.logLevel)return;const be=(new Date).toISOString(),ye=_e[z];if(!ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[ye](`[${be}]  ${$.name}:`,...oe)};class de{constructor(z){this.name=z,this._logLevel=Se,this._logHandler=Ae,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in s))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?B[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...z),this._logHandler(this,s.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...z),this._logHandler(this,s.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,s.INFO,...z),this._logHandler(this,s.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,s.WARN,...z),this._logHandler(this,s.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...z),this._logHandler(this,s.ERROR,...z)}}function ae($){f.forEach(z=>{z.setLogLevel($)})}function ve($,z){for(const oe of f){let be=null;z&&z.level&&(be=B[z.level]),oe.userLogHandler=null===$?null:(ye,De,...Re)=>{const Ye=Re.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch{return null}}).filter(We=>We).join(" ");De>=(be??ye.logLevel)&&$({level:s[De].toLowerCase(),message:Ye,args:Re,type:ye.name})}}}},3182:(an,lt,k)=>{"use strict";k.d(lt,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=k(534);(0,f.registerVersion)("firebase","10.12.2","app")},7142:(an,lt,k)=>{"use strict";k.d(lt,{Z:()=>f.Z});var f=k(3106);f.Z.registerVersion("firebase","10.12.2","app-compat")},6365:(an,lt,k)=>{"use strict";k.r(lt);var f=k(5861),s=k(3106),B=k(35),Se=k(9058),de=(k(534),k(7879),k(4537));function ae(){return window}function z(){return z=(0,f.Z)(function*(K,H,U){var Te;const{BuildInfo:Xe}=ae();(0,B.au)(H.sessionId,"AuthEvent did not contain a session ID");const kt=yield function We(K){return _t.apply(this,arguments)}(H.sessionId),Zt={};return(0,B.av)()?Zt.ibi=Xe.packageName:(0,B.aw)()?Zt.apn=Xe.packageName:(0,B.ax)(K,"operation-not-supported-in-this-environment"),Xe.displayName&&(Zt.appDisplayName=Xe.displayName),Zt.sessionId=kt,(0,B.ay)(K,U,H.type,void 0,null!==(Te=H.eventId)&&void 0!==Te?Te:void 0,Zt)}),z.apply(this,arguments)}function be(){return(be=(0,f.Z)(function*(K){const{BuildInfo:H}=ae(),U={};(0,B.av)()?U.iosBundleId=H.packageName:(0,B.aw)()?U.androidPackageName=H.packageName:(0,B.ax)(K,"operation-not-supported-in-this-environment"),yield(0,B.az)(K,U)})).apply(this,arguments)}function Re(){return(Re=(0,f.Z)(function*(K,H,U){const{cordova:Te}=ae();let Xe=()=>{};try{yield new Promise((kt,Zt)=>{let mn=null;function cn(){var Je;kt();const He=null===(Je=Te.plugins.browsertab)||void 0===Je?void 0:Je.close;"function"==typeof He&&He(),"function"==typeof U?.close&&U.close()}function fn(){mn||(mn=window.setTimeout(()=>{Zt((0,B.aB)(K,"redirect-cancelled-by-user"))},2e3))}function Xn(){"visible"===document?.visibilityState&&fn()}H.addPassiveListener(cn),document.addEventListener("resume",fn,!1),(0,B.aw)()&&document.addEventListener("visibilitychange",Xn,!1),Xe=()=>{H.removePassiveListener(cn),document.removeEventListener("resume",fn,!1),document.removeEventListener("visibilitychange",Xn,!1),mn&&window.clearTimeout(mn)}})}finally{Xe()}})).apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(K){const H=function Fe(K){if((0,B.au)(/[0-9a-zA-Z]+/.test(K),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(K);const H=new ArrayBuffer(K.length),U=new Uint8Array(H);for(let Te=0;Te<K.length;Te++)U[Te]=K.charCodeAt(Te);return U}(K),U=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(U)).map(Xe=>Xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class tt extends B.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(H)),super.onEvent(H)}initialized(){var H=this;return(0,f.Z)(function*(){yield H.initPromise})()}}function dt(K){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(K){const H=yield Vt()._get(Dn(K));return H&&(yield Vt()._remove(Dn(K))),H})).apply(this,arguments)}function Nt(){const K=[];for(let U=0;U<20;U++){const Te=Math.floor(62*Math.random());K.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Te))}return K.join("")}function Vt(){return(0,B.aE)(B.b)}function Dn(K){return(0,B.aF)("authEvent",K.config.apiKey,K.name)}function ut(K){if(!K?.includes("?"))return{};const[H,...U]=K.split("?");return(0,Se.zd)(U.join("?"))}const te=class we{constructor(){this._redirectPersistence=B.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=B.aG,this._overrideRedirectResult=B.aH}_initialize(H){var U=this;return(0,f.Z)(function*(){const Te=H._key();let Xe=U.eventManagers.get(Te);return Xe||(Xe=new tt(H),U.eventManagers.set(Te,Xe),U.attachCallbackListeners(H,Xe)),Xe})()}_openPopup(H){(0,B.ax)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,U,Te,Xe){var kt=this;return(0,f.Z)(function*(){!function Ye(K){var H,U,Te,Xe,kt,Zt,mn,cn,fn,Xn;const Je=ae();(0,B.aC)("function"==typeof(null===(H=Je?.universalLinks)||void 0===H?void 0:H.subscribe),K,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,B.aC)(typeof(null===(U=Je?.BuildInfo)||void 0===U?void 0:U.packageName)<"u",K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,B.aC)("function"==typeof(null===(kt=null===(Xe=null===(Te=Je?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===kt?void 0:kt.openUrl),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aC)("function"==typeof(null===(cn=null===(mn=null===(Zt=Je?.cordova)||void 0===Zt?void 0:Zt.plugins)||void 0===mn?void 0:mn.browsertab)||void 0===cn?void 0:cn.isAvailable),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aC)("function"==typeof(null===(Xn=null===(fn=Je?.cordova)||void 0===fn?void 0:fn.InAppBrowser)||void 0===Xn?void 0:Xn.open),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const Zt=yield kt._initialize(H);yield Zt.initialized(),Zt.resetRedirect(),(0,B.aI)(),yield kt._originValidation(H);const mn=function Ze(K,H,U=null){return{type:H,eventId:U,urlResponse:null,sessionId:Nt(),postBody:null,tenantId:K.tenantId,error:(0,B.aB)(K,"no-auth-event")}}(H,Te,Xe);yield function Ge(K,H){return Vt()._set(Dn(K),H)}(H,mn);const cn=yield function $(K,H,U){return z.apply(this,arguments)}(H,mn,U),fn=yield function ye(K){const{cordova:H}=ae();return new Promise(U=>{H.plugins.browsertab.isAvailable(Te=>{let Xe=null;Te?H.plugins.browsertab.openUrl(K):Xe=H.InAppBrowser.open(K,(0,B.aA)()?"_blank":"_system","location=yes"),U(Xe)})})}(cn);return function De(K,H,U){return Re.apply(this,arguments)}(H,Zt,fn)})()}_isIframeWebStorageSupported(H,U){throw new Error("Method not implemented.")}_originValidation(H){const U=H._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function oe(K){return be.apply(this,arguments)}(H)),this.originValidationPromises[U]}attachCallbackListeners(H,U){const{universalLinks:Te,handleOpenURL:Xe,BuildInfo:kt}=ae(),Zt=setTimeout((0,f.Z)(function*(){yield dt(H),U.onEvent(Ie())}),500),mn=function(){var Xn=(0,f.Z)(function*(Je){clearTimeout(Zt);const He=yield dt(H);let nt=null;He&&Je?.url&&(nt=function Ee(K,H){var U,Te;const Xe=function Ke(K){const H=ut(K),U=H.link?decodeURIComponent(H.link):void 0,Te=ut(U).link,Xe=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return ut(Xe).link||Xe||Te||U||K}(H);if(Xe.includes("/__/auth/callback")){const kt=ut(Xe),Zt=kt.firebaseError?function wt(K){try{return JSON.parse(K)}catch{return null}}(decodeURIComponent(kt.firebaseError)):null,mn=null===(Te=null===(U=Zt?.code)||void 0===U?void 0:U.split("auth/"))||void 0===Te?void 0:Te[1],cn=mn?(0,B.aB)(mn):null;return cn?{type:K.type,eventId:K.eventId,tenantId:K.tenantId,error:cn,urlResponse:null,sessionId:null,postBody:null}:{type:K.type,eventId:K.eventId,tenantId:K.tenantId,sessionId:K.sessionId,urlResponse:Xe,postBody:null}}return null}(He,Je.url)),U.onEvent(nt||Ie())});return function(He){return Xn.apply(this,arguments)}}();typeof Te<"u"&&"function"==typeof Te.subscribe&&Te.subscribe(null,mn);const cn=Xe,fn=`${kt.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var Xn=(0,f.Z)(function*(Je){if(Je.toLowerCase().startsWith(fn)&&mn({url:Je}),"function"==typeof cn)try{cn(Je)}catch(He){console.error(He)}});return function(Je){return Xn.apply(this,arguments)}}()}};function Ie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,B.aB)("no-auth-event")}}function Bt(){var K;return(null===(K=self?.location)||void 0===K?void 0:K.protocol)||null}function Kt(K=(0,Se.z$)()){return!("file:"!==Bt()&&"ionic:"!==Bt()&&"capacitor:"!==Bt()||!K.toLowerCase().match(/iphone|ipad|ipod|android/))}function sn(){try{const K=self.localStorage,H=B.aN();if(K)return K.setItem(H,"1"),K.removeItem(H),!function On(K=(0,Se.z$)()){return function Yn(){return(0,Se.w1)()&&11===document?.documentMode}()||function Pn(K=(0,Se.z$)()){return/Edge\/\d+/.test(K)}(K)}()||(0,Se.hl)()}catch{return Nn()&&(0,Se.hl)()}return!1}function Nn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gr(){return(function Gt(){return"http:"===Bt()||"https:"===Bt()}()||(0,Se.ru)()||Kt())&&!function bn(){return(0,Se.b$)()||(0,Se.UG)()}()&&sn()&&!Nn()}function Jn(){return Kt()&&typeof document<"u"}function Br(){return(Br=(0,f.Z)(function*(){return!!Jn()&&new Promise(K=>{const H=setTimeout(()=>{K(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),K(!0)})})})).apply(this,arguments)}const Mr={LOCAL:"local",NONE:"none",SESSION:"session"},sr=B.aC,Jt="persistence";function Bn(K){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(K){yield K._initializationPromise;const H=br(),U=B.aF(Jt,K.config.apiKey,K.name);H&&H.setItem(U,K._getPersistence())})).apply(this,arguments)}function br(){var K;try{return(null===(K=function xn(){return typeof window<"u"?window:null}())||void 0===K?void 0:K.sessionStorage)||null}catch{return null}}const Gn=B.aC;class Wn{constructor(){this.browserResolver=B.aE(B.k),this.cordovaResolver=B.aE(te),this.underlyingResolver=null,this._redirectPersistence=B.a,this._completeRedirectFn=B.aG,this._overrideRedirectResult=B.aH}_initialize(H){var U=this;return(0,f.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,U,Te,Xe){var kt=this;return(0,f.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openPopup(H,U,Te,Xe)})()}_openRedirect(H,U,Te,Xe){var kt=this;return(0,f.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openRedirect(H,U,Te,Xe)})()}_isIframeWebStorageSupported(H,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,U)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return Jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,f.Z)(function*(){if(H.underlyingResolver)return;const U=yield function Yt(){return Br.apply(this,arguments)}();H.underlyingResolver=U?H.cordovaResolver:H.browserResolver})()}}function Jr(K){return K.unwrap()}function gn(K){return ar(K)}function ar(K){const{_tokenResponse:H}=K instanceof Se.ZR?K.customData:K;if(!H)return null;if(!(K instanceof Se.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return B.P.credentialFromResult(K);const U=H.providerId;if(!U||U===B.p.PASSWORD)return null;let Te;switch(U){case B.p.GOOGLE:Te=B.X;break;case B.p.FACEBOOK:Te=B.W;break;case B.p.GITHUB:Te=B.Y;break;case B.p.TWITTER:Te=B.$;break;default:const{oauthIdToken:Xe,oauthAccessToken:kt,oauthTokenSecret:Zt,pendingToken:mn,nonce:cn}=H;return kt||Zt||Xe||mn?mn?U.startsWith("saml.")?B.aQ._create(U,mn):B.N._fromParams({providerId:U,signInMethod:U,pendingToken:mn,idToken:Xe,accessToken:kt}):new B.Z(U).credential({idToken:Xe,accessToken:kt,rawNonce:cn}):null}return K instanceof Se.ZR?Te.credentialFromError(K):Te.credentialFromResult(K)}function Pr(K,H){return H.catch(U=>{throw U instanceof Se.ZR&&function Vr(K,H){var U;const Te=null===(U=H.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===H?.code)H.resolver=new at(K,B.as(K,H));else if(Te){const Xe=ar(H),kt=H;Xe&&(kt.credential=Xe,kt.tenantId=Te.tenantId||void 0,kt.email=Te.email||void 0,kt.phoneNumber=Te.phoneNumber||void 0)}}(K,U),U}).then(U=>{const Xe=U.user;return{operationType:U.operationType,credential:gn(U),additionalUserInfo:B.aq(U),user:Dt.getOrCreate(Xe)}})}function wr(K,H){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(K,H){const U=yield H;return{verificationId:U.verificationId,confirm:Te=>Pr(K,U.confirm(Te))}})).apply(this,arguments)}class at{constructor(H,U){this.resolver=U,this.auth=function yi(K){return K.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return Pr(Jr(this.auth),this.resolver.resolveSignIn(H))}}class Dt{constructor(H){this._delegate=H,this.multiFactor=B.at(H)}static getOrCreate(H){return Dt.USER_MAP.has(H)||Dt.USER_MAP.set(H,new Dt(H)),Dt.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var U=this;return(0,f.Z)(function*(){return Pr(U.auth,B.a2(U._delegate,H))})()}linkWithPhoneNumber(H,U){var Te=this;return(0,f.Z)(function*(){return wr(Te.auth,B.l(Te._delegate,H,U))})()}linkWithPopup(H){var U=this;return(0,f.Z)(function*(){return Pr(U.auth,B.d(U._delegate,H,Wn))})()}linkWithRedirect(H){var U=this;return(0,f.Z)(function*(){return yield Bn(B.aJ(U.auth)),B.g(U._delegate,H,Wn)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var U=this;return(0,f.Z)(function*(){return Pr(U.auth,B.a3(U._delegate,H))})()}reauthenticateWithPhoneNumber(H,U){return wr(this.auth,B.r(this._delegate,H,U))}reauthenticateWithPopup(H){return Pr(this.auth,B.e(this._delegate,H,Wn))}reauthenticateWithRedirect(H){var U=this;return(0,f.Z)(function*(){return yield Bn(B.aJ(U.auth)),B.h(U._delegate,H,Wn)})()}sendEmailVerification(H){return B.ag(this._delegate,H)}unlink(H){var U=this;return(0,f.Z)(function*(){return yield B.ap(U._delegate,H),U})()}updateEmail(H){return B.al(this._delegate,H)}updatePassword(H){return B.am(this._delegate,H)}updatePhoneNumber(H){return B.u(this._delegate,H)}updateProfile(H){return B.ak(this._delegate,H)}verifyBeforeUpdateEmail(H,U){return B.ah(this._delegate,H,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Dt.USER_MAP=new WeakMap;const ue=B.aC;let Be=(()=>{class K{constructor(U,Te){if(this.app=U,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Xe}=U.options;ue(Xe,"invalid-api-key",{appName:U.name}),ue(Xe,"invalid-api-key",{appName:U.name});const kt=typeof window<"u"?Wn:void 0;this._delegate=Te.initialize({options:{persistence:tn(Xe,U.name),popupRedirectResolver:kt}}),this._delegate._updateErrorMap(B.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Dt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,Te){B.K(this._delegate,U,Te)}applyActionCode(U){return B.a7(this._delegate,U)}checkActionCode(U){return B.a8(this._delegate,U)}confirmPasswordReset(U,Te){return B.a6(this._delegate,U,Te)}createUserWithEmailAndPassword(U,Te){var Xe=this;return(0,f.Z)(function*(){return Pr(Xe._delegate,B.aa(Xe._delegate,U,Te))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return B.af(this._delegate,U)}isSignInWithEmailLink(U){return B.ad(this._delegate,U)}getRedirectResult(){var U=this;return(0,f.Z)(function*(){ue(gr(),U._delegate,"operation-not-supported-in-this-environment");const Te=yield B.j(U._delegate,Wn);return Te?Pr(U._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function Pe(K,H){(0,B.aJ)(K)._logFramework(H)}(this._delegate,U)}onAuthStateChanged(U,Te,Xe){const{next:kt,error:Zt,complete:mn}=xt(U,Te,Xe);return this._delegate.onAuthStateChanged(kt,Zt,mn)}onIdTokenChanged(U,Te,Xe){const{next:kt,error:Zt,complete:mn}=xt(U,Te,Xe);return this._delegate.onIdTokenChanged(kt,Zt,mn)}sendSignInLinkToEmail(U,Te){return B.ac(this._delegate,U,Te)}sendPasswordResetEmail(U,Te){return B.a5(this._delegate,U,Te||void 0)}setPersistence(U){var Te=this;return(0,f.Z)(function*(){let Xe;switch(function In(K,H){sr(Object.values(Mr).includes(H),K,"invalid-persistence-type"),(0,Se.b$)()?sr(H!==Mr.SESSION,K,"unsupported-persistence-type"):(0,Se.UG)()?sr(H===Mr.NONE,K,"unsupported-persistence-type"):Nn()?sr(H===Mr.NONE||H===Mr.LOCAL&&(0,Se.hl)(),K,"unsupported-persistence-type"):sr(H===Mr.NONE||sn(),K,"unsupported-persistence-type")}(Te._delegate,U),U){case Mr.SESSION:Xe=B.a;break;case Mr.LOCAL:Xe=(yield B.aE(B.i)._isAvailable())?B.i:B.b;break;case Mr.NONE:Xe=B.U;break;default:return B.ax("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(Xe)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return Pr(this._delegate,B.a0(this._delegate))}signInWithCredential(U){return Pr(this._delegate,B.a1(this._delegate,U))}signInWithCustomToken(U){return Pr(this._delegate,B.a4(this._delegate,U))}signInWithEmailAndPassword(U,Te){return Pr(this._delegate,B.ab(this._delegate,U,Te))}signInWithEmailLink(U,Te){return Pr(this._delegate,B.ae(this._delegate,U,Te))}signInWithPhoneNumber(U,Te){return wr(this._delegate,B.s(this._delegate,U,Te))}signInWithPopup(U){var Te=this;return(0,f.Z)(function*(){return ue(gr(),Te._delegate,"operation-not-supported-in-this-environment"),Pr(Te._delegate,B.c(Te._delegate,U,Wn))})()}signInWithRedirect(U){var Te=this;return(0,f.Z)(function*(){return ue(gr(),Te._delegate,"operation-not-supported-in-this-environment"),yield Bn(Te._delegate),B.f(Te._delegate,U,Wn)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return B.a9(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return K.Persistence=Mr,K})();function xt(K,H,U){let Te=K;"function"!=typeof K&&({next:Te,error:H,complete:U}=K);const Xe=Te;return{next:Zt=>Xe(Zt&&Dt.getOrCreate(Zt)),error:H,complete:U}}function tn(K,H){const U=function Er(K,H){const U=br();if(!U)return[];const Te=B.aF(Jt,K,H);switch(U.getItem(Te)){case Mr.NONE:return[B.U];case Mr.LOCAL:return[B.i,B.a];case Mr.SESSION:return[B.a];default:return[]}}(K,H);if(typeof self<"u"&&!U.includes(B.i)&&U.push(B.i),typeof window<"u")for(const Te of[B.b,B.a])U.includes(Te)||U.push(Te);return U.includes(B.U)||U.push(B.U),U}class zn{constructor(){this.providerId="phone",this._delegate=new B.P(Jr(s.Z.auth()))}static credential(H,U){return B.P.credential(H,U)}verifyPhoneNumber(H,U){return this._delegate.verifyPhoneNumber(H,U)}unwrap(){return this._delegate}}zn.PHONE_SIGN_IN_METHOD=B.P.PHONE_SIGN_IN_METHOD,zn.PROVIDER_ID=B.P.PROVIDER_ID;const hi=B.aC;class Cr{constructor(H,U,Te=s.Z.app()){var Xe;hi(null===(Xe=Te.options)||void 0===Xe?void 0:Xe.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new B.R(Te.auth(),H,U),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ce(K){K.INTERNAL.registerComponent(new de.wA("auth-compat",H=>{const U=H.getProvider("app-compat").getImmediate(),Te=H.getProvider("auth");return new Be(U,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B.A.EMAIL_SIGNIN,PASSWORD_RESET:B.A.PASSWORD_RESET,RECOVER_EMAIL:B.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:B.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:B.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:B.A.VERIFY_EMAIL}},EmailAuthProvider:B.V,FacebookAuthProvider:B.W,GithubAuthProvider:B.Y,GoogleAuthProvider:B.X,OAuthProvider:B.Z,SAMLAuthProvider:B._,PhoneAuthProvider:zn,PhoneMultiFactorGenerator:B.m,RecaptchaVerifier:Cr,TwitterAuthProvider:B.$,Auth:Be,AuthCredential:B.L,Error:Se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.5.9")}(s.Z)},1043:(an,lt,k)=>{"use strict";k.d(lt,{EK:()=>f.EK,ad:()=>f.ad});var f=k(5588)},5861:(an,lt,k)=>{"use strict";function f(B,Se,_e,Ae,de,ae,ve){try{var $=B[ae](ve),z=$.value}catch(oe){return void _e(oe)}$.done?Se(z):Promise.resolve(z).then(Ae,de)}function s(B){return function(){var Se=this,_e=arguments;return new Promise(function(Ae,de){var ae=B.apply(Se,_e);function ve(z){f(ae,Ae,de,ve,$,"next",z)}function $(z){f(ae,Ae,de,ve,$,"throw",z)}ve(void 0)})}}k.d(lt,{Z:()=>s})},7582:(an,lt,k)=>{"use strict";function Se(te,Ie){var Pe={};for(var je in te)Object.prototype.hasOwnProperty.call(te,je)&&Ie.indexOf(je)<0&&(Pe[je]=te[je]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var st=0;for(je=Object.getOwnPropertySymbols(te);st<je.length;st++)Ie.indexOf(je[st])<0&&Object.prototype.propertyIsEnumerable.call(te,je[st])&&(Pe[je[st]]=te[je[st]])}return Pe}function oe(te,Ie,Pe,je){return new(Pe||(Pe=Promise))(function(vt,Bt){function Gt(Yn){try{bn(je.next(Yn))}catch(Pn){Bt(Pn)}}function Kt(Yn){try{bn(je.throw(Yn))}catch(Pn){Bt(Pn)}}function bn(Yn){Yn.done?vt(Yn.value):function st(vt){return vt instanceof Pe?vt:new Pe(function(Bt){Bt(vt)})}(Yn.value).then(Gt,Kt)}bn((je=je.apply(te,Ie||[])).next())})}function Oe(te){return this instanceof Oe?(this.v=te,this):new Oe(te)}function tt(te,Ie,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,je=Pe.apply(te,Ie||[]),vt=[];return st={},Bt("next"),Bt("throw"),Bt("return"),st[Symbol.asyncIterator]=function(){return this},st;function Bt(On){je[On]&&(st[On]=function(sn){return new Promise(function(Nn,gr){vt.push([On,sn,Nn,gr])>1||Gt(On,sn)})})}function Gt(On,sn){try{!function Kt(On){On.value instanceof Oe?Promise.resolve(On.value.v).then(bn,Yn):Pn(vt[0][2],On)}(je[On](sn))}catch(Nn){Pn(vt[0][3],Nn)}}function bn(On){Gt("next",On)}function Yn(On){Gt("throw",On)}function Pn(On,sn){On(sn),vt.shift(),vt.length&&Gt(vt[0][0],vt[0][1])}}function Ge(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ie=te[Symbol.asyncIterator];return Ie?Ie.call(te):(te=function Re(te){var Ie="function"==typeof Symbol&&Symbol.iterator,Pe=Ie&&te[Ie],je=0;if(Pe)return Pe.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&je>=te.length&&(te=void 0),{value:te&&te[je++],done:!te}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),Pe={},je("next"),je("throw"),je("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function je(vt){Pe[vt]=te[vt]&&function(Bt){return new Promise(function(Gt,Kt){!function st(vt,Bt,Gt,Kt){Promise.resolve(Kt).then(function(bn){vt({value:bn,done:Gt})},Bt)}(Gt,Kt,(Bt=te[vt](Bt)).done,Bt.value)})}}}k.d(lt,{FC:()=>tt,KL:()=>Ge,_T:()=>Se,mG:()=>oe,qq:()=>Oe}),"function"==typeof SuppressedError&&SuppressedError}},an=>{an(an.s=3445)}]);